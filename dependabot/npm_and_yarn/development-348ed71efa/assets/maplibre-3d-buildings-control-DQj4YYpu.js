var s=Object.defineProperty;var n=(i,t,o)=>t in i?s(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o;var e=(i,t,o)=>n(i,typeof t!="symbol"?t+"":t,o);function l(i){i.addControl(new a,"top-right")}class a{constructor(){e(this,"map");e(this,"container");e(this,"button");e(this,"enabled",!1);e(this,"LAYER_ID","OS/TopographicArea_2/Building/1_3D");e(this,"MIN_ZOOM",15)}onAdd(t){return this.map=t,this.container=document.createElement("div"),this.container.className="maplibregl-ctrl maplibregl-ctrl-group",this.button=document.createElement("button"),this.button.type="button",this.button.textContent="üèô",this.button.disabled=t.getZoom()<this.MIN_ZOOM,this.button.addEventListener("click",()=>this.toggleExtrusions()),this.container.appendChild(this.button),t.on("zoom",()=>{this.button&&(this.button.disabled=t.getZoom()<this.MIN_ZOOM)}),this.container}onRemove(){this.container?.remove(),this.map=void 0}toggleExtrusions(){!this.map||!this.button||(this.map.getLayer(this.LAYER_ID)?(this.map.removeLayer(this.LAYER_ID),this.enabled=!1,this.button.classList.remove("active")):(this.map.isStyleLoaded()?this.addExtrusionLayer():this.map.once("style.load",()=>this.addExtrusionLayer()),this.enabled=!0,this.button.classList.add("active")))}addExtrusionLayer(){if(!this.map||this.map.getLayer(this.LAYER_ID))return;const t=this.map.getPaintProperty("OS/TopographicArea_2/Building/1","fill-color")??"#aaa";this.map.addLayer({id:this.LAYER_ID,type:"fill-extrusion",source:"esri","source-layer":"TopographicArea_2",filter:["==","_symbol",4],minzoom:this.MIN_ZOOM,paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["linear"],["zoom"],this.MIN_ZOOM,0,this.MIN_ZOOM+.05,["get","RelHMax"]],"fill-extrusion-opacity":["interpolate",["linear"],["zoom"],this.MIN_ZOOM,0,this.MIN_ZOOM+1,.9]}})}}export{l as add3DBuildingsControl};
