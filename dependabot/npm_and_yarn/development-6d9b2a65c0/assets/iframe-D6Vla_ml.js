const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Introduction-B6Fdp9eZ.js","./WithTooltip-SK46ZJ2J-BVyWuKgI.js","./preload-helper-PPVm8Dsz.js","./index-D_nPwwnz.js","./layers-docs-Chuj79Vj.js","./layers-example.stories-DoeqPFBO.js","./setupMapDemo-Dq6UKO8L.js","./overlays-docs-CuXZ6aE0.js","./overlays-example.stories-BfmWwWg2.js","./setup-docs-Cg02JLBk.js","./setup-example.stories-CgnyHVsa.js","./DocsRenderer-HT7GNKAR-BbS6k67g.js","./matchers-ZRZBO4XZ-DNwlV7PV.js"])))=>i.map(i=>d[i]);
var uK=Object.defineProperty;var hK=(t,e,r)=>e in t?uK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var xr=(t,e,r)=>hK(t,typeof e!="symbol"?e+"":e,r);import{_ as Zs}from"./preload-helper-PPVm8Dsz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var UT={},dK=Object.create,Xv=Object.defineProperty,pK=Object.getOwnPropertyDescriptor,XD=Object.getOwnPropertyNames,fK=Object.getPrototypeOf,mK=Object.prototype.hasOwnProperty,m=(t,e)=>Xv(t,"name",{value:e,configurable:!0}),A0=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),He=(t,e)=>function(){return e||(0,t[XD(t)[0]])((e={exports:{}}).exports,e),e.exports},Do=(t,e)=>{for(var r in e)Xv(t,r,{get:e[r],enumerable:!0})},gK=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of XD(e))!mK.call(t,i)&&i!==r&&Xv(t,i,{get:()=>e[i],enumerable:!(n=pK(e,i))||n.enumerable});return t},Ti=(t,e,r)=>(r=t!=null?dK(fK(t)):{},gK(e||!t||!t.__esModule?Xv(r,"default",{value:t,enumerable:!0}):r,t)),yK=He({"../node_modules/@ngard/tiny-isequal/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEqual=function(){var e=Object.prototype.toString,r=Object.getPrototypeOf,n=Object.getOwnPropertySymbols?function(i){return Object.keys(i).concat(Object.getOwnPropertySymbols(i))}:Object.keys;return function(i,l){return m(function c(s,p,g){var _,x,P,A=e.call(s),M=e.call(p);if(s===p)return!0;if(s==null||p==null)return!1;if(g.indexOf(s)>-1&&g.indexOf(p)>-1)return!0;if(g.push(s,p),A!=M||(_=n(s),x=n(p),_.length!=x.length||_.some(function(F){return!c(s[F],p[F],g)})))return!1;switch(A.slice(8,-1)){case"Symbol":return s.valueOf()==p.valueOf();case"Date":case"Number":return+s==+p||+s!=+s&&+p!=+p;case"RegExp":case"Function":case"String":case"Boolean":return""+s==""+p;case"Set":case"Map":_=s.entries(),x=p.entries();do if(!c((P=_.next()).value,x.next().value,g))return!1;while(!P.done);return!0;case"ArrayBuffer":s=new Uint8Array(s),p=new Uint8Array(p);case"DataView":s=new Uint8Array(s.buffer),p=new Uint8Array(p.buffer);case"Float32Array":case"Float64Array":case"Int8Array":case"Int16Array":case"Int32Array":case"Uint8Array":case"Uint16Array":case"Uint32Array":case"Uint8ClampedArray":case"Arguments":case"Array":if(s.length!=p.length)return!1;for(P=0;P<s.length;P++)if((P in s||P in p)&&(P in s!=P in p||!c(s[P],p[P],g)))return!1;return!0;case"Object":return c(r(s),r(p),g);default:return!1}},"n")(i,l,[])}}()}}),_K=He({"../node_modules/min-indent/index.js"(t,e){e.exports=r=>{const n=r.match(/^[ \t]*(?=\S)/gm);return n?n.reduce((i,l)=>Math.min(i,l.length),1/0):0}}}),bK=He({"../node_modules/strip-indent/index.js"(t,e){var r=_K();e.exports=n=>{const i=r(n);if(i===0)return n;const l=new RegExp(`^[ \\t]{${i}}`,"gm");return n.replace(l,"")}}}),vK=He({"../node_modules/indent-string/index.js"(t,e){e.exports=(r,n=1,i)=>{if(i={indent:" ",includeEmptyLines:!1,...i},typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof n!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof n}\``);if(typeof i.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof i.indent}\``);if(n===0)return r;const l=i.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(l,i.indent.repeat(n))}}}),QD=He({"../node_modules/redent/index.js"(t,e){var r=bK(),n=vK();e.exports=(i,l=0,c)=>n(r(i),l,c)}}),xK=He({"../node_modules/aria-query/lib/util/iteratorProxy.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function e(){var r=this,n=0,i={"@@iterator":m(function(){return i},"iterator"),next:m(function(){if(n<r.length){var c=r[n];return n=n+1,{done:!1,value:c}}else return{done:!0}},"next")};return i}m(e,"iteratorProxy"),t.default=e}}),zy=He({"../node_modules/aria-query/lib/util/iterationDecorator.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var e=r(xK());function r(l){return l&&l.__esModule?l:{default:l}}m(r,"_interopRequireDefault");function n(l){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(l)}m(n,"_typeof");function i(l,c){return typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"&&Object.defineProperty(l,Symbol.iterator,{value:e.default.bind(c)}),l}m(i,"iterationDecorator")}}),wK=He({"../node_modules/aria-query/lib/ariaPropsMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(zy());function r(x){return x&&x.__esModule?x:{default:x}}m(r,"_interopRequireDefault");function n(x,P){return p(x)||s(x,P)||l(x,P)||i()}m(n,"_slicedToArray");function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(i,"_nonIterableRest");function l(x,P){if(x){if(typeof x=="string")return c(x,P);var A={}.toString.call(x).slice(8,-1);return A==="Object"&&x.constructor&&(A=x.constructor.name),A==="Map"||A==="Set"?Array.from(x):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?c(x,P):void 0}}m(l,"_unsupportedIterableToArray");function c(x,P){(P==null||P>x.length)&&(P=x.length);for(var A=0,M=Array(P);A<P;A++)M[A]=x[A];return M}m(c,"_arrayLikeToArray");function s(x,P){var A=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(A!=null){var M,F,z,j,$=[],W=!0,X=!1;try{if(z=(A=A.call(x)).next,P===0){if(Object(A)!==A)return;W=!1}else for(;!(W=(M=z.call(A)).done)&&($.push(M.value),$.length!==P);W=!0);}catch(te){X=!0,F=te}finally{try{if(!W&&A.return!=null&&(j=A.return(),Object(j)!==j))return}finally{if(X)throw F}}return $}}m(s,"_iterableToArrayLimit");function p(x){if(Array.isArray(x))return x}m(p,"_arrayWithHoles");var g=[["aria-activedescendant",{type:"id"}],["aria-atomic",{type:"boolean"}],["aria-autocomplete",{type:"token",values:["inline","list","both","none"]}],["aria-braillelabel",{type:"string"}],["aria-brailleroledescription",{type:"string"}],["aria-busy",{type:"boolean"}],["aria-checked",{type:"tristate"}],["aria-colcount",{type:"integer"}],["aria-colindex",{type:"integer"}],["aria-colspan",{type:"integer"}],["aria-controls",{type:"idlist"}],["aria-current",{type:"token",values:["page","step","location","date","time",!0,!1]}],["aria-describedby",{type:"idlist"}],["aria-description",{type:"string"}],["aria-details",{type:"id"}],["aria-disabled",{type:"boolean"}],["aria-dropeffect",{type:"tokenlist",values:["copy","execute","link","move","none","popup"]}],["aria-errormessage",{type:"id"}],["aria-expanded",{type:"boolean",allowundefined:!0}],["aria-flowto",{type:"idlist"}],["aria-grabbed",{type:"boolean",allowundefined:!0}],["aria-haspopup",{type:"token",values:[!1,!0,"menu","listbox","tree","grid","dialog"]}],["aria-hidden",{type:"boolean",allowundefined:!0}],["aria-invalid",{type:"token",values:["grammar",!1,"spelling",!0]}],["aria-keyshortcuts",{type:"string"}],["aria-label",{type:"string"}],["aria-labelledby",{type:"idlist"}],["aria-level",{type:"integer"}],["aria-live",{type:"token",values:["assertive","off","polite"]}],["aria-modal",{type:"boolean"}],["aria-multiline",{type:"boolean"}],["aria-multiselectable",{type:"boolean"}],["aria-orientation",{type:"token",values:["vertical","undefined","horizontal"]}],["aria-owns",{type:"idlist"}],["aria-placeholder",{type:"string"}],["aria-posinset",{type:"integer"}],["aria-pressed",{type:"tristate"}],["aria-readonly",{type:"boolean"}],["aria-relevant",{type:"tokenlist",values:["additions","all","removals","text"]}],["aria-required",{type:"boolean"}],["aria-roledescription",{type:"string"}],["aria-rowcount",{type:"integer"}],["aria-rowindex",{type:"integer"}],["aria-rowspan",{type:"integer"}],["aria-selected",{type:"boolean",allowundefined:!0}],["aria-setsize",{type:"integer"}],["aria-sort",{type:"token",values:["ascending","descending","none","other"]}],["aria-valuemax",{type:"number"}],["aria-valuemin",{type:"number"}],["aria-valuenow",{type:"number"}],["aria-valuetext",{type:"string"}]],_={entries:m(function(){return g},"entries"),forEach:m(function(P){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,M=0,F=g;M<F.length;M++){var z=n(F[M],2),j=z[0],$=z[1];P.call(A,$,j,g)}},"forEach"),get:m(function(P){var A=g.filter(function(M){return M[0]===P})[0];return A&&A[1]},"get"),has:m(function(P){return!!_.get(P)},"has"),keys:m(function(){return g.map(function(P){var A=n(P,1),M=A[0];return M})},"keys"),values:m(function(){return g.map(function(P){var A=n(P,2),M=A[1];return M})},"values")};t.default=(0,e.default)(_,_.entries())}}),EK=He({"../node_modules/aria-query/lib/domMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(zy());function r(x){return x&&x.__esModule?x:{default:x}}m(r,"_interopRequireDefault");function n(x,P){return p(x)||s(x,P)||l(x,P)||i()}m(n,"_slicedToArray");function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(i,"_nonIterableRest");function l(x,P){if(x){if(typeof x=="string")return c(x,P);var A={}.toString.call(x).slice(8,-1);return A==="Object"&&x.constructor&&(A=x.constructor.name),A==="Map"||A==="Set"?Array.from(x):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?c(x,P):void 0}}m(l,"_unsupportedIterableToArray");function c(x,P){(P==null||P>x.length)&&(P=x.length);for(var A=0,M=Array(P);A<P;A++)M[A]=x[A];return M}m(c,"_arrayLikeToArray");function s(x,P){var A=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(A!=null){var M,F,z,j,$=[],W=!0,X=!1;try{if(z=(A=A.call(x)).next,P===0){if(Object(A)!==A)return;W=!1}else for(;!(W=(M=z.call(A)).done)&&($.push(M.value),$.length!==P);W=!0);}catch(te){X=!0,F=te}finally{try{if(!W&&A.return!=null&&(j=A.return(),Object(j)!==j))return}finally{if(X)throw F}}return $}}m(s,"_iterableToArrayLimit");function p(x){if(Array.isArray(x))return x}m(p,"_arrayWithHoles");var g=[["a",{reserved:!1}],["abbr",{reserved:!1}],["acronym",{reserved:!1}],["address",{reserved:!1}],["applet",{reserved:!1}],["area",{reserved:!1}],["article",{reserved:!1}],["aside",{reserved:!1}],["audio",{reserved:!1}],["b",{reserved:!1}],["base",{reserved:!0}],["bdi",{reserved:!1}],["bdo",{reserved:!1}],["big",{reserved:!1}],["blink",{reserved:!1}],["blockquote",{reserved:!1}],["body",{reserved:!1}],["br",{reserved:!1}],["button",{reserved:!1}],["canvas",{reserved:!1}],["caption",{reserved:!1}],["center",{reserved:!1}],["cite",{reserved:!1}],["code",{reserved:!1}],["col",{reserved:!0}],["colgroup",{reserved:!0}],["content",{reserved:!1}],["data",{reserved:!1}],["datalist",{reserved:!1}],["dd",{reserved:!1}],["del",{reserved:!1}],["details",{reserved:!1}],["dfn",{reserved:!1}],["dialog",{reserved:!1}],["dir",{reserved:!1}],["div",{reserved:!1}],["dl",{reserved:!1}],["dt",{reserved:!1}],["em",{reserved:!1}],["embed",{reserved:!1}],["fieldset",{reserved:!1}],["figcaption",{reserved:!1}],["figure",{reserved:!1}],["font",{reserved:!1}],["footer",{reserved:!1}],["form",{reserved:!1}],["frame",{reserved:!1}],["frameset",{reserved:!1}],["h1",{reserved:!1}],["h2",{reserved:!1}],["h3",{reserved:!1}],["h4",{reserved:!1}],["h5",{reserved:!1}],["h6",{reserved:!1}],["head",{reserved:!0}],["header",{reserved:!1}],["hgroup",{reserved:!1}],["hr",{reserved:!1}],["html",{reserved:!0}],["i",{reserved:!1}],["iframe",{reserved:!1}],["img",{reserved:!1}],["input",{reserved:!1}],["ins",{reserved:!1}],["kbd",{reserved:!1}],["keygen",{reserved:!1}],["label",{reserved:!1}],["legend",{reserved:!1}],["li",{reserved:!1}],["link",{reserved:!0}],["main",{reserved:!1}],["map",{reserved:!1}],["mark",{reserved:!1}],["marquee",{reserved:!1}],["menu",{reserved:!1}],["menuitem",{reserved:!1}],["meta",{reserved:!0}],["meter",{reserved:!1}],["nav",{reserved:!1}],["noembed",{reserved:!0}],["noscript",{reserved:!0}],["object",{reserved:!1}],["ol",{reserved:!1}],["optgroup",{reserved:!1}],["option",{reserved:!1}],["output",{reserved:!1}],["p",{reserved:!1}],["param",{reserved:!0}],["picture",{reserved:!0}],["pre",{reserved:!1}],["progress",{reserved:!1}],["q",{reserved:!1}],["rp",{reserved:!1}],["rt",{reserved:!1}],["rtc",{reserved:!1}],["ruby",{reserved:!1}],["s",{reserved:!1}],["samp",{reserved:!1}],["script",{reserved:!0}],["section",{reserved:!1}],["select",{reserved:!1}],["small",{reserved:!1}],["source",{reserved:!0}],["spacer",{reserved:!1}],["span",{reserved:!1}],["strike",{reserved:!1}],["strong",{reserved:!1}],["style",{reserved:!0}],["sub",{reserved:!1}],["summary",{reserved:!1}],["sup",{reserved:!1}],["table",{reserved:!1}],["tbody",{reserved:!1}],["td",{reserved:!1}],["textarea",{reserved:!1}],["tfoot",{reserved:!1}],["th",{reserved:!1}],["thead",{reserved:!1}],["time",{reserved:!1}],["title",{reserved:!0}],["tr",{reserved:!1}],["track",{reserved:!0}],["tt",{reserved:!1}],["u",{reserved:!1}],["ul",{reserved:!1}],["var",{reserved:!1}],["video",{reserved:!1}],["wbr",{reserved:!1}],["xmp",{reserved:!1}]],_={entries:m(function(){return g},"entries"),forEach:m(function(P){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,M=0,F=g;M<F.length;M++){var z=n(F[M],2),j=z[0],$=z[1];P.call(A,$,j,g)}},"forEach"),get:m(function(P){var A=g.filter(function(M){return M[0]===P})[0];return A&&A[1]},"get"),has:m(function(P){return!!_.get(P)},"has"),keys:m(function(){return g.map(function(P){var A=n(P,1),M=A[0];return M})},"keys"),values:m(function(){return g.map(function(P){var A=n(P,2),M=A[1];return M})},"values")};t.default=(0,e.default)(_,_.entries())}}),TK=He({"../node_modules/aria-query/lib/etc/roles/abstract/commandRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};t.default=e}}),SK=He({"../node_modules/aria-query/lib/etc/roles/abstract/compositeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};t.default=e}}),CK=He({"../node_modules/aria-query/lib/etc/roles/abstract/inputRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null},relatedConcepts:[{concept:{name:"input"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};t.default=e}}),PK=He({"../node_modules/aria-query/lib/etc/roles/abstract/landmarkRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),AK=He({"../node_modules/aria-query/lib/etc/roles/abstract/rangeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),RK=He({"../node_modules/aria-query/lib/etc/roles/abstract/roletypeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{"aria-atomic":null,"aria-busy":null,"aria-controls":null,"aria-current":null,"aria-describedby":null,"aria-details":null,"aria-dropeffect":null,"aria-flowto":null,"aria-grabbed":null,"aria-hidden":null,"aria-keyshortcuts":null,"aria-label":null,"aria-labelledby":null,"aria-live":null,"aria-owns":null,"aria-relevant":null,"aria-roledescription":null},relatedConcepts:[{concept:{name:"role"},module:"XHTML"},{concept:{name:"type"},module:"Dublin Core"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[]};t.default=e}}),IK=He({"../node_modules/aria-query/lib/etc/roles/abstract/sectionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"frontmatter"},module:"DTB"},{concept:{name:"level"},module:"DTB"},{concept:{name:"level"},module:"SMIL"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),MK=He({"../node_modules/aria-query/lib/etc/roles/abstract/sectionheadRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),OK=He({"../node_modules/aria-query/lib/etc/roles/abstract/selectRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","structure","section","group"]]};t.default=e}}),kK=He({"../node_modules/aria-query/lib/etc/roles/abstract/structureRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};t.default=e}}),LK=He({"../node_modules/aria-query/lib/etc/roles/abstract/widgetRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};t.default=e}}),DK=He({"../node_modules/aria-query/lib/etc/roles/abstract/windowRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-modal":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};t.default=e}}),NK=He({"../node_modules/aria-query/lib/etc/roles/ariaAbstractRoles.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=A(TK()),r=A(SK()),n=A(CK()),i=A(PK()),l=A(AK()),c=A(RK()),s=A(IK()),p=A(MK()),g=A(OK()),_=A(kK()),x=A(LK()),P=A(DK());function A(F){return F&&F.__esModule?F:{default:F}}m(A,"_interopRequireDefault");var M=[["command",e.default],["composite",r.default],["input",n.default],["landmark",i.default],["range",l.default],["roletype",c.default],["section",s.default],["sectionhead",p.default],["select",g.default],["structure",_.default],["widget",x.default],["window",P.default]];t.default=M}}),FK=He({"../node_modules/aria-query/lib/etc/roles/literal/alertRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-atomic":"true","aria-live":"assertive"},relatedConcepts:[{concept:{name:"alert"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),zK=He({"../node_modules/aria-query/lib/etc/roles/literal/alertdialogRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"alert"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","alert"],["roletype","window","dialog"]]};t.default=e}}),jK=He({"../node_modules/aria-query/lib/etc/roles/literal/applicationRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"Device Independence Delivery Unit"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),BK=He({"../node_modules/aria-query/lib/etc/roles/literal/articleRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"article"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","document"]]};t.default=e}}),qK=He({"../node_modules/aria-query/lib/etc/roles/literal/bannerRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element"],name:"header"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),$K=He({"../node_modules/aria-query/lib/etc/roles/literal/blockquoteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"blockquote"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),VK=He({"../node_modules/aria-query/lib/etc/roles/literal/buttonRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-pressed":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"button"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"image"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"reset"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"submit"}],name:"input"},module:"HTML"},{concept:{name:"button"},module:"HTML"},{concept:{name:"trigger"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};t.default=e}}),UK=He({"../node_modules/aria-query/lib/etc/roles/literal/captionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"caption"},module:"HTML"}],requireContextRole:["figure","grid","table"],requiredContextRole:["figure","grid","table"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),GK=He({"../node_modules/aria-query/lib/etc/roles/literal/cellRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-colindex":null,"aria-colspan":null,"aria-rowindex":null,"aria-rowspan":null},relatedConcepts:[{concept:{constraints:["ancestor table element has table role"],name:"td"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),HK=He({"../node_modules/aria-query/lib/etc/roles/literal/checkboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-errormessage":null,"aria-expanded":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"checkbox"}],name:"input"},module:"HTML"},{concept:{name:"option"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input"]]};t.default=e}}),JK=He({"../node_modules/aria-query/lib/etc/roles/literal/codeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"code"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),WK=He({"../node_modules/aria-query/lib/etc/roles/literal/columnheaderRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-sort":null},relatedConcepts:[{concept:{name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"col"}],name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"colgroup"}],name:"th"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","structure","section","cell","gridcell"],["roletype","widget","gridcell"],["roletype","structure","sectionhead"]]};t.default=e}}),ZK=He({"../node_modules/aria-query/lib/etc/roles/literal/comboboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-autocomplete":null,"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-expanded":"false","aria-haspopup":"listbox"},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"email"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"search"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"tel"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"text"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"url"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"url"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"multiple"},{constraints:["undefined"],name:"size"}],constraints:["the multiple attribute is not set and the size attribute does not have a value greater than 1"],name:"select"},module:"HTML"},{concept:{name:"select"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-controls":null,"aria-expanded":"false"},superClass:[["roletype","widget","input"]]};t.default=e}}),KK=He({"../node_modules/aria-query/lib/etc/roles/literal/complementaryRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element","scoped to the main element"],name:"aside"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-label"}],constraints:["scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"aside"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],constraints:["scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"aside"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),YK=He({"../node_modules/aria-query/lib/etc/roles/literal/contentinfoRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element"],name:"footer"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),XK=He({"../node_modules/aria-query/lib/etc/roles/literal/definitionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dd"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),QK=He({"../node_modules/aria-query/lib/etc/roles/literal/deletionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"del"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),eY=He({"../node_modules/aria-query/lib/etc/roles/literal/dialogRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dialog"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","window"]]};t.default=e}}),tY=He({"../node_modules/aria-query/lib/etc/roles/literal/directoryRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{module:"DAISY Guide"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","list"]]};t.default=e}}),rY=He({"../node_modules/aria-query/lib/etc/roles/literal/documentRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"Device Independence Delivery Unit"}},{concept:{name:"html"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),nY=He({"../node_modules/aria-query/lib/etc/roles/literal/emphasisRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"em"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),iY=He({"../node_modules/aria-query/lib/etc/roles/literal/feedRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["article"]],requiredProps:{},superClass:[["roletype","structure","section","list"]]};t.default=e}}),oY=He({"../node_modules/aria-query/lib/etc/roles/literal/figureRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"figure"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),sY=He({"../node_modules/aria-query/lib/etc/roles/literal/formRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"aria-label"}],name:"form"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],name:"form"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"name"}],name:"form"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),aY=He({"../node_modules/aria-query/lib/etc/roles/literal/genericRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"a"},module:"HTML"},{concept:{name:"area"},module:"HTML"},{concept:{name:"aside"},module:"HTML"},{concept:{name:"b"},module:"HTML"},{concept:{name:"bdo"},module:"HTML"},{concept:{name:"body"},module:"HTML"},{concept:{name:"data"},module:"HTML"},{concept:{name:"div"},module:"HTML"},{concept:{constraints:["scoped to the main element","scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"footer"},module:"HTML"},{concept:{constraints:["scoped to the main element","scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"header"},module:"HTML"},{concept:{name:"hgroup"},module:"HTML"},{concept:{name:"i"},module:"HTML"},{concept:{name:"pre"},module:"HTML"},{concept:{name:"q"},module:"HTML"},{concept:{name:"samp"},module:"HTML"},{concept:{name:"section"},module:"HTML"},{concept:{name:"small"},module:"HTML"},{concept:{name:"span"},module:"HTML"},{concept:{name:"u"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),lY=He({"../node_modules/aria-query/lib/etc/roles/literal/gridRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-multiselectable":null,"aria-readonly":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","structure","section","table"]]};t.default=e}}),cY=He({"../node_modules/aria-query/lib/etc/roles/literal/gridcellRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-selected":null},relatedConcepts:[{concept:{constraints:["ancestor table element has grid role","ancestor table element has treegrid role"],name:"td"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","widget"]]};t.default=e}}),uY=He({"../node_modules/aria-query/lib/etc/roles/literal/groupRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null},relatedConcepts:[{concept:{name:"details"},module:"HTML"},{concept:{name:"fieldset"},module:"HTML"},{concept:{name:"optgroup"},module:"HTML"},{concept:{name:"address"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),hY=He({"../node_modules/aria-query/lib/etc/roles/literal/headingRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-level":"2"},relatedConcepts:[{concept:{name:"h1"},module:"HTML"},{concept:{name:"h2"},module:"HTML"},{concept:{name:"h3"},module:"HTML"},{concept:{name:"h4"},module:"HTML"},{concept:{name:"h5"},module:"HTML"},{concept:{name:"h6"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-level":"2"},superClass:[["roletype","structure","sectionhead"]]};t.default=e}}),dY=He({"../node_modules/aria-query/lib/etc/roles/literal/imgRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"alt"}],name:"img"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"alt"}],name:"img"},module:"HTML"},{concept:{name:"imggroup"},module:"DTB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),pY=He({"../node_modules/aria-query/lib/etc/roles/literal/insertionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"ins"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),fY=He({"../node_modules/aria-query/lib/etc/roles/literal/linkRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"href"}],name:"a"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"href"}],name:"area"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};t.default=e}}),mY=He({"../node_modules/aria-query/lib/etc/roles/literal/listRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menu"},module:"HTML"},{concept:{name:"ol"},module:"HTML"},{concept:{name:"ul"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["listitem"]],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),gY=He({"../node_modules/aria-query/lib/etc/roles/literal/listboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-invalid":null,"aria-multiselectable":null,"aria-readonly":null,"aria-required":null,"aria-orientation":"vertical"},relatedConcepts:[{concept:{attributes:[{constraints:[">1"],name:"size"}],constraints:["the size attribute value is greater than 1"],name:"select"},module:"HTML"},{concept:{attributes:[{name:"multiple"}],name:"select"},module:"HTML"},{concept:{name:"datalist"},module:"HTML"},{concept:{name:"list"},module:"ARIA"},{concept:{name:"select"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["option","group"],["option"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};t.default=e}}),yY=He({"../node_modules/aria-query/lib/etc/roles/literal/listitemRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-level":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{constraints:["direct descendant of ol","direct descendant of ul","direct descendant of menu"],name:"li"},module:"HTML"},{concept:{name:"item"},module:"XForms"}],requireContextRole:["directory","list"],requiredContextRole:["directory","list"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),_Y=He({"../node_modules/aria-query/lib/etc/roles/literal/logRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-live":"polite"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),bY=He({"../node_modules/aria-query/lib/etc/roles/literal/mainRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"main"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),vY=He({"../node_modules/aria-query/lib/etc/roles/literal/markRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null},relatedConcepts:[{concept:{name:"mark"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),xY=He({"../node_modules/aria-query/lib/etc/roles/literal/marqueeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),wY=He({"../node_modules/aria-query/lib/etc/roles/literal/mathRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"math"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),EY=He({"../node_modules/aria-query/lib/etc/roles/literal/menuRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"vertical"},relatedConcepts:[{concept:{name:"MENU"},module:"JAPI"},{concept:{name:"list"},module:"ARIA"},{concept:{name:"select"},module:"XForms"},{concept:{name:"sidebar"},module:"DTB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["menuitem","group"],["menuitemradio","group"],["menuitemcheckbox","group"],["menuitem"],["menuitemcheckbox"],["menuitemradio"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};t.default=e}}),TY=He({"../node_modules/aria-query/lib/etc/roles/literal/menubarRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"horizontal"},relatedConcepts:[{concept:{name:"toolbar"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["menuitem","group"],["menuitemradio","group"],["menuitemcheckbox","group"],["menuitem"],["menuitemcheckbox"],["menuitemradio"]],requiredProps:{},superClass:[["roletype","widget","composite","select","menu"],["roletype","structure","section","group","select","menu"]]};t.default=e}}),SY=He({"../node_modules/aria-query/lib/etc/roles/literal/menuitemRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"MENU_ITEM"},module:"JAPI"},{concept:{name:"listitem"},module:"ARIA"},{concept:{name:"option"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};t.default=e}}),CY=He({"../node_modules/aria-query/lib/etc/roles/literal/menuitemcheckboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menuitem"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox"],["roletype","widget","command","menuitem"]]};t.default=e}}),PY=He({"../node_modules/aria-query/lib/etc/roles/literal/menuitemradioRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menuitem"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox","menuitemcheckbox"],["roletype","widget","command","menuitem","menuitemcheckbox"],["roletype","widget","input","radio"]]};t.default=e}}),AY=He({"../node_modules/aria-query/lib/etc/roles/literal/meterRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuetext":null,"aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[{concept:{name:"meter"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-valuenow":null},superClass:[["roletype","structure","range"]]};t.default=e}}),RY=He({"../node_modules/aria-query/lib/etc/roles/literal/navigationRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"nav"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),IY=He({"../node_modules/aria-query/lib/etc/roles/literal/noneRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[]};t.default=e}}),MY=He({"../node_modules/aria-query/lib/etc/roles/literal/noteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),OY=He({"../node_modules/aria-query/lib/etc/roles/literal/optionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-posinset":null,"aria-setsize":null,"aria-selected":"false"},relatedConcepts:[{concept:{name:"item"},module:"XForms"},{concept:{name:"listitem"},module:"ARIA"},{concept:{name:"option"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-selected":"false"},superClass:[["roletype","widget","input"]]};t.default=e}}),kY=He({"../node_modules/aria-query/lib/etc/roles/literal/paragraphRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"p"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),LY=He({"../node_modules/aria-query/lib/etc/roles/literal/presentationRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{attributes:[{name:"alt",value:""}],name:"img"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),DY=He({"../node_modules/aria-query/lib/etc/roles/literal/progressbarRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuetext":null},relatedConcepts:[{concept:{name:"progress"},module:"HTML"},{concept:{name:"status"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","range"],["roletype","widget"]]};t.default=e}}),NY=He({"../node_modules/aria-query/lib/etc/roles/literal/radioRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"radio"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input"]]};t.default=e}}),FY=He({"../node_modules/aria-query/lib/etc/roles/literal/radiogroupRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{name:"list"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["radio"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};t.default=e}}),zY=He({"../node_modules/aria-query/lib/etc/roles/literal/regionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"aria-label"}],name:"section"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],name:"section"},module:"HTML"},{concept:{name:"Device Independence Glossart perceivable unit"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),jY=He({"../node_modules/aria-query/lib/etc/roles/literal/rowRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-colindex":null,"aria-expanded":null,"aria-level":null,"aria-posinset":null,"aria-rowindex":null,"aria-selected":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"tr"},module:"HTML"}],requireContextRole:["grid","rowgroup","table","treegrid"],requiredContextRole:["grid","rowgroup","table","treegrid"],requiredOwnedElements:[["cell"],["columnheader"],["gridcell"],["rowheader"]],requiredProps:{},superClass:[["roletype","structure","section","group"],["roletype","widget"]]};t.default=e}}),BY=He({"../node_modules/aria-query/lib/etc/roles/literal/rowgroupRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"tbody"},module:"HTML"},{concept:{name:"tfoot"},module:"HTML"},{concept:{name:"thead"},module:"HTML"}],requireContextRole:["grid","table","treegrid"],requiredContextRole:["grid","table","treegrid"],requiredOwnedElements:[["row"]],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),qY=He({"../node_modules/aria-query/lib/etc/roles/literal/rowheaderRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-sort":null},relatedConcepts:[{concept:{attributes:[{name:"scope",value:"row"}],name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"rowgroup"}],name:"th"},module:"HTML"}],requireContextRole:["row","rowgroup"],requiredContextRole:["row","rowgroup"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","structure","section","cell","gridcell"],["roletype","widget","gridcell"],["roletype","structure","sectionhead"]]};t.default=e}}),$Y=He({"../node_modules/aria-query/lib/etc/roles/literal/scrollbarRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-valuetext":null,"aria-orientation":"vertical","aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-controls":null,"aria-valuenow":null},superClass:[["roletype","structure","range"],["roletype","widget"]]};t.default=e}}),VY=He({"../node_modules/aria-query/lib/etc/roles/literal/searchRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),UY=He({"../node_modules/aria-query/lib/etc/roles/literal/searchboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"search"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","input","textbox"]]};t.default=e}}),GY=He({"../node_modules/aria-query/lib/etc/roles/literal/separatorRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-orientation":"horizontal","aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":null,"aria-valuetext":null},relatedConcepts:[{concept:{name:"hr"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),HY=He({"../node_modules/aria-query/lib/etc/roles/literal/sliderRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null,"aria-readonly":null,"aria-valuetext":null,"aria-orientation":"horizontal","aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[{concept:{attributes:[{name:"type",value:"range"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-valuenow":null},superClass:[["roletype","widget","input"],["roletype","structure","range"]]};t.default=e}}),JY=He({"../node_modules/aria-query/lib/etc/roles/literal/spinbuttonRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-valuetext":null,"aria-valuenow":"0"},relatedConcepts:[{concept:{attributes:[{name:"type",value:"number"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","widget","input"],["roletype","structure","range"]]};t.default=e}}),WY=He({"../node_modules/aria-query/lib/etc/roles/literal/statusRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-atomic":"true","aria-live":"polite"},relatedConcepts:[{concept:{name:"output"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),ZY=He({"../node_modules/aria-query/lib/etc/roles/literal/strongRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"strong"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),KY=He({"../node_modules/aria-query/lib/etc/roles/literal/subscriptRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"sub"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),YY=He({"../node_modules/aria-query/lib/etc/roles/literal/superscriptRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"sup"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),XY=He({"../node_modules/aria-query/lib/etc/roles/literal/switchRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"button"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox"]]};t.default=e}}),QY=He({"../node_modules/aria-query/lib/etc/roles/literal/tabRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-posinset":null,"aria-setsize":null,"aria-selected":"false"},relatedConcepts:[],requireContextRole:["tablist"],requiredContextRole:["tablist"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","sectionhead"],["roletype","widget"]]};t.default=e}}),eX=He({"../node_modules/aria-query/lib/etc/roles/literal/tableRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-colcount":null,"aria-rowcount":null},relatedConcepts:[{concept:{name:"table"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),tX=He({"../node_modules/aria-query/lib/etc/roles/literal/tablistRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-level":null,"aria-multiselectable":null,"aria-orientation":"horizontal"},relatedConcepts:[{module:"DAISY",concept:{name:"guide"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["tab"]],requiredProps:{},superClass:[["roletype","widget","composite"]]};t.default=e}}),rX=He({"../node_modules/aria-query/lib/etc/roles/literal/tabpanelRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),nX=He({"../node_modules/aria-query/lib/etc/roles/literal/termRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dfn"},module:"HTML"},{concept:{name:"dt"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),iX=He({"../node_modules/aria-query/lib/etc/roles/literal/textboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-autocomplete":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null,"aria-multiline":null,"aria-placeholder":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{attributes:[{constraints:["undefined"],name:"type"},{constraints:["undefined"],name:"list"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"email"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"tel"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"text"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"url"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{name:"input"},module:"XForms"},{concept:{name:"textarea"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","input"]]};t.default=e}}),oX=He({"../node_modules/aria-query/lib/etc/roles/literal/timeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"time"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),sX=He({"../node_modules/aria-query/lib/etc/roles/literal/timerRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","status"]]};t.default=e}}),aX=He({"../node_modules/aria-query/lib/etc/roles/literal/toolbarRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"horizontal"},relatedConcepts:[{concept:{name:"menubar"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","group"]]};t.default=e}}),lX=He({"../node_modules/aria-query/lib/etc/roles/literal/tooltipRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),cX=He({"../node_modules/aria-query/lib/etc/roles/literal/treeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-multiselectable":null,"aria-required":null,"aria-orientation":"vertical"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["treeitem","group"],["treeitem"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};t.default=e}}),uX=He({"../node_modules/aria-query/lib/etc/roles/literal/treegridRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","widget","composite","grid"],["roletype","structure","section","table","grid"],["roletype","widget","composite","select","tree"],["roletype","structure","section","group","select","tree"]]};t.default=e}}),hX=He({"../node_modules/aria-query/lib/etc/roles/literal/treeitemRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-expanded":null,"aria-haspopup":null},relatedConcepts:[],requireContextRole:["group","tree"],requiredContextRole:["group","tree"],requiredOwnedElements:[],requiredProps:{"aria-selected":null},superClass:[["roletype","structure","section","listitem"],["roletype","widget","input","option"]]};t.default=e}}),dX=He({"../node_modules/aria-query/lib/etc/roles/ariaLiteralRoles.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=ut(FK()),r=ut(zK()),n=ut(jK()),i=ut(BK()),l=ut(qK()),c=ut($K()),s=ut(VK()),p=ut(UK()),g=ut(GK()),_=ut(HK()),x=ut(JK()),P=ut(WK()),A=ut(ZK()),M=ut(KK()),F=ut(YK()),z=ut(XK()),j=ut(QK()),$=ut(eY()),W=ut(tY()),X=ut(rY()),te=ut(nY()),ne=ut(iY()),Z=ut(oY()),U=ut(sY()),K=ut(aY()),he=ut(lY()),ue=ut(cY()),we=ut(uY()),Ie=ut(hY()),ee=ut(dY()),fe=ut(pY()),ve=ut(fY()),xe=ut(mY()),Xe=ut(gY()),Ke=ut(yY()),Ze=ut(_Y()),bt=ut(bY()),qe=ut(vY()),kt=ut(xY()),Jt=ut(wY()),Pt=ut(EY()),dt=ut(TY()),er=ut(SY()),Wt=ut(CY()),ar=ut(PY()),_t=ut(AY()),Ve=ut(RY()),pt=ut(IY()),lt=ut(MY()),Tt=ut(OY()),vt=ut(kY()),Dt=ut(LY()),Yt=ut(DY()),Bt=ut(NY()),wr=ut(FY()),Vr=ut(zY()),Ir=ut(jY()),Zr=ut(BY()),yr=ut(qY()),ur=ut($Y()),lr=ut(VY()),nr=ut(UY()),mr=ut(GY()),Yr=ut(HY()),ke=ut(JY()),oe=ut(WY()),ae=ut(ZY()),de=ut(KY()),Te=ut(YY()),Le=ut(XY()),je=ut(QY()),Je=ut(eX()),Fe=ut(tX()),tt=ut(rX()),ct=ut(nX()),it=ut(iX()),Ot=ut(oX()),$e=ut(sX()),Xt=ut(aX()),cr=ut(lX()),Nt=ut(cX()),Ht=ut(uX()),_r=ut(hX());function ut(Cr){return Cr&&Cr.__esModule?Cr:{default:Cr}}m(ut,"_interopRequireDefault");var Lt=[["alert",e.default],["alertdialog",r.default],["application",n.default],["article",i.default],["banner",l.default],["blockquote",c.default],["button",s.default],["caption",p.default],["cell",g.default],["checkbox",_.default],["code",x.default],["columnheader",P.default],["combobox",A.default],["complementary",M.default],["contentinfo",F.default],["definition",z.default],["deletion",j.default],["dialog",$.default],["directory",W.default],["document",X.default],["emphasis",te.default],["feed",ne.default],["figure",Z.default],["form",U.default],["generic",K.default],["grid",he.default],["gridcell",ue.default],["group",we.default],["heading",Ie.default],["img",ee.default],["insertion",fe.default],["link",ve.default],["list",xe.default],["listbox",Xe.default],["listitem",Ke.default],["log",Ze.default],["main",bt.default],["mark",qe.default],["marquee",kt.default],["math",Jt.default],["menu",Pt.default],["menubar",dt.default],["menuitem",er.default],["menuitemcheckbox",Wt.default],["menuitemradio",ar.default],["meter",_t.default],["navigation",Ve.default],["none",pt.default],["note",lt.default],["option",Tt.default],["paragraph",vt.default],["presentation",Dt.default],["progressbar",Yt.default],["radio",Bt.default],["radiogroup",wr.default],["region",Vr.default],["row",Ir.default],["rowgroup",Zr.default],["rowheader",yr.default],["scrollbar",ur.default],["search",lr.default],["searchbox",nr.default],["separator",mr.default],["slider",Yr.default],["spinbutton",ke.default],["status",oe.default],["strong",ae.default],["subscript",de.default],["superscript",Te.default],["switch",Le.default],["tab",je.default],["table",Je.default],["tablist",Fe.default],["tabpanel",tt.default],["term",ct.default],["textbox",it.default],["time",Ot.default],["timer",$e.default],["toolbar",Xt.default],["tooltip",cr.default],["tree",Nt.default],["treegrid",Ht.default],["treeitem",_r.default]];t.default=Lt}}),pX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docAbstractRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"abstract [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),fX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docAcknowledgmentsRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"acknowledgments [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),mX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docAfterwordRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"afterword [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),gX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docAppendixRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"appendix [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),yX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docBacklinkRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"referrer [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};t.default=e}}),_X=He({"../node_modules/aria-query/lib/etc/roles/dpub/docBiblioentryRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"EPUB biblioentry [EPUB-SSV]"},module:"EPUB"}],requireContextRole:["doc-bibliography"],requiredContextRole:["doc-bibliography"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","listitem"]]};t.default=e}}),bX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docBibliographyRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"bibliography [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["doc-biblioentry"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),vX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docBibliorefRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"biblioref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};t.default=e}}),xX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docChapterRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"chapter [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),wX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docColophonRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"colophon [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),EX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docConclusionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"conclusion [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),TX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docCoverRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"cover [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","img"]]};t.default=e}}),SX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docCreditRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"credit [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),CX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docCreditsRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"credits [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),PX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docDedicationRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"dedication [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),AX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docEndnoteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"rearnote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:["doc-endnotes"],requiredContextRole:["doc-endnotes"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","listitem"]]};t.default=e}}),RX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docEndnotesRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"rearnotes [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["doc-endnote"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),IX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docEpigraphRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"epigraph [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),MX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docEpilogueRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"epilogue [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),OX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docErrataRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"errata [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),kX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docExampleRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),LX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docFootnoteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"footnote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),DX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docForewordRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"foreword [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),NX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docGlossaryRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"glossary [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["definition"],["term"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),FX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docGlossrefRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"glossref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};t.default=e}}),zX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docIndexRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"index [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};t.default=e}}),jX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docIntroductionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"introduction [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),BX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docNoterefRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"noteref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};t.default=e}}),qX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docNoticeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"notice [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","note"]]};t.default=e}}),$X=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPagebreakRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"pagebreak [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","separator"]]};t.default=e}}),VX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPagefooterRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null,"aria-disabled":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),UX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPageheaderRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null,"aria-disabled":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),GX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPagelistRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"page-list [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};t.default=e}}),HX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPartRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"part [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),JX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPrefaceRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"preface [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),WX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPrologueRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"prologue [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),ZX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPullquoteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"pullquote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["none"]]};t.default=e}}),KX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docQnaRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"qna [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),YX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docSubtitleRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"subtitle [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","sectionhead"]]};t.default=e}}),XX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docTipRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"help [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","note"]]};t.default=e}}),QX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docTocRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"toc [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};t.default=e}}),eQ=He({"../node_modules/aria-query/lib/etc/roles/ariaDpubRoles.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=dt(pX()),r=dt(fX()),n=dt(mX()),i=dt(gX()),l=dt(yX()),c=dt(_X()),s=dt(bX()),p=dt(vX()),g=dt(xX()),_=dt(wX()),x=dt(EX()),P=dt(TX()),A=dt(SX()),M=dt(CX()),F=dt(PX()),z=dt(AX()),j=dt(RX()),$=dt(IX()),W=dt(MX()),X=dt(OX()),te=dt(kX()),ne=dt(LX()),Z=dt(DX()),U=dt(NX()),K=dt(FX()),he=dt(zX()),ue=dt(jX()),we=dt(BX()),Ie=dt(qX()),ee=dt($X()),fe=dt(VX()),ve=dt(UX()),xe=dt(GX()),Xe=dt(HX()),Ke=dt(JX()),Ze=dt(WX()),bt=dt(ZX()),qe=dt(KX()),kt=dt(YX()),Jt=dt(XX()),Pt=dt(QX());function dt(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}m(dt,"_interopRequireDefault");var er=[["doc-abstract",e.default],["doc-acknowledgments",r.default],["doc-afterword",n.default],["doc-appendix",i.default],["doc-backlink",l.default],["doc-biblioentry",c.default],["doc-bibliography",s.default],["doc-biblioref",p.default],["doc-chapter",g.default],["doc-colophon",_.default],["doc-conclusion",x.default],["doc-cover",P.default],["doc-credit",A.default],["doc-credits",M.default],["doc-dedication",F.default],["doc-endnote",z.default],["doc-endnotes",j.default],["doc-epigraph",$.default],["doc-epilogue",W.default],["doc-errata",X.default],["doc-example",te.default],["doc-footnote",ne.default],["doc-foreword",Z.default],["doc-glossary",U.default],["doc-glossref",K.default],["doc-index",he.default],["doc-introduction",ue.default],["doc-noteref",we.default],["doc-notice",Ie.default],["doc-pagebreak",ee.default],["doc-pagefooter",fe.default],["doc-pageheader",ve.default],["doc-pagelist",xe.default],["doc-part",Xe.default],["doc-preface",Ke.default],["doc-prologue",Ze.default],["doc-pullquote",bt.default],["doc-qna",qe.default],["doc-subtitle",kt.default],["doc-tip",Jt.default],["doc-toc",Pt.default]];t.default=er}}),tQ=He({"../node_modules/aria-query/lib/etc/roles/graphics/graphicsDocumentRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{module:"GRAPHICS",concept:{name:"graphics-object"}},{module:"ARIA",concept:{name:"img"}},{module:"ARIA",concept:{name:"article"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","document"]]};t.default=e}}),rQ=He({"../node_modules/aria-query/lib/etc/roles/graphics/graphicsObjectRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{module:"GRAPHICS",concept:{name:"graphics-document"}},{module:"ARIA",concept:{name:"group"}},{module:"ARIA",concept:{name:"img"}},{module:"GRAPHICS",concept:{name:"graphics-symbol"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","group"]]};t.default=e}}),nQ=He({"../node_modules/aria-query/lib/etc/roles/graphics/graphicsSymbolRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","img"]]};t.default=e}}),iQ=He({"../node_modules/aria-query/lib/etc/roles/ariaGraphicsRoles.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(tQ()),r=i(rQ()),n=i(nQ());function i(c){return c&&c.__esModule?c:{default:c}}m(i,"_interopRequireDefault");var l=[["graphics-document",e.default],["graphics-object",r.default],["graphics-symbol",n.default]];t.default=l}}),RC=He({"../node_modules/aria-query/lib/rolesMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=c(NK()),r=c(dX()),n=c(eQ()),i=c(iQ()),l=c(zy());function c(z){return z&&z.__esModule?z:{default:z}}m(c,"_interopRequireDefault");function s(z,j){var $=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!$){if(Array.isArray(z)||($=_(z))||j&&z&&typeof z.length=="number"){$&&(z=$);var W=0,X=m(function(){},"F");return{s:X,n:m(function(){return W>=z.length?{done:!0}:{done:!1,value:z[W++]}},"n"),e:m(function(K){throw K},"e"),f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,ne=!0,Z=!1;return{s:m(function(){$=$.call(z)},"s"),n:m(function(){var K=$.next();return ne=K.done,K},"n"),e:m(function(K){Z=!0,te=K},"e"),f:m(function(){try{ne||$.return==null||$.return()}finally{if(Z)throw te}},"f")}}m(s,"_createForOfIteratorHelper");function p(z,j){return A(z)||P(z,j)||_(z,j)||g()}m(p,"_slicedToArray");function g(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(g,"_nonIterableRest");function _(z,j){if(z){if(typeof z=="string")return x(z,j);var $={}.toString.call(z).slice(8,-1);return $==="Object"&&z.constructor&&($=z.constructor.name),$==="Map"||$==="Set"?Array.from(z):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?x(z,j):void 0}}m(_,"_unsupportedIterableToArray");function x(z,j){(j==null||j>z.length)&&(j=z.length);for(var $=0,W=Array(j);$<j;$++)W[$]=z[$];return W}m(x,"_arrayLikeToArray");function P(z,j){var $=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if($!=null){var W,X,te,ne,Z=[],U=!0,K=!1;try{if(te=($=$.call(z)).next,j===0){if(Object($)!==$)return;U=!1}else for(;!(U=(W=te.call($)).done)&&(Z.push(W.value),Z.length!==j);U=!0);}catch(he){K=!0,X=he}finally{try{if(!U&&$.return!=null&&(ne=$.return(),Object(ne)!==ne))return}finally{if(K)throw X}}return Z}}m(P,"_iterableToArrayLimit");function A(z){if(Array.isArray(z))return z}m(A,"_arrayWithHoles");var M=[].concat(e.default,r.default,n.default,i.default);M.forEach(function(z){var j=p(z,2),$=j[1],W=s($.superClass),X;try{for(W.s();!(X=W.n()).done;){var te=X.value,ne=s(te),Z;try{var U=m(function(){var he=Z.value,ue=M.filter(function(ve){var xe=p(ve,1),Xe=xe[0];return Xe===he})[0];if(ue)for(var we=ue[1],Ie=0,ee=Object.keys(we.props);Ie<ee.length;Ie++){var fe=ee[Ie];Object.prototype.hasOwnProperty.call($.props,fe)||($.props[fe]=we.props[fe])}},"_loop");for(ne.s();!(Z=ne.n()).done;)U()}catch(K){ne.e(K)}finally{ne.f()}}}catch(K){W.e(K)}finally{W.f()}});var F={entries:m(function(){return M},"entries"),forEach:m(function(j){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,W=s(M),X;try{for(W.s();!(X=W.n()).done;){var te=p(X.value,2),ne=te[0],Z=te[1];j.call($,Z,ne,M)}}catch(U){W.e(U)}finally{W.f()}},"forEach"),get:m(function(j){var $=M.filter(function(W){return W[0]===j})[0];return $&&$[1]},"get"),has:m(function(j){return!!F.get(j)},"has"),keys:m(function(){return M.map(function(j){var $=p(j,1),W=$[0];return W})},"keys"),values:m(function(){return M.map(function(j){var $=p(j,2),W=$[1];return W})},"values")};t.default=(0,l.default)(F,F.entries())}}),oQ=He({"../node_modules/aria-query/lib/elementRoleMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(zy()),r=n(RC());function n(ne){return ne&&ne.__esModule?ne:{default:ne}}m(n,"_interopRequireDefault");function i(ne,Z){return g(ne)||p(ne,Z)||c(ne,Z)||l()}m(i,"_slicedToArray");function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(l,"_nonIterableRest");function c(ne,Z){if(ne){if(typeof ne=="string")return s(ne,Z);var U={}.toString.call(ne).slice(8,-1);return U==="Object"&&ne.constructor&&(U=ne.constructor.name),U==="Map"||U==="Set"?Array.from(ne):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?s(ne,Z):void 0}}m(c,"_unsupportedIterableToArray");function s(ne,Z){(Z==null||Z>ne.length)&&(Z=ne.length);for(var U=0,K=Array(Z);U<Z;U++)K[U]=ne[U];return K}m(s,"_arrayLikeToArray");function p(ne,Z){var U=ne==null?null:typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(U!=null){var K,he,ue,we,Ie=[],ee=!0,fe=!1;try{if(ue=(U=U.call(ne)).next,Z===0){if(Object(U)!==U)return;ee=!1}else for(;!(ee=(K=ue.call(U)).done)&&(Ie.push(K.value),Ie.length!==Z);ee=!0);}catch(ve){fe=!0,he=ve}finally{try{if(!ee&&U.return!=null&&(we=U.return(),Object(we)!==we))return}finally{if(fe)throw he}}return Ie}}m(p,"_iterableToArrayLimit");function g(ne){if(Array.isArray(ne))return ne}m(g,"_arrayWithHoles");var _=[],x=r.default.keys();for(j=0;j<x.length;j++)if(P=x[j],A=r.default.get(P),A)for(M=[].concat(A.baseConcepts,A.relatedConcepts),F=m(function(){var Z=M[z];if(Z.module==="HTML"){var U=Z.concept;if(U){var K=_.filter(function(Ie){return W(Ie[0],U)})[0],he;K?he=K[1]:he=[];for(var ue=!0,we=0;we<he.length;we++)if(he[we]===P){ue=!1;break}ue&&he.push(P),K||_.push([U,he])}}},"_loop"),z=0;z<M.length;z++)F();var P,A,M,F,z,j,$={entries:m(function(){return _},"entries"),forEach:m(function(Z){for(var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,K=0,he=_;K<he.length;K++){var ue=i(he[K],2),we=ue[0],Ie=ue[1];Z.call(U,Ie,we,_)}},"forEach"),get:m(function(Z){var U=_.filter(function(K){return Z.name===K[0].name&&te(Z.attributes,K[0].attributes)})[0];return U&&U[1]},"get"),has:m(function(Z){return!!$.get(Z)},"has"),keys:m(function(){return _.map(function(Z){var U=i(Z,1),K=U[0];return K})},"keys"),values:m(function(){return _.map(function(Z){var U=i(Z,2),K=U[1];return K})},"values")};function W(ne,Z){return ne.name===Z.name&&X(ne.constraints,Z.constraints)&&te(ne.attributes,Z.attributes)}m(W,"ariaRoleRelationConceptEquals");function X(ne,Z){if(ne===void 0&&Z!==void 0||ne!==void 0&&Z===void 0)return!1;if(ne!==void 0&&Z!==void 0){if(ne.length!==Z.length)return!1;for(var U=0;U<ne.length;U++)if(ne[U]!==Z[U])return!1}return!0}m(X,"ariaRoleRelationConstraintsEquals");function te(ne,Z){if(ne===void 0&&Z!==void 0||ne!==void 0&&Z===void 0)return!1;if(ne!==void 0&&Z!==void 0){if(ne.length!==Z.length)return!1;for(var U=0;U<ne.length;U++){if(ne[U].name!==Z[U].name||ne[U].value!==Z[U].value||ne[U].constraints===void 0&&Z[U].constraints!==void 0||ne[U].constraints!==void 0&&Z[U].constraints===void 0)return!1;if(ne[U].constraints!==void 0&&Z[U].constraints!==void 0){if(ne[U].constraints.length!==Z[U].constraints.length)return!1;for(var K=0;K<ne[U].constraints.length;K++)if(ne[U].constraints[K]!==Z[U].constraints[K])return!1}}}return!0}m(te,"ariaRoleRelationConceptAttributeEquals"),t.default=(0,e.default)($,$.entries())}}),sQ=He({"../node_modules/aria-query/lib/roleElementMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(zy()),r=n(RC());function n(te){return te&&te.__esModule?te:{default:te}}m(n,"_interopRequireDefault");function i(te,ne){return g(te)||p(te,ne)||c(te,ne)||l()}m(i,"_slicedToArray");function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(l,"_nonIterableRest");function c(te,ne){if(te){if(typeof te=="string")return s(te,ne);var Z={}.toString.call(te).slice(8,-1);return Z==="Object"&&te.constructor&&(Z=te.constructor.name),Z==="Map"||Z==="Set"?Array.from(te):Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z)?s(te,ne):void 0}}m(c,"_unsupportedIterableToArray");function s(te,ne){(ne==null||ne>te.length)&&(ne=te.length);for(var Z=0,U=Array(ne);Z<ne;Z++)U[Z]=te[Z];return U}m(s,"_arrayLikeToArray");function p(te,ne){var Z=te==null?null:typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(Z!=null){var U,K,he,ue,we=[],Ie=!0,ee=!1;try{if(he=(Z=Z.call(te)).next,ne===0){if(Object(Z)!==Z)return;Ie=!1}else for(;!(Ie=(U=he.call(Z)).done)&&(we.push(U.value),we.length!==ne);Ie=!0);}catch(fe){ee=!0,K=fe}finally{try{if(!Ie&&Z.return!=null&&(ue=Z.return(),Object(ue)!==ue))return}finally{if(ee)throw K}}return we}}m(p,"_iterableToArrayLimit");function g(te){if(Array.isArray(te))return te}m(g,"_arrayWithHoles");var _=[],x=r.default.keys();for(W=0;W<x.length;W++)if(P=x[W],A=r.default.get(P),M=[],A){for(F=[].concat(A.baseConcepts,A.relatedConcepts),$=0;$<F.length;$++)z=F[$],z.module==="HTML"&&(j=z.concept,j!=null&&M.push(j));M.length>0&&_.push([P,M])}var P,A,M,F,z,j,$,W,X={entries:m(function(){return _},"entries"),forEach:m(function(ne){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,U=0,K=_;U<K.length;U++){var he=i(K[U],2),ue=he[0],we=he[1];ne.call(Z,we,ue,_)}},"forEach"),get:m(function(ne){var Z=_.filter(function(U){return U[0]===ne})[0];return Z&&Z[1]},"get"),has:m(function(ne){return!!X.get(ne)},"has"),keys:m(function(){return _.map(function(ne){var Z=i(ne,1),U=Z[0];return U})},"keys"),values:m(function(){return _.map(function(ne){var Z=i(ne,2),U=Z[1];return U})},"values")};t.default=(0,e.default)(X,X.entries())}}),IC=He({"../node_modules/aria-query/lib/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.roles=t.roleElements=t.elementRoles=t.dom=t.aria=void 0;var e=c(wK()),r=c(EK()),n=c(RC()),i=c(oQ()),l=c(sQ());function c(s){return s&&s.__esModule?s:{default:s}}m(c,"_interopRequireDefault"),t.aria=e.default,t.dom=r.default,t.roles=n.default,t.elementRoles=i.default,t.roleElements=l.default}}),eN=He({"../node_modules/picocolors/picocolors.browser.js"(t,e){var r=String,n=m(function(){return{isColorSupported:!1,reset:r,bold:r,dim:r,italic:r,underline:r,inverse:r,hidden:r,strikethrough:r,black:r,red:r,green:r,yellow:r,blue:r,magenta:r,cyan:r,white:r,gray:r,bgBlack:r,bgRed:r,bgGreen:r,bgYellow:r,bgBlue:r,bgMagenta:r,bgCyan:r,bgWhite:r,blackBright:r,redBright:r,greenBright:r,yellowBright:r,blueBright:r,magentaBright:r,cyanBright:r,whiteBright:r,bgBlackBright:r,bgRedBright:r,bgGreenBright:r,bgYellowBright:r,bgBlueBright:r,bgMagentaBright:r,bgCyanBright:r,bgWhiteBright:r}},"create");e.exports=n(),e.exports.createColors=n}}),tN=He({"../node_modules/css.escape/css.escape.js"(t,e){(function(r,n){typeof t=="object"?e.exports=n(r):typeof define=="function"&&define.amd?define([],n.bind(r,r)):n(r)})(typeof global<"u"?global:t,function(r){if(r.CSS&&r.CSS.escape)return r.CSS.escape;var n=m(function(i){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var l=String(i),c=l.length,s=-1,p,g="",_=l.charCodeAt(0);++s<c;){if(p=l.charCodeAt(s),p==0){g+="";continue}if(p>=1&&p<=31||p==127||s==0&&p>=48&&p<=57||s==1&&p>=48&&p<=57&&_==45){g+="\\"+p.toString(16)+" ";continue}if(s==0&&c==1&&p==45){g+="\\"+l.charAt(s);continue}if(p>=128||p==45||p==95||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122){g+=l.charAt(s);continue}g+="\\"+l.charAt(s)}return g},"cssEscape");return r.CSS||(r.CSS={}),r.CSS.escape=n,n})}}),rN=He({"../node_modules/pretty-format/node_modules/ansi-styles/index.js"(t,e){var r=10,n=m((c=0)=>s=>`\x1B[${38+c};5;${s}m`,"wrapAnsi256"),i=m((c=0)=>(s,p,g)=>`\x1B[${38+c};2;${s};${p};${g}m`,"wrapAnsi16m");function l(){const c=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.gray=s.color.blackBright,s.bgColor.bgGray=s.bgColor.bgBlackBright,s.color.grey=s.color.blackBright,s.bgColor.bgGrey=s.bgColor.bgBlackBright;for(const[p,g]of Object.entries(s)){for(const[_,x]of Object.entries(g))s[_]={open:`\x1B[${x[0]}m`,close:`\x1B[${x[1]}m`},g[_]=s[_],c.set(x[0],x[1]);Object.defineProperty(s,p,{value:g,enumerable:!1})}return Object.defineProperty(s,"codes",{value:c,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi256=n(),s.color.ansi16m=i(),s.bgColor.ansi256=n(r),s.bgColor.ansi16m=i(r),Object.defineProperties(s,{rgbToAnsi256:{value:m((p,g,_)=>p===g&&g===_?p<8?16:p>248?231:Math.round((p-8)/247*24)+232:16+36*Math.round(p/255*5)+6*Math.round(g/255*5)+Math.round(_/255*5),"value"),enumerable:!1},hexToRgb:{value:m(p=>{const g=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(p.toString(16));if(!g)return[0,0,0];let{colorString:_}=g.groups;_.length===3&&(_=_.split("").map(P=>P+P).join(""));const x=Number.parseInt(_,16);return[x>>16&255,x>>8&255,x&255]},"value"),enumerable:!1},hexToAnsi256:{value:m(p=>s.rgbToAnsi256(...s.hexToRgb(p)),"value"),enumerable:!1}}),s}m(l,"assembleStyles"),Object.defineProperty(e,"exports",{enumerable:!0,get:l})}}),Qv=He({"../node_modules/pretty-format/build/collections.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.printIteratorEntries=r,t.printIteratorValues=n,t.printListItems=i,t.printObjectProperties=l;var e=m((c,s)=>{const p=Object.keys(c).sort(s);return Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(c).forEach(g=>{Object.getOwnPropertyDescriptor(c,g).enumerable&&p.push(g)}),p},"getKeysOfEnumerableProperties");function r(c,s,p,g,_,x,P=": "){let A="",M=c.next();if(!M.done){A+=s.spacingOuter;const F=p+s.indent;for(;!M.done;){const z=x(M.value[0],s,F,g,_),j=x(M.value[1],s,F,g,_);A+=F+z+P+j,M=c.next(),M.done?s.min||(A+=","):A+=","+s.spacingInner}A+=s.spacingOuter+p}return A}m(r,"printIteratorEntries");function n(c,s,p,g,_,x){let P="",A=c.next();if(!A.done){P+=s.spacingOuter;const M=p+s.indent;for(;!A.done;)P+=M+x(A.value,s,M,g,_),A=c.next(),A.done?s.min||(P+=","):P+=","+s.spacingInner;P+=s.spacingOuter+p}return P}m(n,"printIteratorValues");function i(c,s,p,g,_,x){let P="";if(c.length){P+=s.spacingOuter;const A=p+s.indent;for(let M=0;M<c.length;M++)P+=A,M in c&&(P+=x(c[M],s,A,g,_)),M<c.length-1?P+=","+s.spacingInner:s.min||(P+=",");P+=s.spacingOuter+p}return P}m(i,"printListItems");function l(c,s,p,g,_,x){let P="";const A=e(c,s.compareKeys);if(A.length){P+=s.spacingOuter;const M=p+s.indent;for(let F=0;F<A.length;F++){const z=A[F],j=x(z,s,M,g,_),$=x(c[z],s,M,g,_);P+=M+j+": "+$,F<A.length-1?P+=","+s.spacingInner:s.min||(P+=",")}P+=s.spacingOuter+p}return P}m(l,"printObjectProperties")}}),aQ=He({"../node_modules/pretty-format/build/plugins/AsymmetricMatcher.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=Qv(),r=function(){return typeof globalThis<"u"?globalThis:typeof r<"u"?r:typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),n=r["jest-symbol-do-not-touch"]||r.Symbol,i=typeof n=="function"&&n.for?n.for("jest.asymmetricMatcher"):1267621,l=" ",c=m((_,x,P,A,M,F)=>{const z=_.toString();return z==="ArrayContaining"||z==="ArrayNotContaining"?++A>x.maxDepth?"["+z+"]":z+l+"["+(0,e.printListItems)(_.sample,x,P,A,M,F)+"]":z==="ObjectContaining"||z==="ObjectNotContaining"?++A>x.maxDepth?"["+z+"]":z+l+"{"+(0,e.printObjectProperties)(_.sample,x,P,A,M,F)+"}":z==="StringMatching"||z==="StringNotMatching"||z==="StringContaining"||z==="StringNotContaining"?z+l+F(_.sample,x,P,A,M):_.toAsymmetricMatcher()},"serialize");t.serialize=c;var s=m(_=>_&&_.$$typeof===i,"test");t.test=s;var p={serialize:c,test:s},g=p;t.default=g}}),lQ=He({"../node_modules/pretty-format/node_modules/ansi-regex/index.js"(t,e){e.exports=({onlyFirst:r=!1}={})=>{const n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(n,r?void 0:"g")}}}),cQ=He({"../node_modules/pretty-format/build/plugins/ConvertAnsi.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=n(lQ()),r=n(rN());function n(g){return g&&g.__esModule?g:{default:g}}m(n,"_interopRequireDefault");var i=m(g=>g.replace((0,e.default)(),_=>{switch(_){case r.default.red.close:case r.default.green.close:case r.default.cyan.close:case r.default.gray.close:case r.default.white.close:case r.default.yellow.close:case r.default.bgRed.close:case r.default.bgGreen.close:case r.default.bgYellow.close:case r.default.inverse.close:case r.default.dim.close:case r.default.bold.close:case r.default.reset.open:case r.default.reset.close:return"</>";case r.default.red.open:return"<red>";case r.default.green.open:return"<green>";case r.default.cyan.open:return"<cyan>";case r.default.gray.open:return"<gray>";case r.default.white.open:return"<white>";case r.default.yellow.open:return"<yellow>";case r.default.bgRed.open:return"<bgRed>";case r.default.bgGreen.open:return"<bgGreen>";case r.default.bgYellow.open:return"<bgYellow>";case r.default.inverse.open:return"<inverse>";case r.default.dim.open:return"<dim>";case r.default.bold.open:return"<bold>";default:return""}}),"toHumanReadableAnsi"),l=m(g=>typeof g=="string"&&!!g.match((0,e.default)()),"test");t.test=l;var c=m((g,_,x,P,A,M)=>M(i(g),_,x,P,A),"serialize");t.serialize=c;var s={serialize:c,test:l},p=s;t.default=p}}),uQ=He({"../node_modules/pretty-format/build/plugins/DOMCollection.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=Qv(),r=" ",n=["DOMStringMap","NamedNodeMap"],i=/^(HTML\w*Collection|NodeList)$/,l=m(x=>n.indexOf(x)!==-1||i.test(x),"testName"),c=m(x=>x&&x.constructor&&!!x.constructor.name&&l(x.constructor.name),"test");t.test=c;var s=m(x=>x.constructor.name==="NamedNodeMap","isNamedNodeMap"),p=m((x,P,A,M,F,z)=>{const j=x.constructor.name;return++M>P.maxDepth?"["+j+"]":(P.min?"":j+r)+(n.indexOf(j)!==-1?"{"+(0,e.printObjectProperties)(s(x)?Array.from(x).reduce(($,W)=>($[W.name]=W.value,$),{}):{...x},P,A,M,F,z)+"}":"["+(0,e.printListItems)(Array.from(x),P,A,M,F,z)+"]")},"serialize");t.serialize=p;var g={serialize:p,test:c},_=g;t.default=_}}),hQ=He({"../node_modules/pretty-format/build/plugins/lib/escapeHTML.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=e;function e(r){return r.replace(/</g,"&lt;").replace(/>/g,"&gt;")}m(e,"escapeHTML")}}),MC=He({"../node_modules/pretty-format/build/plugins/lib/markup.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.printText=t.printProps=t.printElementAsLeaf=t.printElement=t.printComment=t.printChildren=void 0;var e=r(hQ());function r(g){return g&&g.__esModule?g:{default:g}}m(r,"_interopRequireDefault");var n=m((g,_,x,P,A,M,F)=>{const z=P+x.indent,j=x.colors;return g.map($=>{const W=_[$];let X=F(W,x,z,A,M);return typeof W!="string"&&(X.indexOf(`
`)!==-1&&(X=x.spacingOuter+z+X+x.spacingOuter+P),X="{"+X+"}"),x.spacingInner+P+j.prop.open+$+j.prop.close+"="+j.value.open+X+j.value.close}).join("")},"printProps");t.printProps=n;var i=m((g,_,x,P,A,M)=>g.map(F=>_.spacingOuter+x+(typeof F=="string"?l(F,_):M(F,_,x,P,A))).join(""),"printChildren");t.printChildren=i;var l=m((g,_)=>{const x=_.colors.content;return x.open+(0,e.default)(g)+x.close},"printText");t.printText=l;var c=m((g,_)=>{const x=_.colors.comment;return x.open+"<!--"+(0,e.default)(g)+"-->"+x.close},"printComment");t.printComment=c;var s=m((g,_,x,P,A)=>{const M=P.colors.tag;return M.open+"<"+g+(_&&M.close+_+P.spacingOuter+A+M.open)+(x?">"+M.close+x+P.spacingOuter+A+M.open+"</"+g:(_&&!P.min?"":" ")+"/")+">"+M.close},"printElement");t.printElement=s;var p=m((g,_)=>{const x=_.colors.tag;return x.open+"<"+g+x.close+" "+x.open+" />"+x.close},"printElementAsLeaf");t.printElementAsLeaf=p}}),dQ=He({"../node_modules/pretty-format/build/plugins/DOMElement.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=MC(),r=1,n=3,i=8,l=11,c=/^((HTML|SVG)\w*)?Element$/,s=m(z=>{try{return typeof z.hasAttribute=="function"&&z.hasAttribute("is")}catch{return!1}},"testHasAttribute"),p=m(z=>{const j=z.constructor.name,{nodeType:$,tagName:W}=z,X=typeof W=="string"&&W.includes("-")||s(z);return $===r&&(c.test(j)||X)||$===n&&j==="Text"||$===i&&j==="Comment"||$===l&&j==="DocumentFragment"},"testNode"),g=m(z=>{var j;return(z==null||(j=z.constructor)===null||j===void 0?void 0:j.name)&&p(z)},"test");t.test=g;function _(z){return z.nodeType===n}m(_,"nodeIsText");function x(z){return z.nodeType===i}m(x,"nodeIsComment");function P(z){return z.nodeType===l}m(P,"nodeIsFragment");var A=m((z,j,$,W,X,te)=>{if(_(z))return(0,e.printText)(z.data,j);if(x(z))return(0,e.printComment)(z.data,j);const ne=P(z)?"DocumentFragment":z.tagName.toLowerCase();return++W>j.maxDepth?(0,e.printElementAsLeaf)(ne,j):(0,e.printElement)(ne,(0,e.printProps)(P(z)?[]:Array.from(z.attributes).map(Z=>Z.name).sort(),P(z)?{}:Array.from(z.attributes).reduce((Z,U)=>(Z[U.name]=U.value,Z),{}),j,$+j.indent,W,X,te),(0,e.printChildren)(Array.prototype.slice.call(z.childNodes||z.children),j,$+j.indent,W,X,te),j,$)},"serialize");t.serialize=A;var M={serialize:A,test:g},F=M;t.default=F}}),pQ=He({"../node_modules/pretty-format/build/plugins/Immutable.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=Qv(),r="@@__IMMUTABLE_ITERABLE__@@",n="@@__IMMUTABLE_LIST__@@",i="@@__IMMUTABLE_KEYED__@@",l="@@__IMMUTABLE_MAP__@@",c="@@__IMMUTABLE_ORDERED__@@",s="@@__IMMUTABLE_RECORD__@@",p="@@__IMMUTABLE_SEQ__@@",g="@@__IMMUTABLE_SET__@@",_="@@__IMMUTABLE_STACK__@@",x=m(U=>"Immutable."+U,"getImmutableName"),P=m(U=>"["+U+"]","printAsLeaf"),A=" ",M="",F=m((U,K,he,ue,we,Ie,ee)=>++ue>K.maxDepth?P(x(ee)):x(ee)+A+"{"+(0,e.printIteratorEntries)(U.entries(),K,he,ue,we,Ie)+"}","printImmutableEntries");function z(U){let K=0;return{next(){if(K<U._keys.length){const he=U._keys[K++];return{done:!1,value:[he,U.get(he)]}}return{done:!0,value:void 0}}}}m(z,"getRecordEntries");var j=m((U,K,he,ue,we,Ie)=>{const ee=x(U._name||"Record");return++ue>K.maxDepth?P(ee):ee+A+"{"+(0,e.printIteratorEntries)(z(U),K,he,ue,we,Ie)+"}"},"printImmutableRecord"),$=m((U,K,he,ue,we,Ie)=>{const ee=x("Seq");return++ue>K.maxDepth?P(ee):U[i]?ee+A+"{"+(U._iter||U._object?(0,e.printIteratorEntries)(U.entries(),K,he,ue,we,Ie):M)+"}":ee+A+"["+(U._iter||U._array||U._collection||U._iterable?(0,e.printIteratorValues)(U.values(),K,he,ue,we,Ie):M)+"]"},"printImmutableSeq"),W=m((U,K,he,ue,we,Ie,ee)=>++ue>K.maxDepth?P(x(ee)):x(ee)+A+"["+(0,e.printIteratorValues)(U.values(),K,he,ue,we,Ie)+"]","printImmutableValues"),X=m((U,K,he,ue,we,Ie)=>U[l]?F(U,K,he,ue,we,Ie,U[c]?"OrderedMap":"Map"):U[n]?W(U,K,he,ue,we,Ie,"List"):U[g]?W(U,K,he,ue,we,Ie,U[c]?"OrderedSet":"Set"):U[_]?W(U,K,he,ue,we,Ie,"Stack"):U[p]?$(U,K,he,ue,we,Ie):j(U,K,he,ue,we,Ie),"serialize");t.serialize=X;var te=m(U=>U&&(U[r]===!0||U[s]===!0),"test");t.test=te;var ne={serialize:X,test:te},Z=ne;t.default=Z}}),fQ=He({"../node_modules/pretty-format/node_modules/react-is/cjs/react-is.production.min.js"(t){var e=60103,r=60106,n=60107,i=60108,l=60114,c=60109,s=60110,p=60112,g=60113,_=60120,x=60115,P=60116,A=60121,M=60122,F=60117,z=60129,j=60131;typeof Symbol=="function"&&Symbol.for&&($=Symbol.for,e=$("react.element"),r=$("react.portal"),n=$("react.fragment"),i=$("react.strict_mode"),l=$("react.profiler"),c=$("react.provider"),s=$("react.context"),p=$("react.forward_ref"),g=$("react.suspense"),_=$("react.suspense_list"),x=$("react.memo"),P=$("react.lazy"),A=$("react.block"),M=$("react.server.block"),F=$("react.fundamental"),z=$("react.debug_trace_mode"),j=$("react.legacy_hidden"));var $;function W(ee){if(typeof ee=="object"&&ee!==null){var fe=ee.$$typeof;switch(fe){case e:switch(ee=ee.type,ee){case n:case l:case i:case g:case _:return ee;default:switch(ee=ee&&ee.$$typeof,ee){case s:case p:case P:case x:case c:return ee;default:return fe}}case r:return fe}}}m(W,"y");var X=c,te=e,ne=p,Z=n,U=P,K=x,he=r,ue=l,we=i,Ie=g;t.ContextConsumer=s,t.ContextProvider=X,t.Element=te,t.ForwardRef=ne,t.Fragment=Z,t.Lazy=U,t.Memo=K,t.Portal=he,t.Profiler=ue,t.StrictMode=we,t.Suspense=Ie,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(ee){return W(ee)===s},t.isContextProvider=function(ee){return W(ee)===c},t.isElement=function(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===e},t.isForwardRef=function(ee){return W(ee)===p},t.isFragment=function(ee){return W(ee)===n},t.isLazy=function(ee){return W(ee)===P},t.isMemo=function(ee){return W(ee)===x},t.isPortal=function(ee){return W(ee)===r},t.isProfiler=function(ee){return W(ee)===l},t.isStrictMode=function(ee){return W(ee)===i},t.isSuspense=function(ee){return W(ee)===g},t.isValidElementType=function(ee){return typeof ee=="string"||typeof ee=="function"||ee===n||ee===l||ee===z||ee===i||ee===g||ee===_||ee===j||typeof ee=="object"&&ee!==null&&(ee.$$typeof===P||ee.$$typeof===x||ee.$$typeof===c||ee.$$typeof===s||ee.$$typeof===p||ee.$$typeof===F||ee.$$typeof===A||ee[0]===M)},t.typeOf=W}}),mQ=He({"../node_modules/pretty-format/node_modules/react-is/index.js"(t,e){e.exports=fQ()}}),gQ=He({"../node_modules/pretty-format/build/plugins/ReactElement.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=i(mQ()),r=MC();function n(P){if(typeof WeakMap!="function")return null;var A=new WeakMap,M=new WeakMap;return(n=m(function(F){return F?M:A},"_getRequireWildcardCache"))(P)}m(n,"_getRequireWildcardCache");function i(P,A){if(!A&&P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var M=n(A);if(M&&M.has(P))return M.get(P);var F={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in P)if(j!=="default"&&Object.prototype.hasOwnProperty.call(P,j)){var $=z?Object.getOwnPropertyDescriptor(P,j):null;$&&($.get||$.set)?Object.defineProperty(F,j,$):F[j]=P[j]}return F.default=P,M&&M.set(P,F),F}m(i,"_interopRequireWildcard");var l=m((P,A=[])=>(Array.isArray(P)?P.forEach(M=>{l(M,A)}):P!=null&&P!==!1&&A.push(P),A),"getChildren"),c=m(P=>{const A=P.type;if(typeof A=="string")return A;if(typeof A=="function")return A.displayName||A.name||"Unknown";if(e.isFragment(P))return"React.Fragment";if(e.isSuspense(P))return"React.Suspense";if(typeof A=="object"&&A!==null){if(e.isContextProvider(P))return"Context.Provider";if(e.isContextConsumer(P))return"Context.Consumer";if(e.isForwardRef(P)){if(A.displayName)return A.displayName;const M=A.render.displayName||A.render.name||"";return M!==""?"ForwardRef("+M+")":"ForwardRef"}if(e.isMemo(P)){const M=A.displayName||A.type.displayName||A.type.name||"";return M!==""?"Memo("+M+")":"Memo"}}return"UNDEFINED"},"getType"),s=m(P=>{const{props:A}=P;return Object.keys(A).filter(M=>M!=="children"&&A[M]!==void 0).sort()},"getPropKeys"),p=m((P,A,M,F,z,j)=>++F>A.maxDepth?(0,r.printElementAsLeaf)(c(P),A):(0,r.printElement)(c(P),(0,r.printProps)(s(P),P.props,A,M+A.indent,F,z,j),(0,r.printChildren)(l(P.props.children),A,M+A.indent,F,z,j),A,M),"serialize");t.serialize=p;var g=m(P=>P!=null&&e.isElement(P),"test");t.test=g;var _={serialize:p,test:g},x=_;t.default=x}}),yQ=He({"../node_modules/pretty-format/build/plugins/ReactTestComponent.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=MC(),r=function(){return typeof globalThis<"u"?globalThis:typeof r<"u"?r:typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),n=r["jest-symbol-do-not-touch"]||r.Symbol,i=typeof n=="function"&&n.for?n.for("react.test.json"):245830487,l=m(_=>{const{props:x}=_;return x?Object.keys(x).filter(P=>x[P]!==void 0).sort():[]},"getPropKeys"),c=m((_,x,P,A,M,F)=>++A>x.maxDepth?(0,e.printElementAsLeaf)(_.type,x):(0,e.printElement)(_.type,_.props?(0,e.printProps)(l(_),_.props,x,P+x.indent,A,M,F):"",_.children?(0,e.printChildren)(_.children,x,P+x.indent,A,M,F):"",x,P),"serialize");t.serialize=c;var s=m(_=>_&&_.$$typeof===i,"test");t.test=s;var p={serialize:c,test:s},g=p;t.default=g}}),_Q=He({"../node_modules/pretty-format/build/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_OPTIONS=void 0,t.format=Wt,t.plugins=void 0;var e=_(rN()),r=Qv(),n=_(aQ()),i=_(cQ()),l=_(uQ()),c=_(dQ()),s=_(pQ()),p=_(gQ()),g=_(yQ());function _(Ve){return Ve&&Ve.__esModule?Ve:{default:Ve}}m(_,"_interopRequireDefault");var x=Object.prototype.toString,P=Date.prototype.toISOString,A=Error.prototype.toString,M=RegExp.prototype.toString,F=m(Ve=>typeof Ve.constructor=="function"&&Ve.constructor.name||"Object","getConstructorName"),z=m(Ve=>typeof window<"u"&&Ve===window,"isWindow"),j=/^Symbol\((.*)\)(.*)$/,$=/\n/gi,W=class extends Error{constructor(pt,lt){super(pt),this.stack=lt,this.name=this.constructor.name}};m(W,"PrettyFormatPluginError");var X=W;function te(Ve){return Ve==="[object Array]"||Ve==="[object ArrayBuffer]"||Ve==="[object DataView]"||Ve==="[object Float32Array]"||Ve==="[object Float64Array]"||Ve==="[object Int8Array]"||Ve==="[object Int16Array]"||Ve==="[object Int32Array]"||Ve==="[object Uint8Array]"||Ve==="[object Uint8ClampedArray]"||Ve==="[object Uint16Array]"||Ve==="[object Uint32Array]"}m(te,"isToStringedArrayType");function ne(Ve){return Object.is(Ve,-0)?"-0":String(Ve)}m(ne,"printNumber");function Z(Ve){return`${Ve}n`}m(Z,"printBigInt");function U(Ve,pt){return pt?"[Function "+(Ve.name||"anonymous")+"]":"[Function]"}m(U,"printFunction");function K(Ve){return String(Ve).replace(j,"Symbol($1)")}m(K,"printSymbol");function he(Ve){return"["+A.call(Ve)+"]"}m(he,"printError");function ue(Ve,pt,lt,Tt){if(Ve===!0||Ve===!1)return""+Ve;if(Ve===void 0)return"undefined";if(Ve===null)return"null";const vt=typeof Ve;if(vt==="number")return ne(Ve);if(vt==="bigint")return Z(Ve);if(vt==="string")return Tt?'"'+Ve.replace(/"|\\/g,"\\$&")+'"':'"'+Ve+'"';if(vt==="function")return U(Ve,pt);if(vt==="symbol")return K(Ve);const Dt=x.call(Ve);return Dt==="[object WeakMap]"?"WeakMap {}":Dt==="[object WeakSet]"?"WeakSet {}":Dt==="[object Function]"||Dt==="[object GeneratorFunction]"?U(Ve,pt):Dt==="[object Symbol]"?K(Ve):Dt==="[object Date]"?isNaN(+Ve)?"Date { NaN }":P.call(Ve):Dt==="[object Error]"?he(Ve):Dt==="[object RegExp]"?lt?M.call(Ve).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"):M.call(Ve):Ve instanceof Error?he(Ve):null}m(ue,"printBasicValue");function we(Ve,pt,lt,Tt,vt,Dt){if(vt.indexOf(Ve)!==-1)return"[Circular]";vt=vt.slice(),vt.push(Ve);const Yt=++Tt>pt.maxDepth,Bt=pt.min;if(pt.callToJSON&&!Yt&&Ve.toJSON&&typeof Ve.toJSON=="function"&&!Dt)return ve(Ve.toJSON(),pt,lt,Tt,vt,!0);const wr=x.call(Ve);return wr==="[object Arguments]"?Yt?"[Arguments]":(Bt?"":"Arguments ")+"["+(0,r.printListItems)(Ve,pt,lt,Tt,vt,ve)+"]":te(wr)?Yt?"["+Ve.constructor.name+"]":(Bt||!pt.printBasicPrototype&&Ve.constructor.name==="Array"?"":Ve.constructor.name+" ")+"["+(0,r.printListItems)(Ve,pt,lt,Tt,vt,ve)+"]":wr==="[object Map]"?Yt?"[Map]":"Map {"+(0,r.printIteratorEntries)(Ve.entries(),pt,lt,Tt,vt,ve," => ")+"}":wr==="[object Set]"?Yt?"[Set]":"Set {"+(0,r.printIteratorValues)(Ve.values(),pt,lt,Tt,vt,ve)+"}":Yt||z(Ve)?"["+F(Ve)+"]":(Bt||!pt.printBasicPrototype&&F(Ve)==="Object"?"":F(Ve)+" ")+"{"+(0,r.printObjectProperties)(Ve,pt,lt,Tt,vt,ve)+"}"}m(we,"printComplexValue");function Ie(Ve){return Ve.serialize!=null}m(Ie,"isNewPlugin");function ee(Ve,pt,lt,Tt,vt,Dt){let Yt;try{Yt=Ie(Ve)?Ve.serialize(pt,lt,Tt,vt,Dt,ve):Ve.print(pt,Bt=>ve(Bt,lt,Tt,vt,Dt),Bt=>{const wr=Tt+lt.indent;return wr+Bt.replace($,`
`+wr)},{edgeSpacing:lt.spacingOuter,min:lt.min,spacing:lt.spacingInner},lt.colors)}catch(Bt){throw new X(Bt.message,Bt.stack)}if(typeof Yt!="string")throw new Error(`pretty-format: Plugin must return type "string" but instead returned "${typeof Yt}".`);return Yt}m(ee,"printPlugin");function fe(Ve,pt){for(let lt=0;lt<Ve.length;lt++)try{if(Ve[lt].test(pt))return Ve[lt]}catch(Tt){throw new X(Tt.message,Tt.stack)}return null}m(fe,"findPlugin");function ve(Ve,pt,lt,Tt,vt,Dt){const Yt=fe(pt.plugins,Ve);if(Yt!==null)return ee(Yt,Ve,pt,lt,Tt,vt);const Bt=ue(Ve,pt.printFunctionName,pt.escapeRegex,pt.escapeString);return Bt!==null?Bt:we(Ve,pt,lt,Tt,vt,Dt)}m(ve,"printer");var xe={comment:"gray",content:"reset",prop:"yellow",tag:"cyan",value:"green"},Xe=Object.keys(xe),Ke={callToJSON:!0,compareKeys:void 0,escapeRegex:!1,escapeString:!0,highlight:!1,indent:2,maxDepth:1/0,min:!1,plugins:[],printBasicPrototype:!0,printFunctionName:!0,theme:xe};t.DEFAULT_OPTIONS=Ke;function Ze(Ve){if(Object.keys(Ve).forEach(pt=>{if(!Ke.hasOwnProperty(pt))throw new Error(`pretty-format: Unknown option "${pt}".`)}),Ve.min&&Ve.indent!==void 0&&Ve.indent!==0)throw new Error('pretty-format: Options "min" and "indent" cannot be used together.');if(Ve.theme!==void 0){if(Ve.theme===null)throw new Error('pretty-format: Option "theme" must not be null.');if(typeof Ve.theme!="object")throw new Error(`pretty-format: Option "theme" must be of type "object" but instead received "${typeof Ve.theme}".`)}}m(Ze,"validateOptions");var bt=m(Ve=>Xe.reduce((pt,lt)=>{const Tt=Ve.theme&&Ve.theme[lt]!==void 0?Ve.theme[lt]:xe[lt],vt=Tt&&e.default[Tt];if(vt&&typeof vt.close=="string"&&typeof vt.open=="string")pt[lt]=vt;else throw new Error(`pretty-format: Option "theme" has a key "${lt}" whose value "${Tt}" is undefined in ansi-styles.`);return pt},Object.create(null)),"getColorsHighlight"),qe=m(()=>Xe.reduce((Ve,pt)=>(Ve[pt]={close:"",open:""},Ve),Object.create(null)),"getColorsEmpty"),kt=m(Ve=>Ve&&Ve.printFunctionName!==void 0?Ve.printFunctionName:Ke.printFunctionName,"getPrintFunctionName"),Jt=m(Ve=>Ve&&Ve.escapeRegex!==void 0?Ve.escapeRegex:Ke.escapeRegex,"getEscapeRegex"),Pt=m(Ve=>Ve&&Ve.escapeString!==void 0?Ve.escapeString:Ke.escapeString,"getEscapeString"),dt=m(Ve=>{var pt;return{callToJSON:Ve&&Ve.callToJSON!==void 0?Ve.callToJSON:Ke.callToJSON,colors:Ve&&Ve.highlight?bt(Ve):qe(),compareKeys:Ve&&typeof Ve.compareKeys=="function"?Ve.compareKeys:Ke.compareKeys,escapeRegex:Jt(Ve),escapeString:Pt(Ve),indent:Ve&&Ve.min?"":er(Ve&&Ve.indent!==void 0?Ve.indent:Ke.indent),maxDepth:Ve&&Ve.maxDepth!==void 0?Ve.maxDepth:Ke.maxDepth,min:Ve&&Ve.min!==void 0?Ve.min:Ke.min,plugins:Ve&&Ve.plugins!==void 0?Ve.plugins:Ke.plugins,printBasicPrototype:(pt=Ve?.printBasicPrototype)!==null&&pt!==void 0?pt:!0,printFunctionName:kt(Ve),spacingInner:Ve&&Ve.min?" ":`
`,spacingOuter:Ve&&Ve.min?"":`
`}},"getConfig");function er(Ve){return new Array(Ve+1).join(" ")}m(er,"createIndent");function Wt(Ve,pt){if(pt&&(Ze(pt),pt.plugins)){const Tt=fe(pt.plugins,Ve);if(Tt!==null)return ee(Tt,Ve,dt(pt),"",0,[])}const lt=ue(Ve,kt(pt),Jt(pt),Pt(pt));return lt!==null?lt:we(Ve,dt(pt),"",0,[])}m(Wt,"format");var ar={AsymmetricMatcher:n.default,ConvertAnsi:i.default,DOMCollection:l.default,DOMElement:c.default,Immutable:s.default,ReactElement:p.default,ReactTestComponent:g.default};t.plugins=ar;var _t=Wt;t.default=_t}}),bQ=He({"../node_modules/lz-string/libs/lz-string.js"(t,e){var r=function(){var n=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function s(g,_){if(!c[g]){c[g]={};for(var x=0;x<g.length;x++)c[g][g.charAt(x)]=x}return c[g][_]}m(s,"getBaseValue");var p={compressToBase64:m(function(g){if(g==null)return"";var _=p._compress(g,6,function(x){return i.charAt(x)});switch(_.length%4){default:case 0:return _;case 1:return _+"===";case 2:return _+"==";case 3:return _+"="}},"compressToBase64"),decompressFromBase64:m(function(g){return g==null?"":g==""?null:p._decompress(g.length,32,function(_){return s(i,g.charAt(_))})},"decompressFromBase64"),compressToUTF16:m(function(g){return g==null?"":p._compress(g,15,function(_){return n(_+32)})+" "},"compressToUTF16"),decompressFromUTF16:m(function(g){return g==null?"":g==""?null:p._decompress(g.length,16384,function(_){return g.charCodeAt(_)-32})},"decompressFromUTF16"),compressToUint8Array:m(function(g){for(var _=p.compress(g),x=new Uint8Array(_.length*2),P=0,A=_.length;P<A;P++){var M=_.charCodeAt(P);x[P*2]=M>>>8,x[P*2+1]=M%256}return x},"compressToUint8Array"),decompressFromUint8Array:m(function(g){if(g==null)return p.decompress(g);for(var _=new Array(g.length/2),x=0,P=_.length;x<P;x++)_[x]=g[x*2]*256+g[x*2+1];var A=[];return _.forEach(function(M){A.push(n(M))}),p.decompress(A.join(""))},"decompressFromUint8Array"),compressToEncodedURIComponent:m(function(g){return g==null?"":p._compress(g,6,function(_){return l.charAt(_)})},"compressToEncodedURIComponent"),decompressFromEncodedURIComponent:m(function(g){return g==null?"":g==""?null:(g=g.replace(/ /g,"+"),p._decompress(g.length,32,function(_){return s(l,g.charAt(_))}))},"decompressFromEncodedURIComponent"),compress:m(function(g){return p._compress(g,16,function(_){return n(_)})},"compress"),_compress:m(function(g,_,x){if(g==null)return"";var P,A,M={},F={},z="",j="",$="",W=2,X=3,te=2,ne=[],Z=0,U=0,K;for(K=0;K<g.length;K+=1)if(z=g.charAt(K),Object.prototype.hasOwnProperty.call(M,z)||(M[z]=X++,F[z]=!0),j=$+z,Object.prototype.hasOwnProperty.call(M,j))$=j;else{if(Object.prototype.hasOwnProperty.call(F,$)){if($.charCodeAt(0)<256){for(P=0;P<te;P++)Z=Z<<1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++;for(A=$.charCodeAt(0),P=0;P<8;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1}else{for(A=1,P=0;P<te;P++)Z=Z<<1|A,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=0;for(A=$.charCodeAt(0),P=0;P<16;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1}W--,W==0&&(W=Math.pow(2,te),te++),delete F[$]}else for(A=M[$],P=0;P<te;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1;W--,W==0&&(W=Math.pow(2,te),te++),M[j]=X++,$=String(z)}if($!==""){if(Object.prototype.hasOwnProperty.call(F,$)){if($.charCodeAt(0)<256){for(P=0;P<te;P++)Z=Z<<1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++;for(A=$.charCodeAt(0),P=0;P<8;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1}else{for(A=1,P=0;P<te;P++)Z=Z<<1|A,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=0;for(A=$.charCodeAt(0),P=0;P<16;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1}W--,W==0&&(W=Math.pow(2,te),te++),delete F[$]}else for(A=M[$],P=0;P<te;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1;W--,W==0&&(W=Math.pow(2,te),te++)}for(A=2,P=0;P<te;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1;for(;;)if(Z=Z<<1,U==_-1){ne.push(x(Z));break}else U++;return ne.join("")},"_compress"),decompress:m(function(g){return g==null?"":g==""?null:p._decompress(g.length,32768,function(_){return g.charCodeAt(_)})},"decompress"),_decompress:m(function(g,_,x){var P=[],A=4,M=4,F=3,z="",j=[],$,W,X,te,ne,Z,U,K={val:x(0),position:_,index:1};for($=0;$<3;$+=1)P[$]=$;for(X=0,ne=Math.pow(2,2),Z=1;Z!=ne;)te=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(te>0?1:0)*Z,Z<<=1;switch(X){case 0:for(X=0,ne=Math.pow(2,8),Z=1;Z!=ne;)te=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(te>0?1:0)*Z,Z<<=1;U=n(X);break;case 1:for(X=0,ne=Math.pow(2,16),Z=1;Z!=ne;)te=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(te>0?1:0)*Z,Z<<=1;U=n(X);break;case 2:return""}for(P[3]=U,W=U,j.push(U);;){if(K.index>g)return"";for(X=0,ne=Math.pow(2,F),Z=1;Z!=ne;)te=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(te>0?1:0)*Z,Z<<=1;switch(U=X){case 0:for(X=0,ne=Math.pow(2,8),Z=1;Z!=ne;)te=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(te>0?1:0)*Z,Z<<=1;P[M++]=n(X),U=M-1,A--;break;case 1:for(X=0,ne=Math.pow(2,16),Z=1;Z!=ne;)te=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(te>0?1:0)*Z,Z<<=1;P[M++]=n(X),U=M-1,A--;break;case 2:return j.join("")}if(A==0&&(A=Math.pow(2,F),F++),P[U])z=P[U];else if(U===M)z=W+W.charAt(0);else return null;j.push(z),P[M++]=W+z.charAt(0),A--,W=z,A==0&&(A=Math.pow(2,F),F++)}},"_decompress")};return p}();typeof define=="function"&&define.amd?define(function(){return r}):typeof e<"u"&&e!=null?e.exports=r:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return r})}}),nN=He({"../node_modules/memoizerific/memoizerific.js"(t,e){(function(r){if(typeof t=="object"&&typeof e<"u")e.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n=this,n.memoizerific=r()}})(function(){return m(function r(n,i,l){function c(g,_){if(!i[g]){if(!n[g]){var x=typeof A0=="function"&&A0;if(!_&&x)return x(g,!0);if(s)return s(g,!0);var P=new Error("Cannot find module '"+g+"'");throw P.code="MODULE_NOT_FOUND",P}var A=i[g]={exports:{}};n[g][0].call(A.exports,function(M){var F=n[g][1][M];return c(F||M)},A,A.exports,r,n,i,l)}return i[g].exports}m(c,"s");for(var s=typeof A0=="function"&&A0,p=0;p<l.length;p++)c(l[p]);return c},"e")({1:[function(r,n,i){n.exports=function(l){if(typeof Map!="function"||l){var c=r("./similar");return new c}else return new Map}},{"./similar":2}],2:[function(r,n,i){function l(){return this.list=[],this.lastItem=void 0,this.size=0,this}m(l,"Similar"),l.prototype.get=function(c){var s;if(this.lastItem&&this.isEqual(this.lastItem.key,c))return this.lastItem.val;if(s=this.indexOf(c),s>=0)return this.lastItem=this.list[s],this.list[s].val},l.prototype.set=function(c,s){var p;return this.lastItem&&this.isEqual(this.lastItem.key,c)?(this.lastItem.val=s,this):(p=this.indexOf(c),p>=0?(this.lastItem=this.list[p],this.list[p].val=s,this):(this.lastItem={key:c,val:s},this.list.push(this.lastItem),this.size++,this))},l.prototype.delete=function(c){var s;if(this.lastItem&&this.isEqual(this.lastItem.key,c)&&(this.lastItem=void 0),s=this.indexOf(c),s>=0)return this.size--,this.list.splice(s,1)[0]},l.prototype.has=function(c){var s;return this.lastItem&&this.isEqual(this.lastItem.key,c)?!0:(s=this.indexOf(c),s>=0?(this.lastItem=this.list[s],!0):!1)},l.prototype.forEach=function(c,s){var p;for(p=0;p<this.size;p++)c.call(s||this,this.list[p].val,this.list[p].key,this)},l.prototype.indexOf=function(c){var s;for(s=0;s<this.size;s++)if(this.isEqual(this.list[s].key,c))return s;return-1},l.prototype.isEqual=function(c,s){return c===s||c!==c&&s!==s},n.exports=l},{}],3:[function(r,n,i){var l=r("map-or-similar");n.exports=function(g){var _=new l(!1),x=[];return function(P){var A=m(function(){var M=_,F,z,j=arguments.length-1,$=Array(j+1),W=!0,X;if((A.numArgs||A.numArgs===0)&&A.numArgs!==j+1)throw new Error("Memoizerific functions should always be called with the same number of arguments");for(X=0;X<j;X++){if($[X]={cacheItem:M,arg:arguments[X]},M.has(arguments[X])){M=M.get(arguments[X]);continue}W=!1,F=new l(!1),M.set(arguments[X],F),M=F}return W&&(M.has(arguments[j])?z=M.get(arguments[j]):W=!1),W||(z=P.apply(null,arguments),M.set(arguments[j],z)),g>0&&($[j]={cacheItem:M,arg:arguments[j]},W?c(x,$):x.push($),x.length>g&&s(x.shift())),A.wasMemoized=W,A.numArgs=j+1,z},"memoizerific");return A.limit=g,A.wasMemoized=!1,A.cache=_,A.lru=x,A}};function c(g,_){var x=g.length,P=_.length,A,M,F;for(M=0;M<x;M++){for(A=!0,F=0;F<P;F++)if(!p(g[M][F].arg,_[F].arg)){A=!1;break}if(A)break}g.push(g.splice(M,1)[0])}m(c,"moveToMostRecentLru");function s(g){var _=g.length,x=g[_-1],P,A;for(x.cacheItem.delete(x.arg),A=_-2;A>=0&&(x=g[A],P=x.cacheItem.get(x.arg),!P||!P.size);A--)x.cacheItem.delete(x.arg)}m(s,"removeCachedResult");function p(g,_){return g===_||g!==g&&_!==_}m(p,"isEqual")},{"map-or-similar":1}]},{},[3])(3)})}}),iN=He({"../node_modules/picoquery/lib/string-util.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeString=n;var e=Array.from({length:256},(i,l)=>"%"+((l<16?"0":"")+l.toString(16)).toUpperCase()),r=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function n(i){const l=i.length;if(l===0)return"";let c="",s=0,p=0;e:for(;p<l;p++){let g=i.charCodeAt(p);for(;g<128;){if(r[g]!==1&&(s<p&&(c+=i.slice(s,p)),s=p+1,c+=e[g]),++p===l)break e;g=i.charCodeAt(p)}if(s<p&&(c+=i.slice(s,p)),g<2048){s=p+1,c+=e[192|g>>6]+e[128|g&63];continue}if(g<55296||g>=57344){s=p+1,c+=e[224|g>>12]+e[128|g>>6&63]+e[128|g&63];continue}if(++p,p>=l)throw new Error("URI malformed");const _=i.charCodeAt(p)&1023;s=p+1,g=65536+((g&1023)<<10|_),c+=e[240|g>>18]+e[128|g>>12&63]+e[128|g>>6&63]+e[128|g&63]}return s===0?i:s<l?c+i.slice(s):c}m(n,"encodeString")}}),OC=He({"../node_modules/picoquery/lib/shared.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=t.defaultShouldSerializeObject=t.defaultValueSerializer=void 0;var e=iN(),r=m(l=>{switch(typeof l){case"string":return(0,e.encodeString)(l);case"bigint":case"boolean":return""+l;case"number":if(Number.isFinite(l))return l<1e21?""+l:(0,e.encodeString)(""+l);break}return l instanceof Date?(0,e.encodeString)(l.toISOString()):""},"defaultValueSerializer");t.defaultValueSerializer=r;var n=m(l=>l instanceof Date,"defaultShouldSerializeObject");t.defaultShouldSerializeObject=n;var i=m(l=>l,"identityFunc");t.defaultOptions={nesting:!0,nestingSyntax:"dot",arrayRepeat:!1,arrayRepeatSyntax:"repeat",delimiter:38,valueDeserializer:i,valueSerializer:t.defaultValueSerializer,keyDeserializer:i,shouldSerializeObject:t.defaultShouldSerializeObject}}}),oN=He({"../node_modules/picoquery/lib/object-util.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepObject=i,t.stringifyObject=_;var e=OC(),r=iN();function n(x){return x==="__proto__"||x==="constructor"||x==="prototype"}m(n,"isPrototypeKey");function i(x,P,A,M,F){if(n(P))return x;const z=x[P];return typeof z=="object"&&z!==null?z:!M&&(F||typeof A=="number"||typeof A=="string"&&A*0===0&&A.indexOf(".")===-1)?x[P]=[]:x[P]={}}m(i,"getDeepObject");var l=20,c="[]",s="[",p="]",g=".";function _(x,P,A=0,M,F){const{nestingSyntax:z=e.defaultOptions.nestingSyntax,arrayRepeat:j=e.defaultOptions.arrayRepeat,arrayRepeatSyntax:$=e.defaultOptions.arrayRepeatSyntax,nesting:W=e.defaultOptions.nesting,delimiter:X=e.defaultOptions.delimiter,valueSerializer:te=e.defaultOptions.valueSerializer,shouldSerializeObject:ne=e.defaultOptions.shouldSerializeObject}=P,Z=typeof X=="number"?String.fromCharCode(X):X,U=F===!0&&j,K=z==="dot"||z==="js"&&!F;if(A>l)return"";let he="",ue=!0,we=!1;for(const Ie in x){const ee=x[Ie];if(ee===void 0)continue;let fe;M?(fe=M,U?$==="bracket"&&(fe+=c):K?(fe+=g,fe+=Ie):(fe+=s,fe+=Ie,fe+=p)):fe=Ie,ue||(he+=Z),typeof ee=="object"&&ee!==null&&!ne(ee)?(we=ee.pop!==void 0,(W||j&&we)&&(he+=_(ee,P,A+1,fe,we))):(he+=(0,r.encodeString)(fe),he+="=",he+=te(ee,Ie)),ue&&(ue=!1)}return he}m(_,"stringifyObject")}}),vQ=He({"../node_modules/picoquery/lib/decode-uri-component.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeURIComponent=i;var e=12,r=0,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function i(s){let p=s.indexOf("%");if(p===-1)return s;const g=s.length;let _="",x=0,P=0,A=p,M=e;for(;p>-1&&p<g;){const F=c(s[p+1],4),z=c(s[p+2],0),j=F|z,$=n[j];if(M=n[256+M+$],P=P<<6|j&n[364+$],M===e)_+=s.slice(x,A),_+=P<=65535?String.fromCharCode(P):String.fromCharCode(55232+(P>>10),56320+(P&1023)),P=0,x=p+3,p=A=s.indexOf("%",x);else{if(M===r)return null;if(p+=3,p<g&&s.charCodeAt(p)===37)continue;return null}}return _+s.slice(x)}m(i,"decodeURIComponent");var l={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function c(s,p){const g=l[s];return g===void 0?255:g<<p}m(c,"hexCodeToInt")}}),xQ=He({"../node_modules/picoquery/lib/parse.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.numberValueDeserializer=t.numberKeyDeserializer=void 0,t.parse=g;var e=oN(),r=OC(),n=vQ(),i=m(_=>{const x=Number(_);return Number.isNaN(x)?_:x},"numberKeyDeserializer");t.numberKeyDeserializer=i;var l=m(_=>{const x=Number(_);return Number.isNaN(x)?_:x},"numberValueDeserializer");t.numberValueDeserializer=l;var c=/\+/g,s=m(function(){},"Empty");s.prototype=Object.create(null);function p(_,x,P,A,M){let F=_.substring(x,P);return A&&(F=F.replace(c," ")),M&&(F=(0,n.decodeURIComponent)(F)||F),F}m(p,"computeKeySlice");function g(_,x){const{valueDeserializer:P=r.defaultOptions.valueDeserializer,keyDeserializer:A=r.defaultOptions.keyDeserializer,arrayRepeatSyntax:M=r.defaultOptions.arrayRepeatSyntax,nesting:F=r.defaultOptions.nesting,arrayRepeat:z=r.defaultOptions.arrayRepeat,nestingSyntax:j=r.defaultOptions.nestingSyntax,delimiter:$=r.defaultOptions.delimiter}=x??{},W=typeof $=="string"?$.charCodeAt(0):$,X=j==="js",te=new s;if(typeof _!="string")return te;const ne=_.length;let Z="",U=-1,K=-1,he=-1,ue=te,we,Ie="",ee="",fe=!1,ve=!1,xe=!1,Xe=!1,Ke=!1,Ze=!1,bt=0,qe=-1,kt=-1,Jt=-1;for(let Pt=0;Pt<ne+1;Pt++){if(bt=Pt!==ne?_.charCodeAt(Pt):W,bt===W){if(Ze=K>U,Ze||(K=Pt),he!==K-1&&(ee=p(_,he+1,qe>-1?qe:K,xe,fe),Ie=A(ee),we!==void 0&&(ue=(0,e.getDeepObject)(ue,we,Ie,X&&Ke,void 0))),Ze||Ie!==""){Ze&&(Z=_.slice(K+1,Pt),Xe&&(Z=Z.replace(c," ")),ve&&(Z=(0,n.decodeURIComponent)(Z)||Z));const dt=P(Z,Ie);if(z){const er=ue[Ie];er===void 0?qe>-1?ue[Ie]=[dt]:ue[Ie]=dt:er.pop?er.push(dt):ue[Ie]=[er,dt]}else ue[Ie]=dt}Z="",U=Pt,K=Pt,fe=!1,ve=!1,xe=!1,Xe=!1,Ke=!1,qe=-1,he=Pt,ue=te,we=void 0,Ie=""}else bt===93?(z&&M==="bracket"&&Jt===91&&(qe=kt),F&&(j==="index"||X)&&K<=U&&(he!==kt&&(ee=p(_,he+1,Pt,xe,fe),Ie=A(ee),we!==void 0&&(ue=(0,e.getDeepObject)(ue,we,Ie,void 0,void 0)),we=Ie,xe=!1,fe=!1),he=Pt,Ke=!1)):bt===46?F&&(j==="dot"||X)&&K<=U&&(he!==kt&&(ee=p(_,he+1,Pt,xe,fe),Ie=A(ee),we!==void 0&&(ue=(0,e.getDeepObject)(ue,we,Ie,X)),we=Ie,xe=!1,fe=!1),Ke=!0,he=Pt):bt===91?F&&(j==="index"||X)&&K<=U&&(he!==kt&&(ee=p(_,he+1,Pt,xe,fe),Ie=A(ee),X&&we!==void 0&&(ue=(0,e.getDeepObject)(ue,we,Ie,X)),we=Ie,xe=!1,fe=!1,Ke=!1),he=Pt):bt===61?K<=U?K=Pt:ve=!0:bt===43?K>U?Xe=!0:xe=!0:bt===37&&(K>U?ve=!0:fe=!0);kt=Pt,Jt=bt}return te}m(g,"parse")}}),wQ=He({"../node_modules/picoquery/lib/stringify.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=r;var e=oN();function r(n,i){if(n===null||typeof n!="object")return"";const l=i??{};return(0,e.stringifyObject)(n,l)}m(r,"stringify")}}),kC=He({"../node_modules/picoquery/lib/main.js"(t){var e=t&&t.__createBinding||(Object.create?function(l,c,s,p){p===void 0&&(p=s);var g=Object.getOwnPropertyDescriptor(c,s);(!g||("get"in g?!c.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:m(function(){return c[s]},"get")}),Object.defineProperty(l,p,g)}:function(l,c,s,p){p===void 0&&(p=s),l[p]=c[s]}),r=t&&t.__exportStar||function(l,c){for(var s in l)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&e(c,l,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=t.parse=void 0;var n=xQ();Object.defineProperty(t,"parse",{enumerable:!0,get:m(function(){return n.parse},"get")});var i=wQ();Object.defineProperty(t,"stringify",{enumerable:!0,get:m(function(){return i.stringify},"get")}),r(OC(),t)}}),sN=He({"../node_modules/entities/lib/maps/entities.json"(t,e){e.exports={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}}}),EQ=He({"../node_modules/entities/lib/maps/legacy.json"(t,e){e.exports={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",amp:"&",AMP:"&",Aring:"",aring:"",Atilde:"",atilde:"",Auml:"",auml:"",brvbar:"",Ccedil:"",ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",ETH:"",eth:"",Euml:"",euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",iquest:"",Iuml:"",iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",Ntilde:"",ntilde:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",Ograve:"",ograve:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",Ouml:"",ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",THORN:"",thorn:"",times:"",Uacute:"",uacute:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",Uuml:"",uuml:"",Yacute:"",yacute:"",yen:"",yuml:""}}}),aN=He({"../node_modules/entities/lib/maps/xml.json"(t,e){e.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}}}),TQ=He({"../node_modules/entities/lib/maps/decode.json"(t,e){e.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}}}),SQ=He({"../node_modules/entities/lib/decode_codepoint.js"(t){var e=t&&t.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0});var r=e(TQ()),n=String.fromCodePoint||function(l){var c="";return l>65535&&(l-=65536,c+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),c+=String.fromCharCode(l),c};function i(l){return l>=55296&&l<=57343||l>1114111?"":(l in r.default&&(l=r.default[l]),n(l))}m(i,"decodeCodePoint"),t.default=i}}),tO=He({"../node_modules/entities/lib/decode.js"(t){var e=t&&t.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var r=e(sN()),n=e(EQ()),i=e(aN()),l=e(SQ()),c=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;t.decodeXML=s(i.default),t.decodeHTMLStrict=s(r.default);function s(_){var x=g(_);return function(P){return String(P).replace(c,x)}}m(s,"getStrictDecoder");var p=m(function(_,x){return _<x?1:-1},"sorter");t.decodeHTML=function(){for(var _=Object.keys(n.default).sort(p),x=Object.keys(r.default).sort(p),P=0,A=0;P<x.length;P++)_[A]===x[P]?(x[P]+=";?",A++):x[P]+=";";var M=new RegExp("&(?:"+x.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),F=g(r.default);function z(j){return j.substr(-1)!==";"&&(j+=";"),F(j)}return m(z,"replacer"),function(j){return String(j).replace(M,z)}}();function g(_){return m(function(P){if(P.charAt(1)==="#"){var A=P.charAt(2);return A==="X"||A==="x"?l.default(parseInt(P.substr(3),16)):l.default(parseInt(P.substr(2),10))}return _[P.slice(1,-1)]||P},"replace")}m(g,"getReplacer")}}),rO=He({"../node_modules/entities/lib/encode.js"(t){var e=t&&t.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var r=e(aN()),n=p(r.default),i=g(n);t.encodeXML=j(n);var l=e(sN()),c=p(l.default),s=g(c);t.encodeHTML=A(c,s),t.encodeNonAsciiHTML=j(c);function p($){return Object.keys($).sort().reduce(function(W,X){return W[$[X]]="&"+X+";",W},{})}m(p,"getInverseObj");function g($){for(var W=[],X=[],te=0,ne=Object.keys($);te<ne.length;te++){var Z=ne[te];Z.length===1?W.push("\\"+Z):X.push(Z)}W.sort();for(var U=0;U<W.length-1;U++){for(var K=U;K<W.length-1&&W[K].charCodeAt(1)+1===W[K+1].charCodeAt(1);)K+=1;var he=1+K-U;he<3||W.splice(U,he,W[U]+"-"+W[K])}return X.unshift("["+W.join("")+"]"),new RegExp(X.join("|"),"g")}m(g,"getInverseReplacer");var _=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,x=String.prototype.codePointAt!=null?function($){return $.codePointAt(0)}:function($){return($.charCodeAt(0)-55296)*1024+$.charCodeAt(1)-56320+65536};function P($){return"&#x"+($.length>1?x($):$.charCodeAt(0)).toString(16).toUpperCase()+";"}m(P,"singleCharReplacer");function A($,W){return function(X){return X.replace(W,function(te){return $[te]}).replace(_,P)}}m(A,"getInverse");var M=new RegExp(i.source+"|"+_.source,"g");function F($){return $.replace(M,P)}m(F,"escape"),t.escape=F;function z($){return $.replace(i,P)}m(z,"escapeUTF8"),t.escapeUTF8=z;function j($){return function(W){return W.replace(M,function(X){return $[X]||P(X)})}}m(j,"getASCIIEncoder")}}),CQ=He({"../node_modules/entities/lib/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var e=tO(),r=rO();function n(p,g){return(!g||g<=0?e.decodeXML:e.decodeHTML)(p)}m(n,"decode"),t.decode=n;function i(p,g){return(!g||g<=0?e.decodeXML:e.decodeHTMLStrict)(p)}m(i,"decodeStrict"),t.decodeStrict=i;function l(p,g){return(!g||g<=0?r.encodeXML:r.encodeHTML)(p)}m(l,"encode"),t.encode=l;var c=rO();Object.defineProperty(t,"encodeXML",{enumerable:!0,get:m(function(){return c.encodeXML},"get")}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:m(function(){return c.encodeHTML},"get")}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:m(function(){return c.encodeNonAsciiHTML},"get")}),Object.defineProperty(t,"escape",{enumerable:!0,get:m(function(){return c.escape},"get")}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:m(function(){return c.escapeUTF8},"get")}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:m(function(){return c.encodeHTML},"get")}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:m(function(){return c.encodeHTML},"get")});var s=tO();Object.defineProperty(t,"decodeXML",{enumerable:!0,get:m(function(){return s.decodeXML},"get")}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:m(function(){return s.decodeHTML},"get")}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:m(function(){return s.decodeHTMLStrict},"get")}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:m(function(){return s.decodeHTML},"get")}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:m(function(){return s.decodeHTML},"get")}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:m(function(){return s.decodeHTMLStrict},"get")}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:m(function(){return s.decodeHTMLStrict},"get")}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:m(function(){return s.decodeXML},"get")})}}),PQ=He({"../node_modules/ansi-to-html/lib/ansi_to_html.js"(t,e){function r(ee,fe){if(!(ee instanceof fe))throw new TypeError("Cannot call a class as a function")}m(r,"_classCallCheck");function n(ee,fe){for(var ve=0;ve<fe.length;ve++){var xe=fe[ve];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(ee,xe.key,xe)}}m(n,"_defineProperties");function i(ee,fe,ve){return fe&&n(ee.prototype,fe),ve&&n(ee,ve),ee}m(i,"_createClass");function l(ee,fe){var ve=typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(!ve){if(Array.isArray(ee)||(ve=c(ee))||fe&&ee&&typeof ee.length=="number"){ve&&(ee=ve);var xe=0,Xe=m(function(){},"F");return{s:Xe,n:m(function(){return xe>=ee.length?{done:!0}:{done:!1,value:ee[xe++]}},"n"),e:m(function(kt){throw kt},"e"),f:Xe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ke=!0,Ze=!1,bt;return{s:m(function(){ve=ve.call(ee)},"s"),n:m(function(){var kt=ve.next();return Ke=kt.done,kt},"n"),e:m(function(kt){Ze=!0,bt=kt},"e"),f:m(function(){try{!Ke&&ve.return!=null&&ve.return()}finally{if(Ze)throw bt}},"f")}}m(l,"_createForOfIteratorHelper");function c(ee,fe){if(ee){if(typeof ee=="string")return s(ee,fe);var ve=Object.prototype.toString.call(ee).slice(8,-1);if(ve==="Object"&&ee.constructor&&(ve=ee.constructor.name),ve==="Map"||ve==="Set")return Array.from(ee);if(ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve))return s(ee,fe)}}m(c,"_unsupportedIterableToArray");function s(ee,fe){(fe==null||fe>ee.length)&&(fe=ee.length);for(var ve=0,xe=new Array(fe);ve<fe;ve++)xe[ve]=ee[ve];return xe}m(s,"_arrayLikeToArray");var p=CQ(),g={fg:"#FFF",bg:"#000",newline:!1,escapeXML:!1,stream:!1,colors:_()};function _(){var ee={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return $(0,5).forEach(function(fe){$(0,5).forEach(function(ve){$(0,5).forEach(function(xe){return x(fe,ve,xe,ee)})})}),$(0,23).forEach(function(fe){var ve=fe+232,xe=P(fe*10+8);ee[ve]="#"+xe+xe+xe}),ee}m(_,"getDefaultColors");function x(ee,fe,ve,xe){var Xe=16+ee*36+fe*6+ve,Ke=ee>0?ee*40+55:0,Ze=fe>0?fe*40+55:0,bt=ve>0?ve*40+55:0;xe[Xe]=A([Ke,Ze,bt])}m(x,"setStyleColor");function P(ee){for(var fe=ee.toString(16);fe.length<2;)fe="0"+fe;return fe}m(P,"toHexString");function A(ee){var fe=[],ve=l(ee),xe;try{for(ve.s();!(xe=ve.n()).done;){var Xe=xe.value;fe.push(P(Xe))}}catch(Ke){ve.e(Ke)}finally{ve.f()}return"#"+fe.join("")}m(A,"toColorHexString");function M(ee,fe,ve,xe){var Xe;return fe==="text"?Xe=te(ve,xe):fe==="display"?Xe=z(ee,ve,xe):fe==="xterm256Foreground"?Xe=U(ee,xe.colors[ve]):fe==="xterm256Background"?Xe=K(ee,xe.colors[ve]):fe==="rgb"&&(Xe=F(ee,ve)),Xe}m(M,"generateOutput");function F(ee,fe){fe=fe.substring(2).slice(0,-1);var ve=+fe.substr(0,2),xe=fe.substring(5).split(";"),Xe=xe.map(function(Ke){return("0"+Number(Ke).toString(16)).substr(-2)}).join("");return Z(ee,(ve===38?"color:#":"background-color:#")+Xe)}m(F,"handleRgb");function z(ee,fe,ve){fe=parseInt(fe,10);var xe={"-1":m(function(){return"<br/>"},"_"),0:m(function(){return ee.length&&j(ee)},"_"),1:m(function(){return ne(ee,"b")},"_"),3:m(function(){return ne(ee,"i")},"_"),4:m(function(){return ne(ee,"u")},"_"),8:m(function(){return Z(ee,"display:none")},"_"),9:m(function(){return ne(ee,"strike")},"_"),22:m(function(){return Z(ee,"font-weight:normal;text-decoration:none;font-style:normal")},"_"),23:m(function(){return he(ee,"i")},"_"),24:m(function(){return he(ee,"u")},"_"),39:m(function(){return U(ee,ve.fg)},"_"),49:m(function(){return K(ee,ve.bg)},"_"),53:m(function(){return Z(ee,"text-decoration:overline")},"_")},Xe;return xe[fe]?Xe=xe[fe]():4<fe&&fe<7?Xe=ne(ee,"blink"):29<fe&&fe<38?Xe=U(ee,ve.colors[fe-30]):39<fe&&fe<48?Xe=K(ee,ve.colors[fe-40]):89<fe&&fe<98?Xe=U(ee,ve.colors[8+(fe-90)]):99<fe&&fe<108&&(Xe=K(ee,ve.colors[8+(fe-100)])),Xe}m(z,"handleDisplay");function j(ee){var fe=ee.slice(0);return ee.length=0,fe.reverse().map(function(ve){return"</"+ve+">"}).join("")}m(j,"resetStyles");function $(ee,fe){for(var ve=[],xe=ee;xe<=fe;xe++)ve.push(xe);return ve}m($,"range");function W(ee){return function(fe){return(ee===null||fe.category!==ee)&&ee!=="all"}}m(W,"notCategory");function X(ee){ee=parseInt(ee,10);var fe=null;return ee===0?fe="all":ee===1?fe="bold":2<ee&&ee<5?fe="underline":4<ee&&ee<7?fe="blink":ee===8?fe="hide":ee===9?fe="strike":29<ee&&ee<38||ee===39||89<ee&&ee<98?fe="foreground-color":(39<ee&&ee<48||ee===49||99<ee&&ee<108)&&(fe="background-color"),fe}m(X,"categoryForCode");function te(ee,fe){return fe.escapeXML?p.encodeXML(ee):ee}m(te,"pushText");function ne(ee,fe,ve){return ve||(ve=""),ee.push(fe),"<".concat(fe).concat(ve?' style="'.concat(ve,'"'):"",">")}m(ne,"pushTag");function Z(ee,fe){return ne(ee,"span",fe)}m(Z,"pushStyle");function U(ee,fe){return ne(ee,"span","color:"+fe)}m(U,"pushForegroundColor");function K(ee,fe){return ne(ee,"span","background-color:"+fe)}m(K,"pushBackgroundColor");function he(ee,fe){var ve;if(ee.slice(-1)[0]===fe&&(ve=ee.pop()),ve)return"</"+fe+">"}m(he,"closeTag");function ue(ee,fe,ve){var xe=!1,Xe=3;function Ke(){return""}m(Ke,"remove");function Ze(vt,Dt){return ve("xterm256Foreground",Dt),""}m(Ze,"removeXterm256Foreground");function bt(vt,Dt){return ve("xterm256Background",Dt),""}m(bt,"removeXterm256Background");function qe(vt){return fe.newline?ve("display",-1):ve("text",vt),""}m(qe,"newline");function kt(vt,Dt){xe=!0,Dt.trim().length===0&&(Dt="0"),Dt=Dt.trimRight(";").split(";");var Yt=l(Dt),Bt;try{for(Yt.s();!(Bt=Yt.n()).done;){var wr=Bt.value;ve("display",wr)}}catch(Vr){Yt.e(Vr)}finally{Yt.f()}return""}m(kt,"ansiMess");function Jt(vt){return ve("text",vt),""}m(Jt,"realText");function Pt(vt){return ve("rgb",vt),""}m(Pt,"rgb");var dt=[{pattern:/^\x08+/,sub:Ke},{pattern:/^\x1b\[[012]?K/,sub:Ke},{pattern:/^\x1b\[\(B/,sub:Ke},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:Pt},{pattern:/^\x1b\[38;5;(\d+)m/,sub:Ze},{pattern:/^\x1b\[48;5;(\d+)m/,sub:bt},{pattern:/^\n/,sub:qe},{pattern:/^\r+\n/,sub:qe},{pattern:/^\r/,sub:qe},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:kt},{pattern:/^\x1b\[\d?J/,sub:Ke},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:Ke},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:Ke},{pattern:/^(([^\x1b\x08\r\n])+)/,sub:Jt}];function er(vt,Dt){Dt>Xe&&xe||(xe=!1,ee=ee.replace(vt.pattern,vt.sub))}m(er,"process");var Wt=[],ar=ee,_t=ar.length;e:for(;_t>0;){for(var Ve=0,pt=0,lt=dt.length;pt<lt;Ve=++pt){var Tt=dt[Ve];if(er(Tt,Ve),ee.length!==_t){_t=ee.length;continue e}}if(ee.length===_t)break;Wt.push(0),_t=ee.length}return Wt}m(ue,"tokenize");function we(ee,fe,ve){return fe!=="text"&&(ee=ee.filter(W(X(ve))),ee.push({token:fe,data:ve,category:X(ve)})),ee}m(we,"updateStickyStack");var Ie=function(){function ee(fe){r(this,ee),fe=fe||{},fe.colors&&(fe.colors=Object.assign({},g.colors,fe.colors)),this.options=Object.assign({},g,fe),this.stack=[],this.stickyStack=[]}return m(ee,"Filter"),i(ee,[{key:"toHtml",value:m(function(ve){var xe=this;ve=typeof ve=="string"?[ve]:ve;var Xe=this.stack,Ke=this.options,Ze=[];return this.stickyStack.forEach(function(bt){var qe=M(Xe,bt.token,bt.data,Ke);qe&&Ze.push(qe)}),ue(ve.join(""),Ke,function(bt,qe){var kt=M(Xe,bt,qe,Ke);kt&&Ze.push(kt),Ke.stream&&(xe.stickyStack=we(xe.stickyStack,bt,qe))}),Xe.length&&Ze.push(j(Xe)),Ze.join("")},"toHtml")}]),ee}();e.exports=Ie}}),AQ=He({"../node_modules/jsdoc-type-pratt-parser/dist/index.js"(t,e){(function(r,n){typeof t=="object"&&typeof e<"u"?n(t):typeof define=="function"&&define.amd?define(["exports"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.jtpp={}))})(t,function(r){function n(E){return E.text!==void 0&&E.text!==""?`'${E.type}' with value '${E.text}'`:`'${E.type}'`}m(n,"tokenToString");const i=class lN extends Error{constructor(D){super(`No parslet found for token: ${n(D)}`),this.token=D,Object.setPrototypeOf(this,lN.prototype)}getToken(){return this.token}};m(i,"NoParsletFoundError");let l=i;const c=class cN extends Error{constructor(D){super(`The parsing ended early. The next token was: ${n(D)}`),this.token=D,Object.setPrototypeOf(this,cN.prototype)}getToken(){return this.token}};m(c,"EarlyEndOfParseError");let s=c;const p=class uN extends Error{constructor(D,J){let me=`Unexpected type: '${D.type}'.`;J!==void 0&&(me+=` Message: ${J}`),super(me),Object.setPrototypeOf(this,uN.prototype)}};m(p,"UnexpectedTypeError");let g=p;function _(E){return D=>D.startsWith(E)?{type:E,text:E}:null}m(_,"makePunctuationRule");function x(E){let D=0,J;const me=E[0];let ze=!1;if(me!=="'"&&me!=='"')return null;for(;D<E.length;){if(D++,J=E[D],!ze&&J===me){D++;break}ze=!ze&&J==="\\"}if(J!==me)throw new Error("Unterminated String");return E.slice(0,D)}m(x,"getQuoted");const P=new RegExp("[$_\\p{ID_Start}]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u"),A=new RegExp("[$\\-\\p{ID_Continue}\\u200C\\u200D]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u");function M(E){let D=E[0];if(!P.test(D))return null;let J=1;do{if(D=E[J],!A.test(D))break;J++}while(J<E.length);return E.slice(0,J)}m(M,"getIdentifier");const F=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))/;function z(E){var D,J;return(J=(D=F.exec(E))===null||D===void 0?void 0:D[0])!==null&&J!==void 0?J:null}m(z,"getNumber");const j=m(E=>{const D=M(E);return D==null?null:{type:"Identifier",text:D}},"identifierRule");function $(E){return D=>{if(!D.startsWith(E))return null;const J=D[E.length];return J!==void 0&&A.test(J)?null:{type:E,text:E}}}m($,"makeKeyWordRule");const W=m(E=>{const D=x(E);return D==null?null:{type:"StringValue",text:D}},"stringValueRule"),X=m(E=>E.length>0?null:{type:"EOF",text:""},"eofRule"),te=m(E=>{const D=z(E);return D===null?null:{type:"Number",text:D}},"numberRule"),ne=[X,_("=>"),_("("),_(")"),_("{"),_("}"),_("["),_("]"),_("|"),_("&"),_("<"),_(">"),_(","),_(";"),_("*"),_("?"),_("!"),_("="),_(":"),_("..."),_("."),_("#"),_("~"),_("/"),_("@"),$("undefined"),$("null"),$("function"),$("this"),$("new"),$("module"),$("event"),$("extends"),$("external"),$("infer"),$("typeof"),$("keyof"),$("readonly"),$("import"),$("is"),$("in"),$("asserts"),te,j,W],Z=/^\s*\n\s*/,U=class tb{static create(D){const J=this.read(D);D=J.text;const me=this.read(D);return D=me.text,new tb(D,void 0,J.token,me.token)}constructor(D,J,me,ze){this.text="",this.text=D,this.previous=J,this.current=me,this.next=ze}static read(D,J=!1){J=J||Z.test(D),D=D.trim();for(const me of ne){const ze=me(D);if(ze!==null){const nt=Object.assign(Object.assign({},ze),{startOfLine:J});return D=D.slice(nt.text.length),{text:D,token:nt}}}throw new Error("Unexpected Token "+D)}advance(){const D=tb.read(this.text);return new tb(D.text,this.current,this.next,D.token)}};m(U,"Lexer");let K=U;function he(E){if(E===void 0)throw new Error("Unexpected undefined");if(E.type==="JsdocTypeKeyValue"||E.type==="JsdocTypeParameterList"||E.type==="JsdocTypeProperty"||E.type==="JsdocTypeReadonlyProperty"||E.type==="JsdocTypeObjectField"||E.type==="JsdocTypeJsdocObjectField"||E.type==="JsdocTypeIndexSignature"||E.type==="JsdocTypeMappedType"||E.type==="JsdocTypeTypeParameter")throw new g(E);return E}m(he,"assertRootResult");function ue(E){return E.type==="JsdocTypeKeyValue"?Ie(E):he(E)}m(ue,"assertPlainKeyValueOrRootResult");function we(E){return E.type==="JsdocTypeName"?E:Ie(E)}m(we,"assertPlainKeyValueOrNameResult");function Ie(E){if(E.type!=="JsdocTypeKeyValue")throw new g(E);return E}m(Ie,"assertPlainKeyValueResult");function ee(E){var D;if(E.type==="JsdocTypeVariadic"){if(((D=E.element)===null||D===void 0?void 0:D.type)==="JsdocTypeName")return E;throw new g(E)}if(E.type!=="JsdocTypeNumber"&&E.type!=="JsdocTypeName")throw new g(E);return E}m(ee,"assertNumberOrVariadicNameResult");function fe(E){if(E.type==="JsdocTypeTuple"||E.type==="JsdocTypeGeneric"&&E.meta.brackets==="square")return E;throw new g(E)}m(fe,"assertArrayOrTupleResult");function ve(E){return E.type==="JsdocTypeIndexSignature"||E.type==="JsdocTypeMappedType"}m(ve,"isSquaredProperty");var xe;(function(E){E[E.ALL=0]="ALL",E[E.PARAMETER_LIST=1]="PARAMETER_LIST",E[E.OBJECT=2]="OBJECT",E[E.KEY_VALUE=3]="KEY_VALUE",E[E.INDEX_BRACKETS=4]="INDEX_BRACKETS",E[E.UNION=5]="UNION",E[E.INTERSECTION=6]="INTERSECTION",E[E.PREFIX=7]="PREFIX",E[E.INFIX=8]="INFIX",E[E.TUPLE=9]="TUPLE",E[E.SYMBOL=10]="SYMBOL",E[E.OPTIONAL=11]="OPTIONAL",E[E.NULLABLE=12]="NULLABLE",E[E.KEY_OF_TYPE_OF=13]="KEY_OF_TYPE_OF",E[E.FUNCTION=14]="FUNCTION",E[E.ARROW=15]="ARROW",E[E.ARRAY_BRACKETS=16]="ARRAY_BRACKETS",E[E.GENERIC=17]="GENERIC",E[E.NAME_PATH=18]="NAME_PATH",E[E.PARENTHESIS=19]="PARENTHESIS",E[E.SPECIAL_TYPES=20]="SPECIAL_TYPES"})(xe||(xe={}));const Xe=class{constructor(D,J,me){this.grammar=D,typeof J=="string"?this._lexer=K.create(J):this._lexer=J,this.baseParser=me}get lexer(){return this._lexer}parse(){const D=this.parseType(xe.ALL);if(this.lexer.current.type!=="EOF")throw new s(this.lexer.current);return D}parseType(D){return he(this.parseIntermediateType(D))}parseIntermediateType(D){const J=this.tryParslets(null,D);if(J===null)throw new l(this.lexer.current);return this.parseInfixIntermediateType(J,D)}parseInfixIntermediateType(D,J){let me=this.tryParslets(D,J);for(;me!==null;)D=me,me=this.tryParslets(D,J);return D}tryParslets(D,J){for(const me of this.grammar){const ze=me(this,J,D);if(ze!==null)return ze}return null}consume(D){return Array.isArray(D)||(D=[D]),D.includes(this.lexer.current.type)?(this._lexer=this.lexer.advance(),!0):!1}acceptLexerState(D){this._lexer=D.lexer}};m(Xe,"Parser");let Ke=Xe;function Ze(E){return E==="}"||E==="EOF"||E==="|"||E===","||E===")"||E===">"}m(Ze,"isQuestionMarkUnknownType");const bt=m((E,D,J)=>{const me=E.lexer.current.type,ze=E.lexer.next.type;return J==null&&me==="?"&&!Ze(ze)||J!=null&&me==="?"?(E.consume("?"),J==null?{type:"JsdocTypeNullable",element:E.parseType(xe.NULLABLE),meta:{position:"prefix"}}:{type:"JsdocTypeNullable",element:he(J),meta:{position:"suffix"}}):null},"nullableParslet");function qe(E){const D=m((J,me,ze)=>{const nt=J.lexer.current.type,St=J.lexer.next.type;if(ze===null){if("parsePrefix"in E&&E.accept(nt,St))return E.parsePrefix(J)}else if("parseInfix"in E&&E.precedence>me&&E.accept(nt,St))return E.parseInfix(J,ze);return null},"parslet");return Object.defineProperty(D,"name",{value:E.name}),D}m(qe,"composeParslet");const kt=qe({name:"optionalParslet",accept:m(E=>E==="=","accept"),precedence:xe.OPTIONAL,parsePrefix:m(E=>(E.consume("="),{type:"JsdocTypeOptional",element:E.parseType(xe.OPTIONAL),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:m((E,D)=>(E.consume("="),{type:"JsdocTypeOptional",element:he(D),meta:{position:"suffix"}}),"parseInfix")}),Jt=qe({name:"numberParslet",accept:m(E=>E==="Number","accept"),parsePrefix:m(E=>{const D=parseFloat(E.lexer.current.text);return E.consume("Number"),{type:"JsdocTypeNumber",value:D}},"parsePrefix")}),Pt=qe({name:"parenthesisParslet",accept:m(E=>E==="(","accept"),parsePrefix:m(E=>{if(E.consume("("),E.consume(")"))return{type:"JsdocTypeParameterList",elements:[]};const D=E.parseIntermediateType(xe.ALL);if(!E.consume(")"))throw new Error("Unterminated parenthesis");return D.type==="JsdocTypeParameterList"?D:D.type==="JsdocTypeKeyValue"?{type:"JsdocTypeParameterList",elements:[D]}:{type:"JsdocTypeParenthesis",element:he(D)}},"parsePrefix")}),dt=qe({name:"specialTypesParslet",accept:m((E,D)=>E==="?"&&Ze(D)||E==="null"||E==="undefined"||E==="*","accept"),parsePrefix:m(E=>{if(E.consume("null"))return{type:"JsdocTypeNull"};if(E.consume("undefined"))return{type:"JsdocTypeUndefined"};if(E.consume("*"))return{type:"JsdocTypeAny"};if(E.consume("?"))return{type:"JsdocTypeUnknown"};throw new Error("Unacceptable token: "+E.lexer.current.text)},"parsePrefix")}),er=qe({name:"notNullableParslet",accept:m(E=>E==="!","accept"),precedence:xe.NULLABLE,parsePrefix:m(E=>(E.consume("!"),{type:"JsdocTypeNotNullable",element:E.parseType(xe.NULLABLE),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:m((E,D)=>(E.consume("!"),{type:"JsdocTypeNotNullable",element:he(D),meta:{position:"suffix"}}),"parseInfix")});function Wt({allowTrailingComma:E}){return qe({name:"parameterListParslet",accept:m(D=>D===",","accept"),precedence:xe.PARAMETER_LIST,parseInfix:m((D,J)=>{const me=[ue(J)];D.consume(",");do try{const ze=D.parseIntermediateType(xe.PARAMETER_LIST);me.push(ue(ze))}catch(ze){if(ze instanceof l)break;throw ze}while(D.consume(","));if(me.length>0&&me.slice(0,-1).some(ze=>ze.type==="JsdocTypeVariadic"))throw new Error("Only the last parameter may be a rest parameter");return{type:"JsdocTypeParameterList",elements:me}},"parseInfix")})}m(Wt,"createParameterListParslet");const ar=qe({name:"genericParslet",accept:m((E,D)=>E==="<"||E==="."&&D==="<","accept"),precedence:xe.GENERIC,parseInfix:m((E,D)=>{const J=E.consume(".");E.consume("<");const me=[];let ze=!1;if(E.consume("infer")){ze=!0;const nt=E.parseIntermediateType(xe.SYMBOL);if(nt.type!=="JsdocTypeName")throw new g(nt,"A typescript asserts always has to have a name on the left side.");me.push(nt)}else do me.push(E.parseType(xe.PARAMETER_LIST));while(E.consume(","));if(!E.consume(">"))throw new Error("Unterminated generic parameter list");return Object.assign(Object.assign({type:"JsdocTypeGeneric",left:he(D),elements:me},ze?{infer:!0}:{}),{meta:{brackets:"angle",dot:J}})},"parseInfix")}),_t=qe({name:"unionParslet",accept:m(E=>E==="|","accept"),precedence:xe.UNION,parseInfix:m((E,D)=>{E.consume("|");const J=[];do J.push(E.parseType(xe.UNION));while(E.consume("|"));return{type:"JsdocTypeUnion",elements:[he(D),...J]}},"parseInfix")}),Ve=[bt,kt,Jt,Pt,dt,er,Wt({allowTrailingComma:!0}),ar,_t,kt];function pt({allowSquareBracketsOnAnyType:E,allowJsdocNamePaths:D,pathGrammar:J}){return m(function(ze,nt,St){if(St==null||nt>=xe.NAME_PATH)return null;const rr=ze.lexer.current.type,Jr=ze.lexer.next.type;if(!(rr==="."&&Jr!=="<"||rr==="["&&(E||St.type==="JsdocTypeName")||D&&(rr==="~"||rr==="#")))return null;let Xr,fo=!1;ze.consume(".")?Xr="property":ze.consume("[")?(Xr="property-brackets",fo=!0):ze.consume("~")?Xr="inner":(ze.consume("#"),Xr="instance");const ca=J!==null?new Ke(J,ze.lexer,ze):ze,$n=ca.parseIntermediateType(xe.NAME_PATH);ze.acceptLexerState(ca);let di;switch($n.type){case"JsdocTypeName":di={type:"JsdocTypeProperty",value:$n.value,meta:{quote:void 0}};break;case"JsdocTypeNumber":di={type:"JsdocTypeProperty",value:$n.value.toString(10),meta:{quote:void 0}};break;case"JsdocTypeStringValue":di={type:"JsdocTypeProperty",value:$n.value,meta:{quote:$n.meta.quote}};break;case"JsdocTypeSpecialNamePath":if($n.specialType==="event")di=$n;else throw new g($n,"Type 'JsdocTypeSpecialNamePath' is only allowed with specialType 'event'");break;default:throw new g($n,"Expecting 'JsdocTypeName', 'JsdocTypeNumber', 'JsdocStringValue' or 'JsdocTypeSpecialNamePath'")}if(fo&&!ze.consume("]")){const ua=ze.lexer.current;throw new Error(`Unterminated square brackets. Next token is '${ua.type}' with text '${ua.text}'`)}return{type:"JsdocTypeNamePath",left:he(St),right:di,pathType:Xr}},"namePathParslet")}m(pt,"createNamePathParslet");function lt({allowedAdditionalTokens:E}){return qe({name:"nameParslet",accept:m(D=>D==="Identifier"||D==="this"||D==="new"||E.includes(D),"accept"),parsePrefix:m(D=>{const{type:J,text:me}=D.lexer.current;return D.consume(J),{type:"JsdocTypeName",value:me}},"parsePrefix")})}m(lt,"createNameParslet");const Tt=qe({name:"stringValueParslet",accept:m(E=>E==="StringValue","accept"),parsePrefix:m(E=>{const D=E.lexer.current.text;return E.consume("StringValue"),{type:"JsdocTypeStringValue",value:D.slice(1,-1),meta:{quote:D[0]==="'"?"single":"double"}}},"parsePrefix")});function vt({pathGrammar:E,allowedTypes:D}){return qe({name:"specialNamePathParslet",accept:m(J=>D.includes(J),"accept"),parsePrefix:m(J=>{const me=J.lexer.current.type;if(J.consume(me),!J.consume(":"))return{type:"JsdocTypeName",value:me};let ze,nt=J.lexer.current;if(J.consume("StringValue"))ze={type:"JsdocTypeSpecialNamePath",value:nt.text.slice(1,-1),specialType:me,meta:{quote:nt.text[0]==="'"?"single":"double"}};else{let Jr="";const Ar=["Identifier","@","/"];for(;Ar.some(Xr=>J.consume(Xr));)Jr+=nt.text,nt=J.lexer.current;ze={type:"JsdocTypeSpecialNamePath",value:Jr,specialType:me,meta:{quote:void 0}}}const St=new Ke(E,J.lexer,J),rr=St.parseInfixIntermediateType(ze,xe.ALL);return J.acceptLexerState(St),he(rr)},"parsePrefix")})}m(vt,"createSpecialNamePathParslet");const Dt=[lt({allowedAdditionalTokens:["external","module"]}),Tt,Jt,pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:null})],Yt=[...Dt,vt({allowedTypes:["event"],pathGrammar:Dt})];function Bt(E){let D;if(E.type==="JsdocTypeParameterList")D=E.elements;else if(E.type==="JsdocTypeParenthesis")D=[E.element];else throw new g(E);return D.map(J=>ue(J))}m(Bt,"getParameters");function wr(E){const D=Bt(E);if(D.some(J=>J.type==="JsdocTypeKeyValue"))throw new Error("No parameter should be named");return D}m(wr,"getUnnamedParameters");function Vr({allowNamedParameters:E,allowNoReturnType:D,allowWithoutParenthesis:J,allowNewAsFunctionKeyword:me}){return qe({name:"functionParslet",accept:m((ze,nt)=>ze==="function"||me&&ze==="new"&&nt==="(","accept"),parsePrefix:m(ze=>{const nt=ze.consume("new");ze.consume("function");const St=ze.lexer.current.type==="(";if(!St){if(!J)throw new Error("function is missing parameter list");return{type:"JsdocTypeName",value:"function"}}let rr={type:"JsdocTypeFunction",parameters:[],arrow:!1,constructor:nt,parenthesis:St};const Jr=ze.parseIntermediateType(xe.FUNCTION);if(E===void 0)rr.parameters=wr(Jr);else{if(nt&&Jr.type==="JsdocTypeFunction"&&Jr.arrow)return rr=Jr,rr.constructor=!0,rr;rr.parameters=Bt(Jr);for(const Ar of rr.parameters)if(Ar.type==="JsdocTypeKeyValue"&&!E.includes(Ar.key))throw new Error(`only allowed named parameters are ${E.join(", ")} but got ${Ar.type}`)}if(ze.consume(":"))rr.returnType=ze.parseType(xe.PREFIX);else if(!D)throw new Error("function is missing return type");return rr},"parsePrefix")})}m(Vr,"createFunctionParslet");function Ir({allowPostfix:E,allowEnclosingBrackets:D}){return qe({name:"variadicParslet",accept:m(J=>J==="...","accept"),precedence:xe.PREFIX,parsePrefix:m(J=>{J.consume("...");const me=D&&J.consume("[");try{const ze=J.parseType(xe.PREFIX);if(me&&!J.consume("]"))throw new Error("Unterminated variadic type. Missing ']'");return{type:"JsdocTypeVariadic",element:he(ze),meta:{position:"prefix",squareBrackets:me}}}catch(ze){if(ze instanceof l){if(me)throw new Error("Empty square brackets for variadic are not allowed.");return{type:"JsdocTypeVariadic",meta:{position:void 0,squareBrackets:!1}}}else throw ze}},"parsePrefix"),parseInfix:E?(J,me)=>(J.consume("..."),{type:"JsdocTypeVariadic",element:he(me),meta:{position:"suffix",squareBrackets:!1}}):void 0})}m(Ir,"createVariadicParslet");const Zr=qe({name:"symbolParslet",accept:m(E=>E==="(","accept"),precedence:xe.SYMBOL,parseInfix:m((E,D)=>{if(D.type!=="JsdocTypeName")throw new Error("Symbol expects a name on the left side. (Reacting on '(')");E.consume("(");const J={type:"JsdocTypeSymbol",value:D.value};if(!E.consume(")")){const me=E.parseIntermediateType(xe.SYMBOL);if(J.element=ee(me),!E.consume(")"))throw new Error("Symbol does not end after value")}return J},"parseInfix")}),yr=qe({name:"arrayBracketsParslet",precedence:xe.ARRAY_BRACKETS,accept:m((E,D)=>E==="["&&D==="]","accept"),parseInfix:m((E,D)=>(E.consume("["),E.consume("]"),{type:"JsdocTypeGeneric",left:{type:"JsdocTypeName",value:"Array"},elements:[he(D)],meta:{brackets:"square",dot:!1}}),"parseInfix")});function ur({objectFieldGrammar:E,allowKeyTypes:D}){return qe({name:"objectParslet",accept:m(J=>J==="{","accept"),parsePrefix:m(J=>{J.consume("{");const me={type:"JsdocTypeObject",meta:{separator:"comma"},elements:[]};if(!J.consume("}")){let ze;const nt=new Ke(E,J.lexer,J);for(;;){nt.acceptLexerState(J);let St=nt.parseIntermediateType(xe.OBJECT);J.acceptLexerState(nt),St===void 0&&D&&(St=J.parseIntermediateType(xe.OBJECT));let rr=!1;if(St.type==="JsdocTypeNullable"&&(rr=!0,St=St.element),St.type==="JsdocTypeNumber"||St.type==="JsdocTypeName"||St.type==="JsdocTypeStringValue"){let Ar;St.type==="JsdocTypeStringValue"&&(Ar=St.meta.quote),me.elements.push({type:"JsdocTypeObjectField",key:St.value.toString(),right:void 0,optional:rr,readonly:!1,meta:{quote:Ar}})}else if(St.type==="JsdocTypeObjectField"||St.type==="JsdocTypeJsdocObjectField")me.elements.push(St);else throw new g(St);if(J.lexer.current.startOfLine)ze="linebreak",J.consume(",")||J.consume(";");else if(J.consume(","))ze="comma";else if(J.consume(";"))ze="semicolon";else break;if(J.lexer.current.type==="}")break}if(me.meta.separator=ze??"comma",ze==="linebreak"&&(me.meta.propertyIndent="  "),!J.consume("}"))throw new Error("Unterminated record type. Missing '}'")}return me},"parsePrefix")})}m(ur,"createObjectParslet");function lr({allowSquaredProperties:E,allowKeyTypes:D,allowReadonly:J,allowOptional:me}){return qe({name:"objectFieldParslet",precedence:xe.KEY_VALUE,accept:m(ze=>ze===":","accept"),parseInfix:m((ze,nt)=>{var St;let rr=!1,Jr=!1;me&&nt.type==="JsdocTypeNullable"&&(rr=!0,nt=nt.element),J&&nt.type==="JsdocTypeReadonlyProperty"&&(Jr=!0,nt=nt.element);const Ar=(St=ze.baseParser)!==null&&St!==void 0?St:ze;if(Ar.acceptLexerState(ze),nt.type==="JsdocTypeNumber"||nt.type==="JsdocTypeName"||nt.type==="JsdocTypeStringValue"||ve(nt)){if(ve(nt)&&!E)throw new g(nt);Ar.consume(":");let Xr;nt.type==="JsdocTypeStringValue"&&(Xr=nt.meta.quote);const fo=Ar.parseType(xe.KEY_VALUE);return ze.acceptLexerState(Ar),{type:"JsdocTypeObjectField",key:ve(nt)?nt:nt.value.toString(),right:fo,optional:rr,readonly:Jr,meta:{quote:Xr}}}else{if(!D)throw new g(nt);Ar.consume(":");const Xr=Ar.parseType(xe.KEY_VALUE);return ze.acceptLexerState(Ar),{type:"JsdocTypeJsdocObjectField",left:he(nt),right:Xr}}},"parseInfix")})}m(lr,"createObjectFieldParslet");function nr({allowOptional:E,allowVariadic:D}){return qe({name:"keyValueParslet",precedence:xe.KEY_VALUE,accept:m(J=>J===":","accept"),parseInfix:m((J,me)=>{let ze=!1,nt=!1;if(E&&me.type==="JsdocTypeNullable"&&(ze=!0,me=me.element),D&&me.type==="JsdocTypeVariadic"&&me.element!==void 0&&(nt=!0,me=me.element),me.type!=="JsdocTypeName")throw new g(me);J.consume(":");const St=J.parseType(xe.KEY_VALUE);return{type:"JsdocTypeKeyValue",key:me.value,right:St,optional:ze,variadic:nt}},"parseInfix")})}m(nr,"createKeyValueParslet");const mr=[...Ve,Vr({allowWithoutParenthesis:!0,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),Tt,vt({allowedTypes:["module","external","event"],pathGrammar:Yt}),Ir({allowEnclosingBrackets:!0,allowPostfix:!0}),lt({allowedAdditionalTokens:["keyof"]}),Zr,yr,pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:Yt})],Yr=[...mr,ur({objectFieldGrammar:[lt({allowedAdditionalTokens:["typeof","module","in"]}),lr({allowSquaredProperties:!1,allowKeyTypes:!0,allowOptional:!1,allowReadonly:!1}),...mr],allowKeyTypes:!0}),nr({allowOptional:!0,allowVariadic:!0})],ke=qe({name:"typeOfParslet",accept:m(E=>E==="typeof","accept"),parsePrefix:m(E=>(E.consume("typeof"),{type:"JsdocTypeTypeof",element:E.parseType(xe.KEY_OF_TYPE_OF)}),"parsePrefix")}),oe=[lt({allowedAdditionalTokens:["typeof","module","keyof","event","external","in"]}),bt,kt,Tt,Jt,lr({allowSquaredProperties:!1,allowKeyTypes:!1,allowOptional:!1,allowReadonly:!1})],ae=[...Ve,ur({allowKeyTypes:!1,objectFieldGrammar:oe}),lt({allowedAdditionalTokens:["event","external","in"]}),ke,Vr({allowWithoutParenthesis:!1,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),Ir({allowEnclosingBrackets:!1,allowPostfix:!1}),lt({allowedAdditionalTokens:["keyof"]}),vt({allowedTypes:["module"],pathGrammar:Yt}),pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:Yt}),nr({allowOptional:!1,allowVariadic:!1}),Zr],de=qe({name:"assertsParslet",accept:m(E=>E==="asserts","accept"),parsePrefix:m(E=>{E.consume("asserts");const D=E.parseIntermediateType(xe.SYMBOL);if(D.type!=="JsdocTypeName")throw new g(D,"A typescript asserts always has to have a name on the left side.");return E.consume("is")?{type:"JsdocTypeAsserts",left:D,right:he(E.parseIntermediateType(xe.INFIX))}:{type:"JsdocTypeAssertsPlain",element:D}},"parsePrefix")});function Te({allowQuestionMark:E}){return qe({name:"tupleParslet",accept:m(D=>D==="[","accept"),parsePrefix:m(D=>{D.consume("[");const J={type:"JsdocTypeTuple",elements:[]};if(D.consume("]"))return J;const me=D.parseIntermediateType(xe.ALL);if(me.type==="JsdocTypeParameterList"?me.elements[0].type==="JsdocTypeKeyValue"?J.elements=me.elements.map(Ie):J.elements=me.elements.map(he):me.type==="JsdocTypeKeyValue"?J.elements=[Ie(me)]:J.elements=[he(me)],!D.consume("]"))throw new Error("Unterminated '['");if(J.elements.some(ze=>ze.type==="JsdocTypeUnknown"))throw new Error("Question mark in tuple not allowed");return J},"parsePrefix")})}m(Te,"createTupleParslet");const Le=qe({name:"keyOfParslet",accept:m(E=>E==="keyof","accept"),parsePrefix:m(E=>(E.consume("keyof"),{type:"JsdocTypeKeyof",element:he(E.parseType(xe.KEY_OF_TYPE_OF))}),"parsePrefix")}),je=qe({name:"importParslet",accept:m(E=>E==="import","accept"),parsePrefix:m(E=>{if(E.consume("import"),!E.consume("("))throw new Error("Missing parenthesis after import keyword");const D=E.parseType(xe.PREFIX);if(D.type!=="JsdocTypeStringValue")throw new Error("Only string values are allowed as paths for imports");if(!E.consume(")"))throw new Error("Missing closing parenthesis after import keyword");return{type:"JsdocTypeImport",element:D}},"parsePrefix")}),Je=qe({name:"readonlyPropertyParslet",accept:m(E=>E==="readonly","accept"),parsePrefix:m(E=>(E.consume("readonly"),{type:"JsdocTypeReadonlyProperty",element:E.parseIntermediateType(xe.KEY_VALUE)}),"parsePrefix")}),Fe=qe({name:"arrowFunctionParslet",precedence:xe.ARROW,accept:m(E=>E==="=>","accept"),parseInfix:m((E,D)=>(E.consume("=>"),{type:"JsdocTypeFunction",parameters:Bt(D).map(we),arrow:!0,constructor:!1,parenthesis:!0,returnType:E.parseType(xe.OBJECT)}),"parseInfix")}),tt=qe({name:"genericArrowFunctionParslet",accept:m(E=>E==="<","accept"),parsePrefix:m(E=>{const D=[];E.consume("<");do{let me,ze=E.parseIntermediateType(xe.SYMBOL);if(ze.type==="JsdocTypeOptional"&&(ze=ze.element,me=E.parseType(xe.SYMBOL)),ze.type!=="JsdocTypeName")throw new g(ze);let nt;E.consume("extends")&&(nt=E.parseType(xe.SYMBOL),nt.type==="JsdocTypeOptional"&&(nt=nt.element,me=E.parseType(xe.SYMBOL)));const St={type:"JsdocTypeTypeParameter",name:ze};if(nt!==void 0&&(St.constraint=nt),me!==void 0&&(St.defaultValue=me),D.push(St),E.consume(">"))break}while(E.consume(","));const J=E.parseIntermediateType(xe.SYMBOL);return J.typeParameters=D,J},"parsePrefix")}),ct=qe({name:"intersectionParslet",accept:m(E=>E==="&","accept"),precedence:xe.INTERSECTION,parseInfix:m((E,D)=>{E.consume("&");const J=[];do J.push(E.parseType(xe.INTERSECTION));while(E.consume("&"));return{type:"JsdocTypeIntersection",elements:[he(D),...J]}},"parseInfix")}),it=qe({name:"predicateParslet",precedence:xe.INFIX,accept:m(E=>E==="is","accept"),parseInfix:m((E,D)=>{if(D.type!=="JsdocTypeName")throw new g(D,"A typescript predicate always has to have a name on the left side.");return E.consume("is"),{type:"JsdocTypePredicate",left:D,right:he(E.parseIntermediateType(xe.INFIX))}},"parseInfix")}),Ot=qe({name:"objectSquareBracketPropertyParslet",accept:m(E=>E==="[","accept"),parsePrefix:m(E=>{if(E.baseParser===void 0)throw new Error("Only allowed inside object grammar");E.consume("[");const D=E.lexer.current.text;E.consume("Identifier");let J;if(E.consume(":")){const me=E.baseParser;me.acceptLexerState(E),J={type:"JsdocTypeIndexSignature",key:D,right:me.parseType(xe.INDEX_BRACKETS)},E.acceptLexerState(me)}else if(E.consume("in")){const me=E.baseParser;me.acceptLexerState(E),J={type:"JsdocTypeMappedType",key:D,right:me.parseType(xe.ARRAY_BRACKETS)},E.acceptLexerState(me)}else throw new Error("Missing ':' or 'in' inside square bracketed property.");if(!E.consume("]"))throw new Error("Unterminated square brackets");return J},"parsePrefix")}),$e=qe({name:"readonlyArrayParslet",accept:m(E=>E==="readonly","accept"),parsePrefix:m(E=>(E.consume("readonly"),{type:"JsdocTypeReadonlyArray",element:fe(E.parseIntermediateType(xe.ALL))}),"parsePrefix")}),Xt=qe({name:"conditionalParslet",precedence:xe.INFIX,accept:m(E=>E==="extends","accept"),parseInfix:m((E,D)=>{E.consume("extends");const J=E.parseType(xe.KEY_OF_TYPE_OF).element,me=E.parseType(xe.INFIX);return E.consume(":"),{type:"JsdocTypeConditional",checksType:he(D),extendsType:J,trueType:me,falseType:E.parseType(xe.INFIX)}},"parseInfix")}),cr=[Je,lt({allowedAdditionalTokens:["typeof","module","keyof","event","external","in"]}),bt,kt,Tt,Jt,lr({allowSquaredProperties:!0,allowKeyTypes:!1,allowOptional:!0,allowReadonly:!0}),Ot],Nt=[...Ve,ur({allowKeyTypes:!1,objectFieldGrammar:cr}),$e,ke,Le,je,Tt,Vr({allowWithoutParenthesis:!0,allowNoReturnType:!1,allowNamedParameters:["this","new","args"],allowNewAsFunctionKeyword:!0}),Te({allowQuestionMark:!1}),Ir({allowEnclosingBrackets:!1,allowPostfix:!1}),de,Xt,lt({allowedAdditionalTokens:["event","external","in"]}),vt({allowedTypes:["module"],pathGrammar:Yt}),yr,Fe,tt,pt({allowSquareBracketsOnAnyType:!0,allowJsdocNamePaths:!1,pathGrammar:Yt}),ct,it,nr({allowVariadic:!0,allowOptional:!0})];function Ht(E,D){switch(D){case"closure":return new Ke(ae,E).parse();case"jsdoc":return new Ke(Yr,E).parse();case"typescript":return new Ke(Nt,E).parse()}}m(Ht,"parse");function _r(E,D=["typescript","closure","jsdoc"]){let J;for(const me of D)try{return Ht(E,me)}catch(ze){J=ze}throw J}m(_r,"tryParse");function ut(E,D){const J=E[D.type];if(J===void 0)throw new Error(`In this set of transform rules exists no rule for type ${D.type}.`);return J(D,me=>ut(E,me))}m(ut,"transform");function Lt(E){throw new Error("This transform is not available. Are you trying the correct parsing mode?")}m(Lt,"notAvailableTransform");function Cr(E){const D={params:[]};for(const J of E.parameters)J.type==="JsdocTypeKeyValue"?J.key==="this"?D.this=J.right:J.key==="new"?D.new=J.right:D.params.push(J):D.params.push(J);return D}m(Cr,"extractSpecialParams");function Kt(E,D,J){return E==="prefix"?J+D:D+J}m(Kt,"applyPosition");function jt(E,D){switch(D){case"double":return`"${E}"`;case"single":return`'${E}'`;case void 0:return E}}m(jt,"quote");function Pr(){return{JsdocTypeParenthesis:m((E,D)=>`(${E.element!==void 0?D(E.element):""})`,"JsdocTypeParenthesis"),JsdocTypeKeyof:m((E,D)=>`keyof ${D(E.element)}`,"JsdocTypeKeyof"),JsdocTypeFunction:m((E,D)=>{var J;if(E.arrow){if(E.returnType===void 0)throw new Error("Arrow function needs a return type.");let me=`${E.typeParameters!==void 0?`<${(J=E.typeParameters.map(D).join(", "))!==null&&J!==void 0?J:""}>`:""}(${E.parameters.map(D).join(", ")}) => ${D(E.returnType)}`;return E.constructor&&(me="new "+me),me}else{let me=E.constructor?"new":"function";return E.parenthesis&&(me+=`(${E.parameters.map(D).join(", ")})`,E.returnType!==void 0&&(me+=`: ${D(E.returnType)}`)),me}},"JsdocTypeFunction"),JsdocTypeName:m(E=>E.value,"JsdocTypeName"),JsdocTypeTuple:m((E,D)=>`[${E.elements.map(D).join(", ")}]`,"JsdocTypeTuple"),JsdocTypeVariadic:m((E,D)=>E.meta.position===void 0?"...":Kt(E.meta.position,D(E.element),"..."),"JsdocTypeVariadic"),JsdocTypeNamePath:m((E,D)=>{const J=D(E.left),me=D(E.right);switch(E.pathType){case"inner":return`${J}~${me}`;case"instance":return`${J}#${me}`;case"property":return`${J}.${me}`;case"property-brackets":return`${J}[${me}]`}},"JsdocTypeNamePath"),JsdocTypeStringValue:m(E=>jt(E.value,E.meta.quote),"JsdocTypeStringValue"),JsdocTypeAny:m(()=>"*","JsdocTypeAny"),JsdocTypeGeneric:m((E,D)=>{if(E.meta.brackets==="square"){const J=E.elements[0],me=D(J);return J.type==="JsdocTypeUnion"||J.type==="JsdocTypeIntersection"?`(${me})[]`:`${me}[]`}else return`${D(E.left)}${E.meta.dot?".":""}<${E.infer===!0?"infer ":""}${E.elements.map(D).join(", ")}>`},"JsdocTypeGeneric"),JsdocTypeImport:m((E,D)=>`import(${D(E.element)})`,"JsdocTypeImport"),JsdocTypeObjectField:m((E,D)=>{let J="";return E.readonly&&(J+="readonly "),typeof E.key=="string"?J+=jt(E.key,E.meta.quote):J+=D(E.key),E.optional&&(J+="?"),E.right===void 0?J:J+`: ${D(E.right)}`},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:m((E,D)=>`${D(E.left)}: ${D(E.right)}`,"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:m((E,D)=>{let J=E.key;return E.optional&&(J+="?"),E.variadic&&(J="..."+J),E.right===void 0?J:J+`: ${D(E.right)}`},"JsdocTypeKeyValue"),JsdocTypeSpecialNamePath:m(E=>`${E.specialType}:${jt(E.value,E.meta.quote)}`,"JsdocTypeSpecialNamePath"),JsdocTypeNotNullable:m((E,D)=>Kt(E.meta.position,D(E.element),"!"),"JsdocTypeNotNullable"),JsdocTypeNull:m(()=>"null","JsdocTypeNull"),JsdocTypeNullable:m((E,D)=>Kt(E.meta.position,D(E.element),"?"),"JsdocTypeNullable"),JsdocTypeNumber:m(E=>E.value.toString(),"JsdocTypeNumber"),JsdocTypeObject:m((E,D)=>{var J,me;return`{${(E.meta.separator==="linebreak"&&E.elements.length>1?`
`+((J=E.meta.propertyIndent)!==null&&J!==void 0?J:""):"")+E.elements.map(D).join(E.meta.separator==="comma"?", ":E.meta.separator==="linebreak"?`
`+((me=E.meta.propertyIndent)!==null&&me!==void 0?me:""):"; ")+(E.meta.separator==="linebreak"&&E.elements.length>1?`
`:"")}}`},"JsdocTypeObject"),JsdocTypeOptional:m((E,D)=>Kt(E.meta.position,D(E.element),"="),"JsdocTypeOptional"),JsdocTypeSymbol:m((E,D)=>`${E.value}(${E.element!==void 0?D(E.element):""})`,"JsdocTypeSymbol"),JsdocTypeTypeof:m((E,D)=>`typeof ${D(E.element)}`,"JsdocTypeTypeof"),JsdocTypeUndefined:m(()=>"undefined","JsdocTypeUndefined"),JsdocTypeUnion:m((E,D)=>E.elements.map(D).join(" | "),"JsdocTypeUnion"),JsdocTypeUnknown:m(()=>"?","JsdocTypeUnknown"),JsdocTypeIntersection:m((E,D)=>E.elements.map(D).join(" & "),"JsdocTypeIntersection"),JsdocTypeProperty:m(E=>jt(E.value,E.meta.quote),"JsdocTypeProperty"),JsdocTypePredicate:m((E,D)=>`${D(E.left)} is ${D(E.right)}`,"JsdocTypePredicate"),JsdocTypeIndexSignature:m((E,D)=>`[${E.key}: ${D(E.right)}]`,"JsdocTypeIndexSignature"),JsdocTypeMappedType:m((E,D)=>`[${E.key} in ${D(E.right)}]`,"JsdocTypeMappedType"),JsdocTypeAsserts:m((E,D)=>`asserts ${D(E.left)} is ${D(E.right)}`,"JsdocTypeAsserts"),JsdocTypeReadonlyArray:m((E,D)=>`readonly ${D(E.element)}`,"JsdocTypeReadonlyArray"),JsdocTypeAssertsPlain:m((E,D)=>`asserts ${D(E.element)}`,"JsdocTypeAssertsPlain"),JsdocTypeConditional:m((E,D)=>`${D(E.checksType)} extends ${D(E.extendsType)} ? ${D(E.trueType)} : ${D(E.falseType)}`,"JsdocTypeConditional"),JsdocTypeTypeParameter:m((E,D)=>`${D(E.name)}${E.constraint!==void 0?` extends ${D(E.constraint)}`:""}${E.defaultValue!==void 0?` = ${D(E.defaultValue)}`:""}`,"JsdocTypeTypeParameter")}}m(Pr,"stringifyRules");const yt=Pr();function In(E){return ut(yt,E)}m(In,"stringify");const vn=["null","true","false","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];function mn(E){const D={type:"NameExpression",name:E};return vn.includes(E)&&(D.reservedWord=!0),D}m(mn,"makeName");const fs={JsdocTypeOptional:m((E,D)=>{const J=D(E.element);return J.optional=!0,J},"JsdocTypeOptional"),JsdocTypeNullable:m((E,D)=>{const J=D(E.element);return J.nullable=!0,J},"JsdocTypeNullable"),JsdocTypeNotNullable:m((E,D)=>{const J=D(E.element);return J.nullable=!1,J},"JsdocTypeNotNullable"),JsdocTypeVariadic:m((E,D)=>{if(E.element===void 0)throw new Error("dots without value are not allowed in catharsis mode");const J=D(E.element);return J.repeatable=!0,J},"JsdocTypeVariadic"),JsdocTypeAny:m(()=>({type:"AllLiteral"}),"JsdocTypeAny"),JsdocTypeNull:m(()=>({type:"NullLiteral"}),"JsdocTypeNull"),JsdocTypeStringValue:m(E=>mn(jt(E.value,E.meta.quote)),"JsdocTypeStringValue"),JsdocTypeUndefined:m(()=>({type:"UndefinedLiteral"}),"JsdocTypeUndefined"),JsdocTypeUnknown:m(()=>({type:"UnknownLiteral"}),"JsdocTypeUnknown"),JsdocTypeFunction:m((E,D)=>{const J=Cr(E),me={type:"FunctionType",params:J.params.map(D)};return J.this!==void 0&&(me.this=D(J.this)),J.new!==void 0&&(me.new=D(J.new)),E.returnType!==void 0&&(me.result=D(E.returnType)),me},"JsdocTypeFunction"),JsdocTypeGeneric:m((E,D)=>({type:"TypeApplication",applications:E.elements.map(J=>D(J)),expression:D(E.left)}),"JsdocTypeGeneric"),JsdocTypeSpecialNamePath:m(E=>mn(E.specialType+":"+jt(E.value,E.meta.quote)),"JsdocTypeSpecialNamePath"),JsdocTypeName:m(E=>E.value!=="function"?mn(E.value):{type:"FunctionType",params:[]},"JsdocTypeName"),JsdocTypeNumber:m(E=>mn(E.value.toString()),"JsdocTypeNumber"),JsdocTypeObject:m((E,D)=>{const J={type:"RecordType",fields:[]};for(const me of E.elements)me.type!=="JsdocTypeObjectField"&&me.type!=="JsdocTypeJsdocObjectField"?J.fields.push({type:"FieldType",key:D(me),value:void 0}):J.fields.push(D(me));return J},"JsdocTypeObject"),JsdocTypeObjectField:m((E,D)=>{if(typeof E.key!="string")throw new Error("Index signatures and mapped types are not supported");return{type:"FieldType",key:mn(jt(E.key,E.meta.quote)),value:E.right===void 0?void 0:D(E.right)}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:m((E,D)=>({type:"FieldType",key:D(E.left),value:D(E.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeUnion:m((E,D)=>({type:"TypeUnion",elements:E.elements.map(J=>D(J))}),"JsdocTypeUnion"),JsdocTypeKeyValue:m((E,D)=>({type:"FieldType",key:mn(E.key),value:E.right===void 0?void 0:D(E.right)}),"JsdocTypeKeyValue"),JsdocTypeNamePath:m((E,D)=>{const J=D(E.left);let me;E.right.type==="JsdocTypeSpecialNamePath"?me=D(E.right).name:me=jt(E.right.value,E.right.meta.quote);const ze=E.pathType==="inner"?"~":E.pathType==="instance"?"#":".";return mn(`${J.name}${ze}${me}`)},"JsdocTypeNamePath"),JsdocTypeSymbol:m(E=>{let D="",J=E.element,me=!1;return J?.type==="JsdocTypeVariadic"&&(J.meta.position==="prefix"?D="...":me=!0,J=J.element),J?.type==="JsdocTypeName"?D+=J.value:J?.type==="JsdocTypeNumber"&&(D+=J.value.toString()),me&&(D+="..."),mn(`${E.value}(${D})`)},"JsdocTypeSymbol"),JsdocTypeParenthesis:m((E,D)=>D(he(E.element)),"JsdocTypeParenthesis"),JsdocTypeMappedType:Lt,JsdocTypeIndexSignature:Lt,JsdocTypeImport:Lt,JsdocTypeKeyof:Lt,JsdocTypeTuple:Lt,JsdocTypeTypeof:Lt,JsdocTypeIntersection:Lt,JsdocTypeProperty:Lt,JsdocTypePredicate:Lt,JsdocTypeAsserts:Lt,JsdocTypeReadonlyArray:Lt,JsdocTypeAssertsPlain:Lt,JsdocTypeConditional:Lt,JsdocTypeTypeParameter:Lt};function Ct(E){return ut(fs,E)}m(Ct,"catharsisTransform");function tr(E){switch(E){case void 0:return"none";case"single":return"single";case"double":return"double"}}m(tr,"getQuoteStyle");function gr(E){switch(E){case"inner":return"INNER_MEMBER";case"instance":return"INSTANCE_MEMBER";case"property":return"MEMBER";case"property-brackets":return"MEMBER"}}m(gr,"getMemberType");function xn(E,D){return D.length===2?{type:E,left:D[0],right:D[1]}:{type:E,left:D[0],right:xn(E,D.slice(1))}}m(xn,"nestResults");const No={JsdocTypeOptional:m((E,D)=>({type:"OPTIONAL",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_EQUAL_SIGN":"SUFFIX_EQUALS_SIGN"}}),"JsdocTypeOptional"),JsdocTypeNullable:m((E,D)=>({type:"NULLABLE",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_QUESTION_MARK":"SUFFIX_QUESTION_MARK"}}),"JsdocTypeNullable"),JsdocTypeNotNullable:m((E,D)=>({type:"NOT_NULLABLE",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_BANG":"SUFFIX_BANG"}}),"JsdocTypeNotNullable"),JsdocTypeVariadic:m((E,D)=>{const J={type:"VARIADIC",meta:{syntax:E.meta.position==="prefix"?"PREFIX_DOTS":E.meta.position==="suffix"?"SUFFIX_DOTS":"ONLY_DOTS"}};return E.element!==void 0&&(J.value=D(E.element)),J},"JsdocTypeVariadic"),JsdocTypeName:m(E=>({type:"NAME",name:E.value}),"JsdocTypeName"),JsdocTypeTypeof:m((E,D)=>({type:"TYPE_QUERY",name:D(E.element)}),"JsdocTypeTypeof"),JsdocTypeTuple:m((E,D)=>({type:"TUPLE",entries:E.elements.map(D)}),"JsdocTypeTuple"),JsdocTypeKeyof:m((E,D)=>({type:"KEY_QUERY",value:D(E.element)}),"JsdocTypeKeyof"),JsdocTypeImport:m(E=>({type:"IMPORT",path:{type:"STRING_VALUE",quoteStyle:tr(E.element.meta.quote),string:E.element.value}}),"JsdocTypeImport"),JsdocTypeUndefined:m(()=>({type:"NAME",name:"undefined"}),"JsdocTypeUndefined"),JsdocTypeAny:m(()=>({type:"ANY"}),"JsdocTypeAny"),JsdocTypeFunction:m((E,D)=>{const J=Cr(E),me={type:E.arrow?"ARROW":"FUNCTION",params:J.params.map(ze=>{if(ze.type==="JsdocTypeKeyValue"){if(ze.right===void 0)throw new Error("Function parameter without ':' is not expected to be 'KEY_VALUE'");return{type:"NAMED_PARAMETER",name:ze.key,typeName:D(ze.right)}}else return D(ze)}),new:null,returns:null};return J.this!==void 0?me.this=D(J.this):E.arrow||(me.this=null),J.new!==void 0&&(me.new=D(J.new)),E.returnType!==void 0&&(me.returns=D(E.returnType)),me},"JsdocTypeFunction"),JsdocTypeGeneric:m((E,D)=>{const J={type:"GENERIC",subject:D(E.left),objects:E.elements.map(D),meta:{syntax:E.meta.brackets==="square"?"SQUARE_BRACKET":E.meta.dot?"ANGLE_BRACKET_WITH_DOT":"ANGLE_BRACKET"}};return E.meta.brackets==="square"&&E.elements[0].type==="JsdocTypeFunction"&&!E.elements[0].parenthesis&&(J.objects[0]={type:"NAME",name:"function"}),J},"JsdocTypeGeneric"),JsdocTypeObjectField:m((E,D)=>{if(typeof E.key!="string")throw new Error("Index signatures and mapped types are not supported");if(E.right===void 0)return{type:"RECORD_ENTRY",key:E.key,quoteStyle:tr(E.meta.quote),value:null,readonly:!1};let J=D(E.right);return E.optional&&(J={type:"OPTIONAL",value:J,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:E.key.toString(),quoteStyle:tr(E.meta.quote),value:J,readonly:!1}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:m(()=>{throw new Error("Keys may not be typed in jsdoctypeparser.")},"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:m((E,D)=>{if(E.right===void 0)return{type:"RECORD_ENTRY",key:E.key,quoteStyle:"none",value:null,readonly:!1};let J=D(E.right);return E.optional&&(J={type:"OPTIONAL",value:J,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:E.key,quoteStyle:"none",value:J,readonly:!1}},"JsdocTypeKeyValue"),JsdocTypeObject:m((E,D)=>{const J=[];for(const me of E.elements)(me.type==="JsdocTypeObjectField"||me.type==="JsdocTypeJsdocObjectField")&&J.push(D(me));return{type:"RECORD",entries:J}},"JsdocTypeObject"),JsdocTypeSpecialNamePath:m(E=>{if(E.specialType!=="module")throw new Error(`jsdoctypeparser does not support type ${E.specialType} at this point.`);return{type:"MODULE",value:{type:"FILE_PATH",quoteStyle:tr(E.meta.quote),path:E.value}}},"JsdocTypeSpecialNamePath"),JsdocTypeNamePath:m((E,D)=>{let J=!1,me,ze;E.right.type==="JsdocTypeSpecialNamePath"&&E.right.specialType==="event"?(J=!0,me=E.right.value,ze=tr(E.right.meta.quote)):(me=E.right.value,ze=tr(E.right.meta.quote));const nt={type:gr(E.pathType),owner:D(E.left),name:me,quoteStyle:ze,hasEventPrefix:J};if(nt.owner.type==="MODULE"){const St=nt.owner;return nt.owner=nt.owner.value,St.value=nt,St}else return nt},"JsdocTypeNamePath"),JsdocTypeUnion:m((E,D)=>xn("UNION",E.elements.map(D)),"JsdocTypeUnion"),JsdocTypeParenthesis:m((E,D)=>({type:"PARENTHESIS",value:D(he(E.element))}),"JsdocTypeParenthesis"),JsdocTypeNull:m(()=>({type:"NAME",name:"null"}),"JsdocTypeNull"),JsdocTypeUnknown:m(()=>({type:"UNKNOWN"}),"JsdocTypeUnknown"),JsdocTypeStringValue:m(E=>({type:"STRING_VALUE",quoteStyle:tr(E.meta.quote),string:E.value}),"JsdocTypeStringValue"),JsdocTypeIntersection:m((E,D)=>xn("INTERSECTION",E.elements.map(D)),"JsdocTypeIntersection"),JsdocTypeNumber:m(E=>({type:"NUMBER_VALUE",number:E.value.toString()}),"JsdocTypeNumber"),JsdocTypeSymbol:Lt,JsdocTypeProperty:Lt,JsdocTypePredicate:Lt,JsdocTypeMappedType:Lt,JsdocTypeIndexSignature:Lt,JsdocTypeAsserts:Lt,JsdocTypeReadonlyArray:Lt,JsdocTypeAssertsPlain:Lt,JsdocTypeConditional:Lt,JsdocTypeTypeParameter:Lt};function ro(E){return ut(No,E)}m(ro,"jtpTransform");function hr(){return{JsdocTypeIntersection:m((E,D)=>({type:"JsdocTypeIntersection",elements:E.elements.map(D)}),"JsdocTypeIntersection"),JsdocTypeGeneric:m((E,D)=>({type:"JsdocTypeGeneric",left:D(E.left),elements:E.elements.map(D),meta:{dot:E.meta.dot,brackets:E.meta.brackets}}),"JsdocTypeGeneric"),JsdocTypeNullable:m(E=>E,"JsdocTypeNullable"),JsdocTypeUnion:m((E,D)=>({type:"JsdocTypeUnion",elements:E.elements.map(D)}),"JsdocTypeUnion"),JsdocTypeUnknown:m(E=>E,"JsdocTypeUnknown"),JsdocTypeUndefined:m(E=>E,"JsdocTypeUndefined"),JsdocTypeTypeof:m((E,D)=>({type:"JsdocTypeTypeof",element:D(E.element)}),"JsdocTypeTypeof"),JsdocTypeSymbol:m((E,D)=>{const J={type:"JsdocTypeSymbol",value:E.value};return E.element!==void 0&&(J.element=D(E.element)),J},"JsdocTypeSymbol"),JsdocTypeOptional:m((E,D)=>({type:"JsdocTypeOptional",element:D(E.element),meta:{position:E.meta.position}}),"JsdocTypeOptional"),JsdocTypeObject:m((E,D)=>({type:"JsdocTypeObject",meta:{separator:"comma"},elements:E.elements.map(D)}),"JsdocTypeObject"),JsdocTypeNumber:m(E=>E,"JsdocTypeNumber"),JsdocTypeNull:m(E=>E,"JsdocTypeNull"),JsdocTypeNotNullable:m((E,D)=>({type:"JsdocTypeNotNullable",element:D(E.element),meta:{position:E.meta.position}}),"JsdocTypeNotNullable"),JsdocTypeSpecialNamePath:m(E=>E,"JsdocTypeSpecialNamePath"),JsdocTypeObjectField:m((E,D)=>({type:"JsdocTypeObjectField",key:E.key,right:E.right===void 0?void 0:D(E.right),optional:E.optional,readonly:E.readonly,meta:E.meta}),"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:m((E,D)=>({type:"JsdocTypeJsdocObjectField",left:D(E.left),right:D(E.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:m((E,D)=>({type:"JsdocTypeKeyValue",key:E.key,right:E.right===void 0?void 0:D(E.right),optional:E.optional,variadic:E.variadic}),"JsdocTypeKeyValue"),JsdocTypeImport:m((E,D)=>({type:"JsdocTypeImport",element:D(E.element)}),"JsdocTypeImport"),JsdocTypeAny:m(E=>E,"JsdocTypeAny"),JsdocTypeStringValue:m(E=>E,"JsdocTypeStringValue"),JsdocTypeNamePath:m(E=>E,"JsdocTypeNamePath"),JsdocTypeVariadic:m((E,D)=>{const J={type:"JsdocTypeVariadic",meta:{position:E.meta.position,squareBrackets:E.meta.squareBrackets}};return E.element!==void 0&&(J.element=D(E.element)),J},"JsdocTypeVariadic"),JsdocTypeTuple:m((E,D)=>({type:"JsdocTypeTuple",elements:E.elements.map(D)}),"JsdocTypeTuple"),JsdocTypeName:m(E=>E,"JsdocTypeName"),JsdocTypeFunction:m((E,D)=>{const J={type:"JsdocTypeFunction",arrow:E.arrow,parameters:E.parameters.map(D),constructor:E.constructor,parenthesis:E.parenthesis};return E.returnType!==void 0&&(J.returnType=D(E.returnType)),J},"JsdocTypeFunction"),JsdocTypeKeyof:m((E,D)=>({type:"JsdocTypeKeyof",element:D(E.element)}),"JsdocTypeKeyof"),JsdocTypeParenthesis:m((E,D)=>({type:"JsdocTypeParenthesis",element:D(E.element)}),"JsdocTypeParenthesis"),JsdocTypeProperty:m(E=>E,"JsdocTypeProperty"),JsdocTypePredicate:m((E,D)=>({type:"JsdocTypePredicate",left:D(E.left),right:D(E.right)}),"JsdocTypePredicate"),JsdocTypeIndexSignature:m((E,D)=>({type:"JsdocTypeIndexSignature",key:E.key,right:D(E.right)}),"JsdocTypeIndexSignature"),JsdocTypeMappedType:m((E,D)=>({type:"JsdocTypeMappedType",key:E.key,right:D(E.right)}),"JsdocTypeMappedType"),JsdocTypeAsserts:m((E,D)=>({type:"JsdocTypeAsserts",left:D(E.left),right:D(E.right)}),"JsdocTypeAsserts"),JsdocTypeReadonlyArray:m((E,D)=>({type:"JsdocTypeReadonlyArray",element:D(E.element)}),"JsdocTypeReadonlyArray"),JsdocTypeAssertsPlain:m((E,D)=>({type:"JsdocTypeAssertsPlain",element:D(E.element)}),"JsdocTypeAssertsPlain"),JsdocTypeConditional:m((E,D)=>({type:"JsdocTypeConditional",checksType:D(E.checksType),extendsType:D(E.extendsType),trueType:D(E.trueType),falseType:D(E.falseType)}),"JsdocTypeConditional"),JsdocTypeTypeParameter:m((E,D)=>({type:"JsdocTypeTypeParameter",name:D(E.name),constraint:E.constraint!==void 0?D(E.constraint):void 0,defaultValue:E.defaultValue!==void 0?D(E.defaultValue):void 0}),"JsdocTypeTypeParameter")}}m(hr,"identityTransformRules");const ms={JsdocTypeAny:[],JsdocTypeFunction:["parameters","returnType"],JsdocTypeGeneric:["left","elements"],JsdocTypeImport:[],JsdocTypeIndexSignature:["right"],JsdocTypeIntersection:["elements"],JsdocTypeKeyof:["element"],JsdocTypeKeyValue:["right"],JsdocTypeMappedType:["right"],JsdocTypeName:[],JsdocTypeNamePath:["left","right"],JsdocTypeNotNullable:["element"],JsdocTypeNull:[],JsdocTypeNullable:["element"],JsdocTypeNumber:[],JsdocTypeObject:["elements"],JsdocTypeObjectField:["right"],JsdocTypeJsdocObjectField:["left","right"],JsdocTypeOptional:["element"],JsdocTypeParenthesis:["element"],JsdocTypeSpecialNamePath:[],JsdocTypeStringValue:[],JsdocTypeSymbol:["element"],JsdocTypeTuple:["elements"],JsdocTypeTypeof:["element"],JsdocTypeUndefined:[],JsdocTypeUnion:["elements"],JsdocTypeUnknown:[],JsdocTypeVariadic:["element"],JsdocTypeProperty:[],JsdocTypePredicate:["left","right"],JsdocTypeAsserts:["left","right"],JsdocTypeReadonlyArray:["element"],JsdocTypeAssertsPlain:["element"],JsdocTypeConditional:["checksType","extendsType","trueType","falseType"],JsdocTypeTypeParameter:["name","constraint","defaultValue"]};function hi(E,D,J,me,ze){me?.(E,D,J);const nt=ms[E.type];for(const St of nt){const rr=E[St];if(rr!==void 0)if(Array.isArray(rr))for(const Jr of rr)hi(Jr,E,St,me,ze);else hi(rr,E,St,me,ze)}ze?.(E,D,J)}m(hi,"_traverse");function gs(E,D,J){hi(E,void 0,void 0,D,J)}m(gs,"traverse"),r.catharsisTransform=Ct,r.identityTransformRules=hr,r.jtpTransform=ro,r.parse=Ht,r.stringify=In,r.stringifyRules=Pr,r.transform=ut,r.traverse=gs,r.tryParse=_r,r.visitorKeys=ms})}}),RQ=He({"../node_modules/browser-dtector/browser-dtector.umd.min.js"(t,e){(function(r,n){typeof t=="object"&&typeof e<"u"?e.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).BrowserDetector=n()})(t,function(){function r(p,g){for(var _=0;_<g.length;_++){var x=g[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,(P=x.key,A=void 0,typeof(A=function(M,F){if(typeof M!="object"||M===null)return M;var z=M[Symbol.toPrimitive];if(z!==void 0){var j=z.call(M,F);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(M)}(P,"string"))=="symbol"?A:String(A)),x)}var P,A}m(r,"e");var n={chrome:"Google Chrome",brave:"Brave",crios:"Google Chrome",edge:"Microsoft Edge",edg:"Microsoft Edge",edgios:"Microsoft Edge",fennec:"Mozilla Firefox",jsdom:"JsDOM",mozilla:"Mozilla Firefox",fxios:"Mozilla Firefox",msie:"Microsoft Internet Explorer",opera:"Opera",opios:"Opera",opr:"Opera",opt:"Opera",rv:"Microsoft Internet Explorer",safari:"Safari",samsungbrowser:"Samsung Browser",electron:"Electron"},i={android:"Android",androidTablet:"Android Tablet",cros:"Chrome OS",fennec:"Android Tablet",ipad:"IPad",iphone:"IPhone",jsdom:"JsDOM",linux:"Linux",mac:"Macintosh",tablet:"Android Tablet",win:"Windows","windows phone":"Windows Phone",xbox:"Microsoft Xbox"},l=m(function(p){var g=new RegExp("^-?\\d+(?:.\\d{0,".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,"})?")),_=Number(p).toString().match(g);return _?_[0]:null},"n"),c=m(function(){return typeof window<"u"?window.navigator:null},"i"),s=function(){function p(P){var A;(function(M,F){if(!(M instanceof F))throw new TypeError("Cannot call a class as a function")})(this,p),this.userAgent=P||((A=c())===null||A===void 0?void 0:A.userAgent)||null}m(p,"t");var g,_,x;return g=p,_=[{key:"parseUserAgent",value:m(function(P){var A,M,F,z={},j=P||this.userAgent||"",$=j.toLowerCase().replace(/\s\s+/g," "),W=/(edge)\/([\w.]+)/.exec($)||/(edg)[/]([\w.]+)/.exec($)||/(opr)[/]([\w.]+)/.exec($)||/(opt)[/]([\w.]+)/.exec($)||/(fxios)[/]([\w.]+)/.exec($)||/(edgios)[/]([\w.]+)/.exec($)||/(jsdom)[/]([\w.]+)/.exec($)||/(samsungbrowser)[/]([\w.]+)/.exec($)||/(electron)[/]([\w.]+)/.exec($)||/(chrome)[/]([\w.]+)/.exec($)||/(crios)[/]([\w.]+)/.exec($)||/(opios)[/]([\w.]+)/.exec($)||/(version)(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec($)||/(webkit)[/]([\w.]+).*(version)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec($)||/(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec($)||/(webkit)[/]([\w.]+)/.exec($)||/(opera)(?:.*version|)[/]([\w.]+)/.exec($)||/(msie) ([\w.]+)/.exec($)||/(fennec)[/]([\w.]+)/.exec($)||$.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec($)||$.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec($)||[],X=/(ipad)/.exec($)||/(ipod)/.exec($)||/(iphone)/.exec($)||/(jsdom)/.exec($)||/(windows phone)/.exec($)||/(xbox)/.exec($)||/(win)/.exec($)||/(tablet)/.exec($)||/(android)/.test($)&&/(mobile)/.test($)===!1&&["androidTablet"]||/(android)/.exec($)||/(mac)/.exec($)||/(linux)/.exec($)||/(cros)/.exec($)||[],te=W[5]||W[3]||W[1]||null,ne=X[0]||null,Z=W[4]||W[2]||null,U=c();te==="chrome"&&typeof(U==null||(A=U.brave)===null||A===void 0?void 0:A.isBrave)=="function"&&(te="brave"),te&&(z[te]=!0),ne&&(z[ne]=!0);var K=!!(z.tablet||z.android||z.androidTablet),he=!!(z.ipad||z.tablet||z.androidTablet),ue=!!(z.android||z.androidTablet||z.tablet||z.ipad||z.ipod||z.iphone||z["windows phone"]),we=!!(z.cros||z.mac||z.linux||z.win),Ie=!!(z.brave||z.chrome||z.crios||z.opr||z.safari||z.edg||z.electron),ee=!!(z.msie||z.rv);return{name:(M=n[te])!==null&&M!==void 0?M:null,platform:(F=i[ne])!==null&&F!==void 0?F:null,userAgent:j,version:Z,shortVersion:Z?l(parseFloat(Z),2):null,isAndroid:K,isTablet:he,isMobile:ue,isDesktop:we,isWebkit:Ie,isIE:ee}},"value")},{key:"getBrowserInfo",value:m(function(){var P=this.parseUserAgent();return{name:P.name,platform:P.platform,userAgent:P.userAgent,version:P.version,shortVersion:P.shortVersion}},"value")}],x=[{key:"VERSION",get:m(function(){return"3.4.0"},"get")}],_&&r(g.prototype,_),x&&r(g,x),Object.defineProperty(g,"prototype",{writable:!1}),p}();return s})}}),LC={};Do(LC,{ARGTYPES_INFO_REQUEST:()=>MN,ARGTYPES_INFO_RESPONSE:()=>WT,CHANNEL_CREATED:()=>MQ,CHANNEL_WS_DISCONNECT:()=>hN,CONFIG_ERROR:()=>dN,CREATE_NEW_STORYFILE_REQUEST:()=>OQ,CREATE_NEW_STORYFILE_RESPONSE:()=>kQ,CURRENT_STORY_WAS_SET:()=>GT,DOCS_PREPARED:()=>pN,DOCS_RENDERED:()=>NC,FILE_COMPONENT_SEARCH_REQUEST:()=>LQ,FILE_COMPONENT_SEARCH_RESPONSE:()=>DQ,FORCE_REMOUNT:()=>Sb,FORCE_RE_RENDER:()=>FC,GLOBALS_UPDATED:()=>Hg,NAVIGATE_URL:()=>NQ,OPEN_IN_EDITOR_REQUEST:()=>eee,OPEN_IN_EDITOR_RESPONSE:()=>tee,PLAY_FUNCTION_THREW_EXCEPTION:()=>fN,PRELOAD_ENTRIES:()=>gN,PREVIEW_BUILDER_PROGRESS:()=>FQ,PREVIEW_INITIALIZED:()=>yN,PREVIEW_KEYDOWN:()=>_N,REGISTER_SUBSCRIPTION:()=>zQ,REQUEST_WHATS_NEW_DATA:()=>WQ,RESET_STORY_ARGS:()=>zC,RESULT_WHATS_NEW_DATA:()=>ZQ,SAVE_STORY_REQUEST:()=>XQ,SAVE_STORY_RESPONSE:()=>QQ,SELECT_STORY:()=>jQ,SET_CONFIG:()=>BQ,SET_CURRENT_STORY:()=>jC,SET_FILTER:()=>qQ,SET_GLOBALS:()=>bN,SET_INDEX:()=>$Q,SET_STORIES:()=>VQ,SET_WHATS_NEW_CACHE:()=>KQ,SHARED_STATE_CHANGED:()=>UQ,SHARED_STATE_SET:()=>GQ,STORIES_COLLAPSE_ALL:()=>HQ,STORIES_EXPAND_ALL:()=>JQ,STORY_ARGS_UPDATED:()=>vN,STORY_CHANGED:()=>xN,STORY_ERRORED:()=>wN,STORY_FINISHED:()=>JT,STORY_HOT_UPDATED:()=>AN,STORY_INDEX_INVALIDATED:()=>EN,STORY_MISSING:()=>HT,STORY_PREPARED:()=>TN,STORY_RENDERED:()=>Cb,STORY_RENDER_PHASE_CHANGED:()=>Ih,STORY_SPECIFIED:()=>SN,STORY_THREW_EXCEPTION:()=>CN,STORY_UNCHANGED:()=>PN,TELEMETRY_ERROR:()=>IN,TOGGLE_WHATS_NEW_NOTIFICATIONS:()=>YQ,UNHANDLED_ERRORS_WHILE_PLAYING:()=>mN,UPDATE_GLOBALS:()=>BC,UPDATE_QUERY_PARAMS:()=>RN,UPDATE_STORY_ARGS:()=>qC,default:()=>IQ});var DC=(t=>(t.CHANNEL_WS_DISCONNECT="channelWSDisconnect",t.CHANNEL_CREATED="channelCreated",t.CONFIG_ERROR="configError",t.STORY_INDEX_INVALIDATED="storyIndexInvalidated",t.STORY_SPECIFIED="storySpecified",t.SET_CONFIG="setConfig",t.SET_STORIES="setStories",t.SET_INDEX="setIndex",t.SET_CURRENT_STORY="setCurrentStory",t.CURRENT_STORY_WAS_SET="currentStoryWasSet",t.FORCE_RE_RENDER="forceReRender",t.FORCE_REMOUNT="forceRemount",t.PRELOAD_ENTRIES="preloadStories",t.STORY_PREPARED="storyPrepared",t.DOCS_PREPARED="docsPrepared",t.STORY_CHANGED="storyChanged",t.STORY_UNCHANGED="storyUnchanged",t.STORY_RENDERED="storyRendered",t.STORY_FINISHED="storyFinished",t.STORY_MISSING="storyMissing",t.STORY_ERRORED="storyErrored",t.STORY_THREW_EXCEPTION="storyThrewException",t.STORY_RENDER_PHASE_CHANGED="storyRenderPhaseChanged",t.STORY_HOT_UPDATED="storyHotUpdated",t.PLAY_FUNCTION_THREW_EXCEPTION="playFunctionThrewException",t.UNHANDLED_ERRORS_WHILE_PLAYING="unhandledErrorsWhilePlaying",t.UPDATE_STORY_ARGS="updateStoryArgs",t.STORY_ARGS_UPDATED="storyArgsUpdated",t.RESET_STORY_ARGS="resetStoryArgs",t.SET_FILTER="setFilter",t.SET_GLOBALS="setGlobals",t.UPDATE_GLOBALS="updateGlobals",t.GLOBALS_UPDATED="globalsUpdated",t.REGISTER_SUBSCRIPTION="registerSubscription",t.PREVIEW_INITIALIZED="previewInitialized",t.PREVIEW_KEYDOWN="previewKeydown",t.PREVIEW_BUILDER_PROGRESS="preview_builder_progress",t.SELECT_STORY="selectStory",t.STORIES_COLLAPSE_ALL="storiesCollapseAll",t.STORIES_EXPAND_ALL="storiesExpandAll",t.DOCS_RENDERED="docsRendered",t.SHARED_STATE_CHANGED="sharedStateChanged",t.SHARED_STATE_SET="sharedStateSet",t.NAVIGATE_URL="navigateUrl",t.UPDATE_QUERY_PARAMS="updateQueryParams",t.REQUEST_WHATS_NEW_DATA="requestWhatsNewData",t.RESULT_WHATS_NEW_DATA="resultWhatsNewData",t.SET_WHATS_NEW_CACHE="setWhatsNewCache",t.TOGGLE_WHATS_NEW_NOTIFICATIONS="toggleWhatsNewNotifications",t.TELEMETRY_ERROR="telemetryError",t.FILE_COMPONENT_SEARCH_REQUEST="fileComponentSearchRequest",t.FILE_COMPONENT_SEARCH_RESPONSE="fileComponentSearchResponse",t.SAVE_STORY_REQUEST="saveStoryRequest",t.SAVE_STORY_RESPONSE="saveStoryResponse",t.ARGTYPES_INFO_REQUEST="argtypesInfoRequest",t.ARGTYPES_INFO_RESPONSE="argtypesInfoResponse",t.CREATE_NEW_STORYFILE_REQUEST="createNewStoryfileRequest",t.CREATE_NEW_STORYFILE_RESPONSE="createNewStoryfileResponse",t.OPEN_IN_EDITOR_REQUEST="openInEditorRequest",t.OPEN_IN_EDITOR_RESPONSE="openInEditorResponse",t))(DC||{}),IQ=DC,{CHANNEL_WS_DISCONNECT:hN,CHANNEL_CREATED:MQ,CONFIG_ERROR:dN,CREATE_NEW_STORYFILE_REQUEST:OQ,CREATE_NEW_STORYFILE_RESPONSE:kQ,CURRENT_STORY_WAS_SET:GT,DOCS_PREPARED:pN,DOCS_RENDERED:NC,FILE_COMPONENT_SEARCH_REQUEST:LQ,FILE_COMPONENT_SEARCH_RESPONSE:DQ,FORCE_RE_RENDER:FC,FORCE_REMOUNT:Sb,GLOBALS_UPDATED:Hg,NAVIGATE_URL:NQ,PLAY_FUNCTION_THREW_EXCEPTION:fN,UNHANDLED_ERRORS_WHILE_PLAYING:mN,PRELOAD_ENTRIES:gN,PREVIEW_INITIALIZED:yN,PREVIEW_BUILDER_PROGRESS:FQ,PREVIEW_KEYDOWN:_N,REGISTER_SUBSCRIPTION:zQ,RESET_STORY_ARGS:zC,SELECT_STORY:jQ,SET_CONFIG:BQ,SET_CURRENT_STORY:jC,SET_FILTER:qQ,SET_GLOBALS:bN,SET_INDEX:$Q,SET_STORIES:VQ,SHARED_STATE_CHANGED:UQ,SHARED_STATE_SET:GQ,STORIES_COLLAPSE_ALL:HQ,STORIES_EXPAND_ALL:JQ,STORY_ARGS_UPDATED:vN,STORY_CHANGED:xN,STORY_ERRORED:wN,STORY_INDEX_INVALIDATED:EN,STORY_MISSING:HT,STORY_PREPARED:TN,STORY_RENDER_PHASE_CHANGED:Ih,STORY_RENDERED:Cb,STORY_FINISHED:JT,STORY_SPECIFIED:SN,STORY_THREW_EXCEPTION:CN,STORY_UNCHANGED:PN,STORY_HOT_UPDATED:AN,UPDATE_GLOBALS:BC,UPDATE_QUERY_PARAMS:RN,UPDATE_STORY_ARGS:qC,REQUEST_WHATS_NEW_DATA:WQ,RESULT_WHATS_NEW_DATA:ZQ,SET_WHATS_NEW_CACHE:KQ,TOGGLE_WHATS_NEW_NOTIFICATIONS:YQ,TELEMETRY_ERROR:IN,SAVE_STORY_REQUEST:XQ,SAVE_STORY_RESPONSE:QQ,ARGTYPES_INFO_REQUEST:MN,ARGTYPES_INFO_RESPONSE:WT,OPEN_IN_EDITOR_REQUEST:eee,OPEN_IN_EDITOR_RESPONSE:tee}=DC,ON={};Do(ON,{global:()=>$t});var $t=(()=>{let t;return typeof window<"u"?t=window:typeof globalThis<"u"?t=globalThis:typeof global<"u"?t=global:typeof self<"u"?t=self:t={},t})(),kN={"@storybook/global":"__STORYBOOK_MODULE_GLOBAL__","storybook/test":"__STORYBOOK_MODULE_TEST__","storybook/actions":"__STORYBOOK_MODULE_ACTIONS__","storybook/preview-api":"__STORYBOOK_MODULE_PREVIEW_API__","storybook/internal/channels":"__STORYBOOK_MODULE_CHANNELS__","storybook/internal/client-logger":"__STORYBOOK_MODULE_CLIENT_LOGGER__","storybook/internal/core-events":"__STORYBOOK_MODULE_CORE_EVENTS__","storybook/internal/preview-errors":"__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__","storybook/internal/types":"__STORYBOOK_MODULE_TYPES__","storybook/internal/preview-api":"__STORYBOOK_MODULE_PREVIEW_API__"},ree=Object.keys(kN),LN={};Do(LN,{Channel:()=>e1,HEARTBEAT_INTERVAL:()=>G4,HEARTBEAT_MAX_LATENCY:()=>H4,PostMessageTransport:()=>U4,WebsocketTransport:()=>W4,createBrowserChannel:()=>Z4,default:()=>Pre});function Kr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(s,p){var g=p.match(/\n([\t ]+|(?!\s).)/g);return g?s.concat(g.map(function(_){var x,P;return(P=(x=_.match(/[\t ]/g))===null||x===void 0?void 0:x.length)!==null&&P!==void 0?P:0})):s},[]);if(i.length){var l=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(s){return s.replace(l,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var c=n[0];return e.forEach(function(s,p){var g=c.match(/(?:^|\n)( *)$/),_=g?g[1]:"",x=s;typeof s=="string"&&s.includes(`
`)&&(x=String(s).split(`
`).map(function(P,A){return A===0?P:""+_+P}).join(`
`)),c+=x+n[p+1]}),c}m(Kr,"dedent");var nO=new Map,nee="UNIVERSAL_STORE:",ws={PENDING:"PENDING",RESOLVED:"RESOLVED",REJECTED:"REJECTED"},au=class kr{constructor(e,r){if(this.debugging=!1,this.listeners=new Map([["*",new Set]]),this.getState=m(()=>(this.debug("getState",{state:this.state}),this.state),"getState"),this.subscribe=m((n,i)=>{const l=typeof n=="function",c=l?"*":n,s=l?n:i;if(this.debug("subscribe",{eventType:c,listener:s}),!s)throw new TypeError(`Missing first subscribe argument, or second if first is the event type, when subscribing to a UniversalStore with id '${this.id}'`);return this.listeners.has(c)||this.listeners.set(c,new Set),this.listeners.get(c).add(s),()=>{this.debug("unsubscribe",{eventType:c,listener:s}),this.listeners.has(c)&&(this.listeners.get(c).delete(s),this.listeners.get(c)?.size===0&&this.listeners.delete(c))}},"subscribe"),this.send=m(n=>{if(this.debug("send",{event:n}),this.status!==kr.Status.READY)throw new TypeError(Kr`Cannot send event before store is ready. You can get the current status with store.status,
        or await store.readyPromise to wait for the store to be ready before sending events.
        ${JSON.stringify({event:n,id:this.id,actor:this.actor,environment:this.environment},null,2)}`);this.emitToListeners(n,{actor:this.actor}),this.emitToChannel(n,{actor:this.actor})},"send"),this.debugging=e.debug??!1,!kr.isInternalConstructing)throw new TypeError("UniversalStore is not constructable - use UniversalStore.create() instead");if(kr.isInternalConstructing=!1,this.id=e.id,this.actorId=Date.now().toString(36)+Math.random().toString(36).substring(2),this.actorType=e.leader?kr.ActorType.LEADER:kr.ActorType.FOLLOWER,this.state=e.initialState,this.channelEventName=`${nee}${this.id}`,this.debug("constructor",{options:e,environmentOverrides:r,channelEventName:this.channelEventName}),this.actor.type===kr.ActorType.LEADER)this.syncing={state:ws.RESOLVED,promise:Promise.resolve()};else{let n,i;const l=new Promise((c,s)=>{n=m(()=>{this.syncing.state===ws.PENDING&&(this.syncing.state=ws.RESOLVED,c())},"syncingResolve"),i=m(p=>{this.syncing.state===ws.PENDING&&(this.syncing.state=ws.REJECTED,s(p))},"syncingReject")});this.syncing={state:ws.PENDING,promise:l,resolve:n,reject:i}}this.getState=this.getState.bind(this),this.setState=this.setState.bind(this),this.subscribe=this.subscribe.bind(this),this.onStateChange=this.onStateChange.bind(this),this.send=this.send.bind(this),this.emitToChannel=this.emitToChannel.bind(this),this.prepareThis=this.prepareThis.bind(this),this.emitToListeners=this.emitToListeners.bind(this),this.handleChannelEvents=this.handleChannelEvents.bind(this),this.debug=this.debug.bind(this),this.channel=r?.channel??kr.preparation.channel,this.environment=r?.environment??kr.preparation.environment,this.channel&&this.environment?(kr.preparation.resolve({channel:this.channel,environment:this.environment}),this.prepareThis({channel:this.channel,environment:this.environment})):kr.preparation.promise.then(this.prepareThis)}static setupPreparationPromise(){let e,r;const n=new Promise((i,l)=>{e=m(c=>{i(c)},"resolveRef"),r=m((...c)=>{l(c)},"rejectRef")});kr.preparation={resolve:e,reject:r,promise:n}}get actor(){return Object.freeze({id:this.actorId,type:this.actorType,environment:this.environment??kr.Environment.UNKNOWN})}get status(){if(!this.channel||!this.environment)return kr.Status.UNPREPARED;switch(this.syncing?.state){case ws.PENDING:case void 0:return kr.Status.SYNCING;case ws.REJECTED:return kr.Status.ERROR;case ws.RESOLVED:default:return kr.Status.READY}}untilReady(){return Promise.all([kr.preparation.promise,this.syncing?.promise])}static create(e){if(!e||typeof e?.id!="string")throw new TypeError("id is required and must be a string, when creating a UniversalStore");e.debug&&console.debug(Kr`[UniversalStore]
        create`,{options:e});const r=nO.get(e.id);if(r)return console.warn(Kr`UniversalStore with id "${e.id}" already exists in this environment, re-using existing.
        You should reuse the existing instance instead of trying to create a new one.`),r;kr.isInternalConstructing=!0;const n=new kr(e);return nO.set(e.id,n),n}static __prepare(e,r){kr.preparation.channel=e,kr.preparation.environment=r,kr.preparation.resolve({channel:e,environment:r})}setState(e){const r=this.state,n=typeof e=="function"?e(r):e;if(this.debug("setState",{newState:n,previousState:r,updater:e}),this.status!==kr.Status.READY)throw new TypeError(Kr`Cannot set state before store is ready. You can get the current status with store.status,
        or await store.readyPromise to wait for the store to be ready before sending events.
        ${JSON.stringify({newState:n,id:this.id,actor:this.actor,environment:this.environment},null,2)}`);this.state=n;const i={type:kr.InternalEventType.SET_STATE,payload:{state:n,previousState:r}};this.emitToChannel(i,{actor:this.actor}),this.emitToListeners(i,{actor:this.actor})}onStateChange(e){return this.debug("onStateChange",{listener:e}),this.subscribe(kr.InternalEventType.SET_STATE,({payload:r},n)=>{e(r.state,r.previousState,n)})}emitToChannel(e,r){this.debug("emitToChannel",{event:e,eventInfo:r,channel:!!this.channel}),this.channel?.emit(this.channelEventName,{event:e,eventInfo:r})}prepareThis({channel:e,environment:r}){this.channel=e,this.environment=r,this.debug("prepared",{channel:!!e,environment:r}),this.channel.on(this.channelEventName,this.handleChannelEvents),this.actor.type===kr.ActorType.LEADER?this.emitToChannel({type:kr.InternalEventType.LEADER_CREATED},{actor:this.actor}):(this.emitToChannel({type:kr.InternalEventType.FOLLOWER_CREATED},{actor:this.actor}),this.emitToChannel({type:kr.InternalEventType.EXISTING_STATE_REQUEST},{actor:this.actor}),setTimeout(()=>{this.syncing.reject(new TypeError(`No existing state found for follower with id: '${this.id}'. Make sure a leader with the same id exists before creating a follower.`))},1e3))}emitToListeners(e,r){const n=this.listeners.get(e.type),i=this.listeners.get("*");this.debug("emitToListeners",{event:e,eventInfo:r,eventTypeListeners:n,everythingListeners:i}),[...n??[],...i??[]].forEach(l=>l(e,r))}handleChannelEvents(e){const{event:r,eventInfo:n}=e;if([n.actor.id,n.forwardingActor?.id].includes(this.actor.id)){this.debug("handleChannelEvents: Ignoring event from self",{channelEvent:e});return}else if(this.syncing?.state===ws.PENDING&&r.type!==kr.InternalEventType.EXISTING_STATE_RESPONSE){this.debug("handleChannelEvents: Ignoring event while syncing",{channelEvent:e});return}if(this.debug("handleChannelEvents",{channelEvent:e}),this.actor.type===kr.ActorType.LEADER){let i=!0;switch(r.type){case kr.InternalEventType.EXISTING_STATE_REQUEST:i=!1;const l={type:kr.InternalEventType.EXISTING_STATE_RESPONSE,payload:this.state};this.debug("handleChannelEvents: responding to existing state request",{responseEvent:l}),this.emitToChannel(l,{actor:this.actor}),this.emitToListeners(l,{actor:this.actor});break;case kr.InternalEventType.LEADER_CREATED:i=!1,this.syncing.state=ws.REJECTED,this.debug("handleChannelEvents: erroring due to second leader being created",{event:r}),console.error(Kr`Detected multiple UniversalStore leaders created with the same id "${this.id}".
            Only one leader can exists at a time, your stores are now in an invalid state.
            Leaders detected:
            this: ${JSON.stringify(this.actor,null,2)}
            other: ${JSON.stringify(n.actor,null,2)}`);break}i&&(this.debug("handleChannelEvents: forwarding event",{channelEvent:e}),this.emitToChannel(r,{actor:n.actor,forwardingActor:this.actor}))}if(this.actor.type===kr.ActorType.FOLLOWER)switch(r.type){case kr.InternalEventType.EXISTING_STATE_RESPONSE:if(this.debug("handleChannelEvents: Setting state from leader's existing state response",{event:r}),this.syncing?.state!==ws.PENDING)break;this.syncing.resolve?.();const i={type:kr.InternalEventType.SET_STATE,payload:{state:r.payload,previousState:this.state}};this.state=r.payload,this.emitToListeners(i,n);break}switch(r.type){case kr.InternalEventType.SET_STATE:this.debug("handleChannelEvents: Setting state",{event:r}),this.state=r.payload.state;break}this.emitToListeners(r,{actor:n.actor})}debug(e,r){this.debugging&&console.debug(Kr`[UniversalStore::${this.id}::${this.environment??kr.Environment.UNKNOWN}]
        ${e}`,JSON.stringify({data:r,actor:this.actor,state:this.state,status:this.status},null,2))}static __reset(){kr.preparation.reject(new Error("reset")),kr.setupPreparationPromise(),kr.isInternalConstructing=!1}};m(au,"UniversalStore");au.ActorType={LEADER:"LEADER",FOLLOWER:"FOLLOWER"};au.Environment={SERVER:"SERVER",MANAGER:"MANAGER",PREVIEW:"PREVIEW",UNKNOWN:"UNKNOWN",MOCK:"MOCK"};au.InternalEventType={EXISTING_STATE_REQUEST:"__EXISTING_STATE_REQUEST",EXISTING_STATE_RESPONSE:"__EXISTING_STATE_RESPONSE",SET_STATE:"__SET_STATE",LEADER_CREATED:"__LEADER_CREATED",FOLLOWER_CREATED:"__FOLLOWER_CREATED"};au.Status={UNPREPARED:"UNPREPARED",SYNCING:"SYNCING",READY:"READY",ERROR:"ERROR"};au.isInternalConstructing=!1;au.setupPreparationPromise();var PE=au,iee=m(t=>t.transports!==void 0,"isMulti"),oee=m(()=>Math.random().toString(16).slice(2),"generateRandomId"),DN=class{constructor(e={}){this.sender=oee(),this.events={},this.data={},this.transports=[],this.isAsync=e.async||!1,iee(e)?(this.transports=e.transports||[],this.transports.forEach(r=>{r.setHandler(n=>this.handleEvent(n))})):this.transports=e.transport?[e.transport]:[],this.transports.forEach(r=>{r.setHandler(n=>this.handleEvent(n))})}get hasTransport(){return this.transports.length>0}addListener(e,r){this.events[e]=this.events[e]||[],this.events[e].push(r)}emit(e,...r){const n={type:e,args:r,from:this.sender};let i={};r.length>=1&&r[0]&&r[0].options&&(i=r[0].options);const l=m(()=>{this.transports.forEach(c=>{c.send(n,i)}),this.handleEvent(n)},"handler");this.isAsync?setImmediate(l):l()}last(e){return this.data[e]}eventNames(){return Object.keys(this.events)}listenerCount(e){const r=this.listeners(e);return r?r.length:0}listeners(e){return this.events[e]||void 0}once(e,r){const n=this.onceListener(e,r);this.addListener(e,n)}removeAllListeners(e){e?this.events[e]&&delete this.events[e]:this.events={}}removeListener(e,r){const n=this.listeners(e);n&&(this.events[e]=n.filter(i=>i!==r))}on(e,r){this.addListener(e,r)}off(e,r){this.removeListener(e,r)}handleEvent(e){const r=this.listeners(e.type);r&&r.length&&r.forEach(n=>{n.apply(e,e.args)}),this.data[e.type]=e.args}onceListener(e,r){const n=m((...i)=>(this.removeListener(e,n),r(...i)),"onceListener");return n}};m(DN,"Channel");var e1=DN,NN={};Do(NN,{deprecate:()=>$C,logger:()=>Bn,once:()=>oi,pretty:()=>hs});var{LOGLEVEL:see}=$t,Rc={trace:1,debug:2,info:3,warn:4,error:5,silent:10},aee=see,lp=Rc[aee]||Rc.info,Bn={trace:m((t,...e)=>{lp<=Rc.trace&&console.trace(t,...e)},"trace"),debug:m((t,...e)=>{lp<=Rc.debug&&console.debug(t,...e)},"debug"),info:m((t,...e)=>{lp<=Rc.info&&console.info(t,...e)},"info"),warn:m((t,...e)=>{lp<=Rc.warn&&console.warn(t,...e)},"warn"),error:m((t,...e)=>{lp<=Rc.error&&console.error(t,...e)},"error"),log:m((t,...e)=>{lp<Rc.silent&&console.log(t,...e)},"log")},ZT=new Set,oi=m(t=>(e,...r)=>{if(!ZT.has(e))return ZT.add(e),Bn[t](e,...r)},"once");oi.clear=()=>ZT.clear();oi.trace=oi("trace");oi.debug=oi("debug");oi.info=oi("info");oi.warn=oi("warn");oi.error=oi("error");oi.log=oi("log");var $C=oi("warn"),hs=m(t=>(...e)=>{const r=[];if(e.length){const n=/<span\s+style=(['"])([^'"]*)\1\s*>/gi,i=/<\/span>/gi;let l;for(r.push(e[0].replace(n,"%c").replace(i,"%c"));l=n.exec(e[0]);)r.push(l[2]),r.push("");for(let c=1;c<e.length;c++)r.push(e[c])}Bn[t].apply(Bn,r)},"pretty");hs.trace=hs("trace");hs.debug=hs("debug");hs.info=hs("info");hs.warn=hs("warn");hs.error=hs("error");var lee=Object.create,FN=Object.defineProperty,cee=Object.getOwnPropertyDescriptor,zN=Object.getOwnPropertyNames,uee=Object.getPrototypeOf,hee=Object.prototype.hasOwnProperty,Hr=m((t,e)=>m(function(){return e||(0,t[zN(t)[0]])((e={exports:{}}).exports,e),e.exports},"__require"),"__commonJS"),dee=m((t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zN(e))!hee.call(t,i)&&i!==r&&FN(t,i,{get:m(()=>e[i],"get"),enumerable:!(n=cee(e,i))||n.enumerable});return t},"__copyProps"),VC=m((t,e,r)=>(r=t!=null?lee(uee(t)):{},dee(e||!t||!t.__esModule?FN(r,"default",{value:t,enumerable:!0}):r,t)),"__toESM"),pee=["bubbles","cancelBubble","cancelable","composed","currentTarget","defaultPrevented","eventPhase","isTrusted","returnValue","srcElement","target","timeStamp","type"],fee=["detail"];function jN(t){const e=pee.filter(r=>t[r]!==void 0).reduce((r,n)=>(r[n]=t[n],r),{});if(t instanceof CustomEvent)for(const r of fee.filter(n=>t[n]!==void 0))e[r]=t[r];return e}m(jN,"extractEventHiddenProperties");var BN=Hr({"node_modules/.pnpm/es-object-atoms@1.1.1/node_modules/es-object-atoms/index.js"(t,e){e.exports=Object}}),mee=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/index.js"(t,e){e.exports=Error}}),gee=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/eval.js"(t,e){e.exports=EvalError}}),yee=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/range.js"(t,e){e.exports=RangeError}}),_ee=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/ref.js"(t,e){e.exports=ReferenceError}}),bee=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/syntax.js"(t,e){e.exports=SyntaxError}}),UC=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/type.js"(t,e){e.exports=TypeError}}),vee=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/uri.js"(t,e){e.exports=URIError}}),xee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/abs.js"(t,e){e.exports=Math.abs}}),wee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/floor.js"(t,e){e.exports=Math.floor}}),Eee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/max.js"(t,e){e.exports=Math.max}}),Tee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/min.js"(t,e){e.exports=Math.min}}),See=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/pow.js"(t,e){e.exports=Math.pow}}),Cee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/round.js"(t,e){e.exports=Math.round}}),Pee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/isNaN.js"(t,e){e.exports=Number.isNaN||m(function(n){return n!==n},"isNaN2")}}),Aee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/sign.js"(t,e){var r=Pee();e.exports=m(function(i){return r(i)||i===0?i:i<0?-1:1},"sign")}}),Ree=Hr({"node_modules/.pnpm/gopd@1.2.0/node_modules/gopd/gOPD.js"(t,e){e.exports=Object.getOwnPropertyDescriptor}}),GC=Hr({"node_modules/.pnpm/gopd@1.2.0/node_modules/gopd/index.js"(t,e){var r=Ree();if(r)try{r([],"length")}catch{r=null}e.exports=r}}),Iee=Hr({"node_modules/.pnpm/es-define-property@1.0.1/node_modules/es-define-property/index.js"(t,e){var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}e.exports=r}}),qN=Hr({"node_modules/.pnpm/has-symbols@1.1.0/node_modules/has-symbols/shams.js"(t,e){e.exports=m(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},i=Symbol("test"),l=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(l)!=="[object Symbol]")return!1;var c=42;n[i]=c;for(var s in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var p=Object.getOwnPropertySymbols(n);if(p.length!==1||p[0]!==i||!Object.prototype.propertyIsEnumerable.call(n,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var g=Object.getOwnPropertyDescriptor(n,i);if(g.value!==c||g.enumerable!==!0)return!1}return!0},"hasSymbols")}}),$N=Hr({"node_modules/.pnpm/has-symbols@1.1.0/node_modules/has-symbols/index.js"(t,e){var r=typeof Symbol<"u"&&Symbol,n=qN();e.exports=m(function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()},"hasNativeSymbols")}}),VN=Hr({"node_modules/.pnpm/get-proto@1.0.1/node_modules/get-proto/Reflect.getPrototypeOf.js"(t,e){e.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}}),UN=Hr({"node_modules/.pnpm/get-proto@1.0.1/node_modules/get-proto/Object.getPrototypeOf.js"(t,e){var r=BN();e.exports=r.getPrototypeOf||null}}),Mee=Hr({"node_modules/.pnpm/function-bind@1.1.2/node_modules/function-bind/implementation.js"(t,e){var r="Function.prototype.bind called on incompatible ",n=Object.prototype.toString,i=Math.max,l="[object Function]",c=m(function(_,x){for(var P=[],A=0;A<_.length;A+=1)P[A]=_[A];for(var M=0;M<x.length;M+=1)P[M+_.length]=x[M];return P},"concatty2"),s=m(function(_,x){for(var P=[],A=x||0,M=0;A<_.length;A+=1,M+=1)P[M]=_[A];return P},"slicy2"),p=m(function(g,_){for(var x="",P=0;P<g.length;P+=1)x+=g[P],P+1<g.length&&(x+=_);return x},"joiny");e.exports=m(function(_){var x=this;if(typeof x!="function"||n.apply(x)!==l)throw new TypeError(r+x);for(var P=s(arguments,1),A,M=m(function(){if(this instanceof A){var W=x.apply(this,c(P,arguments));return Object(W)===W?W:this}return x.apply(_,c(P,arguments))},"binder"),F=i(0,x.length-P.length),z=[],j=0;j<F;j++)z[j]="$"+j;if(A=Function("binder","return function ("+p(z,",")+"){ return binder.apply(this,arguments); }")(M),x.prototype){var $=m(function(){},"Empty2");$.prototype=x.prototype,A.prototype=new $,$.prototype=null}return A},"bind")}}),t1=Hr({"node_modules/.pnpm/function-bind@1.1.2/node_modules/function-bind/index.js"(t,e){var r=Mee();e.exports=Function.prototype.bind||r}}),HC=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/functionCall.js"(t,e){e.exports=Function.prototype.call}}),GN=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/functionApply.js"(t,e){e.exports=Function.prototype.apply}}),Oee=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/reflectApply.js"(t,e){e.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}}),kee=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/actualApply.js"(t,e){var r=t1(),n=GN(),i=HC(),l=Oee();e.exports=l||r.call(i,n)}}),HN=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/index.js"(t,e){var r=t1(),n=UC(),i=HC(),l=kee();e.exports=m(function(s){if(s.length<1||typeof s[0]!="function")throw new n("a function is required");return l(r,i,s)},"callBindBasic")}}),Lee=Hr({"node_modules/.pnpm/dunder-proto@1.0.1/node_modules/dunder-proto/get.js"(t,e){var r=HN(),n=GC(),i;try{i=[].__proto__===Array.prototype}catch(p){if(!p||typeof p!="object"||!("code"in p)||p.code!=="ERR_PROTO_ACCESS")throw p}var l=!!i&&n&&n(Object.prototype,"__proto__"),c=Object,s=c.getPrototypeOf;e.exports=l&&typeof l.get=="function"?r([l.get]):typeof s=="function"?m(function(g){return s(g==null?g:c(g))},"getDunder"):!1}}),Dee=Hr({"node_modules/.pnpm/get-proto@1.0.1/node_modules/get-proto/index.js"(t,e){var r=VN(),n=UN(),i=Lee();e.exports=r?m(function(c){return r(c)},"getProto"):n?m(function(c){if(!c||typeof c!="object"&&typeof c!="function")throw new TypeError("getProto: not an object");return n(c)},"getProto"):i?m(function(c){return i(c)},"getProto"):null}}),JN=Hr({"node_modules/.pnpm/hasown@2.0.2/node_modules/hasown/index.js"(t,e){var r=Function.prototype.call,n=Object.prototype.hasOwnProperty,i=t1();e.exports=i.call(r,n)}}),Nee=Hr({"node_modules/.pnpm/get-intrinsic@1.3.0/node_modules/get-intrinsic/index.js"(t,e){var r,n=BN(),i=mee(),l=gee(),c=yee(),s=_ee(),p=bee(),g=UC(),_=vee(),x=xee(),P=wee(),A=Eee(),M=Tee(),F=See(),z=Cee(),j=Aee(),$=Function,W=m(function(Ve){try{return $('"use strict"; return ('+Ve+").constructor;")()}catch{}},"getEvalledConstructor"),X=GC(),te=Iee(),ne=m(function(){throw new g},"throwTypeError"),Z=X?function(){try{return arguments.callee,ne}catch{try{return X(arguments,"callee").get}catch{return ne}}}():ne,U=$N()(),K=Dee(),he=UN(),ue=VN(),we=GN(),Ie=HC(),ee={},fe=typeof Uint8Array>"u"||!K?r:K(Uint8Array),ve={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":U&&K?K([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":ee,"%AsyncGenerator%":ee,"%AsyncGeneratorFunction%":ee,"%AsyncIteratorPrototype%":ee,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":l,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":$,"%GeneratorFunction%":ee,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":U&&K?K(K([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!U||!K?r:K(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":n,"%Object.getOwnPropertyDescriptor%":X,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":c,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!U||!K?r:K(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":U&&K?K(""[Symbol.iterator]()):r,"%Symbol%":U?Symbol:r,"%SyntaxError%":p,"%ThrowTypeError%":Z,"%TypedArray%":fe,"%TypeError%":g,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":_,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":Ie,"%Function.prototype.apply%":we,"%Object.defineProperty%":te,"%Object.getPrototypeOf%":he,"%Math.abs%":x,"%Math.floor%":P,"%Math.max%":A,"%Math.min%":M,"%Math.pow%":F,"%Math.round%":z,"%Math.sign%":j,"%Reflect.getPrototypeOf%":ue};if(K)try{null.error}catch(Ve){xe=K(K(Ve)),ve["%Error.prototype%"]=xe}var xe,Xe=m(function Ve(pt){var lt;if(pt==="%AsyncFunction%")lt=W("async function () {}");else if(pt==="%GeneratorFunction%")lt=W("function* () {}");else if(pt==="%AsyncGeneratorFunction%")lt=W("async function* () {}");else if(pt==="%AsyncGenerator%"){var Tt=Ve("%AsyncGeneratorFunction%");Tt&&(lt=Tt.prototype)}else if(pt==="%AsyncIteratorPrototype%"){var vt=Ve("%AsyncGenerator%");vt&&K&&(lt=K(vt.prototype))}return ve[pt]=lt,lt},"doEval2"),Ke={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ze=t1(),bt=JN(),qe=Ze.call(Ie,Array.prototype.concat),kt=Ze.call(we,Array.prototype.splice),Jt=Ze.call(Ie,String.prototype.replace),Pt=Ze.call(Ie,String.prototype.slice),dt=Ze.call(Ie,RegExp.prototype.exec),er=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Wt=/\\(\\)?/g,ar=m(function(pt){var lt=Pt(pt,0,1),Tt=Pt(pt,-1);if(lt==="%"&&Tt!=="%")throw new p("invalid intrinsic syntax, expected closing `%`");if(Tt==="%"&&lt!=="%")throw new p("invalid intrinsic syntax, expected opening `%`");var vt=[];return Jt(pt,er,function(Dt,Yt,Bt,wr){vt[vt.length]=Bt?Jt(wr,Wt,"$1"):Yt||Dt}),vt},"stringToPath3"),_t=m(function(pt,lt){var Tt=pt,vt;if(bt(Ke,Tt)&&(vt=Ke[Tt],Tt="%"+vt[0]+"%"),bt(ve,Tt)){var Dt=ve[Tt];if(Dt===ee&&(Dt=Xe(Tt)),typeof Dt>"u"&&!lt)throw new g("intrinsic "+pt+" exists, but is not available. Please file an issue!");return{alias:vt,name:Tt,value:Dt}}throw new p("intrinsic "+pt+" does not exist!")},"getBaseIntrinsic2");e.exports=m(function(pt,lt){if(typeof pt!="string"||pt.length===0)throw new g("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof lt!="boolean")throw new g('"allowMissing" argument must be a boolean');if(dt(/^%?[^%]*%?$/,pt)===null)throw new p("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Tt=ar(pt),vt=Tt.length>0?Tt[0]:"",Dt=_t("%"+vt+"%",lt),Yt=Dt.name,Bt=Dt.value,wr=!1,Vr=Dt.alias;Vr&&(vt=Vr[0],kt(Tt,qe([0,1],Vr)));for(var Ir=1,Zr=!0;Ir<Tt.length;Ir+=1){var yr=Tt[Ir],ur=Pt(yr,0,1),lr=Pt(yr,-1);if((ur==='"'||ur==="'"||ur==="`"||lr==='"'||lr==="'"||lr==="`")&&ur!==lr)throw new p("property names with quotes must have matching quotes");if((yr==="constructor"||!Zr)&&(wr=!0),vt+="."+yr,Yt="%"+vt+"%",bt(ve,Yt))Bt=ve[Yt];else if(Bt!=null){if(!(yr in Bt)){if(!lt)throw new g("base intrinsic for "+pt+" exists, but the property is not available.");return}if(X&&Ir+1>=Tt.length){var nr=X(Bt,yr);Zr=!!nr,Zr&&"get"in nr&&!("originalValue"in nr.get)?Bt=nr.get:Bt=Bt[yr]}else Zr=bt(Bt,yr),Bt=Bt[yr];Zr&&!wr&&(ve[Yt]=Bt)}}return Bt},"GetIntrinsic")}}),JC=Hr({"node_modules/.pnpm/call-bound@1.0.4/node_modules/call-bound/index.js"(t,e){var r=Nee(),n=HN(),i=n([r("%String.prototype.indexOf%")]);e.exports=m(function(c,s){var p=r(c,!!s);return typeof p=="function"&&i(c,".prototype.")>-1?n([p]):p},"callBoundIntrinsic")}}),Fee=Hr({"node_modules/.pnpm/has-tostringtag@1.0.2/node_modules/has-tostringtag/shams.js"(t,e){var r=qN();e.exports=m(function(){return r()&&!!Symbol.toStringTag},"hasToStringTagShams")}}),WN=Hr({"node_modules/.pnpm/is-regex@1.2.1/node_modules/is-regex/index.js"(t,e){var r=JC(),n=Fee()(),i=JN(),l=GC(),c;n?(s=r("RegExp.prototype.exec"),p={},g=m(function(){throw p},"throwRegexMarker"),_={toString:g,valueOf:g},typeof Symbol.toPrimitive=="symbol"&&(_[Symbol.toPrimitive]=g),c=m(function(M){if(!M||typeof M!="object")return!1;var F=l(M,"lastIndex"),z=F&&i(F,"value");if(!z)return!1;try{s(M,_)}catch(j){return j===p}},"isRegex")):(x=r("Object.prototype.toString"),P="[object RegExp]",c=m(function(M){return!M||typeof M!="object"&&typeof M!="function"?!1:x(M)===P},"isRegex"));var s,p,g,_,x,P;e.exports=c}}),zee=Hr({"node_modules/.pnpm/is-function@1.0.2/node_modules/is-function/index.js"(t,e){e.exports=n;var r=Object.prototype.toString;function n(i){if(!i)return!1;var l=r.call(i);return l==="[object Function]"||typeof i=="function"&&l!=="[object RegExp]"||typeof window<"u"&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)}m(n,"isFunction3")}}),jee=Hr({"node_modules/.pnpm/safe-regex-test@1.1.0/node_modules/safe-regex-test/index.js"(t,e){var r=JC(),n=WN(),i=r("RegExp.prototype.exec"),l=UC();e.exports=m(function(s){if(!n(s))throw new l("`regex` must be a RegExp");return m(function(g){return i(s,g)!==null},"test")},"regexTester")}}),Bee=Hr({"node_modules/.pnpm/is-symbol@1.1.1/node_modules/is-symbol/index.js"(t,e){var r=JC(),n=r("Object.prototype.toString"),i=$N()(),l=jee();i?(c=r("Symbol.prototype.toString"),s=l(/^Symbol\(.*\)$/),p=m(function(_){return typeof _.valueOf()!="symbol"?!1:s(c(_))},"isRealSymbolObject"),e.exports=m(function(_){if(typeof _=="symbol")return!0;if(!_||typeof _!="object"||n(_)!=="[object Symbol]")return!1;try{return p(_)}catch{return!1}},"isSymbol3")):e.exports=m(function(_){return!1},"isSymbol3");var c,s,p}}),qee=VC(WN()),$ee=VC(zee()),Vee=VC(Bee());function ZN(t){return t!=null&&typeof t=="object"&&Array.isArray(t)===!1}m(ZN,"isObject");var Uee=typeof global=="object"&&global&&global.Object===Object&&global,Gee=Uee,Hee=typeof self=="object"&&self&&self.Object===Object&&self,Jee=Gee||Hee||Function("return this")(),WC=Jee,Wee=WC.Symbol,Jp=Wee,KN=Object.prototype,Zee=KN.hasOwnProperty,Kee=KN.toString,Ym=Jp?Jp.toStringTag:void 0;function YN(t){var e=Zee.call(t,Ym),r=t[Ym];try{t[Ym]=void 0;var n=!0}catch{}var i=Kee.call(t);return n&&(e?t[Ym]=r:delete t[Ym]),i}m(YN,"getRawTag");var Yee=YN,Xee=Object.prototype,Qee=Xee.toString;function XN(t){return Qee.call(t)}m(XN,"objectToString");var ete=XN,tte="[object Null]",rte="[object Undefined]",iO=Jp?Jp.toStringTag:void 0;function QN(t){return t==null?t===void 0?rte:tte:iO&&iO in Object(t)?Yee(t):ete(t)}m(QN,"baseGetTag");var e4=QN;function t4(t){return t!=null&&typeof t=="object"}m(t4,"isObjectLike");var nte=t4,ite="[object Symbol]";function r4(t){return typeof t=="symbol"||nte(t)&&e4(t)==ite}m(r4,"isSymbol");var ZC=r4;function n4(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}m(n4,"arrayMap");var ote=n4,ste=Array.isArray,KC=ste,oO=Jp?Jp.prototype:void 0,sO=oO?oO.toString:void 0;function YC(t){if(typeof t=="string")return t;if(KC(t))return ote(t,YC)+"";if(ZC(t))return sO?sO.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}m(YC,"baseToString");var ate=YC;function i4(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}m(i4,"isObject2");var o4=i4,lte="[object AsyncFunction]",cte="[object Function]",ute="[object GeneratorFunction]",hte="[object Proxy]";function s4(t){if(!o4(t))return!1;var e=e4(t);return e==cte||e==ute||e==lte||e==hte}m(s4,"isFunction");var dte=s4,pte=WC["__core-js_shared__"],AE=pte,aO=function(){var t=/[^.]+$/.exec(AE&&AE.keys&&AE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function a4(t){return!!aO&&aO in t}m(a4,"isMasked");var fte=a4,mte=Function.prototype,gte=mte.toString;function l4(t){if(t!=null){try{return gte.call(t)}catch{}try{return t+""}catch{}}return""}m(l4,"toSource");var yte=l4,_te=/[\\^$.*+?()[\]{}|]/g,bte=/^\[object .+?Constructor\]$/,vte=Function.prototype,xte=Object.prototype,wte=vte.toString,Ete=xte.hasOwnProperty,Tte=RegExp("^"+wte.call(Ete).replace(_te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c4(t){if(!o4(t)||fte(t))return!1;var e=dte(t)?Tte:bte;return e.test(yte(t))}m(c4,"baseIsNative");var Ste=c4;function u4(t,e){return t?.[e]}m(u4,"getValue");var Cte=u4;function h4(t,e){var r=Cte(t,e);return Ste(r)?r:void 0}m(h4,"getNative");var d4=h4;function p4(t,e){return t===e||t!==t&&e!==e}m(p4,"eq");var Pte=p4,Ate=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rte=/^\w*$/;function f4(t,e){if(KC(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||ZC(t)?!0:Rte.test(t)||!Ate.test(t)||e!=null&&t in Object(e)}m(f4,"isKey");var Ite=f4,Mte=d4(Object,"create"),Jg=Mte;function m4(){this.__data__=Jg?Jg(null):{},this.size=0}m(m4,"hashClear");var Ote=m4;function g4(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}m(g4,"hashDelete");var kte=g4,Lte="__lodash_hash_undefined__",Dte=Object.prototype,Nte=Dte.hasOwnProperty;function y4(t){var e=this.__data__;if(Jg){var r=e[t];return r===Lte?void 0:r}return Nte.call(e,t)?e[t]:void 0}m(y4,"hashGet");var Fte=y4,zte=Object.prototype,jte=zte.hasOwnProperty;function _4(t){var e=this.__data__;return Jg?e[t]!==void 0:jte.call(e,t)}m(_4,"hashHas");var Bte=_4,qte="__lodash_hash_undefined__";function b4(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Jg&&e===void 0?qte:e,this}m(b4,"hashSet");var $te=b4;function Zh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}m(Zh,"Hash");Zh.prototype.clear=Ote;Zh.prototype.delete=kte;Zh.prototype.get=Fte;Zh.prototype.has=Bte;Zh.prototype.set=$te;var lO=Zh;function v4(){this.__data__=[],this.size=0}m(v4,"listCacheClear");var Vte=v4;function x4(t,e){for(var r=t.length;r--;)if(Pte(t[r][0],e))return r;return-1}m(x4,"assocIndexOf");var r1=x4,Ute=Array.prototype,Gte=Ute.splice;function w4(t){var e=this.__data__,r=r1(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Gte.call(e,r,1),--this.size,!0}m(w4,"listCacheDelete");var Hte=w4;function E4(t){var e=this.__data__,r=r1(e,t);return r<0?void 0:e[r][1]}m(E4,"listCacheGet");var Jte=E4;function T4(t){return r1(this.__data__,t)>-1}m(T4,"listCacheHas");var Wte=T4;function S4(t,e){var r=this.__data__,n=r1(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}m(S4,"listCacheSet");var Zte=S4;function Kh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}m(Kh,"ListCache");Kh.prototype.clear=Vte;Kh.prototype.delete=Hte;Kh.prototype.get=Jte;Kh.prototype.has=Wte;Kh.prototype.set=Zte;var Kte=Kh,Yte=d4(WC,"Map"),Xte=Yte;function C4(){this.size=0,this.__data__={hash:new lO,map:new(Xte||Kte),string:new lO}}m(C4,"mapCacheClear");var Qte=C4;function P4(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}m(P4,"isKeyable");var ere=P4;function A4(t,e){var r=t.__data__;return ere(e)?r[typeof e=="string"?"string":"hash"]:r.map}m(A4,"getMapData");var n1=A4;function R4(t){var e=n1(this,t).delete(t);return this.size-=e?1:0,e}m(R4,"mapCacheDelete");var tre=R4;function I4(t){return n1(this,t).get(t)}m(I4,"mapCacheGet");var rre=I4;function M4(t){return n1(this,t).has(t)}m(M4,"mapCacheHas");var nre=M4;function O4(t,e){var r=n1(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}m(O4,"mapCacheSet");var ire=O4;function Yh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}m(Yh,"MapCache");Yh.prototype.clear=Qte;Yh.prototype.delete=tre;Yh.prototype.get=rre;Yh.prototype.has=nre;Yh.prototype.set=ire;var k4=Yh,ore="Expected a function";function i1(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(ore);var r=m(function(){var n=arguments,i=e?e.apply(this,n):n[0],l=r.cache;if(l.has(i))return l.get(i);var c=t.apply(this,n);return r.cache=l.set(i,c)||l,c},"memoized");return r.cache=new(i1.Cache||k4),r}m(i1,"memoize");i1.Cache=k4;var sre=i1,are=500;function L4(t){var e=sre(t,function(n){return r.size===are&&r.clear(),n}),r=e.cache;return e}m(L4,"memoizeCapped");var lre=L4,cre=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ure=/\\(\\)?/g,hre=lre(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(cre,function(r,n,i,l){e.push(i?l.replace(ure,"$1"):n||r)}),e}),dre=hre;function D4(t){return t==null?"":ate(t)}m(D4,"toString");var pre=D4;function N4(t,e){return KC(t)?t:Ite(t,e)?[t]:dre(pre(t))}m(N4,"castPath");var fre=N4;function F4(t){if(typeof t=="string"||ZC(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}m(F4,"toKey");var mre=F4;function z4(t,e){e=fre(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[mre(e[r++])];return r&&r==n?t:void 0}m(z4,"baseGet");var gre=z4;function j4(t,e,r){var n=t==null?void 0:gre(t,e);return n===void 0?r:n}m(j4,"get");var yre=j4,XC=ZN,_re=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/,QC=m(t=>t.match(/^[\[\{\"\}].*[\]\}\"]$/),"isJSON");function eP(t){if(!XC(t))return t;let e=t,r=!1;return typeof Event<"u"&&t instanceof Event&&(e=jN(e),r=!0),e=Object.keys(e).reduce((n,i)=>{try{e[i]&&e[i].toJSON,n[i]=e[i]}catch{r=!0}return n},{}),r?e:t}m(eP,"convertUnconventionalData");var bre=m(function(e){let r,n,i,l;return m(function(s,p){try{if(s==="")return l=[],r=new Map([[p,"[]"]]),n=new Map,i=[],p;const g=n.get(this)||this;for(;i.length&&g!==i[0];)i.shift(),l.pop();if(typeof p=="boolean")return p;if(p===void 0)return e.allowUndefined?"_undefined_":void 0;if(p===null)return null;if(typeof p=="number")return p===Number.NEGATIVE_INFINITY?"_-Infinity_":p===Number.POSITIVE_INFINITY?"_Infinity_":Number.isNaN(p)?"_NaN_":p;if(typeof p=="bigint")return`_bigint_${p.toString()}`;if(typeof p=="string")return _re.test(p)?e.allowDate?`_date_${p}`:void 0:p;if((0,qee.default)(p))return e.allowRegExp?`_regexp_${p.flags}|${p.source}`:void 0;if((0,$ee.default)(p))return;if((0,Vee.default)(p)){if(!e.allowSymbol)return;const x=Symbol.keyFor(p);return x!==void 0?`_gsymbol_${x}`:`_symbol_${p.toString().slice(7,-1)}`}if(i.length>=e.maxDepth)return Array.isArray(p)?`[Array(${p.length})]`:"[Object]";if(p===this)return`_duplicate_${JSON.stringify(l)}`;if(p instanceof Error&&e.allowError)return{__isConvertedError__:!0,errorProperties:{...p.cause?{cause:p.cause}:{},...p,name:p.name,message:p.message,stack:p.stack,"_constructor-name_":p.constructor.name}};if(p?.constructor?.name&&p.constructor.name!=="Object"&&!Array.isArray(p)){const x=r.get(p);if(!x){const P={__isClassInstance__:!0,__className__:p.constructor.name,...Object.getOwnPropertyNames(p).reduce((A,M)=>{try{A[M]=p[M]}catch{}return A},{})};return l.push(s),i.unshift(P),r.set(p,JSON.stringify(l)),p!==P&&n.set(p,P),P}return`_duplicate_${x}`}const _=r.get(p);if(!_){const x=Array.isArray(p)?p:eP(p);return l.push(s),i.unshift(x),r.set(p,JSON.stringify(l)),p!==x&&n.set(p,x),x}return`_duplicate_${_}`}catch{return}},"replace")},"replacer2"),vre=m(function(e){const r=[];let n;return m(function(l,c){if(l===""&&(n=c,r.forEach(({target:s,container:p,replacement:g})=>{const _=QC(g)?JSON.parse(g):g.split(".");_.length===0?p[s]=n:p[s]=yre(n,_)})),l==="_constructor-name_")return c;if(XC(c)&&c.__isConvertedError__){const{message:s,...p}=c.errorProperties,g=new Error(s);return Object.assign(g,p),g}if(typeof c=="string"&&c.startsWith("_regexp_")&&e.allowRegExp){const[,s,p]=c.match(/_regexp_([^|]*)\|(.*)/)||[];return new RegExp(p,s)}return typeof c=="string"&&c.startsWith("_date_")&&e.allowDate?new Date(c.replace("_date_","")):typeof c=="string"&&c.startsWith("_duplicate_")?(r.push({target:l,container:this,replacement:c.replace(/^_duplicate_/,"")}),null):typeof c=="string"&&c.startsWith("_symbol_")&&e.allowSymbol?Symbol(c.replace("_symbol_","")):typeof c=="string"&&c.startsWith("_gsymbol_")&&e.allowSymbol?Symbol.for(c.replace("_gsymbol_","")):typeof c=="string"&&c==="_-Infinity_"?Number.NEGATIVE_INFINITY:typeof c=="string"&&c==="_Infinity_"?Number.POSITIVE_INFINITY:typeof c=="string"&&c==="_NaN_"?Number.NaN:typeof c=="string"&&c.startsWith("_bigint_")&&typeof BigInt=="function"?BigInt(c.replace("_bigint_","")):c},"revive")},"reviver2"),B4={maxDepth:10,space:void 0,allowRegExp:!0,allowDate:!0,allowError:!0,allowUndefined:!0,allowSymbol:!0},q4=m((t,e={})=>{const r={...B4,...e};return JSON.stringify(eP(t),bre(r),e.space)},"stringify"),xre=m(()=>{const t=new Map;return m(function e(r){XC(r)&&Object.entries(r).forEach(([n,i])=>{i==="_undefined_"?r[n]=void 0:t.get(i)||(t.set(i,!0),e(i))}),Array.isArray(r)&&r.forEach((n,i)=>{n==="_undefined_"?(t.set(n,!0),r[i]=void 0):t.get(n)||(t.set(n,!0),e(n))})},"mutateUndefined")},"mutator"),$4=m((t,e={})=>{const r={...B4,...e},n=JSON.parse(t,vre(r));return xre()(n),n},"parse"),wre="Invariant failed";function Oa(t,e){if(!t)throw new Error(wre)}m(Oa,"invariant");var Ere=m(t=>{const e=Array.from(document.querySelectorAll("iframe[data-is-storybook]")),[r,...n]=e.filter(l=>{try{return l.contentWindow?.location.origin===t.source.location.origin&&l.contentWindow?.location.pathname===t.source.location.pathname}catch{}try{return l.contentWindow===t.source}catch{}const c=l.getAttribute("src");let s;try{if(!c)return!1;({origin:s}=new URL(c,document.location.toString()))}catch{return!1}return s===t.origin}),i=r?.getAttribute("src");if(i&&n.length===0){const{protocol:l,host:c,pathname:s}=new URL(i,document.location.toString());return`${l}//${c}${s}`}return n.length>0&&Bn.error("found multiple candidates for event source"),null},"getEventSourceUrl"),{document:RE,location:IE}=$t,cO="storybook-channel",Tre={maxDepth:25},V4=class{constructor(e){if(this.config=e,this.connected=!1,this.buffer=[],typeof $t?.addEventListener=="function"&&$t.addEventListener("message",this.handleEvent.bind(this),!1),e.page!=="manager"&&e.page!=="preview")throw new Error(`postmsg-channel: "config.page" cannot be "${e.page}"`)}setHandler(e){this.handler=(...r)=>{e.apply(this,r),!this.connected&&this.getLocalFrame().length&&(this.flush(),this.connected=!0)}}send(e,r){const{target:n,allowRegExp:i,allowSymbol:l,allowDate:c,allowError:s,allowUndefined:p,maxDepth:g,space:_}=r||{},x=Object.fromEntries(Object.entries({allowRegExp:i,allowSymbol:l,allowDate:c,allowError:s,allowUndefined:p,maxDepth:g,space:_}).filter(([z,j])=>typeof j<"u")),P={...Tre,...$t.CHANNEL_OPTIONS||{},...x},A=this.getFrames(n),M=new URLSearchParams(IE?.search||""),F=q4({key:cO,event:e,refId:M.get("refId")},P);return A.length?(this.buffer.length&&this.flush(),A.forEach(z=>{try{z.postMessage(F,"*")}catch{Bn.error("sending over postmessage fail")}}),Promise.resolve(null)):new Promise((z,j)=>{this.buffer.push({event:e,resolve:z,reject:j})})}flush(){const{buffer:e}=this;this.buffer=[],e.forEach(r=>{this.send(r.event).then(r.resolve).catch(r.reject)})}getFrames(e){if(this.config.page==="manager"){const n=Array.from(RE.querySelectorAll("iframe[data-is-storybook][data-is-loaded]")).flatMap(i=>{try{return i.contentWindow&&i.dataset.isStorybook!==void 0&&i.id===e?[i.contentWindow]:[]}catch{return[]}});return n?.length?n:this.getCurrentFrames()}return $t&&$t.parent&&$t.parent!==$t.self?[$t.parent]:[]}getCurrentFrames(){return this.config.page==="manager"?Array.from(RE.querySelectorAll('[data-is-storybook="true"]')).flatMap(r=>r.contentWindow?[r.contentWindow]:[]):$t&&$t.parent?[$t.parent]:[]}getLocalFrame(){return this.config.page==="manager"?Array.from(RE.querySelectorAll("#storybook-preview-iframe")).flatMap(r=>r.contentWindow?[r.contentWindow]:[]):$t&&$t.parent?[$t.parent]:[]}handleEvent(e){try{const{data:r}=e,{key:n,event:i,refId:l}=typeof r=="string"&&QC(r)?$4(r,$t.CHANNEL_OPTIONS||{}):r;if(n===cO){const c=this.config.page==="manager"?'<span style="color: #37D5D3; background: black"> manager </span>':'<span style="color: #1EA7FD; background: black"> preview </span>',s=Object.values(LC).includes(i.type)?`<span style="color: #FF4785">${i.type}</span>`:`<span style="color: #FFAE00">${i.type}</span>`;if(l&&(i.refId=l),i.source=this.config.page==="preview"?e.origin:Ere(e),!i.source){hs.error(`${c} received ${s} but was unable to determine the source of the event`);return}const p=`${c} received ${s} (${r.length})`;hs.debug(IE.origin!==i.source?p:`${p} <span style="color: gray">(on ${IE.origin} from ${i.source})</span>`,...i.args),Oa(this.handler,"ChannelHandler should be set"),this.handler(i)}}catch(r){Bn.error(r)}}};m(V4,"PostMessageTransport");var U4=V4,{WebSocket:Sre}=$t,G4=15e3,H4=5e3,J4=class{constructor({url:e,onError:r,page:n}){this.buffer=[],this.isReady=!1,this.isClosed=!1,this.pingTimeout=0,this.socket=new Sre(e),this.socket.onopen=()=>{this.isReady=!0,this.heartbeat(),this.flush()},this.socket.onmessage=({data:i})=>{const l=typeof i=="string"&&QC(i)?$4(i):i;Oa(this.handler),this.handler(l),l.type==="ping"&&(this.heartbeat(),this.send({type:"pong"}))},this.socket.onerror=i=>{r&&r(i)},this.socket.onclose=i=>{Oa(this.handler),this.handler({type:hN,args:[{reason:i.reason,code:i.code}],from:n||"preview"}),this.isClosed=!0,clearTimeout(this.pingTimeout)}}heartbeat(){clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{this.socket.close(3008,"timeout")},G4+H4)}setHandler(e){this.handler=e}send(e){this.isClosed||(this.isReady?this.sendNow(e):this.sendLater(e))}sendLater(e){this.buffer.push(e)}sendNow(e){const r=q4(e,{maxDepth:15,...$t.CHANNEL_OPTIONS});this.socket.send(r)}flush(){const{buffer:e}=this;this.buffer=[],e.forEach(r=>this.send(r))}};m(J4,"WebsocketTransport");var W4=J4,{CONFIG_TYPE:Cre}=$t,Pre=e1;function Z4({page:t,extraTransports:e=[]}){const r=[new U4({page:t}),...e];if(Cre==="DEVELOPMENT"){const i=window.location.protocol==="http:"?"ws":"wss",{hostname:l,port:c}=window.location,s=`${i}://${l}:${c}/storybook-server-channel`;r.push(new W4({url:s,onError:m(()=>{},"onError"),page:t}))}const n=new e1({transports:r});return PE.__prepare(n,t==="manager"?PE.Environment.MANAGER:PE.Environment.PREVIEW),n}m(Z4,"createBrowserChannel");var K4={};Do(K4,{CalledExtractOnStoreError:()=>oF,CalledPreviewMethodBeforeInitializationError:()=>ts,Category:()=>Q4,ElementA11yParameterError:()=>kre,EmptyIndexError:()=>fF,ImplicitActionsDuringRendering:()=>nF,MdxFileWithNoCsfReferencesError:()=>dF,MissingRenderToCanvasError:()=>aF,MissingStoryAfterHmrError:()=>tF,MissingStoryFromCsfFileError:()=>_F,MountMustBeDestructuredError:()=>tP,NextJsSharpError:()=>Rre,NextjsRouterMocksNotAvailable:()=>Ire,NoRenderFunctionError:()=>EF,NoStoryMatchError:()=>gF,NoStoryMountedError:()=>SF,StatusTypeIdMismatchError:()=>Are,StoryIndexFetchError:()=>uF,StoryStoreAccessedBeforeInitializationError:()=>vF,UnknownArgTypesError:()=>Mre,UnsupportedViewportDimensionError:()=>Ore});function KT({code:t,category:e}){const r=String(t).padStart(4,"0");return`SB_${e}_${r}`}m(KT,"parseErrorCode");function YT(t){if(/^(?!.*storybook\.js\.org)|[?&]ref=error\b/.test(t))return t;try{const e=new URL(t);return e.searchParams.set("ref","error"),e.toString()}catch{return t}}m(YT,"appendErrorRef");var Y4=class X4 extends Error{constructor(e){super(X4.getFullMessage(e)),this.data={},this.fromStorybook=!0,this.category=e.category,this.documentation=e.documentation??!1,this.code=e.code}get fullErrorCode(){return KT({code:this.code,category:this.category})}get name(){const e=this.constructor.name;return`${this.fullErrorCode} (${e})`}static getFullMessage({documentation:e,code:r,category:n,message:i}){let l;return e===!0?l=`https://storybook.js.org/error/${KT({code:r,category:n})}?ref=error`:typeof e=="string"?l=YT(e):Array.isArray(e)&&(l=`
${e.map(c=>`	- ${YT(c)}`).join(`
`)}`),`${i}${l!=null?`

More info: ${l}
`:""}`}};m(Y4,"StorybookError");var Si=Y4,Q4=(t=>(t.BLOCKS="BLOCKS",t.DOCS_TOOLS="DOCS-TOOLS",t.PREVIEW_CLIENT_LOGGER="PREVIEW_CLIENT-LOGGER",t.PREVIEW_CHANNELS="PREVIEW_CHANNELS",t.PREVIEW_CORE_EVENTS="PREVIEW_CORE-EVENTS",t.PREVIEW_INSTRUMENTER="PREVIEW_INSTRUMENTER",t.PREVIEW_API="PREVIEW_API",t.PREVIEW_REACT_DOM_SHIM="PREVIEW_REACT-DOM-SHIM",t.PREVIEW_ROUTER="PREVIEW_ROUTER",t.PREVIEW_THEMING="PREVIEW_THEMING",t.RENDERER_HTML="RENDERER_HTML",t.RENDERER_PREACT="RENDERER_PREACT",t.RENDERER_REACT="RENDERER_REACT",t.RENDERER_SERVER="RENDERER_SERVER",t.RENDERER_SVELTE="RENDERER_SVELTE",t.RENDERER_VUE="RENDERER_VUE",t.RENDERER_VUE3="RENDERER_VUE3",t.RENDERER_WEB_COMPONENTS="RENDERER_WEB-COMPONENTS",t.FRAMEWORK_NEXTJS="FRAMEWORK_NEXTJS",t.ADDON_VITEST="ADDON_VITEST",t.ADDON_A11Y="ADDON_A11Y",t))(Q4||{}),eF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:1,message:Kr`
        Couldn't find story matching id '${e.storyId}' after HMR.
        - Did you just rename a story?
        - Did you remove it from your CSF file?
        - Are you sure a story with the id '${e.storyId}' exists?
        - Please check the values in the stories field of your main.js config and see if they would match your CSF File.
        - Also check the browser console and terminal for potential error messages.`}),this.data=e}};m(eF,"MissingStoryAfterHmrError");var tF=eF,rF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:2,documentation:"https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#using-implicit-actions-during-rendering-is-deprecated-for-example-in-the-play-function",message:Kr`
        We detected that you use an implicit action arg while ${e.phase} of your story.  
        ${e.deprecated?`
This is deprecated and won't work in Storybook 8 anymore.
`:""}
        Please provide an explicit spy to your args like this:
          import { fn } from 'storybook/test';
          ... 
          args: {
           ${e.name}: fn()
          }`}),this.data=e}};m(rF,"ImplicitActionsDuringRendering");var nF=rF,iF=class extends Si{constructor(){super({category:"PREVIEW_API",code:3,message:Kr`
        Cannot call \`storyStore.extract()\` without calling \`storyStore.cacheAllCsfFiles()\` first.

        You probably meant to call \`await preview.extract()\` which does the above for you.`})}};m(iF,"CalledExtractOnStoreError");var oF=iF,sF=class extends Si{constructor(){super({category:"PREVIEW_API",code:4,message:Kr`
        Expected your framework's preset to export a \`renderToCanvas\` field.

        Perhaps it needs to be upgraded for Storybook 7.0?`,documentation:"https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#mainjs-framework-field"})}};m(sF,"MissingRenderToCanvasError");var aF=sF,lF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:5,message:Kr`
        Called \`Preview.${e.methodName}()\` before initialization.
        
        The preview needs to load the story index before most methods can be called. If you want
        to call \`${e.methodName}\`, try \`await preview.initializationPromise;\` first.
        
        If you didn't call the above code, then likely it was called by an addon that needs to
        do the above.`}),this.data=e}};m(lF,"CalledPreviewMethodBeforeInitializationError");var ts=lF,cF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:6,message:Kr`
        Error fetching \`/index.json\`:
        
        ${e.text}

        If you are in development, this likely indicates a problem with your Storybook process,
        check the terminal for errors.

        If you are in a deployed Storybook, there may have been an issue deploying the full Storybook
        build.`}),this.data=e}};m(cF,"StoryIndexFetchError");var uF=cF,hF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:7,message:Kr`
        Tried to render docs entry ${e.storyId} but it is a MDX file that has no CSF
        references, or autodocs for a CSF file that some doesn't refer to itself.
        
        This likely is an internal error in Storybook's indexing, or you've attached the
        \`attached-mdx\` tag to an MDX file that is not attached.`}),this.data=e}};m(hF,"MdxFileWithNoCsfReferencesError");var dF=hF,pF=class extends Si{constructor(){super({category:"PREVIEW_API",code:8,message:Kr`
        Couldn't find any stories in your Storybook.

        - Please check your stories field of your main.js config: does it match correctly?
        - Also check the browser console and terminal for error messages.`})}};m(pF,"EmptyIndexError");var fF=pF,mF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:9,message:Kr`
        Couldn't find story matching '${e.storySpecifier}'.

        - Are you sure a story with that id exists?
        - Please check your stories field of your main.js config.
        - Also check the browser console and terminal for error messages.`}),this.data=e}};m(mF,"NoStoryMatchError");var gF=mF,yF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:10,message:Kr`
        Couldn't find story matching id '${e.storyId}' after importing a CSF file.

        The file was indexed as if the story was there, but then after importing the file in the browser
        we didn't find the story. Possible reasons:
        - You are using a custom story indexer that is misbehaving.
        - You have a custom file loader that is removing or renaming exports.

        Please check your browser console and terminal for errors that may explain the issue.`}),this.data=e}};m(yF,"MissingStoryFromCsfFileError");var _F=yF,bF=class extends Si{constructor(){super({category:"PREVIEW_API",code:11,message:Kr`
        Cannot access the Story Store until the index is ready.

        It is not recommended to use methods directly on the Story Store anyway, in Storybook 9 we will
        remove access to the store entirely`})}};m(bF,"StoryStoreAccessedBeforeInitializationError");var vF=bF,xF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:12,message:Kr`
      Incorrect use of mount in the play function.
      
      To use mount in the play function, you must satisfy the following two requirements: 
      
      1. You *must* destructure the mount property from the \`context\` (the argument passed to your play function). 
         This makes sure that Storybook does not start rendering the story before the play function begins.
      
      2. Your Storybook framework or builder must be configured to transpile to ES2017 or newer. 
         This is because destructuring statements and async/await usages are otherwise transpiled away, 
         which prevents Storybook from recognizing your usage of \`mount\`.
      
      Note that Angular is not supported. As async/await is transpiled to support the zone.js polyfill. 
      
      More info: https://storybook.js.org/docs/writing-tests/interaction-testing?ref=error#run-code-before-the-component-gets-rendered
      
      Received the following play function:
      ${e.playFunction}`}),this.data=e}};m(xF,"MountMustBeDestructuredError");var tP=xF,wF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:14,message:Kr`
        No render function available for storyId '${e.id}'
      `}),this.data=e}};m(wF,"NoRenderFunctionError");var EF=wF,TF=class extends Si{constructor(){super({category:"PREVIEW_API",code:15,message:Kr`
        No component is mounted in your story.
        
        This usually occurs when you destructure mount in the play function, but forget to call it.
        
        For example:

        async play({ mount, canvasElement }) {
          //  mount should be called: await mount(); 
          const canvas = within(canvasElement);
          const button = await canvas.findByRole('button');
          await userEvent.click(button);
        };

        Make sure to either remove it or call mount in your play function.
      `})}};m(TF,"NoStoryMountedError");var SF=TF,CF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:16,message:`Status has typeId "${e.status.typeId}" but was added to store with typeId "${e.typeId}". Full status: ${JSON.stringify(e.status,null,2)}`}),this.data=e}};m(CF,"StatusTypeIdMismatchError");var Are=CF,PF=class extends Si{constructor(){super({category:"FRAMEWORK_NEXTJS",code:1,documentation:"https://storybook.js.org/docs/get-started/nextjs#faq",message:Kr`
      You are importing avif images, but you don't have sharp installed.

      You have to install sharp in order to use image optimization features in Next.js.
      `})}};m(PF,"NextJsSharpError");var Rre=PF,AF=class extends Si{constructor(e){super({category:"FRAMEWORK_NEXTJS",code:2,message:Kr`
        Tried to access router mocks from "${e.importType}" but they were not created yet. You might be running code in an unsupported environment.
      `}),this.data=e}};m(AF,"NextjsRouterMocksNotAvailable");var Ire=AF,RF=class extends Si{constructor(e){super({category:"DOCS-TOOLS",code:1,documentation:"https://github.com/storybookjs/storybook/issues/26606",message:Kr`
        There was a failure when generating detailed ArgTypes in ${e.language} for:
        ${JSON.stringify(e.type,null,2)} 
        
        Storybook will fall back to use a generic type description instead.

        This type is either not supported or it is a bug in the docgen generation in Storybook.
        If you think this is a bug, please detail it as much as possible in the Github issue.
      `}),this.data=e}};m(RF,"UnknownArgTypesError");var Mre=RF,IF=class extends Si{constructor(e){super({category:"ADDON_VITEST",code:1,message:Kr`
        Encountered an unsupported value "${e.value}" when setting the viewport ${e.dimension} dimension.
        
        The Storybook plugin only supports values in the following units:
        - px, vh, vw, em, rem and %.
        
        You can either change the viewport for this story to use one of the supported units or skip the test by adding '!test' to the story's tags per https://storybook.js.org/docs/writing-stories/tags
      `}),this.data=e}};m(IF,"UnsupportedViewportDimensionError");var Ore=IF,MF=class extends Si{constructor(){super({category:"ADDON_A11Y",code:1,documentation:"https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#a11y-addon-replace-element-parameter-with-context-parameter",message:'The "element" parameter in parameters.a11y has been removed. Use "context" instead.'})}};m(MF,"ElementA11yParameterError");var kre=MF,OF={};Do(OF,{Addon_TypesEnum:()=>kF});var kF=(t=>(t.TAB="tab",t.PANEL="panel",t.TOOL="tool",t.TOOLEXTRA="toolextra",t.PREVIEW="preview",t.experimental_PAGE="page",t.experimental_TEST_PROVIDER="test-provider",t))(kF||{}),LF={};Do(LF,{ADDON_ID:()=>o1,CLEAR_ID:()=>Nre,CYCLIC_KEY:()=>Fre,EVENT_ID:()=>DF,PANEL_ID:()=>Dre,PARAM_KEY:()=>Lre,action:()=>Ff,actions:()=>gue,config:()=>py,configureActions:()=>pue});var Lre="actions",o1="storybook/actions",Dre=`${o1}/panel`,DF=`${o1}/action-event`,Nre=`${o1}/action-clear`,Fre="$___storybook.isCyclic",XT={};Do(XT,{DocsContext:()=>BI,HooksContext:()=>nP,Preview:()=>gU,PreviewWeb:()=>oue,PreviewWithSelection:()=>CU,ReporterAPI:()=>FI,StoryStore:()=>hU,UrlStore:()=>kU,WebView:()=>NU,addons:()=>ks,applyHooks:()=>jF,combineArgs:()=>fv,combineParameters:()=>jh,composeConfigs:()=>Bh,composeStepRunners:()=>LI,composeStories:()=>aU,composeStory:()=>jI,createPlaywrightTest:()=>lU,decorateStory:()=>PI,defaultDecorateStory:()=>RI,emitTransformCode:()=>qU,filterArgTypes:()=>tU,getCsfFactoryAnnotations:()=>zI,inferControls:()=>kI,makeDecorator:()=>qre,mockChannel:()=>rP,normalizeArrays:()=>kn,normalizeProjectAnnotations:()=>dy,normalizeStory:()=>qp,pauseAnimations:()=>vx,prepareMeta:()=>II,prepareStory:()=>bx,sanitizeStoryContextUpdate:()=>AI,setDefaultProjectAnnotations:()=>iU,setProjectAnnotations:()=>sU,simulateDOMContentLoaded:()=>_v,simulatePageLoad:()=>jU,sortStoriesV7:()=>Hce,useArgs:()=>JF,useCallback:()=>Wp,useChannel:()=>GF,useEffect:()=>eu,useGlobals:()=>WF,useMemo:()=>sP,useParameter:()=>HF,useReducer:()=>UF,useRef:()=>qF,useState:()=>VF,useStoryContext:()=>By,userOrAutoTitle:()=>Vce,userOrAutoTitleFromSpecifier:()=>pU,waitForAnimations:()=>xx});function rP(){const t={setHandler:m(()=>{},"setHandler"),send:m(()=>{},"send")};return new e1({transport:t})}m(rP,"mockChannel");var NF=class{constructor(){this.getChannel=m(()=>{if(!this.channel){const e=rP();return this.setChannel(e),e}return this.channel},"getChannel"),this.ready=m(()=>this.promise,"ready"),this.hasChannel=m(()=>!!this.channel,"hasChannel"),this.setChannel=m(e=>{this.channel=e,this.resolve()},"setChannel"),this.promise=new Promise(e=>{this.resolve=()=>e(this.getChannel())})}};m(NF,"AddonStore");var zre=NF,ME="__STORYBOOK_ADDONS_PREVIEW";function FF(){return $t[ME]||($t[ME]=new zre),$t[ME]}m(FF,"getAddonsStore");var ks=FF(),zF=class{constructor(){this.hookListsMap=void 0,this.mountedDecorators=void 0,this.prevMountedDecorators=void 0,this.currentHooks=void 0,this.nextHookIndex=void 0,this.currentPhase=void 0,this.currentEffects=void 0,this.prevEffects=void 0,this.currentDecoratorName=void 0,this.hasUpdates=void 0,this.currentContext=void 0,this.renderListener=m(e=>{e===this.currentContext?.id&&(this.triggerEffects(),this.currentContext=null,this.removeRenderListeners())},"renderListener"),this.init()}init(){this.hookListsMap=new WeakMap,this.mountedDecorators=new Set,this.prevMountedDecorators=new Set,this.currentHooks=[],this.nextHookIndex=0,this.currentPhase="NONE",this.currentEffects=[],this.prevEffects=[],this.currentDecoratorName=null,this.hasUpdates=!1,this.currentContext=null}clean(){this.prevEffects.forEach(e=>{e.destroy&&e.destroy()}),this.init(),this.removeRenderListeners()}getNextHook(){const e=this.currentHooks[this.nextHookIndex];return this.nextHookIndex+=1,e}triggerEffects(){this.prevEffects.forEach(e=>{!this.currentEffects.includes(e)&&e.destroy&&e.destroy()}),this.currentEffects.forEach(e=>{this.prevEffects.includes(e)||(e.destroy=e.create())}),this.prevEffects=this.currentEffects,this.currentEffects=[]}addRenderListeners(){this.removeRenderListeners(),ks.getChannel().on(Cb,this.renderListener)}removeRenderListeners(){ks.getChannel().removeListener(Cb,this.renderListener)}};m(zF,"HooksContext");var nP=zF;function QT(t){const e=m((...r)=>{const{hooks:n}=typeof r[0]=="function"?r[1]:r[0],i=n.currentPhase,l=n.currentHooks,c=n.nextHookIndex,s=n.currentDecoratorName;n.currentDecoratorName=t.name,n.prevMountedDecorators.has(t)?(n.currentPhase="UPDATE",n.currentHooks=n.hookListsMap.get(t)||[]):(n.currentPhase="MOUNT",n.currentHooks=[],n.hookListsMap.set(t,n.currentHooks),n.prevMountedDecorators.add(t)),n.nextHookIndex=0;const p=$t.STORYBOOK_HOOKS_CONTEXT;$t.STORYBOOK_HOOKS_CONTEXT=n;const g=t(...r);if($t.STORYBOOK_HOOKS_CONTEXT=p,n.currentPhase==="UPDATE"&&n.getNextHook()!=null)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return n.currentPhase=i,n.currentHooks=l,n.nextHookIndex=c,n.currentDecoratorName=s,g},"hookified");return e.originalFn=t,e}m(QT,"hookify");var OE=0,jre=25,jF=m(t=>(e,r)=>{const n=t(QT(e),r.map(i=>QT(i)));return i=>{const{hooks:l}=i;l.prevMountedDecorators??(l.prevMountedDecorators=new Set),l.mountedDecorators=new Set([e,...r]),l.currentContext=i,l.hasUpdates=!1;let c=n(i);for(OE=1;l.hasUpdates;)if(l.hasUpdates=!1,l.currentEffects=[],c=n(i),OE+=1,OE>jre)throw new Error("Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.");return l.addRenderListeners(),c}},"applyHooks"),Bre=m((t,e)=>t.length===e.length&&t.every((r,n)=>r===e[n]),"areDepsEqual"),iP=m(()=>new Error("Storybook preview hooks can only be called inside decorators and story functions."),"invalidHooksError");function oP(){return $t.STORYBOOK_HOOKS_CONTEXT||null}m(oP,"getHooksContextOrNull");function s1(){const t=oP();if(t==null)throw iP();return t}m(s1,"getHooksContextOrThrow");function BF(t,e,r){const n=s1();if(n.currentPhase==="MOUNT"){r!=null&&!Array.isArray(r)&&Bn.warn(`${t} received a final argument that is not an array (instead, received ${r}). When specified, the final argument must be an array.`);const i={name:t,deps:r};return n.currentHooks.push(i),e(i),i}if(n.currentPhase==="UPDATE"){const i=n.getNextHook();if(i==null)throw new Error("Rendered more hooks than during the previous render.");return i.name!==t&&Bn.warn(`Storybook has detected a change in the order of Hooks${n.currentDecoratorName?` called by ${n.currentDecoratorName}`:""}. This will lead to bugs and errors if not fixed.`),r!=null&&i.deps==null&&Bn.warn(`${t} received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.`),r!=null&&i.deps!=null&&r.length!==i.deps.length&&Bn.warn(`The final argument passed to ${t} changed size between renders. The order and size of this array must remain constant.
Previous: ${i.deps}
Incoming: ${r}`),(r==null||i.deps==null||!Bre(r,i.deps))&&(e(i),i.deps=r),i}throw iP()}m(BF,"useHook");function jy(t,e,r){const{memoizedState:n}=BF(t,i=>{i.memoizedState=e()},r);return n}m(jy,"useMemoLike");function sP(t,e){return jy("useMemo",t,e)}m(sP,"useMemo");function Wp(t,e){return jy("useCallback",()=>t,e)}m(Wp,"useCallback");function aP(t,e){return jy(t,()=>({current:e}),[])}m(aP,"useRefLike");function qF(t){return aP("useRef",t)}m(qF,"useRef");function $F(){const t=oP();if(t!=null&&t.currentPhase!=="NONE")t.hasUpdates=!0;else try{ks.getChannel().emit(FC)}catch{Bn.warn("State updates of Storybook preview hooks work only in browser")}}m($F,"triggerUpdate");function lP(t,e){const r=aP(t,typeof e=="function"?e():e),n=m(i=>{r.current=typeof i=="function"?i(r.current):i,$F()},"setState");return[r.current,n]}m(lP,"useStateLike");function VF(t){return lP("useState",t)}m(VF,"useState");function UF(t,e,r){const n=r!=null?()=>r(e):e,[i,l]=lP("useReducer",n);return[i,m(s=>l(p=>t(p,s)),"dispatch")]}m(UF,"useReducer");function eu(t,e){const r=s1(),n=jy("useEffect",()=>({create:t}),e);r.currentEffects.includes(n)||r.currentEffects.push(n)}m(eu,"useEffect");function GF(t,e=[]){const r=ks.getChannel();return eu(()=>(Object.entries(t).forEach(([n,i])=>r.on(n,i)),()=>{Object.entries(t).forEach(([n,i])=>r.removeListener(n,i))}),[...Object.keys(t),...e]),Wp(r.emit.bind(r),[r])}m(GF,"useChannel");function By(){const{currentContext:t}=s1();if(t==null)throw iP();return t}m(By,"useStoryContext");function HF(t,e){const{parameters:r}=By();if(t)return r[t]??e}m(HF,"useParameter");function JF(){const t=ks.getChannel(),{id:e,args:r}=By(),n=Wp(l=>t.emit(qC,{storyId:e,updatedArgs:l}),[t,e]),i=Wp(l=>t.emit(zC,{storyId:e,argNames:l}),[t,e]);return[r,n,i]}m(JF,"useArgs");function WF(){const t=ks.getChannel(),{globals:e}=By(),r=Wp(n=>t.emit(BC,{globals:n}),[t]);return[e,r]}m(WF,"useGlobals");var qre=m(({name:t,parameterName:e,wrapper:r,skipIfNoParametersOrOptions:n=!1})=>{const i=m(l=>(c,s)=>{const p=s.parameters&&s.parameters[e];return p&&p.disable||n&&!l&&!p?c(s):r(c,s,{options:l,parameters:p})},"decorator");return(...l)=>typeof l[0]=="function"?i()(...l):(...c)=>{if(c.length>1)return l.length>1?i(l)(...c):i(...l)(...c);throw new Error(`Passing stories directly into ${t}() is not allowed,
        instead use addDecorator(${t}) and pass options with the '${e}' parameter`)}},"makeDecorator");function ZF(t){return t.replace(/_/g," ").replace(/-/g," ").replace(/\./g," ").replace(/([^\n])([A-Z])([a-z])/g,(e,r,n,i)=>`${r} ${n}${i}`).replace(/([a-z])([A-Z])/g,(e,r,n)=>`${r} ${n}`).replace(/([a-z])([0-9])/gi,(e,r,n)=>`${r} ${n}`).replace(/([0-9])([a-z])/gi,(e,r,n)=>`${r} ${n}`).replace(/(\s|^)(\w)/g,(e,r,n)=>`${r}${n.toUpperCase()}`).replace(/ +/g," ").trim()}m(ZF,"toStartCaseStr");var uO=Ti(yK(),1),KF=m(t=>t.map(e=>typeof e<"u").filter(Boolean).length,"count"),$re=m((t,e)=>{const{exists:r,eq:n,neq:i,truthy:l}=t;if(KF([r,n,i,l])>1)throw new Error(`Invalid conditional test ${JSON.stringify({exists:r,eq:n,neq:i})}`);if(typeof n<"u")return(0,uO.isEqual)(e,n);if(typeof i<"u")return!(0,uO.isEqual)(e,i);if(typeof r<"u"){const s=typeof e<"u";return r?s:!s}return(typeof l>"u"?!0:l)?!!e:!e},"testValue"),Vre=m((t,e,r)=>{if(!t.if)return!0;const{arg:n,global:i}=t.if;if(KF([n,i])!==1)throw new Error(`Invalid conditional value ${JSON.stringify({arg:n,global:i})}`);const l=n?e[n]:r[i];return $re(t.if,l)},"includeConditionalArg");function YF(t){return t!=null&&XF(t).includes("mount")}m(YF,"mountDestructured");function XF(t){const e=t.toString().match(/[^(]*\(([^)]*)/);if(!e)return[];const r=eS(e[1]);if(!r.length)return[];const n=r[0];return n.startsWith("{")&&n.endsWith("}")?eS(n.slice(1,-1).replace(/\s/g,"")).map(l=>l.replace(/:.*|=.*/g,"")):[]}m(XF,"getUsedProps");function eS(t){const e=[],r=[];let n=0;for(let l=0;l<t.length;l++)if(t[l]==="{"||t[l]==="[")r.push(t[l]==="{"?"}":"]");else if(t[l]===r[r.length-1])r.pop();else if(!r.length&&t[l]===","){const c=t.substring(n,l).trim();c&&e.push(c),n=l+1}const i=t.substring(n).trim();return i&&e.push(i),e}m(eS,"splitByComma");var QF={};Do(QF,{argsEnhancers:()=>Hre});var e6=m((t,e)=>typeof e[t]>"u"&&!(t in e),"isInInitialArgs"),Ure=m(t=>{const{initialArgs:e,argTypes:r,id:n,parameters:{actions:i}}=t;if(!i||i.disable||!i.argTypesRegex||!r)return{};const l=new RegExp(i.argTypesRegex);return Object.entries(r).filter(([s])=>!!l.test(s)).reduce((s,[p,g])=>(e6(p,e)&&(s[p]=Ff(p,{implicit:!0,id:n})),s),{})},"inferActionsFromArgTypesRegex"),Gre=m(t=>{const{initialArgs:e,argTypes:r,parameters:{actions:n}}=t;return n?.disable||!r?{}:Object.entries(r).filter(([l,c])=>!!c.action).reduce((l,[c,s])=>(e6(c,e)&&(l[c]=Ff(typeof s.action=="string"?s.action:c)),l),{})},"addActionsFromArgTypes"),Hre=[Gre,Ure],t6={};Do(t6,{loaders:()=>sle});var r6={};Do(r6,{buildQueries:()=>jse,clearAllMocks:()=>xR,configure:()=>Bse,createEvent:()=>qse,expect:()=>nle,findAllByAltText:()=>Vse,findAllByDisplayValue:()=>Use,findAllByLabelText:()=>Gse,findAllByPlaceholderText:()=>Hse,findAllByRole:()=>Jse,findAllByTestId:()=>Wse,findAllByText:()=>Zse,findAllByTitle:()=>Kse,findByAltText:()=>Yse,findByDisplayValue:()=>Xse,findByLabelText:()=>Qse,findByPlaceholderText:()=>eae,findByRole:()=>tae,findByTestId:()=>rae,findByText:()=>nae,findByTitle:()=>iae,fireEvent:()=>$se,fn:()=>bR,getAllByAltText:()=>oae,getAllByDisplayValue:()=>sae,getAllByLabelText:()=>aae,getAllByPlaceholderText:()=>lae,getAllByRole:()=>cae,getAllByTestId:()=>uae,getAllByText:()=>hae,getAllByTitle:()=>dae,getByAltText:()=>pae,getByDisplayValue:()=>fae,getByLabelText:()=>mae,getByPlaceholderText:()=>gae,getByRole:()=>yae,getByTestId:()=>_ae,getByText:()=>bae,getByTitle:()=>vae,getConfig:()=>xae,getDefaultNormalizer:()=>wae,getElementError:()=>Eae,getNodeText:()=>Tae,getQueriesForElement:()=>Sae,getRoles:()=>Cae,getSuggestedQuery:()=>Pae,isInaccessible:()=>Aae,isMockFunction:()=>_h,logDOM:()=>Rae,logRoles:()=>Iae,mocked:()=>wq,mocks:()=>t_,onMockCall:()=>_R,prettyDOM:()=>Mae,prettyFormat:()=>tle,queries:()=>Oae,queryAllByAltText:()=>kae,queryAllByAttribute:()=>Lae,queryAllByDisplayValue:()=>Dae,queryAllByLabelText:()=>Nae,queryAllByPlaceholderText:()=>Fae,queryAllByRole:()=>zae,queryAllByTestId:()=>jae,queryAllByText:()=>Bae,queryAllByTitle:()=>qae,queryByAltText:()=>$ae,queryByAttribute:()=>Vae,queryByDisplayValue:()=>Uae,queryByLabelText:()=>Gae,queryByPlaceholderText:()=>Hae,queryByRole:()=>Jae,queryByTestId:()=>Wae,queryByText:()=>Zae,queryByTitle:()=>Kae,queryHelpers:()=>Yae,resetAllMocks:()=>wR,restoreAllMocks:()=>ER,sb:()=>ile,screen:()=>Xae,spyOn:()=>Ooe,uninstrumentedUserEvent:()=>fV,userEvent:()=>rle,waitFor:()=>Qae,waitForElementToBeRemoved:()=>ele,within:()=>pV});var Jre={reset:[0,0],bold:[1,22,"\x1B[22m\x1B[1m"],dim:[2,22,"\x1B[22m\x1B[2m"],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},n6=Object.entries(Jre);function qy(t){return String(t)}m(qy,"a");qy.open="";qy.close="";n6.reduce((t,[e])=>(t[e]=qy,t),{isColorSupported:!1});function i6(t=!1){let e=typeof process<"u"?process:void 0,r=e?.env||{},n=e?.argv||[];return!("NO_COLOR"in r||n.includes("--no-color"))&&("FORCE_COLOR"in r||n.includes("--color")||e?.platform==="win32"||t&&r.TERM!=="dumb"||"CI"in r)||typeof window<"u"&&!!window.chrome}m(i6,"C");function o6(t=!1){let e=i6(t),r=m((c,s,p,g)=>{let _="",x=0;do _+=c.substring(x,g)+p,x=g+s.length,g=c.indexOf(s,x);while(~g);return _+c.substring(x)},"i"),n=m((c,s,p=c)=>{let g=m(_=>{let x=String(_),P=x.indexOf(s,c.length);return~P?c+r(x,s,p,P)+s:c+x+s},"o");return g.open=c,g.close=s,g},"g"),i={isColorSupported:e},l=m(c=>`\x1B[${c}m`,"d");for(let[c,s]of n6)i[c]=e?n(l(s[0]),l(s[1]),s[2]):qy;return i}m(o6,"p");var ii=o6();function cP(t,e){return e.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in t)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:m(function(){return r[n]},"get")})}})}),Object.freeze(t)}m(cP,"_mergeNamespaces");function s6(t,e){const r=Object.keys(t),n=e===null?r:r.sort(e);if(Object.getOwnPropertySymbols)for(const i of Object.getOwnPropertySymbols(t))Object.getOwnPropertyDescriptor(t,i).enumerable&&n.push(i);return n}m(s6,"getKeysOfEnumerableProperties");function Cf(t,e,r,n,i,l,c=": "){let s="",p=0,g=t.next();if(!g.done){s+=e.spacingOuter;const _=r+e.indent;for(;!g.done;){if(s+=_,p++===e.maxWidth){s+="";break}const x=l(g.value[0],e,_,n,i),P=l(g.value[1],e,_,n,i);s+=x+c+P,g=t.next(),g.done?e.min||(s+=","):s+=`,${e.spacingInner}`}s+=e.spacingOuter+r}return s}m(Cf,"printIteratorEntries");function a1(t,e,r,n,i,l){let c="",s=0,p=t.next();if(!p.done){c+=e.spacingOuter;const g=r+e.indent;for(;!p.done;){if(c+=g,s++===e.maxWidth){c+="";break}c+=l(p.value,e,g,n,i),p=t.next(),p.done?e.min||(c+=","):c+=`,${e.spacingInner}`}c+=e.spacingOuter+r}return c}m(a1,"printIteratorValues");function Wg(t,e,r,n,i,l){let c="";t=t instanceof ArrayBuffer?new DataView(t):t;const s=m(g=>g instanceof DataView,"isDataView"),p=s(t)?t.byteLength:t.length;if(p>0){c+=e.spacingOuter;const g=r+e.indent;for(let _=0;_<p;_++){if(c+=g,_===e.maxWidth){c+="";break}(s(t)||_ in t)&&(c+=l(s(t)?t.getInt8(_):t[_],e,g,n,i)),_<p-1?c+=`,${e.spacingInner}`:e.min||(c+=",")}c+=e.spacingOuter+r}return c}m(Wg,"printListItems");function l1(t,e,r,n,i,l){let c="";const s=s6(t,e.compareKeys);if(s.length>0){c+=e.spacingOuter;const p=r+e.indent;for(let g=0;g<s.length;g++){const _=s[g],x=l(_,e,p,n,i),P=l(t[_],e,p,n,i);c+=`${p+x}: ${P}`,g<s.length-1?c+=`,${e.spacingInner}`:e.min||(c+=",")}c+=e.spacingOuter+r}return c}m(l1,"printObjectProperties");var Wre=typeof Symbol=="function"&&Symbol.for?Symbol.for("jest.asymmetricMatcher"):1267621,R0=" ",Zre=m((t,e,r,n,i,l)=>{const c=t.toString();if(c==="ArrayContaining"||c==="ArrayNotContaining")return++n>e.maxDepth?`[${c}]`:`${c+R0}[${Wg(t.sample,e,r,n,i,l)}]`;if(c==="ObjectContaining"||c==="ObjectNotContaining")return++n>e.maxDepth?`[${c}]`:`${c+R0}{${l1(t.sample,e,r,n,i,l)}}`;if(c==="StringMatching"||c==="StringNotMatching"||c==="StringContaining"||c==="StringNotContaining")return c+R0+l(t.sample,e,r,n,i);if(typeof t.toAsymmetricMatcher!="function")throw new TypeError(`Asymmetric matcher ${t.constructor.name} does not implement toAsymmetricMatcher()`);return t.toAsymmetricMatcher()},"serialize$5"),Kre=m(t=>t&&t.$$typeof===Wre,"test$5"),Yre={serialize:Zre,test:Kre},Xre=" ",a6=new Set(["DOMStringMap","NamedNodeMap"]),Qre=/^(?:HTML\w*Collection|NodeList)$/;function l6(t){return a6.has(t)||Qre.test(t)}m(l6,"testName");var ene=m(t=>t&&t.constructor&&!!t.constructor.name&&l6(t.constructor.name),"test$4");function c6(t){return t.constructor.name==="NamedNodeMap"}m(c6,"isNamedNodeMap");var tne=m((t,e,r,n,i,l)=>{const c=t.constructor.name;return++n>e.maxDepth?`[${c}]`:(e.min?"":c+Xre)+(a6.has(c)?`{${l1(c6(t)?[...t].reduce((s,p)=>(s[p.name]=p.value,s),{}):{...t},e,r,n,i,l)}}`:`[${Wg([...t],e,r,n,i,l)}]`)},"serialize$4"),rne={serialize:tne,test:ene};function uP(t){return t.replaceAll("<","&lt;").replaceAll(">","&gt;")}m(uP,"escapeHTML");function c1(t,e,r,n,i,l,c){const s=n+r.indent,p=r.colors;return t.map(g=>{const _=e[g];let x=c(_,r,s,i,l);return typeof _!="string"&&(x.includes(`
`)&&(x=r.spacingOuter+s+x+r.spacingOuter+n),x=`{${x}}`),`${r.spacingInner+n+p.prop.open+g+p.prop.close}=${p.value.open}${x}${p.value.close}`}).join("")}m(c1,"printProps");function u1(t,e,r,n,i,l){return t.map(c=>e.spacingOuter+r+(typeof c=="string"?hP(c,e):l(c,e,r,n,i))).join("")}m(u1,"printChildren");function hP(t,e){const r=e.colors.content;return r.open+uP(t)+r.close}m(hP,"printText");function u6(t,e){const r=e.colors.comment;return`${r.open}<!--${uP(t)}-->${r.close}`}m(u6,"printComment");function h1(t,e,r,n,i){const l=n.colors.tag;return`${l.open}<${t}${e&&l.close+e+n.spacingOuter+i+l.open}${r?`>${l.close}${r}${n.spacingOuter}${i}${l.open}</${t}`:`${e&&!n.min?"":" "}/`}>${l.close}`}m(h1,"printElement");function d1(t,e){const r=e.colors.tag;return`${r.open}<${t}${r.close} ${r.open} />${r.close}`}m(d1,"printElementAsLeaf");var nne=1,h6=3,d6=8,p6=11,ine=/^(?:(?:HTML|SVG)\w*)?Element$/;function f6(t){try{return typeof t.hasAttribute=="function"&&t.hasAttribute("is")}catch{return!1}}m(f6,"testHasAttribute");function m6(t){const e=t.constructor.name,{nodeType:r,tagName:n}=t,i=typeof n=="string"&&n.includes("-")||f6(t);return r===nne&&(ine.test(e)||i)||r===h6&&e==="Text"||r===d6&&e==="Comment"||r===p6&&e==="DocumentFragment"}m(m6,"testNode");var one=m(t=>{var e;return(t==null||(e=t.constructor)===null||e===void 0?void 0:e.name)&&m6(t)},"test$3");function g6(t){return t.nodeType===h6}m(g6,"nodeIsText");function y6(t){return t.nodeType===d6}m(y6,"nodeIsComment");function rb(t){return t.nodeType===p6}m(rb,"nodeIsFragment");var sne=m((t,e,r,n,i,l)=>{if(g6(t))return hP(t.data,e);if(y6(t))return u6(t.data,e);const c=rb(t)?"DocumentFragment":t.tagName.toLowerCase();return++n>e.maxDepth?d1(c,e):h1(c,c1(rb(t)?[]:Array.from(t.attributes,s=>s.name).sort(),rb(t)?{}:[...t.attributes].reduce((s,p)=>(s[p.name]=p.value,s),{}),e,r+e.indent,n,i,l),u1(Array.prototype.slice.call(t.childNodes||t.children),e,r+e.indent,n,i,l),e,r)},"serialize$3"),ane={serialize:sne,test:one},lne="@@__IMMUTABLE_ITERABLE__@@",cne="@@__IMMUTABLE_LIST__@@",une="@@__IMMUTABLE_KEYED__@@",hne="@@__IMMUTABLE_MAP__@@",hO="@@__IMMUTABLE_ORDERED__@@",dne="@@__IMMUTABLE_RECORD__@@",pne="@@__IMMUTABLE_SEQ__@@",fne="@@__IMMUTABLE_SET__@@",mne="@@__IMMUTABLE_STACK__@@",Zp=m(t=>`Immutable.${t}`,"getImmutableName"),p1=m(t=>`[${t}]`,"printAsLeaf"),Zg=" ",dO="";function _6(t,e,r,n,i,l,c){return++n>e.maxDepth?p1(Zp(c)):`${Zp(c)+Zg}{${Cf(t.entries(),e,r,n,i,l)}}`}m(_6,"printImmutableEntries");function b6(t){let e=0;return{next(){if(e<t._keys.length){const r=t._keys[e++];return{done:!1,value:[r,t.get(r)]}}return{done:!0,value:void 0}}}}m(b6,"getRecordEntries");function v6(t,e,r,n,i,l){const c=Zp(t._name||"Record");return++n>e.maxDepth?p1(c):`${c+Zg}{${Cf(b6(t),e,r,n,i,l)}}`}m(v6,"printImmutableRecord");function x6(t,e,r,n,i,l){const c=Zp("Seq");return++n>e.maxDepth?p1(c):t[une]?`${c+Zg}{${t._iter||t._object?Cf(t.entries(),e,r,n,i,l):dO}}`:`${c+Zg}[${t._iter||t._array||t._collection||t._iterable?a1(t.values(),e,r,n,i,l):dO}]`}m(x6,"printImmutableSeq");function nb(t,e,r,n,i,l,c){return++n>e.maxDepth?p1(Zp(c)):`${Zp(c)+Zg}[${a1(t.values(),e,r,n,i,l)}]`}m(nb,"printImmutableValues");var gne=m((t,e,r,n,i,l)=>t[hne]?_6(t,e,r,n,i,l,t[hO]?"OrderedMap":"Map"):t[cne]?nb(t,e,r,n,i,l,"List"):t[fne]?nb(t,e,r,n,i,l,t[hO]?"OrderedSet":"Set"):t[mne]?nb(t,e,r,n,i,l,"Stack"):t[pne]?x6(t,e,r,n,i,l):v6(t,e,r,n,i,l),"serialize$2"),yne=m(t=>t&&(t[lne]===!0||t[dne]===!0),"test$2"),_ne={serialize:gne,test:yne};function dP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}m(dP,"getDefaultExportFromCjs");var kE={exports:{}},Pn={},pO;function w6(){if(pO)return Pn;pO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),P=Symbol.for("react.view_transition"),A=Symbol.for("react.client.reference");function M(F){if(typeof F=="object"&&F!==null){var z=F.$$typeof;switch(z){case t:switch(F=F.type,F){case r:case i:case n:case p:case g:case P:return F;default:switch(F=F&&F.$$typeof,F){case c:case s:case x:case _:return F;case l:return F;default:return z}}case e:return z}}}return m(M,"typeOf"),Pn.ContextConsumer=l,Pn.ContextProvider=c,Pn.Element=t,Pn.ForwardRef=s,Pn.Fragment=r,Pn.Lazy=x,Pn.Memo=_,Pn.Portal=e,Pn.Profiler=i,Pn.StrictMode=n,Pn.Suspense=p,Pn.SuspenseList=g,Pn.isContextConsumer=function(F){return M(F)===l},Pn.isContextProvider=function(F){return M(F)===c},Pn.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===t},Pn.isForwardRef=function(F){return M(F)===s},Pn.isFragment=function(F){return M(F)===r},Pn.isLazy=function(F){return M(F)===x},Pn.isMemo=function(F){return M(F)===_},Pn.isPortal=function(F){return M(F)===e},Pn.isProfiler=function(F){return M(F)===i},Pn.isStrictMode=function(F){return M(F)===n},Pn.isSuspense=function(F){return M(F)===p},Pn.isSuspenseList=function(F){return M(F)===g},Pn.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===r||F===i||F===n||F===p||F===g||typeof F=="object"&&F!==null&&(F.$$typeof===x||F.$$typeof===_||F.$$typeof===c||F.$$typeof===l||F.$$typeof===s||F.$$typeof===A||F.getModuleId!==void 0)},Pn.typeOf=M,Pn}m(w6,"requireReactIs_production");var fO;function E6(){return fO||(fO=1,kE.exports=w6()),kE.exports}m(E6,"requireReactIs$1");var T6=E6(),bne=dP(T6),vne=cP({__proto__:null,default:bne},[T6]),LE={exports:{}},_n={},mO;function S6(){if(mO)return _n;mO=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),s=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),M;M=Symbol.for("react.module.reference");function F(z){if(typeof z=="object"&&z!==null){var j=z.$$typeof;switch(j){case t:switch(z=z.type,z){case r:case i:case n:case g:case _:return z;default:switch(z=z&&z.$$typeof,z){case s:case c:case p:case P:case x:case l:return z;default:return j}}case e:return j}}}return m(F,"v"),_n.ContextConsumer=c,_n.ContextProvider=l,_n.Element=t,_n.ForwardRef=p,_n.Fragment=r,_n.Lazy=P,_n.Memo=x,_n.Portal=e,_n.Profiler=i,_n.StrictMode=n,_n.Suspense=g,_n.SuspenseList=_,_n.isAsyncMode=function(){return!1},_n.isConcurrentMode=function(){return!1},_n.isContextConsumer=function(z){return F(z)===c},_n.isContextProvider=function(z){return F(z)===l},_n.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===t},_n.isForwardRef=function(z){return F(z)===p},_n.isFragment=function(z){return F(z)===r},_n.isLazy=function(z){return F(z)===P},_n.isMemo=function(z){return F(z)===x},_n.isPortal=function(z){return F(z)===e},_n.isProfiler=function(z){return F(z)===i},_n.isStrictMode=function(z){return F(z)===n},_n.isSuspense=function(z){return F(z)===g},_n.isSuspenseList=function(z){return F(z)===_},_n.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===r||z===i||z===n||z===g||z===_||z===A||typeof z=="object"&&z!==null&&(z.$$typeof===P||z.$$typeof===x||z.$$typeof===l||z.$$typeof===c||z.$$typeof===p||z.$$typeof===M||z.getModuleId!==void 0)},_n.typeOf=F,_n}m(S6,"requireReactIs_production_min");var gO;function C6(){return gO||(gO=1,LE.exports=S6()),LE.exports}m(C6,"requireReactIs");var P6=C6(),xne=dP(P6),wne=cP({__proto__:null,default:xne},[P6]),Ene=["isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isSuspenseList","isValidElementType"],eh=Object.fromEntries(Ene.map(t=>[t,e=>wne[t](e)||vne[t](e)]));function pP(t,e=[]){if(Array.isArray(t))for(const r of t)pP(r,e);else t!=null&&t!==!1&&t!==""&&e.push(t);return e}m(pP,"getChildren");function tS(t){const e=t.type;if(typeof e=="string")return e;if(typeof e=="function")return e.displayName||e.name||"Unknown";if(eh.isFragment(t))return"React.Fragment";if(eh.isSuspense(t))return"React.Suspense";if(typeof e=="object"&&e!==null){if(eh.isContextProvider(t))return"Context.Provider";if(eh.isContextConsumer(t))return"Context.Consumer";if(eh.isForwardRef(t)){if(e.displayName)return e.displayName;const r=e.render.displayName||e.render.name||"";return r===""?"ForwardRef":`ForwardRef(${r})`}if(eh.isMemo(t)){const r=e.displayName||e.type.displayName||e.type.name||"";return r===""?"Memo":`Memo(${r})`}}return"UNDEFINED"}m(tS,"getType");function A6(t){const{props:e}=t;return Object.keys(e).filter(r=>r!=="children"&&e[r]!==void 0).sort()}m(A6,"getPropKeys$1");var Tne=m((t,e,r,n,i,l)=>++n>e.maxDepth?d1(tS(t),e):h1(tS(t),c1(A6(t),t.props,e,r+e.indent,n,i,l),u1(pP(t.props.children),e,r+e.indent,n,i,l),e,r),"serialize$1"),Sne=m(t=>t!=null&&eh.isElement(t),"test$1"),Cne={serialize:Tne,test:Sne},Pne=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.test.json"):245830487;function R6(t){const{props:e}=t;return e?Object.keys(e).filter(r=>e[r]!==void 0).sort():[]}m(R6,"getPropKeys");var Ane=m((t,e,r,n,i,l)=>++n>e.maxDepth?d1(t.type,e):h1(t.type,t.props?c1(R6(t),t.props,e,r+e.indent,n,i,l):"",t.children?u1(t.children,e,r+e.indent,n,i,l):"",e,r),"serialize"),Rne=m(t=>t&&t.$$typeof===Pne,"test"),Ine={serialize:Ane,test:Rne},I6=Object.prototype.toString,Mne=Date.prototype.toISOString,One=Error.prototype.toString,yO=RegExp.prototype.toString;function Pg(t){return typeof t.constructor=="function"&&t.constructor.name||"Object"}m(Pg,"getConstructorName");function M6(t){return typeof window<"u"&&t===window}m(M6,"isWindow");var kne=/^Symbol\((.*)\)(.*)$/,Lne=/\n/g,O6=class extends Error{constructor(e,r){super(e),this.stack=r,this.name=this.constructor.name}};m(O6,"PrettyFormatPluginError");var k6=O6;function L6(t){return t==="[object Array]"||t==="[object ArrayBuffer]"||t==="[object DataView]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object Int8Array]"||t==="[object Int16Array]"||t==="[object Int32Array]"||t==="[object Uint8Array]"||t==="[object Uint8ClampedArray]"||t==="[object Uint16Array]"||t==="[object Uint32Array]"}m(L6,"isToStringedArrayType");function D6(t){return Object.is(t,-0)?"-0":String(t)}m(D6,"printNumber");function N6(t){return`${t}n`}m(N6,"printBigInt");function rS(t,e){return e?`[Function ${t.name||"anonymous"}]`:"[Function]"}m(rS,"printFunction");function nS(t){return String(t).replace(kne,"Symbol($1)")}m(nS,"printSymbol");function iS(t){return`[${One.call(t)}]`}m(iS,"printError");function fP(t,e,r,n){if(t===!0||t===!1)return`${t}`;if(t===void 0)return"undefined";if(t===null)return"null";const i=typeof t;if(i==="number")return D6(t);if(i==="bigint")return N6(t);if(i==="string")return n?`"${t.replaceAll(/"|\\/g,"\\$&")}"`:`"${t}"`;if(i==="function")return rS(t,e);if(i==="symbol")return nS(t);const l=I6.call(t);return l==="[object WeakMap]"?"WeakMap {}":l==="[object WeakSet]"?"WeakSet {}":l==="[object Function]"||l==="[object GeneratorFunction]"?rS(t,e):l==="[object Symbol]"?nS(t):l==="[object Date]"?Number.isNaN(+t)?"Date { NaN }":Mne.call(t):l==="[object Error]"?iS(t):l==="[object RegExp]"?r?yO.call(t).replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&"):yO.call(t):t instanceof Error?iS(t):null}m(fP,"printBasicValue");function mP(t,e,r,n,i,l){if(i.includes(t))return"[Circular]";i=[...i],i.push(t);const c=++n>e.maxDepth,s=e.min;if(e.callToJSON&&!c&&t.toJSON&&typeof t.toJSON=="function"&&!l)return xl(t.toJSON(),e,r,n,i,!0);const p=I6.call(t);return p==="[object Arguments]"?c?"[Arguments]":`${s?"":"Arguments "}[${Wg(t,e,r,n,i,xl)}]`:L6(p)?c?`[${t.constructor.name}]`:`${s||!e.printBasicPrototype&&t.constructor.name==="Array"?"":`${t.constructor.name} `}[${Wg(t,e,r,n,i,xl)}]`:p==="[object Map]"?c?"[Map]":`Map {${Cf(t.entries(),e,r,n,i,xl," => ")}}`:p==="[object Set]"?c?"[Set]":`Set {${a1(t.values(),e,r,n,i,xl)}}`:c||M6(t)?`[${Pg(t)}]`:`${s||!e.printBasicPrototype&&Pg(t)==="Object"?"":`${Pg(t)} `}{${l1(t,e,r,n,i,xl)}}`}m(mP,"printComplexValue");var Dne={test:m(t=>t&&t instanceof Error,"test"),serialize(t,e,r,n,i,l){if(i.includes(t))return"[Circular]";i=[...i,t];const c=++n>e.maxDepth,{message:s,cause:p,...g}=t,_={message:s,...typeof p<"u"?{cause:p}:{},...t instanceof AggregateError?{errors:t.errors}:{},...g},x=t.name!=="Error"?t.name:Pg(t);return c?`[${x}]`:`${x} {${Cf(Object.entries(_).values(),e,r,n,i,l)}}`}};function F6(t){return t.serialize!=null}m(F6,"isNewPlugin");function gP(t,e,r,n,i,l){let c;try{c=F6(t)?t.serialize(e,r,n,i,l,xl):t.print(e,s=>xl(s,r,n,i,l),s=>{const p=n+r.indent;return p+s.replaceAll(Lne,`
${p}`)},{edgeSpacing:r.spacingOuter,min:r.min,spacing:r.spacingInner},r.colors)}catch(s){throw new k6(s.message,s.stack)}if(typeof c!="string")throw new TypeError(`pretty-format: Plugin must return type "string" but instead returned "${typeof c}".`);return c}m(gP,"printPlugin");function yP(t,e){for(const r of t)try{if(r.test(e))return r}catch(n){throw new k6(n.message,n.stack)}return null}m(yP,"findPlugin");function xl(t,e,r,n,i,l){const c=yP(e.plugins,t);if(c!==null)return gP(c,t,e,r,n,i);const s=fP(t,e.printFunctionName,e.escapeRegex,e.escapeString);return s!==null?s:mP(t,e,r,n,i,l)}m(xl,"printer");var _P={comment:"gray",content:"reset",prop:"yellow",tag:"cyan",value:"green"},z6=Object.keys(_P),Ks={callToJSON:!0,compareKeys:void 0,escapeRegex:!1,escapeString:!0,highlight:!1,indent:2,maxDepth:Number.POSITIVE_INFINITY,maxWidth:Number.POSITIVE_INFINITY,min:!1,plugins:[],printBasicPrototype:!0,printFunctionName:!0,theme:_P};function j6(t){for(const e of Object.keys(t))if(!Object.prototype.hasOwnProperty.call(Ks,e))throw new Error(`pretty-format: Unknown option "${e}".`);if(t.min&&t.indent!==void 0&&t.indent!==0)throw new Error('pretty-format: Options "min" and "indent" cannot be used together.')}m(j6,"validateOptions");function B6(){return z6.reduce((t,e)=>{const r=_P[e],n=r&&ii[r];if(n&&typeof n.close=="string"&&typeof n.open=="string")t[e]=n;else throw new Error(`pretty-format: Option "theme" has a key "${e}" whose value "${r}" is undefined in ansi-styles.`);return t},Object.create(null))}m(B6,"getColorsHighlight");function q6(){return z6.reduce((t,e)=>(t[e]={close:"",open:""},t),Object.create(null))}m(q6,"getColorsEmpty");function bP(t){return t?.printFunctionName??Ks.printFunctionName}m(bP,"getPrintFunctionName");function vP(t){return t?.escapeRegex??Ks.escapeRegex}m(vP,"getEscapeRegex");function xP(t){return t?.escapeString??Ks.escapeString}m(xP,"getEscapeString");function oS(t){return{callToJSON:t?.callToJSON??Ks.callToJSON,colors:t?.highlight?B6():q6(),compareKeys:typeof t?.compareKeys=="function"||t?.compareKeys===null?t.compareKeys:Ks.compareKeys,escapeRegex:vP(t),escapeString:xP(t),indent:t?.min?"":$6(t?.indent??Ks.indent),maxDepth:t?.maxDepth??Ks.maxDepth,maxWidth:t?.maxWidth??Ks.maxWidth,min:t?.min??Ks.min,plugins:t?.plugins??Ks.plugins,printBasicPrototype:t?.printBasicPrototype??!0,printFunctionName:bP(t),spacingInner:t?.min?" ":`
`,spacingOuter:t?.min?"":`
`}}m(oS,"getConfig");function $6(t){return Array.from({length:t+1}).join(" ")}m($6,"createIndent");function ta(t,e){if(e&&(j6(e),e.plugins)){const n=yP(e.plugins,t);if(n!==null)return gP(n,t,oS(e),"",0,[])}const r=fP(t,bP(e),vP(e),xP(e));return r!==null?r:mP(t,oS(e),"",0,[])}m(ta,"format");var wP={AsymmetricMatcher:Yre,DOMCollection:rne,DOMElement:ane,Immutable:_ne,ReactElement:Cne,ReactTestComponent:Ine,Error:Dne},_O={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},Nne={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},Kp="";function V6(t,e){const r=_O[Nne[e]]||_O[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}m(V6,"colorise");function U6({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:l=1/0,breakLength:c=1/0,seen:s=[],truncate:p=1/0,stylize:g=String}={},_){const x={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(l),breakLength:Number(c),truncate:Number(p),seen:s,inspect:_,stylize:g};return x.colors&&(x.stylize=V6),x}m(U6,"normaliseOptions");function G6(t){return t>="\uD800"&&t<="\uDBFF"}m(G6,"isHighSurrogate");function jl(t,e,r=Kp){t=String(t);const n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let l=e-n;return l>0&&G6(t[l-1])&&(l=l-1),`${t.slice(0,l)}${r}`}return t}m(jl,"truncate");function Ls(t,e,r,n=", "){r=r||e.inspect;const i=t.length;if(i===0)return"";const l=e.truncate;let c="",s="",p="";for(let g=0;g<i;g+=1){const _=g+1===t.length,x=g+2===t.length;p=`${Kp}(${t.length-g})`;const P=t[g];e.truncate=l-c.length-(_?0:n.length);const A=s||r(P,e)+(_?"":n),M=c.length+A.length,F=M+p.length;if(_&&M>l&&c.length+p.length<=l||!_&&!x&&F>l||(s=_?"":r(t[g+1],e)+(x?"":n),!_&&x&&F>l&&M+s.length>l))break;if(c+=A,!_&&!x&&M+s.length>=l){p=`${Kp}(${t.length-g-1})`;break}p=""}return`${c}${p}`}m(Ls,"inspectList");function H6(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}m(H6,"quoteComplexKey");function Yp([t,e],r){return r.truncate-=2,typeof t=="string"?t=H6(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}m(Yp,"inspectProperty");function J6(t,e){const r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;const n=Ls(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Ls(r.map(l=>[l,t[l]]),e,Yp)),`[ ${n}${i?`, ${i}`:""} ]`}m(J6,"inspectArray");var Fne=m(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function wa(t,e){const r=Fne(t);e.truncate-=r.length+4;const n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let c=0;c<t.length;c++){const s=`${e.stylize(jl(t[c],e.truncate),"number")}${c===t.length-1?"":", "}`;if(e.truncate-=s.length,t[c]!==t.length&&e.truncate<=3){i+=`${Kp}(${t.length-t[c]+1})`;break}i+=s}let l="";return n.length&&(l=Ls(n.map(c=>[c,t[c]]),e,Yp)),`${r}[ ${i}${l?`, ${l}`:""} ]`}m(wa,"inspectTypedArray");function W6(t,e){const r=t.toJSON();if(r===null)return"Invalid Date";const n=r.split("T"),i=n[0];return e.stylize(`${i}T${jl(n[1],e.truncate-i.length-1)}`,"date")}m(W6,"inspectDate");function sS(t,e){const r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${jl(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}m(sS,"inspectFunction");function Z6([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}m(Z6,"inspectMapEntry");function K6(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}m(K6,"mapToEntries");function Y6(t,e){return t.size===0?"Map{}":(e.truncate-=7,`Map{ ${Ls(K6(t),e,Z6)} }`)}m(Y6,"inspectMap");var zne=Number.isNaN||(t=>t!==t);function aS(t,e){return zne(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(jl(String(t),e.truncate),"number")}m(aS,"inspectNumber");function lS(t,e){let r=jl(t.toString(),e.truncate-1);return r!==Kp&&(r+="n"),e.stylize(r,"bigint")}m(lS,"inspectBigInt");function X6(t,e){const r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${jl(i,n)}/${r}`,"regexp")}m(X6,"inspectRegExp");function Q6(t){const e=[];return t.forEach(r=>{e.push(r)}),e}m(Q6,"arrayFromSet");function ez(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Ls(Q6(t),e)} }`)}m(ez,"inspectSet");var bO=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),jne={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},Bne=16;function tz(t){return jne[t]||`\\u${`0000${t.charCodeAt(0).toString(Bne)}`.slice(-4)}`}m(tz,"escape");function cS(t,e){return bO.test(t)&&(t=t.replace(bO,tz)),e.stylize(`'${jl(t,e.truncate-2)}'`,"string")}m(cS,"inspectString");function uS(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}m(uS,"inspectSymbol");var qne=m(()=>"Promise{}","getPromiseValue"),$ne=qne;function Ag(t,e){const r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);const i=Ls(r.map(s=>[s,t[s]]),e,Yp),l=Ls(n.map(s=>[s,t[s]]),e,Yp);e.seen.pop();let c="";return i&&l&&(c=", "),`{ ${i}${c}${l} }`}m(Ag,"inspectObject");var DE=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function rz(t,e){let r="";return DE&&DE in t&&(r=t[DE]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Ag(t,e)}`}m(rz,"inspectClass");function nz(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Ls(t,e)} ]`)}m(nz,"inspectArguments");var Vne=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function iz(t,e){const r=Object.getOwnPropertyNames(t).filter(c=>Vne.indexOf(c)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=jl(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);const l=Ls(r.map(c=>[c,t[c]]),e,Yp);return`${n}${i}${l?` { ${l} }`:""}`}m(iz,"inspectObject");function oz([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}m(oz,"inspectAttribute");function Pb(t,e){return Ls(t,e,sz,`
`)}m(Pb,"inspectNodeCollection");function sz(t,e){switch(t.nodeType){case 1:return EP(t,e);case 3:return e.inspect(t.data,e);default:return e.inspect(t,e)}}m(sz,"inspectNode");function EP(t,e){const r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),l=e.stylize(">","special"),c=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let s="";r.length>0&&(s+=" ",s+=Ls(r.map(_=>[_,t.getAttribute(_)]),e,oz," ")),e.truncate-=s.length;const p=e.truncate;let g=Pb(t.children,e);return g&&g.length>p&&(g=`${Kp}(${t.children.length})`),`${i}${s}${l}${g}${c}`}m(EP,"inspectHTML");var Une=typeof Symbol=="function"&&typeof Symbol.for=="function",NE=Une?Symbol.for("chai/inspect"):"@@chai/inspect",FE=Symbol.for("nodejs.util.inspect.custom"),vO=new WeakMap,xO={},wO={undefined:m((t,e)=>e.stylize("undefined","undefined"),"undefined"),null:m((t,e)=>e.stylize("null","null"),"null"),boolean:m((t,e)=>e.stylize(String(t),"boolean"),"boolean"),Boolean:m((t,e)=>e.stylize(String(t),"boolean"),"Boolean"),number:aS,Number:aS,bigint:lS,BigInt:lS,string:cS,String:cS,function:sS,Function:sS,symbol:uS,Symbol:uS,Array:J6,Date:W6,Map:Y6,Set:ez,RegExp:X6,Promise:$ne,WeakSet:m((t,e)=>e.stylize("WeakSet{}","special"),"WeakSet"),WeakMap:m((t,e)=>e.stylize("WeakMap{}","special"),"WeakMap"),Arguments:nz,Int8Array:wa,Uint8Array:wa,Uint8ClampedArray:wa,Int16Array:wa,Uint16Array:wa,Int32Array:wa,Uint32Array:wa,Float32Array:wa,Float64Array:wa,Generator:m(()=>"","Generator"),DataView:m(()=>"","DataView"),ArrayBuffer:m(()=>"","ArrayBuffer"),Error:iz,HTMLCollection:Pb,NodeList:Pb},Gne=m((t,e,r,n)=>NE in t&&typeof t[NE]=="function"?t[NE](e):FE in t&&typeof t[FE]=="function"?t[FE](e.depth,e,n):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&vO.has(t.constructor)?vO.get(t.constructor)(t,e):xO[r]?xO[r](t,e):"","inspectCustom"),Hne=Object.prototype.toString;function Rg(t,e={}){const r=U6(e,Rg),{customInspect:n}=r;let i=t===null?"null":typeof t;if(i==="object"&&(i=Hne.call(t).slice(8,-1)),i in wO)return wO[i](t,r);if(n&&t){const c=Gne(t,r,i,Rg);if(c)return typeof c=="string"?c:Rg(c,r)}const l=t?Object.getPrototypeOf(t):!1;return l===Object.prototype||l===null?Ag(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?EP(t,r):"constructor"in t?t.constructor!==Object?rz(t,r):Ag(t,r):t===Object(t)?Ag(t,r):r.stylize(String(t),i)}m(Rg,"inspect");var{AsymmetricMatcher:Jne,DOMCollection:Wne,DOMElement:Zne,Immutable:Kne,ReactElement:Yne,ReactTestComponent:Xne}=wP,EO=[Xne,Yne,Zne,Wne,Kne,Jne];function ko(t,e=10,{maxLength:r,...n}={}){const i=r??1e4;let l;try{l=ta(t,{maxDepth:e,escapeString:!1,plugins:EO,...n})}catch{l=ta(t,{callToJSON:!1,maxDepth:e,escapeString:!1,plugins:EO,...n})}return l.length>=i&&e>1?ko(t,Math.floor(Math.min(e,Number.MAX_SAFE_INTEGER)/2),{maxLength:r,...n}):l}m(ko,"stringify");var Qne=/%[sdjifoOc%]/g;function az(...t){if(typeof t[0]!="string"){const l=[];for(let c=0;c<t.length;c++)l.push(bp(t[c],{depth:0,colors:!1}));return l.join(" ")}const e=t.length;let r=1;const n=t[0];let i=String(n).replace(Qne,l=>{if(l==="%%")return"%";if(r>=e)return l;switch(l){case"%s":{const c=t[r++];return typeof c=="bigint"?`${c.toString()}n`:typeof c=="number"&&c===0&&1/c<0?"-0":typeof c=="object"&&c!==null?typeof c.toString=="function"&&c.toString!==Object.prototype.toString?c.toString():bp(c,{depth:0,colors:!1}):String(c)}case"%d":{const c=t[r++];return typeof c=="bigint"?`${c.toString()}n`:Number(c).toString()}case"%i":{const c=t[r++];return typeof c=="bigint"?`${c.toString()}n`:Number.parseInt(String(c)).toString()}case"%f":return Number.parseFloat(String(t[r++])).toString();case"%o":return bp(t[r++],{showHidden:!0,showProxy:!0});case"%O":return bp(t[r++]);case"%c":return r++,"";case"%j":try{return JSON.stringify(t[r++])}catch(c){const s=c.message;if(s.includes("circular structure")||s.includes("cyclic structures")||s.includes("cyclic object"))return"[Circular]";throw c}default:return l}});for(let l=t[r];r<e;l=t[++r])l===null||typeof l!="object"?i+=` ${l}`:i+=` ${bp(l)}`;return i}m(az,"format");function bp(t,e={}){return e.truncate===0&&(e.truncate=Number.POSITIVE_INFINITY),Rg(t,e)}m(bp,"inspect");function TP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}m(TP,"getDefaultExportFromCjs");function Ea(t,e,r){const n=typeof t;if(!r.includes(n))throw new TypeError(`${e} value must be ${r.join(" or ")}, received "${n}"`)}m(Ea,"assertTypes");function Ig(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}m(Ig,"isObject");function lz(t){return t===Object.prototype||t===Function.prototype||t===RegExp.prototype}m(lz,"isFinalObj");function Kg(t){return Object.prototype.toString.apply(t).slice(8,-1)}m(Kg,"getType");function cz(t,e){const r=typeof e=="function"?e:n=>e.add(n);Object.getOwnPropertyNames(t).forEach(r),Object.getOwnPropertySymbols(t).forEach(r)}m(cz,"collectOwnProperties");function SP(t){const e=new Set;return lz(t)?[]:(cz(t,e),Array.from(e))}m(SP,"getOwnProperties");var uz={forceWritable:!1};function hS(t,e=uz){return Ab(t,new WeakMap,e)}m(hS,"deepClone");function Ab(t,e,r=uz){let n,i;if(e.has(t))return e.get(t);if(Array.isArray(t)){for(i=Array.from({length:n=t.length}),e.set(t,i);n--;)i[n]=Ab(t[n],e,r);return i}if(Object.prototype.toString.call(t)==="[object Object]"){i=Object.create(Object.getPrototypeOf(t)),e.set(t,i);const l=SP(t);for(const c of l){const s=Object.getOwnPropertyDescriptor(t,c);if(!s)continue;const p=Ab(t[c],e,r);r.forceWritable?Object.defineProperty(i,c,{enumerable:s.enumerable,configurable:!0,writable:!0,value:p}):"get"in s?Object.defineProperty(i,c,{...s,get(){return p}}):Object.defineProperty(i,c,{...s,value:p})}return i}return t}m(Ab,"clone");function hz(){}m(hz,"noop");var po=-1,Yi=1,ni=0,dz=class{constructor(e,r){xr(this,0);xr(this,1);this[0]=e,this[1]=r}};m(dz,"Diff");var Zn=dz;function pz(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;let r=0,n=Math.min(t.length,e.length),i=n,l=0;for(;r<i;)t.substring(l,i)===e.substring(l,i)?(r=i,l=r):n=i,i=Math.floor((n-r)/2+r);return i}m(pz,"diff_commonPrefix");function CP(t,e){if(!t||!e||t.charAt(t.length-1)!==e.charAt(e.length-1))return 0;let r=0,n=Math.min(t.length,e.length),i=n,l=0;for(;r<i;)t.substring(t.length-i,t.length-l)===e.substring(e.length-i,e.length-l)?(r=i,l=r):n=i,i=Math.floor((n-r)/2+r);return i}m(CP,"diff_commonSuffix");function dS(t,e){const r=t.length,n=e.length;if(r===0||n===0)return 0;r>n?t=t.substring(r-n):r<n&&(e=e.substring(0,r));const i=Math.min(r,n);if(t===e)return i;let l=0,c=1;for(;;){const s=t.substring(i-c),p=e.indexOf(s);if(p===-1)return l;c+=p,(p===0||t.substring(i-c)===e.substring(0,c))&&(l=c,c++)}}m(dS,"diff_commonOverlap_");function fz(t){let e=!1;const r=[];let n=0,i=null,l=0,c=0,s=0,p=0,g=0;for(;l<t.length;)t[l][0]===ni?(r[n++]=l,c=p,s=g,p=0,g=0,i=t[l][1]):(t[l][0]===Yi?p+=t[l][1].length:g+=t[l][1].length,i&&i.length<=Math.max(c,s)&&i.length<=Math.max(p,g)&&(t.splice(r[n-1],0,new Zn(po,i)),t[r[n-1]+1][0]=Yi,n--,n--,l=n>0?r[n-1]:-1,c=0,s=0,p=0,g=0,i=null,e=!0)),l++;for(e&&PP(t),mz(t),l=1;l<t.length;){if(t[l-1][0]===po&&t[l][0]===Yi){const _=t[l-1][1],x=t[l][1],P=dS(_,x),A=dS(x,_);P>=A?(P>=_.length/2||P>=x.length/2)&&(t.splice(l,0,new Zn(ni,x.substring(0,P))),t[l-1][1]=_.substring(0,_.length-P),t[l+1][1]=x.substring(P),l++):(A>=_.length/2||A>=x.length/2)&&(t.splice(l,0,new Zn(ni,_.substring(0,A))),t[l-1][0]=Yi,t[l-1][1]=x.substring(0,x.length-A),t[l+1][0]=po,t[l+1][1]=_.substring(A),l++),l++}l++}}m(fz,"diff_cleanupSemantic");var TO=/[^a-z0-9]/i,SO=/\s/,CO=/[\r\n]/,eie=/\n\r?\n$/,tie=/^\r?\n\r?\n/;function mz(t){let e=1;for(;e<t.length-1;){if(t[e-1][0]===ni&&t[e+1][0]===ni){let r=t[e-1][1],n=t[e][1],i=t[e+1][1];const l=CP(r,n);if(l){const _=n.substring(n.length-l);r=r.substring(0,r.length-l),n=_+n.substring(0,n.length-l),i=_+i}let c=r,s=n,p=i,g=dg(r,n)+dg(n,i);for(;n.charAt(0)===i.charAt(0);){r+=n.charAt(0),n=n.substring(1)+i.charAt(0),i=i.substring(1);const _=dg(r,n)+dg(n,i);_>=g&&(g=_,c=r,s=n,p=i)}t[e-1][1]!==c&&(c?t[e-1][1]=c:(t.splice(e-1,1),e--),t[e][1]=s,p?t[e+1][1]=p:(t.splice(e+1,1),e--))}e++}}m(mz,"diff_cleanupSemanticLossless");function PP(t){t.push(new Zn(ni,""));let e=0,r=0,n=0,i="",l="",c;for(;e<t.length;)switch(t[e][0]){case Yi:n++,l+=t[e][1],e++;break;case po:r++,i+=t[e][1],e++;break;case ni:r+n>1?(r!==0&&n!==0&&(c=pz(l,i),c!==0&&(e-r-n>0&&t[e-r-n-1][0]===ni?t[e-r-n-1][1]+=l.substring(0,c):(t.splice(0,0,new Zn(ni,l.substring(0,c))),e++),l=l.substring(c),i=i.substring(c)),c=CP(l,i),c!==0&&(t[e][1]=l.substring(l.length-c)+t[e][1],l=l.substring(0,l.length-c),i=i.substring(0,i.length-c))),e-=r+n,t.splice(e,r+n),i.length&&(t.splice(e,0,new Zn(po,i)),e++),l.length&&(t.splice(e,0,new Zn(Yi,l)),e++),e++):e!==0&&t[e-1][0]===ni?(t[e-1][1]+=t[e][1],t.splice(e,1)):e++,n=0,r=0,i="",l="";break}t[t.length-1][1]===""&&t.pop();let s=!1;for(e=1;e<t.length-1;)t[e-1][0]===ni&&t[e+1][0]===ni&&(t[e][1].substring(t[e][1].length-t[e-1][1].length)===t[e-1][1]?(t[e][1]=t[e-1][1]+t[e][1].substring(0,t[e][1].length-t[e-1][1].length),t[e+1][1]=t[e-1][1]+t[e+1][1],t.splice(e-1,1),s=!0):t[e][1].substring(0,t[e+1][1].length)===t[e+1][1]&&(t[e-1][1]+=t[e+1][1],t[e][1]=t[e][1].substring(t[e+1][1].length)+t[e+1][1],t.splice(e+1,1),s=!0)),e++;s&&PP(t)}m(PP,"diff_cleanupMerge");function dg(t,e){if(!t||!e)return 6;const r=t.charAt(t.length-1),n=e.charAt(0),i=r.match(TO),l=n.match(TO),c=i&&r.match(SO),s=l&&n.match(SO),p=c&&r.match(CO),g=s&&n.match(CO),_=p&&t.match(eie),x=g&&e.match(tie);return _||x?5:p||g?4:i&&!c&&s?3:c||s?2:i||l?1:0}m(dg,"diff_cleanupSemanticScore_");var gz="Compared values have no visual difference.",rie="Compared values serialize to the same structure.\nPrinting internal object structure without calling `toJSON` instead.",I0={},PO;function yz(){if(PO)return I0;PO=1,Object.defineProperty(I0,"__esModule",{value:!0}),I0.default=P;const t="diff-sequences",e=0,r=m((A,M,F,z,j)=>{let $=0;for(;A<M&&F<z&&j(A,F);)A+=1,F+=1,$+=1;return $},"countCommonItemsF"),n=m((A,M,F,z,j)=>{let $=0;for(;A<=M&&F<=z&&j(M,z);)M-=1,z-=1,$+=1;return $},"countCommonItemsR"),i=m((A,M,F,z,j,$,W)=>{let X=0,te=-A,ne=$[X],Z=ne;$[X]+=r(ne+1,M,z+ne-te+1,F,j);const U=A<W?A:W;for(X+=1,te+=2;X<=U;X+=1,te+=2){if(X!==A&&Z<$[X])ne=$[X];else if(ne=Z+1,M<=ne)return X-1;Z=$[X],$[X]=ne+r(ne+1,M,z+ne-te+1,F,j)}return W},"extendPathsF"),l=m((A,M,F,z,j,$,W)=>{let X=0,te=A,ne=$[X],Z=ne;$[X]-=n(M,ne-1,F,z+ne-te-1,j);const U=A<W?A:W;for(X+=1,te-=2;X<=U;X+=1,te-=2){if(X!==A&&$[X]<Z)ne=$[X];else if(ne=Z-1,ne<M)return X-1;Z=$[X],$[X]=ne-n(M,ne-1,F,z+ne-te-1,j)}return W},"extendPathsR"),c=m((A,M,F,z,j,$,W,X,te,ne,Z)=>{const U=z-M,K=F-M,ue=j-z-K,we=-ue-(A-1),Ie=-ue+(A-1);let ee=e;const fe=A<X?A:X;for(let ve=0,xe=-A;ve<=fe;ve+=1,xe+=2){const Xe=ve===0||ve!==A&&ee<W[ve],Ke=Xe?W[ve]:ee,Ze=Xe?Ke:Ke+1,bt=U+Ze-xe,qe=r(Ze+1,F,bt+1,j,$),kt=Ze+qe;if(ee=W[ve],W[ve]=kt,we<=xe&&xe<=Ie){const Jt=(A-1-(xe+ue))/2;if(Jt<=ne&&te[Jt]-1<=kt){const Pt=U+Ke-(Xe?xe+1:xe-1),dt=n(M,Ke,z,Pt,$),er=Ke-dt,Wt=Pt-dt,ar=er+1,_t=Wt+1;Z.nChangePreceding=A-1,A-1===ar+_t-M-z?(Z.aEndPreceding=M,Z.bEndPreceding=z):(Z.aEndPreceding=ar,Z.bEndPreceding=_t),Z.nCommonPreceding=dt,dt!==0&&(Z.aCommonPreceding=ar,Z.bCommonPreceding=_t),Z.nCommonFollowing=qe,qe!==0&&(Z.aCommonFollowing=Ze+1,Z.bCommonFollowing=bt+1);const Ve=kt+1,pt=bt+qe+1;return Z.nChangeFollowing=A-1,A-1===F+j-Ve-pt?(Z.aStartFollowing=F,Z.bStartFollowing=j):(Z.aStartFollowing=Ve,Z.bStartFollowing=pt),!0}}}return!1},"extendOverlappablePathsF"),s=m((A,M,F,z,j,$,W,X,te,ne,Z)=>{const U=j-F,K=F-M,ue=j-z-K,we=ue-A,Ie=ue+A;let ee=e;const fe=A<ne?A:ne;for(let ve=0,xe=A;ve<=fe;ve+=1,xe-=2){const Xe=ve===0||ve!==A&&te[ve]<ee,Ke=Xe?te[ve]:ee,Ze=Xe?Ke:Ke-1,bt=U+Ze-xe,qe=n(M,Ze-1,z,bt-1,$),kt=Ze-qe;if(ee=te[ve],te[ve]=kt,we<=xe&&xe<=Ie){const Jt=(A+(xe-ue))/2;if(Jt<=X&&kt-1<=W[Jt]){const Pt=bt-qe;if(Z.nChangePreceding=A,A===kt+Pt-M-z?(Z.aEndPreceding=M,Z.bEndPreceding=z):(Z.aEndPreceding=kt,Z.bEndPreceding=Pt),Z.nCommonPreceding=qe,qe!==0&&(Z.aCommonPreceding=kt,Z.bCommonPreceding=Pt),Z.nChangeFollowing=A-1,A===1)Z.nCommonFollowing=0,Z.aStartFollowing=F,Z.bStartFollowing=j;else{const dt=U+Ke-(Xe?xe-1:xe+1),er=r(Ke,F,dt,j,$);Z.nCommonFollowing=er,er!==0&&(Z.aCommonFollowing=Ke,Z.bCommonFollowing=dt);const Wt=Ke+er,ar=dt+er;A-1===F+j-Wt-ar?(Z.aStartFollowing=F,Z.bStartFollowing=j):(Z.aStartFollowing=Wt,Z.bStartFollowing=ar)}return!0}}}return!1},"extendOverlappablePathsR"),p=m((A,M,F,z,j,$,W,X,te)=>{const ne=z-M,Z=j-F,U=F-M,K=j-z,he=K-U;let ue=U,we=U;if(W[0]=M-1,X[0]=F,he%2===0){const Ie=(A||he)/2,ee=(U+K)/2;for(let fe=1;fe<=ee;fe+=1)if(ue=i(fe,F,j,ne,$,W,ue),fe<Ie)we=l(fe,M,z,Z,$,X,we);else if(s(fe,M,F,z,j,$,W,ue,X,we,te))return}else{const Ie=((A||he)+1)/2,ee=(U+K+1)/2;let fe=1;for(ue=i(fe,F,j,ne,$,W,ue),fe+=1;fe<=ee;fe+=1)if(we=l(fe-1,M,z,Z,$,X,we),fe<Ie)ue=i(fe,F,j,ne,$,W,ue);else if(c(fe,M,F,z,j,$,W,ue,X,we,te))return}throw new Error(`${t}: no overlap aStart=${M} aEnd=${F} bStart=${z} bEnd=${j}`)},"divide"),g=m((A,M,F,z,j,$,W,X,te,ne)=>{if(j-z<F-M){if($=!$,$&&W.length===1){const{foundSubsequence:kt,isCommon:Jt}=W[0];W[1]={foundSubsequence:m((Pt,dt,er)=>{kt(Pt,er,dt)},"foundSubsequence"),isCommon:m((Pt,dt)=>Jt(dt,Pt),"isCommon")}}const bt=M,qe=F;M=z,F=j,z=bt,j=qe}const{foundSubsequence:Z,isCommon:U}=W[$?1:0];p(A,M,F,z,j,U,X,te,ne);const{nChangePreceding:K,aEndPreceding:he,bEndPreceding:ue,nCommonPreceding:we,aCommonPreceding:Ie,bCommonPreceding:ee,nCommonFollowing:fe,aCommonFollowing:ve,bCommonFollowing:xe,nChangeFollowing:Xe,aStartFollowing:Ke,bStartFollowing:Ze}=ne;M<he&&z<ue&&g(K,M,he,z,ue,$,W,X,te,ne),we!==0&&Z(we,Ie,ee),fe!==0&&Z(fe,ve,xe),Ke<F&&Ze<j&&g(Xe,Ke,F,Ze,j,$,W,X,te,ne)},"findSubsequences"),_=m((A,M)=>{if(typeof M!="number")throw new TypeError(`${t}: ${A} typeof ${typeof M} is not a number`);if(!Number.isSafeInteger(M))throw new RangeError(`${t}: ${A} value ${M} is not a safe integer`);if(M<0)throw new RangeError(`${t}: ${A} value ${M} is a negative integer`)},"validateLength"),x=m((A,M)=>{const F=typeof M;if(F!=="function")throw new TypeError(`${t}: ${A} typeof ${F} is not a function`)},"validateCallback");function P(A,M,F,z){_("aLength",A),_("bLength",M),x("isCommon",F),x("foundSubsequence",z);const j=r(0,A,0,M,F);if(j!==0&&z(j,0,0),A!==j||M!==j){const $=j,W=j,X=n($,A-1,W,M-1,F),te=A-X,ne=M-X,Z=j+X;A!==Z&&M!==Z&&g(0,$,te,W,ne,!1,[{foundSubsequence:z,isCommon:F}],[e],[e],{aCommonFollowing:e,aCommonPreceding:e,aEndPreceding:e,aStartFollowing:e,bCommonFollowing:e,bCommonPreceding:e,bEndPreceding:e,bStartFollowing:e,nChangeFollowing:e,nChangePreceding:e,nCommonFollowing:e,nCommonPreceding:e}),X!==0&&z(X,te,ne)}}return m(P,"diffSequence"),I0}m(yz,"requireBuild");var nie=yz(),_z=TP(nie);function bz(t,e){return t.replace(/\s+$/,r=>e(r))}m(bz,"formatTrailingSpaces");function f1(t,e,r,n,i,l){return t.length!==0?r(`${n} ${bz(t,i)}`):n!==" "?r(n):e&&l.length!==0?r(`${n} ${l}`):""}m(f1,"printDiffLine");function AP(t,e,{aColor:r,aIndicator:n,changeLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return f1(t,e,r,n,i,l)}m(AP,"printDeleteLine");function RP(t,e,{bColor:r,bIndicator:n,changeLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return f1(t,e,r,n,i,l)}m(RP,"printInsertLine");function IP(t,e,{commonColor:r,commonIndicator:n,commonLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return f1(t,e,r,n,i,l)}m(IP,"printCommonLine");function pS(t,e,r,n,{patchColor:i}){return i(`@@ -${t+1},${e-t} +${r+1},${n-r} @@`)}m(pS,"createPatchMark");function vz(t,e){const r=t.length,n=e.contextLines,i=n+n;let l=r,c=!1,s=0,p=0;for(;p!==r;){const X=p;for(;p!==r&&t[p][0]===ni;)p+=1;if(X!==p)if(X===0)p>n&&(l-=p-n,c=!0);else if(p===r){const te=p-X;te>n&&(l-=te-n,c=!0)}else{const te=p-X;te>i&&(l-=te-i,s+=1)}for(;p!==r&&t[p][0]!==ni;)p+=1}const g=s!==0||c;s!==0?l+=s+1:c&&(l+=1);const _=l-1,x=[];let P=0;g&&x.push("");let A=0,M=0,F=0,z=0;const j=m(X=>{const te=x.length;x.push(IP(X,te===0||te===_,e)),F+=1,z+=1},"pushCommonLine"),$=m(X=>{const te=x.length;x.push(AP(X,te===0||te===_,e)),F+=1},"pushDeleteLine"),W=m(X=>{const te=x.length;x.push(RP(X,te===0||te===_,e)),z+=1},"pushInsertLine");for(p=0;p!==r;){let X=p;for(;p!==r&&t[p][0]===ni;)p+=1;if(X!==p)if(X===0){p>n&&(X=p-n,A=X,M=X,F=A,z=M);for(let te=X;te!==p;te+=1)j(t[te][1])}else if(p===r){const te=p-X>n?X+n:p;for(let ne=X;ne!==te;ne+=1)j(t[ne][1])}else{const te=p-X;if(te>i){const ne=X+n;for(let U=X;U!==ne;U+=1)j(t[U][1]);x[P]=pS(A,F,M,z,e),P=x.length,x.push("");const Z=te-i;A=F+Z,M=z+Z,F=A,z=M;for(let U=p-n;U!==p;U+=1)j(t[U][1])}else for(let ne=X;ne!==p;ne+=1)j(t[ne][1])}for(;p!==r&&t[p][0]===po;)$(t[p][1]),p+=1;for(;p!==r&&t[p][0]===Yi;)W(t[p][1]),p+=1}return g&&(x[P]=pS(A,F,M,z,e)),x.join(`
`)}m(vz,"joinAlignedDiffsNoExpand");function xz(t,e){return t.map((r,n,i)=>{const l=r[1],c=n===0||n===i.length-1;switch(r[0]){case po:return AP(l,c,e);case Yi:return RP(l,c,e);default:return IP(l,c,e)}}).join(`
`)}m(xz,"joinAlignedDiffsExpand");var zE=m(t=>t,"noColor"),wz=5,iie=0;function Ez(){return{aAnnotation:"Expected",aColor:ii.green,aIndicator:"-",bAnnotation:"Received",bColor:ii.red,bIndicator:"+",changeColor:ii.inverse,changeLineTrailingSpaceColor:zE,commonColor:ii.dim,commonIndicator:" ",commonLineTrailingSpaceColor:zE,compareKeys:void 0,contextLines:wz,emptyFirstOrLastLinePlaceholder:"",expand:!1,includeChangeCounts:!1,omitAnnotationLines:!1,patchColor:ii.yellow,printBasicPrototype:!1,truncateThreshold:iie,truncateAnnotation:"... Diff result is truncated",truncateAnnotationColor:zE}}m(Ez,"getDefaultOptions");function Tz(t){return t&&typeof t=="function"?t:void 0}m(Tz,"getCompareKeys");function Sz(t){return typeof t=="number"&&Number.isSafeInteger(t)&&t>=0?t:wz}m(Sz,"getContextLines");function lu(t={}){return{...Ez(),...t,compareKeys:Tz(t.compareKeys),contextLines:Sz(t.contextLines)}}m(lu,"normalizeDiffOptions");function oh(t){return t.length===1&&t[0].length===0}m(oh,"isEmptyString");function Cz(t){let e=0,r=0;return t.forEach(n=>{switch(n[0]){case po:e+=1;break;case Yi:r+=1;break}}),{a:e,b:r}}m(Cz,"countChanges");function Pz({aAnnotation:t,aColor:e,aIndicator:r,bAnnotation:n,bColor:i,bIndicator:l,includeChangeCounts:c,omitAnnotationLines:s},p){if(s)return"";let g="",_="";if(c){const A=String(p.a),M=String(p.b),F=n.length-t.length,z=" ".repeat(Math.max(0,F)),j=" ".repeat(Math.max(0,-F)),$=M.length-A.length,W=" ".repeat(Math.max(0,$)),X=" ".repeat(Math.max(0,-$));g=`${z}  ${r} ${W}${A}`,_=`${j}  ${l} ${X}${M}`}const x=`${r} ${t}${g}`,P=`${l} ${n}${_}`;return`${e(x)}
${i(P)}

`}m(Pz,"printAnnotation");function m1(t,e,r){return Pz(r,Cz(t))+(r.expand?xz(t,r):vz(t,r))+(e?r.truncateAnnotationColor(`
${r.truncateAnnotation}`):"")}m(m1,"printDiffLines");function $y(t,e,r){const n=lu(r),[i,l]=MP(oh(t)?[]:t,oh(e)?[]:e,n);return m1(i,l,n)}m($y,"diffLinesUnified");function Az(t,e,r,n,i){if(oh(t)&&oh(r)&&(t=[],r=[]),oh(e)&&oh(n)&&(e=[],n=[]),t.length!==r.length||e.length!==n.length)return $y(t,e,i);const[l,c]=MP(r,n,i);let s=0,p=0;return l.forEach(g=>{switch(g[0]){case po:g[1]=t[s],s+=1;break;case Yi:g[1]=e[p],p+=1;break;default:g[1]=e[p],s+=1,p+=1}}),m1(l,c,lu(i))}m(Az,"diffLinesUnified2");function MP(t,e,r){const n=r?.truncateThreshold??!1,i=Math.max(Math.floor(r?.truncateThreshold??0),0),l=n?Math.min(t.length,i):t.length,c=n?Math.min(e.length,i):e.length,s=l!==t.length||c!==e.length,p=m((A,M)=>t[A]===e[M],"isCommon"),g=[];let _=0,x=0;for(_z(l,c,p,m((A,M,F)=>{for(;_!==M;_+=1)g.push(new Zn(po,t[_]));for(;x!==F;x+=1)g.push(new Zn(Yi,e[x]));for(;A!==0;A-=1,_+=1,x+=1)g.push(new Zn(ni,e[x]))},"foundSubsequence"));_!==l;_+=1)g.push(new Zn(po,t[_]));for(;x!==c;x+=1)g.push(new Zn(Yi,e[x]));return[g,s]}m(MP,"diffLinesRaw");function fS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(Array.isArray(t))return"array";if(typeof t=="boolean")return"boolean";if(typeof t=="function")return"function";if(typeof t=="number")return"number";if(typeof t=="string")return"string";if(typeof t=="bigint")return"bigint";if(typeof t=="object"){if(t!=null){if(t.constructor===RegExp)return"regexp";if(t.constructor===Map)return"map";if(t.constructor===Set)return"set";if(t.constructor===Date)return"date"}return"object"}else if(typeof t=="symbol")return"symbol";throw new Error(`value of unknown type: ${t}`)}m(fS,"getType");function mS(t){return t.includes(`\r
`)?`\r
`:`
`}m(mS,"getNewLineSymbol");function Rz(t,e,r){const n=r?.truncateThreshold??!1,i=Math.max(Math.floor(r?.truncateThreshold??0),0);let l=t.length,c=e.length;if(n){const A=t.includes(`
`),M=e.includes(`
`),F=mS(t),z=mS(e),j=A?`${t.split(F,i).join(F)}
`:t,$=M?`${e.split(z,i).join(z)}
`:e;l=j.length,c=$.length}const s=l!==t.length||c!==e.length,p=m((A,M)=>t[A]===e[M],"isCommon");let g=0,_=0;const x=[];return _z(l,c,p,m((A,M,F)=>{g!==M&&x.push(new Zn(po,t.slice(g,M))),_!==F&&x.push(new Zn(Yi,e.slice(_,F))),g=M+A,_=F+A,x.push(new Zn(ni,e.slice(F,_)))},"foundSubsequence")),g!==l&&x.push(new Zn(po,t.slice(g))),_!==c&&x.push(new Zn(Yi,e.slice(_))),[x,s]}m(Rz,"diffStrings");function Iz(t,e,r){return e.reduce((n,i)=>n+(i[0]===ni?i[1]:i[0]===t&&i[1].length!==0?r(i[1]):""),"")}m(Iz,"concatenateRelevantDiffs");var Mz=class{constructor(e,r){xr(this,"op");xr(this,"line");xr(this,"lines");xr(this,"changeColor");this.op=e,this.line=[],this.lines=[],this.changeColor=r}pushSubstring(e){this.pushDiff(new Zn(this.op,e))}pushLine(){this.lines.push(this.line.length!==1?new Zn(this.op,Iz(this.op,this.line,this.changeColor)):this.line[0][0]===this.op?this.line[0]:new Zn(this.op,this.line[0][1])),this.line.length=0}isLineEmpty(){return this.line.length===0}pushDiff(e){this.line.push(e)}align(e){const r=e[1];if(r.includes(`
`)){const n=r.split(`
`),i=n.length-1;n.forEach((l,c)=>{c<i?(this.pushSubstring(l),this.pushLine()):l.length!==0&&this.pushSubstring(l)})}else this.pushDiff(e)}moveLinesTo(e){this.isLineEmpty()||this.pushLine(),e.push(...this.lines),this.lines.length=0}};m(Mz,"ChangeBuffer");var AO=Mz,Oz=class{constructor(e,r){xr(this,"deleteBuffer");xr(this,"insertBuffer");xr(this,"lines");this.deleteBuffer=e,this.insertBuffer=r,this.lines=[]}pushDiffCommonLine(e){this.lines.push(e)}pushDiffChangeLines(e){const r=e[1].length===0;(!r||this.deleteBuffer.isLineEmpty())&&this.deleteBuffer.pushDiff(e),(!r||this.insertBuffer.isLineEmpty())&&this.insertBuffer.pushDiff(e)}flushChangeLines(){this.deleteBuffer.moveLinesTo(this.lines),this.insertBuffer.moveLinesTo(this.lines)}align(e){const r=e[0],n=e[1];if(n.includes(`
`)){const i=n.split(`
`),l=i.length-1;i.forEach((c,s)=>{if(s===0){const p=new Zn(r,c);this.deleteBuffer.isLineEmpty()&&this.insertBuffer.isLineEmpty()?(this.flushChangeLines(),this.pushDiffCommonLine(p)):(this.pushDiffChangeLines(p),this.flushChangeLines())}else s<l?this.pushDiffCommonLine(new Zn(r,c)):c.length!==0&&this.pushDiffChangeLines(new Zn(r,c))})}else this.pushDiffChangeLines(e)}getLines(){return this.flushChangeLines(),this.lines}};m(Oz,"CommonBuffer");var oie=Oz;function kz(t,e){const r=new AO(po,e),n=new AO(Yi,e),i=new oie(r,n);return t.forEach(l=>{switch(l[0]){case po:r.align(l);break;case Yi:n.align(l);break;default:i.align(l)}}),i.getLines()}m(kz,"getAlignedDiffs");function Lz(t,e){if(e){const r=t.length-1;return t.some((n,i)=>n[0]===ni&&(i!==r||n[1]!==`
`))}return t.some(r=>r[0]===ni)}m(Lz,"hasCommonDiff");function Dz(t,e,r){if(t!==e&&t.length!==0&&e.length!==0){const n=t.includes(`
`)||e.includes(`
`),[i,l]=OP(n?`${t}
`:t,n?`${e}
`:e,!0,r);if(Lz(i,n)){const c=lu(r),s=kz(i,c.changeColor);return m1(s,l,c)}}return $y(t.split(`
`),e.split(`
`),r)}m(Dz,"diffStringsUnified");function OP(t,e,r,n){const[i,l]=Rz(t,e,n);return r&&fz(i),[i,l]}m(OP,"diffStringsRaw");function Rb(t,e){const{commonColor:r}=lu(e);return r(t)}m(Rb,"getCommonMessage");var{AsymmetricMatcher:sie,DOMCollection:aie,DOMElement:lie,Immutable:cie,ReactElement:uie,ReactTestComponent:hie}=wP,Nz=[hie,uie,lie,aie,cie,sie,wP.Error],gS={maxDepth:20,plugins:Nz},Fz={callToJSON:!1,maxDepth:8,plugins:Nz};function Xh(t,e,r){if(Object.is(t,e))return"";const n=fS(t);let i=n,l=!1;if(n==="object"&&typeof t.asymmetricMatch=="function"){if(t.$$typeof!==Symbol.for("jest.asymmetricMatcher")||typeof t.getExpectedType!="function")return;i=t.getExpectedType(),l=i==="string"}if(i!==fS(e)){let c=function(W){return W.length<=z?W:`${W.slice(0,z)}...`};m(c,"truncate");const{aAnnotation:s,aColor:p,aIndicator:g,bAnnotation:_,bColor:x,bIndicator:P}=lu(r),A=Ib(Fz,r);let M=ta(t,A),F=ta(e,A);const z=1e5;M=c(M),F=c(F);const j=`${p(`${g} ${s}:`)} 
${M}`,$=`${x(`${P} ${_}:`)} 
${F}`;return`${j}

${$}`}if(!l)switch(n){case"string":return $y(t.split(`
`),e.split(`
`),r);case"boolean":case"number":return zz(t,e,r);case"map":return ib(yS(t),yS(e),r);case"set":return ib(_S(t),_S(e),r);default:return ib(t,e,r)}}m(Xh,"diff");function zz(t,e,r){const n=ta(t,gS),i=ta(e,gS);return n===i?"":$y(n.split(`
`),i.split(`
`),r)}m(zz,"comparePrimitive");function yS(t){return new Map(Array.from(t.entries()).sort())}m(yS,"sortMap");function _S(t){return new Set(Array.from(t.values()).sort())}m(_S,"sortSet");function ib(t,e,r){let n,i=!1;try{const c=Ib(gS,r);n=bS(t,e,c,r)}catch{i=!0}const l=Rb(gz,r);if(n===void 0||n===l){const c=Ib(Fz,r);n=bS(t,e,c,r),n!==l&&!i&&(n=`${Rb(rie,r)}

${n}`)}return n}m(ib,"compareObjects");function Ib(t,e){const{compareKeys:r,printBasicPrototype:n,maxDepth:i}=lu(e);return{...t,compareKeys:r,printBasicPrototype:n,maxDepth:i??t.maxDepth}}m(Ib,"getFormatOptions");function bS(t,e,r,n){const i={...r,indent:0},l=ta(t,i),c=ta(e,i);if(l===c)return Rb(gz,n);{const s=ta(t,r),p=ta(e,r);return Az(s.split(`
`),p.split(`
`),l.split(`
`),c.split(`
`),n)}}m(bS,"getObjectsDifference");var RO=2e4;function vS(t){return Kg(t)==="Object"&&typeof t.asymmetricMatch=="function"}m(vS,"isAsymmetricMatcher");function xS(t,e){const r=Kg(t),n=Kg(e);return r===n&&(r==="Object"||r==="Array")}m(xS,"isReplaceable");function kP(t,e,r){const{aAnnotation:n,bAnnotation:i}=lu(r);if(typeof e=="string"&&typeof t=="string"&&e.length>0&&t.length>0&&e.length<=RO&&t.length<=RO&&e!==t){if(e.includes(`
`)||t.includes(`
`))return Dz(e,t,r);const[_]=OP(e,t,!0),x=_.some(F=>F[0]===ni),P=jz(n,i),A=P(n)+qz(wS(_,po,x)),M=P(i)+Bz(wS(_,Yi,x));return`${A}
${M}`}const l=hS(e,{forceWritable:!0}),c=hS(t,{forceWritable:!0}),{replacedExpected:s,replacedActual:p}=LP(c,l);return Xh(s,p,r)}m(kP,"printDiffOrStringify");function LP(t,e,r=new WeakSet,n=new WeakSet){return t instanceof Error&&e instanceof Error&&typeof t.cause<"u"&&typeof e.cause>"u"?(delete t.cause,{replacedActual:t,replacedExpected:e}):xS(t,e)?r.has(t)||n.has(e)?{replacedActual:t,replacedExpected:e}:(r.add(t),n.add(e),SP(e).forEach(i=>{const l=e[i],c=t[i];if(vS(l))l.asymmetricMatch(c)&&(t[i]=l);else if(vS(c))c.asymmetricMatch(l)&&(e[i]=c);else if(xS(c,l)){const s=LP(c,l,r,n);t[i]=s.replacedActual,e[i]=s.replacedExpected}}),{replacedActual:t,replacedExpected:e}):{replacedActual:t,replacedExpected:e}}m(LP,"replaceAsymmetricMatcher");function jz(...t){const e=t.reduce((r,n)=>n.length>r?n.length:r,0);return r=>`${r}: ${" ".repeat(e-r.length)}`}m(jz,"getLabelPrinter");var die="";function DP(t){return t.replace(/\s+$/gm,e=>die.repeat(e.length))}m(DP,"replaceTrailingSpaces");function Bz(t){return ii.red(DP(ko(t)))}m(Bz,"printReceived");function qz(t){return ii.green(DP(ko(t)))}m(qz,"printExpected");function wS(t,e,r){return t.reduce((n,i)=>n+(i[0]===ni?i[1]:i[0]===e?r?ii.inverse(i[1]):i[1]:""),"")}m(wS,"getCommonAndChangedSubstrings");var pie="@@__IMMUTABLE_RECORD__@@",fie="@@__IMMUTABLE_ITERABLE__@@";function $z(t){return t&&(t[fie]||t[pie])}m($z,"isImmutable");var mie=Object.getPrototypeOf({});function ES(t){return t instanceof Error?`<unserializable>: ${t.message}`:typeof t=="string"?`<unserializable>: ${t}`:"<unserializable>"}m(ES,"getUnserializableMessage");function wl(t,e=new WeakMap){if(!t||typeof t=="string")return t;if(t instanceof Error&&"toJSON"in t&&typeof t.toJSON=="function"){const r=t.toJSON();return r&&r!==t&&typeof r=="object"&&(typeof t.message=="string"&&pg(()=>r.message??(r.message=t.message)),typeof t.stack=="string"&&pg(()=>r.stack??(r.stack=t.stack)),typeof t.name=="string"&&pg(()=>r.name??(r.name=t.name)),t.cause!=null&&pg(()=>r.cause??(r.cause=wl(t.cause,e)))),wl(r,e)}if(typeof t=="function")return`Function<${t.name||"anonymous"}>`;if(typeof t=="symbol")return t.toString();if(typeof t!="object")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return`<Buffer(${t.length}) ...>`;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return`<Uint8Array(${t.length}) ...>`;if($z(t))return wl(t.toJSON(),e);if(t instanceof Promise||t.constructor&&t.constructor.prototype==="AsyncFunction")return"Promise";if(typeof Element<"u"&&t instanceof Element)return t.tagName;if(typeof t.asymmetricMatch=="function")return`${t.toString()} ${az(t.sample)}`;if(typeof t.toJSON=="function")return wl(t.toJSON(),e);if(e.has(t))return e.get(t);if(Array.isArray(t)){const r=new Array(t.length);return e.set(t,r),t.forEach((n,i)=>{try{r[i]=wl(n,e)}catch(l){r[i]=ES(l)}}),r}else{const r=Object.create(null);e.set(t,r);let n=t;for(;n&&n!==mie;)Object.getOwnPropertyNames(n).forEach(i=>{if(!(i in r))try{r[i]=wl(t[i],e)}catch(l){delete r[i],r[i]=ES(l)}}),n=Object.getPrototypeOf(n);return r}}m(wl,"serializeValue");function pg(t){try{return t()}catch{}}m(pg,"safe");function Vz(t){return t.replace(/__(vite_ssr_import|vi_import)_\d+__\./g,"")}m(Vz,"normalizeErrorMessage");function g1(t,e,r=new WeakSet){if(!t||typeof t!="object")return{message:String(t)};const n=t;(n.showDiff||n.showDiff===void 0&&n.expected!==void 0&&n.actual!==void 0)&&(n.diff=kP(n.actual,n.expected,{...e,...n.diffOptions})),"expected"in n&&typeof n.expected!="string"&&(n.expected=ko(n.expected,10)),"actual"in n&&typeof n.actual!="string"&&(n.actual=ko(n.actual,10));try{typeof n.message=="string"&&(n.message=Vz(n.message))}catch{}try{!r.has(n)&&typeof n.cause=="object"&&(r.add(n),n.cause=g1(n.cause,e,r))}catch{}try{return wl(n)}catch(i){return wl(new Error(`Failed to fully serialize error: ${i?.message}
Inner error message: ${n?.message}`))}}m(g1,"processError");var hl={CALL:"storybook/instrumenter/call",SYNC:"storybook/instrumenter/sync",START:"storybook/instrumenter/start",BACK:"storybook/instrumenter/back",GOTO:"storybook/instrumenter/goto",NEXT:"storybook/instrumenter/next",END:"storybook/instrumenter/end"},jE=globalThis.__STORYBOOK_ADDONS_PREVIEW,gie=new Error("This function ran after the play function completed. Did you forget to `await` it?"),IO=m(t=>Object.prototype.toString.call(t)==="[object Object]","isObject"),yie=m(t=>Object.prototype.toString.call(t)==="[object Module]","isModule"),_ie=m(t=>{if(!IO(t)&&!yie(t))return!1;if(t.constructor===void 0)return!0;const e=t.constructor.prototype;return!!IO(e)},"isInstrumentable"),bie=m(t=>{try{return new t.constructor}catch{return{}}},"construct"),BE=m(()=>({renderPhase:"preparing",isDebugging:!1,isPlaying:!1,isLocked:!1,cursor:0,calls:[],shadowCalls:[],callRefsByResult:new Map,chainedCallIds:new Set,ancestors:[],playUntil:void 0,resolvers:{},syncTimeout:void 0}),"getInitialState"),MO=m((t,e=!1)=>{const r=(e?t.shadowCalls:t.calls).filter(i=>i.retain);if(!r.length)return;const n=new Map(Array.from(t.callRefsByResult.entries()).filter(([,i])=>i.retain));return{cursor:r.length,calls:r,callRefsByResult:n}},"getRetainedState"),Uz=class{constructor(){this.detached=!1,this.initialized=!1,this.state={},this.loadParentWindowState=m(()=>{try{this.state=$t.window?.parent?.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__||{}}catch{this.detached=!0}},"loadParentWindowState"),this.updateParentWindowState=m(()=>{try{$t.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state}catch{this.detached=!0}},"updateParentWindowState"),this.loadParentWindowState();const e=m(({storyId:p,renderPhase:g,isPlaying:_=!0,isDebugging:x=!1})=>{const P=this.getState(p);this.setState(p,{...BE(),...MO(P,x),renderPhase:g||P.renderPhase,shadowCalls:x?P.shadowCalls:[],chainedCallIds:x?P.chainedCallIds:new Set,playUntil:x?P.playUntil:void 0,isPlaying:_,isDebugging:x}),this.sync(p)},"resetState"),r=m(p=>({storyId:g,playUntil:_})=>{this.getState(g).isDebugging||this.setState(g,({calls:P})=>({calls:[],shadowCalls:P.map(A=>({...A,status:"waiting"})),isDebugging:!0}));const x=this.getLog(g);this.setState(g,({shadowCalls:P})=>{if(_||!x.length)return{playUntil:_};const A=P.findIndex(M=>M.id===x[0].callId);return{playUntil:P.slice(0,A).filter(M=>M.interceptable&&!M.ancestors?.length).slice(-1)[0]?.id}}),p.emit(Sb,{storyId:g,isDebugging:!0})},"start"),n=m(p=>({storyId:g})=>{const _=this.getLog(g).filter(P=>!P.ancestors?.length),x=_.reduceRight((P,A,M)=>P>=0||A.status==="waiting"?P:M,-1);r(p)({storyId:g,playUntil:_[x-1]?.callId})},"back"),i=m(p=>({storyId:g,callId:_})=>{const{calls:x,shadowCalls:P,resolvers:A}=this.getState(g),M=x.find(({id:z})=>z===_),F=P.find(({id:z})=>z===_);if(!M&&F&&Object.values(A).length>0){const z=this.getLog(g).find(j=>j.status==="waiting")?.callId;F.id!==z&&this.setState(g,{playUntil:F.id}),Object.values(A).forEach(j=>j())}else r(p)({storyId:g,playUntil:_})},"goto"),l=m(p=>({storyId:g})=>{const{resolvers:_}=this.getState(g);if(Object.values(_).length>0)Object.values(_).forEach(x=>x());else{const x=this.getLog(g).find(P=>P.status==="waiting")?.callId;x?r(p)({storyId:g,playUntil:x}):c({storyId:g})}},"next"),c=m(({storyId:p})=>{this.setState(p,{playUntil:void 0,isDebugging:!1}),Object.values(this.getState(p).resolvers).forEach(g=>g())},"end"),s=m(({storyId:p,newPhase:g})=>{const{isDebugging:_}=this.getState(p);if(g==="preparing"&&_)return e({storyId:p,renderPhase:g,isDebugging:_});if(g==="playing")return e({storyId:p,renderPhase:g,isDebugging:_});g==="played"?this.setState(p,{renderPhase:g,isLocked:!1,isPlaying:!1,isDebugging:!1}):g==="errored"?this.setState(p,{renderPhase:g,isLocked:!1,isPlaying:!1}):g==="aborted"?this.setState(p,{renderPhase:g,isLocked:!0,isPlaying:!1}):this.setState(p,{renderPhase:g}),this.sync(p)},"renderPhaseChanged");jE&&jE.ready().then(()=>{this.channel=jE.getChannel(),this.channel.on(Sb,e),this.channel.on(Ih,s),this.channel.on(jC,()=>{this.initialized?this.cleanup():this.initialized=!0}),this.channel.on(hl.START,r(this.channel)),this.channel.on(hl.BACK,n(this.channel)),this.channel.on(hl.GOTO,i(this.channel)),this.channel.on(hl.NEXT,l(this.channel)),this.channel.on(hl.END,c)})}getState(e){return this.state[e]||BE()}setState(e,r){if(e){const n=this.getState(e),i=typeof r=="function"?r(n):r;this.state={...this.state,[e]:{...n,...i}},this.updateParentWindowState()}}cleanup(){this.state=Object.entries(this.state).reduce((n,[i,l])=>{const c=MO(l);return c&&(n[i]=Object.assign(BE(),c)),n},{});const r={controlStates:{detached:this.detached,start:!1,back:!1,goto:!1,next:!1,end:!1},logItems:[]};this.channel?.emit(hl.SYNC,r),this.updateParentWindowState()}getLog(e){const{calls:r,shadowCalls:n}=this.getState(e),i=[...n];r.forEach((c,s)=>{i[s]=c});const l=new Set;return i.reduceRight((c,s)=>(s.args.forEach(p=>{p?.__callId__&&l.add(p.__callId__)}),s.path.forEach(p=>{p.__callId__&&l.add(p.__callId__)}),(s.interceptable||s.exception)&&!l.has(s.id)&&(c.unshift({callId:s.id,status:s.status,ancestors:s.ancestors}),l.add(s.id)),c),[])}instrument(e,r,n=0){if(!_ie(e))return e;const{mutate:i=!1,path:l=[]}=r,c=r.getKeys?r.getKeys(e,n):Object.keys(e);return n+=1,c.reduce((s,p)=>{const g=Gz(e,p);if(typeof g?.get=="function"){if(g.configurable){const x=m(()=>g?.get?.bind(e)?.(),"getter");Object.defineProperty(s,p,{get:m(()=>this.instrument(x(),{...r,path:l.concat(p)},n),"get")})}return s}const _=e[p];return typeof _!="function"?(s[p]=this.instrument(_,{...r,path:l.concat(p)},n),s):"__originalFn__"in _&&typeof _.__originalFn__=="function"?(s[p]=_,s):(s[p]=(...x)=>this.track(p,_,e,x,r),s[p].__originalFn__=_,Object.defineProperty(s[p],"name",{value:p,writable:!1}),Object.keys(_).length>0&&Object.assign(s[p],this.instrument({..._},{...r,path:l.concat(p)},n)),s)},i?e:bie(e))}track(e,r,n,i,l){const c=i?.[0]?.__storyId__||$t.__STORYBOOK_PREVIEW__?.selectionStore?.selection?.storyId,{cursor:s,ancestors:p}=this.getState(c);this.setState(c,{cursor:s+1});const g=`${p.slice(-1)[0]||c} [${s}] ${e}`,{path:_=[],intercept:x=!1,retain:P=!1}=l,A=typeof x=="function"?x(e,_):x,M={id:g,cursor:s,storyId:c,ancestors:p,path:_,method:e,args:i,interceptable:A,retain:P},z=(A&&!p.length?this.intercept:this.invoke).call(this,r,n,M,l);return this.instrument(z,{...l,mutate:!0,path:[{__callId__:M.id}]})}intercept(e,r,n,i){const{chainedCallIds:l,isDebugging:c,playUntil:s}=this.getState(n.storyId),p=l.has(n.id);return!c||p||s?(s===n.id&&this.setState(n.storyId,{playUntil:void 0}),this.invoke(e,r,n,i)):new Promise(g=>{this.setState(n.storyId,({resolvers:_})=>({isLocked:!1,resolvers:{..._,[n.id]:g}}))}).then(()=>(this.setState(n.storyId,g=>{const{[n.id]:_,...x}=g.resolvers;return{isLocked:!0,resolvers:x}}),this.invoke(e,r,n,i)))}invoke(e,r,n,i){const{callRefsByResult:l,renderPhase:c}=this.getState(n.storyId),s=25,p=m((x,P,A)=>{if(A.includes(x))return"[Circular]";if(A=[...A,x],P>s)return"...";if(l.has(x))return l.get(x);if(x instanceof Array)return x.map(M=>p(M,++P,A));if(x instanceof Date)return{__date__:{value:x.toISOString()}};if(x instanceof Error){const{name:M,message:F,stack:z}=x;return{__error__:{name:M,message:F,stack:z}}}if(x instanceof RegExp){const{flags:M,source:F}=x;return{__regexp__:{flags:M,source:F}}}if(x instanceof $t.window?.HTMLElement){const{prefix:M,localName:F,id:z,classList:j,innerText:$}=x,W=Array.from(j);return{__element__:{prefix:M,localName:F,id:z,classNames:W,innerText:$}}}return typeof x=="function"?{__function__:{name:"getMockName"in x?x.getMockName():x.name}}:typeof x=="symbol"?{__symbol__:{description:x.description}}:typeof x=="object"&&x?.constructor?.name&&x?.constructor?.name!=="Object"?{__class__:{name:x.constructor.name}}:Object.prototype.toString.call(x)==="[object Object]"?Object.fromEntries(Object.entries(x).map(([M,F])=>[M,p(F,++P,A)])):x},"serializeValues"),g={...n,args:n.args.map(x=>p(x,0,[]))};n.path.forEach(x=>{x?.__callId__&&this.setState(n.storyId,({chainedCallIds:P})=>({chainedCallIds:new Set(Array.from(P).concat(x.__callId__))}))});const _=m(x=>{if(x instanceof Error){const{name:P,message:A,stack:M,callId:F=n.id}=x,{showDiff:z=void 0,diff:j=void 0,actual:$=void 0,expected:W=void 0}=x.name==="AssertionError"?g1(x):x,X={name:P,message:A,stack:M,callId:F,showDiff:z,diff:j,actual:$,expected:W};if(this.update({...g,status:"error",exception:X}),this.setState(n.storyId,te=>({callRefsByResult:new Map([...Array.from(te.callRefsByResult.entries()),[x,{__callId__:n.id,retain:n.retain}]])})),n.ancestors?.length)throw Object.prototype.hasOwnProperty.call(x,"callId")||Object.defineProperty(x,"callId",{value:n.id}),x}throw x},"handleException");try{if(c==="played"&&!n.retain)throw gie;const P=(i.getArgs?i.getArgs(n,this.getState(n.storyId)):n.args).map(M=>typeof M!="function"||Hz(M)||Object.keys(M).length?M:(...F)=>{const{cursor:z,ancestors:j}=this.getState(n.storyId);this.setState(n.storyId,{cursor:0,ancestors:[...j,n.id]});const $=m(()=>this.setState(n.storyId,{cursor:z,ancestors:j}),"restore");let W=!1;try{const X=M(...F);return X instanceof Promise?(W=!0,X.finally($)):X}finally{W||$()}}),A=e.apply(r,P);return A&&["object","function","symbol"].includes(typeof A)&&this.setState(n.storyId,M=>({callRefsByResult:new Map([...Array.from(M.callRefsByResult.entries()),[A,{__callId__:n.id,retain:n.retain}]])})),this.update({...g,status:A instanceof Promise?"active":"done"}),A instanceof Promise?A.then(M=>(this.update({...g,status:"done"}),M),_):A}catch(x){return _(x)}}update(e){this.channel?.emit(hl.CALL,e),this.setState(e.storyId,({calls:r})=>{const n=r.concat(e).reduce((i,l)=>Object.assign(i,{[l.id]:l}),{});return{calls:Object.values(n).sort((i,l)=>i.id.localeCompare(l.id,void 0,{numeric:!0}))}}),this.sync(e.storyId)}sync(e){const r=m(()=>{const{isLocked:n,isPlaying:i}=this.getState(e),l=this.getLog(e),c=l.filter(({ancestors:x})=>!x.length).find(x=>x.status==="waiting")?.callId,s=l.some(x=>x.status==="active");if(this.detached||n||s||l.length===0){const P={controlStates:{detached:this.detached,start:!1,back:!1,goto:!1,next:!1,end:!1},logItems:l};this.channel?.emit(hl.SYNC,P);return}const p=l.some(x=>x.status==="done"||x.status==="error"),_={controlStates:{detached:this.detached,start:p,back:p,goto:!0,next:i,end:i},logItems:l,pausedAt:c};this.channel?.emit(hl.SYNC,_)},"synchronize");this.setState(e,({syncTimeout:n})=>(clearTimeout(n),{syncTimeout:setTimeout(r,0)}))}};m(Uz,"Instrumenter");var vie=Uz;function Pf(t,e={}){try{let r=!1,n=!1;return $t.window?.location?.search?.includes("instrument=true")?r=!0:$t.window?.location?.search?.includes("instrument=false")&&(n=!0),$t.window?.parent===$t.window&&!r||n?t:($t.window&&!$t.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__&&($t.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__=new vie),($t.window?.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__).instrument(t,e))}catch(r){return oi.warn(r),t}}m(Pf,"instrument");function Gz(t,e){let r=t;for(;r!=null;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}m(Gz,"getPropertyDescriptor");function Hz(t){if(typeof t!="function")return!1;const e=Object.getOwnPropertyDescriptor(t,"prototype");return e?!e.writable:!1}m(Hz,"isClass");var Jz=Object.defineProperty,rt=m((t,e)=>Jz(t,"name",{value:e,configurable:!0}),"__name"),NP=m((t,e)=>{for(var r in e)Jz(t,r,{get:e[r],enumerable:!0})},"__export"),Pa={};NP(Pa,{addChainableMethod:m(()=>A1,"addChainableMethod"),addLengthGuard:m(()=>If,"addLengthGuard"),addMethod:m(()=>S1,"addMethod"),addProperty:m(()=>T1,"addProperty"),checkError:m(()=>es,"checkError"),compareByInspect:m(()=>ey,"compareByInspect"),eql:m(()=>Zz,"eql"),expectTypes:m(()=>VP,"expectTypes"),flag:m(()=>Dr,"flag"),getActual:m(()=>Uy,"getActual"),getMessage:m(()=>b1,"getMessage"),getName:m(()=>Hy,"getName"),getOperator:m(()=>O1,"getOperator"),getOwnEnumerableProperties:m(()=>M1,"getOwnEnumerableProperties"),getOwnEnumerablePropertySymbols:m(()=>I1,"getOwnEnumerablePropertySymbols"),getPathInfo:m(()=>E1,"getPathInfo"),hasProperty:m(()=>Gy,"hasProperty"),inspect:m(()=>sn,"inspect"),isNaN:m(()=>Gb,"isNaN"),isNumeric:m(()=>Ni,"isNumeric"),isProxyEnabled:m(()=>Rf,"isProxyEnabled"),isRegExp:m(()=>ty,"isRegExp"),objDisplay:m(()=>Uc,"objDisplay"),overwriteChainableMethod:m(()=>R1,"overwriteChainableMethod"),overwriteMethod:m(()=>P1,"overwriteMethod"),overwriteProperty:m(()=>C1,"overwriteProperty"),proxify:m(()=>Qh,"proxify"),test:m(()=>y1,"test"),transferFlags:m(()=>Ds,"transferFlags"),type:m(()=>Tn,"type")});var es={};NP(es,{compatibleConstructor:m(()=>jP,"compatibleConstructor"),compatibleInstance:m(()=>zP,"compatibleInstance"),compatibleMessage:m(()=>BP,"compatibleMessage"),getConstructorName:m(()=>qP,"getConstructorName"),getMessage:m(()=>$P,"getMessage")});function Vy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}m(Vy,"isErrorInstance");rt(Vy,"isErrorInstance");function FP(t){return Object.prototype.toString.call(t)==="[object RegExp]"}m(FP,"isRegExp");rt(FP,"isRegExp");function zP(t,e){return Vy(e)&&t===e}m(zP,"compatibleInstance");rt(zP,"compatibleInstance");function jP(t,e){return Vy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}m(jP,"compatibleConstructor");rt(jP,"compatibleConstructor");function BP(t,e){const r=typeof t=="string"?t:t.message;return FP(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}m(BP,"compatibleMessage");rt(BP,"compatibleMessage");function qP(t){let e=t;return Vy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}m(qP,"getConstructorName");rt(qP,"getConstructorName");function $P(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}m($P,"getMessage");rt($P,"getMessage");function Dr(t,e,r){let n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}m(Dr,"flag");rt(Dr,"flag");function y1(t,e){let r=Dr(t,"negate"),n=e[0];return r?!n:n}m(y1,"test");rt(y1,"test");function Tn(t){if(typeof t>"u")return"undefined";if(t===null)return"null";const e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}m(Tn,"type");rt(Tn,"type");var xie="captureStackTrace"in Error,Xm,cn=(Xm=class extends Error{constructor(e="Unspecified AssertionError",r,n){super(e);xr(this,"message");this.message=e,xie&&Error.captureStackTrace(this,n||Xm);for(const i in r)i in this||(this[i]=r[i])}get name(){return"AssertionError"}get ok(){return!1}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}},m(Xm,"_AssertionError"),rt(Xm,"AssertionError"),Xm);function VP(t,e){let r=Dr(t,"message"),n=Dr(t,"ssfi");r=r?r+": ":"",t=Dr(t,"object"),e=e.map(function(c){return c.toLowerCase()}),e.sort();let i=e.map(function(c,s){let p=~["a","e","i","o","u"].indexOf(c.charAt(0))?"an":"a";return(e.length>1&&s===e.length-1?"or ":"")+p+" "+c}).join(", "),l=Tn(t).toLowerCase();if(!e.some(function(c){return l===c}))throw new cn(r+"object tested must be "+i+", but "+l+" given",void 0,n)}m(VP,"expectTypes");rt(VP,"expectTypes");function Uy(t,e){return e.length>4?e[4]:t._obj}m(Uy,"getActual");rt(Uy,"getActual");var OO={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},wie={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},Xp="";function UP(t,e){const r=OO[wie[e]]||OO[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}m(UP,"colorise");rt(UP,"colorise");function GP({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:l=1/0,breakLength:c=1/0,seen:s=[],truncate:p=1/0,stylize:g=String}={},_){const x={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(l),breakLength:Number(c),truncate:Number(p),seen:s,inspect:_,stylize:g};return x.colors&&(x.stylize=UP),x}m(GP,"normaliseOptions");rt(GP,"normaliseOptions");function HP(t){return t>="\uD800"&&t<="\uDBFF"}m(HP,"isHighSurrogate");rt(HP,"isHighSurrogate");function qa(t,e,r=Xp){t=String(t);const n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let l=e-n;return l>0&&HP(t[l-1])&&(l=l-1),`${t.slice(0,l)}${r}`}return t}m(qa,"truncate");rt(qa,"truncate");function ds(t,e,r,n=", "){r=r||e.inspect;const i=t.length;if(i===0)return"";const l=e.truncate;let c="",s="",p="";for(let g=0;g<i;g+=1){const _=g+1===t.length,x=g+2===t.length;p=`${Xp}(${t.length-g})`;const P=t[g];e.truncate=l-c.length-(_?0:n.length);const A=s||r(P,e)+(_?"":n),M=c.length+A.length,F=M+p.length;if(_&&M>l&&c.length+p.length<=l||!_&&!x&&F>l||(s=_?"":r(t[g+1],e)+(x?"":n),!_&&x&&F>l&&M+s.length>l))break;if(c+=A,!_&&!x&&M+s.length>=l){p=`${Xp}(${t.length-g-1})`;break}p=""}return`${c}${p}`}m(ds,"inspectList");rt(ds,"inspectList");function JP(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}m(JP,"quoteComplexKey");rt(JP,"quoteComplexKey");function Mh([t,e],r){return r.truncate-=2,typeof t=="string"?t=JP(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}m(Mh,"inspectProperty");rt(Mh,"inspectProperty");function WP(t,e){const r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;const n=ds(t,e);e.truncate-=n.length;let i="";return r.length&&(i=ds(r.map(l=>[l,t[l]]),e,Mh)),`[ ${n}${i?`, ${i}`:""} ]`}m(WP,"inspectArray");rt(WP,"inspectArray");var Eie=rt(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function Ws(t,e){const r=Eie(t);e.truncate-=r.length+4;const n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let c=0;c<t.length;c++){const s=`${e.stylize(qa(t[c],e.truncate),"number")}${c===t.length-1?"":", "}`;if(e.truncate-=s.length,t[c]!==t.length&&e.truncate<=3){i+=`${Xp}(${t.length-t[c]+1})`;break}i+=s}let l="";return n.length&&(l=ds(n.map(c=>[c,t[c]]),e,Mh)),`${r}[ ${i}${l?`, ${l}`:""} ]`}m(Ws,"inspectTypedArray");rt(Ws,"inspectTypedArray");function ZP(t,e){const r=t.toJSON();if(r===null)return"Invalid Date";const n=r.split("T"),i=n[0];return e.stylize(`${i}T${qa(n[1],e.truncate-i.length-1)}`,"date")}m(ZP,"inspectDate");rt(ZP,"inspectDate");function Mb(t,e){const r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${qa(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}m(Mb,"inspectFunction");rt(Mb,"inspectFunction");function KP([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}m(KP,"inspectMapEntry");rt(KP,"inspectMapEntry");function YP(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}m(YP,"mapToEntries");rt(YP,"mapToEntries");function XP(t,e){return t.size===0?"Map{}":(e.truncate-=7,`Map{ ${ds(YP(t),e,KP)} }`)}m(XP,"inspectMap");rt(XP,"inspectMap");var Tie=Number.isNaN||(t=>t!==t);function Ob(t,e){return Tie(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(qa(String(t),e.truncate),"number")}m(Ob,"inspectNumber");rt(Ob,"inspectNumber");function kb(t,e){let r=qa(t.toString(),e.truncate-1);return r!==Xp&&(r+="n"),e.stylize(r,"bigint")}m(kb,"inspectBigInt");rt(kb,"inspectBigInt");function QP(t,e){const r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${qa(i,n)}/${r}`,"regexp")}m(QP,"inspectRegExp");rt(QP,"inspectRegExp");function eA(t){const e=[];return t.forEach(r=>{e.push(r)}),e}m(eA,"arrayFromSet");rt(eA,"arrayFromSet");function tA(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${ds(eA(t),e)} }`)}m(tA,"inspectSet");rt(tA,"inspectSet");var kO=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),Sie={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},Cie=16;function rA(t){return Sie[t]||`\\u${`0000${t.charCodeAt(0).toString(Cie)}`.slice(-4)}`}m(rA,"escape");rt(rA,"escape");function Lb(t,e){return kO.test(t)&&(t=t.replace(kO,rA)),e.stylize(`'${qa(t,e.truncate-2)}'`,"string")}m(Lb,"inspectString");rt(Lb,"inspectString");function Db(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}m(Db,"inspectSymbol");rt(Db,"inspectSymbol");var Pie=rt(()=>"Promise{}","getPromiseValue"),Aie=Pie;function Dp(t,e){const r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);const i=ds(r.map(s=>[s,t[s]]),e,Mh),l=ds(n.map(s=>[s,t[s]]),e,Mh);e.seen.pop();let c="";return i&&l&&(c=", "),`{ ${i}${c}${l} }`}m(Dp,"inspectObject");rt(Dp,"inspectObject");var qE=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function nA(t,e){let r="";return qE&&qE in t&&(r=t[qE]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Dp(t,e)}`}m(nA,"inspectClass");rt(nA,"inspectClass");function iA(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${ds(t,e)} ]`)}m(iA,"inspectArguments");rt(iA,"inspectArguments");var Rie=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function oA(t,e){const r=Object.getOwnPropertyNames(t).filter(c=>Rie.indexOf(c)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=qa(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);const l=ds(r.map(c=>[c,t[c]]),e,Mh);return`${n}${i}${l?` { ${l} }`:""}`}m(oA,"inspectObject2");rt(oA,"inspectObject");function sA([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}m(sA,"inspectAttribute");rt(sA,"inspectAttribute");function Yg(t,e){return ds(t,e,aA,`
`)}m(Yg,"inspectNodeCollection");rt(Yg,"inspectNodeCollection");function aA(t,e){switch(t.nodeType){case 1:return _1(t,e);case 3:return e.inspect(t.data,e);default:return e.inspect(t,e)}}m(aA,"inspectNode");rt(aA,"inspectNode");function _1(t,e){const r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),l=e.stylize(">","special"),c=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let s="";r.length>0&&(s+=" ",s+=ds(r.map(_=>[_,t.getAttribute(_)]),e,sA," ")),e.truncate-=s.length;const p=e.truncate;let g=Yg(t.children,e);return g&&g.length>p&&(g=`${Xp}(${t.children.length})`),`${i}${s}${l}${g}${c}`}m(_1,"inspectHTML");rt(_1,"inspectHTML");var Iie=typeof Symbol=="function"&&typeof Symbol.for=="function",$E=Iie?Symbol.for("chai/inspect"):"@@chai/inspect",VE=Symbol.for("nodejs.util.inspect.custom"),LO=new WeakMap,DO={},NO={undefined:rt((t,e)=>e.stylize("undefined","undefined"),"undefined"),null:rt((t,e)=>e.stylize("null","null"),"null"),boolean:rt((t,e)=>e.stylize(String(t),"boolean"),"boolean"),Boolean:rt((t,e)=>e.stylize(String(t),"boolean"),"Boolean"),number:Ob,Number:Ob,bigint:kb,BigInt:kb,string:Lb,String:Lb,function:Mb,Function:Mb,symbol:Db,Symbol:Db,Array:WP,Date:ZP,Map:XP,Set:tA,RegExp:QP,Promise:Aie,WeakSet:rt((t,e)=>e.stylize("WeakSet{}","special"),"WeakSet"),WeakMap:rt((t,e)=>e.stylize("WeakMap{}","special"),"WeakMap"),Arguments:iA,Int8Array:Ws,Uint8Array:Ws,Uint8ClampedArray:Ws,Int16Array:Ws,Uint16Array:Ws,Int32Array:Ws,Uint32Array:Ws,Float32Array:Ws,Float64Array:Ws,Generator:rt(()=>"","Generator"),DataView:rt(()=>"","DataView"),ArrayBuffer:rt(()=>"","ArrayBuffer"),Error:oA,HTMLCollection:Yg,NodeList:Yg},Mie=rt((t,e,r)=>$E in t&&typeof t[$E]=="function"?t[$E](e):VE in t&&typeof t[VE]=="function"?t[VE](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&LO.has(t.constructor)?LO.get(t.constructor)(t,e):DO[r]?DO[r](t,e):"","inspectCustom"),Oie=Object.prototype.toString;function Xg(t,e={}){const r=GP(e,Xg),{customInspect:n}=r;let i=t===null?"null":typeof t;if(i==="object"&&(i=Oie.call(t).slice(8,-1)),i in NO)return NO[i](t,r);if(n&&t){const c=Mie(t,r,i);if(c)return typeof c=="string"?c:Xg(c,r)}const l=t?Object.getPrototypeOf(t):!1;return l===Object.prototype||l===null?Dp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?_1(t,r):"constructor"in t?t.constructor!==Object?nA(t,r):Dp(t,r):t===Object(t)?Dp(t,r):r.stylize(String(t),i)}m(Xg,"inspect");rt(Xg,"inspect");var xo={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function sn(t,e,r,n){let i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:xo.truncateThreshold?xo.truncateThreshold:1/0};return Xg(t,i)}m(sn,"inspect2");rt(sn,"inspect");function Uc(t){let e=sn(t),r=Object.prototype.toString.call(t);if(xo.truncateThreshold&&e.length>=xo.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){let n=Object.keys(t);return"{ Object ("+(n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", "))+") }"}else return e}else return e}m(Uc,"objDisplay");rt(Uc,"objDisplay");function b1(t,e){let r=Dr(t,"negate"),n=Dr(t,"object"),i=e[3],l=Uy(t,e),c=r?e[2]:e[1],s=Dr(t,"message");return typeof c=="function"&&(c=c()),c=c||"",c=c.replace(/#\{this\}/g,function(){return Uc(n)}).replace(/#\{act\}/g,function(){return Uc(l)}).replace(/#\{exp\}/g,function(){return Uc(i)}),s?s+": "+c:c}m(b1,"getMessage2");rt(b1,"getMessage");function Ds(t,e,r){let n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(let i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}m(Ds,"transferFlags");rt(Ds,"transferFlags");function Nb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";const e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}m(Nb,"type2");rt(Nb,"type");function v1(){this._key="chai/deep-eql__"+Math.random()+Date.now()}m(v1,"FakeMap");rt(v1,"FakeMap");v1.prototype={get:rt(m(function(e){return e[this._key]},"get"),"get"),set:rt(m(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set"),"set")};var Wz=typeof WeakMap=="function"?WeakMap:v1;function Fb(t,e,r){if(!r||tu(t)||tu(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}m(Fb,"memoizeCompare");rt(Fb,"memoizeCompare");function Rp(t,e,r,n){if(!(!r||tu(t)||tu(e))){var i=r.get(t);i?i.set(e,n):(i=new Wz,i.set(e,n),r.set(t,i))}}m(Rp,"memoizeSet");rt(Rp,"memoizeSet");var Zz=Af;function Af(t,e,r){if(r&&r.comparator)return zb(t,e,r);var n=x1(t,e);return n!==null?n:zb(t,e,r)}m(Af,"deepEqual");rt(Af,"deepEqual");function x1(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:tu(t)||tu(e)?!1:null}m(x1,"simpleEqual");rt(x1,"simpleEqual");function zb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new Wz;var n=r&&r.comparator,i=Fb(t,e,r.memoize);if(i!==null)return i;var l=Fb(e,t,r.memoize);if(l!==null)return l;if(n){var c=n(t,e);if(c===!1||c===!0)return Rp(t,e,r.memoize,c),c;var s=x1(t,e);if(s!==null)return s}var p=Nb(t);if(p!==Nb(e))return Rp(t,e,r.memoize,!1),!1;Rp(t,e,r.memoize,!0);var g=lA(t,e,p,r);return Rp(t,e,r.memoize,g),g}m(zb,"extensiveDeepEqual");rt(zb,"extensiveDeepEqual");function lA(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Af(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return w1(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Pl(t,e,n);case"RegExp":return cA(t,e);case"Generator":return uA(t,e,n);case"DataView":return Pl(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Pl(new Uint8Array(t),new Uint8Array(e),n);case"Set":return jb(t,e,n);case"Map":return jb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return dA(t,e,n)}}m(lA,"extensiveDeepEqualByType");rt(lA,"extensiveDeepEqualByType");function cA(t,e){return t.toString()===e.toString()}m(cA,"regexpEqual");rt(cA,"regexpEqual");function jb(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(rt(m(function(c,s){n.push([c,s])},"gatherEntries"),"gatherEntries")),e.forEach(rt(m(function(c,s){i.push([c,s])},"gatherEntries"),"gatherEntries")),Pl(n.sort(),i.sort(),r)}m(jb,"entriesEqual");rt(jb,"entriesEqual");function Pl(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Af(t[i],e[i],r)===!1)return!1;return!0}m(Pl,"iterableEqual");rt(Pl,"iterableEqual");function uA(t,e,r){return Pl(Qg(t),Qg(e),r)}m(uA,"generatorEqual");rt(uA,"generatorEqual");function hA(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}m(hA,"hasIteratorFunction");rt(hA,"hasIteratorFunction");function Bb(t){if(hA(t))try{return Qg(t[Symbol.iterator]())}catch{return[]}return[]}m(Bb,"getIteratorEntries");rt(Bb,"getIteratorEntries");function Qg(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}m(Qg,"getGeneratorEntries");rt(Qg,"getGeneratorEntries");function qb(t){var e=[];for(var r in t)e.push(r);return e}m(qb,"getEnumerableKeys");rt(qb,"getEnumerableKeys");function $b(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}m($b,"getEnumerableSymbols");rt($b,"getEnumerableSymbols");function w1(t,e,r,n){var i=r.length;if(i===0)return!0;for(var l=0;l<i;l+=1)if(Af(t[r[l]],e[r[l]],n)===!1)return!1;return!0}m(w1,"keysEqual");rt(w1,"keysEqual");function dA(t,e,r){var n=qb(t),i=qb(e),l=$b(t),c=$b(e);if(n=n.concat(l),i=i.concat(c),n.length&&n.length===i.length)return Pl(Vb(n).sort(),Vb(i).sort())===!1?!1:w1(t,e,n,r);var s=Bb(t),p=Bb(e);return s.length&&s.length===p.length?(s.sort(),p.sort(),Pl(s,p,r)):n.length===0&&s.length===0&&i.length===0&&p.length===0}m(dA,"objectEqual");rt(dA,"objectEqual");function tu(t){return t===null||typeof t!="object"}m(tu,"isPrimitive");rt(tu,"isPrimitive");function Vb(t){return t.map(rt(m(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"),"mapSymbol"))}m(Vb,"mapSymbols");rt(Vb,"mapSymbols");function Gy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}m(Gy,"hasProperty");rt(Gy,"hasProperty");function pA(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};const l=/^\[(\d+)\]$/.exec(n);let c=null;return l?c={i:parseFloat(l[1])}:c={p:n.replace(/\\([.[\]])/g,"$1")},c})}m(pA,"parsePath");rt(pA,"parsePath");function Ub(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let l=0;l<r;l++){const c=e[l];n&&(typeof c.p>"u"?n=n[c.i]:n=n[c.p],l===r-1&&(i=n))}return i}m(Ub,"internalGetPathValue");rt(Ub,"internalGetPathValue");function E1(t,e){const r=pA(e),n=r[r.length-1],i={parent:r.length>1?Ub(t,r,r.length-1):t,name:n.p||n.i,value:Ub(t,r)};return i.exists=Gy(i.parent,i.name),i}m(E1,"getPathInfo");rt(E1,"getPathInfo");var Qm,Me=(Qm=class{constructor(t,e,r,n){xr(this,"__flags",{});return Dr(this,"ssfi",r||Qm),Dr(this,"lockSsfi",n),Dr(this,"object",t),Dr(this,"message",e),Dr(this,"eql",xo.deepEqual||Zz),Qh(this)}static get includeStack(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),xo.includeStack}static set includeStack(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),xo.includeStack=t}static get showDiff(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),xo.showDiff}static set showDiff(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),xo.showDiff=t}static addProperty(t,e){T1(this.prototype,t,e)}static addMethod(t,e){S1(this.prototype,t,e)}static addChainableMethod(t,e,r){A1(this.prototype,t,e,r)}static overwriteProperty(t,e){C1(this.prototype,t,e)}static overwriteMethod(t,e){P1(this.prototype,t,e)}static overwriteChainableMethod(t,e,r){R1(this.prototype,t,e,r)}assert(t,e,r,n,i,l){const c=y1(this,arguments);if(l!==!1&&(l=!0),n===void 0&&i===void 0&&(l=!1),xo.showDiff!==!0&&(l=!1),!c){e=b1(this,arguments);const p={actual:Uy(this,arguments),expected:n,showDiff:l},g=O1(this,arguments);throw g&&(p.operator=g),new cn(e,p,xo.includeStack?this.assert:Dr(this,"ssfi"))}}get _obj(){return Dr(this,"object")}set _obj(t){Dr(this,"object",t)}},m(Qm,"_Assertion"),rt(Qm,"Assertion"),Qm);function Rf(){return xo.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}m(Rf,"isProxyEnabled");rt(Rf,"isProxyEnabled");function T1(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:rt(m(function n(){!Rf()&&!Dr(this,"lockSsfi")&&Dr(this,"ssfi",n);let i=r.call(this);if(i!==void 0)return i;let l=new Me;return Ds(this,l),l},"propertyGetter"),"propertyGetter"),configurable:!0})}m(T1,"addProperty");rt(T1,"addProperty");var kie=Object.getOwnPropertyDescriptor(function(){},"length");function If(t,e,r){return kie.configurable&&Object.defineProperty(t,"length",{get:rt(function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')},"get")}),t}m(If,"addLengthGuard");rt(If,"addLengthGuard");function fA(t){let e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}m(r,"addProperty2"),rt(r,"addProperty");let n=Object.getPrototypeOf(t);for(;n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}m(fA,"getProperties");rt(fA,"getProperties");var FO=["__flags","__methods","_obj","assert"];function Qh(t,e){return Rf()?new Proxy(t,{get:rt(m(function r(n,i){if(typeof i=="string"&&xo.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');let l=null,c=4;throw fA(n).forEach(function(s){if(!Object.prototype.hasOwnProperty(s)&&FO.indexOf(s)===-1){let p=mA(i,s,c);p<c&&(l=s,c=p)}}),Error(l!==null?"Invalid Chai property: "+i+'. Did you mean "'+l+'"?':"Invalid Chai property: "+i)}return FO.indexOf(i)===-1&&!Dr(n,"lockSsfi")&&Dr(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter"),"proxyGetter")}):t}m(Qh,"proxify");rt(Qh,"proxify");function mA(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;let n=[];for(let i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(let i=0;i<e.length;i++)n[0][i]=i;for(let i=1;i<=t.length;i++){let l=t.charCodeAt(i-1);for(let c=1;c<=e.length;c++){if(Math.abs(i-c)>=r){n[i][c]=r;continue}n[i][c]=Math.min(n[i-1][c]+1,n[i][c-1]+1,n[i-1][c-1]+(l===e.charCodeAt(c-1)?0:1))}}return n[t.length][e.length]}m(mA,"stringDistanceCapped");rt(mA,"stringDistanceCapped");function S1(t,e,r){let n=rt(function(){Dr(this,"lockSsfi")||Dr(this,"ssfi",n);let i=r.apply(this,arguments);if(i!==void 0)return i;let l=new Me;return Ds(this,l),l},"methodWrapper");If(n,e,!1),t[e]=Qh(n,e)}m(S1,"addMethod");rt(S1,"addMethod");function C1(t,e,r){let n=Object.getOwnPropertyDescriptor(t,e),i=rt(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:rt(m(function l(){!Rf()&&!Dr(this,"lockSsfi")&&Dr(this,"ssfi",l);let c=Dr(this,"lockSsfi");Dr(this,"lockSsfi",!0);let s=r(i).call(this);if(Dr(this,"lockSsfi",c),s!==void 0)return s;let p=new Me;return Ds(this,p),p},"overwritingPropertyGetter"),"overwritingPropertyGetter"),configurable:!0})}m(C1,"overwriteProperty");rt(C1,"overwriteProperty");function P1(t,e,r){let n=t[e],i=rt(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);let l=rt(function(){Dr(this,"lockSsfi")||Dr(this,"ssfi",l);let c=Dr(this,"lockSsfi");Dr(this,"lockSsfi",!0);let s=r(i).apply(this,arguments);if(Dr(this,"lockSsfi",c),s!==void 0)return s;let p=new Me;return Ds(this,p),p},"overwritingMethodWrapper");If(l,e,!1),t[e]=Qh(l,e)}m(P1,"overwriteMethod");rt(P1,"overwriteMethod");var Lie=typeof Object.setPrototypeOf=="function",zO=rt(function(){},"testFn"),Die=Object.getOwnPropertyNames(zO).filter(function(t){let e=Object.getOwnPropertyDescriptor(zO,t);return typeof e!="object"?!0:!e.configurable}),Nie=Function.prototype.call,Fie=Function.prototype.apply;function A1(t,e,r,n){typeof n!="function"&&(n=rt(function(){},"chainingBehavior"));let i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:rt(m(function(){i.chainingBehavior.call(this);let c=rt(function(){Dr(this,"lockSsfi")||Dr(this,"ssfi",c);let s=i.method.apply(this,arguments);if(s!==void 0)return s;let p=new Me;return Ds(this,p),p},"chainableMethodWrapper");if(If(c,e,!0),Lie){let s=Object.create(this);s.call=Nie,s.apply=Fie,Object.setPrototypeOf(c,s)}else Object.getOwnPropertyNames(t).forEach(function(p){if(Die.indexOf(p)!==-1)return;let g=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(c,p,g)});return Ds(this,c),Qh(c)},"chainableMethodGetter"),"chainableMethodGetter"),configurable:!0})}m(A1,"addChainableMethod");rt(A1,"addChainableMethod");function R1(t,e,r,n){let i=t.__methods[e],l=i.chainingBehavior;i.chainingBehavior=rt(m(function(){let p=n(l).call(this);if(p!==void 0)return p;let g=new Me;return Ds(this,g),g},"overwritingChainableMethodGetter"),"overwritingChainableMethodGetter");let c=i.method;i.method=rt(m(function(){let p=r(c).apply(this,arguments);if(p!==void 0)return p;let g=new Me;return Ds(this,g),g},"overwritingChainableMethodWrapper"),"overwritingChainableMethodWrapper")}m(R1,"overwriteChainableMethod");rt(R1,"overwriteChainableMethod");function ey(t,e){return sn(t)<sn(e)?-1:1}m(ey,"compareByInspect");rt(ey,"compareByInspect");function I1(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}m(I1,"getOwnEnumerablePropertySymbols");rt(I1,"getOwnEnumerablePropertySymbols");function M1(t){return Object.keys(t).concat(I1(t))}m(M1,"getOwnEnumerableProperties");rt(M1,"getOwnEnumerableProperties");var Gb=Number.isNaN;function gA(t){let e=Tn(t);return["Array","Object","Function"].indexOf(e)!==-1}m(gA,"isObjectType");rt(gA,"isObjectType");function O1(t,e){let r=Dr(t,"operator"),n=Dr(t,"negate"),i=e[3],l=n?e[2]:e[1];if(r)return r;if(typeof l=="function"&&(l=l()),l=l||"",!l||/\shave\s/.test(l))return;let c=gA(i);return/\snot\s/.test(l)?c?"notDeepStrictEqual":"notStrictEqual":c?"deepStrictEqual":"strictEqual"}m(O1,"getOperator");rt(O1,"getOperator");function Hy(t){return t.name}m(Hy,"getName");rt(Hy,"getName");function ty(t){return Object.prototype.toString.call(t)==="[object RegExp]"}m(ty,"isRegExp2");rt(ty,"isRegExp");function Ni(t){return["Number","BigInt"].includes(Tn(t))}m(Ni,"isNumeric");rt(Ni,"isNumeric");var{flag:We}=Pa;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){Me.addProperty(t)});Me.addProperty("not",function(){We(this,"negate",!0)});Me.addProperty("deep",function(){We(this,"deep",!0)});Me.addProperty("nested",function(){We(this,"nested",!0)});Me.addProperty("own",function(){We(this,"own",!0)});Me.addProperty("ordered",function(){We(this,"ordered",!0)});Me.addProperty("any",function(){We(this,"any",!0),We(this,"all",!1)});Me.addProperty("all",function(){We(this,"all",!0),We(this,"any",!1)});var jO={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function k1(t,e){e&&We(this,"message",e),t=t.toLowerCase();let r=We(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";const i=Tn(r).toLowerCase();jO.function.includes(t)?this.assert(jO[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}m(k1,"an");rt(k1,"an");Me.addChainableMethod("an",k1);Me.addChainableMethod("a",k1);function yA(t,e){return Gb(t)&&Gb(e)||t===e}m(yA,"SameValueZero");rt(yA,"SameValueZero");function Mf(){We(this,"contains",!0)}m(Mf,"includeChainingBehavior");rt(Mf,"includeChainingBehavior");function Of(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=Tn(r).toLowerCase(),i=We(this,"message"),l=We(this,"negate"),c=We(this,"ssfi"),s=We(this,"deep"),p=s?"deep ":"",g=s?We(this,"eql"):yA;i=i?i+": ":"";let _=!1;switch(n){case"string":_=r.indexOf(t)!==-1;break;case"weakset":if(s)throw new cn(i+"unable to use .deep.include with WeakSet",void 0,c);_=r.has(t);break;case"map":r.forEach(function(x){_=_||g(x,t)});break;case"set":s?r.forEach(function(x){_=_||g(x,t)}):_=r.has(t);break;case"array":s?_=r.some(function(x){return g(x,t)}):_=r.indexOf(t)!==-1;break;default:{if(t!==Object(t))throw new cn(i+"the given combination of arguments ("+n+" and "+Tn(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Tn(t).toLowerCase(),void 0,c);let x=Object.keys(t),P=null,A=0;if(x.forEach(function(M){let F=new Me(r);if(Ds(this,F,!0),We(F,"lockSsfi",!0),!l||x.length===1){F.property(M,t[M]);return}try{F.property(M,t[M])}catch(z){if(!es.compatibleConstructor(z,cn))throw z;P===null&&(P=z),A++}},this),l&&x.length>1&&A===x.length)throw P;return}}this.assert(_,"expected #{this} to "+p+"include "+sn(t),"expected #{this} to not "+p+"include "+sn(t))}m(Of,"include");rt(Of,"include");Me.addChainableMethod("include",Of,Mf);Me.addChainableMethod("contain",Of,Mf);Me.addChainableMethod("contains",Of,Mf);Me.addChainableMethod("includes",Of,Mf);Me.addProperty("ok",function(){this.assert(We(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});Me.addProperty("true",function(){this.assert(We(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!We(this,"negate"))});Me.addProperty("numeric",function(){const t=We(this,"object");this.assert(["Number","BigInt"].includes(Tn(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!We(this,"negate"))});Me.addProperty("callable",function(){const t=We(this,"object"),e=We(this,"ssfi"),r=We(this,"message"),n=r?`${r}: `:"",i=We(this,"negate"),l=i?`${n}expected ${sn(t)} not to be a callable function`:`${n}expected ${sn(t)} to be a callable function`,c=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Tn(t));if(c&&i||!c&&!i)throw new cn(l,void 0,e)});Me.addProperty("false",function(){this.assert(We(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!We(this,"negate"))});Me.addProperty("null",function(){this.assert(We(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});Me.addProperty("undefined",function(){this.assert(We(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});Me.addProperty("NaN",function(){this.assert(Gb(We(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function L1(){let t=We(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}m(L1,"assertExist");rt(L1,"assertExist");Me.addProperty("exist",L1);Me.addProperty("exists",L1);Me.addProperty("empty",function(){let t=We(this,"object"),e=We(this,"ssfi"),r=We(this,"message"),n;switch(r=r?r+": ":"",Tn(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new cn(r+".empty was passed a weak collection",void 0,e);case"function":{const i=r+".empty was passed a function "+Hy(t);throw new cn(i.trim(),void 0,e)}default:if(t!==Object(t))throw new cn(r+".empty was passed non-string primitive "+sn(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function D1(){let t=We(this,"object"),e=Tn(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}m(D1,"checkArguments");rt(D1,"checkArguments");Me.addProperty("arguments",D1);Me.addProperty("Arguments",D1);function Jy(t,e){e&&We(this,"message",e);let r=We(this,"object");if(We(this,"deep")){let n=We(this,"lockSsfi");We(this,"lockSsfi",!0),this.eql(t),We(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}m(Jy,"assertEqual");rt(Jy,"assertEqual");Me.addMethod("equal",Jy);Me.addMethod("equals",Jy);Me.addMethod("eq",Jy);function N1(t,e){e&&We(this,"message",e);let r=We(this,"eql");this.assert(r(t,We(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}m(N1,"assertEql");rt(N1,"assertEql");Me.addMethod("eql",N1);Me.addMethod("eqls",N1);function Wy(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"doLength"),i=We(this,"message"),l=i?i+": ":"",c=We(this,"ssfi"),s=Tn(r).toLowerCase(),p=Tn(t).toLowerCase();if(n&&s!=="map"&&s!=="set"&&new Me(r,i,c,!0).to.have.property("length"),!n&&s==="date"&&p!=="date")throw new cn(l+"the argument to above must be a date",void 0,c);if(!Ni(t)&&(n||Ni(r)))throw new cn(l+"the argument to above must be a number",void 0,c);if(!n&&s!=="date"&&!Ni(r)){let g=s==="string"?"'"+r+"'":r;throw new cn(l+"expected "+g+" to be a number or a date",void 0,c)}if(n){let g="length",_;s==="map"||s==="set"?(g="size",_=r.size):_=r.length,this.assert(_>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,_)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}m(Wy,"assertAbove");rt(Wy,"assertAbove");Me.addMethod("above",Wy);Me.addMethod("gt",Wy);Me.addMethod("greaterThan",Wy);function Zy(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"doLength"),i=We(this,"message"),l=i?i+": ":"",c=We(this,"ssfi"),s=Tn(r).toLowerCase(),p=Tn(t).toLowerCase(),g,_=!0;if(n&&s!=="map"&&s!=="set"&&new Me(r,i,c,!0).to.have.property("length"),!n&&s==="date"&&p!=="date")g=l+"the argument to least must be a date";else if(!Ni(t)&&(n||Ni(r)))g=l+"the argument to least must be a number";else if(!n&&s!=="date"&&!Ni(r)){let x=s==="string"?"'"+r+"'":r;g=l+"expected "+x+" to be a number or a date"}else _=!1;if(_)throw new cn(g,void 0,c);if(n){let x="length",P;s==="map"||s==="set"?(x="size",P=r.size):P=r.length,this.assert(P>=t,"expected #{this} to have a "+x+" at least #{exp} but got #{act}","expected #{this} to have a "+x+" below #{exp}",t,P)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}m(Zy,"assertLeast");rt(Zy,"assertLeast");Me.addMethod("least",Zy);Me.addMethod("gte",Zy);Me.addMethod("greaterThanOrEqual",Zy);function Ky(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"doLength"),i=We(this,"message"),l=i?i+": ":"",c=We(this,"ssfi"),s=Tn(r).toLowerCase(),p=Tn(t).toLowerCase(),g,_=!0;if(n&&s!=="map"&&s!=="set"&&new Me(r,i,c,!0).to.have.property("length"),!n&&s==="date"&&p!=="date")g=l+"the argument to below must be a date";else if(!Ni(t)&&(n||Ni(r)))g=l+"the argument to below must be a number";else if(!n&&s!=="date"&&!Ni(r)){let x=s==="string"?"'"+r+"'":r;g=l+"expected "+x+" to be a number or a date"}else _=!1;if(_)throw new cn(g,void 0,c);if(n){let x="length",P;s==="map"||s==="set"?(x="size",P=r.size):P=r.length,this.assert(P<t,"expected #{this} to have a "+x+" below #{exp} but got #{act}","expected #{this} to not have a "+x+" below #{exp}",t,P)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}m(Ky,"assertBelow");rt(Ky,"assertBelow");Me.addMethod("below",Ky);Me.addMethod("lt",Ky);Me.addMethod("lessThan",Ky);function Yy(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"doLength"),i=We(this,"message"),l=i?i+": ":"",c=We(this,"ssfi"),s=Tn(r).toLowerCase(),p=Tn(t).toLowerCase(),g,_=!0;if(n&&s!=="map"&&s!=="set"&&new Me(r,i,c,!0).to.have.property("length"),!n&&s==="date"&&p!=="date")g=l+"the argument to most must be a date";else if(!Ni(t)&&(n||Ni(r)))g=l+"the argument to most must be a number";else if(!n&&s!=="date"&&!Ni(r)){let x=s==="string"?"'"+r+"'":r;g=l+"expected "+x+" to be a number or a date"}else _=!1;if(_)throw new cn(g,void 0,c);if(n){let x="length",P;s==="map"||s==="set"?(x="size",P=r.size):P=r.length,this.assert(P<=t,"expected #{this} to have a "+x+" at most #{exp} but got #{act}","expected #{this} to have a "+x+" above #{exp}",t,P)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}m(Yy,"assertMost");rt(Yy,"assertMost");Me.addMethod("most",Yy);Me.addMethod("lte",Yy);Me.addMethod("lessThanOrEqual",Yy);Me.addMethod("within",function(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"doLength"),l=We(this,"message"),c=l?l+": ":"",s=We(this,"ssfi"),p=Tn(n).toLowerCase(),g=Tn(t).toLowerCase(),_=Tn(e).toLowerCase(),x,P=!0,A=g==="date"&&_==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new Me(n,l,s,!0).to.have.property("length"),!i&&p==="date"&&(g!=="date"||_!=="date"))x=c+"the arguments to within must be dates";else if((!Ni(t)||!Ni(e))&&(i||Ni(n)))x=c+"the arguments to within must be numbers";else if(!i&&p!=="date"&&!Ni(n)){let M=p==="string"?"'"+n+"'":n;x=c+"expected "+M+" to be a number or a date"}else P=!1;if(P)throw new cn(x,void 0,s);if(i){let M="length",F;p==="map"||p==="set"?(M="size",F=n.size):F=n.length,this.assert(F>=t&&F<=e,"expected #{this} to have a "+M+" within "+A,"expected #{this} to not have a "+M+" within "+A)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+A,"expected #{this} to not be within "+A)});function F1(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"ssfi"),i=We(this,"message"),l;try{l=r instanceof t}catch(s){throw s instanceof TypeError?(i=i?i+": ":"",new cn(i+"The instanceof assertion needs a constructor but "+Tn(t)+" was given.",void 0,n)):s}let c=Hy(t);c==null&&(c="an unnamed constructor"),this.assert(l,"expected #{this} to be an instance of "+c,"expected #{this} to not be an instance of "+c)}m(F1,"assertInstanceOf");rt(F1,"assertInstanceOf");Me.addMethod("instanceof",F1);Me.addMethod("instanceOf",F1);function z1(t,e,r){r&&We(this,"message",r);let n=We(this,"nested"),i=We(this,"own"),l=We(this,"message"),c=We(this,"object"),s=We(this,"ssfi"),p=typeof t;if(l=l?l+": ":"",n){if(p!=="string")throw new cn(l+"the argument to property must be a string when using nested syntax",void 0,s)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new cn(l+"the argument to property must be a string, number, or symbol",void 0,s);if(n&&i)throw new cn(l+'The "nested" and "own" flags cannot be combined.',void 0,s);if(c==null)throw new cn(l+"Target cannot be null or undefined.",void 0,s);let g=We(this,"deep"),_=We(this,"negate"),x=n?E1(c,t):null,P=n?x.value:c[t],A=g?We(this,"eql"):(z,j)=>z===j,M="";g&&(M+="deep "),i&&(M+="own "),n&&(M+="nested "),M+="property ";let F;i?F=Object.prototype.hasOwnProperty.call(c,t):n?F=x.exists:F=Gy(c,t),(!_||arguments.length===1)&&this.assert(F,"expected #{this} to have "+M+sn(t),"expected #{this} to not have "+M+sn(t)),arguments.length>1&&this.assert(F&&A(e,P),"expected #{this} to have "+M+sn(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+M+sn(t)+" of #{act}",e,P),We(this,"object",P)}m(z1,"assertProperty");rt(z1,"assertProperty");Me.addMethod("property",z1);function j1(t,e,r){We(this,"own",!0),z1.apply(this,arguments)}m(j1,"assertOwnProperty");rt(j1,"assertOwnProperty");Me.addMethod("ownProperty",j1);Me.addMethod("haveOwnProperty",j1);function B1(t,e,r){typeof e=="string"&&(r=e,e=null),r&&We(this,"message",r);let n=We(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),l=We(this,"eql");i&&e?this.assert(l(e,i),"expected the own property descriptor for "+sn(t)+" on #{this} to match "+sn(e)+", got "+sn(i),"expected the own property descriptor for "+sn(t)+" on #{this} to not match "+sn(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+sn(t),"expected #{this} to not have an own property descriptor for "+sn(t)),We(this,"object",i)}m(B1,"assertOwnPropertyDescriptor");rt(B1,"assertOwnPropertyDescriptor");Me.addMethod("ownPropertyDescriptor",B1);Me.addMethod("haveOwnPropertyDescriptor",B1);function q1(){We(this,"doLength",!0)}m(q1,"assertLengthChain");rt(q1,"assertLengthChain");function $1(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=Tn(r).toLowerCase(),i=We(this,"message"),l=We(this,"ssfi"),c="length",s;switch(n){case"map":case"set":c="size",s=r.size;break;default:new Me(r,i,l,!0).to.have.property("length"),s=r.length}this.assert(s==t,"expected #{this} to have a "+c+" of #{exp} but got #{act}","expected #{this} to not have a "+c+" of #{act}",t,s)}m($1,"assertLength");rt($1,"assertLength");Me.addChainableMethod("length",$1,q1);Me.addChainableMethod("lengthOf",$1,q1);function V1(t,e){e&&We(this,"message",e);let r=We(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}m(V1,"assertMatch");rt(V1,"assertMatch");Me.addMethod("match",V1);Me.addMethod("matches",V1);Me.addMethod("string",function(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"message"),i=We(this,"ssfi");new Me(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+sn(t),"expected #{this} to not contain "+sn(t))});function U1(t){let e=We(this,"object"),r=Tn(e),n=Tn(t),i=We(this,"ssfi"),l=We(this,"deep"),c,s="",p,g=!0,_=We(this,"message");_=_?_+": ":"";let x=_+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")s=l?"deeply ":"",p=[],e.forEach(function(j,$){p.push($)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=M1(e),n){case"Array":if(arguments.length>1)throw new cn(x,void 0,i);break;case"Object":if(arguments.length>1)throw new cn(x,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(j){return typeof j=="symbol"?j:String(j)})}if(!t.length)throw new cn(_+"keys required",void 0,i);let P=t.length,A=We(this,"any"),M=We(this,"all"),F=t,z=l?We(this,"eql"):(j,$)=>j===$;if(!A&&!M&&(M=!0),A&&(g=F.some(function(j){return p.some(function($){return z(j,$)})})),M&&(g=F.every(function(j){return p.some(function($){return z(j,$)})}),We(this,"contains")||(g=g&&t.length==p.length)),P>1){t=t.map(function($){return sn($)});let j=t.pop();M&&(c=t.join(", ")+", and "+j),A&&(c=t.join(", ")+", or "+j)}else c=sn(t[0]);c=(P>1?"keys ":"key ")+c,c=(We(this,"contains")?"contain ":"have ")+c,this.assert(g,"expected #{this} to "+s+c,"expected #{this} to not "+s+c,F.slice(0).sort(ey),p.sort(ey),!0)}m(U1,"assertKeys");rt(U1,"assertKeys");Me.addMethod("keys",U1);Me.addMethod("key",U1);function Xy(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"ssfi"),l=We(this,"message"),c=We(this,"negate")||!1;new Me(n,l,i,!0).is.a("function"),(ty(t)||typeof t=="string")&&(e=t,t=null);let s,p=!1;try{n()}catch(A){p=!0,s=A}let g=t===void 0&&e===void 0,_=!!(t&&e),x=!1,P=!1;if(g||!g&&!c){let A="an error";t instanceof Error?A="#{exp}":t&&(A=es.getConstructorName(t));let M=s;if(s instanceof Error)M=s.toString();else if(typeof s=="string")M=s;else if(s&&(typeof s=="object"||typeof s=="function"))try{M=es.getConstructorName(s)}catch{}this.assert(p,"expected #{this} to throw "+A,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),M)}if(t&&s&&(t instanceof Error&&es.compatibleInstance(s,t)===c&&(_&&c?x=!0:this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s&&!c?" but #{act} was thrown":""),t.toString(),s.toString())),es.compatibleConstructor(s,t)===c&&(_&&c?x=!0:this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&es.getConstructorName(t),s instanceof Error?s.toString():s&&es.getConstructorName(s)))),s&&e!==void 0&&e!==null){let A="including";ty(e)&&(A="matching"),es.compatibleMessage(s,e)===c&&(_&&c?P=!0:this.assert(c,"expected #{this} to throw error "+A+" #{exp} but got #{act}","expected #{this} to throw error not "+A+" #{exp}",e,es.getMessage(s)))}x&&P&&this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&es.getConstructorName(t),s instanceof Error?s.toString():s&&es.getConstructorName(s)),We(this,"object",s)}m(Xy,"assertThrows");rt(Xy,"assertThrows");Me.addMethod("throw",Xy);Me.addMethod("throws",Xy);Me.addMethod("Throw",Xy);function G1(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+sn(t),"expected #{this} to not respond to "+sn(t))}m(G1,"respondTo");rt(G1,"respondTo");Me.addMethod("respondTo",G1);Me.addMethod("respondsTo",G1);Me.addProperty("itself",function(){We(this,"itself",!0)});function H1(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Uc(t),"expected #{this} to not satisfy"+Uc(t),!We(this,"negate"),n)}m(H1,"satisfy");rt(H1,"satisfy");Me.addMethod("satisfy",H1);Me.addMethod("satisfies",H1);function J1(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"message"),l=We(this,"ssfi");new Me(n,i,l,!0).is.numeric;let c="A `delta` value is required for `closeTo`";if(e==null)throw new cn(i?`${i}: ${c}`:c,void 0,l);if(new Me(e,i,l,!0).is.numeric,c="A `expected` value is required for `closeTo`",t==null)throw new cn(i?`${i}: ${c}`:c,void 0,l);new Me(t,i,l,!0).is.numeric;const s=rt(g=>g<0n?-g:g,"abs"),p=rt(g=>parseFloat(parseFloat(g).toPrecision(12)),"strip");this.assert(p(s(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}m(J1,"closeTo");rt(J1,"closeTo");Me.addMethod("closeTo",J1);Me.addMethod("approximately",J1);function _A(t,e,r,n,i){let l=Array.from(e),c=Array.from(t);if(!n){if(c.length!==l.length)return!1;l=l.slice()}return c.every(function(s,p){if(i)return r?r(s,l[p]):s===l[p];if(!r){let g=l.indexOf(s);return g===-1?!1:(n||l.splice(g,1),!0)}return l.some(function(g,_){return r(s,g)?(n||l.splice(_,1),!0):!1})})}m(_A,"isSubsetOf");rt(_A,"isSubsetOf");Me.addMethod("members",function(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"message"),i=We(this,"ssfi");new Me(r,n,i,!0).to.be.iterable,new Me(t,n,i,!0).to.be.iterable;let l=We(this,"contains"),c=We(this,"ordered"),s,p,g;l?(s=c?"an ordered superset":"a superset",p="expected #{this} to be "+s+" of #{exp}",g="expected #{this} to not be "+s+" of #{exp}"):(s=c?"ordered members":"members",p="expected #{this} to have the same "+s+" as #{exp}",g="expected #{this} to not have the same "+s+" as #{exp}");let _=We(this,"deep")?We(this,"eql"):void 0;this.assert(_A(t,r,_,l,c),p,g,t,r,!0)});Me.addProperty("iterable",function(t){t&&We(this,"message",t);let e=We(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function bA(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"message"),i=We(this,"ssfi"),l=We(this,"contains"),c=We(this,"deep"),s=We(this,"eql");new Me(t,n,i,!0).to.be.an("array"),l?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):c?this.assert(t.some(function(p){return s(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}m(bA,"oneOf");rt(bA,"oneOf");Me.addMethod("oneOf",bA);function W1(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"message"),l=We(this,"ssfi");new Me(n,i,l,!0).is.a("function");let c;e?(new Me(t,i,l,!0).to.have.property(e),c=t[e]):(new Me(t,i,l,!0).is.a("function"),c=t()),n();let s=e==null?t():t[e],p=e==null?c:"."+e;We(this,"deltaMsgObj",p),We(this,"initialDeltaValue",c),We(this,"finalDeltaValue",s),We(this,"deltaBehavior","change"),We(this,"realDelta",s!==c),this.assert(c!==s,"expected "+p+" to change","expected "+p+" to not change")}m(W1,"assertChanges");rt(W1,"assertChanges");Me.addMethod("change",W1);Me.addMethod("changes",W1);function Z1(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"message"),l=We(this,"ssfi");new Me(n,i,l,!0).is.a("function");let c;e?(new Me(t,i,l,!0).to.have.property(e),c=t[e]):(new Me(t,i,l,!0).is.a("function"),c=t()),new Me(c,i,l,!0).is.a("number"),n();let s=e==null?t():t[e],p=e==null?c:"."+e;We(this,"deltaMsgObj",p),We(this,"initialDeltaValue",c),We(this,"finalDeltaValue",s),We(this,"deltaBehavior","increase"),We(this,"realDelta",s-c),this.assert(s-c>0,"expected "+p+" to increase","expected "+p+" to not increase")}m(Z1,"assertIncreases");rt(Z1,"assertIncreases");Me.addMethod("increase",Z1);Me.addMethod("increases",Z1);function K1(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"message"),l=We(this,"ssfi");new Me(n,i,l,!0).is.a("function");let c;e?(new Me(t,i,l,!0).to.have.property(e),c=t[e]):(new Me(t,i,l,!0).is.a("function"),c=t()),new Me(c,i,l,!0).is.a("number"),n();let s=e==null?t():t[e],p=e==null?c:"."+e;We(this,"deltaMsgObj",p),We(this,"initialDeltaValue",c),We(this,"finalDeltaValue",s),We(this,"deltaBehavior","decrease"),We(this,"realDelta",c-s),this.assert(s-c<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}m(K1,"assertDecreases");rt(K1,"assertDecreases");Me.addMethod("decrease",K1);Me.addMethod("decreases",K1);function vA(t,e){e&&We(this,"message",e);let r=We(this,"deltaMsgObj"),n=We(this,"initialDeltaValue"),i=We(this,"finalDeltaValue"),l=We(this,"deltaBehavior"),c=We(this,"realDelta"),s;l==="change"?s=Math.abs(i-n)===Math.abs(t):s=c===Math.abs(t),this.assert(s,"expected "+r+" to "+l+" by "+t,"expected "+r+" to not "+l+" by "+t)}m(vA,"assertDelta");rt(vA,"assertDelta");Me.addMethod("by",vA);Me.addProperty("extensible",function(){let t=We(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});Me.addProperty("sealed",function(){let t=We(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});Me.addProperty("frozen",function(){let t=We(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});Me.addProperty("finite",function(t){let e=We(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function ry(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return ry(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){let n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?ry(n,i):typeof n=="function"?n(i):i===n}):!1}m(ry,"compareSubset");rt(ry,"compareSubset");Me.addMethod("containSubset",function(t){const e=Dr(this,"object"),r=xo.showDiff;this.assert(ry(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function Gc(t,e){return new Me(t,e)}m(Gc,"expect");rt(Gc,"expect");Gc.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new cn(r,{actual:t,expected:e,operator:n},Gc.fail)};var Kz={};NP(Kz,{Should:m(()=>jie,"Should"),should:m(()=>zie,"should")});function Y1(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new Me(this.valueOf(),null,t):new Me(this,null,t)}m(t,"shouldGetter"),rt(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}m(e,"shouldSetter"),rt(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});let r={};return r.fail=function(n,i,l,c){throw arguments.length<2&&(l=n,n=void 0),l=l||"should.fail()",new cn(l,{actual:n,expected:i,operator:c},r.fail)},r.equal=function(n,i,l){new Me(n,l).to.equal(i)},r.Throw=function(n,i,l,c){new Me(n,c).to.Throw(i,l)},r.exist=function(n,i){new Me(n,i).to.exist},r.not={},r.not.equal=function(n,i,l){new Me(n,l).to.not.equal(i)},r.not.Throw=function(n,i,l,c){new Me(n,c).to.not.Throw(i,l)},r.not.exist=function(n,i){new Me(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}m(Y1,"loadShould");rt(Y1,"loadShould");var zie=Y1,jie=Y1;function Ce(t,e){new Me(null,null,Ce,!0).assert(t,e,"[ negation message unavailable ]")}m(Ce,"assert");rt(Ce,"assert");Ce.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new cn(r,{actual:t,expected:e,operator:n},Ce.fail)};Ce.isOk=function(t,e){new Me(t,e,Ce.isOk,!0).is.ok};Ce.isNotOk=function(t,e){new Me(t,e,Ce.isNotOk,!0).is.not.ok};Ce.equal=function(t,e,r){let n=new Me(t,r,Ce.equal,!0);n.assert(e==Dr(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};Ce.notEqual=function(t,e,r){let n=new Me(t,r,Ce.notEqual,!0);n.assert(e!=Dr(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};Ce.strictEqual=function(t,e,r){new Me(t,r,Ce.strictEqual,!0).to.equal(e)};Ce.notStrictEqual=function(t,e,r){new Me(t,r,Ce.notStrictEqual,!0).to.not.equal(e)};Ce.deepEqual=Ce.deepStrictEqual=function(t,e,r){new Me(t,r,Ce.deepEqual,!0).to.eql(e)};Ce.notDeepEqual=function(t,e,r){new Me(t,r,Ce.notDeepEqual,!0).to.not.eql(e)};Ce.isAbove=function(t,e,r){new Me(t,r,Ce.isAbove,!0).to.be.above(e)};Ce.isAtLeast=function(t,e,r){new Me(t,r,Ce.isAtLeast,!0).to.be.least(e)};Ce.isBelow=function(t,e,r){new Me(t,r,Ce.isBelow,!0).to.be.below(e)};Ce.isAtMost=function(t,e,r){new Me(t,r,Ce.isAtMost,!0).to.be.most(e)};Ce.isTrue=function(t,e){new Me(t,e,Ce.isTrue,!0).is.true};Ce.isNotTrue=function(t,e){new Me(t,e,Ce.isNotTrue,!0).to.not.equal(!0)};Ce.isFalse=function(t,e){new Me(t,e,Ce.isFalse,!0).is.false};Ce.isNotFalse=function(t,e){new Me(t,e,Ce.isNotFalse,!0).to.not.equal(!1)};Ce.isNull=function(t,e){new Me(t,e,Ce.isNull,!0).to.equal(null)};Ce.isNotNull=function(t,e){new Me(t,e,Ce.isNotNull,!0).to.not.equal(null)};Ce.isNaN=function(t,e){new Me(t,e,Ce.isNaN,!0).to.be.NaN};Ce.isNotNaN=function(t,e){new Me(t,e,Ce.isNotNaN,!0).not.to.be.NaN};Ce.exists=function(t,e){new Me(t,e,Ce.exists,!0).to.exist};Ce.notExists=function(t,e){new Me(t,e,Ce.notExists,!0).to.not.exist};Ce.isUndefined=function(t,e){new Me(t,e,Ce.isUndefined,!0).to.equal(void 0)};Ce.isDefined=function(t,e){new Me(t,e,Ce.isDefined,!0).to.not.equal(void 0)};Ce.isCallable=function(t,e){new Me(t,e,Ce.isCallable,!0).is.callable};Ce.isNotCallable=function(t,e){new Me(t,e,Ce.isNotCallable,!0).is.not.callable};Ce.isObject=function(t,e){new Me(t,e,Ce.isObject,!0).to.be.a("object")};Ce.isNotObject=function(t,e){new Me(t,e,Ce.isNotObject,!0).to.not.be.a("object")};Ce.isArray=function(t,e){new Me(t,e,Ce.isArray,!0).to.be.an("array")};Ce.isNotArray=function(t,e){new Me(t,e,Ce.isNotArray,!0).to.not.be.an("array")};Ce.isString=function(t,e){new Me(t,e,Ce.isString,!0).to.be.a("string")};Ce.isNotString=function(t,e){new Me(t,e,Ce.isNotString,!0).to.not.be.a("string")};Ce.isNumber=function(t,e){new Me(t,e,Ce.isNumber,!0).to.be.a("number")};Ce.isNotNumber=function(t,e){new Me(t,e,Ce.isNotNumber,!0).to.not.be.a("number")};Ce.isNumeric=function(t,e){new Me(t,e,Ce.isNumeric,!0).is.numeric};Ce.isNotNumeric=function(t,e){new Me(t,e,Ce.isNotNumeric,!0).is.not.numeric};Ce.isFinite=function(t,e){new Me(t,e,Ce.isFinite,!0).to.be.finite};Ce.isBoolean=function(t,e){new Me(t,e,Ce.isBoolean,!0).to.be.a("boolean")};Ce.isNotBoolean=function(t,e){new Me(t,e,Ce.isNotBoolean,!0).to.not.be.a("boolean")};Ce.typeOf=function(t,e,r){new Me(t,r,Ce.typeOf,!0).to.be.a(e)};Ce.notTypeOf=function(t,e,r){new Me(t,r,Ce.notTypeOf,!0).to.not.be.a(e)};Ce.instanceOf=function(t,e,r){new Me(t,r,Ce.instanceOf,!0).to.be.instanceOf(e)};Ce.notInstanceOf=function(t,e,r){new Me(t,r,Ce.notInstanceOf,!0).to.not.be.instanceOf(e)};Ce.include=function(t,e,r){new Me(t,r,Ce.include,!0).include(e)};Ce.notInclude=function(t,e,r){new Me(t,r,Ce.notInclude,!0).not.include(e)};Ce.deepInclude=function(t,e,r){new Me(t,r,Ce.deepInclude,!0).deep.include(e)};Ce.notDeepInclude=function(t,e,r){new Me(t,r,Ce.notDeepInclude,!0).not.deep.include(e)};Ce.nestedInclude=function(t,e,r){new Me(t,r,Ce.nestedInclude,!0).nested.include(e)};Ce.notNestedInclude=function(t,e,r){new Me(t,r,Ce.notNestedInclude,!0).not.nested.include(e)};Ce.deepNestedInclude=function(t,e,r){new Me(t,r,Ce.deepNestedInclude,!0).deep.nested.include(e)};Ce.notDeepNestedInclude=function(t,e,r){new Me(t,r,Ce.notDeepNestedInclude,!0).not.deep.nested.include(e)};Ce.ownInclude=function(t,e,r){new Me(t,r,Ce.ownInclude,!0).own.include(e)};Ce.notOwnInclude=function(t,e,r){new Me(t,r,Ce.notOwnInclude,!0).not.own.include(e)};Ce.deepOwnInclude=function(t,e,r){new Me(t,r,Ce.deepOwnInclude,!0).deep.own.include(e)};Ce.notDeepOwnInclude=function(t,e,r){new Me(t,r,Ce.notDeepOwnInclude,!0).not.deep.own.include(e)};Ce.match=function(t,e,r){new Me(t,r,Ce.match,!0).to.match(e)};Ce.notMatch=function(t,e,r){new Me(t,r,Ce.notMatch,!0).to.not.match(e)};Ce.property=function(t,e,r){new Me(t,r,Ce.property,!0).to.have.property(e)};Ce.notProperty=function(t,e,r){new Me(t,r,Ce.notProperty,!0).to.not.have.property(e)};Ce.propertyVal=function(t,e,r,n){new Me(t,n,Ce.propertyVal,!0).to.have.property(e,r)};Ce.notPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notPropertyVal,!0).to.not.have.property(e,r)};Ce.deepPropertyVal=function(t,e,r,n){new Me(t,n,Ce.deepPropertyVal,!0).to.have.deep.property(e,r)};Ce.notDeepPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};Ce.ownProperty=function(t,e,r){new Me(t,r,Ce.ownProperty,!0).to.have.own.property(e)};Ce.notOwnProperty=function(t,e,r){new Me(t,r,Ce.notOwnProperty,!0).to.not.have.own.property(e)};Ce.ownPropertyVal=function(t,e,r,n){new Me(t,n,Ce.ownPropertyVal,!0).to.have.own.property(e,r)};Ce.notOwnPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};Ce.deepOwnPropertyVal=function(t,e,r,n){new Me(t,n,Ce.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};Ce.notDeepOwnPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};Ce.nestedProperty=function(t,e,r){new Me(t,r,Ce.nestedProperty,!0).to.have.nested.property(e)};Ce.notNestedProperty=function(t,e,r){new Me(t,r,Ce.notNestedProperty,!0).to.not.have.nested.property(e)};Ce.nestedPropertyVal=function(t,e,r,n){new Me(t,n,Ce.nestedPropertyVal,!0).to.have.nested.property(e,r)};Ce.notNestedPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};Ce.deepNestedPropertyVal=function(t,e,r,n){new Me(t,n,Ce.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};Ce.notDeepNestedPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};Ce.lengthOf=function(t,e,r){new Me(t,r,Ce.lengthOf,!0).to.have.lengthOf(e)};Ce.hasAnyKeys=function(t,e,r){new Me(t,r,Ce.hasAnyKeys,!0).to.have.any.keys(e)};Ce.hasAllKeys=function(t,e,r){new Me(t,r,Ce.hasAllKeys,!0).to.have.all.keys(e)};Ce.containsAllKeys=function(t,e,r){new Me(t,r,Ce.containsAllKeys,!0).to.contain.all.keys(e)};Ce.doesNotHaveAnyKeys=function(t,e,r){new Me(t,r,Ce.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};Ce.doesNotHaveAllKeys=function(t,e,r){new Me(t,r,Ce.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};Ce.hasAnyDeepKeys=function(t,e,r){new Me(t,r,Ce.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};Ce.hasAllDeepKeys=function(t,e,r){new Me(t,r,Ce.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};Ce.containsAllDeepKeys=function(t,e,r){new Me(t,r,Ce.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};Ce.doesNotHaveAnyDeepKeys=function(t,e,r){new Me(t,r,Ce.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};Ce.doesNotHaveAllDeepKeys=function(t,e,r){new Me(t,r,Ce.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};Ce.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);let i=new Me(t,n,Ce.throws,!0).to.throw(e,r);return Dr(i,"object")};Ce.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new Me(t,n,Ce.doesNotThrow,!0).to.not.throw(e,r)};Ce.operator=function(t,e,r,n){let i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new cn(n+'Invalid operator "'+e+'"',void 0,Ce.operator)}let l=new Me(i,n,Ce.operator,!0);l.assert(Dr(l,"object")===!0,"expected "+sn(t)+" to be "+e+" "+sn(r),"expected "+sn(t)+" to not be "+e+" "+sn(r))};Ce.closeTo=function(t,e,r,n){new Me(t,n,Ce.closeTo,!0).to.be.closeTo(e,r)};Ce.approximately=function(t,e,r,n){new Me(t,n,Ce.approximately,!0).to.be.approximately(e,r)};Ce.sameMembers=function(t,e,r){new Me(t,r,Ce.sameMembers,!0).to.have.same.members(e)};Ce.notSameMembers=function(t,e,r){new Me(t,r,Ce.notSameMembers,!0).to.not.have.same.members(e)};Ce.sameDeepMembers=function(t,e,r){new Me(t,r,Ce.sameDeepMembers,!0).to.have.same.deep.members(e)};Ce.notSameDeepMembers=function(t,e,r){new Me(t,r,Ce.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};Ce.sameOrderedMembers=function(t,e,r){new Me(t,r,Ce.sameOrderedMembers,!0).to.have.same.ordered.members(e)};Ce.notSameOrderedMembers=function(t,e,r){new Me(t,r,Ce.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};Ce.sameDeepOrderedMembers=function(t,e,r){new Me(t,r,Ce.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};Ce.notSameDeepOrderedMembers=function(t,e,r){new Me(t,r,Ce.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};Ce.includeMembers=function(t,e,r){new Me(t,r,Ce.includeMembers,!0).to.include.members(e)};Ce.notIncludeMembers=function(t,e,r){new Me(t,r,Ce.notIncludeMembers,!0).to.not.include.members(e)};Ce.includeDeepMembers=function(t,e,r){new Me(t,r,Ce.includeDeepMembers,!0).to.include.deep.members(e)};Ce.notIncludeDeepMembers=function(t,e,r){new Me(t,r,Ce.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};Ce.includeOrderedMembers=function(t,e,r){new Me(t,r,Ce.includeOrderedMembers,!0).to.include.ordered.members(e)};Ce.notIncludeOrderedMembers=function(t,e,r){new Me(t,r,Ce.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};Ce.includeDeepOrderedMembers=function(t,e,r){new Me(t,r,Ce.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};Ce.notIncludeDeepOrderedMembers=function(t,e,r){new Me(t,r,Ce.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};Ce.oneOf=function(t,e,r){new Me(t,r,Ce.oneOf,!0).to.be.oneOf(e)};Ce.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${sn(t)} to be an iterable`:`expected ${sn(t)} to be an iterable`,new cn(e,void 0,Ce.isIterable)};Ce.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.changes,!0).to.change(e,r)};Ce.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.changesBy,!0).to.change(e,r).by(n)};Ce.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.doesNotChange,!0).to.not.change(e,r)};Ce.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.changesButNotBy,!0).to.change(e,r).but.not.by(n)};Ce.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.increases,!0).to.increase(e,r)};Ce.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.increasesBy,!0).to.increase(e,r).by(n)};Ce.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.doesNotIncrease,!0).to.not.increase(e,r)};Ce.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};Ce.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.decreases,!0).to.decrease(e,r)};Ce.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.decreasesBy,!0).to.decrease(e,r).by(n)};Ce.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.doesNotDecrease,!0).to.not.decrease(e,r)};Ce.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);return new Me(t,i,Ce.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};Ce.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};Ce.ifError=function(t){if(t)throw t};Ce.isExtensible=function(t,e){new Me(t,e,Ce.isExtensible,!0).to.be.extensible};Ce.isNotExtensible=function(t,e){new Me(t,e,Ce.isNotExtensible,!0).to.not.be.extensible};Ce.isSealed=function(t,e){new Me(t,e,Ce.isSealed,!0).to.be.sealed};Ce.isNotSealed=function(t,e){new Me(t,e,Ce.isNotSealed,!0).to.not.be.sealed};Ce.isFrozen=function(t,e){new Me(t,e,Ce.isFrozen,!0).to.be.frozen};Ce.isNotFrozen=function(t,e){new Me(t,e,Ce.isNotFrozen,!0).to.not.be.frozen};Ce.isEmpty=function(t,e){new Me(t,e,Ce.isEmpty,!0).to.be.empty};Ce.isNotEmpty=function(t,e){new Me(t,e,Ce.isNotEmpty,!0).to.not.be.empty};Ce.containsSubset=function(t,e,r){new Me(t,r).to.containSubset(e)};Ce.doesNotContainSubset=function(t,e,r){new Me(t,r).to.not.containSubset(e)};var Bie=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(const[t,e]of Bie)Ce[e]=Ce[t];var BO=[];function gh(t){const e={use:gh,AssertionError:cn,util:Pa,config:xo,expect:Gc,assert:Ce,Assertion:Me,...Kz};return~BO.indexOf(t)||(t(e,Pa),BO.push(t)),e}m(gh,"use");rt(gh,"use");var Yz={};Do(Yz,{toAppearAfter:()=>RB,toAppearBefore:()=>Qb,toBeChecked:()=>tR,toBeDisabled:()=>JA,toBeEmpty:()=>OA,toBeEmptyDOMElement:()=>kA,toBeEnabled:()=>WA,toBeInTheDOM:()=>Jb,toBeInTheDocument:()=>MA,toBeInvalid:()=>YA,toBePartiallyChecked:()=>nR,toBePartiallyPressed:()=>lR,toBePressed:()=>aR,toBeRequired:()=>ZA,toBeValid:()=>XA,toBeVisible:()=>$A,toContainElement:()=>Wb,toContainHTML:()=>LA,toHaveAccessibleDescription:()=>Zb,toHaveAccessibleErrorMessage:()=>NA,toHaveAccessibleName:()=>Yb,toHaveAttribute:()=>FA,toHaveClass:()=>zA,toHaveDescription:()=>iR,toHaveDisplayValue:()=>eR,toHaveErrorMessage:()=>oR,toHaveFocus:()=>jA,toHaveFormValues:()=>BA,toHaveRole:()=>Kb,toHaveSelection:()=>sR,toHaveStyle:()=>Xb,toHaveTextContent:()=>DA,toHaveValue:()=>QA});var qO=Ti(QD(),1),Xz=class extends Error{constructor(r,n,i,l,c){super(`${r}:${i}:${l}: ${n}`);xr(this,"reason");xr(this,"filename");xr(this,"line");xr(this,"column");xr(this,"source");this.reason=n,this.filename=r,this.line=i,this.column=l,this.source=c}};m(Xz,"t");var qie=Xz,Qz=class{constructor(e,r,n){xr(this,"start");xr(this,"end");xr(this,"source");this.start=e,this.end=r,this.source=n}};m(Qz,"e");var $ie=Qz,Mi;(function(t){t.stylesheet="stylesheet",t.rule="rule",t.declaration="declaration",t.comment="comment",t.container="container",t.charset="charset",t.document="document",t.customMedia="custom-media",t.fontFace="font-face",t.host="host",t.import="import",t.keyframes="keyframes",t.keyframe="keyframe",t.layer="layer",t.media="media",t.namespace="namespace",t.page="page",t.startingStyle="starting-style",t.supports="supports"})(Mi||(Mi={}));var $O=m((t,e,r)=>{let n=r,i=1e4;do{const l=e.map(p=>t.indexOf(p,n));l.push(t.indexOf("\\",n));const c=l.filter(p=>p!==-1);if(c.length===0)return-1;const s=Math.min(...c);if(t[s]!=="\\")return s;n=s+2,i--}while(i>0);throw new Error("Too many escaping")},"s"),TS=m((t,e,r)=>{let n=r,i=1e4;do{const l=e.map(p=>t.indexOf(p,n));l.push(t.indexOf("(",n)),l.push(t.indexOf('"',n)),l.push(t.indexOf("'",n)),l.push(t.indexOf("\\",n));const c=l.filter(p=>p!==-1);if(c.length===0)return-1;const s=Math.min(...c);switch(t[s]){case"\\":n=s+2;break;case"(":{const p=TS(t,[")"],s+1);if(p===-1)return-1;n=p+1}break;case'"':{const p=$O(t,['"'],s+1);if(p===-1)return-1;n=p+1}break;case"'":{const p=$O(t,["'"],s+1);if(p===-1)return-1;n=p+1}break;default:return s}i--}while(i>0);throw new Error("Too many escaping")},"n"),UE=/\/\*[^]*?(?:\*\/|$)/g;function Xo(t){return t?t.trim():""}m(Xo,"o");function Hb(t,e){const r=t&&typeof t.type=="string",n=r?t:e;for(const i in t){const l=t[i];Array.isArray(l)?l.forEach(c=>{Hb(c,n)}):l&&typeof l=="object"&&Hb(l,n)}return r&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),t}m(Hb,"c");var Vie=m((t,e)=>{e=e||{};let r=1,n=1;function i(){const U={line:r,column:n};return K=>(K.position=new $ie(U,{line:r,column:n},e?.source||""),x(),K)}m(i,"u");const l=[];function c(U){const K=new qie(e?.source||"",U,r,n,t);if(!e?.silent)throw K;l.push(K)}m(c,"l");function s(){const U=/^{\s*/.exec(t);return!!U&&(_(U),!0)}m(s,"f");function p(){const U=/^}/.exec(t);return!!U&&(_(U),!0)}m(p,"d");function g(){let U;const K=[];for(x(),P(K);t.length&&t.charAt(0)!=="}"&&(U=ne()||Z(),U);)K.push(U),P(K);return K}m(g,"y");function _(U){const K=U[0];return function(he){const ue=he.match(/\n/g);ue&&(r+=ue.length);const we=he.lastIndexOf(`
`);n=~we?he.length-we:n+he.length}(K),t=t.slice(K.length),U}m(_,"g");function x(){const U=/^\s*/.exec(t);U&&_(U)}m(x,"$");function P(U){U=U||[];let K=A();for(;K;)U.push(K),K=A();return U}m(P,"x");function A(){const U=i();if(t.charAt(0)!=="/"||t.charAt(1)!=="*")return;const K=/^\/\*[^]*?\*\//.exec(t);return K?(_(K),U({type:Mi.comment,comment:K[0].slice(2,-2)})):c("End of comment missing")}m(A,"V");function M(){const U=/^([^{]+)/.exec(t);if(U)return _(U),((K,he)=>{const ue=[];let we=0;for(;we<K.length;){const Ie=TS(K,he,we);if(Ie===-1)return ue.push(K.substring(we)),ue;ue.push(K.substring(we,Ie)),we=Ie+1}return ue})(Xo(U[0]).replace(UE,""),[","]).map(K=>Xo(K))}m(M,"k");function F(){const U=i(),K=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/.exec(t);if(!K)return;_(K);const he=Xo(K[0]),ue=/^:\s*/.exec(t);if(!ue)return c("property missing ':'");_(ue);let we="";const Ie=TS(t,[";","}"]);Ie!==-1&&(we=t.substring(0,Ie),_([we]),we=Xo(we).replace(UE,""));const ee=U({type:Mi.declaration,property:he.replace(UE,""),value:we}),fe=/^[;\s]*/.exec(t);return fe&&_(fe),ee}m(F,"v");function z(){const U=[];if(!s())return c("missing '{'");P(U);let K=F();for(;K;)U.push(K),P(U),K=F();return p()?U:c("missing '}'")}m(z,"w");function j(){const U=[],K=i();let he=/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/.exec(t);for(;he;){const ue=_(he);U.push(ue[1]);const we=/^,\s*/.exec(t);we&&_(we),he=/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/.exec(t)}if(U.length)return K({type:Mi.keyframe,values:U,declarations:z()||[]})}m(j,"b");const $=te("import"),W=te("charset"),X=te("namespace");function te(U){const K=new RegExp("^@"+U+`\\s*((?::?[^;'"]|"(?:\\\\"|[^"])*?"|'(?:\\\\'|[^'])*?')+)(?:;|$)`);return()=>{const he=i(),ue=K.exec(t);if(!ue)return;const we=_(ue),Ie={type:U};return Ie[U]=we[1].trim(),he(Ie)}}m(te,"M");function ne(){if(t[0]==="@")return function(){const U=i(),K=/^@([-\w]+)?keyframes\s*/.exec(t);if(!K)return;const he=_(K)[1],ue=/^([-\w]+)\s*/.exec(t);if(!ue)return c("@keyframes missing name");const we=_(ue)[1];if(!s())return c("@keyframes missing '{'");let Ie=P(),ee=j();for(;ee;)Ie.push(ee),Ie=Ie.concat(P()),ee=j();return p()?U({type:Mi.keyframes,name:we,vendor:he,keyframes:Ie}):c("@keyframes missing '}'")}()||function(){const U=i(),K=/^@media *([^{]+)/.exec(t);if(!K)return;const he=Xo(_(K)[1]);if(!s())return c("@media missing '{'");const ue=P().concat(g());return p()?U({type:Mi.media,media:he,rules:ue}):c("@media missing '}'")}()||function(){const U=i(),K=/^@custom-media\s+(--\S+)\s+([^{;\s][^{;]*);/.exec(t);if(!K)return;const he=_(K);return U({type:Mi.customMedia,name:Xo(he[1]),media:Xo(he[2])})}()||function(){const U=i(),K=/^@supports *([^{]+)/.exec(t);if(!K)return;const he=Xo(_(K)[1]);if(!s())return c("@supports missing '{'");const ue=P().concat(g());return p()?U({type:Mi.supports,supports:he,rules:ue}):c("@supports missing '}'")}()||$()||W()||X()||function(){const U=i(),K=/^@([-\w]+)?document *([^{]+)/.exec(t);if(!K)return;const he=_(K),ue=Xo(he[1]),we=Xo(he[2]);if(!s())return c("@document missing '{'");const Ie=P().concat(g());return p()?U({type:Mi.document,document:we,vendor:ue,rules:Ie}):c("@document missing '}'")}()||function(){const U=i(),K=/^@page */.exec(t);if(!K)return;_(K);const he=M()||[];if(!s())return c("@page missing '{'");let ue=P(),we=F();for(;we;)ue.push(we),ue=ue.concat(P()),we=F();return p()?U({type:Mi.page,selectors:he,declarations:ue}):c("@page missing '}'")}()||function(){const U=i(),K=/^@host\s*/.exec(t);if(!K)return;if(_(K),!s())return c("@host missing '{'");const he=P().concat(g());return p()?U({type:Mi.host,rules:he}):c("@host missing '}'")}()||function(){const U=i(),K=/^@font-face\s*/.exec(t);if(!K)return;if(_(K),!s())return c("@font-face missing '{'");let he=P(),ue=F();for(;ue;)he.push(ue),he=he.concat(P()),ue=F();return p()?U({type:Mi.fontFace,declarations:he}):c("@font-face missing '}'")}()||function(){const U=i(),K=/^@container *([^{]+)/.exec(t);if(!K)return;const he=Xo(_(K)[1]);if(!s())return c("@container missing '{'");const ue=P().concat(g());return p()?U({type:Mi.container,container:he,rules:ue}):c("@container missing '}'")}()||function(){const U=i(),K=/^@starting-style\s*/.exec(t);if(!K)return;if(_(K),!s())return c("@starting-style missing '{'");const he=P().concat(g());return p()?U({type:Mi.startingStyle,rules:he}):c("@starting-style missing '}'")}()||function(){const U=i(),K=/^@layer *([^{;@]+)/.exec(t);if(!K)return;const he=Xo(_(K)[1]);if(!s()){const we=/^[;\s]*/.exec(t);return we&&_(we),U({type:Mi.layer,layer:he})}const ue=P().concat(g());return p()?U({type:Mi.layer,layer:he,rules:ue}):c("@layer missing '}'")}()}m(ne,"A");function Z(){const U=i(),K=M();return K?(P(),U({type:Mi.rule,selectors:K,declarations:z()||[]})):c("selector missing")}return m(Z,"S"),Hb(function(){const U=g();return{type:Mi.stylesheet,stylesheet:{source:e?.source,rules:U,parsingErrors:l}}}())},"m"),Uie=Object.prototype.toString;function SS(t){return typeof t=="function"||Uie.call(t)==="[object Function]"}m(SS,"isCallable");function ej(t){var e=Number(t);return isNaN(e)?0:e===0||!isFinite(e)?e:(e>0?1:-1)*Math.floor(Math.abs(e))}m(ej,"toInteger");var Gie=Math.pow(2,53)-1;function tj(t){var e=ej(t);return Math.min(Math.max(e,0),Gie)}m(tj,"toLength");function Ss(t,e){var r=Array,n=Object(t);if(t==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");if(typeof e<"u"&&!SS(e))throw new TypeError("Array.from: when provided, the second argument must be a function");for(var i=tj(n.length),l=SS(r)?Object(new r(i)):new Array(i),c=0,s;c<i;)s=n[c],e?l[c]=e(s,c):l[c]=s,c+=1;return l.length=i,l}m(Ss,"arrayFrom");function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}m(Qp,"_typeof");function rj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}m(rj,"_classCallCheck");function CS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xA(n.key),n)}}m(CS,"_defineProperties");function nj(t,e,r){return e&&CS(t.prototype,e),r&&CS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}m(nj,"_createClass");function ij(t,e,r){return e=xA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(ij,"_defineProperty");function xA(t){var e=oj(t,"string");return Qp(e)==="symbol"?e:String(e)}m(xA,"_toPropertyKey");function oj(t,e){if(Qp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}m(oj,"_toPrimitive");var Hie=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];rj(this,t),ij(this,"items",void 0),this.items=e}return m(t,"SetLike"),nj(t,[{key:"add",value:m(function(r){return this.has(r)===!1&&this.items.push(r),this},"add")},{key:"clear",value:m(function(){this.items=[]},"clear")},{key:"delete",value:m(function(r){var n=this.items.length;return this.items=this.items.filter(function(i){return i!==r}),n!==this.items.length},"_delete")},{key:"forEach",value:m(function(r){var n=this;this.items.forEach(function(i){r(i,i,n)})},"forEach")},{key:"has",value:m(function(r){return this.items.indexOf(r)!==-1},"has")},{key:"size",get:m(function(){return this.items.length},"get")}]),t}(),Jie=typeof Set>"u"?Set:Hie;function Qi(t){var e;return(e=t.localName)!==null&&e!==void 0?e:t.tagName.toLowerCase()}m(Qi,"getLocalName");var Wie={article:"article",aside:"complementary",button:"button",datalist:"listbox",dd:"definition",details:"group",dialog:"dialog",dt:"term",fieldset:"group",figure:"figure",form:"form",footer:"contentinfo",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",header:"banner",hr:"separator",html:"document",legend:"legend",li:"listitem",math:"math",main:"main",menu:"list",nav:"navigation",ol:"list",optgroup:"group",option:"option",output:"status",progress:"progressbar",section:"region",summary:"button",table:"table",tbody:"rowgroup",textarea:"textbox",tfoot:"rowgroup",td:"cell",th:"columnheader",thead:"rowgroup",tr:"row",ul:"list"},Zie={caption:new Set(["aria-label","aria-labelledby"]),code:new Set(["aria-label","aria-labelledby"]),deletion:new Set(["aria-label","aria-labelledby"]),emphasis:new Set(["aria-label","aria-labelledby"]),generic:new Set(["aria-label","aria-labelledby","aria-roledescription"]),insertion:new Set(["aria-label","aria-labelledby"]),none:new Set(["aria-label","aria-labelledby"]),paragraph:new Set(["aria-label","aria-labelledby"]),presentation:new Set(["aria-label","aria-labelledby"]),strong:new Set(["aria-label","aria-labelledby"]),subscript:new Set(["aria-label","aria-labelledby"]),superscript:new Set(["aria-label","aria-labelledby"])};function sj(t,e){return["aria-atomic","aria-busy","aria-controls","aria-current","aria-description","aria-describedby","aria-details","aria-dropeffect","aria-flowto","aria-grabbed","aria-hidden","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription"].some(function(r){var n;return t.hasAttribute(r)&&!((n=Zie[e])!==null&&n!==void 0&&n.has(r))})}m(sj,"hasGlobalAriaAttributes");function wA(t,e){return sj(t,e)}m(wA,"ignorePresentationalRole");function aj(t){var e=cj(t);if(e===null||PS.indexOf(e)!==-1){var r=lj(t);if(PS.indexOf(e||"")===-1||wA(t,r||""))return r}return e}m(aj,"getRole");function lj(t){var e=Wie[Qi(t)];if(e!==void 0)return e;switch(Qi(t)){case"a":case"area":case"link":if(t.hasAttribute("href"))return"link";break;case"img":return t.getAttribute("alt")===""&&!wA(t,"img")?"presentation":"img";case"input":{var r=t,n=r.type;switch(n){case"button":case"image":case"reset":case"submit":return"button";case"checkbox":case"radio":return n;case"range":return"slider";case"email":case"tel":case"text":case"url":return t.hasAttribute("list")?"combobox":"textbox";case"search":return t.hasAttribute("list")?"combobox":"searchbox";case"number":return"spinbutton";default:return null}}case"select":return t.hasAttribute("multiple")||t.size>1?"listbox":"combobox"}return null}m(lj,"getImplicitRole");function cj(t){var e=t.getAttribute("role");if(e!==null){var r=e.trim().split(" ")[0];if(r.length>0)return r}return null}m(cj,"getExplicitRole");var PS=["presentation","none"];function zn(t){return t!==null&&t.nodeType===t.ELEMENT_NODE}m(zn,"isElement");function EA(t){return zn(t)&&Qi(t)==="caption"}m(EA,"isHTMLTableCaptionElement");function Mg(t){return zn(t)&&Qi(t)==="input"}m(Mg,"isHTMLInputElement");function uj(t){return zn(t)&&Qi(t)==="optgroup"}m(uj,"isHTMLOptGroupElement");function hj(t){return zn(t)&&Qi(t)==="select"}m(hj,"isHTMLSelectElement");function dj(t){return zn(t)&&Qi(t)==="table"}m(dj,"isHTMLTableElement");function pj(t){return zn(t)&&Qi(t)==="textarea"}m(pj,"isHTMLTextAreaElement");function fj(t){var e=t.ownerDocument===null?t:t.ownerDocument,r=e.defaultView;if(r===null)throw new TypeError("no window available");return r}m(fj,"safeWindow");function mj(t){return zn(t)&&Qi(t)==="fieldset"}m(mj,"isHTMLFieldSetElement");function gj(t){return zn(t)&&Qi(t)==="legend"}m(gj,"isHTMLLegendElement");function yj(t){return zn(t)&&Qi(t)==="slot"}m(yj,"isHTMLSlotElement");function _j(t){return zn(t)&&t.ownerSVGElement!==void 0}m(_j,"isSVGElement");function bj(t){return zn(t)&&Qi(t)==="svg"}m(bj,"isSVGSVGElement");function vj(t){return _j(t)&&Qi(t)==="title"}m(vj,"isSVGTitleElement");function ny(t,e){if(zn(t)&&t.hasAttribute(e)){var r=t.getAttribute(e).split(" "),n=t.getRootNode?t.getRootNode():t.ownerDocument;return r.map(function(i){return n.getElementById(i)}).filter(function(i){return i!==null})}return[]}m(ny,"queryIdRefs");function Aa(t,e){return zn(t)?e.indexOf(aj(t))!==-1:!1}m(Aa,"hasAnyConcreteRoles");function xj(t){return t.trim().replace(/\s\s+/g," ")}m(xj,"asFlatString");function wj(t,e){if(!zn(t))return!1;if(t.hasAttribute("hidden")||t.getAttribute("aria-hidden")==="true")return!0;var r=e(t);return r.getPropertyValue("display")==="none"||r.getPropertyValue("visibility")==="hidden"}m(wj,"isHidden");function Ej(t){return Aa(t,["button","combobox","listbox","textbox"])||TA(t,"range")}m(Ej,"isControl");function TA(t,e){if(!zn(t))return!1;switch(e){case"range":return Aa(t,["meter","progressbar","scrollbar","slider","spinbutton"]);default:throw new TypeError("No knowledge about abstract role '".concat(e,"'. This is likely a bug :("))}}m(TA,"hasAbstractRole");function AS(t,e){var r=Ss(t.querySelectorAll(e));return ny(t,"aria-owns").forEach(function(n){r.push.apply(r,Ss(n.querySelectorAll(e)))}),r}m(AS,"querySelectorAllSubtree");function Tj(t){return hj(t)?t.selectedOptions||AS(t,"[selected]"):AS(t,'[aria-selected="true"]')}m(Tj,"querySelectedOptions");function Sj(t){return Aa(t,PS)}m(Sj,"isMarkedPresentational");function Cj(t){return EA(t)}m(Cj,"isNativeHostLanguageTextAlternativeElement");function Pj(t){return Aa(t,["button","cell","checkbox","columnheader","gridcell","heading","label","legend","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","row","rowheader","switch","tab","tooltip","treeitem"])}m(Pj,"allowsNameFromContent");function Aj(t){return!1}m(Aj,"isDescendantOfNativeHostLanguageTextAlternativeElement");function Rj(t){return Mg(t)||pj(t)?t.value:t.textContent||""}m(Rj,"getValueOfTextbox");function RS(t){var e=t.getPropertyValue("content");return/^["'].*["']$/.test(e)?e.slice(1,-1):""}m(RS,"getTextualContent");function SA(t){var e=Qi(t);return e==="button"||e==="input"&&t.getAttribute("type")!=="hidden"||e==="meter"||e==="output"||e==="progress"||e==="select"||e==="textarea"}m(SA,"isLabelableElement");function CA(t){if(SA(t))return t;var e=null;return t.childNodes.forEach(function(r){if(e===null&&zn(r)){var n=CA(r);n!==null&&(e=n)}}),e}m(CA,"findLabelableElement");function Ij(t){if(t.control!==void 0)return t.control;var e=t.getAttribute("for");return e!==null?t.ownerDocument.getElementById(e):CA(t)}m(Ij,"getControlOfLabel");function Mj(t){var e=t.labels;if(e===null)return e;if(e!==void 0)return Ss(e);if(!SA(t))return null;var r=t.ownerDocument;return Ss(r.querySelectorAll("label")).filter(function(n){return Ij(n)===t})}m(Mj,"getLabels");function Oj(t){var e=t.assignedNodes();return e.length===0?Ss(t.childNodes):e}m(Oj,"getSlotContents");function PA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Jie,n=fj(t),i=e.compute,l=i===void 0?"name":i,c=e.computedStyleSupportsPseudoElements,s=c===void 0?e.getComputedStyle!==void 0:c,p=e.getComputedStyle,g=p===void 0?n.getComputedStyle.bind(n):p,_=e.hidden,x=_===void 0?!1:_;function P(j,$){var W="";if(zn(j)&&s){var X=g(j,"::before"),te=RS(X);W="".concat(te," ").concat(W)}var ne=yj(j)?Oj(j):Ss(j.childNodes).concat(ny(j,"aria-owns"));if(ne.forEach(function(K){var he=z(K,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!1,recursion:!0}),ue=zn(K)?g(K).getPropertyValue("display"):"inline",we=ue!=="inline"?" ":"";W+="".concat(we).concat(he).concat(we)}),zn(j)&&s){var Z=g(j,"::after"),U=RS(Z);W="".concat(W," ").concat(U)}return W.trim()}m(P,"computeMiscTextAlternative");function A(j,$){var W=j.getAttributeNode($);return W!==null&&!r.has(W)&&W.value.trim()!==""?(r.add(W),W.value):null}m(A,"useAttribute");function M(j){return zn(j)?A(j,"title"):null}m(M,"computeTooltipAttributeValue");function F(j){if(!zn(j))return null;if(mj(j)){r.add(j);for(var $=Ss(j.childNodes),W=0;W<$.length;W+=1){var X=$[W];if(gj(X))return z(X,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(dj(j)){r.add(j);for(var te=Ss(j.childNodes),ne=0;ne<te.length;ne+=1){var Z=te[ne];if(EA(Z))return z(Z,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(bj(j)){r.add(j);for(var U=Ss(j.childNodes),K=0;K<U.length;K+=1){var he=U[K];if(vj(he))return he.textContent}return null}else if(Qi(j)==="img"||Qi(j)==="area"){var ue=A(j,"alt");if(ue!==null)return ue}else if(uj(j)){var we=A(j,"label");if(we!==null)return we}if(Mg(j)&&(j.type==="button"||j.type==="submit"||j.type==="reset")){var Ie=A(j,"value");if(Ie!==null)return Ie;if(j.type==="submit")return"Submit";if(j.type==="reset")return"Reset"}var ee=Mj(j);if(ee!==null&&ee.length!==0)return r.add(j),Ss(ee).map(function(Xe){return z(Xe,{isEmbeddedInLabel:!0,isReferenced:!1,recursion:!0})}).filter(function(Xe){return Xe.length>0}).join(" ");if(Mg(j)&&j.type==="image"){var fe=A(j,"alt");if(fe!==null)return fe;var ve=A(j,"title");return ve!==null?ve:"Submit Query"}if(Aa(j,["button"])){var xe=P(j,{isEmbeddedInLabel:!1});if(xe!=="")return xe}return null}m(F,"computeElementTextAlternative");function z(j,$){if(r.has(j))return"";if(!x&&wj(j,g)&&!$.isReferenced)return r.add(j),"";var W=zn(j)?j.getAttributeNode("aria-labelledby"):null,X=W!==null&&!r.has(W)?ny(j,"aria-labelledby"):[];if(l==="name"&&!$.isReferenced&&X.length>0)return r.add(W),X.map(function(ue){return z(ue,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!0,recursion:!1})}).join(" ");var te=$.recursion&&Ej(j)&&l==="name";if(!te){var ne=(zn(j)&&j.getAttribute("aria-label")||"").trim();if(ne!==""&&l==="name")return r.add(j),ne;if(!Sj(j)){var Z=F(j);if(Z!==null)return r.add(j),Z}}if(Aa(j,["menu"]))return r.add(j),"";if(te||$.isEmbeddedInLabel||$.isReferenced){if(Aa(j,["combobox","listbox"])){r.add(j);var U=Tj(j);return U.length===0?Mg(j)?j.value:"":Ss(U).map(function(ue){return z(ue,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!1,recursion:!0})}).join(" ")}if(TA(j,"range"))return r.add(j),j.hasAttribute("aria-valuetext")?j.getAttribute("aria-valuetext"):j.hasAttribute("aria-valuenow")?j.getAttribute("aria-valuenow"):j.getAttribute("value")||"";if(Aa(j,["textbox"]))return r.add(j),Rj(j)}if(Pj(j)||zn(j)&&$.isReferenced||Cj(j)||Aj()){var K=P(j,{isEmbeddedInLabel:$.isEmbeddedInLabel});if(K!=="")return r.add(j),K}if(j.nodeType===j.TEXT_NODE)return r.add(j),j.textContent||"";if($.recursion)return r.add(j),P(j,{isEmbeddedInLabel:$.isEmbeddedInLabel});var he=M(j);return he!==null?(r.add(j),he):(r.add(j),"")}return m(z,"computeTextAlternative"),xj(z(t,{isEmbeddedInLabel:!1,isReferenced:l==="description",recursion:!1}))}m(PA,"computeTextAlternative");function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}m(ef,"_typeof");function IS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}m(IS,"ownKeys");function MS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IS(Object(r),!0).forEach(function(n){kj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}m(MS,"_objectSpread");function kj(t,e,r){return e=Lj(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(kj,"_defineProperty");function Lj(t){var e=Dj(t,"string");return ef(e)==="symbol"?e:String(e)}m(Lj,"_toPropertyKey");function Dj(t,e){if(ef(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ef(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}m(Dj,"_toPrimitive");function Nj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=ny(t,"aria-describedby").map(function(l){return PA(l,MS(MS({},e),{},{compute:"description"}))}).join(" ");if(r===""){var n=t.getAttribute("aria-description");r=n===null?"":n}if(r===""){var i=t.getAttribute("title");r=i===null?"":i}return r}m(Nj,"computeAccessibleDescription");function Fj(t){return Aa(t,["caption","code","deletion","emphasis","generic","insertion","none","paragraph","presentation","strong","subscript","superscript"])}m(Fj,"prohibitsNaming");function zj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Fj(t)?"":PA(t,e)}m(zj,"computeAccessibleName");var AA=Ti(IC(),1),Kie=Ti(eN(),1),Yie=Ti(tN(),1),jj=class extends Error{constructor(e,r,n,i){super(),Error.captureStackTrace&&Error.captureStackTrace(this,n);let l="";try{l=i.utils.printWithType("Received",r,i.utils.printReceived)}catch{}this.message=[i.utils.matcherHint(`${i.isNot?".not":""}.${n.name}`,"received",""),"",`${i.utils.RECEIVED_COLOR("received")} value must ${e}.`,l].join(`
`)}};m(jj,"GenericTypeError");var Bj=jj,qj=class extends Bj{constructor(...e){super("be an HTMLElement or an SVGElement",...e)}};m(qj,"HtmlElementTypeError");var VO=qj,$j=class extends Bj{constructor(...e){super("be a Node",...e)}};m($j,"NodeTypeError");var UO=$j;function RA(t,e,...r){if(!t||!t.ownerDocument||!t.ownerDocument.defaultView)throw new e(t,...r)}m(RA,"checkHasWindow");function Vj(t,...e){RA(t,UO,...e);const r=t.ownerDocument.defaultView;if(!(t instanceof r.Node))throw new UO(t,...e)}m(Vj,"checkNode");function on(t,...e){RA(t,VO,...e);const r=t.ownerDocument.defaultView;if(!(t instanceof r.HTMLElement)&&!(t instanceof r.SVGElement))throw new VO(t,...e)}m(on,"checkHtmlElement");var Uj=class extends Error{constructor(e,r,n){super(),Error.captureStackTrace&&Error.captureStackTrace(this,r),this.message=[e.message,"",n.utils.RECEIVED_COLOR("Failing css:"),n.utils.RECEIVED_COLOR(`${e.css}`)].join(`
`)}};m(Uj,"InvalidCSSError");var Xie=Uj;function Gj(t,...e){const r=Vie(`selector { ${t} }`,{silent:!0}).stylesheet;if(r.parsingErrors&&r.parsingErrors.length>0){const{reason:i,line:l}=r.parsingErrors[0];throw new Xie({css:t,message:`Syntax error parsing expected css: ${i} on line: ${l}`},...e)}return r.rules[0].declarations.filter(i=>i.type==="declaration").reduce((i,{property:l,value:c})=>Object.assign(i,{[l]:c}),{})}m(Gj,"parseCSS");function OS(t,e){return typeof e=="string"?e:t.utils.stringify(e)}m(OS,"display");function wi(t,e,r,n,i,l){return[`${e}
`,`${r}:
${t.utils.EXPECTED_COLOR((0,qO.default)(OS(t,n),2))}`,`${i}:
${t.utils.RECEIVED_COLOR((0,qO.default)(OS(t,l),2))}`].join(`
`)}m(wi,"getMessage");function Hj(t,e){return e instanceof RegExp?e.test(t):t.includes(String(e))}m(Hj,"matches");function Qy(t,e){console.warn(`Warning: ${t} has been deprecated and will be removed in future updates.`,e)}m(Qy,"deprecate");function e_(t){return t.replace(/\s+/g," ").trim()}m(e_,"normalize");function Al(t){return t.tagName&&t.tagName.toLowerCase()}m(Al,"getTag");function Jj({multiple:t,options:e}){const r=[...e].filter(n=>n.selected);if(t)return[...r].map(n=>n.value);if(r.length!==0)return r[0].value}m(Jj,"getSelectValue");function Wj(t){switch(t.type){case"number":return t.value===""?null:Number(t.value);case"checkbox":return t.checked;default:return t.value}}m(Wj,"getInputValue");var Qie=["meter","progressbar","slider","spinbutton"];function Zj(t){if(Qie.includes(t.getAttribute("role")))return Number(t.getAttribute("aria-valuenow"))}m(Zj,"getAccessibleValue");function IA(t){if(t)switch(t.tagName.toLowerCase()){case"input":return Wj(t);case"select":return Jj(t);default:return t.value??Zj(t)}}m(IA,"getSingleElementValue");function Kj(t,{wordConnector:e=", ",lastWordConnector:r=" and "}={}){return[t.slice(0,-1).join(e),t[t.length-1]].join(t.length>1?r:"")}m(Kj,"toSentence");function X1(t,e){return Array.isArray(t)&&Array.isArray(e)?[...new Set(t)].every(r=>new Set(e).has(r)):t===e}m(X1,"compareAsSet");function Jb(t,e){return Qy("toBeInTheDOM","Please use toBeInTheDocument for searching the entire document and toContainElement for searching a specific container."),t&&on(t,Jb,this),e&&on(e,Jb,this),{pass:e?e.contains(t):!!t,message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toBeInTheDOM`,"element",""),"","Received:",`  ${this.utils.printReceived(t&&t.cloneNode(!1))}`].join(`
`),"message")}}m(Jb,"toBeInTheDOM");function MA(t){(t!==null||!this.isNot)&&on(t,MA,this);const e=t===null?!1:t.ownerDocument===t.getRootNode({composed:!0}),r=m(()=>`expected document not to contain element, found ${this.utils.stringify(t.cloneNode(!0))} instead`,"errorFound"),n=m(()=>"element could not be found in the document","errorNotFound");return{pass:e,message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toBeInTheDocument`,"element",""),"",this.utils.RECEIVED_COLOR(this.isNot?r():n())].join(`
`),"message")}}m(MA,"toBeInTheDocument");function OA(t){return Qy("toBeEmpty","Please use instead toBeEmptyDOMElement for finding empty nodes in the DOM."),on(t,OA,this),{pass:t.innerHTML==="",message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toBeEmpty`,"element",""),"","Received:",`  ${this.utils.printReceived(t.innerHTML)}`].join(`
`),"message")}}m(OA,"toBeEmpty");function kA(t){return on(t,kA,this),{pass:Yj(t),message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toBeEmptyDOMElement`,"element",""),"","Received:",`  ${this.utils.printReceived(t.innerHTML)}`].join(`
`),"message")}}m(kA,"toBeEmptyDOMElement");function Yj(t){return[...t.childNodes].filter(r=>r.nodeType!==8).length===0}m(Yj,"isEmptyElement");function Wb(t,e){return on(t,Wb,this),e!==null&&on(e,Wb,this),{pass:t.contains(e),message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toContainElement`,"element","element"),"",this.utils.RECEIVED_COLOR(`${this.utils.stringify(t.cloneNode(!1))} ${this.isNot?"contains:":"does not contain:"} ${this.utils.stringify(e&&e.cloneNode(!1))}
        `)].join(`
`),"message")}}m(Wb,"toContainElement");function Xj(t,e){const r=t.ownerDocument.createElement("div");return r.innerHTML=e,r.innerHTML}m(Xj,"getNormalizedHtml");function LA(t,e){if(on(t,LA,this),typeof e!="string")throw new Error(`.toContainHTML() expects a string value, got ${e}`);return{pass:t.outerHTML.includes(Xj(t,e)),message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toContainHTML`,"element",""),"Expected:",`  ${this.utils.EXPECTED_COLOR(e)}`,"Received:",`  ${this.utils.printReceived(t.cloneNode(!0))}`].join(`
`),"message")}}m(LA,"toContainHTML");function DA(t,e,r={normalizeWhitespace:!0}){Vj(t,DA,this);const n=r.normalizeWhitespace?e_(t.textContent):t.textContent.replace(/\u00a0/g," "),i=n!==""&&e==="";return{pass:!i&&Hj(n,e),message:m(()=>{const l=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveTextContent`,"element",""),i?"Checking with empty string will always match, use .toBeEmptyDOMElement() instead":`Expected element ${l} have text content`,e,"Received",n)},"message")}}m(DA,"toHaveTextContent");function Zb(t,e){on(t,Zb,this);const r=Nj(t),n=arguments.length===1;let i=!1;return n?i=r!=="":i=e instanceof RegExp?e.test(r):this.equals(r,e),{pass:i,message:m(()=>{const l=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.${Zb.name}`,"element",""),`Expected element ${l} have accessible description`,e,"Received",r)},"message")}}m(Zb,"toHaveAccessibleDescription");var eg="aria-invalid",eoe=["false"];function NA(t,e){on(t,NA,this);const r=this.isNot?"not to":"to",n=this.isNot?".not.toHaveAccessibleErrorMessage":".toHaveAccessibleErrorMessage",i=t.getAttribute("aria-errormessage");if(!!i&&/\s+/.test(i))return{pass:!1,message:m(()=>wi(this,this.utils.matcherHint(n,"element"),"Expected element's `aria-errormessage` attribute to be empty or a single, valid ID","","Received",`aria-errormessage="${i}"`),"message")};const c=t.getAttribute(eg);if(!t.hasAttribute(eg)||eoe.includes(c))return{pass:!1,message:m(()=>wi(this,this.utils.matcherHint(n,"element"),"Expected element to be marked as invalid with attribute",`${eg}="${String(!0)}"`,"Received",t.hasAttribute("aria-invalid")?`${eg}="${t.getAttribute(eg)}`:null),"message")};const p=e_(t.ownerDocument.getElementById(i)?.textContent??"");return{pass:e===void 0?!!p:e instanceof RegExp?e.test(p):this.equals(p,e),message:m(()=>wi(this,this.utils.matcherHint(n,"element"),`Expected element ${r} have accessible error message`,e??"","Received",p),"message")}}m(NA,"toHaveAccessibleErrorMessage");var toe=tB(AA.elementRoles);function Kb(t,e){on(t,Kb,this);const r=Qj(t);return{pass:r.some(i=>i===e),message:m(()=>{const i=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.${Kb.name}`,"element",""),`Expected element ${i} have role`,e,"Received",r.join(", "))},"message")}}m(Kb,"toHaveRole");function Qj(t){return t.hasAttribute("role")?t.getAttribute("role").split(" ").filter(Boolean):eB(t)}m(Qj,"getExplicitOrImplicitRoles");function eB(t){for(const{match:e,roles:r}of toe)if(e(t))return[...r];return[]}m(eB,"getImplicitAriaRoles");function tB(t){function e({name:c,attributes:s}){return`${c}${s.map(({name:p,value:g,constraints:_=[]})=>_.indexOf("undefined")!==-1?`:not([${p}])`:g?`[${p}="${g}"]`:`[${p}]`).join("")}`}m(e,"makeElementSelector");function r({attributes:c=[]}){return c.length}m(r,"getSelectorSpecificity");function n({specificity:c},{specificity:s}){return s-c}m(n,"bySelectorSpecificity");function i(c){let{attributes:s=[]}=c;const p=s.findIndex(_=>_.value&&_.name==="type"&&_.value==="text");p>=0&&(s=[...s.slice(0,p),...s.slice(p+1)]);const g=e({...c,attributes:s});return _=>p>=0&&_.type!=="text"?!1:_.matches(g)}m(i,"match");let l=[];for(const[c,s]of t.entries())l=[...l,{match:i(c),roles:Array.from(s),specificity:r(c)}];return l.sort(n)}m(tB,"buildElementRoleList");function Yb(t,e){on(t,Yb,this);const r=zj(t),n=arguments.length===1;let i=!1;return n?i=r!=="":i=e instanceof RegExp?e.test(r):this.equals(r,e),{pass:i,message:m(()=>{const l=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.${Yb.name}`,"element",""),`Expected element ${l} have accessible name`,e,"Received",r)},"message")}}m(Yb,"toHaveAccessibleName");function kS(t,e,r){return r===void 0?e:`${e}=${t(r)}`}m(kS,"printAttribute");function rB(t,e,r){return r===void 0?`element.hasAttribute(${t(e)})`:`element.getAttribute(${t(e)}) === ${t(r)}`}m(rB,"getAttributeComment");function FA(t,e,r){on(t,FA,this);const n=r!==void 0,i=t.hasAttribute(e),l=t.getAttribute(e);return{pass:n?i&&this.equals(l,r):i,message:m(()=>{const c=this.isNot?"not to":"to",s=i?kS(this.utils.stringify,e,l):null,p=this.utils.matcherHint(`${this.isNot?".not":""}.toHaveAttribute`,"element",this.utils.printExpected(e),{secondArgument:n?this.utils.printExpected(r):void 0,comment:rB(this.utils.stringify,e,r)});return wi(this,p,`Expected the element ${c} have attribute`,kS(this.utils.stringify,e,r),"Received",s)},"message")}}m(FA,"toHaveAttribute");function nB(t){const e=t.pop();let r,n;return typeof e=="object"&&!(e instanceof RegExp)?(r=t,n=e):(r=t.concat(e),n={exact:!1}),{expectedClassNames:r,options:n}}m(nB,"getExpectedClassNamesAndOptions");function LS(t){return t?t.split(/\s+/).filter(e=>e.length>0):[]}m(LS,"splitClassNames");function DS(t,e){return t.every(r=>typeof r=="string"?e.includes(r):e.some(n=>r.test(n)))}m(DS,"isSubset$1");function zA(t,...e){on(t,zA,this);const{expectedClassNames:r,options:n}=nB(e),i=LS(t.getAttribute("class")),l=r.reduce((s,p)=>s.concat(typeof p=="string"||!p?LS(p):p),[]),c=l.some(s=>s instanceof RegExp);if(n.exact&&c)throw new Error("Exact option does not support RegExp expected class names");return n.exact?{pass:DS(l,i)&&l.length===i.length,message:m(()=>{const s=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveClass`,"element",this.utils.printExpected(l.join(" "))),`Expected the element ${s} have EXACTLY defined classes`,l.join(" "),"Received",i.join(" "))},"message")}:l.length>0?{pass:DS(l,i),message:m(()=>{const s=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveClass`,"element",this.utils.printExpected(l.join(" "))),`Expected the element ${s} have class`,l.join(" "),"Received",i.join(" "))},"message")}:{pass:this.isNot?i.length>0:!1,message:m(()=>this.isNot?wi(this,this.utils.matcherHint(".not.toHaveClass","element",""),"Expected the element to have classes","(none)","Received",i.join(" ")):[this.utils.matcherHint(".toHaveClass","element"),"At least one expected class must be provided."].join(`
`),"message")}}m(zA,"toHaveClass");function iB(t,e){const r={},n=t.createElement("div");return Object.keys(e).forEach(i=>{n.style[i]=e[i],r[i]=n.style[i]}),r}m(iB,"getStyleDeclaration");function oB(t,e){return!!Object.keys(t).length&&Object.entries(t).every(([r,n])=>{const i=r.startsWith("--"),l=[r];return i||l.push(r.toLowerCase()),l.some(c=>e[c]===n||e.getPropertyValue(c)===n)})}m(oB,"isSubset");function NS(t){return Object.keys(t).sort().map(e=>`${e}: ${t[e]};`).join(`
`)}m(NS,"printoutStyles");function sB(t,e,r){const n=Array.from(r).filter(l=>e[l]!==void 0).reduce((l,c)=>Object.assign(l,{[c]:r.getPropertyValue(c)}),{});return t(NS(e),NS(n)).replace(`${Kie.default.red("+ Received")}
`,"")}m(sB,"expectedDiff");function Xb(t,e){on(t,Xb,this);const r=typeof e=="object"?e:Gj(e,Xb,this),{getComputedStyle:n}=t.ownerDocument.defaultView,i=iB(t.ownerDocument,r),l=n(t);return{pass:oB(i,l),message:m(()=>{const c=`${this.isNot?".not":""}.toHaveStyle`;return[this.utils.matcherHint(c,"element",""),sB(this.utils.diff,i,l)].join(`

`)},"message")}}m(Xb,"toHaveStyle");function jA(t){return on(t,jA,this),{pass:t.ownerDocument.activeElement===t,message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toHaveFocus`,"element",""),"",...this.isNot?["Received element is focused:",`  ${this.utils.printReceived(t)}`]:["Expected element with focus:",`  ${this.utils.printExpected(t)}`,"Received element with focus:",`  ${this.utils.printReceived(t.ownerDocument.activeElement)}`]].join(`
`),"message")}}m(jA,"toHaveFocus");function aB(t){const e=[...new Set(t.map(r=>r.type))];if(e.length!==1)throw new Error("Multiple form elements with the same name must be of the same type");switch(e[0]){case"radio":{const r=t.find(n=>n.checked);return r?r.value:void 0}case"checkbox":return t.filter(r=>r.checked).map(r=>r.value);default:return t.map(r=>r.value)}}m(aB,"getMultiElementValue");function lB(t,e){const r=[...t.querySelectorAll(`[name="${(0,Yie.default)(e)}"]`)];if(r.length!==0)switch(r.length){case 1:return IA(r[0]);default:return aB(r)}}m(lB,"getFormValue");function cB(t){return/\[\]$/.test(t)?t.slice(0,-2):t}m(cB,"getPureName");function uB(t){return Array.from(t.elements).map(r=>r.name).reduce((r,n)=>({...r,[cB(n)]:lB(t,n)}),{})}m(uB,"getAllFormValues");function BA(t,e){if(on(t,BA,this),!t.elements)throw new Error("toHaveFormValues must be called on a form or a fieldset");const r=uB(t);return{pass:Object.entries(e).every(([n,i])=>X1(r[n],i)),message:m(()=>{const n=this.isNot?"not to":"to",i=`${this.isNot?".not":""}.toHaveFormValues`,l=Object.keys(r).filter(c=>e.hasOwnProperty(c)).reduce((c,s)=>({...c,[s]:r[s]}),{});return[this.utils.matcherHint(i,"element",""),`Expected the element ${n} have form values`,this.utils.diff(e,l)].join(`

`)},"message")}}m(BA,"toHaveFormValues");function hB(t){const{getComputedStyle:e}=t.ownerDocument.defaultView,{display:r,visibility:n,opacity:i}=e(t);return r!=="none"&&n!=="hidden"&&n!=="collapse"&&i!=="0"&&i!==0}m(hB,"isStyleVisible");function dB(t,e){let r;return e?r=t.nodeName==="DETAILS"&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0:r=t.nodeName==="DETAILS"?t.hasAttribute("open"):!0,!t.hasAttribute("hidden")&&r}m(dB,"isAttributeVisible");function qA(t,e){return hB(t)&&dB(t,e)&&(!t.parentElement||qA(t.parentElement,t))}m(qA,"isElementVisible");function $A(t){on(t,$A,this);const e=t.ownerDocument===t.getRootNode({composed:!0}),r=e&&qA(t);return{pass:r,message:m(()=>{const n=r?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeVisible`,"element",""),"",`Received element ${n} visible${e?"":" (element is not in the document)"}:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m($A,"toBeVisible");var roe=["fieldset","input","select","optgroup","option","button","textarea"];function pB(t,e){return Al(t)==="legend"&&Al(e)==="fieldset"&&t.isSameNode(Array.from(e.children).find(r=>Al(r)==="legend"))}m(pB,"isFirstLegendChildOfFieldset");function fB(t,e){return UA(e)&&!pB(t,e)}m(fB,"isElementDisabledByParent");function mB(t){return t.includes("-")}m(mB,"isCustomElement");function VA(t){const e=Al(t);return roe.includes(e)||mB(e)}m(VA,"canElementBeDisabled");function UA(t){return VA(t)&&t.hasAttribute("disabled")}m(UA,"isElementDisabled");function GA(t){const e=t.parentElement;return!!e&&(fB(t,e)||GA(e))}m(GA,"isAncestorDisabled");function HA(t){return VA(t)&&(UA(t)||GA(t))}m(HA,"isElementOrAncestorDisabled");function JA(t){on(t,JA,this);const e=HA(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeDisabled`,"element",""),"",`Received element ${r} disabled:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(JA,"toBeDisabled");function WA(t){on(t,WA,this);const e=!HA(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeEnabled`,"element",""),"",`Received element ${r} enabled:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(WA,"toBeEnabled");var noe=["select","textarea"],ioe=["input","select","textarea"],ooe=["color","hidden","range","submit","image","reset"],soe=["checkbox","combobox","gridcell","listbox","radiogroup","spinbutton","textbox","tree"];function gB(t){return noe.includes(Al(t))&&t.hasAttribute("required")}m(gB,"isRequiredOnFormTagsExceptInput");function yB(t){return Al(t)==="input"&&t.hasAttribute("required")&&(t.hasAttribute("type")&&!ooe.includes(t.getAttribute("type"))||!t.hasAttribute("type"))}m(yB,"isRequiredOnSupportedInput");function _B(t){return t.hasAttribute("aria-required")&&t.getAttribute("aria-required")==="true"&&(ioe.includes(Al(t))||t.hasAttribute("role")&&soe.includes(t.getAttribute("role")))}m(_B,"isElementRequiredByARIA");function ZA(t){on(t,ZA,this);const e=gB(t)||yB(t)||_B(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeRequired`,"element",""),"",`Received element ${r} required:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(ZA,"toBeRequired");var aoe=["form","input","select","textarea"];function bB(t){return t.hasAttribute("aria-invalid")&&t.getAttribute("aria-invalid")!=="false"}m(bB,"isElementHavingAriaInvalid");function vB(t){return aoe.includes(Al(t))}m(vB,"isSupportsValidityMethod");function KA(t){const e=bB(t);return vB(t)?e||!t.checkValidity():e}m(KA,"isElementInvalid");function YA(t){on(t,YA,this);const e=KA(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeInvalid`,"element",""),"",`Received element ${r} currently invalid:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(YA,"toBeInvalid");function XA(t){on(t,XA,this);const e=!KA(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeValid`,"element",""),"",`Received element ${r} currently valid:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(XA,"toBeValid");function QA(t,e){if(on(t,QA,this),t.tagName.toLowerCase()==="input"&&["checkbox","radio"].includes(t.type))throw new Error("input with type=checkbox or type=radio cannot be used with .toHaveValue(). Use .toBeChecked() for type=checkbox or .toHaveFormValues() instead");const r=IA(t),n=e!==void 0;let i=e,l=r;return e==r&&e!==r&&(i=`${e} (${typeof e})`,l=`${r} (${typeof r})`),{pass:n?X1(r,e):!!r,message:m(()=>{const c=this.isNot?"not to":"to",s=this.utils.matcherHint(`${this.isNot?".not":""}.toHaveValue`,"element",e);return wi(this,s,`Expected the element ${c} have value`,n?i:"(any)","Received",l)},"message")}}m(QA,"toHaveValue");function eR(t,e){on(t,eR,this);const r=t.tagName.toLowerCase();if(!["select","input","textarea"].includes(r))throw new Error(".toHaveDisplayValue() currently supports only input, textarea or select elements, try with another matcher instead.");if(r==="input"&&["radio","checkbox"].includes(t.type))throw new Error(`.toHaveDisplayValue() currently does not support input[type="${t.type}"], try with another matcher instead.`);const n=xB(r,t),i=wB(e),l=i.filter(p=>n.some(g=>p instanceof RegExp?p.test(g):this.equals(g,String(p)))).length,c=l===n.length,s=l===i.length;return{pass:c&&s,message:m(()=>wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveDisplayValue`,"element",""),`Expected element ${this.isNot?"not ":""}to have display value`,e,"Received",n),"message")}}m(eR,"toHaveDisplayValue");function xB(t,e){return t==="select"?Array.from(e).filter(r=>r.selected).map(r=>r.textContent):[e.value]}m(xB,"getValues");function wB(t){return t instanceof Array?t:[t]}m(wB,"getExpectedValues");function tR(t){on(t,tR,this);const e=m(()=>t.tagName.toLowerCase()==="input"&&["checkbox","radio"].includes(t.type),"isValidInput"),r=m(()=>rR(t.getAttribute("role"))&&["true","false"].includes(t.getAttribute("aria-checked")),"isValidAriaElement");if(!e()&&!r())return{pass:!1,message:m(()=>`only inputs with type="checkbox" or type="radio" or elements with ${EB()} and a valid aria-checked attribute can be used with .toBeChecked(). Use .toHaveValue() instead`,"message")};const n=m(()=>e()?t.checked:t.getAttribute("aria-checked")==="true","isChecked");return{pass:n(),message:m(()=>{const i=n()?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeChecked`,"element",""),"",`Received element ${i} checked:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(tR,"toBeChecked");function EB(){return Kj(TB().map(t=>`role="${t}"`),{lastWordConnector:" or "})}m(EB,"supportedRolesSentence");function TB(){return AA.roles.keys().filter(rR)}m(TB,"supportedRoles");function rR(t){return AA.roles.get(t)?.props["aria-checked"]!==void 0}m(rR,"roleSupportsChecked");function nR(t){on(t,nR,this);const e=m(()=>t.tagName.toLowerCase()==="input"&&t.type==="checkbox","isValidInput"),r=m(()=>t.getAttribute("role")==="checkbox","isValidAriaElement");if(!e()&&!r())return{pass:!1,message:m(()=>'only inputs with type="checkbox" or elements with role="checkbox" and a valid aria-checked attribute can be used with .toBePartiallyChecked(). Use .toHaveValue() instead',"message")};const n=m(()=>{const i=t.getAttribute("aria-checked")==="mixed";return e()&&t.indeterminate||i},"isPartiallyChecked");return{pass:n(),message:m(()=>{const i=n()?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBePartiallyChecked`,"element",""),"",`Received element ${i} partially checked:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(nR,"toBePartiallyChecked");function iR(t,e){Qy("toHaveDescription","Please use toHaveAccessibleDescription."),on(t,iR,this);const r=e!==void 0,i=(t.getAttribute("aria-describedby")||"").split(/\s+/).filter(Boolean);let l="";if(i.length>0){const c=t.ownerDocument,s=i.map(p=>c.getElementById(p)).filter(Boolean);l=e_(s.map(p=>p.textContent).join(" "))}return{pass:r?e instanceof RegExp?e.test(l):this.equals(l,e):!!l,message:m(()=>{const c=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveDescription`,"element",""),`Expected the element ${c} have description`,this.utils.printExpected(e),"Received",this.utils.printReceived(l))},"message")}}m(iR,"toHaveDescription");function oR(t,e){if(Qy("toHaveErrorMessage","Please use toHaveAccessibleErrorMessage."),on(t,oR,this),!t.hasAttribute("aria-invalid")||t.getAttribute("aria-invalid")==="false"){const c=this.isNot?".not":"";return{pass:!1,message:m(()=>wi(this,this.utils.matcherHint(`${c}.toHaveErrorMessage`,"element",""),"Expected the element to have invalid state indicated by",'aria-invalid="true"',"Received",t.hasAttribute("aria-invalid")?`aria-invalid="${t.getAttribute("aria-invalid")}"`:this.utils.printReceived("")),"message")}}const r=e!==void 0,i=(t.getAttribute("aria-errormessage")||"").split(/\s+/).filter(Boolean);let l="";if(i.length>0){const c=t.ownerDocument,s=i.map(p=>c.getElementById(p)).filter(Boolean);l=e_(s.map(p=>p.textContent).join(" "))}return{pass:r?e instanceof RegExp?e.test(l):this.equals(l,e):!!l,message:m(()=>{const c=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveErrorMessage`,"element",""),`Expected the element ${c} have error message`,this.utils.printExpected(e),"Received",this.utils.printReceived(l))},"message")}}m(oR,"toHaveErrorMessage");function SB(t){const e=t.ownerDocument.getSelection();if(["input","textarea"].includes(t.tagName.toLowerCase()))return["radio","checkbox"].includes(t.type)?"":t.value.toString().substring(t.selectionStart,t.selectionEnd);if(e.anchorNode===null||e.focusNode===null)return"";const r=e.getRangeAt(0),n=t.ownerDocument.createRange();if(e.containsNode(t,!1))n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n);else if(!(t.contains(e.anchorNode)&&t.contains(e.focusNode))){const l=t===r.startContainer||t.contains(r.startContainer),c=t===r.endContainer||t.contains(r.endContainer);e.removeAllRanges(),(l||c)&&(n.selectNodeContents(t),l&&n.setStart(r.startContainer,r.startOffset),c&&n.setEnd(r.endContainer,r.endOffset),e.addRange(n))}const i=e.toString();return e.removeAllRanges(),e.addRange(r),i}m(SB,"getSelection");function sR(t,e){on(t,sR,this);const r=e!==void 0;if(r&&typeof e!="string")throw new Error("expected selection must be a string or undefined");const n=SB(t);return{pass:r?X1(n,e):!!n,message:m(()=>{const i=this.isNot?"not to":"to",l=this.utils.matcherHint(`${this.isNot?".not":""}.toHaveSelection`,"element",e);return wi(this,l,`Expected the element ${i} have selection`,r?e:"(any)","Received",n)},"message")}}m(sR,"toHaveSelection");function aR(t){on(t,aR,this);const e=(t.getAttribute("role")||"").split(" ").map(c=>c.trim()),r=t.tagName.toLowerCase()==="button"||t.tagName.toLowerCase()==="input"&&t.type==="button"||e.includes("button"),n=t.getAttribute("aria-pressed");return!r||!(n==="true"||n==="false")?{pass:!1,message:m(()=>'Only button or input with type="button" or element with role="button" and a valid aria-pressed attribute can be used with .toBePressed()',"message")}:{pass:r&&n==="true",message:m(()=>{const c=this.utils.matcherHint(`${this.isNot?".not":""}.toBePressed`,"element","");return wi(this,c,"Expected element to have",`aria-pressed="${this.isNot?"false":"true"}"`,"Received",`aria-pressed="${n}"`)},"message")}}m(aR,"toBePressed");function lR(t){on(t,lR,this);const e=(t.getAttribute("role")||"").split(" ").map(c=>c.trim()),r=t.tagName.toLowerCase()==="button"||t.tagName.toLowerCase()==="input"&&t.type==="button"||e.includes("button"),n=t.getAttribute("aria-pressed");return!r||!(n==="true"||n==="false"||n==="mixed")?{pass:!1,message:m(()=>'Only button or input with type="button" or element with role="button" and a valid aria-pressed attribute can be used with .toBePartiallyPressed()',"message")}:{pass:r&&n==="mixed",message:m(()=>{const c=this.isNot?"not to":"to",s=this.utils.matcherHint(`${this.isNot?".not":""}.toBePartiallyPressed`,"element","");return wi(this,s,`Expected element ${c} have`,'aria-pressed="mixed"',"Received",`aria-pressed="${n}"`)},"message")}}m(lR,"toBePartiallyPressed");var loe=1,CB=2,PB=4,coe=8,uoe=16,hoe=32,GO={[loe]:"Node.DOCUMENT_POSITION_DISCONNECTED",[CB]:"Node.DOCUMENT_POSITION_PRECEDING",[PB]:"Node.DOCUMENT_POSITION_FOLLOWING",[coe]:"Node.DOCUMENT_POSITION_CONTAINS",[uoe]:"Node.DOCUMENT_POSITION_CONTAINED_BY",[hoe]:"Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC"};function AB(t){return t in GO?`${GO[t]} (${t})`:`Unknown document position (${t})`}m(AB,"makeDocumentPositionErrorString");function cR(t,e){return function(r,n){on(r,Qb,this),on(n,Qb,this);const i=r.compareDocumentPosition(n);return{pass:i===e,message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.${t}`,"element","secondElement"),"",`Received: ${AB(i)}`].join(`
`),"message")}}}m(cR,"checkToAppear");function Qb(t,e){return cR("toAppearBefore",PB).apply(this,[t,e])}m(Qb,"toAppearBefore");function RB(t,e){return cR("toAppearAfter",CB).apply(this,[t,e])}m(RB,"toAppearAfter");Ti(QD(),1);Ti(IC(),1);Ti(eN(),1);Ti(tN(),1);var GE,HO;function IB(){if(HO)return GE;HO=1;var t,e,r,n,i,l,c,s,p,g,_,x,P,A,M,F,z,j,$;return P=/\/(?![*\/])(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\\]).|\\.)*(\/[$_\u200C\u200D\p{ID_Continue}]*|\\)?/yu,x=/--|\+\+|=>|\.{3}|\??\.(?!\d)|(?:&&|\|\||\?\?|[+\-%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2}|\/(?![\/*]))=?|[?~,:;[\](){}]/y,t=/(\x23?)(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+/yu,M=/(['"])(?:(?!\1)[^\\\n\r]|\\(?:\r\n|[^]))*(\1)?/y,_=/(?:0[xX][\da-fA-F](?:_?[\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|0n|[1-9](?:_?\d)*n|(?:(?:0(?!\d)|0\d*[89]\d*|[1-9](?:_?\d)*)(?:\.(?:\d(?:_?\d)*)?)?|\.\d(?:_?\d)*)(?:[eE][+-]?\d(?:_?\d)*)?|0[0-7]+/y,F=/[`}](?:[^`\\$]|\\[^]|\$(?!\{))*(`|\$\{)?/y,$=/[\t\v\f\ufeff\p{Zs}]+/yu,s=/\r?\n|[\r\u2028\u2029]/y,p=/\/\*(?:[^*]|\*(?!\/))*(\*\/)?/y,A=/\/\/.*/y,r=/[<>.:={}]|\/(?![\/*])/y,e=/[$_\p{ID_Start}][$_\u200C\u200D\p{ID_Continue}-]*/yu,n=/(['"])(?:(?!\1)[^])*(\1)?/y,i=/[^<>{}]+/y,j=/^(?:[\/+-]|\.{3}|\?(?:InterpolationIn(?:JSX|Template)|NoLineTerminatorHere|NonExpressionParenEnd|UnaryIncDec))?$|[{}([,;<>=*%&|^!~?:]$/,z=/^(?:=>|[;\]){}]|else|\?(?:NoLineTerminatorHere|NonExpressionParenEnd))?$/,l=/^(?:await|case|default|delete|do|else|instanceof|new|return|throw|typeof|void|yield)$/,c=/^(?:return|throw|yield)$/,g=RegExp(s.source),GE=m(function*(W,{jsx:X=!1}={}){var te,ne,Z,U,K,he,ue,we,Ie,ee,fe,ve,xe,Xe;for({length:he}=W,U=0,K="",Xe=[{tag:"JS"}],te=[],fe=0,ve=!1;U<he;){switch(we=Xe[Xe.length-1],we.tag){case"JS":case"JSNonExpressionParen":case"InterpolationInTemplate":case"InterpolationInJSX":if(W[U]==="/"&&(j.test(K)||l.test(K))&&(P.lastIndex=U,ue=P.exec(W))){U=P.lastIndex,K=ue[0],ve=!0,yield{type:"RegularExpressionLiteral",value:ue[0],closed:ue[1]!==void 0&&ue[1]!=="\\"};continue}if(x.lastIndex=U,ue=x.exec(W)){switch(xe=ue[0],Ie=x.lastIndex,ee=xe,xe){case"(":K==="?NonExpressionParenKeyword"&&Xe.push({tag:"JSNonExpressionParen",nesting:fe}),fe++,ve=!1;break;case")":fe--,ve=!0,we.tag==="JSNonExpressionParen"&&fe===we.nesting&&(Xe.pop(),ee="?NonExpressionParenEnd",ve=!1);break;case"{":x.lastIndex=0,Z=!z.test(K)&&(j.test(K)||l.test(K)),te.push(Z),ve=!1;break;case"}":switch(we.tag){case"InterpolationInTemplate":if(te.length===we.nesting){F.lastIndex=U,ue=F.exec(W),U=F.lastIndex,K=ue[0],ue[1]==="${"?(K="?InterpolationInTemplate",ve=!1,yield{type:"TemplateMiddle",value:ue[0]}):(Xe.pop(),ve=!0,yield{type:"TemplateTail",value:ue[0],closed:ue[1]==="`"});continue}break;case"InterpolationInJSX":if(te.length===we.nesting){Xe.pop(),U+=1,K="}",yield{type:"JSXPunctuator",value:"}"};continue}}ve=te.pop(),ee=ve?"?ExpressionBraceEnd":"}";break;case"]":ve=!0;break;case"++":case"--":ee=ve?"?PostfixIncDec":"?UnaryIncDec";break;case"<":if(X&&(j.test(K)||l.test(K))){Xe.push({tag:"JSXTag"}),U+=1,K="<",yield{type:"JSXPunctuator",value:xe};continue}ve=!1;break;default:ve=!1}U=Ie,K=ee,yield{type:"Punctuator",value:xe};continue}if(t.lastIndex=U,ue=t.exec(W)){switch(U=t.lastIndex,ee=ue[0],ue[0]){case"for":case"if":case"while":case"with":K!=="."&&K!=="?."&&(ee="?NonExpressionParenKeyword")}K=ee,ve=!l.test(ue[0]),yield{type:ue[1]==="#"?"PrivateIdentifier":"IdentifierName",value:ue[0]};continue}if(M.lastIndex=U,ue=M.exec(W)){U=M.lastIndex,K=ue[0],ve=!0,yield{type:"StringLiteral",value:ue[0],closed:ue[2]!==void 0};continue}if(_.lastIndex=U,ue=_.exec(W)){U=_.lastIndex,K=ue[0],ve=!0,yield{type:"NumericLiteral",value:ue[0]};continue}if(F.lastIndex=U,ue=F.exec(W)){U=F.lastIndex,K=ue[0],ue[1]==="${"?(K="?InterpolationInTemplate",Xe.push({tag:"InterpolationInTemplate",nesting:te.length}),ve=!1,yield{type:"TemplateHead",value:ue[0]}):(ve=!0,yield{type:"NoSubstitutionTemplate",value:ue[0],closed:ue[1]==="`"});continue}break;case"JSXTag":case"JSXTagEnd":if(r.lastIndex=U,ue=r.exec(W)){switch(U=r.lastIndex,ee=ue[0],ue[0]){case"<":Xe.push({tag:"JSXTag"});break;case">":Xe.pop(),K==="/"||we.tag==="JSXTagEnd"?(ee="?JSX",ve=!0):Xe.push({tag:"JSXChildren"});break;case"{":Xe.push({tag:"InterpolationInJSX",nesting:te.length}),ee="?InterpolationInJSX",ve=!1;break;case"/":K==="<"&&(Xe.pop(),Xe[Xe.length-1].tag==="JSXChildren"&&Xe.pop(),Xe.push({tag:"JSXTagEnd"}))}K=ee,yield{type:"JSXPunctuator",value:ue[0]};continue}if(e.lastIndex=U,ue=e.exec(W)){U=e.lastIndex,K=ue[0],yield{type:"JSXIdentifier",value:ue[0]};continue}if(n.lastIndex=U,ue=n.exec(W)){U=n.lastIndex,K=ue[0],yield{type:"JSXString",value:ue[0],closed:ue[2]!==void 0};continue}break;case"JSXChildren":if(i.lastIndex=U,ue=i.exec(W)){U=i.lastIndex,K=ue[0],yield{type:"JSXText",value:ue[0]};continue}switch(W[U]){case"<":Xe.push({tag:"JSXTag"}),U++,K="<",yield{type:"JSXPunctuator",value:"<"};continue;case"{":Xe.push({tag:"InterpolationInJSX",nesting:te.length}),U++,K="?InterpolationInJSX",ve=!1,yield{type:"JSXPunctuator",value:"{"};continue}}if($.lastIndex=U,ue=$.exec(W)){U=$.lastIndex,yield{type:"WhiteSpace",value:ue[0]};continue}if(s.lastIndex=U,ue=s.exec(W)){U=s.lastIndex,ve=!1,c.test(K)&&(K="?NoLineTerminatorHere"),yield{type:"LineTerminatorSequence",value:ue[0]};continue}if(p.lastIndex=U,ue=p.exec(W)){U=p.lastIndex,g.test(ue[0])&&(ve=!1,c.test(K)&&(K="?NoLineTerminatorHere")),yield{type:"MultiLineComment",value:ue[0],closed:ue[1]!==void 0};continue}if(A.lastIndex=U,ue=A.exec(W)){U=A.lastIndex,ve=!1,yield{type:"SingleLineComment",value:ue[0]};continue}ne=String.fromCodePoint(W.codePointAt(U)),U+=ne.length,K=ne,ve=!1,yield{type:we.tag.startsWith("JSX")?"JSXInvalid":"Invalid",value:ne}}},"jsTokens_1"),GE}m(IB,"requireJsTokens");var doe=IB();TP(doe);var MB={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"]};new Set(MB.keyword);new Set(MB.strict);function Og(t,e){if(!t)throw new Error(e)}m(Og,"S");function sh(t,e){return typeof e===t}m(sh,"f");function OB(t){return t instanceof Promise}m(OB,"w");function tf(t,e,r){Object.defineProperty(t,e,r)}m(tf,"u");function yh(t,e,r){tf(t,e,{value:r,configurable:!0,writable:!0})}m(yh,"l");var Hc=Symbol.for("tinyspy:spy"),poe=new Set,foe=m(t=>{t.called=!1,t.callCount=0,t.calls=[],t.results=[],t.resolves=[],t.next=[]},"h"),moe=m(t=>(tf(t,Hc,{value:{reset:m(()=>foe(t[Hc]),"reset")}}),t[Hc]),"k"),FS=m(t=>t[Hc]||moe(t),"T");function kB(t){Og(sh("function",t)||sh("undefined",t),"cannot spy on a non-function value");let e=m(function(...n){let i=FS(e);i.called=!0,i.callCount++,i.calls.push(n);let l=i.next.shift();if(l){i.results.push(l);let[_,x]=l;if(_==="ok")return x;throw x}let c,s="ok",p=i.results.length;if(i.impl)try{new.target?c=Reflect.construct(i.impl,n,new.target):c=i.impl.apply(this,n),s="ok"}catch(_){throw c=_,s="error",i.results.push([s,_]),_}let g=[s,c];return OB(c)&&c.then(_=>i.resolves[p]=["ok",_],_=>i.resolves[p]=["error",_]),i.results.push(g),c},"t");yh(e,"_isMockFunction",!0),yh(e,"length",t?t.length:0),yh(e,"name",t&&t.name||"spy");let r=FS(e);return r.reset(),r.impl=t,e}m(kB,"R");function LB(t){return!!t&&t._isMockFunction===!0}m(LB,"v");var DB=m((t,e)=>{let r=Object.getOwnPropertyDescriptor(t,e);if(r)return[t,r];let n=Object.getPrototypeOf(t);for(;n!==null;){let i=Object.getOwnPropertyDescriptor(n,e);if(i)return[n,i];n=Object.getPrototypeOf(n)}},"b"),JO=m((t,e)=>{e!=null&&typeof e=="function"&&e.prototype!=null&&Object.setPrototypeOf(t.prototype,e.prototype)},"P");function uR(t,e,r){Og(!sh("undefined",t),"spyOn could not find an object to spy upon"),Og(sh("object",t)||sh("function",t),"cannot spyOn on a primitive value");let[n,i]=(()=>{if(!sh("object",e))return[e,"value"];if("getter"in e&&"setter"in e)throw new Error("cannot spy on both getter and setter");if("getter"in e)return[e.getter,"get"];if("setter"in e)return[e.setter,"set"];throw new Error("specify getter or setter to spy on")})(),[l,c]=DB(t,n)||[];Og(c||n in t,`${String(n)} does not exist`);let s=!1;i==="value"&&c&&!c.value&&c.get&&(i="get",s=!0,r=c.get());let p;c?p=c[i]:i!=="value"?p=m(()=>t[n],"p"):p=t[n],p&&zB(p)&&(p=p[Hc].getOriginal());let g=m(A=>{let{value:M,...F}=c||{configurable:!0,writable:!0};i!=="value"&&delete F.writable,F[i]=A,tf(t,n,F)},"g"),_=m(()=>{l!==t?Reflect.deleteProperty(t,n):c&&!p?tf(t,n,c):g(p)},"a");r||(r=p);let x=FB(kB(r),r);i==="value"&&JO(x,p);let P=x[Hc];return yh(P,"restore",_),yh(P,"getOriginal",()=>s?p():p),yh(P,"willCall",A=>(P.impl=A,x)),g(s?()=>(JO(x,r),x):x),poe.add(x),x}m(uR,"M");var goe=new Set(["length","name","prototype"]);function NB(t){let e=new Set,r={};for(;t&&t!==Object.prototype&&t!==Function.prototype;){let n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(let i of n)r[i]||goe.has(i)||(e.add(i),r[i]=Object.getOwnPropertyDescriptor(t,i));t=Object.getPrototypeOf(t)}return{properties:e,descriptors:r}}m(NB,"D");function FB(t,e){if(!e||Hc in e)return t;let{properties:r,descriptors:n}=NB(e);for(let i of r){let l=n[i];DB(t,i)||tf(t,i,l)}return t}m(FB,"E");function zB(t){return LB(t)&&"getOriginal"in t[Hc]}m(zB,"j");var t_=new Set;function _h(t){return typeof t=="function"&&"_isMockFunction"in t&&t._isMockFunction}m(_h,"isMockFunction");function jB(t,e,r){const i=r?{[{get:"getter",set:"setter"}[r]]:e}:e;let l;const c=BB(t,e),s=c&&c[r||"value"];_h(s)&&(l=s.mock._state());try{const p=uR(t,i),g=hR(p);return l&&g.mock._state(l),g}catch(p){throw p instanceof TypeError&&Symbol.toStringTag&&t[Symbol.toStringTag]==="Module"&&(p.message.includes("Cannot redefine property")||p.message.includes("Cannot replace module namespace")||p.message.includes("can't redefine non-configurable property"))?new TypeError(`Cannot spy on export "${String(i)}". Module namespace is not configurable in ESM. See: https://vitest.dev/guide/browser/#limitations`,{cause:p}):p}}m(jB,"spyOn");var yoe=0;function hR(t){const e=t;let r,n=[],i=!1,l=[],c=[],s=[];const p=FS(t),g={get calls(){return p.calls},get contexts(){return c},get instances(){return l},get invocationCallOrder(){return s},get results(){return p.results.map(([A,M])=>({type:A==="error"?"throw":"return",value:M}))},get settledResults(){return p.resolves.map(([A,M])=>({type:A==="error"?"rejected":"fulfilled",value:M}))},get lastCall(){return p.calls[p.calls.length-1]},_state(A){return A&&(r=A.implementation,n=A.onceImplementations,i=A.implementationChangedTemporarily),{implementation:r,onceImplementations:n,implementationChangedTemporarily:i}}};function _(...A){return l.push(this),c.push(this),s.push(++yoe),(i?r:n.shift()||r||p.getOriginal()||(()=>{})).apply(this,A)}m(_,"mockCall");let x=e.name;e.getMockName=()=>x||"vi.fn()",e.mockName=A=>(x=A,e),e.mockClear=()=>(p.reset(),l=[],c=[],s=[],e),e.mockReset=()=>(e.mockClear(),r=void 0,n=[],e),e.mockRestore=()=>(e.mockReset(),p.restore(),e),Symbol.dispose&&(e[Symbol.dispose]=()=>e.mockRestore()),e.getMockImplementation=()=>i?r:n.at(0)||r,e.mockImplementation=A=>(r=A,p.willCall(_),e),e.mockImplementationOnce=A=>(n.push(A),e);function P(A,M){const F=r;r=A,p.willCall(_),i=!0;const z=m(()=>{r=F,i=!1},"reset"),j=M();return typeof j=="object"&&j&&typeof j.then=="function"?j.then(()=>(z(),e)):(z(),e)}return m(P,"withImplementation"),e.withImplementation=P,e.mockReturnThis=()=>e.mockImplementation(function(){return this}),e.mockReturnValue=A=>e.mockImplementation(()=>A),e.mockReturnValueOnce=A=>e.mockImplementationOnce(()=>A),e.mockResolvedValue=A=>e.mockImplementation(()=>Promise.resolve(A)),e.mockResolvedValueOnce=A=>e.mockImplementationOnce(()=>Promise.resolve(A)),e.mockRejectedValue=A=>e.mockImplementation(()=>Promise.reject(A)),e.mockRejectedValueOnce=A=>e.mockImplementationOnce(()=>Promise.reject(A)),Object.defineProperty(e,"mock",{get:m(()=>g,"get")}),p.willCall(_),t_.add(e),e}m(hR,"enhanceSpy");function zS(t){const e=hR(uR({spy:t||function(){}},"spy"));return t&&e.mockImplementation(t),e}m(zS,"fn");function BB(t,e){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;let n=Object.getPrototypeOf(t);for(;n!==null;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Object.getPrototypeOf(n)}}m(BB,"getDescriptor");var iy=Symbol.for("matchers-object"),oy=Symbol.for("$$jest-matchers-object-storybook"),dR=Symbol.for("expect-global"),jS=Symbol.for("asymmetric-matchers-object"),_oe={toSatisfy(t,e,r){const{printReceived:n,printExpected:i,matcherHint:l}=this.utils,c=e(t);return{pass:c,message:m(()=>c?`${l(".not.toSatisfy","received","")}

Expected value to not satisfy:
${r||i(e)}
Received:
${n(t)}`:`${l(".toSatisfy","received","")}

Expected value to satisfy:
${r||i(e)}

Received:
${n(t)}`,"message")}},toBeOneOf(t,e){const{equals:r,customTesters:n}=this,{printReceived:i,printExpected:l,matcherHint:c}=this.utils;if(!Array.isArray(e))throw new TypeError(`You must provide an array to ${c(".toBeOneOf")}, not '${typeof e}'.`);const s=e.length===0||e.some(p=>r(p,t,n));return{pass:s,message:m(()=>s?`${c(".not.toBeOneOf","received","")}

Expected value to not be one of:
${l(e)}
Received:
${i(t)}`:`${c(".toBeOneOf","received","")}

Expected value to be one of:
${l(e)}

Received:
${i(t)}`,"message")}}},ev=ii.green,pR=ii.red,boe=ii.inverse,voe=ii.bold,Tc=ii.dim;function qB(t,e="received",r="expected",n={}){const{comment:i="",isDirectExpectCall:l=!1,isNot:c=!1,promise:s="",secondArgument:p="",expectedColor:g=ev,receivedColor:_=pR,secondArgumentColor:x=ev}=n;let P="",A="expect";return!l&&e!==""&&(P+=Tc(`${A}(`)+_(e),A=")"),s!==""&&(P+=Tc(`${A}.`)+s,A=""),c&&(P+=`${Tc(`${A}.`)}not`,A=""),t.includes(".")?A+=t:(P+=Tc(`${A}.`)+t,A=""),r===""?A+="()":(P+=Tc(`${A}(`)+g(r),p&&(P+=Tc(", ")+x(p)),A=")"),i!==""&&(A+=` // ${i}`),A!==""&&(P+=Tc(A)),P}m(qB,"matcherHint");var xoe="";function fR(t){return t.replace(/\s+$/gm,e=>xoe.repeat(e.length))}m(fR,"replaceTrailingSpaces");function $B(t){return pR(fR(ko(t)))}m($B,"printReceived");function VB(t){return ev(fR(ko(t)))}m(VB,"printExpected");function mR(){return{EXPECTED_COLOR:ev,RECEIVED_COLOR:pR,INVERTED_COLOR:boe,BOLD_WEIGHT:voe,DIM_COLOR:Tc,diff:Xh,matcherHint:qB,printReceived:$B,printExpected:VB,printDiffOrStringify:kP,printWithType:UB}}m(mR,"getMatcherUtils");function UB(t,e,r){const n=Kg(e),i=n!=="null"&&n!=="undefined"?`${t} has type:  ${n}
`:"",l=`${t} has value: ${r(e)}`;return i+l}m(UB,"printWithType");function Q1(){return globalThis[oy].customEqualityTesters}m(Q1,"getCustomEqualityTesters");function ln(t,e,r,n){return r=r||[],Np(t,e,[],[],r,n?gR:JB)}m(ln,"equals");function BS(t){return!!t&&typeof t=="object"&&"asymmetricMatch"in t&&Is("Function",t.asymmetricMatch)}m(BS,"isAsymmetric");function GB(t,e){const r=BS(t),n=BS(e);if(!(r&&n)){if(r)return t.asymmetricMatch(e);if(n)return e.asymmetricMatch(t)}}m(GB,"asymmetricMatch");function Np(t,e,r,n,i,l){let c=!0;const s=GB(t,e);if(s!==void 0)return s;const p={equals:ln};for(let M=0;M<i.length;M++){const F=i[M].call(p,t,e,i);if(F!==void 0)return F}if(typeof URL=="function"&&t instanceof URL&&e instanceof URL)return t.href===e.href;if(Object.is(t,e))return!0;if(t===null||e===null)return t===e;const g=Object.prototype.toString.call(t);if(g!==Object.prototype.toString.call(e))return!1;switch(g){case"[object Boolean]":case"[object String]":case"[object Number]":return typeof t!=typeof e?!1:typeof t!="object"&&typeof e!="object"?Object.is(t,e):Object.is(t.valueOf(),e.valueOf());case"[object Date]":{const M=+t,F=+e;return M===F||Number.isNaN(M)&&Number.isNaN(F)}case"[object RegExp]":return t.source===e.source&&t.flags===e.flags;case"[object Temporal.Instant]":case"[object Temporal.ZonedDateTime]":case"[object Temporal.PlainDateTime]":case"[object Temporal.PlainDate]":case"[object Temporal.PlainTime]":case"[object Temporal.PlainYearMonth]":case"[object Temporal.PlainMonthDay]":return t.equals(e);case"[object Temporal.Duration]":return t.toString()===e.toString()}if(typeof t!="object"||typeof e!="object")return!1;if($S(t)&&$S(e))return t.isEqualNode(e);let _=r.length;for(;_--;){if(r[_]===t)return n[_]===e;if(n[_]===e)return!1}if(r.push(t),n.push(e),g==="[object Array]"&&t.length!==e.length)return!1;if(t instanceof Error&&e instanceof Error)try{return HB(t,e,r,n,i,l)}finally{r.pop(),n.pop()}const x=qS(t,l);let P,A=x.length;if(qS(e,l).length!==A)return!1;for(;A--;)if(P=x[A],c=l(e,P)&&Np(t[P],e[P],r,n,i,l),!c)return!1;return r.pop(),n.pop(),c}m(Np,"eq");function HB(t,e,r,n,i,l){let c=Object.getPrototypeOf(t)===Object.getPrototypeOf(e)&&t.name===e.name&&t.message===e.message;return typeof e.cause<"u"&&c&&(c=Np(t.cause,e.cause,r,n,i,l)),t instanceof AggregateError&&e instanceof AggregateError&&c&&(c=Np(t.errors,e.errors,r,n,i,l)),c&&(c=Np({...t},{...e},r,n,i,l)),c}m(HB,"isErrorEqual");function qS(t,e){const r=[];for(const n in t)e(t,n)&&r.push(n);return r.concat(Object.getOwnPropertySymbols(t).filter(n=>Object.getOwnPropertyDescriptor(t,n).enumerable))}m(qS,"keys");function JB(t,e){return gR(t,e)&&t[e]!==void 0}m(JB,"hasDefinedKey");function gR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}m(gR,"hasKey");function Is(t,e){return Object.prototype.toString.apply(e)===`[object ${t}]`}m(Is,"isA");function $S(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"&&"nodeName"in t&&typeof t.nodeName=="string"&&"isEqualNode"in t&&typeof t.isEqualNode=="function"}m($S,"isDomNode");var WB="@@__IMMUTABLE_KEYED__@@",ZB="@@__IMMUTABLE_SET__@@",woe="@@__IMMUTABLE_LIST__@@",ex="@@__IMMUTABLE_ORDERED__@@",Eoe="@@__IMMUTABLE_RECORD__@@";function KB(t){return!!(t&&t[WB]&&!t[ex])}m(KB,"isImmutableUnorderedKeyed");function YB(t){return!!(t&&t[ZB]&&!t[ex])}m(YB,"isImmutableUnorderedSet");function r_(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}m(r_,"isObjectLiteral");function XB(t){return!!(t&&r_(t)&&t[woe])}m(XB,"isImmutableList");function QB(t){return!!(t&&r_(t)&&t[WB]&&t[ex])}m(QB,"isImmutableOrderedKeyed");function eq(t){return!!(t&&r_(t)&&t[ZB]&&t[ex])}m(eq,"isImmutableOrderedSet");function tq(t){return!!(t&&r_(t)&&t[Eoe])}m(tq,"isImmutableRecord");var rq=Symbol.iterator;function VS(t){return!!(t!=null&&t[rq])}m(VS,"hasIterator");function ns(t,e,r=[],n=[],i=[]){if(typeof t!="object"||typeof e!="object"||Array.isArray(t)||Array.isArray(e)||!VS(t)||!VS(e))return;if(t.constructor!==e.constructor)return!1;let l=n.length;for(;l--;)if(n[l]===t)return i[l]===e;n.push(t),i.push(e);const c=[...r.filter(g=>g!==ns),s];function s(g,_){return ns(g,_,[...r],[...n],[...i])}if(m(s,"iterableEqualityWithStack"),t.size!==void 0){if(t.size!==e.size)return!1;if(Is("Set",t)||YB(t)){let g=!0;for(const _ of t)if(!e.has(_)){let x=!1;for(const P of e)ln(_,P,c)===!0&&(x=!0);if(x===!1){g=!1;break}}return n.pop(),i.pop(),g}else if(Is("Map",t)||KB(t)){let g=!0;for(const _ of t)if(!e.has(_[0])||!ln(_[1],e.get(_[0]),c)){let x=!1;for(const P of e){const A=ln(_[0],P[0],c);let M=!1;A===!0&&(M=ln(_[1],P[1],c)),M===!0&&(x=!0)}if(x===!1){g=!1;break}}return n.pop(),i.pop(),g}}const p=e[rq]();for(const g of t){const _=p.next();if(_.done||!ln(g,_.value,c))return!1}if(!p.next().done)return!1;if(!XB(t)&&!QB(t)&&!eq(t)&&!tq(t)){const g=Object.entries(t),_=Object.entries(e);if(!ln(g,_,c))return!1}return n.pop(),i.pop(),!0}m(ns,"iterableEquality");function tx(t,e){return!t||typeof t!="object"||t===Object.prototype?!1:Object.prototype.hasOwnProperty.call(t,e)||tx(Object.getPrototypeOf(t),e)}m(tx,"hasPropertyInObject");function nq(t){return Ig(t)&&!(t instanceof Error)&&!Array.isArray(t)&&!(t instanceof Date)}m(nq,"isObjectWithKeys");function kf(t,e,r=[]){const n=r.filter(l=>l!==kf),i=m((l=new WeakMap)=>(c,s)=>{if(nq(s))return Object.keys(s).every(p=>{if(s[p]!=null&&typeof s[p]=="object"){if(l.has(s[p]))return ln(c[p],s[p],n);l.set(s[p],!0)}const g=c!=null&&tx(c,p)&&ln(c[p],s[p],[...n,i(l)]);return l.delete(s[p]),g})},"subsetEqualityWithContext");return i()(t,e)}m(kf,"subsetEquality");function US(t,e){if(!(t==null||e==null||t.constructor===e.constructor))return!1}m(US,"typeEquality");function GS(t,e){let r=t,n=e;if(!(t instanceof DataView&&e instanceof DataView)){if(!(t instanceof ArrayBuffer)||!(e instanceof ArrayBuffer))return;try{r=new DataView(t),n=new DataView(e)}catch{return}}if(r.byteLength!==n.byteLength)return!1;for(let i=0;i<r.byteLength;i++)if(r.getUint8(i)!==n.getUint8(i))return!1;return!0}m(GS,"arrayBufferEquality");function tv(t,e,r=[]){if(!Array.isArray(t)||!Array.isArray(e))return;const n=Object.keys(t),i=Object.keys(e),l=r.filter(c=>c!==tv);return ln(t,e,l,!0)&&ln(n,i)}m(tv,"sparseArrayEquality");function iq(t,e="#{this}",r="#{exp}"){const n=`expected ${e} to be ${r} // Object.is equality`;return["toStrictEqual","toEqual"].includes(t)?`${n}

If it should pass with deep equality, replace "toBe" with "${t}"

Expected: ${e}
Received: serializes to the same string
`:n}m(iq,"generateToBeMessage");function oq(t,e){return`${e} ${t}${e===1?"":"s"}`}m(oq,"pluralize");function ob(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t).filter(e=>{var r;return(r=Object.getOwnPropertyDescriptor(t,e))===null||r===void 0?void 0:r.enumerable})]}m(ob,"getObjectKeys");function sq(t,e,r){let n=0;const i=m((l=new WeakMap)=>(c,s)=>{if(Array.isArray(c)){if(Array.isArray(s)&&s.length===c.length)return s.map((p,g)=>i(l)(c[g],p))}else{if(c instanceof Date)return c;if(Ig(c)&&Ig(s)){if(ln(c,s,[...r,ns,kf]))return s;const p={};l.set(c,p),typeof c.constructor=="function"&&typeof c.constructor.name=="string"&&Object.defineProperty(p,"constructor",{enumerable:!1,value:c.constructor});for(const g of ob(c))tx(s,g)?p[g]=l.has(c[g])?l.get(c[g]):i(l)(c[g],s[g]):l.has(c[g])||(n+=1,Ig(c[g])&&(n+=ob(c[g]).length),i(l)(c[g],s[g]));if(ob(p).length>0)return p}}return c},"getObjectSubsetWithContext");return{subset:i()(t,e),stripped:n}}m(sq,"getObjectSubset");if(!Object.prototype.hasOwnProperty.call(globalThis,iy)){const t=new WeakMap;Object.defineProperty(globalThis,iy,{get:m(()=>t,"get")})}if(!Object.prototype.hasOwnProperty.call(globalThis,oy)){const t=Object.create(null),e=[];Object.defineProperty(globalThis,oy,{configurable:!0,get:m(()=>({state:globalThis[iy].get(globalThis[dR]),matchers:t,customEqualityTesters:e}),"get")})}if(!Object.prototype.hasOwnProperty.call(globalThis,jS)){const t=Object.create(null);Object.defineProperty(globalThis,jS,{get:m(()=>t,"get")})}function sy(t){return globalThis[iy].get(t)}m(sy,"getState");function sb(t,e){const r=globalThis[iy],n=r.get(e)||{},i=Object.defineProperties(n,{...Object.getOwnPropertyDescriptors(n),...Object.getOwnPropertyDescriptors(t)});r.set(e,i)}m(sb,"setState");var aq=class{constructor(e,r=!1){xr(this,"$$typeof",Symbol.for("jest.asymmetricMatcher"));this.sample=e,this.inverse=r}getMatcherContext(e){return{...sy(e||globalThis[dR]),equals:ln,isNot:this.inverse,customTesters:Q1(),utils:{...mR(),diff:Xh,stringify:ko,iterableEquality:ns,subsetEquality:kf}}}};m(aq,"AsymmetricMatcher");var Bl=aq;Bl.prototype[Symbol.for("chai/inspect")]=function(t){const e=ko(this,t.depth,{min:!0});return e.length<=t.truncate?e:`${this.toString()}{}`};var lq=class extends Bl{constructor(e,r=!1){if(!Is("String",e))throw new Error("Expected is not a string");super(e,r)}asymmetricMatch(e){const r=Is("String",e)&&e.includes(this.sample);return this.inverse?!r:r}toString(){return`String${this.inverse?"Not":""}Containing`}getExpectedType(){return"string"}};m(lq,"StringContaining");var WO=lq,cq=class extends Bl{asymmetricMatch(e){return e!=null}toString(){return"Anything"}toAsymmetricMatcher(){return"Anything"}};m(cq,"Anything");var Toe=cq,uq=class extends Bl{constructor(e,r=!1){super(e,r)}getPrototype(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.constructor.prototype===e?null:e.constructor.prototype}hasProperty(e,r){return e?Object.prototype.hasOwnProperty.call(e,r)?!0:this.hasProperty(this.getPrototype(e),r):!1}asymmetricMatch(e){if(typeof this.sample!="object")throw new TypeError(`You must provide an object to ${this.toString()}, not '${typeof this.sample}'.`);let r=!0;const n=this.getMatcherContext();for(const i in this.sample)if(!this.hasProperty(e,i)||!ln(this.sample[i],e[i],n.customTesters)){r=!1;break}return this.inverse?!r:r}toString(){return`Object${this.inverse?"Not":""}Containing`}getExpectedType(){return"object"}};m(uq,"ObjectContaining");var ZO=uq,hq=class extends Bl{constructor(e,r=!1){super(e,r)}asymmetricMatch(e){if(!Array.isArray(this.sample))throw new TypeError(`You must provide an array to ${this.toString()}, not '${typeof this.sample}'.`);const r=this.getMatcherContext(),n=this.sample.length===0||Array.isArray(e)&&this.sample.every(i=>e.some(l=>ln(i,l,r.customTesters)));return this.inverse?!n:n}toString(){return`Array${this.inverse?"Not":""}Containing`}getExpectedType(){return"array"}};m(hq,"ArrayContaining");var KO=hq,dq=class extends Bl{constructor(e){if(typeof e>"u")throw new TypeError("any() expects to be passed a constructor function. Please pass one or use anything() to match any object.");super(e)}fnNameFor(e){if(e.name)return e.name;const n=Function.prototype.toString.call(e).match(/^(?:async)?\s*function\s*(?:\*\s*)?([\w$]+)\s*\(/);return n?n[1]:"<anonymous>"}asymmetricMatch(e){return this.sample===String?typeof e=="string"||e instanceof String:this.sample===Number?typeof e=="number"||e instanceof Number:this.sample===Function?typeof e=="function"||typeof e=="function":this.sample===Boolean?typeof e=="boolean"||e instanceof Boolean:this.sample===BigInt?typeof e=="bigint"||e instanceof BigInt:this.sample===Symbol?typeof e=="symbol"||e instanceof Symbol:this.sample===Object?typeof e=="object":e instanceof this.sample}toString(){return"Any"}getExpectedType(){return this.sample===String?"string":this.sample===Number?"number":this.sample===Function?"function":this.sample===Object?"object":this.sample===Boolean?"boolean":this.fnNameFor(this.sample)}toAsymmetricMatcher(){return`Any<${this.fnNameFor(this.sample)}>`}};m(dq,"Any");var Soe=dq,pq=class extends Bl{constructor(e,r=!1){if(!Is("String",e)&&!Is("RegExp",e))throw new Error("Expected is not a String or a RegExp");super(new RegExp(e),r)}asymmetricMatch(e){const r=Is("String",e)&&this.sample.test(e);return this.inverse?!r:r}toString(){return`String${this.inverse?"Not":""}Matching`}getExpectedType(){return"string"}};m(pq,"StringMatching");var YO=pq,fq=class extends Bl{constructor(r,n=2,i=!1){if(!Is("Number",r))throw new Error("Expected is not a Number");if(!Is("Number",n))throw new Error("Precision is not a Number");super(r);xr(this,"precision");this.inverse=i,this.precision=n}asymmetricMatch(r){if(!Is("Number",r))return!1;let n=!1;return r===Number.POSITIVE_INFINITY&&this.sample===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY&&this.sample===Number.NEGATIVE_INFINITY?n=!0:n=Math.abs(this.sample-r)<10**-this.precision/2,this.inverse?!n:n}toString(){return`Number${this.inverse?"Not":""}CloseTo`}getExpectedType(){return"number"}toAsymmetricMatcher(){return[this.toString(),this.sample,`(${oq("digit",this.precision)})`].join(" ")}};m(fq,"CloseTo");var XO=fq,Coe=m((t,e)=>{e.addMethod(t.expect,"anything",()=>new Toe),e.addMethod(t.expect,"any",r=>new Soe(r)),e.addMethod(t.expect,"stringContaining",r=>new WO(r)),e.addMethod(t.expect,"objectContaining",r=>new ZO(r)),e.addMethod(t.expect,"arrayContaining",r=>new KO(r)),e.addMethod(t.expect,"stringMatching",r=>new YO(r)),e.addMethod(t.expect,"closeTo",(r,n)=>new XO(r,n)),t.expect.not={stringContaining:m(r=>new WO(r,!0),"stringContaining"),objectContaining:m(r=>new ZO(r,!0),"objectContaining"),arrayContaining:m(r=>new KO(r,!0),"arrayContaining"),stringMatching:m(r=>new YO(r,!0),"stringMatching"),closeTo:m((r,n)=>new XO(r,n,!0),"closeTo")}},"JestAsymmetricMatchers");function HS(t,e,r){const n=t.flag(e,"negate")?"not.":"",i=`${t.flag(e,"_name")}(${r?"expected":""})`,l=t.flag(e,"promise");return`expect(actual)${l?`.${l}`:""}.${n}${i}`}m(HS,"createAssertionMessage");function JS(t,e,r,n){const i=t;if(i&&e instanceof Promise){e=e.finally(()=>{if(!i.promises)return;const c=i.promises.indexOf(e);c!==-1&&i.promises.splice(c,1)}),i.promises||(i.promises=[]),i.promises.push(e);let l=!1;return i.onFinished??(i.onFinished=[]),i.onFinished.push(()=>{if(!l){var c;const p=(((c=globalThis.__vitest_worker__)===null||c===void 0?void 0:c.onFilterStackTrace)||(g=>g||""))(n.stack);console.warn([`Promise returned by \`${r}\` was not awaited. `,"Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. ",`Please remember to await the assertion.
`,p].join(""))}}),{then(c,s){return l=!0,e.then(c,s)},catch(c){return e.catch(c)},finally(c){return e.finally(c)},[Symbol.toStringTag]:"Promise"}}return e}m(JS,"recordAsyncExpect");function WS(t,e){var r;t.result||(t.result={state:"fail"}),t.result.state="fail",(r=t.result).errors||(r.errors=[]),t.result.errors.push(g1(e))}m(WS,"handleTestError");function yR(t,e,r){return function(...n){if(e!=="withTest"&&t.flag(this,"_name",e),!t.flag(this,"soft"))return r.apply(this,n);const i=t.flag(this,"vitest-test");if(!i)throw new Error("expect.soft() can only be used inside a test");try{const l=r.apply(this,n);return l&&typeof l=="object"&&typeof l.then=="function"?l.then(hz,c=>{WS(i,c)}):l}catch(l){WS(i,l)}}}m(yR,"wrapAssertion");var Poe=m((t,e)=>{const{AssertionError:r}=t,n=Q1();function i(g,_){const x=m(P=>{const A=yR(e,P,_);e.addMethod(t.Assertion.prototype,P,A),e.addMethod(globalThis[oy].matchers,P,A)},"addMethod");Array.isArray(g)?g.forEach(P=>x(P)):x(g)}m(i,"def"),["throw","throws","Throw"].forEach(g=>{e.overwriteMethod(t.Assertion.prototype,g,_=>function(...x){const P=e.flag(this,"promise"),A=e.flag(this,"object"),M=e.flag(this,"negate");if(P==="rejects")e.flag(this,"object",()=>{throw A});else if(P==="resolves"&&typeof A!="function"){if(M)return;{const F=e.flag(this,"message")||"expected promise to throw an error, but it didn't",z={showDiff:!1};throw new r(F,z,e.flag(this,"ssfi"))}}_.apply(this,x)})}),i("withTest",function(g){return e.flag(this,"vitest-test",g),this}),i("toEqual",function(g){const _=e.flag(this,"object"),x=ln(_,g,[...n,ns]);return this.assert(x,"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",g,_)}),i("toStrictEqual",function(g){const _=e.flag(this,"object"),x=ln(_,g,[...n,ns,US,tv,GS],!0);return this.assert(x,"expected #{this} to strictly equal #{exp}","expected #{this} to not strictly equal #{exp}",g,_)}),i("toBe",function(g){const _=this._obj,x=Object.is(_,g);let P="";return x||(ln(_,g,[...n,ns,US,tv,GS],!0)?P="toStrictEqual":ln(_,g,[...n,ns])&&(P="toEqual")),this.assert(x,iq(P),"expected #{this} not to be #{exp} // Object.is equality",g,_)}),i("toMatchObject",function(g){const _=this._obj,x=ln(_,g,[...n,ns,kf]),P=e.flag(this,"negate"),{subset:A,stripped:M}=sq(_,g,n);if(x&&P||!x&&!P){const F=e.getMessage(this,[x,"expected #{this} to match object #{exp}","expected #{this} to not match object #{exp}",g,A,!1]),z=M===0?F:`${F}
(${M} matching ${M===1?"property":"properties"} omitted from actual)`;throw new r(z,{showDiff:!0,expected:g,actual:A})}}),i("toMatch",function(g){const _=this._obj;if(typeof _!="string")throw new TypeError(`.toMatch() expects to receive a string, but got ${typeof _}`);return this.assert(typeof g=="string"?_.includes(g):_.match(g),"expected #{this} to match #{exp}","expected #{this} not to match #{exp}",g,_)}),i("toContain",function(g){const _=this._obj;if(typeof Node<"u"&&_ instanceof Node){if(!(g instanceof Node))throw new TypeError(`toContain() expected a DOM node as the argument, but got ${typeof g}`);return this.assert(_.contains(g),"expected #{this} to contain element #{exp}","expected #{this} not to contain element #{exp}",g,_)}if(typeof DOMTokenList<"u"&&_ instanceof DOMTokenList){Ea(g,"class name",["string"]);const P=e.flag(this,"negate")?_.value.replace(g,"").trim():`${_.value} ${g}`;return this.assert(_.contains(g),`expected "${_.value}" to contain "${g}"`,`expected "${_.value}" not to contain "${g}"`,P,_.value)}return typeof _=="string"&&typeof g=="string"?this.assert(_.includes(g),"expected #{this} to contain #{exp}","expected #{this} not to contain #{exp}",g,_):(_!=null&&typeof _!="string"&&e.flag(this,"object",Array.from(_)),this.contain(g))}),i("toContainEqual",function(g){const _=e.flag(this,"object"),x=Array.from(_).findIndex(P=>ln(P,g,n));this.assert(x!==-1,"expected #{this} to deep equally contain #{exp}","expected #{this} to not deep equally contain #{exp}",g)}),i("toBeTruthy",function(){const g=e.flag(this,"object");this.assert(!!g,"expected #{this} to be truthy","expected #{this} to not be truthy",!0,g)}),i("toBeFalsy",function(){const g=e.flag(this,"object");this.assert(!g,"expected #{this} to be falsy","expected #{this} to not be falsy",!1,g)}),i("toBeGreaterThan",function(g){const _=this._obj;return Ea(_,"actual",["number","bigint"]),Ea(g,"expected",["number","bigint"]),this.assert(_>g,`expected ${_} to be greater than ${g}`,`expected ${_} to be not greater than ${g}`,g,_,!1)}),i("toBeGreaterThanOrEqual",function(g){const _=this._obj;return Ea(_,"actual",["number","bigint"]),Ea(g,"expected",["number","bigint"]),this.assert(_>=g,`expected ${_} to be greater than or equal to ${g}`,`expected ${_} to be not greater than or equal to ${g}`,g,_,!1)}),i("toBeLessThan",function(g){const _=this._obj;return Ea(_,"actual",["number","bigint"]),Ea(g,"expected",["number","bigint"]),this.assert(_<g,`expected ${_} to be less than ${g}`,`expected ${_} to be not less than ${g}`,g,_,!1)}),i("toBeLessThanOrEqual",function(g){const _=this._obj;return Ea(_,"actual",["number","bigint"]),Ea(g,"expected",["number","bigint"]),this.assert(_<=g,`expected ${_} to be less than or equal to ${g}`,`expected ${_} to be not less than or equal to ${g}`,g,_,!1)}),i("toBeNaN",function(){const g=e.flag(this,"object");this.assert(Number.isNaN(g),"expected #{this} to be NaN","expected #{this} not to be NaN",Number.NaN,g)}),i("toBeUndefined",function(){const g=e.flag(this,"object");this.assert(g===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined",void 0,g)}),i("toBeNull",function(){const g=e.flag(this,"object");this.assert(g===null,"expected #{this} to be null","expected #{this} not to be null",null,g)}),i("toBeDefined",function(){const g=e.flag(this,"object");this.assert(typeof g<"u","expected #{this} to be defined","expected #{this} to be undefined",g)}),i("toBeTypeOf",function(g){const _=typeof this._obj,x=g===_;return this.assert(x,"expected #{this} to be type of #{exp}","expected #{this} not to be type of #{exp}",g,_)}),i("toBeInstanceOf",function(g){return this.instanceOf(g)}),i("toHaveLength",function(g){return this.have.length(g)}),i("toHaveProperty",function(...g){Array.isArray(g[0])&&(g[0]=g[0].map($=>String($).replace(/([.[\]])/g,"\\$1")).join("."));const _=this._obj,[x,P]=g,A=m(()=>Object.prototype.hasOwnProperty.call(_,x)?{value:_[x],exists:!0}:e.getPathInfo(_,x),"getValue"),{value:M,exists:F}=A(),z=F&&(g.length===1||ln(P,M,n)),j=g.length===1?"":` with value ${e.objDisplay(P)}`;return this.assert(z,`expected #{this} to have property "${x}"${j}`,`expected #{this} to not have property "${x}"${j}`,P,F?M:void 0)}),i("toBeCloseTo",function(g,_=2){const x=this._obj;let P=!1,A=0,M=0;return g===Number.POSITIVE_INFINITY&&x===Number.POSITIVE_INFINITY||g===Number.NEGATIVE_INFINITY&&x===Number.NEGATIVE_INFINITY?P=!0:(A=10**-_/2,M=Math.abs(x-g),P=M<A),this.assert(P,`expected #{this} to be close to #{exp}, received difference is ${M}, but expected ${A}`,`expected #{this} to not be close to #{exp}, received difference is ${M}, but expected ${A}`,g,x,!1)});function l(g){if(!_h(g._obj))throw new TypeError(`${e.inspect(g._obj)} is not a spy or a call to a spy!`)}m(l,"assertIsMock");function c(g){return l(g),g._obj}m(c,"getSpy"),i(["toHaveBeenCalledTimes","toBeCalledTimes"],function(g){const _=c(this),x=_.getMockName(),P=_.mock.calls.length;return this.assert(P===g,`expected "${x}" to be called #{exp} times, but got ${P} times`,`expected "${x}" to not be called #{exp} times`,g,P,!1)}),i("toHaveBeenCalledOnce",function(){const g=c(this),_=g.getMockName(),x=g.mock.calls.length;return this.assert(x===1,`expected "${_}" to be called once, but got ${x} times`,`expected "${_}" to not be called once`,1,x,!1)}),i(["toHaveBeenCalled","toBeCalled"],function(){const g=c(this),_=g.getMockName(),x=g.mock.calls.length,P=x>0,A=e.flag(this,"negate");let M=e.getMessage(this,[P,`expected "${_}" to be called at least once`,`expected "${_}" to not be called at all, but actually been called ${x} times`,!0,P]);if(P&&A&&(M=ab(g,M)),P&&A||!P&&!A)throw new r(M)});function s(g,_){return g.length===_.length&&g.every((x,P)=>ln(x,_[P],[...n,ns]))}m(s,"equalsArgumentArray"),i(["toHaveBeenCalledWith","toBeCalledWith"],function(...g){const _=c(this),x=_.getMockName(),P=_.mock.calls.some(F=>s(F,g)),A=e.flag(this,"negate"),M=e.getMessage(this,[P,`expected "${x}" to be called with arguments: #{exp}`,`expected "${x}" to not be called with arguments: #{exp}`,g]);if(P&&A||!P&&!A)throw new r(ab(_,M,g))}),i("toHaveBeenCalledExactlyOnceWith",function(...g){const _=c(this),x=_.getMockName(),P=_.mock.calls.length,M=_.mock.calls.some(j=>s(j,g))&&P===1,F=e.flag(this,"negate"),z=e.getMessage(this,[M,`expected "${x}" to be called once with arguments: #{exp}`,`expected "${x}" to not be called once with arguments: #{exp}`,g]);if(M&&F||!M&&!F)throw new r(ab(_,z,g))}),i(["toHaveBeenNthCalledWith","nthCalledWith"],function(g,..._){const x=c(this),P=x.getMockName(),A=x.mock.calls[g-1],M=x.mock.calls.length,F=g<=M;this.assert(A&&s(A,_),`expected ${Fp(g)} "${P}" call to have been called with #{exp}${F?"":`, but called only ${M} times`}`,`expected ${Fp(g)} "${P}" call to not have been called with #{exp}`,_,A,F)}),i(["toHaveBeenLastCalledWith","lastCalledWith"],function(...g){const _=c(this),x=_.getMockName(),P=_.mock.calls[_.mock.calls.length-1];this.assert(P&&s(P,g),`expected last "${x}" call to have been called with #{exp}`,`expected last "${x}" call to not have been called with #{exp}`,g,P)});function p(g,_,x){const P=g.mock.invocationCallOrder,A=_.mock.invocationCallOrder;return P.length===0?!x:A.length===0?!1:P[0]<A[0]}m(p,"isSpyCalledBeforeAnotherSpy"),i(["toHaveBeenCalledBefore"],function(g,_=!0){const x=c(this);if(!_h(g))throw new TypeError(`${e.inspect(g)} is not a spy or a call to a spy`);this.assert(p(x,g,_),`expected "${x.getMockName()}" to have been called before "${g.getMockName()}"`,`expected "${x.getMockName()}" to not have been called before "${g.getMockName()}"`,g,x)}),i(["toHaveBeenCalledAfter"],function(g,_=!0){const x=c(this);if(!_h(g))throw new TypeError(`${e.inspect(g)} is not a spy or a call to a spy`);this.assert(p(g,x,_),`expected "${x.getMockName()}" to have been called after "${g.getMockName()}"`,`expected "${x.getMockName()}" to not have been called after "${g.getMockName()}"`,g,x)}),i(["toThrow","toThrowError"],function(g){if(typeof g=="string"||typeof g>"u"||g instanceof RegExp)return this.throws(g===""?/^$/:g);const _=this._obj,x=e.flag(this,"promise"),P=e.flag(this,"negate");let A=null;if(x==="rejects")A=_;else if(x==="resolves"&&typeof _!="function"){if(P)return;{const M=e.flag(this,"message")||"expected promise to throw an error, but it didn't",F={showDiff:!1};throw new r(M,F,e.flag(this,"ssfi"))}}else{let M=!1;try{_()}catch(F){M=!0,A=F}if(!M&&!P){const F=e.flag(this,"message")||"expected function to throw an error, but it didn't",z={showDiff:!1};throw new r(F,z,e.flag(this,"ssfi"))}}if(typeof g=="function"){const M=g.name||g.prototype.constructor.name;return this.assert(A&&A instanceof g,`expected error to be instance of ${M}`,`expected error not to be instance of ${M}`,g,A)}if(g instanceof Error){const M=ln(A,g,[...n,ns]);return this.assert(M,"expected a thrown error to be #{exp}","expected a thrown error not to be #{exp}",g,A)}if(typeof g=="object"&&"asymmetricMatch"in g&&typeof g.asymmetricMatch=="function"){const M=g;return this.assert(A&&M.asymmetricMatch(A),"expected error to match asymmetric matcher","expected error not to match asymmetric matcher",M,A)}throw new Error(`"toThrow" expects string, RegExp, function, Error instance or asymmetric matcher, got "${typeof g}"`)}),[{name:"toHaveResolved",condition:m(g=>g.mock.settledResults.length>0&&g.mock.settledResults.some(({type:_})=>_==="fulfilled"),"condition"),action:"resolved"},{name:["toHaveReturned","toReturn"],condition:m(g=>g.mock.calls.length>0&&g.mock.results.some(({type:_})=>_!=="throw"),"condition"),action:"called"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(){const P=c(this),A=P.getMockName(),M=_(P);this.assert(M,`expected "${A}" to be successfully ${x} at least once`,`expected "${A}" to not be successfully ${x}`,M,!M,!1)})}),[{name:"toHaveResolvedTimes",condition:m((g,_)=>g.mock.settledResults.reduce((x,{type:P})=>P==="fulfilled"?++x:x,0)===_,"condition"),action:"resolved"},{name:["toHaveReturnedTimes","toReturnTimes"],condition:m((g,_)=>g.mock.results.reduce((x,{type:P})=>P==="throw"?x:++x,0)===_,"condition"),action:"called"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(P){const A=c(this),M=A.getMockName(),F=_(A,P);this.assert(F,`expected "${M}" to be successfully ${x} ${P} times`,`expected "${M}" to not be successfully ${x} ${P} times`,`expected resolved times: ${P}`,`received resolved times: ${F}`,!1)})}),[{name:"toHaveResolvedWith",condition:m((g,_)=>g.mock.settledResults.some(({type:x,value:P})=>x==="fulfilled"&&ln(_,P)),"condition"),action:"resolve"},{name:["toHaveReturnedWith","toReturnWith"],condition:m((g,_)=>g.mock.results.some(({type:x,value:P})=>x==="return"&&ln(_,P)),"condition"),action:"return"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(P){const A=c(this),M=_(A,P),F=e.flag(this,"negate");if(M&&F||!M&&!F){const z=A.getMockName(),j=e.getMessage(this,[M,`expected "${z}" to ${x} with: #{exp} at least once`,`expected "${z}" to not ${x} with: #{exp}`,P]),$=x==="return"?A.mock.results:A.mock.settledResults;throw new r(mq(A,$,j,P))}})}),[{name:"toHaveLastResolvedWith",condition:m((g,_)=>{const x=g.mock.settledResults[g.mock.settledResults.length-1];return x&&x.type==="fulfilled"&&ln(x.value,_)},"condition"),action:"resolve"},{name:["toHaveLastReturnedWith","lastReturnedWith"],condition:m((g,_)=>{const x=g.mock.results[g.mock.results.length-1];return x&&x.type==="return"&&ln(x.value,_)},"condition"),action:"return"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(P){const A=c(this),M=x==="return"?A.mock.results:A.mock.settledResults,F=M[M.length-1],z=A.getMockName();this.assert(_(A,P),`expected last "${z}" call to ${x} #{exp}`,`expected last "${z}" call to not ${x} #{exp}`,P,F?.value)})}),[{name:"toHaveNthResolvedWith",condition:m((g,_,x)=>{const P=g.mock.settledResults[_-1];return P&&P.type==="fulfilled"&&ln(P.value,x)},"condition"),action:"resolve"},{name:["toHaveNthReturnedWith","nthReturnedWith"],condition:m((g,_,x)=>{const P=g.mock.results[_-1];return P&&P.type==="return"&&ln(P.value,x)},"condition"),action:"return"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(P,A){const M=c(this),F=M.getMockName(),j=(x==="return"?M.mock.results:M.mock.settledResults)[P-1],$=`${Fp(P)} call`;this.assert(_(M,P,A),`expected ${$} "${F}" call to ${x} #{exp}`,`expected ${$} "${F}" call to not ${x} #{exp}`,A,j?.value)})}),i("withContext",function(g){for(const _ in g)e.flag(this,_,g[_]);return this}),e.addProperty(t.Assertion.prototype,"resolves",m(function(){const _=new Error("resolves");e.flag(this,"promise","resolves"),e.flag(this,"error",_);const x=e.flag(this,"vitest-test"),P=e.flag(this,"object");if(e.flag(this,"poll"))throw new SyntaxError("expect.poll() is not supported in combination with .resolves");if(typeof P?.then!="function")throw new TypeError(`You must provide a Promise to expect() when using .resolves, not '${typeof P}'.`);const A=new Proxy(this,{get:m((M,F,z)=>{const j=Reflect.get(M,F,z);return typeof j!="function"?j instanceof t.Assertion?A:j:(...$)=>{e.flag(this,"_name",F);const W=P.then(X=>(e.flag(this,"object",X),j.call(this,...$)),X=>{const te=new r(`promise rejected "${e.inspect(X)}" instead of resolving`,{showDiff:!1});throw te.cause=X,te.stack=_.stack.replace(_.message,te.message),te});return JS(x,W,HS(e,this,!!$.length),_)}},"get")});return A},"__VITEST_RESOLVES__")),e.addProperty(t.Assertion.prototype,"rejects",m(function(){const _=new Error("rejects");e.flag(this,"promise","rejects"),e.flag(this,"error",_);const x=e.flag(this,"vitest-test"),P=e.flag(this,"object"),A=typeof P=="function"?P():P;if(e.flag(this,"poll"))throw new SyntaxError("expect.poll() is not supported in combination with .rejects");if(typeof A?.then!="function")throw new TypeError(`You must provide a Promise to expect() when using .rejects, not '${typeof A}'.`);const M=new Proxy(this,{get:m((F,z,j)=>{const $=Reflect.get(F,z,j);return typeof $!="function"?$ instanceof t.Assertion?M:$:(...W)=>{e.flag(this,"_name",z);const X=A.then(te=>{const ne=new r(`promise resolved "${e.inspect(te)}" instead of rejecting`,{showDiff:!0,expected:new Error("rejected promise"),actual:te});throw ne.stack=_.stack.replace(_.message,ne.message),ne},te=>(e.flag(this,"object",te),$.call(this,...W)));return JS(x,X,HS(e,this,!!W.length),_)}},"get")});return M},"__VITEST_REJECTS__"))},"JestChaiExpect");function Fp(t){const e=t%10,r=t%100;return e===1&&r!==11?`${t}st`:e===2&&r!==12?`${t}nd`:e===3&&r!==13?`${t}rd`:`${t}th`}m(Fp,"ordinalOf");function ab(t,e,r){return t.mock.calls.length&&(e+=ii.gray(`

Received: 

${t.mock.calls.map((n,i)=>{let l=ii.bold(`  ${Fp(i+1)} ${t.getMockName()} call:

`);return r?l+=Xh(r,n,{omitAnnotationLines:!0}):l+=ko(n).split(`
`).map(c=>`    ${c}`).join(`
`),l+=`
`,l}).join(`
`)}`)),e+=ii.gray(`

Number of calls: ${ii.bold(t.mock.calls.length)}
`),e}m(ab,"formatCalls");function mq(t,e,r,n){return e.length&&(r+=ii.gray(`

Received: 

${e.map((i,l)=>{let c=ii.bold(`  ${Fp(l+1)} ${t.getMockName()} call return:

`);return n?c+=Xh(n,i.value,{omitAnnotationLines:!0}):c+=ko(i).split(`
`).map(s=>`    ${s}`).join(`
`),c+=`
`,c}).join(`
`)}`)),r+=ii.gray(`

Number of calls: ${ii.bold(t.mock.calls.length)}
`),r}m(mq,"formatReturns");function gq(t,e){const r=t._obj,n=Pa.flag(t,"negate"),i=Pa.flag(t,"promise")||"",l={...mR(),diff:Xh,stringify:ko,iterableEquality:ns,subsetEquality:kf};return{state:{...sy(e),customTesters:Q1(),isNot:n,utils:l,promise:i,equals:ln,suppressedErrors:[],soft:Pa.flag(t,"soft"),poll:Pa.flag(t,"poll")},isNot:n,obj:r}}m(gq,"getMatcherState");var yq=class extends Error{constructor(e,r,n){super(e),this.actual=r,this.expected=n}};m(yq,"JestExtendError");var QO=yq;function _q(t,e,r){return(n,i)=>{Object.entries(r).forEach(([l,c])=>{function s(...P){const{state:A,isNot:M,obj:F}=gq(this,e),z=c.call(A,F,...P);if(z&&typeof z=="object"&&typeof z.then=="function")return z.then(({pass:ne,message:Z,actual:U,expected:K})=>{if(ne&&M||!ne&&!M)throw new QO(Z(),U,K)});const{pass:j,message:$,actual:W,expected:X}=z;if(j&&M||!j&&!M)throw new QO($(),W,X)}m(s,"expectWrapper");const p=yR(i,l,s);i.addMethod(globalThis[oy].matchers,l,p),i.addMethod(t.Assertion.prototype,l,p);const g=class extends Bl{constructor(A=!1,...M){super(M,A)}asymmetricMatch(A){const{pass:M}=c.call(this.getMatcherContext(e),A,...this.sample);return this.inverse?!M:M}toString(){return`${this.inverse?"not.":""}${l}`}getExpectedType(){return"any"}toAsymmetricMatcher(){return`${this.toString()}<${this.sample.map(A=>ko(A)).join(", ")}>`}};m(g,"CustomMatcher");let _=g;const x=m((...P)=>new _(!1,...P),"customMatcher");Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:x,writable:!0}),Object.defineProperty(e.not,l,{configurable:!0,enumerable:!0,value:m((...P)=>new _(!0,...P),"value"),writable:!0}),Object.defineProperty(globalThis[jS],l,{configurable:!0,enumerable:!0,value:x,writable:!0})})}}m(_q,"JestExtendPlugin");var Aoe=m((t,e)=>{e.addMethod(t.expect,"extend",(r,n)=>{gh(_q(t,r,n))})},"JestExtend");function bq(){gh(Aoe),gh(Poe),gh(Coe);const t=m((n,i)=>{const{assertionCalls:l}=sy(t);return sb({assertionCalls:l+1,soft:!1},t),Gc(n,i)},"expect");Object.assign(t,Gc),t.getState=()=>sy(t),t.setState=n=>sb(n,t),t.extend=n=>Gc.extend(t,n),t.soft=(...n)=>{const i=t(...n);return t.setState({soft:!0}),i},t.extend(_oe),t.unreachable=n=>{Ce.fail(`expected${n?` "${n}" `:" "}not to be reached`)};function e(n){const i=m(()=>new Error(`expected number of assertions to be ${n}, but got ${t.getState().assertionCalls}`),"errorGen");"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(i(),e),t.setState({expectedAssertionsNumber:n,expectedAssertionsNumberErrorGen:i})}m(e,"assertions");function r(){const n=new Error("expected any number of assertion, but got none");"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(n,r),t.setState({isExpectingAssertions:!0,isExpectingAssertionsError:n})}return m(r,"hasAssertions"),sb({assertionCalls:0,isExpectingAssertions:!1,isExpectingAssertionsError:null,expectedAssertionsNumber:null,expectedAssertionsNumberErrorGen:null},t),Pa.addMethod(t,"assertions",e),Pa.addMethod(t,"hasAssertions",r),t.extend(Yz),t}m(bq,"createExpect");var vq=bq();Object.defineProperty(globalThis,dR,{value:vq,writable:!0,configurable:!0});function xq(t,e,r){Object.defineProperty(t,e,r)}m(xq,"f");var lb=Symbol.for("tinyspy:spy"),Roe=m(t=>{t.called=!1,t.callCount=0,t.calls=[],t.results=[],t.resolves=[],t.next=[]},"P"),Ioe=m(t=>(xq(t,lb,{value:{reset:m(()=>Roe(t[lb]),"reset")}}),t[lb]),"K"),Moe=m(t=>t[lb]||Ioe(t),"T"),ZS=new Set;function _R(t){return ZS.add(t),()=>void ZS.delete(t)}m(_R,"onMockCall");var Ooe=m((...t)=>{const e=jB(...t);return vR(e)},"spyOn");function bR(t){const e=t?zS(t):zS();return vR(e)}m(bR,"fn");function vR(t){const e=KS(t),r=e.mockImplementation.bind(null);return e.mockImplementation=n=>KS(r(n)),e}m(vR,"reactiveMock");function KS(t){const e=Moe(t),r=e.impl;return e.willCall(function(...n){return ZS.forEach(i=>i(t,n)),r?.apply(this,n)}),t}m(KS,"listenWhenCalled");function xR(){t_.forEach(t=>t.mockClear())}m(xR,"clearAllMocks");function wR(){t_.forEach(t=>t.mockReset())}m(wR,"resetAllMocks");function ER(){t_.forEach(t=>t.mockRestore())}m(ER,"restoreAllMocks");function wq(t,e={}){return t}m(wq,"mocked");var Eq={};Do(Eq,{buildQueries:()=>Va,configure:()=>x8,createEvent:()=>Lg,findAllByAltText:()=>m$,findAllByDisplayValue:()=>c$,findAllByLabelText:()=>$8,findAllByPlaceholderText:()=>Y8,findAllByRole:()=>R$,findAllByTestId:()=>D$,findAllByText:()=>n$,findAllByTitle:()=>x$,findByAltText:()=>g$,findByDisplayValue:()=>u$,findByLabelText:()=>V8,findByPlaceholderText:()=>X8,findByRole:()=>I$,findByTestId:()=>N$,findByText:()=>i$,findByTitle:()=>w$,fireEvent:()=>sf,getAllByAltText:()=>p$,getAllByDisplayValue:()=>a$,getAllByLabelText:()=>U8,getAllByPlaceholderText:()=>Z8,getAllByRole:()=>P$,getAllByTestId:()=>k$,getAllByText:()=>t$,getAllByTitle:()=>b$,getByAltText:()=>f$,getByDisplayValue:()=>l$,getByLabelText:()=>G8,getByPlaceholderText:()=>K8,getByRole:()=>A$,getByTestId:()=>L$,getByText:()=>r$,getByTitle:()=>v$,getConfig:()=>nn,getDefaultNormalizer:()=>ix,getElementError:()=>i_,getMultipleElementsFoundError:()=>o_,getNodeText:()=>Lf,getQueriesForElement:()=>iv,getRoles:()=>VR,getSuggestedQuery:()=>ly,isInaccessible:()=>n_,logDOM:()=>n2,logRoles:()=>tse,makeFindQuery:()=>kh,makeGetAllQuery:()=>ax,makeSingleQuery:()=>Oh,prettyDOM:()=>of,prettyFormat:()=>TR,queries:()=>nv,queryAllByAltText:()=>h$,queryAllByAttribute:()=>uu,queryAllByDisplayValue:()=>o$,queryAllByLabelText:()=>H8,queryAllByPlaceholderText:()=>J8,queryAllByRole:()=>S$,queryAllByTestId:()=>M$,queryAllByText:()=>Q8,queryAllByTitle:()=>y$,queryByAltText:()=>d$,queryByAttribute:()=>GR,queryByDisplayValue:()=>s$,queryByLabelText:()=>B8,queryByPlaceholderText:()=>W8,queryByRole:()=>C$,queryByTestId:()=>O$,queryByText:()=>e$,queryByTitle:()=>_$,queryHelpers:()=>rse,screen:()=>wse,waitFor:()=>sx,waitForElementToBeRemoved:()=>z$,within:()=>iv,wrapAllByQueryWithSuggestion:()=>Lo,wrapSingleQueryWithSuggestion:()=>Jc});var TR=Ti(_Q()),koe=Object.prototype.toString;function YS(t){return typeof t=="function"||koe.call(t)==="[object Function]"}m(YS,"isCallable");function Tq(t){var e=Number(t);return isNaN(e)?0:e===0||!isFinite(e)?e:(e>0?1:-1)*Math.floor(Math.abs(e))}m(Tq,"toInteger");var Loe=Math.pow(2,53)-1;function Sq(t){var e=Tq(t);return Math.min(Math.max(e,0),Loe)}m(Sq,"toLength");function Cs(t,e){var r=Array,n=Object(t);if(t==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");if(typeof e<"u"&&!YS(e))throw new TypeError("Array.from: when provided, the second argument must be a function");for(var i=Sq(n.length),l=YS(r)?Object(new r(i)):new Array(i),c=0,s;c<i;)s=n[c],e?l[c]=e(s,c):l[c]=s,c+=1;return l.length=i,l}m(Cs,"arrayFrom");function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}m(rf,"_typeof");function Cq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}m(Cq,"_classCallCheck");function XS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SR(n.key),n)}}m(XS,"_defineProperties");function Pq(t,e,r){return e&&XS(t.prototype,e),r&&XS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}m(Pq,"_createClass");function Aq(t,e,r){return e=SR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(Aq,"_defineProperty");function SR(t){var e=Rq(t,"string");return rf(e)==="symbol"?e:String(e)}m(SR,"_toPropertyKey");function Rq(t,e){if(rf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(rf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}m(Rq,"_toPrimitive");var Doe=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Cq(this,t),Aq(this,"items",void 0),this.items=e}return m(t,"SetLike"),Pq(t,[{key:"add",value:m(function(r){return this.has(r)===!1&&this.items.push(r),this},"add")},{key:"clear",value:m(function(){this.items=[]},"clear")},{key:"delete",value:m(function(r){var n=this.items.length;return this.items=this.items.filter(function(i){return i!==r}),n!==this.items.length},"_delete")},{key:"forEach",value:m(function(r){var n=this;this.items.forEach(function(i){r(i,i,n)})},"forEach")},{key:"has",value:m(function(r){return this.items.indexOf(r)!==-1},"has")},{key:"size",get:m(function(){return this.items.length},"get")}]),t}(),Noe=typeof Set>"u"?Set:Doe;function eo(t){var e;return(e=t.localName)!==null&&e!==void 0?e:t.tagName.toLowerCase()}m(eo,"getLocalName");var Foe={article:"article",aside:"complementary",button:"button",datalist:"listbox",dd:"definition",details:"group",dialog:"dialog",dt:"term",fieldset:"group",figure:"figure",form:"form",footer:"contentinfo",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",header:"banner",hr:"separator",html:"document",legend:"legend",li:"listitem",math:"math",main:"main",menu:"list",nav:"navigation",ol:"list",optgroup:"group",option:"option",output:"status",progress:"progressbar",section:"region",summary:"button",table:"table",tbody:"rowgroup",textarea:"textbox",tfoot:"rowgroup",td:"cell",th:"columnheader",thead:"rowgroup",tr:"row",ul:"list"},zoe={caption:new Set(["aria-label","aria-labelledby"]),code:new Set(["aria-label","aria-labelledby"]),deletion:new Set(["aria-label","aria-labelledby"]),emphasis:new Set(["aria-label","aria-labelledby"]),generic:new Set(["aria-label","aria-labelledby","aria-roledescription"]),insertion:new Set(["aria-label","aria-labelledby"]),paragraph:new Set(["aria-label","aria-labelledby"]),presentation:new Set(["aria-label","aria-labelledby"]),strong:new Set(["aria-label","aria-labelledby"]),subscript:new Set(["aria-label","aria-labelledby"]),superscript:new Set(["aria-label","aria-labelledby"])};function Iq(t,e){return["aria-atomic","aria-busy","aria-controls","aria-current","aria-describedby","aria-details","aria-dropeffect","aria-flowto","aria-grabbed","aria-hidden","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription"].some(function(r){var n;return t.hasAttribute(r)&&!((n=zoe[e])!==null&&n!==void 0&&n.has(r))})}m(Iq,"hasGlobalAriaAttributes");function CR(t,e){return Iq(t,e)}m(CR,"ignorePresentationalRole");function Mq(t){var e=kq(t);if(e===null||e==="presentation"){var r=Oq(t);if(e!=="presentation"||CR(t,r||""))return r}return e}m(Mq,"getRole");function Oq(t){var e=Foe[eo(t)];if(e!==void 0)return e;switch(eo(t)){case"a":case"area":case"link":if(t.hasAttribute("href"))return"link";break;case"img":return t.getAttribute("alt")===""&&!CR(t,"img")?"presentation":"img";case"input":{var r=t,n=r.type;switch(n){case"button":case"image":case"reset":case"submit":return"button";case"checkbox":case"radio":return n;case"range":return"slider";case"email":case"tel":case"text":case"url":return t.hasAttribute("list")?"combobox":"textbox";case"search":return t.hasAttribute("list")?"combobox":"searchbox";case"number":return"spinbutton";default:return null}}case"select":return t.hasAttribute("multiple")||t.size>1?"listbox":"combobox"}return null}m(Oq,"getImplicitRole");function kq(t){var e=t.getAttribute("role");if(e!==null){var r=e.trim().split(" ")[0];if(r.length>0)return r}return null}m(kq,"getExplicitRole");function jn(t){return t!==null&&t.nodeType===t.ELEMENT_NODE}m(jn,"isElement");function PR(t){return jn(t)&&eo(t)==="caption"}m(PR,"isHTMLTableCaptionElement");function kg(t){return jn(t)&&eo(t)==="input"}m(kg,"isHTMLInputElement");function Lq(t){return jn(t)&&eo(t)==="optgroup"}m(Lq,"isHTMLOptGroupElement");function Dq(t){return jn(t)&&eo(t)==="select"}m(Dq,"isHTMLSelectElement");function Nq(t){return jn(t)&&eo(t)==="table"}m(Nq,"isHTMLTableElement");function Fq(t){return jn(t)&&eo(t)==="textarea"}m(Fq,"isHTMLTextAreaElement");function zq(t){var e=t.ownerDocument===null?t:t.ownerDocument,r=e.defaultView;if(r===null)throw new TypeError("no window available");return r}m(zq,"safeWindow");function jq(t){return jn(t)&&eo(t)==="fieldset"}m(jq,"isHTMLFieldSetElement");function Bq(t){return jn(t)&&eo(t)==="legend"}m(Bq,"isHTMLLegendElement");function qq(t){return jn(t)&&eo(t)==="slot"}m(qq,"isHTMLSlotElement");function $q(t){return jn(t)&&t.ownerSVGElement!==void 0}m($q,"isSVGElement");function Vq(t){return jn(t)&&eo(t)==="svg"}m(Vq,"isSVGSVGElement");function Uq(t){return $q(t)&&eo(t)==="title"}m(Uq,"isSVGTitleElement");function ay(t,e){if(jn(t)&&t.hasAttribute(e)){var r=t.getAttribute(e).split(" "),n=t.getRootNode?t.getRootNode():t.ownerDocument;return r.map(function(i){return n.getElementById(i)}).filter(function(i){return i!==null})}return[]}m(ay,"queryIdRefs");function Ra(t,e){return jn(t)?e.indexOf(Mq(t))!==-1:!1}m(Ra,"hasAnyConcreteRoles");function Gq(t){return t.trim().replace(/\s\s+/g," ")}m(Gq,"asFlatString");function Hq(t,e){if(!jn(t))return!1;if(t.hasAttribute("hidden")||t.getAttribute("aria-hidden")==="true")return!0;var r=e(t);return r.getPropertyValue("display")==="none"||r.getPropertyValue("visibility")==="hidden"}m(Hq,"isHidden");function Jq(t){return Ra(t,["button","combobox","listbox","textbox"])||AR(t,"range")}m(Jq,"isControl");function AR(t,e){if(!jn(t))return!1;switch(e){case"range":return Ra(t,["meter","progressbar","scrollbar","slider","spinbutton"]);default:throw new TypeError("No knowledge about abstract role '".concat(e,"'. This is likely a bug :("))}}m(AR,"hasAbstractRole");function QS(t,e){var r=Cs(t.querySelectorAll(e));return ay(t,"aria-owns").forEach(function(n){r.push.apply(r,Cs(n.querySelectorAll(e)))}),r}m(QS,"querySelectorAllSubtree");function Wq(t){return Dq(t)?t.selectedOptions||QS(t,"[selected]"):QS(t,'[aria-selected="true"]')}m(Wq,"querySelectedOptions");function Zq(t){return Ra(t,["none","presentation"])}m(Zq,"isMarkedPresentational");function Kq(t){return PR(t)}m(Kq,"isNativeHostLanguageTextAlternativeElement");function Yq(t){return Ra(t,["button","cell","checkbox","columnheader","gridcell","heading","label","legend","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","row","rowheader","switch","tab","tooltip","treeitem"])}m(Yq,"allowsNameFromContent");function Xq(t){return!1}m(Xq,"isDescendantOfNativeHostLanguageTextAlternativeElement");function Qq(t){return kg(t)||Fq(t)?t.value:t.textContent||""}m(Qq,"getValueOfTextbox");function e2(t){var e=t.getPropertyValue("content");return/^["'].*["']$/.test(e)?e.slice(1,-1):""}m(e2,"getTextualContent");function RR(t){var e=eo(t);return e==="button"||e==="input"&&t.getAttribute("type")!=="hidden"||e==="meter"||e==="output"||e==="progress"||e==="select"||e==="textarea"}m(RR,"isLabelableElement");function IR(t){if(RR(t))return t;var e=null;return t.childNodes.forEach(function(r){if(e===null&&jn(r)){var n=IR(r);n!==null&&(e=n)}}),e}m(IR,"findLabelableElement");function e8(t){if(t.control!==void 0)return t.control;var e=t.getAttribute("for");return e!==null?t.ownerDocument.getElementById(e):IR(t)}m(e8,"getControlOfLabel");function t8(t){var e=t.labels;if(e===null)return e;if(e!==void 0)return Cs(e);if(!RR(t))return null;var r=t.ownerDocument;return Cs(r.querySelectorAll("label")).filter(function(n){return e8(n)===t})}m(t8,"getLabels");function r8(t){var e=t.assignedNodes();return e.length===0?Cs(t.childNodes):e}m(r8,"getSlotContents");function MR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Noe,n=zq(t),i=e.compute,l=i===void 0?"name":i,c=e.computedStyleSupportsPseudoElements,s=c===void 0?e.getComputedStyle!==void 0:c,p=e.getComputedStyle,g=p===void 0?n.getComputedStyle.bind(n):p,_=e.hidden,x=_===void 0?!1:_;function P(j,$){var W="";if(jn(j)&&s){var X=g(j,"::before"),te=e2(X);W="".concat(te," ").concat(W)}var ne=qq(j)?r8(j):Cs(j.childNodes).concat(ay(j,"aria-owns"));if(ne.forEach(function(K){var he=z(K,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!1,recursion:!0}),ue=jn(K)?g(K).getPropertyValue("display"):"inline",we=ue!=="inline"?" ":"";W+="".concat(we).concat(he).concat(we)}),jn(j)&&s){var Z=g(j,"::after"),U=e2(Z);W="".concat(W," ").concat(U)}return W.trim()}m(P,"computeMiscTextAlternative");function A(j,$){var W=j.getAttributeNode($);return W!==null&&!r.has(W)&&W.value.trim()!==""?(r.add(W),W.value):null}m(A,"useAttribute");function M(j){return jn(j)?A(j,"title"):null}m(M,"computeTooltipAttributeValue");function F(j){if(!jn(j))return null;if(jq(j)){r.add(j);for(var $=Cs(j.childNodes),W=0;W<$.length;W+=1){var X=$[W];if(Bq(X))return z(X,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(Nq(j)){r.add(j);for(var te=Cs(j.childNodes),ne=0;ne<te.length;ne+=1){var Z=te[ne];if(PR(Z))return z(Z,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(Vq(j)){r.add(j);for(var U=Cs(j.childNodes),K=0;K<U.length;K+=1){var he=U[K];if(Uq(he))return he.textContent}return null}else if(eo(j)==="img"||eo(j)==="area"){var ue=A(j,"alt");if(ue!==null)return ue}else if(Lq(j)){var we=A(j,"label");if(we!==null)return we}if(kg(j)&&(j.type==="button"||j.type==="submit"||j.type==="reset")){var Ie=A(j,"value");if(Ie!==null)return Ie;if(j.type==="submit")return"Submit";if(j.type==="reset")return"Reset"}var ee=t8(j);if(ee!==null&&ee.length!==0)return r.add(j),Cs(ee).map(function(Xe){return z(Xe,{isEmbeddedInLabel:!0,isReferenced:!1,recursion:!0})}).filter(function(Xe){return Xe.length>0}).join(" ");if(kg(j)&&j.type==="image"){var fe=A(j,"alt");if(fe!==null)return fe;var ve=A(j,"title");return ve!==null?ve:"Submit Query"}if(Ra(j,["button"])){var xe=P(j,{isEmbeddedInLabel:!1});if(xe!=="")return xe}return null}m(F,"computeElementTextAlternative");function z(j,$){if(r.has(j))return"";if(!x&&Hq(j,g)&&!$.isReferenced)return r.add(j),"";var W=jn(j)?j.getAttributeNode("aria-labelledby"):null,X=W!==null&&!r.has(W)?ay(j,"aria-labelledby"):[];if(l==="name"&&!$.isReferenced&&X.length>0)return r.add(W),X.map(function(ue){return z(ue,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!0,recursion:!1})}).join(" ");var te=$.recursion&&Jq(j)&&l==="name";if(!te){var ne=(jn(j)&&j.getAttribute("aria-label")||"").trim();if(ne!==""&&l==="name")return r.add(j),ne;if(!Zq(j)){var Z=F(j);if(Z!==null)return r.add(j),Z}}if(Ra(j,["menu"]))return r.add(j),"";if(te||$.isEmbeddedInLabel||$.isReferenced){if(Ra(j,["combobox","listbox"])){r.add(j);var U=Wq(j);return U.length===0?kg(j)?j.value:"":Cs(U).map(function(ue){return z(ue,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!1,recursion:!0})}).join(" ")}if(AR(j,"range"))return r.add(j),j.hasAttribute("aria-valuetext")?j.getAttribute("aria-valuetext"):j.hasAttribute("aria-valuenow")?j.getAttribute("aria-valuenow"):j.getAttribute("value")||"";if(Ra(j,["textbox"]))return r.add(j),Qq(j)}if(Yq(j)||jn(j)&&$.isReferenced||Kq(j)||Xq()){var K=P(j,{isEmbeddedInLabel:$.isEmbeddedInLabel});if(K!=="")return r.add(j),K}if(j.nodeType===j.TEXT_NODE)return r.add(j),j.textContent||"";if($.recursion)return r.add(j),P(j,{isEmbeddedInLabel:$.isEmbeddedInLabel});var he=M(j);return he!==null?(r.add(j),he):(r.add(j),"")}return m(z,"computeTextAlternative"),Gq(z(t,{isEmbeddedInLabel:!1,isReferenced:l==="description",recursion:!1}))}m(MR,"computeTextAlternative");function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}m(nf,"_typeof");function t2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}m(t2,"ownKeys");function r2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t2(Object(r),!0).forEach(function(n){n8(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}m(r2,"_objectSpread");function n8(t,e,r){return e=i8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(n8,"_defineProperty");function i8(t){var e=o8(t,"string");return nf(e)==="symbol"?e:String(e)}m(i8,"_toPropertyKey");function o8(t,e){if(nf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}m(o8,"_toPrimitive");function OR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=ay(t,"aria-describedby").map(function(i){return MR(i,r2(r2({},e),{},{compute:"description"}))}).join(" ");if(r===""){var n=t.getAttribute("title");r=n===null?"":n}return r}m(OR,"computeAccessibleDescription");function s8(t){return Ra(t,["caption","code","deletion","emphasis","generic","insertion","paragraph","presentation","strong","subscript","superscript"])}m(s8,"prohibitsNaming");function rx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s8(t)?"":MR(t,e)}m(rx,"computeAccessibleName");var Ts=Ti(IC()),joe=Ti(bQ());function kR(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}m(kR,"escapeHTML");var Boe=m((t,e,r,n,i,l,c)=>{const s=n+r.indent,p=r.colors;return t.map(g=>{const _=e[g];let x=c(_,r,s,i,l);return typeof _!="string"&&(x.indexOf(`
`)!==-1&&(x=r.spacingOuter+s+x+r.spacingOuter+n),x="{"+x+"}"),r.spacingInner+n+p.prop.open+g+p.prop.close+"="+p.value.open+x+p.value.close}).join("")},"printProps"),qoe=3,$oe=m((t,e,r,n,i,l)=>t.map(c=>{const s=typeof c=="string"?a8(c,e):l(c,e,r,n,i);return s===""&&typeof c=="object"&&c!==null&&c.nodeType!==qoe?"":e.spacingOuter+r+s}).join(""),"printChildren"),a8=m((t,e)=>{const r=e.colors.content;return r.open+kR(t)+r.close},"printText"),Voe=m((t,e)=>{const r=e.colors.comment;return r.open+"<!--"+kR(t)+"-->"+r.close},"printComment"),Uoe=m((t,e,r,n,i)=>{const l=n.colors.tag;return l.open+"<"+t+(e&&l.close+e+n.spacingOuter+i+l.open)+(r?">"+l.close+r+n.spacingOuter+i+l.open+"</"+t:(e&&!n.min?"":" ")+"/")+">"+l.close},"printElement"),Goe=m((t,e)=>{const r=e.colors.tag;return r.open+"<"+t+r.close+" "+r.open+" />"+r.close},"printElementAsLeaf"),Hoe=1,l8=3,c8=8,u8=11,Joe=/^((HTML|SVG)\w*)?Element$/,h8=m(t=>{const{tagName:e}=t;return!!(typeof e=="string"&&e.includes("-")||typeof t.hasAttribute=="function"&&t.hasAttribute("is"))},"isCustomElement"),Woe=m(t=>{const e=t.constructor.name,{nodeType:r}=t;return r===Hoe&&(Joe.test(e)||h8(t))||r===l8&&e==="Text"||r===c8&&e==="Comment"||r===u8&&e==="DocumentFragment"},"testNode");function d8(t){return t.nodeType===l8}m(d8,"nodeIsText");function p8(t){return t.nodeType===c8}m(p8,"nodeIsComment");function cb(t){return t.nodeType===u8}m(cb,"nodeIsFragment");function f8(t){return{test:m(e=>{var r;return((e==null||(r=e.constructor)==null?void 0:r.name)||h8(e))&&Woe(e)},"test"),serialize:m((e,r,n,i,l,c)=>{if(d8(e))return a8(e.data,r);if(p8(e))return Voe(e.data,r);const s=cb(e)?"DocumentFragment":e.tagName.toLowerCase();return++i>r.maxDepth?Goe(s,r):Uoe(s,Boe(cb(e)?[]:Array.from(e.attributes).map(p=>p.name).sort(),cb(e)?{}:Array.from(e.attributes).reduce((p,g)=>(p[g.name]=g.value,p),{}),r,n+r.indent,i,l,c),$oe(Array.prototype.slice.call(e.childNodes||e.children).filter(t),r,n+r.indent,i,l,c),r,n)},"serialize")}}m(f8,"createDOMElementFilter");var m8=null,LR=null,DR=null;try{const t=module&&module.require;LR=t.call(module,"fs").readFileSync,DR=t.call(module,"@babel/code-frame").codeFrameColumns,m8=t.call(module,"picocolors")}catch{}function g8(t){const e=t.indexOf("(")+1,r=t.indexOf(")"),n=t.slice(e,r),i=n.split(":"),[l,c,s]=[i[0],parseInt(i[1],10),parseInt(i[2],10)];let p="";try{p=LR(l,"utf-8")}catch{return""}const g=DR(p,{start:{line:c,column:s}},{highlightCode:!0,linesBelow:0});return m8.dim(n)+`
`+g+`
`}m(g8,"getCodeFrame");function y8(){if(!LR||!DR)return"";const e=new Error().stack.split(`
`).slice(1).find(r=>!r.includes("node_modules/"));return g8(e)}m(y8,"getUserCodeFrame");var _8=3;function ub(){return typeof jest<"u"&&jest!==null?setTimeout._isMockFunction===!0||Object.prototype.hasOwnProperty.call(setTimeout,"clock"):!1}m(ub,"jestFakeTimersAreEnabled");function nx(){if(typeof window>"u")throw new Error("Could not find default container");return window.document}m(nx,"getDocument");function NR(t){if(t.defaultView)return t.defaultView;if(t.ownerDocument&&t.ownerDocument.defaultView)return t.ownerDocument.defaultView;if(t.window)return t.window;throw t.ownerDocument&&t.ownerDocument.defaultView===null?new Error("It looks like the window object is not available for the provided node."):t.then instanceof Function?new Error("It looks like you passed a Promise object instead of a DOM node. Did you do something like `fireEvent.click(screen.findBy...` when you meant to use a `getBy` query `fireEvent.click(screen.getBy...`, or await the findBy query `fireEvent.click(await screen.findBy...`?"):Array.isArray(t)?new Error("It looks like you passed an Array instead of a DOM node. Did you do something like `fireEvent.click(screen.getAllBy...` when you meant to use a `getBy` query `fireEvent.click(screen.getBy...`?"):typeof t.debug=="function"&&typeof t.logTestingPlaygroundURL=="function"?new Error("It looks like you passed a `screen` object. Did you do something like `fireEvent.click(screen, ...` when you meant to use a query, e.g. `fireEvent.click(screen.getBy..., `?"):new Error("The given node is not an Element, the node type is: "+typeof t+".")}m(NR,"getWindowFromNode");function $a(t){if(!t||typeof t.querySelector!="function"||typeof t.querySelectorAll!="function")throw new TypeError("Expected container to be an Element, a Document or a DocumentFragment but got "+e(t)+".");function e(r){return typeof r=="object"?r===null?"null":r.constructor.name:typeof r}m(e,"getTypeName")}m($a,"checkContainerType");var Zoe=m(()=>{if(typeof process>"u")return!1;let t;try{var e;const r=(e=UT)==null?void 0:e.COLORS;r&&(t=JSON.parse(r))}catch{}return typeof t=="boolean"?t:process.versions!==void 0&&process.versions.node!==void 0},"shouldHighlight"),{DOMCollection:Koe}=TR.plugins,Yoe=1,Xoe=8;function b8(t){return t.nodeType!==Xoe&&(t.nodeType!==Yoe||!t.matches(nn().defaultIgnore))}m(b8,"filterCommentsAndDefaultIgnoreTagsTags");function of(t,e,r){if(r===void 0&&(r={}),t||(t=nx().body),typeof e!="number"&&(e=typeof process<"u"&&typeof UT<"u"&&UT.DEBUG_PRINT_LIMIT||7e3),e===0)return"";t.documentElement&&(t=t.documentElement);let n=typeof t;if(n==="object"?n=t.constructor.name:t={},!("outerHTML"in t))throw new TypeError("Expected an element or document but got "+n);const{filterNode:i=b8,...l}=r,c=TR.format(t,{plugins:[f8(i),Koe],printFunctionName:!1,highlight:Zoe(),...l});return e!==void 0&&t.outerHTML.length>e?c.slice(0,e)+"...":c}m(of,"prettyDOM");var n2=m(function(){const t=y8();console.log(t?of(...arguments)+`

`+t:of(...arguments))},"logDOM"),bh={testIdAttribute:"data-testid",asyncUtilTimeout:1e3,asyncWrapper:m(t=>t(),"asyncWrapper"),unstable_advanceTimersWrapper:m(t=>t(),"unstable_advanceTimersWrapper"),eventWrapper:m(t=>t(),"eventWrapper"),defaultHidden:!1,defaultIgnore:"script, style",showOriginalStackTrace:!1,throwSuggestions:!1,getElementError(t,e){const r=of(e),n=new Error([t,"Ignored nodes: comments, "+bh.defaultIgnore+`
`+r].filter(Boolean).join(`

`));return n.name="TestingLibraryElementError",n},_disableExpensiveErrorDiagnostics:!1,computedStyleSupportsPseudoElements:!1};function v8(t){try{return bh._disableExpensiveErrorDiagnostics=!0,t()}finally{bh._disableExpensiveErrorDiagnostics=!1}}m(v8,"runWithExpensiveErrorDiagnosticsDisabled");function x8(t){typeof t=="function"&&(t=t(bh)),bh={...bh,...t}}m(x8,"configure");function nn(){return bh}m(nn,"getConfig");var Qoe=["button","meter","output","progress","select","textarea","input"];function FR(t){return Qoe.includes(t.nodeName.toLowerCase())?"":t.nodeType===_8?t.textContent:Array.from(t.childNodes).map(e=>FR(e)).join("")}m(FR,"getTextContent");function rv(t){let e;return t.tagName.toLowerCase()==="label"?e=FR(t):e=t.value||t.textContent,e}m(rv,"getLabelContent");function zR(t){if(t.labels!==void 0){var e;return(e=t.labels)!=null?e:[]}if(!w8(t))return[];const r=t.ownerDocument.querySelectorAll("label");return Array.from(r).filter(n=>n.control===t)}m(zR,"getRealLabels");function w8(t){return/BUTTON|METER|OUTPUT|PROGRESS|SELECT|TEXTAREA/.test(t.tagName)||t.tagName==="INPUT"&&t.getAttribute("type")!=="hidden"}m(w8,"isLabelable");function jR(t,e,r){let{selector:n="*"}=r===void 0?{}:r;const i=e.getAttribute("aria-labelledby"),l=i?i.split(" "):[];return l.length?l.map(c=>{const s=t.querySelector('[id="'+c+'"]');return s?{content:rv(s),formControl:null}:{content:"",formControl:null}}):Array.from(zR(e)).map(c=>{const s=rv(c),g=Array.from(c.querySelectorAll("button, input, meter, output, progress, select, textarea")).filter(_=>_.matches(n))[0];return{content:s,formControl:g}})}m(jR,"getLabels");function BR(t){if(t==null)throw new Error("It looks like "+t+" was passed instead of a matcher. Did you do something like getByText("+t+")?")}m(BR,"assertNotNullOrUndefined");function ed(t,e,r,n){if(typeof t!="string")return!1;BR(r);const i=n(t);return typeof r=="string"||typeof r=="number"?i.toLowerCase().includes(r.toString().toLowerCase()):typeof r=="function"?r(i,e):qR(r,i)}m(ed,"fuzzyMatches");function ka(t,e,r,n){if(typeof t!="string")return!1;BR(r);const i=n(t);return r instanceof Function?r(i,e):r instanceof RegExp?qR(r,i):i===String(r)}m(ka,"matches");function ix(t){let{trim:e=!0,collapseWhitespace:r=!0}=t===void 0?{}:t;return n=>{let i=n;return i=e?i.trim():i,i=r?i.replace(/\s+/g," "):i,i}}m(ix,"getDefaultNormalizer");function cu(t){let{trim:e,collapseWhitespace:r,normalizer:n}=t;if(!n)return ix({trim:e,collapseWhitespace:r});if(typeof e<"u"||typeof r<"u")throw new Error('trim and collapseWhitespace are not supported with a normalizer. If you want to use the default trim and collapseWhitespace logic in your normalizer, use "getDefaultNormalizer({trim, collapseWhitespace})" and compose that into your normalizer');return n}m(cu,"makeNormalizer");function qR(t,e){const r=t.test(e);return t.global&&t.lastIndex!==0&&(console.warn("To match all elements we had to reset the lastIndex of the RegExp because the global flag is enabled. We encourage to remove the global flag from the RegExp."),t.lastIndex=0),r}m(qR,"matchRegExp");function Lf(t){return t.matches("input[type=submit], input[type=button], input[type=reset]")?t.value:Array.from(t.childNodes).filter(e=>e.nodeType===_8&&!!e.textContent).map(e=>e.textContent).join("")}m(Lf,"getNodeText");var ese=E8(Ts.elementRoles);function $R(t){return t.hidden===!0||t.getAttribute("aria-hidden")==="true"||t.ownerDocument.defaultView.getComputedStyle(t).display==="none"}m($R,"isSubtreeInaccessible");function n_(t,e){e===void 0&&(e={});const{isSubtreeInaccessible:r=$R}=e;if(t.ownerDocument.defaultView.getComputedStyle(t).visibility==="hidden")return!0;let i=t;for(;i;){if(r(i))return!0;i=i.parentElement}return!1}m(n_,"isInaccessible");function ox(t){for(const{match:e,roles:r}of ese)if(e(t))return[...r];return[]}m(ox,"getImplicitAriaRoles");function E8(t){function e(c){let{name:s,attributes:p}=c;return""+s+p.map(g=>{let{name:_,value:x,constraints:P=[]}=g;const A=P.indexOf("undefined")!==-1,M=P.indexOf("set")!==-1;return typeof x<"u"?"["+_+'="'+x+'"]':A?":not(["+_+"])":M?"["+_+"]:not(["+_+'=""])':"["+_+"]"}).join("")}m(e,"makeElementSelector");function r(c){let{attributes:s=[]}=c;return s.length}m(r,"getSelectorSpecificity");function n(c,s){let{specificity:p}=c,{specificity:g}=s;return g-p}m(n,"bySelectorSpecificity");function i(c){let{attributes:s=[]}=c;const p=s.findIndex(_=>_.value&&_.name==="type"&&_.value==="text");p>=0&&(s=[...s.slice(0,p),...s.slice(p+1)]);const g=e({...c,attributes:s});return _=>p>=0&&_.type!=="text"?!1:_.matches(g)}m(i,"match");let l=[];for(const[c,s]of t.entries())l=[...l,{match:i(c),roles:Array.from(s),specificity:r(c)}];return l.sort(n)}m(E8,"buildElementRoleList");function VR(t,e){let{hidden:r=!1}=e===void 0?{}:e;function n(i){return[i,...Array.from(i.children).reduce((l,c)=>[...l,...n(c)],[])]}return m(n,"flattenDOM"),n(t).filter(i=>r===!1?n_(i)===!1:!0).reduce((i,l)=>{let c=[];return l.hasAttribute("role")?c=l.getAttribute("role").split(" ").slice(0,1):c=ox(l),c.reduce((s,p)=>Array.isArray(s[p])?{...s,[p]:[...s[p],l]}:{...s,[p]:[l]},i)},{})}m(VR,"getRoles");function UR(t,e){let{hidden:r,includeDescription:n}=e;const i=VR(t,{hidden:r});return Object.entries(i).filter(l=>{let[c]=l;return c!=="generic"}).map(l=>{let[c,s]=l;const p="-".repeat(50),g=s.map(_=>{const x='Name "'+rx(_,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements})+`":
`,P=of(_.cloneNode(!1));if(n){const A='Description "'+OR(_,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements})+`":
`;return""+x+A+P}return""+x+P}).join(`

`);return c+`:

`+g+`

`+p}).join(`
`)}m(UR,"prettyRoles");var tse=m(function(t,e){let{hidden:r=!1}=e===void 0?{}:e;return console.log(UR(t,{hidden:r}))},"logRoles");function T8(t){return t.tagName==="OPTION"?t.selected:Df(t,"aria-selected")}m(T8,"computeAriaSelected");function S8(t){return t.getAttribute("aria-busy")==="true"}m(S8,"computeAriaBusy");function C8(t){if(!("indeterminate"in t&&t.indeterminate))return"checked"in t?t.checked:Df(t,"aria-checked")}m(C8,"computeAriaChecked");function P8(t){return Df(t,"aria-pressed")}m(P8,"computeAriaPressed");function A8(t){var e,r;return(e=(r=Df(t,"aria-current"))!=null?r:t.getAttribute("aria-current"))!=null?e:!1}m(A8,"computeAriaCurrent");function R8(t){return Df(t,"aria-expanded")}m(R8,"computeAriaExpanded");function Df(t,e){const r=t.getAttribute(e);if(r==="true")return!0;if(r==="false")return!1}m(Df,"checkBooleanAttribute");function I8(t){const e={H1:1,H2:2,H3:3,H4:4,H5:5,H6:6};return t.getAttribute("aria-level")&&Number(t.getAttribute("aria-level"))||e[t.tagName]}m(I8,"computeHeadingLevel");function M8(t){const e=t.getAttribute("aria-valuenow");return e===null?void 0:+e}m(M8,"computeAriaValueNow");function O8(t){const e=t.getAttribute("aria-valuemax");return e===null?void 0:+e}m(O8,"computeAriaValueMax");function k8(t){const e=t.getAttribute("aria-valuemin");return e===null?void 0:+e}m(k8,"computeAriaValueMin");function L8(t){const e=t.getAttribute("aria-valuetext");return e===null?void 0:e}m(L8,"computeAriaValueText");var ek=ix();function D8(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}m(D8,"escapeRegExp");function i2(t){return new RegExp(D8(t.toLowerCase()),"i")}m(i2,"getRegExpMatcher");function ml(t,e,r,n){let{variant:i,name:l}=n,c="";const s={},p=[["Role","TestId"].includes(t)?r:i2(r)];l&&(s.name=i2(l)),t==="Role"&&n_(e)&&(s.hidden=!0,c=`Element is inaccessible. This means that the element and all its children are invisible to screen readers.
    If you are using the aria-hidden prop, make sure this is the right choice for your case.
    `),Object.keys(s).length>0&&p.push(s);const g=i+"By"+t;return{queryName:t,queryMethod:g,queryArgs:p,variant:i,warning:c,toString(){c&&console.warn(c);let[_,x]=p;return _=typeof _=="string"?"'"+_+"'":_,x=x?", { "+Object.entries(x).map(P=>{let[A,M]=P;return A+": "+M}).join(", ")+" }":"",g+"("+_+x+")"}}}m(ml,"makeSuggestion");function gl(t,e,r){return r&&(!e||e.toLowerCase()===t.toLowerCase())}m(gl,"canSuggest");function ly(t,e,r){var n,i;if(e===void 0&&(e="get"),t.matches(nn().defaultIgnore))return;const l=(n=t.getAttribute("role"))!=null?n:(i=ox(t))==null?void 0:i[0];if(l!=="generic"&&gl("Role",r,l))return ml("Role",t,l,{variant:e,name:rx(t,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements})});const c=jR(document,t).map(P=>P.content).join(" ");if(gl("LabelText",r,c))return ml("LabelText",t,c,{variant:e});const s=t.getAttribute("placeholder");if(gl("PlaceholderText",r,s))return ml("PlaceholderText",t,s,{variant:e});const p=ek(Lf(t));if(gl("Text",r,p))return ml("Text",t,p,{variant:e});if(gl("DisplayValue",r,t.value))return ml("DisplayValue",t,ek(t.value),{variant:e});const g=t.getAttribute("alt");if(gl("AltText",r,g))return ml("AltText",t,g,{variant:e});const _=t.getAttribute("title");if(gl("Title",r,_))return ml("Title",t,_,{variant:e});const x=t.getAttribute(nn().testIdAttribute);if(gl("TestId",r,x))return ml("TestId",t,x,{variant:e})}m(ly,"getSuggestedQuery");function fg(t,e){t.stack=e.stack.replace(e.message,t.message)}m(fg,"copyStackTrace");function N8(t,e){let{container:r=nx(),timeout:n=nn().asyncUtilTimeout,showOriginalStackTrace:i=nn().showOriginalStackTrace,stackTraceError:l,interval:c=50,onTimeout:s=m(g=>(Object.defineProperty(g,"message",{value:nn().getElementError(g.message,r).message}),g),"onTimeout"),mutationObserverOptions:p={subtree:!0,childList:!0,attributes:!0,characterData:!0}}=e;if(typeof t!="function")throw new TypeError("Received `callback` arg must be a function");return new Promise(async(g,_)=>{let x,P,A,M=!1,F="idle";const z=setTimeout(te,n),j=ub();if(j){const{unstable_advanceTimersWrapper:ne}=nn();for(X();!M;){if(!ub()){const Z=new Error("Changed from using fake timers to real timers while using waitFor. This is not allowed and will result in very strange behavior. Please ensure you're awaiting all async things your test is doing before changing to real timers. For more info, please go to https://github.com/testing-library/dom-testing-library/issues/830");i||fg(Z,l),_(Z);return}if(await ne(async()=>{jest.advanceTimersByTime(c)}),M)break;X()}}else{try{$a(r)}catch(Z){_(Z);return}P=setInterval(W,c);const{MutationObserver:ne}=NR(r);A=new ne(W),A.observe(r,p),X()}function $(ne,Z){M=!0,clearTimeout(z),j||(clearInterval(P),A.disconnect()),ne?_(ne):g(Z)}m($,"onDone");function W(){if(ub()){const ne=new Error("Changed from using real timers to fake timers while using waitFor. This is not allowed and will result in very strange behavior. Please ensure you're awaiting all async things your test is doing before changing to fake timers. For more info, please go to https://github.com/testing-library/dom-testing-library/issues/830");return i||fg(ne,l),_(ne)}else return X()}m(W,"checkRealTimersCallback");function X(){if(F!=="pending")try{const ne=v8(t);typeof ne?.then=="function"?(F="pending",ne.then(Z=>{F="resolved",$(null,Z)},Z=>{F="rejected",x=Z})):$(null,ne)}catch(ne){x=ne}}m(X,"checkCallback");function te(){let ne;x?(ne=x,!i&&ne.name==="TestingLibraryElementError"&&fg(ne,l)):(ne=new Error("Timed out in waitFor."),i||fg(ne,l)),$(s(ne),null)}m(te,"handleTimeout")})}m(N8,"waitFor");function sx(t,e){const r=new Error("STACK_TRACE_MESSAGE");return nn().asyncWrapper(()=>N8(t,{stackTraceError:r,...e}))}m(sx,"waitForWrapper");function i_(t,e){return nn().getElementError(t,e)}m(i_,"getElementError");function o_(t,e){return i_(t+"\n\n(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).",e)}m(o_,"getMultipleElementsFoundError");function uu(t,e,r,n){let{exact:i=!0,collapseWhitespace:l,trim:c,normalizer:s}=n===void 0?{}:n;const p=i?ka:ed,g=cu({collapseWhitespace:l,trim:c,normalizer:s});return Array.from(e.querySelectorAll("["+t+"]")).filter(_=>p(_.getAttribute(t),_,r,g))}m(uu,"queryAllByAttribute");function GR(t,e,r,n){const i=uu(t,e,r,n);if(i.length>1)throw o_("Found multiple elements by ["+t+"="+r+"]",e);return i[0]||null}m(GR,"queryByAttribute");function Oh(t,e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),l=1;l<n;l++)i[l-1]=arguments[l];const c=t(r,...i);if(c.length>1){const s=c.map(p=>i_(null,p).message).join(`

`);throw o_(e(r,...i)+`

Here are the matching elements:

`+s,r)}return c[0]||null}}m(Oh,"makeSingleQuery");function HR(t,e){return nn().getElementError(`A better query is available, try this:
`+t.toString()+`
`,e)}m(HR,"getSuggestionError");function ax(t,e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),l=1;l<n;l++)i[l-1]=arguments[l];const c=t(r,...i);if(!c.length)throw nn().getElementError(e(r,...i),r);return c}}m(ax,"makeGetAllQuery");function kh(t){return(e,r,n,i)=>sx(()=>t(e,r,n),{container:e,...i})}m(kh,"makeFindQuery");var Jc=m((t,e,r)=>function(n){for(var i=arguments.length,l=new Array(i>1?i-1:0),c=1;c<i;c++)l[c-1]=arguments[c];const s=t(n,...l),[{suggest:p=nn().throwSuggestions}={}]=l.slice(-1);if(s&&p){const g=ly(s,r);if(g&&!e.endsWith(g.queryName))throw HR(g.toString(),n)}return s},"wrapSingleQueryWithSuggestion"),Lo=m((t,e,r)=>function(n){for(var i=arguments.length,l=new Array(i>1?i-1:0),c=1;c<i;c++)l[c-1]=arguments[c];const s=t(n,...l),[{suggest:p=nn().throwSuggestions}={}]=l.slice(-1);if(s.length&&p){const g=[...new Set(s.map(_=>{var x;return(x=ly(_,r))==null?void 0:x.toString()}))];if(g.length===1&&!e.endsWith(ly(s[0],r).queryName))throw HR(g[0],n)}return s},"wrapAllByQueryWithSuggestion");function Va(t,e,r){const n=Jc(Oh(t,e),t.name,"query"),i=ax(t,r),l=Oh(i,e),c=Jc(l,t.name,"get"),s=Lo(i,t.name.replace("query","get"),"getAll"),p=kh(Lo(i,t.name,"findAll")),g=kh(Jc(l,t.name,"find"));return[n,s,c,p,g]}m(Va,"buildQueries");var rse=Object.freeze({__proto__:null,getElementError:i_,wrapAllByQueryWithSuggestion:Lo,wrapSingleQueryWithSuggestion:Jc,getMultipleElementsFoundError:o_,queryAllByAttribute:uu,queryByAttribute:GR,makeSingleQuery:Oh,makeGetAllQuery:ax,makeFindQuery:kh,buildQueries:Va});function F8(t){return Array.from(t.querySelectorAll("label,input")).map(e=>({node:e,textToMatch:rv(e)})).filter(e=>{let{textToMatch:r}=e;return r!==null})}m(F8,"queryAllLabels");var nse=m(function(t,e,r){let{exact:n=!0,trim:i,collapseWhitespace:l,normalizer:c}=r===void 0?{}:r;const s=n?ka:ed,p=cu({collapseWhitespace:l,trim:i,normalizer:c});return F8(t).filter(_=>{let{node:x,textToMatch:P}=_;return s(P,x,e,p)}).map(_=>{let{node:x}=_;return x})},"queryAllLabelsByText"),cy=m(function(t,e,r){let{selector:n="*",exact:i=!0,collapseWhitespace:l,trim:c,normalizer:s}=r===void 0?{}:r;$a(t);const p=i?ka:ed,g=cu({collapseWhitespace:l,trim:c,normalizer:s}),_=Array.from(t.querySelectorAll("*")).filter(x=>zR(x).length||x.hasAttribute("aria-labelledby")).reduce((x,P)=>{const A=jR(t,P,{selector:n});A.filter(F=>!!F.formControl).forEach(F=>{p(F.content,F.formControl,e,g)&&F.formControl&&x.push(F.formControl)});const M=A.filter(F=>!!F.content).map(F=>F.content);return p(M.join(" "),P,e,g)&&x.push(P),M.length>1&&M.forEach((F,z)=>{p(F,P,e,g)&&x.push(P);const j=[...M];j.splice(z,1),j.length>1&&p(j.join(" "),P,e,g)&&x.push(P)}),x},[]).concat(uu("aria-label",t,e,{exact:i,normalizer:g}));return Array.from(new Set(_)).filter(x=>x.matches(n))},"queryAllByLabelText"),Lh=m(function(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];const l=cy(t,e,...n);if(!l.length){const c=nse(t,e,...n);if(c.length){const s=c.map(p=>z8(t,p)).filter(p=>!!p);throw s.length?nn().getElementError(s.map(p=>"Found a label with the text of: "+e+", however the element associated with this label (<"+p+" />) is non-labellable [https://html.spec.whatwg.org/multipage/forms.html#category-label]. If you really need to label a <"+p+" />, you can use aria-label or aria-labelledby instead.").join(`

`),t):nn().getElementError("Found a label with the text of: "+e+`, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.`,t)}else throw nn().getElementError("Unable to find a label with the text of: "+e,t)}return l},"getAllByLabelText");function z8(t,e){const r=e.getAttribute("for");if(!r)return null;const n=t.querySelector('[id="'+r+'"]');return n?n.tagName.toLowerCase():null}m(z8,"getTagNameOfElementAssociatedWithLabelViaFor");var j8=m((t,e)=>"Found multiple elements with the text of: "+e,"getMultipleError$7"),B8=Jc(Oh(cy,j8),cy.name,"query"),q8=Oh(Lh,j8),$8=kh(Lo(Lh,Lh.name,"findAll")),V8=kh(Jc(q8,Lh.name,"find")),U8=Lo(Lh,Lh.name,"getAll"),G8=Jc(q8,Lh.name,"get"),H8=Lo(cy,cy.name,"queryAll"),o2=m(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return $a(e[0]),uu("placeholder",...e)},"queryAllByPlaceholderText"),ise=m((t,e)=>"Found multiple elements with the placeholder text of: "+e,"getMultipleError$6"),ose=m((t,e)=>"Unable to find an element with the placeholder text of: "+e,"getMissingError$6"),J8=Lo(o2,o2.name,"queryAll"),[W8,Z8,K8,Y8,X8]=Va(o2,ise,ose),s2=m(function(t,e,r){let{selector:n="*",exact:i=!0,collapseWhitespace:l,trim:c,ignore:s=nn().defaultIgnore,normalizer:p}=r===void 0?{}:r;$a(t);const g=i?ka:ed,_=cu({collapseWhitespace:l,trim:c,normalizer:p});let x=[];return typeof t.matches=="function"&&t.matches(n)&&(x=[t]),[...x,...Array.from(t.querySelectorAll(n))].filter(P=>!s||!P.matches(s)).filter(P=>g(Lf(P),P,e,_))},"queryAllByText"),sse=m((t,e)=>"Found multiple elements with the text: "+e,"getMultipleError$5"),ase=m(function(t,e,r){r===void 0&&(r={});const{collapseWhitespace:n,trim:i,normalizer:l,selector:c}=r,p=cu({collapseWhitespace:n,trim:i,normalizer:l})(e.toString()),g=p!==e.toString(),_=(c??"*")!=="*";return"Unable to find an element with the text: "+(g?p+" (normalized from '"+e+"')":e)+(_?", which matches selector '"+c+"'":"")+". This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible."},"getMissingError$5"),Q8=Lo(s2,s2.name,"queryAll"),[e$,t$,r$,n$,i$]=Va(s2,sse,ase),a2=m(function(t,e,r){let{exact:n=!0,collapseWhitespace:i,trim:l,normalizer:c}=r===void 0?{}:r;$a(t);const s=n?ka:ed,p=cu({collapseWhitespace:i,trim:l,normalizer:c});return Array.from(t.querySelectorAll("input,textarea,select")).filter(g=>g.tagName==="SELECT"?Array.from(g.options).filter(x=>x.selected).some(x=>s(Lf(x),x,e,p)):s(g.value,g,e,p))},"queryAllByDisplayValue"),lse=m((t,e)=>"Found multiple elements with the display value: "+e+".","getMultipleError$4"),cse=m((t,e)=>"Unable to find an element with the display value: "+e+".","getMissingError$4"),o$=Lo(a2,a2.name,"queryAll"),[s$,a$,l$,c$,u$]=Va(a2,lse,cse),use=/^(img|input|area|.+-.+)$/i,l2=m(function(t,e,r){return r===void 0&&(r={}),$a(t),uu("alt",t,e,r).filter(n=>use.test(n.tagName))},"queryAllByAltText"),hse=m((t,e)=>"Found multiple elements with the alt text: "+e,"getMultipleError$3"),dse=m((t,e)=>"Unable to find an element with the alt text: "+e,"getMissingError$3"),h$=Lo(l2,l2.name,"queryAll"),[d$,p$,f$,m$,g$]=Va(l2,hse,dse),pse=m(t=>{var e;return t.tagName.toLowerCase()==="title"&&((e=t.parentElement)==null?void 0:e.tagName.toLowerCase())==="svg"},"isSvgTitle"),c2=m(function(t,e,r){let{exact:n=!0,collapseWhitespace:i,trim:l,normalizer:c}=r===void 0?{}:r;$a(t);const s=n?ka:ed,p=cu({collapseWhitespace:i,trim:l,normalizer:c});return Array.from(t.querySelectorAll("[title], svg > title")).filter(g=>s(g.getAttribute("title"),g,e,p)||pse(g)&&s(Lf(g),g,e,p))},"queryAllByTitle"),fse=m((t,e)=>"Found multiple elements with the title: "+e+".","getMultipleError$2"),mse=m((t,e)=>"Unable to find an element with the title: "+e+".","getMissingError$2"),y$=Lo(c2,c2.name,"queryAll"),[_$,b$,v$,x$,w$]=Va(c2,fse,mse),u2=m(function(t,e,r){let{hidden:n=nn().defaultHidden,name:i,description:l,queryFallbacks:c=!1,selected:s,busy:p,checked:g,pressed:_,current:x,level:P,expanded:A,value:{now:M,min:F,max:z,text:j}={}}=r===void 0?{}:r;if($a(t),s!==void 0){var $;if((($=Ts.roles.get(e))==null?void 0:$.props["aria-selected"])===void 0)throw new Error('"aria-selected" is not supported on role "'+e+'".')}if(p!==void 0){var W;if(((W=Ts.roles.get(e))==null?void 0:W.props["aria-busy"])===void 0)throw new Error('"aria-busy" is not supported on role "'+e+'".')}if(g!==void 0){var X;if(((X=Ts.roles.get(e))==null?void 0:X.props["aria-checked"])===void 0)throw new Error('"aria-checked" is not supported on role "'+e+'".')}if(_!==void 0){var te;if(((te=Ts.roles.get(e))==null?void 0:te.props["aria-pressed"])===void 0)throw new Error('"aria-pressed" is not supported on role "'+e+'".')}if(x!==void 0){var ne;if(((ne=Ts.roles.get(e))==null?void 0:ne.props["aria-current"])===void 0)throw new Error('"aria-current" is not supported on role "'+e+'".')}if(P!==void 0&&e!=="heading")throw new Error('Role "'+e+'" cannot have "level" property.');if(M!==void 0){var Z;if(((Z=Ts.roles.get(e))==null?void 0:Z.props["aria-valuenow"])===void 0)throw new Error('"aria-valuenow" is not supported on role "'+e+'".')}if(z!==void 0){var U;if(((U=Ts.roles.get(e))==null?void 0:U.props["aria-valuemax"])===void 0)throw new Error('"aria-valuemax" is not supported on role "'+e+'".')}if(F!==void 0){var K;if(((K=Ts.roles.get(e))==null?void 0:K.props["aria-valuemin"])===void 0)throw new Error('"aria-valuemin" is not supported on role "'+e+'".')}if(j!==void 0){var he;if(((he=Ts.roles.get(e))==null?void 0:he.props["aria-valuetext"])===void 0)throw new Error('"aria-valuetext" is not supported on role "'+e+'".')}if(A!==void 0){var ue;if(((ue=Ts.roles.get(e))==null?void 0:ue.props["aria-expanded"])===void 0)throw new Error('"aria-expanded" is not supported on role "'+e+'".')}const we=new WeakMap;function Ie(ee){return we.has(ee)||we.set(ee,$R(ee)),we.get(ee)}return m(Ie,"cachedIsSubtreeInaccessible"),Array.from(t.querySelectorAll(E$(e))).filter(ee=>{if(ee.hasAttribute("role")){const xe=ee.getAttribute("role");if(c)return xe.split(" ").filter(Boolean).some(Ke=>Ke===e);const[Xe]=xe.split(" ");return Xe===e}return ox(ee).some(xe=>xe===e)}).filter(ee=>{if(s!==void 0)return s===T8(ee);if(p!==void 0)return p===S8(ee);if(g!==void 0)return g===C8(ee);if(_!==void 0)return _===P8(ee);if(x!==void 0)return x===A8(ee);if(A!==void 0)return A===R8(ee);if(P!==void 0)return P===I8(ee);if(M!==void 0||z!==void 0||F!==void 0||j!==void 0){let ve=!0;if(M!==void 0&&ve&&(ve=M===M8(ee)),z!==void 0&&ve&&(ve=z===O8(ee)),F!==void 0&&ve&&(ve=F===k8(ee)),j!==void 0){var fe;ve&&(ve=ka((fe=L8(ee))!=null?fe:null,ee,j,xe=>xe))}return ve}return!0}).filter(ee=>i===void 0?!0:ka(rx(ee,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements}),ee,i,fe=>fe)).filter(ee=>l===void 0?!0:ka(OR(ee,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements}),ee,l,fe=>fe)).filter(ee=>n===!1?n_(ee,{isSubtreeInaccessible:Ie})===!1:!0)},"queryAllByRole");function E$(t){var e;const r='*[role~="'+t+'"]',n=(e=Ts.roleElements.get(t))!=null?e:new Set,i=new Set(Array.from(n).map(l=>{let{name:c}=l;return c}));return[r].concat(Array.from(i)).join(",")}m(E$,"makeRoleSelector");var T$=m(t=>{let e="";return t===void 0?e="":typeof t=="string"?e=' and name "'+t+'"':e=" and name `"+t+"`",e},"getNameHint"),gse=m(function(t,e,r){let{name:n}=r===void 0?{}:r;return'Found multiple elements with the role "'+e+'"'+T$(n)},"getMultipleError$1"),yse=m(function(t,e,r){let{hidden:n=nn().defaultHidden,name:i,description:l}=r===void 0?{}:r;if(nn()._disableExpensiveErrorDiagnostics)return'Unable to find role="'+e+'"'+T$(i);let c="";Array.from(t.children).forEach(_=>{c+=UR(_,{hidden:n,includeDescription:l!==void 0})});let s;c.length===0?n===!1?s="There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole":s="There are no available roles.":s=(`
Here are the `+(n===!1?"accessible":"available")+` roles:

  `+c.replace(/\n/g,`
  `).replace(/\n\s\s\n/g,`

`)+`
`).trim();let p="";i===void 0?p="":typeof i=="string"?p=' and name "'+i+'"':p=" and name `"+i+"`";let g="";return l===void 0?g="":typeof l=="string"?g=' and description "'+l+'"':g=" and description `"+l+"`",(`
Unable to find an `+(n===!1?"accessible ":"")+'element with the role "'+e+'"'+p+g+`

`+s).trim()},"getMissingError$1"),S$=Lo(u2,u2.name,"queryAll"),[C$,P$,A$,R$,I$]=Va(u2,gse,yse),JR=m(()=>nn().testIdAttribute,"getTestIdAttribute"),h2=m(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return $a(e[0]),uu(JR(),...e)},"queryAllByTestId"),_se=m((t,e)=>"Found multiple elements by: ["+JR()+'="'+e+'"]',"getMultipleError"),bse=m((t,e)=>"Unable to find an element by: ["+JR()+'="'+e+'"]',"getMissingError"),M$=Lo(h2,h2.name,"queryAll"),[O$,k$,L$,D$,N$]=Va(h2,_se,bse),nv=Object.freeze({__proto__:null,queryAllByLabelText:H8,queryByLabelText:B8,getAllByLabelText:U8,getByLabelText:G8,findAllByLabelText:$8,findByLabelText:V8,queryByPlaceholderText:W8,queryAllByPlaceholderText:J8,getByPlaceholderText:K8,getAllByPlaceholderText:Z8,findAllByPlaceholderText:Y8,findByPlaceholderText:X8,queryByText:e$,queryAllByText:Q8,getByText:r$,getAllByText:t$,findAllByText:n$,findByText:i$,queryByDisplayValue:s$,queryAllByDisplayValue:o$,getByDisplayValue:l$,getAllByDisplayValue:a$,findAllByDisplayValue:c$,findByDisplayValue:u$,queryByAltText:d$,queryAllByAltText:h$,getByAltText:f$,getAllByAltText:p$,findAllByAltText:m$,findByAltText:g$,queryByTitle:_$,queryAllByTitle:y$,getByTitle:v$,getAllByTitle:b$,findAllByTitle:x$,findByTitle:w$,queryByRole:C$,queryAllByRole:S$,getAllByRole:P$,getByRole:A$,findAllByRole:R$,findByRole:I$,queryByTestId:O$,queryAllByTestId:M$,getByTestId:L$,getAllByTestId:k$,findAllByTestId:D$,findByTestId:N$});function iv(t,e,r){return e===void 0&&(e=nv),r===void 0&&(r={}),Object.keys(e).reduce((n,i)=>{const l=e[i];return n[i]=l.bind(null,t),n},r)}m(iv,"getQueriesForElement");var F$=m(t=>!t||Array.isArray(t)&&!t.length,"isRemoved");function d2(t){if(F$(t))throw new Error("The element(s) given to waitForElementToBeRemoved are already removed. waitForElementToBeRemoved requires that the element(s) exist(s) before waiting for removal.")}m(d2,"initialCheck");async function z$(t,e){const r=new Error("Timed out in waitForElementToBeRemoved.");if(typeof t!="function"){d2(t);const i=(Array.isArray(t)?t:[t]).map(l=>{let c=l.parentElement;if(c===null)return()=>null;for(;c.parentElement;)c=c.parentElement;return()=>c.contains(l)?l:null});t=m(()=>i.map(l=>l()).filter(Boolean),"callback")}return d2(t()),sx(()=>{let n;try{n=t()}catch(i){if(i.name==="TestingLibraryElementError")return;throw i}if(!F$(n))throw r},e)}m(z$,"waitForElementToBeRemoved");var tk={copy:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},cut:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},paste:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionEnd:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionStart:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionUpdate:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keyDown:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},keyPress:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},keyUp:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},focus:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},blur:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},focusIn:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},focusOut:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},change:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},input:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},invalid:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!0}},submit:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}},reset:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}},click:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,button:0,composed:!0}},contextMenu:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dblClick:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},drag:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragEnd:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragEnter:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragExit:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragLeave:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragOver:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragStart:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},drop:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseDown:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseEnter:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseLeave:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseMove:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseOut:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseOver:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseUp:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},select:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},touchCancel:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},touchEnd:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},touchMove:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},touchStart:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},resize:{EventType:"UIEvent",defaultInit:{bubbles:!1,cancelable:!1}},scroll:{EventType:"UIEvent",defaultInit:{bubbles:!1,cancelable:!1}},wheel:{EventType:"WheelEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},abort:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},canPlay:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},canPlayThrough:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},durationChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},emptied:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},encrypted:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},ended:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadedData:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadedMetadata:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadStart:{EventType:"ProgressEvent",defaultInit:{bubbles:!1,cancelable:!1}},pause:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},play:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},playing:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},progress:{EventType:"ProgressEvent",defaultInit:{bubbles:!1,cancelable:!1}},rateChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},seeked:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},seeking:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},stalled:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},suspend:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},timeUpdate:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},volumeChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},waiting:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},load:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},error:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},animationStart:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},animationEnd:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},animationIteration:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionCancel:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionEnd:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}},transitionRun:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionStart:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},pointerOver:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerEnter:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},pointerDown:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerMove:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerUp:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerCancel:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},pointerOut:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerLeave:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},gotPointerCapture:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},lostPointerCapture:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},popState:{EventType:"PopStateEvent",defaultInit:{bubbles:!0,cancelable:!1}},offline:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},online:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},pageHide:{EventType:"PageTransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}},pageShow:{EventType:"PageTransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}}},rk={doubleClick:"dblClick"};function sf(t,e){return nn().eventWrapper(()=>{if(!e)throw new Error("Unable to fire an event - please provide an event object.");if(!t)throw new Error('Unable to fire a "'+e.type+'" event - please provide a DOM element.');return t.dispatchEvent(e)})}m(sf,"fireEvent");function Lg(t,e,r,n){let{EventType:i="Event",defaultInit:l={}}=n===void 0?{}:n;if(!e)throw new Error('Unable to fire a "'+t+'" event - please provide a DOM element.');const c={...l,...r},{target:{value:s,files:p,...g}={}}=c;s!==void 0&&j$(e,s),p!==void 0&&Object.defineProperty(e,"files",{configurable:!0,enumerable:!0,writable:!0,value:p}),Object.assign(e,g);const _=NR(e),x=_[i]||_.Event;let P;if(typeof x=="function")P=new x(t,c);else{P=_.document.createEvent(i);const{bubbles:M,cancelable:F,detail:z,...j}=c;P.initEvent(t,M,F,z),Object.keys(j).forEach($=>{P[$]=j[$]})}return["dataTransfer","clipboardData"].forEach(M=>{const F=c[M];typeof F=="object"&&(typeof _.DataTransfer=="function"?Object.defineProperty(P,M,{value:Object.getOwnPropertyNames(F).reduce((z,j)=>(Object.defineProperty(z,j,{value:F[j]}),z),new _.DataTransfer)}):Object.defineProperty(P,M,{value:F}))}),P}m(Lg,"createEvent");Object.keys(tk).forEach(t=>{const{EventType:e,defaultInit:r}=tk[t],n=t.toLowerCase();Lg[t]=(i,l)=>Lg(n,i,l,{EventType:e,defaultInit:r}),sf[t]=(i,l)=>sf(i,Lg[t](i,l))});function j$(t,e){const{set:r}=Object.getOwnPropertyDescriptor(t,"value")||{},n=Object.getPrototypeOf(t),{set:i}=Object.getOwnPropertyDescriptor(n,"value")||{};if(i&&r!==i)i.call(t,e);else if(r)r.call(t,e);else throw new Error("The given element does not have a value setter")}m(j$,"setNativeValue");Object.keys(rk).forEach(t=>{const e=rk[t];sf[t]=function(){return sf[e](...arguments)}});function B$(t){return t.replace(/[ \t]*[\n][ \t]*/g,`
`)}m(B$,"unindent");function q$(t){return joe.default.compressToEncodedURIComponent(B$(t))}m(q$,"encode");function $$(t){return"https://testing-playground.com/#markup="+q$(t)}m($$,"getPlaygroundUrl");var vse=m((t,e,r)=>Array.isArray(t)?t.forEach(n=>n2(n,e,r)):n2(t,e,r),"debug"),xse=m(function(t){if(t===void 0&&(t=nx().body),!t||!("innerHTML"in t)){console.log("The element you're providing isn't a valid DOM element.");return}if(!t.innerHTML){console.log("The provided element doesn't have any children.");return}const e=$$(t.innerHTML);return console.log(`Open this URL in your browser

`+e),e},"logTestingPlaygroundURL"),nk={debug:vse,logTestingPlaygroundURL:xse},wse=typeof document<"u"&&document.body?iv(document.body,nv,nk):Object.keys(nv).reduce((t,e)=>(t[e]=()=>{throw new TypeError("For queries bound to document.body a global document has to be available... Learn more: https://testing-library.com/s/screen-global-error")},t),nk);function Gr(t,e,r){return t.namespaceURI&&t.namespaceURI!=="http://www.w3.org/1999/xhtml"||(e=Array.isArray(e)?e:[e],!e.includes(t.tagName.toLowerCase()))?!1:r?Object.entries(r).every(([n,i])=>t[n]===i):!0}m(Gr,"isElementType");function ps(t){var e;if(V$(t)&&t.defaultView)return t.defaultView;if(!((e=t.ownerDocument)===null||e===void 0)&&e.defaultView)return t.ownerDocument.defaultView;throw new Error(`Could not determine window of node. Node was ${U$(t)}`)}m(ps,"getWindow");function V$(t){return t.nodeType===9}m(V$,"isDocument");function U$(t){return typeof t=="function"?`function ${t.name}`:t===null?"null":String(t)}m(U$,"describe");function WR(t,e){return new Promise((r,n)=>{const i=new e;i.onerror=n,i.onabort=n,i.onload=()=>{r(String(i.result))},i.readAsText(t)})}m(WR,"readBlobText");function lx(t,e){const r={...e,length:e.length,item:m(n=>r[n],"item"),[Symbol.iterator]:m(function*(){for(let i=0;i<r.length;i++)yield r[i]},"nextFile")};return r.constructor=t.FileList,t.FileList&&Object.setPrototypeOf(r,t.FileList.prototype),Object.freeze(r),r}m(lx,"createFileList");function Tl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(Tl,"_define_property");var G$=class{getAsFile(){return this.file}getAsString(e){typeof this.data=="string"&&e(this.data)}webkitGetAsEntry(){throw new Error("not implemented")}constructor(e,r){Tl(this,"kind",void 0),Tl(this,"type",void 0),Tl(this,"file",null),Tl(this,"data",void 0),typeof e=="string"?(this.kind="string",this.type=String(r),this.data=e):(this.kind="file",this.type=e.type,this.file=e)}};m(G$,"DataTransferItemStub");var H$=G$,J$=class extends Array{add(...e){const r=new H$(e[0],e[1]);return this.push(r),r}clear(){this.splice(0,this.length)}remove(e){this.splice(e,1)}};m(J$,"DataTransferItemListStub");var Ese=J$;function mg(t,e){const[r,n]=t.split("/"),i=!n||n==="*";return l=>e?l.type===(i?r:t):i?l.type.startsWith(`${r}/`):l.type===r}m(mg,"getTypeMatcher");function W$(t){var e;return new(e=class{getData(r){var n;const i=(n=this.items.find(mg(r,!0)))!==null&&n!==void 0?n:this.items.find(mg(r,!1));let l="";return i?.getAsString(c=>{l=c}),l}setData(r,n){const i=this.items.findIndex(mg(r,!0)),l=new H$(n,r);i>=0?this.items.splice(i,1,l):this.items.push(l)}clearData(r){if(r){const n=this.items.findIndex(mg(r,!0));n>=0&&this.items.remove(n)}else this.items.clear()}get types(){const r=[];return this.files.length&&r.push("Files"),this.items.forEach(n=>r.push(n.type)),Object.freeze(r),r}setDragImage(){}constructor(){Tl(this,"dropEffect","none"),Tl(this,"effectAllowed","uninitialized"),Tl(this,"items",new Ese),Tl(this,"files",lx(t,[]))}},m(e,"DataTransferStub"),e)}m(W$,"createDataTransferStub");function cx(t,e=[]){const r=typeof t.DataTransfer>"u"?W$(t):new t.DataTransfer;return Object.defineProperty(r,"files",{get:m(()=>lx(t,e),"get")}),r}m(cx,"createDataTransfer");async function Z$(t,e){return e.kind==="file"?e.getAsFile():new t.Blob([await new Promise(r=>e.getAsString(r))],{type:e.type})}m(Z$,"getBlobFromDataTransferItem");function ZR(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(ZR,"_define_property");function KR(t,...e){var r;const n=Object.fromEntries(e.map(i=>[typeof i=="string"?"text/plain":i.type,Promise.resolve(i)]));return typeof t.ClipboardItem<"u"?new t.ClipboardItem(n):new(r=class{get types(){return Array.from(Object.keys(this.data))}async getType(i){const l=await this.data[i];if(!l)throw new Error(`${i} is not one of the available MIME types on this item.`);return l instanceof t.Blob?l:new t.Blob([l],{type:i})}constructor(i){ZR(this,"data",void 0),this.data=i}},m(r,"ClipboardItem"),r)(n)}m(KR,"createClipboardItem");var af=Symbol("Manage ClipboardSub");function p2(t,e){var r;return Object.assign(new(r=class extends t.EventTarget{async read(){return Array.from(this.items)}async readText(){let n="";for(const i of this.items){const l=i.types.includes("text/plain")?"text/plain":i.types.find(c=>c.startsWith("text/"));l&&(n+=await i.getType(l).then(c=>WR(c,t.FileReader)))}return n}async write(n){this.items=n}async writeText(n){this.items=[KR(t,n)]}constructor(...n){super(...n),ZR(this,"items",[])}},m(r,"Clipboard"),r),{[af]:e})}m(p2,"createClipboardStub");function ux(t){return!!t?.[af]}m(ux,"isClipboardStub");function K$(t){if(ux(t.navigator.clipboard))return t.navigator.clipboard[af];const e=Object.getOwnPropertyDescriptor(t.navigator,"clipboard");let r;const n={resetClipboardStub:m(()=>{r=p2(t,n)},"resetClipboardStub"),detachClipboardStub:m(()=>{e?Object.defineProperty(t.navigator,"clipboard",e):Object.defineProperty(t.navigator,"clipboard",{value:void 0,configurable:!0})},"detachClipboardStub")};return r=p2(t,n),Object.defineProperty(t.navigator,"clipboard",{get:m(()=>r,"get"),configurable:!0}),r[af]}m(K$,"attachClipboardStubToView");function Y$(t){ux(t.navigator.clipboard)&&t.navigator.clipboard[af].resetClipboardStub()}m(Y$,"resetClipboardStubOnView");function X$(t){ux(t.navigator.clipboard)&&t.navigator.clipboard[af].detachClipboardStub()}m(X$,"detachClipboardStubFromView");async function Q$(t){const e=t.defaultView,r=e?.navigator.clipboard,n=r&&await r.read();if(!n)throw new Error("The Clipboard API is unavailable.");const i=cx(e);for(const l of n)for(const c of l.types)i.setData(c,await l.getType(c).then(s=>WR(s,e.FileReader)));return i}m(Q$,"readDataTransferFromClipboard");async function YR(t,e){const r=ps(t),n=r.navigator.clipboard,i=[];for(let c=0;c<e.items.length;c++){const s=e.items[c],p=await Z$(r,s);i.push(KR(r,p))}if(!(n&&await n.write(i).then(()=>!0,()=>!1)))throw new Error("The Clipboard API is unavailable.")}m(YR,"writeDataTransferToClipboard");var ov=globalThis;typeof ov.afterEach=="function"&&ov.afterEach(()=>{typeof globalThis.window<"u"&&Y$(globalThis.window)});typeof ov.afterAll=="function"&&ov.afterAll(()=>{typeof globalThis.window<"u"&&X$(globalThis.window)});var e7=["input:not([type=hidden]):not([disabled])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contenteditable=""]','[contenteditable="true"]',"a[href]","[tabindex]:not([disabled])"].join(", ");function hx(t){return t.matches(e7)}m(hx,"isFocusable");function t7(t){return new t.constructor(t.type,t)}m(t7,"cloneEvent");function Ba(t){for(let r=t;r;r=r.parentElement)if(Gr(r,["button","input","select","textarea","optgroup","option"])){if(r.hasAttribute("disabled"))return!0}else if(Gr(r,"fieldset")){var e;if(r.hasAttribute("disabled")&&!(!((e=r.querySelector(":scope > legend"))===null||e===void 0)&&e.contains(t)))return!0}else if(r.tagName.includes("-")&&r.constructor.formAssociated&&r.hasAttribute("disabled"))return!0;return!1}m(Ba,"isDisabled");function Nf(t){const e=t.activeElement;return e?.shadowRoot?Nf(e.shadowRoot):Ba(e)?t.ownerDocument?t.ownerDocument.body:t.body:e}m(Nf,"getActiveElement");function hb(t){var e;return(e=Nf(t))!==null&&e!==void 0?e:t.body}m(hb,"getActiveElementOrBody");function r7(t,e){let r=t;do{if(e(r))return r;r=r.parentElement}while(r&&r!==t.ownerDocument.body)}m(r7,"findClosest");function ru(t){return t.hasAttribute("contenteditable")&&(t.getAttribute("contenteditable")=="true"||t.getAttribute("contenteditable")=="")}m(ru,"isContentEditable");function lf(t){const e=n7(t);return e&&(e.closest('[contenteditable=""]')||e.closest('[contenteditable="true"]'))}m(lf,"getContentEditable");function n7(t){return t.nodeType===1?t:t.parentElement}m(n7,"getElement");var i7=function(t){return t.button="button",t.color="color",t.file="file",t.image="image",t.reset="reset",t.submit="submit",t.checkbox="checkbox",t.radio="radio",t}(i7||{});function XR(t){return Gr(t,"button")||Gr(t,"input")&&t.type in i7}m(XR,"isClickableInput");function Dh(t){return QR(t)&&!t.readOnly||ru(t)}m(Dh,"isEditable");var o7=function(t){return t.text="text",t.date="date",t["datetime-local"]="datetime-local",t.email="email",t.month="month",t.number="number",t.password="password",t.search="search",t.tel="tel",t.time="time",t.url="url",t.week="week",t}(o7||{});function QR(t){return Gr(t,"textarea")||Gr(t,"input")&&t.type in o7}m(QR,"isEditableInputOrTextArea");function sa(t){return eI(t)&&QR(t)}m(sa,"hasOwnSelection");function s7(t){return eI(t)&&XR(t)}m(s7,"hasNoSelection");function eI(t){return t.nodeType===1}m(eI,"isElement");function a7(t){const e=t.ownerDocument.getSelection();if(e?.focusNode&&sa(t)){const n=lf(e.focusNode);if(n){if(!e.isCollapsed){var r;const i=((r=n.firstChild)===null||r===void 0?void 0:r.nodeType)===3?n.firstChild:n;e.setBaseAndExtent(i,0,i,0)}}else e.setBaseAndExtent(t,0,t,0)}}m(a7,"updateSelectionOnFocus");function Nh(t,e){return nn().eventWrapper(t)}m(Nh,"wrapEvent");function kl(t){const e=r7(t,hx),r=Nf(t.ownerDocument);(e??t.ownerDocument.body)!==r&&(Nh(e?()=>e.focus():()=>r?.blur()),a7(e??t.ownerDocument.body))}m(kl,"focusElement");function l7(t){!hx(t)||!(Nf(t.ownerDocument)===t)||Nh(()=>t.blur())}m(l7,"blurElement");var nu={};nu.click=(t,e,r)=>{const n=e.closest("button,input,label,select,textarea"),i=n&&Gr(n,"label")&&n.control;if(i&&i!==e)return()=>{hx(i)&&(kl(i),r.dispatchEvent(i,t7(t)))};if(Gr(e,"input",{type:"file"}))return()=>{l7(e),e.dispatchEvent(new(ps(e)).Event("fileDialog")),kl(e)}};var cf=Symbol("Displayed value in UI"),Sl=Symbol("Displayed selection in UI"),sv=Symbol("Initial value to compare on blur");function c7(t){return typeof t=="object"&&cf in t}m(c7,"isUIValue");function u7(t){return!!t&&typeof t=="object"&&Sl in t}m(u7,"isUISelectionStart");function h7(t,e){t[sv]===void 0&&(t[sv]=t.value),t[cf]=e,t.value=Object.assign(new String(e),{[cf]:!0})}m(h7,"setUIValue");function aa(t){return t[cf]===void 0?t.value:String(t[cf])}m(aa,"getUIValue");function dx(t){t[cf]=void 0}m(dx,"setUIValueClean");function tI(t){t[sv]=void 0}m(tI,"clearInitialValue");function d7(t){return t[sv]}m(d7,"getInitialValue");function p7(t,e){t[Sl]=e}m(p7,"setUISelectionRaw");function td(t,{focusOffset:e,anchorOffset:r=e},n="replace"){const i=aa(t).length,l=m(x=>Math.max(0,Math.min(i,x)),"sanitizeOffset"),c=n==="replace"||t[Sl]===void 0?l(r):t[Sl].anchorOffset,s=l(e),p=Math.min(c,s),g=Math.max(c,s);if(t[Sl]={anchorOffset:c,focusOffset:s},t.selectionStart===p&&t.selectionEnd===g)return;const _=Object.assign(new Number(p),{[Sl]:!0});try{t.setSelectionRange(_,g)}catch{}}m(td,"setUISelection");function uf(t){var e,r,n;const i=(n=t[Sl])!==null&&n!==void 0?n:{anchorOffset:(e=t.selectionStart)!==null&&e!==void 0?e:0,focusOffset:(r=t.selectionEnd)!==null&&r!==void 0?r:0};return{...i,startOffset:Math.min(i.anchorOffset,i.focusOffset),endOffset:Math.max(i.anchorOffset,i.focusOffset)}}m(uf,"getUISelection");function f7(t){return!!t[Sl]}m(f7,"hasUISelection");function Dg(t){t[Sl]=void 0}m(Dg,"setUISelectionClean");var av=globalThis.parseInt;function m7(t){const e=t.replace(/\D/g,"");if(e.length<2)return t;const r=av(e[0],10),n=av(e[1],10);if(r>=3||r===2&&n>=4){let i;return r>=3?i=1:i=2,f2(e,i)}return t.length===2?t:f2(e,2)}m(m7,"buildTimeValue");function f2(t,e){const r=t.slice(0,e),n=Math.min(av(r,10),23),i=t.slice(e),l=av(i,10),c=Math.min(l,59);return`${n.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`}m(f2,"build");function rI(t,e){const r=t.cloneNode();return r.value=e,r.value===e}m(rI,"isValidDateOrTimeValue");var g7=function(t){return t.email="email",t.password="password",t.search="search",t.telephone="telephone",t.text="text",t.url="url",t}(g7||{});function y7(t){var e;const r=(e=t.getAttribute("maxlength"))!==null&&e!==void 0?e:"";return/^\d+$/.test(r)&&Number(r)>=0?Number(r):void 0}m(y7,"getMaxLength");function _7(t){return Gr(t,"textarea")||Gr(t,"input")&&t.type in g7}m(_7,"supportsMaxLength");function nI(t,e,r,n){if(Ng(t)&&e+r>=0&&e+r<=t.nodeValue.length)return{node:t,offset:e+r};const i=m2(t,e,r);if(i){if(Ng(i))return{node:i,offset:r>0?Math.min(1,i.nodeValue.length):Math.max(i.nodeValue.length-1,0)};if(Gr(i,"br")){const l=m2(i,void 0,r);return l?Ng(l)?{node:l,offset:r>0?0:l.nodeValue.length}:r<0&&Gr(l,"br")?{node:i.parentNode,offset:gg(i)}:{node:l.parentNode,offset:gg(l)+(r>0?0:1)}:r<0&&n==="deleteContentBackward"?{node:i.parentNode,offset:gg(i)}:void 0}else return{node:i.parentNode,offset:gg(i)+(r>0?1:0)}}}m(nI,"getNextCursorPosition");function m2(t,e,r){const n=Number(e)+(r<0?-1:0);return e!==void 0&&px(t)&&n>=0&&n<t.children.length&&(t=t.children[n]),v7(t,r===1?"next":"previous",b7)}m(m2,"getNextCharacterContentNode");function b7(t){if(Ng(t))return!0;if(px(t)){if(Gr(t,["input","textarea"]))return t.type!=="hidden";if(Gr(t,"br"))return!0}return!1}m(b7,"isTreatedAsCharacterContent");function gg(t){let e=0;for(;t.previousSibling;)e++,t=t.previousSibling;return e}m(gg,"getOffset");function px(t){return t.nodeType===1}m(px,"isElement");function Ng(t){return t.nodeType===3}m(Ng,"isTextNode");function v7(t,e,r){for(;;){var n;const i=t[`${e}Sibling`];if(i){if(t=x7(i,e==="next"?"first":"last"),r(t))return t}else if(t.parentNode&&(!px(t.parentNode)||!ru(t.parentNode)&&t.parentNode!==((n=t.ownerDocument)===null||n===void 0?void 0:n.body)))t=t.parentNode;else break}}m(v7,"walkNodes");function x7(t,e){for(;t.hasChildNodes();)t=t[`${e}Child`];return t}m(x7,"getDescendant");var uy=Symbol("Track programmatic changes for React workaround");function w7(t){return Object.getOwnPropertyNames(t).some(e=>e.startsWith("__react"))&&ps(t).REACT_VERSION===17}m(w7,"isReact17Element");function E7(t){w7(t)&&(t[uy]={previousValue:String(t.value),tracked:[]})}m(E7,"startTrackValue");function T7(t,e){var r,n;(n=t[uy])===null||n===void 0||(r=n.tracked)===null||r===void 0||r.push(e),t[uy]||(dx(t),td(t,{focusOffset:e.length}))}m(T7,"trackOrSetValue");function S7(t,e){var r;const n=t[uy];if(t[uy]=void 0,!(!(n==null||(r=n.tracked)===null||r===void 0)&&r.length))return;const i=n.tracked.length===2&&n.tracked[0]===n.previousValue&&n.tracked[1]===t.value;i||dx(t),f7(t)&&td(t,{focusOffset:i?e:t.value.length})}m(S7,"commitValueAfterInput");function iI(t){const e=C7(t);if(e&&sa(e))return{type:"input",selection:uf(e)};const r=e?.ownerDocument.getSelection();return{type:lf(t)&&r?.anchorNode&&lf(r.anchorNode)?"contenteditable":"default",selection:r}}m(iI,"getTargetTypeAndSelection");function C7(t){return t.nodeType===1?t:t.parentElement}m(C7,"getElement");function P7(t){const e=iI(t);if(e.type==="input")return e.selection;if(e.type==="contenteditable"){var r;return(r=e.selection)===null||r===void 0?void 0:r.getRangeAt(0)}}m(P7,"getInputRange");function iu({focusNode:t,focusOffset:e,anchorNode:r=t,anchorOffset:n=e}){var i,l;if(iI(t).type==="input")return td(t,{anchorOffset:n,focusOffset:e});(l=r.ownerDocument)===null||l===void 0||(i=l.getSelection())===null||i===void 0||i.setBaseAndExtent(r,n,t,e)}m(iu,"setSelection");function oI(t){return Gr(t,"input")&&["date","time"].includes(t.type)}m(oI,"isDateOrTime");function Fh(t,e,r,n="insertText"){const i=P7(e);i&&(!oI(e)&&!t.dispatchUIEvent(e,"beforeinput",{inputType:n,data:r})||("startContainer"in i?A7(t,e,i,r,n):R7(t,e,i,r,n)))}m(Fh,"input");function A7(t,e,r,n,i){let l=!1;if(!r.collapsed)l=!0,r.deleteContents();else if(["deleteContentBackward","deleteContentForward"].includes(i)){const c=nI(r.startContainer,r.startOffset,i==="deleteContentBackward"?-1:1,i);if(c){l=!0;const s=r.cloneRange();s.comparePoint(c.node,c.offset)<0?s.setStart(c.node,c.offset):s.setEnd(c.node,c.offset),s.deleteContents()}}if(n)if(r.endContainer.nodeType===3){const c=r.endOffset;r.endContainer.insertData(c,n),r.setStart(r.endContainer,c+n.length),r.setEnd(r.endContainer,c+n.length)}else{const c=e.ownerDocument.createTextNode(n);r.insertNode(c),r.setStart(c,n.length),r.setEnd(c,n.length)}(l||n)&&t.dispatchUIEvent(e,"input",{inputType:i})}m(A7,"editContenteditable");function R7(t,e,r,n,i){let l=n;if(_7(e)){const g=y7(e);if(g!==void 0&&n.length>0){const _=g-e.value.length;if(_>0)l=n.substring(0,_);else return}}const{newValue:c,newOffset:s,oldValue:p}=I7(l,e,r,i);c===p&&s===r.startOffset&&s===r.endOffset||Gr(e,"input",{type:"number"})&&!M7(c)||(h7(e,c),iu({focusNode:e,anchorOffset:s,focusOffset:s}),oI(e)?rI(e,c)&&(g2(t,e,s,{}),t.dispatchUIEvent(e,"change"),tI(e)):g2(t,e,s,{data:n,inputType:i}))}m(R7,"editInputElement");function I7(t,e,{startOffset:r,endOffset:n},i){const l=aa(e),c=Math.max(0,r===n&&i==="deleteContentBackward"?r-1:r),s=l.substring(0,c),p=Math.min(l.length,r===n&&i==="deleteContentForward"?r+1:n),g=l.substring(p,l.length);let _=`${s}${t}${g}`,x=c+t.length;if(Gr(e,"input",{type:"time"})){const P=m7(_);P!==""&&rI(e,P)&&(_=P,x=P.length)}return{oldValue:l,newValue:_,newOffset:x}}m(I7,"calculateNewValue");function g2(t,e,r,n){t.dispatchUIEvent(e,"input",n),S7(e,r)}m(g2,"commitInput");function M7(t){var e,r;const n=t.split("e",2);return!(/[^\d.\-e]/.test(t)||Number((e=t.match(/-/g))===null||e===void 0?void 0:e.length)>2||Number((r=t.match(/\./g))===null||r===void 0?void 0:r.length)>1||n[1]&&!/^-?\d*$/.test(n[1]))}m(M7,"isValidNumberInput");nu.cut=(t,e,r)=>()=>{Dh(e)&&Fh(r,e,"","deleteByCut")};function O7(t){return t?ru(t)?t.textContent:aa(t):null}m(O7,"getValueOrTextContent");function k7(t){const e=ps(t);for(let r=t;r?.ownerDocument;r=r.parentElement){const{display:n,visibility:i}=e.getComputedStyle(r);if(n==="none"||i==="hidden")return!1}return!0}m(k7,"isVisible");function L7(t,e){const r=t.ownerDocument,n=r.querySelectorAll(e7),i=Array.from(n).filter(p=>p===t||!(Number(p.getAttribute("tabindex"))<0||Ba(p)));Number(t.getAttribute("tabindex"))>=0&&i.sort((p,g)=>{const _=Number(p.getAttribute("tabindex")),x=Number(g.getAttribute("tabindex"));return _===x?0:_===0?1:x===0?-1:_-x});const l={};let c=[r.body];const s=Gr(t,"input",{type:"radio"})?t.name:void 0;i.forEach(p=>{const g=p;if(Gr(g,"input",{type:"radio"})&&g.name){if(g===t){c.push(g);return}else if(g.name===s)return;if(g.checked){c=c.filter(_=>!Gr(_,"input",{type:"radio",name:g.name})),c.push(g),l[g.name]=g;return}if(typeof l[g.name]<"u")return}c.push(g)});for(let p=c.findIndex(g=>g===t);;)if(p+=e?-1:1,p===c.length?p=0:p===-1&&(p=c.length-1),c[p]===t||c[p]===r.body||k7(c[p]))return c[p]}m(L7,"getTabDestination");function y2(t,e){if(sa(t)){const r=uf(t);iu({focusNode:t,focusOffset:r.startOffset===r.endOffset?r.focusOffset+e:e<0?r.startOffset:r.endOffset})}else{const r=t.ownerDocument.getSelection();if(!r?.focusNode)return;if(r.isCollapsed){const n=nI(r.focusNode,r.focusOffset,e);n&&iu({focusNode:n.node,focusOffset:n.offset})}else r[e<0?"collapseToStart":"collapseToEnd"]()}}m(y2,"moveSelection");function sI(t){if(sa(t))return iu({focusNode:t,anchorOffset:0,focusOffset:aa(t).length});var e;const r=(e=lf(t))!==null&&e!==void 0?e:t.ownerDocument.body;iu({focusNode:r,anchorOffset:0,focusOffset:r.childNodes.length})}m(sI,"selectAll");function D7(t){if(sa(t))return uf(t).startOffset===0&&uf(t).endOffset===aa(t).length;var e;const r=(e=lf(t))!==null&&e!==void 0?e:t.ownerDocument.body,n=t.ownerDocument.getSelection();return n?.anchorNode===r&&n.focusNode===r&&n.anchorOffset===0&&n.focusOffset===r.childNodes.length}m(D7,"isAllSelected");function Ip(t,e,r){var n;if(sa(t))return iu({focusNode:t,anchorOffset:e,focusOffset:r});if(ru(t)&&((n=t.firstChild)===null||n===void 0?void 0:n.nodeType)===3)return iu({focusNode:t.firstChild,anchorOffset:e,focusOffset:r});throw new Error("Not implemented. The result of this interaction is unreliable.")}m(Ip,"setSelectionRange");function yg(t,e,r){const n=ps(e),i=Array.from(e.ownerDocument.querySelectorAll(e.name?`input[type="radio"][name="${n.CSS.escape(e.name)}"]`:'input[type="radio"][name=""], input[type="radio"]:not([name])'));for(let l=i.findIndex(c=>c===e)+r;;l+=r){if(i[l]||(l=r>0?0:i.length-1),i[l]===e)return;if(!Ba(i[l])){kl(i[l]),t.dispatchUIEvent(i[l],"click");return}}}m(yg,"walkRadio");nu.keydown=(t,e,r)=>{var n,i;return(i=(n=ik[t.key])===null||n===void 0?void 0:n.call(ik,t,e,r))!==null&&i!==void 0?i:Tse(t,e,r)};var ik={ArrowDown:m((t,e,r)=>{if(Gr(e,"input",{type:"radio"}))return()=>yg(r,e,1)},"ArrowDown"),ArrowLeft:m((t,e,r)=>Gr(e,"input",{type:"radio"})?()=>yg(r,e,-1):()=>y2(e,-1),"ArrowLeft"),ArrowRight:m((t,e,r)=>Gr(e,"input",{type:"radio"})?()=>yg(r,e,1):()=>y2(e,1),"ArrowRight"),ArrowUp:m((t,e,r)=>{if(Gr(e,"input",{type:"radio"}))return()=>yg(r,e,-1)},"ArrowUp"),Backspace:m((t,e,r)=>{if(Dh(e))return()=>{Fh(r,e,"","deleteContentBackward")}},"Backspace"),Delete:m((t,e,r)=>{if(Dh(e))return()=>{Fh(r,e,"","deleteContentForward")}},"Delete"),End:m((t,e)=>{if(Gr(e,["input","textarea"])||ru(e))return()=>{var r,n;const i=(n=(r=O7(e))===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0;Ip(e,i,i)}},"End"),Home:m((t,e)=>{if(Gr(e,["input","textarea"])||ru(e))return()=>{Ip(e,0,0)}},"Home"),PageDown:m((t,e)=>{if(Gr(e,["input"]))return()=>{const r=aa(e).length;Ip(e,r,r)}},"PageDown"),PageUp:m((t,e)=>{if(Gr(e,["input"]))return()=>{Ip(e,0,0)}},"PageUp"),Tab:m((t,e,r)=>()=>{const n=L7(e,r.system.keyboard.modifiers.Shift);kl(n),sa(n)&&td(n,{anchorOffset:0,focusOffset:n.value.length})},"Tab")},Tse=m((t,e,r)=>{if(t.code==="KeyA"&&r.system.keyboard.modifiers.Control)return()=>sI(e)},"combinationBehavior");nu.keypress=(t,e,r)=>{if(t.key==="Enter"){if(Gr(e,"button")||Gr(e,"input")&&Sse.includes(e.type)||Gr(e,"a")&&e.href)return()=>{r.dispatchUIEvent(e,"click")};if(Gr(e,"input")){const n=e.form,i=n?.querySelector('input[type="submit"], button:not([type]), button[type="submit"]');return i?()=>r.dispatchUIEvent(i,"click"):n&&Cse.includes(e.type)&&n.querySelectorAll("input").length===1?()=>r.dispatchUIEvent(n,"submit"):void 0}}if(Dh(e)){const n=t.key==="Enter"?ru(e)&&!r.system.keyboard.modifiers.Shift?"insertParagraph":"insertLineBreak":"insertText",i=t.key==="Enter"?`
`:t.key;return()=>Fh(r,e,i,n)}};var Sse=["button","color","file","image","reset","submit"],Cse=["email","month","password","search","tel","text","url","week"];nu.keyup=(t,e,r)=>{var n;return(n=ok[t.key])===null||n===void 0?void 0:n.call(ok,t,e,r)};var ok={" ":m((t,e,r)=>{if(XR(e))return()=>r.dispatchUIEvent(e,"click")}," ")};nu.paste=(t,e,r)=>{if(Dh(e))return()=>{var n;const i=(n=t.clipboardData)===null||n===void 0?void 0:n.getData("text");i&&Fh(r,e,i,"insertFromPaste")}};var N7={auxclick:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},beforeinput:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},blur:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},click:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},contextmenu:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},copy:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},change:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},cut:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dblclick:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},focus:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},focusin:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},focusout:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},keydown:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keypress:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keyup:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},paste:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},input:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},mousedown:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseenter:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseleave:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mousemove:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseout:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseover:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseup:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerover:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerenter:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},pointerdown:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointermove:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerup:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointercancel:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},pointerout:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerleave:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},submit:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}}};function aI(t){return N7[t].EventType}m(aI,"getEventClass");var Pse=["MouseEvent","PointerEvent"];function F7(t){return Pse.includes(aI(t))}m(F7,"isMouseEvent");function z7(t){return aI(t)==="KeyboardEvent"}m(z7,"isKeyboardEvent");var Ase={ClipboardEvent:[B7],Event:[],FocusEvent:[vp,q7],InputEvent:[vp,$7],MouseEvent:[vp,db,_2],PointerEvent:[vp,db,_2,U7],KeyboardEvent:[vp,db,V7]};function lI(t,e,r){const n=ps(e),{EventType:i,defaultInit:l}=N7[t],c=new(j7(n))[i](t,l);return Ase[i].forEach(s=>s(c,r??{})),c}m(lI,"createEvent");function j7(t){var e,r,n,i,l,c,s,p,g,_,x,P,A,M,F,z;const j=(z=t.Event)!==null&&z!==void 0?z:(e=class{},m(e,"Event"),e);var $;const W=($=t.AnimationEvent)!==null&&$!==void 0?$:(r=class extends j{},m(r,"AnimationEvent"),r);var X;const te=(X=t.ClipboardEvent)!==null&&X!==void 0?X:(n=class extends j{},m(n,"ClipboardEvent"),n);var ne;const Z=(ne=t.PopStateEvent)!==null&&ne!==void 0?ne:(i=class extends j{},m(i,"PopStateEvent"),i);var U;const K=(U=t.ProgressEvent)!==null&&U!==void 0?U:(l=class extends j{},m(l,"ProgressEvent"),l);var he;const ue=(he=t.TransitionEvent)!==null&&he!==void 0?he:(c=class extends j{},m(c,"TransitionEvent"),c);var we;const Ie=(we=t.UIEvent)!==null&&we!==void 0?we:(s=class extends j{},m(s,"UIEvent"),s);var ee;const fe=(ee=t.CompositionEvent)!==null&&ee!==void 0?ee:(p=class extends Ie{},m(p,"CompositionEvent"),p);var ve;const xe=(ve=t.FocusEvent)!==null&&ve!==void 0?ve:(g=class extends Ie{},m(g,"FocusEvent"),g);var Xe;const Ke=(Xe=t.InputEvent)!==null&&Xe!==void 0?Xe:(_=class extends Ie{},m(_,"InputEvent"),_);var Ze;const bt=(Ze=t.KeyboardEvent)!==null&&Ze!==void 0?Ze:(x=class extends Ie{},m(x,"KeyboardEvent"),x);var qe;const kt=(qe=t.MouseEvent)!==null&&qe!==void 0?qe:(P=class extends Ie{},m(P,"MouseEvent"),P);var Jt;const Pt=(Jt=t.DragEvent)!==null&&Jt!==void 0?Jt:(A=class extends kt{},m(A,"DragEvent"),A);var dt;const er=(dt=t.PointerEvent)!==null&&dt!==void 0?dt:(M=class extends kt{},m(M,"PointerEvent"),M);var Wt;const ar=(Wt=t.TouchEvent)!==null&&Wt!==void 0?Wt:(F=class extends Ie{},m(F,"TouchEvent"),F);return{Event:j,AnimationEvent:W,ClipboardEvent:te,PopStateEvent:Z,ProgressEvent:K,TransitionEvent:ue,UIEvent:Ie,CompositionEvent:fe,FocusEvent:xe,InputEvent:Ke,KeyboardEvent:bt,MouseEvent:kt,DragEvent:Pt,PointerEvent:er,TouchEvent:ar}}m(j7,"getEventConstructors");function ql(t,e){for(const[r,n]of Object.entries(e))Object.defineProperty(t,r,{get:m(()=>n??null,"get")})}m(ql,"assignProps");function Jn(t){return Number(t??0)}m(Jn,"sanitizeNumber");function B7(t,{clipboardData:e}){ql(t,{clipboardData:e})}m(B7,"initClipboardEvent");function q7(t,{relatedTarget:e}){ql(t,{relatedTarget:e})}m(q7,"initFocusEvent");function $7(t,{data:e,inputType:r,isComposing:n}){ql(t,{data:e,isComposing:!!n,inputType:String(r)})}m($7,"initInputEvent");function vp(t,{view:e,detail:r}){ql(t,{view:e,detail:Jn(r??0)})}m(vp,"initUIEvent");function db(t,{altKey:e,ctrlKey:r,metaKey:n,shiftKey:i,modifierAltGraph:l,modifierCapsLock:c,modifierFn:s,modifierFnLock:p,modifierNumLock:g,modifierScrollLock:_,modifierSymbol:x,modifierSymbolLock:P}){ql(t,{altKey:!!e,ctrlKey:!!r,metaKey:!!n,shiftKey:!!i,getModifierState(A){return!!{Alt:e,AltGraph:l,CapsLock:c,Control:r,Fn:s,FnLock:p,Meta:n,NumLock:g,ScrollLock:_,Shift:i,Symbol:x,SymbolLock:P}[A]}})}m(db,"initUIEventModifiers");function V7(t,{key:e,code:r,location:n,repeat:i,isComposing:l,charCode:c}){ql(t,{key:String(e),code:String(r),location:Jn(n),repeat:!!i,isComposing:!!l,charCode:c})}m(V7,"initKeyboardEvent");function _2(t,{x:e,y:r,screenX:n,screenY:i,clientX:l=e,clientY:c=r,button:s,buttons:p,relatedTarget:g,offsetX:_,offsetY:x,pageX:P,pageY:A}){ql(t,{screenX:Jn(n),screenY:Jn(i),clientX:Jn(l),x:Jn(l),clientY:Jn(c),y:Jn(c),button:Jn(s),buttons:Jn(p),relatedTarget:g,offsetX:Jn(_),offsetY:Jn(x),pageX:Jn(P),pageY:Jn(A)})}m(_2,"initMouseEvent");function U7(t,{pointerId:e,width:r,height:n,pressure:i,tangentialPressure:l,tiltX:c,tiltY:s,twist:p,pointerType:g,isPrimary:_}){ql(t,{pointerId:Jn(e),width:Jn(r??1),height:Jn(n??1),pressure:Jn(i),tangentialPressure:Jn(l),tiltX:Jn(c),tiltY:Jn(s),twist:Jn(p),pointerType:String(g),isPrimary:!!_})}m(U7,"initPointerEvent");function G7(t,e,r,n=!1){(F7(e)||z7(e))&&(r={...r,...this.system.getUIEventModifiers()});const i=lI(e,t,r);return cI.call(this,t,i,n)}m(G7,"dispatchUIEvent");function cI(t,e,r=!1){var n;const i=e.type,l=r?()=>{}:(n=nu[i])===null||n===void 0?void 0:n.call(nu,e,t,this);if(l){e.preventDefault();let c=!1;return Object.defineProperty(e,"defaultPrevented",{get:m(()=>c,"get")}),Object.defineProperty(e,"preventDefault",{value:m(()=>{c=e.cancelable},"value")}),Nh(()=>t.dispatchEvent(e)),c||l(),!c}return Nh(()=>t.dispatchEvent(e))}m(cI,"dispatchEvent");function Ic(t,e,r){const n=lI(e,t,r);Nh(()=>t.dispatchEvent(n))}m(Ic,"dispatchDOMEvent");var sk=Symbol("patched focus/blur methods");function uI(t){if(t.prototype[sk])return;const{focus:e,blur:r}=t.prototype;Object.defineProperties(t.prototype,{focus:{configurable:!0,get:m(()=>i,"get")},blur:{configurable:!0,get:m(()=>l,"get")},[sk]:{configurable:!0,get:m(()=>({focus:e,blur:r}),"get")}});let n;function i(c){if(this.ownerDocument.visibilityState!=="hidden")return e.call(this,c);const s=b2(this.ownerDocument);if(s===this)return;const p=Symbol("focus call");n=p,s&&(r.call(s),Ic(s,"blur",{relatedTarget:this}),Ic(s,"focusout",{relatedTarget:n===p?this:null})),n===p&&(e.call(this,c),Ic(this,"focus",{relatedTarget:s})),n===p&&Ic(this,"focusin",{relatedTarget:s})}m(i,"patchedFocus");function l(){if(this.ownerDocument.visibilityState!=="hidden")return r.call(this);const c=b2(this.ownerDocument);if(c!==this)return;n=Symbol("blur call"),r.call(this),Ic(c,"blur",{relatedTarget:null}),Ic(c,"focusout",{relatedTarget:null})}m(l,"patchedBlur")}m(uI,"patchFocus");function b2(t){const e=Nf(t);return e?.tagName==="BODY"?null:e}m(b2,"getActiveTarget");var HE=Symbol("Interceptor for programmatical calls");function ah(t,e,r){const n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=Object.getOwnPropertyDescriptor(t,e),l=n?.set?"set":"value";if(typeof n?.[l]!="function"||n[l][HE])throw new Error(`Element ${t.tagName} does not implement "${String(e)}".`);function c(...s){const{applyNative:p=!1,realArgs:g,then:_}=r.call(this,...s),x=(!p&&i||n)[l];l==="set"?x.call(this,g):x.call(this,...g),_?.()}m(c,"intercept"),c[HE]=HE,Object.defineProperty(t,e,{...i??n,[l]:c})}m(ah,"prepareInterceptor");function H7(t){ah(t,"value",m(function(r){const n=c7(r);return n&&E7(this),{applyNative:!!n,realArgs:J7(this,r),then:n?void 0:()=>T7(this,String(r))}},"interceptorImpl"))}m(H7,"prepareValueInterceptor");function J7(t,e){return Gr(t,"input",{type:"number"})&&String(e)!==""&&!Number.isNaN(Number(e))?String(Number(e)):String(e)}m(J7,"sanitizeValue");function W7(t){ah(t,"setSelectionRange",m(function(r,...n){const i=u7(r);return{applyNative:!!i,realArgs:[Number(r),...n],then:m(()=>i?void 0:Dg(t),"then")}},"interceptorImpl")),ah(t,"selectionStart",m(function(r){return{realArgs:r,then:m(()=>Dg(t),"then")}},"interceptorImpl")),ah(t,"selectionEnd",m(function(r){return{realArgs:r,then:m(()=>Dg(t),"then")}},"interceptorImpl")),ah(t,"select",m(function(){return{realArgs:[],then:m(()=>p7(t,{anchorOffset:0,focusOffset:aa(t).length}),"then")}},"interceptorImpl"))}m(W7,"prepareSelectionInterceptor");function Z7(t){ah(t,"setRangeText",m(function(...r){return{realArgs:r,then:m(()=>{dx(t),Dg(t)},"then")}},"interceptorImpl"))}m(Z7,"prepareRangeTextInterceptor");var zp=Symbol("Node prepared with document state workarounds");function hI(t){t[zp]||(t.addEventListener("focus",e=>{const r=e.target;v2(r)},{capture:!0,passive:!0}),t.activeElement&&v2(t.activeElement),t.addEventListener("blur",e=>{const r=e.target,n=d7(r);n!==void 0&&(r.value!==n&&Ic(r,"change"),tI(r))},{capture:!0,passive:!0}),t[zp]=zp)}m(hI,"prepareDocument");function v2(t){t[zp]||(Gr(t,["input","textarea"])&&(H7(t),W7(t),Z7(t)),t[zp]=zp)}m(v2,"prepareElement");function K7(t){return Y7(t)?t:t.ownerDocument}m(K7,"getDocumentFromNode");function Y7(t){return t.nodeType===9}m(Y7,"isDocument");var rs=function(t){return t[t.Trigger=2]="Trigger",t[t.Call=1]="Call",t}({});function Mp(t,e){t.levelRefs[e]={}}m(Mp,"setLevelRef");function _g(t,e){return t.levelRefs[e]}m(_g,"getLevelRef");function zh(t){const e=t.delay;if(typeof e=="number")return Promise.all([new Promise(r=>globalThis.setTimeout(()=>r(),e)),t.advanceTimers(e)])}m(zh,"wait");var pb=function(t){return t[t.EachTrigger=4]="EachTrigger",t[t.EachApiCall=2]="EachApiCall",t[t.EachTarget=1]="EachTarget",t[t.Never=0]="Never",t}({});function Sc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(Sc,"_define_property");var xa=function(t){return t[t.STANDARD=0]="STANDARD",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.NUMPAD=3]="NUMPAD",t}({}),Rse=["Alt","AltGraph","Control","Fn","Meta","Shift","Symbol"];function x2(t){return Rse.includes(t)}m(x2,"isModifierKey");var Ise=["CapsLock","FnLock","NumLock","ScrollLock","SymbolLock"];function w2(t){return Ise.includes(t)}m(w2,"isModifierLock");var X7=class{isKeyPressed(e){return this.pressed.has(String(e.code))}getPressedKeys(){return this.pressed.values().map(e=>e.keyDef)}async keydown(e,r){const n=String(r.key),i=String(r.code),l=hb(e.config.document);this.setKeydownTarget(l),this.pressed.add(i,r),x2(n)&&(this.modifiers[n]=!0);const c=e.dispatchUIEvent(l,"keydown",{key:n,code:i});w2(n)&&!this.modifiers[n]&&(this.modifiers[n]=!0,this.modifierLockStart[n]=!0),c&&this.pressed.setUnprevented(i),c&&this.hasKeyPress(n)&&e.dispatchUIEvent(hb(e.config.document),"keypress",{key:n,code:i,charCode:r.key==="Enter"?13:String(r.key).charCodeAt(0)})}async keyup(e,r){const n=String(r.key),i=String(r.code),l=this.pressed.isUnprevented(i);this.pressed.delete(i),x2(n)&&!this.pressed.values().find(c=>c.keyDef.key===n)&&(this.modifiers[n]=!1),e.dispatchUIEvent(hb(e.config.document),"keyup",{key:n,code:i},!l),w2(n)&&this.modifiers[n]&&(this.modifierLockStart[n]?this.modifierLockStart[n]=!1:this.modifiers[n]=!1)}setKeydownTarget(e){e!==this.lastKeydownTarget&&(this.carryChar=""),this.lastKeydownTarget=e}hasKeyPress(e){return(e.length===1||e==="Enter")&&!this.modifiers.Control&&!this.modifiers.Alt}constructor(e){Sc(this,"system",void 0),Sc(this,"modifiers",{Alt:!1,AltGraph:!1,CapsLock:!1,Control:!1,Fn:!1,FnLock:!1,Meta:!1,NumLock:!1,ScrollLock:!1,Shift:!1,Symbol:!1,SymbolLock:!1}),Sc(this,"pressed",new class{add(r,n){var i,l,c;(c=(i=this.registry)[l=r])!==null&&c!==void 0||(i[l]={keyDef:n,unpreventedDefault:!1})}has(r){return!!this.registry[r]}setUnprevented(r){const n=this.registry[r];n&&(n.unpreventedDefault=!0)}isUnprevented(r){var n;return!!(!((n=this.registry[r])===null||n===void 0)&&n.unpreventedDefault)}delete(r){delete this.registry[r]}values(){return Object.values(this.registry)}constructor(){Sc(this,"registry",{})}}),Sc(this,"carryChar",""),Sc(this,"lastKeydownTarget",void 0),Sc(this,"modifierLockStart",{}),this.system=e}};m(X7,"KeyboardHost");var Mse=X7,Ose=[..."0123456789".split("").map(t=>({code:`Digit${t}`,key:t})),...")!@#$%^&*(".split("").map((t,e)=>({code:`Digit${e}`,key:t,shiftKey:!0})),..."abcdefghijklmnopqrstuvwxyz".split("").map(t=>({code:`Key${t.toUpperCase()}`,key:t})),..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(t=>({code:`Key${t}`,key:t,shiftKey:!0})),{code:"BracketLeft",key:"["},{code:"BracketLeft",key:"{",shiftKey:!0},{code:"BracketRight",key:"]"},{code:"BracketRight",key:"}",shiftKey:!0},{code:"Space",key:" "},{code:"AltLeft",key:"Alt",location:xa.LEFT},{code:"AltRight",key:"Alt",location:xa.RIGHT},{code:"ShiftLeft",key:"Shift",location:xa.LEFT},{code:"ShiftRight",key:"Shift",location:xa.RIGHT},{code:"ControlLeft",key:"Control",location:xa.LEFT},{code:"ControlRight",key:"Control",location:xa.RIGHT},{code:"MetaLeft",key:"Meta",location:xa.LEFT},{code:"MetaRight",key:"Meta",location:xa.RIGHT},{code:"OSLeft",key:"OS",location:xa.LEFT},{code:"OSRight",key:"OS",location:xa.RIGHT},{code:"ContextMenu",key:"ContextMenu"},{code:"Tab",key:"Tab"},{code:"CapsLock",key:"CapsLock"},{code:"Backspace",key:"Backspace"},{code:"Enter",key:"Enter"},{code:"Escape",key:"Escape"},{code:"ArrowUp",key:"ArrowUp"},{code:"ArrowDown",key:"ArrowDown"},{code:"ArrowLeft",key:"ArrowLeft"},{code:"ArrowRight",key:"ArrowRight"},{code:"Home",key:"Home"},{code:"End",key:"End"},{code:"Delete",key:"Delete"},{code:"PageUp",key:"PageUp"},{code:"PageDown",key:"PageDown"},{code:"Fn",key:"Fn"},{code:"Symbol",key:"Symbol"},{code:"AltRight",key:"AltGraph"}],kse=[{name:"MouseLeft",pointerType:"mouse",button:"primary"},{name:"MouseRight",pointerType:"mouse",button:"secondary"},{name:"MouseMiddle",pointerType:"mouse",button:"auxiliary"},{name:"TouchA",pointerType:"touch"},{name:"TouchB",pointerType:"touch"},{name:"TouchC",pointerType:"touch"}];function Q7(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(Q7,"_define_property");var e9=class{getButtons(){let e=0;for(const r of Object.keys(this.pressed))e|=2**Number(r);return e}down(e){const r=lv(e.button);if(r in this.pressed){this.pressed[r].push(e);return}return this.pressed[r]=[e],r}up(e){const r=lv(e.button);if(r in this.pressed&&(this.pressed[r]=this.pressed[r].filter(n=>n.name!==e.name),this.pressed[r].length===0))return delete this.pressed[r],r}constructor(){Q7(this,"pressed",{})}};m(e9,"Buttons");var t9=e9,ak={primary:0,secondary:1,auxiliary:2,back:3,X1:3,forward:4,X2:4};function lv(t=0){return t in ak?ak[t]:Number(t)}m(lv,"getMouseButtonId");var lk={1:2,2:1};function cv(t){return t=lv(t),t in lk?lk[t]:t}m(cv,"getMouseEventButton");function r9(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(r9,"_define_property");var n9=class{get countPressed(){return this.pressedKeys.size}isPressed(e){return this.pressedKeys.has(e.name)}addPressed(e){return this.pressedKeys.add(e.name)}removePressed(e){return this.pressedKeys.delete(e.name)}constructor(){r9(this,"pressedKeys",new Set)}};m(n9,"Device");var Lse=n9;function jp(t,e){const r=[];for(let l=t;l;l=l.parentElement)r.push(l);const n=[];for(let l=e;l;l=l.parentElement)n.push(l);let i=0;for(;!(i>=r.length||i>=n.length||r[r.length-1-i]!==n[n.length-1-i]);i++);return[r.slice(0,r.length-i),n.slice(0,n.length-i),n.slice(n.length-i)]}m(jp,"getTreeDiff");function uv({target:t,node:e,offset:r}){return sa(t)?{node:t,offset:r??aa(t).length}:e?{node:e,offset:r??(e.nodeType===3?e.nodeValue.length:e.childNodes.length)}:dI(t,r)}m(uv,"resolveCaretPosition");function dI(t,e,r=!0){let n=e===void 0?t.childNodes.length-1:0;const i=e===void 0?-1:1;for(;e===void 0?n>=(r?Math.max(t.childNodes.length-1,0):0):n<=t.childNodes.length;){if(e&&n===t.childNodes.length)throw new Error("The given offset is out of bounds.");const l=t.childNodes.item(n),c=String(l.textContent);if(c.length)if(e!==void 0&&c.length<e)e-=c.length;else{if(l.nodeType===1)return dI(l,e,!1);if(l.nodeType===3)return{node:l,offset:e??l.nodeValue.length}}n+=i}return{node:t,offset:t.childNodes.length}}m(dI,"findNodeAtTextOffset");function i9({document:t,target:e,clickCount:r,node:n,offset:i}){if(s7(e))return;const l=sa(e),c=String(l?aa(e):e.textContent),[s,p]=n?[i,i]:o9(c,i,r);if(l)return td(e,{anchorOffset:s??c.length,focusOffset:p??c.length}),{node:e,start:s??0,end:p??c.length};{const{node:g,offset:_}=uv({target:e,node:n,offset:s}),{node:x,offset:P}=uv({target:e,node:n,offset:p}),A=e.ownerDocument.createRange();try{A.setStart(g,_),A.setEnd(x,P)}catch{throw new Error("The given offset is out of bounds.")}const M=t.getSelection();return M?.removeAllRanges(),M?.addRange(A.cloneRange()),A}}m(i9,"setSelectionPerMouseDown");function o9(t,e,r){if(r%3===1||t.length===0)return[e,e];const n=e??t.length;return r%3===2?[n-t.substr(0,e).match(/(\w+|\s+|\W)?$/)[0].length,e===void 0?e:e+t.substr(e).match(/^(\w+|\s+|\W)?/)[0].length]:[n-t.substr(0,e).match(/[^\r\n]*$/)[0].length,e===void 0?e:e+t.substr(e).match(/^[^\r\n]*/)[0].length]}m(o9,"getTextRange");function s9(t,{document:e,target:r,node:n,offset:i}){const l=uv({target:r,node:n,offset:i});if("node"in t){if(l.node===t.node){const c=l.offset<t.start?t.end:t.start,s=l.offset>t.end||l.offset<t.start?l.offset:t.end;td(t.node,{anchorOffset:c,focusOffset:s})}}else{const c=t.cloneRange(),s=c.comparePoint(l.node,l.offset);s<0?c.setStart(l.node,l.offset):s>0&&c.setEnd(l.node,l.offset);const p=e.getSelection();p?.removeAllRanges(),p?.addRange(c.cloneRange())}}m(s9,"modifySelectionPerMouseMove");function pI(t,e){var r,n,i,l,c,s,p,g,_,x,P,A,M,F,z,j,$,W,X,te,ne,Z,U,K;return t.target!==e.target||((r=t.coords)===null||r===void 0?void 0:r.x)!==((n=e.coords)===null||n===void 0?void 0:n.x)||((i=t.coords)===null||i===void 0?void 0:i.y)!==((l=e.coords)===null||l===void 0?void 0:l.y)||((c=t.coords)===null||c===void 0?void 0:c.clientX)!==((s=e.coords)===null||s===void 0?void 0:s.clientX)||((p=t.coords)===null||p===void 0?void 0:p.clientY)!==((g=e.coords)===null||g===void 0?void 0:g.clientY)||((_=t.coords)===null||_===void 0?void 0:_.offsetX)!==((x=e.coords)===null||x===void 0?void 0:x.offsetX)||((P=t.coords)===null||P===void 0?void 0:P.offsetY)!==((A=e.coords)===null||A===void 0?void 0:A.offsetY)||((M=t.coords)===null||M===void 0?void 0:M.pageX)!==((F=e.coords)===null||F===void 0?void 0:F.pageX)||((z=t.coords)===null||z===void 0?void 0:z.pageY)!==((j=e.coords)===null||j===void 0?void 0:j.pageY)||(($=t.coords)===null||$===void 0?void 0:$.screenX)!==((W=e.coords)===null||W===void 0?void 0:W.screenX)||((X=t.coords)===null||X===void 0?void 0:X.screenY)!==((te=e.coords)===null||te===void 0?void 0:te.screenY)||((ne=t.caret)===null||ne===void 0?void 0:ne.node)!==((Z=e.caret)===null||Z===void 0?void 0:Z.node)||((U=t.caret)===null||U===void 0?void 0:U.offset)!==((K=e.caret)===null||K===void 0?void 0:K.offset)}m(pI,"isDifferentPointerPosition");function Cc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(Cc,"_define_property");var a9=class{move(e,r,n){const i=this.position,l=this.getTarget(e);if(this.position=r,!pI(i,r))return;const c=this.getTarget(e),s=this.getEventInit("mousemove"),[p,g]=jp(l,c);return{leave:m(()=>{l!==c&&(e.dispatchUIEvent(l,"mouseout",s),p.forEach(_=>e.dispatchUIEvent(_,"mouseleave",s)))},"leave"),enter:m(()=>{l!==c&&(e.dispatchUIEvent(c,"mouseover",s),g.forEach(_=>e.dispatchUIEvent(_,"mouseenter",s)))},"enter"),move:m(()=>{n||(e.dispatchUIEvent(c,"mousemove",s),this.modifySelecting(e))},"move")}}down(e,r,n){const i=this.buttons.down(r);if(i===void 0)return;const l=this.getTarget(e);this.buttonDownTarget[i]=l;const c=this.getEventInit("mousedown",r.button),s=Ba(l);!n&&(s||e.dispatchUIEvent(l,"mousedown",c))&&(this.startSelecting(e,c.detail),kl(l)),!s&&cv(r.button)===2&&e.dispatchUIEvent(l,"contextmenu",this.getEventInit("contextmenu",r.button))}up(e,r,n){const i=this.buttons.up(r);if(i===void 0)return;const l=this.getTarget(e);if(!Ba(l)){if(!n){const s=this.getEventInit("mouseup",r.button);e.dispatchUIEvent(l,"mouseup",s),this.endSelecting()}const c=jp(this.buttonDownTarget[i],l)[2][0];if(c){const s=this.getEventInit("click",r.button);s.detail&&(e.dispatchUIEvent(c,s.button===0?"click":"auxclick",s),s.button===0&&s.detail===2&&e.dispatchUIEvent(c,"dblclick",{...this.getEventInit("dblclick",r.button),detail:s.detail}))}}}resetClickCount(){this.clickCount.reset()}getEventInit(e,r){const n={...this.position.coords};return n.button=cv(r),n.buttons=this.buttons.getButtons(),e==="mousedown"?n.detail=this.clickCount.getOnDown(n.button):e==="mouseup"?n.detail=this.clickCount.getOnUp(n.button):(e==="click"||e==="auxclick")&&(n.detail=this.clickCount.incOnClick(n.button)),n}getTarget(e){var r;return(r=this.position.target)!==null&&r!==void 0?r:e.config.document.body}startSelecting(e,r){var n,i;this.selecting=i9({document:e.config.document,target:this.getTarget(e),node:(n=this.position.caret)===null||n===void 0?void 0:n.node,offset:(i=this.position.caret)===null||i===void 0?void 0:i.offset,clickCount:r})}modifySelecting(e){var r,n;this.selecting&&s9(this.selecting,{document:e.config.document,target:this.getTarget(e),node:(r=this.position.caret)===null||r===void 0?void 0:r.node,offset:(n=this.position.caret)===null||n===void 0?void 0:n.offset})}endSelecting(){this.selecting=void 0}constructor(){Cc(this,"position",{}),Cc(this,"buttons",new t9),Cc(this,"selecting",void 0),Cc(this,"buttonDownTarget",{}),Cc(this,"clickCount",new class{incOnClick(e){const r=this.down[e]===void 0?void 0:Number(this.down[e])+1;return this.count=this.count[e]===void 0?{}:{[e]:Number(this.count[e])+1},r}getOnDown(e){var r;this.down={[e]:(r=this.count[e])!==null&&r!==void 0?r:0};var n;return this.count={[e]:(n=this.count[e])!==null&&n!==void 0?n:0},Number(this.count[e])+1}getOnUp(e){return this.down[e]===void 0?void 0:Number(this.down[e])+1}reset(){this.count={}}constructor(){Cc(this,"down",{}),Cc(this,"count",{})}})}};m(a9,"Mouse");var Dse=a9;function hy(t,e){var r;return((r=fI(t,e))===null||r===void 0?void 0:r.pointerEvents)!=="none"}m(hy,"hasPointerEvents");function l9(t){const e=ps(t);for(let r=t,n=[];r?.ownerDocument;r=r.parentElement){n.push(r);const i=e.getComputedStyle(r).pointerEvents;if(i&&!["inherit","unset"].includes(i))return{pointerEvents:i,tree:n}}}m(l9,"closestPointerEventsDeclaration");var ck=Symbol("Last check for pointer-events");function fI(t,e){const r=e[ck];if(!(t.config.pointerEventsCheck!==pb.Never&&(!r||E2(t.config.pointerEventsCheck,pb.EachApiCall)&&r[rs.Call]!==_g(t,rs.Call)||E2(t.config.pointerEventsCheck,pb.EachTrigger)&&r[rs.Trigger]!==_g(t,rs.Trigger))))return r?.result;const i=l9(e);return e[ck]={[rs.Call]:_g(t,rs.Call),[rs.Trigger]:_g(t,rs.Trigger),result:i},i}m(fI,"checkPointerEvents");function Op(t,e){const r=fI(t,e);if(r?.pointerEvents==="none")throw new Error([`Unable to perform pointer interaction as the element ${r.tree.length>1?"inherits":"has"} \`pointer-events: none\`:`,"",c9(r.tree)].join(`
`))}m(Op,"assertPointerEvents");function c9(t){return t.reverse().map((e,r)=>["".padEnd(r),e.tagName,e.id&&`#${e.id}`,e.hasAttribute("data-testid")&&`(testId=${e.getAttribute("data-testid")})`,u9(e),t.length>1&&r===0&&"  <-- This element declared `pointer-events: none`",t.length>1&&r===t.length-1&&"  <-- Asserted pointer events here"].filter(Boolean).join("")).join(`
`)}m(c9,"printTree");function u9(t){var e;let r;if(t.hasAttribute("aria-label"))r=t.getAttribute("aria-label");else if(t.hasAttribute("aria-labelledby")){var n,i;r=(i=t.ownerDocument.getElementById(t.getAttribute("aria-labelledby")))===null||i===void 0||(n=i.textContent)===null||n===void 0?void 0:n.trim()}else if(Gr(t,["button","input","meter","output","progress","select","textarea"])&&(!((e=t.labels)===null||e===void 0)&&e.length))r=Array.from(t.labels).map(c=>{var s;return(s=c.textContent)===null||s===void 0?void 0:s.trim()}).join("|");else if(Gr(t,"button")){var l;r=(l=t.textContent)===null||l===void 0?void 0:l.trim()}return r=r?.replace(/\n/g,"  "),Number(r?.length)>30&&(r=`${r?.substring(0,29)}`),r?`(label=${r})`:""}m(u9,"getLabelDescr");function E2(t,e){return(t&e)>0}m(E2,"hasBitFlag");function Ta(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(Ta,"_define_property");var h9=class{init(e){const r=this.getTarget(e),[,n]=jp(null,r),i=this.getEventInit();return Op(e,r),e.dispatchUIEvent(r,"pointerover",i),n.forEach(l=>e.dispatchUIEvent(l,"pointerenter",i)),this}move(e,r){const n=this.position,i=this.getTarget(e);if(this.position=r,!pI(n,r))return;const l=this.getTarget(e),c=this.getEventInit(-1),[s,p]=jp(i,l);return{leave:m(()=>{hy(e,i)&&i!==l&&(e.dispatchUIEvent(i,"pointerout",c),s.forEach(g=>e.dispatchUIEvent(g,"pointerleave",c)))},"leave"),enter:m(()=>{Op(e,l),i!==l&&(e.dispatchUIEvent(l,"pointerover",c),p.forEach(g=>e.dispatchUIEvent(g,"pointerenter",c)))},"enter"),move:m(()=>{e.dispatchUIEvent(l,"pointermove",c)},"move")}}down(e,r=0){if(this.isDown)return;const n=this.getTarget(e);Op(e,n),this.isDown=!0,this.isPrevented=!e.dispatchUIEvent(n,"pointerdown",this.getEventInit(r))}up(e,r=0){if(!this.isDown)return;const n=this.getTarget(e);Op(e,n),this.isPrevented=!1,this.isDown=!1,e.dispatchUIEvent(n,"pointerup",this.getEventInit(r))}release(e){const r=this.getTarget(e),[n]=jp(r,null),i=this.getEventInit();hy(e,r)&&(e.dispatchUIEvent(r,"pointerout",i),n.forEach(l=>e.dispatchUIEvent(l,"pointerleave",i))),this.isCancelled=!0}getTarget(e){var r;return(r=this.position.target)!==null&&r!==void 0?r:e.config.document.body}getEventInit(e){return{...this.position.coords,pointerId:this.pointerId,pointerType:this.pointerType,isPrimary:this.isPrimary,button:cv(e),buttons:this.buttons.getButtons()}}constructor({pointerId:e,pointerType:r,isPrimary:n},i){Ta(this,"pointerId",void 0),Ta(this,"pointerType",void 0),Ta(this,"isPrimary",void 0),Ta(this,"buttons",void 0),Ta(this,"isMultitouch",!1),Ta(this,"isCancelled",!1),Ta(this,"isDown",!1),Ta(this,"isPrevented",!1),Ta(this,"position",{}),this.pointerId=e,this.pointerType=r,this.isPrimary=n,this.isMultitouch=!n,this.buttons=i}};m(h9,"Pointer");var Nse=h9;function yl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(yl,"_define_property");var d9=class{isKeyPressed(e){return this.devices.get(e.pointerType).isPressed(e)}async press(e,r,n){this.devices.get(r.pointerType).addPressed(r),this.buttons.down(r);const i=this.getPointerName(r),l=r.pointerType==="touch"?this.pointers.new(i,r.pointerType,this.buttons):this.pointers.get(i);l.position=n,l.pointerType!=="touch"&&(this.mouse.position=n),l.pointerType==="touch"&&l.init(e),l.down(e,r.button),l.pointerType!=="touch"&&this.mouse.down(e,r,l.isPrevented)}async move(e,r,n){const i=this.pointers.get(r),l=i.move(e,n),c=i.pointerType==="touch"?void 0:this.mouse.move(e,n,i.isPrevented);l?.leave(),c?.leave(),l?.enter(),c?.enter(),l?.move(),c?.move()}async release(e,r,n){const i=this.devices.get(r.pointerType);i.removePressed(r),this.buttons.up(r);const l=this.pointers.get(this.getPointerName(r)),c=l.isPrevented;if(l.position=n,l.pointerType!=="touch"&&(this.mouse.position=n),i.countPressed===0&&l.up(e,r.button),l.pointerType==="touch"&&l.release(e),l.pointerType==="touch"&&!l.isMultitouch){const s=this.mouse.move(e,n,c);s?.leave(),s?.enter(),s?.move(),this.mouse.down(e,r,c)}if(!l.isMultitouch){const s=this.mouse.move(e,n,c);s?.leave(),s?.enter(),s?.move(),this.mouse.up(e,r,c)}}getPointerName(e){return e.pointerType==="touch"?e.name:e.pointerType}getPreviousPosition(e){return this.pointers.has(e)?this.pointers.get(e).position:void 0}resetClickCount(){this.mouse.resetClickCount()}getMouseTarget(e){var r;return(r=this.mouse.position.target)!==null&&r!==void 0?r:e.config.document.body}setMousePosition(e){this.mouse.position=e,this.pointers.get("mouse").position=e}constructor(e){yl(this,"system",void 0),yl(this,"mouse",void 0),yl(this,"buttons",void 0),yl(this,"devices",new class{get(r){var n,i,l;return(l=(n=this.registry)[i=r])!==null&&l!==void 0?l:n[i]=new Lse}constructor(){yl(this,"registry",{})}}),yl(this,"pointers",new class{new(r,n,i){const l=n!=="touch"||!Object.values(this.registry).some(c=>c.pointerType==="touch"&&!c.isCancelled);return l||Object.values(this.registry).forEach(c=>{c.pointerType===n&&!c.isCancelled&&(c.isMultitouch=!0)}),this.registry[r]=new Nse({pointerId:this.nextId++,pointerType:n,isPrimary:l},i),this.registry[r]}get(r){if(!this.has(r))throw new Error(`Trying to access pointer "${r}" which does not exist.`);return this.registry[r]}has(r){return r in this.registry}constructor(){yl(this,"registry",{}),yl(this,"nextId",1)}}),this.system=e,this.buttons=new t9,this.mouse=new Dse,this.pointers.new("mouse","mouse",this.buttons)}};m(d9,"PointerHost");var Fse=d9;function T2(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(T2,"_define_property");var p9=class{getUIEventModifiers(){return{altKey:this.keyboard.modifiers.Alt,ctrlKey:this.keyboard.modifiers.Control,metaKey:this.keyboard.modifiers.Meta,shiftKey:this.keyboard.modifiers.Shift,modifierAltGraph:this.keyboard.modifiers.AltGraph,modifierCapsLock:this.keyboard.modifiers.CapsLock,modifierFn:this.keyboard.modifiers.Fn,modifierFnLock:this.keyboard.modifiers.FnLock,modifierNumLock:this.keyboard.modifiers.NumLock,modifierScrollLock:this.keyboard.modifiers.ScrollLock,modifierSymbol:this.keyboard.modifiers.Symbol,modifierSymbolLock:this.keyboard.modifiers.SymbolLock}}constructor(){T2(this,"keyboard",new Mse(this)),T2(this,"pointer",new Fse(this))}};m(p9,"System");var f9=p9;async function m9(t){const e=[];return this.config.skipHover||e.push({target:t}),e.push({keys:"[MouseLeft]",target:t}),this.pointer(e)}m(m9,"click");async function g9(t){return this.pointer([{target:t},"[MouseLeft][MouseLeft]"])}m(g9,"dblClick");async function y9(t){return this.pointer([{target:t},"[MouseLeft][MouseLeft][MouseLeft]"])}m(y9,"tripleClick");async function _9(t){return this.pointer({target:t})}m(_9,"hover");async function b9(t){return Op(this,this.system.pointer.getMouseTarget(this)),this.pointer({target:t.ownerDocument.body})}m(b9,"unhover");async function v9({shift:t}={}){return this.keyboard(t===!0?"{Shift>}{Tab}{/Shift}":t===!1?"[/ShiftLeft][/ShiftRight]{Tab}":"{Tab}")}m(v9,"tab");var mI=function(t){return t["{"]="}",t["["]="]",t}(mI||{});function gI(t,e){let r=0;const n=t[r]in mI?t[r]:"";r+=n.length;const l=new RegExp(`^\\${n}{2}`).test(t)?"":n;return{type:l,...l===""?x9(t,r,e):w9(t,r,l,e)}}m(gI,"readNextDescriptor");function x9(t,e,r){const n=t[e];return yI(n,t,e,r),e+=n.length,{consumedLength:e,descriptor:n,releasePrevious:!1,releaseSelf:!0,repeat:1}}m(x9,"readPrintableChar");function w9(t,e,r,n){var i,l;const c=t[e]==="/"?"/":"";e+=c.length;const s=r==="{"&&t[e]==="\\";e+=Number(s);const p=s?t[e]:(i=t.slice(e).match(r==="{"?/^\w+|^[^}>/]/:/^\w+/))===null||i===void 0?void 0:i[0];yI(p,t,e,n),e+=p.length;var g;const _=(g=(l=t.slice(e).match(/^>\d+/))===null||l===void 0?void 0:l[0])!==null&&g!==void 0?g:"";e+=_.length;const x=t[e]==="/"||!_&&t[e]===">"?t[e]:"";e+=x.length;const P=mI[r],A=t[e]===P?P:"";if(!A)throw new Error(_I([!_&&"repeat modifier",!x&&"release modifier",`"${P}"`].filter(Boolean).join(" or "),t[e],t,n));return e+=A.length,{consumedLength:e,descriptor:p,releasePrevious:!!c,repeat:_?Math.max(Number(_.substr(1)),1):1,releaseSelf:E9(x,_)}}m(w9,"readTag");function yI(t,e,r,n){if(!t)throw new Error(_I("key descriptor",e[r],e,n))}m(yI,"assertDescriptor");function E9(t,e){if(t)return t==="/";if(e)return!1}m(E9,"hasReleaseSelf");function _I(t,e,r,n){return`Expected ${t} but found "${e??""}" in "${r}"
    See ${n==="pointer"?"https://testing-library.com/docs/user-event/pointer#pressing-a-button-or-touching-the-screen":"https://testing-library.com/docs/user-event/keyboard"}
    for more information about how userEvent parses your input.`}m(_I,"getErrorMessage");function T9(t,e){const r=[];do{const{type:i,descriptor:l,consumedLength:c,releasePrevious:s,releaseSelf:p=!0,repeat:g}=gI(e,"keyboard");var n;const _=(n=t.find(x=>{if(i==="["){var P;return((P=x.code)===null||P===void 0?void 0:P.toLowerCase())===l.toLowerCase()}else if(i==="{"){var A;return((A=x.key)===null||A===void 0?void 0:A.toLowerCase())===l.toLowerCase()}return x.key===l}))!==null&&n!==void 0?n:{key:"Unknown",code:"Unknown",[i==="["?"code":"key"]:l};r.push({keyDef:_,releasePrevious:s,releaseSelf:p,repeat:g}),e=e.slice(c)}while(e);return r}m(T9,"parseKeyDef");async function S9(t){const e=T9(this.config.keyboardMap,t);for(let r=0;r<e.length;r++)await zh(this.config),await C9(this,e[r])}m(S9,"keyboard");async function C9(t,{keyDef:e,releasePrevious:r,releaseSelf:n,repeat:i}){const{system:l}=t;if(l.keyboard.isKeyPressed(e)&&await l.keyboard.keyup(t,e),!r){for(let c=1;c<=i;c++)await l.keyboard.keydown(t,e),c<i&&await zh(t.config);n&&await l.keyboard.keyup(t,e)}}m(C9,"keyboardAction");async function P9(t){for(const e of t.system.keyboard.getPressedKeys())await t.system.keyboard.keyup(t,e)}m(P9,"releaseAllKeys");function bI(t){const e=sa(t)?{"text/plain":A9(t)}:{"text/plain":String(t.ownerDocument.getSelection())},r=cx(ps(t));for(const n in e)e[n]&&r.setData(n,e[n]);return r}m(bI,"copySelection");function A9(t){const e=uf(t);return aa(t).substring(e.startOffset,e.endOffset)}m(A9,"readSelectedValueFromInput");async function R9(){const t=this.config.document;var e;const r=(e=t.activeElement)!==null&&e!==void 0?e:t.body,n=bI(r);if(n.items.length!==0)return this.dispatchUIEvent(r,"copy",{clipboardData:n})&&this.config.writeToClipboard&&await YR(t,n),n}m(R9,"copy");async function I9(){const t=this.config.document;var e;const r=(e=t.activeElement)!==null&&e!==void 0?e:t.body,n=bI(r);if(n.items.length!==0)return this.dispatchUIEvent(r,"cut",{clipboardData:n})&&this.config.writeToClipboard&&await YR(r.ownerDocument,n),n}m(I9,"cut");async function M9(t){const e=this.config.document;var r;const n=(r=e.activeElement)!==null&&r!==void 0?r:e.body;var i;const l=(i=typeof t=="string"?O9(e,t):t)!==null&&i!==void 0?i:await Q$(e).catch(()=>{throw new Error("`userEvent.paste()` without `clipboardData` requires the `ClipboardAPI` to be available.")});this.dispatchUIEvent(n,"paste",{clipboardData:l})}m(M9,"paste");function O9(t,e){const r=cx(ps(t));return r.setData("text",e),r}m(O9,"getClipboardDataFromString");function S2(t,e){const r=[];do{const{descriptor:n,consumedLength:i,releasePrevious:l,releaseSelf:c=!0}=gI(e,"pointer"),s=t.find(p=>p.name===n);s&&r.push({keyDef:s,releasePrevious:l,releaseSelf:c}),e=e.slice(i)}while(e);return r}m(S2,"parseKeyDef");async function k9(t){const{pointerMap:e}=this.config,r=[];(Array.isArray(t)?t:[t]).forEach(n=>{typeof n=="string"?r.push(...S2(e,n)):"keys"in n?r.push(...S2(e,n.keys).map(i=>({...n,...i}))):r.push(n)});for(let n=0;n<r.length;n++)await zh(this.config),await L9(this,r[n]);this.system.pointer.resetClickCount()}m(k9,"pointer");async function L9(t,e){var r,n;const i="pointerName"in e&&e.pointerName?e.pointerName:"keyDef"in e?t.system.pointer.getPointerName(e.keyDef):"mouse",l=t.system.pointer.getPreviousPosition(i);var c,s,p,g;const _={target:(c=e.target)!==null&&c!==void 0?c:D9(t,l),coords:(s=e.coords)!==null&&s!==void 0?s:l?.coords,caret:{node:(p=e.node)!==null&&p!==void 0?p:C2(e)||l==null||(r=l.caret)===null||r===void 0?void 0:r.node,offset:(g=e.offset)!==null&&g!==void 0?g:C2(e)||l==null||(n=l.caret)===null||n===void 0?void 0:n.offset}};"keyDef"in e?(t.system.pointer.isKeyPressed(e.keyDef)&&(Mp(t,rs.Trigger),await t.system.pointer.release(t,e.keyDef,_)),e.releasePrevious||(Mp(t,rs.Trigger),await t.system.pointer.press(t,e.keyDef,_),e.releaseSelf&&(Mp(t,rs.Trigger),await t.system.pointer.release(t,e.keyDef,_)))):(Mp(t,rs.Trigger),await t.system.pointer.move(t,i,_))}m(L9,"pointerAction");function C2(t){var e,r;return!!((r=(e=t.target)!==null&&e!==void 0?e:t.node)!==null&&r!==void 0?r:t.offset!==void 0)}m(C2,"hasCaretPosition");function D9(t,e){if(!e)throw new Error("This pointer has no previous position. Provide a target property!");var r;return(r=e.target)!==null&&r!==void 0?r:t.config.document.body}m(D9,"getPrevTarget");async function N9(t){if(!Dh(t)||Ba(t))throw new Error("clear()` is only supported on editable elements.");if(kl(t),t.ownerDocument.activeElement!==t)throw new Error("The element to be cleared could not be focused.");if(sI(t),!D7(t))throw new Error("The element content to be cleared could not be selected.");Fh(this,t,"","deleteContentBackward")}m(N9,"clear");async function F9(t,e){return vI.call(this,!0,t,e)}m(F9,"selectOptions");async function z9(t,e){return vI.call(this,!1,t,e)}m(z9,"deselectOptions");async function vI(t,e,r){if(!t&&!e.multiple)throw nn().getElementError("Unable to deselect an option in a non-multiple select. Use selectOptions to change the selection instead.",e);const n=Array.isArray(r)?r:[r],i=Array.from(e.querySelectorAll('option, [role="option"]')),l=n.map(s=>{if(typeof s!="string"&&i.includes(s))return s;{const p=i.find(g=>g.value===s||g.innerHTML===s);if(p)return p;throw nn().getElementError(`Value "${String(s)}" not found in options`,e)}}).filter(s=>!Ba(s));if(Ba(e)||!l.length)return;const c=m(s=>{s.selected=t,this.dispatchUIEvent(e,"input",{bubbles:!0,cancelable:!1,composed:!0}),this.dispatchUIEvent(e,"change")},"selectOption");if(Gr(e,"select"))if(e.multiple)for(const s of l){const p=this.config.pointerEventsCheck===0?!0:hy(this,s);p&&(this.dispatchUIEvent(s,"pointerover"),this.dispatchUIEvent(e,"pointerenter"),this.dispatchUIEvent(s,"mouseover"),this.dispatchUIEvent(e,"mouseenter"),this.dispatchUIEvent(s,"pointermove"),this.dispatchUIEvent(s,"mousemove"),this.dispatchUIEvent(s,"pointerdown"),this.dispatchUIEvent(s,"mousedown")),kl(e),p&&(this.dispatchUIEvent(s,"pointerup"),this.dispatchUIEvent(s,"mouseup")),c(s),p&&this.dispatchUIEvent(s,"click"),await zh(this.config)}else if(l.length===1){const s=this.config.pointerEventsCheck===0?!0:hy(this,e);s?await this.click(e):kl(e),c(l[0]),s&&(this.dispatchUIEvent(e,"pointerover"),this.dispatchUIEvent(e,"pointerenter"),this.dispatchUIEvent(e,"mouseover"),this.dispatchUIEvent(e,"mouseenter"),this.dispatchUIEvent(e,"pointerup"),this.dispatchUIEvent(e,"mouseup"),this.dispatchUIEvent(e,"click")),await zh(this.config)}else throw nn().getElementError("Cannot select multiple options on a non-multiple select",e);else if(e.getAttribute("role")==="listbox")for(const s of l)await this.click(s),await this.unhover(s);else throw nn().getElementError("Cannot select options on elements that are neither select nor listbox elements",e)}m(vI,"selectOptionsBase");async function j9(t,e,{skipClick:r=this.config.skipClick,skipAutoClose:n=this.config.skipAutoClose,initialSelectionStart:i,initialSelectionEnd:l}={}){t.disabled||(r||await this.click(t),i!==void 0&&Ip(t,i,l??i),await this.keyboard(e),n||await P9(this))}m(j9,"type");var uk=Symbol("files and value properties are mocked");function fb(t,e,r){r?Object.defineProperty(t,e,r):delete t[e]}m(fb,"restoreProperty");function B9(t,e){var r;(r=t[uk])===null||r===void 0||r.restore();const n=Object.getOwnPropertyDescriptor(t,"type"),i=Object.getOwnPropertyDescriptor(t,"value"),l=Object.getOwnPropertyDescriptor(t,"files");function c(){fb(t,"type",n),fb(t,"value",i),fb(t,"files",l)}m(c,"restore"),t[uk]={restore:c},Object.defineProperties(t,{files:{configurable:!0,get:m(()=>e,"get")},value:{configurable:!0,get:m(()=>e.length?`C:\\fakepath\\${e[0].name}`:"","get"),set(s){if(s==="")c();else{var p;i==null||(p=i.set)===null||p===void 0||p.call(t,s)}}},type:{configurable:!0,get:m(()=>"file","get"),set(s){s!=="file"&&(c(),t.type=s)}}})}m(B9,"setFiles");async function q9(t,e){const r=Gr(t,"label")?t.control:t;if(!r||!Gr(r,"input",{type:"file"}))throw new TypeError(`The ${r===t?"given":"associated"} ${r?.tagName} element does not accept file uploads`);if(Ba(t))return;const n=(Array.isArray(e)?e:[e]).filter(l=>!this.config.applyAccept||$9(l,r.accept)).slice(0,r.multiple?void 0:1),i=m(()=>{var l;n.length===((l=r.files)===null||l===void 0?void 0:l.length)&&n.every((c,s)=>{var p;return c===((p=r.files)===null||p===void 0?void 0:p.item(s))})||(B9(r,lx(ps(t),n)),this.dispatchUIEvent(r,"input"),this.dispatchUIEvent(r,"change"))},"fileDialog");r.addEventListener("fileDialog",i),await this.click(t),r.removeEventListener("fileDialog",i)}m(q9,"upload");function bg(t){return t.toLowerCase().replace(/(\.|\/)jpg\b/g,"$1jpeg")}m(bg,"normalize");function $9(t,e){if(!e)return!0;const r=["audio/*","image/*","video/*"];return bg(e).trim().split(/\s*,\s*/).some(n=>n.startsWith(".")?bg(t.name).endsWith(n):r.includes(n)?bg(t.type).startsWith(n.replace("*","")):bg(t.type)===n)}m($9,"isAcceptableFile");var hk={click:m9,dblClick:g9,tripleClick:y9,hover:_9,unhover:b9,tab:v9,keyboard:S9,copy:R9,cut:I9,paste:M9,pointer:k9,clear:N9,deselectOptions:z9,selectOptions:F9,type:j9,upload:q9};function V9(t){return nn().asyncWrapper(t)}m(V9,"wrapAsync");var U9={applyAccept:!0,autoModify:!0,delay:0,document:globalThis.document,keyboardMap:Ose,pointerMap:kse,pointerEventsCheck:pb.EachApiCall,skipAutoClose:!1,skipClick:!1,skipHover:!1,writeToClipboard:!1,advanceTimers:m(()=>Promise.resolve(),"advanceTimers")},zse={...U9,writeToClipboard:!0};function xI(t={},e=zse,r){const n=W9(t,r,e);return{...e,...t,document:n}}m(xI,"createConfig");function G9(t={}){const e=xI(t);hI(e.document),uI(ps(e.document).HTMLElement);var r;const n=(r=e.document.defaultView)!==null&&r!==void 0?r:globalThis.window;return K$(n),fx(e).api}m(G9,"setupMain");function to({keyboardState:t,pointerState:e,...r}={},n){const i=xI(r,U9,n);hI(i.document),uI(ps(i.document).HTMLElement);var l;const c=(l=e??t)!==null&&l!==void 0?l:new f9;return{api:fx(i,c).api,system:c}}m(to,"setupDirect");function H9(t){return fx({...this.config,...t},this.system).api}m(H9,"setupSub");function J9(t,e){function r(...n){return Mp(t,rs.Call),V9(()=>e.apply(t,n).then(async i=>(await zh(t.config),i)))}return m(r,"method"),Object.defineProperty(r,"name",{get:m(()=>e.name,"get")}),r}m(J9,"wrapAndBindImpl");function fx(t,e=new f9){const r={};return Object.assign(r,{config:t,dispatchEvent:cI.bind(r),dispatchUIEvent:G7.bind(r),system:e,levelRefs:{},...hk}),{instance:r,api:{...Object.fromEntries(Object.entries(hk).map(([n,i])=>[n,J9(r,i)])),setup:H9.bind(r)}}}m(fx,"createInstance");function W9(t,e,r){var n,i;return(i=(n=t.document)!==null&&n!==void 0?n:e&&K7(e))!==null&&i!==void 0?i:r.document}m(W9,"getDocument");var Z9={};Do(Z9,{clear:()=>K9,click:()=>Y9,copy:()=>X9,cut:()=>Q9,dblClick:()=>eV,deselectOptions:()=>tV,hover:()=>rV,keyboard:()=>nV,paste:()=>oV,pointer:()=>iV,selectOptions:()=>sV,tab:()=>hV,tripleClick:()=>aV,type:()=>lV,unhover:()=>cV,upload:()=>uV});function K9(t){return to().api.clear(t)}m(K9,"clear");function Y9(t,e={}){return to(e,t).api.click(t)}m(Y9,"click");function X9(t={}){return to(t).api.copy()}m(X9,"copy");function Q9(t={}){return to(t).api.cut()}m(Q9,"cut");function eV(t,e={}){return to(e).api.dblClick(t)}m(eV,"dblClick");function tV(t,e,r={}){return to(r).api.deselectOptions(t,e)}m(tV,"deselectOptions");function rV(t,e={}){return to(e).api.hover(t)}m(rV,"hover");async function nV(t,e={}){const{api:r,system:n}=to(e);return r.keyboard(t).then(()=>n)}m(nV,"keyboard");async function iV(t,e={}){const{api:r,system:n}=to(e);return r.pointer(t).then(()=>n)}m(iV,"pointer");function oV(t,e){return to(e).api.paste(t)}m(oV,"paste");function sV(t,e,r={}){return to(r).api.selectOptions(t,e)}m(sV,"selectOptions");function aV(t,e={}){return to(e).api.tripleClick(t)}m(aV,"tripleClick");function lV(t,e,r={}){return to(r,t).api.type(t,e,r)}m(lV,"type");function cV(t,e={}){const{api:r,system:n}=to(e);return n.pointer.setMousePosition({target:t}),r.unhover(t)}m(cV,"unhover");function uV(t,e,r={}){return to(r).api.upload(t,e)}m(uV,"upload");function hV(t={}){return to().api.tab(t)}m(hV,"tab");var dV={...Z9,setup:G9},P2=Pf({...Eq},{getKeys:m(t=>Object.keys(t).filter(e=>e!=="eventWrapper"),"getKeys"),intercept:m((t,e)=>e[0]==="fireEvent"||t.startsWith("find")||t.startsWith("waitFor"),"intercept")});P2.screen=new Proxy(P2.screen,{get(t,e,r){return typeof window<"u"&&globalThis.location?.href?.includes("viewMode=docs")&&oi.warn(Kr`
        You are using Testing Library's \`screen\` object while the story is rendered in docs mode. This will likely lead to issues, as multiple stories are rendered in the same page and therefore screen will potentially find multiple elements. Use the \`canvas\` utility from the story context instead, which will scope the queries to each story's canvas.

        More info: https://storybook.js.org/docs/writing-tests/interaction-testing?ref=error#querying-the-canvas
      `),Reflect.get(t,e,r)}});var{buildQueries:jse,configure:Bse,createEvent:qse,fireEvent:$se,findAllByAltText:Vse,findAllByDisplayValue:Use,findAllByLabelText:Gse,findAllByPlaceholderText:Hse,findAllByRole:Jse,findAllByTestId:Wse,findAllByText:Zse,findAllByTitle:Kse,findByAltText:Yse,findByDisplayValue:Xse,findByLabelText:Qse,findByPlaceholderText:eae,findByRole:tae,findByTestId:rae,findByText:nae,findByTitle:iae,getAllByAltText:oae,getAllByDisplayValue:sae,getAllByLabelText:aae,getAllByPlaceholderText:lae,getAllByRole:cae,getAllByTestId:uae,getAllByText:hae,getAllByTitle:dae,getByAltText:pae,getByDisplayValue:fae,getByLabelText:mae,getByPlaceholderText:gae,getByRole:yae,getByTestId:_ae,getByText:bae,getByTitle:vae,getConfig:xae,getDefaultNormalizer:wae,getElementError:Eae,getNodeText:Tae,getQueriesForElement:Sae,getRoles:Cae,getSuggestedQuery:Pae,isInaccessible:Aae,logDOM:Rae,logRoles:Iae,prettyDOM:Mae,queries:Oae,queryAllByAltText:kae,queryAllByAttribute:Lae,queryAllByDisplayValue:Dae,queryAllByLabelText:Nae,queryAllByPlaceholderText:Fae,queryAllByRole:zae,queryAllByTestId:jae,queryAllByText:Bae,queryAllByTitle:qae,queryByAltText:$ae,queryByAttribute:Vae,queryByDisplayValue:Uae,queryByLabelText:Gae,queryByPlaceholderText:Hae,queryByRole:Jae,queryByTestId:Wae,queryByText:Zae,queryByTitle:Kae,queryHelpers:Yae,screen:Xae,waitFor:Qae,waitForElementToBeRemoved:ele,within:pV,prettyFormat:tle}=P2,fV=dV,{userEvent:rle}=Pf({userEvent:dV},{intercept:!0,getKeys:m(t=>Object.keys(t).filter(e=>e!=="eventWrapper"),"getKeys")}),{expect:nle}=Pf({expect:vq},{getKeys:m((t,e)=>{if("constructor"in t&&t.constructor===Me){const r=["assert","__methods","__flags","_obj"],n=Object.keys(Object.getPrototypeOf(t)).filter(i=>!r.includes(i));return e>2?n:[...n,"not"]}return"any"in t?Object.keys(t).filter(r=>r!=="any"):Object.keys(t)},"getKeys"),mutate:!0,intercept:m(t=>t!=="expect","intercept")}),ile={mock:m(()=>{},"mock")},dk=!1,ole=m(t=>{const{parameters:e}=t;e?.actions?.disable||dk||(_R((r,n)=>{const i=r.getMockName();i!=="spy"&&i!=="vi.fn()"&&(!/^next\/.*::/.test(i)||["next/router::useRouter()","next/navigation::useRouter()","next/navigation::redirect","next/cache::","next/headers::cookies().set","next/headers::cookies().delete","next/headers::headers().set","next/headers::headers().delete"].some(l=>i.startsWith(l)))&&Ff(i)(n)}),dk=!0)},"logActionsWhenMockCalled"),sle=[ole],pk=m(()=>({...QF,...t6}),"default"),hv="backgrounds",ale={light:{name:"light",value:"#F8F8F8"},dark:{name:"dark",value:"#333"}},{document:Ys}=globalThis,lle=m(()=>globalThis?.matchMedia?!!globalThis.matchMedia("(prefers-reduced-motion: reduce)")?.matches:!1,"isReduceMotionEnabled"),fk=m(t=>{(Array.isArray(t)?t:[t]).forEach(cle)},"clearStyles"),cle=m(t=>{if(!Ys)return;const e=Ys.getElementById(t);e&&e.parentElement&&e.parentElement.removeChild(e)},"clearStyle"),ule=m((t,e)=>{if(!Ys)return;const r=Ys.getElementById(t);if(r)r.innerHTML!==e&&(r.innerHTML=e);else{const n=Ys.createElement("style");n.setAttribute("id",t),n.innerHTML=e,Ys.head.appendChild(n)}},"addGridStyle"),hle=m((t,e,r)=>{if(!Ys)return;const n=Ys.getElementById(t);if(n)n.innerHTML!==e&&(n.innerHTML=e);else{const i=Ys.createElement("style");i.setAttribute("id",t),i.innerHTML=e;const l=`addon-backgrounds-grid${r?`-docs-${r}`:""}`,c=Ys.getElementById(l);c?c.parentElement?.insertBefore(i,c):Ys.head.appendChild(i)}},"addBackgroundStyle"),dle={cellSize:100,cellAmount:10,opacity:.8},mk="addon-backgrounds",gk="addon-backgrounds-grid",ple=lle()?"":"transition: background-color 0.3s;",fle=m((t,e)=>{const{globals:r={},parameters:n={},viewMode:i,id:l}=e,{options:c=ale,disable:s,grid:p=dle}=n[hv]||{},g=r[hv]||{},_=typeof g=="string"?g:g?.value,x=_?c[_]:void 0,P=typeof x=="string"?x:x?.value||"transparent",A=typeof g=="string"?!1:g.grid||!1,M=!!x&&!s,F=i==="docs"?`#anchor--${l} .docs-story`:".sb-show-main",z=i==="docs"?`#anchor--${l} .docs-story`:".sb-show-main",j=n.layout===void 0||n.layout==="padded",$=i==="docs"?20:j?16:0,{cellAmount:W,cellSize:X,opacity:te,offsetX:ne=$,offsetY:Z=$}=p,U=i==="docs"?`${mk}-docs-${l}`:`${mk}-color`,K=i==="docs"?l:null;eu(()=>{const ue=`
    ${F} {
      background: ${P} !important;
      ${ple}
      }`;if(!M){fk(U);return}hle(U,ue,K)},[F,U,K,M,P]);const he=i==="docs"?`${gk}-docs-${l}`:`${gk}`;return eu(()=>{if(!A){fk(he);return}const ue=[`${X*W}px ${X*W}px`,`${X*W}px ${X*W}px`,`${X}px ${X}px`,`${X}px ${X}px`].join(", "),we=`
        ${z} {
          background-size: ${ue} !important;
          background-position: ${ne}px ${Z}px, ${ne}px ${Z}px, ${ne}px ${Z}px, ${ne}px ${Z}px !important;
          background-blend-mode: difference !important;
          background-image: linear-gradient(rgba(130, 130, 130, ${te}) 1px, transparent 1px),
           linear-gradient(90deg, rgba(130, 130, 130, ${te}) 1px, transparent 1px),
           linear-gradient(rgba(130, 130, 130, ${te/2}) 1px, transparent 1px),
           linear-gradient(90deg, rgba(130, 130, 130, ${te/2}) 1px, transparent 1px) !important;
        }
      `;ule(he,we)},[W,X,z,he,A,ne,Z,te]),t()},"withBackgroundAndGrid"),mle=globalThis.FEATURES?.backgrounds?[fle]:[],gle={[hv]:{grid:{cellSize:20,opacity:.5,cellAmount:5},disable:!1}},yle={[hv]:{value:void 0,grid:!1}},yk=m(()=>({decorators:mle,parameters:gle,initialGlobals:yle}),"default"),{step:_le}=Pf({step:m(async(t,e,r)=>e(r),"step")},{intercept:!0}),_k=m(()=>({parameters:{throwPlayFunctionExceptions:!1},runStep:_le}),"default"),mx="storybook/highlight",ble=`${mx}/add`,vle=`${mx}/remove`,xle=`${mx}/reset`,wle=`${mx}/scroll-into-view`,bk=2147483647,Mc=28,vk={chevronLeft:["M9.10355 10.1464C9.29882 10.3417 9.29882 10.6583 9.10355 10.8536C8.90829 11.0488 8.59171 11.0488 8.39645 10.8536L4.89645 7.35355C4.70118 7.15829 4.70118 6.84171 4.89645 6.64645L8.39645 3.14645C8.59171 2.95118 8.90829 2.95118 9.10355 3.14645C9.29882 3.34171 9.29882 3.65829 9.10355 3.85355L5.95711 7L9.10355 10.1464Z"],chevronRight:["M4.89645 10.1464C4.70118 10.3417 4.70118 10.6583 4.89645 10.8536C5.09171 11.0488 5.40829 11.0488 5.60355 10.8536L9.10355 7.35355C9.29882 7.15829 9.29882 6.84171 9.10355 6.64645L5.60355 3.14645C5.40829 2.95118 5.09171 2.95118 4.89645 3.14645C4.70118 3.34171 4.70118 3.65829 4.89645 3.85355L8.04289 7L4.89645 10.1464Z"],info:["M7 5.5a.5.5 0 01.5.5v4a.5.5 0 01-1 0V6a.5.5 0 01.5-.5zM7 4.5A.75.75 0 107 3a.75.75 0 000 1.5z","M7 14A7 7 0 107 0a7 7 0 000 14zm0-1A6 6 0 107 1a6 6 0 000 12z"],shareAlt:["M2 1.004a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1v-4.5a.5.5 0 00-1 0v4.5H2v-10h4.5a.5.5 0 000-1H2z","M7.354 7.357L12 2.711v1.793a.5.5 0 001 0v-3a.5.5 0 00-.5-.5h-3a.5.5 0 100 1h1.793L6.646 6.65a.5.5 0 10.708.707z"]},Ele="svg,path,rect,circle,line,polyline,polygon,ellipse,text".split(","),Oi=m((t,e={},r)=>{const n=Ele.includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return Object.entries(e).forEach(([i,l])=>{/[A-Z]/.test(i)?(i==="onClick"&&(n.addEventListener("click",l),n.addEventListener("keydown",c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),l())})),i==="onMouseEnter"&&n.addEventListener("mouseenter",l),i==="onMouseLeave"&&n.addEventListener("mouseleave",l)):n.setAttribute(i,l)}),r?.forEach(i=>{if(!(i==null||i===!1))try{n.appendChild(i)}catch{n.appendChild(document.createTextNode(String(i)))}}),n},"createElement"),M0=m(t=>vk[t]&&Oi("svg",{width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},vk[t].map(e=>Oi("path",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd",d:e}))),"createIcon"),Tle=m(t=>{if("elements"in t){const{elements:n,color:i,style:l}=t;return{id:void 0,priority:0,selectors:n,styles:{outline:`2px ${l} ${i}`,outlineOffset:"2px",boxShadow:"0 0 0 6px rgba(255,255,255,0.6)"},menu:void 0}}const{menu:e,...r}=t;return{id:void 0,priority:0,styles:{outline:"2px dashed #029cfd"},...r,menu:Array.isArray(e)?e.every(Array.isArray)?e:[e]:void 0}},"normalizeOptions"),Sle=m(t=>t instanceof Function,"isFunction"),tg=new Map,Ju=new Map,O0=new Map,dl=m(t=>{const e=Symbol();return Ju.set(e,[]),tg.set(e,t),{get:m(()=>tg.get(e),"get"),set:m(c=>{const s=tg.get(e),p=Sle(c)?c(s):c;p!==s&&(tg.set(e,p),Ju.get(e)?.forEach(g=>{O0.get(g)?.(),O0.set(g,g(p))}))},"set"),subscribe:m(c=>(Ju.get(e)?.push(c),()=>{const s=Ju.get(e);s&&Ju.set(e,s.filter(p=>p!==c))}),"subscribe"),teardown:m(()=>{Ju.get(e)?.forEach(c=>{O0.get(c)?.(),O0.delete(c)}),Ju.delete(e),tg.delete(e)},"teardown")}},"useStore"),xk=m(t=>{const e=document.getElementById("storybook-root"),r=new Map;for(const n of t){const{priority:i=0}=n;for(const l of n.selectors){const c=[...document.querySelectorAll(`:is(${l}):not([id^="storybook-"], [id^="storybook-"] *, [class^="sb-"], [class^="sb-"] *)`),...e?.querySelectorAll(l)||[]];for(const s of c){const p=r.get(s);(!p||p.priority<=i)&&r.set(s,{...n,priority:i,selectors:Array.from(new Set((p?.selectors||[]).concat(l)))})}}}return r},"mapElements"),Cle=m(t=>Array.from(t.entries()).map(([e,{selectors:r,styles:n,hoverStyles:i,focusStyles:l,menu:c}])=>{const{top:s,left:p,width:g,height:_}=e.getBoundingClientRect(),{position:x}=getComputedStyle(e);return{element:e,selectors:r,styles:n,hoverStyles:i,focusStyles:l,menu:c,top:x==="fixed"?s:s+window.scrollY,left:x==="fixed"?p:p+window.scrollX,width:g,height:_}}).sort((e,r)=>r.width*r.height-e.width*e.height),"mapBoxes"),wk=m((t,e)=>{const r=t.getBoundingClientRect(),{x:n,y:i}=e;return r?.top&&r?.left&&n>=r.left&&n<=r.left+r.width&&i>=r.top&&i<=r.top+r.height},"isOverMenu"),Ek=m((t,e,r)=>{if(!e||!r)return!1;let{left:n,top:i,width:l,height:c}=t;c<Mc&&(i=i-Math.round((Mc-c)/2),c=Mc),l<Mc&&(n=n-Math.round((Mc-l)/2),l=Mc),e.style.position==="fixed"&&(n+=window.scrollX,i+=window.scrollY);const{x:s,y:p}=r;return s>=n&&s<=n+l&&p>=i&&p<=i+c},"isTargeted"),Ple=m((t,e,r={})=>{const{x:n,y:i}=e,{margin:l=5,topOffset:c=0,centered:s=!1}=r,{scrollX:p,scrollY:g,innerHeight:_,innerWidth:x}=window,P=Math.min(t.style.position==="fixed"?i-g:i,_-t.clientHeight-l-c+g),A=s?t.clientWidth/2:0,M=t.style.position==="fixed"?Math.max(Math.min(n-p,x-A-l),A+l):Math.max(Math.min(n,x-A-l+p),A+l+p);Object.assign(t.style,{...M!==n&&{left:`${M}px`},...P!==i&&{top:`${P}px`}})},"keepInViewport"),Tk=m(t=>{window.HTMLElement.prototype.hasOwnProperty("showPopover")&&t.showPopover()},"showPopover"),Ale=m(t=>{window.HTMLElement.prototype.hasOwnProperty("showPopover")&&t.hidePopover()},"hidePopover"),Rle=m(t=>({top:t.top,left:t.left,width:t.width,height:t.height,selectors:t.selectors,element:{attributes:Object.fromEntries(Array.from(t.element.attributes).map(e=>[e.name,e.value])),localName:t.element.localName,tagName:t.element.tagName,outerHTML:t.element.outerHTML}}),"getEventDetails"),Fn="storybook-highlights-menu",Sk="storybook-highlights-root",Ile="storybook-root",Mle=m(t=>{if(globalThis.__STORYBOOK_HIGHLIGHT_INITIALIZED)return;globalThis.__STORYBOOK_HIGHLIGHT_INITIALIZED=!0;const{document:e}=globalThis,r=dl([]),n=dl(new Map),i=dl([]),l=dl(),c=dl(),s=dl([]),p=dl([]),g=dl(),_=dl();let x=e.getElementById(Sk);r.subscribe(()=>{x||(x=Oi("div",{id:Sk}),e.body.appendChild(x))}),r.subscribe(Z=>{const U=e.getElementById(Ile);if(!U)return;n.set(xk(Z));const K=new MutationObserver(()=>n.set(xk(Z)));return K.observe(U,{subtree:!0,childList:!0}),()=>{K.disconnect()}}),n.subscribe(Z=>{const U=m(()=>requestAnimationFrame(()=>i.set(Cle(Z))),"updateBoxes"),K=new ResizeObserver(U);K.observe(e.body),Array.from(Z.keys()).forEach(ue=>K.observe(ue));const he=Array.from(e.body.querySelectorAll("*")).filter(ue=>{const{overflow:we,overflowX:Ie,overflowY:ee}=window.getComputedStyle(ue);return["auto","scroll"].some(fe=>[we,Ie,ee].includes(fe))});return he.forEach(ue=>ue.addEventListener("scroll",U)),()=>{K.disconnect(),he.forEach(ue=>ue.removeEventListener("scroll",U))}}),n.subscribe(Z=>{const U=Array.from(Z.keys()).filter(({style:he})=>he.position==="sticky"),K=m(()=>requestAnimationFrame(()=>{i.set(he=>he.map(ue=>{if(U.includes(ue.element)){const{top:we,left:Ie}=ue.element.getBoundingClientRect();return{...ue,top:we+window.scrollY,left:Ie+window.scrollX}}return ue}))}),"updateBoxes");return e.addEventListener("scroll",K),()=>e.removeEventListener("scroll",K)}),n.subscribe(Z=>{s.set(U=>U.filter(({element:K})=>Z.has(K)))}),s.subscribe(Z=>{Z.length?(_.set(U=>Z.some(K=>K.element===U?.element)?U:void 0),g.set(U=>Z.some(K=>K.element===U?.element)?U:void 0)):(_.set(void 0),g.set(void 0),l.set(void 0))});const P=new Map(new Map);r.subscribe(Z=>{Z.forEach(({keyframes:U})=>{if(U){let K=P.get(U);K||(K=e.createElement("style"),K.setAttribute("data-highlight","keyframes"),P.set(U,K),e.head.appendChild(K)),K.innerHTML=U}}),P.forEach((U,K)=>{Z.some(he=>he.keyframes===K)||(U.remove(),P.delete(K))})});const A=new Map(new Map);i.subscribe(Z=>{Z.forEach(U=>{let K=A.get(U.element);if(x&&!K){const he={popover:"manual","data-highlight-dimensions":`w${U.width.toFixed(0)}h${U.height.toFixed(0)}`,"data-highlight-coordinates":`x${U.left.toFixed(0)}y${U.top.toFixed(0)}`};K=x.appendChild(Oi("div",he,[Oi("div")])),A.set(U.element,K)}}),A.forEach((U,K)=>{Z.some(({element:he})=>he===K)||(U.remove(),A.delete(K))})}),i.subscribe(Z=>{const U=Z.filter(he=>he.menu);if(!U.length)return;const K=m(he=>{requestAnimationFrame(()=>{const ue=e.getElementById(Fn),we={x:he.pageX,y:he.pageY};if(ue&&!wk(ue,we)){const Ie=U.filter(ee=>{const fe=A.get(ee.element);return Ek(ee,fe,we)});l.set(Ie.length?we:void 0),s.set(Ie)}})},"onClick");return e.addEventListener("click",K),()=>e.removeEventListener("click",K)});const M=m(()=>{const Z=e.getElementById(Fn),U=c.get();!U||Z&&wk(Z,U)||p.set(K=>{const he=i.get().filter(ee=>{const fe=A.get(ee.element);return Ek(ee,fe,U)}),ue=K.filter(ee=>he.includes(ee)),we=he.filter(ee=>!K.includes(ee)),Ie=K.length-ue.length;return we.length||Ie?[...ue,...we]:K})},"updateHovered");c.subscribe(M),i.subscribe(M);const F=m(()=>{const Z=_.get(),U=Z?[Z]:s.get(),K=U.length===1?U[0]:g.get(),he=l.get()!==void 0;i.get().forEach(ue=>{const we=A.get(ue.element);if(we){const Ie=K===ue,ee=he?K?Ie:U.includes(ue):p.get()?.includes(ue);Object.assign(we.style,{animation:"none",background:"transparent",border:"none",boxSizing:"border-box",outline:"none",outlineOffset:"0px",...ue.styles,...ee?ue.hoverStyles:{},...Ie?ue.focusStyles:{},position:getComputedStyle(ue.element).position==="fixed"?"fixed":"absolute",zIndex:bk-10,top:`${ue.top}px`,left:`${ue.left}px`,width:`${ue.width}px`,height:`${ue.height}px`,margin:0,padding:0,cursor:ue.menu&&ee?"pointer":"default",pointerEvents:ue.menu?"auto":"none",display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible"}),Object.assign(we.children[0].style,{width:"100%",height:"100%",minHeight:`${Mc}px`,minWidth:`${Mc}px`,boxSizing:"content-box",padding:we.style.outlineWidth||"0px"}),Tk(we)}})},"updateBoxStyles");i.subscribe(F),s.subscribe(F),p.subscribe(F),g.subscribe(F),_.subscribe(F);const z=m(()=>{if(!x)return;let Z=e.getElementById(Fn);if(Z)Z.innerHTML="";else{const ue={id:Fn,popover:"manual"};Z=x.appendChild(Oi("div",ue)),x.appendChild(Oi("style",{},[`
            #${Fn} {
              position: absolute;
              z-index: ${bk};
              width: 300px;
              padding: 0px;
              margin: 15px 0 0 0;
              transform: translateX(-50%);
              font-family: "Nunito Sans", -apple-system, ".SFNSText-Regular", "San Francisco", BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Helvetica, Arial, sans-serif;
              font-size: 12px;
              background: white;
              border: none;
              border-radius: 6px;
              box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.05), 0 5px 15px 0 rgba(0, 0, 0, 0.1);
              color: #2E3438;
            }
            #${Fn} ul {
              list-style: none;
              margin: 0;
              padding: 0;
            }
            #${Fn} > ul {
              max-height: 300px;
              overflow-y: auto;
              padding: 4px 0;
            }
            #${Fn} li {
              padding: 0 4px;
              margin: 0;
            }
            #${Fn} li > :not(ul) {
              display: flex;
              padding: 8px;
              margin: 0;
              align-items: center;
              gap: 8px;
              border-radius: 4px;
            }
            #${Fn} button {
              width: 100%;
              border: 0;
              background: transparent;
              color: inherit;
              text-align: left;
              font-family: inherit;
              font-size: inherit;
            }
            #${Fn} button:focus-visible {
              outline-color: #029CFD;
            }
            #${Fn} button:hover {
              background: rgba(2, 156, 253, 0.07);
              color: #029CFD;
              cursor: pointer;
            }
            #${Fn} li code {
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
              line-height: 16px;
              font-size: 11px;
            }
            #${Fn} li svg {
              flex-shrink: 0;
              margin: 1px;
              color: #73828C;
            }
            #${Fn} li > button:hover svg, #${Fn} li > button:focus-visible svg {
              color: #029CFD;
            }
            #${Fn} .element-list li svg {
              display: none;
            }
            #${Fn} li.selectable svg, #${Fn} li.selected svg {
              display: block;
            }
            #${Fn} .menu-list {
              border-top: 1px solid rgba(38, 85, 115, 0.15);
            }
            #${Fn} .menu-list > li:not(:last-child) {
              padding-bottom: 4px;
              margin-bottom: 4px;
              border-bottom: 1px solid rgba(38, 85, 115, 0.15);
            }
            #${Fn} .menu-items, #${Fn} .menu-items li {
              padding: 0;
            }
            #${Fn} .menu-item {
              display: flex;
            }
            #${Fn} .menu-item-content {
              display: flex;
              flex-direction: column;
              flex-grow: 1;
            }
          `]))}const U=_.get(),K=U?[U]:s.get();if(K.length&&(Z.style.position=getComputedStyle(K[0].element).position==="fixed"?"fixed":"absolute",Z.appendChild(Oi("ul",{class:"element-list"},K.map(ue=>{const we=K.length>1&&!!ue.menu?.some(fe=>fe.some(ve=>!ve.selectors||ve.selectors.some(xe=>ue.selectors.includes(xe)))),Ie=we?{class:"selectable",onClick:m(()=>_.set(ue),"onClick"),onMouseEnter:m(()=>g.set(ue),"onMouseEnter"),onMouseLeave:m(()=>g.set(void 0),"onMouseLeave")}:U?{class:"selected",onClick:m(()=>_.set(void 0),"onClick")}:{},ee=we||U;return Oi("li",Ie,[Oi(ee?"button":"div",ee?{type:"button"}:{},[U?M0("chevronLeft"):null,Oi("code",{},[ue.element.outerHTML]),we?M0("chevronRight"):null])])})))),_.get()||s.get().length===1){const ue=_.get()||s.get()[0],we=ue.menu?.filter(Ie=>Ie.some(ee=>!ee.selectors||ee.selectors.some(fe=>ue.selectors.includes(fe))));we?.length&&Z.appendChild(Oi("ul",{class:"menu-list"},we.map(Ie=>Oi("li",{},[Oi("ul",{class:"menu-items"},Ie.map(({id:ee,title:fe,description:ve,iconLeft:xe,iconRight:Xe,clickEvent:Ke})=>{const Ze=Ke&&(()=>t.emit(Ke,ee,Rle(ue)));return Oi("li",{},[Oi(Ze?"button":"div",Ze?{class:"menu-item",type:"button",onClick:Ze}:{class:"menu-item"},[xe?M0(xe):null,Oi("div",{class:"menu-item-content"},[Oi(ve?"strong":"span",{},[fe]),ve&&Oi("span",{},[ve])]),Xe?M0(Xe):null])])}))]))))}const he=l.get();he?(Object.assign(Z.style,{display:"block",left:`${Z.style.position==="fixed"?he.x-window.scrollX:he.x}px`,top:`${Z.style.position==="fixed"?he.y-window.scrollY:he.y}px`}),Tk(Z),requestAnimationFrame(()=>Ple(Z,he,{topOffset:15,centered:!0}))):(Ale(Z),Object.assign(Z.style,{display:"none"}))},"renderMenu");s.subscribe(z),_.subscribe(z);const j=m(Z=>{const U=Tle(Z);r.set(K=>{const he=U.id?K.filter(ue=>ue.id!==U.id):K;return U.selectors?.length?[...he,U]:he})},"addHighlight"),$=m(Z=>{Z&&r.set(U=>U.filter(K=>K.id!==Z))},"removeHighlight"),W=m(()=>{r.set([]),n.set(new Map),i.set([]),l.set(void 0),c.set(void 0),s.set([]),p.set([]),g.set(void 0),_.set(void 0)},"resetState");let X;const te=m((Z,U)=>{const K="scrollIntoView-highlight";clearTimeout(X),$(K);const he=e.querySelector(Z);if(!he){console.warn(`Cannot scroll into view: ${Z} not found`);return}he.scrollIntoView({behavior:"smooth",block:"center",...U});const ue=`kf-${Math.random().toString(36).substring(2,15)}`;r.set(we=>[...we,{id:K,priority:1e3,selectors:[Z],styles:{outline:"2px solid #1EA7FD",outlineOffset:"-1px",animation:`${ue} 3s linear forwards`},keyframes:`@keyframes ${ue} {
          0% { outline: 2px solid #1EA7FD; }
          20% { outline: 2px solid #1EA7FD00; }
          40% { outline: 2px solid #1EA7FD; }
          60% { outline: 2px solid #1EA7FD00; }
          80% { outline: 2px solid #1EA7FD; }
          100% { outline: 2px solid #1EA7FD00; }
        }`}]),X=setTimeout(()=>$(K),3500)},"scrollIntoView"),ne=m(Z=>{requestAnimationFrame(()=>c.set({x:Z.pageX,y:Z.pageY}))},"onMouseMove");e.body.addEventListener("mousemove",ne),t.on(ble,j),t.on(vle,$),t.on(xle,W),t.on(wle,te),t.on(Ih,({newPhase:Z})=>{Z==="loading"&&W()})},"useHighlights");globalThis?.FEATURES?.highlight&&ks?.ready&&ks.ready().then(Mle);var Ck=m(()=>({}),"default"),Ole="measureEnabled";function wI(){const t=$t.document.documentElement,e=Math.max(t.scrollHeight,t.offsetHeight);return{width:Math.max(t.scrollWidth,t.offsetWidth),height:e}}m(wI,"getDocumentWidthAndHeight");function mV(){const t=$t.document.createElement("canvas");t.id="storybook-addon-measure";const e=t.getContext("2d");Oa(e!=null);const{width:r,height:n}=wI();return dv(t,e,{width:r,height:n}),t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.zIndex="2147483647",t.style.pointerEvents="none",$t.document.body.appendChild(t),{canvas:t,context:e,width:r,height:n}}m(mV,"createCanvas");function dv(t,e,{width:r,height:n}){t.style.width=`${r}px`,t.style.height=`${n}px`;const i=$t.window.devicePixelRatio;t.width=Math.floor(r*i),t.height=Math.floor(n*i),e.scale(i,i)}m(dv,"setCanvasWidthAndHeight");var Li={};function gV(){Li.canvas||(Li=mV())}m(gV,"init");function EI(){Li.context&&Li.context.clearRect(0,0,Li.width??0,Li.height??0)}m(EI,"clear");function yV(t){EI(),t(Li.context)}m(yV,"draw");function _V(){Oa(Li.canvas),Oa(Li.context),dv(Li.canvas,Li.context,{width:0,height:0});const{width:t,height:e}=wI();dv(Li.canvas,Li.context,{width:t,height:e}),Li.width=t,Li.height=e}m(_V,"rescale");function bV(){Li.canvas&&(EI(),Li.canvas.parentNode?.removeChild(Li.canvas),Li={})}m(bV,"destroy");var cp={margin:"#f6b26b",border:"#ffe599",padding:"#93c47d",content:"#6fa8dc",text:"#232020"},Cl=6;function A2(t,{x:e,y:r,w:n,h:i,r:l}){e=e-n/2,r=r-i/2,n<2*l&&(l=n/2),i<2*l&&(l=i/2),t.beginPath(),t.moveTo(e+l,r),t.arcTo(e+n,r,e+n,r+i,l),t.arcTo(e+n,r+i,e,r+i,l),t.arcTo(e,r+i,e,r,l),t.arcTo(e,r,e+n,r,l),t.closePath()}m(A2,"roundedRect");function vV(t,{padding:e,border:r,width:n,height:i,top:l,left:c}){const s=n-r.left-r.right-e.left-e.right,p=i-e.top-e.bottom-r.top-r.bottom;let g=c+r.left+e.left,_=l+r.top+e.top;return t==="top"?g+=s/2:t==="right"?(g+=s,_+=p/2):t==="bottom"?(g+=s/2,_+=p):t==="left"?_+=p/2:t==="center"&&(g+=s/2,_+=p/2),{x:g,y:_}}m(vV,"positionCoordinate");function xV(t,e,{margin:r,border:n,padding:i},l,c){let s=m(P=>0,"shift"),p=0,g=0;const _=c?1:.5,x=c?l*2:0;return t==="padding"?s=m(P=>i[P]*_+x,"shift"):t==="border"?s=m(P=>i[P]+n[P]*_+x,"shift"):t==="margin"&&(s=m(P=>i[P]+n[P]+r[P]*_+x,"shift")),e==="top"?g=-s("top"):e==="right"?p=s("right"):e==="bottom"?g=s("bottom"):e==="left"&&(p=-s("left")),{offsetX:p,offsetY:g}}m(xV,"offset");function wV(t,e){return Math.abs(t.x-e.x)<Math.abs(t.w+e.w)/2&&Math.abs(t.y-e.y)<Math.abs(t.h+e.h)/2}m(wV,"collide");function EV(t,e,r){return t==="top"?e.y=r.y-r.h-Cl:t==="right"?e.x=r.x+r.w/2+Cl+e.w/2:t==="bottom"?e.y=r.y+r.h+Cl:t==="left"&&(e.x=r.x-r.w/2-Cl-e.w/2),{x:e.x,y:e.y}}m(EV,"overlapAdjustment");function TI(t,e,{x:r,y:n,w:i,h:l},c){return A2(t,{x:r,y:n,w:i,h:l,r:3}),t.fillStyle=`${cp[e]}dd`,t.fill(),t.strokeStyle=cp[e],t.stroke(),t.fillStyle=cp.text,t.fillText(c,r,n),A2(t,{x:r,y:n,w:i,h:l,r:3}),t.fillStyle=`${cp[e]}dd`,t.fill(),t.strokeStyle=cp[e],t.stroke(),t.fillStyle=cp.text,t.fillText(c,r,n),{x:r,y:n,w:i,h:l}}m(TI,"textWithRect");function SI(t,e){t.font="600 12px monospace",t.textBaseline="middle",t.textAlign="center";const r=t.measureText(e),n=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent,i=r.width+Cl*2,l=n+Cl*2;return{w:i,h:l}}m(SI,"configureText");function TV(t,e,{type:r,position:n="center",text:i},l,c=!1){let{x:s,y:p}=vV(n,e);const{offsetX:g,offsetY:_}=xV(r,n,e,Cl+1,c);s+=g,p+=_;const{w:x,h:P}=SI(t,i);if(l&&wV({x:s,y:p,w:x,h:P},l)){const A=EV(n,{x:s,y:p,w:x},l);s=A.x,p=A.y}return TI(t,r,{x:s,y:p,w:x,h:P},i)}m(TV,"drawLabel");function SV(t,{w:e,h:r}){const n=e*.5+Cl,i=r*.5+Cl;return{offsetX:(t.x==="left"?-1:1)*n,offsetY:(t.y==="top"?-1:1)*i}}m(SV,"floatingOffset");function CV(t,e,{type:r,text:n}){const{floatingAlignment:i,extremities:l}=e;let c=l[i.x],s=l[i.y];const{w:p,h:g}=SI(t,n),{offsetX:_,offsetY:x}=SV(i,{w:p,h:g});return c+=_,s+=x,TI(t,r,{x:c,y:s,w:p,h:g},n)}m(CV,"drawFloatingLabel");function xp(t,e,r,n){const i=[];r.forEach((l,c)=>{const s=n&&l.position==="center"?CV(t,e,l):TV(t,e,l,i[c-1],n);i[c]=s})}m(xp,"drawStack");function PV(t,e,r,n){const i=r.reduce((l,c)=>(Object.prototype.hasOwnProperty.call(l,c.position)||(l[c.position]=[]),l[c.position]?.push(c),l),{});i.top&&xp(t,e,i.top,n),i.right&&xp(t,e,i.right,n),i.bottom&&xp(t,e,i.bottom,n),i.left&&xp(t,e,i.left,n),i.center&&xp(t,e,i.center,n)}m(PV,"labelStacks");var gx={margin:"#f6b26ba8",border:"#ffe599a8",padding:"#93c47d8c",content:"#6fa8dca8"},Pk=30;function Qo(t){return parseInt(t.replace("px",""),10)}m(Qo,"pxToNumber");function lh(t){return Number.isInteger(t)?t:t.toFixed(2)}m(lh,"round");function yx(t){return t.filter(e=>e.text!==0&&e.text!=="0")}m(yx,"filterZeroValues");function AV(t){const e={top:$t.window.scrollY,bottom:$t.window.scrollY+$t.window.innerHeight,left:$t.window.scrollX,right:$t.window.scrollX+$t.window.innerWidth},r={top:Math.abs(e.top-t.top),bottom:Math.abs(e.bottom-t.bottom),left:Math.abs(e.left-t.left),right:Math.abs(e.right-t.right)};return{x:r.left>r.right?"left":"right",y:r.top>r.bottom?"top":"bottom"}}m(AV,"floatingAlignment");function RV(t){const e=$t.getComputedStyle(t);let{top:r,left:n,right:i,bottom:l,width:c,height:s}=t.getBoundingClientRect();const{marginTop:p,marginBottom:g,marginLeft:_,marginRight:x,paddingTop:P,paddingBottom:A,paddingLeft:M,paddingRight:F,borderBottomWidth:z,borderTopWidth:j,borderLeftWidth:$,borderRightWidth:W}=e;r=r+$t.window.scrollY,n=n+$t.window.scrollX,l=l+$t.window.scrollY,i=i+$t.window.scrollX;const X={top:Qo(p),bottom:Qo(g),left:Qo(_),right:Qo(x)},te={top:Qo(P),bottom:Qo(A),left:Qo(M),right:Qo(F)},ne={top:Qo(j),bottom:Qo(z),left:Qo($),right:Qo(W)},Z={top:r-X.top,bottom:l+X.bottom,left:n-X.left,right:i+X.right};return{margin:X,padding:te,border:ne,top:r,left:n,bottom:l,right:i,width:c,height:s,extremities:Z,floatingAlignment:AV(Z)}}m(RV,"measureElement");function IV(t,{margin:e,width:r,height:n,top:i,left:l,bottom:c,right:s}){const p=n+e.bottom+e.top;t.fillStyle=gx.margin,t.fillRect(l,i-e.top,r,e.top),t.fillRect(s,i-e.top,e.right,p),t.fillRect(l,c,r,e.bottom),t.fillRect(l-e.left,i-e.top,e.left,p);const g=[{type:"margin",text:lh(e.top),position:"top"},{type:"margin",text:lh(e.right),position:"right"},{type:"margin",text:lh(e.bottom),position:"bottom"},{type:"margin",text:lh(e.left),position:"left"}];return yx(g)}m(IV,"drawMargin");function MV(t,{padding:e,border:r,width:n,height:i,top:l,left:c,bottom:s,right:p}){const g=n-r.left-r.right,_=i-e.top-e.bottom-r.top-r.bottom;t.fillStyle=gx.padding,t.fillRect(c+r.left,l+r.top,g,e.top),t.fillRect(p-e.right-r.right,l+e.top+r.top,e.right,_),t.fillRect(c+r.left,s-e.bottom-r.bottom,g,e.bottom),t.fillRect(c+r.left,l+e.top+r.top,e.left,_);const x=[{type:"padding",text:e.top,position:"top"},{type:"padding",text:e.right,position:"right"},{type:"padding",text:e.bottom,position:"bottom"},{type:"padding",text:e.left,position:"left"}];return yx(x)}m(MV,"drawPadding");function OV(t,{border:e,width:r,height:n,top:i,left:l,bottom:c,right:s}){const p=n-e.top-e.bottom;t.fillStyle=gx.border,t.fillRect(l,i,r,e.top),t.fillRect(l,c-e.bottom,r,e.bottom),t.fillRect(l,i+e.top,e.left,p),t.fillRect(s-e.right,i+e.top,e.right,p);const g=[{type:"border",text:e.top,position:"top"},{type:"border",text:e.right,position:"right"},{type:"border",text:e.bottom,position:"bottom"},{type:"border",text:e.left,position:"left"}];return yx(g)}m(OV,"drawBorder");function kV(t,{padding:e,border:r,width:n,height:i,top:l,left:c}){const s=n-r.left-r.right-e.left-e.right,p=i-e.top-e.bottom-r.top-r.bottom;return t.fillStyle=gx.content,t.fillRect(c+r.left+e.left,l+r.top+e.top,s,p),[{type:"content",position:"center",text:`${lh(s)} x ${lh(p)}`}]}m(kV,"drawContent");function LV(t){return e=>{if(t&&e){const r=RV(t),n=IV(e,r),i=MV(e,r),l=OV(e,r),c=kV(e,r),s=r.width<=Pk*3||r.height<=Pk;PV(e,r,[...c,...i,...l,...n],s)}}}m(LV,"drawBoxModel");function DV(t){yV(LV(t))}m(DV,"drawSelectedElement");var kle=m((t,e)=>{const r=$t.document.elementFromPoint(t,e),n=m(l=>{if(l&&l.shadowRoot){const c=l.shadowRoot.elementFromPoint(t,e);return l.isEqualNode(c)?l:c.shadowRoot?n(c):c}return l},"crawlShadows");return n(r)||r},"deepElementFromPoint"),Ak,k0={x:0,y:0};function R2(t,e){Ak=kle(t,e),DV(Ak)}m(R2,"findAndDrawElement");var Lle=m((t,e)=>{const{measureEnabled:r}=e.globals||{};return eu(()=>{if(typeof globalThis.document>"u")return;const n=m(i=>{window.requestAnimationFrame(()=>{i.stopPropagation(),k0.x=i.clientX,k0.y=i.clientY})},"onPointerMove");return globalThis.document.addEventListener("pointermove",n),()=>{globalThis.document.removeEventListener("pointermove",n)}},[]),eu(()=>{const n=m(l=>{window.requestAnimationFrame(()=>{l.stopPropagation(),R2(l.clientX,l.clientY)})},"onPointerOver"),i=m(()=>{window.requestAnimationFrame(()=>{_V()})},"onResize");return e.viewMode==="story"&&r&&(globalThis.document.addEventListener("pointerover",n),gV(),globalThis.window.addEventListener("resize",i),R2(k0.x,k0.y)),()=>{globalThis.window.removeEventListener("resize",i),bV()}},[r,e.viewMode]),t()},"withMeasure"),Dle=globalThis.FEATURES?.measure?[Lle]:[],Nle={[Ole]:!1},Rk=m(()=>({decorators:Dle,initialGlobals:Nle}),"default"),NV="outline",Ik=m(t=>{(Array.isArray(t)?t:[t]).forEach(Fle)},"clearStyles"),Fle=m(t=>{const e=typeof t=="string"?t:t.join(""),r=$t.document.getElementById(e);r&&r.parentElement&&r.parentElement.removeChild(r)},"clearStyle"),zle=m((t,e)=>{const r=$t.document.getElementById(t);if(r)r.innerHTML!==e&&(r.innerHTML=e);else{const n=$t.document.createElement("style");n.setAttribute("id",t),n.innerHTML=e,$t.document.head.appendChild(n)}},"addOutlineStyles");function FV(t){return Kr`
    ${t} body {
      outline: 1px solid #2980b9 !important;
    }

    ${t} article {
      outline: 1px solid #3498db !important;
    }

    ${t} nav {
      outline: 1px solid #0088c3 !important;
    }

    ${t} aside {
      outline: 1px solid #33a0ce !important;
    }

    ${t} section {
      outline: 1px solid #66b8da !important;
    }

    ${t} header {
      outline: 1px solid #99cfe7 !important;
    }

    ${t} footer {
      outline: 1px solid #cce7f3 !important;
    }

    ${t} h1 {
      outline: 1px solid #162544 !important;
    }

    ${t} h2 {
      outline: 1px solid #314e6e !important;
    }

    ${t} h3 {
      outline: 1px solid #3e5e85 !important;
    }

    ${t} h4 {
      outline: 1px solid #449baf !important;
    }

    ${t} h5 {
      outline: 1px solid #c7d1cb !important;
    }

    ${t} h6 {
      outline: 1px solid #4371d0 !important;
    }

    ${t} main {
      outline: 1px solid #2f4f90 !important;
    }

    ${t} address {
      outline: 1px solid #1a2c51 !important;
    }

    ${t} div {
      outline: 1px solid #036cdb !important;
    }

    ${t} p {
      outline: 1px solid #ac050b !important;
    }

    ${t} hr {
      outline: 1px solid #ff063f !important;
    }

    ${t} pre {
      outline: 1px solid #850440 !important;
    }

    ${t} blockquote {
      outline: 1px solid #f1b8e7 !important;
    }

    ${t} ol {
      outline: 1px solid #ff050c !important;
    }

    ${t} ul {
      outline: 1px solid #d90416 !important;
    }

    ${t} li {
      outline: 1px solid #d90416 !important;
    }

    ${t} dl {
      outline: 1px solid #fd3427 !important;
    }

    ${t} dt {
      outline: 1px solid #ff0043 !important;
    }

    ${t} dd {
      outline: 1px solid #e80174 !important;
    }

    ${t} figure {
      outline: 1px solid #ff00bb !important;
    }

    ${t} figcaption {
      outline: 1px solid #bf0032 !important;
    }

    ${t} table {
      outline: 1px solid #00cc99 !important;
    }

    ${t} caption {
      outline: 1px solid #37ffc4 !important;
    }

    ${t} thead {
      outline: 1px solid #98daca !important;
    }

    ${t} tbody {
      outline: 1px solid #64a7a0 !important;
    }

    ${t} tfoot {
      outline: 1px solid #22746b !important;
    }

    ${t} tr {
      outline: 1px solid #86c0b2 !important;
    }

    ${t} th {
      outline: 1px solid #a1e7d6 !important;
    }

    ${t} td {
      outline: 1px solid #3f5a54 !important;
    }

    ${t} col {
      outline: 1px solid #6c9a8f !important;
    }

    ${t} colgroup {
      outline: 1px solid #6c9a9d !important;
    }

    ${t} button {
      outline: 1px solid #da8301 !important;
    }

    ${t} datalist {
      outline: 1px solid #c06000 !important;
    }

    ${t} fieldset {
      outline: 1px solid #d95100 !important;
    }

    ${t} form {
      outline: 1px solid #d23600 !important;
    }

    ${t} input {
      outline: 1px solid #fca600 !important;
    }

    ${t} keygen {
      outline: 1px solid #b31e00 !important;
    }

    ${t} label {
      outline: 1px solid #ee8900 !important;
    }

    ${t} legend {
      outline: 1px solid #de6d00 !important;
    }

    ${t} meter {
      outline: 1px solid #e8630c !important;
    }

    ${t} optgroup {
      outline: 1px solid #b33600 !important;
    }

    ${t} option {
      outline: 1px solid #ff8a00 !important;
    }

    ${t} output {
      outline: 1px solid #ff9619 !important;
    }

    ${t} progress {
      outline: 1px solid #e57c00 !important;
    }

    ${t} select {
      outline: 1px solid #e26e0f !important;
    }

    ${t} textarea {
      outline: 1px solid #cc5400 !important;
    }

    ${t} details {
      outline: 1px solid #33848f !important;
    }

    ${t} summary {
      outline: 1px solid #60a1a6 !important;
    }

    ${t} command {
      outline: 1px solid #438da1 !important;
    }

    ${t} menu {
      outline: 1px solid #449da6 !important;
    }

    ${t} del {
      outline: 1px solid #bf0000 !important;
    }

    ${t} ins {
      outline: 1px solid #400000 !important;
    }

    ${t} img {
      outline: 1px solid #22746b !important;
    }

    ${t} iframe {
      outline: 1px solid #64a7a0 !important;
    }

    ${t} embed {
      outline: 1px solid #98daca !important;
    }

    ${t} object {
      outline: 1px solid #00cc99 !important;
    }

    ${t} param {
      outline: 1px solid #37ffc4 !important;
    }

    ${t} video {
      outline: 1px solid #6ee866 !important;
    }

    ${t} audio {
      outline: 1px solid #027353 !important;
    }

    ${t} source {
      outline: 1px solid #012426 !important;
    }

    ${t} canvas {
      outline: 1px solid #a2f570 !important;
    }

    ${t} track {
      outline: 1px solid #59a600 !important;
    }

    ${t} map {
      outline: 1px solid #7be500 !important;
    }

    ${t} area {
      outline: 1px solid #305900 !important;
    }

    ${t} a {
      outline: 1px solid #ff62ab !important;
    }

    ${t} em {
      outline: 1px solid #800b41 !important;
    }

    ${t} strong {
      outline: 1px solid #ff1583 !important;
    }

    ${t} i {
      outline: 1px solid #803156 !important;
    }

    ${t} b {
      outline: 1px solid #cc1169 !important;
    }

    ${t} u {
      outline: 1px solid #ff0430 !important;
    }

    ${t} s {
      outline: 1px solid #f805e3 !important;
    }

    ${t} small {
      outline: 1px solid #d107b2 !important;
    }

    ${t} abbr {
      outline: 1px solid #4a0263 !important;
    }

    ${t} q {
      outline: 1px solid #240018 !important;
    }

    ${t} cite {
      outline: 1px solid #64003c !important;
    }

    ${t} dfn {
      outline: 1px solid #b4005a !important;
    }

    ${t} sub {
      outline: 1px solid #dba0c8 !important;
    }

    ${t} sup {
      outline: 1px solid #cc0256 !important;
    }

    ${t} time {
      outline: 1px solid #d6606d !important;
    }

    ${t} code {
      outline: 1px solid #e04251 !important;
    }

    ${t} kbd {
      outline: 1px solid #5e001f !important;
    }

    ${t} samp {
      outline: 1px solid #9c0033 !important;
    }

    ${t} var {
      outline: 1px solid #d90047 !important;
    }

    ${t} mark {
      outline: 1px solid #ff0053 !important;
    }

    ${t} bdi {
      outline: 1px solid #bf3668 !important;
    }

    ${t} bdo {
      outline: 1px solid #6f1400 !important;
    }

    ${t} ruby {
      outline: 1px solid #ff7b93 !important;
    }

    ${t} rt {
      outline: 1px solid #ff2f54 !important;
    }

    ${t} rp {
      outline: 1px solid #803e49 !important;
    }

    ${t} span {
      outline: 1px solid #cc2643 !important;
    }

    ${t} br {
      outline: 1px solid #db687d !important;
    }

    ${t} wbr {
      outline: 1px solid #db175b !important;
    }`}m(FV,"outlineCSS");var jle=m((t,e)=>{const r=e.globals||{},n=[!0,"true"].includes(r[NV]),i=e.viewMode==="docs",l=sP(()=>FV(i?'[data-story-block="true"]':".sb-show-main"),[e]);return eu(()=>{const c=i?`addon-outline-docs-${e.id}`:"addon-outline";return n?zle(c,l):Ik(c),()=>{Ik(c)}},[n,l,e]),t()},"withOutline"),Ble=globalThis.FEATURES?.outline?[jle]:[],qle={[NV]:!1},Mk=m(()=>({decorators:Ble,initialGlobals:qle}),"default"),$le=m(({parameters:t})=>{t?.test?.mockReset===!0?wR():t?.test?.clearMocks===!0?xR():t?.test?.restoreMocks!==!1&&ER()},"resetAllMocksLoader"),I2=m((t,e=0,r)=>{if(e>5||t==null)return t;if(_h(t))return r&&t.mockName(r),t;if(typeof t=="function"&&"isAction"in t&&t.isAction&&!("implicit"in t&&t.implicit)){const n=bR(t);return r&&n.mockName(r),n}if(Array.isArray(t)){e++;for(let n=0;n<t.length;n++)Object.getOwnPropertyDescriptor(t,n)?.writable&&(t[n]=I2(t[n],e));return t}if(typeof t=="object"&&t.constructor===Object){e++;for(const[n,i]of Object.entries(t))Object.getOwnPropertyDescriptor(t,n)?.writable&&(t[n]=I2(i,e,n));return t}return t},"traverseArgs"),Vle=m(({initialArgs:t})=>{I2(t)},"nameSpiesAndWrapActionsInSpies"),Ok=!1,Ule=m(async t=>{globalThis.HTMLElement&&t.canvasElement instanceof globalThis.HTMLElement&&(t.canvas=pV(t.canvasElement));const e=globalThis.window?.navigator?.clipboard;if(e&&(t.userEvent=Pf({userEvent:fV.setup()},{intercept:!0,getKeys:m(r=>Object.keys(r).filter(n=>n!=="eventWrapper"),"getKeys")}).userEvent,Object.defineProperty(globalThis.window.navigator,"clipboard",{get:m(()=>e,"get"),configurable:!0}),!Ok)){const r=HTMLElement.prototype.focus;let n=HTMLElement.prototype.focus;const i=new Set;Object.defineProperties(HTMLElement.prototype,{focus:{configurable:!0,set:m(l=>{n=l},"set"),get(){return i.has(this)?r:(i.add(this),setTimeout(()=>i.delete(this),0),n)}}}),Ok=!0}},"enhanceContext"),kk=m(()=>({loaders:[$le,Vle,Ule]}),"default"),Gle="viewport",Hle={[Gle]:{value:void 0,isRotated:!1}},Lk=m(()=>({initialGlobals:Hle}),"default");function CI(){return[(Rk.default??Rk)(),(yk.default??yk)(),(Ck.default??Ck)(),(Mk.default??Mk)(),(Lk.default??Lk)(),(pk.default??pk)(),(_k.default??_k)(),(kk.default??kk)()]}m(CI,"getCoreAnnotations");function Jle(t){return t}m(Jle,"definePreviewAddon");function zV(t){return t!=null&&typeof t=="object"&&"_tag"in t&&t?._tag==="Meta"}m(zV,"isMeta");function _x(t){return t!=null&&typeof t=="object"&&"_tag"in t&&t?._tag==="Story"}m(_x,"isStory");function jV(t){return"__children"in t?t.__children:[]}m(jV,"getStoryChildren");var BV=m(t=>t.toLowerCase().replace(/[ '`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),"sanitize"),M2=m((t,e)=>{const r=BV(t);if(r==="")throw new Error(`Invalid ${e} '${t}', must include alphanumeric characters`);return r},"sanitizeSafe"),Wle=m((t,e)=>`${M2(t,"kind")}${e?`--${M2(e,"name")}`:""}`,"toId"),Zle=m((t,e)=>`${t}:${M2(e,"test")}`,"toTestId"),Kle=m(t=>ZF(t),"storyNameFromExport");function O2(t,e){return Array.isArray(e)?e.includes(t):t.match(e)}m(O2,"matches");function pv(t,{includeStories:e,excludeStories:r}){return t!=="__esModule"&&(!e||O2(t,e))&&(!r||!O2(t,r))}m(pv,"isExportStory");var Yle=m((...t)=>{const e=t.reduce((r,n)=>(n.startsWith("!")?r.delete(n.slice(1)):r.add(n),r),new Set);return Array.from(e)},"combineTags");function k2(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}m(k2,"getSymbols");function L2(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}m(L2,"getTag");var Xle="[object RegExp]",Qle="[object String]",ece="[object Number]",tce="[object Boolean]",Dk="[object Arguments]",rce="[object Symbol]",nce="[object Date]",ice="[object Map]",oce="[object Set]",sce="[object Array]",ace="[object Function]",lce="[object ArrayBuffer]",JE="[object Object]",cce="[object Error]",uce="[object DataView]",hce="[object Uint8Array]",dce="[object Uint8ClampedArray]",pce="[object Uint16Array]",fce="[object Uint32Array]",mce="[object BigUint64Array]",gce="[object Int8Array]",yce="[object Int16Array]",_ce="[object Int32Array]",bce="[object BigInt64Array]",vce="[object Float32Array]",xce="[object Float64Array]";function ia(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}m(ia,"isPlainObject");function hf(t,e){const r={},n=Object.keys(t);for(let i=0;i<n.length;i++){const l=n[i],c=t[l];r[l]=e(c,l,t)}return r}m(hf,"mapValues");function qV(t,e){const r={},n=Object.keys(t);for(let i=0;i<n.length;i++){const l=n[i],c=t[l];e(c,l)&&(r[l]=c)}return r}m(qV,"pickBy");var WE=Ti(nN(),1);function $V(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}m($V,"eq");function VV(t,e,r){return kp(t,e,void 0,void 0,void 0,void 0,r)}m(VV,"isEqualWith");function kp(t,e,r,n,i,l,c){const s=c(t,e,r,n,i,l);if(s!==void 0)return s;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Bp(t,e,l,c)}return Bp(t,e,l,c)}m(kp,"isEqualWithImpl");function Bp(t,e,r,n){if(Object.is(t,e))return!0;let i=L2(t),l=L2(e);if(i===Dk&&(i=JE),l===Dk&&(l=JE),i!==l)return!1;switch(i){case Qle:return t.toString()===e.toString();case ece:{const p=t.valueOf(),g=e.valueOf();return $V(p,g)}case tce:case nce:case rce:return Object.is(t.valueOf(),e.valueOf());case Xle:return t.source===e.source&&t.flags===e.flags;case ace:return t===e}r=r??new Map;const c=r.get(t),s=r.get(e);if(c!=null&&s!=null)return c===e;r.set(t,e),r.set(e,t);try{switch(i){case ice:{if(t.size!==e.size)return!1;for(const[p,g]of t.entries())if(!e.has(p)||!kp(g,e.get(p),p,t,e,r,n))return!1;return!0}case oce:{if(t.size!==e.size)return!1;const p=Array.from(t.values()),g=Array.from(e.values());for(let _=0;_<p.length;_++){const x=p[_],P=g.findIndex(A=>kp(x,A,void 0,t,e,r,n));if(P===-1)return!1;g.splice(P,1)}return!0}case sce:case hce:case dce:case pce:case fce:case mce:case gce:case yce:case _ce:case bce:case vce:case xce:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let p=0;p<t.length;p++)if(!kp(t[p],e[p],p,t,e,r,n))return!1;return!0}case lce:return t.byteLength!==e.byteLength?!1:Bp(new Uint8Array(t),new Uint8Array(e),r,n);case uce:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Bp(new Uint8Array(t),new Uint8Array(e),r,n);case cce:return t.name===e.name&&t.message===e.message;case JE:{if(!(Bp(t.constructor,e.constructor,r,n)||ia(t)&&ia(e)))return!1;const g=[...Object.keys(t),...k2(t)],_=[...Object.keys(e),...k2(e)];if(g.length!==_.length)return!1;for(let x=0;x<g.length;x++){const P=g[x],A=t[P];if(!Object.hasOwn(e,P))return!1;const M=e[P];if(!kp(A,M,P,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}m(Bp,"areObjectsEqual");function UV(){}m(UV,"noop");function GV(t,e){return VV(t,e,UV)}m(GV,"isEqual");var th=Symbol("incompatible"),D2=m((t,e)=>{const r=e.type;if(t==null||!r||e.mapping)return t;switch(r.name){case"string":return String(t);case"enum":return t;case"number":return Number(t);case"boolean":return String(t)==="true";case"array":return!r.value||!Array.isArray(t)?th:t.reduce((n,i,l)=>{const c=D2(i,{type:r.value});return c!==th&&(n[l]=c),n},new Array(t.length));case"object":return typeof t=="string"||typeof t=="number"?t:!r.value||typeof t!="object"?th:Object.entries(t).reduce((n,[i,l])=>{const c=D2(l,{type:r.value[i]});return c===th?n:Object.assign(n,{[i]:c})},{});case"other":{const n=typeof t=="string"||typeof t=="number"||typeof t=="boolean";return r.value==="ReactNode"&&n?t:th}default:return th}},"map"),wce=m((t,e)=>Object.entries(t).reduce((r,[n,i])=>{if(!e[n])return r;const l=D2(i,e[n]);return l===th?r:Object.assign(r,{[n]:l})},{}),"mapArgsToTypes"),fv=m((t,e)=>Array.isArray(t)&&Array.isArray(e)?e.reduce((r,n,i)=>(r[i]=fv(t[i],e[i]),r),[...t]).filter(r=>r!==void 0):!ia(t)||!ia(e)?e:Object.keys({...t,...e}).reduce((r,n)=>{if(n in e){const i=fv(t[n],e[n]);i!==void 0&&(r[n]=i)}else r[n]=t[n];return r},{}),"combineArgs"),Ece=m((t,e)=>Object.entries(e).reduce((r,[n,{options:i}])=>{function l(){return n in t&&(r[n]=t[n]),r}if(m(l,"allowArg"),!i)return l();if(!Array.isArray(i))return oi.error(Kr`
        Invalid argType: '${n}.options' should be an array.

        More info: https://storybook.js.org/docs/api/arg-types?ref=error
      `),l();if(i.some(x=>x&&["object","function"].includes(typeof x)))return oi.error(Kr`
        Invalid argType: '${n}.options' should only contain primitives. Use a 'mapping' for complex values.

        More info: https://storybook.js.org/docs/writing-stories/args?ref=error#mapping-to-complex-arg-values
      `),l();const c=Array.isArray(t[n]),s=c&&t[n].findIndex(x=>!i.includes(x)),p=c&&s===-1;if(t[n]===void 0||i.includes(t[n])||p)return l();const g=c?`${n}[${s}]`:n,_=i.map(x=>typeof x=="string"?`'${x}'`:String(x)).join(", ");return oi.warn(`Received illegal value for '${g}'. Supported options: ${_}`),r},{}),"validateOptions"),Fg=Symbol("Deeply equal"),mv=m((t,e)=>{if(typeof t!=typeof e)return e;if(GV(t,e))return Fg;if(Array.isArray(t)&&Array.isArray(e)){const r=e.reduce((n,i,l)=>{const c=mv(t[l],i);return c!==Fg&&(n[l]=c),n},new Array(e.length));return e.length>=t.length?r:r.concat(new Array(t.length-e.length).fill(void 0))}return ia(t)&&ia(e)?Object.keys({...t,...e}).reduce((r,n)=>{const i=mv(t?.[n],e?.[n]);return i===Fg?r:Object.assign(r,{[n]:i})},{}):e},"deepDiff"),HV="UNTARGETED";function JV({args:t,argTypes:e}){const r={};return Object.entries(t).forEach(([n,i])=>{const{target:l=HV}=e[n]||{};r[l]=r[l]||{},r[l][n]=i}),r}m(JV,"groupArgsByTarget");function WV(t){return Object.keys(t).forEach(e=>t[e]===void 0&&delete t[e]),t}m(WV,"deleteUndefined");var ZV=class{constructor(){this.initialArgsByStoryId={},this.argsByStoryId={}}get(e){if(!(e in this.argsByStoryId))throw new Error(`No args known for ${e} -- has it been rendered yet?`);return this.argsByStoryId[e]}setInitial(e){if(!this.initialArgsByStoryId[e.id])this.initialArgsByStoryId[e.id]=e.initialArgs,this.argsByStoryId[e.id]=e.initialArgs;else if(this.initialArgsByStoryId[e.id]!==e.initialArgs){const r=mv(this.initialArgsByStoryId[e.id],this.argsByStoryId[e.id]);this.initialArgsByStoryId[e.id]=e.initialArgs,this.argsByStoryId[e.id]=e.initialArgs,r!==Fg&&this.updateFromDelta(e,r)}}updateFromDelta(e,r){const n=Ece(r,e.argTypes);this.argsByStoryId[e.id]=fv(this.argsByStoryId[e.id],n)}updateFromPersisted(e,r){const n=wce(r,e.argTypes);return this.updateFromDelta(e,n)}update(e,r){if(!(e in this.argsByStoryId))throw new Error(`No args known for ${e} -- has it been rendered yet?`);this.argsByStoryId[e]=WV({...this.argsByStoryId[e],...r})}};m(ZV,"ArgsStore");var Tce=ZV,KV=m((t={})=>Object.entries(t).reduce((e,[r,{defaultValue:n}])=>(typeof n<"u"&&(e[r]=n),e),{}),"getValuesFromArgTypes"),YV=class{constructor({globals:e={},globalTypes:r={}}){this.set({globals:e,globalTypes:r})}set({globals:e={},globalTypes:r={}}){const n=this.initialGlobals&&mv(this.initialGlobals,this.globals);this.allowedGlobalNames=new Set([...Object.keys(e),...Object.keys(r)]);const i=KV(r);this.initialGlobals={...i,...e},this.globals=this.initialGlobals,n&&n!==Fg&&this.updateFromPersisted(n)}filterAllowedGlobals(e){return Object.entries(e).reduce((r,[n,i])=>(this.allowedGlobalNames.has(n)?r[n]=i:Bn.warn(`Attempted to set a global (${n}) that is not defined in initial globals or globalTypes`),r),{})}updateFromPersisted(e){const r=this.filterAllowedGlobals(e);this.globals={...this.globals,...r}}get(){return this.globals}update(e){this.globals={...this.globals,...this.filterAllowedGlobals(e)};for(const r in e)e[r]===void 0&&(this.globals[r]=this.initialGlobals[r])}};m(YV,"GlobalsStore");var Sce=YV,Cce=Ti(nN(),1),Pce=(0,Cce.default)(1)(t=>Object.values(t).reduce((e,r)=>(e[r.importPath]=e[r.importPath]||r,e),{})),XV=class{constructor({entries:e}={v:5,entries:{}}){this.entries=e}entryFromSpecifier(e){const r=Object.values(this.entries);if(e==="*")return r[0];if(typeof e=="string")return this.entries[e]?this.entries[e]:r.find(l=>l.id.startsWith(e));const{name:n,title:i}=e;return r.find(l=>l.name===n&&l.title===i)}storyIdToEntry(e){const r=this.entries[e];if(!r)throw new tF({storyId:e});return r}importPathToEntry(e){return Pce(this.entries)[e]}};m(XV,"StoryIndexStore");var Ace=XV,Rce=m(t=>typeof t=="string"?{name:t}:t,"normalizeType"),Ice=m(t=>typeof t=="string"?{type:t}:t,"normalizeControl"),Mce=m((t,e)=>{const{type:r,control:n,...i}=t,l={name:e,...i};return r&&(l.type=Rce(r)),n?l.control=Ice(n):n===!1&&(l.control={disable:!0}),l},"normalizeInputType"),gv=m(t=>hf(t,Mce),"normalizeInputTypes"),kn=m(t=>Array.isArray(t)?t:t?[t]:[],"normalizeArrays"),Oce=Kr`
CSF .story annotations deprecated; annotate story functions directly:
- StoryFn.story.name => StoryFn.storyName
- StoryFn.story.(parameters|decorators) => StoryFn.(parameters|decorators)
See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#hoisted-csf-annotations for details and codemod.
`;function qp(t,e,r){const n=e,i=typeof e=="function"?e:null,{story:l}=n;l&&(Bn.debug("deprecated story",l),$C(Oce));const c=Kle(t),s=typeof n!="function"&&n.name||n.storyName||l?.name||c,p=[...kn(n.decorators),...kn(l?.decorators)],g={...l?.parameters,...n.parameters},_={...l?.args,...n.args},x={...l?.argTypes,...n.argTypes},P=[...kn(n.loaders),...kn(l?.loaders)],A=[...kn(n.beforeEach),...kn(l?.beforeEach)],M=[...kn(n.afterEach),...kn(l?.afterEach)],{render:F,play:z,tags:j=[],globals:$={}}=n,W=g.__id||Wle(r.id,c);return{moduleExport:e,id:W,name:s,tags:j,decorators:p,parameters:g,args:_,argTypes:gv(x),loaders:P,beforeEach:A,afterEach:M,globals:$,...F&&{render:F},...i&&{userStoryFn:i},...z&&{play:z}}}m(qp,"normalizeStory");function yv(t,e=t.title,r){const{id:n,argTypes:i}=t;return{id:BV(n||e),...t,title:e,...i&&{argTypes:gv(i)},parameters:{fileName:r,...t.parameters}}}m(yv,"normalizeComponentAnnotations");var kce=m(t=>{const{globals:e,globalTypes:r}=t;(e||r)&&Bn.error("Global args/argTypes can only be set globally",JSON.stringify({globals:e,globalTypes:r}))},"checkGlobals"),Lce=m(t=>{const{options:e}=t;e?.storySort&&Bn.error("The storySort option parameter can only be set globally")},"checkStorySort"),L0=m(t=>{t&&(kce(t),Lce(t))},"checkDisallowedParameters");function QV(t,e,r){const{default:n,__namedExportsOrder:i,...l}=t,c=Object.values(l)[0];if(_x(c)){const g=yv(c.meta.input,r,e);L0(g.parameters);const _={meta:g,stories:{},moduleExports:t};return Object.keys(l).forEach(x=>{if(pv(x,g)){const P=l[x],A=qp(x,P.input,g);L0(A.parameters),_.stories[A.id]=A,jV(P).forEach(M=>{var j;const F=M.input.name,z=Zle(A.id,F);(j=M.input).parameters??(j.parameters={}),M.input.parameters.__id=z,_.stories[z]=qp(F,M.input,g)})}}),_.projectAnnotations=c.meta.preview.composed,_}const s=yv(n,r,e);L0(s.parameters);const p={meta:s,stories:{},moduleExports:t};return Object.keys(l).forEach(g=>{if(pv(g,s)){const _=qp(g,l[g],s);L0(_.parameters),p.stories[_.id]=_}}),p}m(QV,"processCSFFile");function PI(t,e,r){const n=r(t);return i=>e(n,i)}m(PI,"decorateStory");function AI({componentId:t,title:e,kind:r,id:n,name:i,story:l,parameters:c,initialArgs:s,argTypes:p,...g}={}){return g}m(AI,"sanitizeStoryContextUpdate");function RI(t,e){const r={},n=m(l=>c=>{if(!r.value)throw new Error("Decorated function called without init");return r.value={...r.value,...AI(c)},l(r.value)},"bindWithContext"),i=e.reduce((l,c)=>PI(l,c,n),t);return l=>(r.value=l,i(l))}m(RI,"defaultDecorateStory");var jh=m((...t)=>{const e={},r=t.filter(Boolean),n=r.reduce((i,l)=>(Object.entries(l).forEach(([c,s])=>{const p=i[c];Array.isArray(s)||typeof p>"u"?i[c]=s:ia(s)&&ia(p)?e[c]=!0:typeof s<"u"&&(i[c]=s)}),i),{});return Object.keys(e).forEach(i=>{const l=r.filter(Boolean).map(c=>c[i]).filter(c=>typeof c<"u");l.every(c=>ia(c))?n[i]=jh(...l):n[i]=l[l.length-1]}),n},"combineParameters");function bx(t,e,r){const{moduleExport:n,id:i,name:l}=t||{},c=MI(t,e,r),s=m(async ne=>{const Z={};for(const U of[kn(r.loaders),kn(e.loaders),kn(t.loaders)]){if(ne.abortSignal.aborted)return Z;const K=await Promise.all(U.map(he=>he(ne)));Object.assign(Z,...K)}return Z},"applyLoaders"),p=m(async ne=>{const Z=new Array;for(const U of[...kn(r.beforeEach),...kn(e.beforeEach),...kn(t.beforeEach)]){if(ne.abortSignal.aborted)return Z;const K=await U(ne);K&&Z.push(K)}return Z},"applyBeforeEach"),g=m(async ne=>{const Z=[...kn(r.afterEach),...kn(e.afterEach),...kn(t.afterEach)].reverse();for(const U of Z){if(ne.abortSignal.aborted)return;await U(ne)}},"applyAfterEach"),_=m(ne=>ne.originalStoryFn(ne.args,ne),"undecoratedStoryFn"),{applyDecorators:x=RI,runStep:P}=r,A=[...kn(t?.decorators),...kn(e?.decorators),...kn(r?.decorators)],M=t?.userStoryFn||t?.render||e.render||r.render,F=jF(x)(_,A),z=m(ne=>F(ne),"unboundStoryFn"),j=t?.play??e?.play,$=YF(j);if(!M&&!$)throw new EF({id:i});const W=m(ne=>async()=>(await ne.renderToCanvas(),ne.canvas),"defaultMount"),X=t.mount??e.mount??r.mount??W,te=r.testingLibraryRender;return{storyGlobals:{},...c,moduleExport:n,id:i,name:l,story:l,originalStoryFn:M,undecoratedStoryFn:_,unboundStoryFn:z,applyLoaders:s,applyBeforeEach:p,applyAfterEach:g,playFunction:j,runStep:P,mount:X,testingLibraryRender:te,renderToCanvas:r.renderToCanvas,usesMount:$}}m(bx,"prepareStory");function II(t,e,r){return{...MI(void 0,t,e),moduleExport:r}}m(II,"prepareMeta");function MI(t,e,r){const n=["dev","test"],i=$t.DOCS_OPTIONS?.autodocs===!0?["autodocs"]:[],l=t?.tags?.includes("test-fn")?["!autodocs"]:[],c=Yle(...n,...i,...r.tags??[],...e.tags??[],...l,...t?.tags??[]),s=jh(r.parameters,e.parameters,t?.parameters),{argTypesEnhancers:p=[],argsEnhancers:g=[]}=r,_=jh(r.argTypes,e.argTypes,t?.argTypes);if(t){const $=t?.userStoryFn||t?.render||e.render||r.render;s.__isArgsStory=$&&$.length>0}const x={...r.args,...e.args,...t?.args},P={...e.globals,...t?.globals},A={componentId:e.id,title:e.title,kind:e.title,id:t?.id||e.id,name:t?.name||"__meta",story:t?.name||"__meta",component:e.component,subcomponents:e.subcomponents,tags:c,parameters:s,initialArgs:x,argTypes:_,storyGlobals:P};A.argTypes=p.reduce(($,W)=>W({...A,argTypes:$}),A.argTypes);const M={...x};A.initialArgs=[...g].reduce(($,W)=>({...$,...W({...A,initialArgs:$})}),M);const{name:F,story:z,...j}=A;return j}m(MI,"preparePartialAnnotations");function OI(t){const{args:e}=t;let r={...t,allArgs:void 0,argsByTarget:void 0};if($t.FEATURES?.argTypeTargetsV7){const l=JV(t);r={...t,allArgs:t.args,argsByTarget:l,args:l[HV]||{}}}const n=Object.entries(r.args).reduce((l,[c,s])=>{if(!r.argTypes[c]?.mapping)return l[c]=s,l;const p=m(g=>{const _=r.argTypes[c].mapping;return _&&g in _?_[g]:g},"mappingFn");return l[c]=Array.isArray(s)?s.map(p):p(s),l},{}),i=Object.entries(n).reduce((l,[c,s])=>{const p=r.argTypes[c]||{};return Vre(p,n,r.globals)&&(l[c]=s),l},{});return{...r,unmappedArgs:e,args:i}}m(OI,"prepareContext");var N2=m((t,e,r)=>{const n=typeof t;switch(n){case"boolean":case"string":case"number":case"function":case"symbol":return{name:n}}return t?r.has(t)?(Bn.warn(Kr`
        We've detected a cycle in arg '${e}'. Args should be JSON-serializable.

        Consider using the mapping feature or fully custom args:
        - Mapping: https://storybook.js.org/docs/writing-stories/args#mapping-to-complex-arg-values
        - Custom args: https://storybook.js.org/docs/essentials/controls#fully-custom-args
      `),{name:"other",value:"cyclic object"}):(r.add(t),Array.isArray(t)?{name:"array",value:t.length>0?N2(t[0],e,new Set(r)):{name:"other",value:"unknown"}}:{name:"object",value:hf(t,l=>N2(l,e,new Set(r)))}):{name:"object",value:{}}},"inferType"),eU=m(t=>{const{id:e,argTypes:r={},initialArgs:n={}}=t,i=hf(n,(c,s)=>({name:s,type:N2(c,`${e}.${s}`,new Set)})),l=hf(r,(c,s)=>({name:s}));return jh(i,l,r)},"inferArgTypes");eU.secondPass=!0;var Nk=m((t,e)=>Array.isArray(e)?e.includes(t):t.match(e),"matches"),tU=m((t,e,r)=>!e&&!r?t:t&&qV(t,(n,i)=>{const l=n.name||i.toString();return!!(!e||Nk(l,e))&&(!r||!Nk(l,r))}),"filterArgTypes"),Dce=m((t,e,r)=>{const{type:n,options:i}=t;if(n){if(r.color&&r.color.test(e)){const l=n.name;if(l==="string")return{control:{type:"color"}};l!=="enum"&&Bn.warn(`Addon controls: Control of type color only supports string, received "${l}" instead`)}if(r.date&&r.date.test(e))return{control:{type:"date"}};switch(n.name){case"array":return{control:{type:"object"}};case"boolean":return{control:{type:"boolean"}};case"string":return{control:{type:"text"}};case"number":return{control:{type:"number"}};case"enum":{const{value:l}=n;return{control:{type:l?.length<=5?"radio":"select"},options:l}}case"function":case"symbol":return null;default:return{control:{type:i?"select":"object"}}}}},"inferControl"),kI=m(t=>{const{argTypes:e,parameters:{__isArgsStory:r,controls:{include:n=null,exclude:i=null,matchers:l={}}={}}}=t;if(!r)return e;const c=tU(e,n,i),s=hf(c,(p,g)=>p?.type&&Dce(p,g.toString(),l));return jh(s,c)},"inferControls");kI.secondPass=!0;function dy({argTypes:t,globalTypes:e,argTypesEnhancers:r,decorators:n,loaders:i,beforeEach:l,afterEach:c,initialGlobals:s,...p}){return{...t&&{argTypes:gv(t)},...e&&{globalTypes:gv(e)},decorators:kn(n),loaders:kn(i),beforeEach:kn(l),afterEach:kn(c),argTypesEnhancers:[...r||[],eU,kI],initialGlobals:s,...p}}m(dy,"normalizeProjectAnnotations");var Nce=m(t=>async()=>{const e=[];for(const r of t){const n=await r();n&&e.unshift(n)}return async()=>{for(const r of e)await r()}},"composeBeforeAllHooks");function LI(t){return async(e,r,n)=>{await t.reduceRight((l,c)=>async()=>c(e,l,n),async()=>r(n))()}}m(LI,"composeStepRunners");function df(t,e){return t.map(r=>r.default?.[e]??r[e]).filter(Boolean)}m(df,"getField");function _l(t,e,r={}){return df(t,e).reduce((n,i)=>{const l=kn(i);return r.reverseFileOrder?[...l,...n]:[...n,...l]},[])}m(_l,"getArrayField");function vg(t,e){return Object.assign({},...df(t,e))}m(vg,"getObjectField");function wp(t,e){return df(t,e).pop()}m(wp,"getSingletonField");function Bh(t){const e=_l(t,"argTypesEnhancers"),r=df(t,"runStep"),n=_l(t,"beforeAll");return{parameters:jh(...df(t,"parameters")),decorators:_l(t,"decorators",{reverseFileOrder:!($t.FEATURES?.legacyDecoratorFileOrder??!1)}),args:vg(t,"args"),argsEnhancers:_l(t,"argsEnhancers"),argTypes:vg(t,"argTypes"),argTypesEnhancers:[...e.filter(i=>!i.secondPass),...e.filter(i=>i.secondPass)],initialGlobals:vg(t,"initialGlobals"),globalTypes:vg(t,"globalTypes"),loaders:_l(t,"loaders"),beforeAll:Nce(n),beforeEach:_l(t,"beforeEach"),afterEach:_l(t,"afterEach"),render:wp(t,"render"),renderToCanvas:wp(t,"renderToCanvas"),applyDecorators:wp(t,"applyDecorators"),runStep:LI(r),tags:_l(t,"tags"),mount:wp(t,"mount"),testingLibraryRender:wp(t,"testingLibraryRender")}}m(Bh,"composeConfigs");var Fce=5e3;function DI(){try{return!!globalThis.__vitest_browser__||!!globalThis.window?.navigator?.userAgent?.match(/StorybookTestRunner/)}catch{return!1}}m(DI,"isTestEnvironment");function vx(t=!0){if(!("document"in globalThis&&"createElement"in globalThis.document))return()=>{};const e=document.createElement("style");e.textContent=`*, *:before, *:after {
    animation: none !important;
  }`,document.head.appendChild(e);const r=document.createElement("style");return r.textContent=`*, *:before, *:after {
    animation-delay: 0s !important;
    animation-direction: ${t?"reverse":"normal"} !important;
    animation-play-state: paused !important;
    transition: none !important;
  }`,document.head.appendChild(r),document.body.clientHeight,document.head.removeChild(e),()=>{r.parentNode?.removeChild(r)}}m(vx,"pauseAnimations");async function xx(t){if(!("document"in globalThis&&"getAnimations"in globalThis.document&&"querySelectorAll"in globalThis.document))return;let e=!1;await Promise.race([new Promise(r=>{setTimeout(()=>{const n=[globalThis.document,...NI(globalThis.document)],i=m(async()=>{if(e||t?.aborted)return;const l=n.flatMap(c=>c?.getAnimations?.()||[]).filter(c=>c.playState==="running"&&!rU(c));l.length>0&&(await Promise.all(l.map(c=>c.finished)),await i())},"checkAnimationsFinished");i().then(r)},100)}),new Promise(r=>setTimeout(()=>{e=!0,r(void 0)},Fce))])}m(xx,"waitForAnimations");function NI(t){return[t,...t.querySelectorAll("*")].reduce((e,r)=>("shadowRoot"in r&&r.shadowRoot&&e.push(r.shadowRoot,...NI(r.shadowRoot)),e),[])}m(NI,"getShadowRoots");function rU(t){if(t instanceof CSSAnimation&&t.effect instanceof KeyframeEffect&&t.effect.target){const e=getComputedStyle(t.effect.target,t.effect.pseudoElement),r=e.animationName?.split(", ").indexOf(t.animationName);return e.animationIterationCount.split(", ")[r]==="infinite"}return!1}m(rU,"isInfiniteAnimation");var nU=class{constructor(){this.reports=[]}async addReport(e){this.reports.push(e)}};m(nU,"ReporterAPI");var FI=nU;function zI(t,e,r){return _x(t)?{story:t.input,meta:t.meta.input,preview:t.meta.preview.composed}:{story:t,meta:zV(e)?e.input:e,preview:r}}m(zI,"getCsfFactoryAnnotations");function iU(t){globalThis.defaultProjectAnnotations=t}m(iU,"setDefaultProjectAnnotations");var zce="ComposedStory",jce="Unnamed Story";function oU(t){return t?Bh([t]):{}}m(oU,"extractAnnotation");function sU(t){const e=Array.isArray(t)?t:[t];return globalThis.globalProjectAnnotations=Bh([...CI(),globalThis.defaultProjectAnnotations??{},Bh(e.map(oU))]),globalThis.globalProjectAnnotations??{}}m(sU,"setProjectAnnotations");var Fc=[];function jI(t,e,r,n,i){if(t===void 0)throw new Error("Expected a story but received undefined.");e.title=e.title??zce;const l=yv(e),c=i||t.storyName||t.story?.name||t.name||jce,s=qp(c,t,l),p=dy(Bh([n??globalThis.globalProjectAnnotations??{},r??{}])),g=bx(s,l,p),x={...KV(p.globalTypes),...p.initialGlobals,...g.storyGlobals},P=new FI,A=m(()=>{const W=OI({hooks:new nP,globals:x,args:{...g.initialArgs},viewMode:"story",reporting:P,loaded:{},abortSignal:new AbortController().signal,step:m((X,te)=>g.runStep(X,te,W),"step"),canvasElement:null,canvas:{},userEvent:{},globalTypes:p.globalTypes,...g,context:null,mount:null});return W.parameters.__isPortableStory=!0,W.context=W,g.renderToCanvas&&(W.renderToCanvas=async()=>{const X=await g.renderToCanvas?.({componentId:g.componentId,title:g.title,id:g.id,name:g.name,tags:g.tags,showMain:m(()=>{},"showMain"),showError:m(te=>{throw new Error(`${te.title}
${te.description}`)},"showError"),showException:m(te=>{throw te},"showException"),forceRemount:!0,storyContext:W,storyFn:m(()=>g.unboundStoryFn(W),"storyFn"),unboundStoryFn:g.unboundStoryFn},W.canvasElement);X&&Fc.push(X)}),W.mount=g.mount(W),W},"initializeContext");let M;const F=m(async W=>{const X=A();return X.canvasElement??(X.canvasElement=globalThis?.document?.body),M&&(X.loaded=M.loaded),Object.assign(X,W),g.playFunction(X)},"play"),z=m(W=>{const X=A();return Object.assign(X,W),cU(g,X)},"run"),j=g.playFunction?F:void 0;return Object.assign(m(function(X){const te=A();return M&&(te.loaded=M.loaded),te.args={...te.initialArgs,...X},g.unboundStoryFn(te)},"storyFn"),{id:g.id,storyName:c,load:m(async()=>{for(const X of[...Fc].reverse())await X();Fc.length=0;const W=A();W.loaded=await g.applyLoaders(W),Fc.push(...(await g.applyBeforeEach(W)).filter(Boolean)),M=W},"load"),globals:x,args:g.initialArgs,parameters:g.parameters,argTypes:g.argTypes,play:j,run:z,reporting:P,tags:g.tags})}m(jI,"composeStory");var Bce=m((t,e,r,n)=>jI(t,e,r,{},n),"defaultComposeStory");function aU(t,e,r=Bce){const{default:n,__esModule:i,__namedExportsOrder:l,...c}=t;let s=n;return Object.entries(c).reduce((g,[_,x])=>{const{story:P,meta:A}=zI(x);return!s&&A&&(s=A),pv(_,s)?Object.assign(g,{[_]:r(P,s,e,_)}):g},{})}m(aU,"composeStories");function lU(t){return t.extend({mount:m(async({mount:e,page:r},n)=>{await n(async(i,...l)=>{if(!("__pw_type"in i)||"__pw_type"in i&&i.__pw_type!=="jsx")throw new Error(Kr`
              Portable stories in Playwright CT only work when referencing JSX elements.
              Please use JSX format for your components such as:

              instead of:
              await mount(MyComponent, { props: { foo: 'bar' } })

              do:
              await mount(<MyComponent foo="bar"/>)

              More info: https://storybook.js.org/docs/api/portable-stories/portable-stories-playwright?ref=error
            `);const{props:c,...s}=i;await r.evaluate(async g=>{const _=await globalThis.__pwUnwrapObject?.(g);return("__pw_type"in _?_.type:_)?.load?.()},s);const p=await e(i,...l);return await r.evaluate(async g=>{const _=await globalThis.__pwUnwrapObject?.(g),x="__pw_type"in _?_.type:_,P=document.querySelector("#root");return x?.play?.({canvasElement:P})},s),p})},"mount")})}m(lU,"createPlaywrightTest");async function cU(t,e){for(const l of[...Fc].reverse())await l();if(Fc.length=0,!e.canvasElement){const l=document.createElement("div");globalThis?.document?.body?.appendChild(l),e.canvasElement=l,Fc.push(()=>{globalThis?.document?.body?.contains(l)&&globalThis?.document?.body?.removeChild(l)})}if(e.loaded=await t.applyLoaders(e),e.abortSignal.aborted)return;Fc.push(...(await t.applyBeforeEach(e)).filter(Boolean));const r=t.playFunction,n=t.usesMount;if(n||await e.mount(),e.abortSignal.aborted)return;r&&(n||(e.mount=async()=>{throw new tP({playFunction:r.toString()})}),await r(e));let i;DI()?i=vx():await xx(e.abortSignal),await t.applyAfterEach(e),await i?.()}m(cU,"runStory");var Fk=1e3,qce=1e4,uU=class{constructor(e,r,n){this.importFn=r,this.storyIndex=new Ace(e),this.projectAnnotations=dy(Bh([...CI(),n]));const{initialGlobals:i,globalTypes:l}=this.projectAnnotations;this.args=new Tce,this.userGlobals=new Sce({globals:i,globalTypes:l}),this.hooks={},this.cleanupCallbacks={},this.processCSFFileWithCache=(0,WE.default)(Fk)(QV),this.prepareMetaWithCache=(0,WE.default)(Fk)(II),this.prepareStoryWithCache=(0,WE.default)(qce)(bx)}setProjectAnnotations(e){this.projectAnnotations=dy(e);const{initialGlobals:r,globalTypes:n}=e;this.userGlobals.set({globals:r,globalTypes:n})}async onStoriesChanged({importFn:e,storyIndex:r}){e&&(this.importFn=e),r&&(this.storyIndex.entries=r.entries),this.cachedCSFFiles&&await this.cacheAllCSFFiles()}async storyIdToEntry(e){return this.storyIndex.storyIdToEntry(e)}async loadCSFFileByStoryId(e){const{importPath:r,title:n}=this.storyIndex.storyIdToEntry(e),i=await this.importFn(r);return this.processCSFFileWithCache(i,r,n)}async loadAllCSFFiles(){const e={};return Object.entries(this.storyIndex.entries).forEach(([n,{importPath:i}])=>{e[i]=n}),(await Promise.all(Object.entries(e).map(async([n,i])=>({importPath:n,csfFile:await this.loadCSFFileByStoryId(i)})))).reduce((n,{importPath:i,csfFile:l})=>(n[i]=l,n),{})}async cacheAllCSFFiles(){this.cachedCSFFiles=await this.loadAllCSFFiles()}preparedMetaFromCSFFile({csfFile:e}){const r=e.meta;return this.prepareMetaWithCache(r,this.projectAnnotations,e.moduleExports.default)}async loadStory({storyId:e}){const r=await this.loadCSFFileByStoryId(e);return this.storyFromCSFFile({storyId:e,csfFile:r})}storyFromCSFFile({storyId:e,csfFile:r}){const n=r.stories[e];if(!n)throw new _F({storyId:e});const i=r.meta,l=this.prepareStoryWithCache(n,i,r.projectAnnotations??this.projectAnnotations);return this.args.setInitial(l),this.hooks[l.id]=this.hooks[l.id]||new nP,l}componentStoriesFromCSFFile({csfFile:e}){return Object.keys(this.storyIndex.entries).filter(r=>!!e.stories[r]).map(r=>this.storyFromCSFFile({storyId:r,csfFile:e}))}async loadEntry(e){const r=await this.storyIdToEntry(e),n=r.type==="docs"?r.storiesImports:[],[i,...l]=await Promise.all([this.importFn(r.importPath),...n.map(c=>{const s=this.storyIndex.importPathToEntry(c);return this.loadCSFFileByStoryId(s.id)})]);return{entryExports:i,csfFiles:l}}getStoryContext(e,{forceInitialArgs:r=!1}={}){const n=this.userGlobals.get(),{initialGlobals:i}=this.userGlobals,l=new FI;return OI({...e,args:r?e.initialArgs:this.args.get(e.id),initialGlobals:i,globalTypes:this.projectAnnotations.globalTypes,userGlobals:n,reporting:l,globals:{...n,...e.storyGlobals},hooks:this.hooks[e.id]})}addCleanupCallbacks(e,...r){this.cleanupCallbacks[e.id]=(this.cleanupCallbacks[e.id]||[]).concat(r)}async cleanupStory(e){this.hooks[e.id].clean();const r=this.cleanupCallbacks[e.id];if(r)for(const n of[...r].reverse())await n();delete this.cleanupCallbacks[e.id]}extract(e={includeDocsOnly:!1}){const{cachedCSFFiles:r}=this;if(console.log("extract: extracting stories",r),!r)throw new oF;const n=Object.entries(this.storyIndex.entries).reduce((i,[l,c])=>{if(c.type==="docs")return i;const s=r[c.importPath],p=this.storyFromCSFFile({storyId:l,csfFile:s});return!e.includeDocsOnly&&p.parameters.docsOnly||(i[l]=Object.entries(p).reduce((g,[_,x])=>_==="story"&&c.subtype==="test"?{...g,story:c.parentName}:_==="moduleExport"||typeof x=="function"?g:Array.isArray(x)?Object.assign(g,{[_]:x.slice().sort()}):Object.assign(g,{[_]:x}),{args:p.initialArgs,globals:{...this.userGlobals.initialGlobals,...this.userGlobals.globals,...p.storyGlobals},storyId:c.parent?c.parent:l})),i},{});return console.log("extract: stories",n),n}};m(uU,"StoryStore");var hU=uU;function dU(t){return t.startsWith("\\\\?\\")?t:t.replace(/\\/g,"/")}m(dU,"slash");var $ce=m(t=>{if(t.length===0)return t;const e=t[t.length-1],r=e?.replace(/(?:[.](?:story|stories))?([.][^.]+)$/i,"");if(t.length===1)return[r];const n=t[t.length-2];return r&&n&&r.toLowerCase()===n.toLowerCase()?[...t.slice(0,-2),r]:r&&(/^(story|stories)([.][^.]+)$/i.test(e)||/^index$/i.test(r))?t.slice(0,-1):[...t.slice(0,-1),r]},"sanitize");function F2(t){return t.flatMap(e=>e.split("/")).filter(Boolean).join("/")}m(F2,"pathJoin");var pU=m((t,e,r)=>{const{directory:n,importPathMatcher:i,titlePrefix:l=""}=e||{};typeof t=="number"&&oi.warn(Kr`
      CSF Auto-title received a numeric fileName. This typically happens when
      webpack is mis-configured in production mode. To force webpack to produce
      filenames, set optimization.moduleIds = "named" in your webpack config.
    `);const c=dU(String(t));if(i.exec(c)){if(!r){const s=c.replace(n,"");let p=F2([l,s]).split("/");return p=$ce(p),p.join("/")}return l?F2([l,r]):r}},"userOrAutoTitleFromSpecifier"),Vce=m((t,e,r)=>{for(let n=0;n<e.length;n+=1){const i=pU(t,e[n],r);if(i)return i}return r||void 0},"userOrAutoTitle"),zk=/\s*\/\s*/,Uce=m((t={})=>(e,r)=>{if(e.title===r.title&&!t.includeNames)return 0;const n=t.method||"configure";let i=t.order||[];const l=e.title.trim().split(zk),c=r.title.trim().split(zk);t.includeNames&&(l.push(e.name),c.push(r.name));let s=0;for(;l[s]||c[s];){if(!l[s])return-1;if(!c[s])return 1;const p=l[s],g=c[s];if(p!==g){let x=i.indexOf(p),P=i.indexOf(g);const A=i.indexOf("*");return x!==-1||P!==-1?(x===-1&&(A!==-1?x=A:x=i.length),P===-1&&(A!==-1?P=A:P=i.length),x-P):n==="configure"?0:p.localeCompare(g,t.locales?t.locales:void 0,{numeric:!0,sensitivity:"accent"})}let _=i.indexOf(p);_===-1&&(_=i.indexOf("*")),i=_!==-1&&Array.isArray(i[_+1])?i[_+1]:[],s+=1}return 0},"storySort"),Gce=m((t,e,r)=>{if(e){let n;typeof e=="function"?n=e:n=Uce(e),t.sort(n)}else t.sort((n,i)=>r.indexOf(n.importPath)-r.indexOf(i.importPath));return t},"sortStoriesCommon"),Hce=m((t,e,r)=>{try{return Gce(t,e,r)}catch(n){throw new Error(Kr`
    Error sorting stories with sort parameter ${e}:

    > ${n.message}

    Are you using a V6-style sort function in V7 mode?

    More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort
  `)}},"sortStoriesV7"),wx=new Error("prepareAborted"),{AbortController:jk}=globalThis;function z2(t){try{const{name:e="Error",message:r=String(t),stack:n}=t;return{name:e,message:r,stack:n}}catch{return{name:"Error",message:String(t)}}}m(z2,"serializeError");var fU=class{constructor(e,r,n,i,l,c,s={autoplay:!0,forceInitialArgs:!1},p){this.channel=e,this.store=r,this.renderToScreen=n,this.callbacks=i,this.id=l,this.viewMode=c,this.renderOptions=s,this.type="story",this.notYetRendered=!0,this.rerenderEnqueued=!1,this.disableKeyListeners=!1,this.teardownRender=m(()=>{},"teardownRender"),this.torndown=!1,this.abortController=new jk,this.renderId=Date.now(),p&&(this.story=p,this.phase="preparing")}async runPhase(e,r,n){this.phase=r,this.channel.emit(Ih,{newPhase:this.phase,renderId:this.renderId,storyId:this.id}),n&&(await n(),this.checkIfAborted(e))}checkIfAborted(e){return e.aborted&&!["finished","aborted","errored"].includes(this.phase)&&(this.phase="aborted",this.channel.emit(Ih,{newPhase:this.phase,renderId:this.renderId,storyId:this.id})),e.aborted}async prepare(){if(await this.runPhase(this.abortController.signal,"preparing",async()=>{this.story=await this.store.loadStory({storyId:this.id})}),this.abortController.signal.aborted)throw await this.store.cleanupStory(this.story),wx}isEqual(e){return!!(this.id===e.id&&this.story&&this.story===e.story)}isPreparing(){return["preparing"].includes(this.phase)}isPending(){return["loading","beforeEach","rendering","playing","afterEach"].includes(this.phase)}async renderToElement(e){return this.canvasElement=e,this.render({initial:!0,forceRemount:!0})}storyContext(){if(!this.story)throw new Error("Cannot call storyContext before preparing");const{forceInitialArgs:e}=this.renderOptions;return this.store.getStoryContext(this.story,{forceInitialArgs:e})}async render({initial:e=!1,forceRemount:r=!1}={}){const{canvasElement:n}=this;if(!this.story)throw new Error("cannot render when not prepared");const i=this.story;if(!n)throw new Error("cannot render when canvasElement is unset");const{id:l,componentId:c,title:s,name:p,tags:g,applyLoaders:_,applyBeforeEach:x,applyAfterEach:P,unboundStoryFn:A,playFunction:M,runStep:F}=i;r&&!e&&(this.cancelRender(),this.abortController=new jk);const z=this.abortController.signal;let j=!1;const $=i.usesMount;try{const W={...this.storyContext(),viewMode:this.viewMode,abortSignal:z,canvasElement:n,loaded:{},step:m((Ie,ee)=>F(Ie,ee,W),"step"),context:null,canvas:{},userEvent:{},renderToCanvas:m(async()=>{const Ie=await this.renderToScreen(X,n);this.teardownRender=Ie||(()=>{}),j=!0},"renderToCanvas"),mount:m(async(...Ie)=>{this.callbacks.showStoryDuringRender?.();let ee=null;return await this.runPhase(z,"rendering",async()=>{ee=await i.mount(W)(...Ie)}),$&&await this.runPhase(z,"playing"),ee},"mount")};W.context=W;const X={componentId:c,title:s,kind:s,id:l,name:p,story:p,tags:g,...this.callbacks,showError:m(Ie=>(this.phase="errored",this.callbacks.showError(Ie)),"showError"),showException:m(Ie=>(this.phase="errored",this.callbacks.showException(Ie)),"showException"),forceRemount:r||this.notYetRendered,storyContext:W,storyFn:m(()=>A(W),"storyFn"),unboundStoryFn:A};if(await this.runPhase(z,"loading",async()=>{W.loaded=await _(W)}),z.aborted)return;const te=await x(W);if(this.store.addCleanupCallbacks(i,...te),this.checkIfAborted(z)||(!j&&!$&&await W.mount(),this.notYetRendered=!1,z.aborted))return;const ne=this.story.parameters?.test?.dangerouslyIgnoreUnhandledErrors===!0,Z=new Set,U=m(Ie=>{Ie.error&&Z.add(Ie.error)},"onError"),K=m(Ie=>{Ie.reason&&Z.add(Ie.reason)},"onUnhandledRejection");if(this.renderOptions.autoplay&&r&&M&&this.phase!=="errored"){window?.addEventListener?.("error",U),window?.addEventListener?.("unhandledrejection",K),this.disableKeyListeners=!0;try{if($?await M(W):(W.mount=async()=>{throw new tP({playFunction:M.toString()})},await this.runPhase(z,"playing",async()=>M(W))),!j)throw new SF;this.checkIfAborted(z),!ne&&Z.size>0?await this.runPhase(z,"errored"):await this.runPhase(z,"played")}catch(Ie){if(this.callbacks.showStoryDuringRender?.(),await this.runPhase(z,"errored",async()=>{this.channel.emit(fN,z2(Ie))}),this.story.parameters.throwPlayFunctionExceptions!==!1)throw Ie;console.error(Ie)}if(!ne&&Z.size>0&&this.channel.emit(mN,Array.from(Z).map(z2)),this.disableKeyListeners=!1,window?.removeEventListener?.("unhandledrejection",K),window?.removeEventListener?.("error",U),z.aborted)return}await this.runPhase(z,"completing",async()=>{DI()?this.store.addCleanupCallbacks(i,vx()):await xx(z)}),await this.runPhase(z,"completed",async()=>{this.channel.emit(Cb,l)}),this.phase!=="errored"&&await this.runPhase(z,"afterEach",async()=>{await P(W)});const he=!ne&&Z.size>0,ue=W.reporting.reports.some(Ie=>Ie.status==="failed"),we=he||ue;await this.runPhase(z,"finished",async()=>this.channel.emit(JT,{storyId:l,status:we?"error":"success",reporters:W.reporting.reports}))}catch(W){this.phase="errored",this.callbacks.showException(W),await this.runPhase(z,"finished",async()=>this.channel.emit(JT,{storyId:l,status:"error",reporters:[]}))}this.rerenderEnqueued&&(this.rerenderEnqueued=!1,this.render())}async rerender(){if(this.isPending()&&this.phase!=="playing")this.rerenderEnqueued=!0;else return this.render()}async remount(){return await this.teardown(),this.render({forceRemount:!0})}cancelRender(){this.abortController.abort()}cancelPlayFunction(){this.phase==="playing"&&(this.abortController.abort(),this.runPhase(this.abortController.signal,"aborted"))}async teardown(){this.torndown=!0,this.cancelRender(),this.story&&await this.store.cleanupStory(this.story);for(let e=0;e<3;e+=1){if(!this.isPending()){await this.teardownRender();return}await new Promise(r=>setTimeout(r,0))}window?.location?.reload?.(),await new Promise(()=>{})}};m(fU,"StoryRender");var j2=fU,{fetch:Jce}=$t,Wce="./index.json",mU=class{constructor(e,r,n=ks.getChannel(),i=!0){this.importFn=e,this.getProjectAnnotations=r,this.channel=n,this.storyRenders=[],this.storeInitializationPromise=new Promise((l,c)=>{this.resolveStoreInitializationPromise=l,this.rejectStoreInitializationPromise=c}),i&&this.initialize()}get storyStore(){return new Proxy({},{get:m((e,r)=>{if(this.storyStoreValue)return $C("Accessing the Story Store is deprecated and will be removed in 9.0"),this.storyStoreValue[r];throw new vF},"get")})}async initialize(){this.setupListeners();try{const e=await this.getProjectAnnotationsOrRenderError();await this.runBeforeAllHook(e),await this.initializeWithProjectAnnotations(e);const r=globalThis?.navigator?.userAgent;await this.channel.emit(yN,{userAgent:r})}catch(e){this.rejectStoreInitializationPromise(e)}}ready(){return this.storeInitializationPromise}setupListeners(){this.channel.on(EN,this.onStoryIndexChanged.bind(this)),this.channel.on(BC,this.onUpdateGlobals.bind(this)),this.channel.on(qC,this.onUpdateArgs.bind(this)),this.channel.on(MN,this.onRequestArgTypesInfo.bind(this)),this.channel.on(zC,this.onResetArgs.bind(this)),this.channel.on(FC,this.onForceReRender.bind(this)),this.channel.on(Sb,this.onForceRemount.bind(this)),this.channel.on(AN,this.onStoryHotUpdated.bind(this))}async getProjectAnnotationsOrRenderError(){try{const e=await this.getProjectAnnotations();if(this.renderToCanvas=e.renderToCanvas,!this.renderToCanvas)throw new aF;return e}catch(e){throw this.renderPreviewEntryError("Error reading preview.js:",e),e}}async initializeWithProjectAnnotations(e){this.projectAnnotationsBeforeInitialization=e;try{const r=await this.getStoryIndexFromServer();return this.initializeWithStoryIndex(r)}catch(r){throw this.renderPreviewEntryError("Error loading story index:",r),r}}async runBeforeAllHook(e){try{await this.beforeAllCleanup?.(),this.beforeAllCleanup=await e.beforeAll?.()}catch(r){throw this.renderPreviewEntryError("Error in beforeAll hook:",r),r}}async getStoryIndexFromServer(){const e=await Jce(Wce);if(e.status===200)return e.json();throw new uF({text:await e.text()})}initializeWithStoryIndex(e){if(!this.projectAnnotationsBeforeInitialization)throw new Error("Cannot call initializeWithStoryIndex until project annotations resolve");this.storyStoreValue=new hU(e,this.importFn,this.projectAnnotationsBeforeInitialization),delete this.projectAnnotationsBeforeInitialization,this.setInitialGlobals(),this.resolveStoreInitializationPromise()}async setInitialGlobals(){this.emitGlobals()}emitGlobals(){if(!this.storyStoreValue)throw new ts({methodName:"emitGlobals"});const e={globals:this.storyStoreValue.userGlobals.get()||{},globalTypes:this.storyStoreValue.projectAnnotations.globalTypes||{}};this.channel.emit(bN,e)}async onGetProjectAnnotationsChanged({getProjectAnnotations:e}){delete this.previewEntryError,this.getProjectAnnotations=e;const r=await this.getProjectAnnotationsOrRenderError();if(await this.runBeforeAllHook(r),!this.storyStoreValue){await this.initializeWithProjectAnnotations(r);return}this.storyStoreValue.setProjectAnnotations(r),this.emitGlobals()}async onStoryIndexChanged(){if(delete this.previewEntryError,!(!this.storyStoreValue&&!this.projectAnnotationsBeforeInitialization))try{const e=await this.getStoryIndexFromServer();if(this.projectAnnotationsBeforeInitialization){this.initializeWithStoryIndex(e);return}await this.onStoriesChanged({storyIndex:e})}catch(e){throw this.renderPreviewEntryError("Error loading story index:",e),e}}async onStoriesChanged({importFn:e,storyIndex:r}){if(!this.storyStoreValue)throw new ts({methodName:"onStoriesChanged"});await this.storyStoreValue.onStoriesChanged({importFn:e,storyIndex:r})}async onUpdateGlobals({globals:e,currentStory:r}){if(this.storyStoreValue||await this.storeInitializationPromise,!this.storyStoreValue)throw new ts({methodName:"onUpdateGlobals"});if(this.storyStoreValue.userGlobals.update(e),r){const{initialGlobals:n,storyGlobals:i,userGlobals:l,globals:c}=this.storyStoreValue.getStoryContext(r);this.channel.emit(Hg,{initialGlobals:n,userGlobals:l,storyGlobals:i,globals:c})}else{const{initialGlobals:n,globals:i}=this.storyStoreValue.userGlobals;this.channel.emit(Hg,{initialGlobals:n,userGlobals:i,storyGlobals:{},globals:i})}await Promise.all(this.storyRenders.map(n=>n.rerender()))}async onUpdateArgs({storyId:e,updatedArgs:r}){if(!this.storyStoreValue)throw new ts({methodName:"onUpdateArgs"});this.storyStoreValue.args.update(e,r),await Promise.all(this.storyRenders.filter(n=>n.id===e&&!n.renderOptions.forceInitialArgs).map(n=>n.story&&n.story.usesMount?n.remount():n.rerender())),this.channel.emit(vN,{storyId:e,args:this.storyStoreValue.args.get(e)})}async onRequestArgTypesInfo({id:e,payload:r}){try{await this.storeInitializationPromise;const n=await this.storyStoreValue?.loadStory(r);this.channel.emit(WT,{id:e,success:!0,payload:{argTypes:n?.argTypes||{}},error:null})}catch(n){this.channel.emit(WT,{id:e,success:!1,error:n?.message})}}async onResetArgs({storyId:e,argNames:r}){if(!this.storyStoreValue)throw new ts({methodName:"onResetArgs"});const i=this.storyRenders.find(s=>s.id===e)?.story||await this.storyStoreValue.loadStory({storyId:e}),c=(r||[...new Set([...Object.keys(i.initialArgs),...Object.keys(this.storyStoreValue.args.get(e))])]).reduce((s,p)=>(s[p]=i.initialArgs[p],s),{});await this.onUpdateArgs({storyId:e,updatedArgs:c})}async onForceReRender(){await Promise.all(this.storyRenders.map(e=>e.rerender()))}async onForceRemount({storyId:e}){await Promise.all(this.storyRenders.filter(r=>r.id===e).map(r=>r.remount()))}async onStoryHotUpdated(){await Promise.all(this.storyRenders.map(e=>e.cancelPlayFunction()))}renderStoryToElement(e,r,n,i){if(!this.renderToCanvas||!this.storyStoreValue)throw new ts({methodName:"renderStoryToElement"});const l=new j2(this.channel,this.storyStoreValue,this.renderToCanvas,n,e.id,"docs",i,e);return l.renderToElement(r),this.storyRenders.push(l),async()=>{await this.teardownRender(l)}}async teardownRender(e,{viewModeChanged:r}={}){this.storyRenders=this.storyRenders.filter(n=>n!==e),await e?.teardown?.({viewModeChanged:r})}async loadStory({storyId:e}){if(!this.storyStoreValue)throw new ts({methodName:"loadStory"});return this.storyStoreValue.loadStory({storyId:e})}getStoryContext(e,{forceInitialArgs:r=!1}={}){if(!this.storyStoreValue)throw new ts({methodName:"getStoryContext"});return this.storyStoreValue.getStoryContext(e,{forceInitialArgs:r})}async extract(e){if(!this.storyStoreValue)throw new ts({methodName:"extract"});if(this.previewEntryError)throw this.previewEntryError;return await this.storyStoreValue.cacheAllCSFFiles(),this.storyStoreValue.extract(e)}renderPreviewEntryError(e,r){this.previewEntryError=r,Bn.error(e),Bn.error(r),this.channel.emit(dN,r)}};m(mU,"Preview");var gU=mU,yU=class{constructor(e,r,n,i){this.channel=e,this.store=r,this.renderStoryToElement=n,this.storyIdByName=m(l=>{const c=this.nameToStoryId.get(l);if(c)return c;throw new Error(`No story found with that name: ${l}`)},"storyIdByName"),this.componentStories=m(()=>this.componentStoriesValue,"componentStories"),this.componentStoriesFromCSFFile=m(l=>this.store.componentStoriesFromCSFFile({csfFile:l}),"componentStoriesFromCSFFile"),this.storyById=m(l=>{if(!l){if(!this.primaryStory)throw new Error("No primary story defined for docs entry. Did you forget to use `<Meta>`?");return this.primaryStory}const c=this.storyIdToCSFFile.get(l);if(!c)throw new Error(`Called \`storyById\` for story that was never loaded: ${l}`);return this.store.storyFromCSFFile({storyId:l,csfFile:c})},"storyById"),this.getStoryContext=m(l=>({...this.store.getStoryContext(l),loaded:{},viewMode:"docs"}),"getStoryContext"),this.loadStory=m(l=>this.store.loadStory({storyId:l}),"loadStory"),this.componentStoriesValue=[],this.storyIdToCSFFile=new Map,this.exportToStory=new Map,this.exportsToCSFFile=new Map,this.nameToStoryId=new Map,this.attachedCSFFiles=new Set,i.forEach((l,c)=>{this.referenceCSFFile(l)})}referenceCSFFile(e){this.exportsToCSFFile.set(e.moduleExports,e),this.exportsToCSFFile.set(e.moduleExports.default,e),this.store.componentStoriesFromCSFFile({csfFile:e}).forEach(n=>{const i=e.stories[n.id];this.storyIdToCSFFile.set(i.id,e),this.exportToStory.set(i.moduleExport,n)})}attachCSFFile(e){if(!this.exportsToCSFFile.has(e.moduleExports))throw new Error("Cannot attach a CSF file that has not been referenced");if(this.attachedCSFFiles.has(e))return;this.attachedCSFFiles.add(e),this.store.componentStoriesFromCSFFile({csfFile:e}).forEach(n=>{this.nameToStoryId.set(n.name,n.id),this.componentStoriesValue.push(n),this.primaryStory||(this.primaryStory=n)})}referenceMeta(e,r){const n=this.resolveModuleExport(e);if(n.type!=="meta")throw new Error("<Meta of={} /> must reference a CSF file module export or meta export. Did you mistakenly reference your component instead of your CSF file?");r&&this.attachCSFFile(n.csfFile)}get projectAnnotations(){const{projectAnnotations:e}=this.store;if(!e)throw new Error("Can't get projectAnnotations from DocsContext before they are initialized");return e}resolveAttachedModuleExportType(e){if(e==="story"){if(!this.primaryStory)throw new Error("No primary story attached to this docs file, did you forget to use <Meta of={} />?");return{type:"story",story:this.primaryStory}}if(this.attachedCSFFiles.size===0)throw new Error("No CSF file attached to this docs file, did you forget to use <Meta of={} />?");const r=Array.from(this.attachedCSFFiles)[0];if(e==="meta")return{type:"meta",csfFile:r};const{component:n}=r.meta;if(!n)throw new Error("Attached CSF file does not defined a component, did you forget to export one?");return{type:"component",component:n}}resolveModuleExport(e){const r=this.exportsToCSFFile.get(e);if(r)return{type:"meta",csfFile:r};const n=this.exportToStory.get(_x(e)?e.input:e);return n?{type:"story",story:n}:{type:"component",component:e}}resolveOf(e,r=[]){let n;if(["component","meta","story"].includes(e)){const i=e;n=this.resolveAttachedModuleExportType(i)}else n=this.resolveModuleExport(e);if(r.length&&!r.includes(n.type)){const i=n.type==="component"?"component or unknown":n.type;throw new Error(Kr`Invalid value passed to the 'of' prop. The value was resolved to a '${i}' type but the only types for this block are: ${r.join(", ")}.
        - Did you pass a component to the 'of' prop when the block only supports a story or a meta?
        - ... or vice versa?
        - Did you pass a story, CSF file or meta to the 'of' prop that is not indexed, ie. is not targeted by the 'stories' globs in the main configuration?`)}switch(n.type){case"component":return{...n,projectAnnotations:this.projectAnnotations};case"meta":return{...n,preparedMeta:this.store.preparedMetaFromCSFFile({csfFile:n.csfFile})};case"story":default:return n}}};m(yU,"DocsContext");var BI=yU,_U=class{constructor(e,r,n,i){this.channel=e,this.store=r,this.entry=n,this.callbacks=i,this.type="docs",this.subtype="csf",this.torndown=!1,this.disableKeyListeners=!1,this.preparing=!1,this.id=n.id,this.renderId=Date.now()}isPreparing(){return this.preparing}async prepare(){this.preparing=!0;const{entryExports:e,csfFiles:r=[]}=await this.store.loadEntry(this.id);if(this.torndown)throw wx;const{importPath:n,title:i}=this.entry,l=this.store.processCSFFileWithCache(e,n,i),c=Object.keys(l.stories)[0];this.story=this.store.storyFromCSFFile({storyId:c,csfFile:l}),this.csfFiles=[l,...r],this.preparing=!1}isEqual(e){return!!(this.id===e.id&&this.story&&this.story===e.story)}docsContext(e){if(!this.csfFiles)throw new Error("Cannot render docs before preparing");const r=new BI(this.channel,this.store,e,this.csfFiles);return this.csfFiles.forEach(n=>r.attachCSFFile(n)),r}async renderToElement(e,r){if(!this.story||!this.csfFiles)throw new Error("Cannot render docs before preparing");const n=this.docsContext(r),{docs:i}=this.story.parameters||{};if(!i)throw new Error("Cannot render a story in viewMode=docs if `@storybook/addon-docs` is not installed");const l=await i.renderer(),{render:c}=l,s=m(async()=>{try{await c(n,i,e),this.channel.emit(NC,this.id)}catch(p){this.callbacks.showException(p)}},"renderDocs");return this.rerender=async()=>s(),this.teardownRender=async({viewModeChanged:p})=>{!p||!e||l.unmount(e)},s()}async teardown({viewModeChanged:e}={}){this.teardownRender?.({viewModeChanged:e}),this.torndown=!0}};m(_U,"CsfDocsRender");var Bk=_U,bU=class{constructor(e,r,n,i){this.channel=e,this.store=r,this.entry=n,this.callbacks=i,this.type="docs",this.subtype="mdx",this.torndown=!1,this.disableKeyListeners=!1,this.preparing=!1,this.id=n.id,this.renderId=Date.now()}isPreparing(){return this.preparing}async prepare(){this.preparing=!0;const{entryExports:e,csfFiles:r=[]}=await this.store.loadEntry(this.id);if(this.torndown)throw wx;this.csfFiles=r,this.exports=e,this.preparing=!1}isEqual(e){return!!(this.id===e.id&&this.exports&&this.exports===e.exports)}docsContext(e){if(!this.csfFiles)throw new Error("Cannot render docs before preparing");return new BI(this.channel,this.store,e,this.csfFiles)}async renderToElement(e,r){if(!this.exports||!this.csfFiles||!this.store.projectAnnotations)throw new Error("Cannot render docs before preparing");const n=this.docsContext(r),{docs:i}=this.store.projectAnnotations.parameters??{};if(!i)throw new Error("Cannot render a story in viewMode=docs if `@storybook/addon-docs` is not installed");const l={...i,page:this.exports.default},c=await i.renderer(),{render:s}=c,p=m(async()=>{try{await s(n,l,e),this.channel.emit(NC,this.id)}catch(g){this.callbacks.showException(g)}},"renderDocs");return this.rerender=async()=>p(),this.teardownRender=async({viewModeChanged:g}={})=>{!g||!e||(c.unmount(e),this.torndown=!0)},p()}async teardown({viewModeChanged:e}={}){this.teardownRender?.({viewModeChanged:e}),this.torndown=!0}};m(bU,"MdxDocsRender");var qk=bU,Zce=globalThis;function vU(t){const e=t.composedPath&&t.composedPath()[0]||t.target;return/input|textarea/i.test(e.tagName)||e.getAttribute("contenteditable")!==null}m(vU,"focusInInput");var xU="attached-mdx",Kce="unattached-mdx";function wU({tags:t}){return t?.includes(Kce)||t?.includes(xU)}m(wU,"isMdxEntry");function mb(t){return t.type==="story"}m(mb,"isStoryRender");function EU(t){return t.type==="docs"}m(EU,"isDocsRender");function TU(t){return EU(t)&&t.subtype==="csf"}m(TU,"isCsfDocsRender");var SU=class extends gU{constructor(e,r,n,i){super(e,r,void 0,!1),this.importFn=e,this.getProjectAnnotations=r,this.selectionStore=n,this.view=i,this.initialize()}setupListeners(){super.setupListeners(),Zce.onkeydown=this.onKeydown.bind(this),this.channel.on(jC,this.onSetCurrentStory.bind(this)),this.channel.on(RN,this.onUpdateQueryParams.bind(this)),this.channel.on(gN,this.onPreloadStories.bind(this))}async setInitialGlobals(){if(!this.storyStoreValue)throw new ts({methodName:"setInitialGlobals"});const{globals:e}=this.selectionStore.selectionSpecifier||{};e&&this.storyStoreValue.userGlobals.updateFromPersisted(e),this.emitGlobals()}async initializeWithStoryIndex(e){return await super.initializeWithStoryIndex(e),this.selectSpecifiedStory()}async selectSpecifiedStory(){if(!this.storyStoreValue)throw new ts({methodName:"selectSpecifiedStory"});if(this.selectionStore.selection){await this.renderSelection();return}if(!this.selectionStore.selectionSpecifier){this.renderMissingStory();return}const{storySpecifier:e,args:r}=this.selectionStore.selectionSpecifier,n=this.storyStoreValue.storyIndex.entryFromSpecifier(e);if(!n){e==="*"?this.renderStoryLoadingException(e,new fF):this.renderStoryLoadingException(e,new gF({storySpecifier:e.toString()}));return}const{id:i,type:l}=n;this.selectionStore.setSelection({storyId:i,viewMode:l}),this.channel.emit(SN,this.selectionStore.selection),this.channel.emit(GT,this.selectionStore.selection),await this.renderSelection({persistedArgs:r})}async onGetProjectAnnotationsChanged({getProjectAnnotations:e}){await super.onGetProjectAnnotationsChanged({getProjectAnnotations:e}),this.selectionStore.selection&&this.renderSelection()}async onStoriesChanged({importFn:e,storyIndex:r}){await super.onStoriesChanged({importFn:e,storyIndex:r}),this.selectionStore.selection?await this.renderSelection():await this.selectSpecifiedStory()}onKeydown(e){if(!this.storyRenders.find(r=>r.disableKeyListeners)&&!vU(e)){const{altKey:r,ctrlKey:n,metaKey:i,shiftKey:l,key:c,code:s,keyCode:p}=e;this.channel.emit(_N,{event:{altKey:r,ctrlKey:n,metaKey:i,shiftKey:l,key:c,code:s,keyCode:p}})}}async onSetCurrentStory(e){this.selectionStore.setSelection({viewMode:"story",...e}),await this.storeInitializationPromise,this.channel.emit(GT,this.selectionStore.selection),this.renderSelection()}onUpdateQueryParams(e){this.selectionStore.setQueryParams(e)}async onUpdateGlobals({globals:e}){const r=this.currentRender instanceof j2&&this.currentRender.story||void 0;super.onUpdateGlobals({globals:e,currentStory:r}),(this.currentRender instanceof qk||this.currentRender instanceof Bk)&&await this.currentRender.rerender?.()}async onUpdateArgs({storyId:e,updatedArgs:r}){super.onUpdateArgs({storyId:e,updatedArgs:r})}async onPreloadStories({ids:e}){await this.storeInitializationPromise,this.storyStoreValue&&await Promise.allSettled(e.map(r=>this.storyStoreValue?.loadEntry(r)))}async renderSelection({persistedArgs:e}={}){const{renderToCanvas:r}=this;if(!this.storyStoreValue||!r)throw new ts({methodName:"renderSelection"});const{selection:n}=this.selectionStore;if(!n)throw new Error("Cannot call renderSelection as no selection was made");const{storyId:i}=n;let l;try{l=await this.storyStoreValue.storyIdToEntry(i)}catch(P){this.currentRender&&await this.teardownRender(this.currentRender),this.renderStoryLoadingException(i,P);return}const c=this.currentSelection?.storyId!==i,s=this.currentRender?.type!==l.type;l.type==="story"?this.view.showPreparingStory({immediate:s}):this.view.showPreparingDocs({immediate:s}),this.currentRender?.isPreparing()&&await this.teardownRender(this.currentRender);let p;l.type==="story"?p=new j2(this.channel,this.storyStoreValue,r,this.mainStoryCallbacks(i),i,"story"):wU(l)?p=new qk(this.channel,this.storyStoreValue,l,this.mainStoryCallbacks(i)):p=new Bk(this.channel,this.storyStoreValue,l,this.mainStoryCallbacks(i));const g=this.currentSelection;this.currentSelection=n;const _=this.currentRender;this.currentRender=p;try{await p.prepare()}catch(P){_&&await this.teardownRender(_),P!==wx&&this.renderStoryLoadingException(i,P);return}const x=!c&&_&&!p.isEqual(_);if(e&&mb(p)&&(Oa(!!p.story),this.storyStoreValue.args.updateFromPersisted(p.story,e)),_&&!_.torndown&&!c&&!x&&!s){this.currentRender=_,this.channel.emit(PN,i),this.view.showMain();return}if(_&&await this.teardownRender(_,{viewModeChanged:s}),g&&(c||s)&&this.channel.emit(xN,i),mb(p)){Oa(!!p.story);const{parameters:P,initialArgs:A,argTypes:M,unmappedArgs:F,initialGlobals:z,userGlobals:j,storyGlobals:$,globals:W}=this.storyStoreValue.getStoryContext(p.story);this.channel.emit(TN,{id:i,parameters:P,initialArgs:A,argTypes:M,args:F}),this.channel.emit(Hg,{userGlobals:j,storyGlobals:$,globals:W,initialGlobals:z})}else{let{parameters:P}=this.storyStoreValue.projectAnnotations;const{initialGlobals:A,globals:M}=this.storyStoreValue.userGlobals;if(this.channel.emit(Hg,{globals:M,initialGlobals:A,storyGlobals:{},userGlobals:M}),TU(p)||p.entry.tags?.includes(xU)){if(!p.csfFiles)throw new dF({storyId:i});({parameters:P}=this.storyStoreValue.preparedMetaFromCSFFile({csfFile:p.csfFiles[0]}))}this.channel.emit(pN,{id:i,parameters:P})}mb(p)?(Oa(!!p.story),this.storyRenders.push(p),this.currentRender.renderToElement(this.view.prepareForStory(p.story))):this.currentRender.renderToElement(this.view.prepareForDocs(),this.renderStoryToElement.bind(this))}async teardownRender(e,{viewModeChanged:r=!1}={}){this.storyRenders=this.storyRenders.filter(n=>n!==e),await e?.teardown?.({viewModeChanged:r})}mainStoryCallbacks(e){return{showStoryDuringRender:m(()=>this.view.showStoryDuringRender(),"showStoryDuringRender"),showMain:m(()=>this.view.showMain(),"showMain"),showError:m(r=>this.renderError(e,r),"showError"),showException:m(r=>this.renderException(e,r),"showException")}}renderPreviewEntryError(e,r){super.renderPreviewEntryError(e,r),this.view.showErrorDisplay(r)}renderMissingStory(){this.view.showNoPreview(),this.channel.emit(HT)}renderStoryLoadingException(e,r){Bn.error(r),this.view.showErrorDisplay(r),this.channel.emit(HT,e)}renderException(e,r){const{name:n="Error",message:i=String(r),stack:l}=r,c=this.currentRender?.renderId;this.channel.emit(CN,{name:n,message:i,stack:l}),this.channel.emit(Ih,{newPhase:"errored",renderId:c,storyId:e}),this.view.showErrorDisplay(r),Bn.error(`Error rendering story '${e}':`),Bn.error(r)}renderError(e,{title:r,description:n}){const i=this.currentRender?.renderId;this.channel.emit(wN,{title:r,description:n}),this.channel.emit(Ih,{newPhase:"errored",renderId:i,storyId:e}),this.view.showErrorDisplay({message:r,stack:n}),Bn.error(`Error rendering story ${r}: ${n}`)}};m(SU,"PreviewWithSelection");var CU=SU,B2=Ti(kC(),1),Yce=Ti(kC(),1),$k=/^[a-zA-Z0-9 _-]*$/,PU=/^-?[0-9]+(\.[0-9]+)?$/,Xce=/^#([a-f0-9]{3,4}|[a-f0-9]{6}|[a-f0-9]{8})$/i,AU=/^(rgba?|hsla?)\(([0-9]{1,3}),\s?([0-9]{1,3})%?,\s?([0-9]{1,3})%?,?\s?([0-9](\.[0-9]{1,2})?)?\)$/i,q2=m((t="",e)=>t===null||t===""||!$k.test(t)?!1:e==null||e instanceof Date||typeof e=="number"||typeof e=="boolean"?!0:typeof e=="string"?$k.test(e)||PU.test(e)||Xce.test(e)||AU.test(e):Array.isArray(e)?e.every(r=>q2(t,r)):ia(e)?Object.entries(e).every(([r,n])=>q2(r,n)):!1,"validateArgs"),Qce={delimiter:";",nesting:!0,arrayRepeat:!0,arrayRepeatSyntax:"bracket",nestingSyntax:"js",valueDeserializer(t){if(t.startsWith("!")){if(t==="!undefined")return;if(t==="!null")return null;if(t==="!true")return!0;if(t==="!false")return!1;if(t.startsWith("!date(")&&t.endsWith(")"))return new Date(t.replaceAll(" ","+").slice(6,-1));if(t.startsWith("!hex(")&&t.endsWith(")"))return`#${t.slice(5,-1)}`;const e=t.slice(1).match(AU);if(e)return t.startsWith("!rgba")||t.startsWith("!RGBA")?`${e[1]}(${e[2]}, ${e[3]}, ${e[4]}, ${e[5]})`:t.startsWith("!hsla")||t.startsWith("!HSLA")?`${e[1]}(${e[2]}, ${e[3]}%, ${e[4]}%, ${e[5]})`:t.startsWith("!rgb")||t.startsWith("!RGB")?`${e[1]}(${e[2]}, ${e[3]}, ${e[4]})`:`${e[1]}(${e[2]}, ${e[3]}%, ${e[4]}%)`}return PU.test(t)?Number(t):t}},Vk=m(t=>{const e=t.split(";").map(r=>r.replace("=","~").replace(":","="));return Object.entries((0,Yce.parse)(e.join(";"),Qce)).reduce((r,[n,i])=>q2(n,i)?Object.assign(r,{[n]:i}):(oi.warn(Kr`
      Omitted potentially unsafe URL args.

      More info: https://storybook.js.org/docs/writing-stories/args#setting-args-through-the-url?ref=error
    `),r),{})},"parseArgsParam"),{history:RU,document:Wc}=$t;function IU(t){const e=(t||"").match(/^\/story\/(.+)/);if(!e)throw new Error(`Invalid path '${t}',  must start with '/story/'`);return e[1]}m(IU,"pathToId");var MU=m(({selection:t,extraParams:e})=>{const r=Wc?.location.search.slice(1),{path:n,selectedKind:i,selectedStory:l,...c}=(0,B2.parse)(r);return`?${(0,B2.stringify)({...c,...e,...t&&{id:t.storyId,viewMode:t.viewMode}})}`},"getQueryString"),eue=m(t=>{if(!t)return;const e=MU({selection:t}),{hash:r=""}=Wc.location;Wc.title=t.storyId,RU.replaceState({},"",`${Wc.location.pathname}${e}${r}`)},"setPath"),tue=m(t=>t!=null&&typeof t=="object"&&Array.isArray(t)===!1,"isObject"),zg=m(t=>{if(t!==void 0){if(typeof t=="string")return t;if(Array.isArray(t))return zg(t[0]);if(tue(t))return zg(Object.values(t).filter(Boolean))}},"getFirstString"),rue=m(()=>{if(typeof Wc<"u"){const t=Wc.location.search.slice(1),e=(0,B2.parse)(t),r=typeof e.args=="string"?Vk(e.args):void 0,n=typeof e.globals=="string"?Vk(e.globals):void 0;let i=zg(e.viewMode);(typeof i!="string"||!i.match(/docs|story/))&&(i="story");const l=zg(e.path),c=l?IU(l):zg(e.id);if(c)return{storySpecifier:c,args:r,globals:n,viewMode:i}}return null},"getSelectionSpecifierFromPath"),OU=class{constructor(){this.selectionSpecifier=rue()}setSelection(e){this.selection=e,eue(this.selection)}setQueryParams(e){const r=MU({extraParams:e}),{hash:n=""}=Wc.location;RU.replaceState({},"",`${Wc.location.pathname}${r}${n}`)}};m(OU,"UrlStore");var kU=OU,nue=Ti(PQ(),1),iue=Ti(kC(),1),{document:ao}=$t,Uk=100,LU=(t=>(t.MAIN="MAIN",t.NOPREVIEW="NOPREVIEW",t.PREPARING_STORY="PREPARING_STORY",t.PREPARING_DOCS="PREPARING_DOCS",t.ERROR="ERROR",t))(LU||{}),ZE={PREPARING_STORY:"sb-show-preparing-story",PREPARING_DOCS:"sb-show-preparing-docs",MAIN:"sb-show-main",NOPREVIEW:"sb-show-nopreview",ERROR:"sb-show-errordisplay"},KE={centered:"sb-main-centered",fullscreen:"sb-main-fullscreen",padded:"sb-main-padded"},Gk=new nue.default({escapeXML:!0}),DU=class{constructor(){if(this.testing=!1,typeof ao<"u"){const{__SPECIAL_TEST_PARAMETER__:e}=(0,iue.parse)(ao.location.search.slice(1));switch(e){case"preparing-story":{this.showPreparingStory(),this.testing=!0;break}case"preparing-docs":{this.showPreparingDocs(),this.testing=!0;break}}}}prepareForStory(e){return this.showStory(),this.applyLayout(e.parameters.layout),ao.documentElement.scrollTop=0,ao.documentElement.scrollLeft=0,this.storyRoot()}storyRoot(){return ao.getElementById("storybook-root")}prepareForDocs(){return this.showMain(),this.showDocs(),this.applyLayout("fullscreen"),ao.documentElement.scrollTop=0,ao.documentElement.scrollLeft=0,this.docsRoot()}docsRoot(){return ao.getElementById("storybook-docs")}applyLayout(e="padded"){if(e==="none"){ao.body.classList.remove(this.currentLayoutClass),this.currentLayoutClass=null;return}this.checkIfLayoutExists(e);const r=KE[e];ao.body.classList.remove(this.currentLayoutClass),ao.body.classList.add(r),this.currentLayoutClass=r}checkIfLayoutExists(e){KE[e]||Bn.warn(Kr`
          The desired layout: ${e} is not a valid option.
          The possible options are: ${Object.keys(KE).join(", ")}, none.
        `)}showMode(e){clearTimeout(this.preparingTimeout),Object.keys(LU).forEach(r=>{r===e?ao.body.classList.add(ZE[r]):ao.body.classList.remove(ZE[r])})}showErrorDisplay({message:e="",stack:r=""}){let n=e,i=r;const l=e.split(`
`);l.length>1&&([n]=l,i=l.slice(1).join(`
`).replace(/^\n/,"")),ao.getElementById("error-message").innerHTML=Gk.toHtml(n),ao.getElementById("error-stack").innerHTML=Gk.toHtml(i),this.showMode("ERROR")}showNoPreview(){this.testing||(this.showMode("NOPREVIEW"),this.storyRoot()?.setAttribute("hidden","true"),this.docsRoot()?.setAttribute("hidden","true"))}showPreparingStory({immediate:e=!1}={}){clearTimeout(this.preparingTimeout),e?this.showMode("PREPARING_STORY"):this.preparingTimeout=setTimeout(()=>this.showMode("PREPARING_STORY"),Uk)}showPreparingDocs({immediate:e=!1}={}){clearTimeout(this.preparingTimeout),e?this.showMode("PREPARING_DOCS"):this.preparingTimeout=setTimeout(()=>this.showMode("PREPARING_DOCS"),Uk)}showMain(){this.showMode("MAIN")}showDocs(){this.storyRoot().setAttribute("hidden","true"),this.docsRoot().removeAttribute("hidden")}showStory(){this.docsRoot().setAttribute("hidden","true"),this.storyRoot().removeAttribute("hidden")}showStoryDuringRender(){ao.body.classList.add(ZE.MAIN)}};m(DU,"WebView");var NU=DU,FU=class extends CU{constructor(e,r){super(e,r,new kU,new NU),this.importFn=e,this.getProjectAnnotations=r,$t.__STORYBOOK_PREVIEW__=this}};m(FU,"PreviewWeb");var oue=FU,{document:vh}=$t,sue=["application/javascript","application/ecmascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript","module"],aue="script",Hk="scripts-root";function _v(){const t=vh.createEvent("Event");t.initEvent("DOMContentLoaded",!0,!0),vh.dispatchEvent(t)}m(_v,"simulateDOMContentLoaded");function zU(t,e,r){const n=vh.createElement("script");n.type=t.type==="module"?"module":"text/javascript",t.src?(n.onload=e,n.onerror=e,n.src=t.src):n.textContent=t.innerText,r?r.appendChild(n):vh.head.appendChild(n),t.parentNode.removeChild(t),t.src||e()}m(zU,"insertScript");function qI(t,e,r=0){t[r](()=>{r++,r===t.length?e():qI(t,e,r)})}m(qI,"insertScriptsSequentially");function jU(t){let e=vh.getElementById(Hk);e?e.innerHTML="":(e=vh.createElement("div"),e.id=Hk,vh.body.appendChild(e));const r=Array.from(t.querySelectorAll(aue));if(r.length){const n=[];r.forEach(i=>{const l=i.getAttribute("type");(!l||sue.includes(l))&&n.push(c=>zU(i,c,e))}),n.length&&qI(n,_v,void 0)}else _v()}m(jU,"simulatePageLoad");var YE;(function(t){t.start="/**",t.nostart="/***",t.delim="*",t.end="*/"})(YE=YE||(YE={}));function BU(t){return t.start+t.delimiter+t.postDelimiter+t.tag+t.postTag+t.type+t.postType+t.name+t.postName+t.description+t.end+t.lineEnd}m(BU,"join");function lue(){return t=>t.source.map(({tokens:e})=>BU(e)).join(`
`)}m(lue,"getStringifier");var cue=Ti(AQ(),1),rd=(0,cue.stringifyRules)(),uue=rd.JsdocTypeObject;rd.JsdocTypeAny=()=>"any";rd.JsdocTypeObject=(t,e)=>`(${uue(t,e)})`;rd.JsdocTypeOptional=(t,e)=>e(t.element);rd.JsdocTypeNullable=(t,e)=>e(t.element);rd.JsdocTypeNotNullable=(t,e)=>e(t.element);rd.JsdocTypeUnion=(t,e)=>t.elements.map(e).join("|");var hue="storybook/docs",due=`${hue}/snippet-rendered`;async function qU(t,e){const r=e.parameters?.docs?.source?.transform,{id:n,unmappedArgs:i}=e,l=r&&t?r?.(t,e):t,c=l?await l:void 0;ks.getChannel().emit(due,{id:n,source:c,args:i})}m(qU,"emitTransformCode");var py={depth:10,clearOnStoryChange:!0,limit:50},pue=m((t={})=>{Object.assign(py,t)},"configureActions"),$U=m((t,e)=>{const r=Object.getPrototypeOf(t);return!r||e(r)?r:$U(r,e)},"findProto"),fue=m(t=>!!(typeof t=="object"&&t&&$U(t,e=>/^Synthetic(?:Base)?Event$/.test(e.constructor.name))&&typeof t.persist=="function"),"isReactSyntheticEvent"),mue=m(t=>{if(fue(t)){const e=Object.create(t.constructor.prototype,Object.getOwnPropertyDescriptors(t));e.persist();const r=Object.getOwnPropertyDescriptor(e,"view"),n=r?.value;return typeof n=="object"&&n?.constructor.name==="Window"&&Object.defineProperty(e,"view",{...r,value:Object.create(n.constructor.prototype)}),e}return t},"serializeArg");function Ff(t,e={}){const r={...py,...e},n=m(function(...l){if(e.implicit){const A=("__STORYBOOK_PREVIEW__"in $t?$t.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find(M=>M.phase==="playing"||M.phase==="rendering");if(A){const M=!globalThis?.FEATURES?.disallowImplicitActionsInRenderV8,F=new nF({phase:A.phase,name:t,deprecated:M});if(M)console.warn(F);else throw F}}const c=ks.getChannel(),s=Date.now().toString(36)+Math.random().toString(36).substring(2),p=5,g=l.map(mue),_=l.length>1?g:g[0],x={id:s,count:0,data:{name:t,args:_},options:{...r,maxDepth:p+(r.depth||3)}};c.emit(DF,x)},"actionHandler");return n.isAction=!0,n.implicit=e.implicit,n}m(Ff,"action");var gue=m((...t)=>{let e=py,r=t;r.length===1&&Array.isArray(r[0])&&([r]=r),r.length!==1&&typeof r[r.length-1]!="string"&&(e={...py,...r.pop()});let n=r[0];(r.length!==1||typeof n=="string")&&(n={},r.forEach(l=>{n[l]=l}));const i={};return Object.keys(n).forEach(l=>{i[l]=Ff(n[l],e)}),i},"actions"),yue={"@storybook/global":ON,"storybook/test":r6,"storybook/actions":LF,"storybook/preview-api":XT,"storybook/internal/channels":LN,"storybook/internal/client-logger":NN,"storybook/internal/core-events":LC,"storybook/internal/types":OF,"storybook/internal/preview-errors":K4,"storybook/internal/preview-api":XT};async function VU(){const t=new URL(window.location.href);if(t.searchParams.get("navigator")!=="true"||globalThis.__STORYBOOK_PREVIEW_NAVIGATOR__)return;globalThis.__STORYBOOK_PREVIEW_NAVIGATOR__=!0;const e=await(await fetch("/index.json")).json(),r=t.searchParams.get("id");if(!r){const n=Object.values(e.entries)[0];n&&(t.searchParams.set("id",n.id),t.searchParams.set("viewMode",n.type),window.location.href=t.toString());return}_ue(e,r)}m(VU,"maybeSetupPreviewNavigator");var _ue=m(async(t,e)=>{const r={entries:{}};for(const s of Object.values(t.entries)){const p=s.title.split("/");let g=r;for(const _ of p)g.entries||(g.entries={}),g.entries[_]?e===s.id&&(g.entries[_].isActive=!0):g.entries[_]={title:_,isActive:e===s.id,entries:{}},g=g.entries[_];g.entries||(g.entries={}),g.entries[s.name]={id:s.id,name:s.name,href:`?id=${s.id}&viewMode=${s.type}&navigator=true`,isActive:e===s.id}}const n=m(s=>{if("entries"in s&&"title"in s){const g=s;return`
      <li class="sb-navigator-branch">
        <details${g.isActive?" open":""}>
          <summary class="sb-navigator-title">
            ${g.title}
          </summary>
          <ul class="sb-navigator-entries" aria-label="${g.title}">
            ${Object.values(g.entries).map(n).join("")}
          </ul>
        </details>
      </li>
      `}const p=s;return`
      <li class="sb-navigator-story-item">
        <a href="${p.href}" 
           class="sb-navigator-story-link${p.isActive?" active":""}" 
           aria-current="${p.isActive?"location":"false"}">${p.name}</a>
      </li>
    `},"createHtmlForNode"),i=Object.values(r.entries).map(n).join(""),l=document.createElement("nav");l.id="sb-navigator-container",l.setAttribute("role","navigation"),l.setAttribute("aria-label","Story navigation"),l.innerHTML=`
    <ul class="sb-navigator-list">${i}</ul>
  `,document.body.insertBefore(l,document.body.firstChild);const c=document.createElement("style");c.id="sb-navigator-style",c.textContent=`
    body {
      display: grid !important;
      grid-template-columns: 300px 1fr;
      font-family: 'Nunito', sans-serif;
      height: 100vh;
      margin: 0;

      --text-color: rgb(46, 52, 56);
      --bg-color: rgb(246, 249, 252);

      @media (prefers-color-scheme: dark) {
        --text-color: rgb(201, 205, 207);
        --bg-color: rgb(34, 36, 37);
      }
    }
    #storybook-root, #storybook-docs {
      overflow-y: auto;
      max-height: 100vh;
      max-width: 100%;
    }
    #sb-navigator-container, #sb-navigator-container * {
      box-sizing: border-box;
    }
    #sb-navigator-container {
        height: 100vh;
        overflow-y: auto;
        border-right: 1px solid #eee;
        padding: 1rem;
        font-size: 14px;
        color: var(--text-color);
        background-color: var(--bg-color);
        align-self: start;
        z-index: 1000;
    }
    .sb-main-padded #sb-navigator-container {
      margin: -1rem 1rem -1rem -1rem;
    }
    .sb-navigator-list {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
    .sb-navigator-branch {
      list-style-type: none;
    }
    .sb-navigator-item {
      margin-bottom: 15px;
    }
    .sb-navigator-title {
      color: var(--text-color);
      text-decoration: none;
      padding-block: 5px;
      cursor: pointer;
    }
    .sb-navigator-entries {
      padding-left: 15px;
    }
    .sb-navigator-story-item {
      margin-bottom: 8px;
      margin-left: 8px;
    }
    .sb-navigator-story-link {
      color: var(--text-color);
    }
    .sb-navigator-story-link.active {
      font-weight: bold;
      color: rgb(2, 156, 253);
    }
  `,document.head.appendChild(c),l.querySelector(".sb-navigator-story-link.active")?.closest("details")?.scrollIntoView({block:"center"})},"setupPreviewNavigator"),bue=Ti(RQ(),1),XE;function UU(){return XE||(XE=new bue.default($t.navigator?.userAgent).getBrowserInfo()),XE}m(UU,"getBrowserInfo");function GU(t){return t.browserInfo=UU(),t}m(GU,"prepareForTelemetry");function HU(t){const e=t.error||t;e.fromStorybook&&$t.sendTelemetryError(e)}m(HU,"errorListener");function JU({reason:t}){t.fromStorybook&&$t.sendTelemetryError(t)}m(JU,"unhandledRejectionListener");function $I(){ree.forEach(t=>{$t[kN[t]]=yue[t]}),$t.sendTelemetryError=t=>{$t.__STORYBOOK_ADDONS_CHANNEL__.emit(IN,GU(t))},$t.addEventListener("error",HU),$t.addEventListener("unhandledrejection",JU),VU()}m($I,"setup");$I();const{createBrowserChannel:vue}=__STORYBOOK_MODULE_CHANNELS__,{addons:xue}=__STORYBOOK_MODULE_PREVIEW_API__,VI=vue({page:"preview"});xue.setChannel(VI);window.__STORYBOOK_ADDONS_CHANNEL__=VI;window.CONFIG_TYPE==="DEVELOPMENT"&&(window.__STORYBOOK_SERVER_CHANNEL__=VI);var wue=Object.create,Ex=Object.defineProperty,Eue=Object.getOwnPropertyDescriptor,WU=Object.getOwnPropertyNames,Tue=Object.getPrototypeOf,Sue=Object.prototype.hasOwnProperty,ye=(t,e)=>Ex(t,"name",{value:e,configurable:!0}),nxe=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),Cue=(t,e)=>function(){return e||(0,t[WU(t)[0]])((e={exports:{}}).exports,e),e.exports},ixe=(t,e)=>{for(var r in e)Ex(t,r,{get:e[r],enumerable:!0})},Pue=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of WU(e))!Sue.call(t,i)&&i!==r&&Ex(t,i,{get:()=>e[i],enumerable:!(n=Eue(e,i))||n.enumerable});return t},Aue=(t,e,r)=>(r=t!=null?wue(Tue(t)):{},Pue(e||!t||!t.__esModule?Ex(r,"default",{value:t,enumerable:!0}):r,t));function gb(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}ye(gb,"isPlainObject");function Rue(t){return t==null||typeof t!="object"&&typeof t!="function"}ye(Rue,"isPrimitive");function Iue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}ye(Iue,"isTypedArray");function Mue(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}ye(Mue,"getSymbols");function Oue(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}ye(Oue,"getTag");var oxe="[object RegExp]",sxe="[object String]",axe="[object Number]",lxe="[object Boolean]",cxe="[object Arguments]",uxe="[object Symbol]",hxe="[object Date]",dxe="[object Map]",pxe="[object Set]",fxe="[object Array]",mxe="[object Function]",gxe="[object ArrayBuffer]",yxe="[object Object]",_xe="[object Error]",bxe="[object DataView]",vxe="[object Uint8Array]",xxe="[object Uint8ClampedArray]",wxe="[object Uint16Array]",Exe="[object Uint32Array]",Txe="[object BigUint64Array]",Sxe="[object Int8Array]",Cxe="[object Int16Array]",Pxe="[object Int32Array]",Axe="[object BigInt64Array]",Rxe="[object Float32Array]",Ixe="[object Float64Array]",kue=Cue({"../node_modules/jsdoc-type-pratt-parser/dist/index.js"(t,e){(function(r,n){typeof t=="object"&&typeof e<"u"?n(t):typeof define=="function"&&define.amd?define(["exports"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.jtpp={}))})(t,function(r){function n(E){return E.text!==void 0&&E.text!==""?`'${E.type}' with value '${E.text}'`:`'${E.type}'`}ye(n,"tokenToString");const i=class ZU extends Error{constructor(D){super(`No parslet found for token: ${n(D)}`),this.token=D,Object.setPrototypeOf(this,ZU.prototype)}getToken(){return this.token}};ye(i,"NoParsletFoundError");let l=i;const c=class KU extends Error{constructor(D){super(`The parsing ended early. The next token was: ${n(D)}`),this.token=D,Object.setPrototypeOf(this,KU.prototype)}getToken(){return this.token}};ye(c,"EarlyEndOfParseError");let s=c;const p=class YU extends Error{constructor(D,J){let me=`Unexpected type: '${D.type}'.`;J!==void 0&&(me+=` Message: ${J}`),super(me),Object.setPrototypeOf(this,YU.prototype)}};ye(p,"UnexpectedTypeError");let g=p;function _(E){return D=>D.startsWith(E)?{type:E,text:E}:null}ye(_,"makePunctuationRule");function x(E){let D=0,J;const me=E[0];let ze=!1;if(me!=="'"&&me!=='"')return null;for(;D<E.length;){if(D++,J=E[D],!ze&&J===me){D++;break}ze=!ze&&J==="\\"}if(J!==me)throw new Error("Unterminated String");return E.slice(0,D)}ye(x,"getQuoted");const P=new RegExp("[$_\\p{ID_Start}]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u"),A=new RegExp("[$\\-\\p{ID_Continue}\\u200C\\u200D]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u");function M(E){let D=E[0];if(!P.test(D))return null;let J=1;do{if(D=E[J],!A.test(D))break;J++}while(J<E.length);return E.slice(0,J)}ye(M,"getIdentifier");const F=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))/;function z(E){var D,J;return(J=(D=F.exec(E))===null||D===void 0?void 0:D[0])!==null&&J!==void 0?J:null}ye(z,"getNumber");const j=ye(E=>{const D=M(E);return D==null?null:{type:"Identifier",text:D}},"identifierRule");function $(E){return D=>{if(!D.startsWith(E))return null;const J=D[E.length];return J!==void 0&&A.test(J)?null:{type:E,text:E}}}ye($,"makeKeyWordRule");const W=ye(E=>{const D=x(E);return D==null?null:{type:"StringValue",text:D}},"stringValueRule"),X=ye(E=>E.length>0?null:{type:"EOF",text:""},"eofRule"),te=ye(E=>{const D=z(E);return D===null?null:{type:"Number",text:D}},"numberRule"),ne=[X,_("=>"),_("("),_(")"),_("{"),_("}"),_("["),_("]"),_("|"),_("&"),_("<"),_(">"),_(","),_(";"),_("*"),_("?"),_("!"),_("="),_(":"),_("..."),_("."),_("#"),_("~"),_("/"),_("@"),$("undefined"),$("null"),$("function"),$("this"),$("new"),$("module"),$("event"),$("extends"),$("external"),$("infer"),$("typeof"),$("keyof"),$("readonly"),$("import"),$("is"),$("in"),$("asserts"),te,j,W],Z=/^\s*\n\s*/,U=class yb{static create(D){const J=this.read(D);D=J.text;const me=this.read(D);return D=me.text,new yb(D,void 0,J.token,me.token)}constructor(D,J,me,ze){this.text="",this.text=D,this.previous=J,this.current=me,this.next=ze}static read(D,J=!1){J=J||Z.test(D),D=D.trim();for(const me of ne){const ze=me(D);if(ze!==null){const nt=Object.assign(Object.assign({},ze),{startOfLine:J});return D=D.slice(nt.text.length),{text:D,token:nt}}}throw new Error("Unexpected Token "+D)}advance(){const D=yb.read(this.text);return new yb(D.text,this.current,this.next,D.token)}};ye(U,"Lexer");let K=U;function he(E){if(E===void 0)throw new Error("Unexpected undefined");if(E.type==="JsdocTypeKeyValue"||E.type==="JsdocTypeParameterList"||E.type==="JsdocTypeProperty"||E.type==="JsdocTypeReadonlyProperty"||E.type==="JsdocTypeObjectField"||E.type==="JsdocTypeJsdocObjectField"||E.type==="JsdocTypeIndexSignature"||E.type==="JsdocTypeMappedType"||E.type==="JsdocTypeTypeParameter")throw new g(E);return E}ye(he,"assertRootResult");function ue(E){return E.type==="JsdocTypeKeyValue"?Ie(E):he(E)}ye(ue,"assertPlainKeyValueOrRootResult");function we(E){return E.type==="JsdocTypeName"?E:Ie(E)}ye(we,"assertPlainKeyValueOrNameResult");function Ie(E){if(E.type!=="JsdocTypeKeyValue")throw new g(E);return E}ye(Ie,"assertPlainKeyValueResult");function ee(E){var D;if(E.type==="JsdocTypeVariadic"){if(((D=E.element)===null||D===void 0?void 0:D.type)==="JsdocTypeName")return E;throw new g(E)}if(E.type!=="JsdocTypeNumber"&&E.type!=="JsdocTypeName")throw new g(E);return E}ye(ee,"assertNumberOrVariadicNameResult");function fe(E){if(E.type==="JsdocTypeTuple"||E.type==="JsdocTypeGeneric"&&E.meta.brackets==="square")return E;throw new g(E)}ye(fe,"assertArrayOrTupleResult");function ve(E){return E.type==="JsdocTypeIndexSignature"||E.type==="JsdocTypeMappedType"}ye(ve,"isSquaredProperty");var xe;(function(E){E[E.ALL=0]="ALL",E[E.PARAMETER_LIST=1]="PARAMETER_LIST",E[E.OBJECT=2]="OBJECT",E[E.KEY_VALUE=3]="KEY_VALUE",E[E.INDEX_BRACKETS=4]="INDEX_BRACKETS",E[E.UNION=5]="UNION",E[E.INTERSECTION=6]="INTERSECTION",E[E.PREFIX=7]="PREFIX",E[E.INFIX=8]="INFIX",E[E.TUPLE=9]="TUPLE",E[E.SYMBOL=10]="SYMBOL",E[E.OPTIONAL=11]="OPTIONAL",E[E.NULLABLE=12]="NULLABLE",E[E.KEY_OF_TYPE_OF=13]="KEY_OF_TYPE_OF",E[E.FUNCTION=14]="FUNCTION",E[E.ARROW=15]="ARROW",E[E.ARRAY_BRACKETS=16]="ARRAY_BRACKETS",E[E.GENERIC=17]="GENERIC",E[E.NAME_PATH=18]="NAME_PATH",E[E.PARENTHESIS=19]="PARENTHESIS",E[E.SPECIAL_TYPES=20]="SPECIAL_TYPES"})(xe||(xe={}));const Xe=class{constructor(D,J,me){this.grammar=D,typeof J=="string"?this._lexer=K.create(J):this._lexer=J,this.baseParser=me}get lexer(){return this._lexer}parse(){const D=this.parseType(xe.ALL);if(this.lexer.current.type!=="EOF")throw new s(this.lexer.current);return D}parseType(D){return he(this.parseIntermediateType(D))}parseIntermediateType(D){const J=this.tryParslets(null,D);if(J===null)throw new l(this.lexer.current);return this.parseInfixIntermediateType(J,D)}parseInfixIntermediateType(D,J){let me=this.tryParslets(D,J);for(;me!==null;)D=me,me=this.tryParslets(D,J);return D}tryParslets(D,J){for(const me of this.grammar){const ze=me(this,J,D);if(ze!==null)return ze}return null}consume(D){return Array.isArray(D)||(D=[D]),D.includes(this.lexer.current.type)?(this._lexer=this.lexer.advance(),!0):!1}acceptLexerState(D){this._lexer=D.lexer}};ye(Xe,"Parser");let Ke=Xe;function Ze(E){return E==="}"||E==="EOF"||E==="|"||E===","||E===")"||E===">"}ye(Ze,"isQuestionMarkUnknownType");const bt=ye((E,D,J)=>{const me=E.lexer.current.type,ze=E.lexer.next.type;return J==null&&me==="?"&&!Ze(ze)||J!=null&&me==="?"?(E.consume("?"),J==null?{type:"JsdocTypeNullable",element:E.parseType(xe.NULLABLE),meta:{position:"prefix"}}:{type:"JsdocTypeNullable",element:he(J),meta:{position:"suffix"}}):null},"nullableParslet");function qe(E){const D=ye((J,me,ze)=>{const nt=J.lexer.current.type,St=J.lexer.next.type;if(ze===null){if("parsePrefix"in E&&E.accept(nt,St))return E.parsePrefix(J)}else if("parseInfix"in E&&E.precedence>me&&E.accept(nt,St))return E.parseInfix(J,ze);return null},"parslet");return Object.defineProperty(D,"name",{value:E.name}),D}ye(qe,"composeParslet");const kt=qe({name:"optionalParslet",accept:ye(E=>E==="=","accept"),precedence:xe.OPTIONAL,parsePrefix:ye(E=>(E.consume("="),{type:"JsdocTypeOptional",element:E.parseType(xe.OPTIONAL),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:ye((E,D)=>(E.consume("="),{type:"JsdocTypeOptional",element:he(D),meta:{position:"suffix"}}),"parseInfix")}),Jt=qe({name:"numberParslet",accept:ye(E=>E==="Number","accept"),parsePrefix:ye(E=>{const D=parseFloat(E.lexer.current.text);return E.consume("Number"),{type:"JsdocTypeNumber",value:D}},"parsePrefix")}),Pt=qe({name:"parenthesisParslet",accept:ye(E=>E==="(","accept"),parsePrefix:ye(E=>{if(E.consume("("),E.consume(")"))return{type:"JsdocTypeParameterList",elements:[]};const D=E.parseIntermediateType(xe.ALL);if(!E.consume(")"))throw new Error("Unterminated parenthesis");return D.type==="JsdocTypeParameterList"?D:D.type==="JsdocTypeKeyValue"?{type:"JsdocTypeParameterList",elements:[D]}:{type:"JsdocTypeParenthesis",element:he(D)}},"parsePrefix")}),dt=qe({name:"specialTypesParslet",accept:ye((E,D)=>E==="?"&&Ze(D)||E==="null"||E==="undefined"||E==="*","accept"),parsePrefix:ye(E=>{if(E.consume("null"))return{type:"JsdocTypeNull"};if(E.consume("undefined"))return{type:"JsdocTypeUndefined"};if(E.consume("*"))return{type:"JsdocTypeAny"};if(E.consume("?"))return{type:"JsdocTypeUnknown"};throw new Error("Unacceptable token: "+E.lexer.current.text)},"parsePrefix")}),er=qe({name:"notNullableParslet",accept:ye(E=>E==="!","accept"),precedence:xe.NULLABLE,parsePrefix:ye(E=>(E.consume("!"),{type:"JsdocTypeNotNullable",element:E.parseType(xe.NULLABLE),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:ye((E,D)=>(E.consume("!"),{type:"JsdocTypeNotNullable",element:he(D),meta:{position:"suffix"}}),"parseInfix")});function Wt({allowTrailingComma:E}){return qe({name:"parameterListParslet",accept:ye(D=>D===",","accept"),precedence:xe.PARAMETER_LIST,parseInfix:ye((D,J)=>{const me=[ue(J)];D.consume(",");do try{const ze=D.parseIntermediateType(xe.PARAMETER_LIST);me.push(ue(ze))}catch(ze){if(ze instanceof l)break;throw ze}while(D.consume(","));if(me.length>0&&me.slice(0,-1).some(ze=>ze.type==="JsdocTypeVariadic"))throw new Error("Only the last parameter may be a rest parameter");return{type:"JsdocTypeParameterList",elements:me}},"parseInfix")})}ye(Wt,"createParameterListParslet");const ar=qe({name:"genericParslet",accept:ye((E,D)=>E==="<"||E==="."&&D==="<","accept"),precedence:xe.GENERIC,parseInfix:ye((E,D)=>{const J=E.consume(".");E.consume("<");const me=[];let ze=!1;if(E.consume("infer")){ze=!0;const nt=E.parseIntermediateType(xe.SYMBOL);if(nt.type!=="JsdocTypeName")throw new g(nt,"A typescript asserts always has to have a name on the left side.");me.push(nt)}else do me.push(E.parseType(xe.PARAMETER_LIST));while(E.consume(","));if(!E.consume(">"))throw new Error("Unterminated generic parameter list");return Object.assign(Object.assign({type:"JsdocTypeGeneric",left:he(D),elements:me},ze?{infer:!0}:{}),{meta:{brackets:"angle",dot:J}})},"parseInfix")}),_t=qe({name:"unionParslet",accept:ye(E=>E==="|","accept"),precedence:xe.UNION,parseInfix:ye((E,D)=>{E.consume("|");const J=[];do J.push(E.parseType(xe.UNION));while(E.consume("|"));return{type:"JsdocTypeUnion",elements:[he(D),...J]}},"parseInfix")}),Ve=[bt,kt,Jt,Pt,dt,er,Wt({allowTrailingComma:!0}),ar,_t,kt];function pt({allowSquareBracketsOnAnyType:E,allowJsdocNamePaths:D,pathGrammar:J}){return ye(function(ze,nt,St){if(St==null||nt>=xe.NAME_PATH)return null;const rr=ze.lexer.current.type,Jr=ze.lexer.next.type;if(!(rr==="."&&Jr!=="<"||rr==="["&&(E||St.type==="JsdocTypeName")||D&&(rr==="~"||rr==="#")))return null;let Xr,fo=!1;ze.consume(".")?Xr="property":ze.consume("[")?(Xr="property-brackets",fo=!0):ze.consume("~")?Xr="inner":(ze.consume("#"),Xr="instance");const ca=J!==null?new Ke(J,ze.lexer,ze):ze,$n=ca.parseIntermediateType(xe.NAME_PATH);ze.acceptLexerState(ca);let di;switch($n.type){case"JsdocTypeName":di={type:"JsdocTypeProperty",value:$n.value,meta:{quote:void 0}};break;case"JsdocTypeNumber":di={type:"JsdocTypeProperty",value:$n.value.toString(10),meta:{quote:void 0}};break;case"JsdocTypeStringValue":di={type:"JsdocTypeProperty",value:$n.value,meta:{quote:$n.meta.quote}};break;case"JsdocTypeSpecialNamePath":if($n.specialType==="event")di=$n;else throw new g($n,"Type 'JsdocTypeSpecialNamePath' is only allowed with specialType 'event'");break;default:throw new g($n,"Expecting 'JsdocTypeName', 'JsdocTypeNumber', 'JsdocStringValue' or 'JsdocTypeSpecialNamePath'")}if(fo&&!ze.consume("]")){const ua=ze.lexer.current;throw new Error(`Unterminated square brackets. Next token is '${ua.type}' with text '${ua.text}'`)}return{type:"JsdocTypeNamePath",left:he(St),right:di,pathType:Xr}},"namePathParslet")}ye(pt,"createNamePathParslet");function lt({allowedAdditionalTokens:E}){return qe({name:"nameParslet",accept:ye(D=>D==="Identifier"||D==="this"||D==="new"||E.includes(D),"accept"),parsePrefix:ye(D=>{const{type:J,text:me}=D.lexer.current;return D.consume(J),{type:"JsdocTypeName",value:me}},"parsePrefix")})}ye(lt,"createNameParslet");const Tt=qe({name:"stringValueParslet",accept:ye(E=>E==="StringValue","accept"),parsePrefix:ye(E=>{const D=E.lexer.current.text;return E.consume("StringValue"),{type:"JsdocTypeStringValue",value:D.slice(1,-1),meta:{quote:D[0]==="'"?"single":"double"}}},"parsePrefix")});function vt({pathGrammar:E,allowedTypes:D}){return qe({name:"specialNamePathParslet",accept:ye(J=>D.includes(J),"accept"),parsePrefix:ye(J=>{const me=J.lexer.current.type;if(J.consume(me),!J.consume(":"))return{type:"JsdocTypeName",value:me};let ze,nt=J.lexer.current;if(J.consume("StringValue"))ze={type:"JsdocTypeSpecialNamePath",value:nt.text.slice(1,-1),specialType:me,meta:{quote:nt.text[0]==="'"?"single":"double"}};else{let Jr="";const Ar=["Identifier","@","/"];for(;Ar.some(Xr=>J.consume(Xr));)Jr+=nt.text,nt=J.lexer.current;ze={type:"JsdocTypeSpecialNamePath",value:Jr,specialType:me,meta:{quote:void 0}}}const St=new Ke(E,J.lexer,J),rr=St.parseInfixIntermediateType(ze,xe.ALL);return J.acceptLexerState(St),he(rr)},"parsePrefix")})}ye(vt,"createSpecialNamePathParslet");const Dt=[lt({allowedAdditionalTokens:["external","module"]}),Tt,Jt,pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:null})],Yt=[...Dt,vt({allowedTypes:["event"],pathGrammar:Dt})];function Bt(E){let D;if(E.type==="JsdocTypeParameterList")D=E.elements;else if(E.type==="JsdocTypeParenthesis")D=[E.element];else throw new g(E);return D.map(J=>ue(J))}ye(Bt,"getParameters");function wr(E){const D=Bt(E);if(D.some(J=>J.type==="JsdocTypeKeyValue"))throw new Error("No parameter should be named");return D}ye(wr,"getUnnamedParameters");function Vr({allowNamedParameters:E,allowNoReturnType:D,allowWithoutParenthesis:J,allowNewAsFunctionKeyword:me}){return qe({name:"functionParslet",accept:ye((ze,nt)=>ze==="function"||me&&ze==="new"&&nt==="(","accept"),parsePrefix:ye(ze=>{const nt=ze.consume("new");ze.consume("function");const St=ze.lexer.current.type==="(";if(!St){if(!J)throw new Error("function is missing parameter list");return{type:"JsdocTypeName",value:"function"}}let rr={type:"JsdocTypeFunction",parameters:[],arrow:!1,constructor:nt,parenthesis:St};const Jr=ze.parseIntermediateType(xe.FUNCTION);if(E===void 0)rr.parameters=wr(Jr);else{if(nt&&Jr.type==="JsdocTypeFunction"&&Jr.arrow)return rr=Jr,rr.constructor=!0,rr;rr.parameters=Bt(Jr);for(const Ar of rr.parameters)if(Ar.type==="JsdocTypeKeyValue"&&!E.includes(Ar.key))throw new Error(`only allowed named parameters are ${E.join(", ")} but got ${Ar.type}`)}if(ze.consume(":"))rr.returnType=ze.parseType(xe.PREFIX);else if(!D)throw new Error("function is missing return type");return rr},"parsePrefix")})}ye(Vr,"createFunctionParslet");function Ir({allowPostfix:E,allowEnclosingBrackets:D}){return qe({name:"variadicParslet",accept:ye(J=>J==="...","accept"),precedence:xe.PREFIX,parsePrefix:ye(J=>{J.consume("...");const me=D&&J.consume("[");try{const ze=J.parseType(xe.PREFIX);if(me&&!J.consume("]"))throw new Error("Unterminated variadic type. Missing ']'");return{type:"JsdocTypeVariadic",element:he(ze),meta:{position:"prefix",squareBrackets:me}}}catch(ze){if(ze instanceof l){if(me)throw new Error("Empty square brackets for variadic are not allowed.");return{type:"JsdocTypeVariadic",meta:{position:void 0,squareBrackets:!1}}}else throw ze}},"parsePrefix"),parseInfix:E?(J,me)=>(J.consume("..."),{type:"JsdocTypeVariadic",element:he(me),meta:{position:"suffix",squareBrackets:!1}}):void 0})}ye(Ir,"createVariadicParslet");const Zr=qe({name:"symbolParslet",accept:ye(E=>E==="(","accept"),precedence:xe.SYMBOL,parseInfix:ye((E,D)=>{if(D.type!=="JsdocTypeName")throw new Error("Symbol expects a name on the left side. (Reacting on '(')");E.consume("(");const J={type:"JsdocTypeSymbol",value:D.value};if(!E.consume(")")){const me=E.parseIntermediateType(xe.SYMBOL);if(J.element=ee(me),!E.consume(")"))throw new Error("Symbol does not end after value")}return J},"parseInfix")}),yr=qe({name:"arrayBracketsParslet",precedence:xe.ARRAY_BRACKETS,accept:ye((E,D)=>E==="["&&D==="]","accept"),parseInfix:ye((E,D)=>(E.consume("["),E.consume("]"),{type:"JsdocTypeGeneric",left:{type:"JsdocTypeName",value:"Array"},elements:[he(D)],meta:{brackets:"square",dot:!1}}),"parseInfix")});function ur({objectFieldGrammar:E,allowKeyTypes:D}){return qe({name:"objectParslet",accept:ye(J=>J==="{","accept"),parsePrefix:ye(J=>{J.consume("{");const me={type:"JsdocTypeObject",meta:{separator:"comma"},elements:[]};if(!J.consume("}")){let ze;const nt=new Ke(E,J.lexer,J);for(;;){nt.acceptLexerState(J);let St=nt.parseIntermediateType(xe.OBJECT);J.acceptLexerState(nt),St===void 0&&D&&(St=J.parseIntermediateType(xe.OBJECT));let rr=!1;if(St.type==="JsdocTypeNullable"&&(rr=!0,St=St.element),St.type==="JsdocTypeNumber"||St.type==="JsdocTypeName"||St.type==="JsdocTypeStringValue"){let Ar;St.type==="JsdocTypeStringValue"&&(Ar=St.meta.quote),me.elements.push({type:"JsdocTypeObjectField",key:St.value.toString(),right:void 0,optional:rr,readonly:!1,meta:{quote:Ar}})}else if(St.type==="JsdocTypeObjectField"||St.type==="JsdocTypeJsdocObjectField")me.elements.push(St);else throw new g(St);if(J.lexer.current.startOfLine)ze="linebreak",J.consume(",")||J.consume(";");else if(J.consume(","))ze="comma";else if(J.consume(";"))ze="semicolon";else break;if(J.lexer.current.type==="}")break}if(me.meta.separator=ze??"comma",ze==="linebreak"&&(me.meta.propertyIndent="  "),!J.consume("}"))throw new Error("Unterminated record type. Missing '}'")}return me},"parsePrefix")})}ye(ur,"createObjectParslet");function lr({allowSquaredProperties:E,allowKeyTypes:D,allowReadonly:J,allowOptional:me}){return qe({name:"objectFieldParslet",precedence:xe.KEY_VALUE,accept:ye(ze=>ze===":","accept"),parseInfix:ye((ze,nt)=>{var St;let rr=!1,Jr=!1;me&&nt.type==="JsdocTypeNullable"&&(rr=!0,nt=nt.element),J&&nt.type==="JsdocTypeReadonlyProperty"&&(Jr=!0,nt=nt.element);const Ar=(St=ze.baseParser)!==null&&St!==void 0?St:ze;if(Ar.acceptLexerState(ze),nt.type==="JsdocTypeNumber"||nt.type==="JsdocTypeName"||nt.type==="JsdocTypeStringValue"||ve(nt)){if(ve(nt)&&!E)throw new g(nt);Ar.consume(":");let Xr;nt.type==="JsdocTypeStringValue"&&(Xr=nt.meta.quote);const fo=Ar.parseType(xe.KEY_VALUE);return ze.acceptLexerState(Ar),{type:"JsdocTypeObjectField",key:ve(nt)?nt:nt.value.toString(),right:fo,optional:rr,readonly:Jr,meta:{quote:Xr}}}else{if(!D)throw new g(nt);Ar.consume(":");const Xr=Ar.parseType(xe.KEY_VALUE);return ze.acceptLexerState(Ar),{type:"JsdocTypeJsdocObjectField",left:he(nt),right:Xr}}},"parseInfix")})}ye(lr,"createObjectFieldParslet");function nr({allowOptional:E,allowVariadic:D}){return qe({name:"keyValueParslet",precedence:xe.KEY_VALUE,accept:ye(J=>J===":","accept"),parseInfix:ye((J,me)=>{let ze=!1,nt=!1;if(E&&me.type==="JsdocTypeNullable"&&(ze=!0,me=me.element),D&&me.type==="JsdocTypeVariadic"&&me.element!==void 0&&(nt=!0,me=me.element),me.type!=="JsdocTypeName")throw new g(me);J.consume(":");const St=J.parseType(xe.KEY_VALUE);return{type:"JsdocTypeKeyValue",key:me.value,right:St,optional:ze,variadic:nt}},"parseInfix")})}ye(nr,"createKeyValueParslet");const mr=[...Ve,Vr({allowWithoutParenthesis:!0,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),Tt,vt({allowedTypes:["module","external","event"],pathGrammar:Yt}),Ir({allowEnclosingBrackets:!0,allowPostfix:!0}),lt({allowedAdditionalTokens:["keyof"]}),Zr,yr,pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:Yt})],Yr=[...mr,ur({objectFieldGrammar:[lt({allowedAdditionalTokens:["typeof","module","in"]}),lr({allowSquaredProperties:!1,allowKeyTypes:!0,allowOptional:!1,allowReadonly:!1}),...mr],allowKeyTypes:!0}),nr({allowOptional:!0,allowVariadic:!0})],ke=qe({name:"typeOfParslet",accept:ye(E=>E==="typeof","accept"),parsePrefix:ye(E=>(E.consume("typeof"),{type:"JsdocTypeTypeof",element:E.parseType(xe.KEY_OF_TYPE_OF)}),"parsePrefix")}),oe=[lt({allowedAdditionalTokens:["typeof","module","keyof","event","external","in"]}),bt,kt,Tt,Jt,lr({allowSquaredProperties:!1,allowKeyTypes:!1,allowOptional:!1,allowReadonly:!1})],ae=[...Ve,ur({allowKeyTypes:!1,objectFieldGrammar:oe}),lt({allowedAdditionalTokens:["event","external","in"]}),ke,Vr({allowWithoutParenthesis:!1,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),Ir({allowEnclosingBrackets:!1,allowPostfix:!1}),lt({allowedAdditionalTokens:["keyof"]}),vt({allowedTypes:["module"],pathGrammar:Yt}),pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:Yt}),nr({allowOptional:!1,allowVariadic:!1}),Zr],de=qe({name:"assertsParslet",accept:ye(E=>E==="asserts","accept"),parsePrefix:ye(E=>{E.consume("asserts");const D=E.parseIntermediateType(xe.SYMBOL);if(D.type!=="JsdocTypeName")throw new g(D,"A typescript asserts always has to have a name on the left side.");return E.consume("is")?{type:"JsdocTypeAsserts",left:D,right:he(E.parseIntermediateType(xe.INFIX))}:{type:"JsdocTypeAssertsPlain",element:D}},"parsePrefix")});function Te({allowQuestionMark:E}){return qe({name:"tupleParslet",accept:ye(D=>D==="[","accept"),parsePrefix:ye(D=>{D.consume("[");const J={type:"JsdocTypeTuple",elements:[]};if(D.consume("]"))return J;const me=D.parseIntermediateType(xe.ALL);if(me.type==="JsdocTypeParameterList"?me.elements[0].type==="JsdocTypeKeyValue"?J.elements=me.elements.map(Ie):J.elements=me.elements.map(he):me.type==="JsdocTypeKeyValue"?J.elements=[Ie(me)]:J.elements=[he(me)],!D.consume("]"))throw new Error("Unterminated '['");if(J.elements.some(ze=>ze.type==="JsdocTypeUnknown"))throw new Error("Question mark in tuple not allowed");return J},"parsePrefix")})}ye(Te,"createTupleParslet");const Le=qe({name:"keyOfParslet",accept:ye(E=>E==="keyof","accept"),parsePrefix:ye(E=>(E.consume("keyof"),{type:"JsdocTypeKeyof",element:he(E.parseType(xe.KEY_OF_TYPE_OF))}),"parsePrefix")}),je=qe({name:"importParslet",accept:ye(E=>E==="import","accept"),parsePrefix:ye(E=>{if(E.consume("import"),!E.consume("("))throw new Error("Missing parenthesis after import keyword");const D=E.parseType(xe.PREFIX);if(D.type!=="JsdocTypeStringValue")throw new Error("Only string values are allowed as paths for imports");if(!E.consume(")"))throw new Error("Missing closing parenthesis after import keyword");return{type:"JsdocTypeImport",element:D}},"parsePrefix")}),Je=qe({name:"readonlyPropertyParslet",accept:ye(E=>E==="readonly","accept"),parsePrefix:ye(E=>(E.consume("readonly"),{type:"JsdocTypeReadonlyProperty",element:E.parseIntermediateType(xe.KEY_VALUE)}),"parsePrefix")}),Fe=qe({name:"arrowFunctionParslet",precedence:xe.ARROW,accept:ye(E=>E==="=>","accept"),parseInfix:ye((E,D)=>(E.consume("=>"),{type:"JsdocTypeFunction",parameters:Bt(D).map(we),arrow:!0,constructor:!1,parenthesis:!0,returnType:E.parseType(xe.OBJECT)}),"parseInfix")}),tt=qe({name:"genericArrowFunctionParslet",accept:ye(E=>E==="<","accept"),parsePrefix:ye(E=>{const D=[];E.consume("<");do{let me,ze=E.parseIntermediateType(xe.SYMBOL);if(ze.type==="JsdocTypeOptional"&&(ze=ze.element,me=E.parseType(xe.SYMBOL)),ze.type!=="JsdocTypeName")throw new g(ze);let nt;E.consume("extends")&&(nt=E.parseType(xe.SYMBOL),nt.type==="JsdocTypeOptional"&&(nt=nt.element,me=E.parseType(xe.SYMBOL)));const St={type:"JsdocTypeTypeParameter",name:ze};if(nt!==void 0&&(St.constraint=nt),me!==void 0&&(St.defaultValue=me),D.push(St),E.consume(">"))break}while(E.consume(","));const J=E.parseIntermediateType(xe.SYMBOL);return J.typeParameters=D,J},"parsePrefix")}),ct=qe({name:"intersectionParslet",accept:ye(E=>E==="&","accept"),precedence:xe.INTERSECTION,parseInfix:ye((E,D)=>{E.consume("&");const J=[];do J.push(E.parseType(xe.INTERSECTION));while(E.consume("&"));return{type:"JsdocTypeIntersection",elements:[he(D),...J]}},"parseInfix")}),it=qe({name:"predicateParslet",precedence:xe.INFIX,accept:ye(E=>E==="is","accept"),parseInfix:ye((E,D)=>{if(D.type!=="JsdocTypeName")throw new g(D,"A typescript predicate always has to have a name on the left side.");return E.consume("is"),{type:"JsdocTypePredicate",left:D,right:he(E.parseIntermediateType(xe.INFIX))}},"parseInfix")}),Ot=qe({name:"objectSquareBracketPropertyParslet",accept:ye(E=>E==="[","accept"),parsePrefix:ye(E=>{if(E.baseParser===void 0)throw new Error("Only allowed inside object grammar");E.consume("[");const D=E.lexer.current.text;E.consume("Identifier");let J;if(E.consume(":")){const me=E.baseParser;me.acceptLexerState(E),J={type:"JsdocTypeIndexSignature",key:D,right:me.parseType(xe.INDEX_BRACKETS)},E.acceptLexerState(me)}else if(E.consume("in")){const me=E.baseParser;me.acceptLexerState(E),J={type:"JsdocTypeMappedType",key:D,right:me.parseType(xe.ARRAY_BRACKETS)},E.acceptLexerState(me)}else throw new Error("Missing ':' or 'in' inside square bracketed property.");if(!E.consume("]"))throw new Error("Unterminated square brackets");return J},"parsePrefix")}),$e=qe({name:"readonlyArrayParslet",accept:ye(E=>E==="readonly","accept"),parsePrefix:ye(E=>(E.consume("readonly"),{type:"JsdocTypeReadonlyArray",element:fe(E.parseIntermediateType(xe.ALL))}),"parsePrefix")}),Xt=qe({name:"conditionalParslet",precedence:xe.INFIX,accept:ye(E=>E==="extends","accept"),parseInfix:ye((E,D)=>{E.consume("extends");const J=E.parseType(xe.KEY_OF_TYPE_OF).element,me=E.parseType(xe.INFIX);return E.consume(":"),{type:"JsdocTypeConditional",checksType:he(D),extendsType:J,trueType:me,falseType:E.parseType(xe.INFIX)}},"parseInfix")}),cr=[Je,lt({allowedAdditionalTokens:["typeof","module","keyof","event","external","in"]}),bt,kt,Tt,Jt,lr({allowSquaredProperties:!0,allowKeyTypes:!1,allowOptional:!0,allowReadonly:!0}),Ot],Nt=[...Ve,ur({allowKeyTypes:!1,objectFieldGrammar:cr}),$e,ke,Le,je,Tt,Vr({allowWithoutParenthesis:!0,allowNoReturnType:!1,allowNamedParameters:["this","new","args"],allowNewAsFunctionKeyword:!0}),Te({allowQuestionMark:!1}),Ir({allowEnclosingBrackets:!1,allowPostfix:!1}),de,Xt,lt({allowedAdditionalTokens:["event","external","in"]}),vt({allowedTypes:["module"],pathGrammar:Yt}),yr,Fe,tt,pt({allowSquareBracketsOnAnyType:!0,allowJsdocNamePaths:!1,pathGrammar:Yt}),ct,it,nr({allowVariadic:!0,allowOptional:!0})];function Ht(E,D){switch(D){case"closure":return new Ke(ae,E).parse();case"jsdoc":return new Ke(Yr,E).parse();case"typescript":return new Ke(Nt,E).parse()}}ye(Ht,"parse");function _r(E,D=["typescript","closure","jsdoc"]){let J;for(const me of D)try{return Ht(E,me)}catch(ze){J=ze}throw J}ye(_r,"tryParse");function ut(E,D){const J=E[D.type];if(J===void 0)throw new Error(`In this set of transform rules exists no rule for type ${D.type}.`);return J(D,me=>ut(E,me))}ye(ut,"transform");function Lt(E){throw new Error("This transform is not available. Are you trying the correct parsing mode?")}ye(Lt,"notAvailableTransform");function Cr(E){const D={params:[]};for(const J of E.parameters)J.type==="JsdocTypeKeyValue"?J.key==="this"?D.this=J.right:J.key==="new"?D.new=J.right:D.params.push(J):D.params.push(J);return D}ye(Cr,"extractSpecialParams");function Kt(E,D,J){return E==="prefix"?J+D:D+J}ye(Kt,"applyPosition");function jt(E,D){switch(D){case"double":return`"${E}"`;case"single":return`'${E}'`;case void 0:return E}}ye(jt,"quote");function Pr(){return{JsdocTypeParenthesis:ye((E,D)=>`(${E.element!==void 0?D(E.element):""})`,"JsdocTypeParenthesis"),JsdocTypeKeyof:ye((E,D)=>`keyof ${D(E.element)}`,"JsdocTypeKeyof"),JsdocTypeFunction:ye((E,D)=>{var J;if(E.arrow){if(E.returnType===void 0)throw new Error("Arrow function needs a return type.");let me=`${E.typeParameters!==void 0?`<${(J=E.typeParameters.map(D).join(", "))!==null&&J!==void 0?J:""}>`:""}(${E.parameters.map(D).join(", ")}) => ${D(E.returnType)}`;return E.constructor&&(me="new "+me),me}else{let me=E.constructor?"new":"function";return E.parenthesis&&(me+=`(${E.parameters.map(D).join(", ")})`,E.returnType!==void 0&&(me+=`: ${D(E.returnType)}`)),me}},"JsdocTypeFunction"),JsdocTypeName:ye(E=>E.value,"JsdocTypeName"),JsdocTypeTuple:ye((E,D)=>`[${E.elements.map(D).join(", ")}]`,"JsdocTypeTuple"),JsdocTypeVariadic:ye((E,D)=>E.meta.position===void 0?"...":Kt(E.meta.position,D(E.element),"..."),"JsdocTypeVariadic"),JsdocTypeNamePath:ye((E,D)=>{const J=D(E.left),me=D(E.right);switch(E.pathType){case"inner":return`${J}~${me}`;case"instance":return`${J}#${me}`;case"property":return`${J}.${me}`;case"property-brackets":return`${J}[${me}]`}},"JsdocTypeNamePath"),JsdocTypeStringValue:ye(E=>jt(E.value,E.meta.quote),"JsdocTypeStringValue"),JsdocTypeAny:ye(()=>"*","JsdocTypeAny"),JsdocTypeGeneric:ye((E,D)=>{if(E.meta.brackets==="square"){const J=E.elements[0],me=D(J);return J.type==="JsdocTypeUnion"||J.type==="JsdocTypeIntersection"?`(${me})[]`:`${me}[]`}else return`${D(E.left)}${E.meta.dot?".":""}<${E.infer===!0?"infer ":""}${E.elements.map(D).join(", ")}>`},"JsdocTypeGeneric"),JsdocTypeImport:ye((E,D)=>`import(${D(E.element)})`,"JsdocTypeImport"),JsdocTypeObjectField:ye((E,D)=>{let J="";return E.readonly&&(J+="readonly "),typeof E.key=="string"?J+=jt(E.key,E.meta.quote):J+=D(E.key),E.optional&&(J+="?"),E.right===void 0?J:J+`: ${D(E.right)}`},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:ye((E,D)=>`${D(E.left)}: ${D(E.right)}`,"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:ye((E,D)=>{let J=E.key;return E.optional&&(J+="?"),E.variadic&&(J="..."+J),E.right===void 0?J:J+`: ${D(E.right)}`},"JsdocTypeKeyValue"),JsdocTypeSpecialNamePath:ye(E=>`${E.specialType}:${jt(E.value,E.meta.quote)}`,"JsdocTypeSpecialNamePath"),JsdocTypeNotNullable:ye((E,D)=>Kt(E.meta.position,D(E.element),"!"),"JsdocTypeNotNullable"),JsdocTypeNull:ye(()=>"null","JsdocTypeNull"),JsdocTypeNullable:ye((E,D)=>Kt(E.meta.position,D(E.element),"?"),"JsdocTypeNullable"),JsdocTypeNumber:ye(E=>E.value.toString(),"JsdocTypeNumber"),JsdocTypeObject:ye((E,D)=>{var J,me;return`{${(E.meta.separator==="linebreak"&&E.elements.length>1?`
`+((J=E.meta.propertyIndent)!==null&&J!==void 0?J:""):"")+E.elements.map(D).join(E.meta.separator==="comma"?", ":E.meta.separator==="linebreak"?`
`+((me=E.meta.propertyIndent)!==null&&me!==void 0?me:""):"; ")+(E.meta.separator==="linebreak"&&E.elements.length>1?`
`:"")}}`},"JsdocTypeObject"),JsdocTypeOptional:ye((E,D)=>Kt(E.meta.position,D(E.element),"="),"JsdocTypeOptional"),JsdocTypeSymbol:ye((E,D)=>`${E.value}(${E.element!==void 0?D(E.element):""})`,"JsdocTypeSymbol"),JsdocTypeTypeof:ye((E,D)=>`typeof ${D(E.element)}`,"JsdocTypeTypeof"),JsdocTypeUndefined:ye(()=>"undefined","JsdocTypeUndefined"),JsdocTypeUnion:ye((E,D)=>E.elements.map(D).join(" | "),"JsdocTypeUnion"),JsdocTypeUnknown:ye(()=>"?","JsdocTypeUnknown"),JsdocTypeIntersection:ye((E,D)=>E.elements.map(D).join(" & "),"JsdocTypeIntersection"),JsdocTypeProperty:ye(E=>jt(E.value,E.meta.quote),"JsdocTypeProperty"),JsdocTypePredicate:ye((E,D)=>`${D(E.left)} is ${D(E.right)}`,"JsdocTypePredicate"),JsdocTypeIndexSignature:ye((E,D)=>`[${E.key}: ${D(E.right)}]`,"JsdocTypeIndexSignature"),JsdocTypeMappedType:ye((E,D)=>`[${E.key} in ${D(E.right)}]`,"JsdocTypeMappedType"),JsdocTypeAsserts:ye((E,D)=>`asserts ${D(E.left)} is ${D(E.right)}`,"JsdocTypeAsserts"),JsdocTypeReadonlyArray:ye((E,D)=>`readonly ${D(E.element)}`,"JsdocTypeReadonlyArray"),JsdocTypeAssertsPlain:ye((E,D)=>`asserts ${D(E.element)}`,"JsdocTypeAssertsPlain"),JsdocTypeConditional:ye((E,D)=>`${D(E.checksType)} extends ${D(E.extendsType)} ? ${D(E.trueType)} : ${D(E.falseType)}`,"JsdocTypeConditional"),JsdocTypeTypeParameter:ye((E,D)=>`${D(E.name)}${E.constraint!==void 0?` extends ${D(E.constraint)}`:""}${E.defaultValue!==void 0?` = ${D(E.defaultValue)}`:""}`,"JsdocTypeTypeParameter")}}ye(Pr,"stringifyRules");const yt=Pr();function In(E){return ut(yt,E)}ye(In,"stringify");const vn=["null","true","false","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];function mn(E){const D={type:"NameExpression",name:E};return vn.includes(E)&&(D.reservedWord=!0),D}ye(mn,"makeName");const fs={JsdocTypeOptional:ye((E,D)=>{const J=D(E.element);return J.optional=!0,J},"JsdocTypeOptional"),JsdocTypeNullable:ye((E,D)=>{const J=D(E.element);return J.nullable=!0,J},"JsdocTypeNullable"),JsdocTypeNotNullable:ye((E,D)=>{const J=D(E.element);return J.nullable=!1,J},"JsdocTypeNotNullable"),JsdocTypeVariadic:ye((E,D)=>{if(E.element===void 0)throw new Error("dots without value are not allowed in catharsis mode");const J=D(E.element);return J.repeatable=!0,J},"JsdocTypeVariadic"),JsdocTypeAny:ye(()=>({type:"AllLiteral"}),"JsdocTypeAny"),JsdocTypeNull:ye(()=>({type:"NullLiteral"}),"JsdocTypeNull"),JsdocTypeStringValue:ye(E=>mn(jt(E.value,E.meta.quote)),"JsdocTypeStringValue"),JsdocTypeUndefined:ye(()=>({type:"UndefinedLiteral"}),"JsdocTypeUndefined"),JsdocTypeUnknown:ye(()=>({type:"UnknownLiteral"}),"JsdocTypeUnknown"),JsdocTypeFunction:ye((E,D)=>{const J=Cr(E),me={type:"FunctionType",params:J.params.map(D)};return J.this!==void 0&&(me.this=D(J.this)),J.new!==void 0&&(me.new=D(J.new)),E.returnType!==void 0&&(me.result=D(E.returnType)),me},"JsdocTypeFunction"),JsdocTypeGeneric:ye((E,D)=>({type:"TypeApplication",applications:E.elements.map(J=>D(J)),expression:D(E.left)}),"JsdocTypeGeneric"),JsdocTypeSpecialNamePath:ye(E=>mn(E.specialType+":"+jt(E.value,E.meta.quote)),"JsdocTypeSpecialNamePath"),JsdocTypeName:ye(E=>E.value!=="function"?mn(E.value):{type:"FunctionType",params:[]},"JsdocTypeName"),JsdocTypeNumber:ye(E=>mn(E.value.toString()),"JsdocTypeNumber"),JsdocTypeObject:ye((E,D)=>{const J={type:"RecordType",fields:[]};for(const me of E.elements)me.type!=="JsdocTypeObjectField"&&me.type!=="JsdocTypeJsdocObjectField"?J.fields.push({type:"FieldType",key:D(me),value:void 0}):J.fields.push(D(me));return J},"JsdocTypeObject"),JsdocTypeObjectField:ye((E,D)=>{if(typeof E.key!="string")throw new Error("Index signatures and mapped types are not supported");return{type:"FieldType",key:mn(jt(E.key,E.meta.quote)),value:E.right===void 0?void 0:D(E.right)}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:ye((E,D)=>({type:"FieldType",key:D(E.left),value:D(E.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeUnion:ye((E,D)=>({type:"TypeUnion",elements:E.elements.map(J=>D(J))}),"JsdocTypeUnion"),JsdocTypeKeyValue:ye((E,D)=>({type:"FieldType",key:mn(E.key),value:E.right===void 0?void 0:D(E.right)}),"JsdocTypeKeyValue"),JsdocTypeNamePath:ye((E,D)=>{const J=D(E.left);let me;E.right.type==="JsdocTypeSpecialNamePath"?me=D(E.right).name:me=jt(E.right.value,E.right.meta.quote);const ze=E.pathType==="inner"?"~":E.pathType==="instance"?"#":".";return mn(`${J.name}${ze}${me}`)},"JsdocTypeNamePath"),JsdocTypeSymbol:ye(E=>{let D="",J=E.element,me=!1;return J?.type==="JsdocTypeVariadic"&&(J.meta.position==="prefix"?D="...":me=!0,J=J.element),J?.type==="JsdocTypeName"?D+=J.value:J?.type==="JsdocTypeNumber"&&(D+=J.value.toString()),me&&(D+="..."),mn(`${E.value}(${D})`)},"JsdocTypeSymbol"),JsdocTypeParenthesis:ye((E,D)=>D(he(E.element)),"JsdocTypeParenthesis"),JsdocTypeMappedType:Lt,JsdocTypeIndexSignature:Lt,JsdocTypeImport:Lt,JsdocTypeKeyof:Lt,JsdocTypeTuple:Lt,JsdocTypeTypeof:Lt,JsdocTypeIntersection:Lt,JsdocTypeProperty:Lt,JsdocTypePredicate:Lt,JsdocTypeAsserts:Lt,JsdocTypeReadonlyArray:Lt,JsdocTypeAssertsPlain:Lt,JsdocTypeConditional:Lt,JsdocTypeTypeParameter:Lt};function Ct(E){return ut(fs,E)}ye(Ct,"catharsisTransform");function tr(E){switch(E){case void 0:return"none";case"single":return"single";case"double":return"double"}}ye(tr,"getQuoteStyle");function gr(E){switch(E){case"inner":return"INNER_MEMBER";case"instance":return"INSTANCE_MEMBER";case"property":return"MEMBER";case"property-brackets":return"MEMBER"}}ye(gr,"getMemberType");function xn(E,D){return D.length===2?{type:E,left:D[0],right:D[1]}:{type:E,left:D[0],right:xn(E,D.slice(1))}}ye(xn,"nestResults");const No={JsdocTypeOptional:ye((E,D)=>({type:"OPTIONAL",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_EQUAL_SIGN":"SUFFIX_EQUALS_SIGN"}}),"JsdocTypeOptional"),JsdocTypeNullable:ye((E,D)=>({type:"NULLABLE",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_QUESTION_MARK":"SUFFIX_QUESTION_MARK"}}),"JsdocTypeNullable"),JsdocTypeNotNullable:ye((E,D)=>({type:"NOT_NULLABLE",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_BANG":"SUFFIX_BANG"}}),"JsdocTypeNotNullable"),JsdocTypeVariadic:ye((E,D)=>{const J={type:"VARIADIC",meta:{syntax:E.meta.position==="prefix"?"PREFIX_DOTS":E.meta.position==="suffix"?"SUFFIX_DOTS":"ONLY_DOTS"}};return E.element!==void 0&&(J.value=D(E.element)),J},"JsdocTypeVariadic"),JsdocTypeName:ye(E=>({type:"NAME",name:E.value}),"JsdocTypeName"),JsdocTypeTypeof:ye((E,D)=>({type:"TYPE_QUERY",name:D(E.element)}),"JsdocTypeTypeof"),JsdocTypeTuple:ye((E,D)=>({type:"TUPLE",entries:E.elements.map(D)}),"JsdocTypeTuple"),JsdocTypeKeyof:ye((E,D)=>({type:"KEY_QUERY",value:D(E.element)}),"JsdocTypeKeyof"),JsdocTypeImport:ye(E=>({type:"IMPORT",path:{type:"STRING_VALUE",quoteStyle:tr(E.element.meta.quote),string:E.element.value}}),"JsdocTypeImport"),JsdocTypeUndefined:ye(()=>({type:"NAME",name:"undefined"}),"JsdocTypeUndefined"),JsdocTypeAny:ye(()=>({type:"ANY"}),"JsdocTypeAny"),JsdocTypeFunction:ye((E,D)=>{const J=Cr(E),me={type:E.arrow?"ARROW":"FUNCTION",params:J.params.map(ze=>{if(ze.type==="JsdocTypeKeyValue"){if(ze.right===void 0)throw new Error("Function parameter without ':' is not expected to be 'KEY_VALUE'");return{type:"NAMED_PARAMETER",name:ze.key,typeName:D(ze.right)}}else return D(ze)}),new:null,returns:null};return J.this!==void 0?me.this=D(J.this):E.arrow||(me.this=null),J.new!==void 0&&(me.new=D(J.new)),E.returnType!==void 0&&(me.returns=D(E.returnType)),me},"JsdocTypeFunction"),JsdocTypeGeneric:ye((E,D)=>{const J={type:"GENERIC",subject:D(E.left),objects:E.elements.map(D),meta:{syntax:E.meta.brackets==="square"?"SQUARE_BRACKET":E.meta.dot?"ANGLE_BRACKET_WITH_DOT":"ANGLE_BRACKET"}};return E.meta.brackets==="square"&&E.elements[0].type==="JsdocTypeFunction"&&!E.elements[0].parenthesis&&(J.objects[0]={type:"NAME",name:"function"}),J},"JsdocTypeGeneric"),JsdocTypeObjectField:ye((E,D)=>{if(typeof E.key!="string")throw new Error("Index signatures and mapped types are not supported");if(E.right===void 0)return{type:"RECORD_ENTRY",key:E.key,quoteStyle:tr(E.meta.quote),value:null,readonly:!1};let J=D(E.right);return E.optional&&(J={type:"OPTIONAL",value:J,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:E.key.toString(),quoteStyle:tr(E.meta.quote),value:J,readonly:!1}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:ye(()=>{throw new Error("Keys may not be typed in jsdoctypeparser.")},"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:ye((E,D)=>{if(E.right===void 0)return{type:"RECORD_ENTRY",key:E.key,quoteStyle:"none",value:null,readonly:!1};let J=D(E.right);return E.optional&&(J={type:"OPTIONAL",value:J,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:E.key,quoteStyle:"none",value:J,readonly:!1}},"JsdocTypeKeyValue"),JsdocTypeObject:ye((E,D)=>{const J=[];for(const me of E.elements)(me.type==="JsdocTypeObjectField"||me.type==="JsdocTypeJsdocObjectField")&&J.push(D(me));return{type:"RECORD",entries:J}},"JsdocTypeObject"),JsdocTypeSpecialNamePath:ye(E=>{if(E.specialType!=="module")throw new Error(`jsdoctypeparser does not support type ${E.specialType} at this point.`);return{type:"MODULE",value:{type:"FILE_PATH",quoteStyle:tr(E.meta.quote),path:E.value}}},"JsdocTypeSpecialNamePath"),JsdocTypeNamePath:ye((E,D)=>{let J=!1,me,ze;E.right.type==="JsdocTypeSpecialNamePath"&&E.right.specialType==="event"?(J=!0,me=E.right.value,ze=tr(E.right.meta.quote)):(me=E.right.value,ze=tr(E.right.meta.quote));const nt={type:gr(E.pathType),owner:D(E.left),name:me,quoteStyle:ze,hasEventPrefix:J};if(nt.owner.type==="MODULE"){const St=nt.owner;return nt.owner=nt.owner.value,St.value=nt,St}else return nt},"JsdocTypeNamePath"),JsdocTypeUnion:ye((E,D)=>xn("UNION",E.elements.map(D)),"JsdocTypeUnion"),JsdocTypeParenthesis:ye((E,D)=>({type:"PARENTHESIS",value:D(he(E.element))}),"JsdocTypeParenthesis"),JsdocTypeNull:ye(()=>({type:"NAME",name:"null"}),"JsdocTypeNull"),JsdocTypeUnknown:ye(()=>({type:"UNKNOWN"}),"JsdocTypeUnknown"),JsdocTypeStringValue:ye(E=>({type:"STRING_VALUE",quoteStyle:tr(E.meta.quote),string:E.value}),"JsdocTypeStringValue"),JsdocTypeIntersection:ye((E,D)=>xn("INTERSECTION",E.elements.map(D)),"JsdocTypeIntersection"),JsdocTypeNumber:ye(E=>({type:"NUMBER_VALUE",number:E.value.toString()}),"JsdocTypeNumber"),JsdocTypeSymbol:Lt,JsdocTypeProperty:Lt,JsdocTypePredicate:Lt,JsdocTypeMappedType:Lt,JsdocTypeIndexSignature:Lt,JsdocTypeAsserts:Lt,JsdocTypeReadonlyArray:Lt,JsdocTypeAssertsPlain:Lt,JsdocTypeConditional:Lt,JsdocTypeTypeParameter:Lt};function ro(E){return ut(No,E)}ye(ro,"jtpTransform");function hr(){return{JsdocTypeIntersection:ye((E,D)=>({type:"JsdocTypeIntersection",elements:E.elements.map(D)}),"JsdocTypeIntersection"),JsdocTypeGeneric:ye((E,D)=>({type:"JsdocTypeGeneric",left:D(E.left),elements:E.elements.map(D),meta:{dot:E.meta.dot,brackets:E.meta.brackets}}),"JsdocTypeGeneric"),JsdocTypeNullable:ye(E=>E,"JsdocTypeNullable"),JsdocTypeUnion:ye((E,D)=>({type:"JsdocTypeUnion",elements:E.elements.map(D)}),"JsdocTypeUnion"),JsdocTypeUnknown:ye(E=>E,"JsdocTypeUnknown"),JsdocTypeUndefined:ye(E=>E,"JsdocTypeUndefined"),JsdocTypeTypeof:ye((E,D)=>({type:"JsdocTypeTypeof",element:D(E.element)}),"JsdocTypeTypeof"),JsdocTypeSymbol:ye((E,D)=>{const J={type:"JsdocTypeSymbol",value:E.value};return E.element!==void 0&&(J.element=D(E.element)),J},"JsdocTypeSymbol"),JsdocTypeOptional:ye((E,D)=>({type:"JsdocTypeOptional",element:D(E.element),meta:{position:E.meta.position}}),"JsdocTypeOptional"),JsdocTypeObject:ye((E,D)=>({type:"JsdocTypeObject",meta:{separator:"comma"},elements:E.elements.map(D)}),"JsdocTypeObject"),JsdocTypeNumber:ye(E=>E,"JsdocTypeNumber"),JsdocTypeNull:ye(E=>E,"JsdocTypeNull"),JsdocTypeNotNullable:ye((E,D)=>({type:"JsdocTypeNotNullable",element:D(E.element),meta:{position:E.meta.position}}),"JsdocTypeNotNullable"),JsdocTypeSpecialNamePath:ye(E=>E,"JsdocTypeSpecialNamePath"),JsdocTypeObjectField:ye((E,D)=>({type:"JsdocTypeObjectField",key:E.key,right:E.right===void 0?void 0:D(E.right),optional:E.optional,readonly:E.readonly,meta:E.meta}),"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:ye((E,D)=>({type:"JsdocTypeJsdocObjectField",left:D(E.left),right:D(E.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:ye((E,D)=>({type:"JsdocTypeKeyValue",key:E.key,right:E.right===void 0?void 0:D(E.right),optional:E.optional,variadic:E.variadic}),"JsdocTypeKeyValue"),JsdocTypeImport:ye((E,D)=>({type:"JsdocTypeImport",element:D(E.element)}),"JsdocTypeImport"),JsdocTypeAny:ye(E=>E,"JsdocTypeAny"),JsdocTypeStringValue:ye(E=>E,"JsdocTypeStringValue"),JsdocTypeNamePath:ye(E=>E,"JsdocTypeNamePath"),JsdocTypeVariadic:ye((E,D)=>{const J={type:"JsdocTypeVariadic",meta:{position:E.meta.position,squareBrackets:E.meta.squareBrackets}};return E.element!==void 0&&(J.element=D(E.element)),J},"JsdocTypeVariadic"),JsdocTypeTuple:ye((E,D)=>({type:"JsdocTypeTuple",elements:E.elements.map(D)}),"JsdocTypeTuple"),JsdocTypeName:ye(E=>E,"JsdocTypeName"),JsdocTypeFunction:ye((E,D)=>{const J={type:"JsdocTypeFunction",arrow:E.arrow,parameters:E.parameters.map(D),constructor:E.constructor,parenthesis:E.parenthesis};return E.returnType!==void 0&&(J.returnType=D(E.returnType)),J},"JsdocTypeFunction"),JsdocTypeKeyof:ye((E,D)=>({type:"JsdocTypeKeyof",element:D(E.element)}),"JsdocTypeKeyof"),JsdocTypeParenthesis:ye((E,D)=>({type:"JsdocTypeParenthesis",element:D(E.element)}),"JsdocTypeParenthesis"),JsdocTypeProperty:ye(E=>E,"JsdocTypeProperty"),JsdocTypePredicate:ye((E,D)=>({type:"JsdocTypePredicate",left:D(E.left),right:D(E.right)}),"JsdocTypePredicate"),JsdocTypeIndexSignature:ye((E,D)=>({type:"JsdocTypeIndexSignature",key:E.key,right:D(E.right)}),"JsdocTypeIndexSignature"),JsdocTypeMappedType:ye((E,D)=>({type:"JsdocTypeMappedType",key:E.key,right:D(E.right)}),"JsdocTypeMappedType"),JsdocTypeAsserts:ye((E,D)=>({type:"JsdocTypeAsserts",left:D(E.left),right:D(E.right)}),"JsdocTypeAsserts"),JsdocTypeReadonlyArray:ye((E,D)=>({type:"JsdocTypeReadonlyArray",element:D(E.element)}),"JsdocTypeReadonlyArray"),JsdocTypeAssertsPlain:ye((E,D)=>({type:"JsdocTypeAssertsPlain",element:D(E.element)}),"JsdocTypeAssertsPlain"),JsdocTypeConditional:ye((E,D)=>({type:"JsdocTypeConditional",checksType:D(E.checksType),extendsType:D(E.extendsType),trueType:D(E.trueType),falseType:D(E.falseType)}),"JsdocTypeConditional"),JsdocTypeTypeParameter:ye((E,D)=>({type:"JsdocTypeTypeParameter",name:D(E.name),constraint:E.constraint!==void 0?D(E.constraint):void 0,defaultValue:E.defaultValue!==void 0?D(E.defaultValue):void 0}),"JsdocTypeTypeParameter")}}ye(hr,"identityTransformRules");const ms={JsdocTypeAny:[],JsdocTypeFunction:["parameters","returnType"],JsdocTypeGeneric:["left","elements"],JsdocTypeImport:[],JsdocTypeIndexSignature:["right"],JsdocTypeIntersection:["elements"],JsdocTypeKeyof:["element"],JsdocTypeKeyValue:["right"],JsdocTypeMappedType:["right"],JsdocTypeName:[],JsdocTypeNamePath:["left","right"],JsdocTypeNotNullable:["element"],JsdocTypeNull:[],JsdocTypeNullable:["element"],JsdocTypeNumber:[],JsdocTypeObject:["elements"],JsdocTypeObjectField:["right"],JsdocTypeJsdocObjectField:["left","right"],JsdocTypeOptional:["element"],JsdocTypeParenthesis:["element"],JsdocTypeSpecialNamePath:[],JsdocTypeStringValue:[],JsdocTypeSymbol:["element"],JsdocTypeTuple:["elements"],JsdocTypeTypeof:["element"],JsdocTypeUndefined:[],JsdocTypeUnion:["elements"],JsdocTypeUnknown:[],JsdocTypeVariadic:["element"],JsdocTypeProperty:[],JsdocTypePredicate:["left","right"],JsdocTypeAsserts:["left","right"],JsdocTypeReadonlyArray:["element"],JsdocTypeAssertsPlain:["element"],JsdocTypeConditional:["checksType","extendsType","trueType","falseType"],JsdocTypeTypeParameter:["name","constraint","defaultValue"]};function hi(E,D,J,me,ze){me?.(E,D,J);const nt=ms[E.type];for(const St of nt){const rr=E[St];if(rr!==void 0)if(Array.isArray(rr))for(const Jr of rr)hi(Jr,E,St,me,ze);else hi(rr,E,St,me,ze)}ze?.(E,D,J)}ye(hi,"_traverse");function gs(E,D,J){hi(E,void 0,void 0,D,J)}ye(gs,"traverse"),r.catharsisTransform=Ct,r.identityTransformRules=hr,r.jtpTransform=ro,r.parse=Ht,r.stringify=In,r.stringifyRules=Pr,r.transform=ut,r.traverse=gs,r.tryParse=_r,r.visitorKeys=ms})}});const{UnknownArgTypesError:Oxe}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__,{UnknownArgTypesError:kxe}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;var Lue=["null","undefined"];function Tx(t){return Lue.some(e=>e===t)}ye(Tx,"isDefaultValueBlacklisted");var Due=ye(t=>{if(!t)return"";if(typeof t=="string")return t;throw new Error(`Description: expected string, got: ${JSON.stringify(t)}`)},"str");function UI(t){return!!t.__docgenInfo}ye(UI,"hasDocgen");function Nue(t){return t!=null&&Object.keys(t).length>0}ye(Nue,"isValidDocgenSection");function Fue(t,e){return UI(t)?t.__docgenInfo[e]:null}ye(Fue,"getDocgenSection");function XU(t){return UI(t)?Due(t.__docgenInfo.description):""}ye(XU,"getDocgenDescription");var Zc;(function(t){t.start="/**",t.nostart="/***",t.delim="*",t.end="*/"})(Zc=Zc||(Zc={}));function QU(t){return/^\s+$/.test(t)}ye(QU,"isSpace");function eG(t){const e=t.match(/\r+$/);return e==null?["",t]:[t.slice(-e[0].length),t.slice(0,-e[0].length)]}ye(eG,"splitCR");function xh(t){const e=t.match(/^\s+/);return e==null?["",t]:[t.slice(0,e[0].length),t.slice(e[0].length)]}ye(xh,"splitSpace");function tG(t){return t.split(/\n/)}ye(tG,"splitLines");function rG(t={}){return Object.assign({tag:"",name:"",type:"",optional:!1,description:"",problems:[],source:[]},t)}ye(rG,"seedSpec");function nG(t={}){return Object.assign({start:"",delimiter:"",postDelimiter:"",tag:"",postTag:"",name:"",postName:"",type:"",postType:"",description:"",end:"",lineEnd:""},t)}ye(nG,"seedTokens");var zue=/^@\S+/;function iG({fence:t="```"}={}){const e=oG(t),r=ye((n,i)=>e(n)?!i:i,"toggleFence");return ye(function(i){const l=[[]];let c=!1;for(const s of i)zue.test(s.tokens.description)&&!c?l.push([s]):l[l.length-1].push(s),c=r(s.tokens.description,c);return l},"parseBlock")}ye(iG,"getParser");function oG(t){return typeof t=="string"?e=>e.split(t).length%2===0:t}ye(oG,"getFencer");function sG({startLine:t=0,markers:e=Zc}={}){let r=null,n=t;return ye(function(l){let c=l;const s=nG();if([s.lineEnd,c]=eG(c),[s.start,c]=xh(c),r===null&&c.startsWith(e.start)&&!c.startsWith(e.nostart)&&(r=[],s.delimiter=c.slice(0,e.start.length),c=c.slice(e.start.length),[s.postDelimiter,c]=xh(c)),r===null)return n++,null;const p=c.trimRight().endsWith(e.end);if(s.delimiter===""&&c.startsWith(e.delim)&&!c.startsWith(e.end)&&(s.delimiter=e.delim,c=c.slice(e.delim.length),[s.postDelimiter,c]=xh(c)),p){const g=c.trimRight();s.end=c.slice(g.length-e.end.length),c=g.slice(0,-e.end.length)}if(s.description=c,r.push({number:n,source:l,tokens:s}),n++,p){const g=r.slice();return r=null,g}return null},"parseSource")}ye(sG,"getParser");function aG({tokenizers:t}){return ye(function(r){var n;let i=rG({source:r});for(const l of t)if(i=l(i),!((n=i.problems[i.problems.length-1])===null||n===void 0)&&n.critical)break;return i},"parseSpec")}ye(aG,"getParser");function lG(){return t=>{const{tokens:e}=t.source[0],r=e.description.match(/\s*(@(\S+))(\s*)/);return r===null?(t.problems.push({code:"spec:tag:prefix",message:'tag should start with "@" symbol',line:t.source[0].number,critical:!0}),t):(e.tag=r[1],e.postTag=r[3],e.description=e.description.slice(r[0].length),t.tag=r[2],t)}}ye(lG,"tagTokenizer");function cG(t="compact"){const e=uG(t);return r=>{let n=0,i=[];for(const[s,{tokens:p}]of r.source.entries()){let g="";if(s===0&&p.description[0]!=="{")return r;for(const _ of p.description)if(_==="{"&&n++,_==="}"&&n--,g+=_,n===0)break;if(i.push([p,g]),n===0)break}if(n!==0)return r.problems.push({code:"spec:type:unpaired-curlies",message:"unpaired curlies",line:r.source[0].number,critical:!0}),r;const l=[],c=i[0][0].postDelimiter.length;for(const[s,[p,g]]of i.entries())p.type=g,s>0&&(p.type=p.postDelimiter.slice(c)+g,p.postDelimiter=p.postDelimiter.slice(0,c)),[p.postType,p.description]=xh(p.description.slice(g.length)),l.push(p.type);return l[0]=l[0].slice(1),l[l.length-1]=l[l.length-1].slice(0,-1),r.type=e(l),r}}ye(cG,"typeTokenizer");var jue=ye(t=>t.trim(),"trim");function uG(t){return t==="compact"?e=>e.map(jue).join(""):t==="preserve"?e=>e.join(`
`):t}ye(uG,"getJoiner");var Bue=ye(t=>t&&t.startsWith('"')&&t.endsWith('"'),"isQuoted");function hG(){const t=ye((e,{tokens:r},n)=>r.type===""?e:n,"typeEnd");return e=>{const{tokens:r}=e.source[e.source.reduce(t,0)],n=r.description.trimLeft(),i=n.split('"');if(i.length>1&&i[0]===""&&i.length%2===1)return e.name=i[1],r.name=`"${i[1]}"`,[r.postName,r.description]=xh(n.slice(r.name.length)),e;let l=0,c="",s=!1,p;for(const _ of n){if(l===0&&QU(_))break;_==="["&&l++,_==="]"&&l--,c+=_}if(l!==0)return e.problems.push({code:"spec:name:unpaired-brackets",message:"unpaired brackets",line:e.source[0].number,critical:!0}),e;const g=c;if(c[0]==="["&&c[c.length-1]==="]"){s=!0,c=c.slice(1,-1);const _=c.split("=");if(c=_[0].trim(),_[1]!==void 0&&(p=_.slice(1).join("=").trim()),c==="")return e.problems.push({code:"spec:name:empty-name",message:"empty name",line:e.source[0].number,critical:!0}),e;if(p==="")return e.problems.push({code:"spec:name:empty-default",message:"empty default value",line:e.source[0].number,critical:!0}),e;if(!Bue(p)&&/=(?!>)/.test(p))return e.problems.push({code:"spec:name:invalid-default",message:"invalid default value syntax",line:e.source[0].number,critical:!0}),e}return e.optional=s,e.name=c,r.name=g,p!==void 0&&(e.default=p),[r.postName,r.description]=xh(n.slice(r.name.length)),e}}ye(hG,"nameTokenizer");function dG(t="compact",e=Zc){const r=GI(t);return n=>(n.description=r(n.source,e),n)}ye(dG,"descriptionTokenizer");function GI(t){return t==="compact"?pG:t==="preserve"?fG:t}ye(GI,"getJoiner");function pG(t,e=Zc){return t.map(({tokens:{description:r}})=>r.trim()).filter(r=>r!=="").join(" ")}ye(pG,"compactJoiner");var que=ye((t,{tokens:e},r)=>e.type===""?t:r,"lineNo"),$ue=ye(({tokens:t})=>(t.delimiter===""?t.start:t.postDelimiter.slice(1))+t.description,"getDescription");function fG(t,e=Zc){if(t.length===0)return"";t[0].tokens.description===""&&t[0].tokens.delimiter===e.start&&(t=t.slice(1));const r=t[t.length-1];return r!==void 0&&r.tokens.description===""&&r.tokens.end.endsWith(e.end)&&(t=t.slice(0,-1)),t=t.slice(t.reduce(que,0)),t.map($ue).join(`
`)}ye(fG,"preserveJoiner");function mG({startLine:t=0,fence:e="```",spacing:r="compact",markers:n=Zc,tokenizers:i=[lG(),cG(r),hG(),dG(r)]}={}){if(t<0||t%1>0)throw new Error("Invalid startLine");const l=sG({startLine:t,markers:n}),c=iG({fence:e}),s=aG({tokenizers:i}),p=GI(r);return function(g){const _=[];for(const x of tG(g)){const P=l(x);if(P===null)continue;const A=c(P),M=A.slice(1).map(s);_.push({description:p(A[0],n),tags:M,source:P,problems:M.reduce((F,z)=>F.concat(z.problems),[])})}return _}}ye(mG,"getParser");function gG(t){return t.start+t.delimiter+t.postDelimiter+t.tag+t.postTag+t.type+t.postType+t.name+t.postName+t.description+t.end+t.lineEnd}ye(gG,"join");function Vue(){return t=>t.source.map(({tokens:e})=>gG(e)).join(`
`)}ye(Vue,"getStringifier");function yG(t,e={}){return mG(e)(t)}ye(yG,"parse");var HI=Aue(kue(),1);function _G(t){return t!=null&&t.includes("@")}ye(_G,"containsJsDoc");function bG(t){const n=`/**
`+(t??"").split(`
`).map(l=>` * ${l}`).join(`
`)+`
*/`,i=yG(n,{spacing:"preserve"});if(!i||i.length===0)throw new Error("Cannot parse JSDoc tags.");return i[0]}ye(bG,"parse");var Uue={tags:["param","arg","argument","returns","ignore","deprecated"]},Gue=ye((t,e=Uue)=>{if(!_G(t))return{includesJsDoc:!1,ignore:!1};const r=bG(t),n=vG(r,e.tags);return n.ignore?{includesJsDoc:!0,ignore:!0}:{includesJsDoc:!0,ignore:!1,description:r.description.trim(),extractedTags:n}},"parseJsDoc");function vG(t,e){const r={params:null,deprecated:null,returns:null,ignore:!1};for(const n of t.tags)if(!(e!==void 0&&!e.includes(n.tag)))if(n.tag==="ignore"){r.ignore=!0;break}else switch(n.tag){case"param":case"arg":case"argument":{const i=wG(n);i!=null&&(r.params==null&&(r.params=[]),r.params.push(i));break}case"deprecated":{const i=EG(n);i!=null&&(r.deprecated=i);break}case"returns":{const i=TG(n);i!=null&&(r.returns=i);break}}return r}ye(vG,"extractJsDocTags");function xG(t){return t.replace(/[\.-]$/,"")}ye(xG,"normaliseParamName");function wG(t){if(!t.name||t.name==="-")return null;const e=ZI(t.type);return{name:t.name,type:e,description:WI(t.description),getPrettyName:ye(()=>xG(t.name),"getPrettyName"),getTypeName:ye(()=>e?KI(e):null,"getTypeName")}}ye(wG,"extractParam");function EG(t){return t.name?JI(t.name,t.description):null}ye(EG,"extractDeprecated");function JI(t,e){const r=t===""?e:`${t} ${e}`;return WI(r)}ye(JI,"joinNameAndDescription");function WI(t){const e=t.replace(/^- /g,"").trim();return e===""?null:e}ye(WI,"normaliseDescription");function TG(t){const e=ZI(t.type);return e?{type:e,description:JI(t.name,t.description),getTypeName:ye(()=>KI(e),"getTypeName")}:null}ye(TG,"extractReturns");var hu=(0,HI.stringifyRules)(),Hue=hu.JsdocTypeObject;hu.JsdocTypeAny=()=>"any";hu.JsdocTypeObject=(t,e)=>`(${Hue(t,e)})`;hu.JsdocTypeOptional=(t,e)=>e(t.element);hu.JsdocTypeNullable=(t,e)=>e(t.element);hu.JsdocTypeNotNullable=(t,e)=>e(t.element);hu.JsdocTypeUnion=(t,e)=>t.elements.map(e).join("|");function ZI(t){try{return(0,HI.parse)(t,"typescript")}catch{return null}}ye(ZI,"extractType");function KI(t){return(0,HI.transform)(hu,t)}ye(KI,"extractTypeName");var Jue=90,Wue=50;function YI(t){return t.length>Jue}ye(YI,"isTooLongForTypeSummary");function SG(t){return t.length>Wue}ye(SG,"isTooLongForDefaultValueSummary");function Fi(t,e){return t===e?{summary:t}:{summary:t,detail:e}}ye(Fi,"createSummaryValue");function Zue(t,e){if(t!=null){const{value:r}=t;if(!Tx(r))return SG(r)?Fi(e?.name,r):Fi(r)}return null}ye(Zue,"createDefaultValue");function XI({name:t,value:e,elements:r,raw:n}){return e??(r!=null?r.map(XI).join(" | "):n??t)}ye(XI,"generateUnionElement");function CG({name:t,raw:e,elements:r}){return r!=null?Fi(r.map(XI).join(" | ")):e!=null?Fi(e.replace(/^\|\s*/,"")):Fi(t)}ye(CG,"generateUnion");function PG({type:t,raw:e}){return e!=null?Fi(e):Fi(t)}ye(PG,"generateFuncSignature");function AG({type:t,raw:e}){return e!=null?YI(e)?Fi(t,e):Fi(e):Fi(t)}ye(AG,"generateObjectSignature");function RG(t){const{type:e}=t;return e==="object"?AG(t):PG(t)}ye(RG,"generateSignature");function IG({name:t,raw:e}){return e!=null?YI(e)?Fi(t,e):Fi(e):Fi(t)}ye(IG,"generateDefault");function Kue(t){if(t==null)return null;switch(t.name){case"union":return CG(t);case"signature":return RG(t);default:return IG(t)}}ye(Kue,"createType");function Yue({defaultValue:t}){if(t!=null){const{value:e}=t;if(!Tx(e))return Fi(e)}return null}ye(Yue,"createDefaultValue");function Xue({tsType:t,required:e}){if(t==null)return null;let r=t.name;return e||(r=r.replace(" | undefined","")),Fi(["Array","Record","signature"].includes(t.name)?t.raw:r)}ye(Xue,"createType");function MG(t){return t!=null?Fi(t.name):null}ye(MG,"createType");function OG(t){const{computed:e,func:r}=t;return typeof e>"u"&&typeof r>"u"}ye(OG,"isReactDocgenTypescript");function kG(t){return t?t.name==="string"?!0:t.name==="enum"?Array.isArray(t.value)&&t.value.every(({value:e})=>typeof e=="string"&&e[0]==='"'&&e[e.length-1]==='"'):!1:!1}ye(kG,"isStringValued");function LG(t,e){if(t!=null){const{value:r}=t;if(!Tx(r))return OG(t)&&kG(e)?Fi(JSON.stringify(r)):Fi(r)}return null}ye(LG,"createDefaultValue");function Que(t,e,r){const{description:n,required:i,defaultValue:l}=r;return{name:t,type:MG(e),required:i,description:n,defaultValue:LG(l,e)}}ye(Que,"createBasicPropDef");function ehe(t,e){if(e?.includesJsDoc){const{description:r,extractedTags:n}=e;r!=null&&(t.description=e.description);const i={...n,params:n?.params?.map(l=>({name:l.getPrettyName(),description:l.description}))};Object.values(i).filter(Boolean).length>0&&(t.jsDocTags=i)}return t}ye(ehe,"applyJsDocResult");function the(t,e,r,n){const i=Gue(e.description);return i.includesJsDoc&&i.ignore?null:{propDef:n(t,e,i),jsDocTags:i.extractedTags,docgenInfo:e,typeSystem:r}}ye(the,"extractProp");function rhe(t){return t!=null?XU(t):""}ye(rhe,"extractComponentDescription");var DG=ye((...t)=>{const e={},r=t.filter(Boolean),n=r.reduce((i,l)=>(Object.entries(l).forEach(([c,s])=>{const p=i[c];Array.isArray(s)||typeof p>"u"?i[c]=s:gb(s)&&gb(p)?e[c]=!0:typeof s<"u"&&(i[c]=s)}),i),{});return Object.keys(e).forEach(i=>{const l=r.filter(Boolean).map(c=>c[i]).filter(c=>typeof c<"u");l.every(c=>gb(c))?n[i]=DG(...l):n[i]=l[l.length-1]}),n},"combineParameters"),nhe=ye(t=>{const{component:e,argTypes:r,parameters:{docs:n={}}}=t,{extractArgTypes:i}=n;if(!i||!e)return r;const l=i(e);return l?DG(l,r):r},"enhanceArgTypes"),ihe="storybook/docs",Lxe=`${ihe}/snippet-rendered`,bv=(t=>(t.AUTO="auto",t.CODE="code",t.DYNAMIC="dynamic",t))(bv||{});const ohe={"./src/stories/Introduction.mdx":()=>Zs(()=>import("./Introduction-B6Fdp9eZ.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),"./src/stories/map/layers-docs.mdx":()=>Zs(()=>import("./layers-docs-Chuj79Vj.js"),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url),"./src/stories/map/layers-example.stories.ts":()=>Zs(()=>import("./layers-example.stories-DoeqPFBO.js"),__vite__mapDeps([5,6,2]),import.meta.url),"./src/stories/map/overlays-docs.mdx":()=>Zs(()=>import("./overlays-docs-CuXZ6aE0.js"),__vite__mapDeps([7,1,2,3,8,6]),import.meta.url),"./src/stories/map/overlays-example.stories.ts":()=>Zs(()=>import("./overlays-example.stories-BfmWwWg2.js"),__vite__mapDeps([8,6,2]),import.meta.url),"./src/stories/map/setup-docs.mdx":()=>Zs(()=>import("./setup-docs-Cg02JLBk.js"),__vite__mapDeps([9,1,2,3,10,6]),import.meta.url),"./src/stories/map/setup-example.stories.ts":()=>Zs(()=>import("./setup-example.stories-CgnyHVsa.js"),__vite__mapDeps([10,6,2]),import.meta.url)};async function she(t){return await ohe[t]()}var NG=Object.defineProperty,Ci=(t,e)=>NG(t,"name",{value:e,configurable:!0}),ahe=(t,e)=>{for(var r in e)NG(t,r,{get:e[r],enumerable:!0})};const _b=globalThis,QI=_b.ShadowRoot&&(_b.ShadyCSS===void 0||_b.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,FG=Symbol(),Jk=new WeakMap;let lhe=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==FG)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(QI&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Jk.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Jk.set(r,e))}return e}toString(){return this.cssText}};const che=t=>new lhe(typeof t=="string"?t:t+"",void 0,FG),uhe=(t,e)=>{if(QI)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=_b.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},Wk=QI?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return che(r)})(t):t;const{is:hhe,defineProperty:dhe,getOwnPropertyDescriptor:phe,getOwnPropertyNames:fhe,getOwnPropertySymbols:mhe,getPrototypeOf:ghe}=Object,Kc=globalThis,Zk=Kc.trustedTypes,yhe=Zk?Zk.emptyScript:"",_he=Kc.reactiveElementPolyfillSupport,jg=(t,e)=>t,$2={toAttribute(t,e){switch(e){case Boolean:t=t?yhe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},zG=(t,e)=>!hhe(t,e),Kk={attribute:!0,type:String,converter:$2,reflect:!1,useDefault:!1,hasChanged:zG};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Kc.litPropertyMetadata??(Kc.litPropertyMetadata=new WeakMap);class Ep extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=Kk){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&dhe(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){const{get:i,set:l}=phe(this.prototype,e)??{get(){return this[r]},set(c){this[r]=c}};return{get:i,set(c){const s=i?.call(this);l?.call(this,c),this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Kk}static _$Ei(){if(this.hasOwnProperty(jg("elementProperties")))return;const e=ghe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(jg("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(jg("properties"))){const r=this.properties,n=[...fhe(r),...mhe(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Wk(i))}else e!==void 0&&r.push(Wk(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return uhe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){const l=(n.converter?.toAttribute!==void 0?n.converter:$2).toAttribute(r,n.type);this._$Em=e,l==null?this.removeAttribute(i):this.setAttribute(i,l),this._$Em=null}}_$AK(e,r){const n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const l=n.getPropertyOptions(i),c=typeof l.converter=="function"?{fromAttribute:l.converter}:l.converter?.fromAttribute!==void 0?l.converter:$2;this._$Em=i;const s=c.fromAttribute(r,l.type);this[i]=s??this._$Ej?.get(i)??s,this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){const i=this.constructor,l=this[e];if(n??(n=i.getPropertyOptions(e)),!((n.hasChanged??zG)(l,r)||n.useDefault&&n.reflect&&l===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:i,wrapped:l},c){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,c??r??this[e]),l!==!0||c!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,l]of this._$Ep)this[i]=l;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[i,l]of n){const{wrapped:c}=l,s=this[i];c!==!0||this._$AL.has(i)||s===void 0||this.C(i,void 0,l,s)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach(n=>n.hostUpdate?.()),this.update(r)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach(r=>r.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}}Ep.elementStyles=[],Ep.shadowRootOptions={mode:"open"},Ep[jg("elementProperties")]=new Map,Ep[jg("finalized")]=new Map,_he?.({ReactiveElement:Ep}),(Kc.reactiveElementVersions??(Kc.reactiveElementVersions=[])).push("2.1.1");const Bg=globalThis,vv=Bg.trustedTypes,Yk=vv?vv.createPolicy("lit-html",{createHTML:t=>t}):void 0,jG="$lit$",Lc=`lit$${Math.random().toFixed(9).slice(2)}$`,BG="?"+Lc,bhe=`<${BG}>`,qh=document,fy=()=>qh.createComment(""),my=t=>t===null||typeof t!="object"&&typeof t!="function",eM=Array.isArray,vhe=t=>eM(t)||typeof t?.[Symbol.iterator]=="function",QE=`[ 	
\f\r]`,rg=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Xk=/-->/g,Qk=/>/g,Wu=RegExp(`>|${QE}(?:([^\\s"'>=/]+)(${QE}*=${QE}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),eL=/'/g,tL=/"/g,qG=/^(?:script|style|textarea|title)$/i,pf=Symbol.for("lit-noChange"),Vi=Symbol.for("lit-nothing"),rL=new WeakMap,ch=qh.createTreeWalker(qh,129);function $G(t,e){if(!eM(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Yk!==void 0?Yk.createHTML(e):e}const xhe=(t,e)=>{const r=t.length-1,n=[];let i,l=e===2?"<svg>":e===3?"<math>":"",c=rg;for(let s=0;s<r;s++){const p=t[s];let g,_,x=-1,P=0;for(;P<p.length&&(c.lastIndex=P,_=c.exec(p),_!==null);)P=c.lastIndex,c===rg?_[1]==="!--"?c=Xk:_[1]!==void 0?c=Qk:_[2]!==void 0?(qG.test(_[2])&&(i=RegExp("</"+_[2],"g")),c=Wu):_[3]!==void 0&&(c=Wu):c===Wu?_[0]===">"?(c=i??rg,x=-1):_[1]===void 0?x=-2:(x=c.lastIndex-_[2].length,g=_[1],c=_[3]===void 0?Wu:_[3]==='"'?tL:eL):c===tL||c===eL?c=Wu:c===Xk||c===Qk?c=rg:(c=Wu,i=void 0);const A=c===Wu&&t[s+1].startsWith("/>")?" ":"";l+=c===rg?p+bhe:x>=0?(n.push(g),p.slice(0,x)+jG+p.slice(x)+Lc+A):p+Lc+(x===-2?s:A)}return[$G(t,l+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class gy{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let l=0,c=0;const s=e.length-1,p=this.parts,[g,_]=xhe(e,r);if(this.el=gy.createElement(g,n),ch.currentNode=this.el.content,r===2||r===3){const x=this.el.content.firstChild;x.replaceWith(...x.childNodes)}for(;(i=ch.nextNode())!==null&&p.length<s;){if(i.nodeType===1){if(i.hasAttributes())for(const x of i.getAttributeNames())if(x.endsWith(jG)){const P=_[c++],A=i.getAttribute(x).split(Lc),M=/([.?@])?(.*)/.exec(P);p.push({type:1,index:l,name:M[2],strings:A,ctor:M[1]==="."?Ehe:M[1]==="?"?The:M[1]==="@"?She:Sx}),i.removeAttribute(x)}else x.startsWith(Lc)&&(p.push({type:6,index:l}),i.removeAttribute(x));if(qG.test(i.tagName)){const x=i.textContent.split(Lc),P=x.length-1;if(P>0){i.textContent=vv?vv.emptyScript:"";for(let A=0;A<P;A++)i.append(x[A],fy()),ch.nextNode(),p.push({type:2,index:++l});i.append(x[P],fy())}}}else if(i.nodeType===8)if(i.data===BG)p.push({type:2,index:l});else{let x=-1;for(;(x=i.data.indexOf(Lc,x+1))!==-1;)p.push({type:7,index:l}),x+=Lc.length-1}l++}}static createElement(e,r){const n=qh.createElement("template");return n.innerHTML=e,n}}function ff(t,e,r=t,n){if(e===pf)return e;let i=n!==void 0?r._$Co?.[n]:r._$Cl;const l=my(e)?void 0:e._$litDirective$;return i?.constructor!==l&&(i?._$AO?.(!1),l===void 0?i=void 0:(i=new l(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=i:r._$Cl=i),i!==void 0&&(e=ff(t,i._$AS(t,e.values),i,n)),e}class whe{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,i=(e?.creationScope??qh).importNode(r,!0);ch.currentNode=i;let l=ch.nextNode(),c=0,s=0,p=n[0];for(;p!==void 0;){if(c===p.index){let g;p.type===2?g=new tM(l,l.nextSibling,this,e):p.type===1?g=new p.ctor(l,p.name,p.strings,this,e):p.type===6&&(g=new Che(l,this,e)),this._$AV.push(g),p=n[++s]}c!==p?.index&&(l=ch.nextNode(),c++)}return ch.currentNode=qh,i}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}let tM=class VG{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=Vi,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=ff(this,e,r),my(e)?e===Vi||e==null||e===""?(this._$AH!==Vi&&this._$AR(),this._$AH=Vi):e!==this._$AH&&e!==pf&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):vhe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Vi&&my(this._$AH)?this._$AA.nextSibling.data=e:this.T(qh.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=gy.createElement($G(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(r);else{const l=new whe(i,this),c=l.u(this.options);l.p(r),this.T(c),this._$AH=l}}_$AC(e){let r=rL.get(e.strings);return r===void 0&&rL.set(e.strings,r=new gy(e)),r}k(e){eM(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const l of e)i===r.length?r.push(n=new VG(this.O(fy()),this.O(fy()),this,this.options)):n=r[i],n._$AI(l),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}};class Sx{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,l){this.type=1,this._$AH=Vi,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=l,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Vi}_$AI(e,r=this,n,i){const l=this.strings;let c=!1;if(l===void 0)e=ff(this,e,r,0),c=!my(e)||e!==this._$AH&&e!==pf,c&&(this._$AH=e);else{const s=e;let p,g;for(e=l[0],p=0;p<l.length-1;p++)g=ff(this,s[n+p],r,p),g===pf&&(g=this._$AH[p]),c||(c=!my(g)||g!==this._$AH[p]),g===Vi?e=Vi:e!==Vi&&(e+=(g??"")+l[p+1]),this._$AH[p]=g}c&&!i&&this.j(e)}j(e){e===Vi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Ehe extends Sx{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Vi?void 0:e}}class The extends Sx{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Vi)}}class She extends Sx{constructor(e,r,n,i,l){super(e,r,n,i,l),this.type=5}_$AI(e,r=this){if((e=ff(this,e,r,0)??Vi)===pf)return;const n=this._$AH,i=e===Vi&&n!==Vi||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,l=e!==Vi&&(n===Vi||i);i&&this.element.removeEventListener(this.name,this,n),l&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class Che{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){ff(this,e)}}const Phe=Bg.litHtmlPolyfillSupport;Phe?.(gy,tM),(Bg.litHtmlVersions??(Bg.litHtmlVersions=[])).push("3.3.1");const xv=(t,e,r)=>{const n=r?.renderBefore??e;let i=n._$litPart$;if(i===void 0){const l=r?.renderBefore??null;n._$litPart$=i=new tM(e.insertBefore(fy(),l),l,void 0,r??{})}return i._$AI(t),i};const qg=globalThis;class bb extends Ep{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=xv(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return pf}}bb._$litElement$=!0,bb.finalized=!0,qg.litElementHydrateSupport?.({LitElement:bb});const Ahe=qg.litElementPolyfillSupport;Ahe?.({LitElement:bb});(qg.litElementVersions??(qg.litElementVersions=[])).push("4.2.1");const Rhe=(t,e)=>t?._$litType$!==void 0;function Ihe(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(s,p){var g=p.match(/\n([\t ]+|(?!\s).)/g);return g?s.concat(g.map(function(_){var x,P;return(P=(x=_.match(/[\t ]/g))===null||x===void 0?void 0:x.length)!==null&&P!==void 0?P:0})):s},[]);if(i.length){var l=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(s){return s.replace(l,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var c=n[0];return e.forEach(function(s,p){var g=c.match(/(?:^|\n)( *)$/),_=g?g[1]:"",x=s;typeof s=="string"&&s.includes(`
`)&&(x=String(s).split(`
`).map(function(P,A){return A===0?P:""+_+P}).join(`
`)),c+=x+n[p+1]}),c}var UG={};ahe(UG,{parameters:()=>HG,render:()=>GG,renderToCanvas:()=>rM});const{global:Mhe}=__STORYBOOK_MODULE_GLOBAL__,{simulateDOMContentLoaded:Ohe,simulatePageLoad:nL}=__STORYBOOK_MODULE_PREVIEW_API__;var{Node:khe}=Mhe,GG=Ci((t,e)=>{const{id:r,component:n}=e;if(!n)throw new Error(`Unable to render story ${r} as the component annotation is missing from the default export`);const i=document.createElement(n);return Object.entries(t).forEach(([l,c])=>{i[l]=c}),i},"render");function rM({storyFn:t,kind:e,name:r,showMain:n,showError:i,forceRemount:l},c){const s=t();if(n(),Rhe(s)){(l||!c.querySelector('[id="root-inner"]'))&&(c.innerHTML='<div id="root-inner"></div>');const p=c.querySelector('[id="root-inner"]');xv(s,p),nL(c)}else if(typeof s=="string")c.innerHTML=s,nL(c);else if(s instanceof khe){if(c.firstChild===s&&!l)return;c.innerHTML="",c.appendChild(s),Ohe()}else i({title:`Expecting an HTML snippet or DOM node from the story: "${r}" of "${e}".`,description:Ihe`
        Did you forget to return the HTML snippet from the story?
        Use "() => <your snippet or node>" or when defining the story.
      `})}Ci(rM,"renderToCanvas");var HG={renderer:"web-components"};const Lhe=Object.freeze(Object.defineProperty({__proto__:null,parameters:HG,render:GG,renderToCanvas:rM},Symbol.toStringTag,{value:"Module"})),{global:Dhe}=__STORYBOOK_MODULE_GLOBAL__,{global:Nhe}=__STORYBOOK_MODULE_GLOBAL__;var{window:Fhe}=Nhe;Fhe.STORYBOOK_ENV="web-components";const{global:wv}=__STORYBOOK_MODULE_GLOBAL__;function nM(t){if(!t)return!1;if(typeof t=="string")return!0;throw new Error('Provided component needs to be a string. e.g. component: "my-element"')}Ci(nM,"isValidComponent");function iM(t){if(!t)return!1;if(t.tags&&Array.isArray(t.tags)||t.modules&&Array.isArray(t.modules))return!0;throw new Error(`You need to setup valid meta data in your config.js via setCustomElements().
    See the readme of addon-docs for web components for more details.`)}Ci(iM,"isValidMetaData");function zhe(t){wv.__STORYBOOK_CUSTOM_ELEMENTS__=t}Ci(zhe,"setCustomElements");function jhe(t){wv.__STORYBOOK_CUSTOM_ELEMENTS_MANIFEST__=t}Ci(jhe,"setCustomElementsManifest");function oM(){return wv.__STORYBOOK_CUSTOM_ELEMENTS__||wv.__STORYBOOK_CUSTOM_ELEMENTS_MANIFEST__}Ci(oM,"getCustomElements");const{setProjectAnnotations:Bhe,setDefaultProjectAnnotations:qhe}=__STORYBOOK_MODULE_PREVIEW_API__;function $he(t){return qhe(UG),Bhe(t)}Ci($he,"setProjectAnnotations");var{window:Vhe,EventSource:Uhe}=Dhe;typeof module<"u"&&module?.hot?.decline&&(module.hot.decline(),new Uhe("__webpack_hmr").addEventListener("message",Ci(function(r){try{const{action:n}=JSON.parse(r.data);n==="built"&&Vhe.location.reload()}catch{}},"fullPageReload")));var Ghe="Invariant failed";function Hhe(t,e){if(!t)throw new Error(Ghe)}const{logger:JG}=__STORYBOOK_MODULE_CLIENT_LOGGER__;function sM(t,e){let r;switch(e){case"attributes":case"properties":r={name:t.type?.text||t.type};break;case"slots":r={name:"string"};break;default:r={name:"void"};break}return{name:t.name,required:!1,description:t.description,type:r,table:{category:e,type:{summary:t.type?.text||t.type},defaultValue:{summary:t.default!==void 0?t.default:t.defaultValue}}}}Ci(sM,"mapItem");function WG(t){let e=t.name.replace(/(-|_|:|\.|\s)+(.)?/g,(r,n,i)=>i?i.toUpperCase():"").replace(/^([A-Z])/,r=>r.toLowerCase());return e=`on${e.charAt(0).toUpperCase()+e.substr(1)}`,[{name:e,action:{name:t.name},table:{disable:!0}},sM(t,"events")]}Ci(WG,"mapEvent");function Pc(t,e){return t&&t.filter(r=>r&&r.name).reduce((r,n)=>{if(n.kind==="method")return r;switch(e){case"events":WG(n).forEach(i=>{Hhe(i.name),r[i.name]=i});break;default:r[n.name]=sM(n,e);break}return r},{})}Ci(Pc,"mapData");var Jhe=Ci((t,e)=>{if(!nM(t)||!iM(e))return null;const r=e.tags.find(n=>n.name.toUpperCase()===t.toUpperCase());return r||JG.warn(`Component not found in custom-elements.json: ${t}`),r},"getMetaDataExperimental"),Whe=Ci((t,e)=>{if(!nM(t)||!iM(e))return null;let r;return e?.modules?.forEach(n=>{n?.declarations?.forEach(i=>{i.tagName===t&&(r=i)})}),r||JG.warn(`Component not found in custom-elements.json: ${t}`),r},"getMetaDataV1"),ZG=Ci((t,e)=>e?.version==="experimental"?Jhe(t,e):Whe(t,e),"getMetaData"),Zhe=Ci((t,e)=>{const r=ZG(t,e);return r&&{...Pc(r.members??[],"properties"),...Pc(r.properties??[],"properties"),...Pc(r.attributes??[],"attributes"),...Pc(r.events??[],"events"),...Pc(r.slots??[],"slots"),...Pc(r.cssProperties??[],"css custom properties"),...Pc(r.cssParts??[],"css shadow parts")}},"extractArgTypesFromElements"),Khe=Ci(t=>{const e=oM();return Zhe(t,e)},"extractArgTypes"),Yhe=Ci(t=>{const e=ZG(t,oM());return e&&e.description},"extractComponentDescription"),Xhe={docs:{extractArgTypes:Khe,extractComponentDescription:Yhe}},Qhe=[nhe];const ede=Object.freeze(Object.defineProperty({__proto__:null,argTypesEnhancers:Qhe,parameters:Xhe},Symbol.toStringTag,{value:"Module"})),{emitTransformCode:tde,useEffect:rde}=__STORYBOOK_MODULE_PREVIEW_API__;var nde=/<!--\?lit\$[0-9]+\$-->|<!--\??-->/g;function KG(t){const e=t?.parameters.docs?.source,r=t?.parameters.__isArgsStory;return e?.type===bv.DYNAMIC?!1:!r||e?.code||e?.type===bv.CODE}Ci(KG,"skipSourceRender");function YG(t,e){const r=t(),n=e?.parameters.docs?.source?.excludeDecorators?e.originalStoryFn(e.args,e):r;let i;if(rde(()=>{i&&tde(i,e)}),!KG(e)){const l=window.document.createElement("div");n instanceof DocumentFragment?xv(n.cloneNode(!0),l):xv(n,l),i=l.innerHTML.replace(nde,"")}return r}Ci(YG,"sourceDecorator");var ide=[YG],ode={docs:{source:{type:bv.DYNAMIC,language:"html"},story:{inline:!0}}};const sde=Object.freeze(Object.defineProperty({__proto__:null,decorators:ide,parameters:ode},Symbol.toStringTag,{value:"Module"}));var ade=Object.create,Cx=Object.defineProperty,lde=Object.getOwnPropertyDescriptor,XG=Object.getOwnPropertyNames,cde=Object.getPrototypeOf,ude=Object.prototype.hasOwnProperty,iL=(t,e)=>Cx(t,"name",{value:e,configurable:!0}),Nxe=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),Fxe=(t,e)=>function(){return e||(0,t[XG(t)[0]])((e={exports:{}}).exports,e),e.exports},hde=(t,e)=>{for(var r in e)Cx(t,r,{get:e[r],enumerable:!0})},dde=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of XG(e))!ude.call(t,i)&&i!==r&&Cx(t,i,{get:()=>e[i],enumerable:!(n=lde(e,i))||n.enumerable});return t},zxe=(t,e,r)=>(r=t!=null?ade(cde(t)):{},dde(Cx(r,"default",{value:t,enumerable:!0}),t)),pde={};hde(pde,{parameters:()=>QG});var fde=Object.entries(globalThis.TAGS_OPTIONS??{}).reduce((t,e)=>{const[r,n]=e;return n.excludeFromDocsStories&&(t[r]=!0),t},{}),QG={docs:{renderer:iL(async()=>{const{DocsRenderer:t}=await Zs(async()=>{const{DocsRenderer:e}=await import("./DocsRenderer-HT7GNKAR-BbS6k67g.js");return{DocsRenderer:e}},__vite__mapDeps([11,2,1]),import.meta.url);return new t},"renderer"),stories:{filter:iL(t=>(t.tags||[]).filter(r=>fde[r]).length===0&&!t.parameters.docs?.disable,"filter")}}};const mde=Object.freeze(Object.defineProperty({__proto__:null,parameters:QG},Symbol.toStringTag,{value:"Module"}));var nd="storybook/a11y",gde=`${nd}/panel`,yde=`${nd}/result`,_de=`${nd}/request`,bde=`${nd}/running`,vde=`${nd}/error`,xde=`${nd}/manual`,wde=`${nd}/select`,eT={RESULT:yde,REQUEST:_de,RUNNING:bde,ERROR:vde,MANUAL:xde,SELECT:wde},eH=Object.defineProperty,$h=(t,e)=>eH(t,"name",{value:e,configurable:!0}),Ede=(t,e)=>{for(var r in e)eH(t,r,{get:e[r],enumerable:!0})},Tde={};Ede(Tde,{afterEach:()=>iH,initialGlobals:()=>oH,parameters:()=>sH});const{expect:oL}=__STORYBOOK_MODULE_TEST__,{ElementA11yParameterError:Sde}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__,{global:Cde}=__STORYBOOK_MODULE_GLOBAL__,{addons:Pde,waitForAnimations:Ade}=__STORYBOOK_MODULE_PREVIEW_API__,{global:Rde}=__STORYBOOK_MODULE_GLOBAL__;var{document:Ide}=Rde,Mde=$h((t,e)=>{const r=Ide.location.pathname.replace(/iframe\.html$/,""),n={...t};return["incomplete","passes","violations"].forEach(l=>{Array.isArray(t[l])&&(n[l]=t[l].map(c=>({...c,nodes:c.nodes.map((s,p)=>{const g=`${l}.${c.id}.${p+1}`,_=`${r}?path=/story/${e}&addonPanel=${gde}&a11ySelection=${g}`;return{id:g,...s,linkPath:_}})})))}),n},"withLinkPaths"),{document:sL}=Cde,tT=Pde.getChannel(),tH={config:{},options:{}},Ode=["region"],V2=[],U2=!1,rH=$h(async()=>{if(V2.length===0){U2=!1;return}U2=!0;const t=V2.shift();t&&await t(),rH()},"runNext"),nH=$h(async(t=tH,e)=>{const n=(await Zs(()=>import("./axe-CLIqby-i.js").then(p=>p.a),[],import.meta.url))?.default||globalThis.axe,{config:i={},options:l={}}=t;if(t.element)throw new Sde;const c={include:sL?.body,exclude:[".sb-wrapper","#storybook-docs","#storybook-highlights-root"]};if(t.context){const p=typeof t.context=="object"&&"include"in t.context&&t.context.include!==void 0,g=typeof t.context=="object"&&"exclude"in t.context&&t.context.exclude!==void 0;p?c.include=t.context.include:!p&&!g&&(c.include=t.context),g&&(c.exclude=c.exclude.concat(t.context.exclude))}n.reset();const s={...i,rules:[...Ode.map(p=>({id:p,enabled:!1})),...i?.rules??[]]};return n.configure(s),new Promise((p,g)=>{const _=sL?.getElementById("storybook-highlights-root");_&&(_.style.display="none");const x=$h(async()=>{try{const P=await n.run(c,l),A=Mde(P,e);p(A)}catch(P){g(P)}},"task");V2.push(x),U2||rH(),_&&(_.style.display="")})},"run");tT.on(eT.MANUAL,async(t,e=tH)=>{try{await Ade();const r=await nH(e,t),n=JSON.parse(JSON.stringify(r));tT.emit(eT.RESULT,n,t)}catch(r){tT.emit(eT.ERROR,r)}});function G2(){try{return!1}catch{return!1}}$h(G2,"getIsVitestStandaloneRun");var aL=!1,iH=$h(async({id:t,reporting:e,parameters:r,globals:n,viewMode:i})=>{const l=r.a11y,c=n.a11y,s=l?.disable!==!0&&l?.test!=="off"&&c?.manual!==!0,p=$h(()=>{switch(l?.test){case"todo":return"warning";case"error":default:return"failed"}},"getMode");if(s&&i==="story")try{const g=await nH(l,t);if(g){const _=(g?.violations.length??0)>0;if(e.addReport({type:"a11y",version:1,result:g,status:_?p():"passed"}),G2()&&_&&p()==="failed"){if(!aL){const{toHaveNoViolations:x}=await Zs(async()=>{const{toHaveNoViolations:P}=await import("./matchers-ZRZBO4XZ-DNwlV7PV.js");return{toHaveNoViolations:P}},__vite__mapDeps([12,2]),import.meta.url);oL.extend({toHaveNoViolations:x}),aL=!0}oL(g).toHaveNoViolations()}}}catch(g){if(e.addReport({type:"a11y",version:1,result:{error:g},status:"failed"}),G2())throw g}},"afterEach"),oH={a11y:{manual:!1}},sH={a11y:{test:"todo"}};const kde=Object.freeze(Object.defineProperty({__proto__:null,afterEach:iH,initialGlobals:oH,parameters:sH},Symbol.toStringTag,{value:"Module"})),Lde=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0,0,0,0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}@media (hover:hover){.maplibregl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}}.maplibregl-ctrl button:not(:disabled):active{background-color:rgba(0,0,0,.05)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-globe .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%23333' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-globe-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%2333b5e5' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(pointer:coarse){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,Ao={ADD:"add",REMOVE:"remove"},mf={PROPERTYCHANGE:"propertychange"},Rr={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Px{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Dde(t,e,r){let n,i;r=r||La;let l=0,c=t.length,s=!1;for(;l<c;)n=l+(c-l>>1),i=+r(t[n],e),i<0?l=n+1:(c=n,s=!i);return s?l:~l}function La(t,e){return t>e?1:t<e?-1:0}function Nde(t,e){return t<e?1:t>e?-1:0}function aM(t,e,r){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if(typeof r=="function"){for(let i=1;i<n;++i){const l=t[i];if(l===e)return i;if(l<e)return r(e,t[i-1],l)>0?i-1:i}return n-1}if(r>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1;return n-1}if(r<0){for(let i=1;i<n;++i)if(t[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function Fde(t,e,r){for(;e<r;){const n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function Da(t,e){const r=Array.isArray(e)?e:[e],n=r.length;for(let i=0;i<n;i++)t[t.length]=r[i]}function du(t,e){const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function zde(t,e,r){const n=e||La;return t.every(function(i,l){if(l===0)return!0;const c=n(t[l-1],i);return!(c>0||c===0)})}function yy(){return!0}function Ax(){return!1}function _y(){}function aH(t){let e,r,n;return function(){const i=Array.prototype.slice.call(arguments);return(!r||this!==n||!du(i,r))&&(n=this,r=i,e=t.apply(this,arguments)),e}}function by(t){function e(){let r;try{r=t()}catch(n){return Promise.reject(n)}return r instanceof Promise?r:Promise.resolve(r)}return e()}function s_(t){for(const e in t)delete t[e]}function ou(t){let e;for(e in t)return!1;return!e}class $l{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function jde(t){t.stopPropagation()}class Rx extends Px{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,r){if(!e||!r)return;const n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);i.includes(r)||i.push(r)}dispatchEvent(e){const r=typeof e=="string",n=r?e:e.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const l=r?new $l(e):e;l.target||(l.target=this.eventTarget_||this);const c=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});n in c||(c[n]=0,s[n]=0),++c[n];let p;for(let g=0,_=i.length;g<_;++g)if("handleEvent"in i[g]?p=i[g].handleEvent(l):p=i[g].call(this,l),p===!1||l.propagationStopped){p=!1;break}if(--c[n]===0){let g=s[n];for(delete s[n];g--;)this.removeEventListener(n,_y);delete c[n]}return p}disposeInternal(){this.listeners_&&s_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,r){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const i=n.indexOf(r);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=_y,++this.pendingRemovals_[e]):(n.splice(i,1),n.length===0&&delete this.listeners_[e]))}}function en(t,e,r,n,i){if(i){const c=r;r=function(s){return t.removeEventListener(e,r),c.call(n??this,s)}}else n&&n!==t&&(r=r.bind(n));const l={target:t,type:e,listener:r};return t.addEventListener(e,r),l}function Ev(t,e,r,n){return en(t,e,r,n,!0)}function Rn(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),s_(t))}class a_ extends Rx{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Rr.CHANGE)}getRevision(){return this.revision_}onInternal(e,r){if(Array.isArray(e)){const n=e.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=en(this,e[l],r);return i}return en(this,e,r)}onceInternal(e,r){let n;if(Array.isArray(e)){const i=e.length;n=new Array(i);for(let l=0;l<i;++l)n[l]=Ev(this,e[l],r)}else n=Ev(this,e,r);return r.ol_key=n,n}unInternal(e,r){const n=r.ol_key;if(n)Bde(n);else if(Array.isArray(e))for(let i=0,l=e.length;i<l;++i)this.removeEventListener(e[i],r);else this.removeEventListener(e,r)}}a_.prototype.on;a_.prototype.once;a_.prototype.un;function Bde(t){if(Array.isArray(t))for(let e=0,r=t.length;e<r;++e)Rn(t[e]);else Rn(t)}function Sr(){throw new Error("Unimplemented abstract method.")}let qde=0;function Nr(t){return t.ol_uid||(t.ol_uid=String(++qde))}class lL extends $l{constructor(e,r,n){super(e),this.key=r,this.oldValue=n}}class la extends a_{constructor(e){super(),this.on,this.once,this.un,Nr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let r;return this.values_&&this.values_.hasOwnProperty(e)&&(r=this.values_[e]),r}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,r){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new lL(n,e,r)),n=mf.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new lL(n,e,r))}addChangeListener(e,r){this.addEventListener(`change:${e}`,r)}removeChangeListener(e,r){this.removeEventListener(`change:${e}`,r)}set(e,r,n){const i=this.values_||(this.values_={});if(n)i[e]=r;else{const l=i[e];i[e]=r,l!==r&&this.notify(e,l)}}setProperties(e,r){for(const n in e)this.set(n,e[n],r)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,r){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],ou(this.values_)&&(this.values_=null),r||this.notify(e,n)}}}const cL={LENGTH:"length"};class D0 extends $l{constructor(e,r,n){super(e),this.element=r,this.index=n}}class ls extends la{constructor(e,r){if(super(),this.on,this.once,this.un,r=r||{},this.unique_=!!r.unique,this.array_=e??[],this.unique_)for(let n=1,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let r=0,n=e.length;r<n;++r)this.push(e[r]);return this}forEach(e){const r=this.array_;for(let n=0,i=r.length;n<i;++n)e(r[n],n,r)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(cL.LENGTH)}insertAt(e,r){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(r),this.array_.splice(e,0,r),this.updateLength_(),this.dispatchEvent(new D0(Ao.ADD,r,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const r=this.getLength();return this.insertAt(r,e),this.getLength()}remove(e){const r=this.array_;for(let n=0,i=r.length;n<i;++n)if(r[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const r=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new D0(Ao.REMOVE,r,e)),r}setAt(e,r){const n=this.getLength();if(e>=n){this.insertAt(e,r);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(r,e);const i=this.array_[e];this.array_[e]=r,this.dispatchEvent(new D0(Ao.REMOVE,i,e)),this.dispatchEvent(new D0(Ao.ADD,r,e))}updateLength_(){this.set(cL.LENGTH,this.array_.length)}assertUnique_(e,r){const n=this.array_;for(let i=0,l=n.length;i<l;++i)if(n[i]===e&&i!==r)throw new Error("Duplicate item added to a unique collection")}}class Tp extends $l{constructor(e,r,n){super(e),this.map=r,this.frameState=n!==void 0?n:null}}class Ac extends Tp{constructor(e,r,n,i,l,c){super(e,r,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=c}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ti={SINGLECLICK:"singleclick",CLICK:Rr.CLICK,DBLCLICK:Rr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Vh=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",$de=Vh.includes("safari")&&!Vh.includes("chrom");$de&&(Vh.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Vh));const Vde=Vh.includes("webkit")&&!Vh.includes("edge"),lH=Vh.includes("macintosh"),Ude=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ps=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,cH=typeof Image<"u"&&Image.prototype.decode,uH=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}(),Dc={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup"};class Gde extends Rx{constructor(e,r){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=r===void 0?1:r,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=en(n,Dc.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=en(n,Dc.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Rr.TOUCHMOVE,this.boundHandleTouchMove_,uH?{passive:!1}:!1)}emulateClick_(e){let r=new Ac(ti.CLICK,this.map_,e);this.dispatchEvent(r),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,r=new Ac(ti.DBLCLICK,this.map_,e),this.dispatchEvent(r)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Ac(ti.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const r=e,n=r.pointerId;if(r.type==ti.POINTERUP||r.type==ti.POINTERCANCEL){delete this.trackedTouches_[n];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==r.target){delete this.trackedTouches_[i];break}}else(r.type==ti.POINTERDOWN||r.type==ti.POINTERMOVE)&&(this.trackedTouches_[n]=r);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const r=new Ac(ti.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(r),this.emulateClicks_&&!r.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Rn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const r=new Ac(ti.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(r),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(en(n,ti.POINTERMOVE,this.handlePointerMove_,this),en(n,ti.POINTERUP,this.handlePointerUp_,this),en(this.element_,ti.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(en(this.element_.getRootNode(),ti.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const r=new Ac(ti.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(r)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const r=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Ac(ti.POINTERMOVE,this.map_,e,r))}handleTouchMove_(e){const r=this.originalPointerMoveEvent_;(!r||r.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Rn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Rr.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Rn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Rn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const vl={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},co={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},qt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function fn(t,e){if(!t)throw new Error(e)}const Tv=1/0;class Hde{constructor(e,r){this.priorityFunction_=e,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,s_(this.queuedElements_)}dequeue(){const e=this.elements_,r=this.priorities_,n=e[0];e.length==1?(e.length=0,r.length=0):(e[0]=e.pop(),r[0]=r.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(e){fn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const r=this.priorityFunction_(e);return r!=Tv?(this.elements_.push(e),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const r=this.elements_,n=this.priorities_,i=r.length,l=r[e],c=n[e],s=e;for(;e<i>>1;){const p=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),_=g<i&&n[g]<n[p]?g:p;r[e]=r[_],n[e]=n[_],e=_}r[e]=l,n[e]=c,this.siftDown_(s,e)}siftDown_(e,r){const n=this.elements_,i=this.priorities_,l=n[r],c=i[r];for(;r>e;){const s=this.getParentIndex_(r);if(i[s]>c)n[r]=n[s],i[r]=i[s],r=s;else break}n[r]=l,i[r]=c}reprioritize(){const e=this.priorityFunction_,r=this.elements_,n=this.priorities_;let i=0;const l=r.length;let c,s,p;for(s=0;s<l;++s)c=r[s],p=e(c),p==Tv?delete this.queuedElements_[this.keyFunction_(c)]:(n[i]=p,r[i++]=c);r.length=i,n.length=i,this.heapify_()}}class Jde extends Hde{constructor(e,r){super(n=>e.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=r,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const r=super.enqueue(e);return r&&e[0].addEventListener(Rr.CHANGE,this.boundHandleTileChange_),r}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const r=e.target,n=r.getState();if(n===qt.LOADED||n===qt.ERROR||n===qt.EMPTY){n!==qt.ERROR&&r.removeEventListener(Rr.CHANGE,this.boundHandleTileChange_);const i=r.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,r){let n=0;for(;this.tilesLoading_<e&&n<r&&this.getCount()>0;){const i=this.dequeue()[0],l=i.getKey();i.getState()===qt.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,i.load())}}}function Wde(t,e,r,n,i){if(!t||!(r in t.wantedTiles)||!t.wantedTiles[r][e.getKey()])return Tv;const l=t.viewState.center,c=n[0]-l[0],s=n[1]-l[1];return 65536*Math.log(i)+Math.sqrt(c*c+s*s)/i}const ri={ANIMATING:0,INTERACTING:1},Js={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function qn(t,e,r){return Math.min(Math.max(t,e),r)}function Zde(t,e,r,n,i,l){const c=i-r,s=l-n;if(c!==0||s!==0){const p=((t-r)*c+(e-n)*s)/(c*c+s*s);p>1?(r=i,n=l):p>0&&(r+=c*p,n+=s*p)}return wh(t,e,r,n)}function wh(t,e,r,n){const i=r-t,l=n-e;return i*i+l*l}function Kde(t){const e=t.length;for(let n=0;n<e;n++){let i=n,l=Math.abs(t[n][n]);for(let s=n+1;s<e;s++){const p=Math.abs(t[s][n]);p>l&&(l=p,i=s)}if(l===0)return null;const c=t[i];t[i]=t[n],t[n]=c;for(let s=n+1;s<e;s++){const p=-t[s][n]/t[n][n];for(let g=n;g<e+1;g++)n==g?t[s][g]=0:t[s][g]+=p*t[n][g]}}const r=new Array(e);for(let n=e-1;n>=0;n--){r[n]=t[n][e]/t[n][n];for(let i=n-1;i>=0;i--)t[i][e]-=t[i][n]*r[n]}return r}function uL(t){return t*180/Math.PI}function Yc(t){return t*Math.PI/180}function Eh(t,e){const r=t%e;return r*e<0?r+e:r}function is(t,e,r){return t+r*(e-t)}function Ix(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}function N0(t,e){return Math.floor(Ix(t,e))}function F0(t,e){return Math.ceil(Ix(t,e))}function H2(t,e,r){if(t>=e&&t<r)return t;const n=r-e;return((t-e)%n+n)%n+e}function hL(t,e,r){return function(n,i,l,c,s){if(!n)return;if(!i&&!e)return n;const p=e?0:l[0]*i,g=e?0:l[1]*i,_=s?s[0]:0,x=s?s[1]:0;let P=t[0]+p/2+_,A=t[2]-p/2+_,M=t[1]+g/2+x,F=t[3]-g/2+x;P>A&&(P=(A+P)/2,A=P),M>F&&(M=(F+M)/2,F=M);let z=qn(n[0],P,A),j=qn(n[1],M,F);if(c&&r&&i){const $=30*i;z+=-$*Math.log(1+Math.max(0,P-n[0])/$)+$*Math.log(1+Math.max(0,n[0]-A)/$),j+=-$*Math.log(1+Math.max(0,M-n[1])/$)+$*Math.log(1+Math.max(0,n[1]-F)/$)}return[z,j]}}function Yde(t){return t}const $i={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function J2(t){const e=Ns();for(let r=0,n=t.length;r<n;++r)$g(e,t[r]);return e}function Xde(t,e,r){const n=Math.min.apply(null,t),i=Math.min.apply(null,e),l=Math.max.apply(null,t),c=Math.max.apply(null,e);return Ll(n,i,l,c,r)}function Xc(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function hH(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function id(t,e,r){let n,i;return e<t[0]?n=t[0]-e:t[2]<e?n=e-t[2]:n=0,r<t[1]?i=t[1]-r:t[3]<r?i=r-t[3]:i=0,n*n+i*i}function gf(t,e){return lM(t,e[0],e[1])}function uh(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function lM(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function W2(t,e){const r=t[0],n=t[1],i=t[2],l=t[3],c=e[0],s=e[1];let p=$i.UNKNOWN;return c<r?p=p|$i.LEFT:c>i&&(p=p|$i.RIGHT),s<n?p=p|$i.BELOW:s>l&&(p=p|$i.ABOVE),p===$i.UNKNOWN&&(p=$i.INTERSECTING),p}function Ns(){return[1/0,1/0,-1/0,-1/0]}function Ll(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function zf(t){return Ll(1/0,1/0,-1/0,-1/0,t)}function dH(t,e){const r=t[0],n=t[1];return Ll(r,n,r,n,e)}function cM(t,e,r,n,i){const l=zf(i);return fH(l,t,e,r,n)}function yf(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function pH(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function $g(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function fH(t,e,r,n,i){for(;r<n;r+=i)Qde(t,e[r],e[r+1]);return t}function Qde(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function mH(t,e){let r;return r=e(Mx(t)),r||(r=e(Ox(t)),r)||(r=e(kx(t)),r)||(r=e(Vl(t)),r)?r:!1}function Z2(t){let e=0;return l_(t)||(e=En(t)*Eo(t)),e}function Mx(t){return[t[0],t[1]]}function Ox(t){return[t[2],t[1]]}function Dl(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function epe(t,e){let r;if(e==="bottom-left")r=Mx(t);else if(e==="bottom-right")r=Ox(t);else if(e==="top-left")r=Vl(t);else if(e==="top-right")r=kx(t);else throw new Error("Invalid corner");return r}function K2(t,e,r,n,i){const[l,c,s,p,g,_,x,P]=gH(t,e,r,n);return Ll(Math.min(l,s,g,x),Math.min(c,p,_,P),Math.max(l,s,g,x),Math.max(c,p,_,P),i)}function gH(t,e,r,n){const i=e*n[0]/2,l=e*n[1]/2,c=Math.cos(r),s=Math.sin(r),p=i*c,g=i*s,_=l*c,x=l*s,P=t[0],A=t[1];return[P-p+x,A-g-_,P-p-x,A-g+_,P+p-x,A+g+_,P+p+x,A+g-_,P-p+x,A-g-_]}function Eo(t){return t[3]-t[1]}function Rl(t,e,r){const n=r||Ns();return ui(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):zf(n),n}function Vl(t){return[t[0],t[3]]}function kx(t){return[t[2],t[3]]}function En(t){return t[2]-t[0]}function ui(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function l_(t){return t[2]<t[0]||t[3]<t[1]}function tpe(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function rpe(t,e,r){let n=!1;const i=W2(t,e),l=W2(t,r);if(i===$i.INTERSECTING||l===$i.INTERSECTING)n=!0;else{const c=t[0],s=t[1],p=t[2],g=t[3],_=e[0],x=e[1],P=r[0],A=r[1],M=(A-x)/(P-_);let F,z;l&$i.ABOVE&&!(i&$i.ABOVE)&&(F=P-(A-g)/M,n=F>=c&&F<=p),!n&&l&$i.RIGHT&&!(i&$i.RIGHT)&&(z=A-(P-p)*M,n=z>=s&&z<=g),!n&&l&$i.BELOW&&!(i&$i.BELOW)&&(F=P-(A-s)/M,n=F>=c&&F<=p),!n&&l&$i.LEFT&&!(i&$i.LEFT)&&(z=A-(P-c)*M,n=z>=s&&z<=g)}return n}function yH(t,e,r,n){if(l_(t))return zf(r);let i=[];if(n>1){const s=t[2]-t[0],p=t[3]-t[1];for(let g=0;g<n;++g)i.push(t[0]+s*g/n,t[1],t[2],t[1]+p*g/n,t[2]-s*g/n,t[3],t[0],t[3]-p*g/n)}else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);const l=[],c=[];for(let s=0,p=i.length;s<p;s+=2)l.push(i[s]),c.push(i[s+1]);return Xde(l,c,r)}function _H(t,e){const r=e.getExtent(),n=Dl(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){const i=En(r),c=Math.floor((n[0]-r[0])/i)*i;t[0]-=c,t[2]-=c}return t}function bH(t,e,r){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];_H(t,e);const i=En(n);if(En(t)>i&&!r)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}function npe(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Sv(t,e){let r=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function uM(t,e){const r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,l=t[1]*r+t[0]*n;return t[0]=i,t[1]=l,t}function ipe(t,e){return t[0]*=e,t[1]*=e,t}function ope(t,e){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function spe(t,e){return Math.sqrt(ope(t,e))}function hM(t,e){if(e.canWrapX()){const r=En(e.getExtent()),n=ape(t,e,r);n&&(t[0]-=n*r)}return t}function ape(t,e,r){const n=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(r=r||En(n),i=Math.floor((t[0]-n[0])/r)),i}function vH(t){return Math.pow(t,3)}function od(t){return 1-vH(1-t)}function lpe(t){return 3*t*t-2*t*t*t}function cpe(t){return t}const upe=63710088e-1;function dL(t,e,r){r=r||upe;const n=Yc(t[1]),i=Yc(e[1]),l=(i-n)/2,c=Yc(e[0]-t[0])/2,s=Math.sin(l)*Math.sin(l)+Math.sin(c)*Math.sin(c)*Math.cos(n)*Math.cos(i);return 2*r*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}function xH(...t){console.warn(...t)}const Uh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Lx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Uh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const c_=6378137,Lp=Math.PI*c_,hpe=[-Lp,-Lp,Lp,Lp],dpe=[-180,-85,180,85],z0=c_*Math.log(Math.tan(Math.PI/2));class up extends Lx{constructor(e){super({code:e,units:"m",extent:hpe,global:!0,worldExtent:dpe,getPointResolution:function(r,n){return r/Math.cosh(n[1]/c_)}})}}const pL=[new up("EPSG:3857"),new up("EPSG:102100"),new up("EPSG:102113"),new up("EPSG:900913"),new up("http://www.opengis.net/def/crs/EPSG/0/3857"),new up("http://www.opengis.net/gml/srs/epsg.xml#3857")];function ppe(t,e,r,n){const i=t.length;r=r>1?r:2,n=n??r,e===void 0&&(r>2?e=t.slice():e=new Array(i));for(let l=0;l<i;l+=n){e[l]=Lp*t[l]/180;let c=c_*Math.log(Math.tan(Math.PI*(+t[l+1]+90)/360));c>z0?c=z0:c<-z0&&(c=-z0),e[l+1]=c}return e}function fpe(t,e,r,n){const i=t.length;r=r>1?r:2,n=n??r,e===void 0&&(r>2?e=t.slice():e=new Array(i));for(let l=0;l<i;l+=n)e[l]=180*t[l]/Lp,e[l+1]=360*Math.atan(Math.exp(t[l+1]/c_))/Math.PI-90;return e}const mpe=6378137,fL=[-180,-90,180,90],gpe=Math.PI*mpe/180;class Zu extends Lx{constructor(e,r){super({code:e,units:"degrees",extent:fL,axisOrientation:r,global:!0,metersPerUnit:gpe,worldExtent:fL})}}const mL=[new Zu("CRS:84"),new Zu("EPSG:4326","neu"),new Zu("urn:ogc:def:crs:OGC:1.3:CRS84"),new Zu("urn:ogc:def:crs:OGC:2:84"),new Zu("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Zu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Zu("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Y2={};function ype(t){return Y2[t]||Y2[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function _pe(t,e){Y2[t]=e}let $p={};function vy(t,e,r){const n=t.getCode(),i=e.getCode();n in $p||($p[n]={}),$p[n][i]=r}function rT(t,e){return t in $p&&e in $p[t]?$p[t][e]:null}const Cv=.9996,Ms=.00669438,Dx=Ms*Ms,Nx=Dx*Ms,hh=Ms/(1-Ms),gL=Math.sqrt(1-Ms),_f=(1-gL)/(1+gL),wH=_f*_f,dM=wH*_f,pM=dM*_f,EH=pM*_f,TH=1-Ms/4-3*Dx/64-5*Nx/256,bpe=3*Ms/8+3*Dx/32+45*Nx/1024,vpe=15*Dx/256+45*Nx/1024,xpe=35*Nx/3072,wpe=3/2*_f-27/32*dM+269/512*EH,Epe=21/16*wH-55/32*pM,Tpe=151/96*dM-417/128*EH,Spe=1097/512*pM,Pv=6378137;function Cpe(t,e,r){const n=t-5e5,c=(r.north?e:e-1e7)/Cv/(Pv*TH),s=c+wpe*Math.sin(2*c)+Epe*Math.sin(4*c)+Tpe*Math.sin(6*c)+Spe*Math.sin(8*c),p=Math.sin(s),g=p*p,_=Math.cos(s),x=p/_,P=x*x,A=P*P,M=1-Ms*g,F=Math.sqrt(1-Ms*g),z=Pv/F,j=(1-Ms)/M,$=hh*_**2,W=$*$,X=n/(z*Cv),te=X*X,ne=te*X,Z=ne*X,U=Z*X,K=U*X,he=s-x/j*(te/2-Z/24*(5+3*P+10*$-4*W-9*hh))+K/720*(61+90*P+298*$+45*A-252*hh-3*W);let ue=(X-ne/6*(1+2*P+$)+U/120*(5-2*$+28*P-3*W+8*hh+24*A))/_;return ue=H2(ue+Yc(SH(r.number)),-Math.PI,Math.PI),[uL(ue),uL(he)]}const yL=-80,_L=84,Ppe=-180,Ape=180;function Rpe(t,e,r){t=H2(t,Ppe,Ape),e<yL?e=yL:e>_L&&(e=_L);const n=Yc(e),i=Math.sin(n),l=Math.cos(n),c=i/l,s=c*c,p=s*s,g=Yc(t),_=SH(r.number),x=Yc(_),P=Pv/Math.sqrt(1-Ms*i**2),A=hh*l**2,M=l*H2(g-x,-Math.PI,Math.PI),F=M*M,z=F*M,j=z*M,$=j*M,W=$*M,X=Pv*(TH*n-bpe*Math.sin(2*n)+vpe*Math.sin(4*n)-xpe*Math.sin(6*n)),te=Cv*P*(M+z/6*(1-s+A)+$/120*(5-18*s+p+72*A-58*hh))+5e5;let ne=Cv*(X+P*c*(F/2+j/24*(5-s+9*A+4*A**2)+W/720*(61-58*s+p+600*A-330*hh)));return r.north||(ne+=1e7),[te,ne]}function SH(t){return(t-1)*6-180+3}const Ipe=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function CH(t){let e=0;for(const i of Ipe){const l=t.match(i);if(l){e=parseInt(l[1]);break}}if(!e)return null;let r=0,n=!1;return e>32700&&e<32761?r=e-32700:e>32600&&e<32661&&(n=!0,r=e-32600),r?{number:r,north:n}:null}function bL(t,e){return function(r,n,i,l){const c=r.length;i=i>1?i:2,l=l??i,n||(i>2?n=r.slice():n=new Array(c));for(let s=0;s<c;s+=l){const p=r[s],g=r[s+1],_=t(p,g,e);n[s]=_[0],n[s+1]=_[1]}return n}}function Mpe(t){return CH(t)?new Lx({code:t,units:"m"}):null}function Ope(t){const e=CH(t.getCode());return e?{forward:bL(Rpe,e),inverse:bL(Cpe,e)}:null}const kpe=[Ope],Lpe=[Mpe];let X2=!0;function PH(t){X2=!1}function fM(t,e){if(e!==void 0){for(let r=0,n=t.length;r<n;++r)e[r]=t[r];e=e}else e=t.slice();return e}function Q2(t){_pe(t.getCode(),t),vy(t,t,fM)}function Dpe(t){t.forEach(Q2)}function An(t){if(typeof t!="string")return t;const e=ype(t);if(e)return e;for(const r of Lpe){const n=r(t);if(n)return n}return null}function Av(t,e,r,n){t=An(t);let i;const l=t.getPointResolutionFunc();if(l){if(i=l(e,r),n&&n!==t.getUnits()){const c=t.getMetersPerUnit();c&&(i=i*c/Uh[n])}}else{const c=t.getUnits();if(c=="degrees"&&!n||n=="degrees")i=e;else{const s=u_(t,An("EPSG:4326"));if(!s&&c!=="degrees")i=e*t.getMetersPerUnit();else{let g=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];g=s(g,g,2);const _=dL(g.slice(0,2),g.slice(2,4)),x=dL(g.slice(4,6),g.slice(6,8));i=(_+x)/2}const p=n?Uh[n]:t.getMetersPerUnit();p!==void 0&&(i/=p)}}return i}function vL(t){Dpe(t),t.forEach(function(e){t.forEach(function(r){e!==r&&vy(e,r,fM)})})}function Npe(t,e,r,n){t.forEach(function(i){e.forEach(function(l){vy(i,l,r),vy(l,i,n)})})}function mM(t,e){return t?typeof t=="string"?An(t):t:An(e)}function Fpe(t){return function(e,r,n,i){const l=e.length;n=n!==void 0?n:2,i=i??n,r=r!==void 0?r:new Array(l);for(let c=0;c<l;c+=i){const s=t(e.slice(c,c+n)),p=s.length;for(let g=0,_=i;g<_;++g)r[c+g]=g>=p?e[c+g]:s[g]}return r}}function Rv(t,e){return PH(),bf(t,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function zpe(t,e){const r=bf(t,"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Eh(n+180,360)-180),r}function Ro(t,e){if(t===e)return!0;const r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||u_(t,e)===fM)&&r}function u_(t,e){const r=t.getCode(),n=e.getCode();let i=rT(r,n);if(i)return i;let l=null,c=null;for(const p of kpe)l||(l=p(t)),c||(c=p(e));if(!l&&!c)return null;const s="EPSG:4326";if(c)if(l)i=nT(l.inverse,c.forward);else{const p=rT(r,s);p&&(i=nT(p,c.forward))}else{const p=rT(s,n);p&&(i=nT(l.inverse,p))}return i&&(Q2(t),Q2(e),vy(t,e,i)),i}function nT(t,e){return function(r,n,i,l){return n=t(r,n,i,l),e(n,n,i,l)}}function Gh(t,e){const r=An(t),n=An(e);return u_(r,n)}function bf(t,e,r){const n=Gh(e,r);if(!n){const i=An(e).getCode(),l=An(r).getCode();throw new Error(`No transform available between ${i} and ${l}`)}return n(t,void 0,t.length)}function Vg(t,e,r,n){const i=Gh(e,r);return yH(t,i,void 0,n)}let jpe=null;function Bpe(){return jpe}function eC(t,e){return t}function bl(t,e){return X2&&!Sv(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(X2=!1,xH("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function gM(t,e){return t}function zc(t,e){return t}function qpe(){vL(pL),vL(mL),Npe(mL,pL,ppe,fpe)}qpe();const AH=new Array(6);function Os(){return[1,0,0,1,0,0]}function xL(t){return _M(t,1,0,0,1,0,0)}function yM(t,e){const r=t[0],n=t[1],i=t[2],l=t[3],c=t[4],s=t[5],p=e[0],g=e[1],_=e[2],x=e[3],P=e[4],A=e[5];return t[0]=r*p+i*g,t[1]=n*p+l*g,t[2]=r*_+i*x,t[3]=n*_+l*x,t[4]=r*P+i*A+c,t[5]=n*P+l*A+s,t}function _M(t,e,r,n,i,l,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=l,t[5]=c,t}function $pe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Di(t,e){const r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function iT(t,e,r){return yM(t,_M(AH,e,0,0,r,0,0))}function Vpe(t,e,r){return yM(t,_M(AH,1,0,0,1,e,r))}function Nl(t,e,r,n,i,l,c,s){const p=Math.sin(l),g=Math.cos(l);return t[0]=n*g,t[1]=i*p,t[2]=-n*p,t[3]=i*g,t[4]=c*n*g-s*n*p+e,t[5]=c*i*p+s*i*g+r,t}function RH(t,e){const r=Upe(e);fn(r!==0,"Transformation matrix cannot be inverted");const n=e[0],i=e[1],l=e[2],c=e[3],s=e[4],p=e[5];return t[0]=c/r,t[1]=-i/r,t[2]=-l/r,t[3]=n/r,t[4]=(l*p-c*s)/r,t[5]=-(n*p-i*s)/r,t}function Upe(t){return t[0]*t[3]-t[1]*t[2]}const Gpe=[1e5,1e5,1e5,1e5,2,2];function Hpe(t){return"matrix("+t.join(", ")+")"}function tC(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function Jpe(t,e){const r=tC(t),n=tC(e);for(let i=0;i<6;++i)if(Math.round((r[i]-n[i])*Gpe[i])!==0)return!1;return!0}function Qc(t,e,r,n,i,l,c){l=l||[],c=c||2;let s=0;for(let p=e;p<r;p+=n){const g=t[p],_=t[p+1];l[s++]=i[0]*g+i[2]*_+i[4],l[s++]=i[1]*g+i[3]*_+i[5];for(let x=2;x<c;x++)l[s++]=t[p+x]}return l&&l.length!=s&&(l.length=s),l}function IH(t,e,r,n,i,l,c){c=c||[];const s=Math.cos(i),p=Math.sin(i),g=l[0],_=l[1];let x=0;for(let P=e;P<r;P+=n){const A=t[P]-g,M=t[P+1]-_;c[x++]=g+A*s-M*p,c[x++]=_+A*p+M*s;for(let F=P+2;F<P+n;++F)c[x++]=t[F]}return c&&c.length!=x&&(c.length=x),c}function Wpe(t,e,r,n,i,l,c,s){s=s||[];const p=c[0],g=c[1];let _=0;for(let x=e;x<r;x+=n){const P=t[x]-p,A=t[x+1]-g;s[_++]=p+i*P,s[_++]=g+l*A;for(let M=x+2;M<x+n;++M)s[_++]=t[M]}return s&&s.length!=_&&(s.length=_),s}function Zpe(t,e,r,n,i,l,c){c=c||[];let s=0;for(let p=e;p<r;p+=n){c[s++]=t[p]+i,c[s++]=t[p+1]+l;for(let g=p+2;g<p+n;++g)c[s++]=t[g]}return c&&c.length!=s&&(c.length=s),c}const wL=Os(),Kpe=[NaN,NaN];class MH extends la{constructor(){super(),this.extent_=Ns(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=aH((e,r,n)=>{if(!n)return this.getSimplifiedGeometry(r);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(r)})}simplifyTransformed(e,r){return this.simplifyTransformedInternal(this.getRevision(),e,r)}clone(){return Sr()}closestPointXY(e,r,n,i){return Sr()}containsXY(e,r){return this.closestPointXY(e,r,Kpe,Number.MIN_VALUE)===0}getClosestPoint(e,r){return r=r||[NaN,NaN],this.closestPointXY(e[0],e[1],r,1/0),r}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Sr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&zf(r),this.extentRevision_=this.getRevision()}return tpe(this.extent_,e)}rotate(e,r){Sr()}scale(e,r,n){Sr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Sr()}getType(){return Sr()}applyTransform(e){Sr()}intersectsExtent(e){return Sr()}translate(e,r){Sr()}transform(e,r){const n=An(e),i=n.getUnits()=="tile-pixels"?function(l,c,s){const p=n.getExtent(),g=n.getWorldExtent(),_=Eo(g)/Eo(p);Nl(wL,g[0],g[3],_,-_,0,0,0);const x=Qc(l,0,l.length,s,wL,c),P=Gh(n,r);return P?P(x,x,s):x}:Gh(n,r);return this.applyTransform(i),this}}class sd extends MH{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return cM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Sr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const r=this.getSimplifiedGeometryInternal(e);return r.getFlatCoordinates().length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,r){this.stride=EL(e),this.layout=e,this.flatCoordinates=r}setCoordinates(e,r){Sr()}setLayout(e,r,n){let i;if(e)i=EL(e);else{for(let l=0;l<n;++l){if(r.length===0){this.layout="XY",this.stride=2;return}r=r[0]}i=r.length,e=ad(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,r){const n=this.getFlatCoordinates();if(n){const i=this.getStride();IH(n,0,n.length,i,e,r,n),this.changed()}}scale(e,r,n){r===void 0&&(r=e),n||(n=Dl(this.getExtent()));const i=this.getFlatCoordinates();if(i){const l=this.getStride();Wpe(i,0,i.length,l,e,r,n,i),this.changed()}}translate(e,r){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Zpe(n,0,n.length,i,e,r,n),this.changed()}}}function ad(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function EL(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function Ype(t,e,r){const n=t.getFlatCoordinates();if(!n)return null;const i=t.getStride();return Qc(n,0,n.length,i,e,r)}function OH(t,e,r,n){let i=0;const l=t[r-n],c=t[r-n+1];let s=0,p=0;for(;e<r;e+=n){const g=t[e]-l,_=t[e+1]-c;i+=p*g-s*_,s=g,p=_}return i/2}function kH(t,e,r,n){let i=0;for(let l=0,c=r.length;l<c;++l){const s=r[l];i+=OH(t,e,s,n),e=s}return i}function Xpe(t,e,r,n){let i=0;for(let l=0,c=r.length;l<c;++l){const s=r[l];i+=kH(t,e,s,n),e=s[s.length-1]}return i}function TL(t,e,r,n,i,l,c){const s=t[e],p=t[e+1],g=t[r]-s,_=t[r+1]-p;let x;if(g===0&&_===0)x=e;else{const P=((i-s)*g+(l-p)*_)/(g*g+_*_);if(P>1)x=r;else if(P>0){for(let A=0;A<n;++A)c[A]=is(t[e+A],t[r+A],P);c.length=n;return}else x=e}for(let P=0;P<n;++P)c[P]=t[x+P];c.length=n}function bM(t,e,r,n,i){let l=t[e],c=t[e+1];for(e+=n;e<r;e+=n){const s=t[e],p=t[e+1],g=wh(l,c,s,p);g>i&&(i=g),l=s,c=p}return i}function vM(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){const s=r[l];i=bM(t,e,s,n,i),e=s}return i}function Qpe(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){const s=r[l];i=vM(t,e,s,n,i),e=s[s.length-1]}return i}function xM(t,e,r,n,i,l,c,s,p,g,_){if(e==r)return g;let x,P;if(i===0){if(P=wh(c,s,t[e],t[e+1]),P<g){for(x=0;x<n;++x)p[x]=t[e+x];return p.length=n,P}return g}_=_||[NaN,NaN];let A=e+n;for(;A<r;)if(TL(t,A-n,A,n,c,s,_),P=wh(c,s,_[0],_[1]),P<g){for(g=P,x=0;x<n;++x)p[x]=_[x];p.length=n,A+=n}else A+=n*Math.max((Math.sqrt(P)-Math.sqrt(g))/i|0,1);if(l&&(TL(t,r-n,e,n,c,s,_),P=wh(c,s,_[0],_[1]),P<g)){for(g=P,x=0;x<n;++x)p[x]=_[x];p.length=n}return g}function wM(t,e,r,n,i,l,c,s,p,g,_){_=_||[NaN,NaN];for(let x=0,P=r.length;x<P;++x){const A=r[x];g=xM(t,e,A,n,i,l,c,s,p,g,_),e=A}return g}function efe(t,e,r,n,i,l,c,s,p,g,_){_=_||[NaN,NaN];for(let x=0,P=r.length;x<P;++x){const A=r[x];g=wM(t,e,A,n,i,l,c,s,p,g,_),e=A[A.length-1]}return g}function tfe(t,e,r,n){for(let i=0,l=r.length;i<l;++i)t[e++]=r[i];return e}function Fx(t,e,r,n){for(let i=0,l=r.length;i<l;++i){const c=r[i];for(let s=0;s<n;++s)t[e++]=c[s]}return e}function h_(t,e,r,n,i){i=i||[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=Fx(t,e,r[c],n);i[l++]=p,e=p}return i.length=l,i}function LH(t,e,r,n,i){i=i||[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=h_(t,e,r[c],n,i[l]);p.length===0&&(p[0]=e),i[l++]=p,e=p[p.length-1]}return i.length=l,i}function jc(t,e,r,n,i){i=i!==void 0?i:[];let l=0;for(let c=e;c<r;c+=n)i[l++]=t.slice(c,c+n);return i.length=l,i}function xy(t,e,r,n,i){i=i!==void 0?i:[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=r[c];i[l++]=jc(t,e,p,n,i[l]),e=p}return i.length=l,i}function rC(t,e,r,n,i){i=i!==void 0?i:[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=r[c];i[l++]=p.length===1&&p[0]===e?[]:xy(t,e,p,n,i[l]),e=p[p.length-1]}return i.length=l,i}function zx(t,e,r,n,i,l,c){const s=(r-e)/n;if(s<3){for(;e<r;e+=n)l[c++]=t[e],l[c++]=t[e+1];return c}const p=new Array(s);p[0]=1,p[s-1]=1;const g=[e,r-n];let _=0;for(;g.length>0;){const x=g.pop(),P=g.pop();let A=0;const M=t[P],F=t[P+1],z=t[x],j=t[x+1];for(let $=P+n;$<x;$+=n){const W=t[$],X=t[$+1],te=Zde(W,X,M,F,z,j);te>A&&(_=$,A=te)}A>i&&(p[(_-e)/n]=1,P+n<_&&g.push(P,_),_+n<x&&g.push(_,x))}for(let x=0;x<s;++x)p[x]&&(l[c++]=t[e+x*n],l[c++]=t[e+x*n+1]);return c}function DH(t,e,r,n,i,l,c,s){for(let p=0,g=r.length;p<g;++p){const _=r[p];c=zx(t,e,_,n,i,l,c),s.push(c),e=_}return c}function rh(t,e){return e*Math.round(t/e)}function rfe(t,e,r,n,i,l,c){if(e==r)return c;let s=rh(t[e],i),p=rh(t[e+1],i);e+=n,l[c++]=s,l[c++]=p;let g,_;do if(g=rh(t[e],i),_=rh(t[e+1],i),e+=n,e==r)return l[c++]=g,l[c++]=_,c;while(g==s&&_==p);for(;e<r;){const x=rh(t[e],i),P=rh(t[e+1],i);if(e+=n,x==g&&P==_)continue;const A=g-s,M=_-p,F=x-s,z=P-p;if(A*z==M*F&&(A<0&&F<A||A==F||A>0&&F>A)&&(M<0&&z<M||M==z||M>0&&z>M)){g=x,_=P;continue}l[c++]=g,l[c++]=_,s=g,p=_,g=x,_=P}return l[c++]=g,l[c++]=_,c}function EM(t,e,r,n,i,l,c,s){for(let p=0,g=r.length;p<g;++p){const _=r[p];c=rfe(t,e,_,n,i,l,c),s.push(c),e=_}return c}function nfe(t,e,r,n,i,l,c,s){for(let p=0,g=r.length;p<g;++p){const _=r[p],x=[];c=EM(t,e,_,n,i,l,c,x),s.push(x),e=_[_.length-1]}return c}class wy extends sd{constructor(e,r){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,r!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(r,e):this.setCoordinates(e,r)}clone(){return new wy(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,r,n,i){return i<id(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,r,n,i))}getArea(){return OH(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const r=[];return r.length=zx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,0),new wy(r,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fx(this.flatCoordinates,0,e,this.stride),this.changed()}}class su extends sd{constructor(e,r){super(),this.setCoordinates(e,r)}clone(){const e=new su(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,r,n,i){const l=this.flatCoordinates,c=wh(e,r,l[0],l[1]);if(c<i){const s=this.stride;for(let p=0;p<s;++p)n[p]=l[p];return n.length=s,c}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return dH(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return lM(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=tfe(this.flatCoordinates,0,e,this.stride),this.changed()}}function ife(t,e,r,n,i){return!mH(i,function(c){return!dh(t,e,r,n,c[0],c[1])})}function dh(t,e,r,n,i,l){let c=0,s=t[r-n],p=t[r-n+1];for(;e<r;e+=n){const g=t[e],_=t[e+1];p<=l?_>l&&(g-s)*(l-p)-(i-s)*(_-p)>0&&c++:_<=l&&(g-s)*(l-p)-(i-s)*(_-p)<0&&c--,s=g,p=_}return c!==0}function TM(t,e,r,n,i,l){if(r.length===0||!dh(t,e,r[0],n,i,l))return!1;for(let c=1,s=r.length;c<s;++c)if(dh(t,r[c-1],r[c],n,i,l))return!1;return!0}function ofe(t,e,r,n,i,l){if(r.length===0)return!1;for(let c=0,s=r.length;c<s;++c){const p=r[c];if(TM(t,e,p,n,i,l))return!0;e=p[p.length-1]}return!1}function SM(t,e,r,n,i,l,c){let s,p,g,_,x,P,A;const M=i[l+1],F=[];for(let $=0,W=r.length;$<W;++$){const X=r[$];for(_=t[X-n],P=t[X-n+1],s=e;s<X;s+=n)x=t[s],A=t[s+1],(M<=P&&A<=M||P<=M&&M<=A)&&(g=(M-P)/(A-P)*(x-_)+_,F.push(g)),_=x,P=A}let z=NaN,j=-1/0;for(F.sort(La),_=F[0],s=1,p=F.length;s<p;++s){x=F[s];const $=Math.abs(x-_);$>j&&(g=(_+x)/2,TM(t,e,r,n,g,M)&&(z=g,j=$)),_=x}return isNaN(z)&&(z=i[l]),c?(c.push(z,M,j),c):[z,M,j]}function NH(t,e,r,n,i){let l=[];for(let c=0,s=r.length;c<s;++c){const p=r[c];l=SM(t,e,p,n,i,2*c,l),e=p[p.length-1]}return l}function FH(t,e,r,n,i){let l;for(e+=n;e<r;e+=n)if(l=i(t.slice(e-n,e),t.slice(e,e+n)),l)return l;return!1}function jx(t,e,r,n,i,l){return l=l??fH(Ns(),t,e,r,n),ui(i,l)?l[0]>=i[0]&&l[2]<=i[2]||l[1]>=i[1]&&l[3]<=i[3]?!0:FH(t,e,r,n,function(c,s){return rpe(i,c,s)}):!1}function sfe(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){if(jx(t,e,r[l],n,i))return!0;e=r[l]}return!1}function zH(t,e,r,n,i){return!!(jx(t,e,r,n,i)||dh(t,e,r,n,i[0],i[1])||dh(t,e,r,n,i[0],i[3])||dh(t,e,r,n,i[2],i[1])||dh(t,e,r,n,i[2],i[3]))}function jH(t,e,r,n,i){if(!zH(t,e,r[0],n,i))return!1;if(r.length===1)return!0;for(let l=1,c=r.length;l<c;++l)if(ife(t,r[l-1],r[l],n,i)&&!jx(t,r[l-1],r[l],n,i))return!1;return!0}function afe(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){const s=r[l];if(jH(t,e,s,n,i))return!0;e=s[s.length-1]}return!1}function lfe(t,e,r,n){for(;e<r-n;){for(let i=0;i<n;++i){const l=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=l}e+=n,r-=n}}function CM(t,e,r,n){let i=0,l=t[r-n],c=t[r-n+1];for(;e<r;e+=n){const s=t[e],p=t[e+1];i+=(s-l)*(p+c),l=s,c=p}return i===0?void 0:i>0}function PM(t,e,r,n,i){i=i!==void 0?i:!1;for(let l=0,c=r.length;l<c;++l){const s=r[l],p=CM(t,e,s,n);if(l===0){if(i&&p||!i&&!p)return!1}else if(i&&!p||!i&&p)return!1;e=s}return!0}function BH(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){const s=r[l];if(!PM(t,e,s,n,i))return!1;s.length&&(e=s[s.length-1])}return!0}function Iv(t,e,r,n,i){i=i!==void 0?i:!1;for(let l=0,c=r.length;l<c;++l){const s=r[l],p=CM(t,e,s,n);(l===0?i&&p||!i&&!p:i&&!p||!i&&p)&&lfe(t,e,s,n),e=s}return e}function nC(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l)e=Iv(t,e,r[l],n,i);return e}function qH(t,e){const r=[];let n=0,i=0,l;for(let c=0,s=e.length;c<s;++c){const p=e[c],g=CM(t,n,p,2);if(l===void 0&&(l=g),g===l)r.push(e.slice(i,c+1));else{if(r.length===0)continue;r[r.length-1].push(e[i])}i=c+1,n=p}return r}class Fl extends sd{constructor(e,r,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,r!==void 0&&n?(this.setFlatCoordinates(r,e),this.ends_=n):this.setCoordinates(e,r)}appendLinearRing(e){this.flatCoordinates?Da(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Fl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,r,n,i){return i<id(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vM(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),wM(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,r,n,i))}containsXY(e,r){return TM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,r)}getArea(){return kH(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let r;return e!==void 0?(r=this.getOrientedFlatCoordinates().slice(),Iv(r,0,this.ends_,this.stride,e)):r=this.flatCoordinates,xy(r,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Dl(this.getExtent());this.flatInteriorPoint_=SM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new su(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new wy(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,r=this.flatCoordinates,n=this.ends_,i=[];let l=0;for(let c=0,s=n.length;c<s;++c){const p=n[c],g=new wy(r.slice(l,p),e);i.push(g),l=p}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;PM(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Iv(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const r=[],n=[];return r.length=EM(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),r,0,n),new Fl(r,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return jH(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,r){this.setLayout(r,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=h_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function SL(t){if(l_(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],r=t[1],n=t[2],i=t[3],l=[e,r,e,i,n,i,n,r,e,r];return new Fl(l,"XY",[l.length])}function AM(t,e,r,n){const i=En(e)/r[0],l=Eo(e)/r[1];return n?Math.min(t,Math.max(i,l)):Math.min(t,Math.min(i,l))}function RM(t,e,r){let n=Math.min(t,e);const i=50;return n*=Math.log(1+i*Math.max(0,t/e-1))/i+1,r&&(n=Math.max(n,r),n/=Math.log(1+i*Math.max(0,r/t-1))/i+1),qn(n,r/2,e*2)}function cfe(t,e,r,n){return e=e!==void 0?e:!0,function(i,l,c,s){if(i!==void 0){const p=t[0],g=t[t.length-1],_=r?AM(p,r,c,n):p;if(s)return e?RM(i,_,g):qn(i,g,_);const x=Math.min(_,i),P=Math.floor(aM(t,x,l));return t[P]>_&&P<t.length-1?t[P+1]:t[P]}}}function ufe(t,e,r,n,i,l){return n=n!==void 0?n:!0,r=r!==void 0?r:0,function(c,s,p,g){if(c!==void 0){const _=i?AM(e,i,p,l):e;if(g)return n?RM(c,_,r):qn(c,r,_);const x=1e-9,P=Math.ceil(Math.log(e/_)/Math.log(t)-x),A=-s*(.5-x)+.5,M=Math.min(_,c),F=Math.floor(Math.log(e/M)/Math.log(t)+A),z=Math.max(P,F),j=e/Math.pow(t,z);return qn(j,r,_)}}}function CL(t,e,r,n,i){return r=r!==void 0?r:!0,function(l,c,s,p){if(l!==void 0){const g=n?AM(t,n,s,i):t;return!r||!p?qn(l,e,g):RM(l,g,e)}}}function IM(t){if(t!==void 0)return 0}function PL(t){if(t!==void 0)return t}function hfe(t){const e=2*Math.PI/t;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/e+.5)*e,r}}function dfe(t){const e=Yc(5);return function(r,n){return n||r===void 0?r:Math.abs(r)<=e?0:r}}const $H=42,MM=256,oT=0;class Sa extends la{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=mM(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&PH(),e.center&&(e.center=bl(e.center,this.projection_)),e.extent&&(e.extent=zc(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const r=Object.assign({},e);for(const s in Js)delete r[s];this.setProperties(r,!0);const n=ffe(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const i=pfe(e),l=n.constraint,c=mfe(e);this.constraints_={center:i,resolution:l,rotation:c},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let r=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const i=e||[0,0,0,0];r=r||[0,0,0,0];const l=this.getResolution(),c=l/2*(i[3]-r[3]+r[1]-i[1]),s=l/2*(i[0]-r[0]+r[2]-i[2]);this.setCenterInternal([n[0]+c,n[1]-s])}}getUpdatedOptions_(e){const r=this.getProperties();return r.resolution!==void 0?r.resolution=this.getResolution():r.zoom=this.getZoom(),r.center=this.getCenterInternal(),r.rotation=this.getRotation(),Object.assign({},r,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const r=new Array(arguments.length);for(let n=0;n<r.length;++n){let i=arguments[n];i.center&&(i=Object.assign({},i),i.center=bl(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=bl(i.anchor,this.getProjection())),r[n]=i}this.animateInternal.apply(this,r)}animateInternal(e){let r=arguments.length,n;r>1&&typeof arguments[r-1]=="function"&&(n=arguments[r-1],--r);let i=0;for(;i<r&&!this.isDef();++i){const _=arguments[i];_.center&&this.setCenterInternal(_.center),_.zoom!==void 0?this.setZoom(_.zoom):_.resolution&&this.setResolution(_.resolution),_.rotation!==void 0&&this.setRotation(_.rotation)}if(i===r){n&&j0(n,!0);return}let l=Date.now(),c=this.targetCenter_.slice(),s=this.targetResolution_,p=this.targetRotation_;const g=[];for(;i<r;++i){const _=arguments[i],x={start:l,complete:!1,anchor:_.anchor,duration:_.duration!==void 0?_.duration:1e3,easing:_.easing||lpe,callback:n};if(_.center&&(x.sourceCenter=c,x.targetCenter=_.center.slice(),c=x.targetCenter),_.zoom!==void 0?(x.sourceResolution=s,x.targetResolution=this.getResolutionForZoom(_.zoom),s=x.targetResolution):_.resolution&&(x.sourceResolution=s,x.targetResolution=_.resolution,s=x.targetResolution),_.rotation!==void 0){x.sourceRotation=p;const P=Eh(_.rotation-p+Math.PI,2*Math.PI)-Math.PI;x.targetRotation=p+P,p=x.targetRotation}gfe(x)?x.complete=!0:l+=x.duration,g.push(x)}this.animations_.push(g),this.setHint(ri.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ri.ANIMATING]>0}getInteracting(){return this.hints_[ri.INTERACTING]>0}cancelAnimations(){this.setHint(ri.ANIMATING,-this.hints_[ri.ANIMATING]);let e;for(let r=0,n=this.animations_.length;r<n;++r){const i=this.animations_[r];if(i[0].callback&&j0(i[0].callback,!1),!e)for(let l=0,c=i.length;l<c;++l){const s=i[l];if(!s.complete){e=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let r=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let l=!0;for(let c=0,s=i.length;c<s;++c){const p=i[c];if(p.complete)continue;const g=e-p.start;let _=p.duration>0?g/p.duration:1;_>=1?(p.complete=!0,_=1):l=!1;const x=p.easing(_);if(p.sourceCenter){const P=p.sourceCenter[0],A=p.sourceCenter[1],M=p.targetCenter[0],F=p.targetCenter[1];this.nextCenter_=p.targetCenter;const z=P+x*(M-P),j=A+x*(F-A);this.targetCenter_=[z,j]}if(p.sourceResolution&&p.targetResolution){const P=x===1?p.targetResolution:p.sourceResolution+x*(p.targetResolution-p.sourceResolution);if(p.anchor){const A=this.getViewportSize_(this.getRotation()),M=this.constraints_.resolution(P,0,A,!0);this.targetCenter_=this.calculateCenterZoom(M,p.anchor)}this.nextResolution_=p.targetResolution,this.targetResolution_=P,this.applyTargetState_(!0)}if(p.sourceRotation!==void 0&&p.targetRotation!==void 0){const P=x===1?Eh(p.targetRotation+Math.PI,2*Math.PI)-Math.PI:p.sourceRotation+x*(p.targetRotation-p.sourceRotation);if(p.anchor){const A=this.constraints_.rotation(P,!0);this.targetCenter_=this.calculateCenterRotate(A,p.anchor)}this.nextRotation_=p.targetRotation,this.targetRotation_=P}if(this.applyTargetState_(!0),r=!0,!p.complete)break}if(l){this.animations_[n]=null,this.setHint(ri.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const c=i[0].callback;c&&j0(c,!0)}}this.animations_=this.animations_.filter(Boolean),r&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,r){let n;const i=this.getCenterInternal();return i!==void 0&&(n=[i[0]-r[0],i[1]-r[1]],uM(n,e-this.getRotation()),npe(n,r)),n}calculateCenterZoom(e,r){let n;const i=this.getCenterInternal(),l=this.getResolution();if(i!==void 0&&l!==void 0){const c=r[0]-e*(r[0]-i[0])/l,s=r[1]-e*(r[1]-i[1])/l;n=[c,s]}return n}getViewportSize_(e){const r=this.viewportSize_;if(e){const n=r[0],i=r[1];return[Math.abs(n*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(i*Math.cos(e))]}return r}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&eC(e,this.getProjection())}getCenterInternal(){return this.get(Js.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const r=this.calculateExtentInternal(e);return gM(r,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const r=this.getCenterInternal();fn(r,"The view center is not defined");const n=this.getResolution();fn(n!==void 0,"The view resolution is not defined");const i=this.getRotation();return fn(i!==void 0,"The view rotation is not defined"),K2(r,n,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Js.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,r){return this.getResolutionForExtentInternal(zc(e,this.getProjection()),r)}getResolutionForExtentInternal(e,r){r=r||this.getViewportSizeMinusPadding_();const n=En(e)/r[0],i=Eo(e)/r[1];return Math.max(n,i)}getResolutionForValueFunction(e){e=e||2;const r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(l){return r/Math.pow(e,l*i)}}getRotation(){return this.get(Js.ROTATION)}getValueForResolutionFunction(e){const r=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,l=Math.log(n/i)/r;return function(c){return Math.log(n/c)/r/l}}getViewportSizeMinusPadding_(e){let r=this.getViewportSize_(e);const n=this.padding_;return n&&(r=[r[0]-n[1]-n[3],r[1]-n[0]-n[2]]),r}getState(){const e=this.getProjection(),r=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const l=this.padding_;if(l){const c=this.getViewportSizeMinusPadding_();i=sT(i,this.getViewportSize_(),[c[0]/2+l[3],c[1]/2+l[0]],r,n)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:r,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const r=this.getResolution();return r!==void 0&&(e=this.getZoomForResolution(r)),e}getZoomForResolution(e){let r=this.minZoom_||0,n,i;if(this.resolutions_){const l=aM(this.resolutions_,e,1);r=l,n=this.resolutions_[l],l==this.resolutions_.length-1?i=2:i=n/this.resolutions_[l+1]}else n=this.maxResolution_,i=this.zoomFactor_;return r+Math.log(n/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=qn(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(n,qn(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,r){let n;if(fn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){fn(!l_(e),"Cannot fit empty extent provided as `geometry`");const i=zc(e,this.getProjection());n=SL(i)}else if(e.getType()==="Circle"){const i=zc(e.getExtent(),this.getProjection());n=SL(i),n.rotate(this.getRotation(),Dl(i))}else n=e;this.fitInternal(n,r)}rotatedExtentForGeometry(e){const r=this.getRotation(),n=Math.cos(r),i=Math.sin(-r),l=e.getFlatCoordinates(),c=e.getStride();let s=1/0,p=1/0,g=-1/0,_=-1/0;for(let x=0,P=l.length;x<P;x+=c){const A=l[x]*n-l[x+1]*i,M=l[x]*i+l[x+1]*n;s=Math.min(s,A),p=Math.min(p,M),g=Math.max(g,A),_=Math.max(_,M)}return[s,p,g,_]}fitInternal(e,r){r=r||{};let n=r.size;n||(n=this.getViewportSizeMinusPadding_());const i=r.padding!==void 0?r.padding:[0,0,0,0],l=r.nearest!==void 0?r.nearest:!1;let c;r.minResolution!==void 0?c=r.minResolution:r.maxZoom!==void 0?c=this.getResolutionForZoom(r.maxZoom):c=0;const s=this.rotatedExtentForGeometry(e);let p=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);p=isNaN(p)?c:Math.max(p,c),p=this.getConstrainedResolution(p,l?0:1);const g=this.getRotation(),_=Math.sin(g),x=Math.cos(g),P=Dl(s);P[0]+=(i[1]-i[3])/2*p,P[1]+=(i[0]-i[2])/2*p;const A=P[0]*x-P[1]*_,M=P[1]*x+P[0]*_,F=this.getConstrainedCenter([A,M],p),z=r.callback?r.callback:_y;r.duration!==void 0?this.animateInternal({resolution:p,center:F,duration:r.duration,easing:r.easing},z):(this.targetResolution_=p,this.targetCenter_=F,this.applyTargetState_(!1,!0),j0(z,!0))}centerOn(e,r,n){this.centerOnInternal(bl(e,this.getProjection()),r,n)}centerOnInternal(e,r,n){this.setCenterInternal(sT(e,r,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,r,n,i){let l;const c=this.padding_;if(c&&e){const s=this.getViewportSizeMinusPadding_(-n),p=sT(e,i,[s[0]/2+c[3],s[1]/2+c[0]],r,n);l=[e[0]-p[0],e[1]-p[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const r=eC(this.targetCenter_,this.getProjection());this.setCenter([r[0]+e[0],r[1]+e[1]])}adjustCenterInternal(e){const r=this.targetCenter_;this.setCenterInternal([r[0]+e[0],r[1]+e[1]])}adjustResolution(e,r){r=r&&bl(r,this.getProjection()),this.adjustResolutionInternal(e,r)}adjustResolutionInternal(e,r){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,i,n);r&&(this.targetCenter_=this.calculateCenterZoom(l,r)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,r){this.adjustResolution(Math.pow(this.zoomFactor_,-e),r)}adjustRotation(e,r){r&&(r=bl(r,this.getProjection())),this.adjustRotationInternal(e,r)}adjustRotationInternal(e,r){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,n);r&&(this.targetCenter_=this.calculateCenterRotate(i,r)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&bl(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,r){return this.hints_[e]+=r,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,r){const n=this.getAnimating()||this.getInteracting()||r,i=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(i),c=this.constraints_.resolution(this.targetResolution_,0,l,n),s=this.constraints_.center(this.targetCenter_,c,l,n,this.calculateCenterShift(this.targetCenter_,c,i,l));this.get(Js.ROTATION)!==i&&this.set(Js.ROTATION,i),this.get(Js.RESOLUTION)!==c&&(this.set(Js.RESOLUTION,c),this.set("zoom",this.getZoom(),!0)),(!s||!this.get(Js.CENTER)||!Sv(this.get(Js.CENTER),s))&&this.set(Js.CENTER,s),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,r,n){e=e!==void 0?e:200;const i=r||0,l=this.constraints_.rotation(this.targetRotation_),c=this.getViewportSize_(l),s=this.constraints_.resolution(this.targetResolution_,i,c),p=this.constraints_.center(this.targetCenter_,s,c,!1,this.calculateCenterShift(this.targetCenter_,s,l,c));if(e===0&&!this.cancelAnchor_){this.targetResolution_=s,this.targetRotation_=l,this.targetCenter_=p,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==s||this.getRotation()!==l||!this.getCenterInternal()||!Sv(this.getCenterInternal(),p))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:p,resolution:s,duration:e,easing:od,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ri.INTERACTING,1)}endInteraction(e,r,n){n=n&&bl(n,this.getProjection()),this.endInteractionInternal(e,r,n)}endInteractionInternal(e,r,n){this.getInteracting()&&(this.setHint(ri.INTERACTING,-1),this.resolveConstraints(e,r,n))}getConstrainedCenter(e,r){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,r||this.getResolution(),n)}getConstrainedZoom(e,r){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,r))}getConstrainedResolution(e,r){r=r||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,r,n)}}function j0(t,e){setTimeout(function(){t(e)},0)}function pfe(t){if(t.extent!==void 0){const r=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return hL(t.extent,t.constrainOnlyCenter,r)}const e=mM(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const r=e.getExtent().slice();return r[0]=-1/0,r[2]=1/0,hL(r,!1,!1)}return Yde}function ffe(t){let e,r,n,c=t.minZoom!==void 0?t.minZoom:oT,s=t.maxZoom!==void 0?t.maxZoom:28;const p=t.zoomFactor!==void 0?t.zoomFactor:2,g=t.multiWorld!==void 0?t.multiWorld:!1,_=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,x=t.showFullExtent!==void 0?t.showFullExtent:!1,P=mM(t.projection,"EPSG:3857"),A=P.getExtent();let M=t.constrainOnlyCenter,F=t.extent;if(!g&&!F&&P.isGlobal()&&(M=!1,F=A),t.resolutions!==void 0){const z=t.resolutions;r=z[c],n=z[s]!==void 0?z[s]:z[z.length-1],t.constrainResolution?e=cfe(z,_,!M&&F,x):e=CL(r,n,_,!M&&F,x)}else{const j=(A?Math.max(En(A),Eo(A)):360*Uh.degrees/P.getMetersPerUnit())/MM/Math.pow(2,oT),$=j/Math.pow(2,28-oT);r=t.maxResolution,r!==void 0?c=0:r=j/Math.pow(p,c),n=t.minResolution,n===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?n=r/Math.pow(p,s):n=j/Math.pow(p,s):n=$),s=c+Math.floor(Math.log(r/n)/Math.log(p)),n=r/Math.pow(p,s-c),t.constrainResolution?e=ufe(p,r,n,_,!M&&F,x):e=CL(r,n,_,!M&&F,x)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:c,zoomFactor:p}}function mfe(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const r=t.constrainRotation;return r===void 0||r===!0?dfe():r===!1?PL:typeof r=="number"?hfe(r):PL}return IM}function gfe(t){return!(t.sourceCenter&&t.targetCenter&&!Sv(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function sT(t,e,r,n,i){const l=Math.cos(-i);let c=Math.sin(-i),s=t[0]*l-t[1]*c,p=t[1]*l+t[0]*c;s+=(e[0]/2-r[0])*n,p+=(r[1]-e[1]/2)*n,c=-c;const g=s*l-p*c,_=p*l+s*c;return[g,_]}const B0="ol-hidden",yfe="ol-selectable",Hh="ol-unselectable",Bx="ol-control",AL="ol-collapsed",_fe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),RL=["style","variant","weight","size","lineHeight","family"],iC={normal:400,bold:700},oC=function(t){const e=t.match(_fe);if(!e)return null;const r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,i=RL.length;n<i;++n){const l=e[n+1];l!==void 0&&(r[RL[n]]=typeof l=="string"?l.trim():l)}return isNaN(Number(r.weight))&&r.weight in iC&&(r.weight=iC[r.weight]),r.families=r.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),r};function Ei(t,e,r,n){let i;return r&&r.length?i=r.shift():Ps?i=new class extends OffscreenCanvas{constructor(){super(...arguments);xr(this,"style",{})}}(t??300,e??150):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",n)}let aT;function Mv(){return aT||(aT=Ei(1,1)),aT}function d_(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function bfe(t){let e=t.offsetWidth;const r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),e}function vfe(t){let e=t.offsetHeight;const r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10),e}function IL(t,e){const r=e.parentNode;r&&r.replaceChild(t,e)}function VH(t){for(;t.lastChild;)t.lastChild.remove()}function xfe(t,e){const r=t.childNodes;for(let n=0;;++n){const i=r[n],l=e[n];if(!i&&!l)break;if(i!==l){if(!i){t.appendChild(l);continue}if(!l){t.removeChild(i),--n;continue}t.insertBefore(l,i)}}}function UH(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const r=this.childNodes.indexOf(e);if(r===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(r,1),e},insertBefore:function(e,r){const n=this.childNodes.indexOf(r);if(n===-1)throw new Error("Reference node not found");return this.childNodes.splice(n,0,e),e},style:{}},{get(e,r,n){return r==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,r,n)}})}function Bc(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}class jf extends la{constructor(e){super();const r=e.element;r&&!e.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),this.element=r||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let r=0,n=this.listenerKeys.length;r<n;++r)Rn(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==_y&&this.listenerKeys.push(en(e,vl.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class wfe extends jf{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const r=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:r+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"",c=e.collapseClassName!==void 0?e.collapseClassName:r+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=c):this.collapseLabel_=l;const s=e.label!==void 0?e.label:"i";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s;const p=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(p),this.toggleButton_.addEventListener(Rr.CLICK,this.handleClick_.bind(this),!1);const g=r+" "+Hh+" "+Bx+(this.collapsed_&&this.collapsible_?" "+AL:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=g,_.appendChild(this.toggleButton_),_.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const r=this.getMap().getAllLayers(),n=new Set(r.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>n.add(i)):n.add(this.attributions_)),!this.overrideCollapsible_){const i=!r.some(l=>l.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const r=await Promise.all(this.collectSourceAttributions_(e).map(i=>by(()=>i))),n=r.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!du(r,this.renderedAttributions_)){VH(this.ulElement_);for(let i=0,l=r.length;i<l;++i){const c=document.createElement("li");c.innerHTML=r[i],this.ulElement_.appendChild(c)}this.renderedAttributions_=r}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(AL),this.collapsed_?IL(this.collapseLabel_,this.label_):IL(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class GH extends jf{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const r=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const l=e.tipLabel?e.tipLabel:"Reset rotation",c=document.createElement("button");c.className=r+"-reset",c.setAttribute("type","button"),c.title=l,c.appendChild(this.label_),c.addEventListener(Rr.CLICK,this.handleClick_.bind(this),!1);const s=r+" "+Hh+" "+Bx,p=this.element;p.className=s,p.appendChild(c),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(B0)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const r=this.getMap().getView();if(!r)return;const n=r.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?r.animate({rotation:0,duration:this.duration_,easing:od}):r.setRotation(0))}render(e){const r=e.frameState;if(!r)return;const n=r.viewState.rotation;if(n!=this.rotation_){const i="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(B0);!l&&n===0?this.element.classList.add(B0):l&&n!==0&&this.element.classList.remove(B0)}this.label_.style.transform=i}this.rotation_=n}}class Efe extends jf{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const r=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:r+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:r+"-out",c=e.zoomInLabel!==void 0?e.zoomInLabel:"+",s=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",p=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",_=document.createElement("button");_.className=i,_.setAttribute("type","button"),_.title=p,_.appendChild(typeof c=="string"?document.createTextNode(c):c),_.addEventListener(Rr.CLICK,this.handleClick_.bind(this,n),!1);const x=document.createElement("button");x.className=l,x.setAttribute("type","button"),x.title=g,x.appendChild(typeof s=="string"?document.createTextNode(s):s),x.addEventListener(Rr.CLICK,this.handleClick_.bind(this,-n),!1);const P=r+" "+Hh+" "+Bx,A=this.element;A.className=P,A.appendChild(_),A.appendChild(x),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,r){r.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const i=n.getZoom();if(i!==void 0){const l=n.getConstrainedZoom(i+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:od})):n.setZoom(l)}}}function HH(t){t=t||{};const e=new ls;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new Efe(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new GH(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new wfe(t.attributionOptions)),e}class JH{constructor(e,r,n){this.decay_=e,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,r){this.points_.push(e,r,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<e)return!1;let n=r-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const i=this.points_[r+2]-this.points_[n+2];if(i<1e3/60)return!1;const l=this.points_[r]-this.points_[n],c=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(c,l),this.initialVelocity_=Math.sqrt(l*l+c*c)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const ML={ACTIVE:"active"};class p_ extends la{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ML.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(ML.ACTIVE,e)}setMap(e){this.map_=e}}function Tfe(t,e,r){const n=t.getCenterInternal();if(n){const i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:r!==void 0?r:250,easing:cpe,center:t.getConstrainedCenter(i)})}}function OM(t,e,r,n){const i=t.getZoom();if(i===void 0)return;const l=t.getConstrainedZoom(i+e),c=t.getResolutionForZoom(l);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:c,anchor:r,duration:n!==void 0?n:250,easing:od})}class Sfe extends p_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let r=!1;if(e.type==ti.DBLCLICK){const n=e.originalEvent,i=e.map,l=e.coordinate,c=n.shiftKey?-this.delta_:this.delta_,s=i.getView();OM(s,c,l,this.duration_),n.preventDefault(),r=!0}return!r}}function sC(t){const e=arguments;return function(r){let n=!0;for(let i=0,l=e.length;i<l&&(n=n&&e[i](r),!!n);++i);return n}}const Cfe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Pfe=function(t){const e=t.map.getTargetElement(),r=e.getRootNode(),n=t.map.getOwnerDocument().activeElement;return r instanceof ShadowRoot?r.host.contains(n):e.contains(n)},WH=function(t){const e=t.map.getTargetElement(),r=e.getRootNode();return(r instanceof ShadowRoot?r.host:e).hasAttribute("tabindex")?Pfe(t):!0},Afe=yy,kM=function(t){const e=t.originalEvent;return"pointerId"in e&&e.button==0&&!(Vde&&lH&&e.ctrlKey)},ZH=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Rfe=function(t){const e=t.originalEvent;return lH?e.metaKey:e.ctrlKey},Ife=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},KH=function(t){const e=t.originalEvent,r=e.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!e.target.isContentEditable},lT=function(t){const e=t.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},Mfe=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class ld extends p_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let r=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ti.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ti.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==ti.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,r=this.stopDown(n)}else e.type==ti.POINTERMOVE&&this.handleMoveEvent(e);return!r}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function LM(t){const e=t.length;let r=0,n=0;for(let i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return{clientX:r/e,clientY:n/e}}class Ov extends ld{constructor(e){super({stopDown:Ax}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const r=e.condition?e.condition:sC(ZH,Mfe);this.condition_=e.onFocusOnly?sC(WH,r):r,this.noKinetic_=!1}handleDragEvent(e){const r=e.map;this.panning_||(this.panning_=!0,r.getView().beginInteraction());const n=this.targetPointers,i=r.getEventPixel(LM(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const l=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=e.map.getView();ipe(l,s.getResolution()),uM(l,s.getRotation()),s.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const r=e.map,n=r.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),c=n.getCenterInternal(),s=r.getPixelFromCoordinateInternal(c),p=r.getCoordinateFromPixelInternal([s[0]-i*Math.cos(l),s[1]-i*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(p),duration:500,easing:od})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class YH extends ld{constructor(e){e=e||{},super({stopDown:Ax}),this.condition_=e.condition?e.condition:Cfe,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!lT(e))return;const r=e.map,n=r.getView();if(n.getConstraints().rotation===IM)return;const i=r.getSize(),l=e.pixel,c=Math.atan2(i[1]/2-l[1],l[0]-i[0]/2);if(this.lastAngle_!==void 0){const s=c-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=c}handleUpEvent(e){return lT(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return lT(e)&&kM(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Ofe extends Px{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,r=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(e[0],r[0])+n,i.top=Math.min(e[1],r[1])+n,i.width=Math.abs(r[0]-e[0])+n,i.height=Math.abs(r[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const r=this.element_.style;r.left="inherit",r.top="inherit",r.width="inherit",r.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,r){this.startPixel_=e,this.endPixel_=r,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,r=this.endPixel_,i=[e,[e[0],r[1]],r,[r[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Fl([i])}getGeometry(){return this.geometry_}}const hp={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ng extends $l{constructor(e,r,n){super(e),this.coordinate=r,this.mapBrowserEvent=n}}class kfe extends ld{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Ofe(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??kM,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,r,n){const i=n[0]-r[0],l=n[1]-r[1];return i*i+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ng(hp.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const r=this.boxEndCondition_(e,this.startPixel_,e.pixel);return r&&this.onBoxEnd(e),this.dispatchEvent(new ng(r?hp.BOXEND:hp.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ng(hp.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ng(hp.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ng(hp.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Lfe extends kfe{constructor(e){e=e||{};const r=e.condition?e.condition:Ife;super({condition:r,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let i=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(i),c=n.getResolutionForExtentInternal(l),s=n.getResolution()/c;i=i.clone(),i.scale(s*s)}n.fitInternal(i,{duration:this.duration_,easing:od})}}const Ku={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Dfe extends p_{constructor(e){super(),e=e||{},this.defaultCondition_=function(r){return ZH(r)&&KH(r)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let r=!1;if(e.type==Rr.KEYDOWN){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==Ku.DOWN||i==Ku.LEFT||i==Ku.RIGHT||i==Ku.UP)){const c=e.map.getView(),s=c.getResolution()*this.pixelDelta_;let p=0,g=0;i==Ku.DOWN?g=-s:i==Ku.LEFT?p=-s:i==Ku.RIGHT?p=s:g=s;const _=[p,g];uM(_,c.getRotation()),Tfe(c,_,this.duration_),n.preventDefault(),r=!0}}return!r}}class Nfe extends p_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(r){return!Rfe(r)&&KH(r)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let r=!1;if(e.type==Rr.KEYDOWN||e.type==Rr.KEYPRESS){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==="+"||i==="-")){const l=e.map,c=i==="+"?this.delta_:-this.delta_,s=l.getView();OM(s,c,void 0,this.duration_),n.preventDefault(),r=!0}}return!r}}const Ffe=40,zfe=300;class jfe extends p_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const r=e.condition?e.condition:Afe;this.condition_=e.onFocusOnly?sC(WH,r):r,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Rr.WHEEL)return!0;const n=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:l*=Ffe;break;case WheelEvent.DOM_DELTA_PAGE:l*=zfe;break}if(l===0)return!1;this.lastDelta_=l;const c=Date.now();this.startTime_===void 0&&(this.startTime_=c),(!this.mode_||c-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const s=n.getView();if(this.mode_==="trackpad"&&!(s.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=c,!1;this.totalDelta_+=l;const p=Math.max(this.timeout_-(c-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),p),!1}handleWheelZoom_(e){const r=e.getView();r.getAnimating()&&r.cancelAnimations();let n=-qn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(r.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),OM(r,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Bfe extends ld{constructor(e){e=e||{};const r=e;r.stopDown||(r.stopDown=Ax),super(r),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let r=0;const n=this.targetPointers[0],i=this.targetPointers[1],l=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){const p=l-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=p}this.lastAngle_=l;const c=e.map,s=c.getView();s.getConstraints().rotation!==IM&&(this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(LM(this.targetPointers))),this.rotating_&&(c.render(),s.adjustRotationInternal(r,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const r=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||r.getView().beginInteraction(),!0}return!1}}class qfe extends ld{constructor(e){e=e||{};const r=e;r.stopDown||(r.stopDown=Ax),super(r),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let r=1;const n=this.targetPointers[0],i=this.targetPointers[1],l=n.clientX-i.clientX,c=n.clientY-i.clientY,s=Math.sqrt(l*l+c*c);this.lastDistance_!==void 0&&(r=this.lastDistance_/s),this.lastDistance_=s;const p=e.map,g=p.getView();r!=1&&(this.lastScaleDelta_=r),this.anchor_=p.getCoordinateFromPixelInternal(p.getEventPixel(LM(this.targetPointers))),p.render(),g.adjustResolutionInternal(r,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const r=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||r.getView().beginInteraction(),!0}return!1}}function XH(t){t=t||{};const e=new ls,r=new JH(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new YH),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new Sfe({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new Ov({onFocusOnly:t.onFocusOnly,kinetic:r})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new Bfe),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new qfe({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new Dfe),e.push(new Nfe({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new jfe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new Lfe({duration:t.zoomDuration})),e}const wn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class QH extends la{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const r=Object.assign({},e);typeof e.properties=="object"&&(delete r.properties,Object.assign(r,e.properties)),r[wn.OPACITY]=e.opacity!==void 0?e.opacity:1,fn(typeof r[wn.OPACITY]=="number","Layer opacity must be a number"),r[wn.VISIBLE]=e.visible!==void 0?e.visible:!0,r[wn.Z_INDEX]=e.zIndex,r[wn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,r[wn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,r[wn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,r[wn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=r.className!==void 0?r.className:"ol-layer",delete r.className,this.setProperties(r),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const r=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return r.opacity=qn(Math.round(this.getOpacity()*100)/100,0,1),r.visible=this.getVisible(),r.extent=this.getExtent(),r.zIndex=n===void 0&&!r.managed?1/0:n,r.maxResolution=this.getMaxResolution(),r.minResolution=Math.max(this.getMinResolution(),0),r.minZoom=this.getMinZoom(),r.maxZoom=this.getMaxZoom(),this.state_=r,r}getLayersArray(e){return Sr()}getLayerStatesArray(e){return Sr()}getExtent(){return this.get(wn.EXTENT)}getMaxResolution(){return this.get(wn.MAX_RESOLUTION)}getMinResolution(){return this.get(wn.MIN_RESOLUTION)}getMinZoom(){return this.get(wn.MIN_ZOOM)}getMaxZoom(){return this.get(wn.MAX_ZOOM)}getOpacity(){return this.get(wn.OPACITY)}getSourceState(){return Sr()}getVisible(){return this.get(wn.VISIBLE)}getZIndex(){return this.get(wn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(wn.EXTENT,e)}setMaxResolution(e){this.set(wn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(wn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(wn.MAX_ZOOM,e)}setMinZoom(e){this.set(wn.MIN_ZOOM,e)}setOpacity(e){fn(typeof e=="number","Layer opacity must be a number"),this.set(wn.OPACITY,e)}setVisible(e){this.set(wn.VISIBLE,e)}setZIndex(e){this.set(wn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const yc={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Oc extends $l{constructor(e,r){super(e),this.layer=r}}const cT={LAYERS:"layers"};class Bf extends QH{constructor(e){e=e||{};const r=Object.assign({},e);delete r.layers;let n=e.layers;super(r),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(cT.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new ls(n.slice(),{unique:!0}):fn(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new ls(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Rn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(en(e,Ao.ADD,this.handleLayersAdd_,this),en(e,Ao.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Rn);s_(this.listenerKeys_);const r=e.getArray();for(let n=0,i=r.length;n<i;n++){const l=r[n];this.registerLayerListeners_(l),this.dispatchEvent(new Oc(yc.ADDLAYER,l))}this.changed()}registerLayerListeners_(e){const r=[en(e,mf.PROPERTYCHANGE,this.handleLayerChange_,this),en(e,Rr.CHANGE,this.handleLayerChange_,this)];e instanceof Bf&&r.push(en(e,yc.ADDLAYER,this.handleLayerGroupAdd_,this),en(e,yc.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Nr(e)]=r}handleLayerGroupAdd_(e){this.dispatchEvent(new Oc(yc.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Oc(yc.REMOVELAYER,e.layer))}handleLayersAdd_(e){const r=e.element;this.registerLayerListeners_(r),this.dispatchEvent(new Oc(yc.ADDLAYER,r)),this.changed()}handleLayersRemove_(e){const r=e.element,n=Nr(r);this.listenerKeys_[n].forEach(Rn),delete this.listenerKeys_[n],this.dispatchEvent(new Oc(yc.REMOVELAYER,r)),this.changed()}getLayers(){return this.get(cT.LAYERS)}setLayers(e){const r=this.getLayers();if(r){const n=r.getArray();for(let i=0,l=n.length;i<l;++i)this.dispatchEvent(new Oc(yc.REMOVELAYER,n[i]))}this.set(cT.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(r){r.getLayersArray(e)}),e}getLayerStatesArray(e){const r=e!==void 0?e:[],n=r.length;this.getLayers().forEach(function(c){c.getLayerStatesArray(r)});const i=this.getLayerState();let l=i.zIndex;!e&&i.zIndex===void 0&&(l=0);for(let c=n,s=r.length;c<s;c++){const p=r[c];p.opacity*=i.opacity,p.visible=p.visible&&i.visible,p.maxResolution=Math.min(p.maxResolution,i.maxResolution),p.minResolution=Math.max(p.minResolution,i.minResolution),p.minZoom=Math.max(p.minZoom,i.minZoom),p.maxZoom=Math.min(p.maxZoom,i.maxZoom),i.extent!==void 0&&(p.extent!==void 0?p.extent=Rl(p.extent,i.extent):p.extent=i.extent),p.zIndex===void 0&&(p.zIndex=l)}return r}getSourceState(){return"ready"}}const As={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class DM extends QH{constructor(e){const r=Object.assign({},e);delete r.source,super(r),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(wn.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(wn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Rn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=en(e,Rr.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let r;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Sa?r={viewState:e.getState(),extent:e.calculateExtent()}:r=e,!r.layerStatesArray&&n&&(r.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let i;if(r.layerStatesArray){if(i=r.layerStatesArray.find(c=>c.layer===this),!i)return!1}else i=this.getLayerState();const l=this.getExtent();return NM(i,r.viewState)&&(!l||ui(l,r.extent))}getAttributions(e){if(!this.isVisible(e))return[];const r=this.getSource()?.getAttributions();if(!r)return[];const n=e instanceof Sa?e.getViewStateAndExtent():e;let i=r(n);return Array.isArray(i)||(i=[i]),i}render(e,r){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,r)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,r){}renderDeferred(e){const r=this.getRenderer();r&&r.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(wn.MAP,e)}getMapInternal(){return this.get(wn.MAP)}setMap(e){this.mapPrecomposeKey_&&(Rn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Rn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=en(e,As.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=en(this,Rr.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const r=e.frameState.layerStatesArray,n=this.getLayerState(!1);fn(!r.some(i=>i.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(n)}setSource(e){this.set(wn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function NM(t,e){if(!t.visible)return!1;const r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}function eJ(t,e,r=0,n=t.length-1,i=$fe){for(;n>r;){if(n-r>600){const p=n-r+1,g=e-r+1,_=Math.log(p),x=.5*Math.exp(2*_/3),P=.5*Math.sqrt(_*x*(p-x)/p)*(g-p/2<0?-1:1),A=Math.max(r,Math.floor(e-g*x/p+P)),M=Math.min(n,Math.floor(e+(p-g)*x/p+P));eJ(t,e,A,M,i)}const l=t[e];let c=r,s=n;for(ig(t,r,e),i(t[n],l)>0&&ig(t,r,n);c<s;){for(ig(t,c,s),c++,s--;i(t[c],l)<0;)c++;for(;i(t[s],l)>0;)s--}i(t[r],l)===0?ig(t,r,s):(s++,ig(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}}function ig(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function $fe(t,e){return t<e?-1:t>e?1:0}let tJ=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let r=this.data;const n=[];if(!$0(e,r))return n;const i=this.toBBox,l=[];for(;r;){for(let c=0;c<r.children.length;c++){const s=r.children[c],p=r.leaf?i(s):s;$0(e,p)&&(r.leaf?n.push(s):hT(e,p)?this._all(s,n):l.push(s))}r=l.pop()}return n}collides(e){let r=this.data;if(!$0(e,r))return!1;const n=[];for(;r;){for(let i=0;i<r.children.length;i++){const l=r.children[i],c=r.leaf?this.toBBox(l):l;if($0(e,c)){if(r.leaf||hT(e,c))return!0;n.push(l)}}r=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let r=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){const n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Sp([]),this}remove(e,r){if(!e)return this;let n=this.data;const i=this.toBBox(e),l=[],c=[];let s,p,g;for(;n||l.length;){if(n||(n=l.pop(),p=l[l.length-1],s=c.pop(),g=!0),n.leaf){const _=Vfe(e,n.children,r);if(_!==-1)return n.children.splice(_,1),l.push(n),this._condense(l),this}!g&&!n.leaf&&hT(n,i)?(l.push(n),c.push(s),s=0,p=n,n=n.children[0]):p?(s++,n=p.children[s],g=!1):n=null}return this}toBBox(e){return e}compareMinX(e,r){return e.minX-r.minX}compareMinY(e,r){return e.minY-r.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,r){const n=[];for(;e;)e.leaf?r.push(...e.children):n.push(...e.children),e=n.pop();return r}_build(e,r,n,i){const l=n-r+1;let c=this._maxEntries,s;if(l<=c)return s=Sp(e.slice(r,n+1)),dp(s,this.toBBox),s;i||(i=Math.ceil(Math.log(l)/Math.log(c)),c=Math.ceil(l/Math.pow(c,i-1))),s=Sp([]),s.leaf=!1,s.height=i;const p=Math.ceil(l/c),g=p*Math.ceil(Math.sqrt(c));OL(e,r,n,g,this.compareMinX);for(let _=r;_<=n;_+=g){const x=Math.min(_+g-1,n);OL(e,_,x,p,this.compareMinY);for(let P=_;P<=x;P+=p){const A=Math.min(P+p-1,x);s.children.push(this._build(e,P,A,i-1))}}return dp(s,this.toBBox),s}_chooseSubtree(e,r,n,i){for(;i.push(r),!(r.leaf||i.length-1===n);){let l=1/0,c=1/0,s;for(let p=0;p<r.children.length;p++){const g=r.children[p],_=uT(g),x=Hfe(e,g)-_;x<c?(c=x,l=_<l?_:l,s=g):x===c&&_<l&&(l=_,s=g)}r=s||r.children[0]}return r}_insert(e,r,n){const i=n?e:this.toBBox(e),l=[],c=this._chooseSubtree(i,this.data,r,l);for(c.children.push(e),wg(c,i);r>=0&&l[r].children.length>this._maxEntries;)this._split(l,r),r--;this._adjustParentBBoxes(i,l,r)}_split(e,r){const n=e[r],i=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,i);const c=this._chooseSplitIndex(n,l,i),s=Sp(n.children.splice(c,n.children.length-c));s.height=n.height,s.leaf=n.leaf,dp(n,this.toBBox),dp(s,this.toBBox),r?e[r-1].children.push(s):this._splitRoot(n,s)}_splitRoot(e,r){this.data=Sp([e,r]),this.data.height=e.height+1,this.data.leaf=!1,dp(this.data,this.toBBox)}_chooseSplitIndex(e,r,n){let i,l=1/0,c=1/0;for(let s=r;s<=n-r;s++){const p=xg(e,0,s,this.toBBox),g=xg(e,s,n,this.toBBox),_=Jfe(p,g),x=uT(p)+uT(g);_<l?(l=_,i=s,c=x<c?x:c):_===l&&x<c&&(c=x,i=s)}return i||n-r}_chooseSplitAxis(e,r,n){const i=e.leaf?this.compareMinX:Ufe,l=e.leaf?this.compareMinY:Gfe,c=this._allDistMargin(e,r,n,i),s=this._allDistMargin(e,r,n,l);c<s&&e.children.sort(i)}_allDistMargin(e,r,n,i){e.children.sort(i);const l=this.toBBox,c=xg(e,0,r,l),s=xg(e,n-r,n,l);let p=q0(c)+q0(s);for(let g=r;g<n-r;g++){const _=e.children[g];wg(c,e.leaf?l(_):_),p+=q0(c)}for(let g=n-r-1;g>=r;g--){const _=e.children[g];wg(s,e.leaf?l(_):_),p+=q0(s)}return p}_adjustParentBBoxes(e,r,n){for(let i=n;i>=0;i--)wg(r[i],e)}_condense(e){for(let r=e.length-1,n;r>=0;r--)e[r].children.length===0?r>0?(n=e[r-1].children,n.splice(n.indexOf(e[r]),1)):this.clear():dp(e[r],this.toBBox)}};function Vfe(t,e,r){if(!r)return e.indexOf(t);for(let n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function dp(t,e){xg(t,0,t.children.length,e,t)}function xg(t,e,r,n,i){i||(i=Sp(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let l=e;l<r;l++){const c=t.children[l];wg(i,t.leaf?n(c):c)}return i}function wg(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ufe(t,e){return t.minX-e.minX}function Gfe(t,e){return t.minY-e.minY}function uT(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function q0(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Hfe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Jfe(t,e){const r=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),l=Math.min(t.maxY,e.maxY);return Math.max(0,i-r)*Math.max(0,l-n)}function hT(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function $0(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Sp(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function OL(t,e,r,n,i){const l=[e,r];for(;l.length;){if(r=l.pop(),e=l.pop(),r-e<=n)continue;const c=e+Math.ceil((r-e)/n/2)*n;eJ(t,c,e,r,i),l.push(e,c,c,r)}}const FM=[NaN,NaN,NaN,0];let dT;function Wfe(){return dT||(dT=Ei(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),dT}const Zfe=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Kfe=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Yfe=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Xfe=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function V0(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function Ug(t){throw new Error('failed to parse "'+t+'" as color')}function rJ(t){if(t.toLowerCase().startsWith("rgb")){const l=t.match(Kfe)||t.match(Zfe)||t.match(Yfe);if(l){const c=l[4],s=100/255;return[qn(V0(l[1],s)+.5|0,0,255),qn(V0(l[2],s)+.5|0,0,255),qn(V0(l[3],s)+.5|0,0,255),c!==void 0?qn(V0(c,100),0,1):1]}Ug(t)}if(t.startsWith("#")){if(Xfe.test(t)){const l=t.substring(1),c=l.length<=4?1:2,s=[0,0,0,255];for(let p=0,g=l.length;p<g;p+=c){let _=parseInt(l.substring(p,p+c),16);c===1&&(_+=_<<4),s[p/c]=_}return s[3]=s[3]/255,s}Ug(t)}const e=Wfe();e.fillStyle="#abcdef";let r=e.fillStyle;e.fillStyle=t,e.fillStyle===r&&(e.fillStyle="#fedcba",r=e.fillStyle,e.fillStyle=t,e.fillStyle===r&&Ug(t));const n=e.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return rJ(n);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Ix(i[3]/255,3),i}function Qfe(t){return typeof t=="string"?t:jM(t)}const eme=1024,og={};let pT=0;function tme(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function fT(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function mT(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function gT(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function yT(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function kL(t){const e=gT(t[0]),r=gT(t[1]),n=gT(t[2]),i=yT(e*.222488403+r*.716873169+n*.06060791),l=500*(yT(e*.452247074+r*.399439023+n*.148375274)-i),c=200*(i-yT(e*.016863605+r*.117638439+n*.865350722)),s=Math.atan2(c,l)*(180/Math.PI);return[116*i-16,Math.sqrt(l*l+c*c),s<0?s+360:s,t[3]]}function rme(t){const e=(t[0]+16)/116,r=t[1],n=t[2]*Math.PI/180,i=mT(e),l=mT(e+r/500*Math.cos(n)),c=mT(e-r/200*Math.sin(n)),s=fT(l*3.021973625-i*1.617392459-c*.404875592),p=fT(l*-.943766287+i*1.916279586+c*.027607165),g=fT(l*.069407491-i*.22898585+c*1.159737864);return[qn(s+.5|0,0,255),qn(p+.5|0,0,255),qn(g+.5|0,0,255),t[3]]}function zM(t){if(t==="none")return FM;if(og.hasOwnProperty(t))return og[t];if(pT>=eme){let r=0;for(const n in og)(r++&3)===0&&(delete og[n],--pT)}const e=rJ(t);e.length!==4&&Ug(t);for(const r of e)isNaN(r)&&Ug(t);return og[t]=e,++pT,e}function vf(t){return Array.isArray(t)?t:zM(t)}function jM(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let r=t[1];r!=(r|0)&&(r=r+.5|0);let n=t[2];n!=(n|0)&&(n=n+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+r+","+n+","+i+")"}function LL(t){return t[0]>0&&t[1]>0}function nme(t,e,r){return r===void 0&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function ho(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}let cd=0;const wo=1<<cd++,rn=1<<cd++,Io=1<<cd++,Xs=1<<cd++,Jh=1<<cd++,Eg=1<<cd++,U0=Math.pow(2,cd)-1,BM={[wo]:"boolean",[rn]:"number",[Io]:"string",[Xs]:"color",[Jh]:"number[]",[Eg]:"size"},ime=Object.keys(BM).map(Number).sort(La);function ome(t){return t in BM}function Tg(t){const e=[];for(const r of ime)Sg(t,r)&&e.push(BM[r]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Sg(t,e){return(t&e)===e}function _c(t,e){return t===e}class ki{constructor(e,r){if(!ome(e))throw new Error(`literal expressions must have a specific type, got ${Tg(e)}`);this.type=e,this.value=r}}class sme{constructor(e,r,...n){this.type=e,this.operator=r,this.args=n}}function nJ(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Xi(t,e,r){switch(typeof t){case"boolean":{if(_c(e,Io))return new ki(Io,t?"true":"false");if(!Sg(e,wo))throw new Error(`got a boolean, but expected ${Tg(e)}`);return new ki(wo,t)}case"number":{if(_c(e,Eg))return new ki(Eg,ho(t));if(_c(e,wo))return new ki(wo,!!t);if(_c(e,Io))return new ki(Io,t.toString());if(!Sg(e,rn))throw new Error(`got a number, but expected ${Tg(e)}`);return new ki(rn,t)}case"string":{if(_c(e,Xs))return new ki(Xs,zM(t));if(_c(e,wo))return new ki(wo,!!t);if(!Sg(e,Io))throw new Error(`got a string, but expected ${Tg(e)}`);return new ki(Io,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return yme(t,e,r);for(const n of t)if(typeof n!="number")throw new Error("expected an array of numbers");if(_c(e,Eg)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new ki(Eg,t)}if(_c(e,Xs)){if(t.length===3)return new ki(Xs,[...t,1]);if(t.length===4)return new ki(Xs,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!Sg(e,Jh))throw new Error(`got an array of numbers, but expected ${Tg(e)}`);return new ki(Jh,t)}const mt={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},ame={[mt.Get]:Tr(qr(1,1/0),DL),[mt.Var]:Tr(qr(1,1),lme),[mt.Has]:Tr(qr(1,1/0),DL),[mt.Id]:Tr(cme,pp),[mt.Concat]:Tr(qr(2,1/0),pn(Io)),[mt.GeometryType]:Tr(ume,pp),[mt.LineMetric]:Tr(pp),[mt.Resolution]:Tr(_T,pp),[mt.Zoom]:Tr(_T,pp),[mt.Time]:Tr(_T,pp),[mt.Any]:Tr(qr(2,1/0),pn(wo)),[mt.All]:Tr(qr(2,1/0),pn(wo)),[mt.Not]:Tr(qr(1,1),pn(wo)),[mt.Equal]:Tr(qr(2,2),pn(U0)),[mt.NotEqual]:Tr(qr(2,2),pn(U0)),[mt.GreaterThan]:Tr(qr(2,2),pn(rn)),[mt.GreaterThanOrEqualTo]:Tr(qr(2,2),pn(rn)),[mt.LessThan]:Tr(qr(2,2),pn(rn)),[mt.LessThanOrEqualTo]:Tr(qr(2,2),pn(rn)),[mt.Multiply]:Tr(qr(2,1/0),NL),[mt.Coalesce]:Tr(qr(2,1/0),NL),[mt.Divide]:Tr(qr(2,2),pn(rn)),[mt.Add]:Tr(qr(2,1/0),pn(rn)),[mt.Subtract]:Tr(qr(2,2),pn(rn)),[mt.Clamp]:Tr(qr(3,3),pn(rn)),[mt.Mod]:Tr(qr(2,2),pn(rn)),[mt.Pow]:Tr(qr(2,2),pn(rn)),[mt.Abs]:Tr(qr(1,1),pn(rn)),[mt.Floor]:Tr(qr(1,1),pn(rn)),[mt.Ceil]:Tr(qr(1,1),pn(rn)),[mt.Round]:Tr(qr(1,1),pn(rn)),[mt.Sin]:Tr(qr(1,1),pn(rn)),[mt.Cos]:Tr(qr(1,1),pn(rn)),[mt.Atan]:Tr(qr(1,2),pn(rn)),[mt.Sqrt]:Tr(qr(1,1),pn(rn)),[mt.Match]:Tr(qr(4,1/0),FL,dme),[mt.Between]:Tr(qr(3,3),pn(rn)),[mt.Interpolate]:Tr(qr(6,1/0),FL,pme),[mt.Case]:Tr(qr(3,1/0),hme,fme),[mt.In]:Tr(qr(2,2),mme),[mt.Number]:Tr(qr(1,1/0),pn(U0)),[mt.String]:Tr(qr(1,1/0),pn(U0)),[mt.Array]:Tr(qr(1,1/0),pn(rn)),[mt.Color]:Tr(qr(1,4),pn(rn)),[mt.Band]:Tr(qr(1,3),pn(rn)),[mt.Palette]:Tr(qr(2,2),gme),[mt.ToString]:Tr(qr(1,1),pn(wo|rn|Io|Xs))};function DL(t,e,r){const n=t.length-1,i=new Array(n);for(let l=0;l<n;++l){const c=t[l+1];switch(typeof c){case"number":{i[l]=new ki(rn,c);break}case"string":{i[l]=new ki(Io,c);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${c}`)}l===0&&r.properties.add(String(c))}return i}function lme(t,e,r){const n=t[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return r.variables.add(n),[new ki(Io,n)]}function cme(t,e,r){r.featureId=!0}function ume(t,e,r){r.geometryType=!0}function _T(t,e,r){r.mapState=!0}function pp(t,e,r){const n=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function qr(t,e){return function(r,n,i){const l=r[0],c=r.length-1;if(t===e){if(c!==t){const s=t===1?"":"s";throw new Error(`expected ${t} argument${s} for ${l}, got ${c}`)}}else if(c<t||c>e){const s=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${s} arguments for ${l}, got ${c}`)}}}function NL(t,e,r){const n=t.length-1,i=new Array(n);for(let l=0;l<n;++l){const c=Xi(t[l+1],e,r);i[l]=c}return i}function pn(t){return function(e,r,n){const i=e.length-1,l=new Array(i);for(let c=0;c<i;++c){const s=Xi(e[c+1],t,n);l[c]=s}return l}}function hme(t,e,r){const n=t[0],i=t.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${i} instead`)}function FL(t,e,r){const n=t[0],i=t.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${i} instead`)}function dme(t,e,r){const n=t.length-1,i=Io|rn|wo,l=Xi(t[1],i,r),c=Xi(t[t.length-1],e,r),s=new Array(n-2);for(let p=0;p<n-2;p+=2){try{const g=Xi(t[p+2],l.type,r);s[p]=g}catch(g){throw new Error(`failed to parse argument ${p+1} of match expression: ${g.message}`)}try{const g=Xi(t[p+3],c.type,r);s[p+1]=g}catch(g){throw new Error(`failed to parse argument ${p+2} of match expression: ${g.message}`)}}return[l,...s,c]}function pme(t,e,r){const n=t[1];let i;switch(n[0]){case"linear":i=1;break;case"exponential":const p=n[1];if(typeof p!="number"||p<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(p)} instead`);i=p;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new ki(rn,i);let c;try{c=Xi(t[2],rn,r)}catch(p){throw new Error(`failed to parse argument 1 in interpolate expression: ${p.message}`)}const s=new Array(t.length-3);for(let p=0;p<s.length;p+=2){try{const g=Xi(t[p+3],rn,r);s[p]=g}catch(g){throw new Error(`failed to parse argument ${p+2} for interpolate expression: ${g.message}`)}try{const g=Xi(t[p+4],e,r);s[p+1]=g}catch(g){throw new Error(`failed to parse argument ${p+3} for interpolate expression: ${g.message}`)}}return[l,c,...s]}function fme(t,e,r){const n=Xi(t[t.length-1],e,r),i=new Array(t.length-1);for(let l=0;l<i.length-1;l+=2){try{const c=Xi(t[l+1],wo,r);i[l]=c}catch(c){throw new Error(`failed to parse argument ${l} of case expression: ${c.message}`)}try{const c=Xi(t[l+2],n.type,r);i[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of case expression: ${c.message}`)}}return i[i.length-1]=n,i}function mme(t,e,r){let n=t[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],i=Io}else i=rn;const l=new Array(n.length);for(let s=0;s<l.length;s++)try{const p=Xi(n[s],i,r);l[s]=p}catch(p){throw new Error(`failed to parse haystack item ${s} for "in" expression: ${p.message}`)}return[Xi(t[1],i,r),...l]}function gme(t,e,r){let n;try{n=Xi(t[1],rn,r)}catch(c){throw new Error(`failed to parse first argument in palette expression: ${c.message}`)}const i=t[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const l=new Array(i.length);for(let c=0;c<l.length;c++){let s;try{s=Xi(i[c],Xs,r)}catch(p){throw new Error(`failed to parse color at index ${c} in palette expression: ${p.message}`)}if(!(s instanceof ki))throw new Error(`the palette color at index ${c} must be a literal value`);l[c]=s}return[n,...l]}function Tr(...t){return function(e,r,n){const i=e[0];let l;for(let c=0;c<t.length;c++){const s=t[c](e,r,n);if(c==t.length-1){if(!s)throw new Error("expected last argument validator to return the parsed args");l=s}}return new sme(r,i,...l)}}function yme(t,e,r){const n=t[0],i=ame[n];if(!i)throw new Error(`unknown operator: ${n}`);return i(t,e,r)}function iJ(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return iJ(t.getGeometries()[0]);default:return""}}function oJ(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ul(t,e,r){const n=Xi(t,e,r);return oa(n)}function oa(t,e){if(t instanceof ki){if(t.type===Xs&&typeof t.value=="string"){const n=zM(t.value);return function(){return n}}return function(){return t.value}}const r=t.operator;switch(r){case mt.Number:case mt.String:case mt.Coalesce:return _me(t);case mt.Get:case mt.Var:case mt.Has:return bme(t);case mt.Id:return n=>n.featureId;case mt.GeometryType:return n=>n.geometryType;case mt.Concat:{const n=t.args.map(i=>oa(i));return i=>"".concat(...n.map(l=>l(i).toString()))}case mt.Resolution:return n=>n.resolution;case mt.Any:case mt.All:case mt.Between:case mt.In:case mt.Not:return xme(t);case mt.Equal:case mt.NotEqual:case mt.LessThan:case mt.LessThanOrEqualTo:case mt.GreaterThan:case mt.GreaterThanOrEqualTo:return vme(t);case mt.Multiply:case mt.Divide:case mt.Add:case mt.Subtract:case mt.Clamp:case mt.Mod:case mt.Pow:case mt.Abs:case mt.Floor:case mt.Ceil:case mt.Round:case mt.Sin:case mt.Cos:case mt.Atan:case mt.Sqrt:return wme(t);case mt.Case:return Eme(t);case mt.Match:return Tme(t);case mt.Interpolate:return Sme(t);case mt.ToString:return Cme(t);default:throw new Error(`Unsupported operator ${r}`)}}function _me(t,e){const r=t.operator,n=t.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=oa(t.args[l]);switch(r){case mt.Coalesce:return l=>{for(let c=0;c<n;++c){const s=i[c](l);if(typeof s<"u"&&s!==null)return s}throw new Error("Expected one of the values to be non-null")};case mt.Number:case mt.String:return l=>{for(let c=0;c<n;++c){const s=i[c](l);if(typeof s===r)return s}throw new Error(`Expected one of the values to be a ${r}`)};default:throw new Error(`Unsupported assertion operator ${r}`)}}function bme(t,e){const n=t.args[0].value;switch(t.operator){case mt.Get:return i=>{const l=t.args;let c=i.properties[n];for(let s=1,p=l.length;s<p;++s){const _=l[s].value;c=c[_]}return c};case mt.Var:return i=>i.variables[n];case mt.Has:return i=>{const l=t.args;if(!(n in i.properties))return!1;let c=i.properties[n];for(let s=1,p=l.length;s<p;++s){const _=l[s].value;if(!c||!Object.hasOwn(c,_))return!1;c=c[_]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function vme(t,e){const r=t.operator,n=oa(t.args[0]),i=oa(t.args[1]);switch(r){case mt.Equal:return l=>n(l)===i(l);case mt.NotEqual:return l=>n(l)!==i(l);case mt.LessThan:return l=>n(l)<i(l);case mt.LessThanOrEqualTo:return l=>n(l)<=i(l);case mt.GreaterThan:return l=>n(l)>i(l);case mt.GreaterThanOrEqualTo:return l=>n(l)>=i(l);default:throw new Error(`Unsupported comparison operator ${r}`)}}function xme(t,e){const r=t.operator,n=t.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=oa(t.args[l]);switch(r){case mt.Any:return l=>{for(let c=0;c<n;++c)if(i[c](l))return!0;return!1};case mt.All:return l=>{for(let c=0;c<n;++c)if(!i[c](l))return!1;return!0};case mt.Between:return l=>{const c=i[0](l),s=i[1](l),p=i[2](l);return c>=s&&c<=p};case mt.In:return l=>{const c=i[0](l);for(let s=1;s<n;++s)if(c===i[s](l))return!0;return!1};case mt.Not:return l=>!i[0](l);default:throw new Error(`Unsupported logical operator ${r}`)}}function wme(t,e){const r=t.operator,n=t.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=oa(t.args[l]);switch(r){case mt.Multiply:return l=>{let c=1;for(let s=0;s<n;++s)c*=i[s](l);return c};case mt.Divide:return l=>i[0](l)/i[1](l);case mt.Add:return l=>{let c=0;for(let s=0;s<n;++s)c+=i[s](l);return c};case mt.Subtract:return l=>i[0](l)-i[1](l);case mt.Clamp:return l=>{const c=i[0](l),s=i[1](l);if(c<s)return s;const p=i[2](l);return c>p?p:c};case mt.Mod:return l=>i[0](l)%i[1](l);case mt.Pow:return l=>Math.pow(i[0](l),i[1](l));case mt.Abs:return l=>Math.abs(i[0](l));case mt.Floor:return l=>Math.floor(i[0](l));case mt.Ceil:return l=>Math.ceil(i[0](l));case mt.Round:return l=>Math.round(i[0](l));case mt.Sin:return l=>Math.sin(i[0](l));case mt.Cos:return l=>Math.cos(i[0](l));case mt.Atan:return n===2?l=>Math.atan2(i[0](l),i[1](l)):l=>Math.atan(i[0](l));case mt.Sqrt:return l=>Math.sqrt(i[0](l));default:throw new Error(`Unsupported numeric operator ${r}`)}}function Eme(t,e){const r=t.args.length,n=new Array(r);for(let i=0;i<r;++i)n[i]=oa(t.args[i]);return i=>{for(let l=0;l<r-1;l+=2)if(n[l](i))return n[l+1](i);return n[r-1](i)}}function Tme(t,e){const r=t.args.length,n=new Array(r);for(let i=0;i<r;++i)n[i]=oa(t.args[i]);return i=>{const l=n[0](i);for(let c=1;c<r-1;c+=2)if(l===n[c](i))return n[c+1](i);return n[r-1](i)}}function Sme(t,e){const r=t.args.length,n=new Array(r);for(let i=0;i<r;++i)n[i]=oa(t.args[i]);return i=>{const l=n[0](i),c=n[1](i);let s,p;for(let g=2;g<r;g+=2){const _=n[g](i);let x=n[g+1](i);const P=Array.isArray(x);if(P&&(x=tme(x)),_>=c)return g===2?x:P?Pme(l,c,s,p,_,x):Cg(l,c,s,p,_,x);s=_,p=x}return p}}function Cme(t,e){const r=t.operator,n=t.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=oa(t.args[l]);switch(r){case mt.ToString:return l=>{const c=i[0](l);return t.args[0].type===Xs?jM(c):c.toString()};default:throw new Error(`Unsupported convert operator ${r}`)}}function Cg(t,e,r,n,i,l){const c=i-r;if(c===0)return n;const s=e-r,p=t===1?s/c:(Math.pow(t,s)-1)/(Math.pow(t,c)-1);return n+p*(l-n)}function Pme(t,e,r,n,i,l){if(i-r===0)return n;const s=kL(n),p=kL(l);let g=p[2]-s[2];g>180?g-=360:g<-180&&(g+=360);const _=[Cg(t,e,r,s[0],i,p[0]),Cg(t,e,r,s[1],i,p[1]),s[2]+Cg(t,e,r,0,i,g),Cg(t,e,r,n[3],i,l[3])];return rme(_)}const $r={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function Ame(t,e,r){const n=t;let i=!0,l=!1,c=!1;const s=[Ev(n,Rr.LOAD,function(){c=!0,l||e()})];return n.src&&cH?(l=!0,n.decode().then(function(){i&&e()}).catch(function(p){i&&(c?e():r())})):s.push(Ev(n,Rr.ERROR,r)),function(){i=!1,s.forEach(Rn)}}function Rme(t,e){return new Promise((r,n)=>{function i(){c(),r(t)}function l(){c(),n(new Error("Image load error"))}function c(){t.removeEventListener("load",i),t.removeEventListener("error",l)}t.addEventListener("load",i),t.addEventListener("error",l)})}function Ime(t,e){return e&&(t.src=e),t.src&&cH?new Promise((r,n)=>t.decode().then(()=>r(t)).catch(i=>t.complete&&t.width?r(t):n(i))):Rme(t)}class Mme{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const r in this.cache_){const n=this.cache_[r];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[r],delete this.patternCache_[r],--this.cacheSize_)}}}get(e,r,n){const i=bT(e,r,n);return i in this.cache_?this.cache_[i]:null}getPattern(e,r,n){const i=bT(e,r,n);return i in this.patternCache_?this.patternCache_[i]:null}set(e,r,n,i,l){const c=bT(e,r,n),s=c in this.cache_;this.cache_[c]=i,l&&(i.getImageState()===$r.IDLE&&i.load(),i.getImageState()===$r.LOADING?i.ready().then(()=>{this.patternCache_[c]=Mv().createPattern(i.getImage(1),"repeat")}):this.patternCache_[c]=Mv().createPattern(i.getImage(1),"repeat")),s||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function bT(t,e,r){const n=r?vf(r):"null";return e+":"+t+":"+n}const Rs=new Mme;let sg=null;class sJ extends Rx{constructor(e,r,n,i,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=i===void 0?$r.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=r,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===$r.LOADED){sg||(sg=Ei(1,1,void 0,{willReadFrequently:!0})),sg.drawImage(this.image_,0,0);try{sg.getImageData(0,0,1,1),this.tainted_=!1}catch{sg=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Rr.CHANGE)}handleImageError_(){this.imageState_=$r.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=$r.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],r=this.size_[1],n=Ei(e,r);n.fillRect(0,0,e,r),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===$r.IDLE){this.image_||this.initializeImage_(),this.imageState_=$r.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Ime(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==$r.LOADED)return;const r=this.image_,n=Ei(Math.ceil(r.width*e),Math.ceil(r.height*e)),i=n.canvas;n.scale(e,e),n.drawImage(r,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Qfe(this.color_),n.fillRect(0,0,i.width/e,i.height/e),n.globalCompositeOperation="destination-in",n.drawImage(r,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===$r.LOADED||this.imageState_===$r.ERROR)e();else{const r=()=>{(this.imageState_===$r.LOADED||this.imageState_===$r.ERROR)&&(this.removeEventListener(Rr.CHANGE,r),e())};this.addEventListener(Rr.CHANGE,r)}})),this.ready_}}function kv(t,e,r,n,i,l){let c=e===void 0?void 0:Rs.get(e,r,i);return c||(c=new sJ(t,t&&"src"in t?t.src||void 0:e,r,n,i),Rs.set(e,r,i,c,l)),l&&c&&!Rs.getPattern(e,r,i)&&Rs.set(e,r,i,c,l),c}function Ia(t){return t?Array.isArray(t)?jM(t):typeof t=="object"&&"src"in t?Ome(t):t:null}function Ome(t){if(!t.offset||!t.size)return Rs.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,r=Rs.getPattern(e,void 0,t.color);if(r)return r;const n=Rs.get(t.src,"anonymous",null);if(n.getImageState()!==$r.LOADED)return null;const i=Ei(t.size[0],t.size[1]);return i.drawImage(n.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),kv(i.canvas,e,void 0,$r.LOADED,t.color,!0),Rs.getPattern(e,void 0,t.color)}const aJ="10px sans-serif",Mo="#000",xf="round",Il=[],Ml=0,wf="round",Ey=10,Ty="#000",Sy="center",Lv="middle",ph=[0,0,0,0],Cy=1,nh=new la;let ag=null,zL;const aC={},kme=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Lme(t,e,r){return`${t} ${e} 16px "${r}"`}const Dme=function(){let e,r;async function n(l){await r.ready;const c=await r.load(l);if(c.length===0)return!1;const s=oC(l),p=s.families[0].toLowerCase(),g=s.weight;return c.some(_=>{const x=_.family.replace(/^['"]|['"]$/g,"").toLowerCase(),P=iC[_.weight]||_.weight;return x===p&&_.style===s.style&&P==g})}async function i(){await r.ready;let l=!0;const c=nh.getProperties(),s=Object.keys(c).filter(p=>c[p]<100);for(let p=s.length-1;p>=0;--p){const g=s[p];let _=c[g];_<100&&(await n(g)?(s_(aC),nh.set(g,100)):(_+=10,nh.set(g,_,!0),_<100&&(l=!1)))}e=void 0,l||(e=setTimeout(i,100))}return async function(l){r||(r=Ps?self.fonts:document.fonts);const c=oC(l);if(!c)return;const s=c.families;let p=!1;for(const g of s){if(kme.has(g))continue;const _=Lme(c.style,c.weight,g);nh.get(_)===void 0&&(nh.set(_,0,!0),p=!0)}p&&(clearTimeout(e),e=setTimeout(i,100))}}(),Nme=function(){let t;return function(e){let r=aC[e];if(r==null){if(Ps){const n=oC(e),i=lJ(e,"g");r=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),r=t.offsetHeight,document.body.removeChild(t);aC[e]=r}return r}}();function lJ(t,e){return ag||(ag=Ei(1,1)),t!=zL&&(ag.font=t,zL=ag.font),ag.measureText(e)}function cJ(t,e){return lJ(t,e).width}function jL(t,e,r){if(e in r)return r[e];const n=e.split(`
`).reduce((i,l)=>Math.max(i,cJ(t,l)),0);return r[e]=n,n}function Fme(t,e){const r=[],n=[],i=[];let l=0,c=0,s=0,p=0;for(let g=0,_=e.length;g<=_;g+=2){const x=e[g];if(x===`
`||g===_){l=Math.max(l,c),i.push(c),c=0,s+=p,p=0;continue}const P=e[g+1]||t.font,A=cJ(P,x);r.push(A),c+=A;const M=Nme(P);n.push(M),p=Math.max(p,M)}return{width:l,height:s,widths:r,heights:n,lineWidths:i}}function zme(t,e,r,n,i,l,c,s,p,g,_){t.save(),r!==1&&(t.globalAlpha===void 0?t.globalAlpha=x=>x.globalAlpha*=r:t.globalAlpha*=r),e&&t.transform.apply(t,e),n.contextInstructions?(t.translate(p,g),t.scale(_[0],_[1]),jme(n,t)):_[0]<0||_[1]<0?(t.translate(p,g),t.scale(_[0],_[1]),t.drawImage(n,i,l,c,s,0,0,c,s)):t.drawImage(n,i,l,c,s,p,g,c*_[0],s*_[1]),t.restore()}function jme(t,e){const r=t.contextInstructions;for(let n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}class qx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ho(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new qx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Sr()}getImage(e){return Sr()}getHitDetectionImage(){return Sr()}getPixelRatio(e){return 1}getImageState(){return Sr()}getImageSize(){return Sr()}getOrigin(){return Sr()}getSize(){return Sr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ho(e)}listenImageChange(e){Sr()}load(){Sr()}unlistenImageChange(e){Sr()}ready(){return Promise.resolve()}}class $x extends qx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?$r.LOADING:$r.LOADED,this.imageState_===$r.LOADING&&this.ready().then(()=>this.imageState_=$r.LOADED),this.render()}clone(){const e=this.getScale(),r=new $x({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r}getAnchor(){const e=this.size_,r=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-r[0]/n[0],e[1]/2+r[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const r=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${r}`+Object.values(this.renderOptions_).join(",");let i=Rs.get(n,null,null)?.getImage(1);if(!i){const l=this.renderOptions_,c=Math.ceil(l.size*e),s=Ei(c,c);this.draw_(l,s,e),i=s.canvas,Rs.set(n,null,null,new sJ(i,void 0,null,$r.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,r,n){if(r===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return r;let i=this.radius,l=this.radius2_===void 0?i:this.radius2_;if(i<l){const ne=i;i=l,l=ne}const c=this.radius2_===void 0?this.points_:this.points_*2,s=2*Math.PI/c,p=l*Math.sin(s),g=Math.sqrt(l*l-p*p),_=i-g,x=Math.sqrt(p*p+_*_),P=x/p;if(e==="miter"&&P<=n)return P*r;const A=r/2/P,M=r/2*(_/x),z=Math.sqrt((i+A)*(i+A)+M*M)-i;if(this.radius2_===void 0||e==="bevel")return z*2;const j=i*Math.sin(s),$=Math.sqrt(i*i-j*j),W=l-$,te=Math.sqrt(j*j+W*W)/j;if(te<=n){const ne=te*r/2-l-i;return 2*Math.max(z,ne)}return z*2}createRenderOptions(){let e=xf,r=wf,n=0,i=null,l=0,c,s=0;this.stroke_&&(c=Ia(this.stroke_.getColor()??Ty),s=this.stroke_.getWidth()??Cy,i=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,r=this.stroke_.getLineJoin()??wf,e=this.stroke_.getLineCap()??xf,n=this.stroke_.getMiterLimit()??Ey);const p=this.calculateLineJoinSize_(r,s,n),g=Math.max(this.radius,this.radius2_||0),_=Math.ceil(2*g+p);return{strokeStyle:c,strokeWidth:s,size:_,lineCap:e,lineDash:i,lineDashOffset:l,lineJoin:r,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,r,n){if(r.scale(n,n),r.translate(e.size/2,e.size/2),this.createPath_(r),this.fill_){let i=this.fill_.getColor();i===null&&(i=Mo),r.fillStyle=Ia(i),r.fill()}e.strokeStyle&&(r.strokeStyle=e.strokeStyle,r.lineWidth=e.strokeWidth,e.lineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineCap=e.lineCap,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit,r.stroke())}createHitDetectionCanvas_(e){let r;if(this.fill_){let n=this.fill_.getColor(),i=0;typeof n=="string"&&(n=vf(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0&&(r=Ei(e.size,e.size),this.drawHitDetectionCanvas_(e,r))}return r?r.canvas:this.getImage(1)}createPath_(e){let r=this.points_;const n=this.radius;if(r===1/0)e.arc(0,0,n,0,2*Math.PI);else{const i=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(r*=2);const l=this.angle_-Math.PI/2,c=2*Math.PI/r;for(let s=0;s<r;s++){const p=l+s*c,g=s%2===0?n:i;e.lineTo(g*Math.cos(p),g*Math.sin(p))}e.closePath()}}drawHitDetectionCanvas_(e,r){r.translate(e.size/2,e.size/2),this.createPath_(r),r.fillStyle=Mo,r.fill(),e.strokeStyle&&(r.strokeStyle=e.strokeStyle,r.lineWidth=e.strokeWidth,e.lineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit,r.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class f_ extends $x{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),r=new f_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r}setRadius(e){this.radius=e,this.render()}}class Ma{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Ma({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const r=kv(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));r.ready().then(()=>{this.patternImage_=null}),r.getImageState()===$r.IDLE&&r.load(),r.getImageState()===$r.LOADING&&(this.patternImage_=r)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Nr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:vf(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function BL(t,e,r,n){return r!==void 0&&n!==void 0?[r/t,n/e]:r!==void 0?r/t:n!==void 0?n/e:1}class Ef extends qx{constructor(e){e=e||{};const r=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:r,rotation:n,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const c=e.img!==void 0?e.img:null;let s=e.src;fn(!(s!==void 0&&c),"`image` and `src` cannot be provided at the same time"),(s===void 0||s.length===0)&&c&&(s=c.src||Nr(c)),fn(s!==void 0&&s.length>0,"A defined and non-empty `src` or `image` must be provided"),fn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let p;if(e.src!==void 0?p=$r.IDLE:c!==void 0&&("complete"in c?c.complete?p=c.src?$r.LOADED:$r.IDLE:p=$r.LOADING:p=$r.LOADED),this.color_=e.color!==void 0?vf(e.color):null,this.iconImage_=kv(c,s,this.crossOrigin_,p,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,_;if(e.size)[g,_]=e.size;else{const x=this.getImage(1);if(x.width&&x.height)g=x.width,_=x.height;else if(x instanceof HTMLImageElement){this.initialOptions_=e;const P=()=>{if(this.unlistenImageChange(P),!this.initialOptions_)return;const A=this.iconImage_.getSize();this.setScale(BL(A[0],A[1],e.width,e.height))};this.listenImageChange(P);return}}g!==void 0&&this.setScale(BL(g,_,e.width,e.height))}}clone(){let e,r,n;return this.initialOptions_?(r=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Ef({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:r,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const r=this.getDisplacement(),n=this.getScaleArray();return[e[0]-r[0]/n[0],e[1]+r[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const r=this.getSize(),n=this.iconImage_.getSize();if(!r||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-r[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-r[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=kv(null,e,this.crossOrigin_,$r.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==$r.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==$r.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Rr.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Rr.CHANGE,e)}ready(){return this.iconImage_.ready()}}class qc{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new qc({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class os{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=qL,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new os({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(r){return r.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=qL,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Bme(t){let e;if(typeof t=="function")e=t;else{let r;Array.isArray(t)?r=t:(fn(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),r=[t]),e=function(){return r}}return e}let vT=null;function uJ(t,e){if(!vT){const r=new Ma({color:"rgba(255,255,255,0.4)"}),n=new qc({color:"#3399CC",width:1.25});vT=[new os({image:new f_({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return vT}function qL(t){return t.getGeometry()}const qme="#333";class Vx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ho(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Ma({color:qme}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Vx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Ma?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ho(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function $me(t){return!0}function Vme(t){const e=nJ(),r=Ume(t,e),n=oJ();return function(i,l){if(n.properties=i.getPropertiesInternal(),n.resolution=l,e.featureId){const c=i.getId();c!==void 0?n.featureId=c:n.featureId=null}return e.geometryType&&(n.geometryType=iJ(i.getGeometry())),r(n)}}function $L(t){const e=nJ(),r=t.length,n=new Array(r);for(let c=0;c<r;++c)n[c]=lC(t[c],e);const i=oJ(),l=new Array(r);return function(c,s){if(i.properties=c.getPropertiesInternal(),i.resolution=s,e.featureId){const g=c.getId();g!==void 0?i.featureId=g:i.featureId=null}let p=0;for(let g=0;g<r;++g){const _=n[g](i);_&&(l[p]=_,p+=1)}return l.length=p,l}}function Ume(t,e){const r=t.length,n=new Array(r);for(let i=0;i<r;++i){const l=t[i],c="filter"in l?Ul(l.filter,wo,e):$me;let s;if(Array.isArray(l.style)){const p=l.style.length;s=new Array(p);for(let g=0;g<p;++g)s[g]=lC(l.style[g],e)}else s=[lC(l.style,e)];n[i]={filter:c,styles:s}}return function(i){const l=[];let c=!1;for(let s=0;s<r;++s){const p=n[s].filter;if(p(i)&&!(t[s].else&&c)){c=!0;for(const g of n[s].styles){const _=g(i);_&&l.push(_)}}}return l}}function lC(t,e){const r=Py(t,"",e),n=Ay(t,"",e),i=Gme(t,e),l=Hme(t,e),c=Oo(t,"z-index",e);if(!r&&!n&&!i&&!l&&!ou(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const s=new os;return function(p){let g=!0;if(r){const _=r(p);_&&(g=!1),s.setFill(_)}if(n){const _=n(p);_&&(g=!1),s.setStroke(_)}if(i){const _=i(p);_&&(g=!1),s.setText(_)}if(l){const _=l(p);_&&(g=!1),s.setImage(_)}return c&&s.setZIndex(c(p)),g?null:s}}function Py(t,e,r){let n;if(e+"fill-pattern-src"in t)n=Kme(t,e+"fill-",r);else{if(t[e+"fill-color"]==="none")return l=>null;n=qM(t,e+"fill-color",r)}if(!n)return null;const i=new Ma;return function(l){const c=n(l);return c===FM?null:(i.setColor(c),i)}}function Ay(t,e,r){const n=Oo(t,e+"stroke-width",r),i=qM(t,e+"stroke-color",r);if(!n&&!i)return null;const l=El(t,e+"stroke-line-cap",r),c=El(t,e+"stroke-line-join",r),s=hJ(t,e+"stroke-line-dash",r),p=Oo(t,e+"stroke-line-dash-offset",r),g=Oo(t,e+"stroke-miter-limit",r),_=new qc;return function(x){if(i){const P=i(x);if(P===FM)return null;_.setColor(P)}if(n&&_.setWidth(n(x)),l){const P=l(x);if(P!=="butt"&&P!=="round"&&P!=="square")throw new Error("Expected butt, round, or square line cap");_.setLineCap(P)}if(c){const P=c(x);if(P!=="bevel"&&P!=="round"&&P!=="miter")throw new Error("Expected bevel, round, or miter line join");_.setLineJoin(P)}return s&&_.setLineDash(s(x)),p&&_.setLineDashOffset(p(x)),g&&_.setMiterLimit(g(x)),_}}function Gme(t,e){const r="text-",n=El(t,r+"value",e);if(!n)return null;const i=Py(t,r,e),l=Py(t,r+"background-",e),c=Ay(t,r,e),s=Ay(t,r+"background-",e),p=El(t,r+"font",e),g=Oo(t,r+"max-angle",e),_=Oo(t,r+"offset-x",e),x=Oo(t,r+"offset-y",e),P=Vp(t,r+"overflow",e),A=El(t,r+"placement",e),M=Oo(t,r+"repeat",e),F=Ux(t,r+"scale",e),z=Vp(t,r+"rotate-with-view",e),j=Oo(t,r+"rotation",e),$=El(t,r+"align",e),W=El(t,r+"justify",e),X=El(t,r+"baseline",e),te=Vp(t,r+"keep-upright",e),ne=hJ(t,r+"padding",e),Z=Gx(t,r+"declutter-mode"),U=new Vx({declutterMode:Z});return function(K){if(U.setText(n(K)),i&&U.setFill(i(K)),l&&U.setBackgroundFill(l(K)),c&&U.setStroke(c(K)),s&&U.setBackgroundStroke(s(K)),p&&U.setFont(p(K)),g&&U.setMaxAngle(g(K)),_&&U.setOffsetX(_(K)),x&&U.setOffsetY(x(K)),P&&U.setOverflow(P(K)),A){const he=A(K);if(he!=="point"&&he!=="line")throw new Error("Expected point or line for text-placement");U.setPlacement(he)}if(M&&U.setRepeat(M(K)),F&&U.setScale(F(K)),z&&U.setRotateWithView(z(K)),j&&U.setRotation(j(K)),$){const he=$(K);if(he!=="left"&&he!=="center"&&he!=="right"&&he!=="end"&&he!=="start")throw new Error("Expected left, right, center, start, or end for text-align");U.setTextAlign(he)}if(W){const he=W(K);if(he!=="left"&&he!=="right"&&he!=="center")throw new Error("Expected left, right, or center for text-justify");U.setJustify(he)}if(X){const he=X(K);if(he!=="bottom"&&he!=="top"&&he!=="middle"&&he!=="alphabetic"&&he!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");U.setTextBaseline(he)}return ne&&U.setPadding(ne(K)),te&&U.setKeepUpright(te(K)),U}}function Hme(t,e){return"icon-src"in t?Jme(t,e):"shape-points"in t?Wme(t,e):"circle-radius"in t?Zme(t,e):null}function Jme(t,e){const r="icon-",n=r+"src",i=dJ(t[n],n),l=Dv(t,r+"anchor",e),c=Ux(t,r+"scale",e),s=Oo(t,r+"opacity",e),p=Dv(t,r+"displacement",e),g=Oo(t,r+"rotation",e),_=Vp(t,r+"rotate-with-view",e),x=UL(t,r+"anchor-origin"),P=GL(t,r+"anchor-x-units"),A=GL(t,r+"anchor-y-units"),M=ege(t,r+"color"),F=Xme(t,r+"cross-origin"),z=Qme(t,r+"offset"),j=UL(t,r+"offset-origin"),$=Nv(t,r+"width"),W=Nv(t,r+"height"),X=Yme(t,r+"size"),te=Gx(t,r+"declutter-mode"),ne=new Ef({src:i,anchorOrigin:x,anchorXUnits:P,anchorYUnits:A,color:M,crossOrigin:F,offset:z,offsetOrigin:j,height:W,width:$,size:X,declutterMode:te});return function(Z){return s&&ne.setOpacity(s(Z)),p&&ne.setDisplacement(p(Z)),g&&ne.setRotation(g(Z)),_&&ne.setRotateWithView(_(Z)),c&&ne.setScale(c(Z)),l&&ne.setAnchor(l(Z)),ne}}function Wme(t,e){const r="shape-",n=r+"points",i=r+"radius",l=cC(t[n],n),c=cC(t[i],i),s=Py(t,r,e),p=Ay(t,r,e),g=Ux(t,r+"scale",e),_=Dv(t,r+"displacement",e),x=Oo(t,r+"rotation",e),P=Vp(t,r+"rotate-with-view",e),A=Nv(t,r+"radius2"),M=Nv(t,r+"angle"),F=Gx(t,r+"declutter-mode"),z=new $x({points:l,radius:c,radius2:A,angle:M,declutterMode:F});return function(j){return s&&z.setFill(s(j)),p&&z.setStroke(p(j)),_&&z.setDisplacement(_(j)),x&&z.setRotation(x(j)),P&&z.setRotateWithView(P(j)),g&&z.setScale(g(j)),z}}function Zme(t,e){const r="circle-",n=Py(t,r,e),i=Ay(t,r,e),l=Oo(t,r+"radius",e),c=Ux(t,r+"scale",e),s=Dv(t,r+"displacement",e),p=Oo(t,r+"rotation",e),g=Vp(t,r+"rotate-with-view",e),_=Gx(t,r+"declutter-mode"),x=new f_({radius:5,declutterMode:_});return function(P){return l&&x.setRadius(l(P)),n&&x.setFill(n(P)),i&&x.setStroke(i(P)),s&&x.setDisplacement(s(P)),p&&x.setRotation(p(P)),g&&x.setRotateWithView(g(P)),c&&x.setScale(c(P)),x}}function Oo(t,e,r){if(!(e in t))return;const n=Ul(t[e],rn,r);return function(i){return cC(n(i),e)}}function El(t,e,r){if(!(e in t))return null;const n=Ul(t[e],Io,r);return function(i){return dJ(n(i),e)}}function Kme(t,e,r){const n=El(t,e+"pattern-src",r),i=VL(t,e+"pattern-offset",r),l=VL(t,e+"pattern-size",r),c=qM(t,e+"color",r);return function(s){return{src:n(s),offset:i&&i(s),size:l&&l(s),color:c&&c(s)}}}function Vp(t,e,r){if(!(e in t))return null;const n=Ul(t[e],wo,r);return function(i){const l=n(i);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function qM(t,e,r){if(!(e in t))return null;const n=Ul(t[e],Xs,r);return function(i){return pJ(n(i),e)}}function hJ(t,e,r){if(!(e in t))return null;const n=Ul(t[e],Jh,r);return function(i){return m_(n(i),e)}}function Dv(t,e,r){if(!(e in t))return null;const n=Ul(t[e],Jh,r);return function(i){const l=m_(n(i),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function VL(t,e,r){if(!(e in t))return null;const n=Ul(t[e],Jh,r);return function(i){return fJ(n(i),e)}}function Ux(t,e,r){if(!(e in t))return null;const n=Ul(t[e],Jh|rn,r);return function(i){return tge(n(i),e)}}function Nv(t,e){const r=t[e];if(r!==void 0){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}}function Yme(t,e){const r=t[e];if(r!==void 0){if(typeof r=="number")return ho(r);if(!Array.isArray(r))throw new Error(`Expected a number or size array for ${e}`);if(r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return r}}function Xme(t,e){const r=t[e];if(r!==void 0){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}}function UL(t,e){const r=t[e];if(r!==void 0){if(r!=="bottom-left"&&r!=="bottom-right"&&r!=="top-left"&&r!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return r}}function GL(t,e){const r=t[e];if(r!==void 0){if(r!=="pixels"&&r!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return r}}function Qme(t,e){const r=t[e];if(r!==void 0)return m_(r,e)}function Gx(t,e){const r=t[e];if(r!==void 0){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);if(r!=="declutter"&&r!=="obstacle"&&r!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return r}}function ege(t,e){const r=t[e];if(r!==void 0)return pJ(r,e)}function m_(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const r=t.length;for(let n=0;n<r;++n)if(typeof t[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function dJ(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function cC(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function pJ(t,e){if(typeof t=="string")return t;const r=m_(t,e),n=r.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return r}function fJ(t,e){const r=m_(t,e);if(r.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return r}function tge(t,e){return typeof t=="number"?t:fJ(t,e)}const HL={RENDER_ORDER:"renderOrder"};class $M extends DM{constructor(e){e=e||{};const r=Object.assign({},e);delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,super(r),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(HL.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,r){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new tJ(9)),this.getRenderer().renderDeclutter(e,r)}setRenderOrder(e){this.set(HL.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?uJ:e;const r=rge(e);this.styleFunction_=e===null?void 0:Bme(r),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function rge(t){if(t===void 0)return uJ;if(!t)return null;if(typeof t=="function"||t instanceof os)return t;if(!Array.isArray(t))return $L([t]);if(t.length===0)return[];const e=t.length,r=t[0];if(r instanceof os){const i=new Array(e);for(let l=0;l<e;++l){const c=t[l];if(!(c instanceof os))throw new Error("Expected a list of style instances");i[l]=c}return i}if("style"in r){const i=new Array(e);for(let l=0;l<e;++l){const c=t[l];if(!("style"in c))throw new Error("Expected a list of rules with a style property");i[l]=c}return Vme(i)}return $L(t)}class mJ extends $l{constructor(e,r,n,i){super(e),this.inversePixelTransform=r,this.frameState=n,this.context=i}}class nge extends Px{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,r){Sr()}calculateMatrices2D(e){const r=e.viewState,n=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Nl(n,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),RH(i,n)}forEachFeatureAtCoordinate(e,r,n,i,l,c,s,p){let g;const _=r.viewState;function x(X,te,ne,Z){return l.call(c,te,X?ne:null,Z)}const P=_.projection,A=hM(e.slice(),P),M=[[0,0]];if(P.canWrapX()&&i){const X=P.getExtent(),te=En(X);M.push([-te,0],[te,0])}const F=r.layerStatesArray,z=F.length,j=[],$=[];for(let X=0;X<M.length;X++)for(let te=z-1;te>=0;--te){const ne=F[te],Z=ne.layer;if(Z.hasRenderer()&&NM(ne,_)&&s.call(p,Z)){const U=Z.getRenderer(),K=Z.getSource();if(U&&K){const he=K.getWrapX()?A:e,ue=x.bind(null,ne.managed);$[0]=he[0]+M[X][0],$[1]=he[1]+M[X][1],g=U.forEachFeatureAtCoordinate($,r,n,ue,j)}if(g)return g}}if(j.length===0)return;const W=1/j.length;return j.forEach((X,te)=>X.distanceSq+=te*W),j.sort((X,te)=>X.distanceSq-te.distanceSq),j.some(X=>g=X.callback(X.feature,X.layer,X.geometry)),g}hasFeatureAtCoordinate(e,r,n,i,l,c){return this.forEachFeatureAtCoordinate(e,r,n,i,yy,this,l,c)!==void 0}getMap(){return this.map_}renderFrame(e){Sr()}scheduleExpireIconCache(e){Rs.canExpireCache()&&e.postRenderFunctions.push(ige)}}function ige(t,e){Rs.expire()}class oge extends nge{constructor(e){super(e),this.fontChangeListenerKey_=en(nh,mf.PROPERTYCHANGE,e.redrawText,e),this.element_=Ps?UH():document.createElement("div");const r=this.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",this.element_.className=Hh+" ol-layers";const n=e.getViewport();n&&n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,r){const n=this.getMap();if(n.hasListener(e)){const i=new mJ(e,void 0,r);n.dispatchEvent(i)}}disposeInternal(){Rn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(As.PRECOMPOSE,e);const r=e.layerStatesArray.sort((g,_)=>g.zIndex-_.zIndex);r.some(g=>g.layer instanceof $M&&g.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const l=[];let c=null;for(let g=0,_=r.length;g<_;++g){const x=r[g];e.layerIndex=g;const P=x.layer,A=P.getSourceState();if(!NM(x,i)||A!="ready"&&A!="undefined"){P.unrender();continue}const M=P.render(e,c);M&&(M!==c&&(this.children_.push(M),c=M),l.push(x))}this.declutter(e,l),xfe(this.element_,this.children_);const p=this.getMap().getTargetElement();if(Bc(p)){const g=p.getContext("2d");for(const _ of this.children_){const x=_.firstElementChild||_,P=_.style.backgroundColor;if(P&&(!Bc(x)||x.width>0)&&(g.fillStyle=P,g.fillRect(0,0,p.width,p.height)),Bc(x)&&x.width>0){const A=_.style.opacity||x.style.opacity;g.globalAlpha=A===""?1:Number(A);const M=x.style.transform;if(M)g.setTransform(...tC(M));else{const F=parseFloat(x.style.width)/x.width,z=parseFloat(x.style.height)/x.height;g.setTransform(F,0,0,z,0,0)}g.drawImage(x,0,0)}}g.globalAlpha=1,g.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(As.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,r){if(e.declutter){for(let n=r.length-1;n>=0;--n){const i=r[n],l=i.layer;l.getDeclutter()&&l.renderDeclutter(e,i)}r.forEach(n=>n.layer.renderDeferred(e))}}}function gJ(t){if(t instanceof DM){t.setMapInternal(null);return}t instanceof Bf&&t.getLayers().forEach(gJ)}function yJ(t,e){if(t instanceof DM){t.setMapInternal(e);return}if(t instanceof Bf){const r=t.getLayers().getArray();for(let n=0,i=r.length;n<i;++n)yJ(r[n],e)}}let _J=class extends la{constructor(e){super(),e=e||{},this.on,this.once,this.un;const r=sge(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Ude,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Os(),this.pixelToCoordinateTransform_=Os(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Ps||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=r.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Ps||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=r.controls||(Ps?new ls:HH()),this.interactions=r.interactions||(Ps?new ls:XH({onFocusOnly:!0})),this.overlays_=r.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Jde(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(co.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(co.VIEW,this.handleViewChanged_),this.addChangeListener(co.SIZE,this.handleSizeChanged_),this.addChangeListener(co.TARGET,this.handleTargetChanged_),this.setProperties(r.values);const n=this;e.view&&!(e.view instanceof Sa)&&e.view.then(function(i){n.setView(new Sa(i))}),this.controls.addEventListener(Ao.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Ao.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Ao.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Ao.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Ao.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Ao.REMOVE,i=>{const l=i.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){yJ(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const r=e.getId();r!==void 0&&(this.overlayIdIndex_[r.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,r,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,c=n.layerFilter!==void 0?n.layerFilter:yy,s=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,l,s,r,null,c,null)}getFeaturesAtPixel(e,r){const n=[];return this.forEachFeatureAtPixel(e,function(i){n.push(i)},r),n}getAllLayers(){const e=[];function r(n){n.forEach(function(i){i instanceof Bf?r(i.getLayers()):e.push(i)})}return r(this.getLayers()),e}hasFeatureAtPixel(e,r){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const i=r.layerFilter!==void 0?r.layerFilter:yy,l=r.hitTolerance!==void 0?r.hitTolerance:0,c=r.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,c,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),i=this.getSize(),l=n.width/i[0],c=n.height/i[1],s="changedTouches"in e?e.changedTouches[0]:e;return[(s.clientX-n.left)/l,(s.clientY-n.top)/c]}getTarget(){return this.get(co.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return eC(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const r=this.frameState_;return r?Di(r.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const r=this.overlayIdIndex_[e.toString()];return r!==void 0?r:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(co.LAYERGROUP)}setLayers(e){const r=this.getLayerGroup();if(e instanceof ls){r.setLayers(e);return}const n=r.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let r=0,n=e.length;r<n;++r){const i=e[r];if(!i.visible)continue;const l=i.layer.getRenderer();if(l&&!l.ready)return!0;const c=i.layer.getSource();if(c&&c.loading)return!0}return!1}getPixelFromCoordinate(e){const r=bl(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(r)}getPixelFromCoordinateInternal(e){const r=this.frameState_;return r?Di(r.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(co.SIZE)}getView(){return this.get(co.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,r,n,i){return Wde(this.frameState_,e,r,n,i)}handleBrowserEvent(e,r){r=r||e.type;const n=new Ac(r,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const r=e.originalEvent,n=r.type;if(n===Dc.POINTERDOWN||n===Rr.WHEEL||n===Rr.KEYDOWN){const i=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():i,c=r.target,s=l instanceof ShadowRoot?l.host===c?l.host.ownerDocument:l:l===i?i.documentElement:l;if(this.overlayContainerStopEvent_.contains(c)||!s.contains(c))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let l=i.length-1;l>=0;l--){const c=i[l];if(c.getMap()!==this||!c.getActive()||!this.getTargetElement())continue;if(!c.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,r=this.tileQueue_;if(!r.isEmpty()){let i=this.maxTilesLoading_,l=i;if(e){const c=e.viewHints;if(c[ri.ANIMATING]||c[ri.INTERACTING]){const s=Date.now()-e.time>8;i=s?0:8,l=s?0:2}}r.getTilesLoading()<i&&(r.reprioritize(),r.loadMoreTiles(i,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(As.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(As.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Tp(vl.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Tp(vl.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let i=0,l=n.length;i<l;++i)n[i](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,i=this.targetChangeHandlerKeys_.length;n<i;++n)Rn(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Rr.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Rr.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Bc(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),r=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=r,!r)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Bc(r)||r.appendChild(this.viewport_),this.renderer_||(this.renderer_=new oge(this)),!Bc(r)){this.mapBrowserEventHandler_=new Gde(this,this.moveTolerance_);for(const i in ti)this.mapBrowserEventHandler_.addEventListener(ti[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Rr.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Rr.WHEEL,this.boundHandleBrowserEvent_,uH?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const i=r.getRootNode();n=i instanceof ShadowRoot?i.host:r}if(this.targetChangeHandlerKeys_=[en(n,Rr.KEYDOWN,this.handleBrowserEvent,this),en(n,Rr.KEYPRESS,this.handleBrowserEvent,this)],r instanceof HTMLElement){const i=r.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(r)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Rn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Rn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=en(e,mf.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=en(e,Rr.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Rn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Oc("addlayer",e)),this.layerGroupPropertyListenerKeys_=[en(e,mf.PROPERTYCHANGE,this.render,this),en(e,Rr.CHANGE,this.render,this),en(e,"addlayer",this.handleLayerAdd_,this),en(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let r=0,n=e.length;r<n;++r){const i=e[r].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){gJ(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const r=this.getSize(),n=this.getView(),i=this.frameState_;let l=null;if(r!==void 0&&LL(r)&&n&&n.isDef()){const c=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:K2(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:c,wantedTiles:{},mapId:Nr(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const p=isNaN(s.nextRotation)?s.rotation:s.nextRotation;l.nextExtent=K2(s.nextCenter,s.nextResolution,p,r)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),i&&(!this.previousExtent_||!l_(this.previousExtent_)&&!yf(l.extent,this.previousExtent_))&&(this.dispatchEvent(new Tp(vl.MOVESTART,this,i)),this.previousExtent_=zf(this.previousExtent_)),this.previousExtent_&&!l.viewHints[ri.ANIMATING]&&!l.viewHints[ri.INTERACTING]&&!yf(l.extent,this.previousExtent_)&&(this.dispatchEvent(new Tp(vl.MOVEEND,this,l)),hH(l.extent,this.previousExtent_))),this.dispatchEvent(new Tp(vl.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(vl.LOADSTART)||this.hasListener(vl.LOADEND)||this.hasListener(As.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const r=this.getLayerGroup();r&&this.handleLayerRemove_(new Oc("removelayer",r)),this.set(co.LAYERGROUP,e)}setSize(e){this.set(co.SIZE,e)}setTarget(e){this.set(co.TARGET,e)}setView(e){if(!e||e instanceof Sa){this.set(co.VIEW,e);return}this.set(co.VIEW,new Sa);const r=this;e.then(function(n){r.setView(new Sa(n))})}updateSize(){const e=this.getTargetElement();let r;if(e){let i,l;if(Bc(e))i=e.width,l=e.height;else{const c=getComputedStyle(e);i=e.offsetWidth-parseFloat(c.borderLeftWidth)-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)-parseFloat(c.borderRightWidth),l=e.offsetHeight-parseFloat(c.borderTopWidth)-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)-parseFloat(c.borderBottomWidth)}!isNaN(i)&&!isNaN(l)&&(r=[Math.max(0,i),Math.max(0,l)],!LL(r)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&xH("No map visible because the map container's width or height are 0."))}const n=this.getSize();r&&(!n||!du(r,n))&&(this.setSize(r),this.updateViewportSize_(r))}updateViewportSize_(e){const r=this.getView();r&&r.setViewportSize(e)}};function sge(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const r={},n=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new Bf({layers:t.layers});r[co.LAYERGROUP]=n,r[co.TARGET]=t.target,r[co.VIEW]=t.view instanceof Sa?t.view:new Sa;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new ls(t.controls.slice()):(fn(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let l;t.interactions!==void 0&&(Array.isArray(t.interactions)?l=new ls(t.interactions.slice()):(fn(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=t.interactions));let c;return t.overlays!==void 0?Array.isArray(t.overlays)?c=new ls(t.overlays.slice()):(fn(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),c=t.overlays):c=new ls,{controls:i,interactions:l,keyboardEventTarget:e,overlays:c,values:r}}const lo={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class age extends la{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+yfe,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(lo.ELEMENT,this.handleElementChanged),this.addChangeListener(lo.MAP,this.handleMapChanged),this.addChangeListener(lo.OFFSET,this.handleOffsetChanged),this.addChangeListener(lo.POSITION,this.handlePositionChanged),this.addChangeListener(lo.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(lo.ELEMENT)}getId(){return this.id}getMap(){return this.get(lo.MAP)||null}getOffset(){return this.get(lo.OFFSET)}getPosition(){return this.get(lo.POSITION)}getPositioning(){return this.get(lo.POSITIONING)}handleElementChanged(){VH(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Rn(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=en(e,vl.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(lo.ELEMENT,e)}setMap(e){this.set(lo.MAP,e)}setOffset(e){this.set(lo.OFFSET,e)}setPosition(e){this.set(lo.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const r=this.getMap();if(!r||!r.getTargetElement()||!this.get(lo.POSITION))return;const n=this.getRect(r.getTargetElement(),r.getSize()),i=this.getElement(),l=this.getRect(i,[bfe(i),vfe(i)]);e=e||{};const c=e.margin===void 0?20:e.margin;if(!uh(n,l)){const s=l[0]-n[0],p=n[2]-l[2],g=l[1]-n[1],_=n[3]-l[3],x=[0,0];if(s<0?x[0]=s-c:p<0&&(x[0]=Math.abs(p)+c),g<0?x[1]=g-c:_<0&&(x[1]=Math.abs(_)+c),x[0]!==0||x[1]!==0){const P=r.getView().getCenterInternal(),A=r.getPixelFromCoordinateInternal(P);if(!A)return;const M=[A[0]+x[0],A[1]+x[1]],F=e.animation||{};r.getView().animateInternal({center:r.getCoordinateFromPixelInternal(M),duration:F.duration,easing:F.easing})}}}getRect(e,r){const n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,l=n.top+window.pageYOffset;return[i,l,i+r[0],l+r[1]]}setPositioning(e){this.set(lo.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),r=this.getPosition();if(!e||!e.isRendered()||!r){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(r),i=e.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(e,r){const n=this.element.style,i=this.getOffset(),l=this.getPositioning();this.setVisible(!0);const c=`${e[0]+i[0]}px`,s=`${e[1]+i[1]}px`;let p="0%",g="0%";l=="bottom-right"||l=="center-right"||l=="top-right"?p="-100%":(l=="bottom-center"||l=="center-center"||l=="top-center")&&(p="-50%"),l=="bottom-left"||l=="bottom-center"||l=="bottom-right"?g="-100%":(l=="center-left"||l=="center-center"||l=="center-right")&&(g="-50%");const _=`translate(${p}, ${g}) translate(${c}, ${s})`;this.rendered.transform_!=_&&(this.rendered.transform_=_,n.transform=_)}getOptions(){return this.options}}const xT="units",lge=[1,2,5],lg=25.4/.28;class JL extends jf{constructor(e){e=e||{};const r=document.createElement("div");r.style.pointerEvents="none",super({element:r,render:e.render,target:e.target}),this.on,this.once,this.un;const n=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+Hh,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(xT,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(xT)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(xT,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const r=e.center,n=e.projection,i=this.getUnits(),l=i=="degrees"?"degrees":"m";let c=Av(n,e.resolution,r,l);const s=this.minWidth_*(this.dpi_||lg)/lg,p=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||lg)/lg:void 0;let g=s*c,_="";if(i=="degrees"){const W=Uh.degrees;g*=W,g<W/60?(_="",c*=3600):g<W?(_="",c*=60):_=""}else if(i=="imperial")g<.9144?(_="in",c/=.0254):g<1609.344?(_="ft",c/=.3048):(_="mi",c/=1609.344);else if(i=="nautical")c/=1852,_="NM";else if(i=="metric")g<1e-6?(_="nm",c*=1e9):g<.001?(_="m",c*=1e6):g<1?(_="mm",c*=1e3):g<1e3?_="m":(_="km",c/=1e3);else if(i=="us")g<.9144?(_="in",c*=39.37):g<1609.344?(_="ft",c/=.30480061):(_="mi",c/=1609.3472);else throw new Error("Invalid units");let x=3*Math.floor(Math.log(s*c)/Math.log(10)),P,A,M,F=0,z,j;for(;;){M=Math.floor(x/3);const W=Math.pow(10,M);if(P=lge[(x%3+3)%3]*W,A=Math.round(P/c),isNaN(A)){this.element.style.display="none",this.renderedVisible_=!1;return}if(p!==void 0&&A>=p){P=F,A=z,M=j;break}else if(A>=s)break;F=P,z=A,j=M,++x}const $=this.scaleBar_?this.createScaleBar(A,P,_):P.toFixed(M<0?-M:0)+" "+_;this.renderedHTML_!=$&&(this.innerElement_.innerHTML=$,this.renderedHTML_=$),this.renderedWidth_!=A&&(this.innerElement_.style.width=A+"px",this.renderedWidth_=A),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,r,n){const i=this.getScaleForResolution(),l=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),c=this.scaleBarSteps_,s=e/c,p=[this.createMarker("absolute")];for(let _=0;_<c;++_){const x=_%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";p.push(`<div><div class="ol-scale-singlebar ${x}" style="width: ${s}px;"></div>`+this.createMarker("relative")+(_%2===0||c===2?this.createStepText(_,e,!1,r,n):"")+"</div>")}return p.push(this.createStepText(c,e,!0,r,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+l+"</div>":"")+p.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,r,n,i,l){const s=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+l),p=e===0?-3:r/this.scaleBarSteps_*-1,g=e===0?0:r/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${p}px;text-align: ${e===0?"left":"center"};min-width: ${g}px;left: ${n?r+"px":"unset"};">`+s+"</div>"}getScaleForResolution(){const e=Av(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),r=this.dpi_||lg,n=1e3/25.4;return e*n*r}render(e){const r=e.frameState;r?this.viewState_=r.viewState:this.viewState_=null,this.updateElement_()}}const cg={VERTICAL:0,HORIZONTAL:1};class cge extends jf{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=cg.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const r=e.className!==void 0?e.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=r+"-thumb "+Hh;const i=this.element;i.className=r+" "+Hh+" "+Bx,i.appendChild(n),i.addEventListener(Dc.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),i.addEventListener(Dc.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),i.addEventListener(Dc.POINTERUP,this.handleDraggerEnd_.bind(this),!1),i.addEventListener(Rr.CLICK,this.handleContainerClick_.bind(this),!1),n.addEventListener(Rr.CLICK,jde,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let r=e.offsetWidth,n=e.offsetHeight;if(r===0&&n===0)return this.sliderInitialized_=!1;const i=getComputedStyle(e);r-=parseFloat(i.paddingRight)+parseFloat(i.paddingLeft),n-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);const l=e.firstElementChild,c=getComputedStyle(l),s=l.offsetWidth+parseFloat(c.marginRight)+parseFloat(c.marginLeft),p=l.offsetHeight+parseFloat(c.marginTop)+parseFloat(c.marginBottom);return this.thumbSize_=[s,p],r>n?(this.direction_=cg.HORIZONTAL,this.widthLimit_=r-s):(this.direction_=cg.VERTICAL,this.heightLimit_=n-p),this.sliderInitialized_=!0}handleContainerClick_(e){const r=this.getMap().getView(),n=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(n),l=r.getConstrainedZoom(r.getZoomForResolution(i));r.animateInternal({zoom:l,duration:this.duration_,easing:od})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const r=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(r.style.left),this.startY_=e.clientY-parseFloat(r.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const n=this.handleDraggerDrag_,i=this.handleDraggerEnd_,l=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(en(l,Dc.POINTERMOVE,n,this),en(l,Dc.POINTERUP,i,this))}}}handleDraggerDrag_(e){if(this.dragging_){const r=e.clientX-this.startX_,n=e.clientY-this.startY_,i=this.getRelativePosition_(r,n);this.currentResolution_=this.getResolutionForPosition_(i),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(Rn),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const r=this.getPositionForResolution_(e),n=this.element.firstElementChild;this.direction_==cg.HORIZONTAL?n.style.left=this.widthLimit_*r+"px":n.style.top=this.heightLimit_*r+"px"}getRelativePosition_(e,r){let n;return this.direction_===cg.HORIZONTAL?n=e/this.widthLimit_:n=r/this.heightLimit_,qn(n,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const r=this.getMap().getView().getValueForResolutionFunction();return qn(1-r(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const r=e.frameState.viewState.resolution;this.currentResolution_=r,this.setThumbPosition_(r)}}function WL(t){const e=Math.abs(t),r=Math.floor(e),n=(e-r)*60,i=Math.floor(n),l=(n-i)*60;return{d:r,m:i,s:l}}function uge(t,e){const r=t>=0?"N":"S",n=e>=0?"E":"W",{d:i,m:l,s:c}=WL(t),{d:s,m:p,s:g}=WL(e);return`${String(i).padStart(2,"0")} ${String(l).padStart(2,"0")} ${c.toFixed(2).padStart(5,"0")}${r} ${String(s).padStart(3,"0")} ${String(p).padStart(2,"0")} ${g.toFixed(2).padStart(5,"0")}${n}`}function hge(t,e,r=4){const n=c=>Math.abs(c).toFixed(r),i=t>=0?"N":"S",l=e>=0?"E":"W";return`${n(t)}${i} ${n(e)}${l}`}const kc=class kc extends jf{constructor(r={}){const n=document.createElement("div");n.className=`${r.className??"em-map__location-dms"} ol-unselectable ol-control`;super({element:n});xr(this,"el");xr(this,"mapRef");xr(this,"mode");xr(this,"source");xr(this,"latLonDecimalPlaces");xr(this,"onMoveEnd",()=>{if(!this.mapRef)return;const r=this.mapRef.getView().getCenter();if(!r)return;const[n,i]=bf(r,kc.PROJ_IN,kc.PROJ_OUT);this.el.textContent=this.format(i,n)});xr(this,"onPointerMove",r=>{if(!r?.coordinate)return;const[n,i]=bf(r.coordinate,kc.PROJ_IN,kc.PROJ_OUT);this.el.textContent=this.format(i,n)});this.el=n,this.mode=r.mode??"latlon",this.source=r.source??"pointer",this.latLonDecimalPlaces=r.latLonDecimalPlaces??5}setMap(r){this.mapRef&&(this.mapRef.un("moveend",this.onMoveEnd),this.mapRef.un("pointermove",this.onPointerMove)),super.setMap(r),this.mapRef=r??void 0,r&&(this.source==="pointer"?r.on("pointermove",this.onPointerMove):(r.on("moveend",this.onMoveEnd),this.onMoveEnd()))}getElement(){return this.el}getText(){return this.el.textContent??""}format(r,n){return this.mode==="dms"?uge(r,n):hge(r,n,this.latLonDecimalPlaces)}};xr(kc,"PROJ_IN","EPSG:3857"),xr(kc,"PROJ_OUT","EPSG:4326");let uC=kc;class Hx extends la{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const r=e;this.setGeometry(r)}else{const r=e;this.setProperties(r)}}clone(){const e=new Hx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const r=this.getGeometry();r&&e.setGeometry(r.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Rn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=en(e,Rr.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?dge(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function dge(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(fn(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}function Fv(t,e,r,n,i,l,c){let s,p;const g=(r-e)/n;if(g===1)s=e;else if(g===2)s=e,p=i;else if(g!==0){let _=t[e],x=t[e+1],P=0;const A=[0];for(let z=e+n;z<r;z+=n){const j=t[z],$=t[z+1];P+=Math.sqrt((j-_)*(j-_)+($-x)*($-x)),A.push(P),_=j,x=$}const M=i*P,F=Dde(A,M);F<0?(p=(M-A[-F-2])/(A[-F-1]-A[-F-2]),s=e+(-F-2)*n):s=e+F*n}c=c>1?c:2,l=l||new Array(c);for(let _=0;_<c;++_)l[_]=s===void 0?NaN:p===void 0?t[s+_]:is(t[s+_],t[s+n+_],p);return l}function hC(t,e,r,n,i,l){if(r==e)return null;let c;if(i<t[e+n-1])return l?(c=t.slice(e,e+n),c[n-1]=i,c):null;if(t[r-1]<i)return l?(c=t.slice(r-n,r),c[n-1]=i,c):null;if(i==t[e+n-1])return t.slice(e,e+n);let s=e/n,p=r/n;for(;s<p;){const P=s+p>>1;i<t[(P+1)*n-1]?p=P:s=P+1}const g=t[s*n-1];if(i==g)return t.slice((s-1)*n,(s-1)*n+n);const _=t[(s+1)*n-1],x=(i-g)/(_-g);c=[];for(let P=0;P<n-1;++P)c.push(is(t[(s-1)*n+P],t[s*n+P],x));return c.push(i),c}function pge(t,e,r,n,i,l,c){if(c)return hC(t,e,r[r.length-1],n,i,l);let s;if(i<t[n-1])return l?(s=t.slice(0,n),s[n-1]=i,s):null;if(t[t.length-1]<i)return l?(s=t.slice(t.length-n),s[n-1]=i,s):null;for(let p=0,g=r.length;p<g;++p){const _=r[p];if(e!=_){if(i<t[e+n-1])return null;if(i<=t[_-1])return hC(t,e,_,n,i,!1);e=_}}return null}function VM(t,e,r,n){let i=t[e],l=t[e+1],c=0;for(let s=e+n;s<r;s+=n){const p=t[s],g=t[s+1];c+=Math.sqrt((p-i)*(p-i)+(g-l)*(g-l)),i=p,l=g}return c}class Wh extends sd{constructor(e,r){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,r!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(r,e):this.setCoordinates(e,r)}appendCoordinate(e){Da(this.flatCoordinates,e),this.changed()}clone(){const e=new Wh(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,r,n,i){return i<id(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,r,n,i))}forEachSegment(e){return FH(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,r){return this.layout!="XYM"&&this.layout!="XYZM"?null:(r=r!==void 0?r:!1,hC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r))}getCoordinates(){return jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,r){return Fv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,this.stride)}getLength(){return VM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const r=[];return r.length=zx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,0),new Wh(r,"XY")}getType(){return"LineString"}intersectsExtent(e){return jx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fx(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ry extends sd{constructor(e,r,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,r);else if(r!==void 0&&n)this.setFlatCoordinates(r,e),this.ends_=n;else{const i=e,l=[],c=[];for(let p=0,g=i.length;p<g;++p){const _=i[p];Da(l,_.getFlatCoordinates()),c.push(l.length)}const s=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(s,l),this.ends_=c}}appendLineString(e){Da(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ry(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,r,n,i){return i<id(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vM(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),wM(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,r,n,i))}getCoordinateAtM(e,r,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(r=r!==void 0?r:!1,n=n!==void 0?n:!1,pge(this.flatCoordinates,0,this.ends_,this.stride,e,r,n))}getCoordinates(){return xy(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Wh(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,r=this.ends_,n=this.layout,i=[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=r[c],g=new Wh(e.slice(l,p),n);i.push(g),l=p}return i}getLength(){const e=this.ends_;let r=0,n=0;for(let i=0,l=e.length;i<l;++i)n+=VM(this.flatCoordinates,r,e[i],this.stride),r=e[i];return n}getFlatMidpoints(){const e=[],r=this.flatCoordinates;let n=0;const i=this.ends_,l=this.stride;for(let c=0,s=i.length;c<s;++c){const p=i[c],g=Fv(r,n,p,l,.5);Da(e,g),n=p}return e}getSimplifiedGeometryInternal(e){const r=[],n=[];return r.length=DH(this.flatCoordinates,0,this.ends_,this.stride,e,r,0,n),new Ry(r,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return sfe(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,r){this.setLayout(r,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=h_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class g_ extends sd{constructor(e,r){super(),r&&!Array.isArray(e[0])?this.setFlatCoordinates(r,e):this.setCoordinates(e,r)}appendPoint(e){Da(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new g_(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,r,n,i){if(i<id(this.getExtent(),e,r))return i;const l=this.flatCoordinates,c=this.stride;for(let s=0,p=l.length;s<p;s+=c){const g=wh(e,r,l[s],l[s+1]);if(g<i){i=g;for(let _=0;_<c;++_)n[_]=l[s+_];n.length=c}}return i}getCoordinates(){return jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const r=this.flatCoordinates.length/this.stride;return e<0||r<=e?null:new su(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,r=this.layout,n=this.stride,i=[];for(let l=0,c=e.length;l<c;l+=n){const s=new su(e.slice(l,l+n),r);i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const r=this.flatCoordinates,n=this.stride;for(let i=0,l=r.length;i<l;i+=n){const c=r[i],s=r[i+1];if(lM(e,c,s))return!0}return!1}setCoordinates(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fx(this.flatCoordinates,0,e,this.stride),this.changed()}}function bJ(t,e,r,n){const i=[];let l=Ns();for(let c=0,s=r.length;c<s;++c){const p=r[c];l=cM(t,e,p[0],n),i.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=p[p.length-1]}return i}class Iy extends sd{constructor(e,r,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const i=e,l=[],c=[];for(let s=0,p=i.length;s<p;++s){const g=i[s],_=l.length,x=g.getEnds();for(let P=0,A=x.length;P<A;++P)x[P]+=_;Da(l,g.getFlatCoordinates()),c.push(x)}r=i.length===0?this.getLayout():i[0].getLayout(),e=l,n=c}r!==void 0&&n?(this.setFlatCoordinates(r,e),this.endss_=n):this.setCoordinates(e,r)}appendPolygon(e){let r;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),r=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Da(this.flatCoordinates,e.getFlatCoordinates()),r=e.getEnds().slice();for(let i=0,l=r.length;i<l;++i)r[i]+=n}this.endss_.push(r),this.changed()}clone(){const e=this.endss_.length,r=new Array(e);for(let i=0;i<e;++i)r[i]=this.endss_[i].slice();const n=new Iy(this.flatCoordinates.slice(),this.layout,r);return n.applyProperties(this),n}closestPointXY(e,r,n,i){return i<id(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qpe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),efe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,r,n,i))}containsXY(e,r){return ofe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,r)}getArea(){return Xpe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let r;return e!==void 0?(r=this.getOrientedFlatCoordinates().slice(),nC(r,0,this.endss_,this.stride,e)):r=this.flatCoordinates,rC(r,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=bJ(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=NH(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new g_(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;BH(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=nC(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const r=[],n=[];return r.length=nfe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),r,0,n),new Iy(r,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let r;if(e===0)r=0;else{const l=this.endss_[e-1];r=l[l.length-1]}const n=this.endss_[e].slice(),i=n[n.length-1];if(r!==0)for(let l=0,c=n.length;l<c;++l)n[l]-=r;return new Fl(this.flatCoordinates.slice(r,i),this.layout,n)}getPolygons(){const e=this.layout,r=this.flatCoordinates,n=this.endss_,i=[];let l=0;for(let c=0,s=n.length;c<s;++c){const p=n[c].slice(),g=p[p.length-1];if(l!==0)for(let x=0,P=p.length;x<P;++x)p[x]-=l;const _=new Fl(r.slice(l,g),e,p);i.push(_),l=g}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return afe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,r){this.setLayout(r,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=LH(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}class vJ{drawCustom(e,r,n,i,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,r,n){}drawFeature(e,r,n){}drawGeometryCollection(e,r,n){}drawLineString(e,r,n){}drawMultiLineString(e,r,n){}drawMultiPoint(e,r,n){}drawMultiPolygon(e,r,n){}drawPoint(e,r,n){}drawPolygon(e,r,n){}drawText(e,r,n){}setFillStrokeStyle(e,r){}setImageStyle(e,r){}setTextStyle(e,r){}}const fr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},G0=[fr.FILL],$c=[fr.STROKE],fh=[fr.BEGIN_PATH],ZL=[fr.CLOSE_PATH];class y_ extends vJ{constructor(e,r,n,i){super(),this.tolerance=e,this.maxExtent=r,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const r=this.pixelRatio;return r==1?e:e.map(function(n){return n*r})}appendFlatPointCoordinates(e,r){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,l=this.coordinates;let c=l.length;for(let s=0,p=e.length;s<p;s+=r)i[0]=e[s],i[1]=e[s+1],gf(n,i)&&(l[c++]=i[0],l[c++]=i[1]);return c}appendFlatLineCoordinates(e,r,n,i,l,c){const s=this.coordinates;let p=s.length;const g=this.getBufferedMaxExtent();c&&(r+=i);let _=e[r],x=e[r+1];const P=this.tmpCoordinate_;let A=!0,M,F,z;for(M=r+i;M<n;M+=i)P[0]=e[M],P[1]=e[M+1],z=W2(g,P),z!==F?(A&&(s[p++]=_,s[p++]=x,A=!1),s[p++]=P[0],s[p++]=P[1]):z===$i.INTERSECTING?(s[p++]=P[0],s[p++]=P[1],A=!1):A=!0,_=P[0],x=P[1],F=z;return(l&&A||M===r+i)&&(s[p++]=_,s[p++]=x),p}drawCustomCoordinates_(e,r,n,i,l){for(let c=0,s=n.length;c<s;++c){const p=n[c],g=this.appendFlatLineCoordinates(e,r,p,i,!1,!1);l.push(g),r=p}return r}drawCustom(e,r,n,i,l){this.beginGeometry(e,r,l);const c=e.getType(),s=e.getStride(),p=this.coordinates.length;let g,_,x,P,A;switch(c){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),P=[];const M=e.getEndss();A=0;for(let F=0,z=M.length;F<z;++F){const j=[];A=this.drawCustomCoordinates_(g,A,M[F],s,j),P.push(j)}this.instructions.push([fr.CUSTOM,p,P,e,n,rC,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,P,e,i||n,rC,l]);break;case"Polygon":case"MultiLineString":x=[],g=c=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),A=this.drawCustomCoordinates_(g,0,e.getEnds(),s,x),this.instructions.push([fr.CUSTOM,p,x,e,n,xy,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,x,e,i||n,xy,l]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),_=this.appendFlatLineCoordinates(g,0,g.length,s,!1,!1),this.instructions.push([fr.CUSTOM,p,_,e,n,jc,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,_,e,i||n,jc,l]);break;case"MultiPoint":g=e.getFlatCoordinates(),_=this.appendFlatPointCoordinates(g,s),_>p&&(this.instructions.push([fr.CUSTOM,p,_,e,n,jc,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,_,e,i||n,jc,l]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),_=this.coordinates.length,this.instructions.push([fr.CUSTOM,p,_,e,n,void 0,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,_,e,i||n,void 0,l]);break}this.endGeometry(r)}beginGeometry(e,r,n){this.beginGeometryInstruction1_=[fr.BEGIN_GEOMETRY,r,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fr.BEGIN_GEOMETRY,r,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let r;const n=e.length;let i,l,c=-1;for(r=0;r<n;++r)i=e[r],l=i[0],l==fr.END_GEOMETRY?c=r:l==fr.BEGIN_GEOMETRY&&(i[2]=r,Fde(this.hitDetectionInstructions,c,r),c=-1)}fillStyleToState(e,r={}){if(e){const n=e.getColor();r.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,r.fillStyle=Ia(n||Mo)}else r.fillStyle=void 0;return r}strokeStyleToState(e,r={}){if(e){const n=e.getColor();r.strokeStyle=Ia(n||Ty);const i=e.getLineCap();r.lineCap=i!==void 0?i:xf;const l=e.getLineDash();r.lineDash=l?l.slice():Il;const c=e.getLineDashOffset();r.lineDashOffset=c||Ml;const s=e.getLineJoin();r.lineJoin=s!==void 0?s:wf;const p=e.getWidth();r.lineWidth=p!==void 0?p:Cy;const g=e.getMiterLimit();r.miterLimit=g!==void 0?g:Ey,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0;return r}setFillStrokeStyle(e,r){const n=this.state;this.fillStyleToState(e,n),this.strokeStyleToState(r,n)}createFill(e){const r=e.fillStyle,n=[fr.SET_FILL_STYLE,r];return typeof r!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,r){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(this.instructions.push(r.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,r){const n=e.strokeStyle,i=e.lineCap,l=e.lineDash,c=e.lineDashOffset,s=e.lineJoin,p=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=i||l!=e.currentLineDash&&!du(e.currentLineDash,l)||e.currentLineDashOffset!=c||e.currentLineJoin!=s||e.currentLineWidth!=p||e.currentMiterLimit!=g)&&(r.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=i,e.currentLineDash=l,e.currentLineDashOffset=c,e.currentLineJoin=s,e.currentLineWidth=p,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const r=[fr.END_GEOMETRY,e];this.instructions.push(r),this.hitDetectionInstructions.push(r)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=hH(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Xc(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class fge extends y_{constructor(e,r,n,i){super(e,r,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,r,n){if(!this.image_||this.maxExtent&&!gf(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,r,n);const i=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length,s=this.appendFlatPointCoordinates(i,l);this.instructions.push([fr.DRAW_IMAGE,c,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,c,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(r)}drawMultiPoint(e,r,n){if(!this.image_)return;this.beginGeometry(e,r,n);const i=e.getFlatCoordinates(),l=[];for(let p=0,g=i.length;p<g;p+=e.getStride())(!this.maxExtent||gf(this.maxExtent,i.slice(p,p+2)))&&l.push(i[p],i[p+1]);const c=this.coordinates.length,s=this.appendFlatPointCoordinates(l,2);this.instructions.push([fr.DRAW_IMAGE,c,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,c,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(r)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,r){const n=e.getAnchor(),i=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=r}}class mge extends y_{constructor(e,r,n,i){super(e,r,n,i)}drawFlatCoordinates_(e,r,n,i){const l=this.coordinates.length,c=this.appendFlatLineCoordinates(e,r,n,i,!1,!1),s=[fr.MOVE_TO_LINE_TO,l,c];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}drawLineString(e,r,n){const i=this.state,l=i.strokeStyle,c=i.lineWidth;if(l===void 0||c===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,r,n),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Il,Ml],fh);const s=e.getFlatCoordinates(),p=e.getStride();this.drawFlatCoordinates_(s,0,s.length,p),this.hitDetectionInstructions.push($c),this.endGeometry(r)}drawMultiLineString(e,r,n){const i=this.state,l=i.strokeStyle,c=i.lineWidth;if(l===void 0||c===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,r,n),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Il,Ml],fh);const s=e.getEnds(),p=e.getFlatCoordinates(),g=e.getStride();let _=0;for(let x=0,P=s.length;x<P;++x)_=this.drawFlatCoordinates_(p,_,s[x],g);this.hitDetectionInstructions.push($c),this.endGeometry(r)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push($c),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push($c),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(fh)}}class KL extends y_{constructor(e,r,n,i){super(e,r,n,i)}drawFlatCoordinatess_(e,r,n,i){const l=this.state,c=l.fillStyle!==void 0,s=l.strokeStyle!==void 0,p=n.length;this.instructions.push(fh),this.hitDetectionInstructions.push(fh);for(let g=0;g<p;++g){const _=n[g],x=this.coordinates.length,P=this.appendFlatLineCoordinates(e,r,_,i,!0,!s),A=[fr.MOVE_TO_LINE_TO,x,P];this.instructions.push(A),this.hitDetectionInstructions.push(A),s&&(this.instructions.push(ZL),this.hitDetectionInstructions.push(ZL)),r=_}return c&&(this.instructions.push(G0),this.hitDetectionInstructions.push(G0)),s&&(this.instructions.push($c),this.hitDetectionInstructions.push($c)),r}drawCircle(e,r,n){const i=this.state,l=i.fillStyle,c=i.strokeStyle;if(l===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Mo]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Il,Ml]);const s=e.getFlatCoordinates(),p=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,p,!1,!1);const _=[fr.CIRCLE,g];this.instructions.push(fh,_),this.hitDetectionInstructions.push(fh,_),i.fillStyle!==void 0&&(this.instructions.push(G0),this.hitDetectionInstructions.push(G0)),i.strokeStyle!==void 0&&(this.instructions.push($c),this.hitDetectionInstructions.push($c)),this.endGeometry(r)}drawPolygon(e,r,n){const i=this.state,l=i.fillStyle,c=i.strokeStyle;if(l===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Mo]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Il,Ml]);const s=e.getEnds(),p=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(p,0,s,g),this.endGeometry(r)}drawMultiPolygon(e,r,n){const i=this.state,l=i.fillStyle,c=i.strokeStyle;if(l===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Mo]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Il,Ml]);const s=e.getEndss(),p=e.getOrientedFlatCoordinates(),g=e.getStride();let _=0;for(let x=0,P=s.length;x<P;++x)_=this.drawFlatCoordinatess_(p,_,s[x],g);this.endGeometry(r)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const r=this.coordinates;for(let n=0,i=r.length;n<i;++n)r[n]=rh(r[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function gge(t,e,r,n,i){const l=[];let c=r,s=0,p=e.slice(r,2);for(;s<t&&c+i<n;){const[g,_]=p.slice(-2),x=e[c+i],P=e[c+i+1],A=Math.sqrt((x-g)*(x-g)+(P-_)*(P-_));if(s+=A,s>=t){const M=(t-s+A)/A,F=is(g,x,M),z=is(_,P,M);p.push(F,z),l.push(p),p=[F,z],s==t&&(c+=i),s=0}else if(s<t)p.push(e[c+i],e[c+i+1]),c+=i;else{const M=A-s,F=is(g,x,M/A),z=is(_,P,M/A);p.push(F,z),l.push(p),p=[F,z],s=0,c+=i}}return s>0&&l.push(p),l}function yge(t,e,r,n,i){let l=r,c=r,s=0,p=0,g=r,_,x,P,A,M,F,z,j,$,W;for(x=r;x<n;x+=i){const X=e[x],te=e[x+1];M!==void 0&&($=X-M,W=te-F,A=Math.sqrt($*$+W*W),z!==void 0&&(p+=P,_=Math.acos((z*$+j*W)/(P*A)),_>t&&(p>s&&(s=p,l=g,c=x),p=0,g=x-i)),P=A,z=$,j=W),M=X,F=te}return p+=A,p>s?[g,x]:[l,c]}const zv={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class _ge extends y_{constructor(e,r,n,i){super(e,r,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Mo]={fillStyle:Mo},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,r,n){const i=this.textFillState_,l=this.textStrokeState_,c=this.textState_;if(this.text_===""||!c||!i&&!l)return;const s=this.coordinates;let p=s.length;const g=e.getType();let _=null,x=e.getStride();if(c.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!ui(this.maxExtent,e.getExtent()))return;let P;if(_=e.getFlatCoordinates(),g=="LineString")P=[_.length];else if(g=="MultiLineString")P=e.getEnds();else if(g=="Polygon")P=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const z=e.getEndss();P=[];for(let j=0,$=z.length;j<$;++j)P.push(z[j][0])}this.beginGeometry(e,r,n);const A=c.repeat,M=A?void 0:c.textAlign;let F=0;for(let z=0,j=P.length;z<j;++z){let $;A?$=gge(A*this.resolution,_,F,P[z],x):$=[_.slice(F,P[z])];for(let W=0,X=$.length;W<X;++W){const te=$[W];let ne=0,Z=te.length;if(M==null){const K=yge(c.maxAngle,te,0,te.length,2);ne=K[0],Z=K[1]}for(let K=ne;K<Z;K+=x)s.push(te[K],te[K+1]);const U=s.length;F=P[z],this.drawChars_(p,U),p=U}}this.endGeometry(r)}else{let P=c.overflow?null:[];switch(g){case"Point":case"MultiPoint":_=e.getFlatCoordinates();break;case"LineString":_=e.getFlatMidpoint();break;case"Circle":_=e.getCenter();break;case"MultiLineString":_=e.getFlatMidpoints(),x=2;break;case"Polygon":_=e.getFlatInteriorPoint(),c.overflow||P.push(_[2]/this.resolution),x=3;break;case"MultiPolygon":const X=e.getFlatInteriorPoints();_=[];for(let te=0,ne=X.length;te<ne;te+=3)c.overflow||P.push(X[te+2]/this.resolution),_.push(X[te],X[te+1]);if(_.length===0)return;x=2;break}const A=this.appendFlatPointCoordinates(_,x);if(A===p)return;if(P&&(A-p)/2!==_.length/x){let X=p/2;P=P.filter((te,ne)=>{const Z=s[(X+ne)*2]===_[ne*x]&&s[(X+ne)*2+1]===_[ne*x+1];return Z||--X,Z})}this.saveTextStates_();const M=c.backgroundFill?this.createFill(this.fillStyleToState(c.backgroundFill)):null,F=c.backgroundStroke?this.createStroke(this.strokeStyleToState(c.backgroundStroke)):null;this.beginGeometry(e,r,n);let z=c.padding;if(z!=ph&&(c.scale[0]<0||c.scale[1]<0)){let X=c.padding[0],te=c.padding[1],ne=c.padding[2],Z=c.padding[3];c.scale[0]<0&&(te=-te,Z=-Z),c.scale[1]<0&&(X=-X,ne=-ne),z=[X,te,ne,Z]}const j=this.pixelRatio;this.instructions.push([fr.DRAW_IMAGE,p,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,z==ph?ph:z.map(function(X){return X*j}),M,F,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,P]);const $=1/j,W=M?M.slice(0):null;W&&(W[1]=Mo),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,p,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[$,$],NaN,this.declutterMode_,this.declutterImageWithText_,z,W,F,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Mo:this.fillKey_,this.textOffsetX_,this.textOffsetY_,P]),this.endGeometry(r)}}saveTextStates_(){const e=this.textStrokeState_,r=this.textState_,n=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:r.font,textAlign:r.textAlign||Sy,justify:r.justify,textBaseline:r.textBaseline||Lv,scale:r.scale});const c=this.fillKey_;n&&(c in this.fillStates||(this.fillStates[c]={fillStyle:n.fillStyle}))}drawChars_(e,r){const n=this.textStrokeState_,i=this.textState_,l=this.strokeKey_,c=this.textKey_,s=this.fillKey_;this.saveTextStates_();const p=this.pixelRatio,g=zv[i.textBaseline],_=this.textOffsetY_*p,x=this.text_,P=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([fr.DRAW_CHARS,e,r,g,i.overflow,s,i.maxAngle,p,_,l,P*p,x,c,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fr.DRAW_CHARS,e,r,g,i.overflow,s&&Mo,i.maxAngle,p,_,l,P*p,x,c,1/p,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,r){let n,i,l;if(!e)this.text_="";else{const c=e.getFill();c?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Ia(c.getColor()||Mo)):(i=null,this.textFillState_=i);const s=e.getStroke();if(!s)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const F=s.getLineDash(),z=s.getLineDashOffset(),j=s.getWidth(),$=s.getMiterLimit();l.lineCap=s.getLineCap()||xf,l.lineDash=F?F.slice():Il,l.lineDashOffset=z===void 0?Ml:z,l.lineJoin=s.getLineJoin()||wf,l.lineWidth=j===void 0?Cy:j,l.miterLimit=$===void 0?Ey:$,l.strokeStyle=Ia(s.getColor()||Ty)}n=this.textState_;const p=e.getFont()||aJ;Dme(p);const g=e.getScaleArray();n.overflow=e.getOverflow(),n.font=p,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Lv,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||ph,n.scale=g===void 0?[1,1]:g;const _=e.getOffsetX(),x=e.getOffsetY(),P=e.getRotateWithView(),A=e.getKeepUpright(),M=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=_===void 0?0:_,this.textOffsetY_=x===void 0?0:x,this.textRotateWithView_=P===void 0?!1:P,this.textKeepUpright_=A===void 0?!0:A,this.textRotation_=M===void 0?0:M,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Nr(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Nr(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=r}}const bge={Circle:KL,Default:y_,Image:fge,LineString:mge,Polygon:KL,Text:_ge};class xJ{constructor(e,r,n,i){this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const r in this.buildersByZIndex_){e[r]=e[r]||{};const n=this.buildersByZIndex_[r];for(const i in n){const l=n[i].finish();e[r][i]=l}}return e}getBuilder(e,r){const n=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);let l=i[r];if(l===void 0){const c=bge[r];l=new c(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[r]=l}return l}}function vge(t,e,r,n,i,l,c,s,p,g,_,x,P=!0){let A=t[e],M=t[e+1],F=0,z=0,j=0,$=0;function W(){F=A,z=M,e+=n,A=t[e],M=t[e+1],$+=j,j=Math.sqrt((A-F)*(A-F)+(M-z)*(M-z))}do W();while(e<r-n&&$+j<l);let X=j===0?0:(l-$)/j;const te=is(F,A,X),ne=is(z,M,X),Z=e-n,U=$,K=l+s*p(g,i,_);for(;e<r-n&&$+j<K;)W();X=j===0?0:(K-$)/j;const he=is(F,A,X),ue=is(z,M,X);let we=!1;if(P)if(x){const xe=[te,ne,he,ue];IH(xe,0,4,2,x,xe,xe),we=xe[0]>xe[2]}else we=te>he;const Ie=Math.PI,ee=[],fe=Z+n===e;e=Z,j=0,$=U,A=t[e],M=t[e+1];let ve;if(fe){W(),ve=Math.atan2(M-z,A-F),we&&(ve+=ve>0?-Ie:Ie);const xe=(he+te)/2,Xe=(ue+ne)/2;return ee[0]=[xe,Xe,(K-l)/2,ve,i],ee}i=i.replace(/\n/g," ");for(let xe=0,Xe=i.length;xe<Xe;){W();let Ke=Math.atan2(M-z,A-F);if(we&&(Ke+=Ke>0?-Ie:Ie),ve!==void 0){let Pt=Ke-ve;if(Pt+=Pt>Ie?-2*Ie:Pt<-Ie?2*Ie:0,Math.abs(Pt)>c)return null}ve=Ke;const Ze=xe;let bt=0;for(;xe<Xe;++xe){const Pt=we?Xe-xe-1:xe,dt=s*p(g,i[Pt],_);if(e+n<r&&$+j<l+bt+dt/2)break;bt+=dt}if(xe===Ze)continue;const qe=we?i.substring(Xe-Ze,Xe-xe):i.substring(Ze,xe);X=j===0?0:(l+bt/2-$)/j;const kt=is(F,A,X),Jt=is(z,M,X);ee.push([kt,Jt,bt/2,Ke,qe]),l+=bt}return ee}class UM{constructor(){xr(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Mv(),{get:(e,r)=>{if(typeof Mv()[r]=="function")return this.push_(r),this.pushMethodArgs_},set:(e,r,n)=>(this.push_(r,n),!0)})}push_(...e){const r=this.instructions_,n=this.zIndex+this.offset_;r[n]||(r[n]=[]),r[n].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(r=>{for(let n=0,i=r.length;n<i;++n){const l=r[n];if(typeof l=="function"){l(e);continue}const c=r[++n];if(typeof e[l]=="function")e[l](...c);else{if(typeof c=="function"){e[l]=c(e);continue}e[l]=c}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const fp=Ns(),bc=[],pl=[],fl=[],vc=[];function YL(t){return t[3].declutterBox}const XL=new RegExp("[-----]");function wT(t,e){return e==="start"?e=XL.test(t)?"right":"left":e==="end"&&(e=XL.test(t)?"left":"right"),zv[e]}function xge(t,e,r){return r>0&&t.push(`
`,""),t.push(e,""),t}function wge(t,e,r){return r%2===0&&(t+=e),t}class Ege{constructor(e,r,n,i,l){this.overlaps=n,this.pixelRatio=r,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Os(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new UM:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,r,n,i){const l=e+r+n+i;if(this.labels_[l])return this.labels_[l];const c=i?this.strokeStates[i]:null,s=n?this.fillStates[n]:null,p=this.textStates[r],g=this.pixelRatio,_=[p.scale[0]*g,p.scale[1]*g],x=p.justify?zv[p.justify]:wT(Array.isArray(e)?e[0]:e,p.textAlign||Sy),P=i&&c.lineWidth?c.lineWidth:0,A=Array.isArray(e)?e:String(e).split(`
`).reduce(xge,[]),{width:M,height:F,widths:z,heights:j,lineWidths:$}=Fme(p,A),W=M+P,X=[],te=(W+2)*_[0],ne=(F+P)*_[1],Z={width:te<0?Math.floor(te):Math.ceil(te),height:ne<0?Math.floor(ne):Math.ceil(ne),contextInstructions:X};(_[0]!=1||_[1]!=1)&&X.push("scale",_),i&&(X.push("strokeStyle",c.strokeStyle),X.push("lineWidth",P),X.push("lineCap",c.lineCap),X.push("lineJoin",c.lineJoin),X.push("miterLimit",c.miterLimit),X.push("setLineDash",[c.lineDash]),X.push("lineDashOffset",c.lineDashOffset)),n&&X.push("fillStyle",s.fillStyle),X.push("textBaseline","middle"),X.push("textAlign","center");const U=.5-x;let K=x*W+U*P;const he=[],ue=[];let we=0,Ie=0,ee=0,fe=0,ve;for(let xe=0,Xe=A.length;xe<Xe;xe+=2){const Ke=A[xe];if(Ke===`
`){Ie+=we,we=0,K=x*W+U*P,++fe;continue}const Ze=A[xe+1]||p.font;Ze!==ve&&(i&&he.push("font",Ze),n&&ue.push("font",Ze),ve=Ze),we=Math.max(we,j[ee]);const bt=[Ke,K+U*z[ee]+x*(z[ee]-$[fe]),.5*(P+we)+Ie];K+=z[ee],i&&he.push("strokeText",bt),n&&ue.push("fillText",bt),++ee}return Array.prototype.push.apply(X,he),Array.prototype.push.apply(X,ue),this.labels_[l]=Z,Z}replayTextBackground_(e,r,n,i,l,c,s){e.beginPath(),e.moveTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,l),e.lineTo.apply(e,r),c&&(this.alignAndScaleFill_=c[2],e.fillStyle=c[1],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())}calculateImageOrLabelDimensions_(e,r,n,i,l,c,s,p,g,_,x,P,A,M,F,z){s*=P[0],p*=P[1];let j=n-s,$=i-p;const W=l+g>e?e-g:l,X=c+_>r?r-_:c,te=M[3]+W*P[0]+M[1],ne=M[0]+X*P[1]+M[2],Z=j-M[3],U=$-M[0];(F||x!==0)&&(bc[0]=Z,vc[0]=Z,bc[1]=U,pl[1]=U,pl[0]=Z+te,fl[0]=pl[0],fl[1]=U+ne,vc[1]=fl[1]);let K;return x!==0?(K=Nl(Os(),n,i,1,1,x,-n,-i),Di(K,bc),Di(K,pl),Di(K,fl),Di(K,vc),Ll(Math.min(bc[0],pl[0],fl[0],vc[0]),Math.min(bc[1],pl[1],fl[1],vc[1]),Math.max(bc[0],pl[0],fl[0],vc[0]),Math.max(bc[1],pl[1],fl[1],vc[1]),fp)):Ll(Math.min(Z,Z+te),Math.min(U,U+ne),Math.max(Z,Z+te),Math.max(U,U+ne),fp),A&&(j=Math.round(j),$=Math.round($)),{drawImageX:j,drawImageY:$,drawImageW:W,drawImageH:X,originX:g,originY:_,declutterBox:{minX:fp[0],minY:fp[1],maxX:fp[2],maxY:fp[3],value:z},canvasTransform:K,scale:P}}replayImageOrLabel_(e,r,n,i,l,c,s){const p=!!(c||s),g=i.declutterBox,_=s?s[2]*i.scale[0]/2:0;return g.minX-_<=r[0]&&g.maxX+_>=0&&g.minY-_<=r[1]&&g.maxY+_>=0&&(p&&this.replayTextBackground_(e,bc,pl,fl,vc,c,s),zme(e,i.canvasTransform,l,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const r=this.alignAndScaleFill_;if(r){const n=Di(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(n[0]%i,n[1]%i),r!==1&&e.scale(r,r),e.rotate(this.viewRotation_)}e.fill(),r&&e.restore()}setStrokeStyle_(e,r){e.strokeStyle=r[1],r[1]&&(e.lineWidth=r[2],e.lineCap=r[3],e.lineJoin=r[4],e.miterLimit=r[5],e.lineDashOffset=r[7],e.setLineDash(r[6]))}drawLabelWithPointPlacement_(e,r,n,i){const l=this.textStates[r],c=this.createLabel(e,r,i,n),s=this.strokeStates[n],p=this.pixelRatio,g=wT(Array.isArray(e)?e[0]:e,l.textAlign||Sy),_=zv[l.textBaseline||Lv],x=s&&s.lineWidth?s.lineWidth:0,P=c.width/p-2*l.scale[0],A=g*P+2*(.5-g)*x,M=_*c.height/p+2*(.5-_)*x;return{label:c,anchorX:A,anchorY:M}}execute_(e,r,n,i,l,c,s,p){const g=this.zIndexContext_;let _;this.pixelCoordinates_&&du(n,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=Qc(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),$pe(this.renderedTransform_,n));let x=0;const P=i.length;let A=0,M,F,z,j,$,W,X,te,ne,Z,U,K,he,ue=0,we=0;const Ie=this.coordinateCache_,ee=this.viewRotation_,fe=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,ve={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ee},xe=this.instructions!=i||this.overlaps?0:200;let Xe,Ke,Ze,bt;for(;x<P;){const qe=i[x];switch(qe[0]){case fr.BEGIN_GEOMETRY:Xe=qe[1],bt=qe[3],Xe.getGeometry()?s!==void 0&&!ui(s,bt.getExtent())?x=qe[2]+1:++x:x=qe[2],g&&(g.zIndex=qe[4]);break;case fr.BEGIN_PATH:ue>xe&&(this.fill_(e),ue=0),we>xe&&(e.stroke(),we=0),!ue&&!we&&(e.beginPath(),$=NaN,W=NaN),++x;break;case fr.CIRCLE:A=qe[1];const Jt=_[A],Pt=_[A+1],dt=_[A+2],er=_[A+3],Wt=dt-Jt,ar=er-Pt,_t=Math.sqrt(Wt*Wt+ar*ar);e.moveTo(Jt+_t,Pt),e.arc(Jt,Pt,_t,0,2*Math.PI,!0),++x;break;case fr.CLOSE_PATH:e.closePath(),++x;break;case fr.CUSTOM:A=qe[1],M=qe[2];const Ve=qe[3],pt=qe[4],lt=qe[5];ve.geometry=Ve,ve.feature=Xe,x in Ie||(Ie[x]=[]);const Tt=Ie[x];lt?lt(_,A,M,2,Tt):(Tt[0]=_[A],Tt[1]=_[A+1],Tt.length=2),g&&(g.zIndex=qe[6]),pt(Tt,ve),++x;break;case fr.DRAW_IMAGE:A=qe[1],M=qe[2],ne=qe[3],F=qe[4],z=qe[5];let vt=qe[6];const Dt=qe[7],Yt=qe[8],Bt=qe[9],wr=qe[10];let Vr=qe[11];const Ir=qe[12];let Zr=qe[13];j=qe[14]||"declutter";const yr=qe[15];if(!ne&&qe.length>=20){Z=qe[19],U=qe[20],K=qe[21],he=qe[22];const Nt=this.drawLabelWithPointPlacement_(Z,U,K,he);ne=Nt.label,qe[3]=ne;const Ht=qe[23];F=(Nt.anchorX-Ht)*this.pixelRatio,qe[4]=F;const _r=qe[24];z=(Nt.anchorY-_r)*this.pixelRatio,qe[5]=z,vt=ne.height,qe[6]=vt,Zr=ne.width,qe[13]=Zr}let ur;qe.length>25&&(ur=qe[25]);let lr,nr,mr;qe.length>17?(lr=qe[16],nr=qe[17],mr=qe[18]):(lr=ph,nr=null,mr=null),wr&&fe?Vr+=ee:!wr&&!fe&&(Vr-=ee);let Yr=0;for(;A<M;A+=2){if(ur&&ur[Yr++]<Zr/this.pixelRatio)continue;const Nt=this.calculateImageOrLabelDimensions_(ne.width,ne.height,_[A],_[A+1],Zr,vt,F,z,Yt,Bt,Vr,Ir,l,lr,!!nr||!!mr,Xe),Ht=[e,r,ne,Nt,Dt,nr,mr];if(p){let _r,ut,Lt;if(yr){const jt=M-A;if(!yr[jt]){yr[jt]={args:Ht,declutterMode:j};continue}const Pr=yr[jt];_r=Pr.args,ut=Pr.declutterMode,delete yr[jt],Lt=YL(_r)}let Cr,Kt;if(_r&&(ut!=="declutter"||!p.collides(Lt))&&(Cr=!0),(j!=="declutter"||!p.collides(Nt.declutterBox))&&(Kt=!0),ut==="declutter"&&j==="declutter"){const jt=Cr&&Kt;Cr=jt,Kt=jt}Cr&&(ut!=="none"&&p.insert(Lt),this.replayImageOrLabel_.apply(this,_r)),Kt&&(j!=="none"&&p.insert(Nt.declutterBox),this.replayImageOrLabel_.apply(this,Ht))}else this.replayImageOrLabel_.apply(this,Ht)}++x;break;case fr.DRAW_CHARS:const ke=qe[1],oe=qe[2],ae=qe[3],de=qe[4];he=qe[5];const Te=qe[6],Le=qe[7],je=qe[8];K=qe[9];const Je=qe[10];Z=qe[11],Array.isArray(Z)&&(Z=Z.reduce(wge,"")),U=qe[12];const Fe=[qe[13],qe[13]];j=qe[14]||"declutter";const tt=qe[15],ct=this.textStates[U],it=ct.font,Ot=[ct.scale[0]*Le,ct.scale[1]*Le];let $e;it in this.widths_?$e=this.widths_[it]:($e={},this.widths_[it]=$e);const Xt=VM(_,ke,oe,2),cr=Math.abs(Ot[0])*jL(it,Z,$e);if(de||cr<=Xt){const Nt=this.textStates[U].textAlign,Ht=(Xt-cr)*wT(Z,Nt),_r=vge(_,ke,oe,2,Z,Ht,Te,Math.abs(Ot[0]),jL,it,$e,fe?0:this.viewRotation_,tt);e:if(_r){const ut=[];let Lt,Cr,Kt,jt,Pr;if(K)for(Lt=0,Cr=_r.length;Lt<Cr;++Lt){Pr=_r[Lt],Kt=Pr[4],jt=this.createLabel(Kt,U,"",K),F=Pr[2]+(Ot[0]<0?-Je:Je),z=ae*jt.height+(.5-ae)*2*Je*Ot[1]/Ot[0]-je;const yt=this.calculateImageOrLabelDimensions_(jt.width,jt.height,Pr[0],Pr[1],jt.width,jt.height,F,z,0,0,Pr[3],Fe,!1,ph,!1,Xe);if(p&&j==="declutter"&&p.collides(yt.declutterBox))break e;ut.push([e,r,jt,yt,1,null,null])}if(he)for(Lt=0,Cr=_r.length;Lt<Cr;++Lt){Pr=_r[Lt],Kt=Pr[4],jt=this.createLabel(Kt,U,he,""),F=Pr[2],z=ae*jt.height-je;const yt=this.calculateImageOrLabelDimensions_(jt.width,jt.height,Pr[0],Pr[1],jt.width,jt.height,F,z,0,0,Pr[3],Fe,!1,ph,!1,Xe);if(p&&j==="declutter"&&p.collides(yt.declutterBox))break e;ut.push([e,r,jt,yt,1,null,null])}p&&j!=="none"&&p.load(ut.map(YL));for(let yt=0,In=ut.length;yt<In;++yt)this.replayImageOrLabel_.apply(this,ut[yt])}}++x;break;case fr.END_GEOMETRY:if(c!==void 0){Xe=qe[1];const Nt=c(Xe,bt,j);if(Nt)return Nt}++x;break;case fr.FILL:xe?ue++:this.fill_(e),++x;break;case fr.MOVE_TO_LINE_TO:for(A=qe[1],M=qe[2],Ke=_[A],Ze=_[A+1],e.moveTo(Ke,Ze),$=Ke+.5|0,W=Ze+.5|0,A+=2;A<M;A+=2)Ke=_[A],Ze=_[A+1],X=Ke+.5|0,te=Ze+.5|0,(A==M-2||X!==$||te!==W)&&(e.lineTo(Ke,Ze),$=X,W=te);++x;break;case fr.SET_FILL_STYLE:this.alignAndScaleFill_=qe[2],ue&&(this.fill_(e),ue=0,we&&(e.stroke(),we=0)),e.fillStyle=qe[1],++x;break;case fr.SET_STROKE_STYLE:we&&(e.stroke(),we=0),this.setStrokeStyle_(e,qe),++x;break;case fr.STROKE:xe?we++:e.stroke(),++x;break;default:++x;break}}ue&&this.fill_(e),we&&e.stroke()}execute(e,r,n,i,l,c){this.viewRotation_=i,this.execute_(e,r,n,this.instructions,l,void 0,void 0,c)}executeHitDetection(e,r,n,i,l){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],r,this.hitDetectionInstructions,!0,i,l)}}const ih=["Polygon","Circle","LineString","Image","Text","Default"],jv=["Image","Text"],Tge=ih.filter(t=>!jv.includes(t));class wJ{constructor(e,r,n,i,l,c,s){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=c,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Os(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,s)}clip(e,r){const n=this.getClipCoords(r);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,r){for(const n in e){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const l=e[n];for(const c in l){const s=l[c];i[c]=new Ege(this.resolution_,this.pixelRatio_,this.overlaps_,s,r)}}}hasExecutors(e){for(const r in this.executorsByZIndex_){const n=this.executorsByZIndex_[r];for(let i=0,l=e.length;i<l;++i)if(e[i]in n)return!0}return!1}forEachFeatureAtCoordinate(e,r,n,i,l,c){i=Math.round(i);const s=i*2+1,p=Nl(this.hitDetectionTransform_,i+.5,i+.5,1/r,-1/r,-n,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=Ei(s,s));const _=this.hitDetectionContext_;_.canvas.width!==s||_.canvas.height!==s?(_.canvas.width=s,_.canvas.height=s):g||_.clearRect(0,0,s,s);let x;this.renderBuffer_!==void 0&&(x=Ns(),$g(x,e),Xc(x,r*(this.renderBuffer_+i),x));const P=Sge(i);let A;function M(te,ne,Z){const U=_.getImageData(0,0,s,s).data;for(let K=0,he=P.length;K<he;K++)if(U[P[K]]>0){if(!c||Z==="none"||A!=="Image"&&A!=="Text"||c.includes(te)){const ue=(P[K]-3)/4,we=i-ue%s,Ie=i-(ue/s|0),ee=l(te,ne,we*we+Ie*Ie);if(ee)return ee}_.clearRect(0,0,s,s);break}}const F=Object.keys(this.executorsByZIndex_).map(Number);F.sort(La);let z,j,$,W,X;for(z=F.length-1;z>=0;--z){const te=F[z].toString();for($=this.executorsByZIndex_[te],j=ih.length-1;j>=0;--j)if(A=ih[j],W=$[A],W!==void 0&&(X=W.executeHitDetection(_,p,n,M,x),X))return X}}getClipCoords(e){const r=this.maxExtent_;if(!r)return null;const n=r[0],i=r[1],l=r[2],c=r[3],s=[n,i,n,c,l,c,l,i];return Qc(s,0,8,2,e,s),s}isEmpty(){return ou(this.executorsByZIndex_)}execute(e,r,n,i,l,c,s){const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(s?Nde:La),c=c||ih;const g=ih.length;for(let _=0,x=p.length;_<x;++_){const P=p[_].toString(),A=this.executorsByZIndex_[P];for(let M=0,F=c.length;M<F;++M){const z=c[M],j=A[z];if(j!==void 0){const $=s===null?void 0:j.getZIndexContext(),W=$?$.getContext():e,X=this.maxExtent_&&z!=="Image"&&z!=="Text";if(X&&(W.save(),this.clip(W,n)),!$||z==="Text"||z==="Image"?j.execute(W,r,n,i,l,s):$.pushFunction(te=>j.execute(te,r,n,i,l,s)),X&&W.restore(),$){$.offset();const te=p[_]*g+ih.indexOf(z);this.deferredZIndexContexts_[te]||(this.deferredZIndexContexts_[te]=[]),this.deferredZIndexContexts_[te].push($)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,r=Object.keys(e).map(Number).sort(La);for(let n=0,i=r.length;n<i;++n)e[r[n]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[r[n]].length=0}}const ET={};function Sge(t){if(ET[t]!==void 0)return ET[t];const e=t*2+1,r=t*t,n=new Array(r+1);for(let l=0;l<=t;++l)for(let c=0;c<=t;++c){const s=l*l+c*c;if(s>r)break;let p=n[s];p||(p=[],n[s]=p),p.push(((t+l)*e+(t+c))*4+3),l>0&&p.push(((t-l)*e+(t+c))*4+3),c>0&&(p.push(((t+l)*e+(t-c))*4+3),l>0&&p.push(((t-l)*e+(t-c))*4+3))}const i=[];for(let l=0,c=n.length;l<c;++l)n[l]&&i.push(...n[l]);return ET[t]=i,i}class Cge extends vJ{constructor(e,r,n,i,l,c,s){super(),this.context_=e,this.pixelRatio_=r,this.extent_=n,this.transform_=i,this.transformRotation_=i?Ix(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=c,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Os()}drawImages_(e,r,n,i){if(!this.image_)return;const l=Qc(e,r,n,i,this.transform_,this.pixelCoordinates_),c=this.context_,s=this.tmpLocalTransform_,p=c.globalAlpha;this.imageOpacity_!=1&&(c.globalAlpha=p*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let _=0,x=l.length;_<x;_+=2){const P=l[_]-this.imageAnchorX_,A=l[_+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const M=P+this.imageAnchorX_,F=A+this.imageAnchorY_;Nl(s,M,F,1,1,g,-M,-F),c.save(),c.transform.apply(c,s),c.translate(M,F),c.scale(this.imageScale_[0],this.imageScale_[1]),c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),c.restore()}else c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,P,A,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(c.globalAlpha=p)}drawText_(e,r,n,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=Qc(e,r,n,i,this.transform_,this.pixelCoordinates_),c=this.context_;let s=this.textRotation_;for(this.transformRotation_===0&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);r<n;r+=i){const p=l[r]+this.textOffsetX_,g=l[r+1]+this.textOffsetY_;s!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(c.save(),c.translate(p-this.textOffsetX_,g-this.textOffsetY_),c.rotate(s),c.translate(this.textOffsetX_,this.textOffsetY_),c.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&c.strokeText(this.text_,0,0),this.textFillState_&&c.fillText(this.text_,0,0),c.restore()):(this.textStrokeState_&&c.strokeText(this.text_,p,g),this.textFillState_&&c.fillText(this.text_,p,g))}}moveToLineTo_(e,r,n,i,l){const c=this.context_,s=Qc(e,r,n,i,this.transform_,this.pixelCoordinates_);c.moveTo(s[0],s[1]);let p=s.length;l&&(p-=2);for(let g=2;g<p;g+=2)c.lineTo(s[g],s[g+1]);return l&&c.closePath(),n}drawRings_(e,r,n,i){for(let l=0,c=n.length;l<c;++l)r=this.moveToLineTo_(e,r,n[l],i,!0);return r}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ui(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=Ype(e,this.transform_,this.pixelCoordinates_),n=r[2]-r[0],i=r[3]-r[1],l=Math.sqrt(n*n+i*i),c=this.context_;c.beginPath(),c.arc(r[0],r[1],l,0,2*Math.PI),this.fillState_&&c.fill(),this.strokeState_&&c.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,r){const n=r.getGeometryFunction()(e);n&&(this.setStyle(r),this.drawGeometry(n))}drawGeometryCollection(e){const r=e.getGeometriesArray();for(let n=0,i=r.length;n<i;++n)this.drawGeometry(r[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const r=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(r,0,r.length,n),this.text_!==""&&this.drawText_(r,0,r.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const r=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(r,0,r.length,n),this.text_!==""&&this.drawText_(r,0,r.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ui(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=e.getFlatCoordinates();r.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoint();this.drawText_(r,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const r=e.getExtent();if(ui(this.extent_,r)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();let l=0;const c=e.getEnds(),s=e.getStride();n.beginPath();for(let p=0,g=c.length;p<g;++p)l=this.moveToLineTo_(i,l,c[p],s,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ui(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=this.context_;r.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(this.text_!==""){const r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ui(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=e.getOrientedFlatCoordinates();let i=0;const l=e.getEndss(),c=e.getStride();r.beginPath();for(let s=0,p=l.length;s<p;++s){const g=l[s];i=this.drawRings_(n,i,g,c)}this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(this.text_!==""){const r=e.getFlatInteriorPoints();this.drawText_(r,0,r.length,2)}}}setContextFillState_(e){const r=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,r.fillStyle=e.fillStyle):(r.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const r=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,r.lineCap=e.lineCap),du(n.lineDash,e.lineDash)||r.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,r.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,r.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,r.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,r.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,r.strokeStyle=e.strokeStyle)):(r.lineCap=e.lineCap,r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset,r.lineJoin=e.lineJoin,r.lineWidth=e.lineWidth,r.miterLimit=e.miterLimit,r.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const r=this.context_,n=this.contextTextState_,i=e.textAlign?e.textAlign:Sy;n?(n.font!=e.font&&(n.font=e.font,r.font=e.font),n.textAlign!=i&&(n.textAlign=i,r.textAlign=i),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,r.textBaseline=e.textBaseline)):(r.font=e.font,r.textAlign=i,r.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,r){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Ia(n||Mo)}}if(!r)this.strokeState_=null;else{const n=r.getColor(),i=r.getLineCap(),l=r.getLineDash(),c=r.getLineDashOffset(),s=r.getLineJoin(),p=r.getWidth(),g=r.getMiterLimit(),_=l||Il;this.strokeState_={lineCap:i!==void 0?i:xf,lineDash:this.pixelRatio_===1?_:_.map(x=>x*this.pixelRatio_),lineDashOffset:(c||Ml)*this.pixelRatio_,lineJoin:s!==void 0?s:wf,lineWidth:(p!==void 0?p:Cy)*this.pixelRatio_,miterLimit:g!==void 0?g:Ey,strokeStyle:Ia(n||Ty)}}}setImageStyle(e){let r;if(!e||!(r=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=r[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const c=e.getScaleArray();this.imageScale_=[c[0]*this.pixelRatio_/n,c[1]*this.pixelRatio_/n],this.imageWidth_=r[0]*n}setTextStyle(e){if(!e)this.text_="";else{const r=e.getFill();if(!r)this.textFillState_=null;else{const A=r.getColor();this.textFillState_={fillStyle:Ia(A||Mo)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const A=n.getColor(),M=n.getLineCap(),F=n.getLineDash(),z=n.getLineDashOffset(),j=n.getLineJoin(),$=n.getWidth(),W=n.getMiterLimit();this.textStrokeState_={lineCap:M!==void 0?M:xf,lineDash:F||Il,lineDashOffset:z||Ml,lineJoin:j!==void 0?j:wf,lineWidth:$!==void 0?$:Cy,miterLimit:W!==void 0?W:Ey,strokeStyle:Ia(A||Ty)}}const i=e.getFont(),l=e.getOffsetX(),c=e.getOffsetY(),s=e.getRotateWithView(),p=e.getRotation(),g=e.getScaleArray(),_=e.getText(),x=e.getTextAlign(),P=e.getTextBaseline();this.textState_={font:i!==void 0?i:aJ,textAlign:x!==void 0?x:Sy,textBaseline:P!==void 0?P:Lv},this.text_=_!==void 0?Array.isArray(_)?_.reduce((A,M,F)=>A+=F%2?" ":M,""):_:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=c!==void 0?this.pixelRatio_*c:0,this.textRotateWithView_=s!==void 0?s:!1,this.textRotation_=p!==void 0?p:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const ss=.5;function EJ(t,e,r,n,i,l,c,s,p){const g=p?gM(i):i,_=t[0]*ss,x=t[1]*ss,P=Ei(_,x);P.imageSmoothingEnabled=!1;const A=P.canvas,M=new Cge(P,ss,i,null,c,s,p?u_(Bpe(),p):null),F=r.length,z=Math.floor((256*256*256-1)/F),j={};for(let W=1;W<=F;++W){const X=r[W-1],te=X.getStyleFunction()||n;if(!te)continue;let ne=te(X,l);if(!ne)continue;Array.isArray(ne)||(ne=[ne]);const U=(W*z).toString(16).padStart(7,"#00000");for(let K=0,he=ne.length;K<he;++K){const ue=ne[K],we=ue.getGeometryFunction()(X);if(!we||!ui(g,we.getExtent()))continue;const Ie=ue.clone(),ee=Ie.getFill();ee&&ee.setColor(U);const fe=Ie.getStroke();fe&&(fe.setColor(U),fe.setLineDash(null)),Ie.setText(void 0);const ve=ue.getImage();if(ve){const Ze=ve.getImageSize();if(!Ze)continue;const bt=Ei(Ze[0],Ze[1],void 0,{alpha:!1}),qe=bt.canvas;bt.fillStyle=U,bt.fillRect(0,0,qe.width,qe.height),Ie.setImage(new Ef({img:qe,anchor:ve.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ve.getOrigin(),opacity:1,size:ve.getSize(),scale:ve.getScale(),rotation:ve.getRotation(),rotateWithView:ve.getRotateWithView()}))}const xe=Ie.getZIndex()||0;let Xe=j[xe];Xe||(Xe={},j[xe]=Xe,Xe.Polygon=[],Xe.Circle=[],Xe.LineString=[],Xe.Point=[]);const Ke=we.getType();if(Ke==="GeometryCollection"){const Ze=we.getGeometriesArrayRecursive();for(let bt=0,qe=Ze.length;bt<qe;++bt){const kt=Ze[bt];Xe[kt.getType().replace("Multi","")].push(kt,Ie)}}else Xe[Ke.replace("Multi","")].push(we,Ie)}}const $=Object.keys(j).map(Number).sort(La);for(let W=0,X=$.length;W<X;++W){const te=j[$[W]];for(const ne in te){const Z=te[ne];for(let U=0,K=Z.length;U<K;U+=2){M.setStyle(Z[U+1]);for(let he=0,ue=e.length;he<ue;++he)M.setTransform(e[he]),M.drawGeometry(Z[U])}}}return P.getImageData(0,0,A.width,A.height)}function TJ(t,e,r){const n=[];if(r){const i=Math.floor(Math.round(t[0])*ss),l=Math.floor(Math.round(t[1])*ss),c=(qn(i,0,r.width-1)+qn(l,0,r.height-1)*r.width)*4,s=r.data[c],p=r.data[c+1],_=r.data[c+2]+256*(p+256*s),x=Math.floor((256*256*256-1)/e.length);_&&_%x===0&&n.push(e[_/x-1])}return n}const Pge=.5,SJ={Point:Dge,LineString:Oge,Polygon:Fge,MultiPoint:Nge,MultiLineString:kge,MultiPolygon:Lge,GeometryCollection:Mge,Circle:Rge};function Age(t,e){return parseInt(Nr(t),10)-parseInt(Nr(e),10)}function dC(t,e){const r=CJ(t,e);return r*r}function CJ(t,e){return Pge*t/e}function Rge(t,e,r,n,i){const l=r.getFill(),c=r.getStroke();if(l||c){const p=t.getBuilder(r.getZIndex(),"Circle");p.setFillStrokeStyle(l,c),p.drawCircle(e,n,i)}const s=r.getText();if(s&&s.getText()){const p=t.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s),p.drawText(e,n)}}function Bv(t,e,r,n,i,l,c,s){const p=[],g=r.getImage();if(g){let P=!0;const A=g.getImageState();A==$r.LOADED||A==$r.ERROR?P=!1:A==$r.IDLE&&g.load(),P&&p.push(g.ready())}const _=r.getFill();_&&_.loading()&&p.push(_.ready());const x=p.length>0;return x&&Promise.all(p).then(()=>i(null)),Ige(t,e,r,n,l,c,s),x}function Ige(t,e,r,n,i,l,c){const s=r.getGeometryFunction()(e);if(!s)return;const p=s.simplifyTransformed(n,i);if(r.getRenderer())PJ(t,p,r,e,c);else{const _=SJ[p.getType()];_(t,p,r,e,c,l)}}function PJ(t,e,r,n,i){if(e.getType()=="GeometryCollection"){const c=e.getGeometries();for(let s=0,p=c.length;s<p;++s)PJ(t,c[s],r,n,i);return}t.getBuilder(r.getZIndex(),"Default").drawCustom(e,n,r.getRenderer(),r.getHitDetectionRenderer(),i)}function Mge(t,e,r,n,i,l){const c=e.getGeometriesArray();let s,p;for(s=0,p=c.length;s<p;++s){const g=SJ[c[s].getType()];g(t,c[s],r,n,i,l)}}function Oge(t,e,r,n,i){const l=r.getStroke();if(l){const s=t.getBuilder(r.getZIndex(),"LineString");s.setFillStrokeStyle(null,l),s.drawLineString(e,n,i)}const c=r.getText();if(c&&c.getText()){const s=t.getBuilder(r.getZIndex(),"Text");s.setTextStyle(c),s.drawText(e,n,i)}}function kge(t,e,r,n,i){const l=r.getStroke();if(l){const s=t.getBuilder(r.getZIndex(),"LineString");s.setFillStrokeStyle(null,l),s.drawMultiLineString(e,n,i)}const c=r.getText();if(c&&c.getText()){const s=t.getBuilder(r.getZIndex(),"Text");s.setTextStyle(c),s.drawText(e,n,i)}}function Lge(t,e,r,n,i){const l=r.getFill(),c=r.getStroke();if(c||l){const p=t.getBuilder(r.getZIndex(),"Polygon");p.setFillStrokeStyle(l,c),p.drawMultiPolygon(e,n,i)}const s=r.getText();if(s&&s.getText()){const p=t.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s),p.drawText(e,n,i)}}function Dge(t,e,r,n,i,l){const c=r.getImage(),s=r.getText(),p=s&&s.getText(),g=l&&c&&p?{}:void 0;if(c){if(c.getImageState()!=$r.LOADED)return;const _=t.getBuilder(r.getZIndex(),"Image");_.setImageStyle(c,g),_.drawPoint(e,n,i)}if(p){const _=t.getBuilder(r.getZIndex(),"Text");_.setTextStyle(s,g),_.drawText(e,n,i)}}function Nge(t,e,r,n,i,l){const c=r.getImage(),s=c&&c.getOpacity()!==0,p=r.getText(),g=p&&p.getText(),_=l&&s&&g?{}:void 0;if(s){if(c.getImageState()!=$r.LOADED)return;const x=t.getBuilder(r.getZIndex(),"Image");x.setImageStyle(c,_),x.drawMultiPoint(e,n,i)}if(g){const x=t.getBuilder(r.getZIndex(),"Text");x.setTextStyle(p,_),x.drawText(e,n,i)}}function Fge(t,e,r,n,i){const l=r.getFill(),c=r.getStroke();if(l||c){const p=t.getBuilder(r.getZIndex(),"Polygon");p.setFillStrokeStyle(l,c),p.drawPolygon(e,n,i)}const s=r.getText();if(s&&s.getText()){const p=t.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s),p.drawText(e,n,i)}}const zge=5;class jge extends a_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=zge}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Sr()}getData(e){return null}prepareFrame(e){return Sr()}renderFrame(e,r){return Sr()}forEachFeatureAtCoordinate(e,r,n,i,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const r=e.target;(r.getState()===$r.LOADED||r.getState()===$r.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let r=e.getState();return r!=$r.LOADED&&r!=$r.ERROR&&e.addEventListener(Rr.CHANGE,this.boundHandleImageChange_),r==$r.IDLE&&(e.load(),r=e.getState()),r==$r.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const QL=[];let Cp=null;function Bge(){Cp=Ei(1,1,void 0,{willReadFrequently:!0})}class AJ extends jge{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Os(),this.pixelTransform=Os(),this.inversePixelTransform=Os(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,r,n){Cp||Bge(),Cp.clearRect(0,0,1,1);let i;try{Cp.drawImage(e,r,n,1,1,0,0,1,1),i=Cp.getImageData(0,0,1,1).data}catch{return Cp=null,null}return i}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,r,n){const i=this.getLayer().getClassName();let l,c;if(e&&e.className===i&&(!n||e&&e.style.backgroundColor&&du(vf(e.style.backgroundColor),vf(n)))){const s=e.firstElementChild;Bc(s)&&(c=s.getContext("2d"))}if(c&&Jpe(c.canvas.style.transform,r)?(this.container=e,this.context=c,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=Ps?UH():document.createElement("div"),l.className=i;let s=l.style;s.position="absolute",s.width="100%",s.height="100%",c=Ei();const p=c.canvas;l.appendChild(p),s=p.style,s.position="absolute",s.left="0",s.transformOrigin="top left",this.container=l,this.context=c}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,r,n){const i=Vl(n),l=kx(n),c=Ox(n),s=Mx(n);Di(r.coordinateToPixelTransform,i),Di(r.coordinateToPixelTransform,l),Di(r.coordinateToPixelTransform,c),Di(r.coordinateToPixelTransform,s);const p=this.inversePixelTransform;Di(p,i),Di(p,l),Di(p,c),Di(p,s),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}prepareContainer(e,r){const n=e.extent,i=e.viewState.resolution,l=e.viewState.rotation,c=e.pixelRatio,s=Math.round(En(n)/i*c),p=Math.round(Eo(n)/i*c);Nl(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-s/2,-p/2),RH(this.inversePixelTransform,this.pixelTransform);const g=Hpe(this.pixelTransform);if(this.useContainer(r,g,this.getBackground(e)),!this.containerReused){const _=this.context.canvas;_.width!=s||_.height!=p?(_.width=s,_.height=p):this.context.clearRect(0,0,s,p),g!==_.style.transform&&(_.style.transform=g)}}dispatchRenderEvent_(e,r,n){const i=this.getLayer();if(i.hasListener(e)){const l=new mJ(e,this.inversePixelTransform,n,r);i.dispatchEvent(l)}}preRender(e,r){this.frameState=r,!r.declutter&&this.dispatchRenderEvent_(As.PRERENDER,e,r)}postRender(e,r){r.declutter||this.dispatchRenderEvent_(As.POSTRENDER,e,r)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new UM),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(As.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(As.POSTRENDER,this.context,e))}getRenderTransform(e,r,n,i,l,c,s){const p=l/2,g=c/2,_=i/r,x=-_,P=-e[0]+s,A=-e[1];return Nl(this.tempTransform,p,g,_,x,-n,P,A)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class qge extends AJ{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ns(),this.wrappedRenderedExtent_=Ns(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,r,n){const i=r.extent,l=r.viewState,c=l.center,s=l.resolution,p=l.projection,g=l.rotation,_=p.getExtent(),x=this.getLayer().getSource(),P=this.getLayer().getDeclutter(),A=r.pixelRatio,M=r.viewHints,F=!(M[ri.ANIMATING]||M[ri.INTERACTING]),z=this.context,j=Math.round(En(i)/s*A),$=Math.round(Eo(i)/s*A),W=x.getWrapX()&&p.canWrapX(),X=W?En(_):null,te=W?Math.ceil((i[2]-_[2])/X)+1:1;let ne=W?Math.floor((i[0]-_[0])/X):0;do{let Z=this.getRenderTransform(c,s,0,A,j,$,ne*X);r.declutter&&(Z=Z.slice(0)),e.execute(z,[z.canvas.width,z.canvas.height],Z,g,F,n===void 0?ih:n?jv:Tge,n?P&&r.declutter[P]:void 0)}while(++ne<te)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ei(this.context.canvas.width,this.context.canvas.height,QL))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,d_(this.context),QL.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,r){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const i=e.viewState;this.prepareContainer(e,r);const l=this.context,c=this.replayGroup_;let s=c&&!c.isEmpty();if(!s&&!(this.getLayer().hasListener(As.PRERENDER)||this.getLayer().hasListener(As.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(l,e),i.projection,this.clipped_=!1,s&&n.extent&&this.clipping){const p=zc(n.extent);s=ui(p,e.extent),this.clipped_=s&&!uh(p,e.extent),this.clipped_&&this.clipUnrotated(l,e,p)}return s&&this.renderWorlds(c,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(r=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),i=this.renderedCenter_,l=this.renderedResolution_,c=this.renderedRotation_,s=this.renderedProjection_,p=this.wrappedRenderedExtent_,g=this.getLayer(),_=[],x=n[0]*ss,P=n[1]*ss;_.push(this.getRenderTransform(i,l,c,ss,x,P,0).slice());const A=g.getSource(),M=s.getExtent();if(A.getWrapX()&&s.canWrapX()&&!uh(M,p)){let F=p[0];const z=En(M);let j=0,$;for(;F<M[0];)--j,$=z*j,_.push(this.getRenderTransform(i,l,c,ss,x,P,$).slice()),F+=z;for(j=0,F=p[2];F>M[2];)++j,$=z*j,_.push(this.getRenderTransform(i,l,c,ss,x,P,$).slice()),F-=z}this.hitDetectionImageData_=EJ(n,_,this.renderedFeatures_,g.getStyleFunction(),p,l,c,dC(l,this.renderedPixelRatio_),null)}r(TJ(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,r,n,i,l){if(!this.replayGroup_)return;const c=r.viewState.resolution,s=r.viewState.rotation,p=this.getLayer(),g={},_=function(P,A,M){const F=Nr(P),z=g[F];if(z){if(z!==!0&&M<z.distanceSq){if(M===0)return g[F]=!0,l.splice(l.lastIndexOf(z),1),i(P,p,A);z.geometry=A,z.distanceSq=M}}else{if(M===0)return g[F]=!0,i(P,p,A);l.push(g[F]={feature:P,layer:p,geometry:A,distanceSq:M,callback:i})}},x=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,c,s,n,_,x?r.declutter?.[x]?.all().map(P=>P.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const r=this.getLayer(),n=r.getSource();if(!n)return!1;const i=e.viewHints[ri.ANIMATING],l=e.viewHints[ri.INTERACTING],c=r.getUpdateWhileAnimating(),s=r.getUpdateWhileInteracting();if(this.ready&&!c&&i||!s&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const p=e.extent,g=e.viewState,_=g.projection,x=g.resolution,P=e.pixelRatio,A=r.getRevision(),M=r.getRenderBuffer();let F=r.getRenderOrder();F===void 0&&(F=Age);const z=g.center.slice(),j=Xc(p,M*x),$=j.slice(),W=[j.slice()],X=_.getExtent();if(n.getWrapX()&&_.canWrapX()&&!uh(X,e.extent)){const ee=En(X),fe=Math.max(En(j)/2,ee);j[0]=X[0]-fe,j[2]=X[2]+fe,hM(z,_);const ve=_H(W[0],_);ve[0]<X[0]&&ve[2]<X[2]?W.push([ve[0]+ee,ve[1],ve[2]+ee,ve[3]]):ve[0]>X[0]&&ve[2]>X[2]&&W.push([ve[0]-ee,ve[1],ve[2]-ee,ve[3]])}if(this.ready&&this.renderedResolution_==x&&this.renderedRevision_==A&&this.renderedRenderOrder_==F&&this.renderedFrameDeclutter_===!!e.declutter&&uh(this.wrappedRenderedExtent_,j))return du(this.renderedExtent_,$)||(this.hitDetectionImageData_=null,this.renderedExtent_=$),this.renderedCenter_=z,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const te=new xJ(CJ(x,P),j,x,P);let ne;for(let ee=0,fe=W.length;ee<fe;++ee)n.loadFeatures(W[ee],x,_);const Z=dC(x,P);let U=!0;const K=(ee,fe)=>{let ve;const xe=ee.getStyleFunction()||r.getStyleFunction();if(xe&&(ve=xe(ee,x)),ve){const Xe=this.renderFeature(ee,Z,ve,te,ne,this.getLayer().getDeclutter(),fe);U=U&&!Xe}},he=gM(j),ue=n.getFeaturesInExtent(he);F&&ue.sort(F);for(let ee=0,fe=ue.length;ee<fe;++ee)K(ue[ee],ee);this.renderedFeatures_=ue,this.ready=U;const we=te.finish(),Ie=new wJ(j,x,P,n.getOverlaps(),we,r.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=x,this.renderedRevision_=A,this.renderedRenderOrder_=F,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=$,this.wrappedRenderedExtent_=j,this.renderedCenter_=z,this.renderedProjection_=_,this.renderedPixelRatio_=P,this.replayGroup_=Ie,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,r,n,i,l,c,s){if(!n)return!1;let p=!1;if(Array.isArray(n))for(let g=0,_=n.length;g<_;++g)p=Bv(i,e,n[g],r,this.boundHandleStyleImageChange_,l,c,s)||p;else p=Bv(i,e,n,r,this.boundHandleStyleImageChange_,l,c,s);return p}}class $ge extends $M{constructor(e){super(e)}createRenderer(){return new qge(this)}}let Vge=!1;function RJ(t,e,r,n,i,l,c){const s=new XMLHttpRequest;s.open("GET",typeof t=="function"?t(r,n,i):t,!0),e.getType()=="arraybuffer"&&(s.responseType="arraybuffer"),s.withCredentials=Vge,s.onload=function(p){if(!s.status||s.status>=200&&s.status<300){const g=e.getType();try{let _;g=="text"||g=="json"?_=s.responseText:g=="xml"?_=s.responseXML||s.responseText:g=="arraybuffer"&&(_=s.response),_?l(e.readFeatures(_,{extent:r,featureProjection:i}),e.readProjection(_)):c()}catch{c()}}else c()},s.onerror=c,s.send()}function eD(t,e){return function(r,n,i,l,c){RJ(t,e,r,n,i,(s,p)=>{this.addFeatures(s),l!==void 0&&l(s)},()=>{this.changed(),c!==void 0&&c()})}}function Uge(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Gge(t,e){return[t]}class qv extends MH{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Rn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)this.changeEventsKeys_.push(en(e[r],Rr.CHANGE,this.changed,this))}clone(){const e=new qv(TT(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,r,n,i){if(i<id(this.getExtent(),e,r))return i;const l=this.geometries_;for(let c=0,s=l.length;c<s;++c)i=l[c].closestPointXY(e,r,n,i);return i}containsXY(e,r){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)if(n[i].containsXY(e,r))return!0;return!1}computeExtent(e){zf(e);const r=this.geometries_;for(let n=0,i=r.length;n<i;++n)pH(e,r[n].getExtent());return e}getGeometries(){return TT(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const r=this.geometries_;for(let n=0,i=r.length;n<i;++n)r[n].getType()===this.getType()?e=e.concat(r[n].getGeometriesArrayRecursive()):e.push(r[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const r=[],n=this.geometries_;let i=!1;for(let l=0,c=n.length;l<c;++l){const s=n[l],p=s.getSimplifiedGeometry(e);r.push(p),p!==s&&(i=!0)}return i?new qv(r):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const r=this.geometries_;for(let n=0,i=r.length;n<i;++n)if(r[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,r){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)n[i].rotate(e,r);this.changed()}scale(e,r,n){n||(n=Dl(this.getExtent()));const i=this.geometries_;for(let l=0,c=i.length;l<c;++l)i[l].scale(e,r,n);this.changed()}setGeometries(e){this.setGeometriesArray(TT(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const r=this.geometries_;for(let n=0,i=r.length;n<i;++n)r[n].applyTransform(e);this.changed()}translate(e,r){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)n[i].translate(e,r);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function TT(t){return t.map(e=>e.clone())}const tD=Os();class uo{constructor(e,r,n,i,l,c){this.styleFunction,this.extent_,this.id_=c,this.type_=e,this.flatCoordinates_=r,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?dH(this.flatCoordinates_):cM(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Dl(this.getExtent());this.flatInteriorPoints_=SM(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=qH(this.flatCoordinates_,this.ends_),r=bJ(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=NH(this.flatCoordinates_,0,e,2,r)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Fv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let r=0;const n=this.ends_;for(let i=0,l=n.length;i<l;++i){const c=n[i],s=Fv(e,r,c,2,.5);Da(this.flatMidpoints_,s),r=c}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,r){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=An(e);const r=e.getExtent(),n=e.getWorldExtent();if(r&&n){const i=Eo(n)/Eo(r);Nl(tD,n[0],n[3],i,-i,0,0,0),Qc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tD,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new uo(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=aH((e,r)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),r&&this.simplifiedGeometry_.applyTransform(r);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=zx(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=DH(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,i);break;case"Polygon":i=[],n.length=EM(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,i);break}return i&&(this.simplifiedGeometry_=new uo(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}uo.prototype.getFlatCoordinates=uo.prototype.getOrientedFlatCoordinates;class rD{constructor(e){this.rbush_=new tJ(e),this.items_={}}insert(e,r){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:r};this.rbush_.insert(n),this.items_[Nr(r)]=n}load(e,r){const n=new Array(r.length);for(let i=0,l=r.length;i<l;i++){const c=e[i],s=r[i],p={minX:c[0],minY:c[1],maxX:c[2],maxY:c[3],value:s};n[i]=p,this.items_[Nr(s)]=p}this.rbush_.load(n)}remove(e){const r=Nr(e),n=this.items_[r];return delete this.items_[r],this.rbush_.remove(n)!==null}update(e,r){const n=this.items_[Nr(r)],i=[n.minX,n.minY,n.maxX,n.maxY];yf(i,e)||(this.remove(r),this.insert(e,r))}getAll(){return this.rbush_.all().map(function(r){return r.value})}getInExtent(e){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(r).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,r){return this.forEach_(this.getInExtent(e),r)}forEach_(e,r){let n;for(let i=0,l=e.length;i<l;i++)if(n=r(e[i]),n)return n;return n}isEmpty(){return ou(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const r=this.rbush_.toJSON();return Ll(r.minX,r.minY,r.maxX,r.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const r in e.items_)this.items_[r]=e.items_[r]}}class IJ extends la{constructor(e){super(),this.projection=An(e.projection),this.attributions_=nD(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const r=this;this.viewPromise_=new Promise(function(n,i){r.viewResolver=n,r.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=nD(e),this.changed()}setState(e){this.state_=e,this.changed()}}function nD(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const Es={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class xc extends $l{constructor(e,r,n){super(e),this.feature=r,this.features=n}}class ST extends IJ{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=_y,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(fn(this.format_,"`format` must be set when `url` is set"),this.loader_=eD(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Uge;const r=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=r?new rD:null,this.loadedExtentsRtree_=new rD,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,i;Array.isArray(e.features)?i=e.features:e.features&&(n=e.features,i=n.getArray()),!r&&n===void 0&&(n=new ls(i)),i!==void 0&&this.addFeaturesInternal(i),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const r=Nr(e);if(!this.addToIndex_(r,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(r,e);const n=e.getGeometry();if(n){const i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[r]=e;this.dispatchEvent(new xc(Es.ADDFEATURE,e))}setupChangeEvents_(e,r){r instanceof uo||(this.featureChangeKeys_[e]=[en(r,Rr.CHANGE,this.handleFeatureChange_,this),en(r,mf.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,r){let n=!0;if(r.getId()!==void 0){const i=String(r.getId());if(!(i in this.idIndex_))this.idIndex_[i]=r;else if(r instanceof uo){const l=this.idIndex_[i];l instanceof uo?Array.isArray(l)?l.push(r):this.idIndex_[i]=[l,r]:n=!1}else n=!1}return n&&(fn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=r),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const r=[],n=[],i=[];for(let l=0,c=e.length;l<c;l++){const s=e[l],p=Nr(s);this.addToIndex_(p,s)&&n.push(s)}for(let l=0,c=n.length;l<c;l++){const s=n[l],p=Nr(s);this.setupChangeEvents_(p,s);const g=s.getGeometry();if(g){const _=g.getExtent();r.push(_),i.push(s)}else this.nullGeometryFeatures_[p]=s}if(this.featuresRtree_&&this.featuresRtree_.load(r,i),this.hasListener(Es.ADDFEATURE))for(let l=0,c=n.length;l<c;l++)this.dispatchEvent(new xc(Es.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let r=!1;this.addEventListener(Es.ADDFEATURE,function(n){r||(r=!0,e.push(n.feature),r=!1)}),this.addEventListener(Es.REMOVEFEATURE,function(n){r||(r=!0,e.remove(n.feature),r=!1)}),e.addEventListener(Ao.ADD,n=>{r||(r=!0,this.addFeature(n.element),r=!1)}),e.addEventListener(Ao.REMOVE,n=>{r||(r=!0,this.removeFeature(n.element),r=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Rn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const r=new xc(Es.CLEAR);this.dispatchEvent(r),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,r){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(i){const l=i.getGeometry();if(l instanceof uo||l.intersectsCoordinate(e))return r(i)})}forEachFeatureInExtent(e,r){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,r);this.featuresCollection_&&this.featuresCollection_.forEach(r)}forEachFeatureIntersectingExtent(e,r){return this.forEachFeatureInExtent(e,function(n){const i=n.getGeometry();if(i instanceof uo||i.intersectsExtent(e)){const l=r(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ou(this.nullGeometryFeatures_)||Da(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const r=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){r.push(n)}),r}getFeaturesInExtent(e,r){if(this.featuresRtree_){if(!(r&&r.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=bH(e,r);return[].concat(...i.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,r){const n=e[0],i=e[1];let l=null;const c=[NaN,NaN];let s=1/0;const p=[-1/0,-1/0,1/0,1/0];return r=r||yy,this.featuresRtree_.forEachInExtent(p,function(g){if(r(g)){const _=g.getGeometry(),x=s;if(s=_ instanceof uo?0:_.closestPointXY(n,i,c,s),s<x){l=g;const P=Math.sqrt(s);p[0]=n-P,p[1]=i-P,p[2]=n+P,p[3]=i+P}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const r=this.idIndex_[e.toString()];return r!==void 0?r:null}getFeatureByUid(e){const r=this.uidIndex_[e];return r!==void 0?r:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const r=e.target,n=Nr(r),i=r.getGeometry();if(!i)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[n]=r);else{const c=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(c,r)):this.featuresRtree_&&this.featuresRtree_.update(c,r)}const l=r.getId();if(l!==void 0){const c=l.toString();this.idIndex_[c]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[c]=r)}else this.removeFromIdIndex_(r),this.uidIndex_[n]=r;this.changed(),this.dispatchEvent(new xc(Es.CHANGEFEATURE,r))}hasFeature(e){const r=e.getId();return r!==void 0?r in this.idIndex_:Nr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ou(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,r,n){const i=this.loadedExtentsRtree_,l=this.strategy_(e,r,n);for(let c=0,s=l.length;c<s;++c){const p=l[c];i.forEachInExtent(p,function(_){return uh(_.extent,p)})||(++this.loadingExtentsCount_,this.dispatchEvent(new xc(Es.FEATURESLOADSTART)),this.loader_.call(this,p,r,n,_=>{--this.loadingExtentsCount_,this.dispatchEvent(new xc(Es.FEATURESLOADEND,void 0,_))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new xc(Es.FEATURESLOADERROR))}),i.insert(p,{extent:p.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const r=this.loadedExtentsRtree_,n=r.forEachInExtent(e,function(i){if(yf(i.extent,e))return i});n&&r.remove(n)}removeFeatures(e){let r=!1;for(let n=0,i=e.length;n<i;++n)r=this.removeFeatureInternal(e[n])||r;r&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const r=Nr(e);if(!(r in this.uidIndex_))return!1;r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[r]?.forEach(Rn),delete this.featureChangeKeys_[r];const i=e.getId();if(i!==void 0){const l=i.toString(),c=this.idIndex_[l];c===e?delete this.idIndex_[l]:Array.isArray(c)&&(c.splice(c.indexOf(e),1),c.length===1&&(this.idIndex_[l]=c[0]))}return delete this.uidIndex_[r],this.hasListener(Es.REMOVEFEATURE)&&this.dispatchEvent(new xc(Es.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r];break}}setLoader(e){this.loader_=e}setUrl(e){fn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(eD(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}function Hge(){const t=new JH(-.004,.01,50);return new Ov({kinetic:t})}const Jge=t=>{const e=t.originalEvent;return(e.ctrlKey||e.metaKey)&&!e.altKey&&!e.shiftKey&&kM(t)};function Wge(){return new YH({condition:Jge})}class __ extends Rx{constructor(e,r,n){super(),n=n||{},this.tileCoord=e,this.state=r,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Rr.CHANGE)}release(){this.setState(qt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==qt.EMPTY){if(this.state!==qt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Sr()}getAlpha(e,r){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=r,this.transitionStarts_[e]=n;else if(n===-1)return 1;const i=r-n+1e3/60;return i>=this.transition_?1:vH(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class MJ extends __{constructor(e,r,n,i,l,c){super(e,r,c),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_,Ps?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=qt.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=qt.ERROR,this.unlistenImage_(),this.image_=Zge(),this.changed()}handleImageLoad_(){if(Ps)this.state=qt.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=qt.LOADED:this.state=qt.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==qt.ERROR&&(this.state=qt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==qt.IDLE&&(this.state=qt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ame(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Zge(){const t=Ei(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class GM{constructor(e,r,n,i){this.minX=e,this.maxX=r,this.minY=n,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,r){return this.minX<=e&&e<=this.maxX&&this.minY<=r&&r<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function mp(t,e,r,n,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new GM(t,e,r,n)}const iD=[];class Kge extends __{constructor(e,r,n,i,l){super(e,r,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=l,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=Ei(1,1,iD)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const r=Nr(e);return r in this.replayState_||(this.replayState_[r]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[r]}load(){this.getSourceTiles()}release(){this.context_&&(d_(this.context_),iD.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let OJ=class extends __{constructor(e,r,n,i,l,c){super(e,r,c),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=l,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==qt.IDLE&&(this.setState(qt.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,r){this.setFeatures(e)}onError(){this.setState(qt.ERROR)}setFeatures(e){this.features_=e,this.setState(qt.LOADED)}setLoader(e){this.loader_=e}};const Yge={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true",STORYBOOK_OS_MAPS_API_KEY_PUBLIC_DOCS:""};var oD={};const Xge=[-9.01,49.75,2.01,61.01],Qge=[-2.547855,54.00366],eye=()=>typeof import.meta<"u"&&"env"in import.meta?Yge:typeof process<"u"&&oD?oD:{},kJ=eye(),tye=kJ.OS_MAPS_VECTOR_BASE_URL||"https://api.os.uk/maps/vector/v1";kJ.OS_MAPS_AUTH_URL;const rye=`${tye.replace(/\/$/,"")}/vts`,nye="/os-map/vector",Nc={view:{zoom:{min:5,max:20},default:{zoom:6,extent:Vg(Xge,"EPSG:4326","EPSG:3857"),centre:Rv(Qge)}},tiles:{urls:{localVectorStyleUrl:`${nye}/style`,vectorStyleUrl:`${rye}/resources/styles?srs=3857`}}};class iye extends Sa{constructor(){super({projection:"EPSG:3857",extent:Nc.view.default.extent,showFullExtent:!0,minZoom:Nc.view.zoom.min,maxZoom:Nc.view.zoom.max,center:Nc.view.default.centre,zoom:Nc.view.default.zoom})}}class LJ extends _J{constructor(e){const r=e.layers||[],n=e.controls||{},i=HH({rotate:!1});if(n.rotate!==!1){const p=typeof n.rotate=="object"?n.rotate.autoHide===!0:!1;i.extend([new GH({autoHide:p})])}n.scaleControl==="bar"?i.push(new JL({units:"metric",bar:!0,steps:2,text:!1,minWidth:140})):n.scaleControl==="line"&&i.push(new JL({units:"metric"})),(n.locationDisplay==="dms"||n.locationDisplay==="latlon")&&i.push(new uC({mode:n.locationDisplay,source:n.locationDisplaySource??"pointer",position:"bottom-center"})),n.zoomSlider&&i.push(new cge);function l(p){return Array.isArray(p)?p:p instanceof ls?p.getArray():[]}const s=[...l(XH({altShiftDragRotate:!1})).filter(p=>!(p instanceof Ov)).filter(p=>!(p instanceof Ov)),Hge(),...e.interactions||[],Wge()];super({target:e.target,layers:r,overlays:e.overlays||[],interactions:s,controls:i,view:new iye})}}function oye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vb={exports:{}};var sye=vb.exports,sD;function aye(){return sD||(sD=1,function(t,e){(function(r,n){t.exports=n()})(sye,function(){var r={},n={};function i(c,s,p){if(n[c]=p,c==="index"){var g="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",_={};return n.shared(_),n.index(r,_),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),r}}i("shared",["exports"],function(c){function s(h,a,u,f){return new(u||(u=Promise))(function(b,S){function C(N){try{O(f.next(N))}catch(B){S(B)}}function I(N){try{O(f.throw(N))}catch(B){S(B)}}function O(N){var B;N.done?b(N.value):(B=N.value,B instanceof u?B:new u(function(G){G(B)})).then(C,I)}O((f=f.apply(h,a||[])).next())})}function p(h,a){this.x=h,this.y=a}function g(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var _,x;typeof SuppressedError=="function"&&SuppressedError,p.prototype={clone(){return new p(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,a){return this.clone()._rotateAround(h,a)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){const a=h.x-this.x,u=h.y-this.y;return a*a+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,a){return Math.atan2(this.x*a-this.y*h,this.x*h+this.y*a)},_matMult(h){const a=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=a,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){const h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){const a=Math.cos(h),u=Math.sin(h),f=u*this.x+a*this.y;return this.x=a*this.x-u*this.y,this.y=f,this},_rotateAround(h,a){const u=Math.cos(h),f=Math.sin(h),b=a.y+f*(this.x-a.x)+u*(this.y-a.y);return this.x=a.x+u*(this.x-a.x)-f*(this.y-a.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:p},p.convert=function(h){if(h instanceof p)return h;if(Array.isArray(h))return new p(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new p(+h.x,+h.y);throw new Error("Expected [x, y] or {x, y} point format")};var P=function(){if(x)return _;function h(a,u,f,b){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=u,this.p2x=f,this.p2y=b}return x=1,_=h,h.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,u){if(u===void 0&&(u=1e-6),a<0)return 0;if(a>1)return 1;for(var f=a,b=0;b<8;b++){var S=this.sampleCurveX(f)-a;if(Math.abs(S)<u)return f;var C=this.sampleCurveDerivativeX(f);if(Math.abs(C)<1e-6)break;f-=S/C}var I=0,O=1;for(f=a,b=0;b<20&&(S=this.sampleCurveX(f),!(Math.abs(S-a)<u));b++)a>S?I=f:O=f,f=.5*(O-I)+I;return f},solve:function(a,u){return this.sampleCurveY(this.solveCurveX(a,u))}},_}(),A=g(P);let M,F;function z(){return M==null&&(M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),M}function j(){if(F==null&&(F=!1,z())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let f=0;f<5*5;f++){const b=4*f;a.fillStyle=`rgb(${b},${b+1},${b+2})`,a.fillRect(f%5,Math.floor(f/5),1,1)}const u=a.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&u[f]!==f){F=!0;break}}}return F||!1}var $=1e-6,W=typeof Float32Array<"u"?Float32Array:Array;function X(){var h=new W(9);return W!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function te(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ne(){var h=new W(3);return W!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function Z(h){var a=h[0],u=h[1],f=h[2];return Math.sqrt(a*a+u*u+f*f)}function U(h,a,u){var f=new W(3);return f[0]=h,f[1]=a,f[2]=u,f}function K(h,a,u){return h[0]=a[0]+u[0],h[1]=a[1]+u[1],h[2]=a[2]+u[2],h}function he(h,a,u){return h[0]=a[0]*u,h[1]=a[1]*u,h[2]=a[2]*u,h}function ue(h,a,u){var f=a[0],b=a[1],S=a[2],C=u[0],I=u[1],O=u[2];return h[0]=b*O-S*I,h[1]=S*C-f*O,h[2]=f*I-b*C,h}var we,Ie=Z;function ee(h,a,u){var f=a[0],b=a[1],S=a[2],C=a[3];return h[0]=u[0]*f+u[4]*b+u[8]*S+u[12]*C,h[1]=u[1]*f+u[5]*b+u[9]*S+u[13]*C,h[2]=u[2]*f+u[6]*b+u[10]*S+u[14]*C,h[3]=u[3]*f+u[7]*b+u[11]*S+u[15]*C,h}function fe(){var h=new W(4);return W!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function ve(h,a,u,f){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",S=Math.PI/360;a*=S,f*=S,u*=S;var C=Math.sin(a),I=Math.cos(a),O=Math.sin(u),N=Math.cos(u),B=Math.sin(f),G=Math.cos(f);switch(b){case"xyz":h[0]=C*N*G+I*O*B,h[1]=I*O*G-C*N*B,h[2]=I*N*B+C*O*G,h[3]=I*N*G-C*O*B;break;case"xzy":h[0]=C*N*G-I*O*B,h[1]=I*O*G-C*N*B,h[2]=I*N*B+C*O*G,h[3]=I*N*G+C*O*B;break;case"yxz":h[0]=C*N*G+I*O*B,h[1]=I*O*G-C*N*B,h[2]=I*N*B-C*O*G,h[3]=I*N*G+C*O*B;break;case"yzx":h[0]=C*N*G+I*O*B,h[1]=I*O*G+C*N*B,h[2]=I*N*B-C*O*G,h[3]=I*N*G-C*O*B;break;case"zxy":h[0]=C*N*G-I*O*B,h[1]=I*O*G+C*N*B,h[2]=I*N*B+C*O*G,h[3]=I*N*G-C*O*B;break;case"zyx":h[0]=C*N*G-I*O*B,h[1]=I*O*G+C*N*B,h[2]=I*N*B-C*O*G,h[3]=I*N*G+C*O*B;break;default:throw new Error("Unknown angle order "+b)}return h}function xe(){var h=new W(2);return W!=Float32Array&&(h[0]=0,h[1]=0),h}function Xe(h,a){var u=new W(2);return u[0]=h,u[1]=a,u}ne(),we=new W(4),W!=Float32Array&&(we[0]=0,we[1]=0,we[2]=0,we[3]=0),ne(),U(1,0,0),U(0,1,0),fe(),fe(),X(),xe();const Ke=8192;function Ze(h,a,u){return a*(Ke/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}function bt(h,a){return(h%a+a)%a}function qe(h,a,u){return h*(1-u)+a*u}function kt(h){if(h<=0)return 0;if(h>=1)return 1;const a=h*h,u=a*h;return 4*(h<.5?u:3*(h-a)+u-.75)}function Jt(h,a,u,f){const b=new A(h,a,u,f);return S=>b.solve(S)}const Pt=Jt(.25,.1,.25,1);function dt(h,a,u){return Math.min(u,Math.max(a,h))}function er(h,a,u){const f=u-a,b=((h-a)%f+f)%f+a;return b===a?u:b}function Wt(h,...a){for(const u of a)for(const f in u)h[f]=u[f];return h}let ar=1;function _t(h,a,u){const f={};for(const b in h)f[b]=a.call(this,h[b],b,h);return f}function Ve(h,a,u){const f={};for(const b in h)a.call(this,h[b],b,h)&&(f[b]=h[b]);return f}function pt(h){return Array.isArray(h)?h.map(pt):typeof h=="object"&&h?_t(h,pt):h}const lt={};function Tt(h){lt[h]||(typeof console<"u"&&console.warn(h),lt[h]=!0)}function vt(h,a,u){return(u.y-h.y)*(a.x-h.x)>(a.y-h.y)*(u.x-h.x)}function Dt(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Yt=null;function Bt(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const wr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Vr(h,a,u,f,b){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(h,{timestamp:0});try{const C=S?.format;if(!C||!C.startsWith("BGR")&&!C.startsWith("RGB"))throw new Error(`Unrecognized format ${C}`);const I=C.startsWith("BGR"),O=new Uint8ClampedArray(f*b*4);if(yield S.copyTo(O,function(N,B,G,Q,ie){const se=4*Math.max(-B,0),ce=(Math.max(0,G)-G)*Q*4+se,pe=4*Q,Ee=Math.max(0,B),Ue=Math.max(0,G);return{rect:{x:Ee,y:Ue,width:Math.min(N.width,B+Q)-Ee,height:Math.min(N.height,G+ie)-Ue},layout:[{offset:ce,stride:pe}]}}(h,a,u,f,b)),I)for(let N=0;N<O.length;N+=4){const B=O[N];O[N]=O[N+2],O[N+2]=B}return O}finally{S.close()}})}let Ir,Zr;function yr(h,a,u,f){return h.addEventListener(a,u,f),{unsubscribe:()=>{h.removeEventListener(a,u,f)}}}function ur(h){return h*Math.PI/180}function lr(h){return h/Math.PI*180}const nr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},mr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Yr="AbortError";function ke(){return new Error(Yr)}const oe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ae(h){return oe.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const de="global-dispatcher";class Te extends Error{constructor(a,u,f,b){super(`AJAXError: ${u} (${a}): ${f}`),this.status=a,this.statusText=u,this.url=f,this.body=b}}const Le=()=>Dt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,je=function(h,a){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const f=ae(h.url);if(f)return f(h,a);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:de},a)}if(!(/^file:/.test(u=h.url)||/^file:/.test(Le())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,b){return s(this,void 0,void 0,function*(){const S=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Le(),signal:b.signal});let C,I;f.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{C=yield fetch(S)}catch(N){throw new Te(0,N.message,f.url,new Blob)}if(!C.ok){const N=yield C.blob();throw new Te(C.status,C.statusText,f.url,N)}I=f.type==="arrayBuffer"||f.type==="image"?C.arrayBuffer():f.type==="json"?C.json():C.text();const O=yield I;if(b.signal.aborted)throw ke();return{data:O,cacheControl:C.headers.get("Cache-Control"),expires:C.headers.get("Expires")}})}(h,a);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:de},a)}var u;return function(f,b){return new Promise((S,C)=>{var I;const O=new XMLHttpRequest;O.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(O.responseType="arraybuffer");for(const N in f.headers)O.setRequestHeader(N,f.headers[N]);f.type==="json"&&(O.responseType="text",!((I=f.headers)===null||I===void 0)&&I.Accept||O.setRequestHeader("Accept","application/json")),O.withCredentials=f.credentials==="include",O.onerror=()=>{C(new Error(O.statusText))},O.onload=()=>{if(!b.signal.aborted)if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let N=O.response;if(f.type==="json")try{N=JSON.parse(O.response)}catch(B){return void C(B)}S({data:N,cacheControl:O.getResponseHeader("Cache-Control"),expires:O.getResponseHeader("Expires")})}else{const N=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});C(new Te(O.status,O.statusText,f.url,N))}},b.signal.addEventListener("abort",()=>{O.abort(),C(ke())}),O.send(f.body)})}(h,a)};function Je(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const a=new URL(h),u=window.location;return a.protocol===u.protocol&&a.host===u.host}function Fe(h,a,u){u[h]&&u[h].indexOf(a)!==-1||(u[h]=u[h]||[],u[h].push(a))}function tt(h,a,u){if(u&&u[h]){const f=u[h].indexOf(a);f!==-1&&u[h].splice(f,1)}}class ct{constructor(a,u={}){Wt(this,u),this.type=a}}class it extends ct{constructor(a,u={}){super("error",Wt({error:a},u))}}class Ot{on(a,u){return this._listeners=this._listeners||{},Fe(a,u,this._listeners),{unsubscribe:()=>{this.off(a,u)}}}off(a,u){return tt(a,u,this._listeners),tt(a,u,this._oneTimeListeners),this}once(a,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Fe(a,u,this._oneTimeListeners),this):new Promise(f=>this.once(a,f))}fire(a,u){typeof a=="string"&&(a=new ct(a,u||{}));const f=a.type;if(this.listens(f)){a.target=this;const b=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const I of b)I.call(this,a);const S=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const I of S)tt(f,I,this._oneTimeListeners),I.call(this,a);const C=this._eventedParent;C&&(Wt(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(a))}else a instanceof it&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,u){return this._eventedParent=a,this._eventedParentData=u,this}}var $e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Xt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function cr(h,a){const u={};for(const f in h)f!=="ref"&&(u[f]=h[f]);return Xt.forEach(f=>{f in a&&(u[f]=a[f])}),u}function Nt(h,a){if(Array.isArray(h)){if(!Array.isArray(a)||h.length!==a.length)return!1;for(let u=0;u<h.length;u++)if(!Nt(h[u],a[u]))return!1;return!0}if(typeof h=="object"&&h!==null&&a!==null){if(typeof a!="object"||Object.keys(h).length!==Object.keys(a).length)return!1;for(const u in h)if(!Nt(h[u],a[u]))return!1;return!0}return h===a}function Ht(h,a){h.push(a)}function _r(h,a,u){Ht(u,{command:"addSource",args:[h,a[h]]})}function ut(h,a,u){Ht(a,{command:"removeSource",args:[h]}),u[h]=!0}function Lt(h,a,u,f){ut(h,u,f),_r(h,a,u)}function Cr(h,a,u){let f;for(f in h[u])if(Object.prototype.hasOwnProperty.call(h[u],f)&&f!=="data"&&!Nt(h[u][f],a[u][f]))return!1;for(f in a[u])if(Object.prototype.hasOwnProperty.call(a[u],f)&&f!=="data"&&!Nt(h[u][f],a[u][f]))return!1;return!0}function Kt(h,a,u,f,b,S){h=h||{},a=a||{};for(const C in h)Object.prototype.hasOwnProperty.call(h,C)&&(Nt(h[C],a[C])||u.push({command:S,args:[f,C,a[C],b]}));for(const C in a)Object.prototype.hasOwnProperty.call(a,C)&&!Object.prototype.hasOwnProperty.call(h,C)&&(Nt(h[C],a[C])||u.push({command:S,args:[f,C,a[C],b]}))}function jt(h){return h.id}function Pr(h,a){return h[a.id]=a,h}class yt{constructor(a,u,f,b){this.message=(a?`${a}: `:"")+f,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function In(h,...a){for(const u of a)for(const f in u)h[f]=u[f];return h}class vn extends Error{constructor(a,u){super(u),this.message=u,this.key=a}}class mn{constructor(a,u=[]){this.parent=a,this.bindings={};for(const[f,b]of u)this.bindings[f]=b}concat(a){return new mn(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const fs={kind:"null"},Ct={kind:"number"},tr={kind:"string"},gr={kind:"boolean"},xn={kind:"color"},No={kind:"projectionDefinition"},ro={kind:"object"},hr={kind:"value"},ms={kind:"collator"},hi={kind:"formatted"},gs={kind:"padding"},E={kind:"colorArray"},D={kind:"numberArray"},J={kind:"resolvedImage"},me={kind:"variableAnchorOffsetCollection"};function ze(h,a){return{kind:"array",itemType:h,N:a}}function nt(h){if(h.kind==="array"){const a=nt(h.itemType);return typeof h.N=="number"?`array<${a}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${a}>`}return h.kind}const St=[fs,Ct,tr,gr,xn,No,hi,ro,ze(hr),gs,D,E,J,me];function rr(h,a){if(a.kind==="error")return null;if(h.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!rr(h.itemType,a.itemType))&&(typeof h.N!="number"||h.N===a.N))return null}else{if(h.kind===a.kind)return null;if(h.kind==="value"){for(const u of St)if(!rr(u,a))return null}}return`Expected ${nt(h)} but found ${nt(a)} instead.`}function Jr(h,a){return a.some(u=>u.kind===h.kind)}function Ar(h,a){return a.some(u=>u==="null"?h===null:u==="array"?Array.isArray(h):u==="object"?h&&!Array.isArray(h)&&typeof h=="object":u===typeof h)}function Xr(h,a){return h.kind==="array"&&a.kind==="array"?h.itemType.kind===a.itemType.kind&&typeof h.N=="number":h.kind===a.kind}const fo=.96422,ca=.82521,$n=4/29,di=6/29,ua=3*di*di,pw=di*di*di,fw=Math.PI/180,mw=180/Math.PI;function Vf(h){return(h%=360)<0&&(h+=360),h}function Gl([h,a,u,f]){let b,S;const C=Gf((.2225045*(h=Uf(h))+.7168786*(a=Uf(a))+.0606169*(u=Uf(u)))/1);h===a&&a===u?b=S=C:(b=Gf((.4360747*h+.3850649*a+.1430804*u)/fo),S=Gf((.0139322*h+.0971045*a+.7141733*u)/ca));const I=116*C-16;return[I<0?0:I,500*(b-C),200*(C-S),f]}function Uf(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Gf(h){return h>pw?Math.pow(h,1/3):h/ua+$n}function Hl([h,a,u,f]){let b=(h+16)/116,S=isNaN(a)?b:b+a/500,C=isNaN(u)?b:b-u/200;return b=1*Jf(b),S=fo*Jf(S),C=ca*Jf(C),[Hf(3.1338561*S-1.6168667*b-.4906146*C),Hf(-.9787684*S+1.9161415*b+.033454*C),Hf(.0719453*S-.2289914*b+1.4052427*C),f]}function Hf(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Jf(h){return h>di?h*h*h:ua*(h-$n)}const gw=Object.hasOwn||function(h,a){return Object.prototype.hasOwnProperty.call(h,a)};function Jl(h,a){return gw(h,a)?h[a]:void 0}function fu(h){return parseInt(h.padEnd(2,h),16)/255}function Fo(h,a){return Mr(a?h/100:h,0,1)}function Mr(h,a,u){return Math.min(Math.max(a,h),u)}function Ua(h){return!h.some(Number.isNaN)}const ha={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Fs(h,a,u){return h+u*(a-h)}function Ga(h,a,u){return h.map((f,b)=>Fs(f,a[b],u))}class Or{constructor(a,u,f,b=1,S=!0){this.r=a,this.g=u,this.b=f,this.a=b,S||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[a,u,f,b]))}static parse(a){if(a instanceof Or)return a;if(typeof a!="string")return;const u=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const b=Jl(ha,f);if(b){const[C,I,O]=b;return[C/255,I/255,O/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const C=f.length<6?1:2;let I=1;return[fu(f.slice(I,I+=C)),fu(f.slice(I,I+=C)),fu(f.slice(I,I+=C)),fu(f.slice(I,I+C)||"ff")]}if(f.startsWith("rgb")){const C=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[I,O,N,B,G,Q,ie,se,ce,pe,Ee,Ue]=C,Oe=[B||" ",ie||" ",pe].join("");if(Oe==="  "||Oe==="  /"||Oe===",,"||Oe===",,,"){const Ne=[N,Q,ce].join(""),et=Ne==="%%%"?100:Ne===""?255:0;if(et){const at=[Mr(+O/et,0,1),Mr(+G/et,0,1),Mr(+se/et,0,1),Ee?Fo(+Ee,Ue):1];if(Ua(at))return at}}return}}const S=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[C,I,O,N,B,G,Q,ie,se]=S,ce=[O||" ",B||" ",Q].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const pe=[+I,Mr(+N,0,100),Mr(+G,0,100),ie?Fo(+ie,se):1];if(Ua(pe))return function([Ee,Ue,Oe,Ne]){function et(at){const gt=(at+Ee/30)%12,Mt=Ue*Math.min(Oe,1-Oe);return Oe-Mt*Math.max(-1,Math.min(gt-3,9-gt,1))}return Ee=Vf(Ee),Ue/=100,Oe/=100,[et(0),et(8),et(4),Ne]}(pe)}}}(a);return u?new Or(...u,!1):void 0}get rgb(){const{r:a,g:u,b:f,a:b}=this,S=b||1/0;return this.overwriteGetter("rgb",[a/S,u/S,f/S,b])}get hcl(){return this.overwriteGetter("hcl",function(a){const[u,f,b,S]=Gl(a),C=Math.sqrt(f*f+b*b);return[Math.round(1e4*C)?Vf(Math.atan2(b,f)*mw):NaN,C,u,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Gl(this.rgb))}overwriteGetter(a,u){return Object.defineProperty(this,a,{value:u}),u}toString(){const[a,u,f,b]=this.rgb;return`rgba(${[a,u,f].map(S=>Math.round(255*S)).join(",")},${b})`}static interpolate(a,u,f,b="rgb"){switch(b){case"rgb":{const[S,C,I,O]=Ga(a.rgb,u.rgb,f);return new Or(S,C,I,O,!1)}case"hcl":{const[S,C,I,O]=a.hcl,[N,B,G,Q]=u.hcl;let ie,se;if(isNaN(S)||isNaN(N))isNaN(S)?isNaN(N)?ie=NaN:(ie=N,I!==1&&I!==0||(se=B)):(ie=S,G!==1&&G!==0||(se=C));else{let Oe=N-S;N>S&&Oe>180?Oe-=360:N<S&&S-N>180&&(Oe+=360),ie=S+f*Oe}const[ce,pe,Ee,Ue]=function([Oe,Ne,et,at]){return Oe=isNaN(Oe)?0:Oe*fw,Hl([et,Math.cos(Oe)*Ne,Math.sin(Oe)*Ne,at])}([ie,se??Fs(C,B,f),Fs(I,G,f),Fs(O,Q,f)]);return new Or(ce,pe,Ee,Ue,!1)}case"lab":{const[S,C,I,O]=Hl(Ga(a.lab,u.lab,f));return new Or(S,C,I,O,!1)}}}}Or.black=new Or(0,0,0,1),Or.white=new Or(1,1,1,1),Or.transparent=new Or(0,0,0,0),Or.red=new Or(1,0,0,1);class Ha{constructor(a,u,f){this.sensitivity=a?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,u){return this.collator.compare(a,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const ud=["bottom","center","top"];class hd{constructor(a,u,f,b,S,C){this.text=a,this.image=u,this.scale=f,this.fontStack=b,this.textColor=S,this.verticalAlign=C}}class Ui{constructor(a){this.sections=a}static fromString(a){return new Ui([new hd(a,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Ui?a:Ui.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class pi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof pi)return a;if(typeof a=="number")return new pi([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const u of a)if(typeof u!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new pi(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,u,f){return new pi(Ga(a.values,u.values,f))}}class Gi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Gi)return a;if(typeof a=="number")return new Gi([a]);if(Array.isArray(a)){for(const u of a)if(typeof u!="number")return;return new Gi(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,u,f){return new Gi(Ga(a.values,u.values,f))}}class Kn{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Kn)return a;if(typeof a=="string"){const f=Or.parse(a);return f?new Kn([f]):void 0}if(!Array.isArray(a))return;const u=[];for(const f of a){if(typeof f!="string")return;const b=Or.parse(f);if(!b)return;u.push(b)}return new Kn(u)}toString(){return JSON.stringify(this.values)}static interpolate(a,u,f,b="rgb"){const S=[];if(a.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${a.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let C=0;C<a.values.length;C++)S.push(Or.interpolate(a.values[C],u.values[C],f,b));return new Kn(S)}}class gn extends Error{constructor(a){super(a),this.name="RuntimeError"}toJSON(){return this.message}}const w_=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Hi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Hi)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let u=0;u<a.length;u+=2){const f=a[u],b=a[u+1];if(typeof f!="string"||!w_.has(f)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new Hi(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,u,f){const b=a.values,S=u.values;if(b.length!==S.length)throw new gn(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${u.toString()}`);const C=[];for(let I=0;I<b.length;I+=2){if(b[I]!==S[I])throw new gn(`Cannot interpolate values containing mismatched anchors. from[${I}]: ${b[I]}, to[${I}]: ${S[I]}`);C.push(b[I]);const[O,N]=b[I+1],[B,G]=S[I+1];C.push([Fs(O,B,f),Fs(N,G,f)])}return new Hi(C)}}class mo{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new mo({name:a,available:!1}):null}}class zi{constructor(a,u,f){this.from=a,this.to=u,this.transition=f}static interpolate(a,u,f){return new zi(a,u,f)}static parse(a){return a instanceof zi?a:Array.isArray(a)&&a.length===3&&typeof a[0]=="string"&&typeof a[1]=="string"&&typeof a[2]=="number"?new zi(a[0],a[1],a[2]):typeof a=="object"&&typeof a.from=="string"&&typeof a.to=="string"&&typeof a.transition=="number"?new zi(a.from,a.to,a.transition):typeof a=="string"?new zi(a,a,1):void 0}}function Sn(h,a,u,f){return typeof h=="number"&&h>=0&&h<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[h,a,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[h,a,u,f]:[h,a,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ja(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof zi||h instanceof Or||h instanceof Ha||h instanceof Ui||h instanceof pi||h instanceof Gi||h instanceof Kn||h instanceof Hi||h instanceof mo)return!0;if(Array.isArray(h)){for(const a of h)if(!Ja(a))return!1;return!0}if(typeof h=="object"){for(const a in h)if(!Ja(h[a]))return!1;return!0}return!1}function or(h){if(h===null)return fs;if(typeof h=="string")return tr;if(typeof h=="boolean")return gr;if(typeof h=="number")return Ct;if(h instanceof Or)return xn;if(h instanceof zi)return No;if(h instanceof Ha)return ms;if(h instanceof Ui)return hi;if(h instanceof pi)return gs;if(h instanceof Gi)return D;if(h instanceof Kn)return E;if(h instanceof Hi)return me;if(h instanceof mo)return J;if(Array.isArray(h)){const a=h.length;let u;for(const f of h){const b=or(f);if(u){if(u===b)continue;u=hr;break}u=b}return ze(u||hr,a)}return ro}function br(h){const a=typeof h;return h===null?"":a==="string"||a==="number"||a==="boolean"?String(h):h instanceof Or||h instanceof zi||h instanceof Ui||h instanceof pi||h instanceof Gi||h instanceof Kn||h instanceof Hi||h instanceof mo?h.toString():JSON.stringify(h)}class zs{constructor(a,u){this.type=a,this.value=u}static parse(a,u){if(a.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Ja(a[1]))return u.error("invalid value");const f=a[1];let b=or(f);const S=u.expectedType;return b.kind!=="array"||b.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(b=S),new zs(b,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Wr={string:tr,number:Ct,boolean:gr,object:ro};class go{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let f,b=1;const S=a[0];if(S==="array"){let I,O;if(a.length>2){const N=a[1];if(typeof N!="string"||!(N in Wr)||N==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);I=Wr[N],b++}else I=hr;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return u.error('The length argument to "array" must be a positive integer literal',2);O=a[2],b++}f=ze(I,O)}else{if(!Wr[S])throw new Error(`Types doesn't contain name = ${S}`);f=Wr[S]}const C=[];for(;b<a.length;b++){const I=u.parse(a[b],b,hr);if(!I)return null;C.push(I)}return new go(f,C)}evaluate(a){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(a);if(!rr(this.type,or(f)))return f;if(u===this.args.length-1)throw new gn(`Expected value to be of type ${nt(this.type)}, but found ${nt(or(f))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const ys={"to-boolean":gr,"to-color":xn,"to-number":Ct,"to-string":tr};class _s{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const f=a[0];if(!ys[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&a.length!==2)return u.error("Expected one argument.");const b=ys[f],S=[];for(let C=1;C<a.length;C++){const I=u.parse(a[C],C,hr);if(!I)return null;S.push(I)}return new _s(b,S)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let u,f;for(const b of this.args){if(u=b.evaluate(a),f=null,u instanceof Or)return u;if(typeof u=="string"){const S=a.parseColor(u);if(S)return S}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Sn(u[0],u[1],u[2],u[3]),!f))return new Or(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new gn(f||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const f of this.args){u=f.evaluate(a);const b=pi.parse(u);if(b)return b}throw new gn(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(const f of this.args){u=f.evaluate(a);const b=Gi.parse(u);if(b)return b}throw new gn(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(const f of this.args){u=f.evaluate(a);const b=Kn.parse(u);if(b)return b}throw new gn(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const f of this.args){u=f.evaluate(a);const b=Hi.parse(u);if(b)return b}throw new gn(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const f of this.args){if(u=f.evaluate(a),u===null)return 0;const b=Number(u);if(!isNaN(b))return b}throw new gn(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Ui.fromString(br(this.args[0].evaluate(a)));case"resolvedImage":return mo.fromString(br(this.args[0].evaluate(a)));case"projectionDefinition":return this.args[0].evaluate(a);default:return br(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const dd=["Unknown","Point","LineString","Polygon"];class Wf{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?dd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let u=this._parseColorCache.get(a);return u||(u=Or.parse(a),this._parseColorCache.set(a,u)),u}}class Wl{constructor(a,u,f=[],b,S=new mn,C=[]){this.registry=a,this.path=f,this.key=f.map(I=>`[${I}]`).join(""),this.scope=S,this.errors=C,this.expectedType=b,this._isConstant=u}parse(a,u,f,b,S={}){return u?this.concat(u,f,b)._parse(a,S):this._parse(a,S)}_parse(a,u){function f(b,S,C){return C==="assert"?new go(S,[b]):C==="coerce"?new _s(S,[b]):b}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=a[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[b];if(S){let C=S.parse(a,this);if(!C)return null;if(this.expectedType){const I=this.expectedType,O=C.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||O.kind!=="value"){if(I.kind==="projectionDefinition"&&["string","array"].includes(O.kind)||["color","formatted","resolvedImage"].includes(I.kind)&&["value","string"].includes(O.kind)||["padding","numberArray"].includes(I.kind)&&["value","number","array"].includes(O.kind)||I.kind==="colorArray"&&["value","string","array"].includes(O.kind)||I.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(O.kind))C=f(C,I,u.typeAnnotation||"coerce");else if(this.checkSubtype(I,O))return null}else C=f(C,I,u.typeAnnotation||"assert")}if(!(C instanceof zs)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const I=new Wf;try{C=new zs(C.type,C.evaluate(I))}catch(O){return this.error(O.message),null}}return C}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,u,f){const b=typeof a=="number"?this.path.concat(a):this.path,S=f?this.scope.concat(f):this.scope;return new Wl(this.registry,this._isConstant,b,u||null,S,this.errors)}error(a,...u){const f=`${this.key}${u.map(b=>`[${b}]`).join("")}`;this.errors.push(new vn(f,a))}checkSubtype(a,u){const f=rr(a,u);return f&&this.error(f),f}}class mu{constructor(a,u){this.type=u.type,this.bindings=[].concat(a),this.result=u}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const u of this.bindings)a(u[1]);a(this.result)}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const f=[];for(let S=1;S<a.length-1;S+=2){const C=a[S];if(typeof C!="string")return u.error(`Expected string, but found ${typeof C} instead.`,S);if(/[^a-zA-Z0-9_]/.test(C))return u.error("Variable names must contain only alphanumeric characters or '_'.",S);const I=u.parse(a[S+1],S+1);if(!I)return null;f.push([C,I])}const b=u.parse(a[a.length-1],a.length-1,u.expectedType,f);return b?new mu(f,b):null}outputDefined(){return this.result.outputDefined()}}class pd{constructor(a,u){this.type=u.type,this.name=a,this.boundExpression=u}static parse(a,u){if(a.length!==2||typeof a[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=a[1];return u.scope.has(f)?new pd(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class fd{constructor(a,u,f){this.type=a,this.index=u,this.input=f}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=u.parse(a[1],1,Ct),b=u.parse(a[2],2,ze(u.expectedType||hr));return f&&b?new fd(b.type.itemType,f,b):null}evaluate(a){const u=this.index.evaluate(a),f=this.input.evaluate(a);if(u<0)throw new gn(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new gn(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new gn(`Array index must be an integer, but found ${u} instead.`);return f[u]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class md{constructor(a,u){this.type=gr,this.needle=a,this.haystack=u}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=u.parse(a[1],1,hr),b=u.parse(a[2],2,hr);return f&&b?Jr(f.type,[gr,tr,Ct,fs,hr])?new md(f,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${nt(f.type)} instead`):null}evaluate(a){const u=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!f)return!1;if(!Ar(u,["boolean","string","number","null"]))throw new gn(`Expected first argument to be of type boolean, string, number or null, but found ${nt(or(u))} instead.`);if(!Ar(f,["string","array"]))throw new gn(`Expected second argument to be of type array or string, but found ${nt(or(f))} instead.`);return f.indexOf(u)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class zo{constructor(a,u,f){this.type=Ct,this.needle=a,this.haystack=u,this.fromIndex=f}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const f=u.parse(a[1],1,hr),b=u.parse(a[2],2,hr);if(!f||!b)return null;if(!Jr(f.type,[gr,tr,Ct,fs,hr]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${nt(f.type)} instead`);if(a.length===4){const S=u.parse(a[3],3,Ct);return S?new zo(f,b,S):null}return new zo(f,b)}evaluate(a){const u=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!Ar(u,["boolean","string","number","null"]))throw new gn(`Expected first argument to be of type boolean, string, number or null, but found ${nt(or(u))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(a)),Ar(f,["string"])){const S=f.indexOf(u,b);return S===-1?-1:[...f.slice(0,S)].length}if(Ar(f,["array"]))return f.indexOf(u,b);throw new gn(`Expected second argument to be of type array or string, but found ${nt(or(f))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class fi{constructor(a,u,f,b,S,C){this.inputType=a,this.type=u,this.input=f,this.cases=b,this.outputs=S,this.otherwise=C}static parse(a,u){if(a.length<5)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return u.error("Expected an even number of arguments.");let f,b;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);const S={},C=[];for(let N=2;N<a.length-1;N+=2){let B=a[N];const G=a[N+1];Array.isArray(B)||(B=[B]);const Q=u.concat(N);if(B.length===0)return Q.error("Expected at least one branch label.");for(const se of B){if(typeof se!="number"&&typeof se!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof se=="number"&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return Q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof se=="number"&&Math.floor(se)!==se)return Q.error("Numeric branch labels must be integer values.");if(f){if(Q.checkSubtype(f,or(se)))return null}else f=or(se);if(S[String(se)]!==void 0)return Q.error("Branch labels must be unique.");S[String(se)]=C.length}const ie=u.parse(G,N,b);if(!ie)return null;b=b||ie.type,C.push(ie)}const I=u.parse(a[1],1,hr);if(!I)return null;const O=u.parse(a[a.length-1],a.length-1,b);return O?I.type.kind!=="value"&&u.concat(1).checkSubtype(f,I.type)?null:new fi(f,b,I,S,C,O):null}evaluate(a){const u=this.input.evaluate(a);return(or(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class Zl{constructor(a,u,f){this.type=a,this.branches=u,this.otherwise=f}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const b=[];for(let C=1;C<a.length-1;C+=2){const I=u.parse(a[C],C,gr);if(!I)return null;const O=u.parse(a[C+1],C+1,f);if(!O)return null;b.push([I,O]),f=f||O.type}const S=u.parse(a[a.length-1],a.length-1,f);if(!S)return null;if(!f)throw new Error("Can't infer output type");return new Zl(f,b,S)}evaluate(a){for(const[u,f]of this.branches)if(u.evaluate(a))return f.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[u,f]of this.branches)a(u),a(f);a(this.otherwise)}outputDefined(){return this.branches.every(([a,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class gu{constructor(a,u,f,b){this.type=a,this.input=u,this.beginIndex=f,this.endIndex=b}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const f=u.parse(a[1],1,hr),b=u.parse(a[2],2,Ct);if(!f||!b)return null;if(!Jr(f.type,[ze(hr),tr,hr]))return u.error(`Expected first argument to be of type array or string, but found ${nt(f.type)} instead`);if(a.length===4){const S=u.parse(a[3],3,Ct);return S?new gu(f.type,f,b,S):null}return new gu(f.type,f,b)}evaluate(a){const u=this.input.evaluate(a),f=this.beginIndex.evaluate(a);let b;if(this.endIndex&&(b=this.endIndex.evaluate(a)),Ar(u,["string"]))return[...u].slice(f,b).join("");if(Ar(u,["array"]))return u.slice(f,b);throw new gn(`Expected first argument to be of type array or string, but found ${nt(or(u))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Wa(h,a){const u=h.length-1;let f,b,S=0,C=u,I=0;for(;S<=C;)if(I=Math.floor((S+C)/2),f=h[I],b=h[I+1],f<=a){if(I===u||a<b)return I;S=I+1}else{if(!(f>a))throw new gn("Input is not a number.");C=I-1}return 0}class Vn{constructor(a,u,f){this.type=a,this.input=u,this.labels=[],this.outputs=[];for(const[b,S]of f)this.labels.push(b),this.outputs.push(S)}static parse(a,u){if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(a[1],1,Ct);if(!f)return null;const b=[];let S=null;u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);for(let C=1;C<a.length;C+=2){const I=C===1?-1/0:a[C],O=a[C+1],N=C,B=C+1;if(typeof I!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(b.length&&b[b.length-1][0]>=I)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const G=u.parse(O,B,S);if(!G)return null;S=S||G.type,b.push([I,G])}return new Vn(S,f,b)}evaluate(a){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(a);const b=this.input.evaluate(a);if(b<=u[0])return f[0].evaluate(a);const S=u.length;return b>=u[S-1]?f[S-1].evaluate(a):f[Wa(u,b)].evaluate(a)}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function E_(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var yu,Zf,yw=function(){if(Zf)return yu;function h(a,u,f,b){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=u,this.p2x=f,this.p2y=b}return Zf=1,yu=h,h.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,u){if(u===void 0&&(u=1e-6),a<0)return 0;if(a>1)return 1;for(var f=a,b=0;b<8;b++){var S=this.sampleCurveX(f)-a;if(Math.abs(S)<u)return f;var C=this.sampleCurveDerivativeX(f);if(Math.abs(C)<1e-6)break;f-=S/C}var I=0,O=1;for(f=a,b=0;b<20&&(S=this.sampleCurveX(f),!(Math.abs(S-a)<u));b++)a>S?I=f:O=f,f=.5*(O-I)+I;return f},solve:function(a,u){return this.sampleCurveY(this.solveCurveX(a,u))}},yu}(),Kl=E_(yw);class Pi{constructor(a,u,f,b,S){this.type=a,this.operator=u,this.interpolation=f,this.input=b,this.labels=[],this.outputs=[];for(const[C,I]of S)this.labels.push(C),this.outputs.push(I)}static interpolationFactor(a,u,f,b){let S=0;if(a.name==="exponential")S=_u(u,a.base,f,b);else if(a.name==="linear")S=_u(u,1,f,b);else if(a.name==="cubic-bezier"){const C=a.controlPoints;S=new Kl(C[0],C[1],C[2],C[3]).solve(_u(u,1,f,b))}return S}static parse(a,u){let[f,b,S,...C]=a;if(!Array.isArray(b)||b.length===0)return u.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const N=b[1];if(typeof N!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:N}}else{if(b[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const N=b.slice(1);if(N.length!==4||N.some(B=>typeof B!="number"||B<0||B>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:N}}}if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(S=u.parse(S,2,Ct),!S)return null;const I=[];let O=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||u.expectedType==E?u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType):O=xn;for(let N=0;N<C.length;N+=2){const B=C[N],G=C[N+1],Q=N+3,ie=N+4;if(typeof B!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(I.length&&I[I.length-1][0]>=B)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);const se=u.parse(G,ie,O);if(!se)return null;O=O||se.type,I.push([B,se])}return Xr(O,Ct)||Xr(O,No)||Xr(O,xn)||Xr(O,gs)||Xr(O,D)||Xr(O,E)||Xr(O,me)||Xr(O,ze(Ct))?new Pi(O,f,b,S,I):u.error(`Type ${nt(O)} is not interpolatable.`)}evaluate(a){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(a);const b=this.input.evaluate(a);if(b<=u[0])return f[0].evaluate(a);const S=u.length;if(b>=u[S-1])return f[S-1].evaluate(a);const C=Wa(u,b),I=Pi.interpolationFactor(this.interpolation,b,u[C],u[C+1]),O=f[C].evaluate(a),N=f[C+1].evaluate(a);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Fs(O,N,I);case"color":return Or.interpolate(O,N,I);case"padding":return pi.interpolate(O,N,I);case"colorArray":return Kn.interpolate(O,N,I);case"numberArray":return Gi.interpolate(O,N,I);case"variableAnchorOffsetCollection":return Hi.interpolate(O,N,I);case"array":return Ga(O,N,I);case"projectionDefinition":return zi.interpolate(O,N,I)}case"interpolate-hcl":switch(this.type.kind){case"color":return Or.interpolate(O,N,I,"hcl");case"colorArray":return Kn.interpolate(O,N,I,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Or.interpolate(O,N,I,"lab");case"colorArray":return Kn.interpolate(O,N,I,"lab")}}}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function _u(h,a,u,f){const b=f-u,S=h-u;return b===0?0:a===1?S/b:(Math.pow(a,S)-1)/(Math.pow(a,b)-1)}const bs={color:Or.interpolate,number:Fs,padding:pi.interpolate,numberArray:Gi.interpolate,colorArray:Kn.interpolate,variableAnchorOffsetCollection:Hi.interpolate,array:Ga};class bu{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let f=null;const b=u.expectedType;b&&b.kind!=="value"&&(f=b);const S=[];for(const I of a.slice(1)){const O=u.parse(I,1+S.length,f,void 0,{typeAnnotation:"omit"});if(!O)return null;f=f||O.type,S.push(O)}if(!f)throw new Error("No output type");const C=b&&S.some(I=>rr(b,I.type));return new bu(C?hr:f,S)}evaluate(a){let u,f=null,b=0;for(const S of this.args)if(b++,f=S.evaluate(a),f&&f instanceof mo&&!f.available&&(u||(u=f.name),f=null,b===this.args.length&&(f=u)),f!==null)break;return f}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}function vu(h,a){return h==="=="||h==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function xu(h,a,u,f){return f.compare(a,u)===0}function ji(h,a,u){const f=h!=="=="&&h!=="!=";return class DJ{constructor(S,C,I){this.type=gr,this.lhs=S,this.rhs=C,this.collator=I,this.hasUntypedArgument=S.type.kind==="value"||C.type.kind==="value"}static parse(S,C){if(S.length!==3&&S.length!==4)return C.error("Expected two or three arguments.");const I=S[0];let O=C.parse(S[1],1,hr);if(!O)return null;if(!vu(I,O.type))return C.concat(1).error(`"${I}" comparisons are not supported for type '${nt(O.type)}'.`);let N=C.parse(S[2],2,hr);if(!N)return null;if(!vu(I,N.type))return C.concat(2).error(`"${I}" comparisons are not supported for type '${nt(N.type)}'.`);if(O.type.kind!==N.type.kind&&O.type.kind!=="value"&&N.type.kind!=="value")return C.error(`Cannot compare types '${nt(O.type)}' and '${nt(N.type)}'.`);f&&(O.type.kind==="value"&&N.type.kind!=="value"?O=new go(N.type,[O]):O.type.kind!=="value"&&N.type.kind==="value"&&(N=new go(O.type,[N])));let B=null;if(S.length===4){if(O.type.kind!=="string"&&N.type.kind!=="string"&&O.type.kind!=="value"&&N.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(B=C.parse(S[3],3,ms),!B)return null}return new DJ(O,N,B)}evaluate(S){const C=this.lhs.evaluate(S),I=this.rhs.evaluate(S);if(f&&this.hasUntypedArgument){const O=or(C),N=or(I);if(O.kind!==N.kind||O.kind!=="string"&&O.kind!=="number")throw new gn(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${O.kind}, ${N.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const O=or(C),N=or(I);if(O.kind!=="string"||N.kind!=="string")return a(S,C,I)}return this.collator?u(S,C,I,this.collator.evaluate(S)):a(S,C,I)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const T_=ji("==",function(h,a,u){return a===u},xu),gd=ji("!=",function(h,a,u){return a!==u},function(h,a,u,f){return!xu(0,a,u,f)}),_w=ji("<",function(h,a,u){return a<u},function(h,a,u,f){return f.compare(a,u)<0}),Kf=ji(">",function(h,a,u){return a>u},function(h,a,u,f){return f.compare(a,u)>0}),bw=ji("<=",function(h,a,u){return a<=u},function(h,a,u,f){return f.compare(a,u)<=0}),vw=ji(">=",function(h,a,u){return a>=u},function(h,a,u,f){return f.compare(a,u)>=0});class yd{constructor(a,u,f){this.type=ms,this.locale=f,this.caseSensitive=a,this.diacriticSensitive=u}static parse(a,u){if(a.length!==2)return u.error("Expected one argument.");const f=a[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const b=u.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,gr);if(!b)return null;const S=u.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,gr);if(!S)return null;let C=null;return f.locale&&(C=u.parse(f.locale,1,tr),!C)?null:new yd(b,S,C)}evaluate(a){return new Ha(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class Yf{constructor(a,u,f,b,S){this.type=tr,this.number=a,this.locale=u,this.currency=f,this.minFractionDigits=b,this.maxFractionDigits=S}static parse(a,u){if(a.length!==3)return u.error("Expected two arguments.");const f=u.parse(a[1],1,Ct);if(!f)return null;const b=a[2];if(typeof b!="object"||Array.isArray(b))return u.error("NumberFormat options argument must be an object.");let S=null;if(b.locale&&(S=u.parse(b.locale,1,tr),!S))return null;let C=null;if(b.currency&&(C=u.parse(b.currency,1,tr),!C))return null;let I=null;if(b["min-fraction-digits"]&&(I=u.parse(b["min-fraction-digits"],1,Ct),!I))return null;let O=null;return b["max-fraction-digits"]&&(O=u.parse(b["max-fraction-digits"],1,Ct),!O)?null:new Yf(f,S,C,I,O)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Za{constructor(a){this.type=hi,this.sections=a}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const f=a[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const b=[];let S=!1;for(let C=1;C<=a.length-1;++C){const I=a[C];if(S&&typeof I=="object"&&!Array.isArray(I)){S=!1;let O=null;if(I["font-scale"]&&(O=u.parse(I["font-scale"],1,Ct),!O))return null;let N=null;if(I["text-font"]&&(N=u.parse(I["text-font"],1,ze(tr)),!N))return null;let B=null;if(I["text-color"]&&(B=u.parse(I["text-color"],1,xn),!B))return null;let G=null;if(I["vertical-align"]){if(typeof I["vertical-align"]=="string"&&!ud.includes(I["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${I["vertical-align"]}' instead.`);if(G=u.parse(I["vertical-align"],1,tr),!G)return null}const Q=b[b.length-1];Q.scale=O,Q.font=N,Q.textColor=B,Q.verticalAlign=G}else{const O=u.parse(a[C],1,hr);if(!O)return null;const N=O.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,b.push({content:O,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Za(b)}evaluate(a){return new Ui(this.sections.map(u=>{const f=u.content.evaluate(a);return or(f)===J?new hd("",f,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(a):null):new hd(br(f),null,u.scale?u.scale.evaluate(a):null,u.font?u.font.evaluate(a).join(","):null,u.textColor?u.textColor.evaluate(a):null,u.verticalAlign?u.verticalAlign.evaluate(a):null)}))}eachChild(a){for(const u of this.sections)a(u.content),u.scale&&a(u.scale),u.font&&a(u.font),u.textColor&&a(u.textColor),u.verticalAlign&&a(u.verticalAlign)}outputDefined(){return!1}}class Xf{constructor(a){this.type=J,this.input=a}static parse(a,u){if(a.length!==2)return u.error("Expected two arguments.");const f=u.parse(a[1],1,tr);return f?new Xf(f):u.error("No image name provided.")}evaluate(a){const u=this.input.evaluate(a),f=mo.fromString(u);return f&&a.availableImages&&(f.available=a.availableImages.indexOf(u)>-1),f}eachChild(a){a(this.input)}outputDefined(){return!1}}class _d{constructor(a){this.type=Ct,this.input=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=u.parse(a[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${nt(f.type)} instead.`):new _d(f):null}evaluate(a){const u=this.input.evaluate(a);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new gn(`Expected value to be of type string or array, but found ${nt(or(u))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const jo=8192;function xw(h,a){const u=(180+h[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,b=Math.pow(2,a.z);return[Math.round(u*b*jo),Math.round(f*b*jo)]}function bd(h,a){const u=Math.pow(2,a.z);return[(b=(h[0]/jo+a.x)/u,360*b-180),(f=(h[1]/jo+a.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,b}function wu(h,a){h[0]=Math.min(h[0],a[0]),h[1]=Math.min(h[1],a[1]),h[2]=Math.max(h[2],a[0]),h[3]=Math.max(h[3],a[1])}function Eu(h,a){return!(h[0]<=a[0]||h[2]>=a[2]||h[1]<=a[1]||h[3]>=a[3])}function ww(h,a,u){const f=h[0]-a[0],b=h[1]-a[1],S=h[0]-u[0],C=h[1]-u[1];return f*C-S*b==0&&f*S<=0&&b*C<=0}function vd(h,a,u,f){return(b=[f[0]-u[0],f[1]-u[1]])[0]*(S=[a[0]-h[0],a[1]-h[1]])[1]-b[1]*S[0]!=0&&!(!C_(h,a,u,f)||!C_(u,f,h,a));var b,S}function Ew(h,a,u){for(const f of u)for(let b=0;b<f.length-1;++b)if(vd(h,a,f[b],f[b+1]))return!0;return!1}function Ka(h,a,u=!1){let f=!1;for(const I of a)for(let O=0;O<I.length-1;O++){if(ww(h,I[O],I[O+1]))return u;(S=I[O])[1]>(b=h)[1]!=(C=I[O+1])[1]>b[1]&&b[0]<(C[0]-S[0])*(b[1]-S[1])/(C[1]-S[1])+S[0]&&(f=!f)}var b,S,C;return f}function S_(h,a){for(const u of a)if(Ka(h,u))return!0;return!1}function Qf(h,a){for(const u of h)if(!Ka(u,a))return!1;for(let u=0;u<h.length-1;++u)if(Ew(h[u],h[u+1],a))return!1;return!0}function Tw(h,a){for(const u of a)if(Qf(h,u))return!0;return!1}function C_(h,a,u,f){const b=f[0]-u[0],S=f[1]-u[1],C=(h[0]-u[0])*S-b*(h[1]-u[1]),I=(a[0]-u[0])*S-b*(a[1]-u[1]);return C>0&&I<0||C<0&&I>0}function em(h,a,u){const f=[];for(let b=0;b<h.length;b++){const S=[];for(let C=0;C<h[b].length;C++){const I=xw(h[b][C],u);wu(a,I),S.push(I)}f.push(S)}return f}function P_(h,a,u){const f=[];for(let b=0;b<h.length;b++){const S=em(h[b],a,u);f.push(S)}return f}function xd(h,a,u,f){if(h[0]<u[0]||h[0]>u[2]){const b=.5*f;let S=h[0]-u[0]>b?-f:u[0]-h[0]>b?f:0;S===0&&(S=h[0]-u[2]>b?-f:u[2]-h[0]>b?f:0),h[0]+=S}wu(a,h)}function A_(h,a,u,f){const b=Math.pow(2,f.z)*jo,S=[f.x*jo,f.y*jo],C=[];for(const I of h)for(const O of I){const N=[O.x+S[0],O.y+S[1]];xd(N,a,u,b),C.push(N)}return C}function R_(h,a,u,f){const b=Math.pow(2,f.z)*jo,S=[f.x*jo,f.y*jo],C=[];for(const O of h){const N=[];for(const B of O){const G=[B.x+S[0],B.y+S[1]];wu(a,G),N.push(G)}C.push(N)}if(a[2]-a[0]<=b/2){(I=a)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const O of C)for(const N of O)xd(N,a,u,b)}var I;return C}class Ya{constructor(a,u){this.type=gr,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Ja(a[1])){const f=a[1];if(f.type==="FeatureCollection"){const b=[];for(const S of f.features){const{type:C,coordinates:I}=S.geometry;C==="Polygon"&&b.push(I),C==="MultiPolygon"&&b.push(...I)}if(b.length)return new Ya(f,{type:"MultiPolygon",coordinates:b})}else if(f.type==="Feature"){const b=f.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Ya(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Ya(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(u,f){const b=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(f.type==="Polygon"){const I=em(f.coordinates,S,C),O=A_(u.geometry(),b,S,C);if(!Eu(b,S))return!1;for(const N of O)if(!Ka(N,I))return!1}if(f.type==="MultiPolygon"){const I=P_(f.coordinates,S,C),O=A_(u.geometry(),b,S,C);if(!Eu(b,S))return!1;for(const N of O)if(!S_(N,I))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(u,f){const b=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(f.type==="Polygon"){const I=em(f.coordinates,S,C),O=R_(u.geometry(),b,S,C);if(!Eu(b,S))return!1;for(const N of O)if(!Qf(N,I))return!1}if(f.type==="MultiPolygon"){const I=P_(f.coordinates,S,C),O=R_(u.geometry(),b,S,C);if(!Eu(b,S))return!1;for(const N of O)if(!Tw(N,I))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let tm=class{constructor(h=[],a=(u,f)=>u<f?-1:u>f?1:0){if(this.data=h,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:a,compare:u}=this,f=a[h];for(;h>0;){const b=h-1>>1,S=a[b];if(u(f,S)>=0)break;a[h]=S,h=b}a[h]=f}_down(h){const{data:a,compare:u}=this,f=this.length>>1,b=a[h];for(;h<f;){let S=1+(h<<1);const C=S+1;if(C<this.length&&u(a[C],a[S])<0&&(S=C),u(a[S],b)>=0)break;a[h]=a[S],h=S}a[h]=b}};function rm(h,a,u=0,f=h.length-1,b=Sw){for(;f>u;){if(f-u>600){const O=f-u+1,N=a-u+1,B=Math.log(O),G=.5*Math.exp(2*B/3),Q=.5*Math.sqrt(B*G*(O-G)/O)*(N-O/2<0?-1:1);rm(h,a,Math.max(u,Math.floor(a-N*G/O+Q)),Math.min(f,Math.floor(a+(O-N)*G/O+Q)),b)}const S=h[a];let C=u,I=f;for(Tu(h,u,a),b(h[f],S)>0&&Tu(h,u,f);C<I;){for(Tu(h,C,I),C++,I--;b(h[C],S)<0;)C++;for(;b(h[I],S)>0;)I--}b(h[u],S)===0?Tu(h,u,I):(I++,Tu(h,I,f)),I<=a&&(u=I+1),a<=I&&(f=I-1)}}function Tu(h,a,u){const f=h[a];h[a]=h[u],h[u]=f}function Sw(h,a){return h<a?-1:h>a?1:0}function Su(h,a){if(h.length<=1)return[h];const u=[];let f,b;for(const S of h){const C=Cw(S);C!==0&&(S.area=Math.abs(C),b===void 0&&(b=C<0),b===C<0?(f&&u.push(f),f=[S]):f.push(S))}if(f&&u.push(f),a>1)for(let S=0;S<u.length;S++)u[S].length<=a||(rm(u[S],a,1,u[S].length-1,I_),u[S]=u[S].slice(0,a));return u}function I_(h,a){return a.area-h.area}function Cw(h){let a=0;for(let u,f,b=0,S=h.length,C=S-1;b<S;C=b++)u=h[b],f=h[C],a+=(f.x-u.x)*(u.y+f.y);return a}const M_=1/298.257223563,O_=M_*(2-M_),nm=Math.PI/180;class im{constructor(a){const u=6378.137*nm*1e3,f=Math.cos(a*nm),b=1/(1-O_*(1-f*f)),S=Math.sqrt(b);this.kx=u*S*f,this.ky=u*S*b*(1-O_)}distance(a,u){const f=this.wrap(a[0]-u[0])*this.kx,b=(a[1]-u[1])*this.ky;return Math.sqrt(f*f+b*b)}pointOnLine(a,u){let f,b,S,C,I=1/0;for(let O=0;O<a.length-1;O++){let N=a[O][0],B=a[O][1],G=this.wrap(a[O+1][0]-N)*this.kx,Q=(a[O+1][1]-B)*this.ky,ie=0;G===0&&Q===0||(ie=(this.wrap(u[0]-N)*this.kx*G+(u[1]-B)*this.ky*Q)/(G*G+Q*Q),ie>1?(N=a[O+1][0],B=a[O+1][1]):ie>0&&(N+=G/this.kx*ie,B+=Q/this.ky*ie)),G=this.wrap(u[0]-N)*this.kx,Q=(u[1]-B)*this.ky;const se=G*G+Q*Q;se<I&&(I=se,f=N,b=B,S=O,C=ie)}return{point:[f,b],index:S,t:Math.max(0,Math.min(1,C))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function k_(h,a){return a[0]-h[0]}function wd(h){return h[1]-h[0]+1}function js(h,a){return h[1]>=h[0]&&h[1]<a}function Qr(h,a){if(h[0]>h[1])return[null,null];const u=wd(h);if(a){if(u===2)return[h,null];const b=Math.floor(u/2);return[[h[0],h[0]+b],[h[0]+b,h[1]]]}if(u===1)return[h,null];const f=Math.floor(u/2)-1;return[[h[0],h[0]+f],[h[0]+f+1,h[1]]]}function om(h,a){if(!js(a,h.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let f=a[0];f<=a[1];++f)wu(u,h[f]);return u}function sm(h){const a=[1/0,1/0,-1/0,-1/0];for(const u of h)for(const f of u)wu(a,f);return a}function L_(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function am(h,a,u){if(!L_(h)||!L_(a))return NaN;let f=0,b=0;return h[2]<a[0]&&(f=a[0]-h[2]),h[0]>a[2]&&(f=h[0]-a[2]),h[1]>a[3]&&(b=h[1]-a[3]),h[3]<a[1]&&(b=a[1]-h[3]),u.distance([0,0],[f,b])}function Xa(h,a,u){const f=u.pointOnLine(a,h);return u.distance(h,f.point)}function lm(h,a,u,f,b){const S=Math.min(Xa(h,[u,f],b),Xa(a,[u,f],b)),C=Math.min(Xa(u,[h,a],b),Xa(f,[h,a],b));return Math.min(S,C)}function Pw(h,a,u,f,b){if(!js(a,h.length)||!js(f,u.length))return 1/0;let S=1/0;for(let C=a[0];C<a[1];++C){const I=h[C],O=h[C+1];for(let N=f[0];N<f[1];++N){const B=u[N],G=u[N+1];if(vd(I,O,B,G))return 0;S=Math.min(S,lm(I,O,B,G,b))}}return S}function Aw(h,a,u,f,b){if(!js(a,h.length)||!js(f,u.length))return NaN;let S=1/0;for(let C=a[0];C<=a[1];++C)for(let I=f[0];I<=f[1];++I)if(S=Math.min(S,b.distance(h[C],u[I])),S===0)return S;return S}function Rw(h,a,u){if(Ka(h,a,!0))return 0;let f=1/0;for(const b of a){const S=b[0],C=b[b.length-1];if(S!==C&&(f=Math.min(f,Xa(h,[C,S],u)),f===0))return f;const I=u.pointOnLine(b,h);if(f=Math.min(f,u.distance(h,I.point)),f===0)return f}return f}function Iw(h,a,u,f){if(!js(a,h.length))return NaN;for(let S=a[0];S<=a[1];++S)if(Ka(h[S],u,!0))return 0;let b=1/0;for(let S=a[0];S<a[1];++S){const C=h[S],I=h[S+1];for(const O of u)for(let N=0,B=O.length,G=B-1;N<B;G=N++){const Q=O[G],ie=O[N];if(vd(C,I,Q,ie))return 0;b=Math.min(b,lm(C,I,Q,ie,f))}}return b}function D_(h,a){for(const u of h)for(const f of u)if(Ka(f,a,!0))return!0;return!1}function Mw(h,a,u,f=1/0){const b=sm(h),S=sm(a);if(f!==1/0&&am(b,S,u)>=f)return f;if(Eu(b,S)){if(D_(h,a))return 0}else if(D_(a,h))return 0;let C=1/0;for(const I of h)for(let O=0,N=I.length,B=N-1;O<N;B=O++){const G=I[B],Q=I[O];for(const ie of a)for(let se=0,ce=ie.length,pe=ce-1;se<ce;pe=se++){const Ee=ie[pe],Ue=ie[se];if(vd(G,Q,Ee,Ue))return 0;C=Math.min(C,lm(G,Q,Ee,Ue,u))}}return C}function N_(h,a,u,f,b,S){if(!S)return;const C=am(om(f,S),b,u);C<a&&h.push([C,S,[0,0]])}function Ed(h,a,u,f,b,S,C){if(!S||!C)return;const I=am(om(f,S),om(b,C),u);I<a&&h.push([I,S,C])}function Td(h,a,u,f,b=1/0){let S=Math.min(f.distance(h[0],u[0][0]),b);if(S===0)return S;const C=new tm([[0,[0,h.length-1],[0,0]]],k_),I=sm(u);for(;C.length>0;){const O=C.pop();if(O[0]>=S)continue;const N=O[1],B=a?50:100;if(wd(N)<=B){if(!js(N,h.length))return NaN;if(a){const G=Iw(h,N,u,f);if(isNaN(G)||G===0)return G;S=Math.min(S,G)}else for(let G=N[0];G<=N[1];++G){const Q=Rw(h[G],u,f);if(S=Math.min(S,Q),S===0)return 0}}else{const G=Qr(N,a);N_(C,S,f,h,I,G[0]),N_(C,S,f,h,I,G[1])}}return S}function Sd(h,a,u,f,b,S=1/0){let C=Math.min(S,b.distance(h[0],u[0]));if(C===0)return C;const I=new tm([[0,[0,h.length-1],[0,u.length-1]]],k_);for(;I.length>0;){const O=I.pop();if(O[0]>=C)continue;const N=O[1],B=O[2],G=a?50:100,Q=f?50:100;if(wd(N)<=G&&wd(B)<=Q){if(!js(N,h.length)&&js(B,u.length))return NaN;let ie;if(a&&f)ie=Pw(h,N,u,B,b),C=Math.min(C,ie);else if(a&&!f){const se=h.slice(N[0],N[1]+1);for(let ce=B[0];ce<=B[1];++ce)if(ie=Xa(u[ce],se,b),C=Math.min(C,ie),C===0)return C}else if(!a&&f){const se=u.slice(B[0],B[1]+1);for(let ce=N[0];ce<=N[1];++ce)if(ie=Xa(h[ce],se,b),C=Math.min(C,ie),C===0)return C}else ie=Aw(h,N,u,B,b),C=Math.min(C,ie)}else{const ie=Qr(N,a),se=Qr(B,f);Ed(I,C,b,h,u,ie[0],se[0]),Ed(I,C,b,h,u,ie[0],se[1]),Ed(I,C,b,h,u,ie[1],se[0]),Ed(I,C,b,h,u,ie[1],se[1])}}return C}function cm(h){return h.type==="MultiPolygon"?h.coordinates.map(a=>({type:"Polygon",coordinates:a})):h.type==="MultiLineString"?h.coordinates.map(a=>({type:"LineString",coordinates:a})):h.type==="MultiPoint"?h.coordinates.map(a=>({type:"Point",coordinates:a})):[h]}class Qa{constructor(a,u){this.type=Ct,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Ja(a[1])){const f=a[1];if(f.type==="FeatureCollection")return new Qa(f,f.features.map(b=>cm(b.geometry)).flat());if(f.type==="Feature")return new Qa(f,cm(f.geometry));if("type"in f&&"coordinates"in f)return new Qa(f,cm(f))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(u,f){const b=u.geometry(),S=b.flat().map(O=>bd([O.x,O.y],u.canonical));if(b.length===0)return NaN;const C=new im(S[0][1]);let I=1/0;for(const O of f){switch(O.type){case"Point":I=Math.min(I,Sd(S,!1,[O.coordinates],!1,C,I));break;case"LineString":I=Math.min(I,Sd(S,!1,O.coordinates,!0,C,I));break;case"Polygon":I=Math.min(I,Td(S,!1,O.coordinates,C,I))}if(I===0)return I}return I}(a,this.geometries);if(a.geometryType()==="LineString")return function(u,f){const b=u.geometry(),S=b.flat().map(O=>bd([O.x,O.y],u.canonical));if(b.length===0)return NaN;const C=new im(S[0][1]);let I=1/0;for(const O of f){switch(O.type){case"Point":I=Math.min(I,Sd(S,!0,[O.coordinates],!1,C,I));break;case"LineString":I=Math.min(I,Sd(S,!0,O.coordinates,!0,C,I));break;case"Polygon":I=Math.min(I,Td(S,!0,O.coordinates,C,I))}if(I===0)return I}return I}(a,this.geometries);if(a.geometryType()==="Polygon")return function(u,f){const b=u.geometry();if(b.length===0||b[0].length===0)return NaN;const S=Su(b,0).map(O=>O.map(N=>N.map(B=>bd([B.x,B.y],u.canonical)))),C=new im(S[0][0][0][1]);let I=1/0;for(const O of f)for(const N of S){switch(O.type){case"Point":I=Math.min(I,Td([O.coordinates],!1,N,C,I));break;case"LineString":I=Math.min(I,Td(O.coordinates,!0,N,C,I));break;case"Polygon":I=Math.min(I,Mw(N,O.coordinates,C,I))}if(I===0)return I}return I}(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Cu{constructor(a){this.type=hr,this.key=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=a[1];return f==null?u.error("Global state property must be defined."):typeof f!="string"?u.error(`Global state property must be string, but found ${typeof a[1]} instead.`):new Cu(f)}evaluate(a){var u;const f=(u=a.globals)===null||u===void 0?void 0:u.globalState;return f&&Object.keys(f).length!==0?Jl(f,this.key):null}eachChild(){}outputDefined(){return!1}}const Yl={"==":T_,"!=":gd,">":Kf,"<":_w,">=":vw,"<=":bw,array:go,at:fd,boolean:go,case:Zl,coalesce:bu,collator:yd,format:Za,image:Xf,in:md,"index-of":zo,interpolate:Pi,"interpolate-hcl":Pi,"interpolate-lab":Pi,length:_d,let:mu,literal:zs,match:fi,number:go,"number-format":Yf,object:go,slice:gu,step:Vn,string:go,"to-boolean":_s,"to-color":_s,"to-number":_s,"to-string":_s,var:pd,within:Ya,distance:Qa,"global-state":Cu};class To{constructor(a,u,f,b){this.name=a,this.type=u,this._evaluate=f,this.args=b}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,u){const f=a[0],b=To.definitions[f];if(!b)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(b)?b[0]:b.type,C=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,I=C.filter(([N])=>!Array.isArray(N)||N.length===a.length-1);let O=null;for(const[N,B]of I){O=new Wl(u.registry,Cd,u.path,null,u.scope);const G=[];let Q=!1;for(let ie=1;ie<a.length;ie++){const se=a[ie],ce=Array.isArray(N)?N[ie-1]:N.type,pe=O.parse(se,1+G.length,ce);if(!pe){Q=!0;break}G.push(pe)}if(!Q)if(Array.isArray(N)&&N.length!==G.length)O.error(`Expected ${N.length} arguments, but found ${G.length} instead.`);else{for(let ie=0;ie<G.length;ie++){const se=Array.isArray(N)?N[ie]:N.type,ce=G[ie];O.concat(ie+1).checkSubtype(se,ce.type)}if(O.errors.length===0)return new To(f,S,B,G)}}if(I.length===1)u.errors.push(...O.errors);else{const N=(I.length?I:C).map(([G])=>{return Q=G,Array.isArray(Q)?`(${Q.map(nt).join(", ")})`:`(${nt(Q.type)}...)`;var Q}).join(" | "),B=[];for(let G=1;G<a.length;G++){const Q=u.parse(a[G],1+B.length);if(!Q)return null;B.push(nt(Q.type))}u.error(`Expected arguments of type ${N}, but found (${B.join(", ")}) instead.`)}return null}static register(a,u){To.definitions=u;for(const f in u)a[f]=To}}function F_(h,[a,u,f,b]){a=a.evaluate(h),u=u.evaluate(h),f=f.evaluate(h);const S=b?b.evaluate(h):1,C=Sn(a,u,f,S);if(C)throw new gn(C);return new Or(a/255,u/255,f/255,S,!1)}function z_(h,a){return h in a}function um(h,a){const u=a[h];return u===void 0?null:u}function el(h){return{type:h}}function Cd(h){if(h instanceof pd)return Cd(h.boundExpression);if(h instanceof To&&h.name==="error"||h instanceof yd||h instanceof Ya||h instanceof Qa||h instanceof Cu)return!1;const a=h instanceof _s||h instanceof go;let u=!0;return h.eachChild(f=>{u=a?u&&Cd(f):u&&f instanceof zs}),!!u&&Pd(h)&&Ad(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Pd(h){if(h instanceof To&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Ya||h instanceof Qa)return!1;let a=!0;return h.eachChild(u=>{a&&!Pd(u)&&(a=!1)}),a}function Pu(h){if(h instanceof To&&h.name==="feature-state")return!1;let a=!0;return h.eachChild(u=>{a&&!Pu(u)&&(a=!1)}),a}function Ad(h,a){if(h instanceof To&&a.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild(f=>{u&&!Ad(f,a)&&(u=!1)}),u}function j_(h){return{result:"success",value:h}}function Xl(h){return{result:"error",value:h}}function da(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function B_(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function hm(h){return!!h.expression&&h.expression.interpolated}function Fr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Au(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&or(h)===ro}function Ow(h){return h}function q_(h,a){const u=h.stops&&typeof h.stops[0][0]=="object",f=u||!(u||h.property!==void 0),b=h.type||(hm(a)?"exponential":"interval"),S=function(B){switch(B.type){case"color":return Or.parse;case"padding":return pi.parse;case"numberArray":return Gi.parse;case"colorArray":return Kn.parse;default:return null}}(a);if(S&&((h=In({},h)).stops&&(h.stops=h.stops.map(B=>[B[0],S(B[1])])),h.default=S(h.default?h.default:a.default)),h.colorSpace&&(C=h.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var C;const I=function(B){switch(B){case"exponential":return V_;case"interval":return kw;case"categorical":return $_;case"identity":return Lw;default:throw new Error(`Unknown function type "${B}"`)}}(b);let O,N;if(b==="categorical"){O=Object.create(null);for(const B of h.stops)O[B[0]]=B[1];N=typeof h.stops[0][0]}if(u){const B={},G=[];for(let se=0;se<h.stops.length;se++){const ce=h.stops[se],pe=ce[0].zoom;B[pe]===void 0&&(B[pe]={zoom:pe,type:h.type,property:h.property,default:h.default,stops:[]},G.push(pe)),B[pe].stops.push([ce[0].value,ce[1]])}const Q=[];for(const se of G)Q.push([B[se].zoom,q_(B[se],a)]);const ie={name:"linear"};return{kind:"composite",interpolationType:ie,interpolationFactor:Pi.interpolationFactor.bind(void 0,ie),zoomStops:Q.map(se=>se[0]),evaluate:({zoom:se},ce)=>V_({stops:Q,base:h.base},a,se).evaluate(se,ce)}}if(f){const B=b==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:Pi.interpolationFactor.bind(void 0,B),zoomStops:h.stops.map(G=>G[0]),evaluate:({zoom:G})=>I(h,a,G,O,N)}}return{kind:"source",evaluate(B,G){const Q=G&&G.properties?G.properties[h.property]:void 0;return Q===void 0?pa(h.default,a.default):I(h,a,Q,O,N)}}}function pa(h,a,u){return h!==void 0?h:a!==void 0?a:u!==void 0?u:void 0}function $_(h,a,u,f,b){return pa(typeof u===b?f[u]:void 0,h.default,a.default)}function kw(h,a,u){if(Fr(u)!=="number")return pa(h.default,a.default);const f=h.stops.length;if(f===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[f-1][0])return h.stops[f-1][1];const b=Wa(h.stops.map(S=>S[0]),u);return h.stops[b][1]}function V_(h,a,u){const f=h.base!==void 0?h.base:1;if(Fr(u)!=="number")return pa(h.default,a.default);const b=h.stops.length;if(b===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[b-1][0])return h.stops[b-1][1];const S=Wa(h.stops.map(B=>B[0]),u),C=function(B,G,Q,ie){const se=ie-Q,ce=B-Q;return se===0?0:G===1?ce/se:(Math.pow(G,ce)-1)/(Math.pow(G,se)-1)}(u,f,h.stops[S][0],h.stops[S+1][0]),I=h.stops[S][1],O=h.stops[S+1][1],N=bs[a.type]||Ow;return typeof I.evaluate=="function"?{evaluate(...B){const G=I.evaluate.apply(void 0,B),Q=O.evaluate.apply(void 0,B);if(G!==void 0&&Q!==void 0)return N(G,Q,C,h.colorSpace)}}:N(I,O,C,h.colorSpace)}function Lw(h,a,u){switch(a.type){case"color":u=Or.parse(u);break;case"formatted":u=Ui.fromString(u.toString());break;case"resolvedImage":u=mo.fromString(u.toString());break;case"padding":u=pi.parse(u);break;case"colorArray":u=Kn.parse(u);break;case"numberArray":u=Gi.parse(u);break;default:Fr(u)===a.type||a.type==="enum"&&a.values[u]||(u=void 0)}return pa(u,h.default,a.default)}To.register(Yl,{error:[{kind:"error"},[tr],(h,[a])=>{throw new gn(a.evaluate(h))}],typeof:[tr,[hr],(h,[a])=>nt(or(a.evaluate(h)))],"to-rgba":[ze(Ct,4),[xn],(h,[a])=>{const[u,f,b,S]=a.evaluate(h).rgb;return[255*u,255*f,255*b,S]}],rgb:[xn,[Ct,Ct,Ct],F_],rgba:[xn,[Ct,Ct,Ct,Ct],F_],has:{type:gr,overloads:[[[tr],(h,[a])=>z_(a.evaluate(h),h.properties())],[[tr,ro],(h,[a,u])=>z_(a.evaluate(h),u.evaluate(h))]]},get:{type:hr,overloads:[[[tr],(h,[a])=>um(a.evaluate(h),h.properties())],[[tr,ro],(h,[a,u])=>um(a.evaluate(h),u.evaluate(h))]]},"feature-state":[hr,[tr],(h,[a])=>um(a.evaluate(h),h.featureState||{})],properties:[ro,[],h=>h.properties()],"geometry-type":[tr,[],h=>h.geometryType()],id:[hr,[],h=>h.id()],zoom:[Ct,[],h=>h.globals.zoom],"heatmap-density":[Ct,[],h=>h.globals.heatmapDensity||0],elevation:[Ct,[],h=>h.globals.elevation||0],"line-progress":[Ct,[],h=>h.globals.lineProgress||0],accumulated:[hr,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Ct,el(Ct),(h,a)=>{let u=0;for(const f of a)u+=f.evaluate(h);return u}],"*":[Ct,el(Ct),(h,a)=>{let u=1;for(const f of a)u*=f.evaluate(h);return u}],"-":{type:Ct,overloads:[[[Ct,Ct],(h,[a,u])=>a.evaluate(h)-u.evaluate(h)],[[Ct],(h,[a])=>-a.evaluate(h)]]},"/":[Ct,[Ct,Ct],(h,[a,u])=>a.evaluate(h)/u.evaluate(h)],"%":[Ct,[Ct,Ct],(h,[a,u])=>a.evaluate(h)%u.evaluate(h)],ln2:[Ct,[],()=>Math.LN2],pi:[Ct,[],()=>Math.PI],e:[Ct,[],()=>Math.E],"^":[Ct,[Ct,Ct],(h,[a,u])=>Math.pow(a.evaluate(h),u.evaluate(h))],sqrt:[Ct,[Ct],(h,[a])=>Math.sqrt(a.evaluate(h))],log10:[Ct,[Ct],(h,[a])=>Math.log(a.evaluate(h))/Math.LN10],ln:[Ct,[Ct],(h,[a])=>Math.log(a.evaluate(h))],log2:[Ct,[Ct],(h,[a])=>Math.log(a.evaluate(h))/Math.LN2],sin:[Ct,[Ct],(h,[a])=>Math.sin(a.evaluate(h))],cos:[Ct,[Ct],(h,[a])=>Math.cos(a.evaluate(h))],tan:[Ct,[Ct],(h,[a])=>Math.tan(a.evaluate(h))],asin:[Ct,[Ct],(h,[a])=>Math.asin(a.evaluate(h))],acos:[Ct,[Ct],(h,[a])=>Math.acos(a.evaluate(h))],atan:[Ct,[Ct],(h,[a])=>Math.atan(a.evaluate(h))],min:[Ct,el(Ct),(h,a)=>Math.min(...a.map(u=>u.evaluate(h)))],max:[Ct,el(Ct),(h,a)=>Math.max(...a.map(u=>u.evaluate(h)))],abs:[Ct,[Ct],(h,[a])=>Math.abs(a.evaluate(h))],round:[Ct,[Ct],(h,[a])=>{const u=a.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ct,[Ct],(h,[a])=>Math.floor(a.evaluate(h))],ceil:[Ct,[Ct],(h,[a])=>Math.ceil(a.evaluate(h))],"filter-==":[gr,[tr,hr],(h,[a,u])=>h.properties()[a.value]===u.value],"filter-id-==":[gr,[hr],(h,[a])=>h.id()===a.value],"filter-type-==":[gr,[tr],(h,[a])=>h.geometryType()===a.value],"filter-<":[gr,[tr,hr],(h,[a,u])=>{const f=h.properties()[a.value],b=u.value;return typeof f==typeof b&&f<b}],"filter-id-<":[gr,[hr],(h,[a])=>{const u=h.id(),f=a.value;return typeof u==typeof f&&u<f}],"filter->":[gr,[tr,hr],(h,[a,u])=>{const f=h.properties()[a.value],b=u.value;return typeof f==typeof b&&f>b}],"filter-id->":[gr,[hr],(h,[a])=>{const u=h.id(),f=a.value;return typeof u==typeof f&&u>f}],"filter-<=":[gr,[tr,hr],(h,[a,u])=>{const f=h.properties()[a.value],b=u.value;return typeof f==typeof b&&f<=b}],"filter-id-<=":[gr,[hr],(h,[a])=>{const u=h.id(),f=a.value;return typeof u==typeof f&&u<=f}],"filter->=":[gr,[tr,hr],(h,[a,u])=>{const f=h.properties()[a.value],b=u.value;return typeof f==typeof b&&f>=b}],"filter-id->=":[gr,[hr],(h,[a])=>{const u=h.id(),f=a.value;return typeof u==typeof f&&u>=f}],"filter-has":[gr,[hr],(h,[a])=>a.value in h.properties()],"filter-has-id":[gr,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[gr,[ze(tr)],(h,[a])=>a.value.indexOf(h.geometryType())>=0],"filter-id-in":[gr,[ze(hr)],(h,[a])=>a.value.indexOf(h.id())>=0],"filter-in-small":[gr,[tr,ze(hr)],(h,[a,u])=>u.value.indexOf(h.properties()[a.value])>=0],"filter-in-large":[gr,[tr,ze(hr)],(h,[a,u])=>function(f,b,S,C){for(;S<=C;){const I=S+C>>1;if(b[I]===f)return!0;b[I]>f?C=I-1:S=I+1}return!1}(h.properties()[a.value],u.value,0,u.value.length-1)],all:{type:gr,overloads:[[[gr,gr],(h,[a,u])=>a.evaluate(h)&&u.evaluate(h)],[el(gr),(h,a)=>{for(const u of a)if(!u.evaluate(h))return!1;return!0}]]},any:{type:gr,overloads:[[[gr,gr],(h,[a,u])=>a.evaluate(h)||u.evaluate(h)],[el(gr),(h,a)=>{for(const u of a)if(u.evaluate(h))return!0;return!1}]]},"!":[gr,[gr],(h,[a])=>!a.evaluate(h)],"is-supported-script":[gr,[tr],(h,[a])=>{const u=h.globals&&h.globals.isSupportedScript;return!u||u(a.evaluate(h))}],upcase:[tr,[tr],(h,[a])=>a.evaluate(h).toUpperCase()],downcase:[tr,[tr],(h,[a])=>a.evaluate(h).toLowerCase()],concat:[tr,el(hr),(h,a)=>a.map(u=>br(u.evaluate(h))).join("")],"resolved-locale":[tr,[ms],(h,[a])=>a.evaluate(h).resolvedLocale()]});class dm{constructor(a,u){this.expression=a,this._warningHistory={},this._evaluator=new Wf,this._defaultValue=u?function(f){if(f.type==="color"&&Au(f.default))return new Or(0,0,0,0);switch(f.type){case"color":return Or.parse(f.default)||null;case"padding":return pi.parse(f.default)||null;case"numberArray":return Gi.parse(f.default)||null;case"colorArray":return Kn.parse(f.default)||null;case"variableAnchorOffsetCollection":return Hi.parse(f.default)||null;case"projectionDefinition":return zi.parse(f.default)||null;default:return f.default===void 0?null:f.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(a,u,f,b,S,C){return this._evaluator.globals=a,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=b,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(a,u,f,b,S,C){this._evaluator.globals=a,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=b,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new gn(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function Rd(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Yl}function Ru(h,a){const u=new Wl(Yl,Cd,[],a?function(b){const S={color:xn,string:tr,number:Ct,enum:tr,boolean:gr,formatted:hi,padding:gs,numberArray:D,colorArray:E,projectionDefinition:No,resolvedImage:J,variableAnchorOffsetCollection:me};return b.type==="array"?ze(S[b.value]||hr,b.length):S[b.type]}(a):void 0),f=u.parse(h,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?j_(new dm(f,a)):Xl(u.errors)}class Iu{constructor(a,u){this.kind=a,this._styleExpression=u,this.isStateDependent=a!=="constant"&&!Pu(u.expression),this.globalStateRefs=ku(u.expression)}evaluateWithoutErrorHandling(a,u,f,b,S,C){return this._styleExpression.evaluateWithoutErrorHandling(a,u,f,b,S,C)}evaluate(a,u,f,b,S,C){return this._styleExpression.evaluate(a,u,f,b,S,C)}}class pm{constructor(a,u,f,b){this.kind=a,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=a!=="camera"&&!Pu(u.expression),this.globalStateRefs=ku(u.expression),this.interpolationType=b}evaluateWithoutErrorHandling(a,u,f,b,S,C){return this._styleExpression.evaluateWithoutErrorHandling(a,u,f,b,S,C)}evaluate(a,u,f,b,S,C){return this._styleExpression.evaluate(a,u,f,b,S,C)}interpolationFactor(a,u,f){return this.interpolationType?Pi.interpolationFactor(this.interpolationType,a,u,f):0}}function U_(h,a){const u=Ru(h,a);if(u.result==="error")return u;const f=u.value.expression,b=Pd(f);if(!b&&!da(a))return Xl([new vn("","data expressions not supported")]);const S=Ad(f,["zoom"]);if(!S&&!B_(a))return Xl([new vn("","zoom expressions not supported")]);const C=Ou(f);return C||S?C instanceof vn?Xl([C]):C instanceof Pi&&!hm(a)?Xl([new vn("",'"interpolate" expressions cannot be used with this property')]):j_(C?new pm(b?"camera":"composite",u.value,C.labels,C instanceof Pi?C.interpolation:void 0):new Iu(b?"constant":"source",u.value)):Xl([new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Mu{constructor(a,u){this._parameters=a,this._specification=u,In(this,q_(this._parameters,this._specification))}static deserialize(a){return new Mu(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Ou(h){let a=null;if(h instanceof mu)a=Ou(h.result);else if(h instanceof bu){for(const u of h.args)if(a=Ou(u),a)break}else(h instanceof Vn||h instanceof Pi)&&h.input instanceof To&&h.input.name==="zoom"&&(a=h);return a instanceof vn||h.eachChild(u=>{const f=Ou(u);f instanceof vn?a=f:!a&&f?a=new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&f&&a!==f&&(a=new vn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function ku(h,a=new Set){return h instanceof Cu&&a.add(h.key),h.eachChild(u=>{ku(u,a)}),a}function Id(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const a of h.slice(1))if(!Id(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const fm={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function tl(h){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Id(h)||(h=rl(h));const a=Ru(h,fm);if(a.result==="error")throw new Error(a.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,f,b)=>a.value.evaluate(u,f,{},b),needGeometry:Md(h),getGlobalStateRefs:()=>ku(a.value.expression)}}function mm(h,a){return h<a?-1:h>a?1:0}function Md(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let a=1;a<h.length;a++)if(Md(h[a]))return!0;return!1}function rl(h){if(!h)return!0;const a=h[0];return h.length<=1?a!=="any":a==="=="?gm(h[1],h[2],"=="):a==="!="?Od(gm(h[1],h[2],"==")):a==="<"||a===">"||a==="<="||a===">="?gm(h[1],h[2],a):a==="any"?(u=h.slice(1),["any"].concat(u.map(rl))):a==="all"?["all"].concat(h.slice(1).map(rl)):a==="none"?["all"].concat(h.slice(1).map(rl).map(Od)):a==="in"?G_(h[1],h.slice(2)):a==="!in"?Od(G_(h[1],h.slice(2))):a==="has"?H_(h[1]):a!=="!has"||Od(H_(h[1]));var u}function gm(h,a,u){switch(h){case"$type":return[`filter-type-${u}`,a];case"$id":return[`filter-id-${u}`,a];default:return[`filter-${u}`,h,a]}}function G_(h,a){if(a.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(u=>typeof u!=typeof a[0])?["filter-in-large",h,["literal",a.sort(mm)]]:["filter-in-small",h,["literal",a]]}}function H_(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Od(h){return["!",h]}function ym(h){const a=typeof h;if(a==="number"||a==="boolean"||a==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let b="[";for(const S of h)b+=`${ym(S)},`;return`${b}]`}const u=Object.keys(h).sort();let f="{";for(let b=0;b<u.length;b++)f+=`${JSON.stringify(u[b])}:${ym(h[u[b]])},`;return`${f}}`}function Dw(h){let a="";for(const u of Xt)a+=`/${ym(h[u])}`;return a}function _m(h){const a=h.value;return a?[new yt(h.key,a,"constants have been deprecated as of v8")]:[]}function Ln(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function vs(h){if(Array.isArray(h))return h.map(vs);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const a={};for(const u in h)a[u]=vs(h[u]);return a}return Ln(h)}function So(h){const a=h.key,u=h.value,f=h.valueSpec||{},b=h.objectElementValidators||{},S=h.style,C=h.styleSpec,I=h.validateSpec;let O=[];const N=Fr(u);if(N!=="object")return[new yt(a,u,`object expected, ${N} found`)];for(const B in u){const G=B.split(".")[0],Q=Jl(f,G)||f["*"];let ie;if(Jl(b,G))ie=b[G];else if(Jl(f,G))ie=I;else if(b["*"])ie=b["*"];else{if(!f["*"]){O.push(new yt(a,u[B],`unknown property "${B}"`));continue}ie=I}O=O.concat(ie({key:(a&&`${a}.`)+B,value:u[B],valueSpec:Q,style:S,styleSpec:C,object:u,objectKey:B,validateSpec:I},u))}for(const B in f)b[B]||f[B].required&&f[B].default===void 0&&u[B]===void 0&&O.push(new yt(a,u,`missing required property "${B}"`));return O}function kd(h){const a=h.value,u=h.valueSpec,f=h.style,b=h.styleSpec,S=h.key,C=h.arrayElementValidator||h.validateSpec;if(Fr(a)!=="array")return[new yt(S,a,`array expected, ${Fr(a)} found`)];if(u.length&&a.length!==u.length)return[new yt(S,a,`array length ${u.length} expected, length ${a.length} found`)];if(u["min-length"]&&a.length<u["min-length"])return[new yt(S,a,`array length at least ${u["min-length"]} expected, length ${a.length} found`)];let I={type:u.value,values:u.values};b.$version<7&&(I.function=u.function),Fr(u.value)==="object"&&(I=u.value);let O=[];for(let N=0;N<a.length;N++)O=O.concat(C({array:a,arrayIndex:N,value:a[N],valueSpec:I,validateSpec:h.validateSpec,style:f,styleSpec:b,key:`${S}[${N}]`}));return O}function Lu(h){const a=h.key,u=h.value,f=h.valueSpec;let b=Fr(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new yt(a,u,`number expected, ${b} found`)]:"minimum"in f&&u<f.minimum?[new yt(a,u,`${u} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&u>f.maximum?[new yt(a,u,`${u} is greater than the maximum value ${f.maximum}`)]:[]}function J_(h){const a=h.valueSpec,u=Ln(h.value.type);let f,b,S,C={};const I=u!=="categorical"&&h.value.property===void 0,O=!I,N=Fr(h.value.stops)==="array"&&Fr(h.value.stops[0])==="array"&&Fr(h.value.stops[0][0])==="object",B=So({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ie){if(u==="identity")return[new yt(ie.key,ie.value,'identity function may not have a "stops" property')];let se=[];const ce=ie.value;return se=se.concat(kd({key:ie.key,value:ce,valueSpec:ie.valueSpec,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:G})),Fr(ce)==="array"&&ce.length===0&&se.push(new yt(ie.key,ce,"array must have at least one stop")),se},default:function(ie){return ie.validateSpec({key:ie.key,value:ie.value,valueSpec:a,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec})}}});return u==="identity"&&I&&B.push(new yt(h.key,h.value,'missing required property "property"')),u==="identity"||h.value.stops||B.push(new yt(h.key,h.value,'missing required property "stops"')),u==="exponential"&&h.valueSpec.expression&&!hm(h.valueSpec)&&B.push(new yt(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(O&&!da(h.valueSpec)?B.push(new yt(h.key,h.value,"property functions not supported")):I&&!B_(h.valueSpec)&&B.push(new yt(h.key,h.value,"zoom functions not supported"))),u!=="categorical"&&!N||h.value.property!==void 0||B.push(new yt(h.key,h.value,'"property" property is required')),B;function G(ie){let se=[];const ce=ie.value,pe=ie.key;if(Fr(ce)!=="array")return[new yt(pe,ce,`array expected, ${Fr(ce)} found`)];if(ce.length!==2)return[new yt(pe,ce,`array length 2 expected, length ${ce.length} found`)];if(N){if(Fr(ce[0])!=="object")return[new yt(pe,ce,`object expected, ${Fr(ce[0])} found`)];if(ce[0].zoom===void 0)return[new yt(pe,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new yt(pe,ce,"object stop key must have value")];if(S&&S>Ln(ce[0].zoom))return[new yt(pe,ce[0].zoom,"stop zoom values must appear in ascending order")];Ln(ce[0].zoom)!==S&&(S=Ln(ce[0].zoom),b=void 0,C={}),se=se.concat(So({key:`${pe}[0]`,value:ce[0],valueSpec:{zoom:{}},validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:Lu,value:Q}}))}else se=se.concat(Q({key:`${pe}[0]`,value:ce[0],validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec},ce));return Rd(vs(ce[1]))?se.concat([new yt(`${pe}[1]`,ce[1],"expressions are not allowed in function stops.")]):se.concat(ie.validateSpec({key:`${pe}[1]`,value:ce[1],valueSpec:a,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec}))}function Q(ie,se){const ce=Fr(ie.value),pe=Ln(ie.value),Ee=ie.value!==null?ie.value:se;if(f){if(ce!==f)return[new yt(ie.key,Ee,`${ce} stop domain type must match previous stop domain type ${f}`)]}else f=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new yt(ie.key,Ee,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&u!=="categorical"){let Ue=`number expected, ${ce} found`;return da(a)&&u===void 0&&(Ue+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(ie.key,Ee,Ue)]}return u!=="categorical"||ce!=="number"||isFinite(pe)&&Math.floor(pe)===pe?u!=="categorical"&&ce==="number"&&b!==void 0&&pe<b?[new yt(ie.key,Ee,"stop domain values must appear in ascending order")]:(b=pe,u==="categorical"&&pe in C?[new yt(ie.key,Ee,"stop domain values must be unique")]:(C[pe]=!0,[])):[new yt(ie.key,Ee,`integer expected, found ${pe}`)]}}function nl(h){const a=(h.expressionContext==="property"?U_:Ru)(vs(h.value),h.valueSpec);if(a.result==="error")return a.value.map(f=>new yt(`${h.key}${f.key}`,h.value,f.message));const u=a.value.expression||a.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!u.outputDefined())return[new yt(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Pu(u))return[new yt(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Pu(u))return[new yt(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Ad(u,["zoom","feature-state"]))return[new yt(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Pd(u))return[new yt(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ld(h){const a=h.key,u=h.value,f=Fr(u);return f!=="string"?[new yt(a,u,`color expected, ${f} found`)]:Or.parse(String(u))?[]:[new yt(a,u,`color expected, "${u}" found`)]}function Bs(h){const a=h.key,u=h.value,f=h.valueSpec,b=[];return Array.isArray(f.values)?f.values.indexOf(Ln(u))===-1&&b.push(new yt(a,u,`expected one of [${f.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(f.values).indexOf(Ln(u))===-1&&b.push(new yt(a,u,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(u)} found`)),b}function bm(h){return Id(vs(h.value))?nl(In({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):W_(h)}function W_(h){const a=h.value,u=h.key;if(Fr(a)!=="array")return[new yt(u,a,`array expected, ${Fr(a)} found`)];const f=h.styleSpec;let b,S=[];if(a.length<1)return[new yt(u,a,"filter array must have at least 1 element")];switch(S=S.concat(Bs({key:`${u}[0]`,value:a[0],valueSpec:f.filter_operator,style:h.style,styleSpec:h.styleSpec})),Ln(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&Ln(a[1])==="$type"&&S.push(new yt(u,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&S.push(new yt(u,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(b=Fr(a[1]),b!=="string"&&S.push(new yt(`${u}[1]`,a[1],`string expected, ${b} found`)));for(let C=2;C<a.length;C++)b=Fr(a[C]),Ln(a[1])==="$type"?S=S.concat(Bs({key:`${u}[${C}]`,value:a[C],valueSpec:f.geometry_type,style:h.style,styleSpec:h.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&S.push(new yt(`${u}[${C}]`,a[C],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let C=1;C<a.length;C++)S=S.concat(W_({key:`${u}[${C}]`,value:a[C],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":b=Fr(a[1]),a.length!==2?S.push(new yt(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):b!=="string"&&S.push(new yt(`${u}[1]`,a[1],`string expected, ${b} found`))}return S}function Z_(h,a){const u=h.key,f=h.validateSpec,b=h.style,S=h.styleSpec,C=h.value,I=h.objectKey,O=S[`${a}_${h.layerType}`];if(!O)return[];const N=I.match(/^(.*)-transition$/);if(a==="paint"&&N&&O[N[1]]&&O[N[1]].transition)return f({key:u,value:C,valueSpec:S.transition,style:b,styleSpec:S});const B=h.valueSpec||O[I];if(!B)return[new yt(u,C,`unknown property "${I}"`)];let G;if(Fr(C)==="string"&&da(B)&&!B.tokens&&(G=/^{([^}]+)}$/.exec(C)))return[new yt(u,C,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const Q=[];return h.layerType==="symbol"&&(I==="text-field"&&b&&!b.glyphs&&Q.push(new yt(u,C,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&Au(vs(C))&&Ln(C.type)==="identity"&&Q.push(new yt(u,C,'"text-font" does not support identity functions'))),Q.concat(f({key:h.key,value:C,valueSpec:B,style:b,styleSpec:S,expressionContext:"property",propertyType:a,propertyKey:I}))}function K_(h){return Z_(h,"paint")}function Y_(h){return Z_(h,"layout")}function X_(h){let a=[];const u=h.value,f=h.key,b=h.style,S=h.styleSpec;if(Fr(u)!=="object")return[new yt(f,u,`object expected, ${Fr(u)} found`)];u.type||u.ref||a.push(new yt(f,u,'either "type" or "ref" is required'));let C=Ln(u.type);const I=Ln(u.ref);if(u.id){const O=Ln(u.id);for(let N=0;N<h.arrayIndex;N++){const B=b.layers[N];Ln(B.id)===O&&a.push(new yt(f,u.id,`duplicate layer id "${u.id}", previously used at line ${B.id.__line__}`))}}if("ref"in u){let O;["type","source","source-layer","filter","layout"].forEach(N=>{N in u&&a.push(new yt(f,u[N],`"${N}" is prohibited for ref layers`))}),b.layers.forEach(N=>{Ln(N.id)===I&&(O=N)}),O?O.ref?a.push(new yt(f,u.ref,"ref cannot reference another ref layer")):C=Ln(O.type):a.push(new yt(f,u.ref,`ref layer "${I}" not found`))}else if(C!=="background")if(u.source){const O=b.sources&&b.sources[u.source],N=O&&Ln(O.type);O?N==="vector"&&C==="raster"?a.push(new yt(f,u.source,`layer "${u.id}" requires a raster source`)):N!=="raster-dem"&&C==="hillshade"||N!=="raster-dem"&&C==="color-relief"?a.push(new yt(f,u.source,`layer "${u.id}" requires a raster-dem source`)):N==="raster"&&C!=="raster"?a.push(new yt(f,u.source,`layer "${u.id}" requires a vector source`)):N!=="vector"||u["source-layer"]?N==="raster-dem"&&C!=="hillshade"&&C!=="color-relief"?a.push(new yt(f,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):C!=="line"||!u.paint||!u.paint["line-gradient"]||N==="geojson"&&O.lineMetrics||a.push(new yt(f,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new yt(f,u,`layer "${u.id}" must specify a "source-layer"`)):a.push(new yt(f,u.source,`source "${u.source}" not found`))}else a.push(new yt(f,u,'missing required property "source"'));return a=a.concat(So({key:f,value:u,valueSpec:S.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${f}.type`,value:u.type,valueSpec:S.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:u,objectKey:"type"}),filter:bm,layout:O=>So({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":N=>Y_(In({layerType:C},N))}}),paint:O=>So({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":N=>K_(In({layerType:C},N))}})}})),a}function Bo(h){const a=h.value,u=h.key,f=Fr(a);return f!=="string"?[new yt(u,a,`string expected, ${f} found`)]:[]}const Ql={promoteId:function({key:h,value:a}){if(Fr(a)==="string")return Bo({key:h,value:a});{const u=[];for(const f in a)u.push(...Bo({key:`${h}.${f}`,value:a[f]}));return u}}};function no(h){const a=h.value,u=h.key,f=h.styleSpec,b=h.style,S=h.validateSpec;if(!a.type)return[new yt(u,a,'"type" is required')];const C=Ln(a.type);let I;switch(C){case"vector":case"raster":return I=So({key:u,value:a,valueSpec:f[`source_${C.replace("-","_")}`],style:h.style,styleSpec:f,objectElementValidators:Ql,validateSpec:S}),I;case"raster-dem":return I=function(O){var N;const B=(N=O.sourceName)!==null&&N!==void 0?N:"",G=O.value,Q=O.styleSpec,ie=Q.source_raster_dem,se=O.style;let ce=[];const pe=Fr(G);if(G===void 0)return ce;if(pe!=="object")return ce.push(new yt("source_raster_dem",G,`object expected, ${pe} found`)),ce;const Ee=Ln(G.encoding)==="custom",Ue=["redFactor","greenFactor","blueFactor","baseShift"],Oe=O.value.encoding?`"${O.value.encoding}"`:"Default";for(const Ne in G)!Ee&&Ue.includes(Ne)?ce.push(new yt(Ne,G[Ne],`In "${B}": "${Ne}" is only valid when "encoding" is set to "custom". ${Oe} encoding found`)):ie[Ne]?ce=ce.concat(O.validateSpec({key:Ne,value:G[Ne],valueSpec:ie[Ne],validateSpec:O.validateSpec,style:se,styleSpec:Q})):ce.push(new yt(Ne,G[Ne],`unknown property "${Ne}"`));return ce}({sourceName:u,value:a,style:h.style,styleSpec:f,validateSpec:S}),I;case"geojson":if(I=So({key:u,value:a,valueSpec:f.source_geojson,style:b,styleSpec:f,validateSpec:S,objectElementValidators:Ql}),a.cluster)for(const O in a.clusterProperties){const[N,B]=a.clusterProperties[O],G=typeof N=="string"?[N,["accumulated"],["get",O]]:N;I.push(...nl({key:`${u}.${O}.map`,value:B,expressionContext:"cluster-map"})),I.push(...nl({key:`${u}.${O}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return I;case"video":return So({key:u,value:a,valueSpec:f.source_video,style:b,validateSpec:S,styleSpec:f});case"image":return So({key:u,value:a,valueSpec:f.source_image,style:b,validateSpec:S,styleSpec:f});case"canvas":return[new yt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bs({key:`${u}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ec(h){const a=h.value,u=h.styleSpec,f=u.light,b=h.style;let S=[];const C=Fr(a);if(a===void 0)return S;if(C!=="object")return S=S.concat([new yt("light",a,`object expected, ${C} found`)]),S;for(const I in a){const O=I.match(/^(.*)-transition$/);S=S.concat(O&&f[O[1]]&&f[O[1]].transition?h.validateSpec({key:I,value:a[I],valueSpec:u.transition,validateSpec:h.validateSpec,style:b,styleSpec:u}):f[I]?h.validateSpec({key:I,value:a[I],valueSpec:f[I],validateSpec:h.validateSpec,style:b,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)])}return S}function vm(h){const a=h.value,u=h.styleSpec,f=u.sky,b=h.style,S=Fr(a);if(a===void 0)return[];if(S!=="object")return[new yt("sky",a,`object expected, ${S} found`)];let C=[];for(const I in a)C=C.concat(f[I]?h.validateSpec({key:I,value:a[I],valueSpec:f[I],style:b,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return C}function Q_(h){const a=h.value,u=h.styleSpec,f=u.terrain,b=h.style;let S=[];const C=Fr(a);if(a===void 0)return S;if(C!=="object")return S=S.concat([new yt("terrain",a,`object expected, ${C} found`)]),S;for(const I in a)S=S.concat(f[I]?h.validateSpec({key:I,value:a[I],valueSpec:f[I],validateSpec:h.validateSpec,style:b,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return S}function e0(h){let a=[];const u=h.value,f=h.key;if(Array.isArray(u)){const b=[],S=[];for(const C in u)u[C].id&&b.includes(u[C].id)&&a.push(new yt(f,u,`all the sprites' ids must be unique, but ${u[C].id} is duplicated`)),b.push(u[C].id),u[C].url&&S.includes(u[C].url)&&a.push(new yt(f,u,`all the sprites' URLs must be unique, but ${u[C].url} is duplicated`)),S.push(u[C].url),a=a.concat(So({key:`${f}[${C}]`,value:u[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return a}return Bo({key:f,value:u})}function tc(h){return a=h.value,a&&a.constructor===Object?[]:[new yt(h.key,h.value,`object expected, ${Fr(h.value)} found`)];var a}const xm={"*":()=>[],array:kd,boolean:function(h){const a=h.value,u=h.key,f=Fr(a);return f!=="boolean"?[new yt(u,a,`boolean expected, ${f} found`)]:[]},number:Lu,color:Ld,constants:_m,enum:Bs,filter:bm,function:J_,layer:X_,object:So,source:no,light:ec,sky:vm,terrain:Q_,projection:function(h){const a=h.value,u=h.styleSpec,f=u.projection,b=h.style,S=Fr(a);if(a===void 0)return[];if(S!=="object")return[new yt("projection",a,`object expected, ${S} found`)];let C=[];for(const I in a)C=C.concat(f[I]?h.validateSpec({key:I,value:a[I],valueSpec:f[I],style:b,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return C},projectionDefinition:function(h){const a=h.key;let u=h.value;u=u instanceof String?u.valueOf():u;const f=Fr(u);return f!=="array"||function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"}(u)||function(b){return!!["interpolate","step","literal"].includes(b[0])}(u)?["array","string"].includes(f)?[]:[new yt(a,u,`projection expected, invalid type "${f}" found`)]:[new yt(a,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:Bo,formatted:function(h){return Bo(h).length===0?[]:nl(h)},resolvedImage:function(h){return Bo(h).length===0?[]:nl(h)},padding:function(h){const a=h.key,u=h.value;if(Fr(u)==="array"){if(u.length<1||u.length>4)return[new yt(a,u,`padding requires 1 to 4 values; ${u.length} values found`)];const f={type:"number"};let b=[];for(let S=0;S<u.length;S++)b=b.concat(h.validateSpec({key:`${a}[${S}]`,value:u[S],validateSpec:h.validateSpec,valueSpec:f}));return b}return Lu({key:a,value:u,valueSpec:{}})},numberArray:function(h){const a=h.key,u=h.value;if(Fr(u)==="array"){const f={type:"number"};if(u.length<1)return[new yt(a,u,"array length at least 1 expected, length 0 found")];let b=[];for(let S=0;S<u.length;S++)b=b.concat(h.validateSpec({key:`${a}[${S}]`,value:u[S],validateSpec:h.validateSpec,valueSpec:f}));return b}return Lu({key:a,value:u,valueSpec:{}})},colorArray:function(h){const a=h.key,u=h.value;if(Fr(u)==="array"){if(u.length<1)return[new yt(a,u,"array length at least 1 expected, length 0 found")];let f=[];for(let b=0;b<u.length;b++)f=f.concat(Ld({key:`${a}[${b}]`,value:u[b]}));return f}return Ld({key:a,value:u})},variableAnchorOffsetCollection:function(h){const a=h.key,u=h.value,f=Fr(u),b=h.styleSpec;if(f!=="array"||u.length<1||u.length%2!=0)return[new yt(a,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let C=0;C<u.length;C+=2)S=S.concat(Bs({key:`${a}[${C}]`,value:u[C],valueSpec:b.layout_symbol["text-anchor"]})),S=S.concat(kd({key:`${a}[${C+1}]`,value:u[C+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:b}));return S},sprite:e0,state:tc};function rc(h){const a=h.value,u=h.valueSpec,f=h.styleSpec;return h.validateSpec=rc,u.expression&&Au(Ln(a))?J_(h):u.expression&&Rd(vs(a))?nl(h):u.type&&xm[u.type]?xm[u.type](h):So(In({},h,{valueSpec:u.type?f[u.type]:u}))}function t0(h){const a=h.value,u=h.key,f=Bo(h);return f.length||(a.indexOf("{fontstack}")===-1&&f.push(new yt(u,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&f.push(new yt(u,a,'"glyphs" url must include a "{range}" token'))),f}function io(h,a=$e){let u=[];return u=u.concat(rc({key:"",value:h,valueSpec:a.$root,styleSpec:a,style:h,validateSpec:rc,objectElementValidators:{glyphs:t0,"*":()=>[]}})),h.constants&&(u=u.concat(_m({key:"constants",value:h.constants}))),nc(u)}function qo(h){return function(a){return h({...a,validateSpec:rc})}}function nc(h){return[].concat(h).sort((a,u)=>a.line-u.line)}function $o(h){return function(...a){return nc(h.apply(this,a))}}io.source=$o(qo(no)),io.sprite=$o(qo(e0)),io.glyphs=$o(qo(t0)),io.light=$o(qo(ec)),io.sky=$o(qo(vm)),io.terrain=$o(qo(Q_)),io.state=$o(qo(tc)),io.layer=$o(qo(X_)),io.filter=$o(qo(bm)),io.paintProperty=$o(qo(K_)),io.layoutProperty=$o(qo(Y_));const ic=io,Nw=ic.light,Du=ic.sky,Fw=ic.paintProperty,zw=ic.layoutProperty;function Nu(h,a){let u=!1;if(a&&a.length)for(const f of a)h.fire(new it(new Error(f.message))),u=!0;return u}class Fu{constructor(a,u,f){const b=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const C=new Int32Array(this.arrayBuffer);a=C[0],this.d=(u=C[1])+2*(f=C[2]);for(let O=0;O<this.d*this.d;O++){const N=C[3+O],B=C[3+O+1];b.push(N===B?null:C.subarray(N,B))}const I=C[3+b.length+1];this.keys=C.subarray(C[3+b.length],I),this.bboxes=C.subarray(I),this.insert=this._insertReadonly}else{this.d=u+2*f;for(let C=0;C<this.d*this.d;C++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=a,this.padding=f,this.scale=u/a,this.uid=0;const S=f/u*a;this.min=-S,this.max=a+S}insert(a,u,f,b,S){this._forEachCell(u,f,b,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(b),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,u,f,b,S,C){this.cells[S].push(C)}query(a,u,f,b,S){const C=this.min,I=this.max;if(a<=C&&u<=C&&I<=f&&I<=b&&!S)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(a,u,f,b,this._queryCell,O,{},S),O}}_queryCell(a,u,f,b,S,C,I,O){const N=this.cells[S];if(N!==null){const B=this.keys,G=this.bboxes;for(let Q=0;Q<N.length;Q++){const ie=N[Q];if(I[ie]===void 0){const se=4*ie;(O?O(G[se+0],G[se+1],G[se+2],G[se+3]):a<=G[se+2]&&u<=G[se+3]&&f>=G[se+0]&&b>=G[se+1])?(I[ie]=!0,C.push(B[ie])):I[ie]=!1}}}}_forEachCell(a,u,f,b,S,C,I,O){const N=this._convertToCellCoord(a),B=this._convertToCellCoord(u),G=this._convertToCellCoord(f),Q=this._convertToCellCoord(b);for(let ie=N;ie<=G;ie++)for(let se=B;se<=Q;se++){const ce=this.d*se+ie;if((!O||O(this._convertFromCellCoord(ie),this._convertFromCellCoord(se),this._convertFromCellCoord(ie+1),this._convertFromCellCoord(se+1)))&&S.call(this,a,u,f,b,ce,C,I,O))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,u=3+this.cells.length+1+1;let f=0;for(let C=0;C<this.cells.length;C++)f+=this.cells[C].length;const b=new Int32Array(u+f+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let S=u;for(let C=0;C<a.length;C++){const I=a[C];b[3+C]=S,b.set(I,S),S+=I.length}return b[3+a.length]=S,b.set(this.keys,S),S+=this.keys.length,b[3+a.length+1]=S,b.set(this.bboxes,S),S+=this.bboxes.length,b.buffer}static serialize(a,u){const f=a.toArrayBuffer();return u&&u.push(f),{buffer:f}}static deserialize(a){return new Fu(a.buffer)}}const Vo={};function zt(h,a,u={}){if(Vo[h])throw new Error(`${h} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:h,writeable:!1}),Vo[h]={klass:a,omit:u.omit||[],shallow:u.shallow||[]}}zt("Object",Object),zt("Set",Set),zt("TransferableGridIndex",Fu),zt("Color",Or),zt("Error",Error),zt("AJAXError",Te),zt("ResolvedImage",mo),zt("StylePropertyFunction",Mu),zt("StyleExpression",dm,{omit:["_evaluator"]}),zt("ZoomDependentExpression",pm),zt("ZoomConstantExpression",Iu),zt("CompoundExpression",To,{omit:["_evaluate"]});for(const h in Yl)Yl[h]._classRegistryKey||zt(`Expression_${h}`,Yl[h]);function wm(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function Dd(h){return h.$name||h.constructor._classRegistryKey}function Em(h){return!function(a){if(a===null||typeof a!="object")return!1;const u=Dd(a);return!(!u||u==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||wm(h)||Bt(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function oc(h,a){if(Em(h))return(wm(h)||Bt(h))&&a&&a.push(h),ArrayBuffer.isView(h)&&a&&a.push(h.buffer),h instanceof ImageData&&a&&a.push(h.data.buffer),h;if(Array.isArray(h)){const S=[];for(const C of h)S.push(oc(C,a));return S}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const u=Dd(h);if(!u)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!Vo[u])throw new Error(`${u} is not registered.`);const{klass:f}=Vo[u],b=f.serialize?f.serialize(h,a):{};if(f.serialize){if(a&&b===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in h){if(!h.hasOwnProperty(S)||Vo[u].omit.indexOf(S)>=0)continue;const C=h[S];b[S]=Vo[u].shallow.indexOf(S)>=0?C:oc(C,a)}h instanceof Error&&(b.message=h.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(b.$name=u),b}function il(h){if(Em(h))return h;if(Array.isArray(h))return h.map(il);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const a=Dd(h)||"Object";if(!Vo[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:u}=Vo[a];if(!u)throw new Error(`can't deserialize unregistered class ${a}`);if(u.deserialize)return u.deserialize(h);const f=Object.create(u.prototype);for(const b of Object.keys(h)){if(b==="$name")continue;const S=h[b];f[b]=Vo[a].shallow.indexOf(b)>=0?S:il(S)}return f}class Nd{constructor(){this.first=!0}update(a,u){const f=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=u),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=f,!0))}}const jr={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Fd(h){for(const a of h)if(Sm(a.charCodeAt(0)))return!0;return!1}function jw(h){for(const a of h)if(!r0(a.charCodeAt(0)))return!1;return!0}function zd(h){const a=h.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}}).filter(u=>u);return new RegExp(a.join("|"),"u")}const Bw=zd(["Arab","Dupl","Mong","Ougr","Syrc"]);function r0(h){return!Bw.test(String.fromCodePoint(h))}const Tm=zd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Sm(h){return!(h!==746&&h!==747&&(h<4352||!(jr["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||jr["CJK Compatibility"](h)||jr["CJK Strokes"](h)||!(!jr["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||jr["Enclosed CJK Letters and Months"](h)||jr["Ideographic Description Characters"](h)||jr.Kanbun(h)||jr.Katakana(h)&&h!==12540||!(!jr["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!jr["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||jr["Vertical Forms"](h)||jr["Yijing Hexagram Symbols"](h)||/\p{sc=Cans}/u.test(String.fromCodePoint(h))||/\p{sc=Hang}/u.test(String.fromCodePoint(h))||Tm.test(String.fromCodePoint(h)))))}function n0(h){return!(Sm(h)||function(a){return!!(jr["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||jr["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||jr["Letterlike Symbols"](a)||jr["Number Forms"](a)||jr["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||jr["Control Pictures"](a)&&a!==9251||jr["Optical Character Recognition"](a)||jr["Enclosed Alphanumerics"](a)||jr["Geometric Shapes"](a)||jr["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||jr["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||jr["CJK Symbols and Punctuation"](a)||jr.Katakana(a)||jr["Private Use Area"](a)||jr["CJK Compatibility Forms"](a)||jr["Small Form Variants"](a)||jr["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(h))}const i0=zd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Cm(h){return i0.test(String.fromCodePoint(h))}function o0(h,a){return!(!a&&Cm(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||jr.Khmer(h))}function s0(h){for(const a of h)if(Cm(a.charCodeAt(0)))return!0;return!1}const Uo=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(Uo.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,a){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const u=h.pluginURL,f=new Promise(S=>{this.loadScriptResolve=S});a(u);const b=new Promise(S=>setTimeout(()=>S(),this.TIMEOUT));if(yield Promise.race([f,b]),this.isParsed()){const S={pluginStatus:"loaded",pluginURL:u};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class yn{constructor(a,u){this.zoom=a,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new Nd,this.transition=u.transition||{},this.globalState=u.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Nd,this.transition={},this.globalState={})}isSupportedScript(a){return function(u,f){for(const b of u)if(!o0(b.charCodeAt(0),f))return!1;return!0}(a,Uo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,u=a-Math.floor(a),f=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*u}}}class sc{constructor(a,u){this.property=a,this.value=u,this.expression=function(f,b){if(Au(f))return new Mu(f,b);if(Rd(f)){const S=U_(f,b);if(S.result==="error")throw new Error(S.value.map(C=>`${C.key}: ${C.message}`).join(", "));return S.value}{let S=f;return b.type==="color"&&typeof f=="string"?S=Or.parse(f):b.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?b.type!=="numberArray"||typeof f!="number"&&!Array.isArray(f)?b.type!=="colorArray"||typeof f!="string"&&!Array.isArray(f)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(f)?S=Hi.parse(f):b.type==="projectionDefinition"&&typeof f=="string"&&(S=zi.parse(f)):S=Kn.parse(f):S=Gi.parse(f):S=pi.parse(f),{globalStateRefs:new Set,kind:"constant",evaluate:()=>S}}}(u===void 0?a.specification.default:u,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(a,u,f){return this.property.possiblyEvaluate(this,a,u,f)}}class Pm{constructor(a){this.property=a,this.value=new sc(a,void 0)}transitioned(a,u){return new Am(this.property,this.value,u,Wt({},a.transition,this.transition),a.now)}untransitioned(){return new Am(this.property,this.value,null,{},0)}}class a0{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return pt(this._values[a].value.value)}setValue(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Pm(this._values[a].property)),this._values[a].value=new sc(this._values[a].property,u===null?void 0:pt(u))}getTransition(a){return pt(this._values[a].transition)}setTransition(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Pm(this._values[a].property)),this._values[a].transition=pt(u)||void 0}serialize(){const a={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(a[u]=f);const b=this.getTransition(u);b!==void 0&&(a[`${u}-transition`]=b)}return a}transitioned(a,u){const f=new Rm(this._properties);for(const b of Object.keys(this._values))f._values[b]=this._values[b].transitioned(a,u._values[b]);return f}untransitioned(){const a=new Rm(this._properties);for(const u of Object.keys(this._values))a._values[u]=this._values[u].untransitioned();return a}}class Am{constructor(a,u,f,b,S){this.property=a,this.value=u,this.begin=S+b.delay||0,this.end=this.begin+b.duration||0,a.specification.transition&&(b.delay||b.duration)&&(this.prior=f)}possiblyEvaluate(a,u,f){const b=a.now||0,S=this.value.possiblyEvaluate(a,u,f),C=this.prior;if(C){if(b>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(b<this.begin)return C.possiblyEvaluate(a,u,f);{const I=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(a,u,f),S,kt(I))}}return S}}class Rm{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,u,f){const b=new jd(this._properties);for(const S of Object.keys(this._values))b._values[S]=this._values[S].possiblyEvaluate(a,u,f);return b}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class l0{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return pt(this._values[a].value)}setValue(a,u){this._values[a]=new sc(this._values[a].property,u===null?void 0:pt(u))}serialize(){const a={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(a[u]=f)}return a}possiblyEvaluate(a,u,f){const b=new jd(this._properties);for(const S of Object.keys(this._values))b._values[S]=this._values[S].possiblyEvaluate(a,u,f);return b}}class xs{constructor(a,u,f){this.property=a,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,u,f,b){return this.property.evaluate(this.value,this.parameters,a,u,f,b)}}class jd{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Gt{constructor(a){this.specification=a}possiblyEvaluate(a,u){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(u)}interpolate(a,u,f){const b=bs[this.specification.type];return b?b(a,u,f):a}}class ir{constructor(a,u){this.specification=a,this.overrides=u}possiblyEvaluate(a,u,f,b){return new xs(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(u,null,{},f,b)}:a.expression,u)}interpolate(a,u,f){if(a.value.kind!=="constant"||u.value.kind!=="constant")return a;if(a.value.value===void 0||u.value.value===void 0)return new xs(this,{kind:"constant",value:void 0},a.parameters);const b=bs[this.specification.type];if(b){const S=b(a.value.value,u.value.value,f);return new xs(this,{kind:"constant",value:S},a.parameters)}return a}evaluate(a,u,f,b,S,C){return a.kind==="constant"?a.value:a.evaluate(u,f,b,S,C)}}class Bd extends ir{possiblyEvaluate(a,u,f,b){if(a.value===void 0)return new xs(this,{kind:"constant",value:void 0},u);if(a.expression.kind==="constant"){const S=a.expression.evaluate(u,null,{},f,b),C=a.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,I=this._calculate(C,C,C,u);return new xs(this,{kind:"constant",value:I},u)}if(a.expression.kind==="camera"){const S=this._calculate(a.expression.evaluate({zoom:u.zoom-1}),a.expression.evaluate({zoom:u.zoom}),a.expression.evaluate({zoom:u.zoom+1}),u);return new xs(this,{kind:"constant",value:S},u)}return new xs(this,a.expression,u)}evaluate(a,u,f,b,S,C){if(a.kind==="source"){const I=a.evaluate(u,f,b,S,C);return this._calculate(I,I,I,u)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(u.zoom)-1},f,b),a.evaluate({zoom:Math.floor(u.zoom)},f,b),a.evaluate({zoom:Math.floor(u.zoom)+1},f,b),u):a.value}_calculate(a,u,f,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:f,to:u}}interpolate(a){return a}}class fa{constructor(a){this.specification=a}possiblyEvaluate(a,u,f,b){if(a.value!==void 0){if(a.expression.kind==="constant"){const S=a.expression.evaluate(u,null,{},f,b);return this._calculate(S,S,S,u)}return this._calculate(a.expression.evaluate(new yn(Math.floor(u.zoom-1),u)),a.expression.evaluate(new yn(Math.floor(u.zoom),u)),a.expression.evaluate(new yn(Math.floor(u.zoom+1),u)),u)}}_calculate(a,u,f,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:f,to:u}}interpolate(a){return a}}class qd{constructor(a){this.specification=a}possiblyEvaluate(a,u,f,b){return!!a.expression.evaluate(u,null,{},f,b)}interpolate(){return!1}}class Ji{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in a){const f=a[u];f.specification.overridable&&this.overridableProperties.push(u);const b=this.defaultPropertyValues[u]=new sc(f,void 0),S=this.defaultTransitionablePropertyValues[u]=new Pm(f);this.defaultTransitioningPropertyValues[u]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}zt("DataDrivenProperty",ir),zt("DataConstantProperty",Gt),zt("CrossFadedDataDrivenProperty",Bd),zt("CrossFadedProperty",fa),zt("ColorRampProperty",qd);const c0="-transition";class Co extends Ot{constructor(a,u){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter,this._featureFilter=tl(a.filter)),u.layout&&(this._unevaluatedLayout=new l0(u.layout)),u.paint)){this._transitionablePaint=new a0(u.paint);for(const f in a.paint)this.setPaintProperty(f,a.paint[f],{validate:!1});for(const f in a.layout)this.setLayoutProperty(f,a.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jd(u.paint)}}setFilter(a){this.filter=a,this._featureFilter=tl(a)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}getLayoutAffectingGlobalStateRefs(){const a=new Set;if(this._unevaluatedLayout)for(const u in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[u];for(const b of f.getGlobalStateRefs())a.add(b)}for(const u of this._featureFilter.getGlobalStateRefs())a.add(u);return a}getPaintAffectingGlobalStateRefs(){var a;const u=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const b=this._transitionablePaint._values[f].value;for(const S of b.getGlobalStateRefs()){const C=(a=u.get(S))!==null&&a!==void 0?a:[];C.push({name:f,value:b.value}),u.set(S,C)}}return u}setLayoutProperty(a,u,f={}){u!=null&&this._validate(zw,`layers.${this.id}.layout.${a}`,a,u,f)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,u):this.visibility=u)}getPaintProperty(a){return a.endsWith(c0)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,u,f={}){if(u!=null&&this._validate(Fw,`layers.${this.id}.paint.${a}`,a,u,f))return!1;if(a.endsWith(c0))return this._transitionablePaint.setTransition(a.slice(0,-11),u||void 0),!1;{const b=this._transitionablePaint._values[a],S=b.property.specification["property-type"]==="cross-faded-data-driven",C=b.value.isDataDriven(),I=b.value;this._transitionablePaint.setValue(a,u),this._handleSpecialPaintPropertyUpdate(a);const O=this._transitionablePaint._values[a].value;return O.isDataDriven()||C||S||this._handleOverridablePaintPropertyUpdate(a,I,O)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,u,f){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,u){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,u)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Ve(a,(u,f)=>!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length))}_validate(a,u,f,b,S={}){return(!S||S.validate!==!1)&&Nu(this,a.call(ic,{key:u,layerType:this.type,objectKey:f,value:b,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const u=this.paint.get(a);if(u instanceof xs&&da(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const qw={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zu{constructor(a,u){this._structArray=a,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class un{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,u){return a._trim(),u&&(a.isTransferred=!0,u.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const u=Object.create(this.prototype);return u.arrayBuffer=a.arrayBuffer,u.length=a.length,u.capacity=a.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Un(h,a=1){let u=0,f=0;return{members:h.map(b=>{const S=qw[b.type].BYTES_PER_ELEMENT,C=u=$d(u,Math.max(a,S)),I=b.components||1;return f=Math.max(f,S),u+=S*I,{name:b.name,type:b.type,components:I,offset:C}}),size:$d(u,Math.max(f,a)),alignment:a}}function $d(h,a){return Math.ceil(h/a)*a}class ac extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u){const f=this.length;return this.resize(f+1),this.emplace(f,a,u)}emplace(a,u,f){const b=2*a;return this.int16[b+0]=u,this.int16[b+1]=f,a}}ac.prototype.bytesPerElement=4,zt("StructArrayLayout2i4",ac);class lc extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=3*a;return this.int16[S+0]=u,this.int16[S+1]=f,this.int16[S+2]=b,a}}lc.prototype.bytesPerElement=6,zt("StructArrayLayout3i6",lc);class Im extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b){const S=this.length;return this.resize(S+1),this.emplace(S,a,u,f,b)}emplace(a,u,f,b,S){const C=4*a;return this.int16[C+0]=u,this.int16[C+1]=f,this.int16[C+2]=b,this.int16[C+3]=S,a}}Im.prototype.bytesPerElement=8,zt("StructArrayLayout4i8",Im);class cc extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,f,b,S,C)}emplace(a,u,f,b,S,C,I){const O=6*a;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=b,this.int16[O+3]=S,this.int16[O+4]=C,this.int16[O+5]=I,a}}cc.prototype.bytesPerElement=12,zt("StructArrayLayout2i4i12",cc);class ol extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,f,b,S,C)}emplace(a,u,f,b,S,C,I){const O=4*a,N=8*a;return this.int16[O+0]=u,this.int16[O+1]=f,this.uint8[N+4]=b,this.uint8[N+5]=S,this.uint8[N+6]=C,this.uint8[N+7]=I,a}}ol.prototype.bytesPerElement=8,zt("StructArrayLayout2i4ub8",ol);class ju extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u){const f=this.length;return this.resize(f+1),this.emplace(f,a,u)}emplace(a,u,f){const b=2*a;return this.float32[b+0]=u,this.float32[b+1]=f,a}}ju.prototype.bytesPerElement=8,zt("StructArrayLayout2f8",ju);class Vd extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,N,B){const G=this.length;return this.resize(G+1),this.emplace(G,a,u,f,b,S,C,I,O,N,B)}emplace(a,u,f,b,S,C,I,O,N,B,G){const Q=10*a;return this.uint16[Q+0]=u,this.uint16[Q+1]=f,this.uint16[Q+2]=b,this.uint16[Q+3]=S,this.uint16[Q+4]=C,this.uint16[Q+5]=I,this.uint16[Q+6]=O,this.uint16[Q+7]=N,this.uint16[Q+8]=B,this.uint16[Q+9]=G,a}}Vd.prototype.bytesPerElement=20,zt("StructArrayLayout10ui20",Vd);class sl extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,N,B,G,Q){const ie=this.length;return this.resize(ie+1),this.emplace(ie,a,u,f,b,S,C,I,O,N,B,G,Q)}emplace(a,u,f,b,S,C,I,O,N,B,G,Q,ie){const se=12*a;return this.int16[se+0]=u,this.int16[se+1]=f,this.int16[se+2]=b,this.int16[se+3]=S,this.uint16[se+4]=C,this.uint16[se+5]=I,this.uint16[se+6]=O,this.uint16[se+7]=N,this.int16[se+8]=B,this.int16[se+9]=G,this.int16[se+10]=Q,this.int16[se+11]=ie,a}}sl.prototype.bytesPerElement=24,zt("StructArrayLayout4i4ui4i24",sl);class Mm extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=3*a;return this.float32[S+0]=u,this.float32[S+1]=f,this.float32[S+2]=b,a}}Mm.prototype.bytesPerElement=12,zt("StructArrayLayout3f12",Mm);class Om extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint32[1*a+0]=u,a}}Om.prototype.bytesPerElement=4,zt("StructArrayLayout1ul4",Om);class Ud extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,N){const B=this.length;return this.resize(B+1),this.emplace(B,a,u,f,b,S,C,I,O,N)}emplace(a,u,f,b,S,C,I,O,N,B){const G=10*a,Q=5*a;return this.int16[G+0]=u,this.int16[G+1]=f,this.int16[G+2]=b,this.int16[G+3]=S,this.int16[G+4]=C,this.int16[G+5]=I,this.uint32[Q+3]=O,this.uint16[G+8]=N,this.uint16[G+9]=B,a}}Ud.prototype.bytesPerElement=20,zt("StructArrayLayout6i1ul2ui20",Ud);class km extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,f,b,S,C)}emplace(a,u,f,b,S,C,I){const O=6*a;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=b,this.int16[O+3]=S,this.int16[O+4]=C,this.int16[O+5]=I,a}}km.prototype.bytesPerElement=12,zt("StructArrayLayout2i2i2i12",km);class w extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S){const C=this.length;return this.resize(C+1),this.emplace(C,a,u,f,b,S)}emplace(a,u,f,b,S,C){const I=4*a,O=8*a;return this.float32[I+0]=u,this.float32[I+1]=f,this.float32[I+2]=b,this.int16[O+6]=S,this.int16[O+7]=C,a}}w.prototype.bytesPerElement=16,zt("StructArrayLayout2f1f2i16",w);class o extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,f,b,S,C)}emplace(a,u,f,b,S,C,I){const O=16*a,N=4*a,B=8*a;return this.uint8[O+0]=u,this.uint8[O+1]=f,this.float32[N+1]=b,this.float32[N+2]=S,this.int16[B+6]=C,this.int16[B+7]=I,a}}o.prototype.bytesPerElement=16,zt("StructArrayLayout2ub2f2i16",o);class d extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=3*a;return this.uint16[S+0]=u,this.uint16[S+1]=f,this.uint16[S+2]=b,a}}d.prototype.bytesPerElement=6,zt("StructArrayLayout3ui6",d);class y extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,N,B,G,Q,ie,se,ce,pe,Ee){const Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,a,u,f,b,S,C,I,O,N,B,G,Q,ie,se,ce,pe,Ee)}emplace(a,u,f,b,S,C,I,O,N,B,G,Q,ie,se,ce,pe,Ee,Ue){const Oe=24*a,Ne=12*a,et=48*a;return this.int16[Oe+0]=u,this.int16[Oe+1]=f,this.uint16[Oe+2]=b,this.uint16[Oe+3]=S,this.uint32[Ne+2]=C,this.uint32[Ne+3]=I,this.uint32[Ne+4]=O,this.uint16[Oe+10]=N,this.uint16[Oe+11]=B,this.uint16[Oe+12]=G,this.float32[Ne+7]=Q,this.float32[Ne+8]=ie,this.uint8[et+36]=se,this.uint8[et+37]=ce,this.uint8[et+38]=pe,this.uint32[Ne+10]=Ee,this.int16[Oe+22]=Ue,a}}y.prototype.bytesPerElement=48,zt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",y);class v extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,N,B,G,Q,ie,se,ce,pe,Ee,Ue,Oe,Ne,et,at,gt,Mt,wt,Rt,Zt,At){const It=this.length;return this.resize(It+1),this.emplace(It,a,u,f,b,S,C,I,O,N,B,G,Q,ie,se,ce,pe,Ee,Ue,Oe,Ne,et,at,gt,Mt,wt,Rt,Zt,At)}emplace(a,u,f,b,S,C,I,O,N,B,G,Q,ie,se,ce,pe,Ee,Ue,Oe,Ne,et,at,gt,Mt,wt,Rt,Zt,At,It){const ht=32*a,sr=16*a;return this.int16[ht+0]=u,this.int16[ht+1]=f,this.int16[ht+2]=b,this.int16[ht+3]=S,this.int16[ht+4]=C,this.int16[ht+5]=I,this.int16[ht+6]=O,this.int16[ht+7]=N,this.uint16[ht+8]=B,this.uint16[ht+9]=G,this.uint16[ht+10]=Q,this.uint16[ht+11]=ie,this.uint16[ht+12]=se,this.uint16[ht+13]=ce,this.uint16[ht+14]=pe,this.uint16[ht+15]=Ee,this.uint16[ht+16]=Ue,this.uint16[ht+17]=Oe,this.uint16[ht+18]=Ne,this.uint16[ht+19]=et,this.uint16[ht+20]=at,this.uint16[ht+21]=gt,this.uint16[ht+22]=Mt,this.uint32[sr+12]=wt,this.float32[sr+13]=Rt,this.float32[sr+14]=Zt,this.uint16[ht+30]=At,this.uint16[ht+31]=It,a}}v.prototype.bytesPerElement=64,zt("StructArrayLayout8i15ui1ul2f2ui64",v);class T extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.float32[1*a+0]=u,a}}T.prototype.bytesPerElement=4,zt("StructArrayLayout1f4",T);class R extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=3*a;return this.uint16[6*a+0]=u,this.float32[S+1]=f,this.float32[S+2]=b,a}}R.prototype.bytesPerElement=12,zt("StructArrayLayout1ui2f12",R);class k extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=4*a;return this.uint32[2*a+0]=u,this.uint16[S+2]=f,this.uint16[S+3]=b,a}}k.prototype.bytesPerElement=8,zt("StructArrayLayout1ul2ui8",k);class L extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u){const f=this.length;return this.resize(f+1),this.emplace(f,a,u)}emplace(a,u,f){const b=2*a;return this.uint16[b+0]=u,this.uint16[b+1]=f,a}}L.prototype.bytesPerElement=4,zt("StructArrayLayout2ui4",L);class q extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint16[1*a+0]=u,a}}q.prototype.bytesPerElement=2,zt("StructArrayLayout1ui2",q);class V extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f,b){const S=this.length;return this.resize(S+1),this.emplace(S,a,u,f,b)}emplace(a,u,f,b,S){const C=4*a;return this.float32[C+0]=u,this.float32[C+1]=f,this.float32[C+2]=b,this.float32[C+3]=S,a}}V.prototype.bytesPerElement=16,zt("StructArrayLayout4f16",V);class Y extends zu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class H extends Ud{get(a){return new Y(this,a)}}zt("CollisionBoxArray",H);class re extends zu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}re.prototype.size=48;class le extends y{get(a){return new re(this,a)}}zt("PlacedSymbolArray",le);class _e extends zu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}_e.prototype.size=64;class ge extends v{get(a){return new _e(this,a)}}zt("SymbolInstanceArray",ge);class be extends T{getoffsetX(a){return this.float32[1*a+0]}}zt("GlyphOffsetArray",be);class Se extends lc{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}zt("SymbolLineVertexArray",Se);class Re extends zu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Re.prototype.size=12;class Pe extends R{get(a){return new Re(this,a)}}zt("TextAnchorOffsetArray",Pe);class De extends zu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}De.prototype.size=8;class Be extends k{get(a){return new De(this,a)}}zt("FeatureIndexArray",Be);class Ae extends ac{}class Ge extends ac{}class st extends ac{}class Ye extends cc{}class Qe extends ol{}class ot extends ju{}class xt extends Vd{}class Et extends sl{}class ft extends Mm{}class Vt extends Om{}class Er extends km{}class tn extends o{}class hn extends d{}class an extends L{}const Mn=Un([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dn}=Mn;class vr{constructor(a=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=a}prepareSegment(a,u,f,b){const S=this.segments[this.segments.length-1];return a>vr.MAX_VERTEX_ARRAY_LENGTH&&Tt(`Max vertices per segment is ${vr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${vr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+a>vr.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==b?this.createNewSegment(u,f,b):S}createNewSegment(a,u,f){const b={vertexOffset:a.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(b.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(a,u,f){return this.prepareSegment(0,a,u,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const a of this.segments)for(const u in a.vaos)a.vaos[u].destroy()}static simpleSegment(a,u,f,b){return new vr([{vertexOffset:a,primitiveOffset:u,vertexLength:f,primitiveLength:b,vaos:{},sortKey:0}])}}function dn(h,a){return 256*(h=dt(Math.floor(h),0,255))+dt(Math.floor(a),0,255)}vr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zt("SegmentVector",vr);const Yn=Un([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var si,mi,Wi,Go={exports:{}},ma={exports:{}},ga={exports:{}},uc=function(){if(Wi)return Go.exports;Wi=1;var h=(si||(si=1,ma.exports=function(u,f){var b,S,C,I,O,N,B,G;for(S=u.length-(b=3&u.length),C=f,O=3432918353,N=461845907,G=0;G<S;)B=255&u.charCodeAt(G)|(255&u.charCodeAt(++G))<<8|(255&u.charCodeAt(++G))<<16|(255&u.charCodeAt(++G))<<24,++G,C=27492+(65535&(I=5*(65535&(C=(C^=B=(65535&(B=(B=(65535&B)*O+(((B>>>16)*O&65535)<<16)&4294967295)<<15|B>>>17))*N+(((B>>>16)*N&65535)<<16)&4294967295)<<13|C>>>19))+((5*(C>>>16)&65535)<<16)&4294967295))+((58964+(I>>>16)&65535)<<16);switch(B=0,b){case 3:B^=(255&u.charCodeAt(G+2))<<16;case 2:B^=(255&u.charCodeAt(G+1))<<8;case 1:C^=B=(65535&(B=(B=(65535&(B^=255&u.charCodeAt(G)))*O+(((B>>>16)*O&65535)<<16)&4294967295)<<15|B>>>17))*N+(((B>>>16)*N&65535)<<16)&4294967295}return C^=u.length,C=2246822507*(65535&(C^=C>>>16))+((2246822507*(C>>>16)&65535)<<16)&4294967295,C=3266489909*(65535&(C^=C>>>13))+((3266489909*(C>>>16)&65535)<<16)&4294967295,(C^=C>>>16)>>>0}),ma.exports),a=(mi||(mi=1,ga.exports=function(u,f){for(var b,S=u.length,C=f^S,I=0;S>=4;)b=1540483477*(65535&(b=255&u.charCodeAt(I)|(255&u.charCodeAt(++I))<<8|(255&u.charCodeAt(++I))<<16|(255&u.charCodeAt(++I))<<24))+((1540483477*(b>>>16)&65535)<<16),C=1540483477*(65535&C)+((1540483477*(C>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),S-=4,++I;switch(S){case 3:C^=(255&u.charCodeAt(I+2))<<16;case 2:C^=(255&u.charCodeAt(I+1))<<8;case 1:C=1540483477*(65535&(C^=255&u.charCodeAt(I)))+((1540483477*(C>>>16)&65535)<<16)}return C=1540483477*(65535&(C^=C>>>13))+((1540483477*(C>>>16)&65535)<<16),(C^=C>>>15)>>>0}),ga.exports);return Go.exports=h,Go.exports.murmur3=h,Go.exports.murmur2=a,Go.exports}(),hc=g(uc);class al{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,u,f,b){this.ids.push(ll(a)),this.positions.push(u,f,b)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=ll(a);let f=0,b=this.ids.length-1;for(;f<b;){const C=f+b>>1;this.ids[C]>=u?b=C:f=C+1}const S=[];for(;this.ids[f]===u;)S.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return S}static serialize(a,u){const f=new Float64Array(a.ids),b=new Uint32Array(a.positions);return oo(f,b,0,f.length-1),u&&u.push(f.buffer,b.buffer),{ids:f,positions:b}}static deserialize(a){const u=new al;return u.ids=a.ids,u.positions=a.positions,u.indexed=!0,u}}function ll(h){const a=+h;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:hc(String(h))}function oo(h,a,u,f){for(;u<f;){const b=h[u+f>>1];let S=u-1,C=f+1;for(;;){do S++;while(h[S]<b);do C--;while(h[C]>b);if(S>=C)break;Ho(h,S,C),Ho(a,3*S,3*C),Ho(a,3*S+1,3*C+1),Ho(a,3*S+2,3*C+2)}C-u<f-C?(oo(h,a,u,C),u=C+1):(oo(h,a,C+1,f),f=C)}}function Ho(h,a,u){const f=h[a];h[a]=h[u],h[u]=f}zt("FeaturePositionMap",al);class Zi{constructor(a,u){this.gl=a.gl,this.location=u}}class ya extends Zi{constructor(a,u){super(a,u),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Xn extends Zi{constructor(a,u){super(a,u),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class ai extends Zi{constructor(a,u){super(a,u),this.current=Or.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const Po=new Float32Array(16);function Qn(h){return[dn(255*h.r,255*h.g),dn(255*h.b,255*h.a)]}class Bu{constructor(a,u,f){this.value=a,this.uniformNames=u.map(b=>`u_${b}`),this.type=f}setUniform(a,u,f){a.set(f.constantOr(this.value))}getBinding(a,u,f){return this.type==="color"?new ai(a,u):new ya(a,u)}}class dc{constructor(a,u){this.uniformNames=u.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=a.tlbr}setUniform(a,u,f,b){const S=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&a.set(S)}getBinding(a,u,f){return f.substr(0,9)==="u_pattern"?new Xn(a,u):new ya(a,u)}}class qs{constructor(a,u,f,b){this.expression=a,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(S=>({name:`a_${S}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(a,u,f){const b=this.paintVertexArray.length,S=this.expression.evaluate(new yn(0,f),u,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(a),this._setPaintValue(b,a,S)}updatePaintArray(a,u,f,b,S){const C=this.expression.evaluate(new yn(0,S),f,b);this._setPaintValue(a,u,C)}_setPaintValue(a,u,f){if(this.type==="color"){const b=Qn(f);for(let S=a;S<u;S++)this.paintVertexArray.emplace(S,b[0],b[1])}else{for(let b=a;b<u;b++)this.paintVertexArray.emplace(b,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Jo{constructor(a,u,f,b,S,C){this.expression=a,this.uniformNames=u.map(I=>`u_${I}_t`),this.type=f,this.useIntegerZoom=b,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=u.map(I=>({name:`a_${I}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(a,u,f){const b=this.expression.evaluate(new yn(this.zoom,f),u,{},f.canonical,[],f.formattedSection),S=this.expression.evaluate(new yn(this.zoom+1,f),u,{},f.canonical,[],f.formattedSection),C=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(C,a,b,S)}updatePaintArray(a,u,f,b,S){const C=this.expression.evaluate(new yn(this.zoom,S),f,b),I=this.expression.evaluate(new yn(this.zoom+1,S),f,b);this._setPaintValue(a,u,C,I)}_setPaintValue(a,u,f,b){if(this.type==="color"){const S=Qn(f),C=Qn(b);for(let I=a;I<u;I++)this.paintVertexArray.emplace(I,S[0],S[1],C[0],C[1])}else{for(let S=a;S<u;S++)this.paintVertexArray.emplace(S,f,b);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(b))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,u){const f=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=dt(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);a.set(b)}getBinding(a,u,f){return new ya(a,u)}}class _a{constructor(a,u,f,b,S,C){this.expression=a,this.type=u,this.useIntegerZoom=f,this.zoom=b,this.layerId=C,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(a,u,f){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(b,a,u.patterns&&u.patterns[this.layerId],f.imagePositions)}updatePaintArray(a,u,f,b,S){this._setPaintValues(a,u,f.patterns&&f.patterns[this.layerId],S.imagePositions)}_setPaintValues(a,u,f,b){if(!b||!f)return;const{min:S,mid:C,max:I}=f,O=b[S],N=b[C],B=b[I];if(O&&N&&B)for(let G=a;G<u;G++)this.zoomInPaintVertexArray.emplace(G,N.tl[0],N.tl[1],N.br[0],N.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],N.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,N.tl[0],N.tl[1],N.br[0],N.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],N.pixelRatio,B.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Yn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Yn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class u0{constructor(a,u,f){this.binders={},this._buffers=[];const b=[];for(const S in a.paint._values){if(!f(S))continue;const C=a.paint.get(S);if(!(C instanceof xs&&da(C.property.specification)))continue;const I=h0(S,a.type),O=C.value,N=C.property.specification.type,B=C.property.useIntegerZoom,G=C.property.specification["property-type"],Q=G==="cross-faded"||G==="cross-faded-data-driven";if(O.kind==="constant")this.binders[S]=Q?new dc(O.value,I):new Bu(O.value,I,N),b.push(`/u_${S}`);else if(O.kind==="source"||Q){const ie=Lm(S,N,"source");this.binders[S]=Q?new _a(O,N,B,u,ie,a.id):new qs(O,I,N,ie),b.push(`/a_${S}`)}else{const ie=Lm(S,N,"composite");this.binders[S]=new Jo(O,I,N,B,u,ie),b.push(`/z_${S}`)}}this.cacheKey=b.sort().join("")}getMaxValue(a){const u=this.binders[a];return u instanceof qs||u instanceof Jo?u.maxValue:0}populatePaintArrays(a,u,f){for(const b in this.binders){const S=this.binders[b];(S instanceof qs||S instanceof Jo||S instanceof _a)&&S.populatePaintArray(a,u,f)}}setConstantPatternPositions(a,u){for(const f in this.binders){const b=this.binders[f];b instanceof dc&&b.setConstantPatternPositions(a,u)}}updatePaintArrays(a,u,f,b,S){let C=!1;for(const I in a){const O=u.getPositions(I);for(const N of O){const B=f.feature(N.index);for(const G in this.binders){const Q=this.binders[G];if((Q instanceof qs||Q instanceof Jo||Q instanceof _a)&&Q.expression.isStateDependent===!0){const ie=b.paint.get(G);Q.expression=ie.value,Q.updatePaintArray(N.start,N.end,B,a[I],S),C=!0}}}}return C}defines(){const a=[];for(const u in this.binders){const f=this.binders[u];(f instanceof Bu||f instanceof dc)&&a.push(...f.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return a}getBinderAttributes(){const a=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof qs||f instanceof Jo)for(let b=0;b<f.paintVertexAttributes.length;b++)a.push(f.paintVertexAttributes[b].name);else if(f instanceof _a)for(let b=0;b<Yn.members.length;b++)a.push(Yn.members[b].name)}return a}getBinderUniforms(){const a=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Bu||f instanceof dc||f instanceof Jo)for(const b of f.uniformNames)a.push(b)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,u){const f=[];for(const b in this.binders){const S=this.binders[b];if(S instanceof Bu||S instanceof dc||S instanceof Jo){for(const C of S.uniformNames)if(u[C]){const I=S.getBinding(a,u[C],C);f.push({name:C,property:b,binding:I})}}}return f}setUniforms(a,u,f,b){for(const{name:S,property:C,binding:I}of u)this.binders[C].setUniform(I,b,f.get(C),S)}updatePaintBuffers(a){this._buffers=[];for(const u in this.binders){const f=this.binders[u];if(a&&f instanceof _a){const b=a.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(f instanceof qs||f instanceof Jo)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(a){for(const u in this.binders){const f=this.binders[u];(f instanceof qs||f instanceof Jo||f instanceof _a)&&f.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const u=this.binders[a];(u instanceof qs||u instanceof Jo||u instanceof _a)&&u.destroy()}}}class yo{constructor(a,u,f=()=>!0){this.programConfigurations={};for(const b of a)this.programConfigurations[b.id]=new u0(b,u,f);this.needsUpload=!1,this._featureMap=new al,this._bufferOffset=0}populatePaintArrays(a,u,f,b){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(a,u,b);u.id!==void 0&&this._featureMap.add(u.id,f,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,u,f,b){for(const S of f)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(a,this._featureMap,u,S,b)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function h0(h,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${a}-`,"").replace(/-/g,"_")]}function Lm(h,a,u){const f={color:{source:ju,composite:V},number:{source:T,composite:ju}},b=function(S){return{"line-pattern":{source:xt,composite:xt},"fill-pattern":{source:xt,composite:xt},"fill-extrusion-pattern":{source:xt,composite:xt}}[S]}(h);return b&&b[u]||f[a][u]}zt("ConstantBinder",Bu),zt("CrossFadedConstantBinder",dc),zt("SourceExpressionBinder",qs),zt("CrossFadedCompositeBinder",_a),zt("CompositeExpressionBinder",Jo),zt("ProgramConfiguration",u0,{omit:["_buffers"]}),zt("ProgramConfigurationSet",yo);const Gd=Math.pow(2,14)-1,Hd=-Gd-1;function ba(h){const a=Ke/h.extent,u=h.loadGeometry();for(let f=0;f<u.length;f++){const b=u[f];for(let S=0;S<b.length;S++){const C=b[S],I=Math.round(C.x*a),O=Math.round(C.y*a);C.x=dt(I,Hd,Gd),C.y=dt(O,Hd,Gd),(I<C.x||I>C.x+1||O<C.y||O>C.y+1)&&Tt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function $s(h,a){return{type:h.type,id:h.id,properties:h.properties,geometry:a?ba(h):[]}}const x5=-32768;function gW(h,a,u,f,b){h.emplaceBack(x5+8*a+f,x5+8*u+b)}class $w{constructor(a){this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ge,this.indexArray=new hn,this.segments=new vr,this.programConfigurations=new yo(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,f){const b=this.layers[0],S=[];let C=null,I=!1,O=b.type==="heatmap";if(b.type==="circle"){const B=b;C=B.layout.get("circle-sort-key"),I=!C.isConstant(),O=O||B.paint.get("circle-pitch-alignment")==="map"}const N=O?u.subdivisionGranularity.circle:1;for(const{feature:B,id:G,index:Q,sourceLayerIndex:ie}of a){const se=this.layers[0]._featureFilter.needGeometry,ce=$s(B,se);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom,{globalState:this.globalState}),ce,f))continue;const pe=I?C.evaluate(ce,{},f):void 0,Ee={id:G,properties:B.properties,type:B.type,sourceLayerIndex:ie,index:Q,geometry:se?ce.geometry:ba(B),patterns:{},sortKey:pe};S.push(Ee)}I&&S.sort((B,G)=>B.sortKey-G.sortKey);for(const B of S){const{geometry:G,index:Q,sourceLayerIndex:ie}=B,se=a[Q].feature;this.addFeature(B,G,Q,f,N),u.featureIndex.insert(se,G,Q,ie,this.index)}}update(a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,{imagePositions:f,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Dn),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,u,f,b,S=1){let C;switch(S){case 1:C=[0,7];break;case 3:C=[0,2,5,7];break;case 5:C=[0,1,3,4,6,7];break;case 7:C=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}const I=C.length;for(const O of u)for(const N of O){const B=N.x,G=N.y;if(B<0||B>=Ke||G<0||G>=Ke)continue;const Q=this.segments.prepareSegment(I*I,this.layoutVertexArray,this.indexArray,a.sortKey),ie=Q.vertexLength;for(let se=0;se<I;se++)for(let ce=0;ce<I;ce++)gW(this.layoutVertexArray,B,G,C[ce],C[se]);for(let se=0;se<I-1;se++)for(let ce=0;ce<I-1;ce++){const pe=ie+se*I+ce,Ee=ie+(se+1)*I+ce;this.indexArray.emplaceBack(pe,Ee+1,pe+1),this.indexArray.emplaceBack(pe,Ee,Ee+1)}Q.vertexLength+=I*I,Q.primitiveLength+=(I-1)*(I-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:{},canonical:b,globalState:this.globalState})}}function w5(h,a){for(let u=0;u<h.length;u++)if(Jd(a,h[u]))return!0;for(let u=0;u<a.length;u++)if(Jd(h,a[u]))return!0;return!!Vw(h,a)}function yW(h,a,u){return!!Jd(h,a)||!!Uw(a,h,u)}function E5(h,a){if(h.length===1)return S5(a,h[0]);for(let u=0;u<a.length;u++){const f=a[u];for(let b=0;b<f.length;b++)if(Jd(h,f[b]))return!0}for(let u=0;u<h.length;u++)if(S5(a,h[u]))return!0;for(let u=0;u<a.length;u++)if(Vw(h,a[u]))return!0;return!1}function _W(h,a,u){if(h.length>1){if(Vw(h,a))return!0;for(let f=0;f<a.length;f++)if(Uw(a[f],h,u))return!0}for(let f=0;f<h.length;f++)if(Uw(h[f],a,u))return!0;return!1}function Vw(h,a){if(h.length===0||a.length===0)return!1;for(let u=0;u<h.length-1;u++){const f=h[u],b=h[u+1];for(let S=0;S<a.length-1;S++)if(bW(f,b,a[S],a[S+1]))return!0}return!1}function bW(h,a,u,f){return vt(h,u,f)!==vt(a,u,f)&&vt(h,a,u)!==vt(h,a,f)}function Uw(h,a,u){const f=u*u;if(a.length===1)return h.distSqr(a[0])<f;for(let b=1;b<a.length;b++)if(T5(h,a[b-1],a[b])<f)return!0;return!1}function T5(h,a,u){const f=a.distSqr(u);if(f===0)return h.distSqr(a);const b=((h.x-a.x)*(u.x-a.x)+(h.y-a.y)*(u.y-a.y))/f;return h.distSqr(b<0?a:b>1?u:u.sub(a)._mult(b)._add(a))}function S5(h,a){let u,f,b,S=!1;for(let C=0;C<h.length;C++){u=h[C];for(let I=0,O=u.length-1;I<u.length;O=I++)f=u[I],b=u[O],f.y>a.y!=b.y>a.y&&a.x<(b.x-f.x)*(a.y-f.y)/(b.y-f.y)+f.x&&(S=!S)}return S}function Jd(h,a){let u=!1;for(let f=0,b=h.length-1;f<h.length;b=f++){const S=h[f],C=h[b];S.y>a.y!=C.y>a.y&&a.x<(C.x-S.x)*(a.y-S.y)/(C.y-S.y)+S.x&&(u=!u)}return u}function vW(h,a,u){const f=u[0],b=u[2];if(h.x<f.x&&a.x<f.x||h.x>b.x&&a.x>b.x||h.y<f.y&&a.y<f.y||h.y>b.y&&a.y>b.y)return!1;const S=vt(h,a,u[0]);return S!==vt(h,a,u[1])||S!==vt(h,a,u[2])||S!==vt(h,a,u[3])}function Dm(h,a,u){const f=a.paint.get(h).value;return f.kind==="constant"?f.value:u.programConfigurations.get(a.id).getMaxValue(h)}function d0(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function p0(h,a,u,f,b){if(!a[0]&&!a[1])return h;const S=p.convert(a)._mult(b);u==="viewport"&&S._rotate(-f);const C=[];for(let I=0;I<h.length;I++)C.push(h[I].sub(S));return C}let C5,P5;zt("CircleBucket",$w,{omit:["layers"]});var xW={get paint(){return P5=P5||new Ji({"circle-radius":new ir($e.paint_circle["circle-radius"]),"circle-color":new ir($e.paint_circle["circle-color"]),"circle-blur":new ir($e.paint_circle["circle-blur"]),"circle-opacity":new ir($e.paint_circle["circle-opacity"]),"circle-translate":new Gt($e.paint_circle["circle-translate"]),"circle-translate-anchor":new Gt($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Gt($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Gt($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ir($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ir($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ir($e.paint_circle["circle-stroke-opacity"])})},get layout(){return C5=C5||new Ji({"circle-sort-key":new ir($e.layout_circle["circle-sort-key"])})}};class wW extends Co{constructor(a){super(a,xW)}createBucket(a){return new $w(a)}queryRadius(a){const u=a;return Dm("circle-radius",this,u)+Dm("circle-stroke-width",this,u)+d0(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:a,feature:u,featureState:f,geometry:b,transform:S,pixelsToTileUnits:C,unwrappedTileID:I,getElevation:O}){const N=p0(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,C),B=this.paint.get("circle-radius").evaluate(u,f)+this.paint.get("circle-stroke-width").evaluate(u,f),G=this.paint.get("circle-pitch-alignment")==="map",Q=G?N:function(se,ce,pe,Ee){return se.map(Ue=>A5(Ue,ce,pe,Ee))}(N,S,I,O),ie=G?B*C:B;for(const se of b)for(const ce of se){const pe=G?ce:A5(ce,S,I,O);let Ee=ie;const Ue=S.projectTileCoordinates(ce.x,ce.y,I,O).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ee*=Ue/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ee*=S.cameraToCenterDistance/Ue),yW(Q,pe,Ee))return!0}return!1}}function A5(h,a,u,f){const b=a.projectTileCoordinates(h.x,h.y,u,f).point;return new p((.5*b.x+.5)*a.width,(.5*-b.y+.5)*a.height)}class R5 extends $w{}let I5;zt("HeatmapBucket",R5,{omit:["layers"]});var EW={get paint(){return I5=I5||new Ji({"heatmap-radius":new ir($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ir($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Gt($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qd($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Gt($e.paint_heatmap["heatmap-opacity"])})}};function Gw(h,{width:a,height:u},f,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==a*u*f)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${a*u*f}`)}else b=new Uint8Array(a*u*f);return h.width=a,h.height=u,h.data=b,h}function M5(h,{width:a,height:u},f){if(a===h.width&&u===h.height)return;const b=Gw({},{width:a,height:u},f);Hw(h,b,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,a),height:Math.min(h.height,u)},f),h.width=a,h.height=u,h.data=b.data}function Hw(h,a,u,f,b,S){if(b.width===0||b.height===0)return a;if(b.width>h.width||b.height>h.height||u.x>h.width-b.width||u.y>h.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>a.width||b.height>a.height||f.x>a.width-b.width||f.y>a.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const C=h.data,I=a.data;if(C===I)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<b.height;O++){const N=((u.y+O)*h.width+u.x)*S,B=((f.y+O)*a.width+f.x)*S;for(let G=0;G<b.width*S;G++)I[B+G]=C[N+G]}return a}class Nm{constructor(a,u){Gw(this,a,1,u)}resize(a){M5(this,a,1)}clone(){return new Nm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,f,b,S){Hw(a,u,f,b,S,1)}}class _o{constructor(a,u){Gw(this,a,4,u)}resize(a){M5(this,a,4)}replace(a,u){u?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new _o({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,f,b,S){Hw(a,u,f,b,S,4)}setPixel(a,u,f){const b=4*(a*this.width+u);this.data[b+0]=Math.round(255*f.r/f.a),this.data[b+1]=Math.round(255*f.g/f.a),this.data[b+2]=Math.round(255*f.b/f.a),this.data[b+3]=Math.round(255*f.a)}}function O5(h){const a={},u=h.resolution||256,f=h.clips?h.clips.length:1,b=h.image||new _o({width:u,height:f});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const S=(C,I,O)=>{a[h.evaluationKey]=O;const N=h.expression.evaluate(a);b.setPixel(C/4/u,I/4,N)};if(h.clips)for(let C=0,I=0;C<f;++C,I+=4*u)for(let O=0,N=0;O<u;O++,N+=4){const B=O/(u-1),{start:G,end:Q}=h.clips[C];S(I,N,G*(1-B)+Q*B)}else for(let C=0,I=0;C<u;C++,I+=4)S(0,I,C/(u-1));return b}zt("AlphaImage",Nm),zt("RGBAImage",_o);const Jw="big-fb";class TW extends Co{createBucket(a){return new R5(a)}constructor(a){super(a,EW),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=O5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Jw)&&this.heatmapFbos.delete(Jw)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let k5;var SW={get paint(){return k5=k5||new Ji({"hillshade-illumination-direction":new Gt($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Gt($e.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Gt($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Gt($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Gt($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Gt($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Gt($e.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Gt($e.paint_hillshade["hillshade-method"])})}};class CW extends Co{constructor(a){super(a,SW),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let a=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values;const S=Math.max(a.length,u.length,f.length,b.length);a=a.concat(Array(S-a.length).fill(a.at(-1))),u=u.concat(Array(S-u.length).fill(u.at(-1))),f=f.concat(Array(S-f.length).fill(f.at(-1))),b=b.concat(Array(S-b.length).fill(b.at(-1)));const C=u.map(ur);return{directionRadians:a.map(ur),altitudeRadians:C,shadowColor:b,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let L5;var PW={get paint(){return L5=L5||new Ji({"color-relief-opacity":new Gt($e["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new qd($e["paint_color-relief"]["color-relief-color"])})}};class Ww{constructor(a,u,f,b){this.context=a,this.format=f,this.texture=a.gl.createTexture(),this.update(u,b)}update(a,u,f){const{width:b,height:S}=a,C=!(this.size&&this.size[0]===b&&this.size[1]===S||f),{context:I}=this,{gl:O}=I;if(this.useMipmap=!!(u&&u.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[b,S],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||Bt(a)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,a):O.texImage2D(O.TEXTURE_2D,0,this.format,b,S,0,this.format,O.UNSIGNED_BYTE,a.data);else{const{x:N,y:B}=f||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||Bt(a)?O.texSubImage2D(O.TEXTURE_2D,0,N,B,O.RGBA,O.UNSIGNED_BYTE,a):O.texSubImage2D(O.TEXTURE_2D,0,N,B,b,S,O.RGBA,O.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D),I.pixelStoreUnpackFlipY.setDefault(),I.pixelStoreUnpack.setDefault(),I.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(a,u,f){const{context:b}=this,{gl:S}=b;S.bindTexture(S.TEXTURE_2D,this.texture),f!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=S.LINEAR),a!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,a),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,f||a),this.filter=a),u!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class D5{constructor(a,u,f,b=1,S=1,C=1,I=0){if(this.uid=a,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Tt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const O=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=S,this.blueFactor=C,this.baseShift=I;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let N=0;N<O;N++)this.data[this._idx(-1,N)]=this.data[this._idx(0,N)],this.data[this._idx(O,N)]=this.data[this._idx(O-1,N)],this.data[this._idx(N,-1)]=this.data[this._idx(N,0)],this.data[this._idx(N,O)]=this.data[this._idx(N,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let N=0;N<O;N++)for(let B=0;B<O;B++){const G=this.get(N,B);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(a,u){const f=new Uint8Array(this.data.buffer),b=4*this._idx(a,u);return this.unpack(f[b],f[b+1],f[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,u){if(a<-1||a>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(a+1)}unpack(a,u,f){return a*this.redFactor+u*this.greenFactor+f*this.blueFactor-this.baseShift}pack(a){return N5(a,this.getUnpackVector())}getPixels(){return new _o({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,u,f){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let b=u*this.dim,S=u*this.dim+this.dim,C=f*this.dim,I=f*this.dim+this.dim;switch(u){case-1:b=S-1;break;case 1:S=b+1}switch(f){case-1:C=I-1;break;case 1:I=C+1}const O=-u*this.dim,N=-f*this.dim;for(let B=C;B<I;B++)for(let G=b;G<S;G++)this.data[this._idx(G,B)]=a.data[this._idx(G+O,B+N)]}}function N5(h,a){const u=a[0],f=a[1],b=a[2],S=a[3],C=Math.min(u,f,b),I=Math.round((h+S)/C);return{r:Math.floor(I*C/u)%256,g:Math.floor(I*C/f)%256,b:Math.floor(I*C/b)%256}}zt("DEMData",D5);class AW extends Co{constructor(a){super(a,PW)}_createColorRamp(a){const u={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Iu&&f._styleExpression.expression instanceof Pi){this.colorRampExpression=f;const C=f._styleExpression.expression;u.elevationStops=C.labels,u.colorStops=[];for(const I of u.elevationStops)u.colorStops.push(C.evaluate({globals:{elevation:I}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[Or.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=a)return u;const b={elevationStops:[],colorStops:[]},S=(u.elevationStops.length-1)/(a-1);for(let C=0;C<u.elevationStops.length-.5;C+=S)b.elevationStops.push(u.elevationStops[Math.round(C)]),b.colorStops.push(u.colorStops[Math.round(C)]);return Tt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(a,u,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const b=this._createColorRamp(u),S=new _o({width:b.colorStops.length,height:1}),C=new _o({width:b.colorStops.length,height:1});for(let I=0;I<b.elevationStops.length;I++){const O=N5(b.elevationStops[I],f);C.setPixel(0,I,new Or(O.r/255,O.g/255,O.b/255,1)),S.setPixel(0,I,b.colorStops[I])}return this.colorRampTextures={elevationTexture:new Ww(a,C,a.gl.RGBA),colorTexture:new Ww(a,S,a.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const RW=Un([{name:"a_pos",components:2,type:"Int16"}],4),{members:IW}=RW;function Zw(h,a,u){const f=u.patternDependencies;let b=!1;for(const S of a){const C=S.paint.get(`${h}-pattern`);C.isConstant()||(b=!0);const I=C.constantOr(null);I&&(b=!0,f[I.to]=!0,f[I.from]=!0)}return b}function Kw(h,a,u,f,b){const S=b.patternDependencies;for(const C of a){const I=C.paint.get(`${h}-pattern`).value;if(I.kind!=="constant"){let O=I.evaluate({zoom:f-1},u,{},b.availableImages),N=I.evaluate({zoom:f},u,{},b.availableImages),B=I.evaluate({zoom:f+1},u,{},b.availableImages);O=O&&O.name?O.name:O,N=N&&N.name?N.name:N,B=B&&B.name?B.name:B,S[O]=!0,S[N]=!0,S[B]=!0,u.patterns[C.id]={min:O,mid:N,max:B}}}return u}function F5(h,a,u,f,b){let S;if(b===function(C,I,O,N){let B=0;for(let G=I,Q=O-N;G<O;G+=N)B+=(C[Q]-C[G])*(C[G+1]+C[Q+1]),Q=G;return B}(h,a,u,f)>0)for(let C=a;C<u;C+=f)S=q5(C/f|0,h[C],h[C+1],S);else for(let C=u-f;C>=a;C-=f)S=q5(C/f|0,h[C],h[C+1],S);return S&&Wd(S,S.next)&&(Bm(S),S=S.next),S}function qu(h,a){if(!h)return h;a||(a=h);let u,f=h;do if(u=!1,f.steiner||!Wd(f,f.next)&&Hn(f.prev,f,f.next)!==0)f=f.next;else{if(Bm(f),f=a=f.prev,f===f.next)break;u=!0}while(u||f!==a);return a}function Fm(h,a,u,f,b,S,C){if(!h)return;!C&&S&&function(O,N,B,G){let Q=O;do Q.z===0&&(Q.z=Yw(Q.x,Q.y,N,B,G)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==O);Q.prevZ.nextZ=null,Q.prevZ=null,function(ie){let se,ce=1;do{let pe,Ee=ie;ie=null;let Ue=null;for(se=0;Ee;){se++;let Oe=Ee,Ne=0;for(let at=0;at<ce&&(Ne++,Oe=Oe.nextZ,Oe);at++);let et=ce;for(;Ne>0||et>0&&Oe;)Ne!==0&&(et===0||!Oe||Ee.z<=Oe.z)?(pe=Ee,Ee=Ee.nextZ,Ne--):(pe=Oe,Oe=Oe.nextZ,et--),Ue?Ue.nextZ=pe:ie=pe,pe.prevZ=Ue,Ue=pe;Ee=Oe}Ue.nextZ=null,ce*=2}while(se>1)}(Q)}(h,f,b,S);let I=h;for(;h.prev!==h.next;){const O=h.prev,N=h.next;if(S?OW(h,f,b,S):MW(h))a.push(O.i,h.i,N.i),Bm(h),h=N.next,I=N.next;else if((h=N)===I){C?C===1?Fm(h=kW(qu(h),a),a,u,f,b,S,2):C===2&&LW(h,a,u,f,b,S):Fm(qu(h),a,u,f,b,S,1);break}}}function MW(h){const a=h.prev,u=h,f=h.next;if(Hn(a,u,f)>=0)return!1;const b=a.x,S=u.x,C=f.x,I=a.y,O=u.y,N=f.y,B=Math.min(b,S,C),G=Math.min(I,O,N),Q=Math.max(b,S,C),ie=Math.max(I,O,N);let se=f.next;for(;se!==a;){if(se.x>=B&&se.x<=Q&&se.y>=G&&se.y<=ie&&zm(b,I,S,O,C,N,se.x,se.y)&&Hn(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function OW(h,a,u,f){const b=h.prev,S=h,C=h.next;if(Hn(b,S,C)>=0)return!1;const I=b.x,O=S.x,N=C.x,B=b.y,G=S.y,Q=C.y,ie=Math.min(I,O,N),se=Math.min(B,G,Q),ce=Math.max(I,O,N),pe=Math.max(B,G,Q),Ee=Yw(ie,se,a,u,f),Ue=Yw(ce,pe,a,u,f);let Oe=h.prevZ,Ne=h.nextZ;for(;Oe&&Oe.z>=Ee&&Ne&&Ne.z<=Ue;){if(Oe.x>=ie&&Oe.x<=ce&&Oe.y>=se&&Oe.y<=pe&&Oe!==b&&Oe!==C&&zm(I,B,O,G,N,Q,Oe.x,Oe.y)&&Hn(Oe.prev,Oe,Oe.next)>=0||(Oe=Oe.prevZ,Ne.x>=ie&&Ne.x<=ce&&Ne.y>=se&&Ne.y<=pe&&Ne!==b&&Ne!==C&&zm(I,B,O,G,N,Q,Ne.x,Ne.y)&&Hn(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;Oe&&Oe.z>=Ee;){if(Oe.x>=ie&&Oe.x<=ce&&Oe.y>=se&&Oe.y<=pe&&Oe!==b&&Oe!==C&&zm(I,B,O,G,N,Q,Oe.x,Oe.y)&&Hn(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.prevZ}for(;Ne&&Ne.z<=Ue;){if(Ne.x>=ie&&Ne.x<=ce&&Ne.y>=se&&Ne.y<=pe&&Ne!==b&&Ne!==C&&zm(I,B,O,G,N,Q,Ne.x,Ne.y)&&Hn(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function kW(h,a){let u=h;do{const f=u.prev,b=u.next.next;!Wd(f,b)&&j5(f,u,u.next,b)&&jm(f,b)&&jm(b,f)&&(a.push(f.i,u.i,b.i),Bm(u),Bm(u.next),u=h=b),u=u.next}while(u!==h);return qu(u)}function LW(h,a,u,f,b,S){let C=h;do{let I=C.next.next;for(;I!==C.prev;){if(C.i!==I.i&&jW(C,I)){let O=B5(C,I);return C=qu(C,C.next),O=qu(O,O.next),Fm(C,a,u,f,b,S,0),void Fm(O,a,u,f,b,S,0)}I=I.next}C=C.next}while(C!==h)}function DW(h,a){let u=h.x-a.x;return u===0&&(u=h.y-a.y,u===0)&&(u=(h.next.y-h.y)/(h.next.x-h.x)-(a.next.y-a.y)/(a.next.x-a.x)),u}function NW(h,a){const u=function(b,S){let C=S;const I=b.x,O=b.y;let N,B=-1/0;if(Wd(b,C))return C;do{if(Wd(b,C.next))return C.next;if(O<=C.y&&O>=C.next.y&&C.next.y!==C.y){const ce=C.x+(O-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(ce<=I&&ce>B&&(B=ce,N=C.x<C.next.x?C:C.next,ce===I))return N}C=C.next}while(C!==S);if(!N)return null;const G=N,Q=N.x,ie=N.y;let se=1/0;C=N;do{if(I>=C.x&&C.x>=Q&&I!==C.x&&z5(O<ie?I:B,O,Q,ie,O<ie?B:I,O,C.x,C.y)){const ce=Math.abs(O-C.y)/(I-C.x);jm(C,b)&&(ce<se||ce===se&&(C.x>N.x||C.x===N.x&&FW(N,C)))&&(N=C,se=ce)}C=C.next}while(C!==G);return N}(h,a);if(!u)return a;const f=B5(u,h);return qu(f,f.next),qu(u,u.next)}function FW(h,a){return Hn(h.prev,h,a.prev)<0&&Hn(a.next,h,h.next)<0}function Yw(h,a,u,f,b){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*b|0)|h<<8))|h<<4))|h<<2))|h<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-f)*b|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function zW(h){let a=h,u=h;do(a.x<u.x||a.x===u.x&&a.y<u.y)&&(u=a),a=a.next;while(a!==h);return u}function z5(h,a,u,f,b,S,C,I){return(b-C)*(a-I)>=(h-C)*(S-I)&&(h-C)*(f-I)>=(u-C)*(a-I)&&(u-C)*(S-I)>=(b-C)*(f-I)}function zm(h,a,u,f,b,S,C,I){return!(h===C&&a===I)&&z5(h,a,u,f,b,S,C,I)}function jW(h,a){return h.next.i!==a.i&&h.prev.i!==a.i&&!function(u,f){let b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==f.i&&b.next.i!==f.i&&j5(b,b.next,u,f))return!0;b=b.next}while(b!==u);return!1}(h,a)&&(jm(h,a)&&jm(a,h)&&function(u,f){let b=u,S=!1;const C=(u.x+f.x)/2,I=(u.y+f.y)/2;do b.y>I!=b.next.y>I&&b.next.y!==b.y&&C<(b.next.x-b.x)*(I-b.y)/(b.next.y-b.y)+b.x&&(S=!S),b=b.next;while(b!==u);return S}(h,a)&&(Hn(h.prev,h,a.prev)||Hn(h,a.prev,a))||Wd(h,a)&&Hn(h.prev,h,h.next)>0&&Hn(a.prev,a,a.next)>0)}function Hn(h,a,u){return(a.y-h.y)*(u.x-a.x)-(a.x-h.x)*(u.y-a.y)}function Wd(h,a){return h.x===a.x&&h.y===a.y}function j5(h,a,u,f){const b=m0(Hn(h,a,u)),S=m0(Hn(h,a,f)),C=m0(Hn(u,f,h)),I=m0(Hn(u,f,a));return b!==S&&C!==I||!(b!==0||!f0(h,u,a))||!(S!==0||!f0(h,f,a))||!(C!==0||!f0(u,h,f))||!(I!==0||!f0(u,a,f))}function f0(h,a,u){return a.x<=Math.max(h.x,u.x)&&a.x>=Math.min(h.x,u.x)&&a.y<=Math.max(h.y,u.y)&&a.y>=Math.min(h.y,u.y)}function m0(h){return h>0?1:h<0?-1:0}function jm(h,a){return Hn(h.prev,h,h.next)<0?Hn(h,a,h.next)>=0&&Hn(h,h.prev,a)>=0:Hn(h,a,h.prev)<0||Hn(h,h.next,a)<0}function B5(h,a){const u=Xw(h.i,h.x,h.y),f=Xw(a.i,a.x,a.y),b=h.next,S=a.prev;return h.next=a,a.prev=h,u.next=b,b.prev=u,f.next=u,u.prev=f,S.next=f,f.prev=S,f}function q5(h,a,u,f){const b=Xw(h,a,u);return f?(b.next=f.next,b.prev=f,f.next.prev=b,f.next=b):(b.prev=b,b.next=b),b}function Bm(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Xw(h,a,u){return{i:h,x:a,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zd{constructor(a,u){if(u>a)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=a,this._minGranularity=u}getGranularityForZoomLevel(a){return Math.max(Math.floor(this._baseZoomGranularity/(1<<a)),this._minGranularity,1)}}class g0{constructor(a){this.fill=a.fill,this.line=a.line,this.tile=a.tile,this.stencil=a.stencil,this.circle=a.circle}}g0.noSubdivision=new g0({fill:new Zd(0,0),line:new Zd(0,0),tile:new Zd(0,0),stencil:new Zd(0,0),circle:1}),zt("SubdivisionGranularityExpression",Zd),zt("SubdivisionGranularitySetting",g0);const Kd=-32768,qm=32767;class BW{constructor(a,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=a,this._granularityCellSize=Ke/a,this._canonical=u}_getKey(a,u){return(a+=32768)<<16|u+32768}_vertexToIndex(a,u){if(a<-32768||u<-32768||a>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(a),b=0|Math.round(u),S=this._getKey(f,b);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);const C=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,C),this._vertexBuffer.push(f,b),C}_subdivideTrianglesScanline(a){if(this._granularity<2)return function(b,S){const C=[];for(let I=0;I<S.length;I+=3){const O=S[I],N=S[I+1],B=S[I+2],G=b[2*O],Q=b[2*O+1];(b[2*N]-G)*(b[2*B+1]-Q)-(b[2*N+1]-Q)*(b[2*B]-G)>0?(C.push(O),C.push(B),C.push(N)):(C.push(O),C.push(N),C.push(B))}return C}(this._vertexBuffer,a);const u=[],f=a.length;for(let b=0;b<f;b+=3){const S=[a[b+0],a[b+1],a[b+2]],C=[this._vertexBuffer[2*a[b+0]+0],this._vertexBuffer[2*a[b+0]+1],this._vertexBuffer[2*a[b+1]+0],this._vertexBuffer[2*a[b+1]+1],this._vertexBuffer[2*a[b+2]+0],this._vertexBuffer[2*a[b+2]+1]];let I=1/0,O=1/0,N=-1/0,B=-1/0;for(let ce=0;ce<3;ce++){const pe=C[2*ce],Ee=C[2*ce+1];I=Math.min(I,pe),N=Math.max(N,pe),O=Math.min(O,Ee),B=Math.max(B,Ee)}if(I===N||O===B)continue;const G=Math.floor(I/this._granularityCellSize),Q=Math.ceil(N/this._granularityCellSize),ie=Math.floor(O/this._granularityCellSize),se=Math.ceil(B/this._granularityCellSize);if(G!==Q||ie!==se)for(let ce=ie;ce<se;ce++){const pe=this._scanlineGenerateVertexRingForCellRow(ce,C,S);qW(this._vertexBuffer,pe,u)}else u.push(...S)}return u}_scanlineGenerateVertexRingForCellRow(a,u,f){const b=a*this._granularityCellSize,S=b+this._granularityCellSize,C=[];for(let I=0;I<3;I++){const O=u[2*I],N=u[2*I+1],B=u[2*(I+1)%6],G=u[(2*(I+1)+1)%6],Q=u[2*(I+2)%6],ie=u[(2*(I+2)+1)%6],se=B-O,ce=G-N,pe=se===0,Ee=ce===0,Ue=(b-N)/ce,Oe=(S-N)/ce,Ne=Math.min(Ue,Oe),et=Math.max(Ue,Oe);if(!Ee&&(Ne>=1||et<=0)||Ee&&(N<b||N>S)){G>=b&&G<=S&&C.push(f[(I+1)%3]);continue}!Ee&&Ne>0&&C.push(this._vertexToIndex(O+se*Ne,N+ce*Ne));const at=O+se*Math.max(Ne,0),gt=O+se*Math.min(et,1);pe||this._generateIntraEdgeVertices(C,O,N,B,G,at,gt),!Ee&&et<1&&C.push(this._vertexToIndex(O+se*et,N+ce*et)),(Ee||G>=b&&G<=S)&&C.push(f[(I+1)%3]),!Ee&&(G<=b||G>=S)&&this._generateInterEdgeVertices(C,O,N,B,G,Q,ie,gt,b,S)}return C}_generateIntraEdgeVertices(a,u,f,b,S,C,I){const O=b-u,N=S-f,B=N===0,G=B?Math.min(u,b):Math.min(C,I),Q=B?Math.max(u,b):Math.max(C,I),ie=Math.floor(G/this._granularityCellSize)+1,se=Math.ceil(Q/this._granularityCellSize)-1;if(B?u<b:C<I)for(let ce=ie;ce<=se;ce++){const pe=ce*this._granularityCellSize;a.push(this._vertexToIndex(pe,f+N*(pe-u)/O))}else for(let ce=se;ce>=ie;ce--){const pe=ce*this._granularityCellSize;a.push(this._vertexToIndex(pe,f+N*(pe-u)/O))}}_generateInterEdgeVertices(a,u,f,b,S,C,I,O,N,B){const G=S-f,Q=C-b,ie=I-S,se=(N-S)/ie,ce=(B-S)/ie,pe=Math.min(se,ce),Ee=Math.max(se,ce),Ue=b+Q*pe;let Oe=Math.floor(Math.min(Ue,O)/this._granularityCellSize)+1,Ne=Math.ceil(Math.max(Ue,O)/this._granularityCellSize)-1,et=O<Ue;const at=ie===0;if(at&&(I===N||I===B))return;if(at||pe>=1||Ee<=0){const Mt=f-I,wt=C+(u-C)*Math.min((N-I)/Mt,(B-I)/Mt);Oe=Math.floor(Math.min(wt,O)/this._granularityCellSize)+1,Ne=Math.ceil(Math.max(wt,O)/this._granularityCellSize)-1,et=O<wt}const gt=G>0?B:N;if(et)for(let Mt=Oe;Mt<=Ne;Mt++)a.push(this._vertexToIndex(Mt*this._granularityCellSize,gt));else for(let Mt=Ne;Mt>=Oe;Mt--)a.push(this._vertexToIndex(Mt*this._granularityCellSize,gt))}_generateOutline(a){const u=[];for(const f of a){const b=$u(f,this._granularity,!0),S=this._pointArrayToIndices(b),C=[];for(let I=1;I<S.length;I++)C.push(S[I-1]),C.push(S[I]);u.push(C)}return u}_handlePoles(a){let u=!1,f=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(u||f)&&this._fillPoles(a,u,f)}_ensureNoPoleVertices(){const a=this._vertexBuffer;for(let u=0;u<a.length;u+=2){const f=a[u+1];f===Kd&&(a[u+1]=-32767),f===qm&&(a[u+1]=32766)}}_generatePoleQuad(a,u,f,b,S,C){b>S!=(C===Kd)?(a.push(u),a.push(f),a.push(this._vertexToIndex(b,C)),a.push(f),a.push(this._vertexToIndex(S,C)),a.push(this._vertexToIndex(b,C))):(a.push(f),a.push(u),a.push(this._vertexToIndex(b,C)),a.push(this._vertexToIndex(S,C)),a.push(f),a.push(this._vertexToIndex(b,C)))}_fillPoles(a,u,f){const b=this._vertexBuffer,S=Ke,C=a.length;for(let I=2;I<C;I+=3){const O=a[I-2],N=a[I-1],B=a[I],G=b[2*O],Q=b[2*O+1],ie=b[2*N],se=b[2*N+1],ce=b[2*B],pe=b[2*B+1];u&&(Q===0&&se===0&&this._generatePoleQuad(a,O,N,G,ie,Kd),se===0&&pe===0&&this._generatePoleQuad(a,N,B,ie,ce,Kd),pe===0&&Q===0&&this._generatePoleQuad(a,B,O,ce,G,Kd)),f&&(Q===S&&se===S&&this._generatePoleQuad(a,O,N,G,ie,qm),se===S&&pe===S&&this._generatePoleQuad(a,N,B,ie,ce,qm),pe===S&&Q===S&&this._generatePoleQuad(a,B,O,ce,G,qm))}}_initializeVertices(a){for(let u=0;u<a.length;u+=2)this._vertexToIndex(a[u],a[u+1])}subdividePolygonInternal(a,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:b}=function(I){const O=[],N=[];for(const B of I)if(B.length!==0){B!==I[0]&&O.push(N.length/2);for(let G=0;G<B.length;G++)N.push(B[G].x),N.push(B[G].y)}return{flattened:N,holeIndices:O}}(a);let S;this._initializeVertices(f);try{const I=function(N,B,G=2){const Q=B&&B.length,ie=Q?B[0]*G:N.length;let se=F5(N,0,ie,G,!0);const ce=[];if(!se||se.next===se.prev)return ce;let pe,Ee,Ue;if(Q&&(se=function(Oe,Ne,et,at){const gt=[];for(let Mt=0,wt=Ne.length;Mt<wt;Mt++){const Rt=F5(Oe,Ne[Mt]*at,Mt<wt-1?Ne[Mt+1]*at:Oe.length,at,!1);Rt===Rt.next&&(Rt.steiner=!0),gt.push(zW(Rt))}gt.sort(DW);for(let Mt=0;Mt<gt.length;Mt++)et=NW(gt[Mt],et);return et}(N,B,se,G)),N.length>80*G){pe=N[0],Ee=N[1];let Oe=pe,Ne=Ee;for(let et=G;et<ie;et+=G){const at=N[et],gt=N[et+1];at<pe&&(pe=at),gt<Ee&&(Ee=gt),at>Oe&&(Oe=at),gt>Ne&&(Ne=gt)}Ue=Math.max(Oe-pe,Ne-Ee),Ue=Ue!==0?32767/Ue:0}return Fm(se,ce,G,pe,Ee,Ue,0),ce}(f,b),O=this._convertIndices(f,I);S=this._subdivideTrianglesScanline(O)}catch(I){console.error(I)}let C=[];return u&&(C=this._generateOutline(a)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:C}}_convertIndices(a,u){const f=[];for(let b=0;b<u.length;b++)f.push(this._vertexToIndex(a[2*u[b]],a[2*u[b]+1]));return f}_pointArrayToIndices(a){const u=[];for(let f=0;f<a.length;f++){const b=a[f];u.push(this._vertexToIndex(b.x,b.y))}return u}}function $5(h,a,u,f=!0){return new BW(u,a).subdividePolygonInternal(h,f)}function $u(h,a,u=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const f=h[0],b=h[h.length-1],S=u&&(f.x!==b.x||f.y!==b.y);if(a<2)return S?[...h,h[0]]:[...h];const C=Math.floor(Ke/a),I=[];I.push(new p(h[0].x,h[0].y));const O=h.length,N=S?O:O-1;for(let B=0;B<N;B++){const G=h[B],Q=B<O-1?h[B+1]:h[0],ie=G.x,se=G.y,ce=Q.x,pe=Q.y,Ee=ie!==ce,Ue=se!==pe;if(!Ee&&!Ue)continue;const Oe=ce-ie,Ne=pe-se,et=Math.abs(Oe),at=Math.abs(Ne);let gt=ie,Mt=se;for(;;){const Rt=Oe>0?(Math.floor(gt/C)+1)*C:(Math.ceil(gt/C)-1)*C,Zt=Ne>0?(Math.floor(Mt/C)+1)*C:(Math.ceil(Mt/C)-1)*C,At=Math.abs(gt-Rt),It=Math.abs(Mt-Zt),ht=Math.abs(gt-ce),sr=Math.abs(Mt-pe),dr=Ee?At/et:Number.POSITIVE_INFINITY,Qt=Ue?It/at:Number.POSITIVE_INFINITY;if((ht<=At||!Ee)&&(sr<=It||!Ue))break;if(dr<Qt&&Ee||!Ue){gt=Rt,Mt+=Ne*dr;const Ut=new p(gt,Math.round(Mt));I[I.length-1].x===Ut.x&&I[I.length-1].y===Ut.y||I.push(Ut)}else{gt+=Oe*Qt,Mt=Zt;const Ut=new p(Math.round(gt),Mt);I[I.length-1].x===Ut.x&&I[I.length-1].y===Ut.y||I.push(Ut)}}const wt=new p(ce,pe);I[I.length-1].x===wt.x&&I[I.length-1].y===wt.y||I.push(wt)}return I}function qW(h,a,u){if(a.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,b=h[2*a[0]];for(let O=1;O<a.length;O++){const N=h[2*a[O]];N<b&&(b=N,f=O)}const S=a.length;let C=f,I=(C+1)%S;for(;;){const O=C-1>=0?C-1:S-1,N=(I+1)%S,B=h[2*a[O]],G=h[2*a[N]],Q=h[2*a[C]],ie=h[2*a[C]+1],se=h[2*a[I]+1];let ce=!1;if(B<G)ce=!0;else if(B>G)ce=!1;else{const pe=se-ie,Ee=-(h[2*a[I]]-Q),Ue=ie<se?1:-1;((B-Q)*pe+(h[2*a[O]+1]-ie)*Ee)*Ue>((G-Q)*pe+(h[2*a[N]+1]-ie)*Ee)*Ue&&(ce=!0)}if(ce){const pe=a[O],Ee=a[C],Ue=a[I];pe!==Ee&&pe!==Ue&&Ee!==Ue&&u.push(Ue,Ee,pe),C--,C<0&&(C=S-1)}else{const pe=a[N],Ee=a[C],Ue=a[I];pe!==Ee&&pe!==Ue&&Ee!==Ue&&u.push(Ue,Ee,pe),I++,I>=S&&(I=0)}if(O===N)break}}function V5(h,a,u,f,b,S,C,I,O){const N=b.length/2,B=C&&I&&O;if(N<vr.MAX_VERTEX_ARRAY_LENGTH){const G=a.prepareSegment(N,u,f),Q=G.vertexLength;for(let ce=0;ce<S.length;ce+=3)f.emplaceBack(Q+S[ce],Q+S[ce+1],Q+S[ce+2]);let ie,se;G.vertexLength+=N,G.primitiveLength+=S.length/3,B&&(se=C.prepareSegment(N,u,I),ie=se.vertexLength,se.vertexLength+=N);for(let ce=0;ce<b.length;ce+=2)h(b[ce],b[ce+1]);if(B)for(let ce=0;ce<O.length;ce++){const pe=O[ce];for(let Ee=1;Ee<pe.length;Ee+=2)I.emplaceBack(ie+pe[Ee-1],ie+pe[Ee]);se.primitiveLength+=pe.length/2}}else(function(G,Q,ie,se,ce,pe){const Ee=[];for(let at=0;at<se.length/2;at++)Ee.push(-1);const Ue={count:0};let Oe=0,Ne=G.getOrCreateLatestSegment(Q,ie),et=Ne.vertexLength;for(let at=2;at<ce.length;at+=3){const gt=ce[at-2],Mt=ce[at-1],wt=ce[at];let Rt=Ee[gt]<Oe,Zt=Ee[Mt]<Oe,At=Ee[wt]<Oe;Ne.vertexLength+((Rt?1:0)+(Zt?1:0)+(At?1:0))>vr.MAX_VERTEX_ARRAY_LENGTH&&(Ne=G.createNewSegment(Q,ie),Oe=Ue.count,Rt=!0,Zt=!0,At=!0,et=0);const It=$m(Ee,se,pe,Ue,gt,Rt,Ne),ht=$m(Ee,se,pe,Ue,Mt,Zt,Ne),sr=$m(Ee,se,pe,Ue,wt,At,Ne);ie.emplaceBack(et+It-Oe,et+ht-Oe,et+sr-Oe),Ne.primitiveLength++}})(a,u,f,b,S,h),B&&function(G,Q,ie,se,ce,pe){const Ee=[];for(let at=0;at<se.length/2;at++)Ee.push(-1);const Ue={count:0};let Oe=0,Ne=G.getOrCreateLatestSegment(Q,ie),et=Ne.vertexLength;for(let at=0;at<ce.length;at++){const gt=ce[at];for(let Mt=1;Mt<ce[at].length;Mt+=2){const wt=gt[Mt-1],Rt=gt[Mt];let Zt=Ee[wt]<Oe,At=Ee[Rt]<Oe;Ne.vertexLength+((Zt?1:0)+(At?1:0))>vr.MAX_VERTEX_ARRAY_LENGTH&&(Ne=G.createNewSegment(Q,ie),Oe=Ue.count,Zt=!0,At=!0,et=0);const It=$m(Ee,se,pe,Ue,wt,Zt,Ne),ht=$m(Ee,se,pe,Ue,Rt,At,Ne);ie.emplaceBack(et+It-Oe,et+ht-Oe),Ne.primitiveLength++}}}(C,u,I,b,O,h),a.forceNewSegmentOnNextPrepare(),C?.forceNewSegmentOnNextPrepare()}function $m(h,a,u,f,b,S,C){if(S){const I=f.count;return u(a[2*b],a[2*b+1]),h[b]=f.count,f.count++,C.vertexLength++,I}return h[b]}class Qw{constructor(a){this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new st,this.indexArray=new hn,this.indexArray2=new an,this.programConfigurations=new yo(a.layers,a.zoom),this.segments=new vr,this.segments2=new vr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,f){this.hasPattern=Zw("fill",this.layers,u);const b=this.layers[0].layout.get("fill-sort-key"),S=!b.isConstant(),C=[];for(const{feature:I,id:O,index:N,sourceLayerIndex:B}of a){const G=this.layers[0]._featureFilter.needGeometry,Q=$s(I,G);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom,{globalState:this.globalState}),Q,f))continue;const ie=S?b.evaluate(Q,{},f,u.availableImages):void 0,se={id:O,properties:I.properties,type:I.type,sourceLayerIndex:B,index:N,geometry:G?Q.geometry:ba(I),patterns:{},sortKey:ie};C.push(se)}S&&C.sort((I,O)=>I.sortKey-O.sortKey);for(const I of C){const{geometry:O,index:N,sourceLayerIndex:B}=I;if(this.hasPattern){const G=Kw("fill",this.layers,I,this.zoom,u);this.patternFeatures.push(G)}else this.addFeature(I,O,N,f,{},u.subdivisionGranularity);u.featureIndex.insert(a[N].feature,O,N,B,this.index)}}update(a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,{imagePositions:f,globalState:this.globalState})}addFeatures(a,u,f){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,IW),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,u,f,b,S,C){for(const I of Su(u,500)){const O=$5(I,b,C.fill.getGranularityForZoomLevel(b.z)),N=this.layoutVertexArray;V5((B,G)=>{N.emplaceBack(B,G)},this.segments,this.layoutVertexArray,this.indexArray,O.verticesFlattened,O.indicesTriangles,this.segments2,this.indexArray2,O.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:S,canonical:b,globalState:this.globalState})}}let U5,G5;zt("FillBucket",Qw,{omit:["layers","patternFeatures"]});var $W={get paint(){return G5=G5||new Ji({"fill-antialias":new Gt($e.paint_fill["fill-antialias"]),"fill-opacity":new ir($e.paint_fill["fill-opacity"]),"fill-color":new ir($e.paint_fill["fill-color"]),"fill-outline-color":new ir($e.paint_fill["fill-outline-color"]),"fill-translate":new Gt($e.paint_fill["fill-translate"]),"fill-translate-anchor":new Gt($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bd($e.paint_fill["fill-pattern"])})},get layout(){return U5=U5||new Ji({"fill-sort-key":new ir($e.layout_fill["fill-sort-key"])})}};class VW extends Co{constructor(a){super(a,$W)}recalculate(a,u){super.recalculate(a,u);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Qw(a)}queryRadius(){return d0(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:a,geometry:u,transform:f,pixelsToTileUnits:b}){return E5(p0(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,b),u)}isTileClipped(){return!0}}const UW=Un([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),GW=Un([{name:"a_centroid",components:2,type:"Int16"}],4),{members:HW}=UW;class Yd{constructor(a,u,f,b,S){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=a,this._geometry=-1,this._keys=b,this._values=S,a.readFields(JW,this,u)}loadGeometry(){const a=this._pbf;a.pos=this._geometry;const u=a.readVarint()+a.pos,f=[];let b,S=1,C=0,I=0,O=0;for(;a.pos<u;){if(C<=0){const N=a.readVarint();S=7&N,C=N>>3}if(C--,S===1||S===2)I+=a.readSVarint(),O+=a.readSVarint(),S===1&&(b&&f.push(b),b=[]),b&&b.push(new p(I,O));else{if(S!==7)throw new Error(`unknown command ${S}`);b&&b.push(b[0].clone())}}return b&&f.push(b),f}bbox(){const a=this._pbf;a.pos=this._geometry;const u=a.readVarint()+a.pos;let f=1,b=0,S=0,C=0,I=1/0,O=-1/0,N=1/0,B=-1/0;for(;a.pos<u;){if(b<=0){const G=a.readVarint();f=7&G,b=G>>3}if(b--,f===1||f===2)S+=a.readSVarint(),C+=a.readSVarint(),S<I&&(I=S),S>O&&(O=S),C<N&&(N=C),C>B&&(B=C);else if(f!==7)throw new Error(`unknown command ${f}`)}return[I,N,O,B]}toGeoJSON(a,u,f){const b=this.extent*Math.pow(2,f),S=this.extent*a,C=this.extent*u,I=this.loadGeometry();function O(Q){return[360*(Q.x+S)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(Q.y+C)/b)*Math.PI))-90]}function N(Q){return Q.map(O)}let B;if(this.type===1){const Q=[];for(const se of I)Q.push(se[0]);const ie=N(Q);B=Q.length===1?{type:"Point",coordinates:ie[0]}:{type:"MultiPoint",coordinates:ie}}else if(this.type===2){const Q=I.map(N);B=Q.length===1?{type:"LineString",coordinates:Q[0]}:{type:"MultiLineString",coordinates:Q}}else{if(this.type!==3)throw new Error("unknown feature type");{const Q=function(se){const ce=se.length;if(ce<=1)return[se];const pe=[];let Ee,Ue;for(let Oe=0;Oe<ce;Oe++){const Ne=WW(se[Oe]);Ne!==0&&(Ue===void 0&&(Ue=Ne<0),Ue===Ne<0?(Ee&&pe.push(Ee),Ee=[se[Oe]]):Ee&&Ee.push(se[Oe]))}return Ee&&pe.push(Ee),pe}(I),ie=[];for(const se of Q)ie.push(se.map(N));B=ie.length===1?{type:"Polygon",coordinates:ie[0]}:{type:"MultiPolygon",coordinates:ie}}}const G={type:"Feature",geometry:B,properties:this.properties};return this.id!=null&&(G.id=this.id),G}}function JW(h,a,u){h===1?a.id=u.readVarint():h===2?function(f,b){const S=f.readVarint()+f.pos;for(;f.pos<S;){const C=b._keys[f.readVarint()],I=b._values[f.readVarint()];b.properties[C]=I}}(u,a):h===3?a.type=u.readVarint():h===4&&(a._geometry=u.pos)}function WW(h){let a=0;for(let u,f,b=0,S=h.length,C=S-1;b<S;C=b++)u=h[b],f=h[C],a+=(f.x-u.x)*(u.y+f.y);return a}Yd.types=["Unknown","Point","LineString","Polygon"];class H5{constructor(a,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(ZW,this,u),this.length=this._features.length}feature(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];const u=this._pbf.readVarint()+this._pbf.pos;return new Yd(this._pbf,u,this.extent,this._keys,this._values)}}function ZW(h,a,u){h===15?a.version=u.readVarint():h===1?a.name=u.readString():h===5?a.extent=u.readVarint():h===2?a._features.push(u.pos):h===3?a._keys.push(u.readString()):h===4&&a._values.push(function(f){let b=null;const S=f.readVarint()+f.pos;for(;f.pos<S;){const C=f.readVarint()>>3;b=C===1?f.readString():C===2?f.readFloat():C===3?f.readDouble():C===4?f.readVarint64():C===5?f.readVarint():C===6?f.readSVarint():C===7?f.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b}(u))}class J5{constructor(a,u){this.layers=a.readFields(KW,{},u)}}function KW(h,a,u){if(h===3){const f=new H5(u,u.readVarint()+u.pos);f.length&&(a[f.name]=f)}}const eE=Math.pow(2,13);function Vm(h,a,u,f,b,S,C,I){h.emplaceBack(a,u,2*Math.floor(f*eE)+C,b*eE*2,S*eE*2,Math.round(I))}class tE{constructor(a){this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ye,this.centroidVertexArray=new Ae,this.indexArray=new hn,this.programConfigurations=new yo(a.layers,a.zoom),this.segments=new vr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,f){this.features=[],this.hasPattern=Zw("fill-extrusion",this.layers,u);for(const{feature:b,id:S,index:C,sourceLayerIndex:I}of a){const O=this.layers[0]._featureFilter.needGeometry,N=$s(b,O);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom,{globalState:this.globalState}),N,f))continue;const B={id:S,sourceLayerIndex:I,index:C,geometry:O?N.geometry:ba(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(Kw("fill-extrusion",this.layers,B,this.zoom,u)):this.addFeature(B,B.geometry,C,f,{},u.subdivisionGranularity),u.featureIndex.insert(b,B.geometry,C,I,this.index,!0)}}addFeatures(a,u,f){for(const b of this.features){const{geometry:S}=b;this.addFeature(b,S,b.index,u,f,a.subdivisionGranularity)}}update(a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,{imagePositions:f,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,HW),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,GW.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,u,f,b,S,C){for(const I of Su(u,500)){const O={x:0,y:0,sampleCount:0},N=this.layoutVertexArray.length;this.processPolygon(O,b,a,I,C);const B=this.layoutVertexArray.length-N,G=Math.floor(O.x/O.sampleCount),Q=Math.floor(O.y/O.sampleCount);for(let ie=0;ie<B;ie++)this.centroidVertexArray.emplaceBack(G,Q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:S,canonical:b,globalState:this.globalState})}processPolygon(a,u,f,b,S){if(b.length<1||W5(b[0]))return;for(const G of b)G.length!==0&&YW(a,G);const C={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},I=S.fill.getGranularityForZoomLevel(u.z),O=Yd.types[f.type]==="Polygon";for(const G of b){if(G.length===0||W5(G))continue;const Q=$u(G,I,O);this._generateSideFaces(Q,C)}if(!O)return;const N=$5(b,u,I,!1),B=this.layoutVertexArray;V5((G,Q)=>{Vm(B,G,Q,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles)}_generateSideFaces(a,u){let f=0;for(let b=1;b<a.length;b++){const S=a[b],C=a[b-1];if(XW(S,C))continue;u.segment.vertexLength+4>vr.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const I=S.sub(C)._perp()._unit(),O=C.dist(S);f+O>32768&&(f=0),Vm(this.layoutVertexArray,S.x,S.y,I.x,I.y,0,0,f),Vm(this.layoutVertexArray,S.x,S.y,I.x,I.y,0,1,f),f+=O,Vm(this.layoutVertexArray,C.x,C.y,I.x,I.y,0,0,f),Vm(this.layoutVertexArray,C.x,C.y,I.x,I.y,0,1,f);const N=u.segment.vertexLength;this.indexArray.emplaceBack(N,N+2,N+1),this.indexArray.emplaceBack(N+1,N+2,N+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function YW(h,a){for(let u=0;u<a.length;u++){const f=a[u];u===a.length-1&&a[0].x===f.x&&a[0].y===f.y||(h.x+=f.x,h.y+=f.y,h.sampleCount++)}}function XW(h,a){return h.x===a.x&&(h.x<0||h.x>Ke)||h.y===a.y&&(h.y<0||h.y>Ke)}function W5(h){return h.every(a=>a.x<0)||h.every(a=>a.x>Ke)||h.every(a=>a.y<0)||h.every(a=>a.y>Ke)}let Z5;zt("FillExtrusionBucket",tE,{omit:["layers","features"]});var QW={get paint(){return Z5=Z5||new Ji({"fill-extrusion-opacity":new Gt($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ir($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Gt($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Gt($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bd($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ir($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ir($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Gt($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class eZ extends Co{constructor(a){super(a,QW)}createBucket(a){return new tE(a)}queryRadius(){return d0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:a,feature:u,featureState:f,geometry:b,transform:S,pixelsToTileUnits:C,pixelPosMatrix:I}){const O=p0(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,C),N=this.paint.get("fill-extrusion-height").evaluate(u,f),B=this.paint.get("fill-extrusion-base").evaluate(u,f),G=function(ie,se){const ce=[];for(const pe of ie){const Ee=[pe.x,pe.y,0,1];ee(Ee,Ee,se),ce.push(new p(Ee[0]/Ee[3],Ee[1]/Ee[3]))}return ce}(O,I),Q=function(ie,se,ce,pe){const Ee=[],Ue=[],Oe=pe[8]*se,Ne=pe[9]*se,et=pe[10]*se,at=pe[11]*se,gt=pe[8]*ce,Mt=pe[9]*ce,wt=pe[10]*ce,Rt=pe[11]*ce;for(const Zt of ie){const At=[],It=[];for(const ht of Zt){const sr=ht.x,dr=ht.y,Qt=pe[0]*sr+pe[4]*dr+pe[12],Ut=pe[1]*sr+pe[5]*dr+pe[13],Br=pe[2]*sr+pe[6]*dr+pe[14],Nn=pe[3]*sr+pe[7]*dr+pe[15],li=Br+et,qi=Nn+at,Zo=Qt+gt,bo=Ut+Mt,Ai=Br+wt,On=Nn+Rt,yi=new p((Qt+Oe)/qi,(Ut+Ne)/qi);yi.z=li/qi,At.push(yi);const Ri=new p(Zo/On,bo/On);Ri.z=Ai/On,It.push(Ri)}Ee.push(At),Ue.push(It)}return[Ee,Ue]}(b,B,N,I);return function(ie,se,ce){let pe=1/0;E5(ce,se)&&(pe=K5(ce,se[0]));for(let Ee=0;Ee<se.length;Ee++){const Ue=se[Ee],Oe=ie[Ee];for(let Ne=0;Ne<Ue.length-1;Ne++){const et=Ue[Ne],at=[et,Ue[Ne+1],Oe[Ne+1],Oe[Ne],et];w5(ce,at)&&(pe=Math.min(pe,K5(ce,at)))}}return pe!==1/0&&pe}(Q[0],Q[1],G)}}function Um(h,a){return h.x*a.x+h.y*a.y}function K5(h,a){if(h.length===1){let u=0;const f=a[u++];let b;for(;!b||f.equals(b);)if(b=a[u++],!b)return 1/0;for(;u<a.length;u++){const S=a[u],C=h[0],I=b.sub(f),O=S.sub(f),N=C.sub(f),B=Um(I,I),G=Um(I,O),Q=Um(O,O),ie=Um(N,I),se=Um(N,O),ce=B*Q-G*G,pe=(Q*ie-G*se)/ce,Ee=(B*se-G*ie)/ce,Ue=f.z*(1-pe-Ee)+b.z*pe+S.z*Ee;if(isFinite(Ue))return Ue}return 1/0}{let u=1/0;for(const f of a)u=Math.min(u,f.z);return u}}const tZ=Un([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rZ}=tZ,nZ=Un([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:iZ}=nZ,oZ=Math.cos(Math.PI/180*37.5),Y5=Math.pow(2,14)/.5;class rE{constructor(a){this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Qe,this.layoutVertexArray2=new ot,this.indexArray=new hn,this.programConfigurations=new yo(a.layers,a.zoom),this.segments=new vr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,f){this.hasPattern=Zw("line",this.layers,u);const b=this.layers[0].layout.get("line-sort-key"),S=!b.isConstant(),C=[];for(const{feature:I,id:O,index:N,sourceLayerIndex:B}of a){const G=this.layers[0]._featureFilter.needGeometry,Q=$s(I,G);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom,{globalState:this.globalState}),Q,f))continue;const ie=S?b.evaluate(Q,{},f):void 0,se={id:O,properties:I.properties,type:I.type,sourceLayerIndex:B,index:N,geometry:G?Q.geometry:ba(I),patterns:{},sortKey:ie};C.push(se)}S&&C.sort((I,O)=>I.sortKey-O.sortKey);for(const I of C){const{geometry:O,index:N,sourceLayerIndex:B}=I;if(this.hasPattern){const G=Kw("line",this.layers,I,this.zoom,u);this.patternFeatures.push(G)}else this.addFeature(I,O,N,f,{},u.subdivisionGranularity);u.featureIndex.insert(a[N].feature,O,N,B,this.index)}}update(a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,{imagePositions:f,globalState:this.globalState})}addFeatures(a,u,f){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,iZ)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,rZ),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,u,f,b,S,C){const I=this.layers[0].layout,O=I.get("line-join").evaluate(a,{}),N=I.get("line-cap"),B=I.get("line-miter-limit"),G=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const Q of u)this.addLine(Q,a,O,N,B,G,b,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:S,canonical:b,globalState:this.globalState})}addLine(a,u,f,b,S,C,I,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,a=$u(a,I?O.line.getGranularityForZoomLevel(I.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Oe=0;Oe<a.length-1;Oe++)this.totalDistance+=a[Oe].dist(a[Oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const N=Yd.types[u.type]==="Polygon";let B=a.length;for(;B>=2&&a[B-1].equals(a[B-2]);)B--;let G=0;for(;G<B-1&&a[G].equals(a[G+1]);)G++;if(B<(N?3:2))return;f==="bevel"&&(S=1.05);const Q=this.overscaling<=16?122880/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let se,ce,pe,Ee,Ue;this.e1=this.e2=-1,N&&(se=a[B-2],Ue=a[G].sub(se)._unit()._perp());for(let Oe=G;Oe<B;Oe++){if(pe=Oe===B-1?N?a[G+1]:void 0:a[Oe+1],pe&&a[Oe].equals(pe))continue;Ue&&(Ee=Ue),se&&(ce=se),se=a[Oe],Ue=pe?pe.sub(se)._unit()._perp():Ee,Ee=Ee||Ue;let Ne=Ee.add(Ue);Ne.x===0&&Ne.y===0||Ne._unit();const et=Ee.x*Ue.x+Ee.y*Ue.y,at=Ne.x*Ue.x+Ne.y*Ue.y,gt=at!==0?1/at:1/0,Mt=2*Math.sqrt(2-2*at),wt=at<oZ&&ce&&pe,Rt=Ee.x*Ue.y-Ee.y*Ue.x>0;if(wt&&Oe>G){const It=se.dist(ce);if(It>2*Q){const ht=se.sub(se.sub(ce)._mult(Q/It)._round());this.updateDistance(ce,ht),this.addCurrentVertex(ht,Ee,0,0,ie),ce=ht}}const Zt=ce&&pe;let At=Zt?f:N?"butt":b;if(Zt&&At==="round"&&(gt<C?At="miter":gt<=2&&(At="fakeround")),At==="miter"&&gt>S&&(At="bevel"),At==="bevel"&&(gt>2&&(At="flipbevel"),gt<S&&(At="miter")),ce&&this.updateDistance(ce,se),At==="miter")Ne._mult(gt),this.addCurrentVertex(se,Ne,0,0,ie);else if(At==="flipbevel"){if(gt>100)Ne=Ue.mult(-1);else{const It=gt*Ee.add(Ue).mag()/Ee.sub(Ue).mag();Ne._perp()._mult(It*(Rt?-1:1))}this.addCurrentVertex(se,Ne,0,0,ie),this.addCurrentVertex(se,Ne.mult(-1),0,0,ie)}else if(At==="bevel"||At==="fakeround"){const It=-Math.sqrt(gt*gt-1),ht=Rt?It:0,sr=Rt?0:It;if(ce&&this.addCurrentVertex(se,Ee,ht,sr,ie),At==="fakeround"){const dr=Math.round(180*Mt/Math.PI/20);for(let Qt=1;Qt<dr;Qt++){let Ut=Qt/dr;if(Ut!==.5){const Nn=Ut-.5;Ut+=Ut*Nn*(Ut-1)*((1.0904+et*(et*(3.55645-1.43519*et)-3.2452))*Nn*Nn+(.848013+et*(.215638*et-1.06021)))}const Br=Ue.sub(Ee)._mult(Ut)._add(Ee)._unit()._mult(Rt?-1:1);this.addHalfVertex(se,Br.x,Br.y,!1,Rt,0,ie)}}pe&&this.addCurrentVertex(se,Ue,-ht,-sr,ie)}else if(At==="butt")this.addCurrentVertex(se,Ne,0,0,ie);else if(At==="square"){const It=ce?1:-1;this.addCurrentVertex(se,Ne,It,It,ie)}else At==="round"&&(ce&&(this.addCurrentVertex(se,Ee,0,0,ie),this.addCurrentVertex(se,Ee,1,1,ie,!0)),pe&&(this.addCurrentVertex(se,Ue,-1,-1,ie,!0),this.addCurrentVertex(se,Ue,0,0,ie)));if(wt&&Oe<B-1){const It=se.dist(pe);if(It>2*Q){const ht=se.add(pe.sub(se)._mult(Q/It)._round());this.updateDistance(se,ht),this.addCurrentVertex(ht,Ue,0,0,ie),se=ht}}}}addCurrentVertex(a,u,f,b,S,C=!1){const I=u.y*b-u.x,O=-u.y-u.x*b;this.addHalfVertex(a,u.x+u.y*f,u.y-u.x*f,C,!1,f,S),this.addHalfVertex(a,I,O,C,!0,-b,S),this.distance>Y5/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,u,f,b,S,C))}addHalfVertex({x:a,y:u},f,b,S,C,I,O){const N=.5*(this.lineClips?this.scaledDistance*(Y5-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(S?1:0),(u<<1)+(C?1:0),Math.round(63*f)+128,Math.round(63*b)+128,1+(I===0?0:I<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,B,this.e2),O.primitiveLength++),C?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,u){this.distance+=a.dist(u),this.updateScaledDistance()}}let X5,Q5;zt("LineBucket",rE,{omit:["layers","patternFeatures"]});var e3={get paint(){return Q5=Q5||new Ji({"line-opacity":new ir($e.paint_line["line-opacity"]),"line-color":new ir($e.paint_line["line-color"]),"line-translate":new Gt($e.paint_line["line-translate"]),"line-translate-anchor":new Gt($e.paint_line["line-translate-anchor"]),"line-width":new ir($e.paint_line["line-width"]),"line-gap-width":new ir($e.paint_line["line-gap-width"]),"line-offset":new ir($e.paint_line["line-offset"]),"line-blur":new ir($e.paint_line["line-blur"]),"line-dasharray":new fa($e.paint_line["line-dasharray"]),"line-pattern":new Bd($e.paint_line["line-pattern"]),"line-gradient":new qd($e.paint_line["line-gradient"])})},get layout(){return X5=X5||new Ji({"line-cap":new Gt($e.layout_line["line-cap"]),"line-join":new ir($e.layout_line["line-join"]),"line-miter-limit":new Gt($e.layout_line["line-miter-limit"]),"line-round-limit":new Gt($e.layout_line["line-round-limit"]),"line-sort-key":new ir($e.layout_line["line-sort-key"])})}};class sZ extends ir{possiblyEvaluate(a,u){return u=new yn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(a,u)}evaluate(a,u,f,b){return u=Wt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(a,u,f,b)}}let y0;class aZ extends Co{constructor(a){super(a,e3),this.gradientVersion=0,y0||(y0=new sZ(e3.paint.properties["line-width"].specification),y0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Vn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,u){super.recalculate(a,u),this.paint._values["line-floorwidth"]=y0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new rE(a)}queryRadius(a){const u=a,f=t3(Dm("line-width",this,u),Dm("line-gap-width",this,u)),b=Dm("line-offset",this,u);return f/2+Math.abs(b)+d0(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:a,feature:u,featureState:f,geometry:b,transform:S,pixelsToTileUnits:C}){const I=p0(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,C),O=C/2*t3(this.paint.get("line-width").evaluate(u,f),this.paint.get("line-gap-width").evaluate(u,f)),N=this.paint.get("line-offset").evaluate(u,f);return N&&(b=function(B,G){const Q=[];for(let ie=0;ie<B.length;ie++){const se=B[ie],ce=[];for(let pe=0;pe<se.length;pe++){const Ee=se[pe-1],Ue=se[pe],Oe=se[pe+1],Ne=pe===0?new p(0,0):Ue.sub(Ee)._unit()._perp(),et=pe===se.length-1?new p(0,0):Oe.sub(Ue)._unit()._perp(),at=Ne._add(et)._unit(),gt=at.x*et.x+at.y*et.y;gt!==0&&at._mult(1/gt),ce.push(at._mult(G)._add(Ue))}Q.push(ce)}return Q}(b,N*C)),function(B,G,Q){for(let ie=0;ie<G.length;ie++){const se=G[ie];if(B.length>=3){for(let ce=0;ce<se.length;ce++)if(Jd(B,se[ce]))return!0}if(_W(B,se,Q))return!0}return!1}(I,b,O)}isTileClipped(){return!0}}function t3(h,a){return a>0?a+2*h:h}const lZ=Un([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),cZ=Un([{name:"a_projected_pos",components:3,type:"Float32"}],4);Un([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const uZ=Un([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Un([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const r3=Un([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),hZ=Un([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function dZ(h,a,u){return h.sections.forEach(f=>{f.text=function(b,S,C){const I=S.layout.get("text-transform").evaluate(C,{});return I==="uppercase"?b=b.toLocaleUpperCase():I==="lowercase"&&(b=b.toLocaleLowerCase()),Uo.applyArabicShaping&&(b=Uo.applyArabicShaping(b)),b}(f.text,a,u)}),h}Un([{name:"triangle",components:3,type:"Uint16"}]),Un([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Un([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Un([{type:"Float32",name:"offsetX"}]),Un([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Un([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Gm={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gi=24;const nE=4294967296,n3=1/nE,i3=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class iE{constructor(a=new Uint8Array(16)){this.buf=ArrayBuffer.isView(a)?a:new Uint8Array(a),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(a,u,f=this.length){for(;this.pos<f;){const b=this.readVarint(),S=b>>3,C=this.pos;this.type=7&b,a(S,u,this),this.pos===C&&this.skip(b)}return u}readMessage(a,u){return this.readFields(a,u,this.readVarint()+this.pos)}readFixed32(){const a=this.dataView.getUint32(this.pos,!0);return this.pos+=4,a}readSFixed32(){const a=this.dataView.getInt32(this.pos,!0);return this.pos+=4,a}readFixed64(){const a=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*nE;return this.pos+=8,a}readSFixed64(){const a=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*nE;return this.pos+=8,a}readFloat(){const a=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,a}readDouble(){const a=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,a}readVarint(a){const u=this.buf;let f,b;return b=u[this.pos++],f=127&b,b<128?f:(b=u[this.pos++],f|=(127&b)<<7,b<128?f:(b=u[this.pos++],f|=(127&b)<<14,b<128?f:(b=u[this.pos++],f|=(127&b)<<21,b<128?f:(b=u[this.pos],f|=(15&b)<<28,function(S,C,I){const O=I.buf;let N,B;if(B=O[I.pos++],N=(112&B)>>4,B<128||(B=O[I.pos++],N|=(127&B)<<3,B<128)||(B=O[I.pos++],N|=(127&B)<<10,B<128)||(B=O[I.pos++],N|=(127&B)<<17,B<128)||(B=O[I.pos++],N|=(127&B)<<24,B<128)||(B=O[I.pos++],N|=(1&B)<<31,B<128))return Xd(S,N,C);throw new Error("Expected varint not more than 10 bytes")}(f,a,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const a=this.readVarint();return a%2==1?(a+1)/-2:a/2}readBoolean(){return!!this.readVarint()}readString(){const a=this.readVarint()+this.pos,u=this.pos;return this.pos=a,a-u>=12&&i3?i3.decode(this.buf.subarray(u,a)):function(f,b,S){let C="",I=b;for(;I<S;){const O=f[I];let N,B,G,Q=null,ie=O>239?4:O>223?3:O>191?2:1;if(I+ie>S)break;ie===1?O<128&&(Q=O):ie===2?(N=f[I+1],(192&N)==128&&(Q=(31&O)<<6|63&N,Q<=127&&(Q=null))):ie===3?(N=f[I+1],B=f[I+2],(192&N)==128&&(192&B)==128&&(Q=(15&O)<<12|(63&N)<<6|63&B,(Q<=2047||Q>=55296&&Q<=57343)&&(Q=null))):ie===4&&(N=f[I+1],B=f[I+2],G=f[I+3],(192&N)==128&&(192&B)==128&&(192&G)==128&&(Q=(15&O)<<18|(63&N)<<12|(63&B)<<6|63&G,(Q<=65535||Q>=1114112)&&(Q=null))),Q===null?(Q=65533,ie=1):Q>65535&&(Q-=65536,C+=String.fromCharCode(Q>>>10&1023|55296),Q=56320|1023&Q),C+=String.fromCharCode(Q),I+=ie}return C}(this.buf,u,a)}readBytes(){const a=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,a);return this.pos=a,u}readPackedVarint(a=[],u){const f=this.readPackedEnd();for(;this.pos<f;)a.push(this.readVarint(u));return a}readPackedSVarint(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readSVarint());return a}readPackedBoolean(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readBoolean());return a}readPackedFloat(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readFloat());return a}readPackedDouble(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readDouble());return a}readPackedFixed32(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readFixed32());return a}readPackedSFixed32(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readSFixed32());return a}readPackedFixed64(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readFixed64());return a}readPackedSFixed64(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readSFixed64());return a}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(a){const u=7&a;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(a,u){this.writeVarint(a<<3|u)}realloc(a){let u=this.length||16;for(;u<this.pos+a;)u*=2;if(u!==this.length){const f=new Uint8Array(u);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(a){this.realloc(4),this.dataView.setInt32(this.pos,a,!0),this.pos+=4}writeSFixed32(a){this.realloc(4),this.dataView.setInt32(this.pos,a,!0),this.pos+=4}writeFixed64(a){this.realloc(8),this.dataView.setInt32(this.pos,-1&a,!0),this.dataView.setInt32(this.pos+4,Math.floor(a*n3),!0),this.pos+=8}writeSFixed64(a){this.realloc(8),this.dataView.setInt32(this.pos,-1&a,!0),this.dataView.setInt32(this.pos+4,Math.floor(a*n3),!0),this.pos+=8}writeVarint(a){(a=+a||0)>268435455||a<0?function(u,f){let b,S;if(u>=0?(b=u%4294967296|0,S=u/4294967296|0):(b=~(-u%4294967296),S=~(-u/4294967296),4294967295^b?b=b+1|0:(b=0,S=S+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(C,I,O){O.buf[O.pos++]=127&C|128,C>>>=7,O.buf[O.pos++]=127&C|128,C>>>=7,O.buf[O.pos++]=127&C|128,C>>>=7,O.buf[O.pos++]=127&C|128,O.buf[O.pos]=127&(C>>>=7)}(b,0,f),function(C,I){const O=(7&C)<<4;I.buf[I.pos++]|=O|((C>>>=3)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C)))))}(S,f)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))}writeSVarint(a){this.writeVarint(a<0?2*-a-1:2*a)}writeBoolean(a){this.writeVarint(+a)}writeString(a){a=String(a),this.realloc(4*a.length),this.pos++;const u=this.pos;this.pos=function(b,S,C){for(let I,O,N=0;N<S.length;N++){if(I=S.charCodeAt(N),I>55295&&I<57344){if(!O){I>56319||N+1===S.length?(b[C++]=239,b[C++]=191,b[C++]=189):O=I;continue}if(I<56320){b[C++]=239,b[C++]=191,b[C++]=189,O=I;continue}I=O-55296<<10|I-56320|65536,O=null}else O&&(b[C++]=239,b[C++]=191,b[C++]=189,O=null);I<128?b[C++]=I:(I<2048?b[C++]=I>>6|192:(I<65536?b[C++]=I>>12|224:(b[C++]=I>>18|240,b[C++]=I>>12&63|128),b[C++]=I>>6&63|128),b[C++]=63&I|128)}return C}(this.buf,a,this.pos);const f=this.pos-u;f>=128&&o3(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f}writeFloat(a){this.realloc(4),this.dataView.setFloat32(this.pos,a,!0),this.pos+=4}writeDouble(a){this.realloc(8),this.dataView.setFloat64(this.pos,a,!0),this.pos+=8}writeBytes(a){const u=a.length;this.writeVarint(u),this.realloc(u);for(let f=0;f<u;f++)this.buf[this.pos++]=a[f]}writeRawMessage(a,u){this.pos++;const f=this.pos;a(u,this);const b=this.pos-f;b>=128&&o3(f,b,this),this.pos=f-1,this.writeVarint(b),this.pos+=b}writeMessage(a,u,f){this.writeTag(a,2),this.writeRawMessage(u,f)}writePackedVarint(a,u){u.length&&this.writeMessage(a,pZ,u)}writePackedSVarint(a,u){u.length&&this.writeMessage(a,fZ,u)}writePackedBoolean(a,u){u.length&&this.writeMessage(a,yZ,u)}writePackedFloat(a,u){u.length&&this.writeMessage(a,mZ,u)}writePackedDouble(a,u){u.length&&this.writeMessage(a,gZ,u)}writePackedFixed32(a,u){u.length&&this.writeMessage(a,_Z,u)}writePackedSFixed32(a,u){u.length&&this.writeMessage(a,bZ,u)}writePackedFixed64(a,u){u.length&&this.writeMessage(a,vZ,u)}writePackedSFixed64(a,u){u.length&&this.writeMessage(a,xZ,u)}writeBytesField(a,u){this.writeTag(a,2),this.writeBytes(u)}writeFixed32Field(a,u){this.writeTag(a,5),this.writeFixed32(u)}writeSFixed32Field(a,u){this.writeTag(a,5),this.writeSFixed32(u)}writeFixed64Field(a,u){this.writeTag(a,1),this.writeFixed64(u)}writeSFixed64Field(a,u){this.writeTag(a,1),this.writeSFixed64(u)}writeVarintField(a,u){this.writeTag(a,0),this.writeVarint(u)}writeSVarintField(a,u){this.writeTag(a,0),this.writeSVarint(u)}writeStringField(a,u){this.writeTag(a,2),this.writeString(u)}writeFloatField(a,u){this.writeTag(a,5),this.writeFloat(u)}writeDoubleField(a,u){this.writeTag(a,1),this.writeDouble(u)}writeBooleanField(a,u){this.writeVarintField(a,+u)}}function Xd(h,a,u){return u?4294967296*a+(h>>>0):4294967296*(a>>>0)+(h>>>0)}function o3(h,a,u){const f=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));u.realloc(f);for(let b=u.pos-1;b>=h;b--)u.buf[b+f]=u.buf[b]}function pZ(h,a){for(let u=0;u<h.length;u++)a.writeVarint(h[u])}function fZ(h,a){for(let u=0;u<h.length;u++)a.writeSVarint(h[u])}function mZ(h,a){for(let u=0;u<h.length;u++)a.writeFloat(h[u])}function gZ(h,a){for(let u=0;u<h.length;u++)a.writeDouble(h[u])}function yZ(h,a){for(let u=0;u<h.length;u++)a.writeBoolean(h[u])}function _Z(h,a){for(let u=0;u<h.length;u++)a.writeFixed32(h[u])}function bZ(h,a){for(let u=0;u<h.length;u++)a.writeSFixed32(h[u])}function vZ(h,a){for(let u=0;u<h.length;u++)a.writeFixed64(h[u])}function xZ(h,a){for(let u=0;u<h.length;u++)a.writeSFixed64(h[u])}function wZ(h,a,u){h===1&&u.readMessage(EZ,a)}function EZ(h,a,u){if(h===3){const{id:f,bitmap:b,width:S,height:C,left:I,top:O,advance:N}=u.readMessage(TZ,{});a.push({id:f,bitmap:new Nm({width:S+6,height:C+6},b),metrics:{width:S,height:C,left:I,top:O,advance:N}})}}function TZ(h,a,u){h===1?a.id=u.readVarint():h===2?a.bitmap=u.readBytes():h===3?a.width=u.readVarint():h===4?a.height=u.readVarint():h===5?a.left=u.readSVarint():h===6?a.top=u.readSVarint():h===7&&(a.advance=u.readVarint())}function s3(h){let a=0,u=0;for(const C of h)a+=C.w*C.h,u=Math.max(u,C.w);h.sort((C,I)=>I.h-C.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),u),h:1/0}];let b=0,S=0;for(const C of h)for(let I=f.length-1;I>=0;I--){const O=f[I];if(!(C.w>O.w||C.h>O.h)){if(C.x=O.x,C.y=O.y,S=Math.max(S,C.y+C.h),b=Math.max(b,C.x+C.w),C.w===O.w&&C.h===O.h){const N=f.pop();N&&I<f.length&&(f[I]=N)}else C.h===O.h?(O.x+=C.w,O.w-=C.w):C.w===O.w?(O.y+=C.h,O.h-=C.h):(f.push({x:O.x+C.w,y:O.y,w:O.w-C.w,h:C.h}),O.y+=C.h,O.h-=C.h);break}}return{w:b,h:S,fill:a/(b*S)||0}}class oE{constructor(a,{pixelRatio:u,version:f,stretchX:b,stretchY:S,content:C,textFitWidth:I,textFitHeight:O}){this.paddedRect=a,this.pixelRatio=u,this.stretchX=b,this.stretchY=S,this.content=C,this.version=f,this.textFitWidth=I,this.textFitHeight=O}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class a3{constructor(a,u){const f={},b={};this.haveRenderCallbacks=[];const S=[];this.addImages(a,f,S),this.addImages(u,b,S);const{w:C,h:I}=s3(S),O=new _o({width:C||1,height:I||1});for(const N in a){const B=a[N],G=f[N].paddedRect;_o.copy(B.data,O,{x:0,y:0},{x:G.x+1,y:G.y+1},B.data)}for(const N in u){const B=u[N],G=b[N].paddedRect,Q=G.x+1,ie=G.y+1,se=B.data.width,ce=B.data.height;_o.copy(B.data,O,{x:0,y:0},{x:Q,y:ie},B.data),_o.copy(B.data,O,{x:0,y:ce-1},{x:Q,y:ie-1},{width:se,height:1}),_o.copy(B.data,O,{x:0,y:0},{x:Q,y:ie+ce},{width:se,height:1}),_o.copy(B.data,O,{x:se-1,y:0},{x:Q-1,y:ie},{width:1,height:ce}),_o.copy(B.data,O,{x:0,y:0},{x:Q+se,y:ie},{width:1,height:ce})}this.image=O,this.iconPositions=f,this.patternPositions=b}addImages(a,u,f){for(const b in a){const S=a[b],C={x:0,y:0,w:S.data.width+2,h:S.data.height+2};f.push(C),u[b]=new oE(C,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(a,u){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in a.updatedImages)this.patchUpdatedImage(this.iconPositions[f],a.getImage(f),u),this.patchUpdatedImage(this.patternPositions[f],a.getImage(f),u)}patchUpdatedImage(a,u,f){if(!a||!u||a.version===u.version)return;a.version=u.version;const[b,S]=a.tl;f.update(u.data,void 0,{x:b,y:S})}}var pc;zt("ImagePosition",oE),zt("ImageAtlas",a3),c.ao=void 0,(pc=c.ao||(c.ao={}))[pc.none=0]="none",pc[pc.horizontal=1]="horizontal",pc[pc.vertical=2]="vertical",pc[pc.horizontalOnly=3]="horizontalOnly";class Hm{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(a,u,f){const b=new Hm;return b.scale=a||1,b.fontStack=u,b.verticalAlign=f||"bottom",b}static forImage(a,u){const f=new Hm;return f.imageName=a,f.verticalAlign=u||"bottom",f}}class Qd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,u){const f=new Qd;for(let b=0;b<a.sections.length;b++){const S=a.sections[b];S.image?f.addImageSection(S):f.addTextSection(S,u)}return f}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let u="";for(let f=0;f<a.length;f++){const b=a.charCodeAt(f+1)||null,S=a.charCodeAt(f-1)||null;u+=b&&n0(b)&&!Gm[a[f+1]]||S&&n0(S)&&!Gm[a[f-1]]||!Gm[a[f]]?a[f]:Gm[a[f]]}return u}(this.text)}trim(){let a=0;for(let f=0;f<this.text.length&&b0[this.text.charCodeAt(f)];f++)a++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=a&&b0[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(a,u),this.sectionIndex=this.sectionIndex.slice(a,u)}substring(a,u){const f=new Qd;return f.text=this.text.substring(a,u),f.sectionIndex=this.sectionIndex.slice(a,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,u)=>Math.max(a,this.sections[u].scale),0)}getMaxImageSize(a){let u=0,f=0;for(let b=0;b<this.length();b++){const S=this.getSection(b);if(S.imageName){const C=a[S.imageName];if(!C)continue;const I=C.displaySize;u=Math.max(u,I[0]),f=Math.max(f,I[1])}}return{maxImageWidth:u,maxImageHeight:f}}addTextSection(a,u){this.text+=a.text,this.sections.push(Hm.forText(a.scale,a.fontStack||u,a.verticalAlign));const f=this.sections.length-1;for(let b=0;b<a.text.length;++b)this.sectionIndex.push(f)}addImageSection(a){const u=a.image?a.image.name:"";if(u.length===0)return void Tt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Hm.forImage(u,a.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Tt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _0(h,a,u,f,b,S,C,I,O,N,B,G,Q,ie,se){const ce=Qd.fromFeature(h,b);let pe;G===c.ao.vertical&&ce.verticalizePunctuation();const{processBidirectionalText:Ee,processStyledBidirectionalText:Ue}=Uo;if(Ee&&ce.sections.length===1){pe=[];const et=Ee(ce.toString(),sE(ce,N,S,a,f,ie));for(const at of et){const gt=new Qd;gt.text=at,gt.sections=ce.sections;for(let Mt=0;Mt<at.length;Mt++)gt.sectionIndex.push(0);pe.push(gt)}}else if(Ue){pe=[];const et=Ue(ce.text,ce.sectionIndex,sE(ce,N,S,a,f,ie));for(const at of et){const gt=new Qd;gt.text=at[0],gt.sectionIndex=at[1],gt.sections=ce.sections,pe.push(gt)}}else pe=function(et,at){const gt=[],Mt=et.text;let wt=0;for(const Rt of at)gt.push(et.substring(wt,Rt)),wt=Rt;return wt<Mt.length&&gt.push(et.substring(wt,Mt.length)),gt}(ce,sE(ce,N,S,a,f,ie));const Oe=[],Ne={positionedLines:Oe,text:ce.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function(et,at,gt,Mt,wt,Rt,Zt,At,It,ht,sr,dr){let Qt=0,Ut=0,Br=0,Nn=0;const li=At==="right"?1:At==="left"?0:.5,qi=gi/dr;let Zo=0;for(const On of wt){On.trim();const yi=On.getMaxScale(),Ri={positionedGlyphs:[],lineOffset:0};et.positionedLines[Zo]=Ri;const Ii=Ri.positionedGlyphs;let so=0;if(!On.length()){Ut+=Rt,++Zo;continue}const Ko=AZ(Mt,On,qi);for(let vo=0;vo<On.length();vo++){const ci=On.getSection(vo),bi=On.getSectionIndex(vo),vi=On.getCharCode(vo),ei=RZ(It,sr,vi);let Cn;if(ci.imageName){if(et.iconsInText=!0,ci.scale=ci.scale*qi,Cn=MZ(ci,ei,yi,Ko,Mt),!Cn)continue;so=Math.max(so,Cn.imageOffset)}else if(Cn=IZ(ci,vi,ei,Ko,at,gt),!Cn)continue;const{rect:Vs,metrics:np,baselineOffset:Us}=Cn;Ii.push({glyph:vi,imageName:ci.imageName,x:Qt,y:Ut+Us+-17,vertical:ei,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:bi,metrics:np,rect:Vs}),ei?(et.verticalizable=!0,Qt+=(ci.imageName?np.advance:gi)*ci.scale+ht):Qt+=np.advance*ci.scale+ht}Ii.length!==0&&(Br=Math.max(Qt-ht,Br),OZ(Ii,0,Ii.length-1,li)),Qt=0,Ri.lineOffset=Math.max(so,(yi-1)*gi);const _i=Rt*yi+so;Ut+=_i,Nn=Math.max(_i,Nn),++Zo}const{horizontalAlign:bo,verticalAlign:Ai}=aE(Zt);(function(On,yi,Ri,Ii,so,Ko,_i,vo,ci){const bi=(yi-Ri)*so;let vi=0;vi=Ko!==_i?-vo*Ii- -17:-Ii*ci*_i+.5*_i;for(const ei of On)for(const Cn of ei.positionedGlyphs)Cn.x+=bi,Cn.y+=vi})(et.positionedLines,li,bo,Ai,Br,Nn,Rt,Ut,wt.length),et.top+=-Ai*Ut,et.bottom=et.top+Ut,et.left+=-bo*Br,et.right=et.left+Br}(Ne,a,u,f,pe,C,I,O,G,N,Q,se),!function(et){for(const at of et)if(at.positionedGlyphs.length!==0)return!1;return!0}(Oe)&&Ne}const b0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},SZ={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},CZ={40:!0};function l3(h,a,u,f,b,S){if(a.imageName){const C=f[a.imageName];return C?C.displaySize[0]*a.scale*gi/S+b:0}{const C=u[a.fontStack],I=C&&C[h];return I?I.metrics.advance*a.scale+b:0}}function c3(h,a,u,f){const b=Math.pow(h-a,2);return f?h<a?b/2:2*b:b+Math.abs(u)*u}function PZ(h,a,u){let f=0;return h===10&&(f-=1e4),u&&(f+=150),h!==40&&h!==65288||(f+=50),a!==41&&a!==65289||(f+=50),f}function u3(h,a,u,f,b,S){let C=null,I=c3(a,u,b,S);for(const O of f){const N=c3(a-O.x,u,b,S)+O.badness;N<=I&&(C=O,I=N)}return{index:h,x:a,priorBreak:C,badness:I}}function h3(h){return h?h3(h.priorBreak).concat(h.index):[]}function sE(h,a,u,f,b,S){if(!h)return[];const C=[],I=function(G,Q,ie,se,ce,pe){let Ee=0;for(let Ue=0;Ue<G.length();Ue++){const Oe=G.getSection(Ue);Ee+=l3(G.getCharCode(Ue),Oe,se,ce,Q,pe)}return Ee/Math.max(1,Math.ceil(Ee/ie))}(h,a,u,f,b,S),O=h.text.indexOf("")>=0;let N=0;for(let G=0;G<h.length();G++){const Q=h.getSection(G),ie=h.getCharCode(G);if(b0[ie]||(N+=l3(ie,Q,f,b,a,S)),G<h.length()-1){const se=!((B=ie)<11904)&&(!!jr["CJK Compatibility Forms"](B)||!!jr["CJK Compatibility"](B)||!!jr["CJK Strokes"](B)||!!jr["CJK Symbols and Punctuation"](B)||!!jr["Enclosed CJK Letters and Months"](B)||!!jr["Halfwidth and Fullwidth Forms"](B)||!!jr["Ideographic Description Characters"](B)||!!jr["Vertical Forms"](B)||Tm.test(String.fromCodePoint(B)));(SZ[ie]||se||Q.imageName||G!==h.length()-2&&CZ[h.getCharCode(G+1)])&&C.push(u3(G+1,N,I,C,PZ(ie,h.getCharCode(G+1),se&&O),!1))}}var B;return h3(u3(h.length(),N,I,C,0,!0))}function aE(h){let a=.5,u=.5;switch(h){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:a,verticalAlign:u}}function AZ(h,a,u){const f=a.getMaxScale()*gi,{maxImageWidth:b,maxImageHeight:S}=a.getMaxImageSize(h),C=Math.max(f,S*u);return{verticalLineContentWidth:Math.max(f,b*u),horizontalLineContentHeight:C}}function d3(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function RZ(h,a,u){return!(h===c.ao.horizontal||!a&&!Sm(u)||a&&(b0[u]||(f=u,/\p{sc=Arab}/u.test(String.fromCodePoint(f)))));var f}function IZ(h,a,u,f,b,S){const C=S[h.fontStack],I=function(N,B,G,Q){if(N&&N.rect)return N;const ie=B[G.fontStack],se=ie&&ie[Q];return se?{rect:null,metrics:se.metrics}:null}(C&&C[a],b,h,a);if(I===null)return null;let O;if(u)O=f.verticalLineContentWidth-h.scale*gi;else{const N=d3(h.verticalAlign);O=(f.horizontalLineContentHeight-h.scale*gi)*N}return{rect:I.rect,metrics:I.metrics,baselineOffset:O}}function MZ(h,a,u,f,b){const S=b[h.imageName];if(!S)return null;const C=S.paddedRect,I=S.displaySize,O={width:I[0],height:I[1],left:1,top:-3,advance:a?I[1]:I[0]};let N;if(a)N=f.verticalLineContentWidth-I[1]*h.scale;else{const B=d3(h.verticalAlign);N=(f.horizontalLineContentHeight-I[1]*h.scale)*B}return{rect:C,metrics:O,baselineOffset:N,imageOffset:(a?I[0]:I[1])*h.scale-gi*u}}function OZ(h,a,u,f){if(f===0)return;const b=h[u],S=(h[u].x+b.metrics.advance*b.scale)*f;for(let C=a;C<=u;C++)h[C].x-=S}function kZ(h,a,u){const{horizontalAlign:f,verticalAlign:b}=aE(u),S=a[0]-h.displaySize[0]*f,C=a[1]-h.displaySize[1]*b;return{image:h,top:C,bottom:C+h.displaySize[1],left:S,right:S+h.displaySize[0]}}function p3(h){var a,u;let f=h.left,b=h.top,S=h.right-f,C=h.bottom-b;const I=(a=h.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",O=(u=h.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",N=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(O==="proportional"){if(I==="stretchOnly"&&S/C<N||I==="proportional"){const B=Math.ceil(C*N);f*=B/S,S=B}}else if(I==="proportional"&&O==="stretchOnly"&&N!==0&&S/C>N){const B=Math.ceil(S/N);b*=B/C,C=B}return{x1:f,y1:b,x2:f+S,y2:b+C}}function f3(h,a,u,f,b,S){const C=h.image;let I;if(C.content){const pe=C.content,Ee=C.pixelRatio||1;I=[pe[0]/Ee,pe[1]/Ee,C.displaySize[0]-pe[2]/Ee,C.displaySize[1]-pe[3]/Ee]}const O=a.left*S,N=a.right*S;let B,G,Q,ie;u==="width"||u==="both"?(ie=b[0]+O-f[3],G=b[0]+N+f[1]):(ie=b[0]+(O+N-C.displaySize[0])/2,G=ie+C.displaySize[0]);const se=a.top*S,ce=a.bottom*S;return u==="height"||u==="both"?(B=b[1]+se-f[0],Q=b[1]+ce+f[2]):(B=b[1]+(se+ce-C.displaySize[1])/2,Q=B+C.displaySize[1]),{image:C,top:B,right:G,bottom:Q,left:ie,collisionPadding:I}}const cl=128,fc=32640;function m3(h,a){const{expression:u}=a;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new yn(h+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:b}=u;let S=0;for(;S<f.length&&f[S]<=h;)S++;S=Math.max(0,S-1);let C=S;for(;C<f.length&&f[C]<h+1;)C++;C=Math.min(f.length-1,C);const I=f[S],O=f[C];return u.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:O,interpolationType:b}:{kind:"camera",minZoom:I,maxZoom:O,minSize:u.evaluate(new yn(I)),maxSize:u.evaluate(new yn(O)),interpolationType:b}}}function lE(h,a,u){let f="never";const b=h.get(a);return b?f=b:h.get(u)&&(f="always"),f}const LZ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function v0(h,a,u,f,b,S,C,I,O,N,B,G,Q){const ie=I?Math.min(fc,Math.round(I[0])):0,se=I?Math.min(fc,Math.round(I[1])):0;h.emplaceBack(a,u,Math.round(32*f),Math.round(32*b),S,C,(ie<<1)+(O?1:0),se,16*N,16*B,256*G,256*Q)}function cE(h,a,u){h.emplaceBack(a.x,a.y,u),h.emplaceBack(a.x,a.y,u),h.emplaceBack(a.x,a.y,u),h.emplaceBack(a.x,a.y,u)}function DZ(h){for(const a of h.sections)if(s0(a.text))return!0;return!1}class uE{constructor(a){this.layoutVertexArray=new Et,this.indexArray=new hn,this.programConfigurations=a,this.segments=new vr,this.dynamicLayoutVertexArray=new ft,this.opacityVertexArray=new Vt,this.hasVisibleVertices=!1,this.placedSymbolArray=new le}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,u,f,b){this.isEmpty()||(f&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,lZ.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,cZ.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,LZ,!0),this.opacityVertexBuffer.itemSize=1),(f||b)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}zt("SymbolBuffers",uE);class hE{constructor(a,u,f){this.layoutVertexArray=new a,this.layoutAttributes=u,this.indexArray=new f,this.segments=new vr,this.collisionVertexArray=new tn}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,uZ.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}zt("CollisionBuffers",hE);class ep{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(C=>C.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=m3(this.zoom,u["text-size"]),this.iconSizeData=m3(this.zoom,u["icon-size"]);const f=this.layers[0].layout,b=f.get("symbol-sort-key"),S=f.get("symbol-z-order");this.canOverlap=lE(f,"text-overlap","text-allow-overlap")!=="never"||lE(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(C=>c.ao[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=a.sourceID}createArrays(){this.text=new uE(new yo(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new uE(new yo(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new be,this.lineVertexArray=new Se,this.symbolInstances=new ge,this.textAnchorOffsets=new Pe}calculateGlyphDependencies(a,u,f,b,S){for(let C=0;C<a.length;C++)if(u[a.charCodeAt(C)]=!0,(f||b)&&S){const I=Gm[a.charAt(C)];I&&(u[I.charCodeAt(0)]=!0)}}populate(a,u,f){const b=this.layers[0],S=b.layout,C=S.get("text-font"),I=S.get("text-field"),O=S.get("icon-image"),N=(I.value.kind!=="constant"||I.value.value instanceof Ui&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),B=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,G=S.get("symbol-sort-key");if(this.features=[],!N&&!B)return;const Q=u.iconDependencies,ie=u.glyphDependencies,se=u.availableImages,ce=new yn(this.zoom,{globalState:this.globalState});for(const{feature:pe,id:Ee,index:Ue,sourceLayerIndex:Oe}of a){const Ne=b._featureFilter.needGeometry,et=$s(pe,Ne);if(!b._featureFilter.filter(ce,et,f))continue;let at,gt;if(Ne||(et.geometry=ba(pe)),N){const wt=b.getValueAndResolveTokens("text-field",et,f,se),Rt=Ui.factory(wt),Zt=this.hasRTLText=this.hasRTLText||DZ(Rt);(!Zt||Uo.getRTLTextPluginStatus()==="unavailable"||Zt&&Uo.isParsed())&&(at=dZ(Rt,b,et))}if(B){const wt=b.getValueAndResolveTokens("icon-image",et,f,se);gt=wt instanceof mo?wt:mo.fromString(wt)}if(!at&&!gt)continue;const Mt=this.sortFeaturesByKey?G.evaluate(et,{},f):void 0;if(this.features.push({id:Ee,text:at,icon:gt,index:Ue,sourceLayerIndex:Oe,geometry:et.geometry,properties:pe.properties,type:Yd.types[pe.type],sortKey:Mt}),gt&&(Q[gt.name]=!0),at){const wt=C.evaluate(et,{},f).join(","),Rt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(const Zt of at.sections)if(Zt.image)Q[Zt.image.name]=!0;else{const At=Fd(at.toString()),It=Zt.fontStack||wt,ht=ie[It]=ie[It]||{};this.calculateGlyphDependencies(Zt.text,ht,Rt,this.allowVerticalPlacement,At)}}}S.get("symbol-placement")==="line"&&(this.features=function(pe){const Ee={},Ue={},Oe=[];let Ne=0;function et(wt){Oe.push(pe[wt]),Ne++}function at(wt,Rt,Zt){const At=Ue[wt];return delete Ue[wt],Ue[Rt]=At,Oe[At].geometry[0].pop(),Oe[At].geometry[0]=Oe[At].geometry[0].concat(Zt[0]),At}function gt(wt,Rt,Zt){const At=Ee[Rt];return delete Ee[Rt],Ee[wt]=At,Oe[At].geometry[0].shift(),Oe[At].geometry[0]=Zt[0].concat(Oe[At].geometry[0]),At}function Mt(wt,Rt,Zt){const At=Zt?Rt[0][Rt[0].length-1]:Rt[0][0];return`${wt}:${At.x}:${At.y}`}for(let wt=0;wt<pe.length;wt++){const Rt=pe[wt],Zt=Rt.geometry,At=Rt.text?Rt.text.toString():null;if(!At){et(wt);continue}const It=Mt(At,Zt),ht=Mt(At,Zt,!0);if(It in Ue&&ht in Ee&&Ue[It]!==Ee[ht]){const sr=gt(It,ht,Zt),dr=at(It,ht,Oe[sr].geometry);delete Ee[It],delete Ue[ht],Ue[Mt(At,Oe[dr].geometry,!0)]=dr,Oe[sr].geometry=null}else It in Ue?at(It,ht,Zt):ht in Ee?gt(It,ht,Zt):(et(wt),Ee[It]=Ne-1,Ue[ht]=Ne-1)}return Oe.filter(wt=>wt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,Ee)=>pe.sortKey-Ee.sortKey)}update(a,u,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,u,this.layers,{imagePositions:f,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(a,u,this.layers,{imagePositions:f,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,u){const f=this.lineVertexArray.length;if(a.segment!==void 0){let b=a.dist(u[a.segment+1]),S=a.dist(u[a.segment]);const C={};for(let I=a.segment+1;I<u.length;I++)C[I]={x:u[I].x,y:u[I].y,tileUnitDistanceFromAnchor:b},I<u.length-1&&(b+=u[I+1].dist(u[I]));for(let I=a.segment||0;I>=0;I--)C[I]={x:u[I].x,y:u[I].y,tileUnitDistanceFromAnchor:S},I>0&&(S+=u[I-1].dist(u[I]));for(let I=0;I<u.length;I++){const O=C[I];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(a,u,f,b,S,C,I,O,N,B,G,Q){const ie=a.indexArray,se=a.layoutVertexArray,ce=a.segments.prepareSegment(4*u.length,se,ie,this.canOverlap?C.sortKey:void 0),pe=this.glyphOffsetArray.length,Ee=ce.vertexLength,Ue=this.allowVerticalPlacement&&I===c.ao.vertical?Math.PI/2:0,Oe=C.text&&C.text.sections;for(let Ne=0;Ne<u.length;Ne++){const{tl:et,tr:at,bl:gt,br:Mt,tex:wt,pixelOffsetTL:Rt,pixelOffsetBR:Zt,minFontScaleX:At,minFontScaleY:It,glyphOffset:ht,isSDF:sr,sectionIndex:dr}=u[Ne],Qt=ce.vertexLength,Ut=ht[1];v0(se,O.x,O.y,et.x,Ut+et.y,wt.x,wt.y,f,sr,Rt.x,Rt.y,At,It),v0(se,O.x,O.y,at.x,Ut+at.y,wt.x+wt.w,wt.y,f,sr,Zt.x,Rt.y,At,It),v0(se,O.x,O.y,gt.x,Ut+gt.y,wt.x,wt.y+wt.h,f,sr,Rt.x,Zt.y,At,It),v0(se,O.x,O.y,Mt.x,Ut+Mt.y,wt.x+wt.w,wt.y+wt.h,f,sr,Zt.x,Zt.y,At,It),cE(a.dynamicLayoutVertexArray,O,Ue),ie.emplaceBack(Qt,Qt+2,Qt+1),ie.emplaceBack(Qt+1,Qt+2,Qt+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ht[0]),Ne!==u.length-1&&dr===u[Ne+1].sectionIndex||a.programConfigurations.populatePaintArrays(se.length,C,C.index,{imagePositions:{},canonical:Q,formattedSection:Oe&&Oe[dr],globalState:this.globalState})}a.placedSymbolArray.emplaceBack(O.x,O.y,pe,this.glyphOffsetArray.length-pe,Ee,N,B,O.segment,f?f[0]:0,f?f[1]:0,b[0],b[1],I,0,!1,0,G)}_addCollisionDebugVertex(a,u,f,b,S,C){return u.emplaceBack(0,0),a.emplaceBack(f.x,f.y,b,S,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(a,u,f,b,S,C,I){const O=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),N=O.vertexLength,B=S.layoutVertexArray,G=S.collisionVertexArray,Q=I.anchorX,ie=I.anchorY;this._addCollisionDebugVertex(B,G,C,Q,ie,new p(a,u)),this._addCollisionDebugVertex(B,G,C,Q,ie,new p(f,u)),this._addCollisionDebugVertex(B,G,C,Q,ie,new p(f,b)),this._addCollisionDebugVertex(B,G,C,Q,ie,new p(a,b)),O.vertexLength+=4;const se=S.indexArray;se.emplaceBack(N,N+1),se.emplaceBack(N+1,N+2),se.emplaceBack(N+2,N+3),se.emplaceBack(N+3,N),O.primitiveLength+=4}addDebugCollisionBoxes(a,u,f,b){for(let S=a;S<u;S++){const C=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,b?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hE(Er,r3.members,an),this.iconCollisionBox=new hE(Er,r3.members,an);for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(a,u,f,b,S,C,I,O,N){const B={};for(let G=u;G<f;G++){const Q=a.get(G);B.textBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},B.textFeatureIndex=Q.featureIndex;break}for(let G=b;G<S;G++){const Q=a.get(G);B.verticalTextBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},B.verticalTextFeatureIndex=Q.featureIndex;break}for(let G=C;G<I;G++){const Q=a.get(G);B.iconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},B.iconFeatureIndex=Q.featureIndex;break}for(let G=O;G<N;G++){const Q=a.get(G);B.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},B.verticalIconFeatureIndex=Q.featureIndex;break}return B}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,u){const f=a.placedSymbolArray.get(u),b=f.vertexStartIndex+4*f.numGlyphs;for(let S=f.vertexStartIndex;S<b;S+=4)a.indexArray.emplaceBack(S,S+2,S+1),a.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(a),f=Math.cos(a),b=[],S=[],C=[];for(let I=0;I<this.symbolInstances.length;++I){C.push(I);const O=this.symbolInstances.get(I);b.push(0|Math.round(u*O.anchorX+f*O.anchorY)),S.push(O.featureIndex)}return C.sort((I,O)=>b[I]-b[O]||S[O]-S[I]),C}addToSortKeyRanges(a,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((b,S,C)=>{b>=0&&C.indexOf(b)===S&&this.addIndicesForPlacedSymbol(this.text,b)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let g3,y3;zt("SymbolBucket",ep,{omit:["layers","collisionBoxArray","features","compareText"]}),ep.MAX_GLYPHS=65535,ep.addDynamicAttributes=cE;var dE={get paint(){return y3=y3||new Ji({"icon-opacity":new ir($e.paint_symbol["icon-opacity"]),"icon-color":new ir($e.paint_symbol["icon-color"]),"icon-halo-color":new ir($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new ir($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ir($e.paint_symbol["icon-halo-blur"]),"icon-translate":new Gt($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new Gt($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new ir($e.paint_symbol["text-opacity"]),"text-color":new ir($e.paint_symbol["text-color"],{runtimeType:xn,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new ir($e.paint_symbol["text-halo-color"]),"text-halo-width":new ir($e.paint_symbol["text-halo-width"]),"text-halo-blur":new ir($e.paint_symbol["text-halo-blur"]),"text-translate":new Gt($e.paint_symbol["text-translate"]),"text-translate-anchor":new Gt($e.paint_symbol["text-translate-anchor"])})},get layout(){return g3=g3||new Ji({"symbol-placement":new Gt($e.layout_symbol["symbol-placement"]),"symbol-spacing":new Gt($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Gt($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ir($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Gt($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Gt($e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Gt($e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Gt($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new Gt($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Gt($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new ir($e.layout_symbol["icon-size"]),"icon-text-fit":new Gt($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Gt($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new ir($e.layout_symbol["icon-image"]),"icon-rotate":new ir($e.layout_symbol["icon-rotate"]),"icon-padding":new ir($e.layout_symbol["icon-padding"]),"icon-keep-upright":new Gt($e.layout_symbol["icon-keep-upright"]),"icon-offset":new ir($e.layout_symbol["icon-offset"]),"icon-anchor":new ir($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Gt($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Gt($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Gt($e.layout_symbol["text-rotation-alignment"]),"text-field":new ir($e.layout_symbol["text-field"]),"text-font":new ir($e.layout_symbol["text-font"]),"text-size":new ir($e.layout_symbol["text-size"]),"text-max-width":new ir($e.layout_symbol["text-max-width"]),"text-line-height":new Gt($e.layout_symbol["text-line-height"]),"text-letter-spacing":new ir($e.layout_symbol["text-letter-spacing"]),"text-justify":new ir($e.layout_symbol["text-justify"]),"text-radial-offset":new ir($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Gt($e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ir($e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ir($e.layout_symbol["text-anchor"]),"text-max-angle":new Gt($e.layout_symbol["text-max-angle"]),"text-writing-mode":new Gt($e.layout_symbol["text-writing-mode"]),"text-rotate":new ir($e.layout_symbol["text-rotate"]),"text-padding":new Gt($e.layout_symbol["text-padding"]),"text-keep-upright":new Gt($e.layout_symbol["text-keep-upright"]),"text-transform":new ir($e.layout_symbol["text-transform"]),"text-offset":new ir($e.layout_symbol["text-offset"]),"text-allow-overlap":new Gt($e.layout_symbol["text-allow-overlap"]),"text-overlap":new Gt($e.layout_symbol["text-overlap"]),"text-ignore-placement":new Gt($e.layout_symbol["text-ignore-placement"]),"text-optional":new Gt($e.layout_symbol["text-optional"])})}};class _3{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:fs,this.defaultValue=a}evaluate(a){if(a.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(a.formattedSection))return u.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zt("FormatSectionOverride",_3,{omit:["defaultValue"]});class x0 extends Co{constructor(a){super(a,dE)}recalculate(a,u){if(super.recalculate(a,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const b=[];for(const S of f)b.indexOf(S)<0&&b.push(S);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,u,f,b){const S=this.layout.get(a).evaluate(u,{},f,b),C=this._unevaluatedLayout._values[a];return C.isDataDriven()||Rd(C.value)||!S?S:function(I,O){return O.replace(/{([^{}]+)}/g,(N,B)=>I&&B in I?String(I[B]):"")}(u.properties,S)}createBucket(a){return new ep(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of dE.paint.overridableProperties){if(!x0.hasPaintOverride(this.layout,a))continue;const u=this.paint.get(a),f=new _3(u),b=new dm(f,u.property.specification);let S=null;S=u.value.kind==="constant"||u.value.kind==="source"?new Iu("source",b):new pm("composite",b,u.value.zoomStops),this.paint._values[a]=new xs(u.property,S,u.parameters)}}_handleOverridablePaintPropertyUpdate(a,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&x0.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,u){const f=a.get("text-field"),b=dE.paint.properties[u];let S=!1;const C=I=>{for(const O of I)if(b.overrides&&b.overrides.hasOverride(O))return void(S=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Ui)C(f.value.value.sections);else if(f.value.kind==="source"){const I=N=>{S||(N instanceof zs&&or(N.value)===hi?C(N.value.sections):N instanceof Za?C(N.sections):N.eachChild(I))},O=f.value;O._styleExpression&&I(O._styleExpression.expression)}return S}}let b3;var NZ={get paint(){return b3=b3||new Ji({"background-color":new Gt($e.paint_background["background-color"]),"background-pattern":new fa($e.paint_background["background-pattern"]),"background-opacity":new Gt($e.paint_background["background-opacity"])})}};class FZ extends Co{constructor(a){super(a,NZ)}}let v3;var zZ={get paint(){return v3=v3||new Ji({"raster-opacity":new Gt($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new Gt($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Gt($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Gt($e.paint_raster["raster-brightness-max"]),"raster-saturation":new Gt($e.paint_raster["raster-saturation"]),"raster-contrast":new Gt($e.paint_raster["raster-contrast"]),"raster-resampling":new Gt($e.paint_raster["raster-resampling"]),"raster-fade-duration":new Gt($e.paint_raster["raster-fade-duration"])})}};class jZ extends Co{constructor(a){super(a,zZ)}}class BZ extends Co{constructor(a){super(a,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class qZ{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const $Z={once:!0},pE=63710088e-1;class mc{constructor(a,u){if(isNaN(a)||isNaN(u))throw new Error(`Invalid LngLat object: (${a}, ${u})`);if(this.lng=+a,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new mc(er(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const u=Math.PI/180,f=this.lat*u,b=a.lat*u,S=Math.sin(f)*Math.sin(b)+Math.cos(f)*Math.cos(b)*Math.cos((a.lng-this.lng)*u);return pE*Math.acos(Math.min(S,1))}static convert(a){if(a instanceof mc)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new mc(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new mc(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const x3=2*Math.PI*pE;function w3(h){return x3*Math.cos(h*Math.PI/180)}function E3(h){return(180+h)/360}function T3(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function S3(h,a){return h/w3(a)}function fE(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function C3(h,a){return h*w3(fE(a))}class Jm{constructor(a,u,f=0){this.x=+a,this.y=+u,this.z=+f}static fromLngLat(a,u=0){const f=mc.convert(a);return new Jm(E3(f.lng),T3(f.lat),S3(u,f.lat))}toLngLat(){return new mc(360*this.x-180,fE(this.y))}toAltitude(){return C3(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/x3*(a=fE(this.y),1/Math.cos(a*Math.PI/180));var a}}function P3(h,a,u){var f=2*Math.PI*6378137/256/Math.pow(2,u);return[h*f-2*Math.PI*6378137/2,a*f-2*Math.PI*6378137/2]}class mE{constructor(a,u,f){if(!function(b,S,C){return!(b<0||b>25||C<0||C>=Math.pow(2,b)||S<0||S>=Math.pow(2,b))}(a,u,f))throw new Error(`x=${u}, y=${f}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=u,this.y=f,this.key=tp(0,a,a,u,f)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,u,f){const b=(C=this.y,I=this.z,O=P3(256*(S=this.x),256*(C=Math.pow(2,I)-C-1),I),N=P3(256*(S+1),256*(C+1),I),O[0]+","+O[1]+","+N[0]+","+N[1]);var S,C,I,O,N;const B=function(G,Q,ie){let se,ce="";for(let pe=G;pe>0;pe--)se=1<<pe-1,ce+=(Q&se?1:0)+(ie&se?2:0);return ce}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,b)}isChildOf(a){const u=this.z-a.z;return u>0&&a.x===this.x>>u&&a.y===this.y>>u}getTilePoint(a){const u=Math.pow(2,this.z);return new p((a.x*u-this.x)*Ke,(a.y*u-this.y)*Ke)}toString(){return`${this.z}/${this.x}/${this.y}`}}class A3{constructor(a,u){this.wrap=a,this.canonical=u,this.key=tp(a,u.z,u.z,u.x,u.y)}}class Wo{constructor(a,u,f,b,S){if(this.terrainRttPosMatrix32f=null,a<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${f}`);this.overscaledZ=a,this.wrap=u,this.canonical=new mE(f,+b,+S),this.key=tp(u,a,f,b,S)}clone(){return new Wo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-a;return a>this.canonical.z?new Wo(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wo(a,this.wrap,a,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(a,u){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-a;return a>this.canonical.z?tp(this.wrap*+u,a,this.canonical.z,this.canonical.x,this.canonical.y):tp(this.wrap*+u,a,a,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const u=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>u&&a.canonical.y===this.canonical.y>>u}children(a){if(this.overscaledZ>=a)return[new Wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,b=2*this.canonical.y;return[new Wo(u,this.wrap,u,f,b),new Wo(u,this.wrap,u,f+1,b),new Wo(u,this.wrap,u,f,b+1),new Wo(u,this.wrap,u,f+1,b+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Wo(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new A3(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Jm(a.x-this.wrap,a.y))}}function tp(h,a,u,f,b){(h*=2)<0&&(h=-1*h-1);const S=1<<u;return(S*S*h+S*b+f).toString(36)+u.toString(36)+a.toString(36)}function Wm(h,a){return a?h.properties[a]:h.id}zt("CanonicalTileID",mE),zt("OverscaledTileID",Wo,{omit:["terrainRttPosMatrix32f"]});class Vu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(a){return this.minX=Math.min(this.minX,a.x),this.minY=Math.min(this.minY,a.y),this.maxX=Math.max(this.maxX,a.x),this.maxY=Math.max(this.maxY,a.y),this}expandBy(a){return this.minX-=a,this.minY-=a,this.maxX+=a,this.maxY+=a,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(a){return this.expandBy(-a)}map(a){const u=new Vu;return u.extend(a(new p(this.minX,this.minY))),u.extend(a(new p(this.maxX,this.minY))),u.extend(a(new p(this.minX,this.maxY))),u.extend(a(new p(this.maxX,this.maxY))),u}static fromPoints(a){const u=new Vu;for(const f of a)u.extend(f);return u}contains(a){return a.x>=this.minX&&a.x<=this.maxX&&a.y>=this.minY&&a.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(a){return!this.empty()&&!a.empty()&&a.minX>=this.minX&&a.maxX<=this.maxX&&a.minY>=this.minY&&a.maxY<=this.maxY}intersects(a){return!this.empty()&&!a.empty()&&a.minX<=this.maxX&&a.maxX>=this.minX&&a.minY<=this.maxY&&a.maxY>=this.minY}}class R3{constructor(a){this._stringToNumber={},this._numberToString=[];for(let u=0;u<a.length;u++){const f=a[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class I3{constructor(a,u,f,b,S){this.type="Feature",this._vectorTileFeature=a,a._z=u,a._x=f,a._y=b,this.properties=a.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(a[u]=this[u]);return a}}class M3{constructor(a,u){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Fu(Ke,16,0),this.grid3D=new Fu(Ke,16,0),this.featureIndexArray=new Be,this.promoteId=u}insert(a,u,f,b,S,C){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,b,S);const O=C?this.grid3D:this.grid;for(let N=0;N<u.length;N++){const B=u[N],G=[1/0,1/0,-1/0,-1/0];for(let Q=0;Q<B.length;Q++){const ie=B[Q];G[0]=Math.min(G[0],ie.x),G[1]=Math.min(G[1],ie.y),G[2]=Math.max(G[2],ie.x),G[3]=Math.max(G[3],ie.y)}G[0]<Ke&&G[1]<Ke&&G[2]>=0&&G[3]>=0&&O.insert(I,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new J5(new iE(this.rawTileData)).layers,this.sourceLayerCoder=new R3(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,u,f,b){this.loadVTLayers();const S=a.params,C=Ke/a.tileSize/a.scale,I=tl(S.filter),O=a.queryGeometry,N=a.queryPadding*C,B=Vu.fromPoints(O),G=this.grid.query(B.minX-N,B.minY-N,B.maxX+N,B.maxY+N),Q=Vu.fromPoints(a.cameraQueryGeometry).expandBy(N),ie=this.grid3D.query(Q.minX,Q.minY,Q.maxX,Q.maxY,(pe,Ee,Ue,Oe)=>function(Ne,et,at,gt,Mt){for(const Rt of Ne)if(et<=Rt.x&&at<=Rt.y&&gt>=Rt.x&&Mt>=Rt.y)return!0;const wt=[new p(et,at),new p(et,Mt),new p(gt,Mt),new p(gt,at)];if(Ne.length>2){for(const Rt of wt)if(Jd(Ne,Rt))return!0}for(let Rt=0;Rt<Ne.length-1;Rt++)if(vW(Ne[Rt],Ne[Rt+1],wt))return!0;return!1}(a.cameraQueryGeometry,pe-N,Ee-N,Ue+N,Oe+N));for(const pe of ie)G.push(pe);G.sort(VZ);const se={};let ce;for(let pe=0;pe<G.length;pe++){const Ee=G[pe];if(Ee===ce)continue;ce=Ee;const Ue=this.featureIndexArray.get(Ee);let Oe=null;this.loadMatchingFeature(se,Ue.bucketIndex,Ue.sourceLayerIndex,Ue.featureIndex,I,S.layers,S.availableImages,u,f,b,(Ne,et,at)=>(Oe||(Oe=ba(Ne)),et.queryIntersectsFeature({queryGeometry:O,feature:Ne,featureState:at,geometry:Oe,zoom:this.z,transform:a.transform,pixelsToTileUnits:C,pixelPosMatrix:a.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:a.getElevation})))}return se}loadMatchingFeature(a,u,f,b,S,C,I,O,N,B,G){const Q=this.bucketLayerIDs[u];if(C&&!Q.some(pe=>C.has(pe)))return;const ie=this.sourceLayerCoder.decode(f),se=this.vtLayers[ie].feature(b);if(S.needGeometry){const pe=$s(se,!0);if(!S.filter(new yn(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!S.filter(new yn(this.tileID.overscaledZ),se))return;const ce=this.getId(se,ie);for(let pe=0;pe<Q.length;pe++){const Ee=Q[pe];if(C&&!C.has(Ee))continue;const Ue=O[Ee];if(!Ue)continue;let Oe={};ce&&B&&(Oe=B.getState(Ue.sourceLayer||"_geojsonTileLayer",ce));const Ne=Wt({},N[Ee]);Ne.paint=O3(Ne.paint,Ue.paint,se,Oe,I),Ne.layout=O3(Ne.layout,Ue.layout,se,Oe,I);const et=!G||G(se,Ue,Oe);if(!et)continue;const at=new I3(se,this.z,this.x,this.y,ce);at.layer=Ne;let gt=a[Ee];gt===void 0&&(gt=a[Ee]=[]),gt.push({featureIndex:b,feature:at,intersectionZ:et})}}lookupSymbolFeatures(a,u,f,b,S,C,I,O){const N={};this.loadVTLayers();const B=tl(S);for(const G of a)this.loadMatchingFeature(N,f,b,G,B,C,I,O,u);return N}hasLayer(a){for(const u of this.bucketLayerIDs)for(const f of u)if(a===f)return!0;return!1}getId(a,u){var f;let b=a.id;return this.promoteId&&(b=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&(!((f=a.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(b=Number(a.properties.cluster_id))),b}}function O3(h,a,u,f,b){return _t(h,(S,C)=>{const I=a instanceof jd?a.get(C):null;return I&&I.evaluate?I.evaluate(u,f,b):I})}function VZ(h,a){return a-h}function k3(h,a,u,f,b){const S=[];for(let C=0;C<h.length;C++){const I=h[C];let O;for(let N=0;N<I.length-1;N++){let B=I[N],G=I[N+1];B.x<a&&G.x<a||(B.x<a?B=new p(a,B.y+(a-B.x)/(G.x-B.x)*(G.y-B.y))._round():G.x<a&&(G=new p(a,B.y+(a-B.x)/(G.x-B.x)*(G.y-B.y))._round()),B.y<u&&G.y<u||(B.y<u?B=new p(B.x+(u-B.y)/(G.y-B.y)*(G.x-B.x),u)._round():G.y<u&&(G=new p(B.x+(u-B.y)/(G.y-B.y)*(G.x-B.x),u)._round()),B.x>=f&&G.x>=f||(B.x>=f?B=new p(f,B.y+(f-B.x)/(G.x-B.x)*(G.y-B.y))._round():G.x>=f&&(G=new p(f,B.y+(f-B.x)/(G.x-B.x)*(G.y-B.y))._round()),B.y>=b&&G.y>=b||(B.y>=b?B=new p(B.x+(b-B.y)/(G.y-B.y)*(G.x-B.x),b)._round():G.y>=b&&(G=new p(B.x+(b-B.y)/(G.y-B.y)*(G.x-B.x),b)._round()),O&&B.equals(O[O.length-1])||(O=[B],S.push(O)),O.push(G)))))}}return S}zt("FeatureIndex",M3,{omit:["rawTileData","sourceLayerCoder"]});class gc extends p{constructor(a,u,f,b){super(a,u),this.angle=f,b!==void 0&&(this.segment=b)}clone(){return new gc(this.x,this.y,this.angle,this.segment)}}function L3(h,a,u,f,b){if(a.segment===void 0||u===0)return!0;let S=a,C=a.segment+1,I=0;for(;I>-u/2;){if(C--,C<0)return!1;I-=h[C].dist(S),S=h[C]}I+=h[C].dist(h[C+1]),C++;const O=[];let N=0;for(;I<u/2;){const B=h[C],G=h[C+1];if(!G)return!1;let Q=h[C-1].angleTo(B)-B.angleTo(G);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:I,angleDelta:Q}),N+=Q;I-O[0].distance>f;)N-=O.shift().angleDelta;if(N>b)return!1;C++,I+=B.dist(G)}return!0}function D3(h){let a=0;for(let u=0;u<h.length-1;u++)a+=h[u].dist(h[u+1]);return a}function N3(h,a,u){return h?.6*a*u:0}function F3(h,a){return Math.max(h?h.right-h.left:0,a?a.right-a.left:0)}function UZ(h,a,u,f,b,S){const C=N3(u,b,S),I=F3(u,f)*S;let O=0;const N=D3(h)/2;for(let B=0;B<h.length-1;B++){const G=h[B],Q=h[B+1],ie=G.dist(Q);if(O+ie>N){const se=(N-O)/ie,ce=bs.number(G.x,Q.x,se),pe=bs.number(G.y,Q.y,se),Ee=new gc(ce,pe,Q.angleTo(G),B);return Ee._round(),!C||L3(h,Ee,I,C,a)?Ee:void 0}O+=ie}}function GZ(h,a,u,f,b,S,C,I,O){const N=N3(f,S,C),B=F3(f,b),G=B*C,Q=h[0].x===0||h[0].x===O||h[0].y===0||h[0].y===O;return a-G<a/4&&(a=G+a/4),z3(h,Q?a/2*I%a:(B/2+2*S)*C*I%a,a,N,u,G,Q,!1,O)}function z3(h,a,u,f,b,S,C,I,O){const N=S/2,B=D3(h);let G=0,Q=a-u,ie=[];for(let se=0;se<h.length-1;se++){const ce=h[se],pe=h[se+1],Ee=ce.dist(pe),Ue=pe.angleTo(ce);for(;Q+u<G+Ee;){Q+=u;const Oe=(Q-G)/Ee,Ne=bs.number(ce.x,pe.x,Oe),et=bs.number(ce.y,pe.y,Oe);if(Ne>=0&&Ne<O&&et>=0&&et<O&&Q-N>=0&&Q+N<=B){const at=new gc(Ne,et,Ue,se);at._round(),f&&!L3(h,at,S,f,b)||ie.push(at)}}G+=Ee}return I||ie.length||C||(ie=z3(h,G/2,u,f,b,S,C,!0,O)),ie}function j3(h,a,u,f){const b=[],S=h.image,C=S.pixelRatio,I=S.paddedRect.w-2,O=S.paddedRect.h-2;let N={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const B=S.stretchX||[[0,I]],G=S.stretchY||[[0,O]],Q=(ht,sr)=>ht+sr[1]-sr[0],ie=B.reduce(Q,0),se=G.reduce(Q,0),ce=I-ie,pe=O-se;let Ee=0,Ue=ie,Oe=0,Ne=se,et=0,at=ce,gt=0,Mt=pe;if(S.content&&f){const ht=S.content,sr=ht[2]-ht[0],dr=ht[3]-ht[1];(S.textFitWidth||S.textFitHeight)&&(N=p3(h)),Ee=w0(B,0,ht[0]),Oe=w0(G,0,ht[1]),Ue=w0(B,ht[0],ht[2]),Ne=w0(G,ht[1],ht[3]),et=ht[0]-Ee,gt=ht[1]-Oe,at=sr-Ue,Mt=dr-Ne}const wt=N.x1,Rt=N.y1,Zt=N.x2-wt,At=N.y2-Rt,It=(ht,sr,dr,Qt)=>{const Ut=E0(ht.stretch-Ee,Ue,Zt,wt),Br=T0(ht.fixed-et,at,ht.stretch,ie),Nn=E0(sr.stretch-Oe,Ne,At,Rt),li=T0(sr.fixed-gt,Mt,sr.stretch,se),qi=E0(dr.stretch-Ee,Ue,Zt,wt),Zo=T0(dr.fixed-et,at,dr.stretch,ie),bo=E0(Qt.stretch-Oe,Ne,At,Rt),Ai=T0(Qt.fixed-gt,Mt,Qt.stretch,se),On=new p(Ut,Nn),yi=new p(qi,Nn),Ri=new p(qi,bo),Ii=new p(Ut,bo),so=new p(Br/C,li/C),Ko=new p(Zo/C,Ai/C),_i=a*Math.PI/180;if(_i){const bi=Math.sin(_i),vi=Math.cos(_i),ei=[vi,-bi,bi,vi];On._matMult(ei),yi._matMult(ei),Ii._matMult(ei),Ri._matMult(ei)}const vo=ht.stretch+ht.fixed,ci=sr.stretch+sr.fixed;return{tl:On,tr:yi,bl:Ii,br:Ri,tex:{x:S.paddedRect.x+1+vo,y:S.paddedRect.y+1+ci,w:dr.stretch+dr.fixed-vo,h:Qt.stretch+Qt.fixed-ci},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:so,pixelOffsetBR:Ko,minFontScaleX:at/C/Zt,minFontScaleY:Mt/C/At,isSDF:u}};if(f&&(S.stretchX||S.stretchY)){const ht=B3(B,ce,ie),sr=B3(G,pe,se);for(let dr=0;dr<ht.length-1;dr++){const Qt=ht[dr],Ut=ht[dr+1];for(let Br=0;Br<sr.length-1;Br++)b.push(It(Qt,sr[Br],Ut,sr[Br+1]))}}else b.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:O+1}));return b}function w0(h,a,u){let f=0;for(const b of h)f+=Math.max(a,Math.min(u,b[1]))-Math.max(a,Math.min(u,b[0]));return f}function B3(h,a,u){const f=[{fixed:-1,stretch:0}];for(const[b,S]of h){const C=f[f.length-1];f.push({fixed:b-C.stretch,stretch:C.stretch}),f.push({fixed:b-C.stretch,stretch:C.stretch+(S-b)})}return f.push({fixed:a+1,stretch:u}),f}function E0(h,a,u,f){return h/a*u+f}function T0(h,a,u,f){return h-a*u/f}zt("Anchor",gc);class S0{constructor(a,u,f,b,S,C,I,O,N,B){var G;if(this.boxStartIndex=a.length,N){let Q=C.top,ie=C.bottom;const se=C.collisionPadding;se&&(Q-=se[1],ie+=se[3]);let ce=ie-Q;ce>0&&(ce=Math.max(10,ce),this.circleDiameter=ce)}else{const Q=!((G=C.image)===null||G===void 0)&&G.content&&(C.image.textFitWidth||C.image.textFitHeight)?p3(C):{x1:C.left,y1:C.top,x2:C.right,y2:C.bottom};Q.y1=Q.y1*I-O[0],Q.y2=Q.y2*I+O[2],Q.x1=Q.x1*I-O[3],Q.x2=Q.x2*I+O[1];const ie=C.collisionPadding;if(ie&&(Q.x1-=ie[0]*I,Q.y1-=ie[1]*I,Q.x2+=ie[2]*I,Q.y2+=ie[3]*I),B){const se=new p(Q.x1,Q.y1),ce=new p(Q.x2,Q.y1),pe=new p(Q.x1,Q.y2),Ee=new p(Q.x2,Q.y2),Ue=B*Math.PI/180;se._rotate(Ue),ce._rotate(Ue),pe._rotate(Ue),Ee._rotate(Ue),Q.x1=Math.min(se.x,ce.x,pe.x,Ee.x),Q.x2=Math.max(se.x,ce.x,pe.x,Ee.x),Q.y1=Math.min(se.y,ce.y,pe.y,Ee.y),Q.y2=Math.max(se.y,ce.y,pe.y,Ee.y)}a.emplaceBack(u.x,u.y,Q.x1,Q.y1,Q.x2,Q.y2,f,b,S)}this.boxEndIndex=a.length}}class HZ{constructor(a=[],u=(f,b)=>f<b?-1:f>b?1:0){if(this.data=a,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:u,compare:f}=this,b=u[a];for(;a>0;){const S=a-1>>1,C=u[S];if(f(b,C)>=0)break;u[a]=C,a=S}u[a]=b}_down(a){const{data:u,compare:f}=this,b=this.length>>1,S=u[a];for(;a<b;){let C=1+(a<<1);const I=C+1;if(I<this.length&&f(u[I],u[C])<0&&(C=I),f(u[C],S)>=0)break;u[a]=u[C],a=C}u[a]=S}}function JZ(h,a=1,u=!1){const f=Vu.fromPoints(h[0]),b=Math.min(f.width(),f.height());let S=b/2;const C=new HZ([],WZ),{minX:I,minY:O,maxX:N,maxY:B}=f;if(b===0)return new p(I,O);for(let ie=I;ie<N;ie+=b)for(let se=O;se<B;se+=b)C.push(new rp(ie+S,se+S,S,h));let G=function(ie){let se=0,ce=0,pe=0;const Ee=ie[0];for(let Ue=0,Oe=Ee.length,Ne=Oe-1;Ue<Oe;Ne=Ue++){const et=Ee[Ue],at=Ee[Ne],gt=et.x*at.y-at.x*et.y;ce+=(et.x+at.x)*gt,pe+=(et.y+at.y)*gt,se+=3*gt}return new rp(ce/se,pe/se,0,ie)}(h),Q=C.length;for(;C.length;){const ie=C.pop();(ie.d>G.d||!G.d)&&(G=ie,u&&console.log("found best %d after %d probes",Math.round(1e4*ie.d)/1e4,Q)),ie.max-G.d<=a||(S=ie.h/2,C.push(new rp(ie.p.x-S,ie.p.y-S,S,h)),C.push(new rp(ie.p.x+S,ie.p.y-S,S,h)),C.push(new rp(ie.p.x-S,ie.p.y+S,S,h)),C.push(new rp(ie.p.x+S,ie.p.y+S,S,h)),Q+=4)}return u&&(console.log(`num probes: ${Q}`),console.log(`best distance: ${G.d}`)),G.p}function WZ(h,a){return a.max-h.max}function rp(h,a,u,f){this.p=new p(h,a),this.h=u,this.d=function(b,S){let C=!1,I=1/0;for(let O=0;O<S.length;O++){const N=S[O];for(let B=0,G=N.length,Q=G-1;B<G;Q=B++){const ie=N[B],se=N[Q];ie.y>b.y!=se.y>b.y&&b.x<(se.x-ie.x)*(b.y-ie.y)/(se.y-ie.y)+ie.x&&(C=!C),I=Math.min(I,T5(b,ie,se))}}return(C?1:-1)*Math.sqrt(I)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Bi;c.aE=void 0,(Bi=c.aE||(c.aE={}))[Bi.center=1]="center",Bi[Bi.left=2]="left",Bi[Bi.right=3]="right",Bi[Bi.top=4]="top",Bi[Bi.bottom=5]="bottom",Bi[Bi["top-left"]=6]="top-left",Bi[Bi["top-right"]=7]="top-right",Bi[Bi["bottom-left"]=8]="bottom-left",Bi[Bi["bottom-right"]=9]="bottom-right";const gE=Number.POSITIVE_INFINITY;function q3(h,a){return a[1]!==gE?function(u,f,b){let S=0,C=0;switch(f=Math.abs(f),b=Math.abs(b),u){case"top-right":case"top-left":case"top":C=b-7;break;case"bottom-right":case"bottom-left":case"bottom":C=7-b}switch(u){case"top-right":case"bottom-right":case"right":S=-f;break;case"top-left":case"bottom-left":case"left":S=f}return[S,C]}(h,a[0],a[1]):function(u,f){let b=0,S=0;f<0&&(f=0);const C=f/Math.SQRT2;switch(u){case"top-right":case"top-left":S=C-7;break;case"bottom-right":case"bottom-left":S=7-C;break;case"bottom":S=7-f;break;case"top":S=f-7}switch(u){case"top-right":case"bottom-right":b=-C;break;case"top-left":case"bottom-left":b=C;break;case"left":b=f;break;case"right":b=-f}return[b,S]}(h,a[0])}function $3(h,a,u){var f;const b=h.layout,S=(f=b.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(a,{},u);if(S){const I=S.values,O=[];for(let N=0;N<I.length;N+=2){const B=O[N]=I[N],G=I[N+1].map(Q=>Q*gi);B.startsWith("top")?G[1]-=7:B.startsWith("bottom")&&(G[1]+=7),O[N+1]=G}return new Hi(O)}const C=b.get("text-variable-anchor");if(C){let I;I=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(a,{},u)*gi,gE]:b.get("text-offset").evaluate(a,{},u).map(N=>N*gi);const O=[];for(const N of C)O.push(N,q3(N,I));return new Hi(O)}return null}function yE(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ZZ(h,a,u,f,b,S,C,I,O,N,B,G){let Q=S.textMaxSize.evaluate(a,{});Q===void 0&&(Q=C);const ie=h.layers[0].layout,se=ie.get("icon-offset").evaluate(a,{},B),ce=U3(u.horizontal),pe=C/24,Ee=h.tilePixelRatio*pe,Ue=h.tilePixelRatio*Q/24,Oe=h.tilePixelRatio*I,Ne=h.tilePixelRatio*ie.get("symbol-spacing"),et=ie.get("text-padding")*h.tilePixelRatio,at=function(dr,Qt,Ut,Br=1){const Nn=dr.get("icon-padding").evaluate(Qt,{},Ut),li=Nn&&Nn.values;return[li[0]*Br,li[1]*Br,li[2]*Br,li[3]*Br]}(ie,a,B,h.tilePixelRatio),gt=ie.get("text-max-angle")/180*Math.PI,Mt=ie.get("text-rotation-alignment")!=="viewport"&&ie.get("symbol-placement")!=="point",wt=ie.get("icon-rotation-alignment")==="map"&&ie.get("symbol-placement")!=="point",Rt=ie.get("symbol-placement"),Zt=Ne/2,At=ie.get("icon-text-fit");let It;f&&At!=="none"&&(h.allowVerticalPlacement&&u.vertical&&(It=f3(f,u.vertical,At,ie.get("icon-text-fit-padding"),se,pe)),ce&&(f=f3(f,ce,At,ie.get("icon-text-fit-padding"),se,pe)));const ht=B?G.line.getGranularityForZoomLevel(B.z):1,sr=(dr,Qt)=>{Qt.x<0||Qt.x>=Ke||Qt.y<0||Qt.y>=Ke||function(Ut,Br,Nn,li,qi,Zo,bo,Ai,On,yi,Ri,Ii,so,Ko,_i,vo,ci,bi,vi,ei,Cn,Vs,np,Us,XZ){const ip=Ut.addToLineVertexArray(Br,Nn);let Uu,op,sp,ap,W3=0,Z3=0,K3=0,Y3=0,SE=-1,CE=-1;const ul={};let X3=hc("");if(Ut.allowVerticalPlacement&&li.vertical){const Ki=Ai.layout.get("text-rotate").evaluate(Cn,{},Us)+90;sp=new S0(On,Br,yi,Ri,Ii,li.vertical,so,Ko,_i,Ki),bo&&(ap=new S0(On,Br,yi,Ri,Ii,bo,ci,bi,_i,Ki))}if(qi){const Ki=Ai.layout.get("icon-rotate").evaluate(Cn,{}),Yo=Ai.layout.get("icon-text-fit")!=="none",Gu=j3(qi,Ki,np,Yo),Hs=bo?j3(bo,Ki,np,Yo):void 0;op=new S0(On,Br,yi,Ri,Ii,qi,ci,bi,!1,Ki),W3=4*Gu.length;const Hu=Ut.iconSizeData;let va=null;Hu.kind==="source"?(va=[cl*Ai.layout.get("icon-size").evaluate(Cn,{})],va[0]>fc&&Tt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Hu.kind==="composite"&&(va=[cl*Vs.compositeIconSizes[0].evaluate(Cn,{},Us),cl*Vs.compositeIconSizes[1].evaluate(Cn,{},Us)],(va[0]>fc||va[1]>fc)&&Tt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ut.addSymbols(Ut.icon,Gu,va,ei,vi,Cn,c.ao.none,Br,ip.lineStartIndex,ip.lineLength,-1,Us),SE=Ut.icon.placedSymbolArray.length-1,Hs&&(Z3=4*Hs.length,Ut.addSymbols(Ut.icon,Hs,va,ei,vi,Cn,c.ao.vertical,Br,ip.lineStartIndex,ip.lineLength,-1,Us),CE=Ut.icon.placedSymbolArray.length-1)}const Q3=Object.keys(li.horizontal);for(const Ki of Q3){const Yo=li.horizontal[Ki];if(!Uu){X3=hc(Yo.text);const Hs=Ai.layout.get("text-rotate").evaluate(Cn,{},Us);Uu=new S0(On,Br,yi,Ri,Ii,Yo,so,Ko,_i,Hs)}const Gu=Yo.positionedLines.length===1;if(K3+=V3(Ut,Br,Yo,Zo,Ai,_i,Cn,vo,ip,li.vertical?c.ao.horizontal:c.ao.horizontalOnly,Gu?Q3:[Ki],ul,SE,Vs,Us),Gu)break}li.vertical&&(Y3+=V3(Ut,Br,li.vertical,Zo,Ai,_i,Cn,vo,ip,c.ao.vertical,["vertical"],ul,CE,Vs,Us));const QZ=Uu?Uu.boxStartIndex:Ut.collisionBoxArray.length,eK=Uu?Uu.boxEndIndex:Ut.collisionBoxArray.length,tK=sp?sp.boxStartIndex:Ut.collisionBoxArray.length,rK=sp?sp.boxEndIndex:Ut.collisionBoxArray.length,nK=op?op.boxStartIndex:Ut.collisionBoxArray.length,iK=op?op.boxEndIndex:Ut.collisionBoxArray.length,oK=ap?ap.boxStartIndex:Ut.collisionBoxArray.length,sK=ap?ap.boxEndIndex:Ut.collisionBoxArray.length;let Gs=-1;const P0=(Ki,Yo)=>Ki&&Ki.circleDiameter?Math.max(Ki.circleDiameter,Yo):Yo;Gs=P0(Uu,Gs),Gs=P0(sp,Gs),Gs=P0(op,Gs),Gs=P0(ap,Gs);const eO=Gs>-1?1:0;eO&&(Gs*=XZ/gi),Ut.glyphOffsetArray.length>=ep.MAX_GLYPHS&&Tt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cn.sortKey!==void 0&&Ut.addToSortKeyRanges(Ut.symbolInstances.length,Cn.sortKey);const aK=$3(Ai,Cn,Us),[lK,cK]=function(Ki,Yo){const Gu=Ki.length,Hs=Yo?.values;if(Hs?.length>0)for(let Hu=0;Hu<Hs.length;Hu+=2){const va=Hs[Hu+1];Ki.emplaceBack(c.aE[Hs[Hu]],va[0],va[1])}return[Gu,Ki.length]}(Ut.textAnchorOffsets,aK);Ut.symbolInstances.emplaceBack(Br.x,Br.y,ul.right>=0?ul.right:-1,ul.center>=0?ul.center:-1,ul.left>=0?ul.left:-1,ul.vertical||-1,SE,CE,X3,QZ,eK,tK,rK,nK,iK,oK,sK,yi,K3,Y3,W3,Z3,eO,0,so,Gs,lK,cK)}(h,Qt,dr,u,f,b,It,h.layers[0],h.collisionBoxArray,a.index,a.sourceLayerIndex,h.index,Ee,[et,et,et,et],Mt,O,Oe,at,wt,se,a,S,N,B,C)};if(Rt==="line")for(const dr of k3(a.geometry,0,0,Ke,Ke)){const Qt=$u(dr,ht),Ut=GZ(Qt,Ne,gt,u.vertical||ce,f,24,Ue,h.overscaling,Ke);for(const Br of Ut)ce&&KZ(h,ce.text,Zt,Br)||sr(Qt,Br)}else if(Rt==="line-center"){for(const dr of a.geometry)if(dr.length>1){const Qt=$u(dr,ht),Ut=UZ(Qt,gt,u.vertical||ce,f,24,Ue);Ut&&sr(Qt,Ut)}}else if(a.type==="Polygon")for(const dr of Su(a.geometry,0)){const Qt=JZ(dr,16);sr($u(dr[0],ht,!0),new gc(Qt.x,Qt.y,0))}else if(a.type==="LineString")for(const dr of a.geometry){const Qt=$u(dr,ht);sr(Qt,new gc(Qt[0].x,Qt[0].y,0))}else if(a.type==="Point")for(const dr of a.geometry)for(const Qt of dr)sr([Qt],new gc(Qt.x,Qt.y,0))}function V3(h,a,u,f,b,S,C,I,O,N,B,G,Q,ie,se){const ce=function(Ue,Oe,Ne,et,at,gt,Mt,wt){const Rt=et.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,Zt=[];for(const At of Oe.positionedLines)for(const It of At.positionedGlyphs){if(!It.rect)continue;const ht=It.rect||{};let sr=4,dr=!0,Qt=1,Ut=0;const Br=(at||wt)&&It.vertical,Nn=It.metrics.advance*It.scale/2;if(wt&&Oe.verticalizable&&(Ut=At.lineOffset/2-(It.imageName?-(gi-It.metrics.width*It.scale)/2:(It.scale-1)*gi)),It.imageName){const bi=Mt[It.imageName];dr=bi.sdf,Qt=bi.pixelRatio,sr=1/Qt}const li=at?[It.x+Nn,It.y]:[0,0];let qi=at?[0,0]:[It.x+Nn+Ne[0],It.y+Ne[1]-Ut],Zo=[0,0];Br&&(Zo=qi,qi=[0,0]);const bo=It.metrics.isDoubleResolution?2:1,Ai=(It.metrics.left-sr)*It.scale-Nn+qi[0],On=(-It.metrics.top-sr)*It.scale+qi[1],yi=Ai+ht.w/bo*It.scale/Qt,Ri=On+ht.h/bo*It.scale/Qt,Ii=new p(Ai,On),so=new p(yi,On),Ko=new p(Ai,Ri),_i=new p(yi,Ri);if(Br){const bi=new p(-Nn,Nn- -17),vi=-Math.PI/2,ei=12-Nn,Cn=new p(22-ei,-(It.imageName?ei:0)),Vs=new p(...Zo);Ii._rotateAround(vi,bi)._add(Cn)._add(Vs),so._rotateAround(vi,bi)._add(Cn)._add(Vs),Ko._rotateAround(vi,bi)._add(Cn)._add(Vs),_i._rotateAround(vi,bi)._add(Cn)._add(Vs)}if(Rt){const bi=Math.sin(Rt),vi=Math.cos(Rt),ei=[vi,-bi,bi,vi];Ii._matMult(ei),so._matMult(ei),Ko._matMult(ei),_i._matMult(ei)}const vo=new p(0,0),ci=new p(0,0);Zt.push({tl:Ii,tr:so,bl:Ko,br:_i,tex:ht,writingMode:Oe.writingMode,glyphOffset:li,sectionIndex:It.sectionIndex,isSDF:dr,pixelOffsetTL:vo,pixelOffsetBR:ci,minFontScaleX:0,minFontScaleY:0})}return Zt}(0,u,I,b,S,C,f,h.allowVerticalPlacement),pe=h.textSizeData;let Ee=null;pe.kind==="source"?(Ee=[cl*b.layout.get("text-size").evaluate(C,{})],Ee[0]>fc&&Tt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):pe.kind==="composite"&&(Ee=[cl*ie.compositeTextSizes[0].evaluate(C,{},se),cl*ie.compositeTextSizes[1].evaluate(C,{},se)],(Ee[0]>fc||Ee[1]>fc)&&Tt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,ce,Ee,I,S,C,N,a,O.lineStartIndex,O.lineLength,Q,se);for(const Ue of B)G[Ue]=h.text.placedSymbolArray.length-1;return 4*ce.length}function U3(h){for(const a in h)return h[a];return null}function KZ(h,a,u,f){const b=h.compareText;if(a in b){const S=b[a];for(let C=S.length-1;C>=0;C--)if(f.dist(S[C])<u)return!0}else b[a]=[];return b[a].push(f),!1}const G3=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _E{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(a,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const b=f>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);const S=G3[15&f];if(!S)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(a,2,1),[I]=new Uint32Array(a,4,1);return new _E(I,C,S,a)}constructor(a,u=64,f=Float64Array,b){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const S=G3.indexOf(this.ArrayType),C=2*a*this.ArrayType.BYTES_PER_ELEMENT,I=a*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-I%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${f}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+O,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+C+I+O),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+O,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=a)}add(a,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=a,this.coords[this._pos++]=u,f}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return bE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,u,f,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:C,nodeSize:I}=this,O=[0,S.length-1,0],N=[];for(;O.length;){const B=O.pop()||0,G=O.pop()||0,Q=O.pop()||0;if(G-Q<=I){for(let pe=Q;pe<=G;pe++){const Ee=C[2*pe],Ue=C[2*pe+1];Ee>=a&&Ee<=f&&Ue>=u&&Ue<=b&&N.push(S[pe])}continue}const ie=Q+G>>1,se=C[2*ie],ce=C[2*ie+1];se>=a&&se<=f&&ce>=u&&ce<=b&&N.push(S[ie]),(B===0?a<=se:u<=ce)&&(O.push(Q),O.push(ie-1),O.push(1-B)),(B===0?f>=se:b>=ce)&&(O.push(ie+1),O.push(G),O.push(1-B))}return N}within(a,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:S,nodeSize:C}=this,I=[0,b.length-1,0],O=[],N=f*f;for(;I.length;){const B=I.pop()||0,G=I.pop()||0,Q=I.pop()||0;if(G-Q<=C){for(let pe=Q;pe<=G;pe++)J3(S[2*pe],S[2*pe+1],a,u)<=N&&O.push(b[pe]);continue}const ie=Q+G>>1,se=S[2*ie],ce=S[2*ie+1];J3(se,ce,a,u)<=N&&O.push(b[ie]),(B===0?a-f<=se:u-f<=ce)&&(I.push(Q),I.push(ie-1),I.push(1-B)),(B===0?a+f>=se:u+f>=ce)&&(I.push(ie+1),I.push(G),I.push(1-B))}return O}}function bE(h,a,u,f,b,S){if(b-f<=u)return;const C=f+b>>1;H3(h,a,C,f,b,S),bE(h,a,u,f,C-1,1-S),bE(h,a,u,C+1,b,1-S)}function H3(h,a,u,f,b,S){for(;b>f;){if(b-f>600){const N=b-f+1,B=u-f+1,G=Math.log(N),Q=.5*Math.exp(2*G/3),ie=.5*Math.sqrt(G*Q*(N-Q)/N)*(B-N/2<0?-1:1);H3(h,a,u,Math.max(f,Math.floor(u-B*Q/N+ie)),Math.min(b,Math.floor(u+(N-B)*Q/N+ie)),S)}const C=a[2*u+S];let I=f,O=b;for(Zm(h,a,f,u),a[2*b+S]>C&&Zm(h,a,f,b);I<O;){for(Zm(h,a,I,O),I++,O--;a[2*I+S]<C;)I++;for(;a[2*O+S]>C;)O--}a[2*f+S]===C?Zm(h,a,f,O):(O++,Zm(h,a,O,b)),O<=u&&(f=O+1),u<=O&&(b=O-1)}}function Zm(h,a,u,f){vE(h,u,f),vE(a,2*u,2*f),vE(a,2*u+1,2*f+1)}function vE(h,a,u){const f=h[a];h[a]=h[u],h[u]=f}function J3(h,a,u,f){const b=h-u,S=a-f;return b*b+S*S}var xE;c.cx=void 0,(xE=c.cx||(c.cx={})).create="create",xE.load="load",xE.fullLoad="fullLoad";let C0=null,Km=[];const wE=1e3/60,EE="loadTime",TE="fullLoadTime",YZ={mark(h){performance.mark(h)},frame(h){const a=h;C0!=null&&Km.push(a-C0),C0=a},clearMetrics(){C0=null,Km=[],performance.clearMeasures(EE),performance.clearMeasures(TE);for(const h in c.cx)performance.clearMarks(c.cx[h])},getPerformanceMetrics(){performance.measure(EE,c.cx.create,c.cx.load),performance.measure(TE,c.cx.create,c.cx.fullLoad);const h=performance.getEntriesByName(EE)[0].duration,a=performance.getEntriesByName(TE)[0].duration,u=Km.length,f=1/(Km.reduce((S,C)=>S+C,0)/u/1e3),b=Km.filter(S=>S>wE).reduce((S,C)=>S+(C-wE)/wE,0);return{loadTime:h,fullLoadTime:a,fps:f,percentDroppedFrames:b/(u+b)*100,totalFrames:u}}};c.$=Ke,c.A=W,c.B=function([h,a,u]){return a+=90,a*=Math.PI/180,u*=Math.PI/180,{x:h*Math.cos(a)*Math.sin(u),y:h*Math.sin(a)*Math.sin(u),z:h*Math.cos(u)}},c.C=bs,c.D=Gt,c.E=Ot,c.F=yn,c.G=Du,c.H=function(h){if(Yt==null){const a=h.navigator?h.navigator.userAgent:null;Yt=!!h.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Yt},c.I=oE,c.J=class{constructor(h,a){this.target=h,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new qZ(()=>this.process()),this.subscription=yr(this.target,"message",u=>this.receive(u),!1),this.globalScope=Dt(self)?h:window}registerMessageHandler(h,a){this.messageHandlers[h]=a}sendAsync(h,a){return new Promise((u,f)=>{const b=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=a?yr(a.signal,"abort",()=>{S?.unsubscribe(),delete this.resolveRejects[b];const O={id:b,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(O)},$Z):null;this.resolveRejects[b]={resolve:O=>{S?.unsubscribe(),u(O)},reject:O=>{S?.unsubscribe(),f(O)}};const C=[],I=Object.assign(Object.assign({},h),{id:b,sourceMapId:this.mapId,origin:location.origin,data:oc(h.data,C)});this.target.postMessage(I,{transfer:C})})}receive(h){const a=h.data,u=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[u];const f=this.abortControllers[u];return delete this.abortControllers[u],void(f&&f.abort())}if(Dt(self)||a.mustQueue)return this.tasks[u]=a,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,a)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),a=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(h,a)}processTask(h,a){return s(this,void 0,void 0,function*(){if(a.type==="<response>"){const b=this.resolveRejects[h];return delete this.resolveRejects[h],b?void(a.error?b.reject(il(a.error)):b.resolve(il(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=il(a.data),f=new AbortController;this.abortControllers[h]=f;try{const b=yield this.messageHandlers[a.type](a.sourceMapId,u,f);this.completeTask(h,null,b)}catch(b){this.completeTask(h,b)}})}completeTask(h,a,u){const f=[];delete this.abortControllers[h];const b={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?oc(a):null,data:oc(u,f)};this.target.postMessage(b,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=de,c.L=function(){var h=new W(16);return W!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},c.M=function(h,a,u){var f,b,S,C,I,O,N,B,G,Q,ie,se,ce=u[0],pe=u[1],Ee=u[2];return a===h?(h[12]=a[0]*ce+a[4]*pe+a[8]*Ee+a[12],h[13]=a[1]*ce+a[5]*pe+a[9]*Ee+a[13],h[14]=a[2]*ce+a[6]*pe+a[10]*Ee+a[14],h[15]=a[3]*ce+a[7]*pe+a[11]*Ee+a[15]):(b=a[1],S=a[2],C=a[3],I=a[4],O=a[5],N=a[6],B=a[7],G=a[8],Q=a[9],ie=a[10],se=a[11],h[0]=f=a[0],h[1]=b,h[2]=S,h[3]=C,h[4]=I,h[5]=O,h[6]=N,h[7]=B,h[8]=G,h[9]=Q,h[10]=ie,h[11]=se,h[12]=f*ce+I*pe+G*Ee+a[12],h[13]=b*ce+O*pe+Q*Ee+a[13],h[14]=S*ce+N*pe+ie*Ee+a[14],h[15]=C*ce+B*pe+se*Ee+a[15]),h},c.N=function(h,a,u){var f=u[0],b=u[1],S=u[2];return h[0]=a[0]*f,h[1]=a[1]*f,h[2]=a[2]*f,h[3]=a[3]*f,h[4]=a[4]*b,h[5]=a[5]*b,h[6]=a[6]*b,h[7]=a[7]*b,h[8]=a[8]*S,h[9]=a[9]*S,h[10]=a[10]*S,h[11]=a[11]*S,h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},c.O=function(h,a,u){var f=a[0],b=a[1],S=a[2],C=a[3],I=a[4],O=a[5],N=a[6],B=a[7],G=a[8],Q=a[9],ie=a[10],se=a[11],ce=a[12],pe=a[13],Ee=a[14],Ue=a[15],Oe=u[0],Ne=u[1],et=u[2],at=u[3];return h[0]=Oe*f+Ne*I+et*G+at*ce,h[1]=Oe*b+Ne*O+et*Q+at*pe,h[2]=Oe*S+Ne*N+et*ie+at*Ee,h[3]=Oe*C+Ne*B+et*se+at*Ue,h[4]=(Oe=u[4])*f+(Ne=u[5])*I+(et=u[6])*G+(at=u[7])*ce,h[5]=Oe*b+Ne*O+et*Q+at*pe,h[6]=Oe*S+Ne*N+et*ie+at*Ee,h[7]=Oe*C+Ne*B+et*se+at*Ue,h[8]=(Oe=u[8])*f+(Ne=u[9])*I+(et=u[10])*G+(at=u[11])*ce,h[9]=Oe*b+Ne*O+et*Q+at*pe,h[10]=Oe*S+Ne*N+et*ie+at*Ee,h[11]=Oe*C+Ne*B+et*se+at*Ue,h[12]=(Oe=u[12])*f+(Ne=u[13])*I+(et=u[14])*G+(at=u[15])*ce,h[13]=Oe*b+Ne*O+et*Q+at*pe,h[14]=Oe*S+Ne*N+et*ie+at*Ee,h[15]=Oe*C+Ne*B+et*se+at*Ue,h},c.P=p,c.Q=function(h,a){const u={};for(let f=0;f<a.length;f++){const b=a[f];b in h&&(u[b]=h[b])}return u},c.R=_o,c.S=mc,c.T=Ww,c.U=T3,c.V=E3,c.W=z,c.X=j,c.Y=Vr,c.Z=Wo,c._=s,c.a=oe,c.a$=Ie,c.a0=function(h,a){var u,f,b,S;if(!h)return a??{};if(!a)return h;const C=Object.assign({},h);if(a.removeAll&&(C.removeAll=!0),a.remove){const I=new Set(C.remove?C.remove.concat(a.remove):a.remove);C.remove=Array.from(I.values())}if(a.add){const I=C.add?C.add.concat(a.add):a.add,O=new Map(I.map(N=>[N.id,N]));C.add=Array.from(O.values())}if(a.update){const I=new Map((u=C.update)===null||u===void 0?void 0:u.map(O=>[O.id,O]));for(const O of a.update){const N=(f=I.get(O.id))!==null&&f!==void 0?f:{id:O.id};O.newGeometry&&(N.newGeometry=O.newGeometry),O.addOrUpdateProperties&&(N.addOrUpdateProperties=((b=N.addOrUpdateProperties)!==null&&b!==void 0?b:[]).concat(O.addOrUpdateProperties)),O.removeProperties&&(N.removeProperties=((S=N.removeProperties)!==null&&S!==void 0?S:[]).concat(O.removeProperties)),O.removeAllProperties&&(N.removeAllProperties=!0),I.set(O.id,N)}C.update=Array.from(I.values())}return C},c.a1=Jm,c.a2=Vu,c.a3=25,c.a4=mE,c.a5=h=>{const a=window.document.createElement("video");return a.muted=!0,new Promise(u=>{a.onloadstart=()=>{u(a)};for(const f of h){const b=window.document.createElement("source");Je(f)||(a.crossOrigin="Anonymous"),b.src=f,a.appendChild(b)}})},c.a6=yt,c.a7=function(){return ar++},c.a8=H,c.a9=ep,c.aA=function(h){let a=1/0,u=1/0,f=-1/0,b=-1/0;for(const S of h)a=Math.min(a,S.x),u=Math.min(u,S.y),f=Math.max(f,S.x),b=Math.max(b,S.y);return[a,u,f,b]},c.aB=gi,c.aC=Ze,c.aD=function(h,a,u,f,b=!1){if(!u[0]&&!u[1])return[0,0];const S=b?f==="map"?-h.bearingInRadians:0:f==="viewport"?h.bearingInRadians:0;if(S){const C=Math.sin(S),I=Math.cos(S);u=[u[0]*I-u[1]*C,u[0]*C+u[1]*I]}return[b?u[0]:Ze(a,u[0],h.zoom),b?u[1]:Ze(a,u[1],h.zoom)]},c.aF=lE,c.aG=yE,c.aH=aE,c.aI=_E,c.aJ=Un,c.aK=g0,c.aL=Ae,c.aM=vr,c.aN=hn,c.aO=er,c.aP=lr,c.aQ=C3,c.aR=he,c.aS=K,c.aT=function(h){var a=new W(3);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a},c.aU=function(h,a,u){return h[0]=a[0]-u[0],h[1]=a[1]-u[1],h[2]=a[2]-u[2],h},c.aV=function(h,a){var u=a[0],f=a[1],b=a[2],S=u*u+f*f+b*b;return S>0&&(S=1/Math.sqrt(S)),h[0]=a[0]*S,h[1]=a[1]*S,h[2]=a[2]*S,h},c.aW=ue,c.aX=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]},c.aY=function(h,a,u){return h[0]=a[0]*u[0],h[1]=a[1]*u[1],h[2]=a[2]*u[2],h[3]=a[3]*u[3],h},c.aZ=Z,c.a_=function(h,a,u){const f=a[0]*u[0]+a[1]*u[1]+a[2]*u[2];return f===0?null:(-(h[0]*u[0]+h[1]*u[1]+h[2]*u[2])-u[3])/f},c.aa=tl,c.ab=$s,c.ac=I3,c.ad=function(h){const a={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,b,S)=>{const C=b||S;return a[f]=!C||C.toLowerCase(),""}),a["max-age"]){const u=parseInt(a["max-age"],10);isNaN(u)?delete a["max-age"]:a["max-age"]=u}return a},c.ae=ur,c.af=function(h){return Math.pow(2,h)},c.ag=te,c.ah=dt,c.ai=85.051129,c.aj=S3,c.ak=function(h){return Math.log(h)/Math.LN2},c.al=function(h){var a=h[0],u=h[1];return a*a+u*u},c.am=function(h,a){const u=[];for(const f in h)f in a||u.push(f);return u},c.an=function(h,a){let u=0,f=0;if(h.kind==="constant")f=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:b,minZoom:S,maxZoom:C}=h,I=b?dt(Pi.interpolationFactor(b,a,S,C),0,1):0;h.kind==="camera"?f=bs.number(h.minSize,h.maxSize,I):u=I}return{uSizeT:u,uSize:f}},c.ap=function(h,{uSize:a,uSizeT:u},{lowerSize:f,upperSize:b}){return h.kind==="source"?f/cl:h.kind==="composite"?bs.number(f/cl,b/cl,u):a},c.aq=function(h,a){var u=a[0],f=a[1],b=a[2],S=a[3],C=a[4],I=a[5],O=a[6],N=a[7],B=a[8],G=a[9],Q=a[10],ie=a[11],se=a[12],ce=a[13],pe=a[14],Ee=a[15],Ue=u*I-f*C,Oe=u*O-b*C,Ne=u*N-S*C,et=f*O-b*I,at=f*N-S*I,gt=b*N-S*O,Mt=B*ce-G*se,wt=B*pe-Q*se,Rt=B*Ee-ie*se,Zt=G*pe-Q*ce,At=G*Ee-ie*ce,It=Q*Ee-ie*pe,ht=Ue*It-Oe*At+Ne*Zt+et*Rt-at*wt+gt*Mt;return ht?(h[0]=(I*It-O*At+N*Zt)*(ht=1/ht),h[1]=(b*At-f*It-S*Zt)*ht,h[2]=(ce*gt-pe*at+Ee*et)*ht,h[3]=(Q*at-G*gt-ie*et)*ht,h[4]=(O*Rt-C*It-N*wt)*ht,h[5]=(u*It-b*Rt+S*wt)*ht,h[6]=(pe*Ne-se*gt-Ee*Oe)*ht,h[7]=(B*gt-Q*Ne+ie*Oe)*ht,h[8]=(C*At-I*Rt+N*Mt)*ht,h[9]=(f*Rt-u*At-S*Mt)*ht,h[10]=(se*at-ce*Ne+Ee*Ue)*ht,h[11]=(G*Ne-B*at-ie*Ue)*ht,h[12]=(I*wt-C*Zt-O*Mt)*ht,h[13]=(u*Zt-f*wt+b*Mt)*ht,h[14]=(ce*Oe-se*et-pe*Ue)*ht,h[15]=(B*et-G*Oe+Q*Ue)*ht,h):null},c.ar=xe,c.as=function(h){var a=h[0],u=h[1];return Math.sqrt(a*a+u*u)},c.at=function(h){return h[0]=0,h[1]=0,h},c.au=function(h,a,u){return h[0]=a[0]*u,h[1]=a[1]*u,h},c.av=cE,c.aw=ee,c.ax=function(h,a,u,f){const b=a.y-h.y,S=a.x-h.x,C=f.y-u.y,I=f.x-u.x,O=C*S-I*b;if(O===0)return null;const N=(I*(h.y-u.y)-C*(h.x-u.x))/O;return new p(h.x+N*S,h.y+N*b)},c.ay=k3,c.az=w5,c.b=Bt,c.b$=class extends w{},c.b0=function(h,a,u){return h[0]=a[0]*u,h[1]=a[1]*u,h[2]=a[2]*u,h[3]=a[3]*u,h},c.b1=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]+h[3]},c.b2=A3,c.b3=tp,c.b4=function(h,a,u,f,b){var S=1/Math.tan(a/2);if(h[0]=S/u,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=S,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,b!=null&&b!==1/0){var C=1/(f-b);h[10]=(b+f)*C,h[14]=2*b*f*C}else h[10]=-1,h[14]=-2*f;return h},c.b5=function(h){var a=new W(16);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],a[9]=h[9],a[10]=h[10],a[11]=h[11],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15],a},c.b6=function(h,a,u){var f=Math.sin(u),b=Math.cos(u),S=a[0],C=a[1],I=a[2],O=a[3],N=a[4],B=a[5],G=a[6],Q=a[7];return a!==h&&(h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[0]=S*b+N*f,h[1]=C*b+B*f,h[2]=I*b+G*f,h[3]=O*b+Q*f,h[4]=N*b-S*f,h[5]=B*b-C*f,h[6]=G*b-I*f,h[7]=Q*b-O*f,h},c.b7=function(h,a,u){var f=Math.sin(u),b=Math.cos(u),S=a[4],C=a[5],I=a[6],O=a[7],N=a[8],B=a[9],G=a[10],Q=a[11];return a!==h&&(h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[4]=S*b+N*f,h[5]=C*b+B*f,h[6]=I*b+G*f,h[7]=O*b+Q*f,h[8]=N*b-S*f,h[9]=B*b-C*f,h[10]=G*b-I*f,h[11]=Q*b-O*f,h},c.b8=function(){const h=new Float32Array(16);return te(h),h},c.b9=function(){const h=new Float64Array(16);return te(h),h},c.bA=function(h,a){const u=bt(h,360),f=bt(a,360),b=f-u,S=f>u?b-360:b+360;return Math.abs(b)<Math.abs(S)?b:S},c.bB=function(h){return h[0]=0,h[1]=0,h[2]=0,h},c.bC=function(h,a,u,f){const b=Math.sqrt(h*h+a*a),S=Math.sqrt(u*u+f*f);h/=b,a/=b,u/=S,f/=S;const C=Math.acos(h*u+a*f);return-a*u+h*f>0?C:-C},c.bD=function(h,a){const u=bt(h,2*Math.PI),f=bt(a,2*Math.PI);return Math.min(Math.abs(u-f),Math.abs(u-f+2*Math.PI),Math.abs(u-f-2*Math.PI))},c.bE=function(){const h={},a=$e.$version;for(const u in $e.$root){const f=$e.$root[u];if(f.required){let b=null;b=u==="version"?a:f.type==="array"?[]:{},b!=null&&(h[u]=b)}}return h},c.bF=Nd,c.bG=Le,c.bH=function h(a,u){if(Array.isArray(a)){if(!Array.isArray(u)||a.length!==u.length)return!1;for(let f=0;f<a.length;f++)if(!h(a[f],u[f]))return!1;return!0}if(typeof a=="object"&&a!==null&&u!==null){if(typeof u!="object"||Object.keys(a).length!==Object.keys(u).length)return!1;for(const f in a)if(!h(a[f],u[f]))return!1;return!0}return a===u},c.bI=function(h){h=h.slice();const a=Object.create(null);for(let u=0;u<h.length;u++)a[h[u].id]=h[u];for(let u=0;u<h.length;u++)"ref"in h[u]&&(h[u]=cr(h[u],a[h[u].ref]));return h},c.bJ=function(h){if(h.type==="custom")return new BZ(h);switch(h.type){case"background":return new FZ(h);case"circle":return new wW(h);case"color-relief":return new AW(h);case"fill":return new VW(h);case"fill-extrusion":return new eZ(h);case"heatmap":return new TW(h);case"hillshade":return new CW(h);case"line":return new aZ(h);case"raster":return new jZ(h);case"symbol":return new x0(h)}},c.bK=pt,c.bL=function(h,a){if(!h)return[{command:"setStyle",args:[a]}];let u=[];try{if(!Nt(h.version,a.version))return[{command:"setStyle",args:[a]}];Nt(h.center,a.center)||u.push({command:"setCenter",args:[a.center]}),Nt(h.state,a.state)||u.push({command:"setGlobalState",args:[a.state]}),Nt(h.centerAltitude,a.centerAltitude)||u.push({command:"setCenterAltitude",args:[a.centerAltitude]}),Nt(h.zoom,a.zoom)||u.push({command:"setZoom",args:[a.zoom]}),Nt(h.bearing,a.bearing)||u.push({command:"setBearing",args:[a.bearing]}),Nt(h.pitch,a.pitch)||u.push({command:"setPitch",args:[a.pitch]}),Nt(h.roll,a.roll)||u.push({command:"setRoll",args:[a.roll]}),Nt(h.sprite,a.sprite)||u.push({command:"setSprite",args:[a.sprite]}),Nt(h.glyphs,a.glyphs)||u.push({command:"setGlyphs",args:[a.glyphs]}),Nt(h.transition,a.transition)||u.push({command:"setTransition",args:[a.transition]}),Nt(h.light,a.light)||u.push({command:"setLight",args:[a.light]}),Nt(h.terrain,a.terrain)||u.push({command:"setTerrain",args:[a.terrain]}),Nt(h.sky,a.sky)||u.push({command:"setSky",args:[a.sky]}),Nt(h.projection,a.projection)||u.push({command:"setProjection",args:[a.projection]});const f={},b=[];(function(C,I,O,N){let B;for(B in I=I||{},C=C||{})Object.prototype.hasOwnProperty.call(C,B)&&(Object.prototype.hasOwnProperty.call(I,B)||ut(B,O,N));for(B in I)Object.prototype.hasOwnProperty.call(I,B)&&(Object.prototype.hasOwnProperty.call(C,B)?Nt(C[B],I[B])||(C[B].type==="geojson"&&I[B].type==="geojson"&&Cr(C,I,B)?Ht(O,{command:"setGeoJSONSourceData",args:[B,I[B].data]}):Lt(B,I,O,N)):_r(B,I,O))})(h.sources,a.sources,b,f);const S=[];h.layers&&h.layers.forEach(C=>{"source"in C&&f[C.source]?u.push({command:"removeLayer",args:[C.id]}):S.push(C)}),u=u.concat(b),function(C,I,O){I=I||[];const N=(C=C||[]).map(jt),B=I.map(jt),G=C.reduce(Pr,{}),Q=I.reduce(Pr,{}),ie=N.slice(),se=Object.create(null);let ce,pe,Ee,Ue,Oe;for(let Ne=0,et=0;Ne<N.length;Ne++)ce=N[Ne],Object.prototype.hasOwnProperty.call(Q,ce)?et++:(Ht(O,{command:"removeLayer",args:[ce]}),ie.splice(ie.indexOf(ce,et),1));for(let Ne=0,et=0;Ne<B.length;Ne++)ce=B[B.length-1-Ne],ie[ie.length-1-Ne]!==ce&&(Object.prototype.hasOwnProperty.call(G,ce)?(Ht(O,{command:"removeLayer",args:[ce]}),ie.splice(ie.lastIndexOf(ce,ie.length-et),1)):et++,Ue=ie[ie.length-Ne],Ht(O,{command:"addLayer",args:[Q[ce],Ue]}),ie.splice(ie.length-Ne,0,ce),se[ce]=!0);for(let Ne=0;Ne<B.length;Ne++)if(ce=B[Ne],pe=G[ce],Ee=Q[ce],!se[ce]&&!Nt(pe,Ee))if(Nt(pe.source,Ee.source)&&Nt(pe["source-layer"],Ee["source-layer"])&&Nt(pe.type,Ee.type)){for(Oe in Kt(pe.layout,Ee.layout,O,ce,null,"setLayoutProperty"),Kt(pe.paint,Ee.paint,O,ce,null,"setPaintProperty"),Nt(pe.filter,Ee.filter)||Ht(O,{command:"setFilter",args:[ce,Ee.filter]}),Nt(pe.minzoom,Ee.minzoom)&&Nt(pe.maxzoom,Ee.maxzoom)||Ht(O,{command:"setLayerZoomRange",args:[ce,Ee.minzoom,Ee.maxzoom]}),pe)Object.prototype.hasOwnProperty.call(pe,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?Kt(pe[Oe],Ee[Oe],O,ce,Oe.slice(6),"setPaintProperty"):Nt(pe[Oe],Ee[Oe])||Ht(O,{command:"setLayerProperty",args:[ce,Oe,Ee[Oe]]}));for(Oe in Ee)Object.prototype.hasOwnProperty.call(Ee,Oe)&&!Object.prototype.hasOwnProperty.call(pe,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?Kt(pe[Oe],Ee[Oe],O,ce,Oe.slice(6),"setPaintProperty"):Nt(pe[Oe],Ee[Oe])||Ht(O,{command:"setLayerProperty",args:[ce,Oe,Ee[Oe]]}))}else Ht(O,{command:"removeLayer",args:[ce]}),Ue=ie[ie.lastIndexOf(ce)+1],Ht(O,{command:"addLayer",args:[Ee,Ue]})}(S,a.layers,u)}catch(f){console.warn("Unable to compute style diff:",f),u=[{command:"setStyle",args:[a]}]}return u},c.bM=function(h){const a=[],u=h.id;return u===void 0&&a.push({message:`layers.${u}: missing required property "id"`}),h.render===void 0&&a.push({message:`layers.${u}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&a.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),a},c.bN=_t,c.bO=Ve,c.bP=class extends Zi{constructor(h,a){super(h,a),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},c.bQ=ai,c.bR=class extends Zi{constructor(h,a){super(h,a),this.current=Po}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let a=1;a<16;a++)if(h[a]!==this.current[a]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},c.bS=Xn,c.bT=class extends Zi{constructor(h,a){super(h,a),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},c.bU=class extends Zi{constructor(h,a){super(h,a),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},c.bV=X,c.bW=function(h,a){var u=Math.sin(a),f=Math.cos(a);return h[0]=f,h[1]=u,h[2]=0,h[3]=-u,h[4]=f,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},c.bX=function(h,a,u){var f=a[0],b=a[1],S=a[2];return h[0]=f*u[0]+b*u[3]+S*u[6],h[1]=f*u[1]+b*u[4]+S*u[7],h[2]=f*u[2]+b*u[5]+S*u[8],h},c.bY=function(h,a,u,f,b,S,C){var I=1/(a-u),O=1/(f-b),N=1/(S-C);return h[0]=-2*I,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*O,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*N,h[11]=0,h[12]=(a+u)*I,h[13]=(b+f)*O,h[14]=(C+S)*N,h[15]=1,h},c.bZ=class extends Zi{constructor(h,a){super(h,a),this.current=new Array}set(h){if(h!=this.current){this.current=h;const a=new Float32Array(4*h.length);for(let u=0;u<h.length;u++)a[4*u]=h[u].r,a[4*u+1]=h[u].g,a[4*u+2]=h[u].b,a[4*u+3]=h[u].a;this.gl.uniform4fv(this.location,a)}}},c.b_=class extends Zi{constructor(h,a){super(h,a),this.current=new Array}set(h){if(h!=this.current){this.current=h;const a=new Float32Array(h);this.gl.uniform1fv(this.location,a)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(h,a,u){const f=new Float64Array(4);return ve(f,h,a-90,u),f},c.bc=function(h,a,u,f){var b,S,C,I,O,N=a[0],B=a[1],G=a[2],Q=a[3],ie=u[0],se=u[1],ce=u[2],pe=u[3];return(S=N*ie+B*se+G*ce+Q*pe)<0&&(S=-S,ie=-ie,se=-se,ce=-ce,pe=-pe),1-S>$?(b=Math.acos(S),C=Math.sin(b),I=Math.sin((1-f)*b)/C,O=Math.sin(f*b)/C):(I=1-f,O=f),h[0]=I*N+O*ie,h[1]=I*B+O*se,h[2]=I*G+O*ce,h[3]=I*Q+O*pe,h},c.bd=function(h){const a=new Float64Array(9);var u,f,b,S,C,I,O,N,B,G,Q,ie,se,ce,pe,Ee,Ue,Oe;G=(b=(f=h)[0])*(O=b+b),Q=(S=f[1])*O,se=(C=f[2])*O,ce=C*(N=S+S),Ee=(I=f[3])*O,Ue=I*N,Oe=I*(B=C+C),(u=a)[0]=1-(ie=S*N)-(pe=C*B),u[3]=Q-Oe,u[6]=se+Ue,u[1]=Q+Oe,u[4]=1-G-pe,u[7]=ce-Ee,u[2]=se-Ue,u[5]=ce+Ee,u[8]=1-G-ie;const Ne=lr(-Math.asin(dt(a[2],-1,1)));let et,at;return Math.hypot(a[5],a[8])<.001?(et=0,at=-lr(Math.atan2(a[3],a[4]))):(et=lr(a[5]===0&&a[8]===0?0:Math.atan2(a[5],a[8])),at=lr(a[1]===0&&a[0]===0?0:Math.atan2(a[1],a[0]))),{roll:et,pitch:Ne+90,bearing:at}},c.be=function(h,a){return h.roll==a.roll&&h.pitch==a.pitch&&h.bearing==a.bearing},c.bf=Or,c.bg=ya,c.bh=Kd,c.bi=qm,c.bj=Zd,c.bk=qe,c.bl=kt,c.bm=zi,c.bn=function(h,a,u,f,b){return qe(f,b,dt((h-a)/(u-a),0,1))},c.bo=bt,c.bp=function(){return new Float64Array(3)},c.bq=function(h,a,u,f){return h[0]=a[0]+u[0]*f,h[1]=a[1]+u[1]*f,h[2]=a[2]+u[2]*f,h},c.br=ve,c.bs=function(h,a,u){var f=u[0],b=u[1],S=u[2],C=u[3],I=a[0],O=a[1],N=a[2],B=b*N-S*O,G=S*I-f*N,Q=f*O-b*I;return h[0]=I+C*(B+=B)+b*(Q+=Q)-S*(G+=G),h[1]=O+C*G+S*B-f*Q,h[2]=N+C*Q+f*G-b*B,h},c.bt=function(h,a,u){const f=(b=[h[0],h[1],h[2],a[0],a[1],a[2],u[0],u[1],u[2]])[0]*((B=b[8])*(C=b[4])-(I=b[5])*(N=b[7]))+b[1]*(-B*(S=b[3])+I*(O=b[6]))+b[2]*(N*S-C*O);var b,S,C,I,O,N,B;if(f===0)return null;const G=ue([],[a[0],a[1],a[2]],[u[0],u[1],u[2]]),Q=ue([],[u[0],u[1],u[2]],[h[0],h[1],h[2]]),ie=ue([],[h[0],h[1],h[2]],[a[0],a[1],a[2]]),se=he([],G,-h[3]);return K(se,se,he([],Q,-a[3])),K(se,se,he([],ie,-u[3])),he(se,se,1/f),se},c.bu=pE,c.bv=function(){return new Float64Array(4)},c.bw=function(h,a,u,f){var b=[],S=[];return b[0]=a[0]-u[0],b[1]=a[1]-u[1],b[2]=a[2]-u[2],S[0]=b[0]*Math.cos(f)-b[1]*Math.sin(f),S[1]=b[0]*Math.sin(f)+b[1]*Math.cos(f),S[2]=b[2],h[0]=S[0]+u[0],h[1]=S[1]+u[1],h[2]=S[2]+u[2],h},c.bx=function(h,a,u,f){var b=[],S=[];return b[0]=a[0]-u[0],b[1]=a[1]-u[1],b[2]=a[2]-u[2],S[0]=b[0],S[1]=b[1]*Math.cos(f)-b[2]*Math.sin(f),S[2]=b[1]*Math.sin(f)+b[2]*Math.cos(f),h[0]=S[0]+u[0],h[1]=S[1]+u[1],h[2]=S[2]+u[2],h},c.by=function(h,a,u,f){var b=[],S=[];return b[0]=a[0]-u[0],b[1]=a[1]-u[1],b[2]=a[2]-u[2],S[0]=b[2]*Math.sin(f)+b[0]*Math.cos(f),S[1]=b[1],S[2]=b[2]*Math.cos(f)-b[0]*Math.sin(f),h[0]=S[0]+u[0],h[1]=S[1]+u[1],h[2]=S[2]+u[2],h},c.bz=function(h,a,u){var f=Math.sin(u),b=Math.cos(u),S=a[0],C=a[1],I=a[2],O=a[3],N=a[8],B=a[9],G=a[10],Q=a[11];return a!==h&&(h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[0]=S*b-N*f,h[1]=C*b-B*f,h[2]=I*b-G*f,h[3]=O*b-Q*f,h[8]=S*f+N*b,h[9]=C*f+B*b,h[10]=I*f+G*b,h[11]=O*f+Q*b,h},c.c=ke,c.c0=hZ,c.c1=class extends d{},c.c2=Jw,c.c3=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},c.c4=O5,c.c5=function(h,a,u){var f=a[0],b=a[1],S=a[2],C=u[3]*f+u[7]*b+u[11]*S+u[15];return h[0]=(u[0]*f+u[4]*b+u[8]*S+u[12])/(C=C||1),h[1]=(u[1]*f+u[5]*b+u[9]*S+u[13])/C,h[2]=(u[2]*f+u[6]*b+u[10]*S+u[14])/C,h},c.c6=class extends Im{},c.c7=class extends q{},c.c8=function(h,a){return h[0]===a[0]&&h[1]===a[1]&&h[2]===a[2]&&h[3]===a[3]&&h[4]===a[4]&&h[5]===a[5]&&h[6]===a[6]&&h[7]===a[7]&&h[8]===a[8]&&h[9]===a[9]&&h[10]===a[10]&&h[11]===a[11]&&h[12]===a[12]&&h[13]===a[13]&&h[14]===a[14]&&h[15]===a[15]},c.c9=function(h,a){var u=h[0],f=h[1],b=h[2],S=h[3],C=h[4],I=h[5],O=h[6],N=h[7],B=h[8],G=h[9],Q=h[10],ie=h[11],se=h[12],ce=h[13],pe=h[14],Ee=h[15],Ue=a[0],Oe=a[1],Ne=a[2],et=a[3],at=a[4],gt=a[5],Mt=a[6],wt=a[7],Rt=a[8],Zt=a[9],At=a[10],It=a[11],ht=a[12],sr=a[13],dr=a[14],Qt=a[15];return Math.abs(u-Ue)<=$*Math.max(1,Math.abs(u),Math.abs(Ue))&&Math.abs(f-Oe)<=$*Math.max(1,Math.abs(f),Math.abs(Oe))&&Math.abs(b-Ne)<=$*Math.max(1,Math.abs(b),Math.abs(Ne))&&Math.abs(S-et)<=$*Math.max(1,Math.abs(S),Math.abs(et))&&Math.abs(C-at)<=$*Math.max(1,Math.abs(C),Math.abs(at))&&Math.abs(I-gt)<=$*Math.max(1,Math.abs(I),Math.abs(gt))&&Math.abs(O-Mt)<=$*Math.max(1,Math.abs(O),Math.abs(Mt))&&Math.abs(N-wt)<=$*Math.max(1,Math.abs(N),Math.abs(wt))&&Math.abs(B-Rt)<=$*Math.max(1,Math.abs(B),Math.abs(Rt))&&Math.abs(G-Zt)<=$*Math.max(1,Math.abs(G),Math.abs(Zt))&&Math.abs(Q-At)<=$*Math.max(1,Math.abs(Q),Math.abs(At))&&Math.abs(ie-It)<=$*Math.max(1,Math.abs(ie),Math.abs(It))&&Math.abs(se-ht)<=$*Math.max(1,Math.abs(se),Math.abs(ht))&&Math.abs(ce-sr)<=$*Math.max(1,Math.abs(ce),Math.abs(sr))&&Math.abs(pe-dr)<=$*Math.max(1,Math.abs(pe),Math.abs(dr))&&Math.abs(Ee-Qt)<=$*Math.max(1,Math.abs(Ee),Math.abs(Qt))},c.cA=function(h,a){oe.REGISTERED_PROTOCOLS[h]=a},c.cB=function(h){delete oe.REGISTERED_PROTOCOLS[h]},c.cC=function(h,a){const u={};for(let b=0;b<h.length;b++){const S=a&&a[h[b].id]||Dw(h[b]);a&&(a[h[b].id]=S);let C=u[S];C||(C=u[S]=[]),C.push(h[b])}const f=[];for(const b in u)f.push(u[b]);return f},c.cD=zt,c.cE=R3,c.cF=M3,c.cG=a3,c.cH=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=Ke/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const a=h.bucket.layers[0],u=a.layout,f=a._unevaluatedLayout._values,b={layoutIconSize:f["icon-size"].possiblyEvaluate(new yn(h.bucket.zoom+1),h.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new yn(h.bucket.zoom+1),h.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new yn(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:B}=h.bucket.textSizeData;b.compositeTextSizes=[f["text-size"].possiblyEvaluate(new yn(N),h.canonical),f["text-size"].possiblyEvaluate(new yn(B),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:B}=h.bucket.iconSizeData;b.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new yn(N),h.canonical),f["icon-size"].possiblyEvaluate(new yn(B),h.canonical)]}const S=u.get("text-line-height")*gi,C=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",I=u.get("text-keep-upright"),O=u.get("text-size");for(const N of h.bucket.features){const B=u.get("text-font").evaluate(N,{},h.canonical).join(","),G=O.evaluate(N,{},h.canonical),Q=b.layoutTextSize.evaluate(N,{},h.canonical),ie=b.layoutIconSize.evaluate(N,{},h.canonical),se={horizontal:{},vertical:void 0},ce=N.text;let pe,Ee=[0,0];if(ce){const Ne=ce.toString(),et=u.get("text-letter-spacing").evaluate(N,{},h.canonical)*gi,at=jw(Ne)?et:0,gt=u.get("text-anchor").evaluate(N,{},h.canonical),Mt=$3(a,N,h.canonical);if(!Mt){const At=u.get("text-radial-offset").evaluate(N,{},h.canonical);Ee=At?q3(gt,[At*gi,gE]):u.get("text-offset").evaluate(N,{},h.canonical).map(It=>It*gi)}let wt=C?"center":u.get("text-justify").evaluate(N,{},h.canonical);const Rt=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(N,{},h.canonical)*gi:1/0,Zt=()=>{h.bucket.allowVerticalPlacement&&Fd(Ne)&&(se.vertical=_0(ce,h.glyphMap,h.glyphPositions,h.imagePositions,B,Rt,S,gt,"left",at,Ee,c.ao.vertical,!0,Q,G))};if(!C&&Mt){const At=new Set;if(wt==="auto")for(let ht=0;ht<Mt.values.length;ht+=2)At.add(yE(Mt.values[ht]));else At.add(wt);let It=!1;for(const ht of At)if(!se.horizontal[ht])if(It)se.horizontal[ht]=se.horizontal[0];else{const sr=_0(ce,h.glyphMap,h.glyphPositions,h.imagePositions,B,Rt,S,"center",ht,at,Ee,c.ao.horizontal,!1,Q,G);sr&&(se.horizontal[ht]=sr,It=sr.positionedLines.length===1)}Zt()}else{wt==="auto"&&(wt=yE(gt));const At=_0(ce,h.glyphMap,h.glyphPositions,h.imagePositions,B,Rt,S,gt,wt,at,Ee,c.ao.horizontal,!1,Q,G);At&&(se.horizontal[wt]=At),Zt(),Fd(Ne)&&C&&I&&(se.vertical=_0(ce,h.glyphMap,h.glyphPositions,h.imagePositions,B,Rt,S,gt,wt,at,Ee,c.ao.vertical,!1,Q,G))}}let Ue=!1;if(N.icon&&N.icon.name){const Ne=h.imageMap[N.icon.name];Ne&&(pe=kZ(h.imagePositions[N.icon.name],u.get("icon-offset").evaluate(N,{},h.canonical),u.get("icon-anchor").evaluate(N,{},h.canonical)),Ue=!!Ne.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Ue:h.bucket.sdfIcons!==Ue&&Tt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==h.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Oe=U3(se.horizontal)||se.vertical;h.bucket.iconsInText=!!Oe&&Oe.iconsInText,(Oe||pe)&&ZZ(h.bucket,N,se,pe,h.imageMap,b,Q,ie,Ee,Ue,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},c.cI=rE,c.cJ=Qw,c.cK=tE,c.cL=J5,c.cM=iE,c.cN=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},c.cO=function(h,a,u,f,b){return s(this,void 0,void 0,function*(){if(j())try{return yield Vr(h,a,u,f,b)}catch{}return function(S,C,I,O,N){const B=S.width,G=S.height;Ir&&Zr||(Ir=new OffscreenCanvas(B,G),Zr=Ir.getContext("2d",{willReadFrequently:!0})),Ir.width=B,Ir.height=G,Zr.drawImage(S,0,0,B,G);const Q=Zr.getImageData(C,I,O,N);return Zr.clearRect(0,0,B,G),Q.data}(h,a,u,f,b)})},c.cP=D5,c.cQ=g,c.cR=H5,c.cS=Yd,c.cT=Ru,c.cU=function(h,a){const u=new Map;if(h!=null)if(h.type==="Feature")u.set(Wm(h,a),h);else for(const f of h.features)u.set(Wm(f,a),f);return u},c.cV=function(h,a){if(h==null)return!0;if(h.type==="Feature")return Wm(h,a)!=null;if(h.type==="FeatureCollection"){const u=new Set;for(const f of h.features){const b=Wm(f,a);if(b==null||u.has(b))return!1;u.add(b)}return!0}return!1},c.cW=function(h,a,u){var f,b,S,C;if(a.removeAll&&h.clear(),a.remove)for(const I of a.remove)h.delete(I);if(a.add)for(const I of a.add){const O=Wm(I,u);O!=null&&h.set(O,I)}if(a.update)for(const I of a.update){let O=h.get(I.id);if(O==null)continue;const N=!I.removeAllProperties&&(((f=I.removeProperties)===null||f===void 0?void 0:f.length)>0||((b=I.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0);if((I.newGeometry||I.removeAllProperties||N)&&(O=Object.assign({},O),h.set(I.id,O),N&&(O.properties=Object.assign({},O.properties))),I.newGeometry&&(O.geometry=I.newGeometry),I.removeAllProperties)O.properties={};else if(((S=I.removeProperties)===null||S===void 0?void 0:S.length)>0)for(const B of I.removeProperties)Object.prototype.hasOwnProperty.call(O.properties,B)&&delete O.properties[B];if(((C=I.addOrUpdateProperties)===null||C===void 0?void 0:C.length)>0)for(const{key:B,value:G}of I.addOrUpdateProperties)O.properties[B]=G}},c.cX=Uo,c.ca=function(h,a){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},c.cb=h=>h.type==="symbol",c.cc=h=>h.type==="circle",c.cd=h=>h.type==="heatmap",c.ce=h=>h.type==="line",c.cf=h=>h.type==="fill",c.cg=h=>h.type==="fill-extrusion",c.ch=h=>h.type==="hillshade",c.ci=h=>h.type==="color-relief",c.cj=h=>h.type==="raster",c.ck=h=>h.type==="background",c.cl=h=>h.type==="custom",c.cm=Jt,c.cn=function(h,a,u){const f=Xe(a.x-u.x,a.y-u.y),b=Xe(h.x-u.x,h.y-u.y);var S,C;return lr(Math.atan2(f[0]*b[1]-f[1]*b[0],(S=f)[0]*(C=b)[0]+S[1]*C[1]))},c.co=Pt,c.cp=function(h,a){return mr[a]&&(h instanceof MouseEvent||h instanceof WheelEvent)},c.cq=function(h,a){return nr[a]&&"touches"in h},c.cr=function(h){return nr[h]||mr[h]},c.cs=function(h,a,u){var f=a[0],b=a[1];return h[0]=u[0]*f+u[4]*b+u[12],h[1]=u[1]*f+u[5]*b+u[13],h},c.ct=function(h,a){const{x:u,y:f}=Jm.fromLngLat(a);return!(h<0||h>25||f<0||f>=1||u<0||u>=1)},c.cu=function(h,a){return h[0]=a[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=a[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=a[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},c.cv=class extends lc{},c.cw=YZ,c.cy=function(h){return h.message===Yr},c.cz=Te,c.d=Je,c.e=Wt,c.f=h=>s(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const a=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(a)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=ae,c.h=h=>new Promise((a,u)=>{const f=new Image;f.onload=()=>{a(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=wr})},f.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const b=new Blob([new Uint8Array(h)],{type:"image/png"});f.src=h.byteLength?URL.createObjectURL(b):wr}),c.i=Dt,c.j=(h,a)=>je(Wt(h,{type:"json"}),a),c.k=it,c.l=ct,c.m=je,c.n=(h,a)=>je(Wt(h,{type:"arrayBuffer"}),a),c.o=function(h){return new iE(h).readFields(wZ,[])},c.p=s3,c.q=Nm,c.r=Ji,c.s=yr,c.t=a0,c.u=jr,c.v=$e,c.w=Tt,c.x=Nw,c.y=Nu,c.z=ic}),i("worker",["./shared"],function(c){class s{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,ae){for(const Te of oe){this._layerConfigs[Te.id]=Te;const Le=this._layers[Te.id]=c.bJ(Te);Le._featureFilter=c.aa(Le.filter),this.keyCache[Te.id]&&delete this.keyCache[Te.id]}for(const Te of ae)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const de=c.cC(Object.values(this._layerConfigs),this.keyCache);for(const Te of de){const Le=Te.map(it=>this._layers[it.id]),je=Le[0];if(je.visibility==="none")continue;const Je=je.source||"";let Fe=this.familiesBySource[Je];Fe||(Fe=this.familiesBySource[Je]={});const tt=je.sourceLayer||"_geojsonTileLayer";let ct=Fe[tt];ct||(ct=Fe[tt]=[]),ct.push(Le)}}}class p{constructor(oe){const ae={},de=[];for(const Je in oe){const Fe=oe[Je],tt=ae[Je]={};for(const ct in Fe){const it=Fe[+ct];if(!it||it.bitmap.width===0||it.bitmap.height===0)continue;const Ot={x:0,y:0,w:it.bitmap.width+2,h:it.bitmap.height+2};de.push(Ot),tt[ct]={rect:Ot,metrics:it.metrics}}}const{w:Te,h:Le}=c.p(de),je=new c.q({width:Te||1,height:Le||1});for(const Je in oe){const Fe=oe[Je];for(const tt in Fe){const ct=Fe[+tt];if(!ct||ct.bitmap.width===0||ct.bitmap.height===0)continue;const it=ae[Je][tt].rect;c.q.copy(ct.bitmap,je,{x:0,y:0},{x:it.x+1,y:it.y+1},ct.bitmap)}}this.image=je,this.positions=ae}}c.cD("GlyphAtlas",p);class g{constructor(oe){this.tileID=new c.Z(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.globalState=oe.globalState}parse(oe,ae,de,Te,Le){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=oe,this.collisionBoxArray=new c.a8;const je=new c.cE(Object.keys(oe.layers).sort()),Je=new c.cF(this.tileID,this.promoteId);Je.bucketLayerIDs=[];const Fe={},tt={featureIndex:Je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:de,subdivisionGranularity:Le},ct=ae.familiesBySource[this.source];for(const Kt in ct){const jt=oe.layers[Kt];if(!jt)continue;jt.version===1&&c.w(`Vector tile source "${this.source}" layer "${Kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pr=je.encode(Kt),yt=[];for(let In=0;In<jt.length;In++){const vn=jt.feature(In),mn=Je.getId(vn,Kt);yt.push({feature:vn,id:mn,index:In,sourceLayerIndex:Pr})}for(const In of ct[Kt]){const vn=In[0];vn.source!==this.source&&c.w(`layer.source = ${vn.source} does not equal this.source = ${this.source}`),vn.minzoom&&this.zoom<Math.floor(vn.minzoom)||vn.maxzoom&&this.zoom>=vn.maxzoom||vn.visibility!=="none"&&(_(In,this.zoom,de,this.globalState),(Fe[vn.id]=vn.createBucket({index:Je.bucketLayerIDs.length,layers:In,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pr,sourceID:this.source,globalState:this.globalState})).populate(yt,tt,this.tileID.canonical),Je.bucketLayerIDs.push(In.map(mn=>mn.id)))}}const it=c.bN(tt.glyphDependencies,Kt=>Object.keys(Kt).map(Number));this.inFlightDependencies.forEach(Kt=>Kt?.abort()),this.inFlightDependencies=[];let Ot=Promise.resolve({});if(Object.keys(it).length){const Kt=new AbortController;this.inFlightDependencies.push(Kt),Ot=Te.sendAsync({type:"GG",data:{stacks:it,source:this.source,tileID:this.tileID,type:"glyphs"}},Kt)}const $e=Object.keys(tt.iconDependencies);let Xt=Promise.resolve({});if($e.length){const Kt=new AbortController;this.inFlightDependencies.push(Kt),Xt=Te.sendAsync({type:"GI",data:{icons:$e,source:this.source,tileID:this.tileID,type:"icons"}},Kt)}const cr=Object.keys(tt.patternDependencies);let Nt=Promise.resolve({});if(cr.length){const Kt=new AbortController;this.inFlightDependencies.push(Kt),Nt=Te.sendAsync({type:"GI",data:{icons:cr,source:this.source,tileID:this.tileID,type:"patterns"}},Kt)}const[Ht,_r,ut]=yield Promise.all([Ot,Xt,Nt]),Lt=new p(Ht),Cr=new c.cG(_r,ut);for(const Kt in Fe){const jt=Fe[Kt];jt instanceof c.a9?(_(jt.layers,this.zoom,de,this.globalState),c.cH({bucket:jt,glyphMap:Ht,glyphPositions:Lt.positions,imageMap:_r,imagePositions:Cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:tt.subdivisionGranularity})):jt.hasPattern&&(jt instanceof c.cI||jt instanceof c.cJ||jt instanceof c.cK)&&(_(jt.layers,this.zoom,de,this.globalState),jt.addFeatures(tt,this.tileID.canonical,Cr.patternPositions))}return this.status="done",{buckets:Object.values(Fe).filter(Kt=>!Kt.isEmpty()),featureIndex:Je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lt.image,imageAtlas:Cr,glyphMap:this.returnDependencies?Ht:null,iconMap:this.returnDependencies?_r:null,glyphPositions:this.returnDependencies?Lt.positions:null}})}}function _(ke,oe,ae,de){const Te=new c.F(oe,{globalState:de});for(const Le of ke)Le.recalculate(Te,ae)}class x{constructor(oe,ae,de){this.actor=oe,this.layerIndex=ae,this.availableImages=de,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(oe,ae){return c._(this,void 0,void 0,function*(){const de=yield c.n(oe.request,ae);try{return{vectorTile:new c.cL(new c.cM(de.data)),rawData:de.data,cacheControl:de.cacheControl,expires:de.expires}}catch(Te){const Le=new Uint8Array(de.data);let je=`Unable to parse the tile at ${oe.request.url}, `;throw je+=Le[0]===31&&Le[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Te.message}`,new Error(je)}})}loadTile(oe){return c._(this,void 0,void 0,function*(){const ae=oe.uid,de=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.cN(oe.request),Te=new g(oe);this.loading[ae]=Te;const Le=new AbortController;Te.abort=Le;try{const je=yield this.loadVectorTile(oe,Le);if(delete this.loading[ae],!je)return null;const Je=je.rawData,Fe={};je.expires&&(Fe.expires=je.expires),je.cacheControl&&(Fe.cacheControl=je.cacheControl);const tt={};if(de){const it=de.finish();it&&(tt.resourceTiming=JSON.parse(JSON.stringify(it)))}Te.vectorTile=je.vectorTile;const ct=Te.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity);this.loaded[ae]=Te,this.fetching[ae]={rawTileData:Je,cacheControl:Fe,resourceTiming:tt};try{const it=yield ct;return c.e({rawTileData:Je.slice(0)},it,Fe,tt)}finally{delete this.fetching[ae]}}catch(je){throw delete this.loading[ae],Te.status="done",this.loaded[ae]=Te,je}})}reloadTile(oe){return c._(this,void 0,void 0,function*(){const ae=oe.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const de=this.loaded[ae];if(de.showCollisionBoxes=oe.showCollisionBoxes,de.globalState=oe.globalState,de.status==="parsing"){const Te=yield de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity);let Le;if(this.fetching[ae]){const{rawTileData:je,cacheControl:Je,resourceTiming:Fe}=this.fetching[ae];delete this.fetching[ae],Le=c.e({rawTileData:je.slice(0)},Te,Je,Fe)}else Le=Te;return Le}if(de.status==="done"&&de.vectorTile)return de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity)})}abortTile(oe){return c._(this,void 0,void 0,function*(){const ae=this.loading,de=oe.uid;ae&&ae[de]&&ae[de].abort&&(ae[de].abort.abort(),delete ae[de])})}removeTile(oe){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[oe.uid]&&delete this.loaded[oe.uid]})}}class P{constructor(){this.loaded={}}loadTile(oe){return c._(this,void 0,void 0,function*(){const{uid:ae,encoding:de,rawImageData:Te,redFactor:Le,greenFactor:je,blueFactor:Je,baseShift:Fe}=oe,tt=Te.width+2,ct=Te.height+2,it=c.b(Te)?new c.R({width:tt,height:ct},yield c.cO(Te,-1,-1,tt,ct)):Te,Ot=new c.cP(ae,it,de,Le,je,Je,Fe);return this.loaded=this.loaded||{},this.loaded[ae]=Ot,Ot})}removeTile(oe){const ae=this.loaded,de=oe.uid;ae&&ae[de]&&delete ae[de]}}var A,M,F=function(){if(M)return A;function ke(ae,de){if(ae.length!==0){oe(ae[0],de);for(var Te=1;Te<ae.length;Te++)oe(ae[Te],!de)}}function oe(ae,de){for(var Te=0,Le=0,je=0,Je=ae.length,Fe=Je-1;je<Je;Fe=je++){var tt=(ae[je][0]-ae[Fe][0])*(ae[Fe][1]+ae[je][1]),ct=Te+tt;Le+=Math.abs(Te)>=Math.abs(tt)?Te-ct+tt:tt-ct+Te,Te=ct}Te+Le>=0!=!!de&&ae.reverse()}return M=1,A=function ae(de,Te){var Le,je=de&&de.type;if(je==="FeatureCollection")for(Le=0;Le<de.features.length;Le++)ae(de.features[Le],Te);else if(je==="GeometryCollection")for(Le=0;Le<de.geometries.length;Le++)ae(de.geometries[Le],Te);else if(je==="Feature")ae(de.geometry,Te);else if(je==="Polygon")ke(de.coordinates,Te);else if(je==="MultiPolygon")for(Le=0;Le<de.coordinates.length;Le++)ke(de.coordinates[Le],Te);return de}}(),z=c.cQ(F);class j extends c.cS{constructor(oe,ae){super(new c.cM,0,ae,[],[]),this.feature=oe,this.type=oe.type,this.properties=oe.tags?oe.tags:{},"id"in oe&&(typeof oe.id=="string"?this.id=parseInt(oe.id,10):typeof oe.id!="number"||isNaN(oe.id)||(this.id=oe.id))}loadGeometry(){const oe=[],ae=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const de of ae){const Te=[];for(const Le of de)Te.push(new c.P(Le[0],Le[1]));oe.push(Te)}return oe}}class $ extends c.cR{constructor(oe,ae){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ae?ae.version:1,this.extent=ae?ae.extent:4096,this.length=oe.length,this.features=oe}feature(oe){return new j(this.features[oe],this.extent)}}function W(ke,oe){oe.writeVarintField(15,ke.version||1),oe.writeStringField(1,ke.name||""),oe.writeVarintField(5,ke.extent||4096);const ae={keys:[],values:[],keycache:{},valuecache:{}};for(let Le=0;Le<ke.length;Le++)ae.feature=ke.feature(Le),oe.writeMessage(2,X,ae);const de=ae.keys;for(const Le of de)oe.writeStringField(3,Le);const Te=ae.values;for(const Le of Te)oe.writeMessage(4,K,Le)}function X(ke,oe){if(!ke.feature)return;const ae=ke.feature;ae.id!==void 0&&oe.writeVarintField(1,ae.id),oe.writeMessage(2,te,ke),oe.writeVarintField(3,ae.type),oe.writeMessage(4,U,ae)}function te(ke,oe){for(const ae in ke.feature?.properties){let de=ke.feature.properties[ae],Te=ke.keycache[ae];if(de===null)continue;Te===void 0&&(ke.keys.push(ae),Te=ke.keys.length-1,ke.keycache[ae]=Te),oe.writeVarint(Te),typeof de!="string"&&typeof de!="boolean"&&typeof de!="number"&&(de=JSON.stringify(de));const Le=typeof de+":"+de;let je=ke.valuecache[Le];je===void 0&&(ke.values.push(de),je=ke.values.length-1,ke.valuecache[Le]=je),oe.writeVarint(je)}}function ne(ke,oe){return(oe<<3)+(7&ke)}function Z(ke){return ke<<1^ke>>31}function U(ke,oe){const ae=ke.loadGeometry(),de=ke.type;let Te=0,Le=0;for(const je of ae){let Je=1;de===1&&(Je=je.length),oe.writeVarint(ne(1,Je));const Fe=de===3?je.length-1:je.length;for(let tt=0;tt<Fe;tt++){tt===1&&de!==1&&oe.writeVarint(ne(2,Fe-1));const ct=je[tt].x-Te,it=je[tt].y-Le;oe.writeVarint(Z(ct)),oe.writeVarint(Z(it)),Te+=ct,Le+=it}ke.type===3&&oe.writeVarint(ne(7,1))}}function K(ke,oe){const ae=typeof ke;ae==="string"?oe.writeStringField(1,ke):ae==="boolean"?oe.writeBooleanField(7,ke):ae==="number"&&(ke%1!=0?oe.writeDoubleField(3,ke):ke<0?oe.writeSVarintField(6,ke):oe.writeVarintField(5,ke))}const he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},ue=Math.fround||(we=new Float32Array(1),ke=>(we[0]=+ke,we[0]));var we;class Ie{constructor(oe){this.options=Object.assign(Object.create(he),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:ae,minZoom:de,maxZoom:Te}=this.options;ae&&console.time("total time");const Le=`prepare ${oe.length} points`;ae&&console.time(Le),this.points=oe;const je=[];for(let Fe=0;Fe<oe.length;Fe++){const tt=oe[Fe];if(!tt.geometry)continue;const[ct,it]=tt.geometry.coordinates,Ot=ue(ve(ct)),$e=ue(xe(it));je.push(Ot,$e,1/0,Fe,-1,1),this.options.reduce&&je.push(0)}let Je=this.trees[Te+1]=this._createTree(je);ae&&console.timeEnd(Le);for(let Fe=Te;Fe>=de;Fe--){const tt=+Date.now();Je=this.trees[Fe]=this._createTree(this._cluster(Je,Fe)),ae&&console.log("z%d: %d clusters in %dms",Fe,Je.numItems,+Date.now()-tt)}return ae&&console.timeEnd("total time"),this}getClusters(oe,ae){let de=((oe[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,oe[1]));let Le=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)de=-180,Le=180;else if(de>Le){const it=this.getClusters([de,Te,180,je],ae),Ot=this.getClusters([-180,Te,Le,je],ae);return it.concat(Ot)}const Je=this.trees[this._limitZoom(ae)],Fe=Je.range(ve(de),xe(je),ve(Le),xe(Te)),tt=Je.data,ct=[];for(const it of Fe){const Ot=this.stride*it;ct.push(tt[Ot+5]>1?ee(tt,Ot,this.clusterProps):this.points[tt[Ot+3]])}return ct}getChildren(oe){const ae=this._getOriginId(oe),de=this._getOriginZoom(oe),Te="No cluster with the specified id.",Le=this.trees[de];if(!Le)throw new Error(Te);const je=Le.data;if(ae*this.stride>=je.length)throw new Error(Te);const Je=this.options.radius/(this.options.extent*Math.pow(2,de-1)),Fe=Le.within(je[ae*this.stride],je[ae*this.stride+1],Je),tt=[];for(const ct of Fe){const it=ct*this.stride;je[it+4]===oe&&tt.push(je[it+5]>1?ee(je,it,this.clusterProps):this.points[je[it+3]])}if(tt.length===0)throw new Error(Te);return tt}getLeaves(oe,ae,de){const Te=[];return this._appendLeaves(Te,oe,ae=ae||10,de=de||0,0),Te}getTile(oe,ae,de){const Te=this.trees[this._limitZoom(oe)],Le=Math.pow(2,oe),{extent:je,radius:Je}=this.options,Fe=Je/je,tt=(de-Fe)/Le,ct=(de+1+Fe)/Le,it={features:[]};return this._addTileFeatures(Te.range((ae-Fe)/Le,tt,(ae+1+Fe)/Le,ct),Te.data,ae,de,Le,it),ae===0&&this._addTileFeatures(Te.range(1-Fe/Le,tt,1,ct),Te.data,Le,de,Le,it),ae===Le-1&&this._addTileFeatures(Te.range(0,tt,Fe/Le,ct),Te.data,-1,de,Le,it),it.features.length?it:null}getClusterExpansionZoom(oe){let ae=this._getOriginZoom(oe)-1;for(;ae<=this.options.maxZoom;){const de=this.getChildren(oe);if(ae++,de.length!==1)break;oe=de[0].properties.cluster_id}return ae}_appendLeaves(oe,ae,de,Te,Le){const je=this.getChildren(ae);for(const Je of je){const Fe=Je.properties;if(Fe&&Fe.cluster?Le+Fe.point_count<=Te?Le+=Fe.point_count:Le=this._appendLeaves(oe,Fe.cluster_id,de,Te,Le):Le<Te?Le++:oe.push(Je),oe.length===de)break}return Le}_createTree(oe){const ae=new c.aI(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let de=0;de<oe.length;de+=this.stride)ae.add(oe[de],oe[de+1]);return ae.finish(),ae.data=oe,ae}_addTileFeatures(oe,ae,de,Te,Le,je){for(const Je of oe){const Fe=Je*this.stride,tt=ae[Fe+5]>1;let ct,it,Ot;if(tt)ct=fe(ae,Fe,this.clusterProps),it=ae[Fe],Ot=ae[Fe+1];else{const cr=this.points[ae[Fe+3]];ct=cr.properties;const[Nt,Ht]=cr.geometry.coordinates;it=ve(Nt),Ot=xe(Ht)}const $e={type:1,geometry:[[Math.round(this.options.extent*(it*Le-de)),Math.round(this.options.extent*(Ot*Le-Te))]],tags:ct};let Xt;Xt=tt||this.options.generateId?ae[Fe+3]:this.points[ae[Fe+3]].id,Xt!==void 0&&($e.id=Xt),je.features.push($e)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,ae){const{radius:de,extent:Te,reduce:Le,minPoints:je}=this.options,Je=de/(Te*Math.pow(2,ae)),Fe=oe.data,tt=[],ct=this.stride;for(let it=0;it<Fe.length;it+=ct){if(Fe[it+2]<=ae)continue;Fe[it+2]=ae;const Ot=Fe[it],$e=Fe[it+1],Xt=oe.within(Fe[it],Fe[it+1],Je),cr=Fe[it+5];let Nt=cr;for(const Ht of Xt){const _r=Ht*ct;Fe[_r+2]>ae&&(Nt+=Fe[_r+5])}if(Nt>cr&&Nt>=je){let Ht,_r=Ot*cr,ut=$e*cr,Lt=-1;const Cr=(it/ct<<5)+(ae+1)+this.points.length;for(const Kt of Xt){const jt=Kt*ct;if(Fe[jt+2]<=ae)continue;Fe[jt+2]=ae;const Pr=Fe[jt+5];_r+=Fe[jt]*Pr,ut+=Fe[jt+1]*Pr,Fe[jt+4]=Cr,Le&&(Ht||(Ht=this._map(Fe,it,!0),Lt=this.clusterProps.length,this.clusterProps.push(Ht)),Le(Ht,this._map(Fe,jt)))}Fe[it+4]=Cr,tt.push(_r/Nt,ut/Nt,1/0,Cr,-1,Nt),Le&&tt.push(Lt)}else{for(let Ht=0;Ht<ct;Ht++)tt.push(Fe[it+Ht]);if(Nt>1)for(const Ht of Xt){const _r=Ht*ct;if(!(Fe[_r+2]<=ae)){Fe[_r+2]=ae;for(let ut=0;ut<ct;ut++)tt.push(Fe[_r+ut])}}}}return tt}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,ae,de){if(oe[ae+5]>1){const je=this.clusterProps[oe[ae+6]];return de?Object.assign({},je):je}const Te=this.points[oe[ae+3]].properties,Le=this.options.map(Te);return de&&Le===Te?Object.assign({},Le):Le}}function ee(ke,oe,ae){return{type:"Feature",id:ke[oe+3],properties:fe(ke,oe,ae),geometry:{type:"Point",coordinates:[(de=ke[oe],360*(de-.5)),Xe(ke[oe+1])]}};var de}function fe(ke,oe,ae){const de=ke[oe+5],Te=de>=1e4?`${Math.round(de/1e3)}k`:de>=1e3?Math.round(de/100)/10+"k":de,Le=ke[oe+6],je=Le===-1?{}:Object.assign({},ae[Le]);return Object.assign(je,{cluster:!0,cluster_id:ke[oe+3],point_count:de,point_count_abbreviated:Te})}function ve(ke){return ke/360+.5}function xe(ke){const oe=Math.sin(ke*Math.PI/180),ae=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ae<0?0:ae>1?1:ae}function Xe(ke){const oe=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Ke(ke,oe,ae,de){let Te=de;const Le=oe+(ae-oe>>1);let je,Je=ae-oe;const Fe=ke[oe],tt=ke[oe+1],ct=ke[ae],it=ke[ae+1];for(let Ot=oe+3;Ot<ae;Ot+=3){const $e=Ze(ke[Ot],ke[Ot+1],Fe,tt,ct,it);if($e>Te)je=Ot,Te=$e;else if($e===Te){const Xt=Math.abs(Ot-Le);Xt<Je&&(je=Ot,Je=Xt)}}Te>de&&(je-oe>3&&Ke(ke,oe,je,de),ke[je+2]=Te,ae-je>3&&Ke(ke,je,ae,de))}function Ze(ke,oe,ae,de,Te,Le){let je=Te-ae,Je=Le-de;if(je!==0||Je!==0){const Fe=((ke-ae)*je+(oe-de)*Je)/(je*je+Je*Je);Fe>1?(ae=Te,de=Le):Fe>0&&(ae+=je*Fe,de+=Je*Fe)}return je=ke-ae,Je=oe-de,je*je+Je*Je}function bt(ke,oe,ae,de){const Te={id:ke??null,type:oe,geometry:ae,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(oe==="Point"||oe==="MultiPoint"||oe==="LineString")qe(Te,ae);else if(oe==="Polygon")qe(Te,ae[0]);else if(oe==="MultiLineString")for(const Le of ae)qe(Te,Le);else if(oe==="MultiPolygon")for(const Le of ae)qe(Te,Le[0]);return Te}function qe(ke,oe){for(let ae=0;ae<oe.length;ae+=3)ke.minX=Math.min(ke.minX,oe[ae]),ke.minY=Math.min(ke.minY,oe[ae+1]),ke.maxX=Math.max(ke.maxX,oe[ae]),ke.maxY=Math.max(ke.maxY,oe[ae+1])}function kt(ke,oe,ae,de){if(!oe.geometry)return;const Te=oe.geometry.coordinates;if(Te&&Te.length===0)return;const Le=oe.geometry.type,je=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let Je=[],Fe=oe.id;if(ae.promoteId?Fe=oe.properties[ae.promoteId]:ae.generateId&&(Fe=de||0),Le==="Point")Jt(Te,Je);else if(Le==="MultiPoint")for(const tt of Te)Jt(tt,Je);else if(Le==="LineString")Pt(Te,Je,je,!1);else if(Le==="MultiLineString"){if(ae.lineMetrics){for(const tt of Te)Je=[],Pt(tt,Je,je,!1),ke.push(bt(Fe,"LineString",Je,oe.properties));return}dt(Te,Je,je,!1)}else if(Le==="Polygon")dt(Te,Je,je,!0);else{if(Le!=="MultiPolygon"){if(Le==="GeometryCollection"){for(const tt of oe.geometry.geometries)kt(ke,{id:Fe,geometry:tt,properties:oe.properties},ae,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const tt of Te){const ct=[];dt(tt,ct,je,!0),Je.push(ct)}}ke.push(bt(Fe,Le,Je,oe.properties))}function Jt(ke,oe){oe.push(er(ke[0]),Wt(ke[1]),0)}function Pt(ke,oe,ae,de){let Te,Le,je=0;for(let Fe=0;Fe<ke.length;Fe++){const tt=er(ke[Fe][0]),ct=Wt(ke[Fe][1]);oe.push(tt,ct,0),Fe>0&&(je+=de?(Te*ct-tt*Le)/2:Math.sqrt(Math.pow(tt-Te,2)+Math.pow(ct-Le,2))),Te=tt,Le=ct}const Je=oe.length-3;oe[2]=1,Ke(oe,0,Je,ae),oe[Je+2]=1,oe.size=Math.abs(je),oe.start=0,oe.end=oe.size}function dt(ke,oe,ae,de){for(let Te=0;Te<ke.length;Te++){const Le=[];Pt(ke[Te],Le,ae,de),oe.push(Le)}}function er(ke){return ke/360+.5}function Wt(ke){const oe=Math.sin(ke*Math.PI/180),ae=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ae<0?0:ae>1?1:ae}function ar(ke,oe,ae,de,Te,Le,je,Je){if(de/=oe,Le>=(ae/=oe)&&je<de)return ke;if(je<ae||Le>=de)return null;const Fe=[];for(const tt of ke){const ct=tt.geometry;let it=tt.type;const Ot=Te===0?tt.minX:tt.minY,$e=Te===0?tt.maxX:tt.maxY;if(Ot>=ae&&$e<de){Fe.push(tt);continue}if($e<ae||Ot>=de)continue;let Xt=[];if(it==="Point"||it==="MultiPoint")_t(ct,Xt,ae,de,Te);else if(it==="LineString")Ve(ct,Xt,ae,de,Te,!1,Je.lineMetrics);else if(it==="MultiLineString")lt(ct,Xt,ae,de,Te,!1);else if(it==="Polygon")lt(ct,Xt,ae,de,Te,!0);else if(it==="MultiPolygon")for(const cr of ct){const Nt=[];lt(cr,Nt,ae,de,Te,!0),Nt.length&&Xt.push(Nt)}if(Xt.length){if(Je.lineMetrics&&it==="LineString"){for(const cr of Xt)Fe.push(bt(tt.id,it,cr,tt.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(Xt.length===1?(it="LineString",Xt=Xt[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=Xt.length===3?"Point":"MultiPoint"),Fe.push(bt(tt.id,it,Xt,tt.tags))}}return Fe.length?Fe:null}function _t(ke,oe,ae,de,Te){for(let Le=0;Le<ke.length;Le+=3){const je=ke[Le+Te];je>=ae&&je<=de&&Tt(oe,ke[Le],ke[Le+1],ke[Le+2])}}function Ve(ke,oe,ae,de,Te,Le,je){let Je=pt(ke);const Fe=Te===0?vt:Dt;let tt,ct,it=ke.start;for(let Nt=0;Nt<ke.length-3;Nt+=3){const Ht=ke[Nt],_r=ke[Nt+1],ut=ke[Nt+2],Lt=ke[Nt+3],Cr=ke[Nt+4],Kt=Te===0?Ht:_r,jt=Te===0?Lt:Cr;let Pr=!1;je&&(tt=Math.sqrt(Math.pow(Ht-Lt,2)+Math.pow(_r-Cr,2))),Kt<ae?jt>ae&&(ct=Fe(Je,Ht,_r,Lt,Cr,ae),je&&(Je.start=it+tt*ct)):Kt>de?jt<de&&(ct=Fe(Je,Ht,_r,Lt,Cr,de),je&&(Je.start=it+tt*ct)):Tt(Je,Ht,_r,ut),jt<ae&&Kt>=ae&&(ct=Fe(Je,Ht,_r,Lt,Cr,ae),Pr=!0),jt>de&&Kt<=de&&(ct=Fe(Je,Ht,_r,Lt,Cr,de),Pr=!0),!Le&&Pr&&(je&&(Je.end=it+tt*ct),oe.push(Je),Je=pt(ke)),je&&(it+=tt)}let Ot=ke.length-3;const $e=ke[Ot],Xt=ke[Ot+1],cr=Te===0?$e:Xt;cr>=ae&&cr<=de&&Tt(Je,$e,Xt,ke[Ot+2]),Ot=Je.length-3,Le&&Ot>=3&&(Je[Ot]!==Je[0]||Je[Ot+1]!==Je[1])&&Tt(Je,Je[0],Je[1],Je[2]),Je.length&&oe.push(Je)}function pt(ke){const oe=[];return oe.size=ke.size,oe.start=ke.start,oe.end=ke.end,oe}function lt(ke,oe,ae,de,Te,Le){for(const je of ke)Ve(je,oe,ae,de,Te,Le,!1)}function Tt(ke,oe,ae,de){ke.push(oe,ae,de)}function vt(ke,oe,ae,de,Te,Le){const je=(Le-oe)/(de-oe);return Tt(ke,Le,ae+(Te-ae)*je,1),je}function Dt(ke,oe,ae,de,Te,Le){const je=(Le-ae)/(Te-ae);return Tt(ke,oe+(de-oe)*je,Le,1),je}function Yt(ke,oe){const ae=[];for(let de=0;de<ke.length;de++){const Te=ke[de],Le=Te.type;let je;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")je=Bt(Te.geometry,oe);else if(Le==="MultiLineString"||Le==="Polygon"){je=[];for(const Je of Te.geometry)je.push(Bt(Je,oe))}else if(Le==="MultiPolygon"){je=[];for(const Je of Te.geometry){const Fe=[];for(const tt of Je)Fe.push(Bt(tt,oe));je.push(Fe)}}ae.push(bt(Te.id,Le,je,Te.tags))}return ae}function Bt(ke,oe){const ae=[];ae.size=ke.size,ke.start!==void 0&&(ae.start=ke.start,ae.end=ke.end);for(let de=0;de<ke.length;de+=3)ae.push(ke[de]+oe,ke[de+1],ke[de+2]);return ae}function wr(ke,oe){if(ke.transformed)return ke;const ae=1<<ke.z,de=ke.x,Te=ke.y;for(const Le of ke.features){const je=Le.geometry,Je=Le.type;if(Le.geometry=[],Je===1)for(let Fe=0;Fe<je.length;Fe+=2)Le.geometry.push(Vr(je[Fe],je[Fe+1],oe,ae,de,Te));else for(let Fe=0;Fe<je.length;Fe++){const tt=[];for(let ct=0;ct<je[Fe].length;ct+=2)tt.push(Vr(je[Fe][ct],je[Fe][ct+1],oe,ae,de,Te));Le.geometry.push(tt)}}return ke.transformed=!0,ke}function Vr(ke,oe,ae,de,Te,Le){return[Math.round(ae*(ke*de-Te)),Math.round(ae*(oe*de-Le))]}function Ir(ke,oe,ae,de,Te){const Le=oe===Te.maxZoom?0:Te.tolerance/((1<<oe)*Te.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:ae,y:de,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Je of ke)Zr(je,Je,Le,Te);return je}function Zr(ke,oe,ae,de){const Te=oe.geometry,Le=oe.type,je=[];if(ke.minX=Math.min(ke.minX,oe.minX),ke.minY=Math.min(ke.minY,oe.minY),ke.maxX=Math.max(ke.maxX,oe.maxX),ke.maxY=Math.max(ke.maxY,oe.maxY),Le==="Point"||Le==="MultiPoint")for(let Je=0;Je<Te.length;Je+=3)je.push(Te[Je],Te[Je+1]),ke.numPoints++,ke.numSimplified++;else if(Le==="LineString")yr(je,Te,ke,ae,!1,!1);else if(Le==="MultiLineString"||Le==="Polygon")for(let Je=0;Je<Te.length;Je++)yr(je,Te[Je],ke,ae,Le==="Polygon",Je===0);else if(Le==="MultiPolygon")for(let Je=0;Je<Te.length;Je++){const Fe=Te[Je];for(let tt=0;tt<Fe.length;tt++)yr(je,Fe[tt],ke,ae,!0,tt===0)}if(je.length){let Je=oe.tags||null;if(Le==="LineString"&&de.lineMetrics){Je={};for(const tt in oe.tags)Je[tt]=oe.tags[tt];Je.mapbox_clip_start=Te.start/Te.size,Je.mapbox_clip_end=Te.end/Te.size}const Fe={geometry:je,type:Le==="Polygon"||Le==="MultiPolygon"?3:Le==="LineString"||Le==="MultiLineString"?2:1,tags:Je};oe.id!==null&&(Fe.id=oe.id),ke.features.push(Fe)}}function yr(ke,oe,ae,de,Te,Le){const je=de*de;if(de>0&&oe.size<(Te?je:de))return void(ae.numPoints+=oe.length/3);const Je=[];for(let Fe=0;Fe<oe.length;Fe+=3)(de===0||oe[Fe+2]>je)&&(ae.numSimplified++,Je.push(oe[Fe],oe[Fe+1])),ae.numPoints++;Te&&function(Fe,tt){let ct=0;for(let it=0,Ot=Fe.length,$e=Ot-2;it<Ot;$e=it,it+=2)ct+=(Fe[it]-Fe[$e])*(Fe[it+1]+Fe[$e+1]);if(ct>0===tt)for(let it=0,Ot=Fe.length;it<Ot/2;it+=2){const $e=Fe[it],Xt=Fe[it+1];Fe[it]=Fe[Ot-2-it],Fe[it+1]=Fe[Ot-1-it],Fe[Ot-2-it]=$e,Fe[Ot-1-it]=Xt}}(Je,Le),ke.push(Je)}const ur={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class lr{constructor(oe,ae){const de=(ae=this.options=function(Le,je){for(const Je in je)Le[Je]=je[Je];return Le}(Object.create(ur),ae)).debug;if(de&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Te=function(Le,je){const Je=[];if(Le.type==="FeatureCollection")for(let Fe=0;Fe<Le.features.length;Fe++)kt(Je,Le.features[Fe],je,Fe);else kt(Je,Le.type==="Feature"?Le:{geometry:Le},je);return Je}(oe,ae);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Te=function(Le,je){const Je=je.buffer/je.extent;let Fe=Le;const tt=ar(Le,1,-1-Je,Je,0,-1,2,je),ct=ar(Le,1,1-Je,2+Je,0,-1,2,je);return(tt||ct)&&(Fe=ar(Le,1,-Je,1+Je,0,-1,2,je)||[],tt&&(Fe=Yt(tt,1).concat(Fe)),ct&&(Fe=Fe.concat(Yt(ct,-1)))),Fe}(Te,ae),Te.length&&this.splitTile(Te,0,0,0),de&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(oe,ae,de,Te,Le,je,Je){const Fe=[oe,ae,de,Te],tt=this.options,ct=tt.debug;for(;Fe.length;){Te=Fe.pop(),de=Fe.pop(),ae=Fe.pop(),oe=Fe.pop();const it=1<<ae,Ot=nr(ae,de,Te);let $e=this.tiles[Ot];if(!$e&&(ct>1&&console.time("creation"),$e=this.tiles[Ot]=Ir(oe,ae,de,Te,tt),this.tileCoords.push({z:ae,x:de,y:Te}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,de,Te,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));const Pr=`z${ae}`;this.stats[Pr]=(this.stats[Pr]||0)+1,this.total++}if($e.source=oe,Le==null){if(ae===tt.indexMaxZoom||$e.numPoints<=tt.indexMaxPoints)continue}else{if(ae===tt.maxZoom||ae===Le)continue;if(Le!=null){const Pr=Le-ae;if(de!==je>>Pr||Te!==Je>>Pr)continue}}if($e.source=null,oe.length===0)continue;ct>1&&console.time("clipping");const Xt=.5*tt.buffer/tt.extent,cr=.5-Xt,Nt=.5+Xt,Ht=1+Xt;let _r=null,ut=null,Lt=null,Cr=null,Kt=ar(oe,it,de-Xt,de+Nt,0,$e.minX,$e.maxX,tt),jt=ar(oe,it,de+cr,de+Ht,0,$e.minX,$e.maxX,tt);oe=null,Kt&&(_r=ar(Kt,it,Te-Xt,Te+Nt,1,$e.minY,$e.maxY,tt),ut=ar(Kt,it,Te+cr,Te+Ht,1,$e.minY,$e.maxY,tt),Kt=null),jt&&(Lt=ar(jt,it,Te-Xt,Te+Nt,1,$e.minY,$e.maxY,tt),Cr=ar(jt,it,Te+cr,Te+Ht,1,$e.minY,$e.maxY,tt),jt=null),ct>1&&console.timeEnd("clipping"),Fe.push(_r||[],ae+1,2*de,2*Te),Fe.push(ut||[],ae+1,2*de,2*Te+1),Fe.push(Lt||[],ae+1,2*de+1,2*Te),Fe.push(Cr||[],ae+1,2*de+1,2*Te+1)}}getTile(oe,ae,de){oe=+oe,ae=+ae,de=+de;const Te=this.options,{extent:Le,debug:je}=Te;if(oe<0||oe>24)return null;const Je=1<<oe,Fe=nr(oe,ae=ae+Je&Je-1,de);if(this.tiles[Fe])return wr(this.tiles[Fe],Le);je>1&&console.log("drilling down to z%d-%d-%d",oe,ae,de);let tt,ct=oe,it=ae,Ot=de;for(;!tt&&ct>0;)ct--,it>>=1,Ot>>=1,tt=this.tiles[nr(ct,it,Ot)];return tt&&tt.source?(je>1&&(console.log("found parent tile z%d-%d-%d",ct,it,Ot),console.time("drilling down")),this.splitTile(tt.source,ct,it,Ot,oe,ae,de),je>1&&console.timeEnd("drilling down"),this.tiles[Fe]?wr(this.tiles[Fe],Le):null):null}}function nr(ke,oe,ae){return 32*((1<<ke)*ae+oe)+ke}class mr extends x{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(oe,ae){return c._(this,void 0,void 0,function*(){const de=oe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Te=this._geoJSONIndex.getTile(de.z,de.x,de.y);if(!Te)return null;const Le=new $(Te.features,{version:2,extent:c.$});let je=function(Je){const Fe=new c.cM;return function(tt,ct){for(const it in tt.layers)ct.writeMessage(3,W,tt.layers[it])}(Je,Fe),Fe.finish()}(Le);return je.byteOffset===0&&je.byteLength===je.buffer.byteLength||(je=new Uint8Array(je)),{vectorTile:Le,rawData:je.buffer}})}loadData(oe){return c._(this,void 0,void 0,function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const de=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.cN(oe.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(oe,this._pendingRequest);const Te=yield this._pendingData;this._geoJSONIndex=oe.cluster?new Ie(function({superclusterOptions:je,clusterProperties:Je}){if(!Je||!je)return je;const Fe={},tt={},ct={accumulated:null,zoom:0},it={properties:null},Ot=Object.keys(Je);for(const $e of Ot){const[Xt,cr]=Je[$e],Nt=c.cT(cr),Ht=c.cT(typeof Xt=="string"?[Xt,["accumulated"],["get",$e]]:Xt);Fe[$e]=Nt.value,tt[$e]=Ht.value}return je.map=$e=>{it.properties=$e;const Xt={};for(const cr of Ot)Xt[cr]=Fe[cr].evaluate(ct,it);return Xt},je.reduce=($e,Xt)=>{it.properties=Xt;for(const cr of Ot)ct.accumulated=$e[cr],$e[cr]=tt[cr].evaluate(ct,it)},je}(oe)).load(Te.features):function(je,Je){return new lr(je,Je)}(Te,oe.geojsonVtOptions),this.loaded={};const Le={data:Te};if(de){const je=de.finish();je&&(Le.resourceTiming={},Le.resourceTiming[oe.source]=JSON.parse(JSON.stringify(je)))}return Le}catch(Te){if(delete this._pendingRequest,c.cy(Te))return{abandoned:!0};throw Te}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(oe){const ae=this.loaded;return ae&&ae[oe.uid]?super.reloadTile(oe):this.loadTile(oe)}loadAndProcessGeoJSON(oe,ae){return c._(this,void 0,void 0,function*(){let de=yield this.loadGeoJSON(oe,ae);if(delete this._pendingRequest,typeof de!="object")throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`);if(z(de,!0),oe.filter){const Te=c.cT(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Te.result==="error")throw new Error(Te.value.map(je=>`${je.key}: ${je.message}`).join(", "));de={type:"FeatureCollection",features:de.features.filter(je=>Te.value.evaluate({zoom:0},je))}}return de})}loadGeoJSON(oe,ae){return c._(this,void 0,void 0,function*(){const{promoteId:de}=oe;if(oe.request){const Te=yield c.j(oe.request,ae);return this._dataUpdateable=c.cV(Te.data,de)?c.cU(Te.data,de):void 0,Te.data}if(typeof oe.data=="string")try{const Te=JSON.parse(oe.data);return this._dataUpdateable=c.cV(Te,de)?c.cU(Te,de):void 0,Te}catch{throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`)}if(!oe.dataDiff)throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${oe.source}`);return c.cW(this._dataUpdateable,oe.dataDiff,de),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(oe){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(oe){return this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId)}getClusterChildren(oe){return this._geoJSONIndex.getChildren(oe.clusterId)}getClusterLeaves(oe){return this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset)}}class Yr{constructor(oe){this.self=oe,this.actor=new c.J(oe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ae,de)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=de},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=ae=>{c.cX.setMethods(ae)},this.actor.registerMessageHandler("LDT",(ae,de)=>this._getDEMWorkerSource(ae,de.source).loadTile(de)),this.actor.registerMessageHandler("RDT",(ae,de)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ae,de.source).removeTile(de)})),this.actor.registerMessageHandler("GCEZ",(ae,de)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterExpansionZoom(de)})),this.actor.registerMessageHandler("GCC",(ae,de)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterChildren(de)})),this.actor.registerMessageHandler("GCL",(ae,de)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterLeaves(de)})),this.actor.registerMessageHandler("LD",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).loadData(de)),this.actor.registerMessageHandler("GD",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).getData()),this.actor.registerMessageHandler("LT",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).loadTile(de)),this.actor.registerMessageHandler("RT",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).reloadTile(de)),this.actor.registerMessageHandler("AT",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).abortTile(de)),this.actor.registerMessageHandler("RMT",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).removeTile(de)),this.actor.registerMessageHandler("RS",(ae,de)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[ae]||!this.workerSources[ae][de.type]||!this.workerSources[ae][de.type][de.source])return;const Te=this.workerSources[ae][de.type][de.source];delete this.workerSources[ae][de.type][de.source],Te.removeSource!==void 0&&Te.removeSource(de)})),this.actor.registerMessageHandler("RM",ae=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae]})),this.actor.registerMessageHandler("SR",(ae,de)=>c._(this,void 0,void 0,function*(){this.referrer=de})),this.actor.registerMessageHandler("SRPS",(ae,de)=>this._syncRTLPluginState(ae,de)),this.actor.registerMessageHandler("IS",(ae,de)=>c._(this,void 0,void 0,function*(){this.self.importScripts(de)})),this.actor.registerMessageHandler("SI",(ae,de)=>this._setImages(ae,de)),this.actor.registerMessageHandler("UL",(ae,de)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ae).update(de.layers,de.removedIds)})),this.actor.registerMessageHandler("SL",(ae,de)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ae).replace(de)}))}_setImages(oe,ae){return c._(this,void 0,void 0,function*(){this.availableImages[oe]=ae;for(const de in this.workerSources[oe]){const Te=this.workerSources[oe][de];for(const Le in Te)Te[Le].availableImages=ae}})}_syncRTLPluginState(oe,ae){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(ae,this.self.importScripts)})}_getAvailableImages(oe){let ae=this.availableImages[oe];return ae||(ae=[]),ae}_getLayerIndex(oe){let ae=this.layerIndexes[oe];return ae||(ae=this.layerIndexes[oe]=new s),ae}_getWorkerSource(oe,ae,de){if(this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ae]||(this.workerSources[oe][ae]={}),!this.workerSources[oe][ae][de]){const Te={sendAsync:(Le,je)=>(Le.targetMapId=oe,this.actor.sendAsync(Le,je))};switch(ae){case"vector":this.workerSources[oe][ae][de]=new x(Te,this._getLayerIndex(oe),this._getAvailableImages(oe));break;case"geojson":this.workerSources[oe][ae][de]=new mr(Te,this._getLayerIndex(oe),this._getAvailableImages(oe));break;default:this.workerSources[oe][ae][de]=new this.externalWorkerSourceTypes[ae](Te,this._getLayerIndex(oe),this._getAvailableImages(oe))}}return this.workerSources[oe][ae][de]}_getDEMWorkerSource(oe,ae){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ae]||(this.demWorkerSources[oe][ae]=new P),this.demWorkerSources[oe][ae]}}return c.i(self)&&(self.worker=new Yr(self)),Yr}),i("index",["exports","./shared"],function(c,s){var p="5.7.0";function g(){var w=new s.A(4);return s.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let _,x;const P={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,o,d){const y=requestAnimationFrame(T=>{v(),o(T)}),{unsubscribe:v}=s.s(w.signal,"abort",()=>{v(),cancelAnimationFrame(y),d(s.c())},!1)},frameAsync(w){return new Promise((o,d)=>{this.frame(w,o,d)})},getImageData(w,o=0){return this.getImageCanvasContext(w).getImageData(-o,-o,w.width+2*o,w.height+2*o)},getImageCanvasContext(w){const o=window.document.createElement("canvas"),d=o.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return o.width=w.width,o.height=w.height,d.drawImage(w,0,0,w.width,w.height),d},resolveURL:w=>(_||(_=document.createElement("a")),_.href=w,_.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(x==null&&(x=matchMedia("(prefers-reduced-motion: reduce)")),x.matches)}};class A{static testProp(o){if(!A.docStyle)return o[0];for(let d=0;d<o.length;d++)if(o[d]in A.docStyle)return o[d];return o[0]}static create(o,d,y){const v=window.document.createElement(o);return d!==void 0&&(v.className=d),y&&y.appendChild(v),v}static createNS(o,d){return window.document.createElementNS(o,d)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(o,d){o.style[A.transformProp]=d}static addEventListener(o,d,y,v={}){o.addEventListener(d,y,"passive"in v?v:v.capture)}static removeEventListener(o,d,y,v={}){o.removeEventListener(d,y,"passive"in v?v:v.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(o){const d=o.getBoundingClientRect();return{x:d.width/o.offsetWidth||1,y:d.height/o.offsetHeight||1,boundingClientRect:d}}static getPoint(o,d,y){const v=d.boundingClientRect;return new s.P((y.clientX-v.left)/d.x-o.clientLeft,(y.clientY-v.top)/d.y-o.clientTop)}static mousePos(o,d){const y=A.getScale(o);return A.getPoint(o,y,d)}static touchPos(o,d){const y=[],v=A.getScale(o);for(let T=0;T<d.length;T++)y.push(A.getPoint(o,v,d[T]));return y}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}static sanitize(o){const d=new DOMParser().parseFromString(o,"text/html").body||document.createElement("body"),y=d.querySelectorAll("script");for(const v of y)v.remove();return A.clean(d),d.innerHTML}static isPossiblyDangerous(o,d){const y=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(o)||!y.includes("javascript:")&&!y.includes("data:"))||!!o.startsWith("on")||void 0}static clean(o){const d=o.children;for(const y of d)A.removeAttributes(y),A.clean(y)}static removeAttributes(o){for(const{name:d,value:y}of o.attributes)A.isPossiblyDangerous(d,y)&&o.removeAttribute(d)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const M={supported:!1,testSupport:function(w){!j&&z&&($?W(w):F=w)}};let F,z,j=!1,$=!1;function W(w){const o=w.createTexture();w.bindTexture(w.TEXTURE_2D,o);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,z),w.isContextLost())return;M.supported=!0}catch{}w.deleteTexture(o),j=!0}var X;typeof document<"u"&&(z=document.createElement("img"),z.onload=()=>{F&&W(F),F=null,$=!0},z.onerror=()=>{j=!0,F=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let o,d,y,v;w.resetRequestQueue=()=>{o=[],d=0,y=0,v={}},w.addThrottleControl=L=>{const q=y++;return v[q]=L,q},w.removeThrottleControl=L=>{delete v[L],R()},w.getImage=(L,q,V=!0)=>new Promise((Y,H)=>{M.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),s.e(L,{type:"image"}),o.push({abortController:q,requestParameters:L,supportImageRefresh:V,state:"queued",onError:re=>{H(re)},onSuccess:re=>{Y(re)}}),R()});const T=L=>s._(this,void 0,void 0,function*(){L.state="running";const{requestParameters:q,supportImageRefresh:V,onError:Y,onSuccess:H,abortController:re}=L,le=V===!1&&!s.i(self)&&!s.g(q.url)&&(!q.headers||Object.keys(q.headers).reduce((be,Se)=>be&&Se==="accept",!0));d++;const _e=le?k(q,re):s.m(q,re);try{const be=yield _e;delete L.abortController,L.state="completed",be.data instanceof HTMLImageElement||s.b(be.data)?H(be):be.data&&H({data:yield(ge=be.data,typeof createImageBitmap=="function"?s.f(ge):s.h(ge)),cacheControl:be.cacheControl,expires:be.expires})}catch(be){delete L.abortController,Y(be)}finally{d--,R()}var ge}),R=()=>{const L=(()=>{for(const q of Object.keys(v))if(v[q]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let q=d;q<L&&o.length>0;q++){const V=o.shift();V.abortController.signal.aborted?q--:T(V)}},k=(L,q)=>new Promise((V,Y)=>{const H=new Image,re=L.url,le=L.credentials;le&&le==="include"?H.crossOrigin="use-credentials":(le&&le==="same-origin"||!s.d(re))&&(H.crossOrigin="anonymous"),q.signal.addEventListener("abort",()=>{H.src="",Y(s.c())}),H.fetchPriority="high",H.onload=()=>{H.onerror=H.onload=null,V({data:H})},H.onerror=()=>{H.onerror=H.onload=null,q.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},H.src=re})}(X||(X={})),X.resetRequestQueue();class te{constructor(o){this._transformRequestFn=o??null}transformRequest(o,d){return this._transformRequestFn&&this._transformRequestFn(o,d)||{url:o}}setTransformRequest(o){this._transformRequestFn=o}}function ne(w){const o=[];if(typeof w=="string")o.push({id:"default",url:w});else if(w&&w.length>0){const d=[];for(const{id:y,url:v}of w){const T=`${y}${v}`;d.indexOf(T)===-1&&(d.push(T),o.push({id:y,url:v}))}}return o}function Z(w,o,d){try{const y=new URL(w);return y.pathname+=`${o}${d}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function U(w){const{userImage:o}=w;return!!(o&&o.render&&o.render())&&(w.data.replace(new Uint8Array(o.data.buffer)),!0)}class K extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:d,promiseResolve:y}of this.requestors)y(this._getImagesForIds(d));this.requestors=[]}}getImage(o){const d=this.images[o];if(d&&!d.data&&d.spriteData){const y=d.spriteData;d.data=new s.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),d.spriteData=null}return d}addImage(o,d){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,d)&&(this.images[o]=d)}_validate(o,d){let y=!0;const v=d.data||d.spriteData;return this._validateStretch(d.stretchX,v&&v.width)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "stretchX" value`))),y=!1),this._validateStretch(d.stretchY,v&&v.height)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "stretchY" value`))),y=!1),this._validateContent(d.content,d)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "content" value`))),y=!1),y}_validateStretch(o,d){if(!o)return!0;let y=0;for(const v of o){if(v[0]<y||v[1]<v[0]||d<v[1])return!1;y=v[1]}return!0}_validateContent(o,d){if(!o)return!0;if(o.length!==4)return!1;const y=d.spriteData,v=y&&y.width||d.data.width,T=y&&y.height||d.data.height;return!(o[0]<0||v<o[0]||o[1]<0||T<o[1]||o[2]<0||v<o[2]||o[3]<0||T<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,d,y=!0){const v=this.getImage(o);if(y&&(v.data.width!==d.data.width||v.data.height!==d.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=v.version+1,this.images[o]=d,this.updatedImages[o]=!0}removeImage(o){const d=this.images[o];delete this.images[o],delete this.patterns[o],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((d,y)=>{let v=!0;if(!this.isLoaded())for(const T of o)this.images[T]||(v=!1);this.isLoaded()||v?d(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:d})})}_getImagesForIds(o){const d={};for(const y of o){let v=this.getImage(y);v||(this.fire(new s.l("styleimagemissing",{id:y})),v=this.getImage(y)),v?d[y]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:s.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:o,height:d}=this.atlasImage;return{width:o,height:d}}getPattern(o){const d=this.patterns[o],y=this.getImage(o);if(!y)return null;if(d&&d.position.version===y.version)return d.position;if(d)d.position.version=y.version;else{const v={w:y.data.width+2,h:y.data.height+2,x:0,y:0},T=new s.I(v,y);this.patterns[o]={bin:v,position:T}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const d=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(o,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const T in this.patterns)o.push(this.patterns[T].bin);const{w:d,h:y}=s.p(o),v=this.atlasImage;v.resize({width:d||1,height:y||1});for(const T in this.patterns){const{bin:R}=this.patterns[T],k=R.x+1,L=R.y+1,q=this.getImage(T).data,V=q.width,Y=q.height;s.R.copy(q,v,{x:0,y:0},{x:k,y:L},{width:V,height:Y}),s.R.copy(q,v,{x:0,y:Y-1},{x:k,y:L-1},{width:V,height:1}),s.R.copy(q,v,{x:0,y:0},{x:k,y:L+Y},{width:V,height:1}),s.R.copy(q,v,{x:V-1,y:0},{x:k-1,y:L},{width:1,height:Y}),s.R.copy(q,v,{x:0,y:0},{x:k+V,y:L},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const d of o){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const y=this.getImage(d);y||s.w(`Image with ID: "${d}" was not found`),U(y)&&this.updateImage(d,y)}}}const he=1e20;function ue(w,o,d,y,v,T,R,k,L){for(let q=o;q<o+y;q++)we(w,d*T+q,T,v,R,k,L);for(let q=d;q<d+v;q++)we(w,q*T+o,1,y,R,k,L)}function we(w,o,d,y,v,T,R){T[0]=0,R[0]=-he,R[1]=he,v[0]=w[o];for(let k=1,L=0,q=0;k<y;k++){v[k]=w[o+k*d];const V=k*k;do{const Y=T[L];q=(v[k]-v[Y]+V-Y*Y)/(k-Y)/2}while(q<=R[L]&&--L>-1);L++,T[L]=k,R[L]=q,R[L+1]=he}for(let k=0,L=0;k<y;k++){for(;R[L+1]<k;)L++;const q=T[L],V=k-q;w[o+k*d]=v[q]+V*V}}class Ie{constructor(o,d,y){this.requestManager=o,this.localIdeographFontFamily=d,this.entries={},this.lang=y}setURL(o){this.url=o}getGlyphs(o){return s._(this,void 0,void 0,function*(){const d=[];for(const T in o)for(const R of o[T])d.push(this._getAndCacheGlyphsPromise(T,R));const y=yield Promise.all(d),v={};for(const{stack:T,id:R,glyph:k}of y)v[T]||(v[T]={}),v[T][R]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return v})}_getAndCacheGlyphsPromise(o,d){return s._(this,void 0,void 0,function*(){let y=this.entries[o];y||(y=this.entries[o]={glyphs:{},requests:{},ranges:{}});let v=y.glyphs[d];if(v!==void 0)return{stack:o,id:d,glyph:v};if(v=this._tinySDF(y,o,d),v)return y.glyphs[d]=v,{stack:o,id:d,glyph:v};const T=Math.floor(d/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(y.ranges[T])return{stack:o,id:d,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!y.requests[T]){const k=Ie.loadGlyphRange(o,T,this.url,this.requestManager);y.requests[T]=k}const R=yield y.requests[T];for(const k in R)this._doesCharSupportLocalGlyph(+k)||(y.glyphs[+k]=R[+k]);return y.ranges[T]=!0,{stack:o,id:d,glyph:R[d]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(o))||s.u["CJK Unified Ideographs"](o)||s.u["Hangul Syllables"](o)||s.u.Hiragana(o)||s.u.Katakana(o)||s.u["CJK Symbols and Punctuation"](o)||s.u["Halfwidth and Fullwidth Forms"](o))}_tinySDF(o,d,y){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(y))return;let T=o.tinySDF;if(!T){let k="400";/bold/i.test(d)?k="900":/medium/i.test(d)?k="500":/light/i.test(d)&&(k="200"),T=o.tinySDF=new Ie.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:v,fontWeight:k})}const R=T.draw(String.fromCharCode(y));return{id:y,bitmap:new s.q({width:R.width||60,height:R.height||60},R.data),metrics:{width:R.glyphWidth/2||24,height:R.glyphHeight/2||24,left:R.glyphLeft/2+.5||0,top:R.glyphTop/2-27.5||-8,advance:R.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ie.loadGlyphRange=function(w,o,d,y){return s._(this,void 0,void 0,function*(){const v=256*o,T=v+255,R=y.transformRequest(d.replace("{fontstack}",w).replace("{range}",`${v}-${T}`),"Glyphs"),k=yield s.n(R,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${o}, ${v}-${T}`);const L={};for(const q of s.o(k.data))L[q.id]=q;return L})},Ie.TinySDF=class{constructor({fontSize:w=24,buffer:o=3,radius:d=8,cutoff:y=.25,fontFamily:v="sans-serif",fontWeight:T="normal",fontStyle:R="normal",lang:k=null}={}){this.buffer=o,this.cutoff=y,this.radius=d,this.lang=k;const L=this.size=w+4*o,q=this._createCanvas(L),V=this.ctx=q.getContext("2d",{willReadFrequently:!0});V.font=`${R} ${T} ${w}px ${v}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(w){const o=document.createElement("canvas");return o.width=o.height=w,o}draw(w){const{width:o,actualBoundingBoxAscent:d,actualBoundingBoxDescent:y,actualBoundingBoxLeft:v,actualBoundingBoxRight:T}=this.ctx.measureText(w),R=Math.ceil(d),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-v))),L=Math.min(this.size-this.buffer,R+Math.ceil(y)),q=k+2*this.buffer,V=L+2*this.buffer,Y=Math.max(q*V,0),H=new Uint8ClampedArray(Y),re={data:H,width:q,height:V,glyphWidth:k,glyphHeight:L,glyphTop:R,glyphLeft:0,glyphAdvance:o};if(k===0||L===0)return re;const{ctx:le,buffer:_e,gridInner:ge,gridOuter:be}=this;this.lang&&(le.lang=this.lang),le.clearRect(_e,_e,k,L),le.fillText(w,_e,_e+R);const Se=le.getImageData(_e,_e,k,L);be.fill(he,0,Y),ge.fill(0,0,Y);for(let Re=0;Re<L;Re++)for(let Pe=0;Pe<k;Pe++){const De=Se.data[4*(Re*k+Pe)+3]/255;if(De===0)continue;const Be=(Re+_e)*q+Pe+_e;if(De===1)be[Be]=0,ge[Be]=he;else{const Ae=.5-De;be[Be]=Ae>0?Ae*Ae:0,ge[Be]=Ae<0?Ae*Ae:0}}ue(be,0,0,q,V,q,this.f,this.v,this.z),ue(ge,_e,_e,k,L,q,this.f,this.v,this.z);for(let Re=0;Re<Y;Re++){const Pe=Math.sqrt(be[Re])-Math.sqrt(ge[Re]);H[Re]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return re}};class ee{constructor(){this.specification=s.v.light.position}possiblyEvaluate(o,d){return s.B(o.expression.evaluate(d))}interpolate(o,d,y){return{x:s.C.number(o.x,d.x,y),y:s.C.number(o.y,d.y,y),z:s.C.number(o.z,d.z,y)}}}let fe;class ve extends s.E{constructor(o){super(),fe=fe||new s.r({anchor:new s.D(s.v.light.anchor),position:new ee,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.t(fe),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,d={}){if(!this._validate(s.x,o,d))for(const y in o){const v=o[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),v):this._transitionable.setValue(y,v)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,y){return(!y||y.validate!==!1)&&s.y(this,o.call(s.z,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const xe=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Xe extends s.E{constructor(o){super(),this._transitionable=new s.t(xe),this.setSky(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0))}setSky(o,d={}){if(!this._validate(s.G,o,d)){o||(o={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in o){const v=o[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),v):this._transitionable.setValue(y,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,y={}){return y?.validate!==!1&&s.y(this,o.call(s.z,s.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(o){return o<60?0:o<70?(o-60)/10:1}}class Ke{constructor(o,d){this.width=o,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,d){const y=o.join(",")+String(d);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(o,d)),this.dashEntry[y]}getDashRanges(o,d,y){const v=[];let T=o.length%2==1?-o[o.length-1]*y:0,R=o[0]*y,k=!0;v.push({left:T,right:R,isDash:k,zeroLength:o[0]===0});let L=o[0];for(let q=1;q<o.length;q++){k=!k;const V=o[q];T=L*y,L+=V,R=L*y,v.push({left:T,right:R,isDash:k,zeroLength:V===0})}return v}addRoundDash(o,d,y){const v=d/2;for(let T=-y;T<=y;T++){const R=this.width*(this.nextRow+y+T);let k=0,L=o[k];for(let q=0;q<this.width;q++){q/L.right>1&&(L=o[++k]);const V=Math.abs(q-L.left),Y=Math.abs(q-L.right),H=Math.min(V,Y);let re;const le=T/y*(v+1);if(L.isDash){const _e=v-Math.abs(le);re=Math.sqrt(H*H+_e*_e)}else re=v-Math.sqrt(H*H+le*le);this.data[R+q]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(o){for(let k=o.length-1;k>=0;--k){const L=o[k],q=o[k+1];L.zeroLength?o.splice(k,1):q&&q.isDash===L.isDash&&(q.left=L.left,o.splice(k,1))}const d=o[0],y=o[o.length-1];d.isDash===y.isDash&&(d.left=y.left-this.width,y.right=d.right+this.width);const v=this.width*this.nextRow;let T=0,R=o[T];for(let k=0;k<this.width;k++){k/R.right>1&&(R=o[++T]);const L=Math.abs(k-R.left),q=Math.abs(k-R.right),V=Math.min(L,q);this.data[v+k]=Math.max(0,Math.min(255,(R.isDash?V:-V)+128))}}addDash(o,d){const y=d?7:0,v=2*y+1;if(this.nextRow+v>this.height)return s.w("LineAtlas out of space"),null;let T=0;for(let k=0;k<o.length;k++)T+=o[k];if(T!==0){const k=this.width/T,L=this.getDashRanges(o,this.width,k);d?this.addRoundDash(L,k,y):this.addRegularDash(L)}const R={y:(this.nextRow+y+.5)/this.height,height:2*y/this.height,width:T};return this.nextRow+=v,this.dirty=!0,R}bind(o){const d=o.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const Ze="maplibre_preloaded_worker_pool";class bt{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<bt.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ze]}numActive(){return Object.keys(this.active).length}}const qe=Math.floor(P.hardwareConcurrency/2);let kt,Jt;function Pt(){return kt||(kt=new bt),kt}bt.workerCount=s.H(globalThis)?Math.max(Math.min(qe,3),1):1;class dt{constructor(o,d){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=d;const y=this.workerPool.acquire(d);for(let v=0;v<y.length;v++){const T=new s.J(y[v],d);T.name=`Worker ${v}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,d){const y=[];for(const v of this.actors)y.push(v.sendAsync({type:o,data:d}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,d){for(const y of this.actors)y.registerMessageHandler(o,d)}}function er(){return Jt||(Jt=new dt(Pt(),s.K),Jt.registerMessageHandler("GR",(w,o,d)=>s.m(o,d))),Jt}function Wt(w,o){const d=s.L();return s.M(d,d,[1,1,0]),s.N(d,d,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?s.O(d,d,w.calculatePosMatrix(o.toUnwrapped())):d}function ar(w,o,d,y,v,T,R){var k;const L=function(H,re,le){if(H)for(const _e of H){const ge=re[_e];if(ge&&ge.source===le&&ge.type==="fill-extrusion")return!0}else for(const _e in re){const ge=re[_e];if(ge.source===le&&ge.type==="fill-extrusion")return!0}return!1}((k=v?.layers)!==null&&k!==void 0?k:null,o,w.id),q=T.maxPitchScaleFactor(),V=w.tilesIn(y,q,L);V.sort(_t);const Y=[];for(const H of V)Y.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(o,d,w._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,v,T,q,Wt(w.transform,H.tileID),R?(re,le)=>R(H.tileID,re,le):void 0)});return function(H,re){for(const le in H)for(const _e of H[le])Ve(_e,re);return H}(function(H){const re={},le={};for(const _e of H){const ge=_e.queryResults,be=_e.wrappedTileID,Se=le[be]=le[be]||{};for(const Re in ge){const Pe=ge[Re],De=Se[Re]=Se[Re]||{},Be=re[Re]=re[Re]||[];for(const Ae of Pe)De[Ae.featureIndex]||(De[Ae.featureIndex]=!0,Be.push(Ae))}}return re}(Y),w)}function _t(w,o){const d=w.tileID,y=o.tileID;return d.overscaledZ-y.overscaledZ||d.canonical.y-y.canonical.y||d.wrap-y.wrap||d.canonical.x-y.canonical.x}function Ve(w,o){const d=w.feature,y=o.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=y}function pt(w,o,d){return s._(this,void 0,void 0,function*(){let y=w;if(w.url?y=(yield s.j(o.transformRequest(w.url,"Source"),d)).data:yield P.frameAsync(d),!y)return null;const v=s.Q(s.e(y,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(v.vectorLayerIds=y.vector_layers.map(T=>T.id)),v})}class lt{constructor(o,d){o&&(d?this.setSouthWest(o).setNorthEast(d):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof s.S?new s.S(o.lng,o.lat):s.S.convert(o),this}setSouthWest(o){return this._sw=o instanceof s.S?new s.S(o.lng,o.lat):s.S.convert(o),this}extend(o){const d=this._sw,y=this._ne;let v,T;if(o instanceof s.S)v=o,T=o;else{if(!(o instanceof lt))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(lt.convert(o)):this.extend(s.S.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(s.S.convert(o)):this;if(v=o._sw,T=o._ne,!v||!T)return this}return d||y?(d.lng=Math.min(v.lng,d.lng),d.lat=Math.min(v.lat,d.lat),y.lng=Math.max(T.lng,y.lng),y.lat=Math.max(T.lat,y.lat)):(this._sw=new s.S(v.lng,v.lat),this._ne=new s.S(T.lng,T.lat)),this}getCenter(){return new s.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.S(this.getWest(),this.getNorth())}getSouthEast(){return new s.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:d,lat:y}=s.S.convert(o);let v=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&v}static convert(o){return o instanceof lt?o:o&&new lt(o)}static fromLngLat(o,d=0){const y=360*d/40075017,v=y/Math.cos(Math.PI/180*o.lat);return new lt(new s.S(o.lng-v,o.lat-y),new s.S(o.lng+v,o.lat+y))}adjustAntiMeridian(){const o=new s.S(this._sw.lng,this._sw.lat),d=new s.S(this._ne.lng,this._ne.lat);return new lt(o,o.lng>d.lng?new s.S(d.lng+360,d.lat):d)}}class Tt{constructor(o,d,y){this.bounds=lt.convert(this.validateBounds(o)),this.minzoom=d||0,this.maxzoom=y||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const d=Math.pow(2,o.z),y=Math.floor(s.V(this.bounds.getWest())*d),v=Math.floor(s.U(this.bounds.getNorth())*d),T=Math.ceil(s.V(this.bounds.getEast())*d),R=Math.ceil(s.U(this.bounds.getSouth())*d);return o.x>=y&&o.x<T&&o.y>=v&&o.y<R}}class vt extends s.E{constructor(o,d,y,v){if(super(),this.id=o,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.Q(d,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(s.e(this,o),o.bounds&&(this.tileBounds=new Tt(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new s.k(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(o){return s._(this,void 0,void 0,function*(){const d=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(d,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};y.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(o.actor&&o.state!=="expired"){if(o.state==="loading")return new Promise((T,R)=>{o.reloadPromise={resolve:T,reject:R}})}else o.actor=this.dispatcher.getActor(),v="LT";o.abortController=new AbortController;try{const T=yield o.actor.sendAsync({type:v,data:y},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,T)}catch(T){if(delete o.abortController,o.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,d){if(d&&d.resourceTiming&&(o.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&o.setExpiryData(d),o.loadVectorData(d,this.map.painter),o.reloadPromise){const y=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(y.resolve).catch(y.reject)}}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Dt extends s.E{constructor(o,d,y,v){super(),this.id=o,this.dispatcher=y,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},d),s.e(this,s.Q(d,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(o=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const d=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(s.e(this,d),d.bounds&&(this.tileBounds=new Tt(d.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:o})))}catch(d){this._tileJSONRequest=null,this.fire(new s.k(d))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load(!0)}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return s.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return s._(this,void 0,void 0,function*(){const d=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{const y=yield X.getImage(this.map._requestManager.transformRequest(d,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&o.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const v=this.map.painter.context,T=v.gl,R=y.data;o.texture=this.map.painter.getTileTexture(R.width),o.texture?o.texture.update(R,{useMipmap:!0}):(o.texture=new s.T(v,R,T.RGBA,{useMipmap:!0}),o.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),o.state="loaded"}}catch(y){if(delete o.abortController,o.aborted)o.state="unloaded";else if(y)throw o.state="errored",y}})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class Yt extends Dt{constructor(o,d,y,v){super(o,d,y,v),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(o){return s._(this,void 0,void 0,function*(){const d=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(d,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{const v=yield X.getImage(y,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(v&&v.data){const T=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&o.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const R=s.b(T)&&s.W()?T:yield this.readImageNow(T),k={type:this.type,uid:o.uid,source:this.id,rawImageData:R,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||o.state==="expired"){o.actor=this.dispatcher.getActor();const L=yield o.actor.sendAsync({type:"LDT",data:k});o.dem=L,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(v){if(delete o.abortController,o.aborted)o.state="unloaded";else if(v)throw o.state="errored",v}})}readImageNow(o){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.X()){const d=o.width+2,y=o.height+2;try{return new s.R({width:d,height:y},yield s.Y(o,-1,-1,d,y))}catch{}}return P.getImageData(o,1)})}_getNeighboringTiles(o){const d=o.canonical,y=Math.pow(2,d.z),v=(d.x-1+y)%y,T=d.x===0?o.wrap-1:o.wrap,R=(d.x+1+y)%y,k=d.x+1===y?o.wrap+1:o.wrap,L={};return L[new s.Z(o.overscaledZ,T,d.z,v,d.y).key]={backfilled:!1},L[new s.Z(o.overscaledZ,k,d.z,R,d.y).key]={backfilled:!1},d.y>0&&(L[new s.Z(o.overscaledZ,T,d.z,v,d.y-1).key]={backfilled:!1},L[new s.Z(o.overscaledZ,o.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},L[new s.Z(o.overscaledZ,k,d.z,R,d.y-1).key]={backfilled:!1}),d.y+1<y&&(L[new s.Z(o.overscaledZ,T,d.z,v,d.y+1).key]={backfilled:!1},L[new s.Z(o.overscaledZ,o.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},L[new s.Z(o.overscaledZ,k,d.z,R,d.y+1).key]={backfilled:!1}),L}unloadTile(o){return s._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class Bt extends s.E{constructor(o,d,y,v){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:d.data},this.actor=y.getActor(),this.setEventedParent(v),this._data=d.data,this._options=s.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:s.$,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:s.$,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(o){return o*(s.$/this.tileSize)}_getClusterMaxZoom(o){const d=o?Math.round(o):this.maxzoom-1;return Number.isInteger(o)||o===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${o}" rounded to "${d}"`),d}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._pendingWorkerUpdate={data:o},this._updateWorkerData(),this}updateData(o){return this._pendingWorkerUpdate.diff=s.a0(this._pendingWorkerUpdate.diff,o),this._updateWorkerData(),this}getData(){return s._(this,void 0,void 0,function*(){const o=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:o})})}getCoordinatesFromGeometry(o){return o.type==="GeometryCollection"?o.geometries.map(d=>d.coordinates).flat(1/0):o.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const o=new lt,d=yield this.getData();let y;switch(d.type){case"FeatureCollection":y=d.features.map(v=>this.getCoordinatesFromGeometry(v.geometry)).flat(1/0);break;case"Feature":y=this.getCoordinatesFromGeometry(d.geometry);break;default:y=this.getCoordinatesFromGeometry(d)}if(y.length==0)return o;for(let v=0;v<y.length-1;v+=2)o.extend([y[v],y[v+1]]);return o})}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(o.clusterRadius)),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(o.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,d,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:d,offset:y}})}_updateWorkerData(){return s._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:o,diff:d}=this._pendingWorkerUpdate;if(!o&&!d)return void s.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const y=s.e({type:this.type},this.workerOptions);o?(typeof o=="string"?(y.request=this.map._requestManager.transformRequest(P.resolveURL(o),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(o),this._pendingWorkerUpdate.data=void 0):d&&(y.dataDiff=d,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||v.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));this._data=v.data;let T=null;v.resourceTiming&&v.resourceTiming[this.id]&&(T=v.resourceTiming[this.id].slice(0));const R={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&s.e(R,{resourceTiming:T}),this.fire(new s.l("data",Object.assign(Object.assign({},R),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},R),{sourceDataType:"content"})))}catch(v){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(v))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(o){return s._(this,void 0,void 0,function*(){const d=o.actor?"RT":"LT";o.actor=this.actor;const y={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};o.abortController=new AbortController;const v=yield this.actor.sendAsync({type:d,data:y},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(v,this.map.painter,d==="RT")})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class wr extends s.E{constructor(o,d,y,v){super(),this.flippedWindingOrder=!1,this.id=o,this.dispatcher=y,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=d}load(o){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield X.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,o&&(this.coordinates=o),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new s.k(d))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;const d=o.map(s.a1.fromLngLat);var y;return this.tileID=function(v){const T=s.a2.fromPoints(v),R=T.width(),k=T.height(),L=Math.max(R,k),q=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),V=Math.pow(2,q);return new s.a4(q,Math.floor((T.minX+T.maxX)/2*V),Math.floor((T.minY+T.maxY)/2*V))}(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(v=>this.tileID.getTilePoint(v)._round()),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,d=o.gl;this.texture||(this.texture=new s.T(o,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const v in this.tiles){const T=this.tiles[v];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(o){const{minX:d,minY:y,maxX:v,maxY:T}=s.a2.fromPoints(o),R={};for(let k=0;k<=s.a3;k++){const L=Math.pow(2,k),q=Math.floor(d*L),V=Math.floor(y*L),Y=Math.floor(v*L),H=Math.floor(T*L);R[k]={minTileX:q,minTileY:V,maxTileX:Y,maxTileY:H}}return R}}class Vr extends wr{constructor(o,d,y,v){super(o,d,y,v),this.roundZoom=!0,this.type="video",this.options=d}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const o=this.options;this.urls=[];for(const d of o.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield s.a5(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new s.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const d=this.video.seekable;o<d.start(0)||o>d.end(0)?this.fire(new s.k(new s.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,d=o.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(o,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const v in this.tiles){const T=this.tiles[v];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ir extends wr{constructor(o,d,y,v){super(o,d,y,v),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(R=>typeof R!="number"))||this.fire(new s.k(new s.a6(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a6(`sources.${o}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new s.k(new s.a6(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a6(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a6(`sources.${o}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,y=d.gl;this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(d,this.canvas,y.RGBA,{premultiply:!0});let v=!1;for(const T in this.tiles){const R=this.tiles[T];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,v=!0)}v&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const Zr={},yr=w=>{switch(w){case"geojson":return Bt;case"image":return wr;case"raster":return Dt;case"raster-dem":return Yt;case"vector":return vt;case"video":return Vr;case"canvas":return Ir}return Zr[w]},ur="RTLPluginLoaded";class lr extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=er()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return s._(this,arguments,void 0,function*(d,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(ur))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let nr=null;function mr(){return nr||(nr=new lr),nr}class Yr{constructor(o,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=s.a7(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const d=o+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,d,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(v,T){const R={};if(!T)return R;for(const k of v){const L=k.layerIds.map(q=>T.getLayer(q)).filter(Boolean);if(L.length!==0){k.layers=L,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(q=>L.filter(V=>V.id===q)[0]));for(const q of L)R[q.id]=k}}return R}(o.buckets,d?.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const T=this.buckets[v];if(T instanceof s.a9){if(this.hasSymbolBuckets=!0,!y)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const T=this.buckets[v];if(T instanceof s.a9&&T.hasRTLText){this.hasRTLText=!0,mr().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const T=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(v).queryRadius(T))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new s.a8}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const y in this.buckets){const v=this.buckets[y];v.uploadPending()&&v.upload(o)}const d=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(o,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(o,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,d,y,v,T,R,k,L,q,V,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:T,scale:R,tileSize:this.tileSize,pixelPosMatrix:V,transform:L,params:k,queryPadding:this.queryPadding*q,getElevation:Y},o,d,y):{}}querySourceFeatures(o,d){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const v=y.loadVTLayers(),T=d&&d.sourceLayer?d.sourceLayer:"",R=v._geojsonTileLayer||v[T];if(!R)return;const k=s.aa(d&&d.filter),{z:L,x:q,y:V}=this.tileID.canonical,Y={z:L,x:q,y:V};for(let H=0;H<R.length;H++){const re=R.feature(H);if(k.needGeometry){const ge=s.ab(re,!0);if(!k.filter(new s.F(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!k.filter(new s.F(this.tileID.overscaledZ),re))continue;const le=y.getId(re,T),_e=new s.ac(re,L,q,V,le);_e.tile=Y,o.push(_e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const y=s.ad(o.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const y=Date.now();let v=!1;if(this.expirationTime>y)v=!1;else if(d)if(this.expirationTime<d)v=!0;else{const T=this.expirationTime-d;T?this.expirationTime=y+Math.max(T,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!d.style.hasLayer(v))continue;const T=this.buckets[v],R=T.layers[0].sourceLayer||"_geojsonTileLayer",k=y[R],L=o[R];if(!k||!L||Object.keys(L).length===0)continue;T.update(L,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const q=d&&d.style&&d.style.getLayer(v);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=P.now()+o}setDependencies(o,d){const y={};for(const v of d)y[v]=!0;this.dependencies[o]=y}hasDependency(o,d){for(const y of o){const v=this.dependencies[y];if(v){for(const T of d)if(v[T])return!0}}return!1}}class ke{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,y){const v=o.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const T={value:d,timeout:void 0};if(y!==void 0&&(T.timeout=setTimeout(()=>{this.remove(o,T)},y)),this.data[v].push(T),this.order.push(v),this.order.length>this.max){const R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const y=o.wrapped().key,v=d===void 0?0:this.data[y].indexOf(d),T=this.data[y][v];return this.data[y].splice(v,1),T.timeout&&clearTimeout(T.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(T.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const y in this.data)for(const v of this.data[y])o(v.value)||d.push(v);for(const y of d)this.remove(y.value.tileID,y)}}class oe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,y){const v=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][v]=this.stateChanges[o][v]||{},s.e(this.stateChanges[o][v],y),this.deletedStates[o]===null){this.deletedStates[o]={};for(const T in this.state[o])T!==v&&(this.deletedStates[o][T]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][v]===null){this.deletedStates[o][v]={};for(const T in this.state[o][v])y[T]||(this.deletedStates[o][v][T]=null)}else for(const T in y)this.deletedStates[o]&&this.deletedStates[o][v]&&this.deletedStates[o][v][T]===null&&delete this.deletedStates[o][v][T]}removeFeatureState(o,d,y){if(this.deletedStates[o]===null)return;const v=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},y&&d!==void 0)this.deletedStates[o][v]!==null&&(this.deletedStates[o][v]=this.deletedStates[o][v]||{},this.deletedStates[o][v][y]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][v])for(y in this.deletedStates[o][v]={},this.stateChanges[o][v])this.deletedStates[o][v][y]=null;else this.deletedStates[o][v]=null;else this.deletedStates[o]=null}getState(o,d){const y=String(d),v=s.e({},(this.state[o]||{})[y],(this.stateChanges[o]||{})[y]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const T=this.deletedStates[o][d];if(T===null)return{};for(const R in T)delete v[R]}return v}initializeTileState(o,d){o.setFeatureState(this.state,d)}coalesceChanges(o,d){const y={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const T={};for(const R in this.stateChanges[v])this.state[v][R]||(this.state[v][R]={}),s.e(this.state[v][R],this.stateChanges[v][R]),T[R]=this.state[v][R];y[v]=T}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const T={};if(this.deletedStates[v]===null)for(const R in this.state[v])T[R]={},this.state[v][R]={};else for(const R in this.deletedStates[v]){if(this.deletedStates[v][R]===null)this.state[v][R]={};else for(const k of Object.keys(this.deletedStates[v][R]))delete this.state[v][R][k];T[R]=this.state[v][R]}y[v]=y[v]||{},s.e(y[v],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const v in o)o[v].setFeatureState(y,d)}}const ae=89.25;function de(w,o){const d=s.ah(o.lat,-s.ai,s.ai);return new s.P(s.V(o.lng)*w,s.U(d)*w)}function Te(w,o){return new s.a1(o.x/w,o.y/w).toLngLat()}function Le(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(s.ae(90-w.pitch)),Math.tan(s.ae(ae-w.pitch)))}function je(w,o){const d=w.canonical,y=o/s.af(d.z),v=d.x+Math.pow(2,d.z)*w.wrap,T=s.ag(new Float64Array(16));return s.M(T,T,[v*y,d.y*y,0]),s.N(T,T,[y/s.$,y/s.$,1]),T}function Je(w,o,d,y,v){const T=s.a1.fromLngLat(w,o),R=v*s.aj(1,w.lat),k=R*Math.cos(s.ae(d)),L=Math.sqrt(R*R-k*k),q=L*Math.sin(s.ae(-y)),V=L*Math.cos(s.ae(-y));return new s.a1(T.x+q,T.y+V,T.z+k)}function Fe(w,o,d){const y=o.intersectsFrustum(w);if(!d||y===0)return y;const v=o.intersectsPlane(d);return v===0?0:y===2&&v===2?2:1}function tt(w,o,d){let y=0;const v=(d-o)/10;for(let T=0;T<10;T++)y+=v*Math.pow(Math.cos(o+(T+.5)/10*(d-o)),w);return y}function ct(w,o){return function(d,y,v,T,R){const k=2*((w-1)/s.ak(Math.cos(s.ae(ae-R))/Math.cos(s.ae(ae)))-1),L=Math.acos(v/T),q=2*tt(k-1,0,s.ae(R/2)),V=Math.min(s.ae(ae),L+s.ae(R/2)),Y=tt(k-1,Math.min(V,L-s.ae(R/2)),V),H=Math.atan(y/v),re=Math.hypot(y,v);let le=d;return le+=s.ak(T/re/Math.max(.5,Math.cos(s.ae(R/2)))),le+=k*s.ak(Math.cos(H))/2,le-=s.ak(Math.max(1,Y/q/o))/2,le}}const it=ct(9.314,3);function Ot(w,o){const d=(o.roundZoom?Math.round:Math.floor)(w.zoom+s.ak(w.tileSize/o.tileSize));return Math.max(0,d)}function $e(w,o){const d=w.getCameraFrustum(),y=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),T=s.a1.fromLngLat(w.center,w.elevation);v.z=T.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const R=w.getCoveringTilesDetailsProvider(),k=R.allowVariableZoom(w,o),L=Ot(w,o),q=o.minzoom||0,V=o.maxzoom!==void 0?o.maxzoom:w.maxZoom,Y=Math.min(Math.max(0,L),V),H=Math.pow(2,Y),re=[H*v.x,H*v.y,0],le=[H*T.x,H*T.y,0],_e=Math.hypot(T.x-v.x,T.y-v.y),ge=Math.abs(T.z-v.z),be=Math.hypot(_e,ge),Se=De=>({zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Re=[],Pe=[];if(w.renderWorldCopies&&R.allowWorldCopies())for(let De=1;De<=3;De++)Re.push(Se(-De)),Re.push(Se(De));for(Re.push(Se(0));Re.length>0;){const De=Re.pop(),Be=De.x,Ae=De.y;let Ge=De.fullyVisible;const st={x:Be,y:Ae,z:De.zoom},Ye=R.getTileBoundingVolume(st,De.wrap,w.elevation,o);if(!Ge){const Et=Fe(d,Ye,y);if(Et===0)continue;Ge=Et===2}const Qe=R.distanceToTile2d(v.x,v.y,st,Ye);let ot=L;k&&(ot=(o.calculateTileZoom||it)(w.zoom+s.ak(w.tileSize/o.tileSize),Qe,ge,be,w.fov)),ot=(o.roundZoom?Math.round:Math.floor)(ot),ot=Math.max(0,ot);const xt=Math.min(ot,V);if(De.wrap=R.getWrap(T,st,De.wrap),De.zoom>=xt){if(De.zoom<q)continue;const Et=Y-De.zoom,ft=re[0]-.5-(Be<<Et),Vt=re[1]-.5-(Ae<<Et),Er=o.reparseOverscaled?Math.max(De.zoom,ot):De.zoom;Pe.push({tileID:new s.Z(De.zoom===V?Er:De.zoom,De.wrap,De.zoom,Be,Ae),distanceSq:s.al([le[0]-.5-Be,le[1]-.5-Ae]),tileDistanceToCamera:Math.sqrt(ft*ft+Vt*Vt)})}else for(let Et=0;Et<4;Et++)Re.push({zoom:De.zoom+1,x:(Be<<1)+Et%2,y:(Ae<<1)+(Et>>1),wrap:De.wrap,fullyVisible:Ge})}return Pe.sort((De,Be)=>De.distanceSq-Be.distanceSq).map(De=>De.tileID)}const Xt=s.a2.fromPoints([new s.P(0,0),new s.P(s.$,s.$)]);class cr extends s.E{constructor(o,d,y){super(),this.id=o,this.dispatcher=y,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,T,R,k)=>{const L=new(yr(T.type))(v,T,R,k);if(L.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${L.id}`);return L})(o,d,y,this),this._tiles={},this._cache=new ke(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new oe,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const d=this._tiles[o];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,d,y){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,d,y)}catch(v){o.state="errored",v.status!==404?this._source.fire(new s.k(v,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new s.l("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const y=this._tiles[d];y.upload(o),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Nt).map(o=>o.key)}getRenderableIds(o){const d=[];for(const y in this._tiles)this._isIdRenderable(y,o)&&d.push(this._tiles[y]);return o?d.sort((y,v)=>{const T=y.tileID,R=v.tileID,k=new s.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),L=new s.P(R.canonical.x,R.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-R.overscaledZ||L.y-k.y||L.x-k.x}).map(y=>y.tileID.key):d.map(y=>y.tileID).sort(Nt).map(y=>y.key)}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())}reload(o){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)o?this._reloadTile(d,"expired"):this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(o,d){return s._(this,void 0,void 0,function*(){const y=this._tiles[o];y&&(y.state!=="loading"&&(y.state=d),yield this._loadTile(y,o,d))})}_tileLoaded(o,d,y){o.timeAdded=P.now(),y==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const d=this.getRenderableIds();for(let v=0;v<d.length;v++){const T=d[v];if(o.neighboringTiles&&o.neighboringTiles[T]){const R=this.getTileByID(T);y(o,R),y(R,o)}}function y(v,T){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let R=T.tileID.canonical.x-v.tileID.canonical.x;const k=T.tileID.canonical.y-v.tileID.canonical.y,L=Math.pow(2,v.tileID.canonical.z),q=T.tileID.key;R===0&&k===0||Math.abs(k)>1||(Math.abs(R)>1&&(Math.abs(R+L)===1?R+=L:Math.abs(R-L)===1&&(R-=L)),T.dem&&v.dem&&(v.dem.backfillBorder(T.dem,R,k),v.neighboringTiles&&v.neighboringTiles[q]&&(v.neighboringTiles[q].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,y,v){for(const T in this._tiles){let R=this._tiles[T];if(v[T]||!R.hasData()||R.tileID.overscaledZ<=d||R.tileID.overscaledZ>y)continue;let k=R.tileID;for(;R&&R.tileID.overscaledZ>d+1;){const q=R.tileID.scaledTo(R.tileID.overscaledZ-1);R=this._tiles[q.key],R&&R.hasData()&&(k=q)}let L=k;for(;L.overscaledZ>d;)if(L=L.scaledTo(L.overscaledZ-1),o[L.key]||o[L.canonical.key]){v[k.key]=k;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const y=this._loadedParentTiles[o.key];return y&&y.tileID.overscaledZ>=d?y:null}for(let y=o.overscaledZ-1;y>=d;y--){const v=o.scaledTo(y),T=this._getLoadedTile(v);if(T)return T}}findLoadedSibling(o){return this._getLoadedTile(o)}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const d=Math.ceil(o.width/this._source.tileSize)+1,y=Math.ceil(o.height/this._source.tileSize)+1,v=Math.floor(d*y*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(T)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const y={};for(const v in this._tiles){const T=this._tiles[v];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+d),y[T.tileID.key]=T}this._tiles=y;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(o,d,y,v,T,R){const k={},L={},q=Object.keys(o),V=P.now();for(const Y of q){const H=o[Y],re=this._tiles[Y];if(!re||re.fadeEndTime!==0&&re.fadeEndTime<=V)continue;const le=this.findLoadedParent(H,d),_e=this.findLoadedSibling(H),ge=le||_e||null;ge&&(this._addTile(ge.tileID),k[ge.tileID.key]=ge.tileID),L[Y]=H}this._retainLoadedChildren(L,v,y,o);for(const Y in k)o[Y]||(this._coveredTiles[Y]=!0,o[Y]=k[Y]);if(R){const Y={},H={};for(const re of T)this._tiles[re.key].hasData()?Y[re.key]=re:H[re.key]=re;for(const re in H){const le=H[re].children(this._source.maxzoom);this._tiles[le[0].key]&&this._tiles[le[1].key]&&this._tiles[le[2].key]&&this._tiles[le[3].key]&&(Y[le[0].key]=o[le[0].key]=le[0],Y[le[1].key]=o[le[1].key]=le[1],Y[le[2].key]=o[le[2].key]=le[2],Y[le[3].key]=o[le[3].key]=le[3],delete H[re])}for(const re in H){const le=H[re],_e=this.findLoadedParent(le,this._source.minzoom),ge=this.findLoadedSibling(le),be=_e||ge||null;if(be){Y[be.tileID.key]=o[be.tileID.key]=be.tileID;for(const Se in Y)Y[Se].isChildOf(be.tileID)&&delete Y[Se]}}for(const re in this._tiles)Y[re]||(this._coveredTiles[re]=!0)}}update(o,d){if(!this._sourceLoaded||this._paused)return;let y;this.transform=o,this.terrain=d,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new s.Z(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(y=$e(o,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter(V=>this._source.hasTile(V)))):y=[];const v=Ot(o,this._source),T=Math.max(v-cr.maxOverzooming,this._source.minzoom),R=Math.max(v+cr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const V={};for(const Y of y)if(Y.canonical.z>this._source.minzoom){const H=Y.scaledTo(Y.canonical.z-1);V[H.key]=H;const re=Y.scaledTo(Math.max(this._source.minzoom,Math.min(Y.canonical.z,5)));V[re.key]=re}y=y.concat(Object.values(V))}const k=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const L=this._updateRetainedTiles(y,v);Ht(this._source.type)&&this._updateCoveredAndRetainedTiles(L,T,R,v,y,d);for(const V in L)this._tiles[V].clearFadeHold();const q=s.am(this._tiles,L);for(const V of q){const Y=this._tiles[V];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,d){var y;const v={},T={},R=Math.max(d-cr.maxOverzooming,this._source.minzoom),k=Math.max(d+cr.maxUnderzooming,this._source.minzoom),L={};for(const q of o){const V=this._addTile(q);v[q.key]=q,V.hasData()||d<this._source.maxzoom&&(L[q.key]=q)}this._retainLoadedChildren(L,d,k,v);for(const q of o){let V=this._tiles[q.key];if(V.hasData())continue;if(d+1>this._source.maxzoom){const H=q.children(this._source.maxzoom)[0],re=this.getTile(H);if(re&&re.hasData()){v[H.key]=H;continue}}else{const H=q.children(this._source.maxzoom);if(v[H[0].key]&&v[H[1].key]&&v[H[2].key]&&v[H[3].key])continue}let Y=V.wasRequested();for(let H=q.overscaledZ-1;H>=R;--H){const re=q.scaledTo(H);if(T[re.key])break;if(T[re.key]=!0,V=this.getTile(re),!V&&Y&&(V=this._addTile(re)),V){const le=V.hasData();if((le||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||Y)&&(v[re.key]=re),Y=V.wasRequested(),le)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let y,v=this._tiles[o].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){y=this._loadedParentTiles[v.key];break}d.push(v.key);const T=v.scaledTo(v.overscaledZ-1);if(y=this._getLoadedTile(T),y)break;v=T}for(const T of d)this._loadedParentTiles[T]=y}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const o in this._tiles){const d=this._tiles[o].tileID,y=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=y}}_addTile(o){let d=this._tiles[o.key];if(d)return d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const y=d;return d||(d=new Yr(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(d,o.key,d.state)),d.uses++,this._tiles[o.key]=d,y||this._source.fire(new s.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const y=d.getExpiryTimeout();y&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},y))}refreshTiles(o){for(const d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&o.some(y=>y.equals(this._tiles[d].tileID.canonical))&&this._reloadTile(d,"expired")}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(o){const d=o.sourceDataType;o.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&o.dataType==="source"&&d==="content"&&(this.reload(o.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,d,y){const v=[],T=this.transform;if(!T)return v;const R=T.getCoveringTilesDetailsProvider().allowWorldCopies(),k=y?T.getCameraQueryGeometry(o):o,L=re=>T.screenPointToMercatorCoordinate(re,this.terrain),q=this.transformBbox(o,L,!R),V=this.transformBbox(k,L,!R),Y=this.getIds(),H=s.a2.fromPoints(V);for(let re=0;re<Y.length;re++){const le=this._tiles[Y[re]];if(le.holdingForFade())continue;const _e=R?[le.tileID]:[le.tileID.unwrapTo(-1),le.tileID.unwrapTo(0)],ge=Math.pow(2,T.zoom-le.tileID.overscaledZ),be=d*le.queryPadding*s.$/le.tileSize/ge;for(const Se of _e){const Re=H.map(Pe=>Se.getTilePoint(new s.a1(Pe.x,Pe.y)));if(Re.expandBy(be),Re.intersects(Xt)){const Pe=q.map(Be=>Se.getTilePoint(Be)),De=V.map(Be=>Se.getTilePoint(Be));v.push({tile:le,tileID:R?Se:Se.unwrapTo(0),queryGeometry:Pe,cameraQueryGeometry:De,scale:ge})}}}return v}transformBbox(o,d,y){let v=o.map(d);if(y){const T=s.a2.fromPoints(o);T.shrinkBy(.001*Math.min(T.width(),T.height()));const R=T.map(d);s.a2.fromPoints(v).covers(R)||(v=v.map(k=>k.x>.5?new s.a1(k.x-1,k.y,k.z):k))}return v}getVisibleCoordinates(o){const d=this.getRenderableIds(o).map(y=>this._tiles[y].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(Ht(this._source.type)){const o=P.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=o)return!0}return!1}setFeatureState(o,d,y){this._state.updateState(o=o||"_geojsonTileLayer",d,y)}removeFeatureState(o,d,y){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,y)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,y){const v=this._tiles[o];v&&v.setDependencies(d,y)}reloadTilesForDependencies(o,d){for(const y in this._tiles)this._tiles[y].hasDependency(o,d)&&this._reloadTile(y,"reloading");this._cache.filter(y=>!y.hasDependency(o,d))}}function Nt(w,o){const d=Math.abs(2*w.wrap)-+(w.wrap<0),y=Math.abs(2*o.wrap)-+(o.wrap<0);return w.overscaledZ-o.overscaledZ||y-d||o.canonical.y-w.canonical.y||o.canonical.x-w.canonical.x}function Ht(w){return w==="raster"||w==="image"||w==="video"}cr.maxOverzooming=10,cr.maxUnderzooming=3;class _r{constructor(o,d){this.reset(o,d)}reset(o,d){this.points=o||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=s.ah(o,0,1);let d=1,y=this._distances[d];const v=o*this.paddedLength+this.padding;for(;y<v&&d<this._distances.length;)y=this._distances[++d];const T=d-1,R=this._distances[T],k=y-R,L=k>0?(v-R)/k:0;return this.points[T].mult(1-L).add(this.points[d].mult(L))}}function ut(w,o){let d=!0;return w==="always"||w!=="never"&&o!=="never"||(d=!1),d}class Lt{constructor(o,d,y){const v=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(o/y),this.yCellCount=Math.ceil(d/y);for(let R=0;R<this.xCellCount*this.yCellCount;R++)v.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=d,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,d,y,v,T){this._forEachCell(d,y,v,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(v),this.bboxes.push(T)}insertCircle(o,d,y,v){this._forEachCell(d-v,y-v,d+v,y+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(d),this.circles.push(y),this.circles.push(v)}_insertBoxCell(o,d,y,v,T,R){this.boxCells[T].push(R)}_insertCircleCell(o,d,y,v,T,R){this.circleCells[T].push(R)}_query(o,d,y,v,T,R,k){if(y<0||o>this.width||v<0||d>this.height)return[];const L=[];if(o<=0&&d<=0&&this.width<=y&&this.height<=v){if(T)return[{key:null,x1:o,y1:d,x2:y,y2:v}];for(let q=0;q<this.boxKeys.length;q++)L.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const V=this.circles[3*q],Y=this.circles[3*q+1],H=this.circles[3*q+2];L.push({key:this.circleKeys[q],x1:V-H,y1:Y-H,x2:V+H,y2:Y+H})}}else this._forEachCell(o,d,y,v,this._queryCell,L,{hitTest:T,overlapMode:R,seenUids:{box:{},circle:{}}},k);return L}query(o,d,y,v){return this._query(o,d,y,v,!1,null)}hitTest(o,d,y,v,T,R){return this._query(o,d,y,v,!0,T,R).length>0}hitTestCircle(o,d,y,v,T){const R=o-y,k=o+y,L=d-y,q=d+y;if(k<0||R>this.width||q<0||L>this.height)return!1;const V=[];return this._forEachCell(R,L,k,q,this._queryCellCircle,V,{hitTest:!0,overlapMode:v,circle:{x:o,y:d,radius:y},seenUids:{box:{},circle:{}}},T),V.length>0}_queryCell(o,d,y,v,T,R,k,L){const{seenUids:q,hitTest:V,overlapMode:Y}=k,H=this.boxCells[T];if(H!==null){const le=this.bboxes;for(const _e of H)if(!q.box[_e]){q.box[_e]=!0;const ge=4*_e,be=this.boxKeys[_e];if(o<=le[ge+2]&&d<=le[ge+3]&&y>=le[ge+0]&&v>=le[ge+1]&&(!L||L(be))&&(!V||!ut(Y,be.overlapMode))&&(R.push({key:be,x1:le[ge],y1:le[ge+1],x2:le[ge+2],y2:le[ge+3]}),V))return!0}}const re=this.circleCells[T];if(re!==null){const le=this.circles;for(const _e of re)if(!q.circle[_e]){q.circle[_e]=!0;const ge=3*_e,be=this.circleKeys[_e];if(this._circleAndRectCollide(le[ge],le[ge+1],le[ge+2],o,d,y,v)&&(!L||L(be))&&(!V||!ut(Y,be.overlapMode))){const Se=le[ge],Re=le[ge+1],Pe=le[ge+2];if(R.push({key:be,x1:Se-Pe,y1:Re-Pe,x2:Se+Pe,y2:Re+Pe}),V)return!0}}}return!1}_queryCellCircle(o,d,y,v,T,R,k,L){const{circle:q,seenUids:V,overlapMode:Y}=k,H=this.boxCells[T];if(H!==null){const le=this.bboxes;for(const _e of H)if(!V.box[_e]){V.box[_e]=!0;const ge=4*_e,be=this.boxKeys[_e];if(this._circleAndRectCollide(q.x,q.y,q.radius,le[ge+0],le[ge+1],le[ge+2],le[ge+3])&&(!L||L(be))&&!ut(Y,be.overlapMode))return R.push(!0),!0}}const re=this.circleCells[T];if(re!==null){const le=this.circles;for(const _e of re)if(!V.circle[_e]){V.circle[_e]=!0;const ge=3*_e,be=this.circleKeys[_e];if(this._circlesCollide(le[ge],le[ge+1],le[ge+2],q.x,q.y,q.radius)&&(!L||L(be))&&!ut(Y,be.overlapMode))return R.push(!0),!0}}}_forEachCell(o,d,y,v,T,R,k,L){const q=this._convertToXCellCoord(o),V=this._convertToYCellCoord(d),Y=this._convertToXCellCoord(y),H=this._convertToYCellCoord(v);for(let re=q;re<=Y;re++)for(let le=V;le<=H;le++)if(T.call(this,o,d,y,v,this.xCellCount*le+re,R,k,L))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,d,y,v,T,R){const k=v-o,L=T-d,q=y+R;return q*q>k*k+L*L}_circleAndRectCollide(o,d,y,v,T,R,k){const L=(R-v)/2,q=Math.abs(o-(v+L));if(q>L+y)return!1;const V=(k-T)/2,Y=Math.abs(d-(T+V));if(Y>V+y)return!1;if(q<=L||Y<=V)return!0;const H=q-L,re=Y-V;return H*H+re*re<=y*y}}function Cr(w,o,d){const y=s.L();if(!w){const{vecSouth:Y,vecEast:H}=jt(o),re=g();re[0]=H[0],re[1]=H[1],re[2]=Y[0],re[3]=Y[1],v=re,(V=(R=(T=re)[0])*(q=T[3])-(L=T[2])*(k=T[1]))&&(v[0]=q*(V=1/V),v[1]=-k*V,v[2]=-L*V,v[3]=R*V),y[0]=re[0],y[1]=re[1],y[4]=re[2],y[5]=re[3]}var v,T,R,k,L,q,V;return s.N(y,y,[1/d,1/d,1]),y}function Kt(w,o,d,y){if(w){const v=s.L();if(!o){const{vecSouth:T,vecEast:R}=jt(d);v[0]=R[0],v[1]=R[1],v[4]=T[0],v[5]=T[1]}return s.N(v,v,[y,y,1]),v}return d.pixelsToClipSpaceMatrix}function jt(w){const o=Math.cos(w.rollInRadians),d=Math.sin(w.rollInRadians),y=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),T=Math.sin(w.bearingInRadians),R=s.ar();R[0]=-v*y*d-T*o,R[1]=-T*y*d+v*o;const k=s.as(R);k<1e-9?s.at(R):s.au(R,R,1/k);const L=s.ar();L[0]=v*y*o-T*d,L[1]=T*y*o+v*d;const q=s.as(L);return q<1e-9?s.at(L):s.au(L,L,1/q),{vecEast:L,vecSouth:R}}function Pr(w,o,d,y){let v;y?(v=[w,o,y(w,o),1],s.aw(v,v,d)):(v=[w,o,0,1],D(v,v,d));const T=v[3];return{point:new s.P(v[0]/T,v[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function yt(w,o){return .5+w/o*.5}function In(w,o){return w.x>=-o[0]&&w.x<=o[0]&&w.y>=-o[1]&&w.y<=o[1]}function vn(w,o,d,y,v,T,R,k,L,q,V,Y,H){const re=d?w.textSizeData:w.iconSizeData,le=s.an(re,o.transform.zoom),_e=[256/o.width*2+1,256/o.height*2+1],ge=d?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ge.clear();const be=w.lineVertexArray,Se=d?w.text.placedSymbolArray:w.icon.placedSymbolArray,Re=o.transform.width/o.transform.height;let Pe=!1;for(let De=0;De<Se.length;De++){const Be=Se.get(De);if(Be.hidden||Be.writingMode===s.ao.vertical&&!Pe){E(Be.numGlyphs,ge);continue}Pe=!1;const Ae=new s.P(Be.anchorX,Be.anchorY),Ge={getElevation:H,pitchedLabelPlaneMatrix:y,lineVertexArray:be,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:o.transform,tileAnchorPoint:Ae,unwrappedTileID:L,width:q,height:V,translation:Y},st=ro(Be.anchorX,Be.anchorY,Ge);if(!In(st.point,_e)){E(Be.numGlyphs,ge);continue}const Ye=yt(o.transform.cameraToCenterDistance,st.signedDistanceFromCamera),Qe=s.ap(re,le,Be),ot=T?Qe*o.transform.getPitchedTextCorrection(Be.anchorX,Be.anchorY,L)/Ye:Qe*Ye,xt=Ct({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:v,symbol:Be,fontSize:ot,flip:!1,keepUpright:R,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Re,rotateToLine:k});Pe=xt.useVertical,(xt.notEnoughRoom||Pe||xt.needsFlipping&&Ct({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:v,symbol:Be,fontSize:ot,flip:!0,keepUpright:R,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Re,rotateToLine:k}).notEnoughRoom)&&E(Be.numGlyphs,ge)}d?w.text.dynamicLayoutVertexBuffer.updateData(ge):w.icon.dynamicLayoutVertexBuffer.updateData(ge)}function mn(w,o,d,y,v,T,R,k){const L=T.glyphStartIndex+T.numGlyphs,q=T.lineStartIndex,V=T.lineStartIndex+T.lineLength,Y=o.getoffsetX(T.glyphStartIndex),H=o.getoffsetX(L-1),re=hi(w*Y,d,y,v,T.segment,q,V,k,R);if(!re)return null;const le=hi(w*H,d,y,v,T.segment,q,V,k,R);return le?k.projectionCache.anyProjectionOccluded?null:{first:re,last:le}:null}function fs(w,o,d,y){return w===s.ao.horizontal&&Math.abs(d.y-o.y)>Math.abs(d.x-o.x)*y?{useVertical:!0}:(w===s.ao.vertical?o.y<d.y:o.x>d.x)?{needsFlipping:!0}:null}function Ct(w){const{projectionContext:o,pitchedLabelPlaneMatrixInverse:d,symbol:y,fontSize:v,flip:T,keepUpright:R,glyphOffsetArray:k,dynamicLayoutVertexArray:L,aspectRatio:q,rotateToLine:V}=w,Y=v/24,H=y.lineOffsetX*Y,re=y.lineOffsetY*Y;let le;if(y.numGlyphs>1){const _e=y.glyphStartIndex+y.numGlyphs,ge=y.lineStartIndex,be=y.lineStartIndex+y.lineLength,Se=mn(Y,k,H,re,T,y,V,o);if(!Se)return{notEnoughRoom:!0};const Re=No(Se.first.point.x,Se.first.point.y,o,d),Pe=No(Se.last.point.x,Se.last.point.y,o,d);if(R&&!T){const De=fs(y.writingMode,Re,Pe,q);if(De)return De}le=[Se.first];for(let De=y.glyphStartIndex+1;De<_e-1;De++){const Be=hi(Y*k.getoffsetX(De),H,re,T,y.segment,ge,be,o,V);if(!Be)return{notEnoughRoom:!0};le.push(Be)}le.push(Se.last)}else{if(R&&!T){const ge=xn(o.tileAnchorPoint.x,o.tileAnchorPoint.y,o).point,be=y.lineStartIndex+y.segment+1,Se=new s.P(o.lineVertexArray.getx(be),o.lineVertexArray.gety(be)),Re=xn(Se.x,Se.y,o),Pe=Re.signedDistanceFromCamera>0?Re.point:tr(o.tileAnchorPoint,Se,ge,1,o),De=No(ge.x,ge.y,o,d),Be=No(Pe.x,Pe.y,o,d),Ae=fs(y.writingMode,De,Be,q);if(Ae)return Ae}const _e=hi(Y*k.getoffsetX(y.glyphStartIndex),H,re,T,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,o,V);if(!_e||o.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};le=[_e]}for(const _e of le)s.av(L,_e.point,_e.angle);return{}}function tr(w,o,d,y,v){const T=w.add(w.sub(o)._unit()),R=xn(T.x,T.y,v).point,k=d.sub(R);return d.add(k._mult(y/k.mag()))}function gr(w,o,d){const y=o.projectionCache;if(y.projections[w])return y.projections[w];const v=new s.P(o.lineVertexArray.getx(w),o.lineVertexArray.gety(w)),T=xn(v.x,v.y,o);if(T.signedDistanceFromCamera>0)return y.projections[w]=T.point,y.anyProjectionOccluded=y.anyProjectionOccluded||T.isOccluded,T.point;const R=w-d.direction;return tr(d.distanceFromAnchor===0?o.tileAnchorPoint:new s.P(o.lineVertexArray.getx(R),o.lineVertexArray.gety(R)),v,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,o)}function xn(w,o,d){const y=w+d.translation[0],v=o+d.translation[1];let T;return d.pitchWithMap?(T=Pr(y,v,d.pitchedLabelPlaneMatrix,d.getElevation),T.isOccluded=!1):(T=d.transform.projectTileCoordinates(y,v,d.unwrappedTileID,d.getElevation),T.point.x=(.5*T.point.x+.5)*d.width,T.point.y=(.5*-T.point.y+.5)*d.height),T}function No(w,o,d,y){if(d.pitchWithMap){const v=[w,o,0,1];return s.aw(v,v,y),d.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],d.unwrappedTileID,d.getElevation).point}return{x:w/d.width*2-1,y:1-o/d.height*2}}function ro(w,o,d){return d.transform.projectTileCoordinates(w,o,d.unwrappedTileID,d.getElevation)}function hr(w,o,d){return w._unit()._perp()._mult(o*d)}function ms(w,o,d,y,v,T,R,k,L){if(k.projectionCache.offsets[w])return k.projectionCache.offsets[w];const q=d.add(o);if(w+L.direction<y||w+L.direction>=v)return k.projectionCache.offsets[w]=q,q;const V=gr(w+L.direction,k,L),Y=hr(V.sub(d),R,L.direction),H=d.add(Y),re=V.add(Y);return k.projectionCache.offsets[w]=s.ax(T,q,H,re)||q,k.projectionCache.offsets[w]}function hi(w,o,d,y,v,T,R,k,L){const q=y?w-o:w+o;let V=q>0?1:-1,Y=0;y&&(V*=-1,Y=Math.PI),V<0&&(Y+=Math.PI);let H,re=V>0?T+v:T+v+1;k.projectionCache.cachedAnchorPoint?H=k.projectionCache.cachedAnchorPoint:(H=xn(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=H);let le,_e,ge=H,be=H,Se=0,Re=0;const Pe=Math.abs(q),De=[];let Be;for(;Se+Re<=Pe;){if(re+=V,re<T||re>=R)return null;Se+=Re,be=ge,_e=le;const st={absOffsetX:Pe,direction:V,distanceFromAnchor:Se,previousVertex:be};if(ge=gr(re,k,st),d===0)De.push(be),Be=ge.sub(be);else{let Ye;const Qe=ge.sub(be);Ye=Qe.mag()===0?hr(gr(re+V,k,st).sub(ge),d,V):hr(Qe,d,V),_e||(_e=be.add(Ye)),le=ms(re,Ye,ge,T,R,_e,d,k,st),De.push(_e),Be=le.sub(_e)}Re=Be.mag()}const Ae=Be._mult((Pe-Se)/Re)._add(_e||be),Ge=Y+Math.atan2(ge.y-be.y,ge.x-be.x);return De.push(Ae),{point:Ae,angle:L?Ge:0,path:De}}const gs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function E(w,o){for(let d=0;d<w;d++){const y=o.length;o.resize(y+4),o.float32.set(gs,3*y)}}function D(w,o,d){const y=o[0],v=o[1];return w[0]=d[0]*y+d[4]*v+d[12],w[1]=d[1]*y+d[5]*v+d[13],w[3]=d[3]*y+d[7]*v+d[15],w}const J=100;class me{constructor(o,d=new Lt(o.width+200,o.height+200,25),y=new Lt(o.width+200,o.height+200,25)){this.transform=o,this.grid=d,this.ignoredGrid=y,this.pitchFactor=Math.cos(o.pitch*Math.PI/180)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+J,this.screenBottomBoundary=o.height+J,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,d,y,v,T,R,k,L,q,V,Y,H){const re=this.projectAndGetPerspectiveRatio(o.anchorPointX+L[0],o.anchorPointY+L[1],T,V,H),le=y*re.perspectiveRatio;let _e;if(R||k)_e=this._projectCollisionBox(o,le,v,T,R,k,L,re,V,Y,H);else{const Be=re.x+(Y?Y.x*le:0),Ae=re.y+(Y?Y.y*le:0);_e={allPointsOccluded:!1,box:[Be+o.x1*le,Ae+o.y1*le,Be+o.x2*le,Ae+o.y2*le]}}const[ge,be,Se,Re]=_e.box,Pe=R?_e.allPointsOccluded:re.isOccluded;let De=Pe;return De||(De=re.perspectiveRatio<this.perspectiveRatioCutoff),De||(De=!this.isInsideGrid(ge,be,Se,Re)),De||d!=="always"&&this.grid.hitTest(ge,be,Se,Re,d,q)?{box:[ge,be,Se,Re],placeable:!1,offscreen:!1,occluded:Pe}:{box:[ge,be,Se,Re],placeable:!0,offscreen:this.isOffscreen(ge,be,Se,Re),occluded:Pe}}placeCollisionCircles(o,d,y,v,T,R,k,L,q,V,Y,H,re,le){const _e=[],ge=new s.P(d.anchorX,d.anchorY),be=this.getPerspectiveRatio(ge.x,ge.y,R,le),Se=(q?T*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,R)/be:T*be)/s.aB,Re={getElevation:le,pitchedLabelPlaneMatrix:k,lineVertexArray:y,pitchWithMap:q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:R,width:this.transform.width,height:this.transform.height,translation:re},Pe=mn(Se,v,d.lineOffsetX*Se,d.lineOffsetY*Se,!1,d,!1,Re);let De=!1,Be=!1,Ae=!0;if(Pe){const Ge=.5*Y*be+H,st=new s.P(-100,-100),Ye=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Qe=new _r,ot=Pe.first,xt=Pe.last;let Et=[];for(let Er=ot.path.length-1;Er>=1;Er--)Et.push(ot.path[Er]);for(let Er=1;Er<xt.path.length;Er++)Et.push(xt.path[Er]);const ft=2.5*Ge;if(q){const Er=this.projectPathToScreenSpace(Et,Re);Et=Er.some(tn=>tn.signedDistanceFromCamera<=0)?[]:Er.map(tn=>tn.point)}let Vt=[];if(Et.length>0){const Er=Et[0].clone(),tn=Et[0].clone();for(let hn=1;hn<Et.length;hn++)Er.x=Math.min(Er.x,Et[hn].x),Er.y=Math.min(Er.y,Et[hn].y),tn.x=Math.max(tn.x,Et[hn].x),tn.y=Math.max(tn.y,Et[hn].y);Vt=Er.x>=st.x&&tn.x<=Ye.x&&Er.y>=st.y&&tn.y<=Ye.y?[Et]:tn.x<st.x||Er.x>Ye.x||tn.y<st.y||Er.y>Ye.y?[]:s.ay([Et],st.x,st.y,Ye.x,Ye.y)}for(const Er of Vt){Qe.reset(Er,.25*Ge);let tn=0;tn=Qe.length<=.5*Ge?1:Math.ceil(Qe.paddedLength/ft)+1;for(let hn=0;hn<tn;hn++){const an=hn/Math.max(tn-1,1),Mn=Qe.lerp(an),Dn=Mn.x+J,vr=Mn.y+J;_e.push(Dn,vr,Ge,0);const dn=Dn-Ge,Yn=vr-Ge,si=Dn+Ge,mi=vr+Ge;if(Ae=Ae&&this.isOffscreen(dn,Yn,si,mi),Be=Be||this.isInsideGrid(dn,Yn,si,mi),o!=="always"&&this.grid.hitTestCircle(Dn,vr,Ge,o,V)&&(De=!0,!L))return{circles:[],offscreen:!1,collisionDetected:De}}}}return{circles:!L&&De||!Be||be<this.perspectiveRatioCutoff?[]:_e,offscreen:Ae,collisionDetected:De}}projectPathToScreenSpace(o,d){const y=function(v,T){const R=s.L();return s.aq(R,T.pitchedLabelPlaneMatrix),v.map(k=>{const L=Pr(k.x,k.y,R,T.getElevation),q=T.transform.projectTileCoordinates(L.point.x,L.point.y,T.unwrappedTileID,T.getElevation);return q.point.x=(.5*q.point.x+.5)*T.width,q.point.y=(.5*-q.point.y+.5)*T.height,q})}(o,d);return function(v){let T=0,R=0,k=0,L=0;for(let q=0;q<v.length;q++)v[q].isOccluded?(k=q+1,L=0):(L++,L>R&&(R=L,T=k));return v.slice(T,T+R)}(y)}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[],y=new s.a2;for(const Y of o){const H=new s.P(Y.x+J,Y.y+J);y.extend(H),d.push(H)}const{minX:v,minY:T,maxX:R,maxY:k}=y,L=this.grid.query(v,T,R,k).concat(this.ignoredGrid.query(v,T,R,k)),q={},V={};for(const Y of L){const H=Y.key;if(q[H.bucketInstanceId]===void 0&&(q[H.bucketInstanceId]={}),q[H.bucketInstanceId][H.featureIndex])continue;const re=[new s.P(Y.x1,Y.y1),new s.P(Y.x2,Y.y1),new s.P(Y.x2,Y.y2),new s.P(Y.x1,Y.y2)];s.az(d,re)&&(q[H.bucketInstanceId][H.featureIndex]=!0,V[H.bucketInstanceId]===void 0&&(V[H.bucketInstanceId]=[]),V[H.bucketInstanceId].push(H.featureIndex))}return V}insertCollisionBox(o,d,y,v,T,R){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:T,collisionGroupID:R,overlapMode:d},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,d,y,v,T,R){const k=y?this.ignoredGrid:this.grid,L={bucketInstanceId:v,featureIndex:T,collisionGroupID:R,overlapMode:d};for(let q=0;q<o.length;q+=4)k.insertCircle(L,o[q],o[q+1],o[q+2])}projectAndGetPerspectiveRatio(o,d,y,v,T){if(T){let R;v?(R=[o,d,v(o,d),1],s.aw(R,R,T)):(R=[o,d,0,1],D(R,R,T));const k=R[3];return{x:(R[0]/k+1)/2*this.transform.width+J,y:(-R[1]/k+1)/2*this.transform.height+J,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{const R=this.transform.projectTileCoordinates(o,d,y,v);return{x:(R.point.x+1)/2*this.transform.width+J,y:(1-R.point.y)/2*this.transform.height+J,perspectiveRatio:.5+this.transform.cameraToCenterDistance/R.signedDistanceFromCamera*.5,isOccluded:R.isOccluded,signedDistanceFromCamera:R.signedDistanceFromCamera}}}getPerspectiveRatio(o,d,y,v){const T=this.transform.projectTileCoordinates(o,d,y,v);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(o,d,y,v){return y<J||o>=this.screenRightBoundary||v<J||d>this.screenBottomBoundary}isInsideGrid(o,d,y,v){return y>=0&&o<this.gridRightBoundary&&v>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const o=s.ag([]);return s.M(o,o,[-100,-100,0]),o}_projectCollisionBox(o,d,y,v,T,R,k,L,q,V,Y){let H=1,re=0,le=0,_e=1;const ge=o.anchorPointX+k[0],be=o.anchorPointY+k[1];if(R&&!T){const Et=this.projectAndGetPerspectiveRatio(ge+1,be,v,q,Y),ft=Et.x-L.x,Vt=Math.atan((Et.y-L.y)/ft)+(ft<0?Math.PI:0),Er=Math.sin(Vt),tn=Math.cos(Vt);H=tn,re=Er,le=-Er,_e=tn}else if(!R&&T){const Et=jt(this.transform);H=Et.vecEast[0],re=Et.vecEast[1],le=Et.vecSouth[0],_e=Et.vecSouth[1]}let Se=L.x,Re=L.y,Pe=d;T&&(Se=ge,Re=be,Pe=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),Pe*=this.transform.getPitchedTextCorrection(ge,be,v),V||(Pe*=s.ah(.5+L.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(Se+=H*V.x*Pe+le*V.y*Pe,Re+=re*V.x*Pe+_e*V.y*Pe);const De=o.x1*Pe,Be=o.x2*Pe,Ae=(De+Be)/2,Ge=o.y1*Pe,st=o.y2*Pe,Ye=(Ge+st)/2,Qe=[{offsetX:De,offsetY:Ge},{offsetX:Ae,offsetY:Ge},{offsetX:Be,offsetY:Ge},{offsetX:Be,offsetY:Ye},{offsetX:Be,offsetY:st},{offsetX:Ae,offsetY:st},{offsetX:De,offsetY:st},{offsetX:De,offsetY:Ye}];let ot=[];for(const{offsetX:Et,offsetY:ft}of Qe)ot.push(new s.P(Se+H*Et+le*ft,Re+re*Et+_e*ft));let xt=!1;if(T){const Et=ot.map(ft=>this.projectAndGetPerspectiveRatio(ft.x,ft.y,v,q,Y));xt=Et.some(ft=>!ft.isOccluded),ot=Et.map(ft=>new s.P(ft.x,ft.y))}else xt=!0;return{box:s.aA(ot),allPointsOccluded:!xt}}}class ze{constructor(o,d,y,v){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?d:-d))):v&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class nt{constructor(o,d,y,v,T){this.text=new ze(o?o.text:null,d,y,T),this.icon=new ze(o?o.icon:null,d,v,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class St{constructor(o,d,y){this.text=o,this.icon=d,this.skipFade=y}}class rr{constructor(o,d,y,v,T){this.bucketInstanceId=o,this.featureIndex=d,this.sourceLayerIndex=y,this.bucketIndex=v,this.tileID=T}}class Jr{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const d=++this.maxGroupID;this.collisionGroups[o]={ID:d,predicate:y=>y.collisionGroupID===d}}return this.collisionGroups[o]}}function Ar(w,o,d,y,v){const{horizontalAlign:T,verticalAlign:R}=s.aH(w);return new s.P(-(T-.5)*o+y[0]*v,-(R-.5)*d+y[1]*v)}class Xr{constructor(o,d,y,v,T){this.transform=o.clone(),this.terrain=d,this.collisionIndex=new me(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Jr(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(o){const d=this.terrain;return d?(y,v)=>d.getElevation(o,y,v):null}getBucketParts(o,d,y,v){const T=y.getBucket(d),R=y.latestFeatureIndex;if(!T||!R||d.id!==T.layerIds[0])return;const k=y.collisionBoxArray,L=T.layers[0].layout,q=T.layers[0].paint,V=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),Y=y.tileSize/s.$,H=y.tileID.toUnwrapped(),re=L.get("text-rotation-alignment")==="map",le=s.aC(y,1,this.transform.zoom),_e=s.aD(this.collisionIndex.transform,y,q.get("text-translate"),q.get("text-translate-anchor")),ge=s.aD(this.collisionIndex.transform,y,q.get("icon-translate"),q.get("icon-translate-anchor")),be=Cr(re,this.transform,le);this.retainedQueryData[T.bucketInstanceId]=new rr(T.bucketInstanceId,R,T.sourceLayerIndex,T.index,y.tileID);const Se={bucket:T,layout:L,translationText:_e,translationIcon:ge,unwrappedTileID:H,pitchedLabelPlaneMatrix:be,scale:V,textPixelRatio:Y,holdingForFade:y.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:s.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(v)for(const Re of T.sortKeyRanges){const{sortKey:Pe,symbolInstanceStart:De,symbolInstanceEnd:Be}=Re;o.push({sortKey:Pe,symbolInstanceStart:De,symbolInstanceEnd:Be,parameters:Se})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(o,d,y,v,T,R,k,L,q,V,Y,H,re,le,_e,ge,be,Se,Re,Pe){const De=s.aE[o.textAnchor],Be=[o.textOffset0,o.textOffset1],Ae=Ar(De,y,v,Be,T),Ge=this.collisionIndex.placeCollisionBox(d,H,L,q,V,k,R,ge,Y.predicate,Re,Ae,Pe);if((!Se||this.collisionIndex.placeCollisionBox(Se,H,L,q,V,k,R,be,Y.predicate,Re,Ae,Pe).placeable)&&Ge.placeable){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID].text&&(st=this.prevPlacement.variableOffsets[re.crossTileID].anchor),re.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[re.crossTileID]={textOffset:Be,width:y,height:v,anchor:De,textBoxScale:T,prevAnchor:st},this.markUsedJustification(le,De,re,_e),le.allowVerticalPlacement&&(this.markUsedOrientation(le,_e,re),this.placedOrientations[re.crossTileID]=_e),{shift:Ae,placedGlyphBoxes:Ge}}}placeLayerBucketPart(o,d,y){const{bucket:v,layout:T,translationText:R,translationIcon:k,unwrappedTileID:L,pitchedLabelPlaneMatrix:q,textPixelRatio:V,holdingForFade:Y,collisionBoxArray:H,partiallyEvaluatedTextSize:re,collisionGroup:le}=o.parameters,_e=T.get("text-optional"),ge=T.get("icon-optional"),be=s.aF(T,"text-overlap","text-allow-overlap"),Se=be==="always",Re=s.aF(T,"icon-overlap","icon-allow-overlap"),Pe=Re==="always",De=T.get("text-rotation-alignment")==="map",Be=T.get("text-pitch-alignment")==="map",Ae=T.get("icon-text-fit")!=="none",Ge=T.get("symbol-z-order")==="viewport-y",st=Se&&(Pe||!v.hasIconData()||ge),Ye=Pe&&(Se||!v.hasTextData()||_e);!v.collisionArrays&&H&&v.deserializeCollisionBoxes(H);const Qe=this.retainedQueryData[v.bucketInstanceId].tileID,ot=this._getTerrainElevationFunc(Qe),xt=this.transform.getFastPathSimpleProjectionMatrix(Qe),Et=(ft,Vt,Er)=>{var tn,hn;if(d[ft.crossTileID])return;if(Y)return void(this.placements[ft.crossTileID]=new St(!1,!1,!1));let an=!1,Mn=!1,Dn=!0,vr=null,dn={box:null,placeable:!1,offscreen:null,occluded:!1},Yn={placeable:!1},si=null,mi=null,Wi=null,Go=0,ma=0,ga=0;Vt.textFeatureIndex?Go=Vt.textFeatureIndex:ft.useRuntimeCollisionCircles&&(Go=ft.featureIndex),Vt.verticalTextFeatureIndex&&(ma=Vt.verticalTextFeatureIndex);const uc=Vt.textBox;if(uc){const oo=Xn=>{let ai=s.ao.horizontal;if(v.allowVerticalPlacement&&!Xn&&this.prevPlacement){const Po=this.prevPlacement.placedOrientations[ft.crossTileID];Po&&(this.placedOrientations[ft.crossTileID]=Po,ai=Po,this.markUsedOrientation(v,ai,ft))}return ai},Ho=(Xn,ai)=>{if(v.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&Vt.verticalTextBox){for(const Po of v.writingModes)if(Po===s.ao.vertical?(dn=ai(),Yn=dn):dn=Xn(),dn&&dn.placeable)break}else dn=Xn()},Zi=ft.textAnchorOffsetStartIndex,ya=ft.textAnchorOffsetEndIndex;if(ya===Zi){const Xn=(ai,Po)=>{const Qn=this.collisionIndex.placeCollisionBox(ai,be,V,Qe,L,Be,De,R,le.predicate,ot,void 0,xt);return Qn&&Qn.placeable&&(this.markUsedOrientation(v,Po,ft),this.placedOrientations[ft.crossTileID]=Po),Qn};Ho(()=>Xn(uc,s.ao.horizontal),()=>{const ai=Vt.verticalTextBox;return v.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&ai?Xn(ai,s.ao.vertical):{box:null,offscreen:null}}),oo(dn&&dn.placeable)}else{let Xn=s.aE[(hn=(tn=this.prevPlacement)===null||tn===void 0?void 0:tn.variableOffsets[ft.crossTileID])===null||hn===void 0?void 0:hn.anchor];const ai=(Qn,Bu,dc)=>{const qs=Qn.x2-Qn.x1,Jo=Qn.y2-Qn.y1,_a=ft.textBoxScale,u0=Ae&&Re==="never"?Bu:null;let yo=null,h0=be==="never"?1:2,Lm="never";Xn&&h0++;for(let Gd=0;Gd<h0;Gd++){for(let Hd=Zi;Hd<ya;Hd++){const ba=v.textAnchorOffsets.get(Hd);if(Xn&&ba.textAnchor!==Xn)continue;const $s=this.attemptAnchorPlacement(ba,Qn,qs,Jo,_a,De,Be,V,Qe,L,le,Lm,ft,v,dc,R,k,u0,ot);if($s&&(yo=$s.placedGlyphBoxes,yo&&yo.placeable))return an=!0,vr=$s.shift,yo}Xn?Xn=null:Lm=be}return y&&!yo&&(yo={box:this.collisionIndex.placeCollisionBox(uc,"always",V,Qe,L,Be,De,R,le.predicate,ot,void 0,xt).box,offscreen:!1,placeable:!1,occluded:!1}),yo};Ho(()=>ai(uc,Vt.iconBox,s.ao.horizontal),()=>{const Qn=Vt.verticalTextBox;return v.allowVerticalPlacement&&(!dn||!dn.placeable)&&ft.numVerticalGlyphVertices>0&&Qn?ai(Qn,Vt.verticalIconBox,s.ao.vertical):{box:null,occluded:!0,offscreen:null}}),dn&&(an=dn.placeable,Dn=dn.offscreen);const Po=oo(dn&&dn.placeable);if(!an&&this.prevPlacement){const Qn=this.prevPlacement.variableOffsets[ft.crossTileID];Qn&&(this.variableOffsets[ft.crossTileID]=Qn,this.markUsedJustification(v,Qn.anchor,ft,Po))}}}if(si=dn,an=si&&si.placeable,Dn=si&&si.offscreen,ft.useRuntimeCollisionCircles){const oo=v.text.placedSymbolArray.get(ft.centerJustifiedTextSymbolIndex),Ho=s.ap(v.textSizeData,re,oo),Zi=T.get("text-padding");mi=this.collisionIndex.placeCollisionCircles(be,oo,v.lineVertexArray,v.glyphOffsetArray,Ho,L,q,y,Be,le.predicate,ft.collisionCircleDiameter,Zi,R,ot),mi.circles.length&&mi.collisionDetected&&!y&&s.w("Collisions detected, but collision boxes are not shown"),an=Se||mi.circles.length>0&&!mi.collisionDetected,Dn=Dn&&mi.offscreen}if(Vt.iconFeatureIndex&&(ga=Vt.iconFeatureIndex),Vt.iconBox){const oo=Ho=>this.collisionIndex.placeCollisionBox(Ho,Re,V,Qe,L,Be,De,k,le.predicate,ot,Ae&&vr?vr:void 0,xt);Yn&&Yn.placeable&&Vt.verticalIconBox?(Wi=oo(Vt.verticalIconBox),Mn=Wi.placeable):(Wi=oo(Vt.iconBox),Mn=Wi.placeable),Dn=Dn&&Wi.offscreen}const hc=_e||ft.numHorizontalGlyphVertices===0&&ft.numVerticalGlyphVertices===0,al=ge||ft.numIconVertices===0;hc||al?al?hc||(Mn=Mn&&an):an=Mn&&an:Mn=an=Mn&&an;const ll=Mn&&Wi.placeable;if(an&&si.placeable&&this.collisionIndex.insertCollisionBox(si.box,be,T.get("text-ignore-placement"),v.bucketInstanceId,Yn&&Yn.placeable&&ma?ma:Go,le.ID),ll&&this.collisionIndex.insertCollisionBox(Wi.box,Re,T.get("icon-ignore-placement"),v.bucketInstanceId,ga,le.ID),mi&&an&&this.collisionIndex.insertCollisionCircles(mi.circles,be,T.get("text-ignore-placement"),v.bucketInstanceId,Go,le.ID),y&&this.storeCollisionData(v.bucketInstanceId,Er,Vt,si,Wi,mi),ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ft.crossTileID]=new St((an||st)&&!si?.occluded,(Mn||Ye)&&!Wi?.occluded,Dn||v.justReloaded),d[ft.crossTileID]=!0};if(Ge){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ft=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Vt=ft.length-1;Vt>=0;--Vt){const Er=ft[Vt];Et(v.symbolInstances.get(Er),v.collisionArrays[Er],Er)}}else for(let ft=o.symbolInstanceStart;ft<o.symbolInstanceEnd;ft++)Et(v.symbolInstances.get(ft),v.collisionArrays[ft],ft);v.justReloaded=!1}storeCollisionData(o,d,y,v,T,R){if(y.textBox||y.iconBox){let k,L;this.collisionBoxArrays.has(o)?k=this.collisionBoxArrays.get(o):(k=new Map,this.collisionBoxArrays.set(o,k)),k.has(d)?L=k.get(d):(L={text:null,icon:null},k.set(d,L)),y.textBox&&(L.text=v.box),y.iconBox&&(L.icon=T.box)}if(R){let k=this.collisionCircleArrays[o];k===void 0&&(k=this.collisionCircleArrays[o]=[]);for(let L=0;L<R.circles.length;L+=4)k.push(R.circles[L+0]-J),k.push(R.circles[L+1]-J),k.push(R.circles[L+2]),k.push(R.collisionDetected?1:0)}}markUsedJustification(o,d,y,v){let T;T=v===s.ao.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[s.aG(d)];const R=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const k of R)k>=0&&(o.text.placedSymbolArray.get(k).crossTileID=T>=0&&k!==T?0:y.crossTileID)}markUsedOrientation(o,d,y){const v=d===s.ao.horizontal||d===s.ao.horizontalOnly?d:0,T=d===s.ao.vertical?d:0,R=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const k of R)o.text.placedSymbolArray.get(k).placedOrientation=v;y.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let y=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const v=d?d.symbolFadeChange(o):1,T=d?d.opacities:{},R=d?d.variableOffsets:{},k=d?d.placedOrientations:{};for(const L in this.placements){const q=this.placements[L],V=T[L];V?(this.opacities[L]=new nt(V,v,q.text,q.icon),y=y||q.text!==V.text.placed||q.icon!==V.icon.placed):(this.opacities[L]=new nt(null,v,q.text,q.icon,q.skipFade),y=y||q.text||q.icon)}for(const L in T){const q=T[L];if(!this.opacities[L]){const V=new nt(q,v,!1,!1);V.isHidden()||(this.opacities[L]=V,y=y||q.text.placed||q.icon.placed)}}for(const L in R)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=R[L]);for(const L in k)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=k[L]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:o)}updateLayerOpacities(o,d){const y={};for(const v of d){const T=v.getBucket(o);T&&v.latestFeatureIndex&&o.id===T.layerIds[0]&&this.updateBucketOpacities(T,v.tileID,y,v.collisionBoxArray)}}updateBucketOpacities(o,d,y,v){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const T=o.layers[0],R=T.layout,k=new nt(null,0,!1,!1,!0),L=R.get("text-allow-overlap"),q=R.get("icon-allow-overlap"),V=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=R.get("text-rotation-alignment")==="map",H=R.get("text-pitch-alignment")==="map",re=R.get("icon-text-fit")!=="none",le=new nt(null,0,L&&(q||!o.hasIconData()||R.get("icon-optional")),q&&(L||!o.hasTextData()||R.get("text-optional")),!0);!o.collisionArrays&&v&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(v);const _e=(be,Se,Re)=>{for(let Pe=0;Pe<Se/4;Pe++)be.opacityVertexArray.emplaceBack(Re);be.hasVisibleVertices=be.hasVisibleVertices||Re!==Gl},ge=this.collisionBoxArrays.get(o.bucketInstanceId);for(let be=0;be<o.symbolInstances.length;be++){const Se=o.symbolInstances.get(be),{numHorizontalGlyphVertices:Re,numVerticalGlyphVertices:Pe,crossTileID:De}=Se;let Be=this.opacities[De];y[De]?Be=k:Be||(Be=le,this.opacities[De]=Be),y[De]=!0;const Ae=Se.numIconVertices>0,Ge=this.placedOrientations[Se.crossTileID],st=Ge===s.ao.vertical,Ye=Ge===s.ao.horizontal||Ge===s.ao.horizontalOnly;if(Re>0||Pe>0){const ot=Vf(Be.text);_e(o.text,Re,st?Gl:ot),_e(o.text,Pe,Ye?Gl:ot);const xt=Be.text.isHidden();[Se.rightJustifiedTextSymbolIndex,Se.centerJustifiedTextSymbolIndex,Se.leftJustifiedTextSymbolIndex].forEach(Vt=>{Vt>=0&&(o.text.placedSymbolArray.get(Vt).hidden=xt||st?1:0)}),Se.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(Se.verticalPlacedTextSymbolIndex).hidden=xt||Ye?1:0);const Et=this.variableOffsets[Se.crossTileID];Et&&this.markUsedJustification(o,Et.anchor,Se,Ge);const ft=this.placedOrientations[Se.crossTileID];ft&&(this.markUsedJustification(o,"left",Se,ft),this.markUsedOrientation(o,ft,Se))}if(Ae){const ot=Vf(Be.icon),xt=!(re&&Se.verticalPlacedIconSymbolIndex&&st);Se.placedIconSymbolIndex>=0&&(_e(o.icon,Se.numIconVertices,xt?ot:Gl),o.icon.placedSymbolArray.get(Se.placedIconSymbolIndex).hidden=Be.icon.isHidden()),Se.verticalPlacedIconSymbolIndex>=0&&(_e(o.icon,Se.numVerticalIconVertices,xt?Gl:ot),o.icon.placedSymbolArray.get(Se.verticalPlacedIconSymbolIndex).hidden=Be.icon.isHidden())}const Qe=ge&&ge.has(be)?ge.get(be):{text:null,icon:null};if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const ot=o.collisionArrays[be];if(ot){let xt=new s.P(0,0);if(ot.textBox||ot.verticalTextBox){let Et=!0;if(V){const ft=this.variableOffsets[De];ft?(xt=Ar(ft.anchor,ft.width,ft.height,ft.textOffset,ft.textBoxScale),Y&&xt._rotate(H?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Et=!1}if(ot.textBox||ot.verticalTextBox){let ft;ot.textBox&&(ft=st),ot.verticalTextBox&&(ft=Ye),fo(o.textCollisionBox.collisionVertexArray,Be.text.placed,!Et||ft,Qe.text,xt.x,xt.y)}}if(ot.iconBox||ot.verticalIconBox){const Et=!!(!Ye&&ot.verticalIconBox);let ft;ot.iconBox&&(ft=Et),ot.verticalIconBox&&(ft=!Et),fo(o.iconCollisionBox.collisionVertexArray,Be.icon.placed,ft,Qe.icon,re?xt.x:0,re?xt.y:0)}}}}if(o.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);o.bucketInstanceId in this.collisionCircleArrays&&(o.collisionCircleArray=this.collisionCircleArrays[o.bucketInstanceId],delete this.collisionCircleArrays[o.bucketInstanceId])}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,d){const y=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*y>o}setStale(){this.stale=!0}}function fo(w,o,d,y,v,T){y&&y.length!==0||(y=[0,0,0,0]);const R=y[0]-J,k=y[1]-J,L=y[2]-J,q=y[3]-J;w.emplaceBack(o?1:0,d?1:0,v||0,T||0,R,k),w.emplaceBack(o?1:0,d?1:0,v||0,T||0,L,k),w.emplaceBack(o?1:0,d?1:0,v||0,T||0,L,q),w.emplaceBack(o?1:0,d?1:0,v||0,T||0,R,q)}const ca=Math.pow(2,25),$n=Math.pow(2,24),di=Math.pow(2,17),ua=Math.pow(2,16),pw=Math.pow(2,9),fw=Math.pow(2,8),mw=Math.pow(2,1);function Vf(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const o=w.placed?1:0,d=Math.floor(127*w.opacity);return d*ca+o*$n+d*di+o*ua+d*pw+o*fw+d*mw+o}const Gl=0;class Uf{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,d,y,v,T){const R=this._bucketParts;for(;this._currentTileIndex<o.length;)if(d.getBucketParts(R,v,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort((k,L)=>k.sortKey-L.sortKey));this._currentPartIndex<R.length;)if(d.placeLayerBucketPart(R[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,T())return!0;return!1}}class Gf{constructor(o,d,y,v,T,R,k,L){this.placement=new Xr(o,d,R,k,L),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,d,y){const v=P.now(),T=()=>!this._forceFullPlacement&&P.now()-v>2;for(;this._currentPlacementIndex>=0;){const R=d[o[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(R.type==="symbol"&&(!R.minzoom||R.minzoom<=k)&&(!R.maxzoom||R.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Uf(R)),this._inProgressLayer.continuePlacement(y[R.source],this.placement,this._showCollisionBoxes,R,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Hl=512/s.$/2;class Hf{constructor(o,d,y){this.tileID=o,this.bucketInstanceId=y,this._symbolsByKey={};const v=new Map;for(let T=0;T<d.length;T++){const R=d.get(T),k=R.key,L=v.get(k);L?L.push(R):v.set(k,[R])}for(const[T,R]of v){const k={positions:R.map(L=>({x:Math.floor(L.anchorX*Hl),y:Math.floor(L.anchorY*Hl)})),crossTileIDs:R.map(L=>L.crossTileID)};if(k.positions.length>128){const L=new s.aI(k.positions.length,16,Uint16Array);for(const{x:q,y:V}of k.positions)L.add(q,V);L.finish(),delete k.positions,k.index=L}this._symbolsByKey[T]=k}}getScaledCoordinates(o,d){const{x:y,y:v,z:T}=this.tileID.canonical,{x:R,y:k,z:L}=d.canonical,q=Hl/Math.pow(2,L-T),V=(k*s.$+o.anchorY)*q,Y=v*s.$*Hl;return{x:Math.floor((R*s.$+o.anchorX)*q-y*s.$*Hl),y:Math.floor(V-Y)}}findMatches(o,d,y){const v=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let T=0;T<o.length;T++){const R=o.get(T);if(R.crossTileID)continue;const k=this._symbolsByKey[R.key];if(!k)continue;const L=this.getScaledCoordinates(R,d);if(k.index){const q=k.index.range(L.x-v,L.y-v,L.x+v,L.y+v).sort();for(const V of q){const Y=k.crossTileIDs[V];if(!y[Y]){y[Y]=!0,R.crossTileID=Y;break}}}else if(k.positions)for(let q=0;q<k.positions.length;q++){const V=k.positions[q],Y=k.crossTileIDs[q];if(Math.abs(V.x-L.x)<=v&&Math.abs(V.y-L.y)<=v&&!y[Y]){y[Y]=!0,R.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class Jf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class gw{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const d=Math.round((o-this.lng)/360);if(d!==0)for(const y in this.indexes){const v=this.indexes[y],T={};for(const R in v){const k=v[R];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+d),T[k.tileID.key]=k}this.indexes[y]=T}this.lng=o}addBucket(o,d,y){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let T=0;T<d.symbolInstances.length;T++)d.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const v=this.usedCrossTileIDs[o.overscaledZ];for(const T in this.indexes){const R=this.indexes[T];if(Number(T)>o.overscaledZ)for(const k in R){const L=R[k];L.tileID.isChildOf(o)&&L.findMatches(d.symbolInstances,o,v)}else{const k=R[o.scaledTo(Number(T)).key];k&&k.findMatches(d.symbolInstances,o,v)}}for(let T=0;T<d.symbolInstances.length;T++){const R=d.symbolInstances.get(T);R.crossTileID||(R.crossTileID=y.generate(),v[R.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Hf(o,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(o,d){for(const y of d.getCrossTileIDsLists())for(const v of y)delete this.usedCrossTileIDs[o][v]}removeStaleBuckets(o){let d=!1;for(const y in this.indexes){const v=this.indexes[y];for(const T in v)o[v[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,v[T]),delete v[T],d=!0)}return d}}class Jl{constructor(){this.layerIndexes={},this.crossTileIDs=new Jf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,d,y){let v=this.layerIndexes[o.id];v===void 0&&(v=this.layerIndexes[o.id]=new gw);let T=!1;const R={};v.handleWrapJump(y);for(const k of d){const L=k.getBucket(o);L&&o.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(k.tileID,L,this.crossTileIDs)&&(T=!0),R[L.bucketInstanceId]=!0)}return v.removeStaleBuckets(R)&&(T=!0),T}pruneUnusedLayers(o){const d={};o.forEach(y=>{d[y]=!0});for(const y in this.layerIndexes)d[y]||delete this.layerIndexes[y]}}var fu="void main() {fragColor=vec4(1.0);}";const Fo={prelude:Mr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Mr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Mr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Mr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Mr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Mr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Mr(fu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Mr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Mr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Mr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Mr(fu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Mr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Mr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Mr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Mr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Mr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Mr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Mr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Mr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Mr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Mr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Mr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Mr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Mr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Mr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Mr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Mr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Mr(w,o){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=o.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=T?T.concat(v):v,k={};return{fragmentSource:w=w.replace(d,(L,q,V,Y,H)=>(k[H]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${V} ${Y} ${H};
#else
uniform ${V} ${Y} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${V} ${Y} ${H} = u_${H};
#endif
`)),vertexSource:o=o.replace(d,(L,q,V,Y,H)=>{const re=Y==="float"?"vec2":"vec4",le=H.match(/color/)?"color":re;return k[H]?q==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${V} ${re} a_${H};
out ${V} ${Y} ${H};
#else
uniform ${V} ${Y} u_${H};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${V} ${Y} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${le}(a_${H}, u_${H}_t);
#else
    ${V} ${Y} ${H} = u_${H};
#endif
`:q==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${V} ${re} a_${H};
#else
uniform ${V} ${Y} u_${H};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${V} ${Y} ${H} = a_${H};
#else
    ${V} ${Y} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${V} ${Y} ${H} = unpack_mix_${le}(a_${H}, u_${H}_t);
#else
    ${V} ${Y} ${H} = u_${H};
#endif
`}),staticAttributes:y,staticUniforms:R}}class Ua{constructor(o,d,y){this.vertexBuffer=o,this.indexBuffer=d,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ha=s.aJ([{name:"a_pos",type:"Int16",components:2}]);const Fs="#define PROJECTION_MERCATOR",Ga="mercator";class Or{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ga}get shaderDefine(){return Fs}get shaderPreludeCode(){return Fo.projectionMercator}get vertexShaderPreludeCode(){return Fo.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(o){}getMeshFromTileID(o,d,y,v,T){if(this._cachedMesh)return this._cachedMesh;const R=new s.aL;R.emplaceBack(0,0),R.emplaceBack(s.$,0),R.emplaceBack(0,s.$),R.emplaceBack(s.$,s.$);const k=o.createVertexBuffer(R,ha.members),L=s.aM.simpleSegment(0,0,4,2),q=new s.aN;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3);const V=o.createIndexBuffer(q);return this._cachedMesh=new Ua(k,V,L),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(o){}}class Ha{constructor(o=0,d=0,y=0,v=0){if(isNaN(o)||o<0||isNaN(d)||d<0||isNaN(y)||y<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=d,this.left=y,this.right=v}interpolate(o,d,y){return d.top!=null&&o.top!=null&&(this.top=s.C.number(o.top,d.top,y)),d.bottom!=null&&o.bottom!=null&&(this.bottom=s.C.number(o.bottom,d.bottom,y)),d.left!=null&&o.left!=null&&(this.left=s.C.number(o.left,d.left,y)),d.right!=null&&o.right!=null&&(this.right=s.C.number(o.right,d.right,y)),this}getCenter(o,d){const y=s.ah((this.left+o-this.right)/2,0,o),v=s.ah((this.top+d-this.bottom)/2,0,d);return new s.P(y,v)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Ha(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ud(w,o){if(!w.renderWorldCopies||w.lngRange)return;const d=o.lng-w.center.lng;o.lng+=d>180?-360:d<-180?360:0}function hd(w){return Math.max(0,Math.floor(w))}class Ui{constructor(o,d,y,v,T,R){this._callbacks=o,this._tileSize=512,this._renderWorldCopies=R===void 0||!!R,this._minZoom=d||0,this._maxZoom=y||22,this._minPitch=v??0,this._maxPitch=T??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=hd(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ha,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(o,d,y){this._latRange=o.latRange,this._lngRange=o.lngRange,this._width=o.width,this._height=o.height,this._center=o.center,this._elevation=o.elevation,this._minElevationForCurrentTile=o.minElevationForCurrentTile,this._zoom=o.zoom,this._tileZoom=hd(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=o.bearingInRadians,this._fovInRadians=o.fovInRadians,this._pitchInRadians=o.pitchInRadians,this._rollInRadians=o.rollInRadians,this._unmodified=o.unmodified,this._edgeInsets=new Ha(o.padding.top,o.padding.bottom,o.padding.left,o.padding.right),this._minZoom=o.minZoom,this._maxZoom=o.maxZoom,this._minPitch=o.minPitch,this._maxPitch=o.maxPitch,this._renderWorldCopies=o.renderWorldCopies,this._cameraToCenterDistance=o.cameraToCenterDistance,this._nearZ=o.nearZ,this._farZ=o.farZ,this._autoCalculateNearFarZ=!y&&o.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(o){this._minElevationForCurrentTile=o}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(o){this._minZoom!==o&&(this._minZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(o){this._minPitch!==o&&(this._minPitch=o,this.setPitch(Math.max(this.pitch,o)))}get maxPitch(){return this._maxPitch}setMaxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.setPitch(Math.min(this.pitch,o)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(o){const d=s.aO(o,-180,180)*Math.PI/180;var y,v,T,R,k,L,q,V,Y;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=g(),y=this._rotationMatrix,T=-this._bearingInRadians,R=(v=this._rotationMatrix)[0],k=v[1],L=v[2],q=v[3],V=Math.sin(T),Y=Math.cos(T),y[0]=R*Y+L*V,y[1]=k*Y+q*V,y[2]=R*-V+L*Y,y[3]=k*-V+q*Y)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(o){const d=s.ah(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(o){const d=o/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aP(this._fovInRadians)}setFov(o){o=s.ah(o,.1,150),this.fov!==o&&(this._unmodified=!1,this._fovInRadians=s.ae(o),this._calcMatrices())}get zoom(){return this._zoom}setZoom(o){const d=this.getConstrained(this._center,o).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=s.af(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(o,d){this._autoCalculateNearFarZ=!1,this._nearZ=o,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,d,y){this._unmodified=!1,this._edgeInsets.interpolate(o,d,y),this._constrain(),this._calcMatrices()}resize(o,d,y=!0){this._width=o,this._height=d,y&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new lt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(o){o?(this._lngRange=[o.getWest(),o.getEast()],this._latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-s.ai,s.ai])}getConstrained(o,d){return this._callbacks.getConstrained(o,d)}getCameraQueryGeometry(o,d){if(d.length===1)return[d[0],o];{const{minX:y,minY:v,maxX:T,maxY:R}=s.a2.fromPoints(d).extend(o);return[new s.P(y,v),new s.P(T,v),new s.P(T,R),new s.P(y,R),new s.P(y,v)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const o=this._unmodified,{center:d,zoom:y}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(y),this._unmodified=o,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let o=s.ag(new Float64Array(16));s.N(o,o,[this._width/2,-this._height/2,1]),s.M(o,o,[1,-1,0]),this._clipSpaceToPixelsMatrix=o,o=s.ag(new Float64Array(16)),s.N(o,o,[1,-1,1]),s.M(o,o,[-1,-1,0]),s.N(o,o,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=o,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(o,d,y,v){const T=y!==void 0?y:this.bearing,R=v=v!==void 0?v:this.pitch,k=s.a1.fromLngLat(o,d),L=-Math.cos(s.ae(R)),q=Math.sin(s.ae(R)),V=q*Math.sin(s.ae(T)),Y=-q*Math.cos(s.ae(T));let H=this.elevation;const re=d-H;let le;L*re>=0||Math.abs(L)<.1?(le=1e4,H=d+le*L):le=-re/L;let _e,ge,be=s.aQ(1,k.y),Se=0;do{if(Se+=1,Se>10)break;ge=le/be,_e=new s.a1(k.x+V*ge,k.y+Y*ge),be=1/_e.meterInMercatorCoordinateUnits()}while(Math.abs(le-ge*be)>1e-12);return{center:_e.toLngLat(),elevation:H,zoom:s.ak(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(o){if(this.elevation-o==0)return;const d=s.aj(1,this.center.lat)*this.worldSize,y=this.cameraToCenterDistance/d,v=s.a1.fromLngLat(this.center,this.elevation),T=Je(this.center,this.elevation,this.pitch,this.bearing,y);this._elevation=o;const R=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),s.aQ(T.z,v.y),this.bearing,this.pitch);this._elevation=R.elevation,this._center=R.center,this.setZoom(R.zoom)}getCameraPoint(){const o=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(o*Math.sin(this.rollInRadians),o*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const o=s.aj(1,this.center.lat)*this.worldSize;return Je(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/o).toLngLat()}getMercatorTileCoordinates(o){if(!o)return[0,0,1,1];const d=o.canonical.z>=0?1<<o.canonical.z:Math.pow(2,o.canonical.z);return[o.canonical.x/d,o.canonical.y/d,1/d/s.$,1/d/s.$]}}class pi{constructor(o,d){this.min=o,this.max=d,this.center=s.aR([],s.aS([],this.min,this.max),.5)}quadrant(o){const d=[o%2==0,o<2],y=s.aT(this.min),v=s.aT(this.max);for(let T=0;T<d.length;T++)y[T]=d[T]?this.min[T]:this.center[T],v[T]=d[T]?this.center[T]:this.max[T];return v[2]=this.max[2],new pi(y,v)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersectsFrustum(o){let d=!0;for(let y=0;y<o.planes.length;y++){const v=this.intersectsPlane(o.planes[y]);if(v===0)return 0;v===1&&(d=!1)}return d?2:o.aabb.min[0]>this.max[0]||o.aabb.min[1]>this.max[1]||o.aabb.min[2]>this.max[2]||o.aabb.max[0]<this.min[0]||o.aabb.max[1]<this.min[1]||o.aabb.max[2]<this.min[2]?0:1}intersectsPlane(o){let d=o[3],y=o[3];for(let v=0;v<3;v++)o[v]>0?(d+=o[v]*this.min[v],y+=o[v]*this.max[v]):(y+=o[v]*this.min[v],d+=o[v]*this.max[v]);return d>=0?2:y<0?0:1}}class Gi{distanceToTile2d(o,d,y,v){const T=v.distanceX([o,d]),R=v.distanceY([o,d]);return Math.hypot(T,R)}getWrap(o,d,y){return y}getTileBoundingVolume(o,d,y,v){var T,R;let k=0,L=0;if(v?.terrain){const V=new s.Z(o.z,d,o.z,o.x,o.y),Y=v.terrain.getMinMaxElevation(V);k=(T=Y.minElevation)!==null&&T!==void 0?T:Math.min(0,y),L=(R=Y.maxElevation)!==null&&R!==void 0?R:Math.max(0,y)}const q=1<<o.z;return new pi([d+o.x/q,o.y/q,k],[d+(o.x+1)/q,(o.y+1)/q,L])}allowVariableZoom(o,d){const y=o.fov*(Math.abs(Math.cos(o.rollInRadians))*o.height+Math.abs(Math.sin(o.rollInRadians))*o.width)/o.height,v=s.ah(78.5-y/2,0,60);return!!d.terrain||o.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class Kn{constructor(o,d,y){this.points=o,this.planes=d,this.aabb=y}static fromInvProjectionMatrix(o,d=1,y=0,v,T){const R=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,y),L=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>function(re,le,_e,ge){const be=s.aw([],re,le),Se=1/be[3]/_e*ge;return s.aY(be,be,[Se,Se,1/be[3],Se])}(H,o,d,k));v&&function(H,re,le,_e){const ge=_e?4:0,be=_e?0:4;let Se=0;const Re=[],Pe=[];for(let Ae=0;Ae<4;Ae++){const Ge=s.aU([],H[Ae+be],H[Ae+ge]),st=s.aZ(Ge);s.aR(Ge,Ge,1/st),Re.push(st),Pe.push(Ge)}for(let Ae=0;Ae<4;Ae++){const Ge=s.a_(H[Ae+ge],Pe[Ae],le);Se=Ge!==null&&Ge>=0?Math.max(Se,Ge):Math.max(Se,Re[Ae])}const De=function(Ae,Ge){const st=s.aU([],Ae[Ge[0]],Ae[Ge[1]]),Ye=s.aU([],Ae[Ge[2]],Ae[Ge[1]]),Qe=[0,0,0,0];return s.aV(Qe,s.aW([],st,Ye)),Qe[3]=-s.aX(Qe,Ae[Ge[0]]),Qe}(H,re),Be=function(Ae,Ge){const st=s.a$(Ae),Ye=s.b0([],Ae,1/st),Qe=s.aU([],Ge,s.aR([],Ye,s.aX(Ge,Ye))),ot=s.a$(Qe);if(ot>0){const xt=Math.sqrt(1-Ye[3]*Ye[3]),Et=s.aR([],Ye,-Ye[3]),ft=s.aS([],Et,s.aR([],Qe,xt/ot));return s.b1(Ge,ft)}return null}(le,De);if(Be!==null){const Ae=Be/s.aX(Pe[0],De);Se=Math.min(Se,Ae)}for(let Ae=0;Ae<4;Ae++){const Ge=Math.min(Se,Re[Ae]);H[Ae+be]=[H[Ae+ge][0]+Pe[Ae][0]*Ge,H[Ae+ge][1]+Pe[Ae][1]*Ge,H[Ae+ge][2]+Pe[Ae][2]*Ge,1]}}(L,R[0],v,T);const q=R.map(H=>{const re=s.aU([],L[H[0]],L[H[1]]),le=s.aU([],L[H[2]],L[H[1]]),_e=s.aV([],s.aW([],re,le)),ge=-s.aX(_e,L[H[1]]);return _e.concat(ge)}),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Y=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const H of L)for(let re=0;re<3;re++)V[re]=Math.min(V[re],H[re]),Y[re]=Math.max(Y[re],H[re]);return new Kn(L,q,new pi(V,Y))}}class gn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,d,y){return this._helper.interpolatePadding(o,d,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,d,y=!0){this._helper.resize(o,d,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,d){this._helper.overrideNearFarZ(o,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o,d){}constructor(o,d,y,v,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(R,k)=>this.getConstrained(R,k)},o,d,y,v,T),this._coveringTilesDetailsProvider=new Gi}clone(){const o=new gn;return o.apply(this),o}apply(o,d,y){this._helper.apply(o,d,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(o){const d=[new s.b2(0,o)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new s.P(0,0)),v=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),R=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),k=Math.floor(Math.min(y.x,v.x,T.x,R.x)),L=Math.floor(Math.max(y.x,v.x,T.x,R.x)),q=1;for(let V=k-q;V<=L+q;V++)V!==0&&d.push(new s.b2(V,o))}return d}getCameraFrustum(){return Kn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){const d=this.screenPointToLocation(this.centerPoint,o),y=o?o.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(o,d){const y=s.aj(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(d,y),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),R=s.a1.fromLngLat(o),k=new s.a1(R.x-(v.x-T.x),R.y-(v.y-T.y));this.setCenter(k?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(o,d){return d?this.coordinatePoint(s.a1.fromLngLat(o),d.getElevationForLngLatZoom(o,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.a1.fromLngLat(o))}screenPointToLocation(o,d){var y;return(y=this.screenPointToMercatorCoordinate(o,d))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(o,d){if(d){const y=d.pointCoordinate(o);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(o)}screenPointToMercatorCoordinateAtZ(o,d){const y=d||0,v=[o.x,o.y,0,1],T=[o.x,o.y,1,1];s.aw(v,v,this._pixelMatrixInverse),s.aw(T,T,this._pixelMatrixInverse);const R=v[3],k=T[3],L=v[1]/R,q=T[1]/k,V=v[2]/R,Y=T[2]/k,H=V===Y?0:(y-V)/(Y-V);return new s.a1(s.C.number(v[0]/R,T[0]/k,H)/this.worldSize,s.C.number(L,q,H)/this.worldSize,y)}coordinatePoint(o,d=0,y=this._pixelMatrix){const v=[o.x*this.worldSize,o.y*this.worldSize,d,1];return s.aw(v,v,y),new s.P(v[0]/v[3],v[1]/v[3])}getBounds(){const o=Math.max(0,this._helper._height/2-Le(this));return new lt().extend(this.screenPointToLocation(new s.P(0,o))).extend(this.screenPointToLocation(new s.P(this._helper._width,o))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(o,d){return d?d.pointCoordinate(o)!=null:o.y>this.height/2-Le(this)}calculatePosMatrix(o,d=!1,y){var v;const T=(v=o.key)!==null&&v!==void 0?v:s.b3(o.wrap,o.canonical.z,o.canonical.z,o.canonical.x,o.canonical.y),R=d?this._alignedPosMatrixCache:this._posMatrixCache;if(R.has(T)){const q=R.get(T);return y?q.f32:q.f64}const k=je(o,this.worldSize);s.O(k,d?this._alignedProjMatrix:this._viewProjMatrix,k);const L={f64:k,f32:new Float32Array(k)};return R.set(T,L),y?L.f32:L.f64}calculateFogMatrix(o){const d=o.key,y=this._fogMatrixCacheF32;if(y.has(d))return y.get(d);const v=je(o,this.worldSize);return s.O(v,this._fogMatrix,v),y.set(d,new Float32Array(v)),y.get(d)}getConstrained(o,d){d=s.ah(+d,this.minZoom,this.maxZoom);const y={center:new s.S(o.lng,o.lat),zoom:d};let v=this._helper._lngRange;if(!this._helper._renderWorldCopies&&v===null){const Re=179.9999999999;v=[-Re,Re]}const T=this.tileSize*s.af(y.zoom);let R=0,k=T,L=0,q=T,V=0,Y=0;const{x:H,y:re}=this.size;if(this._helper._latRange){const Re=this._helper._latRange;R=s.U(Re[1])*T,k=s.U(Re[0])*T,k-R<re&&(V=re/(k-R))}v&&(L=s.aO(s.V(v[0])*T,0,T),q=s.aO(s.V(v[1])*T,0,T),q<L&&(q+=T),q-L<H&&(Y=H/(q-L)));const{x:le,y:_e}=de(T,o);let ge,be;const Se=Math.max(Y||0,V||0);if(Se){const Re=new s.P(Y?(q+L)/2:le,V?(k+R)/2:_e);return y.center=Te(T,Re).wrap(),y.zoom+=s.ak(Se),y}if(this._helper._latRange){const Re=re/2;_e-Re<R&&(be=R+Re),_e+Re>k&&(be=k-Re)}if(v){const Re=(L+q)/2;let Pe=le;this._helper._renderWorldCopies&&(Pe=s.aO(le,Re-T/2,Re+T/2));const De=H/2;Pe-De<L&&(ge=L+De),Pe+De>q&&(ge=q-De)}if(ge!==void 0||be!==void 0){const Re=new s.P(ge??le,be??_e);y.center=Te(T,Re).wrap()}return y}calculateCenterFromCameraLngLatAlt(o,d,y,v){return this._helper.calculateCenterFromCameraLngLatAlt(o,d,y,v)}_calculateNearFarZIfNeeded(o,d,y){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=o-v*this._helper._pixelPerMeter/Math.cos(d),R=v<0?T:o,k=Math.PI/2+this.pitchInRadians,L=s.ae(this.fov)*(Math.abs(Math.cos(s.ae(this.roll)))*this.height+Math.abs(Math.sin(s.ae(this.roll)))*this.width)/this.height*(.5+y.y/this.height),q=Math.sin(L)*R/Math.sin(s.ah(Math.PI-k-L,.01,Math.PI-.01)),V=Le(this),Y=Math.atan(V/this._helper.cameraToCenterDistance),H=s.ae(.75),re=Y>H?2*Y*(.5+y.y/(2*V)):H,le=Math.sin(re)*R/Math.sin(s.ah(Math.PI-k-re,.01,Math.PI-.01)),_e=Math.min(q,le);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*_e+R),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const o=this.centerOffset,d=de(this.worldSize,this.center),y=d.x,v=d.y;this._helper._pixelPerMeter=s.aj(1,this.center.lat)*this.worldSize;const T=s.ae(Math.min(this.pitch,ae)),R=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let k;this._calculateNearFarZIfNeeded(R,T,o),k=new Float64Array(16),s.b4(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aq(this._invProjMatrix,k),k[8]=2*-o.x/this._helper._width,k[9]=2*o.y/this._helper._height,this._projectionMatrix=s.b5(k),s.N(k,k,[1,-1,1]),s.M(k,k,[0,0,-this._helper.cameraToCenterDistance]),s.b6(k,k,-this.rollInRadians),s.b7(k,k,this.pitchInRadians),s.b6(k,k,-this.bearingInRadians),s.M(k,k,[-y,-v,0]),this._mercatorMatrix=s.N([],k,[this.worldSize,this.worldSize,this.worldSize]),s.N(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),s.M(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=s.aq([],k);const L=[0,0,-1,1];s.aw(L,L,this._invViewProjMatrix),this._cameraPosition=[L[0]/L[3],L[1]/L[3],L[2]/L[3]],this._fogMatrix=new Float64Array(16),s.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,R,this._helper._farZ),this._fogMatrix[8]=2*-o.x/this.width,this._fogMatrix[9]=2*o.y/this.height,s.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.M(this._fogMatrix,this._fogMatrix,[-y,-v,0]),s.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);const q=this._helper._width%2/2,V=this._helper._height%2/2,Y=Math.cos(this.bearingInRadians),H=Math.sin(-this.bearingInRadians),re=y-Math.round(y)+Y*q+H*V,le=v-Math.round(v)+Y*V+H*q,_e=new Float64Array(k);if(s.M(_e,_e,[re>.5?re-1:re,le>.5?le-1:le,0]),this._alignedProjMatrix=_e,k=s.aq(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const o=this.screenPointToMercatorCoordinate(new s.P(0,0)),d=[o.x*this.worldSize,o.y*this.worldSize,0,1];return s.aw(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const o=s.aj(1,this.center.lat)*this.worldSize;return Je(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/o).toLngLat()}lngLatToCameraDepth(o,d){const y=s.a1.fromLngLat(o),v=[y.x*this.worldSize,y.y*this.worldSize,d,1];return s.aw(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(o){const{overscaledTileID:d,aligned:y,applyTerrainMatrix:v}=o,T=this._helper.getMercatorTileCoordinates(d),R=d?this.calculatePosMatrix(d,y,!0):null;let k;return k=d&&d.terrainRttPosMatrix32f&&v?d.terrainRttPosMatrix32f:R||s.b8(),{mainMatrix:k,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(o){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(o,d,y){return 1}transformLightDirection(o){return s.aT(o)}getRayDirectionFromPixel(o){throw new Error("Not implemented.")}projectTileCoordinates(o,d,y,v){const T=this.calculatePosMatrix(y);let R;v?(R=[o,d,v(o,d),1],s.aw(R,R,T)):(R=[o,d,0,1],D(R,R,T));const k=R[3];return{point:new s.P(R[0]/k,R[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(o){for(const d of o)this.calculatePosMatrix(d)}getMatrixForModel(o,d){const y=s.a1.fromLngLat(o,d),v=y.meterInMercatorCoordinateUnits(),T=s.b9();return s.M(T,T,[y.x,y.y,y.z]),s.b6(T,T,Math.PI),s.b7(T,T,Math.PI/2),s.N(T,T,[-v,v,v]),T}getProjectionDataForCustomLayer(o=!0){const d=new s.Z(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:o}),v=je(d,this.worldSize);s.O(v,this._viewProjMatrix,v),y.tileMercatorCoords=[0,0,1,1];const T=[s.$,s.$,this.worldSize/this._helper.pixelsPerMeter],R=s.ba();return s.N(R,v,T),y.fallbackMatrix=R,y.mainMatrix=R,y}getFastPathSimpleProjectionMatrix(o){return this.calculatePosMatrix(o)}}function w_(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Hi(w){if(w.useSlerp)if(w.k<1){const o=s.bb(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),d=s.bb(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),y=new Float64Array(4);s.bc(y,o,d,w.k);const v=s.bd(y);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(s.C.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(s.C.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(s.C.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function mo(w,o,d,y,v){const T=v.padding,R=de(v.worldSize,d.getNorthWest()),k=de(v.worldSize,d.getNorthEast()),L=de(v.worldSize,d.getSouthEast()),q=de(v.worldSize,d.getSouthWest()),V=s.ae(-y),Y=R.rotate(V),H=k.rotate(V),re=L.rotate(V),le=q.rotate(V),_e=new s.P(Math.max(Y.x,H.x,le.x,re.x),Math.max(Y.y,H.y,le.y,re.y)),ge=new s.P(Math.min(Y.x,H.x,le.x,re.x),Math.min(Y.y,H.y,le.y,re.y)),be=_e.sub(ge),Se=(v.width-(T.left+T.right+o.left+o.right))/be.x,Re=(v.height-(T.top+T.bottom+o.top+o.bottom))/be.y;if(Re<0||Se<0)return void w_();const Pe=Math.min(s.ak(v.scale*Math.min(Se,Re)),w.maxZoom),De=s.P.convert(w.offset),Be=new s.P((o.left-o.right)/2,(o.top-o.bottom)/2).rotate(s.ae(y)),Ae=De.add(Be).mult(v.scale/s.af(Pe));return{center:Te(v.worldSize,R.add(L).div(2).sub(Ae)),zoom:Pe,bearing:y}}class zi{get useGlobeControls(){return!1}handlePanInertia(o,d){return{easingOffset:o,easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(o,d){o.bearingDelta&&d.setBearing(d.bearing+o.bearingDelta),o.pitchDelta&&d.setPitch(d.pitch+o.pitchDelta),o.rollDelta&&d.setRoll(d.roll+o.rollDelta),o.zoomDelta&&d.setZoom(d.zoom+o.zoomDelta)}handleMapControlsPan(o,d,y){o.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(y,o.around)}cameraForBoxAndBearing(o,d,y,v,T){return mo(o,d,y,v,T)}handleJumpToCenterZoom(o,d){o.zoom!==(d.zoom!==void 0?+d.zoom:o.zoom)&&o.setZoom(+d.zoom),d.center!==void 0&&o.setCenter(s.S.convert(d.center))}handleEaseTo(o,d){const y=o.zoom,v=o.padding,T={roll:o.roll,pitch:o.pitch,bearing:o.bearing},R={roll:d.roll===void 0?o.roll:d.roll,pitch:d.pitch===void 0?o.pitch:d.pitch,bearing:d.bearing===void 0?o.bearing:d.bearing},k=d.zoom!==void 0,L=!o.isPaddingEqual(d.padding);let q=!1;const V=k?+d.zoom:o.zoom;let Y=o.centerPoint.add(d.offsetAsPoint);const H=o.screenPointToLocation(Y),{center:re,zoom:le}=o.getConstrained(s.S.convert(d.center||H),V??y);ud(o,re);const _e=de(o.worldSize,H),ge=de(o.worldSize,re).sub(_e),be=s.af(le-y);return q=le!==y,{easeFunc:Se=>{if(q&&o.setZoom(s.C.number(y,le,Se)),s.be(T,R)||Hi({startEulerAngles:T,endEulerAngles:R,tr:o,k:Se,useSlerp:T.roll!=R.roll}),L&&(o.interpolatePadding(v,d.padding,Se),Y=o.centerPoint.add(d.offsetAsPoint)),d.around)o.setLocationAtPoint(d.around,d.aroundPoint);else{const Re=s.af(o.zoom-y),Pe=le>y?Math.min(2,be):Math.max(.5,be),De=Math.pow(Pe,1-Se),Be=Te(o.worldSize,_e.add(ge.mult(Se*De)).mult(Re));o.setLocationAtPoint(o.renderWorldCopies?Be.wrap():Be,Y)}},isZooming:q,elevationCenter:re}}handleFlyTo(o,d){const y=d.zoom!==void 0,v=o.zoom,T=o.getConstrained(s.S.convert(d.center||d.locationAtOffset),y?+d.zoom:v),R=T.center,k=T.zoom;ud(o,R);const L=de(o.worldSize,d.locationAtOffset),q=de(o.worldSize,R).sub(L),V=q.mag(),Y=s.af(k-v);let H;if(d.minZoom!==void 0){const re=Math.min(+d.minZoom,v,k),le=o.getConstrained(R,re).zoom;H=s.af(le-v)}return{easeFunc:(re,le,_e,ge)=>{o.setZoom(re===1?k:v+s.ak(le));const be=re===1?R:Te(o.worldSize,L.add(q.mult(_e)).mult(le));o.setLocationAtPoint(o.renderWorldCopies?be.wrap():be,ge)},scaleOfZoom:Y,targetCenter:R,scaleOfMinZoom:H,pixelPathLength:V}}}class Sn{constructor(o,d,y){this.blendFunction=o,this.blendColor=d,this.mask=y}}Sn.Replace=[1,0],Sn.disabled=new Sn(Sn.Replace,s.bf.transparent,[!1,!1,!1,!1]),Sn.unblended=new Sn(Sn.Replace,s.bf.transparent,[!0,!0,!0,!0]),Sn.alphaBlended=new Sn([1,771],s.bf.transparent,[!0,!0,!0,!0]);const Ja=2305;class or{constructor(o,d,y){this.enable=o,this.mode=d,this.frontFace=y}}or.disabled=new or(!1,1029,Ja),or.backCCW=new or(!0,1029,Ja),or.frontCCW=new or(!0,1028,Ja);class br{constructor(o,d,y){this.func=o,this.mask=d,this.range=y}}br.ReadOnly=!1,br.ReadWrite=!0,br.disabled=new br(519,br.ReadOnly,[0,1]);const zs=7680;class Wr{constructor(o,d,y,v,T,R){this.test=o,this.ref=d,this.mask=y,this.fail=v,this.depthFail=T,this.pass=R}}Wr.disabled=new Wr({func:519,mask:0},0,0,zs,zs,zs);const go=new WeakMap;function ys(w){var o;if(go.has(w))return go.get(w);{const d=(o=w.getParameter(w.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return go.set(w,d),d}}class _s{get awaitingQuery(){return!!this._readbackQueue}constructor(o){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=o;const d=o.context,y=d.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const v=new s.aL;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const T=new s.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Ua(d.createVertexBuffer(v,ha.members),d.createIndexBuffer(T),s.aM.simpleSegment(0,0,v.length,T.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(y.TEXTURE1);const R=y.createTexture();y.bindTexture(y.TEXTURE_2D,R),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(R),ys(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const o=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),o.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(o,d){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(o,d),this._updateCount++,this._measuredError}_bindFramebuffer(){const o=this._cachedRenderContext.context,d=o.gl;o.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),o.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(o,d){const y=this._cachedRenderContext.context,v=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:s.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,v.TRIANGLES,br.disabled,Wr.disabled,Sn.unblended,or.disabled,((T,R)=>({u_input:T,u_output_expected:R}))(o,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ys(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const T=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const o=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ys(o)){const d=o.clientWaitSync(this._readbackQueue.sync,0,0);if(d===o.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===o.TIMEOUT_EXPIRED)return;o.bindBuffer(o.PIXEL_PACK_BUFFER,this._pbo),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),o.bindBuffer(o.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),o.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=_s._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(o){let d=0;return d+=o[0]/256,d+=o[1]/65536,d+=o[2]/16777216,o[3]<127&&(d=-d),d/128}}const dd=s.$/128;function Wf(w,o){const d=w.granularity!==void 0?Math.max(w.granularity,1):1,y=d+(w.generateBorders?2:0),v=d+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),T=y+1,R=v+1,k=w.generateBorders?-1:0,L=w.generateBorders||w.extendToNorthPole?-1:0,q=d+(w.generateBorders?1:0),V=d+(w.generateBorders||w.extendToSouthPole?1:0),Y=T*R,H=y*v*6,re=T*R>65536;if(re&&o==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const le=re||o==="32bit",_e=new Int16Array(2*Y);let ge=0;for(let Re=L;Re<=V;Re++)for(let Pe=k;Pe<=q;Pe++){let De=Pe/d*s.$;Pe===-1&&(De=-dd),Pe===d+1&&(De=s.$+dd);let Be=Re/d*s.$;Re===-1&&(Be=w.extendToNorthPole?s.bh:-dd),Re===d+1&&(Be=w.extendToSouthPole?s.bi:s.$+dd),_e[ge++]=De,_e[ge++]=Be}const be=le?new Uint32Array(H):new Uint16Array(H);let Se=0;for(let Re=0;Re<v;Re++)for(let Pe=0;Pe<y;Pe++){const De=Pe+1+Re*T,Be=Pe+(Re+1)*T,Ae=Pe+1+(Re+1)*T;be[Se++]=Pe+Re*T,be[Se++]=Be,be[Se++]=De,be[Se++]=De,be[Se++]=Be,be[Se++]=Ae}return{vertices:_e.buffer.slice(0),indices:be.buffer.slice(0),uses32bitIndices:le}}const Wl=new s.aK({fill:new s.bj(128,2),line:new s.bj(512,0),tile:new s.bj(128,32),stencil:new s.bj(128,1),circle:3});class mu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Fo.projectionGlobe}get vertexShaderPreludeCode(){return Fo.projectionMercator.vertexSource}get subdivisionGranularity(){return Wl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(o){this._errorMeasurement||(this._errorMeasurement=new _s(o));const d=s.U(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(d,y),T=P.now();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=T);const R=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bl(R))}_getMeshKey(o){return`${o.granularity.toString(36)}_${o.generateBorders?"b":""}${o.extendToNorthPole?"n":""}${o.extendToSouthPole?"s":""}`}getMeshFromTileID(o,d,y,v,T){const R=(T==="stencil"?Wl.stencil:Wl.tile).getGranularityForZoomLevel(d.z);return this._getMesh(o,{granularity:R,generateBorders:y,extendToNorthPole:d.y===0&&v,extendToSouthPole:d.y===(1<<d.z)-1&&v})}_getMesh(o,d){const y=this._getMeshKey(d);if(y in this._tileMeshCache)return this._tileMeshCache[y];const v=function(T,R){const k=Wf(R,"16bit"),L=s.aL.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),q=s.aN.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new Ua(T.createVertexBuffer(L,ha.members),T.createIndexBuffer(q),s.aM.simpleSegment(0,0,L.length,q.length))}(o,d);return this._tileMeshCache[y]=v,v}recalculate(o){}hasTransition(){const o=P.now();let d=!1;return d=d||(o-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(o){this._errorQueryLatitudeDegrees=o}}const pd=new s.r({type:new s.D(s.v.projection.type)});class fd extends s.E{constructor(o){super(),this._transitionable=new s.t(pd),this.setProjection(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0)),this._mercatorProjection=new Or,this._verticalPerspectiveProjection=new mu}get transitionState(){const o=this.properties.get("type");if(typeof o=="string"&&o==="mercator")return 0;if(typeof o=="string"&&o==="vertical-perspective")return 1;if(o instanceof s.bm){if(o.from==="vertical-perspective"&&o.to==="mercator")return 1-o.transition;if(o.from==="mercator"&&o.to==="vertical-perspective")return o.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(o){this._mercatorProjection.updateGPUdependent(o),this._verticalPerspectiveProjection.updateGPUdependent(o)}getMeshFromTileID(o,d,y,v,T){return this.currentProjection.getMeshFromTileID(o,d,y,v,T)}setProjection(o){this._transitionable.setValue("type",o?.type||"mercator")}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}setErrorQueryLatitudeDegrees(o){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(o),this._mercatorProjection.setErrorQueryLatitudeDegrees(o)}}function md(w){const o=Zl(w.worldSize,w.center.lat);return 2*Math.PI*o}function zo(w,o,d,y,v){const T=1/(1<<v),R=o/s.$*T+y*T,k=s.bo((w/s.$*T+d*T)*Math.PI*2+Math.PI,2*Math.PI),L=2*Math.atan(Math.exp(Math.PI-R*Math.PI*2))-.5*Math.PI,q=Math.cos(L),V=new Float64Array(3);return V[0]=Math.sin(k)*q,V[1]=Math.sin(L),V[2]=Math.cos(k)*q,V}function fi(w){return function(o,d){const y=Math.cos(d),v=new Float64Array(3);return v[0]=Math.sin(o)*y,v[1]=Math.sin(d),v[2]=Math.cos(o)*y,v}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Zl(w,o){return w/(2*Math.PI)/Math.cos(o*Math.PI/180)}function gu(w){const o=Math.asin(w[1])/Math.PI*180,d=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(d>1e-6){const y=w[0]/d,v=Math.acos(w[2]/d),T=(y>0?v:-v)/Math.PI*180;return new s.S(s.aO(T,-180,180),o)}return new s.S(0,o)}function Wa(w){return Math.cos(w*Math.PI/180)}function Vn(w,o){const d=Wa(w),y=Wa(o);return s.ak(y/d)}function E_(w,o){const d=w.rotate(o.bearingInRadians),y=o.zoom+Vn(o.center.lat,0),v=s.bk(1/Wa(o.center.lat),1/Wa(Math.min(Math.abs(o.center.lat),60)),s.bn(y,7,3,0,1)),T=360/md({worldSize:o.worldSize,center:{lat:o.center.lat}});return new s.S(o.center.lng-d.x*T*v,s.ah(o.center.lat+d.y*T,-s.ai,s.ai))}function yu(w){const o=.5*w,d=Math.sin(o),y=Math.cos(o);return Math.log(d+y)-Math.log(y-d)}function Zf(w,o,d,y){const v=w.lat+d*y;if(Math.abs(d)>1){const T=(Math.sign(w.lat+d)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,R=Math.abs(w.lat+d)*Math.PI/180,k=yu(T+y*(R-T)),L=yu(T),q=yu(R);return new s.S(w.lng+o*((k-L)/(q-L)),v)}return new s.S(w.lng+o*y,v)}class yw{constructor(o){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=o}swapBuffers(){if(!this._hadAnyChanges)return;const o=this._cachePrevious;this._cachePrevious=this._cache,this._cache=o,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(o,d,y,v){const T=`${o.z}_${o.x}_${o.y}_${v?.terrain?"t":""}`,R=this._cache.get(T);if(R)return R;const k=this._cachePrevious.get(T);if(k)return this._cache.set(T,k),k;const L=this._boundingVolumeFactory(o,d,y,v);return this._cache.set(T,L),this._hadAnyChanges=!0,L}}class Kl{constructor(o,d,y,v){this.min=y,this.max=v,this.points=o,this.planes=d}static fromAabb(o,d){const y=[];for(let v=0;v<8;v++)y.push([1&~v?o[0]:d[0],(v>>1&1)==1?d[1]:o[1],(v>>2&1)==1?d[2]:o[2]]);return new Kl(y,[[-1,0,0,d[0]],[1,0,0,-o[0]],[0,-1,0,d[1]],[0,1,0,-o[1]],[0,0,-1,d[2]],[0,0,1,-o[2]]],o,d)}static fromCenterSizeAngles(o,d,y){const v=s.br([],y[0],y[1],y[2]),T=s.bs([],[d[0],0,0],v),R=s.bs([],[0,d[1],0],v),k=s.bs([],[0,0,d[2]],v),L=[...o],q=[...o];for(let Y=0;Y<8;Y++)for(let H=0;H<3;H++){const re=o[H]+T[H]*(1&~Y?-1:1)+R[H]*((Y>>1&1)==1?1:-1)+k[H]*((Y>>2&1)==1?1:-1);L[H]=Math.min(L[H],re),q[H]=Math.max(q[H],re)}const V=[];for(let Y=0;Y<8;Y++){const H=[...o];s.aS(H,H,s.aR([],T,1&~Y?-1:1)),s.aS(H,H,s.aR([],R,(Y>>1&1)==1?1:-1)),s.aS(H,H,s.aR([],k,(Y>>2&1)==1?1:-1)),V.push(H)}return new Kl(V,[[...T,-s.aX(T,V[0])],[...R,-s.aX(R,V[0])],[...k,-s.aX(k,V[0])],[-T[0],-T[1],-T[2],-s.aX(T,V[7])],[-R[0],-R[1],-R[2],-s.aX(R,V[7])],[-k[0],-k[1],-k[2],-s.aX(k,V[7])]],L,q)}intersectsFrustum(o){let d=!0;const y=this.points.length,v=this.planes.length,T=o.planes.length,R=o.points.length;for(let k=0;k<T;k++){const L=o.planes[k];let q=0;for(let V=0;V<y;V++){const Y=this.points[V];L[0]*Y[0]+L[1]*Y[1]+L[2]*Y[2]+L[3]>=0&&q++}if(q===0)return 0;q<y&&(d=!1)}if(d)return 2;for(let k=0;k<v;k++){const L=this.planes[k];let q=0;for(let V=0;V<R;V++){const Y=o.points[V];L[0]*Y[0]+L[1]*Y[1]+L[2]*Y[2]+L[3]>=0&&q++}if(q===0)return 0}return 1}intersectsPlane(o){const d=this.points.length;let y=0;for(let v=0;v<d;v++){const T=this.points[v];o[0]*T[0]+o[1]*T[1]+o[2]*T[2]+o[3]>=0&&y++}return y===d?2:y===0?0:1}}function Pi(w,o,d){const y=w-o;return y<0?-y:Math.max(0,y-d)}function _u(w,o,d,y,v){const T=w-d;let R;return R=T<0?Math.min(-T,1+T-v):T>1?Math.min(Math.max(T-v,0),1-T):0,Math.max(R,Pi(o,y,v))}class bs{constructor(){this._boundingVolumeCache=new yw(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(o,d,y,v){const T=1<<y.z,R=1/T,k=y.x/T,L=y.y/T;let q=2;return q=Math.min(q,_u(o,d,k,L,R)),q=Math.min(q,_u(o,d,k+.5,-L-R,R)),q=Math.min(q,_u(o,d,k+.5,2-L-R,R)),q}getWrap(o,d,y){const v=1<<d.z,T=1/v,R=d.x/v,k=Pi(o.x,R,T),L=Pi(o.x,R-1,T),q=Pi(o.x,R+1,T),V=Math.min(k,L,q);return V===q?1:V===L?-1:0}allowVariableZoom(o,d){return Ot(o,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(o,d,y,v){return this._boundingVolumeCache.getTileBoundingVolume(o,d,y,v)}_computeTileBoundingVolume(o,d,y,v){var T,R;let k=0,L=0;if(v?.terrain){const q=new s.Z(o.z,d,o.z,o.x,o.y),V=v.terrain.getMinMaxElevation(q);k=(T=V.minElevation)!==null&&T!==void 0?T:Math.min(0,y),L=(R=V.maxElevation)!==null&&R!==void 0?R:Math.max(0,y)}if(k/=s.bu,L/=s.bu,k+=1,L+=1,o.z<=0)return Kl.fromAabb([-L,-L,-L],[L,L,L]);if(o.z===1)return Kl.fromAabb([o.x===0?-L:0,o.y===0?0:-L,-L],[o.x===0?0:L,o.y===0?L:0,L]);{const q=[zo(0,0,o.x,o.y,o.z),zo(s.$,0,o.x,o.y,o.z),zo(s.$,s.$,o.x,o.y,o.z),zo(0,s.$,o.x,o.y,o.z)],V=[];for(const Qe of q)V.push(s.aR([],Qe,L));if(L!==k)for(const Qe of q)V.push(s.aR([],Qe,k));o.y===0&&V.push([0,1,0]),o.y===(1<<o.z)-1&&V.push([0,-1,0]);const Y=[1,1,1],H=[-1,-1,-1];for(const Qe of V)for(let ot=0;ot<3;ot++)Y[ot]=Math.min(Y[ot],Qe[ot]),H[ot]=Math.max(H[ot],Qe[ot]);const re=zo(s.$/2,s.$/2,o.x,o.y,o.z),le=s.aW([],[0,1,0],re);s.aV(le,le);const _e=s.aW([],re,le);s.aV(_e,_e);const ge=s.aW([],q[2],q[1]);s.aV(ge,ge);const be=s.aW([],q[0],q[3]);s.aV(be,be),V.push(s.aR([],re,L)),o.y>=(1<<o.z)/2&&V.push(s.aR([],zo(s.$/2,0,o.x,o.y,o.z),L)),o.y<(1<<o.z)/2&&V.push(s.aR([],zo(s.$/2,s.$,o.x,o.y,o.z),L));const Se=bu(re,V),Re=bu(_e,V),Pe=[-re[0],-re[1],-re[2],Se.max],De=[re[0],re[1],re[2],-Se.min],Be=[-_e[0],-_e[1],-_e[2],Re.max],Ae=[_e[0],_e[1],_e[2],-Re.min],Ge=[...ge,0],st=[...be,0],Ye=[];return o.y===0?Ye.push(s.bt(st,Ge,Pe),s.bt(st,Ge,De)):Ye.push(s.bt(Be,Ge,Pe),s.bt(Be,Ge,De),s.bt(Be,st,Pe),s.bt(Be,st,De)),o.y===(1<<o.z)-1?Ye.push(s.bt(st,Ge,Pe),s.bt(st,Ge,De)):Ye.push(s.bt(Ae,Ge,Pe),s.bt(Ae,Ge,De),s.bt(Ae,st,Pe),s.bt(Ae,st,De)),new Kl(Ye,[Pe,De,Be,Ae,Ge,st],Y,H)}}}function bu(w,o){let d=1/0,y=-1/0;for(const v of o){const T=s.aX(w,v);d=Math.min(d,T),y=Math.max(y,T)}return{min:d,max:y}}class vu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,d,y){return this._helper.interpolatePadding(o,d,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,d){this._helper.resize(o,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,d){this._helper.overrideNearFarZ(o,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o){}constructor(){this._cachedClippingPlane=s.bv(),this._projectionMatrix=s.b9(),this._globeViewProjMatrix32f=s.b8(),this._globeViewProjMatrixNoCorrection=s.b9(),this._globeViewProjMatrixNoCorrectionInverted=s.b9(),this._globeProjMatrixInverted=s.b9(),this._cameraPosition=s.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,d)=>this.getConstrained(o,d)}),this._coveringTilesDetailsProvider=new bs}clone(){const o=new vu;return o.apply(this),o}apply(o,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(o)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const o=s.bp();return o[0]=this._cameraPosition[0],o[1]=this._cameraPosition[1],o[2]=this._cameraPosition[2],o}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(o){const{overscaledTileID:d,applyGlobeMatrix:y}=o,v=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(o){const d=this.pitchInRadians,y=this.cameraToCenterDistance/o,v=Math.sin(d)*y,T=Math.cos(d)*y+1,R=1/Math.sqrt(v*v+T*T)*1;let k=-v,L=T;const q=Math.sqrt(k*k+L*L);k/=q,L/=q;const V=[0,k,L];s.bw(V,V,[0,0,0],-this.bearingInRadians),s.bx(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),s.by(V,V,[0,0,0],this.center.lng*Math.PI/180);const Y=1/s.aZ(V);return s.aR(V,V,Y),[...V,-R*Y]}isLocationOccluded(o){return!this.isSurfacePointVisible(fi(o))}transformLightDirection(o){const d=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,v=Math.cos(y),T=[Math.sin(d)*v,Math.sin(y),Math.cos(d)*v],R=[T[2],0,-T[0]],k=[0,0,0];s.aW(k,R,T),s.aV(R,R),s.aV(k,k);const L=[0,0,0];return s.aV(L,[R[0]*o[0]+k[0]*o[1]+T[0]*o[2],R[1]*o[0]+k[1]*o[1]+T[1]*o[2],R[2]*o[0]+k[2]*o[1]+T[2]*o[2]]),L}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(o,d,y){const v=function(k,L,q){const V=1/(1<<q.z);return new s.a1(k/s.$*V+q.x*V,L/s.$*V+q.y*V)}(o,d,y.canonical),T=(R=v.y,[s.bo(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-R*Math.PI*2))-.5*Math.PI]);var R;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(o,d,y,v){const T=y.canonical,R=zo(o,d,T.x,T.y,T.z),k=1+(v?v(o,d):0)/s.bu,L=[R[0]*k,R[1]*k,R[2]*k,1];s.aw(L,L,this._globeViewProjMatrixNoCorrection);const q=this._cachedClippingPlane,V=q[0]*R[0]+q[1]*R[1]+q[2]*R[2]+q[3]<0;return{point:new s.P(L[0]/L[3],L[1]/L[3]),signedDistanceFromCamera:L[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const o=Zl(this.worldSize,this.center.lat),d=s.ba(),y=s.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*o),s.b4(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;d[8]=2*-v.x/this._helper._width,d[9]=2*v.y/this._helper._height,this._projectionMatrix=s.b5(d),this._globeProjMatrixInverted=s.ba(),s.aq(this._globeProjMatrixInverted,d),s.M(d,d,[0,0,-this.cameraToCenterDistance]),s.b6(d,d,this.rollInRadians),s.b7(d,d,-this.pitchInRadians),s.b6(d,d,this.bearingInRadians),s.M(d,d,[0,0,-o]);const T=s.bp();T[0]=o,T[1]=o,T[2]=o,s.b7(y,d,this.center.lat*Math.PI/180),s.bz(y,y,-this.center.lng*Math.PI/180),s.N(y,y,T),this._globeViewProjMatrixNoCorrection=y,s.b7(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bz(d,d,-this.center.lng*Math.PI/180),s.N(d,d,T),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=s.ba(),s.aq(this._globeViewProjMatrixNoCorrectionInverted,y);const R=s.bp();this._cameraPosition=s.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/o,s.bw(this._cameraPosition,this._cameraPosition,R,-this.rollInRadians),s.bx(this._cameraPosition,this._cameraPosition,R,this.pitchInRadians),s.bw(this._cameraPosition,this._cameraPosition,R,-this.bearingInRadians),s.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bx(this._cameraPosition,this._cameraPosition,R,-this.center.lat*Math.PI/180),s.by(this._cameraPosition,this._cameraPosition,R,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(o);const k=s.b5(this._globeViewProjMatrixNoCorrectionInverted);s.N(k,k,[1,1,-1]),this._cachedFrustum=Kn.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(o){s.w("calculateFogMatrix is not supported on globe projection.");const d=s.ba();return s.ag(d),d}getVisibleUnwrappedCoordinates(o){return[new s.b2(0,o)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){o&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,d){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=fi(o);s.aR(y,y,1+d/s.bu);const v=s.bv();return s.aw(v,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(o){}getBounds(){const o=.5*this.width,d=.5*this.height,y=[new s.P(0,0),new s.P(o,0),new s.P(this.width,0),new s.P(this.width,d),new s.P(this.width,this.height),new s.P(o,this.height),new s.P(0,this.height),new s.P(0,d)],v=[];for(const Y of y)v.push(this.unprojectScreenPoint(Y));let T=0,R=0,k=0,L=0;const q=this.center;for(const Y of v){const H=s.bA(q.lng,Y.lng),re=s.bA(q.lat,Y.lat);H<R&&(R=H),H>T&&(T=H),re<L&&(L=re),re>k&&(k=re)}const V=[q.lng+R,q.lat+L,q.lng+T,q.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new lt(V)}getConstrained(o,d){const y=s.ah(o.lat,-s.ai,s.ai),v=s.ah(+d,this.minZoom+Vn(0,y),this.maxZoom);return{center:new s.S(o.lng,y),zoom:v}}calculateCenterFromCameraLngLatAlt(o,d,y,v){return this._helper.calculateCenterFromCameraLngLatAlt(o,d,y,v)}setLocationAtPoint(o,d){const y=fi(this.unprojectScreenPoint(d)),v=fi(o),T=s.bp();s.bB(T);const R=s.bp();s.by(R,y,T,-this.center.lng*Math.PI/180),s.bx(R,R,T,this.center.lat*Math.PI/180);const k=v[0]*v[0]+v[2]*v[2],L=R[0]*R[0];if(k<L)return;const q=Math.sqrt(k-L),V=-q,Y=s.bC(v[0],v[2],R[0],q),H=s.bC(v[0],v[2],R[0],V),re=s.bp();s.by(re,v,T,-Y);const le=s.bC(re[1],re[2],R[1],R[2]),_e=s.bp();s.by(_e,v,T,-H);const ge=s.bC(_e[1],_e[2],R[1],R[2]),be=.5*Math.PI,Se=le>=-be&&le<=be,Re=ge>=-be&&ge<=be;let Pe,De;if(Se&&Re){const st=this.center.lng*Math.PI/180,Ye=this.center.lat*Math.PI/180;s.bD(Y,st)+s.bD(le,Ye)<s.bD(H,st)+s.bD(ge,Ye)?(Pe=Y,De=le):(Pe=H,De=ge)}else if(Se)Pe=Y,De=le;else{if(!Re)return;Pe=H,De=ge}const Be=Pe/Math.PI*180,Ae=De/Math.PI*180,Ge=this.center.lat;this.setCenter(new s.S(Be,s.ah(Ae,-90,90))),this.setZoom(this.zoom+Vn(Ge,this.center.lat))}locationToScreenPoint(o,d){const y=fi(o);if(d){const v=d.getElevationForLngLatZoom(o,this._helper._tileZoom);s.aR(y,y,1+v/s.bu)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(o){const d=s.bv();return s.aw(d,[...o,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new s.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(o,d){if(d){const y=d.pointCoordinate(o);if(y)return y}return s.a1.fromLngLat(this.unprojectScreenPoint(o))}screenPointToLocation(o,d){var y;return(y=this.screenPointToMercatorCoordinate(o,d))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(o,d){const y=this._cameraPosition,v=this.getRayDirectionFromPixel(o);return!!this.rayPlanetIntersection(y,v)}getRayDirectionFromPixel(o){const d=s.bv();d[0]=o.x/this.width*2-1,d[1]=-1*(o.y/this.height*2-1),d[2]=1,d[3]=1,s.aw(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];const y=s.bp();y[0]=d[0]-this._cameraPosition[0],y[1]=d[1]-this._cameraPosition[1],y[2]=d[2]-this._cameraPosition[2];const v=s.bp();return s.aV(v,y),v}isSurfacePointVisible(o){const d=this._cachedClippingPlane;return d[0]*o[0]+d[1]*o[1]+d[2]*o[2]+d[3]>=0}isSurfacePointOnScreen(o){if(!this.isSurfacePointVisible(o))return!1;const d=s.bv();return s.aw(d,[...o,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(o,d){const y=s.aX(o,d),v=s.bp(),T=s.bp();s.aR(T,d,y),s.aU(v,o,T);const R=1-s.aX(v,v);if(R<0)return null;const k=s.aX(o,o)-1,L=-y+(y<0?1:-1)*Math.sqrt(R),q=k/L,V=L;return{tMin:Math.min(q,V),tMax:Math.max(q,V)}}unprojectScreenPoint(o){const d=this._cameraPosition,y=this.getRayDirectionFromPixel(o),v=this.rayPlanetIntersection(d,y);if(v){const V=s.bp();s.aS(V,d,[y[0]*v.tMin,y[1]*v.tMin,y[2]*v.tMin]);const Y=s.bp();return s.aV(Y,V),gu(Y)}const T=this._cachedClippingPlane,R=T[0]*y[0]+T[1]*y[1]+T[2]*y[2],k=-s.b1(T,d)/R,L=s.bp();if(k>0)s.aS(L,d,[y[0]*k,y[1]*k,y[2]*k]);else{const V=s.bp();s.aS(V,d,[2*y[0],2*y[1],2*y[2]]);const Y=s.b1(this._cachedClippingPlane,V);s.aU(L,V,[this._cachedClippingPlane[0]*Y,this._cachedClippingPlane[1]*Y,this._cachedClippingPlane[2]*Y])}const q=function(V){const Y=s.bp();return Y[0]=V[0]*-V[3],Y[1]=V[1]*-V[3],Y[2]=V[2]*-V[3],{center:Y,radius:Math.sqrt(1-V[3]*V[3])}}(T);return gu(function(V,Y,H){const re=s.bp();s.aU(re,H,V);const le=s.bp();return s.bq(le,V,re,Y/s.a$(re)),le}(q.center,q.radius,L))}getMatrixForModel(o,d){const y=s.S.convert(o),v=1/s.bu,T=s.b9();return s.bz(T,T,y.lng/180*Math.PI),s.b7(T,T,-y.lat/180*Math.PI),s.M(T,T,[0,0,1+d/s.bu]),s.b7(T,T,.5*Math.PI),s.N(T,T,[v,v,v]),T}getProjectionDataForCustomLayer(o=!0){const d=this.getProjectionData({overscaledTileID:new s.Z(0,0,0,0,0),applyGlobeMatrix:o});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(o){}}class xu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,d,y){return this._helper.interpolatePadding(o,d,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,d,y=!0){this._helper.resize(o,d,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,d){this._helper.overrideNearFarZ(o,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(o,d){this._globeness=o,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,d)=>this.getConstrained(o,d)}),this._globeness=1,this._mercatorTransform=new gn,this._verticalPerspectiveTransform=new vu}clone(){const o=new xu;return o._globeness=this._globeness,o._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,o.apply(this),o}apply(o){this._helper.apply(o),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(o){const d=this._mercatorTransform.getProjectionData(o),y=this._verticalPerspectiveTransform.getProjectionData(o);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:d.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:o.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(o){return this.currentTransform.isLocationOccluded(o)}transformLightDirection(o){return this.currentTransform.transformLightDirection(o)}getPixelScale(){return s.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(o,d,y){const v=this._mercatorTransform.getPitchedTextCorrection(o,d,y),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(o,d,y);return s.bk(v,T,this._globeness)}projectTileCoordinates(o,d,y,v){return this.currentTransform.projectTileCoordinates(o,d,y,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(o){return this.currentTransform.calculateFogMatrix(o)}getVisibleUnwrappedCoordinates(o){return this.currentTransform.getVisibleUnwrappedCoordinates(o)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(o){this._mercatorTransform.recalculateZoomAndCenter(o),this._verticalPerspectiveTransform.recalculateZoomAndCenter(o)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,d){return this.currentTransform.lngLatToCameraDepth(o,d)}populateCache(o){this._mercatorTransform.populateCache(o),this._verticalPerspectiveTransform.populateCache(o)}getBounds(){return this.currentTransform.getBounds()}getConstrained(o,d){return this.currentTransform.getConstrained(o,d)}calculateCenterFromCameraLngLatAlt(o,d,y,v){return this._helper.calculateCenterFromCameraLngLatAlt(o,d,y,v)}setLocationAtPoint(o,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(o,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(o,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(o,d){return this.currentTransform.locationToScreenPoint(o,d)}screenPointToMercatorCoordinate(o,d){return this.currentTransform.screenPointToMercatorCoordinate(o,d)}screenPointToLocation(o,d){return this.currentTransform.screenPointToLocation(o,d)}isPointOnMapSurface(o,d){return this.currentTransform.isPointOnMapSurface(o,d)}getRayDirectionFromPixel(o){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(o)}getMatrixForModel(o,d){return this.currentTransform.getMatrixForModel(o,d)}getProjectionDataForCustomLayer(o=!0){const d=this._mercatorTransform.getProjectionDataForCustomLayer(o);if(!this.isGlobeRendering)return d;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(o);return y.fallbackMatrix=d.mainMatrix,y}getFastPathSimpleProjectionMatrix(o){return this.currentTransform.getFastPathSimpleProjectionMatrix(o)}}class ji{get useGlobeControls(){return!0}handlePanInertia(o,d){const y=E_(o,d);return Math.abs(y.lng-d.center.lng)>180&&(y.lng=d.center.lng+179.5*Math.sign(y.lng-d.center.lng)),{easingCenter:y,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(o,d){const y=o.around,v=d.screenPointToLocation(y);o.bearingDelta&&d.setBearing(d.bearing+o.bearingDelta),o.pitchDelta&&d.setPitch(d.pitch+o.pitchDelta),o.rollDelta&&d.setRoll(d.roll+o.rollDelta);const T=d.zoom;o.zoomDelta&&d.setZoom(d.zoom+o.zoomDelta);const R=d.zoom-T;if(R===0)return;const k=s.bA(d.center.lng,v.lng),L=k/(Math.abs(k/180)+1),q=s.bA(d.center.lat,v.lat),V=d.getRayDirectionFromPixel(y),Y=d.cameraPosition,H=-1*s.aX(Y,V),re=s.bp();s.aS(re,Y,[V[0]*H,V[1]*H,V[2]*H]);const le=s.aZ(re)-1,_e=Math.exp(.5*-Math.max(le-.3,0)),ge=Zl(d.worldSize,d.center.lat)/Math.min(d.width,d.height),be=s.bn(ge,.9,.5,1,.25),Se=(1-s.af(-R))*Math.min(_e,be),Re=d.center.lat,Pe=d.zoom,De=new s.S(d.center.lng+L*Se,s.ah(d.center.lat+q*Se,-s.ai,s.ai));d.setLocationAtPoint(v,y);const Be=d.center,Ae=s.bn(Math.abs(k),45,85,0,1),Ge=s.bn(ge,.75,.35,0,1),st=Math.pow(Math.max(Ae,Ge),.25),Ye=s.bA(Be.lng,De.lng),Qe=s.bA(Be.lat,De.lat);d.setCenter(new s.S(Be.lng+Ye*st,Be.lat+Qe*st).wrap()),d.setZoom(Pe+Vn(Re,d.center.lat))}handleMapControlsPan(o,d,y){if(!o.panDelta)return;const v=d.center.lat,T=d.zoom;d.setCenter(E_(o.panDelta,d).wrap()),d.setZoom(T+Vn(v,d.center.lat))}cameraForBoxAndBearing(o,d,y,v,T){const R=mo(o,d,y,v,T),k=d.left/T.width*2-1,L=(T.width-d.right)/T.width*2-1,q=d.top/T.height*-2+1,V=(T.height-d.bottom)/T.height*-2+1,Y=s.bA(y.getWest(),y.getEast())<0,H=Y?y.getEast():y.getWest(),re=Y?y.getWest():y.getEast(),le=Math.max(y.getNorth(),y.getSouth()),_e=Math.min(y.getNorth(),y.getSouth()),ge=H+.5*s.bA(H,re),be=le+.5*s.bA(le,_e),Se=T.clone();Se.setCenter(R.center),Se.setBearing(R.bearing),Se.setPitch(0),Se.setRoll(0),Se.setZoom(R.zoom);const Re=Se.modelViewProjectionMatrix,Pe=[fi(y.getNorthWest()),fi(y.getNorthEast()),fi(y.getSouthWest()),fi(y.getSouthEast()),fi(new s.S(re,be)),fi(new s.S(H,be)),fi(new s.S(ge,le)),fi(new s.S(ge,_e))],De=fi(R.center);let Be=Number.POSITIVE_INFINITY;for(const Ae of Pe)k<0&&(Be=ji.getLesserNonNegativeNonNull(Be,ji.solveVectorScale(Ae,De,Re,"x",k))),L>0&&(Be=ji.getLesserNonNegativeNonNull(Be,ji.solveVectorScale(Ae,De,Re,"x",L))),q>0&&(Be=ji.getLesserNonNegativeNonNull(Be,ji.solveVectorScale(Ae,De,Re,"y",q))),V<0&&(Be=ji.getLesserNonNegativeNonNull(Be,ji.solveVectorScale(Ae,De,Re,"y",V)));if(Number.isFinite(Be)&&Be!==0)return R.zoom=Se.zoom+s.ak(Be),R;w_()}handleJumpToCenterZoom(o,d){const y=o.center.lat,v=o.getConstrained(d.center?s.S.convert(d.center):o.center,o.zoom).center;o.setCenter(v.wrap());const T=d.zoom!==void 0?+d.zoom:o.zoom+Vn(y,v.lat);o.zoom!==T&&o.setZoom(T)}handleEaseTo(o,d){const y=o.zoom,v=o.center,T=o.padding,R={roll:o.roll,pitch:o.pitch,bearing:o.bearing},k={roll:d.roll===void 0?o.roll:d.roll,pitch:d.pitch===void 0?o.pitch:d.pitch,bearing:d.bearing===void 0?o.bearing:d.bearing},L=d.zoom!==void 0,q=!o.isPaddingEqual(d.padding);let V=!1;const Y=d.center?s.S.convert(d.center):v,H=o.getConstrained(Y,y).center;ud(o,H);const re=o.clone();re.setCenter(H),re.setZoom(L?+d.zoom:y+Vn(v.lat,Y.lat)),re.setBearing(d.bearing);const le=new s.P(s.ah(o.centerPoint.x+d.offsetAsPoint.x,0,o.width),s.ah(o.centerPoint.y+d.offsetAsPoint.y,0,o.height));re.setLocationAtPoint(H,le);const _e=(d.offset&&d.offsetAsPoint.mag())>0?re.center:H,ge=L?+d.zoom:y+Vn(v.lat,_e.lat),be=y+Vn(v.lat,0),Se=ge+Vn(_e.lat,0),Re=s.bA(v.lng,_e.lng),Pe=s.bA(v.lat,_e.lat),De=s.af(Se-be);return V=ge!==y,{easeFunc:Be=>{if(s.be(R,k)||Hi({startEulerAngles:R,endEulerAngles:k,tr:o,k:Be,useSlerp:R.roll!=k.roll}),q&&o.interpolatePadding(T,d.padding,Be),d.around)s.w("Easing around a point is not supported under globe projection."),o.setLocationAtPoint(d.around,d.aroundPoint);else{const Ae=Se>be?Math.min(2,De):Math.max(.5,De),Ge=Math.pow(Ae,1-Be),st=Zf(v,Re,Pe,Be*Ge);o.setCenter(st.wrap())}if(V){const Ae=s.C.number(be,Se,Be)+Vn(0,o.center.lat);o.setZoom(Ae)}},isZooming:V,elevationCenter:_e}}handleFlyTo(o,d){const y=d.zoom!==void 0,v=o.center,T=o.zoom,R=o.padding,k=!o.isPaddingEqual(d.padding),L=o.getConstrained(s.S.convert(d.center||d.locationAtOffset),T).center,q=y?+d.zoom:o.zoom+Vn(o.center.lat,L.lat),V=o.clone();V.setCenter(L),V.setZoom(q),V.setBearing(d.bearing);const Y=new s.P(s.ah(o.centerPoint.x+d.offsetAsPoint.x,0,o.width),s.ah(o.centerPoint.y+d.offsetAsPoint.y,0,o.height));V.setLocationAtPoint(L,Y);const H=V.center;ud(o,H);const re=function(Pe,De,Be){const Ae=fi(De),Ge=fi(Be),st=s.aX(Ae,Ge),Ye=Math.acos(st),Qe=md(Pe);return Ye/(2*Math.PI)*Qe}(o,v,H),le=T+Vn(v.lat,0),_e=q+Vn(H.lat,0),ge=s.af(_e-le);let be;if(typeof d.minZoom=="number"){const Pe=+d.minZoom+Vn(H.lat,0),De=Math.min(Pe,le,_e)+Vn(0,H.lat),Be=o.getConstrained(H,De).zoom+Vn(H.lat,0);be=s.af(Be-le)}const Se=s.bA(v.lng,H.lng),Re=s.bA(v.lat,H.lat);return{easeFunc:(Pe,De,Be,Ae)=>{const Ge=Zf(v,Se,Re,Be);k&&o.interpolatePadding(R,d.padding,Pe);const st=Pe===1?H:Ge;o.setCenter(st.wrap());const Ye=le+s.ak(De);o.setZoom(Pe===1?q:Ye+Vn(0,st.lat))},scaleOfZoom:ge,targetCenter:H,scaleOfMinZoom:be,pixelPathLength:re}}static solveVectorScale(o,d,y,v,T){const R=v==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],k=[y[3],y[7],y[11],y[15]],L=o[0]*R[0]+o[1]*R[1]+o[2]*R[2],q=o[0]*k[0]+o[1]*k[1]+o[2]*k[2],V=d[0]*R[0]+d[1]*R[1]+d[2]*R[2],Y=d[0]*k[0]+d[1]*k[1]+d[2]*k[2];return V+T*q===L+T*Y||k[3]*(L-V)+R[3]*(Y-q)+L*Y==V*q?null:(V+R[3]-T*Y-T*k[3])/(V-L-T*Y+T*q)}static getLesserNonNegativeNonNull(o,d){return d!==null&&d>=0&&d<o?d:o}}class T_{constructor(o){this._globe=o,this._mercatorCameraHelper=new zi,this._verticalPerspectiveCameraHelper=new ji}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(o,d){return this.currentHelper.handlePanInertia(o,d)}handleMapControlsRollPitchBearingZoom(o,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(o,d)}handleMapControlsPan(o,d,y){this.currentHelper.handleMapControlsPan(o,d,y)}cameraForBoxAndBearing(o,d,y,v,T){return this.currentHelper.cameraForBoxAndBearing(o,d,y,v,T)}handleJumpToCenterZoom(o,d){this.currentHelper.handleJumpToCenterZoom(o,d)}handleEaseTo(o,d){return this.currentHelper.handleEaseTo(o,d)}handleFlyTo(o,d){return this.currentHelper.handleFlyTo(o,d)}}const gd=(w,o)=>s.y(w,o&&o.filter(d=>d.identifier!=="source.canvas")),_w=s.bE();class Kf extends s.E{constructor(o,d={}){var y,v;super(),this._rtlPluginLoaded=()=>{for(const R in this.sourceCaches){const k=this.sourceCaches[R].getSource().type;k!=="vector"&&k!=="geojson"||this.sourceCaches[R].reload()}},this.map=o,this.dispatcher=new dt(Pt(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(R,k)=>this.getGlyphs(R,k)),this.dispatcher.registerMessageHandler("GI",(R,k)=>this.getImages(R,k)),this.imageManager=new K,this.imageManager.setEventedParent(this);const T=((y=o._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new Ie(o._requestManager,d.localIdeographFontFamily,T),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new Jl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",s.bG()),mr().on(ur,this._rtlPluginLoaded),this.on("data",R=>{if(R.dataType!=="source"||R.sourceDataType!=="metadata")return;const k=this.sourceCaches[R.sourceId];if(!k)return;const L=k.getSource();if(L&&L.vectorLayerIds)for(const q in this._layers){const V=this._layers[q];V.source===L.id&&this._validateLayer(V)}})}setGlobalStateProperty(o,d){var y,v,T;this._checkLoaded();const R=d===null?(T=(v=(y=this.stylesheet.state)===null||y===void 0?void 0:y[o])===null||v===void 0?void 0:v.default)!==null&&T!==void 0?T:null:d;if(s.bH(R,this._globalState[o]))return this;this._globalState[o]=R,this._applyGlobalStateChanges([o])}getGlobalState(){return this._globalState}setGlobalState(o){this._checkLoaded();const d=[];for(const y in o)!s.bH(this._globalState[y],o[y].default)&&(d.push(y),this._globalState[y]=o[y].default);this._applyGlobalStateChanges(d)}_applyGlobalStateChanges(o){if(o.length===0)return;const d=new Set;for(const y in this._layers){const v=this._layers[y],T=v.getLayoutAffectingGlobalStateRefs(),R=v.getPaintAffectingGlobalStateRefs();for(const k of o)if(T.has(k)&&d.add(v.source),R.has(k))for(const{name:L,value:q}of R.get(k))this._updatePaintProperty(v,L,q)}for(const y in this.sourceCaches)d.has(y)&&(this._reloadSource(y),this._changed=!0)}loadURL(o,d={},y){this.fire(new s.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const v=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;s.j(v,this._loadStyleRequest).then(R=>{this._loadStyleRequest=null,this._load(R.data,d,y)}).catch(R=>{this._loadStyleRequest=null,R&&!T.signal.aborted&&this.fire(new s.k(R))})}loadJSON(o,d={},y){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(o,d,y)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(_w,{validate:!1})}_load(o,d,y){var v,T,R;let k=d.transformStyle?d.transformStyle(y,o):o;if(!d.validate||!gd(this,s.z(k))){k=Object.assign({},k),this._loaded=!0,this.stylesheet=k;for(const L in k.sources)this.addSource(L,k.sources[L],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new ve(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new Xe(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.setGlobalState((R=this.stylesheet.state)!==null&&R!==void 0?R:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){const o=s.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",o),this._order=o.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of o){const y=s.bJ(d);y.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=y}}_loadSprite(o,d=!1,y=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,R,k,L){return s._(this,void 0,void 0,function*(){const q=ne(T),V=k>1?"@2x":"",Y={},H={};for(const{id:re,url:le}of q){const _e=R.transformRequest(Z(le,V,".json"),"SpriteJSON");Y[re]=s.j(_e,L);const ge=R.transformRequest(Z(le,V,".png"),"SpriteImage");H[re]=X.getImage(ge,L)}return yield Promise.all([...Object.values(Y),...Object.values(H)]),function(re,le){return s._(this,void 0,void 0,function*(){const _e={};for(const ge in re){_e[ge]={};const be=P.getImageCanvasContext((yield le[ge]).data),Se=(yield re[ge]).data;for(const Re in Se){const{width:Pe,height:De,x:Be,y:Ae,sdf:Ge,pixelRatio:st,stretchX:Ye,stretchY:Qe,content:ot,textFitWidth:xt,textFitHeight:Et}=Se[Re];_e[ge][Re]={data:null,pixelRatio:st,sdf:Ge,stretchX:Ye,stretchY:Qe,content:ot,textFitWidth:xt,textFitHeight:Et,spriteData:{width:Pe,height:De,x:Be,y:Ae,context:be}}}}return _e})}(Y,H)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(const R in T){this._spritesImagesIds[R]=[];const k=this._spritesImagesIds[R]?this._spritesImagesIds[R].filter(L=>!(L in T)):[];for(const L of k)this.imageManager.removeImage(L),this._changedImages[L]=!0;for(const L in T[R]){const q=R==="default"?L:`${R}:${L}`;this._spritesImagesIds[R].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,T[R][L],!1):this.imageManager.addImage(q,T[R][L]),d&&(this._changedImages[q]=!0)}}}).catch(T=>{this._spriteRequest=null,v=T,this.fire(new s.k(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),y&&y(v)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(o){const d=this.sourceCaches[o.source];if(!d)return;const y=o.sourceLayer;if(!y)return;const v=d.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.k(new Error(`Source layer "${y}" does not exist on source "${v.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o,d=!1){const y=this._serializedAllLayers();if(!o||o.length===0)return Object.values(d?s.bK(y):y);const v=[];for(const T of o)if(y[T]){const R=d?s.bK(y[T]):y[T];v.push(R)}return v}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const d=Object.keys(this._layers);for(const y of d){const v=this._layers[y];v.type!=="custom"&&(o[y]=v.serialize())}return o}hasTransitions(){var o,d,y;if(!((o=this.light)===null||o===void 0)&&o.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const v in this.sourceCaches)if(this.sourceCaches[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const d=this._changed;if(d){const v=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(v.length||T.length)&&this._updateWorkerLayers(v,T);for(const R in this._updatedSources){const k=this._updatedSources[R];if(k==="reload")this._reloadSource(R);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(R)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const R in this._updatedPaintProps)this._layers[R].updateTransitions(o);this.light.updateTransitions(o),this.sky.updateTransitions(o),this._resetUpdates()}const y={};for(const v in this.sourceCaches){const T=this.sourceCaches[v];y[v]=T.used,T.used=!1}for(const v of this._order){const T=this._layers[v];T.recalculate(o,this._availableImages),!T.isHidden(o.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const v in y){const T=this.sourceCaches[v];!!y[v]!=!!T.used&&T.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(o),this.sky.recalculate(o),this.projection.recalculate(o),this.z=o.zoom,d&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,d={}){var y;this._checkLoaded();const v=this.serialize();if(o=d.transformStyle?d.transformStyle(v,o):o,((y=d.validate)===null||y===void 0||y)&&gd(this,s.z(o)))return!1;(o=s.bK(o)).layers=s.bI(o.layers);const T=s.bL(v,o),R=this._getOperationsToPerform(T);if(R.unimplemented.length>0)throw new Error(`Unimplemented: ${R.unimplemented.join(", ")}.`);if(R.operations.length===0)return!1;for(const k of R.operations)k();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){const d=[],y=[];for(const v of o)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":d.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":d.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,v.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setSky":d.push(()=>this.setSky.apply(this,v.args));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":d.push(()=>this.setGlobalState.apply(this,v.args));break;case"setTransition":d.push(()=>{});break;default:y.push(v.command)}return{operations:d,unimplemented:y}}addImage(o,d){if(this.getImage(o))return this.fire(new s.k(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,d),this._afterImageUpdated(o)}updateImage(o,d){this.imageManager.updateImage(o,d)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new s.k(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,d,y={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(s.z.source,`sources.${o}`,d,null,y))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const v=this.sourceCaches[o]=new cr(o,d,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:o})),v.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===o)return this.fire(new s.k(new Error(`Source "${o}" cannot be removed while layer "${y}" is using it.`)));const d=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],d.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,d){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const y=this.sourceCaches[o].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(d),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,d,y={}){this._checkLoaded();const v=o.id;if(this.getLayer(v))return void this.fire(new s.k(new Error(`Layer "${v}" already exists on this map.`)));let T;if(o.type==="custom"){if(gd(this,s.bM(o)))return;T=s.bJ(o)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(v,o.source),o=s.bK(o),o=s.e(o,{source:v})),this._validate(s.z.layer,`layers.${v}`,o,{arrayIndex:-1},y))return;T=s.bJ(o),this._validateLayer(T),T.setEventedParent(this,{layer:{id:v}})}const R=d?this._order.indexOf(d):this._order.length;if(d&&R===-1)this.fire(new s.k(new Error(`Cannot add layer "${v}" before non-existing layer "${d}".`)));else{if(this._order.splice(R,0,v),this._layerOrderChanged=!0,this._layers[v]=T,this._removedLayers[v]&&T.source&&T.type!=="custom"){const k=this._removedLayers[v];delete this._removedLayers[v],k.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(o,d){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new s.k(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===d)return;const y=this._order.indexOf(o);this._order.splice(y,1);const v=d?this._order.indexOf(d):this._order.length;d&&v===-1?this.fire(new s.k(new Error(`Cannot move layer "${o}" before non-existing layer "${d}".`))):(this._order.splice(v,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const d=this._layers[o];if(!d)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${o}".`)));d.setEventedParent(null);const y=this._order.indexOf(o);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=d,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],d.onRemove&&d.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,d,y){this._checkLoaded();const v=this.getLayer(o);v?v.minzoom===d&&v.maxzoom===y||(d!=null&&(v.minzoom=d),y!=null&&(v.maxzoom=y),this._updateLayer(v)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,d,y={}){this._checkLoaded();const v=this.getLayer(o);if(v){if(!s.bH(v.filter,d))return d==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(s.z.filter,`layers.${v.id}.filter`,d,null,y)||(v.setFilter(s.bK(d)),this._updateLayer(v)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return s.bK(this.getLayer(o).filter)}setLayoutProperty(o,d,y,v={}){this._checkLoaded();const T=this.getLayer(o);T?s.bH(T.getLayoutProperty(d),y)||(T.setLayoutProperty(d,y,v),this._updateLayer(T)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,d){const y=this.getLayer(o);if(y)return y.getLayoutProperty(d);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,d,y,v={}){this._checkLoaded();const T=this.getLayer(o);T?s.bH(T.getPaintProperty(d),y)||this._updatePaintProperty(T,d,y,v):this.fire(new s.k(new Error(`Cannot style non-existing layer "${o}".`)))}_updatePaintProperty(o,d,y,v={}){o.setPaintProperty(d,y,v)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[o.id]=!0,this._serializedLayers=null}getPaintProperty(o,d){return this.getLayer(o).getPaintProperty(d)}setFeatureState(o,d){this._checkLoaded();const y=o.source,v=o.sourceLayer,T=this.sourceCaches[y];if(T===void 0)return void this.fire(new s.k(new Error(`The source '${y}' does not exist in the map's style.`)));const R=T.getSource().type;R==="geojson"&&v?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):R!=="vector"||v?(o.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(v,o.id,d)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,d){this._checkLoaded();const y=o.source,v=this.sourceCaches[y];if(v===void 0)return void this.fire(new s.k(new Error(`The source '${y}' does not exist in the map's style.`)));const T=v.getSource().type,R=T==="vector"?o.sourceLayer:void 0;T!=="vector"||R?d&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(R,o.id,d):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const d=o.source,y=o.sourceLayer,v=this.sourceCaches[d];if(v!==void 0)return v.getSource().type!=="vector"||y?(o.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(y,o.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=s.bN(this.sourceCaches,T=>T.serialize()),d=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,v=this.stylesheet;return s.bO({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:o,layers:d,terrain:y},T=>T!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const d=R=>this._layers[R].type==="fill-extrusion",y={},v=[];for(let R=this._order.length-1;R>=0;R--){const k=this._order[R];if(d(k)){y[k]=R;for(const L of o){const q=L[k];if(q)for(const V of q)v.push(V)}}}v.sort((R,k)=>k.intersectionZ-R.intersectionZ);const T=[];for(let R=this._order.length-1;R>=0;R--){const k=this._order[R];if(d(k))for(let L=v.length-1;L>=0;L--){const q=v[L].feature;if(y[q.layer.id]<R)break;T.push(q),v.pop()}else for(const L of o){const q=L[k];if(q)for(const V of q)T.push(V.feature)}}return T}queryRenderedFeatures(o,d,y){d&&d.filter&&this._validate(s.z.filter,"queryRenderedFeatures.filter",d.filter,null,d);const v={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const q of d.layers){const V=this._layers[q];if(!V)return this.fire(new s.k(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];v[V.source]=!0}}const T=[];d.availableImages=this._availableImages;const R=this._serializedAllLayers(),k=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,L=Object.assign(Object.assign({},d),{layers:k});for(const q in this.sourceCaches)d.layers&&!v[q]||T.push(ar(this.sourceCaches[q],this._layers,R,o,L,y,this.map.terrain?(V,Y,H)=>this.map.terrain.getElevation(V,Y,H):void 0));return this.placement&&T.push(function(q,V,Y,H,re,le,_e){const ge={},be=le.queryRenderedSymbols(H),Se=[];for(const Re of Object.keys(be).map(Number))Se.push(_e[Re]);Se.sort(_t);for(const Re of Se){const Pe=Re.featureIndex.lookupSymbolFeatures(be[Re.bucketInstanceId],V,Re.bucketIndex,Re.sourceLayerIndex,re.filter,re.layers,re.availableImages,q);for(const De in Pe){const Be=ge[De]=ge[De]||[],Ae=Pe[De];Ae.sort((Ge,st)=>{const Ye=Re.featureSortOrder;if(Ye){const Qe=Ye.indexOf(Ge.featureIndex);return Ye.indexOf(st.featureIndex)-Qe}return st.featureIndex-Ge.featureIndex});for(const Ge of Ae)Be.push(Ge)}}return function(Re,Pe,De){for(const Be in Re)for(const Ae of Re[Be])Ve(Ae,De[Pe[Be].source]);return Re}(ge,q,Y)}(this._layers,R,this.sourceCaches,o,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(o,d){d&&d.filter&&this._validate(s.z.filter,"querySourceFeatures.filter",d.filter,null,d);const y=this.sourceCaches[o];return y?function(v,T){const R=v.getRenderableIds().map(q=>v.getTileByID(q)),k=[],L={};for(let q=0;q<R.length;q++){const V=R[q],Y=V.tileID.canonical.key;L[Y]||(L[Y]=!0,V.querySourceFeatures(k,T))}return k}(y,d):[]}getLight(){return this.light.getLight()}setLight(o,d={}){this._checkLoaded();const y=this.light.getLight();let v=!1;for(const R in o)if(!s.bH(o[R],y[R])){v=!0;break}if(!v)return;const T={now:P.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,d),this.light.updateTransitions(T)}getProjection(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.projection}setProjection(o){if(this._checkLoaded(),this.projection){if(this.projection.name===o.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=o,this._setProjectionInternal(o.type)}getSky(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.sky}setSky(o,d={}){this._checkLoaded();const y=this.getSky();let v=!1;if(!o&&!y)return;if(o&&!y)v=!0;else if(!o&&y)v=!0;else for(const R in o)if(!s.bH(o[R],y[R])){v=!0;break}if(!v)return;const T={now:P.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=o,this.sky.setSky(o,d),this.sky.updateTransitions(T)}_setProjectionInternal(o){const d=function(y){if(Array.isArray(y)){const v=new fd({type:y});return{projection:v,transform:new xu,cameraHelper:new T_(v)}}switch(y){case"mercator":return{projection:new Or,transform:new gn,cameraHelper:new zi};case"globe":{const v=new fd({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:v,transform:new xu,cameraHelper:new T_(v)}}case"vertical-perspective":return{projection:new mu,transform:new vu,cameraHelper:new ji};default:return s.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new Or,transform:new gn,cameraHelper:new zi}}}(o);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(const y in this.sourceCaches)this.sourceCaches[y].reload()}_validate(o,d,y,v,T={}){return(!T||T.validate!==!1)&&gd(this,o.call(s.z,s.e({key:d,style:this.serialize(),value:y,styleSpec:s.v},v)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),mr().off(ur,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const y=this.sourceCaches[d];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const d in this.sourceCaches)this.sourceCaches[d].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,d,y,v,T=!1){let R=!1,k=!1;const L={};for(const q of this._order){const V=this._layers[q];if(V.type!=="symbol")continue;if(!L[V.source]){const H=this.sourceCaches[V.source];L[V.source]=H.getRenderableIds(!0).map(re=>H.getTileByID(re)).sort((re,le)=>le.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(le.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(V,L[V.source],o.center.lng);R=R||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(P.now(),o.zoom))&&(this.pauseablePlacement=new Gf(o,this.map.terrain,this._order,T,d,y,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(P.now()),k=!0),R&&this.pauseablePlacement.placement.setStale()),k||R)for(const q of this._order){const V=this._layers[q];V.type==="symbol"&&this.placement.updateLayerOpacities(V,L[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(P.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,d){return s._(this,void 0,void 0,function*(){const y=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[d.source];return v&&v.setDependencies(d.tileID.key,d.type,d.icons),y})}getGlyphs(o,d){return s._(this,void 0,void 0,function*(){const y=yield this.glyphManager.getGlyphs(d.stacks),v=this.sourceCaches[d.source];return v&&v.setDependencies(d.tileID.key,d.type,[""]),y})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,d={}){this._checkLoaded(),o&&this._validate(s.z.glyphs,"glyphs",o,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,d,y={},v){this._checkLoaded();const T=[{id:o,url:d}],R=[...ne(this.stylesheet.sprite),...T];this._validate(s.z.sprite,"sprite",R,null,y)||(this.stylesheet.sprite=R,this._loadSprite(T,!0,v))}removeSprite(o){this._checkLoaded();const d=ne(this.stylesheet.sprite);if(d.find(y=>y.id===o)){if(this._spritesImagesIds[o])for(const y of this._spritesImagesIds[o])this.imageManager.removeImage(y),this._changedImages[y]=!0;d.splice(d.findIndex(y=>y.id===o),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(o,d={},y){this._checkLoaded(),o&&this._validate(s.z.sprite,"sprite",o,null,d)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,y):(this._unloadSprite(),y&&y(null)))}}var bw=s.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class vw{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,d,y,v,T,R,k,L,q){this.context=o;let V=this.boundPaintVertexBuffers.length!==v.length;for(let Y=0;!V&&Y<v.length;Y++)this.boundPaintVertexBuffers[Y]!==v[Y]&&(V=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==y||V||this.boundIndexBuffer!==T||this.boundVertexOffset!==R||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==q?this.freshBind(d,y,v,T,R,k,L,q):(o.bindVertexArray.set(this.vao),k&&k.bind(),T&&T.dynamicDraw&&T.bind(),L&&L.bind(),q&&q.bind())}freshBind(o,d,y,v,T,R,k,L){const q=o.numAttributes,V=this.context,Y=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=v,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=R,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=L,d.enableAttributes(Y,o);for(const H of y)H.enableAttributes(Y,o);R&&R.enableAttributes(Y,o),k&&k.enableAttributes(Y,o),L&&L.enableAttributes(Y,o),d.bind(),d.setVertexAttribPointers(Y,o,T);for(const H of y)H.bind(),H.setVertexAttribPointers(Y,o,T);R&&(R.bind(),R.setVertexAttribPointers(Y,o,T)),v&&v.bind(),k&&(k.bind(),k.setVertexAttribPointers(Y,o,T)),L&&(L.bind(),L.setVertexAttribPointers(Y,o,T)),V.currentNumAttributes=q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const yd=(w,o,d,y,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:o,u_fog_color:d?d.properties.get("fog-color"):s.bf.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:d?d.calculateFogBlendOpacity(y):0,u_horizon_color:d?d.properties.get("horizon-color"):s.bf.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),Yf={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Za(w){const o=[];for(let d=0;d<w.length;d++){if(w[d]===null)continue;const y=w[d].split(" ");o.push(y.pop())}return o}class Xf{constructor(o,d,y,v,T,R,k,L,q=[]){const V=o.gl;this.program=V.createProgram();const Y=Za(d.staticAttributes),H=y?y.getBinderAttributes():[],re=Y.concat(H),le=Fo.prelude.staticUniforms?Za(Fo.prelude.staticUniforms):[],_e=k.staticUniforms?Za(k.staticUniforms):[],ge=d.staticUniforms?Za(d.staticUniforms):[],be=y?y.getBinderUniforms():[],Se=le.concat(_e).concat(ge).concat(be),Re=[];for(const Ye of Se)Re.indexOf(Ye)<0&&Re.push(Ye);const Pe=y?y.defines():[];ys(V)&&Pe.unshift("#version 300 es"),T&&Pe.push("#define OVERDRAW_INSPECTOR;"),R&&Pe.push("#define TERRAIN3D;"),L&&Pe.push(L),q&&Pe.push(...q);let De=Pe.concat(Fo.prelude.fragmentSource,k.fragmentSource,d.fragmentSource).join(`
`),Be=Pe.concat(Fo.prelude.vertexSource,k.vertexSource,d.vertexSource).join(`
`);ys(V)||(De=function(Ye){return Ye.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(De),Be=function(Ye){return Ye.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Be));const Ae=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ae,De),V.compileShader(Ae),!V.getShaderParameter(Ae,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(Ae)}`);V.attachShader(this.program,Ae);const Ge=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ge,Be),V.compileShader(Ge),!V.getShaderParameter(Ge,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(Ge)}`);V.attachShader(this.program,Ge),this.attributes={};const st={};this.numAttributes=re.length;for(let Ye=0;Ye<this.numAttributes;Ye++)re[Ye]&&(V.bindAttribLocation(this.program,Ye,re[Ye]),this.attributes[re[Ye]]=Ye);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(Ge),V.deleteShader(Ae);for(let Ye=0;Ye<Re.length;Ye++){const Qe=Re[Ye];if(Qe&&!st[Qe]){const ot=V.getUniformLocation(this.program,Qe);ot&&(st[Qe]=ot)}}this.fixedUniforms=v(o,st),this.terrainUniforms=((Ye,Qe)=>({u_depth:new s.bP(Ye,Qe.u_depth),u_terrain:new s.bP(Ye,Qe.u_terrain),u_terrain_dim:new s.bg(Ye,Qe.u_terrain_dim),u_terrain_matrix:new s.bR(Ye,Qe.u_terrain_matrix),u_terrain_unpack:new s.bS(Ye,Qe.u_terrain_unpack),u_terrain_exaggeration:new s.bg(Ye,Qe.u_terrain_exaggeration)}))(o,st),this.projectionUniforms=((Ye,Qe)=>({u_projection_matrix:new s.bR(Ye,Qe.u_projection_matrix),u_projection_tile_mercator_coords:new s.bS(Ye,Qe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bS(Ye,Qe.u_projection_clipping_plane),u_projection_transition:new s.bg(Ye,Qe.u_projection_transition),u_projection_fallback_matrix:new s.bR(Ye,Qe.u_projection_fallback_matrix)}))(o,st),this.binderUniforms=y?y.getUniforms(o,st):[]}draw(o,d,y,v,T,R,k,L,q,V,Y,H,re,le,_e,ge,be,Se,Re){const Pe=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(y),o.setStencilMode(v),o.setColorMode(T),o.setCullFace(R),L){o.activeTexture.set(Pe.TEXTURE2),Pe.bindTexture(Pe.TEXTURE_2D,L.depthTexture),o.activeTexture.set(Pe.TEXTURE3),Pe.bindTexture(Pe.TEXTURE_2D,L.texture);for(const Be in this.terrainUniforms)this.terrainUniforms[Be].set(L[Be])}if(q)for(const Be in q)this.projectionUniforms[Yf[Be]].set(q[Be]);if(k)for(const Be in this.fixedUniforms)this.fixedUniforms[Be].set(k[Be]);ge&&ge.setUniforms(o,this.binderUniforms,le,{zoom:_e});let De=0;switch(d){case Pe.LINES:De=2;break;case Pe.TRIANGLES:De=3;break;case Pe.LINE_STRIP:De=1}for(const Be of re.get()){const Ae=Be.vaos||(Be.vaos={});(Ae[V]||(Ae[V]=new vw)).bind(o,this,Y,ge?ge.getPaintVertexBuffers():[],H,Be.vertexOffset,be,Se,Re),Pe.drawElements(d,Be.primitiveLength*De,Pe.UNSIGNED_SHORT,Be.primitiveOffset*De*2)}}}function _d(w,o,d){const y=1/s.aC(d,1,o.transform.tileZoom),v=Math.pow(2,d.tileID.overscaledZ),T=d.tileSize*Math.pow(2,o.transform.tileZoom)/v,R=T*(d.tileID.canonical.x+d.tileID.wrap*v),k=T*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[y,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[R>>16,k>>16],u_pixel_coord_lower:[65535&R,65535&k]}}const jo=(w,o,d,y)=>{const v=w.style.light,T=v.properties.get("position"),R=[T.x,T.y,T.z],k=s.bV();v.properties.get("anchor")==="viewport"&&s.bW(k,w.transform.bearingInRadians),s.bX(R,R,k);const L=w.transform.transformLightDirection(R),q=v.properties.get("color");return{u_lightpos:R,u_lightpos_globe:L,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_vertical_gradient:+o,u_opacity:d,u_fill_translate:y}},xw=(w,o,d,y,v,T,R)=>s.e(jo(w,o,d,y),_d(T,w,R),{u_height_factor:-Math.pow(2,v.overscaledZ)/R.tileSize/8}),bd=(w,o,d,y)=>s.e(_d(o,w,d),{u_fill_translate:y}),wu=(w,o)=>({u_world:w,u_fill_translate:o}),Eu=(w,o,d,y,v)=>s.e(bd(w,o,d,v),{u_world:y}),ww=(w,o,d,y,v)=>{const T=w.transform;let R,k,L=0;if(d.paint.get("circle-pitch-alignment")==="map"){const q=s.aC(o,1,T.zoom);R=!0,k=[q,q],L=q/(s.$*Math.pow(2,o.tileID.overscaledZ))*2*Math.PI*v}else R=!1,k=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+R,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:L,u_translate:y}},vd=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Ew=w=>({u_viewport_size:[w.width,w.height]}),Ka=(w,o=1)=>({u_color:w,u_overlay:0,u_overlay_scale:o}),S_=(w,o,d,y)=>{const v=s.aC(w,1,o)/(s.$*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:s.aC(w,1,o),u_intensity:d,u_globe_extrude_scale:v}},Qf=(w,o,d,y)=>{const v=s.L();s.bY(v,0,w.width,w.height,0,0,1);const T=w.context.gl;return{u_matrix:v,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:d,u_color_ramp:y,u_opacity:o.paint.get("heatmap-opacity")}},Tw=(w,o,d)=>{const y=d.paint.get("hillshade-accent-color");let v;switch(d.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const T=d.getIlluminationProperties();for(let R=0;R<T.directionRadians.length;R++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[R]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:em(0,o.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:y,u_method:v,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},C_=(w,o)=>{const d=o.stride,y=s.L();return s.bY(y,0,s.$,-s.$,0,0,1),s.M(y,y,[0,-s.$,0]),{u_matrix:y,u_image:1,u_dimension:[d,d],u_zoom:w.overscaledZ,u_unpack:o.getUnpackVector()}};function em(w,o){const d=Math.pow(2,o.canonical.z),y=o.canonical.y;return[new s.a1(0,y/d).toLngLat().lat,new s.a1(0,(y+1)/d).toLngLat().lat]}const P_=(w,o,d=0)=>({u_image:0,u_unpack:o.getUnpackVector(),u_dimension:[o.stride,o.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:d,u_opacity:w.paint.get("color-relief-opacity")}),xd=(w,o,d,y)=>{const v=w.transform;return{u_translation:rm(w,o,d),u_ratio:y/s.aC(o,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},A_=(w,o,d,y,v)=>s.e(xd(w,o,d,y),{u_image:0,u_image_height:v}),R_=(w,o,d,y,v)=>{const T=w.transform,R=tm(o,T);return{u_translation:rm(w,o,d),u_texsize:o.imageAtlasTexture.size,u_ratio:y/s.aC(o,1,T.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[R,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Ya=(w,o,d,y,v,T)=>{const R=w.lineAtlas,k=tm(o,w.transform),L=d.layout.get("line-cap")==="round",q=R.getDash(v.from,L),V=R.getDash(v.to,L),Y=q.width*T.fromScale,H=V.width*T.toScale;return s.e(xd(w,o,d,y),{u_patternscale_a:[k/Y,-q.height/2],u_patternscale_b:[k/H,-V.height/2],u_sdfgamma:R.width/(256*Math.min(Y,H)*w.pixelRatio)/2,u_image:0,u_tex_y_a:q.y,u_tex_y_b:V.y,u_mix:T.t})};function tm(w,o){return 1/s.aC(w,1,o.tileZoom)}function rm(w,o,d){return s.aD(w.transform,o,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Tu=(w,o,d,y,v)=>{return{u_tl_parent:w,u_scale_parent:o,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(R=y.paint.get("raster-saturation"),R>0?1-1/(1.001-R):-R),u_contrast_factor:(T=y.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Sw(y.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var T,R};function Sw(w){w*=Math.PI/180;const o=Math.sin(w),d=Math.cos(w);return[(2*d+1)/3,(-Math.sqrt(3)*o-d+1)/3,(Math.sqrt(3)*o-d+1)/3]}const Su=(w,o,d,y,v,T,R,k,L,q,V,Y,H)=>{const re=R.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:re.width/re.height,u_fade_change:R.options.fadeDuration?R.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:L,u_is_text:+V,u_pitch_with_map:+y,u_is_along_line:v,u_is_variable_anchor:T,u_texsize:Y,u_texture:0,u_translation:q,u_pitched_scale:H}},I_=(w,o,d,y,v,T,R,k,L,q,V,Y,H,re)=>{const le=R.transform;return s.e(Su(w,o,d,y,v,T,R,k,L,q,V,Y,re),{u_gamma_scale:y?Math.cos(le.pitch*Math.PI/180)*le.cameraToCenterDistance:1,u_device_pixel_ratio:R.pixelRatio,u_is_halo:1})},Cw=(w,o,d,y,v,T,R,k,L,q,V,Y,H)=>s.e(I_(w,o,d,y,v,T,R,k,L,q,!0,V,0,H),{u_texsize_icon:Y,u_texture_icon:1}),M_=(w,o)=>({u_opacity:w,u_color:o}),O_=(w,o,d,y,v)=>s.e(function(T,R,k,L){const q=k.imageManager.getPattern(T.from.toString()),V=k.imageManager.getPattern(T.to.toString()),{width:Y,height:H}=k.imageManager.getPixelSize(),re=Math.pow(2,L.tileID.overscaledZ),le=L.tileSize*Math.pow(2,k.transform.tileZoom)/re,_e=le*(L.tileID.canonical.x+L.tileID.wrap*re),ge=le*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:q.tl,u_pattern_br_a:q.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[Y,H],u_mix:R.t,u_pattern_size_a:q.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/s.aC(L,1,k.transform.tileZoom),u_pixel_coord_upper:[_e>>16,ge>>16],u_pixel_coord_lower:[65535&_e,65535&ge]}}(d,v,o,y),{u_opacity:w}),nm=(w,o)=>{},im={fillExtrusion:(w,o)=>({u_lightpos:new s.bT(w,o.u_lightpos),u_lightpos_globe:new s.bT(w,o.u_lightpos_globe),u_lightintensity:new s.bg(w,o.u_lightintensity),u_lightcolor:new s.bT(w,o.u_lightcolor),u_vertical_gradient:new s.bg(w,o.u_vertical_gradient),u_opacity:new s.bg(w,o.u_opacity),u_fill_translate:new s.bU(w,o.u_fill_translate)}),fillExtrusionPattern:(w,o)=>({u_lightpos:new s.bT(w,o.u_lightpos),u_lightpos_globe:new s.bT(w,o.u_lightpos_globe),u_lightintensity:new s.bg(w,o.u_lightintensity),u_lightcolor:new s.bT(w,o.u_lightcolor),u_vertical_gradient:new s.bg(w,o.u_vertical_gradient),u_height_factor:new s.bg(w,o.u_height_factor),u_opacity:new s.bg(w,o.u_opacity),u_fill_translate:new s.bU(w,o.u_fill_translate),u_image:new s.bP(w,o.u_image),u_texsize:new s.bU(w,o.u_texsize),u_pixel_coord_upper:new s.bU(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(w,o.u_pixel_coord_lower),u_scale:new s.bT(w,o.u_scale),u_fade:new s.bg(w,o.u_fade)}),fill:(w,o)=>({u_fill_translate:new s.bU(w,o.u_fill_translate)}),fillPattern:(w,o)=>({u_image:new s.bP(w,o.u_image),u_texsize:new s.bU(w,o.u_texsize),u_pixel_coord_upper:new s.bU(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(w,o.u_pixel_coord_lower),u_scale:new s.bT(w,o.u_scale),u_fade:new s.bg(w,o.u_fade),u_fill_translate:new s.bU(w,o.u_fill_translate)}),fillOutline:(w,o)=>({u_world:new s.bU(w,o.u_world),u_fill_translate:new s.bU(w,o.u_fill_translate)}),fillOutlinePattern:(w,o)=>({u_world:new s.bU(w,o.u_world),u_image:new s.bP(w,o.u_image),u_texsize:new s.bU(w,o.u_texsize),u_pixel_coord_upper:new s.bU(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(w,o.u_pixel_coord_lower),u_scale:new s.bT(w,o.u_scale),u_fade:new s.bg(w,o.u_fade),u_fill_translate:new s.bU(w,o.u_fill_translate)}),circle:(w,o)=>({u_camera_to_center_distance:new s.bg(w,o.u_camera_to_center_distance),u_scale_with_map:new s.bP(w,o.u_scale_with_map),u_pitch_with_map:new s.bP(w,o.u_pitch_with_map),u_extrude_scale:new s.bU(w,o.u_extrude_scale),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_globe_extrude_scale:new s.bg(w,o.u_globe_extrude_scale),u_translate:new s.bU(w,o.u_translate)}),collisionBox:(w,o)=>({u_pixel_extrude_scale:new s.bU(w,o.u_pixel_extrude_scale)}),collisionCircle:(w,o)=>({u_viewport_size:new s.bU(w,o.u_viewport_size)}),debug:(w,o)=>({u_color:new s.bQ(w,o.u_color),u_overlay:new s.bP(w,o.u_overlay),u_overlay_scale:new s.bg(w,o.u_overlay_scale)}),depth:nm,clippingMask:nm,heatmap:(w,o)=>({u_extrude_scale:new s.bg(w,o.u_extrude_scale),u_intensity:new s.bg(w,o.u_intensity),u_globe_extrude_scale:new s.bg(w,o.u_globe_extrude_scale)}),heatmapTexture:(w,o)=>({u_matrix:new s.bR(w,o.u_matrix),u_world:new s.bU(w,o.u_world),u_image:new s.bP(w,o.u_image),u_color_ramp:new s.bP(w,o.u_color_ramp),u_opacity:new s.bg(w,o.u_opacity)}),hillshade:(w,o)=>({u_image:new s.bP(w,o.u_image),u_latrange:new s.bU(w,o.u_latrange),u_exaggeration:new s.bg(w,o.u_exaggeration),u_altitudes:new s.b_(w,o.u_altitudes),u_azimuths:new s.b_(w,o.u_azimuths),u_accent:new s.bQ(w,o.u_accent),u_method:new s.bP(w,o.u_method),u_shadows:new s.bZ(w,o.u_shadows),u_highlights:new s.bZ(w,o.u_highlights)}),hillshadePrepare:(w,o)=>({u_matrix:new s.bR(w,o.u_matrix),u_image:new s.bP(w,o.u_image),u_dimension:new s.bU(w,o.u_dimension),u_zoom:new s.bg(w,o.u_zoom),u_unpack:new s.bS(w,o.u_unpack)}),colorRelief:(w,o)=>({u_image:new s.bP(w,o.u_image),u_unpack:new s.bS(w,o.u_unpack),u_dimension:new s.bU(w,o.u_dimension),u_elevation_stops:new s.bP(w,o.u_elevation_stops),u_color_stops:new s.bP(w,o.u_color_stops),u_color_ramp_size:new s.bP(w,o.u_color_ramp_size),u_opacity:new s.bg(w,o.u_opacity)}),line:(w,o)=>({u_translation:new s.bU(w,o.u_translation),u_ratio:new s.bg(w,o.u_ratio),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_units_to_pixels:new s.bU(w,o.u_units_to_pixels)}),lineGradient:(w,o)=>({u_translation:new s.bU(w,o.u_translation),u_ratio:new s.bg(w,o.u_ratio),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_units_to_pixels:new s.bU(w,o.u_units_to_pixels),u_image:new s.bP(w,o.u_image),u_image_height:new s.bg(w,o.u_image_height)}),linePattern:(w,o)=>({u_translation:new s.bU(w,o.u_translation),u_texsize:new s.bU(w,o.u_texsize),u_ratio:new s.bg(w,o.u_ratio),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_image:new s.bP(w,o.u_image),u_units_to_pixels:new s.bU(w,o.u_units_to_pixels),u_scale:new s.bT(w,o.u_scale),u_fade:new s.bg(w,o.u_fade)}),lineSDF:(w,o)=>({u_translation:new s.bU(w,o.u_translation),u_ratio:new s.bg(w,o.u_ratio),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_units_to_pixels:new s.bU(w,o.u_units_to_pixels),u_patternscale_a:new s.bU(w,o.u_patternscale_a),u_patternscale_b:new s.bU(w,o.u_patternscale_b),u_sdfgamma:new s.bg(w,o.u_sdfgamma),u_image:new s.bP(w,o.u_image),u_tex_y_a:new s.bg(w,o.u_tex_y_a),u_tex_y_b:new s.bg(w,o.u_tex_y_b),u_mix:new s.bg(w,o.u_mix)}),raster:(w,o)=>({u_tl_parent:new s.bU(w,o.u_tl_parent),u_scale_parent:new s.bg(w,o.u_scale_parent),u_buffer_scale:new s.bg(w,o.u_buffer_scale),u_fade_t:new s.bg(w,o.u_fade_t),u_opacity:new s.bg(w,o.u_opacity),u_image0:new s.bP(w,o.u_image0),u_image1:new s.bP(w,o.u_image1),u_brightness_low:new s.bg(w,o.u_brightness_low),u_brightness_high:new s.bg(w,o.u_brightness_high),u_saturation_factor:new s.bg(w,o.u_saturation_factor),u_contrast_factor:new s.bg(w,o.u_contrast_factor),u_spin_weights:new s.bT(w,o.u_spin_weights),u_coords_top:new s.bS(w,o.u_coords_top),u_coords_bottom:new s.bS(w,o.u_coords_bottom)}),symbolIcon:(w,o)=>({u_is_size_zoom_constant:new s.bP(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(w,o.u_is_size_feature_constant),u_size_t:new s.bg(w,o.u_size_t),u_size:new s.bg(w,o.u_size),u_camera_to_center_distance:new s.bg(w,o.u_camera_to_center_distance),u_pitch:new s.bg(w,o.u_pitch),u_rotate_symbol:new s.bP(w,o.u_rotate_symbol),u_aspect_ratio:new s.bg(w,o.u_aspect_ratio),u_fade_change:new s.bg(w,o.u_fade_change),u_label_plane_matrix:new s.bR(w,o.u_label_plane_matrix),u_coord_matrix:new s.bR(w,o.u_coord_matrix),u_is_text:new s.bP(w,o.u_is_text),u_pitch_with_map:new s.bP(w,o.u_pitch_with_map),u_is_along_line:new s.bP(w,o.u_is_along_line),u_is_variable_anchor:new s.bP(w,o.u_is_variable_anchor),u_texsize:new s.bU(w,o.u_texsize),u_texture:new s.bP(w,o.u_texture),u_translation:new s.bU(w,o.u_translation),u_pitched_scale:new s.bg(w,o.u_pitched_scale)}),symbolSDF:(w,o)=>({u_is_size_zoom_constant:new s.bP(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(w,o.u_is_size_feature_constant),u_size_t:new s.bg(w,o.u_size_t),u_size:new s.bg(w,o.u_size),u_camera_to_center_distance:new s.bg(w,o.u_camera_to_center_distance),u_pitch:new s.bg(w,o.u_pitch),u_rotate_symbol:new s.bP(w,o.u_rotate_symbol),u_aspect_ratio:new s.bg(w,o.u_aspect_ratio),u_fade_change:new s.bg(w,o.u_fade_change),u_label_plane_matrix:new s.bR(w,o.u_label_plane_matrix),u_coord_matrix:new s.bR(w,o.u_coord_matrix),u_is_text:new s.bP(w,o.u_is_text),u_pitch_with_map:new s.bP(w,o.u_pitch_with_map),u_is_along_line:new s.bP(w,o.u_is_along_line),u_is_variable_anchor:new s.bP(w,o.u_is_variable_anchor),u_texsize:new s.bU(w,o.u_texsize),u_texture:new s.bP(w,o.u_texture),u_gamma_scale:new s.bg(w,o.u_gamma_scale),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_is_halo:new s.bP(w,o.u_is_halo),u_translation:new s.bU(w,o.u_translation),u_pitched_scale:new s.bg(w,o.u_pitched_scale)}),symbolTextAndIcon:(w,o)=>({u_is_size_zoom_constant:new s.bP(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(w,o.u_is_size_feature_constant),u_size_t:new s.bg(w,o.u_size_t),u_size:new s.bg(w,o.u_size),u_camera_to_center_distance:new s.bg(w,o.u_camera_to_center_distance),u_pitch:new s.bg(w,o.u_pitch),u_rotate_symbol:new s.bP(w,o.u_rotate_symbol),u_aspect_ratio:new s.bg(w,o.u_aspect_ratio),u_fade_change:new s.bg(w,o.u_fade_change),u_label_plane_matrix:new s.bR(w,o.u_label_plane_matrix),u_coord_matrix:new s.bR(w,o.u_coord_matrix),u_is_text:new s.bP(w,o.u_is_text),u_pitch_with_map:new s.bP(w,o.u_pitch_with_map),u_is_along_line:new s.bP(w,o.u_is_along_line),u_is_variable_anchor:new s.bP(w,o.u_is_variable_anchor),u_texsize:new s.bU(w,o.u_texsize),u_texsize_icon:new s.bU(w,o.u_texsize_icon),u_texture:new s.bP(w,o.u_texture),u_texture_icon:new s.bP(w,o.u_texture_icon),u_gamma_scale:new s.bg(w,o.u_gamma_scale),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_is_halo:new s.bP(w,o.u_is_halo),u_translation:new s.bU(w,o.u_translation),u_pitched_scale:new s.bg(w,o.u_pitched_scale)}),background:(w,o)=>({u_opacity:new s.bg(w,o.u_opacity),u_color:new s.bQ(w,o.u_color)}),backgroundPattern:(w,o)=>({u_opacity:new s.bg(w,o.u_opacity),u_image:new s.bP(w,o.u_image),u_pattern_tl_a:new s.bU(w,o.u_pattern_tl_a),u_pattern_br_a:new s.bU(w,o.u_pattern_br_a),u_pattern_tl_b:new s.bU(w,o.u_pattern_tl_b),u_pattern_br_b:new s.bU(w,o.u_pattern_br_b),u_texsize:new s.bU(w,o.u_texsize),u_mix:new s.bg(w,o.u_mix),u_pattern_size_a:new s.bU(w,o.u_pattern_size_a),u_pattern_size_b:new s.bU(w,o.u_pattern_size_b),u_scale_a:new s.bg(w,o.u_scale_a),u_scale_b:new s.bg(w,o.u_scale_b),u_pixel_coord_upper:new s.bU(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(w,o.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bg(w,o.u_tile_units_to_pixels)}),terrain:(w,o)=>({u_texture:new s.bP(w,o.u_texture),u_ele_delta:new s.bg(w,o.u_ele_delta),u_fog_matrix:new s.bR(w,o.u_fog_matrix),u_fog_color:new s.bQ(w,o.u_fog_color),u_fog_ground_blend:new s.bg(w,o.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bg(w,o.u_fog_ground_blend_opacity),u_horizon_color:new s.bQ(w,o.u_horizon_color),u_horizon_fog_blend:new s.bg(w,o.u_horizon_fog_blend),u_is_globe_mode:new s.bg(w,o.u_is_globe_mode)}),terrainDepth:(w,o)=>({u_ele_delta:new s.bg(w,o.u_ele_delta)}),terrainCoords:(w,o)=>({u_texture:new s.bP(w,o.u_texture),u_terrain_coords_id:new s.bg(w,o.u_terrain_coords_id),u_ele_delta:new s.bg(w,o.u_ele_delta)}),projectionErrorMeasurement:(w,o)=>({u_input:new s.bg(w,o.u_input),u_output_expected:new s.bg(w,o.u_output_expected)}),atmosphere:(w,o)=>({u_sun_pos:new s.bT(w,o.u_sun_pos),u_atmosphere_blend:new s.bg(w,o.u_atmosphere_blend),u_globe_position:new s.bT(w,o.u_globe_position),u_globe_radius:new s.bg(w,o.u_globe_radius),u_inv_proj_matrix:new s.bR(w,o.u_inv_proj_matrix)}),sky:(w,o)=>({u_sky_color:new s.bQ(w,o.u_sky_color),u_horizon_color:new s.bQ(w,o.u_horizon_color),u_horizon:new s.bU(w,o.u_horizon),u_horizon_normal:new s.bU(w,o.u_horizon_normal),u_sky_horizon_blend:new s.bg(w,o.u_sky_horizon_blend),u_sky_blend:new s.bg(w,o.u_sky_blend)})};class k_{constructor(o,d,y){this.context=o;const v=o.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class js{constructor(o,d,y,v){this.length=d.length,this.attributes=y,this.itemSize=d.bytesPerElement,this.dynamicDraw=v,this.context=o;const T=o.gl;this.buffer=T.createBuffer(),o.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,d){for(let y=0;y<this.attributes.length;y++){const v=d.attributes[this.attributes[y].name];v!==void 0&&o.enableVertexAttribArray(v)}}setVertexAttribPointers(o,d,y){for(let v=0;v<this.attributes.length;v++){const T=this.attributes[v],R=d.attributes[T.name];R!==void 0&&o.vertexAttribPointer(R,T.components,o[wd[T.type]],!1,this.itemSize,T.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Qr{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class om extends Qr{getDefault(){return s.bf.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class sm extends Qr{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class L_ extends Qr{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class am extends Qr{getDefault(){return[!0,!0,!0,!0]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Xa extends Qr{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class lm extends Qr{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Pw extends Qr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const d=this.current;(o.func!==d.func||o.ref!==d.ref||o.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Aw extends Qr{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Rw extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=o,this.dirty=!1}}class Iw extends Qr{getDefault(){return[0,1]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class D_ extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=o,this.dirty=!1}}class Mw extends Qr{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class N_ extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.BLEND):d.disable(d.BLEND),this.current=o,this.dirty=!1}}class Ed extends Qr{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Td extends Qr{getDefault(){return s.bf.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Sd extends Qr{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class cm extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=o,this.dirty=!1}}class Qa extends Qr{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Cu extends Qr{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Yl extends Qr{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class To extends Qr{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class F_ extends Qr{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class z_ extends Qr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class um extends Qr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class el extends Qr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Cd extends Qr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Pd extends Qr{getDefault(){return null}set(o){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Pu extends Qr{getDefault(){return null}set(o){var d;if(o===this.current&&!this.dirty)return;const y=this.gl;ys(y)?y.bindVertexArray(o):(d=y.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class Ad extends Qr{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class j_ extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Xl extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class da extends Qr{constructor(o,d){super(o),this.context=o,this.parent=d}getDefault(){return null}}class B_ extends da{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class hm extends da{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Fr extends da{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}const Au="Framebuffer is not complete";class Ow{constructor(o,d,y,v,T){this.context=o,this.width=d,this.height=y;const R=o.gl,k=this.framebuffer=R.createFramebuffer();if(this.colorAttachment=new B_(o,k),v)this.depthAttachment=T?new Fr(o,k):new hm(o,k);else if(T)throw new Error("Stencil cannot be set without depth");if(R.checkFramebufferStatus(R.FRAMEBUFFER)!==R.FRAMEBUFFER_COMPLETE)throw new Error(Au)}destroy(){const o=this.context.gl,d=this.colorAttachment.get();if(d&&o.deleteTexture(d),this.depthAttachment){const y=this.depthAttachment.get();y&&o.deleteRenderbuffer(y)}o.deleteFramebuffer(this.framebuffer)}}class q_{constructor(o){var d,y;if(this.gl=o,this.clearColor=new om(this),this.clearDepth=new sm(this),this.clearStencil=new L_(this),this.colorMask=new am(this),this.depthMask=new Xa(this),this.stencilMask=new lm(this),this.stencilFunc=new Pw(this),this.stencilOp=new Aw(this),this.stencilTest=new Rw(this),this.depthRange=new Iw(this),this.depthTest=new D_(this),this.depthFunc=new Mw(this),this.blend=new N_(this),this.blendFunc=new Ed(this),this.blendColor=new Td(this),this.blendEquation=new Sd(this),this.cullFace=new cm(this),this.cullFaceSide=new Qa(this),this.frontFace=new Cu(this),this.program=new Yl(this),this.activeTexture=new To(this),this.viewport=new F_(this),this.bindFramebuffer=new z_(this),this.bindRenderbuffer=new um(this),this.bindTexture=new el(this),this.bindVertexBuffer=new Cd(this),this.bindElementBuffer=new Pd(this),this.bindVertexArray=new Pu(this),this.pixelStoreUnpack=new Ad(this),this.pixelStoreUnpackPremultiplyAlpha=new j_(this),this.pixelStoreUnpackFlipY=new Xl(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),ys(o)){this.HALF_FLOAT=o.HALF_FLOAT;const v=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=o.RGBA16F)!==null&&d!==void 0?d:v?.RGBA16F_EXT,this.RGB16F=(y=o.RGB16F)!==null&&y!==void 0?y:v?.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const v=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=v?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,d){return new k_(this,o,d)}createVertexBuffer(o,d,y){return new js(this,o,d,y)}createRenderbuffer(o,d,y){const v=this.gl,T=v.createRenderbuffer();return this.bindRenderbuffer.set(T),v.renderbufferStorage(v.RENDERBUFFER,o,d,y),this.bindRenderbuffer.set(null),T}createFramebuffer(o,d,y,v){return new Ow(this,o,d,y,v)}clear({color:o,depth:d,stencil:y}){const v=this.gl;let T=0;o&&(T|=v.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(T|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),y!==void 0&&(T|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),v.clear(T)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){s.bH(o.blendFunction,Sn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return ys(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var d;return ys(this.gl)?this.gl.deleteVertexArray(o):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}let pa;function $_(w,o,d,y,v){const T=w.context,R=w.transform,k=T.gl,L=w.useProgram("collisionBox"),q=[];let V=0,Y=0;for(let be=0;be<y.length;be++){const Se=y[be],Re=o.getTile(Se).getBucket(d);if(!Re)continue;const Pe=v?Re.textCollisionBox:Re.iconCollisionBox,De=Re.collisionCircleArray;De.length>0&&(q.push({circleArray:De,circleOffset:Y,coord:Se}),V+=De.length/4,Y=V),Pe&&L.draw(T,k.LINES,br.disabled,Wr.disabled,w.colorModeForRenderPass(),or.disabled,vd(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Se),R.getProjectionData({overscaledTileID:Se,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,w.transform.zoom,null,null,Pe.collisionVertexBuffer)}if(!v||!q.length)return;const H=w.useProgram("collisionCircle"),re=new s.b$;re.resize(4*V),re._trim();let le=0;for(const be of q)for(let Se=0;Se<be.circleArray.length/4;Se++){const Re=4*Se,Pe=be.circleArray[Re+0],De=be.circleArray[Re+1],Be=be.circleArray[Re+2],Ae=be.circleArray[Re+3];re.emplace(le++,Pe,De,Be,Ae,0),re.emplace(le++,Pe,De,Be,Ae,1),re.emplace(le++,Pe,De,Be,Ae,2),re.emplace(le++,Pe,De,Be,Ae,3)}(!pa||pa.length<2*V)&&(pa=function(be){const Se=2*be,Re=new s.c1;Re.resize(Se),Re._trim();for(let Pe=0;Pe<Se;Pe++){const De=6*Pe;Re.uint16[De+0]=4*Pe+0,Re.uint16[De+1]=4*Pe+1,Re.uint16[De+2]=4*Pe+2,Re.uint16[De+3]=4*Pe+2,Re.uint16[De+4]=4*Pe+3,Re.uint16[De+5]=4*Pe+0}return Re}(V));const _e=T.createIndexBuffer(pa,!0),ge=T.createVertexBuffer(re,s.c0.members,!0);for(const be of q){const Se=Ew(w.transform);H.draw(T,k.TRIANGLES,br.disabled,Wr.disabled,w.colorModeForRenderPass(),or.disabled,Se,w.style.map.terrain&&w.style.map.terrain.getTerrainData(be.coord),null,d.id,ge,_e,s.aM.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,w.transform.zoom,null,null,null)}ge.destroy(),_e.destroy()}const kw=s.ag(new Float32Array(16));function V_(w,o,d,y,v,T){const{horizontalAlign:R,verticalAlign:k}=s.aH(w);return new s.P((-(R-.5)*o/v+y[0])*T,(-(k-.5)*d/v+y[1])*T)}function Lw(w,o,d,y,v,T){const R=o.tileAnchorPoint.add(new s.P(o.translation[0],o.translation[1]));if(o.pitchWithMap){let k=y.mult(T);d||(k=k.rotate(-v));const L=R.add(k);return Pr(L.x,L.y,o.pitchedLabelPlaneMatrix,o.getElevation).point}if(d){const k=xn(o.tileAnchorPoint.x+1,o.tileAnchorPoint.y,o).point.sub(w),L=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return w.add(y.rotate(L))}return w.add(y)}function dm(w,o,d,y,v,T,R,k,L,q,V,Y){const H=w.text.placedSymbolArray,re=w.text.dynamicLayoutVertexArray,le=w.icon.dynamicLayoutVertexArray,_e={};re.clear();for(let ge=0;ge<H.length;ge++){const be=H.get(ge),Se=be.hidden||!be.crossTileID||w.allowVerticalPlacement&&!be.placedOrientation?null:y[be.crossTileID];if(Se){const Re=new s.P(be.anchorX,be.anchorY),Pe={getElevation:Y,width:v.width,height:v.height,pitchedLabelPlaneMatrix:T,pitchWithMap:d,transform:v,tileAnchorPoint:Re,translation:q,unwrappedTileID:V},De=d?ro(Re.x,Re.y,Pe):xn(Re.x,Re.y,Pe),Be=yt(v.cameraToCenterDistance,De.signedDistanceFromCamera);let Ae=s.ap(w.textSizeData,k,be)*Be/s.aB;d&&(Ae*=w.tilePixelRatio/R);const{width:Ge,height:st,anchor:Ye,textOffset:Qe,textBoxScale:ot}=Se,xt=V_(Ye,Ge,st,Qe,ot,Ae),Et=v.getPitchedTextCorrection(Re.x+q[0],Re.y+q[1],V),ft=Lw(De.point,Pe,o,xt,-v.bearingInRadians,Et),Vt=w.allowVerticalPlacement&&be.placedOrientation===s.ao.vertical?Math.PI/2:0;for(let Er=0;Er<be.numGlyphs;Er++)s.av(re,ft,Vt);L&&be.associatedIconIndex>=0&&(_e[be.associatedIconIndex]={shiftedAnchor:ft,angle:Vt})}else E(be.numGlyphs,re)}if(L){le.clear();const ge=w.icon.placedSymbolArray;for(let be=0;be<ge.length;be++){const Se=ge.get(be);if(Se.hidden)E(Se.numGlyphs,le);else{const Re=_e[be];if(Re)for(let Pe=0;Pe<Se.numGlyphs;Pe++)s.av(le,Re.shiftedAnchor,Re.angle);else E(Se.numGlyphs,le)}}w.icon.dynamicLayoutVertexBuffer.updateData(le)}w.text.dynamicLayoutVertexBuffer.updateData(re)}function Rd(w,o,d){return d.iconsInText&&o?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Ru(w,o,d,y,v,T,R,k,L,q,V,Y,H){const re=w.context,le=re.gl,_e=w.transform,ge=k==="map",be=L==="map",Se=k!=="viewport"&&d.layout.get("symbol-placement")!=="point",Re=ge&&!be&&!Se,Pe=!d.layout.get("symbol-sort-key").isConstant();let De=!1;const Be=w.getDepthModeForSublayer(0,br.ReadOnly),Ae=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[],st=_e.getCircleRadiusCorrection();for(const Ye of y){const Qe=o.getTile(Ye),ot=Qe.getBucket(d);if(!ot)continue;const xt=v?ot.text:ot.icon;if(!xt||!xt.segments.get().length||!xt.hasVisibleVertices)continue;const Et=xt.programConfigurations.get(d.id),ft=v||ot.sdfIcons,Vt=v?ot.textSizeData:ot.iconSizeData,Er=be||_e.pitch!==0,tn=w.useProgram(Rd(ft,v,ot),Et),hn=s.an(Vt,_e.zoom),an=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ye);let Mn,Dn,vr,dn,Yn=[0,0],si=null;if(v)Dn=Qe.glyphAtlasTexture,vr=le.LINEAR,Mn=Qe.glyphAtlasTexture.size,ot.iconsInText&&(Yn=Qe.imageAtlasTexture.size,si=Qe.imageAtlasTexture,dn=Er||w.options.rotating||w.options.zooming||Vt.kind==="composite"||Vt.kind==="camera"?le.LINEAR:le.NEAREST);else{const Xn=d.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;Dn=Qe.imageAtlasTexture,vr=ft||w.options.rotating||w.options.zooming||Xn||Er?le.LINEAR:le.NEAREST,Mn=Qe.imageAtlasTexture.size}const mi=s.aC(Qe,1,w.transform.zoom),Wi=Cr(ge,w.transform,mi),Go=s.L();s.aq(Go,Wi);const ma=Kt(be,ge,w.transform,mi),ga=s.aD(_e,Qe,T,R),uc=_e.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),hc=Ae&&ot.hasTextData(),al=d.layout.get("icon-text-fit")!=="none"&&hc&&ot.hasIconData();if(Se){const Xn=w.style.map.terrain?(Po,Qn)=>w.style.map.terrain.getElevation(Ye,Po,Qn):null,ai=d.layout.get("text-rotation-alignment")==="map";vn(ot,w,v,Wi,Go,be,q,ai,Ye.toUnwrapped(),_e.width,_e.height,ga,Xn)}const ll=v&&Ae||al,oo=Se||ll?kw:be?Wi:w.transform.clipSpaceToPixelsMatrix,Ho=ft&&d.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Zi;Zi=ft?ot.iconsInText?Cw(Vt.kind,hn,Re,be,Se,ll,w,oo,ma,ga,Mn,Yn,st):I_(Vt.kind,hn,Re,be,Se,ll,w,oo,ma,ga,v,Mn,0,st):Su(Vt.kind,hn,Re,be,Se,ll,w,oo,ma,ga,v,Mn,st);const ya={program:tn,buffers:xt,uniformValues:Zi,projectionData:uc,atlasTexture:Dn,atlasTextureIcon:si,atlasInterpolation:vr,atlasInterpolationIcon:dn,isSDF:ft,hasHalo:Ho};if(Pe&&ot.canOverlap){De=!0;const Xn=xt.segments.get();for(const ai of Xn)Ge.push({segments:new s.aM([ai]),sortKey:ai.sortKey,state:ya,terrainData:an})}else Ge.push({segments:xt.segments,sortKey:0,state:ya,terrainData:an})}De&&Ge.sort((Ye,Qe)=>Ye.sortKey-Qe.sortKey);for(const Ye of Ge){const Qe=Ye.state;if(re.activeTexture.set(le.TEXTURE0),Qe.atlasTexture.bind(Qe.atlasInterpolation,le.CLAMP_TO_EDGE),Qe.atlasTextureIcon&&(re.activeTexture.set(le.TEXTURE1),Qe.atlasTextureIcon&&Qe.atlasTextureIcon.bind(Qe.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),Qe.isSDF){const ot=Qe.uniformValues;Qe.hasHalo&&(ot.u_is_halo=1,Iu(Qe.buffers,Ye.segments,d,w,Qe.program,Be,V,Y,ot,Qe.projectionData,Ye.terrainData)),ot.u_is_halo=0}Iu(Qe.buffers,Ye.segments,d,w,Qe.program,Be,V,Y,Qe.uniformValues,Qe.projectionData,Ye.terrainData)}}function Iu(w,o,d,y,v,T,R,k,L,q,V){const Y=y.context;v.draw(Y,Y.gl.TRIANGLES,T,R,k,or.backCCW,L,V,q,d.id,w.layoutVertexBuffer,w.indexBuffer,o,d.paint,y.transform.zoom,w.programConfigurations.get(d.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function pm(w,o,d,y,v){const T=w.context,R=T.gl,k=Wr.disabled,L=new Sn([R.ONE,R.ONE],s.bf.transparent,[!0,!0,!0,!0]),q=o.getBucket(d);if(!q)return;const V=y.key;let Y=d.heatmapFbos.get(V);Y||(Y=Mu(T,o.tileSize,o.tileSize),d.heatmapFbos.set(V,Y)),T.bindFramebuffer.set(Y.framebuffer),T.viewport.set([0,0,o.tileSize,o.tileSize]),T.clear({color:s.bf.transparent});const H=q.programConfigurations.get(d.id),re=w.useProgram("heatmap",H,!v),le=w.transform.getProjectionData({overscaledTileID:o.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),_e=w.style.map.terrain.getTerrainData(y);re.draw(T,R.TRIANGLES,br.disabled,k,L,or.disabled,S_(o,w.transform.zoom,d.paint.get("heatmap-intensity"),1),_e,le,d.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,d.paint,w.transform.zoom,H)}function U_(w,o,d,y,v){const T=w.context,R=T.gl,k=w.transform;T.setColorMode(w.colorModeForRenderPass());const L=Ou(T,o),q=d.key,V=o.heatmapFbos.get(q);if(!V)return;T.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,V.colorAttachment.get()),T.activeTexture.set(R.TEXTURE1),L.bind(R.LINEAR,R.CLAMP_TO_EDGE);const Y=k.getProjectionData({overscaledTileID:d,applyTerrainMatrix:v,applyGlobeMatrix:!y});w.useProgram("heatmapTexture").draw(T,R.TRIANGLES,br.disabled,Wr.disabled,w.colorModeForRenderPass(),or.disabled,Qf(w,o,0,1),null,Y,o.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,o.paint,k.zoom),V.destroy(),o.heatmapFbos.delete(q)}function Mu(w,o,d){var y,v;const T=w.gl,R=T.createTexture();T.bindTexture(T.TEXTURE_2D,R),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const k=(y=w.HALF_FLOAT)!==null&&y!==void 0?y:T.UNSIGNED_BYTE,L=(v=w.RGBA16F)!==null&&v!==void 0?v:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,L,o,d,0,T.RGBA,k,null);const q=w.createFramebuffer(o,d,!1,!1);return q.colorAttachment.set(R),q}function Ou(w,o){return o.colorRampTexture||(o.colorRampTexture=new s.T(w,o.colorRamp,w.gl.RGBA)),o.colorRampTexture}function ku(w,o,d,y,v){if(!d||!y||!y.imageAtlas)return;const T=y.imageAtlas.patternPositions;let R=T[d.to.toString()],k=T[d.from.toString()];if(!R&&k&&(R=k),!k&&R&&(k=R),!R||!k){const L=v.getPaintProperty(o);R=T[L],k=T[L]}R&&k&&w.setConstantPatternPositions(R,k)}function Id(w,o,d,y,v,T,R,k){const L=w.context.gl,q="fill-pattern",V=d.paint.get(q),Y=V&&V.constantOr(1),H=d.getCrossfadeParameters();let re,le,_e,ge,be;const Se=w.transform,Re=d.paint.get("fill-translate"),Pe=d.paint.get("fill-translate-anchor");R?(le=Y&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",re=L.LINES):(le=Y?"fillPattern":"fill",re=L.TRIANGLES);const De=V.constantOr(null);for(const Be of y){const Ae=o.getTile(Be);if(Y&&!Ae.patternsLoaded())continue;const Ge=Ae.getBucket(d);if(!Ge)continue;const st=Ge.programConfigurations.get(d.id),Ye=w.useProgram(le,st),Qe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Be);Y&&(w.context.activeTexture.set(L.TEXTURE0),Ae.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),st.updatePaintBuffers(H)),ku(st,q,De,Ae,d);const ot=Se.getProjectionData({overscaledTileID:Be,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),xt=s.aD(Se,Ae,Re,Pe);if(R){ge=Ge.indexBuffer2,be=Ge.segments2;const ft=[L.drawingBufferWidth,L.drawingBufferHeight];_e=le==="fillOutlinePattern"&&Y?Eu(w,H,Ae,ft,xt):wu(ft,xt)}else ge=Ge.indexBuffer,be=Ge.segments,_e=Y?bd(w,H,Ae,xt):{u_fill_translate:xt};const Et=w.stencilModeForClipping(Be);Ye.draw(w.context,re,v,Et,T,or.backCCW,_e,Qe,ot,d.id,Ge.layoutVertexBuffer,ge,be,d.paint,w.transform.zoom,st)}}function fm(w,o,d,y,v,T,R,k){const L=w.context,q=L.gl,V="fill-extrusion-pattern",Y=d.paint.get(V),H=Y.constantOr(1),re=d.getCrossfadeParameters(),le=d.paint.get("fill-extrusion-opacity"),_e=Y.constantOr(null),ge=w.transform;for(const be of y){const Se=o.getTile(be),Re=Se.getBucket(d);if(!Re)continue;const Pe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(be),De=Re.programConfigurations.get(d.id),Be=w.useProgram(H?"fillExtrusionPattern":"fillExtrusion",De);H&&(w.context.activeTexture.set(q.TEXTURE0),Se.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),De.updatePaintBuffers(re));const Ae=ge.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!k,applyTerrainMatrix:!0});ku(De,V,_e,Se,d);const Ge=s.aD(ge,Se,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),st=d.paint.get("fill-extrusion-vertical-gradient"),Ye=H?xw(w,st,le,Ge,be,re,Se):jo(w,st,le,Ge);Be.draw(L,L.gl.TRIANGLES,v,T,R,or.backCCW,Ye,Pe,Ae,d.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,d.paint,w.transform.zoom,De,w.style.map.terrain&&Re.centroidVertexBuffer)}}function tl(w,o,d,y,v,T,R,k,L){var q;const V=w.style.projection,Y=w.context,H=w.transform,re=Y.gl,le=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],_e=w.useProgram("hillshade",null,!1,le),ge=!w.options.moving;for(const be of y){const Se=o.getTile(be),Re=Se.fbo;if(!Re)continue;const Pe=V.getMeshFromTileID(Y,be.canonical,k,!0,"raster"),De=(q=w.style.map.terrain)===null||q===void 0?void 0:q.getTerrainData(be);Y.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,Re.colorAttachment.get());const Be=H.getProjectionData({overscaledTileID:be,aligned:ge,applyGlobeMatrix:!L,applyTerrainMatrix:!0});_e.draw(Y,re.TRIANGLES,T,v[be.overscaledZ],R,or.backCCW,Tw(w,Se,d),De,Be,d.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}}function mm(w,o,d,y,v,T,R,k,L){var q;const V=w.style.projection,Y=w.context,H=w.transform,re=Y.gl,le=w.useProgram("colorRelief"),_e=!w.options.moving;let ge=!0,be=0;for(const Se of y){const Re=o.getTile(Se),Pe=Re.dem;if(ge){const Ye=re.getParameter(re.MAX_TEXTURE_SIZE),{elevationTexture:Qe,colorTexture:ot}=d.getColorRampTextures(Y,Ye,Pe.getUnpackVector());Y.activeTexture.set(re.TEXTURE1),Qe.bind(re.NEAREST,re.CLAMP_TO_EDGE),Y.activeTexture.set(re.TEXTURE4),ot.bind(re.LINEAR,re.CLAMP_TO_EDGE),ge=!1,be=Qe.size[0]}if(!Pe||!Pe.data)continue;const De=Pe.stride,Be=Pe.getPixels();if(Y.activeTexture.set(re.TEXTURE0),Y.pixelStoreUnpackPremultiplyAlpha.set(!1),Re.demTexture=Re.demTexture||w.getTileTexture(De),Re.demTexture){const Ye=Re.demTexture;Ye.update(Be,{premultiply:!1}),Ye.bind(re.LINEAR,re.CLAMP_TO_EDGE)}else Re.demTexture=new s.T(Y,Be,re.RGBA,{premultiply:!1}),Re.demTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const Ae=V.getMeshFromTileID(Y,Se.canonical,k,!0,"raster"),Ge=(q=w.style.map.terrain)===null||q===void 0?void 0:q.getTerrainData(Se),st=H.getProjectionData({overscaledTileID:Se,aligned:_e,applyGlobeMatrix:!L,applyTerrainMatrix:!0});le.draw(Y,re.TRIANGLES,T,v[Se.overscaledZ],R,or.backCCW,P_(d,Re.dem,be),Ge,st,d.id,Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}}const Md=[new s.P(0,0),new s.P(s.$,0),new s.P(s.$,s.$),new s.P(0,s.$)];function rl(w,o,d,y,v,T,R,k,L=!1,q=!1){const V=y[y.length-1].overscaledZ,Y=w.context,H=Y.gl,re=w.useProgram("raster"),le=w.transform,_e=w.style.projection,ge=w.colorModeForRenderPass(),be=!w.options.moving;for(const Se of y){const Re=w.getDepthModeForSublayer(Se.overscaledZ-V,d.paint.get("raster-opacity")===1?br.ReadWrite:br.ReadOnly,H.LESS),Pe=o.getTile(Se);Pe.registerFadeDuration(d.paint.get("raster-fade-duration"));const De=o.findLoadedParent(Se,0),Be=o.findLoadedSibling(Se),Ae=gm(Pe,De||Be||null,o,d,w.transform,w.style.map.terrain);let Ge,st;const Ye=d.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;Y.activeTexture.set(H.TEXTURE0),Pe.texture.bind(Ye,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set(H.TEXTURE1),De?(De.texture.bind(Ye,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Ge=Math.pow(2,De.tileID.overscaledZ-Pe.tileID.overscaledZ),st=[Pe.tileID.canonical.x*Ge%1,Pe.tileID.canonical.y*Ge%1]):Pe.texture.bind(Ye,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Pe.texture.useMipmap&&Y.extTextureFilterAnisotropic&&w.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,Y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y.extTextureFilterAnisotropicMax);const Qe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Se),ot=le.getProjectionData({overscaledTileID:Se,aligned:be,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),xt=Tu(st||[0,0],Ge||1,Ae,d,k),Et=_e.getMeshFromTileID(Y,Se.canonical,T,R,"raster");re.draw(Y,H.TRIANGLES,Re,v?v[Se.overscaledZ]:Wr.disabled,ge,L?or.frontCCW:or.backCCW,xt,Qe,ot,d.id,Et.vertexBuffer,Et.indexBuffer,Et.segments)}}function gm(w,o,d,y,v,T){const R=y.paint.get("raster-fade-duration");if(!T&&R>0){const k=P.now(),L=(k-w.timeAdded)/R,q=o?(k-o.timeAdded)/R:-1,V=d.getSource(),Y=Ot(v,{tileSize:V.tileSize,roundZoom:V.roundZoom}),H=!o||Math.abs(o.tileID.overscaledZ-Y)>Math.abs(w.tileID.overscaledZ-Y),re=H&&w.refreshedUponExpiration?1:s.ah(H?L:1-q,0,1);return w.refreshedUponExpiration&&L>=1&&(w.refreshedUponExpiration=!1),o?{opacity:1,mix:1-re}:{opacity:re,mix:0}}return{opacity:1,mix:0}}const G_=new s.bf(1,0,0,1),H_=new s.bf(0,1,0,1),Od=new s.bf(0,0,1,1),ym=new s.bf(1,0,1,1),Dw=new s.bf(0,1,1,1);function _m(w,o,d,y){vs(w,0,o+d/2,w.transform.width,d,y)}function Ln(w,o,d,y){vs(w,o-d/2,0,d,w.transform.height,y)}function vs(w,o,d,y,v,T){const R=w.context,k=R.gl;k.enable(k.SCISSOR_TEST),k.scissor(o*w.pixelRatio,d*w.pixelRatio,y*w.pixelRatio,v*w.pixelRatio),R.clear({color:T}),k.disable(k.SCISSOR_TEST)}function So(w,o,d){const y=w.context,v=y.gl,T=w.useProgram("debug"),R=br.disabled,k=Wr.disabled,L=w.colorModeForRenderPass(),q="$debug",V=w.style.map.terrain&&w.style.map.terrain.getTerrainData(d);y.activeTexture.set(v.TEXTURE0);const Y=o.getTileByID(d.key).latestRawTileData,H=Math.floor((Y&&Y.byteLength||0)/1024),re=o.getTile(d).tileSize,le=512/Math.min(re,512)*(d.overscaledZ/w.transform.zoom)*.5;let _e=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(_e+=` => ${d.overscaledZ}`),function(be,Se){be.initDebugOverlayCanvas();const Re=be.debugOverlayCanvas,Pe=be.context.gl,De=be.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,Re.width,Re.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(Se,5,5),De.strokeText(Se,5,5),be.debugOverlayTexture.update(Re),be.debugOverlayTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}(w,`${_e} ${H}kB`);const ge=w.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(y,v.TRIANGLES,R,k,Sn.alphaBlended,or.disabled,Ka(s.bf.transparent,le),null,ge,q,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),T.draw(y,v.LINE_STRIP,R,k,L,or.disabled,Ka(s.bf.red),V,ge,q,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function kd(w,o,d,y){const{isRenderingGlobe:v}=y,T=w.context,R=T.gl,k=w.transform,L=w.colorModeForRenderPass(),q=w.getDepthModeFor3D(),V=w.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,w.width,w.height]);for(const Y of d){const H=o.getTerrainMesh(Y.tileID),re=w.renderToTexture.getTexture(Y),le=o.getTerrainData(Y.tileID);T.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,re.texture);const _e=o.getMeshFrameDelta(k.zoom),ge=k.calculateFogMatrix(Y.tileID.toUnwrapped()),be=yd(_e,ge,w.style.sky,k.pitch,v),Se=k.getProjectionData({overscaledTileID:Y.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(T,R.TRIANGLES,q,Wr.disabled,L,or.backCCW,be,le,Se,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}function Lu(w,o){if(!o.mesh){const d=new s.aL;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);const y=new s.aN;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),o.mesh=new Ua(w.createVertexBuffer(d,ha.members),w.createIndexBuffer(y),s.aM.simpleSegment(0,0,d.length,y.length))}return o.mesh}class J_{constructor(o,d){this.context=new q_(o),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=cr.maxUnderzooming+cr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jl}resize(o,d,y){if(this.width=Math.floor(o*y),this.height=Math.floor(d*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const o=this.context,d=new s.aL;d.emplaceBack(0,0),d.emplaceBack(s.$,0),d.emplaceBack(0,s.$),d.emplaceBack(s.$,s.$),this.tileExtentBuffer=o.createVertexBuffer(d,ha.members),this.tileExtentSegments=s.aM.simpleSegment(0,0,4,2);const y=new s.aL;y.emplaceBack(0,0),y.emplaceBack(s.$,0),y.emplaceBack(0,s.$),y.emplaceBack(s.$,s.$),this.debugBuffer=o.createVertexBuffer(y,ha.members),this.debugSegments=s.aM.simpleSegment(0,0,4,5);const v=new s.c6;v.emplaceBack(0,0,0,0),v.emplaceBack(s.$,0,s.$,0),v.emplaceBack(0,s.$,0,s.$),v.emplaceBack(s.$,s.$,s.$,s.$),this.rasterBoundsBuffer=o.createVertexBuffer(v,bw.members),this.rasterBoundsSegments=s.aM.simpleSegment(0,0,4,2);const T=new s.aL;T.emplaceBack(0,0),T.emplaceBack(s.$,0),T.emplaceBack(0,s.$),T.emplaceBack(s.$,s.$),this.rasterBoundsBufferPosOnly=o.createVertexBuffer(T,ha.members),this.rasterBoundsSegmentsPosOnly=s.aM.simpleSegment(0,0,4,5);const R=new s.aL;R.emplaceBack(0,0),R.emplaceBack(1,0),R.emplaceBack(0,1),R.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(R,ha.members),this.viewportSegments=s.aM.simpleSegment(0,0,4,2);const k=new s.c7;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(k);const L=new s.aN;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(L);const q=this.context.gl;this.stencilClearMode=new Wr({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO),this.tileExtentMesh=new Ua(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const o=this.context,d=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=s.L();s.bY(y,0,this.width,this.height,0,0,1),s.N(y,y,[d.drawingBufferWidth,d.drawingBufferHeight,0]);const v={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(o,d.TRIANGLES,br.disabled,this.stencilClearMode,Sn.disabled,or.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,d,y){if(this.currentStencilSource===o.source||!o.isTileClipped()||!d||!d.length)return;this.currentStencilSource=o.source,this.nextStencilID+d.length>256&&this.clearStencil();const v=this.context;v.setColorMode(Sn.disabled),v.setDepthMode(br.disabled);const T={};for(const R of d)T[R.key]=this.nextStencilID++;this._renderTileMasks(T,d,y,!0),this._renderTileMasks(T,d,y,!1),this._tileClippingMaskIDs=T}_renderTileMasks(o,d,y,v){const T=this.context,R=T.gl,k=this.style.projection,L=this.transform,q=this.useProgram("clippingMask");for(const V of d){const Y=o[V.key],H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),re=k.getMeshFromTileID(this.context,V.canonical,v,!0,"stencil"),le=L.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!y,applyTerrainMatrix:!0});q.draw(T,R.TRIANGLES,br.disabled,new Wr({func:R.ALWAYS,mask:0},Y,255,R.KEEP,R.KEEP,R.REPLACE),Sn.disabled,y?or.disabled:or.backCCW,null,H,le,"$clipping",re.vertexBuffer,re.indexBuffer,re.segments)}}_renderTilesDepthBuffer(){const o=this.context,d=o.gl,y=this.style.projection,v=this.transform,T=this.useProgram("depth"),R=this.getDepthModeFor3D(),k=$e(v,{tileSize:v.tileSize});for(const L of k){const q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(L),V=y.getMeshFromTileID(this.context,L.canonical,!0,!0,"raster"),Y=v.getProjectionData({overscaledTileID:L,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(o,d.TRIANGLES,R,Wr.disabled,Sn.disabled,or.backCCW,null,q,Y,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,d=this.context.gl;return new Wr({func:d.NOTEQUAL,mask:255},o,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(o){const d=this.context.gl;return new Wr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(o){const d=this.context.gl,y=o.sort((R,k)=>k.overscaledZ-R.overscaledZ),v=y[y.length-1].overscaledZ,T=y[0].overscaledZ-v+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const R={};for(let k=0;k<T;k++)R[k+v]=new Wr({func:d.GEQUAL,mask:255},k+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=T,[R,y]}return[{[v]:Wr.disabled},y]}stencilConfigForOverlapTwoPass(o){const d=this.context.gl,y=o.sort((R,k)=>k.overscaledZ-R.overscaledZ),v=y[y.length-1].overscaledZ,T=y[0].overscaledZ-v+1;if(this.clearStencil(),T>1){const R={},k={};for(let L=0;L<T;L++)R[L+v]=new Wr({func:d.GREATER,mask:255},T+1+L,255,d.KEEP,d.KEEP,d.REPLACE),k[L+v]=new Wr({func:d.GREATER,mask:255},1+L,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*T+1,[R,k,y]}return this.nextStencilID=3,[{[v]:new Wr({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[v]:new Wr({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},y]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new Sn([o.CONSTANT_COLOR,o.ONE],new s.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Sn.unblended:Sn.alphaBlended}getDepthModeForSublayer(o,d,y){if(!this.opaquePassEnabledForLayer())return br.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new br(y||this.context.gl.LEQUAL,d,[v,v])}getDepthModeFor3D(){return new br(this.context.gl.LEQUAL,br.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,d){var y,v;this.style=o,this.options=d,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(P.now()),this.imageManager.beginFrame();const T=this.style._order,R=this.style.sourceCaches,k={},L={},q={},V={isRenderingToTexture:!1,isRenderingGlobe:((y=o.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const H in R){const re=R[H];re.used&&re.prepare(this.context),k[H]=re.getVisibleCoordinates(!1),L[H]=k[H].slice().reverse(),q[H]=re.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<T.length;H++)if(this.style._layers[T[H]].is3D()){this.opaquePassCutoff=H;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const H of T){const re=this.style._layers[H];if(!re.hasOffscreenPass()||re.isHidden(this.transform.zoom))continue;const le=L[re.source];(re.type==="custom"||le.length)&&this.renderLayer(this,R[re.source],re,le,V)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:H=>this.useProgram(H)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?s.bf.black:s.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(H,re){const le=H.context,_e=le.gl,ge=((Be,Ae,Ge)=>{const st=Math.cos(Ae.rollInRadians),Ye=Math.sin(Ae.rollInRadians),Qe=Le(Ae),ot=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Be.properties.get("sky-color"),u_horizon_color:Be.properties.get("horizon-color"),u_horizon:[(Ae.width/2-Qe*Ye)*Ge,(Ae.height/2+Qe*st)*Ge],u_horizon_normal:[-Ye,st],u_sky_horizon_blend:Be.properties.get("sky-horizon-blend")*Ae.height/2*Ge,u_sky_blend:ot}})(re,H.style.map.transform,H.pixelRatio),be=new br(_e.LEQUAL,br.ReadWrite,[0,1]),Se=Wr.disabled,Re=H.colorModeForRenderPass(),Pe=H.useProgram("sky"),De=Lu(le,re);Pe.draw(le,_e.TRIANGLES,be,Se,Re,or.disabled,ge,null,void 0,"sky",De.vertexBuffer,De.indexBuffer,De.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const H=this.style._layers[T[this.currentLayer]],re=R[H.source],le=k[H.source];this._renderTileClippingMasks(H,le,!1),this.renderLayer(this,re,H,le,V)}this.renderPass="translucent";let Y=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const H=this.style._layers[T[this.currentLayer]],re=R[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H,V))continue;this.opaquePassEnabledForLayer()||Y||(Y=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const le=(H.type==="symbol"?q:L)[H.source];this._renderTileClippingMasks(H,k[H.source],!!this.renderToTexture),this.renderLayer(this,re,H,le,V)}if(V.isRenderingGlobe&&function(H,re,le){const _e=H.context,ge=_e.gl,be=H.useProgram("atmosphere"),Se=new br(ge.LEQUAL,br.ReadOnly,[0,1]),Re=H.transform,Pe=function(ot,xt){const Et=ot.properties.get("position"),ft=[-Et.x,-Et.y,-Et.z],Vt=s.ag(new Float64Array(16));return ot.properties.get("anchor")==="map"&&(s.b6(Vt,Vt,xt.rollInRadians),s.b7(Vt,Vt,-xt.pitchInRadians),s.b6(Vt,Vt,xt.bearingInRadians),s.b7(Vt,Vt,xt.center.lat*Math.PI/180),s.bz(Vt,Vt,-xt.center.lng*Math.PI/180)),s.c5(ft,ft,Vt),ft}(le,H.transform),De=Re.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Be=re.properties.get("atmosphere-blend")*De.projectionTransition;if(Be===0)return;const Ae=Zl(Re.worldSize,Re.center.lat),Ge=Re.inverseProjectionMatrix,st=new Float64Array(4);st[3]=1,s.aw(st,st,Re.modelViewProjectionMatrix),st[0]/=st[3],st[1]/=st[3],st[2]/=st[3],st[3]=1,s.aw(st,st,Ge),st[0]/=st[3],st[1]/=st[3],st[2]/=st[3],st[3]=1;const Ye=((ot,xt,Et,ft,Vt)=>({u_sun_pos:ot,u_atmosphere_blend:xt,u_globe_position:Et,u_globe_radius:ft,u_inv_proj_matrix:Vt}))(Pe,Be,[st[0],st[1],st[2]],Ae,Ge),Qe=Lu(_e,re);be.draw(_e,ge.TRIANGLES,Se,Wr.disabled,Sn.alphaBlended,or.disabled,Ye,null,null,"atmosphere",Qe.vertexBuffer,Qe.indexBuffer,Qe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const H=function(re,le){let _e=null;const ge=Object.values(re._layers).flatMap(Pe=>Pe.source&&!Pe.isHidden(le)?[re.sourceCaches[Pe.source]]:[]),be=ge.filter(Pe=>Pe.getSource().type==="vector"),Se=ge.filter(Pe=>Pe.getSource().type!=="vector"),Re=Pe=>{(!_e||_e.getSource().maxzoom<Pe.getSource().maxzoom)&&(_e=Pe)};return be.forEach(Pe=>Re(Pe)),_e||Se.forEach(Pe=>Re(Pe)),_e}(this.style,this.transform.zoom);H&&function(re,le,_e){for(let ge=0;ge<_e.length;ge++)So(re,le,_e[ge])}(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){const re=H.transform.padding;_m(H,H.transform.height-(re.top||0),3,G_),_m(H,re.bottom||0,3,H_),Ln(H,re.left||0,3,Od),Ln(H,H.transform.width-(re.right||0),3,ym);const le=H.transform.centerPoint;(function(_e,ge,be,Se){vs(_e,ge-1,be-10,2,20,Se),vs(_e,ge-10,be-1,20,2,Se)})(H,le.x,H.transform.height-le.y,Dw)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=o?!s.c8(d,y):!s.c9(d,y)),v||(v=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(s.ca(d,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,R){const k=T.context,L=k.gl,q=T.transform,V=Sn.unblended,Y=new br(L.LEQUAL,br.ReadWrite,[0,1]),H=R.sourceCache.getRenderableTiles(),re=T.useProgram("terrainDepth");k.bindFramebuffer.set(R.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),k.clear({color:s.bf.transparent,depth:1});for(const le of H){const _e=R.getTerrainMesh(le.tileID),ge=R.getTerrainData(le.tileID),be=q.getProjectionData({overscaledTileID:le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Se={u_ele_delta:R.getMeshFrameDelta(q.zoom)};re.draw(k,L.TRIANGLES,Y,Wr.disabled,V,or.backCCW,Se,ge,be,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,R){const k=T.context,L=k.gl,q=T.transform,V=Sn.unblended,Y=new br(L.LEQUAL,br.ReadWrite,[0,1]),H=R.getCoordsTexture(),re=R.sourceCache.getRenderableTiles(),le=T.useProgram("terrainCoords");k.bindFramebuffer.set(R.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),k.clear({color:s.bf.transparent,depth:1}),R.coordsIndex=[];for(const _e of re){const ge=R.getTerrainMesh(_e.tileID),be=R.getTerrainData(_e.tileID);k.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,H.texture);const Se={u_terrain_coords_id:(255-R.coordsIndex.length)/255,u_texture:0,u_ele_delta:R.getMeshFrameDelta(q.zoom)},Re=q.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});le.draw(k,L.TRIANGLES,Y,Wr.disabled,V,or.backCCW,Se,be,Re,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),R.coordsIndex.push(_e.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(o,d,y,v,T){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(v||[]).length)&&(this.id=y.id,s.cb(y)?function(R,k,L,q,V,Y){if(R.renderPass!=="translucent")return;const{isRenderingToTexture:H}=Y,re=Wr.disabled,le=R.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(_e,ge,be,Se,Re,Pe,De,Be,Ae){const Ge=ge.transform,st=ge.style.map.terrain,Ye=Re==="map",Qe=Pe==="map";for(const ot of _e){const xt=Se.getTile(ot),Et=xt.getBucket(be);if(!Et||!Et.text||!Et.text.segments.get().length)continue;const ft=s.an(Et.textSizeData,Ge.zoom),Vt=s.aC(xt,1,ge.transform.zoom),Er=Cr(Ye,ge.transform,Vt),tn=be.layout.get("icon-text-fit")!=="none"&&Et.hasIconData();if(ft){const hn=Math.pow(2,Ge.zoom-xt.tileID.overscaledZ),an=st?(Mn,Dn)=>st.getElevation(ot,Mn,Dn):null;dm(Et,Ye,Qe,Ae,Ge,Er,hn,ft,tn,s.aD(Ge,xt,De,Be),ot.toUnwrapped(),an)}}}(q,R,L,k,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),V),L.paint.get("icon-opacity").constantOr(1)!==0&&Ru(R,k,L,q,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),re,le,H),L.paint.get("text-opacity").constantOr(1)!==0&&Ru(R,k,L,q,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),re,le,H),k.map.showCollisionBoxes&&($_(R,k,L,q,!0),$_(R,k,L,q,!1))}(o,d,y,v,this.style.placement.variableOffsets,T):s.cc(y)?function(R,k,L,q,V){if(R.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=V,H=L.paint.get("circle-opacity"),re=L.paint.get("circle-stroke-width"),le=L.paint.get("circle-stroke-opacity"),_e=!L.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(re.constantOr(1)===0||le.constantOr(1)===0))return;const ge=R.context,be=ge.gl,Se=R.transform,Re=R.getDepthModeForSublayer(0,br.ReadOnly),Pe=Wr.disabled,De=R.colorModeForRenderPass(),Be=[],Ae=Se.getCircleRadiusCorrection();for(let Ge=0;Ge<q.length;Ge++){const st=q[Ge],Ye=k.getTile(st),Qe=Ye.getBucket(L);if(!Qe)continue;const ot=L.paint.get("circle-translate"),xt=L.paint.get("circle-translate-anchor"),Et=s.aD(Se,Ye,ot,xt),ft=Qe.programConfigurations.get(L.id),Vt=R.useProgram("circle",ft),Er=Qe.layoutVertexBuffer,tn=Qe.indexBuffer,hn=R.style.map.terrain&&R.style.map.terrain.getTerrainData(st),an={programConfiguration:ft,program:Vt,layoutVertexBuffer:Er,indexBuffer:tn,uniformValues:ww(R,Ye,L,Et,Ae),terrainData:hn,projectionData:Se.getProjectionData({overscaledTileID:st,applyGlobeMatrix:!Y,applyTerrainMatrix:!0})};if(_e){const Mn=Qe.segments.get();for(const Dn of Mn)Be.push({segments:new s.aM([Dn]),sortKey:Dn.sortKey,state:an})}else Be.push({segments:Qe.segments,sortKey:0,state:an})}_e&&Be.sort((Ge,st)=>Ge.sortKey-st.sortKey);for(const Ge of Be){const{programConfiguration:st,program:Ye,layoutVertexBuffer:Qe,indexBuffer:ot,uniformValues:xt,terrainData:Et,projectionData:ft}=Ge.state;Ye.draw(ge,be.TRIANGLES,Re,Pe,De,or.backCCW,xt,Et,ft,L.id,Qe,ot,Ge.segments,L.paint,R.transform.zoom,st)}}(o,d,y,v,T):s.cd(y)?function(R,k,L,q,V){if(L.paint.get("heatmap-opacity")===0)return;const Y=R.context,{isRenderingToTexture:H,isRenderingGlobe:re}=V;if(R.style.map.terrain){for(const le of q){const _e=k.getTile(le);k.hasRenderableParent(le)||(R.renderPass==="offscreen"?pm(R,_e,L,le,re):R.renderPass==="translucent"&&U_(R,L,le,H,re))}Y.viewport.set([0,0,R.width,R.height])}else R.renderPass==="offscreen"?function(le,_e,ge,be){const Se=le.context,Re=Se.gl,Pe=le.transform,De=Wr.disabled,Be=new Sn([Re.ONE,Re.ONE],s.bf.transparent,[!0,!0,!0,!0]);(function(Ae,Ge,st){const Ye=Ae.gl;Ae.activeTexture.set(Ye.TEXTURE1),Ae.viewport.set([0,0,Ge.width/4,Ge.height/4]);let Qe=st.heatmapFbos.get(s.c2);Qe?(Ye.bindTexture(Ye.TEXTURE_2D,Qe.colorAttachment.get()),Ae.bindFramebuffer.set(Qe.framebuffer)):(Qe=Mu(Ae,Ge.width/4,Ge.height/4),st.heatmapFbos.set(s.c2,Qe))})(Se,le,ge),Se.clear({color:s.bf.transparent});for(let Ae=0;Ae<be.length;Ae++){const Ge=be[Ae];if(_e.hasRenderableParent(Ge))continue;const st=_e.getTile(Ge),Ye=st.getBucket(ge);if(!Ye)continue;const Qe=Ye.programConfigurations.get(ge.id),ot=le.useProgram("heatmap",Qe),xt=Pe.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Et=Pe.getCircleRadiusCorrection();ot.draw(Se,Re.TRIANGLES,br.disabled,De,Be,or.backCCW,S_(st,Pe.zoom,ge.paint.get("heatmap-intensity"),Et),null,xt,ge.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,ge.paint,Pe.zoom,Qe)}Se.viewport.set([0,0,le.width,le.height])}(R,k,L,q):R.renderPass==="translucent"&&function(le,_e){const ge=le.context,be=ge.gl;ge.setColorMode(le.colorModeForRenderPass());const Se=_e.heatmapFbos.get(s.c2);Se&&(ge.activeTexture.set(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,Se.colorAttachment.get()),ge.activeTexture.set(be.TEXTURE1),Ou(ge,_e).bind(be.LINEAR,be.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(ge,be.TRIANGLES,br.disabled,Wr.disabled,le.colorModeForRenderPass(),or.disabled,Qf(le,_e,0,1),null,null,_e.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,_e.paint,le.transform.zoom))}(R,L)}(o,d,y,v,T):s.ce(y)?function(R,k,L,q,V){if(R.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=V,H=L.paint.get("line-opacity"),re=L.paint.get("line-width");if(H.constantOr(1)===0||re.constantOr(1)===0)return;const le=R.getDepthModeForSublayer(0,br.ReadOnly),_e=R.colorModeForRenderPass(),ge=L.paint.get("line-dasharray"),be=L.paint.get("line-pattern"),Se=be.constantOr(1),Re=L.paint.get("line-gradient"),Pe=L.getCrossfadeParameters(),De=Se?"linePattern":ge?"lineSDF":Re?"lineGradient":"line",Be=R.context,Ae=Be.gl,Ge=R.transform;let st=!0;for(const Ye of q){const Qe=k.getTile(Ye);if(Se&&!Qe.patternsLoaded())continue;const ot=Qe.getBucket(L);if(!ot)continue;const xt=ot.programConfigurations.get(L.id),Et=R.context.program.get(),ft=R.useProgram(De,xt),Vt=st||ft.program!==Et,Er=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Ye),tn=be.constantOr(null);if(tn&&Qe.imageAtlas){const vr=Qe.imageAtlas,dn=vr.patternPositions[tn.to.toString()],Yn=vr.patternPositions[tn.from.toString()];dn&&Yn&&xt.setConstantPatternPositions(dn,Yn)}const hn=Ge.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),an=Ge.getPixelScale(),Mn=Se?R_(R,Qe,L,an,Pe):ge?Ya(R,Qe,L,an,ge,Pe):Re?A_(R,Qe,L,an,ot.lineClipsArray.length):xd(R,Qe,L,an);if(Se)Be.activeTexture.set(Ae.TEXTURE0),Qe.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),xt.updatePaintBuffers(Pe);else if(ge&&(Vt||R.lineAtlas.dirty))Be.activeTexture.set(Ae.TEXTURE0),R.lineAtlas.bind(Be);else if(Re){const vr=ot.gradients[L.id];let dn=vr.texture;if(L.gradientVersion!==vr.version){let Yn=256;if(L.stepInterpolant){const si=k.getSource().maxzoom,mi=Ye.canonical.z===si?Math.ceil(1<<R.transform.maxZoom-Ye.canonical.z):1;Yn=s.ah(s.c3(ot.maxLineLength/s.$*1024*mi),256,Be.maxTextureSize)}vr.gradient=s.c4({expression:L.gradientExpression(),evaluationKey:"lineProgress",resolution:Yn,image:vr.gradient||void 0,clips:ot.lineClipsArray}),vr.texture?vr.texture.update(vr.gradient):vr.texture=new s.T(Be,vr.gradient,Ae.RGBA),vr.version=L.gradientVersion,dn=vr.texture}Be.activeTexture.set(Ae.TEXTURE0),dn.bind(L.stepInterpolant?Ae.NEAREST:Ae.LINEAR,Ae.CLAMP_TO_EDGE)}const Dn=R.stencilModeForClipping(Ye);ft.draw(Be,Ae.TRIANGLES,le,Dn,_e,or.disabled,Mn,Er,hn,L.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,L.paint,R.transform.zoom,xt,ot.layoutVertexBuffer2),st=!1}}(o,d,y,v,T):s.cf(y)?function(R,k,L,q,V){const Y=L.paint.get("fill-color"),H=L.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const{isRenderingToTexture:re}=V,le=R.colorModeForRenderPass(),_e=L.paint.get("fill-pattern"),ge=R.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&Y.constantOr(s.bf.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(R.renderPass===ge){const be=R.getDepthModeForSublayer(1,R.renderPass==="opaque"?br.ReadWrite:br.ReadOnly);Id(R,k,L,q,be,le,!1,re)}if(R.renderPass==="translucent"&&L.paint.get("fill-antialias")){const be=R.getDepthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,br.ReadOnly);Id(R,k,L,q,be,le,!0,re)}}(o,d,y,v,T):s.cg(y)?function(R,k,L,q,V){const Y=L.paint.get("fill-extrusion-opacity");if(Y===0)return;const{isRenderingToTexture:H}=V;if(R.renderPass==="translucent"){const re=new br(R.context.gl.LEQUAL,br.ReadWrite,R.depthRangeFor3D);if(Y!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))fm(R,k,L,q,re,Wr.disabled,Sn.disabled,H),fm(R,k,L,q,re,R.stencilModeFor3D(),R.colorModeForRenderPass(),H);else{const le=R.colorModeForRenderPass();fm(R,k,L,q,re,Wr.disabled,le,H)}}}(o,d,y,v,T):s.ch(y)?function(R,k,L,q,V){if(R.renderPass!=="offscreen"&&R.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=V,H=R.context,re=R.style.projection.useSubdivision,le=R.getDepthModeForSublayer(0,br.ReadOnly),_e=R.colorModeForRenderPass();if(R.renderPass==="offscreen")(function(ge,be,Se,Re,Pe,De,Be){const Ae=ge.context,Ge=Ae.gl;for(const st of Se){const Ye=be.getTile(st),Qe=Ye.dem;if(!Qe||!Qe.data||!Ye.needsHillshadePrepare)continue;const ot=Qe.dim,xt=Qe.stride,Et=Qe.getPixels();if(Ae.activeTexture.set(Ge.TEXTURE1),Ae.pixelStoreUnpackPremultiplyAlpha.set(!1),Ye.demTexture=Ye.demTexture||ge.getTileTexture(xt),Ye.demTexture){const Vt=Ye.demTexture;Vt.update(Et,{premultiply:!1}),Vt.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE)}else Ye.demTexture=new s.T(Ae,Et,Ge.RGBA,{premultiply:!1}),Ye.demTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE);Ae.activeTexture.set(Ge.TEXTURE0);let ft=Ye.fbo;if(!ft){const Vt=new s.T(Ae,{width:ot,height:ot,data:null},Ge.RGBA);Vt.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),ft=Ye.fbo=Ae.createFramebuffer(ot,ot,!0,!1),ft.colorAttachment.set(Vt.texture)}Ae.bindFramebuffer.set(ft.framebuffer),Ae.viewport.set([0,0,ot,ot]),ge.useProgram("hillshadePrepare").draw(Ae,Ge.TRIANGLES,Pe,De,Be,or.disabled,C_(Ye.tileID,Qe),null,null,Re.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),Ye.needsHillshadePrepare=!1}})(R,k,q,L,le,Wr.disabled,_e),H.viewport.set([0,0,R.width,R.height]);else if(R.renderPass==="translucent")if(re){const[ge,be,Se]=R.stencilConfigForOverlapTwoPass(q);tl(R,k,L,Se,ge,le,_e,!1,Y),tl(R,k,L,Se,be,le,_e,!0,Y)}else{const[ge,be]=R.getStencilConfigForOverlapAndUpdateStencilID(q);tl(R,k,L,be,ge,le,_e,!1,Y)}}(o,d,y,v,T):s.ci(y)?function(R,k,L,q,V){if(R.renderPass!=="translucent"||!q.length)return;const{isRenderingToTexture:Y}=V,H=R.style.projection.useSubdivision,re=R.getDepthModeForSublayer(0,br.ReadOnly),le=R.colorModeForRenderPass();if(H){const[_e,ge,be]=R.stencilConfigForOverlapTwoPass(q);mm(R,k,L,be,_e,re,le,!1,Y),mm(R,k,L,be,ge,re,le,!0,Y)}else{const[_e,ge]=R.getStencilConfigForOverlapAndUpdateStencilID(q);mm(R,k,L,ge,_e,re,le,!1,Y)}}(o,d,y,v,T):s.cj(y)?function(R,k,L,q,V){if(R.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!q.length)return;const{isRenderingToTexture:Y}=V,H=k.getSource(),re=R.style.projection.useSubdivision;if(H instanceof wr)rl(R,k,L,q,null,!1,!1,H.tileCoords,H.flippedWindingOrder,Y);else if(re){const[le,_e,ge]=R.stencilConfigForOverlapTwoPass(q);rl(R,k,L,ge,le,!1,!0,Md,!1,Y),rl(R,k,L,ge,_e,!0,!0,Md,!1,Y)}else{const[le,_e]=R.getStencilConfigForOverlapAndUpdateStencilID(q);rl(R,k,L,_e,le,!1,!0,Md,!1,Y)}}(o,d,y,v,T):s.ck(y)?function(R,k,L,q,V){const Y=L.paint.get("background-color"),H=L.paint.get("background-opacity");if(H===0)return;const{isRenderingToTexture:re}=V,le=R.context,_e=le.gl,ge=R.style.projection,be=R.transform,Se=be.tileSize,Re=L.paint.get("background-pattern");if(R.isPatternMissing(Re))return;const Pe=!Re&&Y.a===1&&H===1&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass!==Pe)return;const De=Wr.disabled,Be=R.getDepthModeForSublayer(0,Pe==="opaque"?br.ReadWrite:br.ReadOnly),Ae=R.colorModeForRenderPass(),Ge=R.useProgram(Re?"backgroundPattern":"background"),st=q||$e(be,{tileSize:Se,terrain:R.style.map.terrain});Re&&(le.activeTexture.set(_e.TEXTURE0),R.imageManager.bind(R.context));const Ye=L.getCrossfadeParameters();for(const Qe of st){const ot=be.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),xt=Re?O_(H,R,Re,{tileID:Qe,tileSize:Se},Ye):M_(H,Y),Et=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Qe),ft=ge.getMeshFromTileID(le,Qe.canonical,!1,!0,"raster");Ge.draw(le,_e.TRIANGLES,Be,De,Ae,or.backCCW,xt,Et,ot,L.id,ft.vertexBuffer,ft.indexBuffer,ft.segments)}}(o,0,y,v,T):s.cl(y)&&function(R,k,L,q){const{isRenderingGlobe:V}=q,Y=R.context,H=L.implementation,re=R.style.projection,le=R.transform,_e=le.getProjectionDataForCustomLayer(V),ge={farZ:le.farZ,nearZ:le.nearZ,fov:le.fov*Math.PI/180,modelViewProjectionMatrix:le.modelViewProjectionMatrix,projectionMatrix:le.projectionMatrix,shaderData:{variantName:re.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${re.shaderPreludeCode.vertexSource}`,define:re.shaderDefine},defaultProjectionData:_e},be=H.renderingMode?H.renderingMode:"2d";if(R.renderPass==="offscreen"){const Se=H.prerender;Se&&(R.setCustomLayerDefaults(),Y.setColorMode(R.colorModeForRenderPass()),Se.call(H,Y.gl,ge),Y.setDirty(),R.setBaseState())}else if(R.renderPass==="translucent"){R.setCustomLayerDefaults(),Y.setColorMode(R.colorModeForRenderPass()),Y.setStencilMode(Wr.disabled);const Se=be==="3d"?R.getDepthModeFor3D():R.getDepthModeForSublayer(0,br.ReadOnly);Y.setDepthMode(Se),H.render(Y.gl,ge),Y.setDirty(),R.setBaseState(),Y.bindFramebuffer.set(null)}}(o,0,y,T))}saveTileTexture(o){const d=this._tileTextures[o.size[0]];d?d.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const d=this._tileTextures[o];return d&&d.length>0?d.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const d=this.imageManager.getPattern(o.from.toString()),y=this.imageManager.getPattern(o.to.toString());return!d||!y}useProgram(o,d,y=!1,v=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,R=this.style.projection,k=y?Fo.projectionMercator:R.shaderPreludeCode,L=y?Fs:R.shaderDefine,q=o+(d?d.cacheKey:"")+`/${y?Ga:R.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[q]||(this.cache[q]=new Xf(this.context,Fo[o],d,im[o],this._showOverdrawInspector,T,k,L,v)),this.cache[q]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:d}=this.context.gl;return this.width!==o||this.height!==d}}function nl(w,o){let d,y=!1,v=null,T=null;const R=()=>{v=null,y&&(w.apply(T,d),v=setTimeout(R,o),y=!1)};return(...k)=>(y=!0,T=this,d=k,v||R(),v)}class Ld{constructor(o){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let y;return d.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(y=v)}),(y&&y[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(!this._isValidHash(d))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:y,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const y=d.join("/");let v=y;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${y}`);let T=window.location.hash.replace(v,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let R=window.location.href.replace(/(#.+)?$/,T);R=R.replace("&&","&"),window.history.replaceState(window.history.state,null,R)},this._updateHash=nl(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(o){const d=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,v=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,v),R=Math.round(d.lng*T)/T,k=Math.round(d.lat*T)/T,L=this._map.getBearing(),q=this._map.getPitch();let V="";if(V+=o?`/${R}/${k}/${y}`:`${y}/${k}/${R}`,(L||q)&&(V+="/"+Math.round(10*L)/10),q&&(V+=`/${Math.round(q)}`),this._hashName){const Y=this._hashName;let H=!1;const re=window.location.hash.slice(1).split("&").map(le=>{const _e=le.split("=")[0];return _e===Y?(H=!0,`${_e}=${V}`):le}).filter(le=>le);return H||re.push(`${Y}=${V}`),`#${re.join("&")}`}return`#${V}`}_isValidHash(o){if(o.length<3||o.some(isNaN))return!1;try{new s.S(+o[2],+o[1])}catch{return!1}const d=+o[0],y=+(o[3]||0),v=+(o[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&y>=-180&&y<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const Bs={linearity:.3,easing:s.cm(0,0,.3,1)},bm=s.e({deceleration:2500,maxSpeed:1400},Bs),W_=s.e({deceleration:20,maxSpeed:1400},Bs),Z_=s.e({deceleration:1e3,maxSpeed:360},Bs),K_=s.e({deceleration:1e3,maxSpeed:90},Bs),Y_=s.e({deceleration:1e3,maxSpeed:360},Bs);class X_{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:P.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,d=P.now();for(;o.length>0&&d-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)d.zoom+=T.zoomDelta||0,d.bearing+=T.bearingDelta||0,d.pitch+=T.pitchDelta||0,d.roll+=T.rollDelta||0,T.panDelta&&d.pan._add(T.panDelta),T.around&&(d.around=T.around),T.pinchAround&&(d.pinchAround=T.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(d.pan.mag()){const T=Ql(d.pan.mag(),y,s.e({},bm,o||{})),R=d.pan.mult(T.amount/d.pan.mag()),k=this._map.cameraHelper.handlePanInertia(R,this._map.transform);v.center=k.easingCenter,v.offset=k.easingOffset,Bo(v,T)}if(d.zoom){const T=Ql(d.zoom,y,W_);v.zoom=this._map.transform.zoom+T.amount,Bo(v,T)}if(d.bearing){const T=Ql(d.bearing,y,Z_);v.bearing=this._map.transform.bearing+s.ah(T.amount,-179,179),Bo(v,T)}if(d.pitch){const T=Ql(d.pitch,y,K_);v.pitch=this._map.transform.pitch+T.amount,Bo(v,T)}if(d.roll){const T=Ql(d.roll,y,Y_);v.roll=this._map.transform.roll+s.ah(T.amount,-179,179),Bo(v,T)}if(v.zoom||v.bearing){const T=d.pinchAround===void 0?d.around:d.pinchAround;v.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),s.e(v,{noMoveStart:!0})}}function Bo(w,o){(!w.duration||w.duration<o.duration)&&(w.duration=o.duration,w.easing=o.easing)}function Ql(w,o,d){const{maxSpeed:y,linearity:v,deceleration:T}=d,R=s.ah(w*v/(o/1e3),-y,y),k=Math.abs(R)/(T*v);return{easing:d.easing,duration:1e3*k,amount:R*(k/2)}}class no extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,y,v={}){y=y instanceof MouseEvent?y:new MouseEvent(o,y);const T=A.mousePos(d.getCanvas(),y),R=d.unproject(T);super(o,s.e({point:T,lngLat:R,originalEvent:y},v)),this._defaultPrevented=!1,this.target=d}}class ec extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,y){const v=o==="touchend"?y.changedTouches:y.touches,T=A.touchPos(d.getCanvasContainer(),v),R=T.map(L=>d.unproject(L)),k=T.reduce((L,q,V,Y)=>L.add(q.div(Y.length)),new s.P(0,0));super(o,{points:T,point:k,lngLats:R,lngLat:d.unproject(k),originalEvent:y}),this._defaultPrevented=!1}}class vm extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,y){super(o,{originalEvent:y}),this._defaultPrevented=!1}}class Q_{constructor(o,d){this._map=o,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new vm(o.type,this._map,o))}mousedown(o,d){return this._mousedownPos=d,this._firePreventable(new no(o.type,this._map,o))}mouseup(o){this._map.fire(new no(o.type,this._map,o))}click(o,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new no(o.type,this._map,o))}dblclick(o){return this._firePreventable(new no(o.type,this._map,o))}mouseover(o){this._map.fire(new no(o.type,this._map,o))}mouseout(o){this._map.fire(new no(o.type,this._map,o))}touchstart(o){return this._firePreventable(new ec(o.type,this._map,o))}touchmove(o){this._map.fire(new ec(o.type,this._map,o))}touchend(o){this._map.fire(new ec(o.type,this._map,o))}touchcancel(o){this._map.fire(new ec(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class e0{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new no(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new no("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new no(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class tc{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.screenPointToLocation(s.P.convert(o),this._map.terrain)}}class xm{constructor(o,d){this._map=o,this._tr=new tc(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,d){this.isEnabled()&&o.shiftKey&&o.button===0&&(A.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(o,d){if(!this._active)return;const y=d;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=y,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const T=Math.min(v.x,y.x),R=Math.max(v.x,y.x),k=Math.min(v.y,y.y),L=Math.max(v.y,y.y);A.setTransform(this._box,`translate(${T}px,${k}px)`),this._box.style.width=R-T+"px",this._box.style.height=L-k+"px"}mouseupWindow(o,d){if(!this._active||o.button!==0)return;const y=this._startPos,v=d;if(this.reset(),A.suppressClick(),y.x!==v.x||y.y!==v.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:o})),{cameraAnimation:T=>T.fitScreenCoordinates(y,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,d){return this._map.fire(new s.l(o,{originalEvent:d}))}}function rc(w,o){if(w.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${o.length}`);const d={};for(let y=0;y<w.length;y++)d[w[y].identifier]=o[y];return d}class t0{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,d,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),y.length===this.numTouches&&(this.centroid=function(v){const T=new s.P(0,0);for(const R of v)T._add(R);return T.div(v.length)}(d),this.touches=rc(y,d)))}touchmove(o,d,y){if(this.aborted||!this.centroid)return;const v=rc(y,d);for(const T in this.touches){const R=v[T];(!R||R.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(o,d,y){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class io{constructor(o){this.singleTap=new t0(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,d,y){this.singleTap.touchstart(o,d,y)}touchmove(o,d,y){this.singleTap.touchmove(o,d,y)}touchend(o,d,y){const v=this.singleTap.touchend(o,d,y);if(v){const T=o.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(v)<30;if(T&&R||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class qo{constructor(o){this._tr=new tc(o),this._zoomIn=new io({numTouches:1,numTaps:2}),this._zoomOut=new io({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,d,y){this._zoomIn.touchstart(o,d,y),this._zoomOut.touchstart(o,d,y)}touchmove(o,d,y){this._zoomIn.touchmove(o,d,y),this._zoomOut.touchmove(o,d,y)}touchend(o,d,y){const v=this._zoomIn.touchend(o,d,y),T=this._zoomOut.touchend(o,d,y),R=this._tr;return v?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:R.zoom+1,around:R.unproject(v)},{originalEvent:o})}):T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:R.zoom-1,around:R.unproject(T)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nc{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const d=this._moveFunction(...o);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(o,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,d){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const v=Array.isArray(d)?d[0]:d;return!this._moved&&v.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(y,v))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&A.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const $o=0,ic=2,Nw={[$o]:1,[ic]:2};class Du{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const d=A.mouseButton(o);this._eventButton=d}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(d,y){const v=Nw[y];return d.buttons===void 0||(d.buttons&v)!==v}(o,this._eventButton)}isValidEndEvent(o){return A.mouseButton(o)===this._eventButton}}class Fw{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}class zw{constructor(o=new Du({checkCorrectEvent:()=>!0}),d=new Fw){this.mouseMoveStateManager=o,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(o,d,y){return o instanceof MouseEvent?d(o):typeof TouchEvent<"u"&&o instanceof TouchEvent?y(o):void 0}startMove(o){this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(o){this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(o){return this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(o){return this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(o){return this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}const Nu=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=o=>{o.preventDefault()}};class Fu{constructor(o,d){this._clickTolerance=o.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(o){return o<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(o,d,y){return this._calculateTransform(o,d,y)}touchmove(o,d,y){if(this._active){if(!this._shouldBePrevented(y.length))return o.preventDefault(),this._calculateTransform(o,d,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",o)}}touchend(o,d,y){this._calculateTransform(o,d,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,d,y){y.length>0&&(this._active=!0);const v=rc(y,d),T=new s.P(0,0),R=new s.P(0,0);let k=0;for(const q in v){const V=v[q],Y=this._touches[q];Y&&(T._add(V),R._add(V.sub(Y)),k++,v[q]=V)}if(this._touches=v,this._shouldBePrevented(k)||!R.mag())return;const L=R.div(k);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(k),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,d,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([d[0],d[1]]))}touchmove(o,d,y){if(!this._firstTwoTouches)return;o.preventDefault();const[v,T]=this._firstTwoTouches,R=zt(y,d,v),k=zt(y,d,T);if(!R||!k)return;const L=this._aroundCenter?null:R.add(k).div(2);return this._move([R,k],L,o)}touchend(o,d,y){if(!this._firstTwoTouches)return;const[v,T]=this._firstTwoTouches,R=zt(y,d,v),k=zt(y,d,T);R&&k||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function zt(w,o,d){for(let y=0;y<w.length;y++)if(w[y].identifier===d)return o[y]}function wm(w,o){return Math.log(w/o)/Math.LN2}class Dd extends Vo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,d){const y=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(wm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wm(this._distance,y),pinchAround:d}}}function Em(w,o){return 180*w.angleWith(o)/Math.PI}class oc extends Vo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,d,y){const v=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Em(this._vector,v),pinchAround:d}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const d=25/(Math.PI*this._minDiameter)*360,y=Em(o,this._startVector);return Math.abs(y)<d}}function il(w){return Math.abs(w.y)>Math.abs(w.x)}class Nd extends Vo{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,d,y){super.touchstart(o,d,y),this._currentTouchCount=y.length}_start(o){this._lastPoints=o,il(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,d,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=o[0].sub(this._lastPoints[0]),T=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,T,y.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(v.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(o,d,y){if(this._valid!==void 0)return this._valid;const v=o.mag()>=2,T=d.mag()>=2;if(!v&&!T)return;if(!v||!T)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const R=o.y>0==d.y>0;return il(o)&&il(d)&&R}}const jr={panStep:100,bearingStep:15,pitchStep:10};class Fd{constructor(o){this._tr=new tc(o);const d=jr;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let d=0,y=0,v=0,T=0,R=0;switch(o.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:o.shiftKey?y=-1:(o.preventDefault(),T=-1);break;case 39:o.shiftKey?y=1:(o.preventDefault(),T=1);break;case 38:o.shiftKey?v=1:(o.preventDefault(),R=-1);break;case 40:o.shiftKey?v=-1:(o.preventDefault(),R=1);break;default:return}return this._rotationDisabled&&(y=0,v=0),{cameraAnimation:k=>{const L=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:jw,zoom:d?Math.round(L.zoom)+d*(o.shiftKey?2:1):L.zoom,bearing:L.bearing+y*this._bearingStep,pitch:L.pitch+v*this._pitchStep,offset:[-T*this._panStep,-R*this._panStep],center:L.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function jw(w){return w*(2-w)}const zd=4.000244140625,Bw=1/450;class r0{constructor(o,d){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=o,this._tr=new tc(o),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bw}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(o){return!!this._map.cooperativeGestures.isEnabled()&&!(o.ctrlKey||this._map.cooperativeGestures.isBypassed(o))}wheel(o){if(!this.isEnabled())return;if(this._shouldBePrevented(o))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",o);let d=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const y=P.now(),v=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,d!==0&&d%zd==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(v*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),o.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=o,this._delta-=d,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=A.mousePos(this._map.getCanvas(),o),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(s.S.convert(y.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const k=o.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>zd?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&L!==0&&(L=1/L);const q=typeof this._targetZoom!="number"?o.scale:s.af(this._targetZoom);this._targetZoom=o.getConstrained(o.getCameraLngLat(),s.ak(q*L)).zoom,this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom!="number"?o.zoom:this._targetZoom,y=this._startZoom,v=this._easing;let T,R=!1;if(this._type==="wheel"&&y&&v){const k=P.now()-this._lastWheelEventTime,L=Math.min((k+5)/200,1),q=v(L);T=s.C.number(y,d,q),L<1?this._frameId||(this._frameId=!0):R=!0}else T=d,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!R,zoomDelta:T-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let d=s.co;if(this._prevEase){const y=this._prevEase,v=(P.now()-y.start)/y.duration,T=y.easing(v+.01)-y.easing(v),R=.27/Math.sqrt(T*T+1e-4)*.01,k=Math.sqrt(.0729-R*R);d=s.cm(R,k,.25,1)}return this._prevEase={start:P.now(),duration:o,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Tm{constructor(o,d){this._clickZoom=o,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Sm{constructor(o){this._tr=new tc(o),this.reset()}reset(){this._active=!1}dblclick(o,d){return o.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class n0{constructor(){this._tap=new io({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,d,y){if(!this._swipePoint)if(this._tapTime){const v=d[0],T=o.timeStamp-this._tapTime<500,R=this._tapPoint.dist(v)<30;T&&R?y.length>0&&(this._swipePoint=v,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(o,d,y)}touchmove(o,d,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const v=d[0],T=v.y-this._swipePoint.y;return this._swipePoint=v,o.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(o,d,y)}touchend(o,d,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const v=this._tap.touchend(o,d,y);v&&(this._tapTime=o.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class i0{constructor(o,d,y){this._el=o,this._mousePan=d,this._touchPan=y}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Cm{constructor(o,d,y,v){this._pitchWithRotate=o.pitchWithRotate,this._rollEnabled=o.rollEnabled,this._mouseRotate=d,this._mousePitch=y,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class o0{constructor(o,d,y,v){this._el=o,this._touchZoom=d,this._touchRotate=y,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class s0{constructor(o,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=o,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",o);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=d,this._container.appendChild(v);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=y,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(o){return o[this._bypassKey]}notifyGestureBlocked(o,d){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:o,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Uo=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class yn extends s.l{}function sc(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Pm{constructor(o,d){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,T)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const R=v.type==="renderFrame"?void 0:v,k={needsRenderFrame:!1},L={},q={};for(const{handlerName:H,handler:re,allowed:le}of this._handlers){if(!re.isEnabled())continue;let _e;if(this._blockedByActive(q,le,H))re.reset();else if(re[T||v.type]){if(s.cp(v,T||v.type)){const ge=A.mousePos(this._map.getCanvas(),v);_e=re[T||v.type](v,ge)}else if(s.cq(v,T||v.type)){const ge=this._getMapTouches(v.touches),be=A.touchPos(this._map.getCanvas(),ge);_e=re[T||v.type](v,be,ge)}else s.cr(T||v.type)||(_e=re[T||v.type](v));this.mergeHandlerResult(k,L,_e,H,R),_e&&_e.needsRenderFrame&&this._triggerRenderFrame()}(_e||re.isActive())&&(q[H]=re)}const V={};for(const H in this._previousActiveHandlers)q[H]||(V[H]=R);this._previousActiveHandlers=q,(Object.keys(V).length||sc(k))&&(this._changes.push([k,L,V]),this._triggerRenderFrame()),(Object.keys(q).length||sc(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=k;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new X_(o),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,T,R]of this._listeners)A.addEventListener(v,T,v===document?this.handleWindowEvent:this.handleEvent,R)}destroy(){for(const[o,d,y]of this._listeners)A.removeEventListener(o,d,o===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(o){const d=this._map,y=d.getCanvasContainer();this._add("mapEvent",new Q_(d,o));const v=d.boxZoom=new xm(d,o);this._add("boxZoom",v),o.interactive&&o.boxZoom&&v.enable();const T=d.cooperativeGestures=new s0(d,o.cooperativeGestures);this._add("cooperativeGestures",T),o.cooperativeGestures&&T.enable();const R=new qo(d),k=new Sm(d);d.doubleClickZoom=new Tm(k,R),this._add("tapZoom",R),this._add("clickZoom",k),o.interactive&&o.doubleClickZoom&&d.doubleClickZoom.enable();const L=new n0;this._add("tapDragZoom",L);const q=d.touchPitch=new Nd(d);this._add("touchPitch",q),o.interactive&&o.touchPitch&&d.touchPitch.enable(o.touchPitch);const V=()=>d.project(d.getCenter()),Y=function({enable:Pe,clickTolerance:De,aroundCenter:Be=!0,minPixelCenterThreshold:Ae=100,rotateDegreesPerPixelMoved:Ge=.8},st){const Ye=new Du({checkCorrectEvent:Qe=>A.mouseButton(Qe)===0&&Qe.ctrlKey||A.mouseButton(Qe)===2&&!Qe.ctrlKey});return new nc({clickTolerance:De,move:(Qe,ot)=>{const xt=st();if(Be&&Math.abs(xt.y-Qe.y)>Ae)return{bearingDelta:s.cn(new s.P(Qe.x,ot.y),ot,xt)};let Et=(ot.x-Qe.x)*Ge;return Be&&ot.y<xt.y&&(Et=-Et),{bearingDelta:Et}},moveStateManager:Ye,enable:Pe,assignEvents:Nu})}(o,V),H=function({enable:Pe,clickTolerance:De,pitchDegreesPerPixelMoved:Be=-.5}){const Ae=new Du({checkCorrectEvent:Ge=>A.mouseButton(Ge)===0&&Ge.ctrlKey||A.mouseButton(Ge)===2});return new nc({clickTolerance:De,move:(Ge,st)=>({pitchDelta:(st.y-Ge.y)*Be}),moveStateManager:Ae,enable:Pe,assignEvents:Nu})}(o),re=function({enable:Pe,clickTolerance:De,rollDegreesPerPixelMoved:Be=.3},Ae){const Ge=new Du({checkCorrectEvent:st=>A.mouseButton(st)===2&&st.ctrlKey});return new nc({clickTolerance:De,move:(st,Ye)=>{const Qe=Ae();let ot=(Ye.x-st.x)*Be;return Ye.y<Qe.y&&(ot=-ot),{rollDelta:ot}},moveStateManager:Ge,enable:Pe,assignEvents:Nu})}(o,V);d.dragRotate=new Cm(o,Y,H,re),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",H,["mouseRotate","mouseRoll"]),this._add("mouseRoll",re,["mousePitch"]),o.interactive&&o.dragRotate&&d.dragRotate.enable();const le=function({enable:Pe,clickTolerance:De}){const Be=new Du({checkCorrectEvent:Ae=>A.mouseButton(Ae)===0&&!Ae.ctrlKey});return new nc({clickTolerance:De,move:(Ae,Ge)=>({around:Ge,panDelta:Ge.sub(Ae)}),activateOnStart:!0,moveStateManager:Be,enable:Pe,assignEvents:Nu})}(o),_e=new Fu(o,d);d.dragPan=new i0(y,le,_e),this._add("mousePan",le),this._add("touchPan",_e,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&d.dragPan.enable(o.dragPan);const ge=new oc,be=new Dd;d.touchZoomRotate=new o0(y,be,ge,L),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",be,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&d.touchZoomRotate.enable(o.touchZoomRotate);const Se=d.scrollZoom=new r0(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Se,["mousePan"]),o.interactive&&o.scrollZoom&&d.scrollZoom.enable(o.scrollZoom);const Re=d.keyboard=new Fd(d);this._add("keyboard",Re),o.interactive&&o.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new e0(d))}_add(o,d,y){this._handlers.push({handlerName:o,handler:d,allowed:y}),this._handlersById[o]=d}stop(o){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Uo(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,d,y){for(const v in o)if(v!==y&&(!d||d.indexOf(v)<0))return!0;return!1}_getMapTouches(o){const d=[];for(const y of o)this._el.contains(y.target)&&d.push(y);return d}mergeHandlerResult(o,d,y,v,T){if(!y)return;s.e(o,y);const R={handlerName:v,originalEvent:y.originalEvent||T};y.zoomDelta!==void 0&&(d.zoom=R),y.panDelta!==void 0&&(d.drag=R),y.rollDelta!==void 0&&(d.roll=R),y.pitchDelta!==void 0&&(d.pitch=R),y.bearingDelta!==void 0&&(d.rotate=R)}_applyChanges(){const o={},d={},y={};for(const[v,T,R]of this._changes)v.panDelta&&(o.panDelta=(o.panDelta||new s.P(0,0))._add(v.panDelta)),v.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(o.rollDelta=(o.rollDelta||0)+v.rollDelta),v.around!==void 0&&(o.around=v.around),v.pinchAround!==void 0&&(o.pinchAround=v.pinchAround),v.noInertia&&(o.noInertia=v.noInertia),s.e(d,T),s.e(y,R);this._updateMapTransform(o,d,y),this._changes=[]}_updateMapTransform(o,d,y){const v=this._map,T=v._getTransformForUpdate(),R=v.terrain;if(!(sc(o)||R&&this._terrainMovement))return this._fireEvents(d,y,!0);v._stop(!0);let{panDelta:k,zoomDelta:L,bearingDelta:q,pitchDelta:V,rollDelta:Y,around:H,pinchAround:re}=o;re!==void 0&&(H=re),H=H||v.transform.centerPoint,R&&!T.isPointOnMapSurface(H)&&(H=T.centerPoint);const le={panDelta:k,zoomDelta:L,rollDelta:Y,pitchDelta:V,bearingDelta:q,around:H};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(H)&&(H=T.centerPoint);const _e=H.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(k?H.sub(k):H);R?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(le,T),this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?T.setCenter(T.screenPointToLocation(T.centerPoint.sub(k))):this._map.cameraHelper.handleMapControlsPan(le,T,_e):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(le,T,_e))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(le,T),this._map.cameraHelper.handleMapControlsPan(le,T,_e)),v._applyUpdatedTransform(T),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(d,y,!0)}_fireEvents(o,d,y){const v=Uo(this._eventsInProgress),T=Uo(o),R={};for(const Y in o){const{originalEvent:H}=o[Y];this._eventsInProgress[Y]||(R[`${Y}start`]=H),this._eventsInProgress[Y]=o[Y]}!v&&T&&this._fireEvent("movestart",T.originalEvent);for(const Y in R)this._fireEvent(Y,R[Y]);T&&this._fireEvent("move",T.originalEvent);for(const Y in o){const{originalEvent:H}=o[Y];this._fireEvent(Y,H)}const k={};let L;for(const Y in this._eventsInProgress){const{handlerName:H,originalEvent:re}=this._eventsInProgress[Y];this._handlersById[H].isActive()||(delete this._eventsInProgress[Y],L=d[H]||re,k[`${Y}end`]=L)}for(const Y in k)this._fireEvent(Y,k[Y]);const q=Uo(this._eventsInProgress),V=(v||T)&&!q;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Y=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Y.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Y)}if(y&&V){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=re=>re!==0&&-this._bearingSnap<re&&re<this._bearingSnap;!Y||!Y.essential&&P.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:L})),H(this._map.getBearing())&&this._map.resetNorth()):(H(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:L})),this._updatingCamera=!1}}_fireEvent(o,d){this._map.fire(new s.l(o,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new yn("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class a0 extends s.E{constructor(o,d,y){super(),this._renderFrameCallback=()=>{const v=Math.min((P.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=y.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(o,d){o.apply(this.transform),this.transform=o,this.cameraHelper=d}getCenter(){return new s.S(this.transform.center.lng,this.transform.center.lat)}setCenter(o,d){return this.jumpTo({center:o},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(o,d){return this.jumpTo({elevation:o},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(o){this._centerClampedToGround=o}panBy(o,d,y){return o=s.P.convert(o).mult(-1),this.panTo(this.transform.center,s.e({offset:o},d),y)}panTo(o,d,y){return this.easeTo(s.e({center:o},d),y)}getZoom(){return this.transform.zoom}setZoom(o,d){return this.jumpTo({zoom:o},d),this}zoomTo(o,d,y){return this.easeTo(s.e({zoom:o},d),y)}zoomIn(o,d){return this.zoomTo(this.getZoom()+1,o,d),this}zoomOut(o,d){return this.zoomTo(this.getZoom()-1,o,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(o,d){return o!=this.transform.fov&&(this.transform.setFov(o),this.fire(new s.l("movestart",d)).fire(new s.l("move",d)).fire(new s.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(o,d){return this.jumpTo({bearing:o},d),this}getPadding(){return this.transform.padding}setPadding(o,d){return this.jumpTo({padding:o},d),this}rotateTo(o,d,y){return this.easeTo(s.e({bearing:o},d),y)}resetNorth(o,d){return this.rotateTo(0,s.e({duration:1e3},o),d),this}resetNorthPitch(o,d){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},o),d),this}snapToNorth(o,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,d):this}getPitch(){return this.transform.pitch}setPitch(o,d){return this.jumpTo({pitch:o},d),this}getRoll(){return this.transform.roll}setRoll(o,d){return this.jumpTo({roll:o},d),this}cameraForBounds(o,d){o=lt.convert(o).adjustAntiMeridian();const y=d&&d.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),y,d)}_cameraForBoxAndBearing(o,d,y,v){const T={top:0,bottom:0,right:0,left:0};if(typeof(v=s.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const q=v.padding;v.padding={top:q,bottom:q,right:q,left:q}}const R=s.e(T,v.padding);v.padding=R;const k=this.transform,L=new lt(o,d);return this.cameraHelper.cameraForBoxAndBearing(v,R,L,y,k)}fitBounds(o,d,y){return this._fitInternal(this.cameraForBounds(o,d),d,y)}fitScreenCoordinates(o,d,y,v,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(o)),this.transform.screenPointToLocation(s.P.convert(d)),y,v),v,T)}_fitInternal(o,d,y){return o?(delete(d=s.e(o,d)).padding,d.linear?this.easeTo(d,y):this.flyTo(d,y)):this}jumpTo(o,d){this.stop();const y=this._getTransformForUpdate();let v=!1,T=!1,R=!1;const k=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,o);const L=y.zoom!==k;return"elevation"in o&&y.elevation!==+o.elevation&&y.setElevation(+o.elevation),"bearing"in o&&y.bearing!==+o.bearing&&(v=!0,y.setBearing(+o.bearing)),"pitch"in o&&y.pitch!==+o.pitch&&(T=!0,y.setPitch(+o.pitch)),"roll"in o&&y.roll!==+o.roll&&(R=!0,y.setRoll(+o.roll)),o.padding==null||y.isPaddingEqual(o.padding)||y.setPadding(o.padding),this._applyUpdatedTransform(y),this.fire(new s.l("movestart",d)).fire(new s.l("move",d)),L&&this.fire(new s.l("zoomstart",d)).fire(new s.l("zoom",d)).fire(new s.l("zoomend",d)),v&&this.fire(new s.l("rotatestart",d)).fire(new s.l("rotate",d)).fire(new s.l("rotateend",d)),T&&this.fire(new s.l("pitchstart",d)).fire(new s.l("pitch",d)).fire(new s.l("pitchend",d)),R&&this.fire(new s.l("rollstart",d)).fire(new s.l("roll",d)).fire(new s.l("rollend",d)),this.fire(new s.l("moveend",d))}calculateCameraOptionsFromTo(o,d,y,v=0){const T=s.a1.fromLngLat(o,d),R=s.a1.fromLngLat(y,v),k=R.x-T.x,L=R.y-T.y,q=R.z-T.z,V=Math.hypot(k,L,q);if(V===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(k,L),H=s.ak(this.transform.cameraToCenterDistance/V/this.transform.tileSize),re=180*Math.atan2(k,-L)/Math.PI;let le=180*Math.acos(Y/V)/Math.PI;return le=q<0?90-le:90+le,{center:R.toLngLat(),elevation:v,zoom:H,pitch:le,bearing:re}}calculateCameraOptionsFromCameraLngLatAltRotation(o,d,y,v,T){const R=this.transform.calculateCenterFromCameraLngLatAlt(o,d,y,v);return{center:R.center,elevation:R.elevation,zoom:R.zoom,bearing:y,pitch:v,roll:T}}easeTo(o,d){this._stop(!1,o.easeId),((o=s.e({offset:[0,0],duration:500,easing:s.co},o)).animate===!1||!o.essential&&P.prefersReducedMotion)&&(o.duration=0);const y=this._getTransformForUpdate(),v=this.getBearing(),T=y.pitch,R=y.roll,k="bearing"in o?this._normalizeBearing(o.bearing,v):v,L="pitch"in o?+o.pitch:T,q="roll"in o?this._normalizeBearing(o.roll,R):R,V="padding"in o?o.padding:y.padding,Y=s.P.convert(o.offset);let H,re;o.around&&(H=s.S.convert(o.around),re=y.locationToScreenPoint(H));const le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},_e=this.cameraHelper.handleEaseTo(y,{bearing:k,pitch:L,roll:q,padding:V,around:H,aroundPoint:re,offsetAsPoint:Y,offset:o.offset,zoom:o.zoom,center:o.center});return this._rotating=this._rotating||v!==k,this._pitching=this._pitching||L!==T,this._rolling=this._rolling||q!==R,this._padding=!y.isPaddingEqual(V),this._zooming=this._zooming||_e.isZooming,this._easeId=o.easeId,this._prepareEase(d,o.noMoveStart,le),this.terrain&&this._prepareElevation(_e.elevationCenter),this._ease(ge=>{_e.easeFunc(ge),this.terrain&&!o.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},ge=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(d,ge)},o),this}_prepareEase(o,d,y={}){this._moving=!0,d||y.moving||this.fire(new s.l("movestart",o)),this._zooming&&!y.zooming&&this.fire(new s.l("zoomstart",o)),this._rotating&&!y.rotating&&this.fire(new s.l("rotatestart",o)),this._pitching&&!y.pitching&&this.fire(new s.l("pitchstart",o)),this._rolling&&!y.rolling&&this.fire(new s.l("rollstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&d!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(y-(d-(y*o+this._elevationStart))/(1-o)),this._elevationTarget=d}this.transform.setElevation(s.C.number(this._elevationStart,this._elevationTarget,o))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(o){if(!this.terrain&&o.elevation>=0&&o.pitch<=90)return{};const d=o.getCameraLngLat(),y=o.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(d,o.zoom):0;if(y<v){const T=this.calculateCameraOptionsFromTo(d,v,o.center,o.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(o){const d=[];if(d.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&d.push(v=>this.transformCameraUpdate(v)),!d.length)return;const y=o.clone();for(const v of d){const T=y.clone(),{center:R,zoom:k,roll:L,pitch:q,bearing:V,elevation:Y}=v(T);R&&T.setCenter(R),Y!==void 0&&T.setElevation(Y),k!==void 0&&T.setZoom(k),L!==void 0&&T.setRoll(L),q!==void 0&&T.setPitch(q),V!==void 0&&T.setBearing(V),y.apply(T)}this.transform.apply(y)}_fireMoveEvents(o){this.fire(new s.l("move",o)),this._zooming&&this.fire(new s.l("zoom",o)),this._rotating&&this.fire(new s.l("rotate",o)),this._pitching&&this.fire(new s.l("pitch",o)),this._rolling&&this.fire(new s.l("roll",o))}_afterEase(o,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const y=this._zooming,v=this._rotating,T=this._pitching,R=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new s.l("zoomend",o)),v&&this.fire(new s.l("rotateend",o)),T&&this.fire(new s.l("pitchend",o)),R&&this.fire(new s.l("rollend",o)),this.fire(new s.l("moveend",o))}flyTo(o,d){if(!o.essential&&P.prefersReducedMotion){const ot=s.Q(o,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(ot,d)}this.stop(),o=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.co},o);const y=this._getTransformForUpdate(),v=y.bearing,T=y.pitch,R=y.roll,k=y.padding,L="bearing"in o?this._normalizeBearing(o.bearing,v):v,q="pitch"in o?+o.pitch:T,V="roll"in o?this._normalizeBearing(o.roll,R):R,Y="padding"in o?o.padding:y.padding,H=s.P.convert(o.offset);let re=y.centerPoint.add(H);const le=y.screenPointToLocation(re),_e=this.cameraHelper.handleFlyTo(y,{bearing:L,pitch:q,roll:V,padding:Y,locationAtOffset:le,offsetAsPoint:H,center:o.center,minZoom:o.minZoom,zoom:o.zoom});let ge=o.curve;const be=Math.max(y.width,y.height),Se=be/_e.scaleOfZoom,Re=_e.pixelPathLength;typeof _e.scaleOfMinZoom=="number"&&(ge=Math.sqrt(be/_e.scaleOfMinZoom/Re*2));const Pe=ge*ge;function De(ot){const xt=(Se*Se-be*be+(ot?-1:1)*Pe*Pe*Re*Re)/(2*(ot?Se:be)*Pe*Re);return Math.log(Math.sqrt(xt*xt+1)-xt)}function Be(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Ae(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const Ge=De(!1);let st=function(ot){return Ae(Ge)/Ae(Ge+ge*ot)},Ye=function(ot){return be*((Ae(Ge)*(Be(xt=Ge+ge*ot)/Ae(xt))-Be(Ge))/Pe)/Re;var xt},Qe=(De(!0)-Ge)/ge;if(Math.abs(Re)<2e-6||!isFinite(Qe)){if(Math.abs(be-Se)<1e-6)return this.easeTo(o,d);const ot=Se<be?-1:1;Qe=Math.abs(Math.log(Se/be))/ge,Ye=()=>0,st=xt=>Math.exp(ot*ge*xt)}return o.duration="duration"in o?+o.duration:1e3*Qe/("screenSpeed"in o?+o.screenSpeed/ge:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=v!==L,this._pitching=q!==T,this._rolling=V!==R,this._padding=!y.isPaddingEqual(Y),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(_e.targetCenter),this._ease(ot=>{const xt=ot*Qe,Et=1/st(xt),ft=Ye(xt);this._rotating&&y.setBearing(s.C.number(v,L,ot)),this._pitching&&y.setPitch(s.C.number(T,q,ot)),this._rolling&&y.setRoll(s.C.number(R,V,ot)),this._padding&&(y.interpolatePadding(k,Y,ot),re=y.centerPoint.add(H)),_e.easeFunc(ot,Et,ft,re),this.terrain&&!o.freezeElevation&&this._updateElevation(ot),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},()=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,d){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,d)}return o||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(o,d,y){y.animate===!1||y.duration===0?(o(1),d()):(this._easeStart=P.now(),this._easeOptions=y,this._onEaseFrame=o,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,d){o=s.aO(o,-180,180);const y=Math.abs(o-d);return Math.abs(o-360-d)<y&&(o-=360),Math.abs(o+360-d)<y&&(o+=360),o}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(s.S.convert(o),this.transform.tileZoom):null}}const Am={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Rm{constructor(o=Am){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,d){const y=this._map._getUIString(`AttributionControl.${d}`);o.title=y,o.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const d=this._map.style.sourceCaches;for(const v in d){const T=d[v];if(T.used||T.usedForTerrain){const R=T.getSource();R.attribution&&o.indexOf(R.attribution)<0&&o.push(R.attribution)}}o=o.filter(v=>String(v).trim()),o.sort((v,T)=>v.length-T.length),o=o.filter((v,T)=>{for(let R=T+1;R<o.length;R++)if(o[R].indexOf(v)>=0)return!1;return!0});const y=o.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,o.length?(this._innerContainer.innerHTML=A.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class l0{constructor(o={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const y=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const d=A.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class xs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const d=++this._id;return this._queue.push({callback:o,id:d,cancelled:!1}),d}remove(o){const d=this._currentlyRunning,y=d?this._queue.concat(d):this._queue;for(const v of y)if(v.id===o)return void(v.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const y of d)if(!y.cancelled&&(y.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var jd=s.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Gt extends s.E{constructor(o){super(),this._lastTilesetChange=P.now(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=o._source.tileSize*2**this.deltaZoom,o.usedForTerrain=!0,o.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,d){this.sourceCache.update(o,d),this._renderableTilesKeys=[];const y={};for(const v of $e(o,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))y[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),s.bY(v.terrainRttPosMatrix32f,0,s.$,s.$,0,0,1),this._tiles[v.key]=new Yr(v,this.tileSize),this._lastTilesetChange=P.now());for(const v in this._tiles)y[v]||delete this._tiles[v]}freeRtt(o){for(const d in this._tiles){const y=this._tiles[d];(!o||y.tileID.equals(o)||y.tileID.isChildOf(o)||o.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o,d){return d?this._getTerrainCoordsForTileRanges(o,d):this._getTerrainCoordsForRegularTile(o)}_getTerrainCoordsForRegularTile(o){const d={};for(const y of this._renderableTilesKeys){const v=this._tiles[y].tileID,T=o.clone(),R=s.ba();if(v.canonical.equals(o.canonical))s.bY(R,0,s.$,s.$,0,0,1);else if(v.canonical.isChildOf(o.canonical)){const k=v.canonical.z-o.canonical.z,L=v.canonical.x-(v.canonical.x>>k<<k),q=v.canonical.y-(v.canonical.y>>k<<k),V=s.$>>k;s.bY(R,0,V,V,0,0,1),s.M(R,R,[-L*V,-q*V,0])}else{if(!o.canonical.isChildOf(v.canonical))continue;{const k=o.canonical.z-v.canonical.z,L=o.canonical.x-(o.canonical.x>>k<<k),q=o.canonical.y-(o.canonical.y>>k<<k),V=s.$>>k;s.bY(R,0,s.$,s.$,0,0,1),s.M(R,R,[L*V,q*V,0]),s.N(R,R,[1/2**k,1/2**k,0])}}T.terrainRttPosMatrix32f=new Float32Array(R),d[y]=T}return d}_getTerrainCoordsForTileRanges(o,d){const y={};for(const v of this._renderableTilesKeys){const T=this._tiles[v].tileID;if(!this._isWithinTileRanges(T,d))continue;const R=o.clone(),k=s.ba();if(T.canonical.z===o.canonical.z){const L=o.canonical.x-T.canonical.x,q=o.canonical.y-T.canonical.y;s.bY(k,0,s.$,s.$,0,0,1),s.M(k,k,[L*s.$,q*s.$,0])}else if(T.canonical.z>o.canonical.z){const L=T.canonical.z-o.canonical.z,q=T.canonical.x-(T.canonical.x>>L<<L),V=T.canonical.y-(T.canonical.y>>L<<L),Y=o.canonical.x-(T.canonical.x>>L),H=o.canonical.y-(T.canonical.y>>L),re=s.$>>L;s.bY(k,0,re,re,0,0,1),s.M(k,k,[-q*re+Y*s.$,-V*re+H*s.$,0])}else{const L=o.canonical.z-T.canonical.z,q=o.canonical.x-(o.canonical.x>>L<<L),V=o.canonical.y-(o.canonical.y>>L<<L),Y=(o.canonical.x>>L)-T.canonical.x,H=(o.canonical.y>>L)-T.canonical.y,re=s.$<<L;s.bY(k,0,re,re,0,0,1),s.M(k,k,[q*s.$+Y*re,V*s.$+H*re,0])}R.terrainRttPosMatrix32f=new Float32Array(k),y[v]=R}return y}getSourceTile(o,d){const y=this.sourceCache._source;let v=o.overscaledZ-this.deltaZoom;if(v>y.maxzoom&&(v=y.maxzoom),v<y.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(v).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!T||!T.dem)&&d)for(;v>=y.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(o.scaledTo(v--).key);return T}anyTilesAfterTime(o=Date.now()){return this._lastTilesetChange>=o}_isWithinTileRanges(o,d){return d[o.canonical.z]&&o.canonical.x>=d[o.canonical.z].minTileX&&o.canonical.x<=d[o.canonical.z].maxTileX&&o.canonical.y>=d[o.canonical.z].minTileY&&o.canonical.y<=d[o.canonical.z].maxTileY}}class ir{constructor(o,d,y){this._meshCache={},this.painter=o,this.sourceCache=new Gt(d),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,d,y,v=s.$){var T;if(!(d>=0&&d<v&&y>=0&&y<v))return 0;const R=this.getTerrainData(o),k=(T=R.tile)===null||T===void 0?void 0:T.dem;if(!k)return 0;const L=s.cs([],[d/v*s.$,y/v*s.$],R.u_terrain_matrix),q=[L[0]*k.dim,L[1]*k.dim],V=Math.floor(q[0]),Y=Math.floor(q[1]),H=q[0]-V,re=q[1]-Y;return k.get(V,Y)*(1-H)*(1-re)+k.get(V+1,Y)*H*(1-re)+k.get(V,Y+1)*(1-H)*re+k.get(V+1,Y+1)*H*re}getElevationForLngLatZoom(o,d){if(!s.ct(d,o.wrap()))return 0;const{tileID:y,mercatorX:v,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(o,d);return this.getElevation(y,v%s.$,T%s.$,s.$)}getElevation(o,d,y,v=s.$){return this.getDEMElevation(o,d,y,v)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const v=this.painter.context,T=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(v,T,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(v,new s.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ag([])}const d=this.sourceCache.getSourceTile(o,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const v=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new s.T(v,d.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),d.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const y=d&&d+d.tileID.key+o.key;if(y&&!this._demMatrixCache[y]){const v=this.sourceCache.sourceCache._source.maxzoom;let T=o.canonical.z-d.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=v?T=o.canonical.z-v:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const R=o.canonical.x-(o.canonical.x>>T<<T),k=o.canonical.y-(o.canonical.y>>T<<T),L=s.cu(new Float64Array(16),[1/(s.$<<T),1/(s.$<<T),0]);s.M(L,L,[R*s.$,k*s.$,0]),this._demMatrixCache[o.key]={matrix:L,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(o){const d=this.painter,y=d.width/devicePixelRatio,v=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(d.context,{width:y,height:v,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(d.context,{width:y,height:v,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(y,v,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,y,v))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,R=0;T<this._coordsTextureSize;T++)for(let k=0;k<this._coordsTextureSize;k++,R+=4)d[R+0]=255&k,d[R+1]=255&T,d[R+2]=k>>8<<4|T>>8,d[R+3]=0;const y=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),v=new s.T(o,y,o.gl.RGBA,{premultiply:!1});return v.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),y=this.painter.context,v=y.gl,T=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),R=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(T,k-R-1,1,1,v.RGBA,v.UNSIGNED_BYTE,d),y.bindFramebuffer.set(null);const L=d[0]+(d[2]>>4<<8),q=d[1]+((15&d[2])<<8),V=this.coordsIndex[255-d[3]],Y=V&&this.sourceCache.getTileByID(V);if(!Y)return null;const H=this._coordsTextureSize,re=(1<<Y.tileID.canonical.z)*H;return new s.a1((Y.tileID.canonical.x*H+L)/re+Y.tileID.wrap,(Y.tileID.canonical.y*H+q)/re,this.getElevation(Y.tileID,L,q,H))}depthAtPoint(o){const d=new Uint8Array(4),y=this.painter.context,v=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,d),y.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(o){var d;const y=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,v=y&&o.canonical.y===0,T=y&&o.canonical.y===(1<<o.canonical.z)-1,R=`m_${v?"n":""}_${T?"s":""}`;if(this._meshCache[R])return this._meshCache[R];const k=this.painter.context,L=new s.cv,q=new s.aN,V=this.meshSize,Y=s.$/V,H=V*V;for(let Ae=0;Ae<=V;Ae++)for(let Ge=0;Ge<=V;Ge++)L.emplaceBack(Ge*Y,Ae*Y,0);for(let Ae=0;Ae<H;Ae+=V+1)for(let Ge=0;Ge<V;Ge++)q.emplaceBack(Ge+Ae,V+Ge+Ae+1,V+Ge+Ae+2),q.emplaceBack(Ge+Ae,V+Ge+Ae+2,Ge+Ae+1);const re=L.length,le=re+(V+1),_e=(V+1)*V,ge=v?s.bh:0,be=v?0:1,Se=T?s.bi:s.$,Re=T?0:1;for(let Ae=0;Ae<=V;Ae++)L.emplaceBack(Ae*Y,ge,be);for(let Ae=0;Ae<=V;Ae++)L.emplaceBack(Ae*Y,Se,Re);for(let Ae=0;Ae<V;Ae++)q.emplaceBack(_e+Ae,le+Ae,le+Ae+1),q.emplaceBack(_e+Ae,le+Ae+1,_e+Ae+1),q.emplaceBack(0+Ae,re+Ae+1,re+Ae),q.emplaceBack(0+Ae,0+Ae+1,re+Ae+1);const Pe=L.length,De=Pe+2*(V+1);for(const Ae of[0,1])for(let Ge=0;Ge<=V;Ge++)for(const st of[0,1])L.emplaceBack(Ae*s.$,Ge*Y,st);for(let Ae=0;Ae<2*V;Ae+=2)q.emplaceBack(Pe+Ae,Pe+Ae+1,Pe+Ae+3),q.emplaceBack(Pe+Ae,Pe+Ae+3,Pe+Ae+2),q.emplaceBack(De+Ae,De+Ae+3,De+Ae+1),q.emplaceBack(De+Ae,De+Ae+2,De+Ae+3);const Be=new Ua(k.createVertexBuffer(L,jd.members),k.createIndexBuffer(q),s.aM.simpleSegment(0,0,L.length,q.length));return this._meshCache[R]=Be,Be}getMeshFrameDelta(o){return 2*Math.PI*s.bu/Math.pow(2,Math.max(o,0))/5}getMinTileElevationForLngLatZoom(o,d){var y;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(o,d);return(y=this.getMinMaxElevation(v).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(o){const d=this.getTerrainData(o).tile,y={minElevation:null,maxElevation:null};return d&&d.dem&&(y.minElevation=d.dem.min*this.exaggeration,y.maxElevation=d.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(o,d){const y=s.a1.fromLngLat(o.wrap()),v=(1<<d)*s.$,T=y.x*v,R=y.y*v,k=Math.floor(T/s.$),L=Math.floor(R/s.$);return{tileID:new s.Z(d,0,d,k,L),mercatorX:T,mercatorY:R}}}class Bd{constructor(o,d,y){this._context=o,this._size=d,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(y.texture),{id:o,fbo:d,texture:y,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>o.id!==d),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const fa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class qd{constructor(o,d){this.painter=o,this.terrain=d,this.pool=new Bd(o.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(y=>!o._layers[y].isHidden(d)),this._coordsAscending={};for(const y in o.sourceCaches){this._coordsAscending[y]={};const v=o.sourceCaches[y].getVisibleCoordinates(),T=o.sourceCaches[y].getSource(),R=T instanceof wr?T.terrainTileRanges:null;for(const k of v){const L=this.terrain.sourceCache.getTerrainCoords(k,R);for(const q in L)this._coordsAscending[y][q]||(this._coordsAscending[y][q]=[]),this._coordsAscending[y][q].push(L[q])}}this._coordsAscendingStr={};for(const y of o._order){const v=o._layers[y],T=v.source;if(fa[v.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const R in this._coordsAscending[T])this._coordsAscendingStr[T][R]=this._coordsAscending[T][R].map(k=>k.key).sort().join()}}for(const y of this._renderableTiles)for(const v in this._coordsAscendingStr){const T=this._coordsAscendingStr[v][y.tileID.key];T&&T!==y.rttCoords[v]&&(y.rtt=[])}}renderLayer(o,d){if(o.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),v=o.type,T=this.painter,R=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(fa[v]&&(this._prevType&&fa[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(o.id),!R))return!0;if(fa[this._prevType]||fa[v]&&R){this._prevType=v;const k=this._stacks.length-1,L=this._stacks[k]||[];for(const q of this._renderableTiles){if(this.pool.isFull()&&(kd(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(q),q.rtt[k]){const Y=this.pool.getObjectForId(q.rtt[k].id);if(Y.stamp===q.rtt[k].stamp){this.pool.useObject(Y);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),q.rtt[k]={id:V.id,stamp:V.stamp},T.context.bindFramebuffer.set(V.fbo.framebuffer),T.context.clear({color:s.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let Y=0;Y<L.length;Y++){const H=T.style._layers[L[Y]],re=H.source?this._coordsAscending[H.source][q.tileID.key]:[q.tileID];T.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),T._renderTileClippingMasks(H,re,!0),T.renderLayer(T,T.style.sourceCaches[H.source],H,re,y),H.source&&(q.rttCoords[H.source]=this._coordsAscendingStr[H.source][q.tileID.key])}}return kd(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),fa[v]}return!1}}const Ji={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},c0=p,Co={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Am,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},qw={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class zu{constructor(o,d,y=!1){this.mousedown=T=>{this.startMove(T,A.mousePos(this.element,T)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,A.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;const v=new zw;this._rotatePitchHandler=new nc({clickTolerance:3,move:(T,R)=>{const k=d.getBoundingClientRect(),L=new s.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:s.cn(new s.P(T.x,R.y),R,L),pitchDelta:y?-.5*(R.y-T.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=o,A.addEventListener(d,"mousedown",this.mousedown),A.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(d,"touchcancel",this.reset)}startMove(o,d){this._rotatePitchHandler.dragStart(o,d),A.disableDrag()}move(o,d){const y=this.map,{bearingDelta:v,pitchDelta:T}=this._rotatePitchHandler.dragMove(o,d)||{};v&&y.setBearing(y.getBearing()+v),T&&y.setPitch(y.getPitch()+T)}off(){const o=this.element;A.removeEventListener(o,"mousedown",this.mousedown),A.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let un;function Un(w,o,d,y=!1){if(y||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const v=new s.S(w.lng,w.lat);if(w=new s.S(w.lng,w.lat),o){const T=new s.S(w.lng-360,w.lat),R=new s.S(w.lng+360,w.lat),k=d.locationToScreenPoint(w).distSqr(o);d.locationToScreenPoint(T).distSqr(o)<k?w=T:d.locationToScreenPoint(R).distSqr(o)<k&&(w=R)}for(;Math.abs(w.lng-d.center.lng)>180;){const T=d.locationToScreenPoint(w);if(T.x>=0&&T.y>=0&&T.x<=d.width&&T.y<=d.height)break;w.lng>d.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(w))?w:v}const $d={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ac(w,o,d){const y=w.classList;for(const v in $d)y.remove(`maplibregl-${d}-anchor-${v}`);y.add(`maplibregl-${d}-anchor-${o}`)}class lc extends s.E{constructor(o){if(super(),this._onKeyPress=d=>{const y=d.code,v=d.charCode||d.keyCode;y!=="Space"&&y!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=d=>{const y=d.originalEvent.target,v=this._element;this._popup&&(y===v||v.contains(y))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(d?.type==="terrain"||d?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=Un(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${$d[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${v}`),P.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._subpixelPositioning=o&&o.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,this.setOpacity(o?.opacity,o?.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=s.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");const d=A.createNS("http://www.w3.org/2000/svg","svg"),y=41,v=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${y}px`),d.setAttributeNS(null,"width",`${v}px`),d.setAttributeNS(null,"viewBox",`0 0 ${v} ${y}`);const T=A.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const R=A.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill-rule","nonzero");const k=A.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const be of L){const Se=A.createNS("http://www.w3.org/2000/svg","ellipse");Se.setAttributeNS(null,"opacity","0.04"),Se.setAttributeNS(null,"cx","10.5"),Se.setAttributeNS(null,"cy","5.80029008"),Se.setAttributeNS(null,"rx",be.rx),Se.setAttributeNS(null,"ry",be.ry),k.appendChild(Se)}const q=A.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);const V=A.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild(V);const Y=A.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");const H=A.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(H);const re=A.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");const le=A.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _e=A.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");const ge=A.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),le.appendChild(_e),le.appendChild(ge),R.appendChild(k),R.appendChild(q),R.appendChild(Y),R.appendChild(re),R.appendChild(le),d.appendChild(R),d.setAttributeNS(null,"height",y*this._scale+"px"),d.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(d),this._offset=s.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),ac(this._element,this._anchor,"marker"),o&&o.className)for(const d of o.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(o){return this.remove(),this._map=o,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",o._getUIString("Marker.Title")),o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),o.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=s.S.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const v=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(o){return this._subpixelPositioning=o,this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var d,y;const v=(d=this._map)===null||d===void 0?void 0:d.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!v||T){const re=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==re&&(this._element.style.opacity=re))}if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const R=this._map,k=R.terrain.depthAtPoint(this._pos),L=R.terrain.getElevationForLngLatZoom(this._lngLat,R.transform.tileZoom);if(R.transform.lngLatToCameraDepth(this._lngLat,L)-k<.006)return void(this._element.style.opacity=this._opacity);const q=-this._offset.y/R.transform.pixelsPerMeter,V=Math.sin(R.getPitch()*Math.PI/180)*q,Y=R.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),H=R.transform.lngLatToCameraDepth(this._lngLat,L+V)-Y>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=s.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,d){return(this._opacity===void 0||o===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),o!==void 0&&(this._opacity=o),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const Im={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let cc=0,ol=!1;const ju={maxWidth:100,unit:"metric"};function Vd(w,o,d){const y=d&&d.maxWidth||100,v=w._container.clientHeight/2,T=w._container.clientWidth/2,R=w.unproject([T-y/2,v]),k=w.unproject([T+y/2,v]),L=Math.round(w.project(k).x-w.project(R).x),q=Math.min(y,L,w._container.clientWidth),V=R.distanceTo(k);if(d&&d.unit==="imperial"){const Y=3.2808*V;Y>5280?sl(o,q,Y/5280,w._getUIString("ScaleControl.Miles")):sl(o,q,Y,w._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?sl(o,q,V/1852,w._getUIString("ScaleControl.NauticalMiles")):V>=1e3?sl(o,q,V/1e3,w._getUIString("ScaleControl.Kilometers")):sl(o,q,V,w._getUIString("ScaleControl.Meters"))}function sl(w,o,d,y){const v=function(T){const R=Math.pow(10,`${Math.floor(T)}`.length-1);let k=T/R;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(L){const q=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*q)/q}(k),R*k}(d);w.style.width=o*(v/d)+"px",w.innerHTML=`${v}&nbsp;${y}`}const Mm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Om=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ud(w){if(w){if(typeof w=="number"){const o=Math.round(Math.abs(w)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,w),"top-left":new s.P(o,o),"top-right":new s.P(-o,o),bottom:new s.P(0,-w),"bottom-left":new s.P(o,-o),"bottom-right":new s.P(-o,-o),left:new s.P(w,0),right:new s.P(-w,0)}}if(w instanceof s.P||Array.isArray(w)){const o=s.P.convert(w);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:s.P.convert(w.center||[0,0]),top:s.P.convert(w.top||[0,0]),"top-left":s.P.convert(w["top-left"]||[0,0]),"top-right":s.P.convert(w["top-right"]||[0,0]),bottom:s.P.convert(w.bottom||[0,0]),"bottom-left":s.P.convert(w["bottom-left"]||[0,0]),"bottom-right":s.P.convert(w["bottom-right"]||[0,0]),left:s.P.convert(w.left||[0,0]),right:s.P.convert(w.right||[0,0])}}return Ud(new s.P(0,0))}const km=p;c.AJAXError=s.cz,c.Event=s.l,c.Evented=s.E,c.LngLat=s.S,c.MercatorCoordinate=s.a1,c.Point=s.P,c.addProtocol=s.cA,c.config=s.a,c.removeProtocol=s.cB,c.AttributionControl=Rm,c.BoxZoomHandler=xm,c.CanvasSource=Ir,c.CooperativeGesturesHandler=s0,c.DoubleClickZoomHandler=Tm,c.DragPanHandler=i0,c.DragRotateHandler=Cm,c.EdgeInsets=Ha,c.FullscreenControl=class extends s.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var o;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((o=d?.shadowRoot)===null||o===void 0)&&o.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=Bt,c.GeolocateControl=class extends s.E{constructor(w){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",o)),this._finish()}},this._updateCamera=o=>{const d=new s.S(o.coords.longitude,o.coords.latitude),y=o.coords.accuracy,v=this._map.getBearing(),T=s.e({bearing:v},this.options.fitBoundsOptions),R=lt.fromLngLat(d,y);this._map.fitBounds(R,T,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const d=new s.S(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&ol)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=o=>{if(this._map){if(o===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new lc({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new lc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{const y=d?.[0]instanceof ResizeObserverEntry;d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},Im,w)}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(o=!1){if(un!==void 0&&!o)return un;if(window.navigator.permissions===void 0)return un=!!window.navigator.geolocation,un;try{un=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{un=!!window.navigator.geolocation}return un})}().then(o=>this._finishSetupUI(o)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,cc=0,ol=!1}_isOutOfMapMaxBounds(w){const o=this._map.getMaxBounds(),d=w.coords;return o&&(d.longitude<o.getWest()||d.longitude>o.getEast()||d.latitude<o.getSouth()||d.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),o=w.getSouthEast(),d=w.getNorthEast(),y=o.distanceTo(d),v=Math.ceil(this._accuracy/(y/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cc--,ol=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),cc++,cc>1?(w={maximumAge:6e5,timeout:0},ol=!0):(w=this.options.positionOptions,ol=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const o=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(o!=="mercator"&&o?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=A.create("button","maplibregl-ctrl-globe",this._container),A.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=Ld,c.ImageSource=wr,c.KeyboardHandler=Fd,c.LngLatBounds=lt,c.LogoControl=l0,c.Map=class extends a0{constructor(w){var o,d;s.cw.mark(s.cx.create);const y=Object.assign(Object.assign(Object.assign({},Co),w),{canvasContextAttributes:Object.assign(Object.assign({},Co.canvasContextAttributes),w.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new gn,T=new zi;if(y.minZoom!==void 0&&v.setMinZoom(y.minZoom),y.maxZoom!==void 0&&v.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&v.setMinPitch(y.minPitch),y.maxPitch!==void 0&&v.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&v.setRenderWorldCopies(y.renderWorldCopies),super(v,T,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new xs,this._controls=[],this._mapId=s.a7(),this._contextLost=k=>{k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ji),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new te(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let k=!1;const L=nl(q=>{this._trackResize&&!this._removed&&(this.resize(q),this.redraw())},50);this._resizeObserver=new ResizeObserver(q=>{k?L(q):k=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Pm(this,y),this._hash=y.hash&&new Ld(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,s.e({},y.fitBoundsOptions,{duration:0}))));const R=typeof y.style=="string"||((d=(o=y.style)===null||o===void 0?void 0:o.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,R),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Rm(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new l0,y.logoPosition),this.on("style.load",()=>{if(R||this._resizeTransform(),this.transform.unmodified){const k=s.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}}),this.on("data",k=>{this._update(k.dataType==="style"),this.fire(new s.l(`${k.dataType}data`,k))}),this.on("dataloading",k=>{this.fire(new s.l(`${k.dataType}dataloading`,k))}),this.on("dataabort",k=>{this.fire(new s.l("sourcedataabort",k))})}_getMapId(){return this._mapId}setGlobalStateProperty(w,o){return this.style.setGlobalStateProperty(w,o),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,o){if(o===void 0&&(o=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=w.onAdd(this);this._controls.push(w);const y=this._controlPositions[o];return o.indexOf("bottom")!==-1?y.insertBefore(d,y.firstChild):y.appendChild(d),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(w);return o>-1&&this._controls.splice(o,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return $e(this.transform,w)}calculateCameraOptionsFromTo(w,o,d,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,o,d,y)}resize(w,o=!0){const[d,y]=this._containerDimensions(),v=this._getClampedPixelRatio(d,y);if(this._resizeCanvas(d,y,v),this.painter.resize(d,y,v),this.painter.overLimit()){const R=this.painter.context.gl;this._maxCanvasSize=[R.drawingBufferWidth,R.drawingBufferHeight];const k=this._getClampedPixelRatio(d,y);this._resizeCanvas(d,y,k),this.painter.resize(d,y,k)}this._resizeTransform(o);const T=!this._moving;return T&&(this.stop(),this.fire(new s.l("movestart",w)).fire(new s.l("move",w))),this.fire(new s.l("resize",w)),T&&this.fire(new s.l("moveend",w)),this}_resizeTransform(w=!0){var o;const[d,y]=this._containerDimensions();this.transform.resize(d,y,w),(o=this._requestedCameraState)===null||o===void 0||o.resize(d,y,w)}_getClampedPixelRatio(w,o){const{0:d,1:y}=this._maxCanvasSize,v=this.getPixelRatio(),T=w*v,R=o*v;return Math.min(T>d?d/T:1,R>y?y/R:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(lt.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(s.S.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(s.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,o,d){if(w==="mouseenter"||w==="mouseover"){let y=!1;return{layers:o,listener:d,delegates:{mousemove:T=>{const R=o.filter(L=>this.getLayer(L)),k=R.length!==0?this.queryRenderedFeatures(T.point,{layers:R}):[];k.length?y||(y=!0,d.call(this,new no(w,this,T.originalEvent,{features:k}))):y=!1},mouseout:()=>{y=!1}}}}if(w==="mouseleave"||w==="mouseout"){let y=!1;return{layers:o,listener:d,delegates:{mousemove:R=>{const k=o.filter(L=>this.getLayer(L));(k.length!==0?this.queryRenderedFeatures(R.point,{layers:k}):[]).length?y=!0:y&&(y=!1,d.call(this,new no(w,this,R.originalEvent)))},mouseout:R=>{y&&(y=!1,d.call(this,new no(w,this,R.originalEvent)))}}}}{const y=v=>{const T=o.filter(k=>this.getLayer(k)),R=T.length!==0?this.queryRenderedFeatures(v.point,{layers:T}):[];R.length&&(v.features=R,d.call(this,v),delete v.features)};return{layers:o,listener:d,delegates:{[w]:y}}}}_saveDelegatedListener(w,o){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(o)}_removeDelegatedListener(w,o,d){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const y=this._delegatedListeners[w];for(let v=0;v<y.length;v++){const T=y[v];if(T.listener===d&&T.layers.length===o.length&&T.layers.every(R=>o.includes(R))){for(const R in T.delegates)this.off(R,T.delegates[R]);return void y.splice(v,1)}}}on(w,o,d){if(d===void 0)return super.on(w,o);const y=typeof o=="string"?[o]:o,v=this._createDelegatedListener(w,y,d);this._saveDelegatedListener(w,v);for(const T in v.delegates)this.on(T,v.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(w,y,d)}}}once(w,o,d){if(d===void 0)return super.once(w,o);const y=typeof o=="string"?[o]:o,v=this._createDelegatedListener(w,y,d);for(const T in v.delegates){const R=v.delegates[T];v.delegates[T]=(...k)=>{this._removeDelegatedListener(w,y,d),R(...k)}}this._saveDelegatedListener(w,v);for(const T in v.delegates)this.once(T,v.delegates[T]);return this}off(w,o,d){return d===void 0?super.off(w,o):(this._removeDelegatedListener(w,typeof o=="string"?[o]:o,d),this)}queryRenderedFeatures(w,o){if(!this.style)return[];let d;const y=w instanceof s.P||Array.isArray(w),v=y?w:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(y?{}:w)||{},v instanceof s.P||typeof v[0]=="number")d=[s.P.convert(v)];else{const T=s.P.convert(v[0]),R=s.P.convert(v[1]);d=[T,new s.P(R.x,T.y),R,new s.P(T.x,R.y),T]}return this.style.queryRenderedFeatures(d,o,this.transform)}querySourceFeatures(w,o){return this.style.querySourceFeatures(w,o)}setStyle(w,o){return(o=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(w,o))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const o=this._locale[w];if(o==null)throw new Error(`Missing UI string '${w}'`);return o}_updateStyle(w,o){var d,y;if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,o));const v=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Kf(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,o,v):this.style.loadJSON(w,o,v),this):((y=(d=this.style)===null||d===void 0?void 0:d.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Kf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,o){if(typeof w=="string"){const d=this._requestManager.transformRequest(w,"Style");s.j(d,new AbortController).then(y=>{this._updateDiff(y.data,o)}).catch(y=>{y&&this.fire(new s.k(y))})}else typeof w=="object"&&this._updateDiff(w,o)}_updateDiff(w,o){try{this.style.setState(w,o)&&this._update(!0)}catch(d){s.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(w,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(w,o){return this._lazyInitEmptyStyle(),this.style.addSource(w,o),this._update(!0)}isSourceLoaded(w){const o=this.style&&this.style.sourceCaches[w];if(o!==void 0)return o.loaded();this.fire(new s.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const o=this.style.sourceCaches[w.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&o.reload();for(const d in this.style._layers){const y=this.style._layers[d];y.type==="hillshade"&&y.source===w.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===w.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ir(this.painter,o,w),this.painter.renderToTexture=new qd(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var y;d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=d.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:w})),this}getTerrain(){var w,o;return(o=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&o!==void 0?o:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const o in w){const d=w[o]._tiles;for(const y in d){const v=d[y];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,o,d){if(d){const y=this.getSource(d);if(!y)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);y.calculateTileZoom=ct(Math.max(1,w),Math.max(1,o))}else for(const y in this.style.sourceCaches)this.style.sourceCaches[y].getSource().calculateTileZoom=ct(Math.max(1,w),Math.max(1,o));return this._update(!0),this}refreshTiles(w,o){const d=this.style.sourceCaches[w];if(!d)throw new Error(`There is no source cache with ID "${w}", cannot refresh tile`);o===void 0?d.reload(!0):d.refreshTiles(o.map(y=>new s.a4(y.z,y.x,y.y)))}addImage(w,o,d={}){const{pixelRatio:y=1,sdf:v=!1,stretchX:T,stretchY:R,content:k,textFitWidth:L,textFitHeight:q}=d;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||s.b(o))){if(o.width===void 0||o.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:V,height:Y,data:H}=o,re=o;return this.style.addImage(w,{data:new s.R({width:V,height:Y},new Uint8Array(H)),pixelRatio:y,stretchX:T,stretchY:R,content:k,textFitWidth:L,textFitHeight:q,sdf:v,version:0,userImage:re}),re.onAdd&&re.onAdd(this,w),this}}{const{width:V,height:Y,data:H}=P.getImageData(o);this.style.addImage(w,{data:new s.R({width:V,height:Y},H),pixelRatio:y,stretchX:T,stretchY:R,content:k,textFitWidth:L,textFitHeight:q,sdf:v,version:0})}}updateImage(w,o){const d=this.style.getImage(w);if(!d)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=o instanceof HTMLImageElement||s.b(o)?P.getImageData(o):o,{width:v,height:T,data:R}=y;if(v===void 0||T===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==d.data.width||T!==d.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(o instanceof HTMLImageElement||s.b(o));return d.data.replace(R,k),this.style.updateImage(w,d),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return X.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,o){return this._lazyInitEmptyStyle(),this.style.addLayer(w,o),this._update(!0)}moveLayer(w,o){return this.style.moveLayer(w,o),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,o,d){return this.style.setLayerZoomRange(w,o,d),this._update(!0)}setFilter(w,o,d={}){return this.style.setFilter(w,o,d),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,o,d,y={}){return this.style.setPaintProperty(w,o,d,y),this._update(!0)}getPaintProperty(w,o){return this.style.getPaintProperty(w,o)}setLayoutProperty(w,o,d,y={}){return this.style.setLayoutProperty(w,o,d,y),this._update(!0)}getLayoutProperty(w,o){return this.style.getLayoutProperty(w,o)}setGlyphs(w,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,o,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,o,d,y=>{y||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,o,d=>{d||this._update(!0)}),this}setLight(w,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,o),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,o={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,o),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,o){return this.style.setFeatureState(w,o),this._update()}removeFeatureState(w,o){return this.style.removeFeatureState(w,o),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,o=0;return this._container&&(w=this._container.clientWidth||400,o=this._container.clientHeight||300),[w,o]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const o=this._canvasContainer=A.create("div","maplibregl-canvas-container",w);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),y=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],y);const v=this._controlContainer=A.create("div","maplibregl-control-container",w),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(R=>{T[R]=A.create("div",`maplibregl-ctrl-${R} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,o,d){this._canvas.width=Math.floor(d*w),this._canvas.height=Math.floor(d*o),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let o=null;this._canvas.addEventListener("webglcontextcreationerror",y=>{o={requestedAttributes:w},y&&(o.statusMessage=y.statusMessage,o.type=y.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!d){const y="Failed to initialize WebGL";throw o?(o.message=y,new Error(JSON.stringify(o))):new Error(y)}this.painter=new J_(d,this.transform),M.testSupport(d)}migrateProjection(w,o){super.migrateProjection(w,o),this.painter.transform=w,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var o,d,y,v,T;const R=this._idleTriggered?this._fadeDuration:0,k=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let L=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Y=this.transform.zoom,H=P.now();this.style.zoomHistory.update(Y,H);const re=new s.F(Y,{now:H,fadeDuration:R,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),le=re.crossFadingFactor();le===1&&le===this._crossFadingFactor||(L=!0,this._crossFadingFactor=le),this.style.update(re)}const q=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==k;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||q)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,R,this._crossSourceCollisions,q),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:R,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cw.mark(s.cx.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||L)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,s.cw.mark(s.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o?.loseContext&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cw.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,w=>{s.cw.frame(w),this._frameRequest=null;try{this._render(w)}catch(o){if(!s.cy(o)&&!function(d){return d.message===Au}(o))throw o}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return c0}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},c.MapMouseEvent=no,c.MapTouchEvent=ec,c.MapWheelEvent=vm,c.Marker=lc,c.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const o=this._map.getZoom(),d=o===this._map.getMaxZoom(),y=o===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(o,d)=>{const y=this._map._getUIString(`NavigationControl.${d}`);o.title=y,o.setAttribute("aria-label",y)},this.options=s.e({},qw,w),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,o){const d=A.create("button",w,this._container);return d.type="button",d.addEventListener("click",o),d}},c.Popup=class extends s.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const R of this.options.className.split(" "))this._container.classList.add(R);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Un(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!o)return;const d=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const v=Ud(this.options.offset);if(!y){const R=this._container.offsetWidth,k=this._container.offsetHeight;let L;L=d.y+v.bottom.y<k?["top"]:d.y>this._map.transform.height-k?["bottom"]:[],d.x<R/2?L.push("left"):d.x>this._map.transform.width-R/2&&L.push("right"),y=L.length===0?"bottom":L.join("-")}let T=d.add(v[y]);this.options.subpixelPositioning||(T=T.round()),A.setTransform(this._container,`${$d[y]} translate(${T.x}px,${T.y}px)`),ac(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Mm),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=s.S.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const o=document.createDocumentFragment(),d=document.createElement("body");let y;for(d.innerHTML=w;y=d.firstChild,y;)o.appendChild(y);return this.setDOMContent(o)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Om);w&&w.focus()}},c.RasterDEMTileSource=Yt,c.RasterTileSource=Dt,c.ScaleControl=class{constructor(w){this._onMove=()=>{Vd(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,Vd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ju),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=r0,c.Style=Kf,c.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=Nd,c.TwoFingersTouchRotateHandler=oc,c.TwoFingersTouchZoomHandler=Dd,c.TwoFingersTouchZoomRotateHandler=o0,c.VectorTileSource=vt,c.VideoSource=Vr,c.addSourceType=(w,o)=>s._(void 0,void 0,void 0,function*(){if(yr(w))throw new Error(`A source type called "${w}" already exists.`);((d,y)=>{Zr[d]=y})(w,o)}),c.clearPrewarmedResources=function(){const w=kt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Ze),kt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=Wf,c.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return mr().getRTLTextPluginStatus()},c.getVersion=function(){return km},c.getWorkerCount=function(){return bt.workerCount},c.getWorkerUrl=function(){return s.a.WORKER_URL},c.importScriptInWorkers=function(w){return er().broadcast("IS",w)},c.prewarm=function(){Pt().acquire(Ze)},c.setMaxParallelImageRequests=function(w){s.a.MAX_PARALLEL_IMAGE_REQUESTS=w},c.setRTLTextPlugin=function(w,o){return mr().setRTLTextPlugin(w,o)},c.setWorkerCount=function(w){bt.workerCount=w},c.setWorkerUrl=function(w){s.a.WORKER_URL=w}});var l=r;return l})}(vb)),vb.exports}var lye=aye();const NJ=oye(lye);class FJ extends NJ.Map{constructor(e){super({container:e.target,style:e.styleUrl,antialias:!0,...e})}}function pC(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const cye=new Error("disposed"),uye=[256,256];class aD extends __{constructor(e){const r=qt.IDLE;super(e.tileCoord,r,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=pC(this.data_);return e?[e.width,e.height]:uye}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==qt.IDLE&&this.state!==qt.ERROR)return;this.state=qt.LOADING,this.changed();const e=this;this.loader_().then(function(r){e.data_=r,e.state=qt.LOADED,e.changed()}).catch(function(r){e.error_=r,e.state=qt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(cye),this.controller_=null),super.disposeInternal()}}let CT;const Up=[];function lD(t,e,r,n,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,i)),t.restore()}function PT(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function hye(){if(CT===void 0){const t=Ei(6,6,Up);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",lD(t,4,5,4,0),lD(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;CT=PT(e,0)||PT(e,4)||PT(e,8),d_(t),Up.push(t.canvas)}return CT}function cD(t,e,r,n){const i=bf(r,e,t);let l=Av(e,n,r);const c=e.getMetersPerUnit();c!==void 0&&(l*=c);const s=t.getMetersPerUnit();s!==void 0&&(l/=s);const p=t.getExtent();if(!p||gf(p,i)){const g=Av(t,l,i)/l;isFinite(g)&&g>0&&(l/=g)}return l}function dye(t,e,r,n){const i=Dl(r);let l=cD(t,e,i,n);return(!isFinite(l)||l<=0)&&mH(r,function(c){return l=cD(t,e,c,n),isFinite(l)&&l>0}),l}function pye(t,e,r,n,i,l,c,s,p,g,_,x,P,A){const M=Ei(Math.round(r*t),Math.round(r*e),Up);if(x||(M.imageSmoothingEnabled=!1),p.length===0)return M.canvas;M.scale(r,r);function F(te){return Math.round(te*r)/r}M.globalCompositeOperation="lighter";const z=Ns();p.forEach(function(te,ne,Z){pH(z,te.extent)});let j;const $=r/n,W=(x?1:1+Math.pow(2,-24))/$;j=Ei(Math.round(En(z)*$),Math.round(Eo(z)*$),Up),x||(j.imageSmoothingEnabled=!1),p.forEach(function(te,ne,Z){if(te.image.width>0&&te.image.height>0){if(te.clipExtent){j.save();const we=(te.clipExtent[0]-z[0])*$,Ie=-(te.clipExtent[3]-z[3])*$,ee=En(te.clipExtent)*$,fe=Eo(te.clipExtent)*$;j.rect(x?we:Math.round(we),x?Ie:Math.round(Ie),x?ee:Math.round(we+ee)-Math.round(we),x?fe:Math.round(Ie+fe)-Math.round(Ie)),j.clip()}const U=(te.extent[0]-z[0])*$,K=-(te.extent[3]-z[3])*$,he=En(te.extent)*$,ue=Eo(te.extent)*$;j.drawImage(te.image,g,g,te.image.width-2*g,te.image.height-2*g,x?U:Math.round(U),x?K:Math.round(K),x?he:Math.round(U+he)-Math.round(U),x?ue:Math.round(K+ue)-Math.round(K)),te.clipExtent&&j.restore()}});const X=Vl(c);return s.getTriangles().forEach(function(te,ne,Z){const U=te.source,K=te.target;let he=U[0][0],ue=U[0][1],we=U[1][0],Ie=U[1][1],ee=U[2][0],fe=U[2][1];const ve=F((K[0][0]-X[0])/l),xe=F(-(K[0][1]-X[1])/l),Xe=F((K[1][0]-X[0])/l),Ke=F(-(K[1][1]-X[1])/l),Ze=F((K[2][0]-X[0])/l),bt=F(-(K[2][1]-X[1])/l),qe=he,kt=ue;he=0,ue=0,we-=qe,Ie-=kt,ee-=qe,fe-=kt;const Jt=[[we,Ie,0,0,Xe-ve],[ee,fe,0,0,Ze-ve],[0,0,we,Ie,Ke-xe],[0,0,ee,fe,bt-xe]],Pt=Kde(Jt);if(!Pt)return;if(M.save(),M.beginPath(),hye()||!x){M.moveTo(Xe,Ke);const er=4,Wt=ve-Xe,ar=xe-Ke;for(let _t=0;_t<er;_t++)M.lineTo(Xe+F((_t+1)*Wt/er),Ke+F(_t*ar/(er-1))),_t!=er-1&&M.lineTo(Xe+F((_t+1)*Wt/er),Ke+F((_t+1)*ar/(er-1)));M.lineTo(Ze,bt)}else M.moveTo(Xe,Ke),M.lineTo(ve,xe),M.lineTo(Ze,bt);M.clip(),M.transform(Pt[0],Pt[2],Pt[1],Pt[3],ve,xe),M.translate(z[0]-qe,z[3]-kt);let dt;if(j)dt=j.canvas,M.scale(W,-W);else{const er=p[0],Wt=er.extent;dt=er.image,M.scale(En(Wt)/dt.width,-Eo(Wt)/dt.height)}M.drawImage(dt,0,0),M.restore()}),j&&(d_(j),Up.push(j.canvas)),_&&(M.save(),M.globalCompositeOperation="source-over",M.strokeStyle="black",M.lineWidth=1,s.getTriangles().forEach(function(te,ne,Z){const U=te.target,K=(U[0][0]-X[0])/l,he=-(U[0][1]-X[1])/l,ue=(U[1][0]-X[0])/l,we=-(U[1][1]-X[1])/l,Ie=(U[2][0]-X[0])/l,ee=-(U[2][1]-X[1])/l;M.beginPath(),M.moveTo(ue,we),M.lineTo(K,he),M.lineTo(Ie,ee),M.closePath(),M.stroke()}),M.restore()),M.canvas}const fye=10,uD=.25;class mye{constructor(e,r,n,i,l,c,s){this.sourceProj_=e,this.targetProj_=r;let p={};const g=s?Fpe(W=>Di(s,bf(W,this.targetProj_,this.sourceProj_))):Gh(this.targetProj_,this.sourceProj_);this.transformInv_=function(W){const X=W[0]+"/"+W[1];return p[X]||(p[X]=g(W)),p[X]},this.maxSourceExtent_=i,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&En(i)>=En(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?En(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?En(this.targetProj_.getExtent()):null;const _=Vl(n),x=kx(n),P=Ox(n),A=Mx(n),M=this.transformInv_(_),F=this.transformInv_(x),z=this.transformInv_(P),j=this.transformInv_(A),$=fye+(c?Math.max(0,Math.ceil(Math.log2(Z2(n)/(c*c*256*256)))):0);if(this.addQuad_(_,x,P,A,M,F,z,j,$),this.wrapsXInSource_){let W=1/0;this.triangles_.forEach(function(X,te,ne){W=Math.min(W,X.source[0][0],X.source[1][0],X.source[2][0])}),this.triangles_.forEach(X=>{if(Math.max(X.source[0][0],X.source[1][0],X.source[2][0])-W>this.sourceWorldWidth_/2){const te=[[X.source[0][0],X.source[0][1]],[X.source[1][0],X.source[1][1]],[X.source[2][0],X.source[2][1]]];te[0][0]-W>this.sourceWorldWidth_/2&&(te[0][0]-=this.sourceWorldWidth_),te[1][0]-W>this.sourceWorldWidth_/2&&(te[1][0]-=this.sourceWorldWidth_),te[2][0]-W>this.sourceWorldWidth_/2&&(te[2][0]-=this.sourceWorldWidth_);const ne=Math.min(te[0][0],te[1][0],te[2][0]);Math.max(te[0][0],te[1][0],te[2][0])-ne<this.sourceWorldWidth_/2&&(X.source=te)}})}p={}}addTriangle_(e,r,n,i,l,c){this.triangles_.push({source:[i,l,c],target:[e,r,n]})}addQuad_(e,r,n,i,l,c,s,p,g){const _=J2([l,c,s,p]),x=this.sourceWorldWidth_?En(_)/this.sourceWorldWidth_:null,P=this.sourceWorldWidth_,A=this.sourceProj_.canWrapX()&&x>.5&&x<1;let M=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=J2([e,r,n,i]);M=En(z)/this.targetWorldWidth_>uD||M}!A&&this.sourceProj_.isGlobal()&&x&&(M=x>uD||M)}if(!M&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3])&&!ui(_,this.maxSourceExtent_))return;let F=0;if(!M&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(p[0])||!isFinite(p[1]))){if(g>0)M=!0;else if(F=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(c[0])||!isFinite(c[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),F!=1&&F!=2&&F!=4&&F!=8)return}if(g>0){if(!M){const z=[(e[0]+n[0])/2,(e[1]+n[1])/2],j=this.transformInv_(z);let $;A?$=(Eh(l[0],P)+Eh(s[0],P))/2-Eh(j[0],P):$=(l[0]+s[0])/2-j[0];const W=(l[1]+s[1])/2-j[1];M=$*$+W*W>this.errorThresholdSquared_}if(M){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const z=[(r[0]+n[0])/2,(r[1]+n[1])/2],j=this.transformInv_(z),$=[(i[0]+e[0])/2,(i[1]+e[1])/2],W=this.transformInv_($);this.addQuad_(e,r,z,$,l,c,j,W,g-1),this.addQuad_($,z,n,i,W,j,s,p,g-1)}else{const z=[(e[0]+r[0])/2,(e[1]+r[1])/2],j=this.transformInv_(z),$=[(n[0]+i[0])/2,(n[1]+i[1])/2],W=this.transformInv_($);this.addQuad_(e,z,$,i,l,j,W,p,g-1),this.addQuad_(z,r,n,$,j,c,s,W,g-1)}return}}if(A){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(F&11)==0&&this.addTriangle_(e,n,i,l,s,p),(F&14)==0&&this.addTriangle_(e,n,r,l,s,c),F&&((F&13)==0&&this.addTriangle_(r,i,e,c,p,l),(F&7)==0&&this.addTriangle_(r,i,n,c,p,s))}calculateSourceExtent(){const e=Ns();return this.triangles_.forEach(function(r,n,i){const l=r.source;$g(e,l[0]),$g(e,l[1]),$g(e,l[2])}),e}getTriangles(){return this.triangles_}}const gye=.5;class zJ extends __{constructor(e,r,n,i,l,c,s,p,g,_,x,P){super(l,qt.IDLE,P),this.renderEdges_=x!==void 0?x:!1,this.pixelRatio_=s,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=r,this.targetTileGrid_=i,this.wrappedTileCoord_=c||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const A=i.getTileCoordExtent(this.wrappedTileCoord_),M=this.targetTileGrid_.getExtent();let F=this.sourceTileGrid_.getExtent();const z=M?Rl(A,M):A;if(Z2(z)===0){this.state=qt.EMPTY;return}const j=e.getExtent();j&&(F?F=Rl(F,j):F=j);const $=i.getResolution(this.wrappedTileCoord_[0]),W=dye(e,n,z,$);if(!isFinite(W)||W<=0){this.state=qt.EMPTY;return}const X=_!==void 0?_:gye;if(this.triangulation_=new mye(e,n,z,F,W*X,$),this.triangulation_.getTriangles().length===0){this.state=qt.EMPTY;return}this.sourceZ_=r.getZForResolution(W);let te=this.triangulation_.calculateSourceExtent();if(F&&(e.canWrapX()?(te[1]=qn(te[1],F[1],F[3]),te[3]=qn(te[3],F[1],F[3])):te=Rl(te,F)),!Z2(te))this.state=qt.EMPTY;else{let ne=0,Z=0;e.canWrapX()&&(ne=En(j),Z=Math.floor((te[0]-j[0])/ne)),bH(te.slice(),e,!0).forEach(K=>{const he=r.getTileRangeForExtentAndZ(K,this.sourceZ_);for(let ue=he.minX;ue<=he.maxX;ue++)for(let we=he.minY;we<=he.maxY;we++){const Ie=g(this.sourceZ_,ue,we,s);if(Ie){const ee=Z*ne;this.sourceTiles_.push({tile:Ie,offset:ee})}}++Z}),this.sourceTiles_.length===0&&(this.state=qt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(r=>{const n=r.tile;if(n&&n.getState()==qt.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);i[0]+=r.offset,i[2]+=r.offset;const l=this.clipExtent_?.slice();l&&(l[0]+=r.offset,l[2]+=r.offset),e.push({extent:i,clipExtent:l,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=qt.ERROR;else{const r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),i=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],c=this.targetTileGrid_.getResolution(r),s=this.sourceTileGrid_.getResolution(this.sourceZ_),p=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=pye(i,l,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),c,p,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=qt.LOADED}this.changed()}load(){if(this.state==qt.IDLE){this.state=qt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:r})=>{const n=r.getState();if(n==qt.IDLE||n==qt.LOADING){e++;const i=en(r,Rr.CHANGE,l=>{const c=r.getState();(c==qt.LOADED||c==qt.ERROR||c==qt.EMPTY)&&(Rn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:r},n,i){r.getState()==qt.IDLE&&r.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Rn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(d_(this.canvas_.getContext("2d")),Up.push(this.canvas_),this.canvas_=null),super.release()}}class hD{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Px&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let r=this.oldest_;for(;r;)e(r.value_,r.key_,this),r=r.newer}get(e,r){const n=this.entries_[e];return fn(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const r=this.entries_[e];return fn(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[e],--this.count_,r.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let r=0,n;for(n=this.newest_;n;n=n.older)e[r++]=n.key_;return e}getValues(){const e=new Array(this.count_);let r=0,n;for(n=this.newest_;n;n=n.older)e[r++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,r){this.get(e),this.entries_[e].value_=r}set(e,r){fn(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function $v(t,e,r,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function yye(t,e,r){return t+"/"+e+"/"+r}function xb(t,e,r,n,i){return`${Nr(t)},${e},${yye(r,n,i)}`}function _ye(t){return bye(t[0],t[1],t[2])}function bye(t,e,r){return(e<<t)+r}function vye(t,e){const r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;const l=e.getFullTileRange(r);return l?l.containsXY(n,i):!0}function AT(t,e,r){if(!(r in t))return t[r]=new Set([e]),!0;const n=t[r],i=n.has(e);return i||n.add(e),!i}function xye(t,e,r){const n=t[r];return n?n.delete(e):!1}function dD(t,e){const r=t.layerStatesArray[t.layerIndex];r.extent&&(e=Rl(e,zc(r.extent,t.viewState.projection)));const n=r.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=Rl(e,i))}return e}class wye extends AJ{constructor(e,r){super(e),r=r||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Ns(),this.tempTileRange_=new GM(0,0,0,0),this.tempTileCoord_=$v(0,0,0);const n=r.cacheSize!==void 0?r.cacheSize:512;this.tileCache_=new hD(n),this.sourceTileCache_=null,this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new hD(512)),this.sourceTileCache_}getOrCreateTile(e,r,n,i){const l=this.tileCache_,s=this.getLayer().getSource(),p=xb(s,s.getKey(),e,r,n);let g;if(l.containsKey(p))g=l.get(p);else{const _=i.viewState.projection,x=s.getProjection();if(g=s.getTile(e,r,n,i.pixelRatio,_,!x||Ro(x,_)?void 0:this.getSourceTileCache()),!g)return null;l.set(p,g)}return g}getTile(e,r,n,i){const l=this.getOrCreateTile(e,r,n,i);return l||null}getData(e){const r=this.frameState;if(!r)return null;const n=this.getLayer(),i=Di(r.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!gf(l,i))return null;const c=r.viewState,s=n.getRenderSource(),p=s.getTileGridForProjection(c.projection),g=s.getTilePixelRatio(r.pixelRatio);for(let _=p.getZForResolution(c.resolution);_>=p.getMinZoom();--_){const x=p.getTileCoordForCoordAndZ(i,_),P=this.getTile(_,x[1],x[2],r);if(!P||P.getState()!==qt.LOADED)continue;const A=p.getOrigin(_),M=ho(p.getTileSize(_)),F=p.getResolution(_);let z;if(P instanceof MJ||P instanceof zJ)z=P.getImage();else if(P instanceof aD){if(z=pC(P.getData()),!z)continue}else continue;const j=Math.floor(g*((i[0]-A[0])/F-x[1]*M[0])),$=Math.floor(g*((A[1]-i[1])/F-x[2]*M[1])),W=Math.round(g*s.getGutterForProjection(c.projection));return this.getImageData(z,j+W,$+W)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const r=this.getLayer().getSource();if(!r)return!1;const n=r.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===r.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=n,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,r,n,i,l){const c=e.viewState,s=this.getLayer(),p=s.getRenderSource(),g=p.getTileGridForProjection(c.projection),_=Nr(p);_ in e.wantedTiles||(e.wantedTiles[_]={});const x=e.wantedTiles[_],P=s.getMapInternal(),A=Math.max(n-l,g.getMinZoom(),g.getZForResolution(Math.min(s.getMaxResolution(),P?P.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):g.getResolution(0)),p.zDirection)),M=c.rotation,F=M?gH(c.center,c.resolution,M,e.size):void 0;for(let z=n;z>=A;--z){const j=g.getTileRangeForExtentAndZ(r,z,this.tempTileRange_),$=g.getResolution(z);for(let W=j.minX;W<=j.maxX;++W)for(let X=j.minY;X<=j.maxY;++X){if(M&&!g.tileCoordIntersectsViewport([z,W,X],F))continue;const te=this.getTile(z,W,X,e);if(!te||!AT(i,te,z))continue;const Z=te.getKey();if(x[Z]=!0,te.getState()===qt.IDLE&&!e.tileQueue.isKeyQueued(Z)){const U=$v(z,W,X,this.tempTileCoord_);e.tileQueue.enqueue([te,_,g.getTileCoordCenter(U),$])}}}}findStaleTile_(e,r){const n=this.tileCache_,i=e[0],l=e[1],c=e[2],s=this.getStaleKeys();for(let p=0;p<s.length;++p){const g=xb(this.getLayer().getSource(),s[p],i,l,c);if(n.containsKey(g)){const _=n.peek(g);if(_.getState()===qt.LOADED)return _.endTransition(Nr(this)),AT(r,_,i),!0}}return!1}findAltTiles_(e,r,n,i){const l=e.getTileRangeForTileCoordAndZ(r,n,this.tempTileRange_);if(!l)return!1;let c=!0;const s=this.tileCache_,p=this.getLayer().getRenderSource(),g=p.getKey();for(let _=l.minX;_<=l.maxX;++_)for(let x=l.minY;x<=l.maxY;++x){const P=xb(p,g,n,_,x);let A=!1;if(s.containsKey(P)){const M=s.peek(P);M.getState()===qt.LOADED&&(AT(i,M,n),A=!0)}A||(c=!1)}return c}renderFrame(e,r){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],i=e.viewState,l=i.projection,c=i.resolution,s=i.center,p=e.pixelRatio,g=this.getLayer(),_=g.getSource(),x=_.getTileGridForProjection(l),P=x.getZForResolution(c,_.zDirection),A=x.getResolution(P),M=_.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==M&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=M):this.renderedSourceKey_=M;let F=e.extent;const z=_.getTilePixelRatio(p);this.prepareContainer(e,r);const j=this.context.canvas.width,$=this.context.canvas.height,W=n.extent&&zc(n.extent);W&&(F=Rl(F,zc(n.extent)));const X=A*j/2/z,te=A*$/2/z,ne=[s[0]-X,s[1]-te,s[0]+X,s[1]+te],Z={};this.renderedTiles.length=0;const U=g.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const Xe=x.getZForResolution(i.nextResolution,_.zDirection),Ke=dD(e,e.nextExtent);this.enqueueTiles(e,Ke,Xe,Z,U)}const K=dD(e,F);if(this.enqueueTiles(e,K,P,Z,0),U>0&&setTimeout(()=>{this.enqueueTiles(e,K,P-1,Z,U-1)},0),!(P in Z))return this.container;const he=Nr(this),ue=e.time;for(const Xe of Z[P]){const Ke=Xe.getState();if(Ke===qt.EMPTY)continue;const Ze=Xe.tileCoord;if(Ke===qt.LOADED&&Xe.getAlpha(he,ue)===1){Xe.endTransition(he);continue}if(Ke!==qt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ze,Z)){xye(Z,Xe,P),e.animate=!0;continue}if(this.findAltTiles_(x,Ze,P+1,Z))continue;const kt=x.getMinZoom();for(let Jt=P-1;Jt>=kt&&!this.findAltTiles_(x,Ze,Jt,Z);--Jt);}const we=A/c*p/z,Ie=this.getRenderContext(e);Nl(this.tempTransform,j/2,$/2,we,we,0,-j/2,-$/2),n.extent&&this.clipUnrotated(Ie,e,W),_.getInterpolate()||(Ie.imageSmoothingEnabled=!1),this.preRender(Ie,e);const ee=Object.keys(Z).map(Number);ee.sort(La);let fe;const ve=[],xe=[];for(let Xe=ee.length-1;Xe>=0;--Xe){const Ke=ee[Xe],Ze=_.getTilePixelSize(Ke,p,l),qe=x.getResolution(Ke)/A,kt=Ze[0]*qe*we,Jt=Ze[1]*qe*we,Pt=x.getTileCoordForCoordAndZ(Vl(ne),Ke),dt=x.getTileCoordExtent(Pt),er=Di(this.tempTransform,[z*(dt[0]-ne[0])/A,z*(ne[3]-dt[3])/A]),Wt=z*_.getGutterForProjection(l);for(const ar of Z[Ke]){if(ar.getState()!==qt.LOADED)continue;const _t=ar.tileCoord,Ve=Pt[1]-_t[1],pt=Math.round(er[0]-(Ve-1)*kt),lt=Pt[2]-_t[2],Tt=Math.round(er[1]-(lt-1)*Jt),vt=Math.round(er[0]-Ve*kt),Dt=Math.round(er[1]-lt*Jt),Yt=pt-vt,Bt=Tt-Dt,wr=ee.length===1;let Vr=!1;fe=[vt,Dt,vt+Yt,Dt,vt+Yt,Dt+Bt,vt,Dt+Bt];for(let Ir=0,Zr=ve.length;Ir<Zr;++Ir)if(!wr&&Ke<xe[Ir]){const yr=ve[Ir];ui([vt,Dt,vt+Yt,Dt+Bt],[yr[0],yr[3],yr[4],yr[7]])&&(Vr||(Ie.save(),Vr=!0),Ie.beginPath(),Ie.moveTo(fe[0],fe[1]),Ie.lineTo(fe[2],fe[3]),Ie.lineTo(fe[4],fe[5]),Ie.lineTo(fe[6],fe[7]),Ie.moveTo(yr[6],yr[7]),Ie.lineTo(yr[4],yr[5]),Ie.lineTo(yr[2],yr[3]),Ie.lineTo(yr[0],yr[1]),Ie.clip())}ve.push(fe),xe.push(Ke),this.drawTile(ar,e,vt,Dt,Yt,Bt,Wt,wr),Vr&&Ie.restore(),this.renderedTiles.unshift(ar),this.updateUsedTiles(e.usedTiles,_,ar)}}if(this.renderedResolution=A,this.extentChanged=!this.renderedExtent_||!yf(this.renderedExtent_,ne),this.renderedExtent_=ne,this.renderedPixelRatio=p,this.postRender(this.context,e),n.extent&&Ie.restore(),Ie.imageSmoothingEnabled=!0,this.renderComplete){const Xe=(Ke,Ze)=>{const bt=Nr(_),qe=Ze.wantedTiles[bt],kt=qe?Object.keys(qe).length:0;this.updateCacheSize(kt),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(Xe)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,r,n,i,l,c,s,p){let g;if(e instanceof aD){if(g=pC(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const _=this.getRenderContext(r),x=Nr(this),P=r.layerStatesArray[r.layerIndex],A=P.opacity*(p?e.getAlpha(x,r.time):1),M=A!==_.globalAlpha;M&&(_.save(),_.globalAlpha=A),_.drawImage(g,s,s,g.width-2*s,g.height-2*s,n,i,l,c),M&&_.restore(),A!==P.opacity?r.animate=!0:p&&e.endTransition(x)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,r,n){const i=Nr(r);i in e||(e[i]={}),e[i][n.getKey()]=!0}}const Eye={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},pD={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Tye extends wye{constructor(e,r){super(e,r),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Os(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,r,n,i,l,c,s,p){this.updateExecutorGroup_(e,r.pixelRatio,r.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,r),super.drawTile(e,r,n,i,l,c,s,p)}getTile(e,r,n,i){const l=this.getOrCreateTile(e,r,n,i);if(!l)return null;const c=i.viewState,s=c.resolution,p=i.viewHints,g=this.getLayer().getSource(),_=g.getTileGridForProjection(c.projection),x=!(p[ri.ANIMATING]||p[ri.INTERACTING]),P=_.getZForResolution(s,g.zDirection)===e;return x&&P?l.wantedResolution=s:l.wantedResolution||(l.wantedResolution=_.getResolution(e)),l}prepareFrame(e){const r=this.getLayer().getRevision();return this.renderedLayerRevision_!==r&&(this.renderedLayerRevision_=r,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,r,n){const i=this.getLayer(),l=i.getRevision(),c=i.getRenderOrder()||null,s=e.wantedResolution,p=e.getReplayState(i);if(!p.dirty&&p.renderedResolution===s&&p.renderedRevision==l&&p.renderedRenderOrder==c)return;const g=i.getSource(),_=!!i.getDeclutter(),x=g.getTileGrid(),A=g.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),M=g.getSourceTiles(r,n,e),F=Nr(i);delete e.hitDetectionImageData[F],e.executorGroups[F]=[],p.dirty=!1;for(let z=0,j=M.length;z<j;++z){const $=M[z];if($.getState()!=qt.LOADED)continue;const W=g.getProjection(),X=$.tileCoord;let te=x.getTileCoordExtent(X);n&&W&&!Ro(n,W)&&(te=Vg(te,W,n,32));const ne=Rl(A,te),Z=Xc(ne,i.getRenderBuffer()*s,this.tempExtent),U=yf(te,ne)?null:Z,K=new xJ(0,ne,s,r),he=dC(s,r),ue=function(ve,xe){let Xe;const Ke=ve.getStyleFunction()||i.getStyleFunction();if(Ke&&(Xe=Ke(ve,s)),Xe){const Ze=this.renderFeature(ve,he,Xe,K,_,xe);p.dirty=p.dirty||Ze}},we=$.getFeatures();c&&c!==p.renderedRenderOrder&&we.sort(c);for(let ve=0,xe=we.length;ve<xe;++ve){let Xe=we[ve];n&&$.projection&&!Ro(n,$.projection)&&(Xe=Xe.clone(),Xe.getGeometry().applyTransform(Gh($.projection,n))),(!U||ui(U,Xe.getGeometry().getExtent()))&&ue.call(this,Xe,ve)}const Ie=K.finish(),ee=i.getRenderMode()!=="vector"&&_&&M.length===1?null:ne,fe=new wJ(ee,s,r,g.getOverlaps(),Ie,i.getRenderBuffer(),!0);e.executorGroups[F].push(fe)}p.renderedRevision=l,p.renderedRenderOrder=c,p.renderedResolution=s}forEachFeatureAtCoordinate(e,r,n,i,l){const c=r.viewState.resolution,s=r.viewState.rotation;n=n??0;const p=this.getLayer(),_=p.getSource().getTileGridForProjection(r.viewState.projection),x=J2([e]);Xc(x,c*n,x);const P={},A=function(W,X,te){let ne=W.getId();ne===void 0&&(ne=Nr(W));const Z=P[ne];if(Z){if(Z!==!0&&te<Z.distanceSq){if(te===0)return P[ne]=!0,l.splice(l.lastIndexOf(Z),1),i(W,p,X);Z.geometry=X,Z.distanceSq=te}}else{if(te===0)return P[ne]=!0,i(W,p,X);l.push(P[ne]={feature:W,layer:p,geometry:X,distanceSq:te,callback:i})}},M=this.renderedTiles,F=Nr(p),z=p.getDeclutter(),j=z?r.declutter?.[z]?.all().map(W=>W.value):null;let $;e:for(let W=0,X=M.length;W<X;++W){const te=M[W],ne=_.getTileCoordExtent(te.wrappedTileCoord);if(!ui(ne,x))continue;const Z=te.executorGroups[F];for(let U=0,K=Z.length;U<K;++U)if($=Z[U].forEachFeatureAtCoordinate(e,c,s,n,A,j),$)break e}return $}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((r,n)=>{const i=this.getLayer(),l=i.getSource(),c=this.renderedProjection,s=c.getExtent(),p=this.renderedResolution,g=l.getTileGridForProjection(c),_=Di(this.renderedPixelToCoordinateTransform_,e.slice()),x=g.getTileCoordForCoordAndResolution(_,p).toString(),P=this.renderedTiles.find(W=>W.tileCoord.toString()===x&&W.getState()===qt.LOADED);if(!P||P.loadingSourceTiles>0){r([]);return}l.getWrapX()&&c.canWrapX()&&!uh(s,g.getTileCoordExtent(P.tileCoord))&&hM(_,c);const A=Nr(i),M=g.getTileCoordExtent(P.wrappedTileCoord),F=Vl(M),z=[(_[0]-F[0])/p,(F[1]-_[1])/p],j=P.getSourceTiles().reduce((W,X)=>W.concat(X.getFeatures()),[]);let $=P.hitDetectionImageData[A];if(!$){const W=ho(g.getTileSize(g.getZForResolution(p,l.zDirection))),X=this.renderedRotation_,te=[this.getRenderTransform(g.getTileCoordCenter(P.wrappedTileCoord),p,0,ss,W[0]*ss,W[1]*ss,0)];$=EJ(W,te,j,i.getStyleFunction(),g.getTileCoordExtent(P.wrappedTileCoord),P.getReplayState(i).renderedResolution,X),P.hitDetectionImageData[A]=$}r(TJ(z,j,$))})}getFeaturesInExtent(e){const r=[],n=this.getTileCache();if(n.getCount()===0)return r;const l=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),c=l.getZForResolution(this.renderedResolution),s={};return n.forEach(p=>{if(p.tileCoord[0]!==c||p.getState()!==qt.LOADED)return;const g=p.getSourceTiles();for(let _=0,x=g.length;_<x;++_){const P=g[_],A=P.getKey();if(A in s)continue;s[A]=!0;const M=P.tileCoord;if(ui(e,l.getTileCoordExtent(M))){const F=P.getFeatures();if(F)for(let z=0,j=F.length;z<j;++z){const $=F[z],W=$.getGeometry();ui(e,W.getExtent())&&r.push($)}}}}),r}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,r){const n=this.context,i=n.globalAlpha;n.globalAlpha=r.opacity;const l=e.viewHints,c=!(l[ri.ANIMATING]||l[ri.INTERACTING]),s=[this.context.canvas.width,this.context.canvas.height],p=this.getLayer().getDeclutter(),g=p?e.declutter?.[p]:void 0,_=Nr(this.getLayer()),x=this.renderedTiles;for(let P=0,A=x.length;P<A;++P){const M=x[P],F=M.executorGroups[_];if(F)for(let z=F.length-1;z>=0;--z)F[z].execute(this.context,s,this.getTileRenderTransform(M,e),e.viewState.rotation,c,jv,g)}n.globalAlpha=i}renderDeferredInternal(e){const r=this.renderedTiles,n=Nr(this.getLayer()),i=r.reduce((p,g,_)=>(g.executorGroups[n].forEach(x=>p.push({executorGroup:x,index:_})),p),[]),l=i.map(({executorGroup:p})=>p.getDeferredZIndexContexts()),c={};for(let p=0,g=i.length;p<g;++p){const _=i[p].executorGroup.getDeferredZIndexContexts();for(const x in _)c[x]=!0}Object.keys(c).map(Number).sort(La).forEach(p=>{l.forEach((g,_)=>{g[p]&&(g[p].forEach(x=>{const{executorGroup:P,index:A}=i[_],M=P.getRenderedContext(),F=M.globalAlpha;M.globalAlpha=this.renderedOpacity_;const z=this.tileClipContexts_[A];z&&z.draw(M),x.draw(M),z&&M.restore(),M.globalAlpha=F,x.clear()}),g[p].length=0)})})}getTileRenderTransform(e,r){const n=r.pixelRatio,i=r.viewState,l=i.center,c=i.resolution,s=i.rotation,p=r.size,g=Math.round(p[0]*n),_=Math.round(p[1]*n),P=this.getLayer().getSource().getTileGridForProjection(r.viewState.projection),A=e.tileCoord,M=P.getTileCoordExtent(e.wrappedTileCoord),F=P.getTileCoordExtent(A,this.tempExtent)[0]-M[0];return yM(iT(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(l,c,s,n,g,_,F))}postRender(e,r){const n=r.viewHints,i=!(n[ri.ANIMATING]||n[ri.INTERACTING]);this.renderedPixelToCoordinateTransform_=r.pixelToCoordinateTransform.slice(),this.renderedRotation_=r.viewState.rotation,this.renderedOpacity_=r.layerStatesArray[r.layerIndex].opacity;const l=this.getLayer(),c=l.getRenderMode(),s=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const p=l.getDeclutter(),g=p?pD[c].filter(te=>!jv.includes(te)):pD[c],_=r.viewState,x=_.rotation,P=l.getSource(),M=P.getTileGridForProjection(_.projection).getZForResolution(_.resolution,P.zDirection),F=this.renderedTiles,z=[],j=[],$=[],W=Nr(l);let X=!0;for(let te=F.length-1;te>=0;--te){const ne=F[te];X=X&&!ne.getReplayState(l).dirty;const Z=ne.executorGroups[W].filter(ee=>ee.hasExecutors(g));if(Z.length===0)continue;const U=this.getTileRenderTransform(ne,r),K=ne.tileCoord[0];let he=!1;const ue=Z[0].getClipCoords(U);let we=e,Ie;if(ue){Ie=new UM,we=Ie.getContext();for(let ee=0,fe=z.length;ee<fe;++ee)if(M!==K&&K<j[ee]){const ve=z[ee];ui([ue[0],ue[3],ue[4],ue[7]],[ve[0],ve[3],ve[4],ve[7]])&&(he||(we.save(),he=!0),we.beginPath(),we.moveTo(ue[0],ue[1]),we.lineTo(ue[2],ue[3]),we.lineTo(ue[4],ue[5]),we.lineTo(ue[6],ue[7]),we.moveTo(ve[6],ve[7]),we.lineTo(ve[4],ve[5]),we.lineTo(ve[2],ve[3]),we.lineTo(ve[0],ve[1]),we.clip())}z.push(ue),j.push(K)}for(let ee=0,fe=Z.length;ee<fe;++ee)Z[ee].execute(e,[e.canvas.width,e.canvas.height],U,x,i,g,r.declutter?.[p]);he&&(we===e?we.restore():$[te]=Ie)}e.globalAlpha=s,this.ready=X,this.tileClipContexts_=$,r.declutter||this.renderDeferredInternal(r),super.postRender(e,r)}renderFeature(e,r,n,i,l,c){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let p=0,g=n.length;p<g;++p)s=Bv(i,e,n[p],r,this.boundHandleStyleImageChange_,void 0,l,c)||s;else s=Bv(i,e,n,r,this.boundHandleStyleImageChange_,void 0,l,c);return s}tileImageNeedsRender_(e){const r=this.getLayer();if(r.getRenderMode()==="vector")return!1;const n=e.getReplayState(r),i=r.getRevision(),l=e.wantedResolution;return n.renderedTileResolution!==l||n.renderedTileRevision!==i}renderTileImage_(e,r){const n=this.getLayer(),i=e.getReplayState(n),l=n.getRevision(),c=e.executorGroups[Nr(n)];i.renderedTileRevision=l;const s=e.wrappedTileCoord,p=s[0],g=n.getSource();let _=r.pixelRatio;const P=r.viewState.projection,A=g.getTileGridForProjection(P),M=A.getResolution(e.tileCoord[0]),F=r.pixelRatio/e.wantedResolution*M,z=A.getResolution(p),j=e.getContext();_=Math.round(Math.max(_,F/_));const $=g.getTilePixelSize(p,_,P);j.canvas.width=$[0],j.canvas.height=$[1];const W=_/F;if(W!==1){const Z=xL(this.tmpTransform_);iT(Z,W,W),j.setTransform.apply(j,Z)}const X=A.getTileCoordExtent(s,this.tempExtent),te=F/z,ne=xL(this.tmpTransform_);iT(ne,te,-te),Vpe(ne,-X[0],-X[3]);for(let Z=0,U=c.length;Z<U;++Z)c[Z].execute(j,[j.canvas.width*W,j.canvas.height*W],ne,0,!0,Eye[n.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}const H0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class wb extends $M{constructor(e){e=e||{};const r=Object.assign({},e);delete r.preload;const n=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete r.useInterimTilesOnError,super(r),this.on,this.once,this.un,this.cacheSize_=n;const i=e.renderMode||"hybrid";fn(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Tye(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(H0.PRELOAD)}getUseInterimTilesOnError(){return this.get(H0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(H0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(H0.USE_INTERIM_TILES_ON_ERROR,e)}}var Sye=8,Cye={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Pye={"*":{type:"source"}},Aye=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Rye={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Iye={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Mye={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Oye={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},kye={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Lye={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Dye={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Nye=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Fye={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},zye={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jye={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Bye={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qye={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$ye={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vye={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Uye={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Gye={type:"array",value:"*"},Hye={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Jye={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Wye={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Zye={type:"array",value:"*",minimum:1},Kye={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Yye={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Xye={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Qye={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},e_e=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],t_e={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},r_e={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},n_e={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},i_e={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},o_e={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},s_e={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},a_e={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},l_e={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},c_e={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},u_e={"*":{type:"string"}},h_e={$version:Sye,$root:Cye,sources:Pye,source:Aye,source_vector:Rye,source_raster:Iye,source_raster_dem:Mye,source_geojson:Oye,source_video:kye,source_image:Lye,layer:Dye,layout:Nye,layout_background:Fye,layout_fill:zye,layout_circle:jye,layout_heatmap:Bye,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:qye,layout_symbol:$ye,layout_raster:Vye,layout_hillshade:Uye,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Gye,filter_operator:Hye,geometry_type:Jye,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Wye,expression:Zye,light:Kye,sky:Yye,terrain:Xye,projection:Qye,paint:e_e,paint_fill:t_e,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:r_e,paint_circle:n_e,paint_heatmap:i_e,paint_symbol:o_e,paint_raster:s_e,paint_hillshade:a_e,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:l_e,transition:c_e,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:u_e};const d_e=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function p_e(t,e){const r={};for(const n in t)n!=="ref"&&(r[n]=t[n]);return d_e.forEach(n=>{n in e&&(r[n]=e[n])}),r}function f_e(t){t=t.slice();const e=Object.create(null);for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(let r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=p_e(t[r],e[t[r].ref]));return t}class Ca extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}class HM{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[n,i]of r)this.bindings[n]=i}concat(e){return new HM(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const Jx={kind:"null"},Ft={kind:"number"},Ur={kind:"string"},zr={kind:"boolean"},Na={kind:"color"},Wx={kind:"projectionDefinition"},Th={kind:"object"},Lr={kind:"value"},m_e={kind:"error"},Zx={kind:"collator"},Kx={kind:"formatted"},Yx={kind:"padding"},My={kind:"colorArray"},Xx={kind:"numberArray"},b_={kind:"resolvedImage"},Qx={kind:"variableAnchorOffsetCollection"};function as(t,e){return{kind:"array",itemType:t,N:e}}function Gn(t){if(t.kind==="array"){const e=Gn(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}else return t.kind}const g_e=[Jx,Ft,Ur,zr,Na,Wx,Kx,Th,as(Lr),Yx,Xx,My,b_,Qx];function Oy(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Oy(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const r of g_e)if(!Oy(r,e))return null}}return`Expected ${Gn(t)} but found ${Gn(e)} instead.`}function JM(t,e){return e.some(r=>r.kind===t.kind)}function Sh(t,e){return e.some(r=>r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t)}function wc(t,e){return t.kind==="array"&&e.kind==="array"?t.itemType.kind===e.itemType.kind&&typeof t.N=="number":t.kind===e.kind}const jJ=.96422,BJ=1,qJ=.82521,$J=4/29,Gp=6/29,VJ=3*Gp*Gp,y_e=Gp*Gp*Gp,__e=Math.PI/180,b_e=180/Math.PI;function UJ(t){return t=t%360,t<0&&(t+=360),t}function GJ([t,e,r,n]){t=RT(t),e=RT(e),r=RT(r);let i,l;const c=IT((.2225045*t+.7168786*e+.0606169*r)/BJ);t===e&&e===r?i=l=c:(i=IT((.4360747*t+.3850649*e+.1430804*r)/jJ),l=IT((.0139322*t+.0971045*e+.7141733*r)/qJ));const s=116*c-16;return[s<0?0:s,500*(i-c),200*(c-l),n]}function RT(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function IT(t){return t>y_e?Math.pow(t,1/3):t/VJ+$J}function HJ([t,e,r,n]){let i=(t+16)/116,l=isNaN(e)?i:i+e/500,c=isNaN(r)?i:i-r/200;return i=BJ*OT(i),l=jJ*OT(l),c=qJ*OT(c),[MT(3.1338561*l-1.6168667*i-.4906146*c),MT(-.9787684*l+1.9161415*i+.033454*c),MT(.0719453*l-.2289914*i+1.4052427*c),n]}function MT(t){return t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055,t<0?0:t>1?1:t}function OT(t){return t>Gp?t*t*t:VJ*(t-$J)}function v_e(t){const[e,r,n,i]=GJ(t),l=Math.sqrt(r*r+n*n);return[Math.round(l*1e4)?UJ(Math.atan2(n,r)*b_e):NaN,l,e,i]}function x_e([t,e,r,n]){return t=isNaN(t)?0:t*__e,HJ([r,Math.cos(t)*e,Math.sin(t)*e,n])}function w_e([t,e,r,n]){t=UJ(t),e/=100,r/=100;function i(l){const c=(l+t/30)%12,s=e*Math.min(r,1-r);return r-s*Math.max(-1,Math.min(c-3,9-c,1))}return[i(0),i(8),i(4),n]}const E_e=Object.hasOwn||function(e,r){return Object.prototype.hasOwnProperty.call(e,r)};function JJ(t,e){return E_e(t,e)?t[e]:void 0}function T_e(t){if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];const e=JJ(S_e,t);if(e){const[i,l,c]=e;return[i/255,l/255,c/255,1]}if(t.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){const l=t.length<6?1:2;let c=1;return[J0(t.slice(c,c+=l)),J0(t.slice(c,c+=l)),J0(t.slice(c,c+=l)),J0(t.slice(c,c+l)||"ff")]}if(t.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,l=t.match(i);if(l){const[c,s,p,g,_,x,P,A,M,F,z,j]=l,$=[g||" ",P||" ",F].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){const W=[p,x,M].join(""),X=W==="%%%"?100:W===""?255:0;if(X){const te=[Pp(+s/X,0,1),Pp(+_/X,0,1),Pp(+A/X,0,1),z?fD(+z,j):1];if(mD(te))return te}}return}}const r=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=t.match(r);if(n){const[i,l,c,s,p,g,_,x,P]=n,A=[c||" ",p||" ",_].join("");if(A==="  "||A==="  /"||A===",,"||A===",,,"){const M=[+l,Pp(+s,0,100),Pp(+g,0,100),x?fD(+x,P):1];if(mD(M))return w_e(M)}}}function J0(t){return parseInt(t.padEnd(2,t),16)/255}function fD(t,e){return Pp(e?t/100:t,0,1)}function Pp(t,e,r){return Math.min(Math.max(e,t),r)}function mD(t){return!t.some(Number.isNaN)}const S_e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ch(t,e,r){return t+r*(e-t)}function ky(t,e,r){return t.map((n,i)=>Ch(n,e[i],r))}class bn{constructor(e,r,n,i=1,l=!0){this.r=e,this.g=r,this.b=n,this.a=i,l||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,r,n,i]))}static parse(e){if(e instanceof bn)return e;if(typeof e!="string")return;const r=T_e(e);if(r)return new bn(...r,!1)}get rgb(){const{r:e,g:r,b:n,a:i}=this,l=i||1/0;return this.overwriteGetter("rgb",[e/l,r/l,n/l,i])}get hcl(){return this.overwriteGetter("hcl",v_e(this.rgb))}get lab(){return this.overwriteGetter("lab",GJ(this.rgb))}overwriteGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}toString(){const[e,r,n,i]=this.rgb;return`rgba(${[e,r,n].map(l=>Math.round(l*255)).join(",")},${i})`}static interpolate(e,r,n,i="rgb"){switch(i){case"rgb":{const[l,c,s,p]=ky(e.rgb,r.rgb,n);return new bn(l,c,s,p,!1)}case"hcl":{const[l,c,s,p]=e.hcl,[g,_,x,P]=r.hcl;let A,M;if(!isNaN(l)&&!isNaN(g)){let W=g-l;g>l&&W>180?W-=360:g<l&&l-g>180&&(W+=360),A=l+n*W}else isNaN(l)?isNaN(g)?A=NaN:(A=g,(s===1||s===0)&&(M=_)):(A=l,(x===1||x===0)&&(M=c));const[F,z,j,$]=x_e([A,M??Ch(c,_,n),Ch(s,x,n),Ch(p,P,n)]);return new bn(F,z,j,$,!1)}case"lab":{const[l,c,s,p]=HJ(ky(e.lab,r.lab,n));return new bn(l,c,s,p,!1)}}}}bn.black=new bn(0,0,0,1);bn.white=new bn(1,1,1,1);bn.transparent=new bn(0,0,0,0);bn.red=new bn(1,0,0,1);class WM{constructor(e,r,n){e?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const C_e=["bottom","center","top"];class fC{constructor(e,r,n,i,l,c){this.text=e,this.image=r,this.scale=n,this.fontStack=i,this.textColor=l,this.verticalAlign=c}}class Ol{constructor(e){this.sections=e}static fromString(e){return new Ol([new fC(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Ol?e:Ol.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class ra{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ra)return e;if(typeof e=="number")return new ra([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const r of e)if(typeof r!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new ra(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){return new ra(ky(e.values,r.values,n))}}class na{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof na)return e;if(typeof e=="number")return new na([e]);if(Array.isArray(e)){for(const r of e)if(typeof r!="number")return;return new na(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){return new na(ky(e.values,r.values,n))}}class cs{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof cs)return e;if(typeof e=="string"){const n=bn.parse(e);return n?new cs([n]):void 0}if(!Array.isArray(e))return;const r=[];for(const n of e){if(typeof n!="string")return;const i=bn.parse(n);if(!i)return;r.push(i)}return new cs(r)}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n,i="rgb"){const l=[];if(e.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let c=0;c<e.values.length;c++)l.push(bn.interpolate(e.values[c],r.values[c],n,i));return new cs(l)}}class Wn extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const P_e=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Fa{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Fa)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let r=0;r<e.length;r+=2){const n=e[r],i=e[r+1];if(typeof n!="string"||!P_e.has(n)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Fa(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){const i=e.values,l=r.values;if(i.length!==l.length)throw new Wn(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${r.toString()}`);const c=[];for(let s=0;s<i.length;s+=2){if(i[s]!==l[s])throw new Wn(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${i[s]}, to[${s}]: ${l[s]}`);c.push(i[s]);const[p,g]=i[s+1],[_,x]=l[s+1];c.push([Ch(p,_,n),Ch(g,x,n)])}return new Fa(c)}}class pu{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new pu({name:e,available:!1}):null}}class Qs{constructor(e,r,n){this.from=e,this.to=r,this.transition=n}static interpolate(e,r,n){return new Qs(e,r,n)}static parse(e){if(e instanceof Qs)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Qs(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Qs(e.from,e.to,e.transition);if(typeof e=="string")return new Qs(e,e,1)}}function WJ(t,e,r,n){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ly(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof Qs||t instanceof bn||t instanceof WM||t instanceof Ol||t instanceof ra||t instanceof na||t instanceof cs||t instanceof Fa||t instanceof pu)return!0;if(Array.isArray(t)){for(const e of t)if(!Ly(e))return!1;return!0}else if(typeof t=="object"){for(const e in t)if(!Ly(t[e]))return!1;return!0}else return!1}function xi(t){if(t===null)return Jx;if(typeof t=="string")return Ur;if(typeof t=="boolean")return zr;if(typeof t=="number")return Ft;if(t instanceof bn)return Na;if(t instanceof Qs)return Wx;if(t instanceof WM)return Zx;if(t instanceof Ol)return Kx;if(t instanceof ra)return Yx;if(t instanceof na)return Xx;if(t instanceof cs)return My;if(t instanceof Fa)return Qx;if(t instanceof pu)return b_;if(Array.isArray(t)){const e=t.length;let r;for(const n of t){const i=xi(n);if(!r)r=i;else{if(r===i)continue;r=Lr;break}}return as(r||Lr,e)}else return Th}function Gg(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof bn||t instanceof Qs||t instanceof Ol||t instanceof ra||t instanceof na||t instanceof cs||t instanceof Fa||t instanceof pu?t.toString():JSON.stringify(t)}class Tf{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ly(e[1]))return r.error("invalid value");const n=e[1];let i=xi(n);const l=r.expectedType;return i.kind==="array"&&i.N===0&&l&&l.kind==="array"&&(typeof l.N!="number"||l.N===0)&&(i=l),new Tf(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const W0={string:Ur,number:Ft,boolean:zr,object:Th};class ea{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=1,i;const l=e[0];if(l==="array"){let s;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in W0)||g==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);s=W0[g],n++}else s=Lr;let p;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);p=e[2],n++}i=as(s,p)}else{if(!W0[l])throw new Error(`Types doesn't contain name = ${l}`);i=W0[l]}const c=[];for(;n<e.length;n++){const s=r.parse(e[n],n,Lr);if(!s)return null;c.push(s)}return new ea(i,c)}evaluate(e){for(let r=0;r<this.args.length;r++){const n=this.args[r].evaluate(e);if(Oy(this.type,xi(n))){if(r===this.args.length-1)throw new Wn(`Expected value to be of type ${Gn(this.type)}, but found ${Gn(xi(n))} instead.`)}else return n}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const gD={"to-boolean":zr,"to-color":Na,"to-number":Ft,"to-string":Ur};class Vc{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const n=e[0];if(!gD[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if((n==="to-boolean"||n==="to-string")&&e.length!==2)return r.error("Expected one argument.");const i=gD[n],l=[];for(let c=1;c<e.length;c++){const s=r.parse(e[c],c,Lr);if(!s)return null;l.push(s)}return new Vc(i,l)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let r,n;for(const i of this.args){if(r=i.evaluate(e),n=null,r instanceof bn)return r;if(typeof r=="string"){const l=e.parseColor(r);if(l)return l}else if(Array.isArray(r)&&(r.length<3||r.length>4?n=`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:n=WJ(r[0],r[1],r[2],r[3]),!n))return new bn(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Wn(n||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const n of this.args){r=n.evaluate(e);const i=ra.parse(r);if(i)return i}throw new Wn(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"numberArray":{let r;for(const n of this.args){r=n.evaluate(e);const i=na.parse(r);if(i)return i}throw new Wn(`Could not parse numberArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"colorArray":{let r;for(const n of this.args){r=n.evaluate(e);const i=cs.parse(r);if(i)return i}throw new Wn(`Could not parse colorArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const n of this.args){r=n.evaluate(e);const i=Fa.parse(r);if(i)return i}throw new Wn(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const n of this.args){if(r=n.evaluate(e),r===null)return 0;const i=Number(r);if(!isNaN(i))return i}throw new Wn(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Ol.fromString(Gg(this.args[0].evaluate(e)));case"resolvedImage":return pu.fromString(Gg(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Gg(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const A_e=["Unknown","Point","LineString","Polygon"];class ZJ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?A_e[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let r=this._parseColorCache.get(e);return r||(r=bn.parse(e),this._parseColorCache.set(e,r)),r}}class ew{constructor(e,r,n=[],i,l=new HM,c=[]){this.registry=e,this.path=n,this.key=n.map(s=>`[${s}]`).join(""),this.scope=l,this.errors=c,this.expectedType=i,this._isConstant=r}parse(e,r,n,i,l={}){return r?this.concat(r,n,i)._parse(e,l):this._parse(e,l)}_parse(e,r){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(i,l,c){return c==="assert"?new ea(l,[i]):c==="coerce"?new Vc(l,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const l=this.registry[i];if(l){let c=l.parse(e,this);if(!c)return null;if(this.expectedType){const s=this.expectedType,p=c.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&p.kind==="value")c=n(c,s,r.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&["string","array"].includes(p.kind)||["color","formatted","resolvedImage"].includes(s.kind)&&["value","string"].includes(p.kind)||["padding","numberArray"].includes(s.kind)&&["value","number","array"].includes(p.kind)||s.kind==="colorArray"&&["value","string","array"].includes(p.kind)||s.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(p.kind))c=n(c,s,r.typeAnnotation||"coerce");else if(this.checkSubtype(s,p))return null}if(!(c instanceof Tf)&&c.type.kind!=="resolvedImage"&&this._isConstant(c)){const s=new ZJ;try{c=new Tf(c.type,c.evaluate(s))}catch(p){return this.error(p.message),null}}return c}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,r,n){const i=typeof e=="number"?this.path.concat(e):this.path,l=n?this.scope.concat(n):this.scope;return new ew(this.registry,this._isConstant,i,r||null,l,this.errors)}error(e,...r){const n=`${this.key}${r.map(i=>`[${i}]`).join("")}`;this.errors.push(new Ca(n,e))}checkSubtype(e,r){const n=Oy(e,r);return n&&this.error(n),n}}class tw{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let l=1;l<e.length-1;l+=2){const c=e[l];if(typeof c!="string")return r.error(`Expected string, but found ${typeof c} instead.`,l);if(/[^a-zA-Z0-9_]/.test(c))return r.error("Variable names must contain only alphanumeric characters or '_'.",l);const s=r.parse(e[l+1],l+1);if(!s)return null;n.push([c,s])}const i=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return i?new tw(n,i):null}outputDefined(){return this.result.outputDefined()}}class rw{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const n=e[1];return r.scope.has(n)?new rw(n,r.scope.get(n)):r.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class ZM{constructor(e,r,n){this.type=e,this.index=r,this.input=n}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Ft),i=r.parse(e[2],2,as(r.expectedType||Lr));if(!n||!i)return null;const l=i.type;return new ZM(l.itemType,n,i)}evaluate(e){const r=this.index.evaluate(e),n=this.input.evaluate(e);if(r<0)throw new Wn(`Array index out of bounds: ${r} < 0.`);if(r>=n.length)throw new Wn(`Array index out of bounds: ${r} > ${n.length-1}.`);if(r!==Math.floor(r))throw new Wn(`Array index must be an integer, but found ${r} instead.`);return n[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class KM{constructor(e,r){this.type=zr,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Lr),i=r.parse(e[2],2,Lr);return!n||!i?null:JM(n.type,[zr,Ur,Ft,Jx,Lr])?new KM(n,i):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(n.type)} instead`)}evaluate(e){const r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Sh(r,["boolean","string","number","null"]))throw new Wn(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(xi(r))} instead.`);if(!Sh(n,["string","array"]))throw new Wn(`Expected second argument to be of type array or string, but found ${Gn(xi(n))} instead.`);return n.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Vv{constructor(e,r,n){this.type=Ft,this.needle=e,this.haystack=r,this.fromIndex=n}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Lr),i=r.parse(e[2],2,Lr);if(!n||!i)return null;if(!JM(n.type,[zr,Ur,Ft,Jx,Lr]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(n.type)} instead`);if(e.length===4){const l=r.parse(e[3],3,Ft);return l?new Vv(n,i,l):null}else return new Vv(n,i)}evaluate(e){const r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Sh(r,["boolean","string","number","null"]))throw new Wn(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(xi(r))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Sh(n,["string"])){const l=n.indexOf(r,i);return l===-1?-1:[...n.slice(0,l)].length}else{if(Sh(n,["array"]))return n.indexOf(r,i);throw new Wn(`Expected second argument to be of type array or string, but found ${Gn(xi(n))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class YM{constructor(e,r,n,i,l,c){this.inputType=e,this.type=r,this.input=n,this.cases=i,this.outputs=l,this.otherwise=c}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return r.error("Expected an even number of arguments.");let n,i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);const l={},c=[];for(let g=2;g<e.length-1;g+=2){let _=e[g];const x=e[g+1];Array.isArray(_)||(_=[_]);const P=r.concat(g);if(_.length===0)return P.error("Expected at least one branch label.");for(const M of _){if(typeof M!="number"&&typeof M!="string")return P.error("Branch labels must be numbers or strings.");if(typeof M=="number"&&Math.abs(M)>Number.MAX_SAFE_INTEGER)return P.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof M=="number"&&Math.floor(M)!==M)return P.error("Numeric branch labels must be integer values.");if(!n)n=xi(M);else if(P.checkSubtype(n,xi(M)))return null;if(typeof l[String(M)]<"u")return P.error("Branch labels must be unique.");l[String(M)]=c.length}const A=r.parse(x,g,i);if(!A)return null;i=i||A.type,c.push(A)}const s=r.parse(e[1],1,Lr);if(!s)return null;const p=r.parse(e[e.length-1],e.length-1,i);return!p||s.type.kind!=="value"&&r.concat(1).checkSubtype(n,s.type)?null:new YM(n,i,s,l,c,p)}evaluate(e){const r=this.input.evaluate(e);return(xi(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class XM{constructor(e,r,n){this.type=e,this.branches=r,this.otherwise=n}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return r.error("Expected an odd number of arguments.");let n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);const i=[];for(let c=1;c<e.length-1;c+=2){const s=r.parse(e[c],c,zr);if(!s)return null;const p=r.parse(e[c+1],c+1,n);if(!p)return null;i.push([s,p]),n=n||p.type}const l=r.parse(e[e.length-1],e.length-1,n);if(!l)return null;if(!n)throw new Error("Can't infer output type");return new XM(n,i,l)}evaluate(e){for(const[r,n]of this.branches)if(r.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,n]of this.branches)e(r),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}}class Uv{constructor(e,r,n,i){this.type=e,this.input=r,this.beginIndex=n,this.endIndex=i}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Lr),i=r.parse(e[2],2,Ft);if(!n||!i)return null;if(!JM(n.type,[as(Lr),Ur,Lr]))return r.error(`Expected first argument to be of type array or string, but found ${Gn(n.type)} instead`);if(e.length===4){const l=r.parse(e[3],3,Ft);return l?new Uv(n.type,n,i,l):null}else return new Uv(n.type,n,i)}evaluate(e){const r=this.input.evaluate(e),n=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Sh(r,["string"]))return[...r].slice(n,i).join("");if(Sh(r,["array"]))return r.slice(n,i);throw new Wn(`Expected first argument to be of type array or string, but found ${Gn(xi(r))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function KJ(t,e){const r=t.length-1;let n=0,i=r,l=0,c,s;for(;n<=i;)if(l=Math.floor((n+i)/2),c=t[l],s=t[l+1],c<=e){if(l===r||e<s)return l;n=l+1}else if(c>e)i=l-1;else throw new Wn("Input is not a number.");return 0}class nw{constructor(e,r,n){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[i,l]of n)this.labels.push(i),this.outputs.push(l)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");const n=r.parse(e[1],1,Ft);if(!n)return null;const i=[];let l=null;r.expectedType&&r.expectedType.kind!=="value"&&(l=r.expectedType);for(let c=1;c<e.length;c+=2){const s=c===1?-1/0:e[c],p=e[c+1],g=c,_=c+1;if(typeof s!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const x=r.parse(p,_,l);if(!x)return null;l=l||x.type,i.push([s,x])}return new nw(l,n,i)}evaluate(e){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);const l=r.length;if(i>=r[l-1])return n[l-1].evaluate(e);const c=KJ(r,i);return n[c].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function R_e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kT,yD;function I_e(){if(yD)return kT;yD=1,kT=t;function t(e,r,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(i-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=i}return t.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var l=this.sampleCurveX(n)-e;if(Math.abs(l)<r)return n;var c=this.sampleCurveDerivativeX(n);if(Math.abs(c)<1e-6)break;n=n-l/c}var s=0,p=1;for(n=e,i=0;i<20&&(l=this.sampleCurveX(n),!(Math.abs(l-e)<r));i++)e>l?s=n:p=n,n=(p-s)*.5+s;return n},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},kT}var M_e=I_e(),O_e=R_e(M_e);class za{constructor(e,r,n,i,l){this.type=e,this.operator=r,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[c,s]of l)this.labels.push(c),this.outputs.push(s)}static interpolationFactor(e,r,n,i){let l=0;if(e.name==="exponential")l=LT(r,e.base,n,i);else if(e.name==="linear")l=LT(r,1,n,i);else if(e.name==="cubic-bezier"){const c=e.controlPoints;l=new O_e(c[0],c[1],c[2],c[3]).solve(LT(r,1,n,i))}return l}static parse(e,r){let[n,i,l,...c]=e;if(!Array.isArray(i)||i.length===0)return r.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(_=>typeof _!="number"||_<0||_>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return r.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(l=r.parse(l,2,Ft),!l)return null;const s=[];let p=null;(n==="interpolate-hcl"||n==="interpolate-lab")&&r.expectedType!=My?p=Na:r.expectedType&&r.expectedType.kind!=="value"&&(p=r.expectedType);for(let g=0;g<c.length;g+=2){const _=c[g],x=c[g+1],P=g+3,A=g+4;if(typeof _!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(s.length&&s[s.length-1][0]>=_)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',P);const M=r.parse(x,A,p);if(!M)return null;p=p||M.type,s.push([_,M])}return!wc(p,Ft)&&!wc(p,Wx)&&!wc(p,Na)&&!wc(p,Yx)&&!wc(p,Xx)&&!wc(p,My)&&!wc(p,Qx)&&!wc(p,as(Ft))?r.error(`Type ${Gn(p)} is not interpolatable.`):new za(p,n,i,l,s)}evaluate(e){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);const l=r.length;if(i>=r[l-1])return n[l-1].evaluate(e);const c=KJ(r,i),s=r[c],p=r[c+1],g=za.interpolationFactor(this.interpolation,i,s,p),_=n[c].evaluate(e),x=n[c+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ch(_,x,g);case"color":return bn.interpolate(_,x,g);case"padding":return ra.interpolate(_,x,g);case"colorArray":return cs.interpolate(_,x,g);case"numberArray":return na.interpolate(_,x,g);case"variableAnchorOffsetCollection":return Fa.interpolate(_,x,g);case"array":return ky(_,x,g);case"projectionDefinition":return Qs.interpolate(_,x,g)}case"interpolate-hcl":switch(this.type.kind){case"color":return bn.interpolate(_,x,g,"hcl");case"colorArray":return cs.interpolate(_,x,g,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return bn.interpolate(_,x,g,"lab");case"colorArray":return cs.interpolate(_,x,g,"lab")}}}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function LT(t,e,r,n){const i=n-r,l=t-r;return i===0?0:e===1?l/i:(Math.pow(e,l)-1)/(Math.pow(e,i)-1)}class Dy{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=null;const i=r.expectedType;i&&i.kind!=="value"&&(n=i);const l=[];for(const s of e.slice(1)){const p=r.parse(s,1+l.length,n,void 0,{typeAnnotation:"omit"});if(!p)return null;n=n||p.type,l.push(p)}if(!n)throw new Error("No output type");return i&&l.some(s=>Oy(i,s.type))?new Dy(Lr,l):new Dy(n,l)}evaluate(e){let r=null,n=0,i;for(const l of this.args)if(n++,r=l.evaluate(e),r&&r instanceof pu&&!r.available&&(i||(i=r.name),r=null,n===this.args.length&&(r=i)),r!==null)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function _D(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function k_e(t,e,r){return e===r}function L_e(t,e,r){return e!==r}function D_e(t,e,r){return e<r}function N_e(t,e,r){return e>r}function F_e(t,e,r){return e<=r}function z_e(t,e,r){return e>=r}function YJ(t,e,r,n){return n.compare(e,r)===0}function j_e(t,e,r,n){return!YJ(t,e,r,n)}function B_e(t,e,r,n){return n.compare(e,r)<0}function q_e(t,e,r,n){return n.compare(e,r)>0}function $_e(t,e,r,n){return n.compare(e,r)<=0}function V_e(t,e,r,n){return n.compare(e,r)>=0}function qf(t,e,r){const n=t!=="=="&&t!=="!=";return class XJ{constructor(l,c,s){this.type=zr,this.lhs=l,this.rhs=c,this.collator=s,this.hasUntypedArgument=l.type.kind==="value"||c.type.kind==="value"}static parse(l,c){if(l.length!==3&&l.length!==4)return c.error("Expected two or three arguments.");const s=l[0];let p=c.parse(l[1],1,Lr);if(!p)return null;if(!_D(s,p.type))return c.concat(1).error(`"${s}" comparisons are not supported for type '${Gn(p.type)}'.`);let g=c.parse(l[2],2,Lr);if(!g)return null;if(!_D(s,g.type))return c.concat(2).error(`"${s}" comparisons are not supported for type '${Gn(g.type)}'.`);if(p.type.kind!==g.type.kind&&p.type.kind!=="value"&&g.type.kind!=="value")return c.error(`Cannot compare types '${Gn(p.type)}' and '${Gn(g.type)}'.`);n&&(p.type.kind==="value"&&g.type.kind!=="value"?p=new ea(g.type,[p]):p.type.kind!=="value"&&g.type.kind==="value"&&(g=new ea(p.type,[g])));let _=null;if(l.length===4){if(p.type.kind!=="string"&&g.type.kind!=="string"&&p.type.kind!=="value"&&g.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(_=c.parse(l[3],3,Zx),!_)return null}return new XJ(p,g,_)}evaluate(l){const c=this.lhs.evaluate(l),s=this.rhs.evaluate(l);if(n&&this.hasUntypedArgument){const p=xi(c),g=xi(s);if(p.kind!==g.kind||!(p.kind==="string"||p.kind==="number"))throw new Wn(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${p.kind}, ${g.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const p=xi(c),g=xi(s);if(p.kind!=="string"||g.kind!=="string")return e(l,c,s)}return this.collator?r(l,c,s,this.collator.evaluate(l)):e(l,c,s)}eachChild(l){l(this.lhs),l(this.rhs),this.collator&&l(this.collator)}outputDefined(){return!0}}}const U_e=qf("==",k_e,YJ),G_e=qf("!=",L_e,j_e),H_e=qf("<",D_e,B_e),J_e=qf(">",N_e,q_e),W_e=qf("<=",F_e,$_e),Z_e=qf(">=",z_e,V_e);class iw{constructor(e,r,n){this.type=Zx,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");const i=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,zr);if(!i)return null;const l=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,zr);if(!l)return null;let c=null;return n.locale&&(c=r.parse(n.locale,1,Ur),!c)?null:new iw(i,l,c)}evaluate(e){return new WM(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class QM{constructor(e,r,n,i,l){this.type=Ur,this.number=e,this.locale=r,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=l}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const n=r.parse(e[1],1,Ft);if(!n)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return r.error("NumberFormat options argument must be an object.");let l=null;if(i.locale&&(l=r.parse(i.locale,1,Ur),!l))return null;let c=null;if(i.currency&&(c=r.parse(i.currency,1,Ur),!c))return null;let s=null;if(i["min-fraction-digits"]&&(s=r.parse(i["min-fraction-digits"],1,Ft),!s))return null;let p=null;return i["max-fraction-digits"]&&(p=r.parse(i["max-fraction-digits"],1,Ft),!p)?null:new QM(n,l,c,s,p)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class e5{constructor(e){this.type=Kx,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");const i=[];let l=!1;for(let c=1;c<=e.length-1;++c){const s=e[c];if(l&&typeof s=="object"&&!Array.isArray(s)){l=!1;let p=null;if(s["font-scale"]&&(p=r.parse(s["font-scale"],1,Ft),!p))return null;let g=null;if(s["text-font"]&&(g=r.parse(s["text-font"],1,as(Ur)),!g))return null;let _=null;if(s["text-color"]&&(_=r.parse(s["text-color"],1,Na),!_))return null;let x=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!C_e.includes(s["vertical-align"]))return r.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(x=r.parse(s["vertical-align"],1,Ur),!x)return null}const P=i[i.length-1];P.scale=p,P.font=g,P.textColor=_,P.verticalAlign=x}else{const p=r.parse(e[c],1,Lr);if(!p)return null;const g=p.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");l=!0,i.push({content:p,scale:null,font:null,textColor:null,verticalAlign:null})}}return new e5(i)}evaluate(e){const r=n=>{const i=n.content.evaluate(e);return xi(i)===b_?new fC("",i,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(e):null):new fC(Gg(i),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null,n.verticalAlign?n.verticalAlign.evaluate(e):null)};return new Ol(this.sections.map(r))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor),r.verticalAlign&&e(r.verticalAlign)}outputDefined(){return!1}}class t5{constructor(e){this.type=b_,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const n=r.parse(e[1],1,Ur);return n?new t5(n):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),n=pu.fromString(r);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(r)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class r5{constructor(e){this.type=Ft,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=r.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Gn(n.type)} instead.`):new r5(n):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new Wn(`Expected value to be of type string or array, but found ${Gn(xi(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const ja=8192;function K_e(t,e){const r=Y_e(t[0]),n=Q_e(t[1]),i=Math.pow(2,e.z);return[Math.round(r*i*ja),Math.round(n*i*ja)]}function n5(t,e){const r=Math.pow(2,e.z),n=(t[0]/ja+e.x)/r,i=(t[1]/ja+e.y)/r;return[X_e(n),e0e(i)]}function Y_e(t){return(180+t)/360}function X_e(t){return t*360-180}function Q_e(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function e0e(t){return 360/Math.PI*Math.atan(Math.exp((180-t*360)*Math.PI/180))-90}function v_(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ny(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function t0e(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function r0e(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],l=t[0]-r[0],c=t[1]-r[1];return n*c-l*i===0&&n*l<=0&&i*c<=0}function ow(t,e,r,n){const i=[e[0]-t[0],e[1]-t[1]],l=[n[0]-r[0],n[1]-r[1]];return s0e(l,i)===0?!1:!!(bD(t,e,r,n)&&bD(r,n,t,e))}function n0e(t,e,r){for(const n of r)for(let i=0;i<n.length-1;++i)if(ow(t,e,n[i],n[i+1]))return!0;return!1}function $f(t,e,r=!1){let n=!1;for(const i of e)for(let l=0;l<i.length-1;l++){if(r0e(t,i[l],i[l+1]))return r;t0e(t,i[l],i[l+1])&&(n=!n)}return n}function i0e(t,e){for(const r of e)if($f(t,r))return!0;return!1}function QJ(t,e){for(const r of t)if(!$f(r,e))return!1;for(let r=0;r<t.length-1;++r)if(n0e(t[r],t[r+1],e))return!1;return!0}function o0e(t,e){for(const r of e)if(QJ(t,r))return!0;return!1}function s0e(t,e){return t[0]*e[1]-t[1]*e[0]}function bD(t,e,r,n){const i=t[0]-r[0],l=t[1]-r[1],c=e[0]-r[0],s=e[1]-r[1],p=n[0]-r[0],g=n[1]-r[1],_=i*g-p*l,x=c*g-p*s;return _>0&&x<0||_<0&&x>0}function i5(t,e,r){const n=[];for(let i=0;i<t.length;i++){const l=[];for(let c=0;c<t[i].length;c++){const s=K_e(t[i][c],r);v_(e,s),l.push(s)}n.push(l)}return n}function eW(t,e,r){const n=[];for(let i=0;i<t.length;i++){const l=i5(t[i],e,r);n.push(l)}return n}function tW(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const i=n*.5;let l=t[0]-r[0]>i?-n:r[0]-t[0]>i?n:0;l===0&&(l=t[0]-r[2]>i?-n:r[2]-t[0]>i?n:0),t[0]+=l}v_(e,t)}function a0e(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function vD(t,e,r,n){const i=Math.pow(2,n.z)*ja,l=[n.x*ja,n.y*ja],c=[];for(const s of t)for(const p of s){const g=[p.x+l[0],p.y+l[1]];tW(g,e,r,i),c.push(g)}return c}function xD(t,e,r,n){const i=Math.pow(2,n.z)*ja,l=[n.x*ja,n.y*ja],c=[];for(const s of t){const p=[];for(const g of s){const _=[g.x+l[0],g.y+l[1]];v_(e,_),p.push(_)}c.push(p)}if(e[2]-e[0]<=i/2){a0e(e);for(const s of c)for(const p of s)tW(p,e,r,i)}return c}function l0e(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(e.type==="Polygon"){const l=i5(e.coordinates,n,i),c=vD(t.geometry(),r,n,i);if(!Ny(r,n))return!1;for(const s of c)if(!$f(s,l))return!1}if(e.type==="MultiPolygon"){const l=eW(e.coordinates,n,i),c=vD(t.geometry(),r,n,i);if(!Ny(r,n))return!1;for(const s of c)if(!i0e(s,l))return!1}return!0}function c0e(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(e.type==="Polygon"){const l=i5(e.coordinates,n,i),c=xD(t.geometry(),r,n,i);if(!Ny(r,n))return!1;for(const s of c)if(!QJ(s,l))return!1}if(e.type==="MultiPolygon"){const l=eW(e.coordinates,n,i),c=xD(t.geometry(),r,n,i);if(!Ny(r,n))return!1;for(const s of c)if(!o0e(s,l))return!1}return!0}class Ph{constructor(e,r){this.type=zr,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ly(e[1])){const n=e[1];if(n.type==="FeatureCollection"){const i=[];for(const l of n.features){const{type:c,coordinates:s}=l.geometry;c==="Polygon"&&i.push(s),c==="MultiPolygon"&&i.push(...s)}if(i.length){const l={type:"MultiPolygon",coordinates:i};return new Ph(n,l)}}else if(n.type==="Feature"){const i=n.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Ph(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new Ph(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return l0e(e,this.geometries);if(e.geometryType()==="LineString")return c0e(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class rW{constructor(e=[],r=(n,i)=>n<i?-1:n>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:n}=this,i=r[e];for(;e>0;){const l=e-1>>1,c=r[l];if(n(i,c)>=0)break;r[e]=c,e=l}r[e]=i}_down(e){const{data:r,compare:n}=this,i=this.length>>1,l=r[e];for(;e<i;){let c=(e<<1)+1;const s=c+1;if(s<this.length&&n(r[s],r[c])<0&&(c=s),n(r[c],l)>=0)break;r[e]=r[c],e=c}r[e]=l}}function u0e(t,e){if(t.length<=1)return[t];const n=[];let i,l;for(const c of t){const s=h0e(c);s!==0&&(c.area=Math.abs(s),l===void 0&&(l=s<0),l===s<0?(i&&n.push(i),i=[c]):i.push(c))}return i&&n.push(i),n}function h0e(t){let e=0;for(let r=0,n=t.length,i=n-1,l,c;r<n;i=r++)l=t[r],c=t[i],e+=(c.x-l.x)*(l.y+c.y);return e}const d0e=6378.137,wD=1/298.257223563,ED=wD*(2-wD),TD=Math.PI/180;class o5{constructor(e){const r=TD*d0e*1e3,n=Math.cos(e*TD),i=1/(1-ED*(1-n*n)),l=Math.sqrt(i);this.kx=r*l*n,this.ky=r*l*i*(1-ED)}distance(e,r){const n=this.wrap(e[0]-r[0])*this.kx,i=(e[1]-r[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(e,r){let n=1/0,i,l,c,s;for(let p=0;p<e.length-1;p++){let g=e[p][0],_=e[p][1],x=this.wrap(e[p+1][0]-g)*this.kx,P=(e[p+1][1]-_)*this.ky,A=0;(x!==0||P!==0)&&(A=(this.wrap(r[0]-g)*this.kx*x+(r[1]-_)*this.ky*P)/(x*x+P*P),A>1?(g=e[p+1][0],_=e[p+1][1]):A>0&&(g+=x/this.kx*A,_+=P/this.ky*A)),x=this.wrap(r[0]-g)*this.kx,P=(r[1]-_)*this.ky;const M=x*x+P*P;M<n&&(n=M,i=g,l=_,c=p,s=A)}return{point:[i,l],index:c,t:Math.max(0,Math.min(1,s))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const mC=100,gC=50;function nW(t,e){return e[0]-t[0]}function Gv(t){return t[1]-t[0]+1}function zl(t,e){return t[1]>=t[0]&&t[1]<e}function yC(t,e){if(t[0]>t[1])return[null,null];const r=Gv(t);if(e){if(r===2)return[t,null];const i=Math.floor(r/2);return[[t[0],t[0]+i],[t[0]+i,t[1]]]}if(r===1)return[t,null];const n=Math.floor(r/2)-1;return[[t[0],t[0]+n],[t[0]+n+1,t[1]]]}function _C(t,e){if(!zl(e,t.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let n=e[0];n<=e[1];++n)v_(r,t[n]);return r}function bC(t){const e=[1/0,1/0,-1/0,-1/0];for(const r of t)for(const n of r)v_(e,n);return e}function SD(t){return t[0]!==-1/0&&t[1]!==-1/0&&t[2]!==1/0&&t[3]!==1/0}function s5(t,e,r){if(!SD(t)||!SD(e))return NaN;let n=0,i=0;return t[2]<e[0]&&(n=e[0]-t[2]),t[0]>e[2]&&(n=t[0]-e[2]),t[1]>e[3]&&(i=t[1]-e[3]),t[3]<e[1]&&(i=e[1]-t[3]),r.distance([0,0],[n,i])}function mh(t,e,r){const n=r.pointOnLine(e,t);return r.distance(t,n.point)}function a5(t,e,r,n,i){const l=Math.min(mh(t,[r,n],i),mh(e,[r,n],i)),c=Math.min(mh(r,[t,e],i),mh(n,[t,e],i));return Math.min(l,c)}function p0e(t,e,r,n,i){if(!(zl(e,t.length)&&zl(n,r.length)))return 1/0;let c=1/0;for(let s=e[0];s<e[1];++s){const p=t[s],g=t[s+1];for(let _=n[0];_<n[1];++_){const x=r[_],P=r[_+1];if(ow(p,g,x,P))return 0;c=Math.min(c,a5(p,g,x,P,i))}}return c}function f0e(t,e,r,n,i){if(!(zl(e,t.length)&&zl(n,r.length)))return NaN;let c=1/0;for(let s=e[0];s<=e[1];++s)for(let p=n[0];p<=n[1];++p)if(c=Math.min(c,i.distance(t[s],r[p])),c===0)return c;return c}function m0e(t,e,r){if($f(t,e,!0))return 0;let n=1/0;for(const i of e){const l=i[0],c=i[i.length-1];if(l!==c&&(n=Math.min(n,mh(t,[c,l],r)),n===0))return n;const s=r.pointOnLine(i,t);if(n=Math.min(n,r.distance(t,s.point)),n===0)return n}return n}function g0e(t,e,r,n){if(!zl(e,t.length))return NaN;for(let l=e[0];l<=e[1];++l)if($f(t[l],r,!0))return 0;let i=1/0;for(let l=e[0];l<e[1];++l){const c=t[l],s=t[l+1];for(const p of r)for(let g=0,_=p.length,x=_-1;g<_;x=g++){const P=p[x],A=p[g];if(ow(c,s,P,A))return 0;i=Math.min(i,a5(c,s,P,A,n))}}return i}function CD(t,e){for(const r of t)for(const n of r)if($f(n,e,!0))return!0;return!1}function y0e(t,e,r,n=1/0){const i=bC(t),l=bC(e);if(n!==1/0&&s5(i,l,r)>=n)return n;if(Ny(i,l)){if(CD(t,e))return 0}else if(CD(e,t))return 0;let c=1/0;for(const s of t)for(let p=0,g=s.length,_=g-1;p<g;_=p++){const x=s[_],P=s[p];for(const A of e)for(let M=0,F=A.length,z=F-1;M<F;z=M++){const j=A[z],$=A[M];if(ow(x,P,j,$))return 0;c=Math.min(c,a5(x,P,j,$,r))}}return c}function PD(t,e,r,n,i,l){if(!l)return;const c=s5(_C(n,l),i,r);c<e&&t.push([c,l,[0,0]])}function Z0(t,e,r,n,i,l,c){if(!l||!c)return;const s=s5(_C(n,l),_C(i,c),r);s<e&&t.push([s,l,c])}function Hv(t,e,r,n,i=1/0){let l=Math.min(n.distance(t[0],r[0][0]),i);if(l===0)return l;const c=new rW([[0,[0,t.length-1],[0,0]]],nW),s=bC(r);for(;c.length>0;){const p=c.pop();if(p[0]>=l)continue;const g=p[1],_=e?gC:mC;if(Gv(g)<=_){if(!zl(g,t.length))return NaN;if(e){const x=g0e(t,g,r,n);if(isNaN(x)||x===0)return x;l=Math.min(l,x)}else for(let x=g[0];x<=g[1];++x){const P=m0e(t[x],r,n);if(l=Math.min(l,P),l===0)return 0}}else{const x=yC(g,e);PD(c,l,n,t,s,x[0]),PD(c,l,n,t,s,x[1])}}return l}function Jv(t,e,r,n,i,l=1/0){let c=Math.min(l,i.distance(t[0],r[0]));if(c===0)return c;const s=new rW([[0,[0,t.length-1],[0,r.length-1]]],nW);for(;s.length>0;){const p=s.pop();if(p[0]>=c)continue;const g=p[1],_=p[2],x=e?gC:mC,P=n?gC:mC;if(Gv(g)<=x&&Gv(_)<=P){if(!zl(g,t.length)&&zl(_,r.length))return NaN;let A;if(e&&n)A=p0e(t,g,r,_,i),c=Math.min(c,A);else if(e&&!n){const M=t.slice(g[0],g[1]+1);for(let F=_[0];F<=_[1];++F)if(A=mh(r[F],M,i),c=Math.min(c,A),c===0)return c}else if(!e&&n){const M=r.slice(_[0],_[1]+1);for(let F=g[0];F<=g[1];++F)if(A=mh(t[F],M,i),c=Math.min(c,A),c===0)return c}else A=f0e(t,g,r,_,i),c=Math.min(c,A)}else{const A=yC(g,e),M=yC(_,n);Z0(s,c,i,t,r,A[0],M[0]),Z0(s,c,i,t,r,A[0],M[1]),Z0(s,c,i,t,r,A[1],M[0]),Z0(s,c,i,t,r,A[1],M[1])}}return c}function _0e(t,e){const r=t.geometry(),n=r.flat().map(c=>n5([c.x,c.y],t.canonical));if(r.length===0)return NaN;const i=new o5(n[0][1]);let l=1/0;for(const c of e){switch(c.type){case"Point":l=Math.min(l,Jv(n,!1,[c.coordinates],!1,i,l));break;case"LineString":l=Math.min(l,Jv(n,!1,c.coordinates,!0,i,l));break;case"Polygon":l=Math.min(l,Hv(n,!1,c.coordinates,i,l));break}if(l===0)return l}return l}function b0e(t,e){const r=t.geometry(),n=r.flat().map(c=>n5([c.x,c.y],t.canonical));if(r.length===0)return NaN;const i=new o5(n[0][1]);let l=1/0;for(const c of e){switch(c.type){case"Point":l=Math.min(l,Jv(n,!0,[c.coordinates],!1,i,l));break;case"LineString":l=Math.min(l,Jv(n,!0,c.coordinates,!0,i,l));break;case"Polygon":l=Math.min(l,Hv(n,!0,c.coordinates,i,l));break}if(l===0)return l}return l}function v0e(t,e){const r=t.geometry();if(r.length===0||r[0].length===0)return NaN;const n=u0e(r).map(c=>c.map(s=>s.map(p=>n5([p.x,p.y],t.canonical)))),i=new o5(n[0][0][0][1]);let l=1/0;for(const c of e)for(const s of n){switch(c.type){case"Point":l=Math.min(l,Hv([c.coordinates],!1,s,i,l));break;case"LineString":l=Math.min(l,Hv(c.coordinates,!0,s,i,l));break;case"Polygon":l=Math.min(l,y0e(s,c.coordinates,i,l));break}if(l===0)return l}return l}function DT(t){return t.type==="MultiPolygon"?t.coordinates.map(e=>({type:"Polygon",coordinates:e})):t.type==="MultiLineString"?t.coordinates.map(e=>({type:"LineString",coordinates:e})):t.type==="MultiPoint"?t.coordinates.map(e=>({type:"Point",coordinates:e})):[t]}class Ah{constructor(e,r){this.type=Ft,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ly(e[1])){const n=e[1];if(n.type==="FeatureCollection")return new Ah(n,n.features.map(i=>DT(i.geometry)).flat());if(n.type==="Feature")return new Ah(n,DT(n.geometry));if("type"in n&&"coordinates"in n)return new Ah(n,DT(n))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return _0e(e,this.geometries);if(e.geometryType()==="LineString")return b0e(e,this.geometries);if(e.geometryType()==="Polygon")return v0e(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class x_{constructor(e){this.type=Lr,this.key=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=e[1];return n==null?r.error("Global state property must be defined."):typeof n!="string"?r.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new x_(n)}evaluate(e){var r;const n=(r=e.globals)===null||r===void 0?void 0:r.globalState;return!n||Object.keys(n).length===0?null:JJ(n,this.key)}eachChild(){}outputDefined(){return!1}}const sw={"==":U_e,"!=":G_e,">":J_e,"<":H_e,">=":Z_e,"<=":W_e,array:ea,at:ZM,boolean:ea,case:XM,coalesce:Dy,collator:iw,format:e5,image:t5,in:KM,"index-of":Vv,interpolate:za,"interpolate-hcl":za,"interpolate-lab":za,length:r5,let:tw,literal:Tf,match:YM,number:ea,"number-format":QM,object:ea,slice:Uv,step:nw,string:ea,"to-boolean":Vc,"to-color":Vc,"to-number":Vc,"to-string":Vc,var:rw,within:Ph,distance:Ah,"global-state":x_};class us{constructor(e,r,n,i){this.name=e,this.type=r,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,r){const n=e[0],i=us.definitions[n];if(!i)return r.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const l=Array.isArray(i)?i[0]:i.type,c=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=c.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let p=null;for(const[g,_]of s){p=new ew(r.registry,Wv,r.path,null,r.scope);const x=[];let P=!1;for(let A=1;A<e.length;A++){const M=e[A],F=Array.isArray(g)?g[A-1]:g.type,z=p.parse(M,1+x.length,F);if(!z){P=!0;break}x.push(z)}if(!P){if(Array.isArray(g)&&g.length!==x.length){p.error(`Expected ${g.length} arguments, but found ${x.length} instead.`);continue}for(let A=0;A<x.length;A++){const M=Array.isArray(g)?g[A]:g.type,F=x[A];p.concat(A+1).checkSubtype(M,F.type)}if(p.errors.length===0)return new us(n,l,_,x)}}if(s.length===1)r.errors.push(...p.errors);else{const _=(s.length?s:c).map(([P])=>w0e(P)).join(" | "),x=[];for(let P=1;P<e.length;P++){const A=r.parse(e[P],1+x.length);if(!A)return null;x.push(Gn(A.type))}r.error(`Expected arguments of type ${_}, but found (${x.join(", ")}) instead.`)}return null}static register(e,r){us.definitions=r;for(const n in r)e[n]=us}}function AD(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const l=i?i.evaluate(t):1,c=WJ(e,r,n,l);if(c)throw new Wn(c);return new bn(e/255,r/255,n/255,l,!1)}function RD(t,e){return t in e}function NT(t,e){const r=e[t];return typeof r>"u"?null:r}function x0e(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}function Yu(t){return{type:t}}us.register(sw,{error:[m_e,[Ur],(t,[e])=>{throw new Wn(e.evaluate(t))}],typeof:[Ur,[Lr],(t,[e])=>Gn(xi(e.evaluate(t)))],"to-rgba":[as(Ft,4),[Na],(t,[e])=>{const[r,n,i,l]=e.evaluate(t).rgb;return[r*255,n*255,i*255,l]}],rgb:[Na,[Ft,Ft,Ft],AD],rgba:[Na,[Ft,Ft,Ft,Ft],AD],has:{type:zr,overloads:[[[Ur],(t,[e])=>RD(e.evaluate(t),t.properties())],[[Ur,Th],(t,[e,r])=>RD(e.evaluate(t),r.evaluate(t))]]},get:{type:Lr,overloads:[[[Ur],(t,[e])=>NT(e.evaluate(t),t.properties())],[[Ur,Th],(t,[e,r])=>NT(e.evaluate(t),r.evaluate(t))]]},"feature-state":[Lr,[Ur],(t,[e])=>NT(e.evaluate(t),t.featureState||{})],properties:[Th,[],t=>t.properties()],"geometry-type":[Ur,[],t=>t.geometryType()],id:[Lr,[],t=>t.id()],zoom:[Ft,[],t=>t.globals.zoom],"heatmap-density":[Ft,[],t=>t.globals.heatmapDensity||0],elevation:[Ft,[],t=>t.globals.elevation||0],"line-progress":[Ft,[],t=>t.globals.lineProgress||0],accumulated:[Lr,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[Ft,Yu(Ft),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[Ft,Yu(Ft),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:Ft,overloads:[[[Ft,Ft],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[Ft],(t,[e])=>-e.evaluate(t)]]},"/":[Ft,[Ft,Ft],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[Ft,[Ft,Ft],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[Ft,[],()=>Math.LN2],pi:[Ft,[],()=>Math.PI],e:[Ft,[],()=>Math.E],"^":[Ft,[Ft,Ft],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[Ft,[Ft],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ft,[Ft],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ft,[Ft],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ft,[Ft],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ft,[Ft],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ft,[Ft],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ft,[Ft],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ft,[Ft],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ft,[Ft],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ft,[Ft],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ft,Yu(Ft),(t,e)=>Math.min(...e.map(r=>r.evaluate(t)))],max:[Ft,Yu(Ft),(t,e)=>Math.max(...e.map(r=>r.evaluate(t)))],abs:[Ft,[Ft],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ft,[Ft],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ft,[Ft],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ft,[Ft],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[zr,[Ur,Lr],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[zr,[Lr],(t,[e])=>t.id()===e.value],"filter-type-==":[zr,[Ur],(t,[e])=>t.geometryType()===e.value],"filter-<":[zr,[Ur,Lr],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[zr,[Lr],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[zr,[Ur,Lr],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[zr,[Lr],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[zr,[Ur,Lr],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[zr,[Lr],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[zr,[Ur,Lr],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[zr,[Lr],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[zr,[Lr],(t,[e])=>e.value in t.properties()],"filter-has-id":[zr,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[zr,[as(Ur)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[zr,[as(Lr)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[zr,[Ur,as(Lr)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[zr,[Ur,as(Lr)],(t,[e,r])=>x0e(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:zr,overloads:[[[zr,zr],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[Yu(zr),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:zr,overloads:[[[zr,zr],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[Yu(zr),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[zr,[zr],(t,[e])=>!e.evaluate(t)],"is-supported-script":[zr,[Ur],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return r?r(e.evaluate(t)):!0}],upcase:[Ur,[Ur],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Ur,[Ur],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Ur,Yu(Lr),(t,e)=>e.map(r=>Gg(r.evaluate(t))).join("")],"resolved-locale":[Ur,[Zx],(t,[e])=>e.evaluate(t).resolvedLocale()]});function w0e(t){return Array.isArray(t)?`(${t.map(Gn).join(", ")})`:`(${Gn(t.type)}...)`}function Wv(t){if(t instanceof rw)return Wv(t.boundExpression);if(t instanceof us&&t.name==="error")return!1;if(t instanceof iw)return!1;if(t instanceof Ph)return!1;if(t instanceof Ah)return!1;if(t instanceof x_)return!1;const e=t instanceof Vc||t instanceof ea;let r=!0;return t.eachChild(n=>{e?r=r&&Wv(n):r=r&&n instanceof Tf}),r?l5(t)&&u5(t,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function l5(t){if(t instanceof us){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ph||t instanceof Ah)return!1;let e=!0;return t.eachChild(r=>{e&&!l5(r)&&(e=!1)}),e}function c5(t){if(t instanceof us&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(r=>{e&&!c5(r)&&(e=!1)}),e}function u5(t,e){if(t instanceof us&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(n=>{r&&!u5(n,e)&&(r=!1)}),r}function vC(t){return{result:"success",value:t}}function Ap(t){return{result:"error",value:t}}function E0e(t){return t["property-type"]==="data-driven"||t["property-type"]==="cross-faded-data-driven"}function T0e(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function S0e(t){return!!t.expression&&t.expression.interpolated}function iW(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&xi(t)===Th}class C0e{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new ZJ,this._defaultValue=r?I0e(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,n,i,l,c){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=c,this.expression.evaluate(this._evaluator)}evaluate(e,r,n,i,l,c){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=c||null;try{const s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new Wn(`Expected value to be one of ${Object.keys(this._enumValues).map(p=>JSON.stringify(p)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}}function P0e(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in sw}function oW(t,e){const r=new ew(sw,Wv,[],e?R0e(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?vC(new C0e(n,e)):Ap(r.errors)}class ID{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!c5(r.expression),this.globalStateRefs=aw(r.expression)}evaluateWithoutErrorHandling(e,r,n,i,l,c){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,i,l,c)}evaluate(e,r,n,i,l,c){return this._styleExpression.evaluate(e,r,n,i,l,c)}}class MD{constructor(e,r,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!c5(r.expression),this.globalStateRefs=aw(r.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,r,n,i,l,c){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,i,l,c)}evaluate(e,r,n,i,l,c){return this._styleExpression.evaluate(e,r,n,i,l,c)}interpolationFactor(e,r,n){return this.interpolationType?za.interpolationFactor(this.interpolationType,e,r,n):0}}function A0e(t,e){const r=oW(t,e);if(r.result==="error")return r;const n=r.value.expression,i=l5(n);if(!i&&!E0e(e))return Ap([new Ca("","data expressions not supported")]);const l=u5(n,["zoom"]);if(!l&&!T0e(e))return Ap([new Ca("","zoom expressions not supported")]);const c=Eb(n);if(!c&&!l)return Ap([new Ca("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(c instanceof Ca)return Ap([c]);if(c instanceof za&&!S0e(e))return Ap([new Ca("",'"interpolate" expressions cannot be used with this property')]);if(!c)return vC(i?new ID("constant",r.value):new ID("source",r.value));const s=c instanceof za?c.interpolation:void 0;return vC(i?new MD("camera",r.value,c.labels,s):new MD("composite",r.value,c.labels,s))}function Eb(t){let e=null;if(t instanceof tw)e=Eb(t.result);else if(t instanceof Dy){for(const r of t.args)if(e=Eb(r),e)break}else(t instanceof nw||t instanceof za)&&t.input instanceof us&&t.input.name==="zoom"&&(e=t);return e instanceof Ca||t.eachChild(r=>{const n=Eb(r);n instanceof Ca?e=n:!e&&n?e=new Ca("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new Ca("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function aw(t,e=new Set){return t instanceof x_&&e.add(t.key),t.eachChild(r=>{aw(r,e)}),e}function R0e(t){const e={color:Na,string:Ur,number:Ft,enum:Ur,boolean:zr,formatted:Kx,padding:Yx,numberArray:Xx,colorArray:My,projectionDefinition:Wx,resolvedImage:b_,variableAnchorOffsetCollection:Qx};return t.type==="array"?as(e[t.value]||Lr,t.length):e[t.type]}function I0e(t){if(t.type==="color"&&iW(t.default))return new bn(0,0,0,0);switch(t.type){case"color":return bn.parse(t.default)||null;case"padding":return ra.parse(t.default)||null;case"numberArray":return na.parse(t.default)||null;case"colorArray":return cs.parse(t.default)||null;case"variableAnchorOffsetCollection":return Fa.parse(t.default)||null;case"projectionDefinition":return Qs.parse(t.default)||null;default:return t.default===void 0?null:t.default}}function sW(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!sW(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const M0e={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function O0e(t){if(t==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};sW(t)||(t=Zv(t));const e=oW(t,M0e);if(e.result==="error")throw new Error(e.value.map(r=>`${r.key}: ${r.message}`).join(", "));{const r=aW(t);return{filter:(n,i,l)=>e.value.evaluate(n,i,{},l),needGeometry:r,getGlobalStateRefs:()=>aw(e.value.expression)}}}function k0e(t,e){return t<e?-1:t>e?1:0}function aW(t){if(!Array.isArray(t))return!1;if(t[0]==="within"||t[0]==="distance")return!0;for(let e=1;e<t.length;e++)if(aW(t[e]))return!0;return!1}function Zv(t){if(!t)return!0;const e=t[0];return t.length<=1?e!=="any":e==="=="?FT(t[1],t[2],"=="):e==="!="?K0(FT(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?FT(t[1],t[2],e):e==="any"?L0e(t.slice(1)):e==="all"?["all"].concat(t.slice(1).map(Zv)):e==="none"?["all"].concat(t.slice(1).map(Zv).map(K0)):e==="in"?OD(t[1],t.slice(2)):e==="!in"?K0(OD(t[1],t.slice(2))):e==="has"?kD(t[1]):e==="!has"?K0(kD(t[1])):!0}function FT(t,e,r){switch(t){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,t,e]}}function L0e(t){return["any"].concat(t.map(Zv))}function OD(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",t,["literal",e.sort(k0e)]]:["filter-in-small",t,["literal",e]]}}function kD(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function K0(t){return["!",t]}function Fy(t){return typeof t=="object"?["literal",t]:t}function D0e(t,e){let r=t.stops;if(!r)return N0e(t,e);const n=r&&typeof r[0][0]=="object",i=n||t.property!==void 0,l=n||!i;return r=r.map(c=>!i&&e.tokens&&typeof c[1]=="string"?[c[0],B0e(c[1])]:[c[0],Fy(c[1])]),n?F0e(t,e,r):l?j0e(t,e,r):xC(t,e,r)}function N0e(t,e){const r=["get",t.property];if(t.default===void 0)return e.type==="string"?["string",r]:r;if(e.type==="enum")return["match",r,Object.keys(e.values),r,t.default];{const n=[e.type==="color"?"to-color":e.type,r,Fy(t.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}}function h5(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function F0e(t,e,r){const n={},i={},l=[];for(let s=0;s<r.length;s++){const p=r[s],g=p[0].zoom;n[g]===void 0&&(n[g]={zoom:g,type:t.type,property:t.property,default:t.default},i[g]=[],l.push(g)),i[g].push([p[0].value,p[1]])}if(p5({},e)==="exponential"){const s=[h5(t),["linear"],["zoom"]];for(const p of l){const g=xC(n[p],e,i[p]);Hp(s,p,g,!1)}return s}else{const s=["step",["zoom"]];for(const p of l){const g=xC(n[p],e,i[p]);Hp(s,p,g,!0)}return d5(s),s}}function z0e(t,e){if(t!==void 0)return t;if(e!==void 0)return e}function LD(t,e){const r=Fy(z0e(t.default,e.default));return r===void 0&&e.type==="resolvedImage"?"":r}function xC(t,e,r){const n=p5(t,e),i=["get",t.property];if(n==="categorical"&&typeof r[0][0]=="boolean"){const l=["case"];for(const c of r)l.push(["==",i,c[0]],c[1]);return l.push(LD(t,e)),l}else if(n==="categorical"){const l=["match",i];for(const c of r)Hp(l,c[0],c[1],!1);return l.push(LD(t,e)),l}else if(n==="interval"){const l=["step",["number",i]];for(const c of r)Hp(l,c[0],c[1],!0);return d5(l),t.default===void 0?l:["case",["==",["typeof",i],"number"],l,Fy(t.default)]}else if(n==="exponential"){const l=t.base!==void 0?t.base:1,c=[h5(t),l===1?["linear"]:["exponential",l],["number",i]];for(const s of r)Hp(c,s[0],s[1],!1);return t.default===void 0?c:["case",["==",["typeof",i],"number"],c,Fy(t.default)]}else throw new Error(`Unknown property function type ${n}`)}function j0e(t,e,r,n=["zoom"]){const i=p5(t,e);let l,c=!1;if(i==="interval")l=["step",n],c=!0;else if(i==="exponential"){const s=t.base!==void 0?t.base:1;l=[h5(t),s===1?["linear"]:["exponential",s],n]}else throw new Error(`Unknown zoom function type "${i}"`);for(const s of r)Hp(l,s[0],s[1],c);return d5(l),l}function d5(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function Hp(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&t.length===2||t.push(e),t.push(r))}function p5(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function B0e(t){const e=["concat"],r=/{([^{}]+)}/g;let n=0;for(let i=r.exec(t);i!==null;i=r.exec(t)){const l=t.slice(n,r.lastIndex-i[0].length);n=r.lastIndex,l.length>0&&e.push(l),e.push(["get",i[1]])}if(e.length===1)return t;if(n<t.length)e.push(t.slice(n));else if(e.length===2)return["to-string",e[1]];return e}const q0e=h_e;var DD={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},ug=" ",ND=/(italic|oblique)$/i,FD={};function wC(t,e,r){var n=FD[t];if(!n){Array.isArray(t)||(t=[t]);for(var i=400,l="normal",c=[],s,p,g=0,_=t.length;g<_;++g){var x=t[g],P=x.split(" "),A=P[P.length-1].toLowerCase();A=="normal"||A=="italic"||A=="oblique"?(l=p?l:A,p=!0,P.pop(),A=P[P.length-1].toLowerCase()):ND.test(A)&&(A=A.replace(ND,""),l=p?l:P[P.length-1].replace(A,""),p=!0);for(var M in DD){var F=P.length>1?P[P.length-2].toLowerCase():"";if(A==M||A==M.replace("-","")||F+"-"+A==M){i=s?i:DD[M],P.pop(),F&&M.startsWith(F)&&P.pop();break}}!s&&typeof A=="number"&&(i=A,s=!0);var z=P.join(ug).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");z.indexOf(ug)!==-1&&(z='"'+z+'"'),c.push(z)}n=FD[t]=[l,i,c]}return n[0]+ug+n[1]+ug+e+"px"+(r?"/"+r:"")+ug+n[2]}const lW="https://api.mapbox.com";function f5(t){const e="mapbox://";return t.indexOf(e)!==0?"":t.slice(e.length)}function $0e(t,e,r){if(typeof t=="string")return[{id:"default",url:zD(t,e,r)}];for(const n of t)n.url=zD(n.url,e,r);return t}function zD(t,e,r){const n=f5(t);if(!n)return decodeURI(new URL(t,r).href);const i="sprites/";if(n.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${t}`);const l=n.slice(i.length);return`${lW}/styles/v1/${l}/sprite?access_token=${e}`}function cW(t,e){const r=f5(t);if(!r)return decodeURI(new URL(t,location.href).href);const n="styles/";if(r.indexOf(n)!==0)throw new Error(`unexpected style url: ${t}`);const i=r.slice(n.length);return`${lW}/styles/v1/${i}?&access_token=${e}`}const V0e=["a","b","c","d"];function Tb(t,e,r,n){const i=new URL(t,n||location.href),l=f5(t);if(!l)return e?(i.searchParams.has(r)||i.searchParams.set(r,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(l==="mapbox.satellite"){const c=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${l}/{z}/{x}/{y}${c}.webp?access_token=${e}`]}return V0e.map(c=>`https://${c}.tiles.mapbox.com/v4/${l}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const EC=Object.freeze({}),jD={},BD={};let U0e=0;function m5(t){return t.id||(t.id=U0e++),t.id}function G0e(t,e){return m5(t)+"."+Nr(e)}function H0e(t){let e=jD[t.id];return e||(e={},jD[m5(t)]=e),e}function J0e(t){let e=BD[t.id];return e||(e={},BD[m5(t)]=e),e}function zT(t){return t*Math.PI/180}const g5=function(){const t=[];for(let e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function lw(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);const r=document.createElement("canvas");return r.width=t,r.height=e,r}function W0e(t,e){let r=0;const n=e.length;for(;r<n;++r)if(e[r]<t&&r+1<n){const l=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(l)}return n-1}function Z0e(t,e){const r=Math.floor(t),n=Math.pow(2,t-r);return e[r]/n}const gp={};function Sf(t,e,r={},n){if(e in gp)return n&&(n.url=gp[e][0].url),gp[e][1];const i=r.transformRequest&&r.transformRequest(e,t)||e,l=function(p){return delete gp[e],Promise.reject(new Error("Error fetching source "+e))},c=function(p){return delete gp[e],p.ok?p.json():Promise.reject(new Error("Error fetching source "+e))},s=by(()=>i).then(p=>p instanceof Response?(n&&(n.url=p.url),c(p)):(p instanceof Request||(p=new Request(p)),p.headers.get("Accept")||p.headers.set("Accept","application/json"),n&&(n.url=p.url),fetch(p).then(c).catch(l))).catch(l);return gp[e]=[i,s],s}function K0e(t,e){if(typeof t=="string")if(t.trim().startsWith("{"))try{const r=JSON.parse(t);return Promise.resolve(r)}catch(r){return Promise.reject(r)}else return t=cW(t,e.accessToken),Sf("Style",t,e);else return Promise.resolve(t)}const qD={};function Y0e(t,e,r={}){const n=[e,JSON.stringify(t)].toString();let i=qD[n];if(!i||r.transformRequest){let l;r.transformRequest&&(l=(s,p)=>{const g=r.transformRequest&&r.transformRequest(p,"Tiles")||p;if(s instanceof OJ)s.setLoader((_,x,P)=>{const A=function(M){M.arrayBuffer().then(F=>{const j=s.getFormat().readFeatures(F,{extent:_,featureProjection:P});s.setFeatures(j)})};by(()=>g).then(M=>{if(M instanceof Response)return A(M);fetch(M).then(A).catch(F=>s.setState(qt.ERROR))}).catch(M=>s.setState(qt.ERROR))});else{const _=s.getImage();by(()=>g).then(x=>{if(typeof x=="string"){_.src=x;return}const P=A=>A.blob().then(M=>{const F=URL.createObjectURL(M);_.addEventListener("load",()=>URL.revokeObjectURL(F)),_.addEventListener("error",()=>URL.revokeObjectURL(F)),_.src=F});if(x instanceof Response)return P(x);fetch(x).then(P).catch(A=>s.setState(qt.ERROR))}).catch(x=>s.setState(qt.ERROR))}});const c=t.url;if(c&&!t.tiles){const s=Tb(c,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(c.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:s}),tileLoadFunction:l});else{const p={};i=Sf("Source",s[0],r,p).then(function(g){return g.tiles=g.tiles.map(function(_){return g.scheme==="tms"&&(_=_.replace("{y}","{-y}")),Tb(_,r.accessToken,r.accessTokenParam||"access_token",p.url)[0]}),Promise.resolve({tileJson:g,tileLoadFunction:l})})}}else t.tiles?(t=Object.assign({},t,{tiles:t.tiles.map(function(s){return t.scheme==="tms"&&(s=s.replace("{y}","{-y}")),Tb(s,r.accessToken,r.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:l})):i=Promise.reject(new Error("source has no `tiles` nor `url`"));qD[n]=i}return i}function $D(t,e,r,n){const i=[2*r*e.pixelRatio+e.width,2*r*e.pixelRatio+e.height],l=lw(i[0],i[1]),c=l.getContext("2d");c.drawImage(t,e.x,e.y,e.width,e.height,r*e.pixelRatio,r*e.pixelRatio,e.width,e.height);const s=c.getImageData(0,0,i[0],i[1]);c.globalCompositeOperation="destination-over",c.fillStyle=`rgba(${n.r*255},${n.g*255},${n.b*255},${n.a})`;const p=s.data;for(let g=0,_=s.width;g<_;++g)for(let x=0,P=s.height;x<P;++x){const A=(x*_+g)*4;p[A+3]>0&&c.arc(g,x,r*e.pixelRatio,0,2*Math.PI)}return c.fill(),l}function X0e(t,e,r){const n=Math.max(0,Math.min(1,(r-t)/(e-t)));return n*n*(3-2*n)}function VD(t,e,r){const n=lw(e.width,e.height),i=n.getContext("2d");i.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const l=i.getImageData(0,0,e.width,e.height),c=l.data;for(let s=0,p=l.width;s<p;++s)for(let g=0,_=l.height;g<_;++g){const x=(g*p+s)*4,P=c[x+3]/255,A=.75,M=.1,F=X0e(A-M,A+M,P);F>0?(c[x+0]=Math.round(255*r.r*F),c[x+1]=Math.round(255*r.g*F),c[x+2]=Math.round(255*r.b*F),c[x+3]=Math.round(255*F)):c[x+3]=0}return i.putImageData(l,0,0),n}const Q0e=Array(256).join("");function TC(t,e){if(e>=.05){let r="";const n=t.split(`
`),i=Q0e.slice(0,Math.round(e/.1));for(let l=0,c=n.length;l<c;++l)l>0&&(r+=`
`),r+=n[l].split("").join(i);return r}return t}let jT;function uW(){return jT||(jT=lw(1,1).getContext("2d")),jT}function Xu(t,e){return uW().measureText(t).width+(t.length-1)*e}const Kv={};nh.on("propertychange",()=>{for(const t in Kv)delete Kv[t]});function SC(t,e,r,n){if(t.indexOf(`
`)!==-1){const c=t.split(`
`),s=[];for(let p=0,g=c.length;p<g;++p)s.push(SC(c[p],e,r,n));return s.join(`
`)}const i=r+","+e+","+t+","+n;let l=Kv[i];if(!l){const c=t.split(" ");if(c.length>1){const s=uW();s.font=e;const g=s.measureText("M").width*r;let _="";const x=[];for(let P=0,A=c.length;P<A;++P){const M=c[P],F=_+(_?" ":"")+M;Xu(F,n)<=g?_=F:(_&&x.push(_),_=M)}_&&x.push(_);for(let P=0,A=x.length;P<A&&A>1;++P){const M=x[P];if(Xu(M,n)<g*.35){const F=P>0?Xu(x[P-1],n):1/0,z=P<A-1?Xu(x[P+1],n):1/0;x.splice(P,1),A-=1,F<z?(x[P-1]+=" "+M,P-=1):x[P]=M+" "+x[P]}}for(let P=0,A=x.length-1;P<A;++P){const M=x[P],F=x[P+1];if(Xu(M,n)>g*.7&&Xu(F,n)<g*.6){const z=M.split(" "),j=z.pop();Xu(j,n)<g*.2&&(x[P]=z.join(" "),x[P+1]=j+" "+F),A-=1}}l=x.join(`
`)}else l=t;l=TC(l,n),Kv[i]=l}return l}const ebe=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],UD={};function tbe(t,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let r;for(let n=0,i=t.length;n<i;++n){const l=t[n];if(l in UD)continue;UD[l]=!0;const s=wC(l,16).split(" ");r||(r=[]),r.push([s.slice(3).join(" ").replace(/"/g,""),s[1],s[0]])}return r&&(async()=>{await document.fonts.ready;for(let n=0,i=r.length;n<i;++n){const l=r[n],c=l[0];if(ebe.includes(c))continue;const s=l[1],p=l[2];if(!(await document.fonts.load(`${p} ${s} 16px "${c}"`)).some(_=>_.family.replace(/^['"]|['"]$/g,"").toLowerCase()===c.toLowerCase()&&_.weight==s&&_.style===p)){const _=e.replace("{font-family}",c.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",c.replace(/ /g,"+")).replace("{fontweight}",s).replace("{-fontstyle}",p.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",p);if(!document.querySelector('link[href="'+_+'"]')){const x=document.createElement("link");x.href=_,x.rel="stylesheet",document.head.appendChild(x)}}}})(),t}const rbe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},nbe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},ibe=function(t,e){const r=A0e(t,e);if(r.result==="error")throw new Error(r.value.map(n=>`${n.key}: ${n.message}`).join(", "));return r.value},Rh={zoom:0,distanceFromCenter:0};us.register(sw,{...us.definitions,pitch:[{kind:"number"},[],t=>Rh.pitch||90],"distance-from-center":[{kind:"number"},[],t=>Rh.distanceFromCenter||0]});let Y0,BT;function pr(t,e,r,n,i,l){const c=t.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[c]||(i[c]={});const s=i[c];if(!s[r]){let p=(t[e]||EC)[r];const g=q0e[`${e}_${t.type}`][r];p===void 0&&(p=g.default);let _=P0e(p);if(!_&&iW(p)&&(p=D0e(p,g),_=!0),_){const x=ibe(p,g);s[r]=x.evaluate.bind(x)}else g.type=="color"&&(p=bn.parse(p)),s[r]=function(){return p}}return s[r](Rh,n,l)}function GD(t,e,r,n){return pr(t,"layout",`${r}-allow-overlap`,e,n)?pr(t,"layout",`${r}-ignore-placement`,e,n)?"none":"obstacle":"declutter"}function obe(t,e,r,n){if(n||console.warn("No filterCache provided to evaluateFilter()"),!(t in n))try{n[t]=O0e(e).filter}catch(i){console.warn("Filter will evaluate to false: "+i.message),n[t]=function(){return!1}}return n[t](Rh,r)}function Qu(t,e){if(t){if(t.a===0||e===0)return;const r=t.a;return e=e===void 0?1:e,r===0?"transparent":"rgba("+Math.round(t.r*255/r)+","+Math.round(t.g*255/r)+","+Math.round(t.b*255/r)+","+r*e+")"}return t}const sbe=/\{[^{}}]*\}/g;function qT(t,e){return t.replace(sbe,function(r){return e[r.slice(1,-1)]||""})}function HD(t,e){let r=t.split(":")[0];return r===t&&(r="default"),e[r]}const abe={};function lbe(t,e,r,n=g5,i=void 0,l=void 0,c=void 0,s=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");abe[G0e(e,t)]=Array.from(arguments);const p={};(typeof l=="string"||l instanceof Request||l instanceof Response||l instanceof Promise)&&(l={default:l});for(const te in l){const ne=l[te];by(()=>ne).then(async Z=>{let U;if(typeof Image<"u"){const K=new Image;if(typeof Z=="string")K.crossOrigin="anonymous",K.src=Z;else{let he;Z instanceof Request?he=await fetch(Z):Z instanceof Response&&(he=Z);const ue=await he.blob();U=URL.createObjectURL(ue),K.src=U}K.addEventListener("load",function he(){K.removeEventListener("load",he),p[te]={image:K,size:[K.width,K.height]},t.changed(),U&&URL.revokeObjectURL(U)}),K.addEventListener("error",function he(){URL.revokeObjectURL(U),K.removeEventListener("error",he)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const K=self;K.postMessage({action:"loadImage",src:Z}),K.addEventListener("message",function(ue){ue.data.action==="imageLoaded"&&ue.data.src===Z&&(p[te]={image:ue.data.image,size:[ue.data.image.width,ue.data.image.height]})})}})}const g=f_e(e.layers),_={},x=[],P={},A={},M=H0e(e),F=J0e(e);let z;for(let te=0,ne=g.length;te<ne;++te){const Z=g[te],U=Z.id;if(typeof r=="string"&&Z.source==r||Array.isArray(r)&&r.indexOf(U)!==-1){const K=Z["source-layer"];if(z){if(Z.source!==z)throw new Error(`Layer "${U}" does not use source "${z}`)}else{z=Z.source;const ue=e.sources[z];if(!ue)throw new Error(`Source "${z}" is not defined`);const we=ue.type;if(we!=="vector"&&we!=="geojson")throw new Error(`Source "${z}" is not of type "vector" or "geojson", but "${we}"`)}let he=_[K];he||(he=[],_[K]=he),he.push({layer:Z,index:te}),x.push(U)}}const j=new qc,$=new Ma,W=[],X=function(te,ne,Z){const U=te.getProperties(),K=_[U["mvt:layer"]];if(!K)return;let he=n.indexOf(ne);he==-1&&(he=W0e(ne,n)),Rh.zoom=he,Rh.distanceFromCenter=0;const ue=te.getGeometry(),we=rbe[ue.getType()],Ie=t.get("map");if(Ie&&Ie instanceof _J&&we===1){const xe=Ie.getSize();if(xe){const Xe=Ie.getView().getCenter(),Ke=Dl(ue.getExtent());Rh.distanceFromCenter=spe(Xe,Ke)/ne/xe[1]}}const ee={id:te.getId(),properties:U,type:we},fe=t.get("mapbox-featurestate")[te.getId()];let ve=-1;for(let xe=0,Xe=K.length;xe<Xe;++xe){const Ke=K[xe],Ze=Ke.layer,bt=Ze.id;if(Z!==void 0&&Z!==bt)continue;const qe=Ze.layout||EC,kt=Ze.paint||EC;if(qe.visibility==="none"||"minzoom"in Ze&&he<Ze.minzoom||"maxzoom"in Ze&&he>=Ze.maxzoom)continue;const Jt=Ze.filter;if(!Jt||obe(bt,Jt,ee,F)){let Pt,dt,er,Wt,ar,_t;const Ve=Ke.index;if(we==3&&(Ze.type=="fill"||Ze.type=="fill-extrusion"))if(dt=pr(Ze,"paint",Ze.type+"-opacity",ee,M,fe),Ze.type+"-pattern"in kt){const ur=pr(Ze,"paint",Ze.type+"-pattern",ee,M,fe);if(ur){const lr=typeof ur=="string"?qT(ur,U):ur.toString(),nr=HD(lr,p);if(i&&i[lr]&&nr){++ve,_t=W[ve],(!_t||!_t.getFill()||_t.getStroke()||_t.getText())&&(_t=new os({fill:new Ma}),W[ve]=_t),er=_t.getFill(),_t.setZIndex(Ve);const mr=lr+"."+dt;let Yr=A[mr];if(!Yr){const ke=i[lr],oe=lw(ke.width,ke.height),ae=oe.getContext("2d");ae.globalAlpha=dt,ae.drawImage(nr.image,ke.x,ke.y,ke.width,ke.height,0,0,ke.width,ke.height),Yr=ae.createPattern(oe,"repeat"),A[mr]=Yr}er.setColor(Yr)}}}else Pt=Qu(pr(Ze,"paint",Ze.type+"-color",ee,M,fe),dt),Ze.type+"-outline-color"in kt&&(ar=Qu(pr(Ze,"paint",Ze.type+"-outline-color",ee,M,fe),dt)),ar||(ar=Pt),(Pt||ar)&&(++ve,_t=W[ve],(!_t||Pt&&!_t.getFill()||!Pt&&_t.getFill()||ar&&!_t.getStroke()||!ar&&_t.getStroke()||_t.getText())&&(_t=new os({fill:Pt?new Ma:void 0,stroke:ar?new qc:void 0}),W[ve]=_t),Pt&&(er=_t.getFill(),er.setColor(Pt)),ar&&(Wt=_t.getStroke(),Wt.setColor(ar),Wt.setWidth(.5)),_t.setZIndex(Ve));if(we!=1&&Ze.type=="line"){"line-pattern"in kt?Pt=void 0:Pt=Qu(pr(Ze,"paint","line-color",ee,M,fe),pr(Ze,"paint","line-opacity",ee,M,fe));const ur=pr(Ze,"paint","line-width",ee,M,fe);Pt&&ur>0&&(++ve,_t=W[ve],(!_t||!_t.getStroke()||_t.getFill()||_t.getText())&&(_t=new os({stroke:new qc}),W[ve]=_t),Wt=_t.getStroke(),Wt.setLineCap(pr(Ze,"layout","line-cap",ee,M,fe)),Wt.setLineJoin(pr(Ze,"layout","line-join",ee,M,fe)),Wt.setMiterLimit(pr(Ze,"layout","line-miter-limit",ee,M,fe)),Wt.setColor(Pt),Wt.setWidth(ur),Wt.setLineDash(kt["line-dasharray"]?pr(Ze,"paint","line-dasharray",ee,M,fe).map(function(lr){return lr*ur}):null),_t.setZIndex(Ve))}let pt=!1,lt=null,Tt=0,vt,Dt,Yt;if((we==1||we==2)&&"icon-image"in qe){const ur=pr(Ze,"layout","icon-image",ee,M,fe);if(ur){vt=typeof ur=="string"?qT(ur,U):ur.toString();let lr;const nr=s?s(t,vt):void 0,mr=HD(vt,p);if(i&&i[vt]&&mr||nr){const Yr=pr(Ze,"layout","icon-rotation-alignment",ee,M,fe);if(we==2){const ke=te.getGeometry();if(ke.getFlatMidpoint||ke.getFlatMidpoints){const oe=ke.getExtent();if(Math.sqrt(Math.max(Math.pow((oe[2]-oe[0])/ne,2),Math.pow((oe[3]-oe[1])/ne,2)))>150){const de=ke.getType()==="MultiLineString"?ke.getFlatMidpoints():ke.getFlatMidpoint();if(BT||(Y0=[NaN,NaN],BT=new uo("Point",Y0,[],2,{},void 0)),lr=BT,Y0[0]=de[0],Y0[1]=de[1],pr(Ze,"layout","symbol-placement",ee,M,fe)==="line"&&Yr==="map"){const Le=ke.getStride(),je=ke.getFlatCoordinates();for(let Je=0,Fe=je.length-Le;Je<Fe;Je+=Le){const tt=je[Je],ct=je[Je+1],it=je[Je+Le],Ot=je[Je+Le+1],$e=Math.min(tt,it),Xt=Math.max(tt,it),cr=de[0],Nt=de[1],Ht=(Ot-ct)*(cr-tt)-(it-tt)*(Nt-ct);if(Math.abs(Ht)<.001&&cr<=Xt&&cr>=$e){Tt=Math.atan2(ct-Ot,it-tt);break}}}}}}if(we!==2||lr){const ke=pr(Ze,"layout","icon-size",ee,M,fe),oe=kt["icon-color"]!==void 0?pr(Ze,"paint","icon-color",ee,M,fe):null;if(!oe||oe.a!==0){const ae=pr(Ze,"paint","icon-halo-color",ee,M,fe),de=pr(Ze,"paint","icon-halo-width",ee,M,fe);let Te=`${vt}.${ke}.${de}.${ae}`;if(oe!==null&&(Te+=`.${oe}`),Dt=P[Te],!Dt){const Le=GD(Ze,ee,"icon",M);let je;"icon-offset"in qe&&(je=pr(Ze,"layout","icon-offset",ee,M,fe).slice(0),je[0]*=ke,je[1]*=-ke);let Je=oe?[oe.r*255,oe.g*255,oe.b*255,oe.a]:void 0;if(nr){const Fe={color:Je,rotateWithView:Yr==="map",displacement:je,declutterMode:Le,scale:ke};typeof nr=="string"?Fe.src=nr:(Fe.img=nr,Fe.imgSize=[nr.width,nr.height]),Dt=new Ef(Fe)}else{const Fe=i[vt];let tt,ct,it;if(de)Fe.sdf?(tt=$D(VD(mr.image,Fe,oe||[0,0,0,1]),{x:0,y:0,width:Fe.width,height:Fe.height,pixelRatio:Fe.pixelRatio},de,ae),Je=void 0):tt=$D(mr.image,Fe,de,ae);else{if(Fe.sdf&&!mr.unSDFed){const Ot=VD(mr.image,{x:0,y:0,width:mr.size[0],height:mr.size[1]},{r:1,g:1,b:1});mr.image=Ot,mr.unSDFed=!0}tt=mr.image,ct=[Fe.width,Fe.height],it=[Fe.x,Fe.y]}Dt=new Ef({color:Je,img:tt,imgSize:mr.size,size:ct,offset:it,rotateWithView:Yr==="map",scale:ke/Fe.pixelRatio,displacement:je,declutterMode:Le})}P[Te]=Dt}}Dt&&(++ve,_t=W[ve],(!_t||!_t.getImage()||_t.getFill()||_t.getStroke())&&(_t=new os,W[ve]=_t),_t.setGeometry(lr),Dt.setRotation(Tt+zT(pr(Ze,"layout","icon-rotate",ee,M,fe))),Dt.setOpacity(pr(Ze,"paint","icon-opacity",ee,M,fe)),Dt.setAnchor(nbe[pr(Ze,"layout","icon-anchor",ee,M,fe)]),_t.setImage(Dt),lt=_t.getText(),_t.setText(void 0),_t.setZIndex(Ve),pt=!0,Yt=!1)}else Yt=!0}}}if(we==1&&Ze.type==="circle"){++ve,_t=W[ve],(!_t||!_t.getImage()||_t.getFill()||_t.getStroke())&&(_t=new os,W[ve]=_t);const ur="circle-radius"in kt?pr(Ze,"paint","circle-radius",ee,M,fe):5,lr=Qu(pr(Ze,"paint","circle-stroke-color",ee,M,fe),pr(Ze,"paint","circle-stroke-opacity",ee,M,fe)),nr=pr(Ze,"paint","circle-translate",ee,M,fe),mr=Qu(pr(Ze,"paint","circle-color",ee,M,fe),pr(Ze,"paint","circle-opacity",ee,M,fe)),Yr=pr(Ze,"paint","circle-stroke-width",ee,M,fe),ke=ur+"."+lr+"."+mr+"."+Yr+"."+nr[0]+"."+nr[1];Dt=P[ke],Dt||(Dt=new f_({radius:ur,displacement:[nr[0],-nr[1]],stroke:lr&&Yr>0?new qc({width:Yr,color:lr}):void 0,fill:mr?new Ma({color:mr}):void 0,declutterMode:"none"}),P[ke]=Dt),_t.setImage(Dt),lt=_t.getText(),_t.setText(void 0),_t.setGeometry(void 0),_t.setZIndex(Ve),pt=!0}let Bt,wr,Vr,Ir,Zr,yr;if("text-field"in qe){Ir=Math.round(pr(Ze,"layout","text-size",ee,M,fe));const ur=pr(Ze,"layout","text-font",ee,M,fe);Vr=pr(Ze,"layout","text-line-height",ee,M,fe),wr=wC(c?c(ur,e.metadata?e.metadata["ol:webfonts"]:void 0):ur,Ir,Vr),wr.includes("sans-serif")||(wr+=",sans-serif"),Zr=pr(Ze,"layout","text-letter-spacing",ee,M,fe),yr=pr(Ze,"layout","text-max-width",ee,M,fe);const lr=pr(Ze,"layout","text-field",ee,M,fe);typeof lr=="object"&&lr.sections?lr.sections.length===1?Bt=lr.toString():Bt=lr.sections.reduce((nr,mr,Yr)=>{const ke=mr.fontStack?mr.fontStack.split(","):ur,oe=wC(c?c(ke):ke,Ir*(mr.scale||1),Vr);let ae=mr.text;if(ae===`
`)return nr.push(`
`,""),nr;if(we==2)return nr.push(TC(ae,Zr),oe),nr;ae=SC(ae,oe,yr,Zr).split(`
`);for(let de=0,Te=ae.length;de<Te;++de)de>0&&nr.push(`
`,""),nr.push(ae[de],oe);return nr},[]):Bt=qT(lr,U).trim(),dt=pr(Ze,"paint","text-opacity",ee,M,fe)}if(Bt&&dt&&!Yt){pt||(++ve,_t=W[ve],(!_t||!_t.getText()||_t.getFill()||_t.getStroke())&&(_t=new os,W[ve]=_t),_t.setImage(void 0),_t.setGeometry(void 0));const ur=GD(Ze,ee,"text",M);_t.getText()||_t.setText(lt),lt=_t.getText(),(!lt||"getDeclutterMode"in lt&&lt.getDeclutterMode()!==ur)&&(lt=new Vx({padding:[2,2,2,2],declutterMode:ur}),_t.setText(lt));const lr=pr(Ze,"layout","text-transform",ee,M,fe);lr=="uppercase"?Bt=Array.isArray(Bt)?Bt.map((it,Ot)=>Ot%2?it:it.toUpperCase()):Bt.toUpperCase():lr=="lowercase"&&(Bt=Array.isArray(Bt)?Bt.map((it,Ot)=>Ot%2?it:it.toLowerCase()):Bt.toLowerCase());const nr=Array.isArray(Bt)?Bt:we==2?TC(Bt,Zr):SC(Bt,wr,yr,Zr);if(lt.setText(nr),lt.setFont(wr),lt.setRotation(zT(pr(Ze,"layout","text-rotate",ee,M,fe))),typeof lt.setKeepUpright=="function"){const it=pr(Ze,"layout","text-keep-upright",ee,M,fe);lt.setKeepUpright(it)}const mr=pr(Ze,"layout","text-anchor",ee,M,fe),Yr=pt||we==1?"point":pr(Ze,"layout","symbol-placement",ee,M,fe);let ke;if(Yr==="line-center"?(lt.setPlacement("line"),ke="center"):lt.setPlacement(Yr),Yr==="line"&&typeof lt.setRepeat=="function"){const it=pr(Ze,"layout","symbol-spacing",ee,M,fe);lt.setRepeat(it*2)}lt.setOverflow(Yr==="point");let oe=pr(Ze,"paint","text-halo-width",ee,M,fe);const ae=pr(Ze,"layout","text-offset",ee,M,fe),de=pr(Ze,"paint","text-translate",ee,M,fe);let Te=0,Le=0;if(Yr=="point"){ke="center",mr.indexOf("left")!==-1?(ke="left",Le=oe):mr.indexOf("right")!==-1&&(ke="right",Le=-oe);const it=pr(Ze,"layout","text-rotation-alignment",ee,M,fe);lt.setRotateWithView(it=="map")}else lt.setMaxAngle(zT(pr(Ze,"layout","text-max-angle",ee,M,fe))*Bt.length/nr.length),lt.setRotateWithView(!1);lt.setTextAlign(ke);let je="middle";mr.indexOf("bottom")==0?(je="bottom",Te=-oe-.5*(Vr-1)*Ir):mr.indexOf("top")==0&&(je="top",Te=oe+.5*(Vr-1)*Ir),lt.setTextBaseline(je);const Je=pr(Ze,"layout","text-justify",ee,M,fe);lt.setJustify(Je==="auto"?void 0:Je),lt.setOffsetX(ae[0]*Ir+Le+de[0]),lt.setOffsetY(ae[1]*Ir+Te+de[1]),$.setColor(Qu(pr(Ze,"paint","text-color",ee,M,fe),dt)),lt.setFill($);const Fe=Qu(pr(Ze,"paint","text-halo-color",ee,M,fe),dt);if(Fe&&oe>0){j.setColor(Fe),oe*=2;const it=.5*Ir;j.setWidth(oe<=it?oe:it),lt.setStroke(j)}else lt.setStroke(void 0);const tt=pr(Ze,"layout","text-padding",ee,M,fe),ct=lt.getPadding();tt!==ct[0]&&(ct[0]=tt,ct[1]=tt,ct[2]=tt,ct[3]=tt),_t.setZIndex(Ve)}}}if(ve>-1)return W.length=ve+1,W};return t.setStyle(X),t.set("mapbox-layers",x),t.set("mapbox-source",z),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),X}class hW{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Hx,this.supportedMediaTypes=null}getReadOptions(e,r){if(r){let n=r.dataProjection?An(r.dataProjection):this.readProjection(e);r.extent&&n&&n.getUnits()==="tile-pixels"&&(n=An(n),n.setWorldExtent(r.extent)),r={dataProjection:n,featureProjection:r.featureProjection}}return this.adaptOptions(r)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Sr()}readFeature(e,r){return Sr()}readFeatures(e,r){return Sr()}readGeometry(e,r){return Sr()}readProjection(e){return Sr()}writeFeature(e,r){return Sr()}writeFeatures(e,r){return Sr()}writeGeometry(e,r){return Sr()}}function cw(t,e,r){const n=r?An(r.featureProjection):null,i=r?An(r.dataProjection):null;let l=t;if(n&&i&&!Ro(n,i)){e&&(l=t.clone());const c=e?n:i,s=e?i:n;c.getUnits()==="tile-pixels"?l.transform(c,s):l.applyTransform(Gh(c,s))}if(e&&r&&r.decimals!==void 0){const c=Math.pow(10,r.decimals),s=function(p){for(let g=0,_=p.length;g<_;++g)p[g]=Math.round(p[g]*c)/c;return p};l===t&&(l=t.clone()),l.applyTransform(s)}return l}const cbe={Point:su,LineString:Wh,Polygon:Fl,MultiPoint:g_,MultiLineString:Ry,MultiPolygon:Iy};function ube(t,e,r){return Array.isArray(e[0])?(BH(t,0,e,r)||(t=t.slice(),nC(t,0,e,r)),t):(PM(t,0,e,r)||(t=t.slice(),Iv(t,0,e,r)),t)}function dW(t,e){const r=t.geometry;if(!r)return[];if(Array.isArray(r))return r.map(l=>dW({...t,geometry:l})).flat();const n=r.type==="MultiPolygon"?"Polygon":r.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const i=r.layout.length;return cw(new uo(n,n==="Polygon"?ube(r.flatCoordinates,r.ends,i):r.flatCoordinates,r.ends?.flat(),i,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function y5(t,e){if(!t)return null;if(Array.isArray(t)){const n=t.map(i=>y5(i,e));return new qv(n)}const r=cbe[t.type];return cw(new r(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}class hbe extends hW{constructor(){super()}getType(){return"json"}readFeature(e,r){return this.readFeatureFromObject(X0(e),this.getReadOptions(e,r))}readFeatures(e,r){return this.readFeaturesFromObject(X0(e),this.getReadOptions(e,r))}readFeatureFromObject(e,r){return Sr()}readFeaturesFromObject(e,r){return Sr()}readGeometry(e,r){return this.readGeometryFromObject(X0(e),this.getReadOptions(e,r))}readGeometryFromObject(e,r){return Sr()}readProjection(e){return this.readProjectionFromObject(X0(e))}readProjectionFromObject(e){return Sr()}writeFeature(e,r){return JSON.stringify(this.writeFeatureObject(e,r))}writeFeatureObject(e,r){return Sr()}writeFeatures(e,r){return JSON.stringify(this.writeFeaturesObject(e,r))}writeFeaturesObject(e,r){return Sr()}writeGeometry(e,r){return JSON.stringify(this.writeGeometryObject(e,r))}writeGeometryObject(e,r){return Sr()}}function X0(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class JD extends hbe{constructor(e){e=e||{},super(),this.dataProjection=An(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=An(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,r){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const i=_5(n.geometry);if(this.featureClass===uo)return dW({geometry:i,id:n.id,properties:n.properties},r);const l=new Hx;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&l.setGeometryName(n.geometry_name),l.setGeometry(y5(i,r)),"id"in n&&l.setId(n.id),n.properties&&l.setProperties(n.properties,!0),l}readFeaturesFromObject(e,r){const n=e;let i=null;if(n.type==="FeatureCollection"){const l=e;i=[];const c=l.features;for(let s=0,p=c.length;s<p;++s){const g=this.readFeatureFromObject(c[s],r);g&&i.push(g)}}else i=[this.readFeatureFromObject(e,r)];return i.flat()}readGeometryFromObject(e,r){return dbe(e,r)}readProjectionFromObject(e){const r=e.crs;let n;if(r)if(r.type=="name")n=An(r.properties.name);else if(r.type==="EPSG")n=An("EPSG:"+r.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,r){r=this.adaptOptions(r);const n={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(n.id=i),!e.hasProperties())return n;const l=e.getProperties(),c=e.getGeometry();return c&&(n.geometry=CC(c,r),delete l[e.getGeometryName()]),ou(l)||(n.properties=l),n}writeFeaturesObject(e,r){r=this.adaptOptions(r);const n=[];for(let i=0,l=e.length;i<l;++i)n.push(this.writeFeatureObject(e[i],r));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,r){return CC(e,this.adaptOptions(r))}}function _5(t,e){if(!t)return null;let r;switch(t.type){case"Point":{r=fbe(t);break}case"LineString":{r=mbe(t);break}case"Polygon":{r=bbe(t);break}case"MultiPoint":{r=ybe(t);break}case"MultiLineString":{r=gbe(t);break}case"MultiPolygon":{r=_be(t);break}case"GeometryCollection":{r=pbe(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return r}function dbe(t,e){const r=_5(t);return y5(r,e)}function pbe(t,e){return t.geometries.map(function(n){return _5(n)})}function fbe(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:ad(e.length)}}function mbe(t){const e=t.coordinates,r=e.flat();return{type:"LineString",flatCoordinates:r,ends:[r.length],layout:ad(e[0]?.length||2)}}function gbe(t){const e=t.coordinates,r=e[0]?.[0]?.length||2,n=[],i=h_(n,0,e,r);return{type:"MultiLineString",flatCoordinates:n,ends:i,layout:ad(r)}}function ybe(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:ad(e[0]?.length||2)}}function _be(t){const e=t.coordinates,r=[],n=e[0]?.[0]?.[0].length||2,i=LH(r,0,e,n);return{type:"MultiPolygon",flatCoordinates:r,ends:i,layout:ad(n)}}function bbe(t){const e=t.coordinates,r=[],n=e[0]?.[0]?.length,i=h_(r,0,e,n);return{type:"Polygon",flatCoordinates:r,ends:i,layout:ad(n)}}function CC(t,e){t=cw(t,!0,e);const r=t.getType();let n;switch(r){case"Point":{n=Sbe(t);break}case"LineString":{n=xbe(t);break}case"Polygon":{n=Cbe(t,e);break}case"MultiPoint":{n=Ebe(t);break}case"MultiLineString":{n=wbe(t);break}case"MultiPolygon":{n=Tbe(t,e);break}case"GeometryCollection":{n=vbe(t,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+r)}return n}function vbe(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(n){return CC(n,e)})}}function xbe(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function wbe(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function Ebe(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function Tbe(t,e){let r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}function Sbe(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function Cbe(t,e){let r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}const PC=65536*65536,WD=1/PC,Pbe=12,ZD=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),$T=0,Q0=1,hg=2,eb=5;class Abe{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,r,n=this.length){for(;this.pos<n;){const i=this.readVarint(),l=i>>3,c=this.pos;this.type=i&7,e(l,r,this),this.pos===c&&this.skip(i)}return r}readMessage(e,r){return this.readFields(e,r,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*PC;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*PC;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const r=this.buf;let n,i;return i=r[this.pos++],n=i&127,i<128||(i=r[this.pos++],n|=(i&127)<<7,i<128)||(i=r[this.pos++],n|=(i&127)<<14,i<128)||(i=r[this.pos++],n|=(i&127)<<21,i<128)?n:(i=r[this.pos],n|=(i&15)<<28,Rbe(n,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=Pbe&&ZD?ZD.decode(this.buf.subarray(r,e)):$be(this.buf,r,e)}readBytes(){const e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r}readPackedVarint(e=[],r){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(r));return e}readPackedSVarint(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===hg?this.readVarint()+this.pos:this.pos+1}skip(e){const r=e&7;if(r===$T)for(;this.buf[this.pos++]>127;);else if(r===hg)this.pos=this.readVarint()+this.pos;else if(r===eb)this.pos+=4;else if(r===Q0)this.pos+=8;else throw new Error(`Unimplemented type: ${r}`)}writeTag(e,r){this.writeVarint(e<<3|r)}realloc(e){let r=this.length||16;for(;r<this.pos+e;)r*=2;if(r!==this.length){const n=new Uint8Array(r);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=r}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*WD),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*WD),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Ibe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const r=this.pos;this.pos=Vbe(this.buf,e,this.pos);const n=this.pos-r;n>=128&&KD(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const r=e.length;this.writeVarint(r),this.realloc(r);for(let n=0;n<r;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,r){this.pos++;const n=this.pos;e(r,this);const i=this.pos-n;i>=128&&KD(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i}writeMessage(e,r,n){this.writeTag(e,hg),this.writeRawMessage(r,n)}writePackedVarint(e,r){r.length&&this.writeMessage(e,kbe,r)}writePackedSVarint(e,r){r.length&&this.writeMessage(e,Lbe,r)}writePackedBoolean(e,r){r.length&&this.writeMessage(e,Fbe,r)}writePackedFloat(e,r){r.length&&this.writeMessage(e,Dbe,r)}writePackedDouble(e,r){r.length&&this.writeMessage(e,Nbe,r)}writePackedFixed32(e,r){r.length&&this.writeMessage(e,zbe,r)}writePackedSFixed32(e,r){r.length&&this.writeMessage(e,jbe,r)}writePackedFixed64(e,r){r.length&&this.writeMessage(e,Bbe,r)}writePackedSFixed64(e,r){r.length&&this.writeMessage(e,qbe,r)}writeBytesField(e,r){this.writeTag(e,hg),this.writeBytes(r)}writeFixed32Field(e,r){this.writeTag(e,eb),this.writeFixed32(r)}writeSFixed32Field(e,r){this.writeTag(e,eb),this.writeSFixed32(r)}writeFixed64Field(e,r){this.writeTag(e,Q0),this.writeFixed64(r)}writeSFixed64Field(e,r){this.writeTag(e,Q0),this.writeSFixed64(r)}writeVarintField(e,r){this.writeTag(e,$T),this.writeVarint(r)}writeSVarintField(e,r){this.writeTag(e,$T),this.writeSVarint(r)}writeStringField(e,r){this.writeTag(e,hg),this.writeString(r)}writeFloatField(e,r){this.writeTag(e,eb),this.writeFloat(r)}writeDoubleField(e,r){this.writeTag(e,Q0),this.writeDouble(r)}writeBooleanField(e,r){this.writeVarintField(e,+r)}}function Rbe(t,e,r){const n=r.buf;let i,l;if(l=n[r.pos++],i=(l&112)>>4,l<128||(l=n[r.pos++],i|=(l&127)<<3,l<128)||(l=n[r.pos++],i|=(l&127)<<10,l<128)||(l=n[r.pos++],i|=(l&127)<<17,l<128)||(l=n[r.pos++],i|=(l&127)<<24,l<128)||(l=n[r.pos++],i|=(l&1)<<31,l<128))return yp(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function yp(t,e,r){return r?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function Ibe(t,e){let r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),r^4294967295?r=r+1|0:(r=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Mbe(r,n,e),Obe(n,e)}function Mbe(t,e,r){r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos]=t&127}function Obe(t,e){const r=(t&7)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function KD(t,e,r){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));r.realloc(n);for(let i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function kbe(t,e){for(let r=0;r<t.length;r++)e.writeVarint(t[r])}function Lbe(t,e){for(let r=0;r<t.length;r++)e.writeSVarint(t[r])}function Dbe(t,e){for(let r=0;r<t.length;r++)e.writeFloat(t[r])}function Nbe(t,e){for(let r=0;r<t.length;r++)e.writeDouble(t[r])}function Fbe(t,e){for(let r=0;r<t.length;r++)e.writeBoolean(t[r])}function zbe(t,e){for(let r=0;r<t.length;r++)e.writeFixed32(t[r])}function jbe(t,e){for(let r=0;r<t.length;r++)e.writeSFixed32(t[r])}function Bbe(t,e){for(let r=0;r<t.length;r++)e.writeFixed64(t[r])}function qbe(t,e){for(let r=0;r<t.length;r++)e.writeSFixed64(t[r])}function $be(t,e,r){let n="",i=e;for(;i<r;){const l=t[i];let c=null,s=l>239?4:l>223?3:l>191?2:1;if(i+s>r)break;let p,g,_;s===1?l<128&&(c=l):s===2?(p=t[i+1],(p&192)===128&&(c=(l&31)<<6|p&63,c<=127&&(c=null))):s===3?(p=t[i+1],g=t[i+2],(p&192)===128&&(g&192)===128&&(c=(l&15)<<12|(p&63)<<6|g&63,(c<=2047||c>=55296&&c<=57343)&&(c=null))):s===4&&(p=t[i+1],g=t[i+2],_=t[i+3],(p&192)===128&&(g&192)===128&&(_&192)===128&&(c=(l&15)<<18|(p&63)<<12|(g&63)<<6|_&63,(c<=65535||c>=1114112)&&(c=null))),c===null?(c=65533,s=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|c&1023),n+=String.fromCharCode(c),i+=s}return n}function Vbe(t,e,r){for(let n=0,i,l;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(l)if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,l=i;continue}else i=l-55296<<10|i-56320|65536,l=null;else{i>56319||n+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):l=i;continue}else l&&(t[r++]=239,t[r++]=191,t[r++]=189,l=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=i&63|128)}return r}class Ube extends hW{constructor(e){super(),e=e||{},this.dataProjection=new Lx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:uo,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,r,n,i){e.pos=r.geometry;const l=e.readVarint()+e.pos;let c=1,s=0,p=0,g=0,_=0,x=0;for(;e.pos<l;){if(!s){const P=e.readVarint();c=P&7,s=P>>3}if(s--,c===1||c===2)p+=e.readSVarint(),g+=e.readSVarint(),c===1&&_>x&&(i.push(_),x=_),n.push(p,g),_+=2;else if(c===7)_>x&&(n.push(n[x],n[x+1]),_+=2);else throw new Error("Invalid command found in the PBF")}_>x&&(i.push(_),x=_)}createFeature_(e,r,n){const i=r.type;if(i===0)return null;let l;const c=r.properties;let s;this.idProperty_?(s=c[this.idProperty_],delete c[this.idProperty_]):s=r.id,c[this.layerName_]=r.layer.name;const p=[],g=[];this.readRawGeometry_(e,r,p,g);const _=Zbe(i,g.length);if(this.featureClass===uo)l=new this.featureClass(_,p,g,2,c,s),l.transform(n.dataProjection);else{let x;if(_=="Polygon"){const M=qH(p,g);x=M.length>1?new Iy(p,"XY",M):new Fl(p,"XY",g)}else x=_==="Point"?new su(p,"XY"):_==="LineString"?new Wh(p,"XY"):_==="MultiPoint"?new g_(p,"XY"):_==="MultiLineString"?new Ry(p,"XY",g):null;const P=this.featureClass;l=new P,this.geometryName_&&l.setGeometryName(this.geometryName_);const A=cw(x,!1,n);l.setGeometry(A),s!==void 0&&l.setId(s),l.setProperties(c,!0)}return l}getType(){return"arraybuffer"}readFeatures(e,r){const n=this.layers_;r=this.adaptOptions(r);const i=An(r.dataProjection);i.setWorldExtent(r.extent),r.dataProjection=i;const l=new Abe(e),c=l.readFields(Gbe,{}),s=[];for(const p in c){if(n&&!n.includes(p))continue;const g=c[p],_=g?[0,0,g.extent,g.extent]:null;i.setExtent(_);for(let x=0,P=g.length;x<P;++x){const A=Wbe(l,g,x),M=this.createFeature_(l,A,r);M!==null&&s.push(M)}}return s}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Gbe(t,e,r){if(t===3){const n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(Hbe,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function Hbe(t,e,r){if(t===15)e.version=r.readVarint();else if(t===1)e.name=r.readString();else if(t===5)e.extent=r.readVarint();else if(t===2)e.features.push(r.pos);else if(t===3)e.keys.push(r.readString());else if(t===4){let n=null;const i=r.readVarint()+r.pos;for(;r.pos<i;)t=r.readVarint()>>3,n=t===1?r.readString():t===2?r.readFloat():t===3?r.readDouble():t===4?r.readVarint64():t===5?r.readVarint():t===6?r.readSVarint():t===7?r.readBoolean():null;e.values.push(n)}}function Jbe(t,e,r){if(t==1)e.id=r.readVarint();else if(t==2){const n=r.readVarint()+r.pos;for(;r.pos<n;){const i=e.layer.keys[r.readVarint()],l=e.layer.values[r.readVarint()];e.properties[i]=l}}else t==3?e.type=r.readVarint():t==4&&(e.geometry=r.pos)}function Wbe(t,e,r){t.pos=e.features[r];const n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(Jbe,i,n),i}function Zbe(t,e){let r;return t===1?r=e===1?"Point":"MultiPoint":t===2?r=e===1?"LineString":"MultiLineString":t===3&&(r="Polygon"),r}const _p=[0,0,0],Ec=5;class uw{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,fn(zde(this.resolutions_,(i,l)=>l-i),"`resolutions` must be sorted in descending order");let r;if(!e.origins){for(let i=0,l=this.resolutions_.length-1;i<l;++i)if(!r)r=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,fn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Vl(n)),fn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,fn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:MM,fn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,l)=>{const c=new GM(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const s=this.getTileRangeForExtentAndZ(n,l);c.minX=Math.max(s.minX,c.minX),c.maxX=Math.min(s.maxX,c.maxX),c.minY=Math.max(s.minY,c.minY),c.maxY=Math.min(s.maxY,c.maxY)}return c}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,r,n){const i=this.getTileRangeForExtentAndZ(e,r);for(let l=i.minX,c=i.maxX;l<=c;++l)for(let s=i.minY,p=i.maxY;s<=p;++s)n([r,l,s])}forEachTileCoordParentTileRange(e,r,n,i){let l,c,s,p=null,g=e[0]-1;for(this.zoomFactor_===2?(c=e[1],s=e[2]):p=this.getTileCoordExtent(e,i);g>=this.minZoom;){if(c!==void 0&&s!==void 0?(c=Math.floor(c/2),s=Math.floor(s/2),l=mp(c,c,s,s,n)):l=this.getTileRangeForExtentAndZ(p,g,n),r(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,r,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,c=e[2]*2;return mp(l,l+1,c,c+1,r)}const i=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,r)}return null}getTileRangeForTileCoordAndZ(e,r,n){if(r>this.maxZoom||r<this.minZoom)return null;const i=e[0],l=e[1],c=e[2];if(r===i)return mp(l,c,l,c,n);if(this.zoomFactor_){const p=Math.pow(this.zoomFactor_,r-i),g=Math.floor(l*p),_=Math.floor(c*p);if(r<i)return mp(g,g,_,_,n);const x=Math.floor(p*(l+1))-1,P=Math.floor(p*(c+1))-1;return mp(g,x,_,P,n)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,r,n)}getTileRangeForExtentAndZ(e,r,n){this.getTileCoordForXYAndZ_(e[0],e[3],r,!1,_p);const i=_p[1],l=_p[2];this.getTileCoordForXYAndZ_(e[2],e[1],r,!0,_p);const c=_p[1],s=_p[2];return mp(i,c,l,s,n)}getTileCoordCenter(e){const r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=ho(this.getTileSize(e[0]),this.tmpSize_);return[r[0]+(e[1]+.5)*i[0]*n,r[1]-(e[2]+.5)*i[1]*n]}getTileCoordExtent(e,r){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),l=ho(this.getTileSize(e[0]),this.tmpSize_),c=n[0]+e[1]*l[0]*i,s=n[1]-(e[2]+1)*l[1]*i,p=c+l[0]*i,g=s+l[1]*i;return Ll(c,s,p,g,r)}getTileCoordForCoordAndResolution(e,r,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],r,!1,n)}getTileCoordForXYAndResolution_(e,r,n,i,l){const c=this.getZForResolution(n),s=n/this.getResolution(c),p=this.getOrigin(c),g=ho(this.getTileSize(c),this.tmpSize_);let _=s*(e-p[0])/n/g[0],x=s*(p[1]-r)/n/g[1];return i?(_=F0(_,Ec)-1,x=F0(x,Ec)-1):(_=N0(_,Ec),x=N0(x,Ec)),$v(c,_,x,l)}getTileCoordForXYAndZ_(e,r,n,i,l){const c=this.getOrigin(n),s=this.getResolution(n),p=ho(this.getTileSize(n),this.tmpSize_);let g=(e-c[0])/s/p[0],_=(c[1]-r)/s/p[1];return i?(g=F0(g,Ec)-1,_=F0(_,Ec)-1):(g=N0(g,Ec),_=N0(_,Ec)),$v(n,g,_,l)}getTileCoordForCoordAndZ(e,r,n){return this.getTileCoordForXYAndZ_(e[0],e[1],r,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,r){const n=aM(this.resolutions_,e,r||0);return qn(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,r){return zH(r,0,r.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const r=this.resolutions_.length,n=new Array(r);for(let i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n}}function b5(t){let e=t.getDefaultTileGrid();return e||(e=Xbe(t),t.setDefaultTileGrid(e)),e}function Kbe(t,e,r){const n=e[0],i=t.getTileCoordCenter(e),l=hw(r);if(!gf(l,i)){const c=En(l),s=Math.ceil((l[0]-i[0])/c);return i[0]+=c*s,t.getTileCoordForCoordAndZ(i,n)}return e}function Ybe(t,e,r,n){n=n!==void 0?n:"top-left";const i=pW(t,e,r);return new uw({extent:t,origin:epe(t,n),resolutions:i,tileSize:r})}function v5(t){const e=t||{},r=e.extent||An("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:pW(r,e.maxZoom,e.tileSize,e.maxResolution)};return new uw(n)}function pW(t,e,r,n){e=e!==void 0?e:$H,r=ho(r!==void 0?r:MM);const i=Eo(t),l=En(t);n=n>0?n:Math.max(l/r[0],i/r[1]);const c=e+1,s=new Array(c);for(let p=0;p<c;++p)s[p]=n/Math.pow(2,p);return s}function Xbe(t,e,r,n){const i=hw(t);return Ybe(i,e,r,n)}function hw(t){t=An(t);let e=t.getExtent();if(!e){const r=180*Uh.degrees/t.getMetersPerUnit();e=Ll(-r,-r,r,r)}return e}class Qbe extends IJ{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const r=[256,256];this.tileGrid&&ho(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),r),this.tmpSize=[0,0],this.key_=e.key||Nr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const r=e?this.getTileGridForProjection(e):this.tileGrid;return r?r.getResolutions():null}getTile(e,r,n,i,l,c){return Sr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:b5(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,r,n){const i=this.getTileGridForProjection(n),l=this.getTilePixelRatio(r),c=ho(i.getTileSize(e),this.tmpSize);return l==1?c:nme(c,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,r){const n=r!==void 0?r:this.getProjection(),i=r!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=Kbe(i,e,n)),vye(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class eve extends $l{constructor(e,r){super(e),this.tile=r}}function tve(t,e,r,n){const i=document.createElement("script"),l="olc_"+Nr(e);function c(){delete window[l],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(t.includes("?")?"&":"?")+"callback="+l;const s=setTimeout(function(){c(),r&&r()},1e4);window[l]=function(p){clearTimeout(s),c(),e(p)},document.head.appendChild(i)}const rve=/\{z\}/g,nve=/\{x\}/g,ive=/\{y\}/g,ove=/\{-y\}/g;function sve(t,e,r,n,i){return t.replace(rve,e.toString()).replace(nve,r.toString()).replace(ive,n.toString()).replace(ove,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-n).toString()})}function ave(t){const e=[];let r=/\{([a-z])-([a-z])\}/.exec(t);if(r){const n=r[1].charCodeAt(0),i=r[2].charCodeAt(0);let l;for(l=n;l<=i;++l)e.push(t.replace(r[0],String.fromCharCode(l)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t),r){const n=parseInt(r[2],10);for(let i=parseInt(r[1],10);i<=n;i++)e.push(t.replace(r[0],i.toString()));return e}return e.push(t),e}function lve(t,e){return function(r,n,i){if(!r)return;let l;const c=r[0];if(e){const s=e.getFullTileRange(c);s&&(l=s.getHeight()-1)}return sve(t,c,r[1],r[2],l)}}function fW(t,e){const r=t.length,n=new Array(r);for(let i=0;i<r;++i)n[i]=lve(t[i],e);return cve(n)}function cve(t){return t.length===1?t[0]:function(e,r,n){if(!e)return;const i=_ye(e),l=Eh(i,t.length);return t[l](e,r,n)}}const VT={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class dw extends Qbe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===dw.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const r=e.target,n=Nr(r),i=r.getState();let l;i==qt.LOADING?(this.tileLoadingKeys_[n]=!0,l=VT.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=i==qt.ERROR?VT.TILELOADERROR:i==qt.LOADED?VT.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new eve(l,r))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,r){this.tileUrlFunction=e,typeof r<"u"?this.setKey(r):this.changed()}setUrl(e){const r=ave(e);this.urls=r,this.setUrls(r)}setUrls(e){this.urls=e;const r=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(fW(e,this.tileGrid),r):this.setKey(r)}tileUrlFunction(e,r,n){}}class uve extends dw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:hve,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:MJ,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Ro(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const r=this.getProjection();if(this.tileGrid&&(!r||Ro(r,e)))return this.tileGrid;const n=Nr(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=b5(e)),this.tileGridForProjection[n]}createTile_(e,r,n,i,l,c){const s=[e,r,n],p=this.getTileCoordForTileUrlFunction(s,l),g=p?this.tileUrlFunction(p,i,l):void 0,_=new this.tileClass(s,g!==void 0?qt.IDLE:qt.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return _.key=c,_.addEventListener(Rr.CHANGE,this.handleTileChange.bind(this)),_}getTile(e,r,n,i,l,c){const s=this.getProjection();if(!s||!l||Ro(s,l))return this.getTileInternal(e,r,n,i,s||l);const p=[e,r,n],g=this.getKey(),_=this.getTileGridForProjection(s),x=this.getTileGridForProjection(l),P=this.getTileCoordForTileUrlFunction(p,l),A=new zJ(s,_,l,x,p,P,this.getTilePixelRatio(i),this.getGutter(),(M,F,z,j)=>this.getTileInternal(M,F,z,j,s,c),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return A.key=g,A}getTileInternal(e,r,n,i,l,c){const s=this.getKey(),p=xb(this,s,e,r,n);if(c&&c.containsKey(p))return c.get(p);const g=this.createTile_(e,r,n,i,l,s);return c?.set(p,g),g}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,r){const n=An(e);if(n){const i=Nr(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=r)}}}function hve(t,e){if(Ps){const r=t.getCrossOrigin();let n="same-origin",i="same-origin";r==="anonymous"||r===""?(n="cors",i="omit"):r==="use-credentials"&&(n="cors",i="include"),fetch(e,{mode:n,credentials:i}).then(l=>{if(!l.ok)throw new Error(`HTTP ${l.status}`);return l.blob()}).then(l=>createImageBitmap(l)).then(l=>{const c=t.getImage();c.width=l.width,c.height=l.height,c.getContext("2d").drawImage(l,0,0),l.close?.(),c.dispatchEvent(new Event("load"))}).catch(()=>{t.getImage().dispatchEvent(new Event("error"))});return}t.getImage().src=e}class dve extends uve{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:An("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)tve(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",e.url),r.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const r=e.target;if(!r.status||r.status>=200&&r.status<300){let n;try{n=JSON.parse(r.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const r=An("EPSG:4326"),n=this.getProjection();let i;if(e.bounds!==void 0){const g=u_(r,n);i=yH(e.bounds,g)}const l=hw(n),c=e.minzoom||0,s=e.maxzoom||22,p=v5({extent:l,maxZoom:s,minZoom:c,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=fW(e.tiles,p),e.attribution&&!this.getAttributions()){const g=i!==void 0?i:l;this.setAttributions(function(_){return ui(g,_.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class pve extends dw{constructor(e){const r=e.projection||"EPSG:3857",n=e.extent||hw(r),i=e.tileGrid||v5({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:r,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:mW,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:OJ,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,r,n){if(n.getState()===qt.IDLE){n.setState(qt.LOADING);const i=n.wrappedTileCoord,l=this.getTileGridForProjection(r);let c=l.getTileCoordExtent(i);const s=i[0],p=l.getResolution(s);Xc(c,-p,c);const g=this.projection;r&&this.projection&&!Ro(r,g)&&(c=Vg(c,r,g));const _=this.tileGrid,x=_.getExtent();x&&Rl(c,x,c);let P=p;r&&g&&!Ro(r,g)&&(P=p/g.getMetersPerUnit()/r.getMetersPerUnit());const A=_.getZForResolution(P,this.zDirection);_.forEachTileCoord(c,A,M=>{const F=this.tileUrlFunction(M,e,r);this.sourceTiles_[F]||(this.sourceTiles_[F]=new this.tileClass(M,F?qt.IDLE:qt.EMPTY,F,this.format_,this.tileLoadFunction));const z=this.sourceTiles_[F];n.sourceTiles.push(z),this.tileKeysBySourceTileUrl_[F]||(this.tileKeysBySourceTileUrl_[F]=[]),this.tileKeysBySourceTileUrl_[F].push(n.getKey());const j=z.getState();if(j<qt.LOADED){const $=W=>{this.handleTileChange(W);const X=z.getState();if(X===qt.LOADED||X===qt.ERROR){const te=z.getKey();te in n.errorTileKeys?z.getState()===qt.LOADED&&delete n.errorTileKeys[te]:n.loadingSourceTiles--,X===qt.ERROR?n.errorTileKeys[te]=!0:z.removeEventListener(Rr.CHANGE,$),n.loadingSourceTiles===0&&n.setState(ou(n.errorTileKeys)?qt.LOADED:qt.ERROR)}};z.addEventListener(Rr.CHANGE,$),n.loadingSourceTiles++}j===qt.IDLE&&(z.extent=_.getTileCoordExtent(M),z.projection=this.projection,z.resolution=_.getResolution(M[0]),z.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(M=>M.getState()===qt.ERROR)?qt.ERROR:qt.LOADED)}return n.sourceTiles}removeSourceTiles(e){const r=e.getKey(),n=e.sourceTiles;for(let i=0,l=n.length;i<l;++i){const c=n[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[c])return;const s=this.tileKeysBySourceTileUrl_[c].indexOf(r);s!==-1&&(this.tileKeysBySourceTileUrl_[c].splice(s,1),this.tileKeysBySourceTileUrl_[c].length===0&&(delete this.tileKeysBySourceTileUrl_[c],delete this.sourceTiles_[c]))}}getTile(e,r,n,i,l){const c=[e,r,n];let s=this.getTileCoordForTileUrlFunction(c,l);const p=this.getTileGrid().getExtent(),g=this.projection,_=this.getTileGridForProjection(l);if(s&&p){const A=_.getTileCoordExtent(s);Xc(A,-_.getResolution(e),A),ui(p,!l||!g||Ro(l,g)?A:Vg(A,l,g))||(s=null)}let x=!0;if(s!==null){const A=this.tileGrid,M=_.getResolution(e);let F=M;l&&g&&!Ro(l,g)&&(F=M/g.getMetersPerUnit()/l.getMetersPerUnit());const z=A.getZForResolution(F,1),j=_.getTileCoordExtent(s);Xc(j,-M,j),A.forEachTileCoord(!l||!g||Ro(l,g)?j:Vg(j,l,g),z,$=>{x=x&&!this.tileUrlFunction($,i,g)})}const P=new Kge(c,x?qt.EMPTY:qt.IDLE,s,this.getSourceTiles.bind(this,i,l),this.removeSourceTiles.bind(this));return P.key=this.getKey(),P}getTileGridForProjection(e){const r=e.getCode();let n=this.tileGrids_[r];if(!n){const i=this.projection;if(i!==null&&!Ro(i,e))return b5(e);const l=this.tileGrid,c=l.getResolutions().slice(),s=c.map(function(_,x){return l.getOrigin(x)}),p=c.map(function(_,x){return l.getTileSize(x)}),g=$H+1;for(let _=c.length;_<g;++_)c.push(c[_-1]/2),s.push(s[_-1]),p.push(p[_-1]);n=new uw({extent:l.getExtent(),origins:s,resolutions:c,tileSizes:p}),this.tileGrids_[r]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,r,n){const i=this.getTileGridForProjection(n),l=ho(i.getTileSize(e),this.tmpSize);return[Math.round(l[0]*r),Math.round(l[1]*r)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function mW(t,e){t.setLoader(function(r,n,i){RJ(e,t.getFormat(),r,n,i,t.onLoad.bind(t),t.onError.bind(t))})}function fve(t,e=512){return t.getExtent()?v5({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():g5}function mve(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((n,i)=>{e.accessToken=n,e.accessTokenParam=i})),e}function gve(t,e,r="",n={},i=void 0){let l,c,s,p,g=!0;return typeof r!="string"&&!Array.isArray(r)?(s=r,p=s.source||s.layers,n=s):p=r,typeof n=="string"?(l=n,s={}):(l=n.styleUrl,s=n),s.updateSource===!1&&(g=!1),i||(i=s.resolutions),!l&&typeof e=="string"&&!e.trim().startsWith("{")&&(l=e),l&&(l=l.startsWith("data:")?location.href:cW(l,s.accessToken),s=mve(l,s)),new Promise(function(_,x){K0e(e,s).then(function(P){if(P.version!=8)return x(new Error("glStyle version 8 required."));if(!(t instanceof $ge||t instanceof wb))return x(new Error("Can only apply to VectorLayer or VectorTileLayer"));const A=t instanceof wb?"vector":"geojson";if(p?Array.isArray(p)?c=P.layers.find(function(X){return X.id===p[0]}).source:c=p:(c=P.layers.find(function(X){return X.source&&P.sources[X.source].type===A}).source,p=c),!c)return x(new Error(`No ${A} source found in the glStyle.`));function M(){if(!g)return Promise.resolve();if(t instanceof wb)return bve(P.sources[c],l,s).then(function(Z){const U=t.getSource();U?Z!==U&&(U.setTileUrlFunction(Z.getTileUrlFunction()),typeof U.setUrls=="function"&&typeof Z.getUrls=="function"&&U.setUrls(Z.getUrls()),U.format_||(U.format_=Z.format_),U.getAttributions()||U.setAttributions(Z.getAttributions()),U.getTileLoadFunction()===mW&&U.setTileLoadFunction(Z.getTileLoadFunction()),Ro(U.getProjection(),Z.getProjection())&&(U.tileGrid=Z.getTileGrid())):t.setSource(Z);const K=t.getSource().getTileGrid();!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())&&K.getMinZoom()>0&&t.setMaxResolution(Z0e(Math.max(0,K.getMinZoom()-1e-12),K.getResolutions()))});const X=P.sources[c];let te=t.getSource();(!te||te.get("mapbox-source")!==X)&&(te=xve(X,l,s));const ne=t.getSource();return ne?te!==ne&&(ne.getAttributions()||ne.setAttributions(te.getAttributions()),ne.format_||(ne.format_=te.getFormat()),ne.url_=te.getUrl()):t.setSource(te),Promise.resolve()}let F,z;const j={},$={};function W(){if(!z&&(!P.sprite||j)){if(s.projection&&!i){const te=An(s.projection).getUnits();te!=="m"&&(i=g5.map(ne=>ne/Uh[te]))}z=lbe(t,P,p,i,j,$,(X,te=s.webfonts)=>tbe(X,te),s.getImage),t.getStyle()?M().then(_).catch(x):x(new Error(`Nothing to show for source [${c}]`))}else z?(t.setStyle(z),M().then(_).catch(x)):x(new Error("Something went wrong trying to apply style."))}if(P.sprite){const X=$0e(P.sprite,s.accessToken,l||location.href);F=window.devicePixelRatio>=1.5?.5:1;const te=F==.5?"@2x":"";Promise.all(X.map(function(ne){const Z=new URL(ne.url);let U=Z.origin+Z.pathname+te+".json"+Z.search;return new Promise(function(K,he){Sf("Sprite",U,s).then(K).catch(function(ue){U=Z.origin+Z.pathname+".json"+Z.search,Sf("Sprite",U,s).then(K).catch(he)})}).then(function(K){K===void 0&&x(new Error("No sprites found."));let he;if(he=Z.origin+Z.pathname+te+".png"+Z.search,s.transformRequest){const ue=s.transformRequest(he,"SpriteImage")||he;(ue instanceof Request||ue instanceof Promise)&&(he=ue)}$[ne.id]=he;for(const ue in K){const we=ne.id=="default"?ue:`${ne.id}:${ue}`;j[we]=K[ue]}}).catch(function(K){x(new Error(`Sprites cannot be loaded: ${U}: ${K.message}`))})})).then(W).catch(x)}else W()}).catch(x)})}function yve(t,e){const r=t.bounds;if(r){const n=Rv([r[0],r[1]],e),i=Rv([r[2],r[3]],e);return[n[0],n[1],i[0],i[1]]}return An(e).getExtent()}function _ve(t,e,r){const n=new dve({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),i=n.getTileJSON(),l=n.getTileGrid(),c=An(r.projection||"EPSG:3857"),s=yve(i,c),p=c.getExtent(),g=i.minzoom||0,_=i.maxzoom||22,x={attributions:n.getAttributions(),projection:c,tileGrid:new uw({origin:p?Vl(p):l.getOrigin(0),extent:s||l.getExtent(),minZoom:g,resolutions:fve(c,e.tileSize).slice(0,_+1),tileSize:l.getTileSize(0)})};return Array.isArray(i.tiles)?x.urls=i.tiles:x.url=i.tiles,x}function bve(t,e,r){return new Promise(function(n,i){Y0e(t,e,r).then(function({tileJson:l,tileLoadFunction:c}){const s=_ve(t,l,r);s.tileLoadFunction=c,s.format=new Ube({layerName:"mvt:layer"});const p=new pve(s);p.set("mapbox-source",t),n(p)}).catch(i)})}function vve(t){return`{bbox-${(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function xve(t,e,r){const n=r.projection?new JD({dataProjection:r.projection}):new JD,i=t.data,l={};if(typeof i=="string"){const[s]=Tb(i,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(s)){const g=(x,P,A)=>{const M=vve(A);return s.replace(M,`${x.join(",")}`)},_=new ST({attributions:t.attribution,format:n,loader:(x,P,A,M,F)=>{const z=typeof g=="function"?g(x,P,A):g;Sf("GeoJSON",z,r).then(j=>{const $=_.getFormat().readFeatures(j,{featureProjection:A});_.addFeatures($),M($)}).catch(j=>{_.removeLoadedExtent(x),F()})},strategy:Gge});return _.set("mapbox-source",t),_}const p=new ST({attributions:t.attribution,format:n,url:s,loader:(g,_,x,P,A)=>{Sf("GeoJSON",s,r).then(M=>{const F=p.getFormat().readFeatures(M,{featureProjection:x});p.addFeatures(F),P(F)}).catch(M=>{p.removeLoadedExtent(g),A()})}});return p}l.features=n.readFeatures(i,{featureProjection:"EPSG:3857"});const c=new ST(Object.assign({attributions:t.attribution,format:n},l));return c.set("mapbox-source",t),c}class wve extends wb{constructor(){super({declutter:!0})}async applyVectorStyle(e){return gve(this,e.replace(/\/$/,""))}}const Yv=class Yv extends ld{constructor(r){super({handleEvent:n=>this.handlePointerEvent(n)});xr(this,"overlay");xr(this,"downPixel",null);this.overlay=r}getIntersectingFeature(r){return r.map.getFeaturesAtPixel(r.pixel).find(i=>{const l=i?.get("overlayBodyTemplateId");return!l||typeof l!="string"?!1:document.getElementById(l)instanceof HTMLTemplateElement})}handlePointerEvent(r){const n=r.map.getViewport();switch(r.type){case"pointermove":{if(r.dragging)return!0;this.getIntersectingFeature(r)&&(n.style.cursor="pointer");break}case"pointerdown":{r.pixel.length>=2&&(this.downPixel=[r.pixel[0],r.pixel[1]]);break}case"pointerup":{if(!this.downPixel)break;const i=r.pixel[0]-this.downPixel[0],l=r.pixel[1]-this.downPixel[1];if(Math.sqrt(i*i+l*l)<Yv.CLICK_DISTANCE_THRESHOLD){const s=this.getIntersectingFeature(r),p=s?.getGeometry(),g=p instanceof su?p.getCoordinates():void 0,_=s?.getProperties()??{};s&&g?this.overlay.showAtCoordinate(g,_):this.overlay.close()}this.downPixel=null;break}}return!0}};xr(Yv,"CLICK_DISTANCE_THRESHOLD",5);let AC=Yv;class Eve extends ld{constructor(){super()}handleEvent(e){const r=e.map.getViewport();return e.type==="pointerdown"?(r.style.cursor!=="pointer"&&(r.style.cursor="grabbing"),!0):e.type==="pointermove"?(r.style.cursor=e.dragging?"grabbing":"grab",!0):((e.type==="pointerup"||e.type==="pointerleave")&&(r.style.cursor="grab"),!0)}}class Tve extends age{constructor(r){const n=r.querySelector(".app-map__overlay-header"),i=r.querySelector(".app-map__overlay-title"),l=r.querySelector(".app-map__overlay-body"),c=r.querySelector(".app-map__overlay-close");r.setAttribute("part","app-map__overlay"),l.setAttribute("part","app-map__overlay-body"),n.setAttribute("part","app-map__overlay-header"),i.setAttribute("part","app-map__overlay-title"),c.setAttribute("part","app-map__overlay-close");super({element:r,autoPan:{animation:{duration:250},margin:80},offset:[0,0],positioning:"top-center",stopEvent:!0});xr(this,"container");xr(this,"title");xr(this,"content");xr(this,"closeButton");this.container=r,this.title=i,this.content=l,this.closeButton=c,this.closeButton.addEventListener("click",()=>this.close())}replacer(r,n){return r.replace(/{{(.*?)}}/g,(i,l)=>{const c=n[l.trim()];return c!==void 0?String(c):""})}showAtCoordinate(r,n){const i=n.overlayTitleTemplateId,l=n.overlayBodyTemplateId,c=typeof i=="string"?document.getElementById(i):null,s=typeof l=="string"?document.getElementById(l):null;c instanceof HTMLTemplateElement&&this.title&&(this.title.innerHTML=this.replacer(c.innerHTML,n)),s instanceof HTMLTemplateElement?this.content.innerHTML=this.replacer(s.innerHTML,n):console.warn(`[FeatureOverlay] No valid template found for overlayBodyTemplateId="${l}"`),this.container.hidden=!1,this.setPosition(r),this.container.dispatchEvent(new CustomEvent("map:overlay:open",{bubbles:!0}))}close(){this.container.hidden=!0,this.setPosition(void 0),this.container.dispatchEvent(new CustomEvent("map:overlay:close",{bubbles:!0}))}}async function Sve(t,e){const r=new LJ({target:t,layers:[],controls:e.controls}),n=e.vectorUrl||Nc.tiles.urls.localVectorStyleUrl,i=new wve;try{await i.applyVectorStyle(n),r.addLayer(i)}catch(l){if(/^https?:\/\/localhost(:\d+)?\//i.test(n))console.warn("[em-map] applyVectorStyle failed on localhost; keeping vector layer for tests.",l),r.addLayer(i);else throw console.error("[em-map] Failed to apply vector style.",l),l}if(e.usesInternalOverlays&&e.overlayEl instanceof HTMLElement){const l=new Tve(e.overlayEl);r.addOverlay(l),r.addInteraction(new AC(l));const c=r;c.featureOverlay=l}if(e.controls?.grabCursor!==!1){r.addInteraction(new Eve);const l=r.getViewport();l.style.cursor="grab"}return r}async function Cve(t,e,r=!1){const n=e||Nc.tiles.urls.localVectorStyleUrl,i=new FJ({target:t,styleUrl:n,enable3DControls:r,minZoom:6,maxZoom:18,zoom:15,pitch:0,bearing:0,center:[-.125,51.501],attributionControl:!1});if(i.addControl(new NJ.NavigationControl({showCompass:!0}),"top-right"),r){const{add3DBuildingsControl:l}=await Zs(async()=>{const{add3DBuildingsControl:c}=await import("./maplibre-3d-buildings-control-DQj4YYpu.js");return{add3DBuildingsControl:c}},[],import.meta.url);l(i)}return i}function Pve(){const t=document.createDocumentFragment(),e=document.createElement("div");e.id="map",e.className="app-map__viewport",t.appendChild(e);const r=document.createElement("div");r.className="app-map__overlay",r.hidden=!0,r.innerHTML=`
    <div class="app-map__overlay-header">
      <div class="app-map__overlay-title"></div>
      <button class="app-map__overlay-close" aria-label="Close overlay">&times;</button>
    </div>
    <div class="app-map__overlay-body"></div>
  `,t.appendChild(r);const n=document.createElement("slot");return n.name="alerts",t.appendChild(n),t}function YD(t,e){const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.textContent=t,r}function Ave(t){return t?.getAttribute("csp-nonce")||null}function Rve(t,e){return{mapLibrary:"openlayers",hostElement:t,project:r=>Rv(r),unproject:r=>zpe(r),openlayers:{map:e}}}function Ive(t,e){return{mapLibrary:"maplibre",hostElement:t,project:r=>r,unproject:r=>r,mapLibre:{map:e}}}const Mve=`:root,
:host {
  --ol-background-color: white;
  --ol-accent-background-color: #F5F5F5;
  --ol-subtle-background-color: rgba(128, 128, 128, 0.25);
  --ol-partial-background-color: rgba(255, 255, 255, 0.75);
  --ol-foreground-color: #333333;
  --ol-subtle-foreground-color: #666666;
  --ol-brand-color: #00AAFF;
}

.ol-box {
  box-sizing: border-box;
  border-radius: 2px;
  border: 1.5px solid var(--ol-background-color);
  background-color: var(--ol-partial-background-color);
}

.ol-mouse-position {
  top: 8px;
  right: 8px;
  position: absolute;
}

.ol-scale-line {
  background: var(--ol-partial-background-color);
  border-radius: 4px;
  bottom: 8px;
  left: 8px;
  padding: 2px;
  position: absolute;
}

.ol-scale-line-inner {
  border: 1px solid var(--ol-subtle-foreground-color);
  border-top: none;
  color: var(--ol-foreground-color);
  font-size: 10px;
  text-align: center;
  margin: 1px;
  will-change: contents, width;
  transition: all 0.25s;
}

.ol-scale-bar {
  position: absolute;
  bottom: 8px;
  left: 8px;
}

.ol-scale-bar-inner {
  display: flex;
}

.ol-scale-step-marker {
  width: 1px;
  height: 15px;
  background-color: var(--ol-foreground-color);
  float: right;
  z-index: 10;
}

.ol-scale-step-text {
  position: absolute;
  bottom: -5px;
  font-size: 10px;
  z-index: 11;
  color: var(--ol-foreground-color);
  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);
}

.ol-scale-text {
  position: absolute;
  font-size: 12px;
  text-align: center;
  bottom: 25px;
  color: var(--ol-foreground-color);
  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);
}

.ol-scale-singlebar {
  position: relative;
  height: 10px;
  z-index: 9;
  box-sizing: border-box;
  border: 1px solid var(--ol-foreground-color);
}

.ol-scale-singlebar-even {
  background-color: var(--ol-subtle-foreground-color);
}

.ol-scale-singlebar-odd {
  background-color: var(--ol-background-color);
}

.ol-unsupported {
  display: none;
}

.ol-viewport,
.ol-unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.ol-viewport canvas {
  all: unset;
  overflow: hidden;
}

.ol-viewport {
  touch-action: pan-x pan-y;
}

.ol-selectable {
  -webkit-touch-callout: default;
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;
}

.ol-grabbing {
  cursor: -webkit-grabbing;
  cursor: -moz-grabbing;
  cursor: grabbing;
}

.ol-grab {
  cursor: move;
  cursor: -webkit-grab;
  cursor: -moz-grab;
  cursor: grab;
}

.ol-control {
  position: absolute;
  background-color: var(--ol-subtle-background-color);
  border-radius: 4px;
}

.ol-zoom {
  top: 0.5em;
  left: 0.5em;
}

.ol-rotate {
  top: 0.5em;
  right: 0.5em;
  transition: opacity 0.25s linear, visibility 0s linear;
}

.ol-rotate.ol-hidden {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.25s linear, visibility 0s linear 0.25s;
}

.ol-zoom-extent {
  top: 4.643em;
  left: 0.5em;
}

.ol-full-screen {
  right: 0.5em;
  top: 0.5em;
}

.ol-control button {
  display: block;
  margin: 1px;
  padding: 0;
  color: var(--ol-subtle-foreground-color);
  font-weight: bold;
  text-decoration: none;
  font-size: inherit;
  text-align: center;
  height: 1.375em;
  width: 1.375em;
  line-height: 0.4em;
  background-color: var(--ol-background-color);
  border: none;
  border-radius: 2px;
}

.ol-control button::-moz-focus-inner {
  border: none;
  padding: 0;
}

.ol-zoom-extent button {
  line-height: 1.4em;
}

.ol-compass {
  display: block;
  font-weight: normal;
  will-change: transform;
}

.ol-touch .ol-control button {
  font-size: 1.5em;
}

.ol-touch .ol-zoom-extent {
  top: 5.5em;
}

.ol-control button:hover,
.ol-control button:focus {
  text-decoration: none;
  outline: 1px solid var(--ol-subtle-foreground-color);
  color: var(--ol-foreground-color);
}

.ol-zoom .ol-zoom-in {
  border-radius: 2px 2px 0 0;
}

.ol-zoom .ol-zoom-out {
  border-radius: 0 0 2px 2px;
}

.ol-attribution {
  text-align: right;
  bottom: 0.5em;
  right: 0.5em;
  max-width: calc(100% - 1.3em);
  display: flex;
  flex-flow: row-reverse;
  align-items: center;
}

.ol-attribution a {
  color: var(--ol-subtle-foreground-color);
  text-decoration: none;
}

.ol-attribution ul {
  margin: 0;
  padding: 1px 0.5em;
  color: var(--ol-foreground-color);
  text-shadow: 0 0 2px var(--ol-background-color);
  font-size: 12px;
}

.ol-attribution li {
  display: inline;
  list-style: none;
}

.ol-attribution li:not(:last-child):after {
  content: " ";
}

.ol-attribution img {
  max-height: 2em;
  max-width: inherit;
  vertical-align: middle;
}

.ol-attribution button {
  flex-shrink: 0;
}

.ol-attribution.ol-collapsed ul {
  display: none;
}

.ol-attribution:not(.ol-collapsed) {
  background: var(--ol-partial-background-color);
}

.ol-attribution.ol-uncollapsible {
  bottom: 0;
  right: 0;
  border-radius: 4px 0 0;
}

.ol-attribution.ol-uncollapsible img {
  margin-top: -0.2em;
  max-height: 1.6em;
}

.ol-attribution.ol-uncollapsible button {
  display: none;
}

.ol-zoomslider {
  top: 4.5em;
  left: 0.5em;
  height: 200px;
}

.ol-zoomslider button {
  position: relative;
  height: 10px;
}

.ol-touch .ol-zoomslider {
  top: 5.5em;
}

.ol-overviewmap {
  left: 0.5em;
  bottom: 0.5em;
}

.ol-overviewmap.ol-uncollapsible {
  bottom: 0;
  left: 0;
  border-radius: 0 4px 0 0;
}

.ol-overviewmap .ol-overviewmap-map,
.ol-overviewmap button {
  display: block;
}

.ol-overviewmap .ol-overviewmap-map {
  border: 1px solid var(--ol-subtle-foreground-color);
  height: 150px;
  width: 150px;
}

.ol-overviewmap:not(.ol-collapsed) button {
  bottom: 0;
  left: 0;
  position: absolute;
}

.ol-overviewmap.ol-collapsed .ol-overviewmap-map,
.ol-overviewmap.ol-uncollapsible button {
  display: none;
}

.ol-overviewmap:not(.ol-collapsed) {
  background: var(--ol-subtle-background-color);
}

.ol-overviewmap-box {
  border: 1.5px dotted var(--ol-subtle-foreground-color);
}

.ol-overviewmap .ol-overviewmap-box:hover {
  cursor: move;
}

.ol-overviewmap .ol-viewport:hover {
  cursor: pointer;
}





















































:host {
  background: rgb(180, 220, 237);
  display: block;
  font-family: "GDS Transport", arial, sans-serif;
  position: relative;
  height: 100%;
  width: 100%;
}

.app-map__viewport {
  width: 100%;
  height: 100%;
}


























































:host {
  --em-scale-bar-bottom: 20px;
}

:host[type=button]:not(:disabled),
:host[type=reset]:not(:disabled),
:host[type=submit]:not(:disabled),
:host button:not(:disabled) {
  cursor: pointer;
}

:host .ol-control {
  background-color: none;
  box-shadow: none;
  padding: 0;
}

:host .ol-control button {
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/*! Copyright (c) 2011 by Margaret Calvert & Henrik Kubel. All rights reserved. The font has been customised for exclusive use on gov.uk. This cut is not commercially available. */ /* stylelint-disable-line scss/comment-no-loud  */
@font-face {
  font-family: "GDS Transport";
  font-style: normal;
  font-weight: normal;
  src: url("fonts/light-94a07e06a1-v2.woff2") format("woff2"), url("fonts/light-f591b13f7d-v2.woff") format("woff");
  font-display: fallback;
}
@font-face {
  font-family: "GDS Transport";
  font-style: normal;
  font-weight: bold;
  src: url("fonts/bold-b542beb274-v2.woff2") format("woff2"), url("fonts/bold-affa96571d-v2.woff") format("woff");
  font-display: fallback;
}
@media print {
  :host .ol-control button {
    font-family: sans-serif;
  }
}
:host .ol-control button {
  font-weight: 700;
  font-size: 1rem;
  line-height: 1.25;
}
@media (min-width: 40.0625em) {
  :host .ol-control button {
    font-size: 1.1875rem;
    line-height: 1.3157894737;
  }
}
@media print {
  :host .ol-control button {
    font-size: 14pt;
    line-height: 1.15;
  }
}
:host .ol-control button {
  font-family: "GDS Transport", arial, sans-serif;
  line-height: 1;
  background-color: #ffffff;
  color: #0b0c0c;
  border: 1px solid #0b0c0c;
  border-radius: 0;
  width: 2em;
  height: 2em;
  text-align: center;
  padding: 0;
  margin: 0;
  box-shadow: none;
  transition: background-color 0.1s ease-in-out, color 0.1s ease-in-out, border-color 0.1s ease-in-out;
}

:host .ol-control button:hover,
:host .ol-control button:focus {
  text-decoration: none;
  outline: 1px solid #0b0c0c;
}

/* Rotate styles */
:host .ol-control.ol-rotate {
  background-color: transparent;
  left: 0.5em;
  right: auto;
  top: 95px;
}
:host .ol-control.ol-rotate .ol-rotate-reset {
  border-radius: 50%;
}
:host .ol-control.ol-rotate .ol-compass {
  font-size: 0;
  width: 100%;
  height: 100%;
  background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

/* When zoom slider is present, move rotate below the slider */
:host(.has-zoom-slider) .ol-control.ol-rotate {
  top: 295px;
}

/* Zoom slider styles */
:host(.has-zoom-slider) .ol-zoom .ol-zoom-out {
  margin-top: 200px;
}

:host(.has-zoom-slider) .ol-zoomslider {
  background-color: transparent;
  top: 46px;
  left: 0.5em;
  width: 38px;
  height: 200px;
  position: absolute;
}

:host(.has-zoom-slider) .ol-zoom-in.ol-has-tooltip:hover [role=tooltip],
:host(.has-zoom-slider) .ol-zoom-in.ol-has-tooltip:focus [role=tooltip] {
  top: 3px;
}

:host(.has-zoom-slider) .ol-zoom-out.ol-has-tooltip:hover [role=tooltip],
:host(.has-zoom-slider) .ol-zoom-out.ol-has-tooltip:focus [role=tooltip] {
  top: 232px;
}

:host .ol-zoomslider button {
  position: relative;
  height: 10px;
}

:host .ol-scale-bar {
  bottom: var(--em-scale-bar-bottom);
  left: 50%;
  transform: translateX(-50%);
}

:host .ol-scale-text {
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  :host .ol-scale-text {
    font-family: sans-serif;
  }
}
:host .ol-scale-text {
  font-weight: 400;
  font-size: 0.875rem;
  line-height: 1.1428571429;
}
@media (min-width: 40.0625em) {
  :host .ol-scale-text {
    font-size: 1rem;
    line-height: 1.25;
  }
}
@media print {
  :host .ol-scale-text {
    font-size: 14pt;
    line-height: 1.2;
  }
}
:host .ol-scale-text {
  color: #0b0c0c;
}

:host .ol-scale-step-text {
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  :host .ol-scale-step-text {
    font-family: sans-serif;
  }
}
:host .ol-scale-step-text {
  font-weight: 400;
  font-size: 0.75rem;
  line-height: 1.25;
}
@media (min-width: 40.0625em) {
  :host .ol-scale-step-text {
    font-size: 0.875rem;
    line-height: 1.4285714286;
  }
}
@media print {
  :host .ol-scale-step-text {
    font-size: 12pt;
    line-height: 1.2;
  }
}
:host .ol-scale-step-text {
  color: #0b0c0c;
}

:host .ol-scale-singlebar-even {
  background-color: #0b0c0c;
}

/* coordinates */
:host .em-map__location-dms {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(var(--em-scale-bar-bottom) + 25px);
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  :host .em-map__location-dms {
    font-family: sans-serif;
  }
}
:host .em-map__location-dms {
  font-weight: 400;
  font-size: 0.875rem;
  line-height: 1.1428571429;
}
@media (min-width: 40.0625em) {
  :host .em-map__location-dms {
    font-size: 1rem;
    line-height: 1.25;
  }
}
@media print {
  :host .em-map__location-dms {
    font-size: 14pt;
    line-height: 1.2;
  }
}
:host .em-map__location-dms {
  background: transparent;
  padding: 2px 6px;
  border-radius: 4px;
  white-space: nowrap;
}

/* MapLibre controls */
:host .maplibregl-ctrl button.active {
  background-color: #b1b4b6;
  color: #ffffff;
}

:host .maplibregl-ctrl button.active:hover,
:host .maplibregl-ctrl button.active:focus {
  background-color: #505a5f;
  color: #ffffff;
  outline: 1px solid #ffffff;
}

:host .maplibregl-ctrl button:disabled {
  background-color: #f3f2f1;
  color: #b1b4b6;
  border-color: #b1b4b6;
  cursor: not-allowed;
}

:host .maplibregl-ctrl button:disabled:hover,
:host .maplibregl-ctrl button:disabled:focus {
  background-color: #f3f2f1;
  color: #b1b4b6;
  outline: none;
}

.app-map__overlay,
:host::part(app-map__overlay) {
  cursor: default;
  position: relative;
  background-color: #ffffff;
  border: 1px solid #0b0c0c;
  min-width: 420px;
  z-index: 1;
  box-shadow: 0 2px 4px rgba(11, 12, 12, 0.1);
  display: flex;
  flex-direction: column;
  bottom: -20px;
}

.app-map__overlay::before,
:host::part(app-map__overlay)::before {
  content: "";
  position: absolute;
  left: 50%;
  top: -25px;
  transform: translateX(-50%);
  border-width: 12px;
  border-style: solid;
  border-color: transparent transparent #0b0c0c transparent;
  z-index: -1;
}

.app-map__overlay::after,
:host::part(app-map__overlay)::after {
  content: "";
  position: absolute;
  left: 50%;
  top: -21px;
  transform: translateX(-50%);
  border-width: 11px;
  border-style: solid;
  border-color: transparent transparent #ffffff transparent;
  z-index: 1;
}

.app-map__overlay-header,
:host::part(app-map__overlay-header) {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  background-color: #ffffff;
  padding-bottom: 5px;
  padding-top: 5px;
  padding-left: 10px;
  padding-right: 10px;
}

.app-map__overlay-title,
:host::part(app-map__overlay-title) {
  font-size: 18px;
  flex: 1;
  margin-top: 5px;
  margin-right: 10px;
}

.app-map__overlay-close,
:host::part(app-map__overlay-close) {
  background: none;
  border: none;
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  .app-map__overlay-close,
  :host::part(app-map__overlay-close) {
    font-family: sans-serif;
  }
}
.app-map__overlay-close,
:host::part(app-map__overlay-close) {
  font-weight: 400;
  font-size: 1.125rem;
  line-height: 1.1111111111;
}
@media (min-width: 40.0625em) {
  .app-map__overlay-close,
  :host::part(app-map__overlay-close) {
    font-size: 1.6875rem;
    line-height: 1.1111111111;
  }
}
@media print {
  .app-map__overlay-close,
  :host::part(app-map__overlay-close) {
    font-size: 18pt;
    line-height: 1.15;
  }
}
.app-map__overlay-close,
:host::part(app-map__overlay-close) {
  line-height: 1;
  cursor: pointer;
  color: #505a5f;
}
.app-map__overlay-close:hover,
:host::part(app-map__overlay-close):hover {
  color: #0b0c0c;
}

.app-map__overlay-body,
:host::part(app-map__overlay-body) {
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  .app-map__overlay-body,
  :host::part(app-map__overlay-body) {
    font-family: sans-serif;
  }
}
.app-map__overlay-body,
:host::part(app-map__overlay-body) {
  font-weight: 400;
  font-size: 0.875rem;
  line-height: 1.1428571429;
}
@media (min-width: 40.0625em) {
  .app-map__overlay-body,
  :host::part(app-map__overlay-body) {
    font-size: 1rem;
    line-height: 1.25;
  }
}
@media print {
  .app-map__overlay-body,
  :host::part(app-map__overlay-body) {
    font-size: 14pt;
    line-height: 1.2;
  }
}
.app-map__overlay-body,
:host::part(app-map__overlay-body) {
  max-height: 400px;
  overflow-y: auto;
  padding-bottom: 10px;
  padding-top: 10px;
}

.app-map__overlay-row,
:host::part(app-map__overlay-row) {
  display: flex;
  border-top: 1px solid #b1b4b6;
  margin-left: 10px;
  margin-right: 10px;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 10px;
  padding-right: 10px;
}

.app-map__overlay-row:nth-child(odd) {
  background-color: #ffffff;
}

.app-map__overlay-row:nth-child(even) {
  background-color: #f3f2f1;
}

.app-map__overlay-label,
:host::part(app-map__overlay-label) {
  flex: 0 0 50%;
  max-width: 50%;
  overflow-wrap: break-word;
  word-break: break-word;
  text-align: left;
  margin-right: 10px;
}

.app-map__overlay-value,
:host::part(app-map__overlay-value) {
  flex: 0 0 50%;
  max-width: 50%;
  overflow-wrap: break-word;
  word-break: break-word;
  text-align: left;
}

::slotted(.em-map__alerts) {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
  max-width: 500px;
  text-align: center;
}
`;class Ove extends HTMLElement{constructor(){super();xr(this,"mapNonce",null);xr(this,"adapter");xr(this,"layers",new Map);xr(this,"shadow");xr(this,"featureOverlay");xr(this,"geoJson",null);xr(this,"positionData",[]);xr(this,"mapInstance");this.shadow=this.attachShadow({mode:"open"})}async connectedCallback(){this.mapNonce=Ave(this),this.render(),this.geoJson=this.parseGeoJsonFromSlot(),this.positionData=this.parsePositionDataFromSlot(),await this.initialiseMap(),this.dispatchEvent(new CustomEvent("map:ready",{detail:{map:this.map,geoJson:this.geoJson},bubbles:!0,composed:!0}))}get geojson(){return this.geoJson}get positions(){return this.positionData}get map(){return this.mapInstance}get olMapInstance(){return this.mapInstance instanceof LJ?this.mapInstance:null}get maplibreMapInstance(){return this.mapInstance instanceof FJ?this.mapInstance:null}addLayer(r,n){if(!this.adapter)throw new Error("Map not ready");return this.layers.has(r.id)&&this.removeLayer(r.id),r.attach(this.adapter,n),this.layers.set(r.id,r),typeof r.getNativeLayer=="function"?r.getNativeLayer():void 0}removeLayer(r){if(!this.adapter)return;let n=this.layers.get(r),i;if(!n){for(const l of this.layers.values())if(typeof l=="object"&&l!==null&&"options"in l?i=l.options:i=void 0,i?.title===r){n=l;break}}n&&(n.detach(this.adapter),this.layers.delete(n.id))}getLayer(r){return this.layers.get(r)}closeOverlay(){this.featureOverlay?.close()}parseAttributes(){const r=this.getAttribute("renderer")==="maplibre"?"maplibre":"openlayers",n=this.getAttribute("vector-url")||this.getAttribute("vector-test-url"),i=n&&n.trim()?n:Nc.tiles.urls.localVectorStyleUrl;return{renderer:r,vectorUrl:i,usesInternalOverlays:this.hasAttribute("uses-internal-overlays"),overlayBodyTemplateId:this.getAttribute("overlay-body-template-id")||void 0,overlayTitleTemplateId:this.getAttribute("overlay-title-template-id")||void 0}}parseGeoJsonFromSlot(){const r=this.querySelector('script[type="application/json"][slot="geojson-data"]');if(r?.textContent)try{return JSON.parse(r.textContent)}catch(n){console.warn("Invalid GeoJSON passed to <em-map>",n)}return null}parsePositionDataFromSlot(){const r=this.querySelector('script[type="application/json"][slot="position-data"]');if(r?.textContent)try{return JSON.parse(r.textContent)}catch(n){console.warn("Invalid position data passed to <em-map>",n)}return[]}async initialiseMap(){const r=this.parseAttributes(),n=this.shadow.querySelector("#map"),i=this.shadow.querySelector(".app-map__overlay")??null;if(r.renderer==="maplibre")this.mapInstance=await Cve(n,r.vectorUrl,this.getControlOptions().enable3DBuildings??!1),this.adapter=Ive(this,this.mapInstance);else{this.mapInstance=await Sve(n,{vectorUrl:r.vectorUrl,usesInternalOverlays:r.usesInternalOverlays,overlayEl:i,controls:this.getControlOptions()}),this.adapter=Rve(this,this.mapInstance);const l=this.mapInstance;this.featureOverlay=l.featureOverlay}}getControlOptions(){const r=P=>this.hasAttribute(P)&&this.getAttribute(P)!=="false",n=this.getAttribute("rotate-control");let i;n==="false"?i=!1:n==="auto-hide"?i={autoHide:!0}:i={autoHide:!1};const l=this.hasAttribute("scale-line")&&this.getAttribute("scale-line")!=="false",c=this.getAttribute("scale-control"),s=this.getAttribute("location-display")??void 0,p=this.getAttribute("location-source")??void 0,g=r("zoom-slider"),_=r("grab-cursor");let x;return c==="bar"||c==="line"?x=c:c==="false"?x=void 0:l&&(x="line"),this.classList.toggle("has-rotate-control",i!==!1),this.classList.toggle("has-zoom-slider",g),this.classList.toggle("has-scale-control",!!x),this.classList.toggle("has-location-dms",s==="dms"),{grabCursor:_,rotate:i,zoomSlider:g,scaleControl:x,locationDisplay:s,locationDisplaySource:p,enable3DBuildings:r("enable-3d-buildings")}}render(){if(this.mapNonce===null){console.warn("Warning: No CSP nonce provided. Styles may not be applied correctly.");return}this.shadow.innerHTML="",this.shadow.appendChild(YD(Mve,this.mapNonce)),this.shadow.appendChild(YD(Lde,this.mapNonce)),this.shadow.appendChild(Pve())}}customElements.define("em-map",Ove);const kve={parameters:{controls:{matchers:{color:/(background|color)$/i,date:/Date$/i}},options:{panelPosition:"right",storySort:{order:["Overview","Components",["Map",["Introduction","Setup","Layers","Overlays"]]]}},a11y:{test:"todo"}}},Lve=Object.freeze(Object.defineProperty({__proto__:null,default:kve},Symbol.toStringTag,{value:"Module"}));$I();const{composeConfigs:Dve,PreviewWeb:Nve}=__STORYBOOK_MODULE_PREVIEW_API__,Fve=(t=[])=>{const e=[t[0]??Lhe,t[1]??ede,t[2]??sde,t[3]??mde,t[4]??kde,t[5]??Lve];return Dve(e)};window.__STORYBOOK_PREVIEW__=window.__STORYBOOK_PREVIEW__||new Nve(she,Fve);window.__STORYBOOK_STORY_STORE__=window.__STORYBOOK_STORY_STORE__||window.__STORYBOOK_PREVIEW__.storyStore;export{gxe as $,wxe as A,xxe as B,f_ as C,vxe as D,uxe as E,Hx as F,sxe as G,pxe as H,oxe as I,yxe as J,axe as K,Wh as L,dxe as M,Pxe as N,Cxe as O,su as P,Sxe as Q,$x as R,sd as S,Vx as T,Ixe as U,$ge as V,Rxe as W,hxe as X,lxe as Y,bxe as Z,$h as _,iL as a,fxe as a0,cxe as a1,mxe as a2,_xe as a3,Axe as a4,Txe as a5,nxe as a6,DG as a7,Lxe as a8,ixe as a9,bv as aa,Nxe as ab,Ihe as ac,zxe as b,Fxe as c,Aue as d,ye as e,Cue as f,oye as g,Ll as h,ui as i,mH as j,tfe as k,Rv as l,os as m,ST as n,qc as o,Ma as p,ls as q,IH as r,Nc as s,l_ as t,gb as u,Rue as v,Iue as w,Mue as x,Oue as y,Exe as z};
