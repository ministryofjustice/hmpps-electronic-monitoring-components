const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Introduction-BV1WDDGT.js","./WithTooltip-SK46ZJ2J-OjnOUbbi.js","./preload-helper-PPVm8Dsz.js","./index-B510Wbg-.js","./layers-docs-DkCstYSz.js","./layers-example.stories-DvCQ-3i8.js","./setupMapDemo-Dw4ict_N.js","./overlays-docs-CTnLCeg7.js","./overlays-example.stories-CxDF3mLb.js","./setup-docs-BQ6N4u_V.js","./setup-example.stories-CwVFXBNy.js","./DocsRenderer-HT7GNKAR-BgpELC0G.js","./matchers-ZRZBO4XZ-BrmjAYha.js"])))=>i.map(i=>d[i]);
var BZ=Object.defineProperty;var qZ=(t,e,r)=>e in t?BZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Er=(t,e,r)=>qZ(t,typeof e!="symbol"?e+"":e,r);import{_ as Gs}from"./preload-helper-PPVm8Dsz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var NT={},$Z=Object.create,$v=Object.defineProperty,VZ=Object.getOwnPropertyDescriptor,FD=Object.getOwnPropertyNames,UZ=Object.getPrototypeOf,GZ=Object.prototype.hasOwnProperty,m=(t,e)=>$v(t,"name",{value:e,configurable:!0}),E0=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),He=(t,e)=>function(){return e||(0,t[FD(t)[0]])((e={exports:{}}).exports,e),e.exports},ko=(t,e)=>{for(var r in e)$v(t,r,{get:e[r],enumerable:!0})},HZ=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of FD(e))!GZ.call(t,i)&&i!==r&&$v(t,i,{get:()=>e[i],enumerable:!(n=VZ(e,i))||n.enumerable});return t},Ti=(t,e,r)=>(r=t!=null?$Z(UZ(t)):{},HZ(e||!t||!t.__esModule?$v(r,"default",{value:t,enumerable:!0}):r,t)),JZ=He({"../node_modules/@ngard/tiny-isequal/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEqual=function(){var e=Object.prototype.toString,r=Object.getPrototypeOf,n=Object.getOwnPropertySymbols?function(i){return Object.keys(i).concat(Object.getOwnPropertySymbols(i))}:Object.keys;return function(i,l){return m(function c(s,p,g){var _,x,P,A=e.call(s),M=e.call(p);if(s===p)return!0;if(s==null||p==null)return!1;if(g.indexOf(s)>-1&&g.indexOf(p)>-1)return!0;if(g.push(s,p),A!=M||(_=n(s),x=n(p),_.length!=x.length||_.some(function(N){return!c(s[N],p[N],g)})))return!1;switch(A.slice(8,-1)){case"Symbol":return s.valueOf()==p.valueOf();case"Date":case"Number":return+s==+p||+s!=+s&&+p!=+p;case"RegExp":case"Function":case"String":case"Boolean":return""+s==""+p;case"Set":case"Map":_=s.entries(),x=p.entries();do if(!c((P=_.next()).value,x.next().value,g))return!1;while(!P.done);return!0;case"ArrayBuffer":s=new Uint8Array(s),p=new Uint8Array(p);case"DataView":s=new Uint8Array(s.buffer),p=new Uint8Array(p.buffer);case"Float32Array":case"Float64Array":case"Int8Array":case"Int16Array":case"Int32Array":case"Uint8Array":case"Uint16Array":case"Uint32Array":case"Uint8ClampedArray":case"Arguments":case"Array":if(s.length!=p.length)return!1;for(P=0;P<s.length;P++)if((P in s||P in p)&&(P in s!=P in p||!c(s[P],p[P],g)))return!1;return!0;case"Object":return c(r(s),r(p),g);default:return!1}},"n")(i,l,[])}}()}}),WZ=He({"../node_modules/min-indent/index.js"(t,e){e.exports=r=>{const n=r.match(/^[ \t]*(?=\S)/gm);return n?n.reduce((i,l)=>Math.min(i,l.length),1/0):0}}}),ZZ=He({"../node_modules/strip-indent/index.js"(t,e){var r=WZ();e.exports=n=>{const i=r(n);if(i===0)return n;const l=new RegExp(`^[ \\t]{${i}}`,"gm");return n.replace(l,"")}}}),KZ=He({"../node_modules/indent-string/index.js"(t,e){e.exports=(r,n=1,i)=>{if(i={indent:" ",includeEmptyLines:!1,...i},typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof n!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof n}\``);if(typeof i.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof i.indent}\``);if(n===0)return r;const l=i.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(l,i.indent.repeat(n))}}}),zD=He({"../node_modules/redent/index.js"(t,e){var r=ZZ(),n=KZ();e.exports=(i,l=0,c)=>n(r(i),l,c)}}),YZ=He({"../node_modules/aria-query/lib/util/iteratorProxy.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function e(){var r=this,n=0,i={"@@iterator":m(function(){return i},"iterator"),next:m(function(){if(n<r.length){var c=r[n];return n=n+1,{done:!1,value:c}}else return{done:!0}},"next")};return i}m(e,"iteratorProxy"),t.default=e}}),ky=He({"../node_modules/aria-query/lib/util/iterationDecorator.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var e=r(YZ());function r(l){return l&&l.__esModule?l:{default:l}}m(r,"_interopRequireDefault");function n(l){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(l)}m(n,"_typeof");function i(l,c){return typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"&&Object.defineProperty(l,Symbol.iterator,{value:e.default.bind(c)}),l}m(i,"iterationDecorator")}}),XZ=He({"../node_modules/aria-query/lib/ariaPropsMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(ky());function r(x){return x&&x.__esModule?x:{default:x}}m(r,"_interopRequireDefault");function n(x,P){return p(x)||s(x,P)||l(x,P)||i()}m(n,"_slicedToArray");function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(i,"_nonIterableRest");function l(x,P){if(x){if(typeof x=="string")return c(x,P);var A={}.toString.call(x).slice(8,-1);return A==="Object"&&x.constructor&&(A=x.constructor.name),A==="Map"||A==="Set"?Array.from(x):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?c(x,P):void 0}}m(l,"_unsupportedIterableToArray");function c(x,P){(P==null||P>x.length)&&(P=x.length);for(var A=0,M=Array(P);A<P;A++)M[A]=x[A];return M}m(c,"_arrayLikeToArray");function s(x,P){var A=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(A!=null){var M,N,z,j,$=[],J=!0,X=!1;try{if(z=(A=A.call(x)).next,P===0){if(Object(A)!==A)return;J=!1}else for(;!(J=(M=z.call(A)).done)&&($.push(M.value),$.length!==P);J=!0);}catch(re){X=!0,N=re}finally{try{if(!J&&A.return!=null&&(j=A.return(),Object(j)!==j))return}finally{if(X)throw N}}return $}}m(s,"_iterableToArrayLimit");function p(x){if(Array.isArray(x))return x}m(p,"_arrayWithHoles");var g=[["aria-activedescendant",{type:"id"}],["aria-atomic",{type:"boolean"}],["aria-autocomplete",{type:"token",values:["inline","list","both","none"]}],["aria-braillelabel",{type:"string"}],["aria-brailleroledescription",{type:"string"}],["aria-busy",{type:"boolean"}],["aria-checked",{type:"tristate"}],["aria-colcount",{type:"integer"}],["aria-colindex",{type:"integer"}],["aria-colspan",{type:"integer"}],["aria-controls",{type:"idlist"}],["aria-current",{type:"token",values:["page","step","location","date","time",!0,!1]}],["aria-describedby",{type:"idlist"}],["aria-description",{type:"string"}],["aria-details",{type:"id"}],["aria-disabled",{type:"boolean"}],["aria-dropeffect",{type:"tokenlist",values:["copy","execute","link","move","none","popup"]}],["aria-errormessage",{type:"id"}],["aria-expanded",{type:"boolean",allowundefined:!0}],["aria-flowto",{type:"idlist"}],["aria-grabbed",{type:"boolean",allowundefined:!0}],["aria-haspopup",{type:"token",values:[!1,!0,"menu","listbox","tree","grid","dialog"]}],["aria-hidden",{type:"boolean",allowundefined:!0}],["aria-invalid",{type:"token",values:["grammar",!1,"spelling",!0]}],["aria-keyshortcuts",{type:"string"}],["aria-label",{type:"string"}],["aria-labelledby",{type:"idlist"}],["aria-level",{type:"integer"}],["aria-live",{type:"token",values:["assertive","off","polite"]}],["aria-modal",{type:"boolean"}],["aria-multiline",{type:"boolean"}],["aria-multiselectable",{type:"boolean"}],["aria-orientation",{type:"token",values:["vertical","undefined","horizontal"]}],["aria-owns",{type:"idlist"}],["aria-placeholder",{type:"string"}],["aria-posinset",{type:"integer"}],["aria-pressed",{type:"tristate"}],["aria-readonly",{type:"boolean"}],["aria-relevant",{type:"tokenlist",values:["additions","all","removals","text"]}],["aria-required",{type:"boolean"}],["aria-roledescription",{type:"string"}],["aria-rowcount",{type:"integer"}],["aria-rowindex",{type:"integer"}],["aria-rowspan",{type:"integer"}],["aria-selected",{type:"boolean",allowundefined:!0}],["aria-setsize",{type:"integer"}],["aria-sort",{type:"token",values:["ascending","descending","none","other"]}],["aria-valuemax",{type:"number"}],["aria-valuemin",{type:"number"}],["aria-valuenow",{type:"number"}],["aria-valuetext",{type:"string"}]],_={entries:m(function(){return g},"entries"),forEach:m(function(P){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,M=0,N=g;M<N.length;M++){var z=n(N[M],2),j=z[0],$=z[1];P.call(A,$,j,g)}},"forEach"),get:m(function(P){var A=g.filter(function(M){return M[0]===P})[0];return A&&A[1]},"get"),has:m(function(P){return!!_.get(P)},"has"),keys:m(function(){return g.map(function(P){var A=n(P,1),M=A[0];return M})},"keys"),values:m(function(){return g.map(function(P){var A=n(P,2),M=A[1];return M})},"values")};t.default=(0,e.default)(_,_.entries())}}),QZ=He({"../node_modules/aria-query/lib/domMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(ky());function r(x){return x&&x.__esModule?x:{default:x}}m(r,"_interopRequireDefault");function n(x,P){return p(x)||s(x,P)||l(x,P)||i()}m(n,"_slicedToArray");function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(i,"_nonIterableRest");function l(x,P){if(x){if(typeof x=="string")return c(x,P);var A={}.toString.call(x).slice(8,-1);return A==="Object"&&x.constructor&&(A=x.constructor.name),A==="Map"||A==="Set"?Array.from(x):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?c(x,P):void 0}}m(l,"_unsupportedIterableToArray");function c(x,P){(P==null||P>x.length)&&(P=x.length);for(var A=0,M=Array(P);A<P;A++)M[A]=x[A];return M}m(c,"_arrayLikeToArray");function s(x,P){var A=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(A!=null){var M,N,z,j,$=[],J=!0,X=!1;try{if(z=(A=A.call(x)).next,P===0){if(Object(A)!==A)return;J=!1}else for(;!(J=(M=z.call(A)).done)&&($.push(M.value),$.length!==P);J=!0);}catch(re){X=!0,N=re}finally{try{if(!J&&A.return!=null&&(j=A.return(),Object(j)!==j))return}finally{if(X)throw N}}return $}}m(s,"_iterableToArrayLimit");function p(x){if(Array.isArray(x))return x}m(p,"_arrayWithHoles");var g=[["a",{reserved:!1}],["abbr",{reserved:!1}],["acronym",{reserved:!1}],["address",{reserved:!1}],["applet",{reserved:!1}],["area",{reserved:!1}],["article",{reserved:!1}],["aside",{reserved:!1}],["audio",{reserved:!1}],["b",{reserved:!1}],["base",{reserved:!0}],["bdi",{reserved:!1}],["bdo",{reserved:!1}],["big",{reserved:!1}],["blink",{reserved:!1}],["blockquote",{reserved:!1}],["body",{reserved:!1}],["br",{reserved:!1}],["button",{reserved:!1}],["canvas",{reserved:!1}],["caption",{reserved:!1}],["center",{reserved:!1}],["cite",{reserved:!1}],["code",{reserved:!1}],["col",{reserved:!0}],["colgroup",{reserved:!0}],["content",{reserved:!1}],["data",{reserved:!1}],["datalist",{reserved:!1}],["dd",{reserved:!1}],["del",{reserved:!1}],["details",{reserved:!1}],["dfn",{reserved:!1}],["dialog",{reserved:!1}],["dir",{reserved:!1}],["div",{reserved:!1}],["dl",{reserved:!1}],["dt",{reserved:!1}],["em",{reserved:!1}],["embed",{reserved:!1}],["fieldset",{reserved:!1}],["figcaption",{reserved:!1}],["figure",{reserved:!1}],["font",{reserved:!1}],["footer",{reserved:!1}],["form",{reserved:!1}],["frame",{reserved:!1}],["frameset",{reserved:!1}],["h1",{reserved:!1}],["h2",{reserved:!1}],["h3",{reserved:!1}],["h4",{reserved:!1}],["h5",{reserved:!1}],["h6",{reserved:!1}],["head",{reserved:!0}],["header",{reserved:!1}],["hgroup",{reserved:!1}],["hr",{reserved:!1}],["html",{reserved:!0}],["i",{reserved:!1}],["iframe",{reserved:!1}],["img",{reserved:!1}],["input",{reserved:!1}],["ins",{reserved:!1}],["kbd",{reserved:!1}],["keygen",{reserved:!1}],["label",{reserved:!1}],["legend",{reserved:!1}],["li",{reserved:!1}],["link",{reserved:!0}],["main",{reserved:!1}],["map",{reserved:!1}],["mark",{reserved:!1}],["marquee",{reserved:!1}],["menu",{reserved:!1}],["menuitem",{reserved:!1}],["meta",{reserved:!0}],["meter",{reserved:!1}],["nav",{reserved:!1}],["noembed",{reserved:!0}],["noscript",{reserved:!0}],["object",{reserved:!1}],["ol",{reserved:!1}],["optgroup",{reserved:!1}],["option",{reserved:!1}],["output",{reserved:!1}],["p",{reserved:!1}],["param",{reserved:!0}],["picture",{reserved:!0}],["pre",{reserved:!1}],["progress",{reserved:!1}],["q",{reserved:!1}],["rp",{reserved:!1}],["rt",{reserved:!1}],["rtc",{reserved:!1}],["ruby",{reserved:!1}],["s",{reserved:!1}],["samp",{reserved:!1}],["script",{reserved:!0}],["section",{reserved:!1}],["select",{reserved:!1}],["small",{reserved:!1}],["source",{reserved:!0}],["spacer",{reserved:!1}],["span",{reserved:!1}],["strike",{reserved:!1}],["strong",{reserved:!1}],["style",{reserved:!0}],["sub",{reserved:!1}],["summary",{reserved:!1}],["sup",{reserved:!1}],["table",{reserved:!1}],["tbody",{reserved:!1}],["td",{reserved:!1}],["textarea",{reserved:!1}],["tfoot",{reserved:!1}],["th",{reserved:!1}],["thead",{reserved:!1}],["time",{reserved:!1}],["title",{reserved:!0}],["tr",{reserved:!1}],["track",{reserved:!0}],["tt",{reserved:!1}],["u",{reserved:!1}],["ul",{reserved:!1}],["var",{reserved:!1}],["video",{reserved:!1}],["wbr",{reserved:!1}],["xmp",{reserved:!1}]],_={entries:m(function(){return g},"entries"),forEach:m(function(P){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,M=0,N=g;M<N.length;M++){var z=n(N[M],2),j=z[0],$=z[1];P.call(A,$,j,g)}},"forEach"),get:m(function(P){var A=g.filter(function(M){return M[0]===P})[0];return A&&A[1]},"get"),has:m(function(P){return!!_.get(P)},"has"),keys:m(function(){return g.map(function(P){var A=n(P,1),M=A[0];return M})},"keys"),values:m(function(){return g.map(function(P){var A=n(P,2),M=A[1];return M})},"values")};t.default=(0,e.default)(_,_.entries())}}),eK=He({"../node_modules/aria-query/lib/etc/roles/abstract/commandRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};t.default=e}}),tK=He({"../node_modules/aria-query/lib/etc/roles/abstract/compositeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};t.default=e}}),rK=He({"../node_modules/aria-query/lib/etc/roles/abstract/inputRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null},relatedConcepts:[{concept:{name:"input"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};t.default=e}}),nK=He({"../node_modules/aria-query/lib/etc/roles/abstract/landmarkRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),iK=He({"../node_modules/aria-query/lib/etc/roles/abstract/rangeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),oK=He({"../node_modules/aria-query/lib/etc/roles/abstract/roletypeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{"aria-atomic":null,"aria-busy":null,"aria-controls":null,"aria-current":null,"aria-describedby":null,"aria-details":null,"aria-dropeffect":null,"aria-flowto":null,"aria-grabbed":null,"aria-hidden":null,"aria-keyshortcuts":null,"aria-label":null,"aria-labelledby":null,"aria-live":null,"aria-owns":null,"aria-relevant":null,"aria-roledescription":null},relatedConcepts:[{concept:{name:"role"},module:"XHTML"},{concept:{name:"type"},module:"Dublin Core"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[]};t.default=e}}),sK=He({"../node_modules/aria-query/lib/etc/roles/abstract/sectionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"frontmatter"},module:"DTB"},{concept:{name:"level"},module:"DTB"},{concept:{name:"level"},module:"SMIL"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),aK=He({"../node_modules/aria-query/lib/etc/roles/abstract/sectionheadRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),lK=He({"../node_modules/aria-query/lib/etc/roles/abstract/selectRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","structure","section","group"]]};t.default=e}}),cK=He({"../node_modules/aria-query/lib/etc/roles/abstract/structureRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};t.default=e}}),uK=He({"../node_modules/aria-query/lib/etc/roles/abstract/widgetRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};t.default=e}}),hK=He({"../node_modules/aria-query/lib/etc/roles/abstract/windowRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-modal":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};t.default=e}}),dK=He({"../node_modules/aria-query/lib/etc/roles/ariaAbstractRoles.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=A(eK()),r=A(tK()),n=A(rK()),i=A(nK()),l=A(iK()),c=A(oK()),s=A(sK()),p=A(aK()),g=A(lK()),_=A(cK()),x=A(uK()),P=A(hK());function A(N){return N&&N.__esModule?N:{default:N}}m(A,"_interopRequireDefault");var M=[["command",e.default],["composite",r.default],["input",n.default],["landmark",i.default],["range",l.default],["roletype",c.default],["section",s.default],["sectionhead",p.default],["select",g.default],["structure",_.default],["widget",x.default],["window",P.default]];t.default=M}}),pK=He({"../node_modules/aria-query/lib/etc/roles/literal/alertRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-atomic":"true","aria-live":"assertive"},relatedConcepts:[{concept:{name:"alert"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),fK=He({"../node_modules/aria-query/lib/etc/roles/literal/alertdialogRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"alert"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","alert"],["roletype","window","dialog"]]};t.default=e}}),mK=He({"../node_modules/aria-query/lib/etc/roles/literal/applicationRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"Device Independence Delivery Unit"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),gK=He({"../node_modules/aria-query/lib/etc/roles/literal/articleRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"article"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","document"]]};t.default=e}}),yK=He({"../node_modules/aria-query/lib/etc/roles/literal/bannerRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element"],name:"header"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),_K=He({"../node_modules/aria-query/lib/etc/roles/literal/blockquoteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"blockquote"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),bK=He({"../node_modules/aria-query/lib/etc/roles/literal/buttonRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-pressed":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"button"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"image"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"reset"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"submit"}],name:"input"},module:"HTML"},{concept:{name:"button"},module:"HTML"},{concept:{name:"trigger"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};t.default=e}}),vK=He({"../node_modules/aria-query/lib/etc/roles/literal/captionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"caption"},module:"HTML"}],requireContextRole:["figure","grid","table"],requiredContextRole:["figure","grid","table"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),xK=He({"../node_modules/aria-query/lib/etc/roles/literal/cellRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-colindex":null,"aria-colspan":null,"aria-rowindex":null,"aria-rowspan":null},relatedConcepts:[{concept:{constraints:["ancestor table element has table role"],name:"td"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),wK=He({"../node_modules/aria-query/lib/etc/roles/literal/checkboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-errormessage":null,"aria-expanded":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"checkbox"}],name:"input"},module:"HTML"},{concept:{name:"option"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input"]]};t.default=e}}),EK=He({"../node_modules/aria-query/lib/etc/roles/literal/codeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"code"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),TK=He({"../node_modules/aria-query/lib/etc/roles/literal/columnheaderRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-sort":null},relatedConcepts:[{concept:{name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"col"}],name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"colgroup"}],name:"th"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","structure","section","cell","gridcell"],["roletype","widget","gridcell"],["roletype","structure","sectionhead"]]};t.default=e}}),SK=He({"../node_modules/aria-query/lib/etc/roles/literal/comboboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-autocomplete":null,"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-expanded":"false","aria-haspopup":"listbox"},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"email"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"search"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"tel"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"text"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"url"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"url"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"multiple"},{constraints:["undefined"],name:"size"}],constraints:["the multiple attribute is not set and the size attribute does not have a value greater than 1"],name:"select"},module:"HTML"},{concept:{name:"select"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-controls":null,"aria-expanded":"false"},superClass:[["roletype","widget","input"]]};t.default=e}}),CK=He({"../node_modules/aria-query/lib/etc/roles/literal/complementaryRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element","scoped to the main element"],name:"aside"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-label"}],constraints:["scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"aside"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],constraints:["scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"aside"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),PK=He({"../node_modules/aria-query/lib/etc/roles/literal/contentinfoRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element"],name:"footer"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),AK=He({"../node_modules/aria-query/lib/etc/roles/literal/definitionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dd"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),RK=He({"../node_modules/aria-query/lib/etc/roles/literal/deletionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"del"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),IK=He({"../node_modules/aria-query/lib/etc/roles/literal/dialogRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dialog"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","window"]]};t.default=e}}),MK=He({"../node_modules/aria-query/lib/etc/roles/literal/directoryRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{module:"DAISY Guide"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","list"]]};t.default=e}}),OK=He({"../node_modules/aria-query/lib/etc/roles/literal/documentRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"Device Independence Delivery Unit"}},{concept:{name:"html"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),kK=He({"../node_modules/aria-query/lib/etc/roles/literal/emphasisRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"em"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),LK=He({"../node_modules/aria-query/lib/etc/roles/literal/feedRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["article"]],requiredProps:{},superClass:[["roletype","structure","section","list"]]};t.default=e}}),DK=He({"../node_modules/aria-query/lib/etc/roles/literal/figureRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"figure"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),NK=He({"../node_modules/aria-query/lib/etc/roles/literal/formRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"aria-label"}],name:"form"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],name:"form"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"name"}],name:"form"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),FK=He({"../node_modules/aria-query/lib/etc/roles/literal/genericRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"a"},module:"HTML"},{concept:{name:"area"},module:"HTML"},{concept:{name:"aside"},module:"HTML"},{concept:{name:"b"},module:"HTML"},{concept:{name:"bdo"},module:"HTML"},{concept:{name:"body"},module:"HTML"},{concept:{name:"data"},module:"HTML"},{concept:{name:"div"},module:"HTML"},{concept:{constraints:["scoped to the main element","scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"footer"},module:"HTML"},{concept:{constraints:["scoped to the main element","scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"header"},module:"HTML"},{concept:{name:"hgroup"},module:"HTML"},{concept:{name:"i"},module:"HTML"},{concept:{name:"pre"},module:"HTML"},{concept:{name:"q"},module:"HTML"},{concept:{name:"samp"},module:"HTML"},{concept:{name:"section"},module:"HTML"},{concept:{name:"small"},module:"HTML"},{concept:{name:"span"},module:"HTML"},{concept:{name:"u"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),zK=He({"../node_modules/aria-query/lib/etc/roles/literal/gridRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-multiselectable":null,"aria-readonly":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","structure","section","table"]]};t.default=e}}),jK=He({"../node_modules/aria-query/lib/etc/roles/literal/gridcellRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-selected":null},relatedConcepts:[{concept:{constraints:["ancestor table element has grid role","ancestor table element has treegrid role"],name:"td"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","widget"]]};t.default=e}}),BK=He({"../node_modules/aria-query/lib/etc/roles/literal/groupRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null},relatedConcepts:[{concept:{name:"details"},module:"HTML"},{concept:{name:"fieldset"},module:"HTML"},{concept:{name:"optgroup"},module:"HTML"},{concept:{name:"address"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),qK=He({"../node_modules/aria-query/lib/etc/roles/literal/headingRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-level":"2"},relatedConcepts:[{concept:{name:"h1"},module:"HTML"},{concept:{name:"h2"},module:"HTML"},{concept:{name:"h3"},module:"HTML"},{concept:{name:"h4"},module:"HTML"},{concept:{name:"h5"},module:"HTML"},{concept:{name:"h6"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-level":"2"},superClass:[["roletype","structure","sectionhead"]]};t.default=e}}),$K=He({"../node_modules/aria-query/lib/etc/roles/literal/imgRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"alt"}],name:"img"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"alt"}],name:"img"},module:"HTML"},{concept:{name:"imggroup"},module:"DTB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),VK=He({"../node_modules/aria-query/lib/etc/roles/literal/insertionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"ins"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),UK=He({"../node_modules/aria-query/lib/etc/roles/literal/linkRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"href"}],name:"a"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"href"}],name:"area"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};t.default=e}}),GK=He({"../node_modules/aria-query/lib/etc/roles/literal/listRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menu"},module:"HTML"},{concept:{name:"ol"},module:"HTML"},{concept:{name:"ul"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["listitem"]],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),HK=He({"../node_modules/aria-query/lib/etc/roles/literal/listboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-invalid":null,"aria-multiselectable":null,"aria-readonly":null,"aria-required":null,"aria-orientation":"vertical"},relatedConcepts:[{concept:{attributes:[{constraints:[">1"],name:"size"}],constraints:["the size attribute value is greater than 1"],name:"select"},module:"HTML"},{concept:{attributes:[{name:"multiple"}],name:"select"},module:"HTML"},{concept:{name:"datalist"},module:"HTML"},{concept:{name:"list"},module:"ARIA"},{concept:{name:"select"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["option","group"],["option"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};t.default=e}}),JK=He({"../node_modules/aria-query/lib/etc/roles/literal/listitemRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-level":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{constraints:["direct descendant of ol","direct descendant of ul","direct descendant of menu"],name:"li"},module:"HTML"},{concept:{name:"item"},module:"XForms"}],requireContextRole:["directory","list"],requiredContextRole:["directory","list"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),WK=He({"../node_modules/aria-query/lib/etc/roles/literal/logRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-live":"polite"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),ZK=He({"../node_modules/aria-query/lib/etc/roles/literal/mainRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"main"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),KK=He({"../node_modules/aria-query/lib/etc/roles/literal/markRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null},relatedConcepts:[{concept:{name:"mark"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),YK=He({"../node_modules/aria-query/lib/etc/roles/literal/marqueeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),XK=He({"../node_modules/aria-query/lib/etc/roles/literal/mathRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"math"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),QK=He({"../node_modules/aria-query/lib/etc/roles/literal/menuRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"vertical"},relatedConcepts:[{concept:{name:"MENU"},module:"JAPI"},{concept:{name:"list"},module:"ARIA"},{concept:{name:"select"},module:"XForms"},{concept:{name:"sidebar"},module:"DTB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["menuitem","group"],["menuitemradio","group"],["menuitemcheckbox","group"],["menuitem"],["menuitemcheckbox"],["menuitemradio"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};t.default=e}}),eY=He({"../node_modules/aria-query/lib/etc/roles/literal/menubarRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"horizontal"},relatedConcepts:[{concept:{name:"toolbar"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["menuitem","group"],["menuitemradio","group"],["menuitemcheckbox","group"],["menuitem"],["menuitemcheckbox"],["menuitemradio"]],requiredProps:{},superClass:[["roletype","widget","composite","select","menu"],["roletype","structure","section","group","select","menu"]]};t.default=e}}),tY=He({"../node_modules/aria-query/lib/etc/roles/literal/menuitemRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"MENU_ITEM"},module:"JAPI"},{concept:{name:"listitem"},module:"ARIA"},{concept:{name:"option"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};t.default=e}}),rY=He({"../node_modules/aria-query/lib/etc/roles/literal/menuitemcheckboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menuitem"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox"],["roletype","widget","command","menuitem"]]};t.default=e}}),nY=He({"../node_modules/aria-query/lib/etc/roles/literal/menuitemradioRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menuitem"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox","menuitemcheckbox"],["roletype","widget","command","menuitem","menuitemcheckbox"],["roletype","widget","input","radio"]]};t.default=e}}),iY=He({"../node_modules/aria-query/lib/etc/roles/literal/meterRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuetext":null,"aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[{concept:{name:"meter"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-valuenow":null},superClass:[["roletype","structure","range"]]};t.default=e}}),oY=He({"../node_modules/aria-query/lib/etc/roles/literal/navigationRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"nav"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),sY=He({"../node_modules/aria-query/lib/etc/roles/literal/noneRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[]};t.default=e}}),aY=He({"../node_modules/aria-query/lib/etc/roles/literal/noteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),lY=He({"../node_modules/aria-query/lib/etc/roles/literal/optionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-posinset":null,"aria-setsize":null,"aria-selected":"false"},relatedConcepts:[{concept:{name:"item"},module:"XForms"},{concept:{name:"listitem"},module:"ARIA"},{concept:{name:"option"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-selected":"false"},superClass:[["roletype","widget","input"]]};t.default=e}}),cY=He({"../node_modules/aria-query/lib/etc/roles/literal/paragraphRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"p"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),uY=He({"../node_modules/aria-query/lib/etc/roles/literal/presentationRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{attributes:[{name:"alt",value:""}],name:"img"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),hY=He({"../node_modules/aria-query/lib/etc/roles/literal/progressbarRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuetext":null},relatedConcepts:[{concept:{name:"progress"},module:"HTML"},{concept:{name:"status"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","range"],["roletype","widget"]]};t.default=e}}),dY=He({"../node_modules/aria-query/lib/etc/roles/literal/radioRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"radio"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input"]]};t.default=e}}),pY=He({"../node_modules/aria-query/lib/etc/roles/literal/radiogroupRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{name:"list"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["radio"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};t.default=e}}),fY=He({"../node_modules/aria-query/lib/etc/roles/literal/regionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"aria-label"}],name:"section"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],name:"section"},module:"HTML"},{concept:{name:"Device Independence Glossart perceivable unit"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),mY=He({"../node_modules/aria-query/lib/etc/roles/literal/rowRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-colindex":null,"aria-expanded":null,"aria-level":null,"aria-posinset":null,"aria-rowindex":null,"aria-selected":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"tr"},module:"HTML"}],requireContextRole:["grid","rowgroup","table","treegrid"],requiredContextRole:["grid","rowgroup","table","treegrid"],requiredOwnedElements:[["cell"],["columnheader"],["gridcell"],["rowheader"]],requiredProps:{},superClass:[["roletype","structure","section","group"],["roletype","widget"]]};t.default=e}}),gY=He({"../node_modules/aria-query/lib/etc/roles/literal/rowgroupRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"tbody"},module:"HTML"},{concept:{name:"tfoot"},module:"HTML"},{concept:{name:"thead"},module:"HTML"}],requireContextRole:["grid","table","treegrid"],requiredContextRole:["grid","table","treegrid"],requiredOwnedElements:[["row"]],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),yY=He({"../node_modules/aria-query/lib/etc/roles/literal/rowheaderRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-sort":null},relatedConcepts:[{concept:{attributes:[{name:"scope",value:"row"}],name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"rowgroup"}],name:"th"},module:"HTML"}],requireContextRole:["row","rowgroup"],requiredContextRole:["row","rowgroup"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","structure","section","cell","gridcell"],["roletype","widget","gridcell"],["roletype","structure","sectionhead"]]};t.default=e}}),_Y=He({"../node_modules/aria-query/lib/etc/roles/literal/scrollbarRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-valuetext":null,"aria-orientation":"vertical","aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-controls":null,"aria-valuenow":null},superClass:[["roletype","structure","range"],["roletype","widget"]]};t.default=e}}),bY=He({"../node_modules/aria-query/lib/etc/roles/literal/searchRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),vY=He({"../node_modules/aria-query/lib/etc/roles/literal/searchboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"search"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","input","textbox"]]};t.default=e}}),xY=He({"../node_modules/aria-query/lib/etc/roles/literal/separatorRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-orientation":"horizontal","aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":null,"aria-valuetext":null},relatedConcepts:[{concept:{name:"hr"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};t.default=e}}),wY=He({"../node_modules/aria-query/lib/etc/roles/literal/sliderRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null,"aria-readonly":null,"aria-valuetext":null,"aria-orientation":"horizontal","aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[{concept:{attributes:[{name:"type",value:"range"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-valuenow":null},superClass:[["roletype","widget","input"],["roletype","structure","range"]]};t.default=e}}),EY=He({"../node_modules/aria-query/lib/etc/roles/literal/spinbuttonRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-valuetext":null,"aria-valuenow":"0"},relatedConcepts:[{concept:{attributes:[{name:"type",value:"number"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","widget","input"],["roletype","structure","range"]]};t.default=e}}),TY=He({"../node_modules/aria-query/lib/etc/roles/literal/statusRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-atomic":"true","aria-live":"polite"},relatedConcepts:[{concept:{name:"output"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),SY=He({"../node_modules/aria-query/lib/etc/roles/literal/strongRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"strong"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),CY=He({"../node_modules/aria-query/lib/etc/roles/literal/subscriptRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"sub"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),PY=He({"../node_modules/aria-query/lib/etc/roles/literal/superscriptRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"sup"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),AY=He({"../node_modules/aria-query/lib/etc/roles/literal/switchRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"button"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox"]]};t.default=e}}),RY=He({"../node_modules/aria-query/lib/etc/roles/literal/tabRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-posinset":null,"aria-setsize":null,"aria-selected":"false"},relatedConcepts:[],requireContextRole:["tablist"],requiredContextRole:["tablist"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","sectionhead"],["roletype","widget"]]};t.default=e}}),IY=He({"../node_modules/aria-query/lib/etc/roles/literal/tableRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-colcount":null,"aria-rowcount":null},relatedConcepts:[{concept:{name:"table"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),MY=He({"../node_modules/aria-query/lib/etc/roles/literal/tablistRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-level":null,"aria-multiselectable":null,"aria-orientation":"horizontal"},relatedConcepts:[{module:"DAISY",concept:{name:"guide"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["tab"]],requiredProps:{},superClass:[["roletype","widget","composite"]]};t.default=e}}),OY=He({"../node_modules/aria-query/lib/etc/roles/literal/tabpanelRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),kY=He({"../node_modules/aria-query/lib/etc/roles/literal/termRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dfn"},module:"HTML"},{concept:{name:"dt"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),LY=He({"../node_modules/aria-query/lib/etc/roles/literal/textboxRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-autocomplete":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null,"aria-multiline":null,"aria-placeholder":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{attributes:[{constraints:["undefined"],name:"type"},{constraints:["undefined"],name:"list"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"email"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"tel"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"text"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"url"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{name:"input"},module:"XForms"},{concept:{name:"textarea"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","input"]]};t.default=e}}),DY=He({"../node_modules/aria-query/lib/etc/roles/literal/timeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"time"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),NY=He({"../node_modules/aria-query/lib/etc/roles/literal/timerRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","status"]]};t.default=e}}),FY=He({"../node_modules/aria-query/lib/etc/roles/literal/toolbarRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"horizontal"},relatedConcepts:[{concept:{name:"menubar"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","group"]]};t.default=e}}),zY=He({"../node_modules/aria-query/lib/etc/roles/literal/tooltipRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),jY=He({"../node_modules/aria-query/lib/etc/roles/literal/treeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-multiselectable":null,"aria-required":null,"aria-orientation":"vertical"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["treeitem","group"],["treeitem"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};t.default=e}}),BY=He({"../node_modules/aria-query/lib/etc/roles/literal/treegridRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","widget","composite","grid"],["roletype","structure","section","table","grid"],["roletype","widget","composite","select","tree"],["roletype","structure","section","group","select","tree"]]};t.default=e}}),qY=He({"../node_modules/aria-query/lib/etc/roles/literal/treeitemRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-expanded":null,"aria-haspopup":null},relatedConcepts:[],requireContextRole:["group","tree"],requiredContextRole:["group","tree"],requiredOwnedElements:[],requiredProps:{"aria-selected":null},superClass:[["roletype","structure","section","listitem"],["roletype","widget","input","option"]]};t.default=e}}),$Y=He({"../node_modules/aria-query/lib/etc/roles/ariaLiteralRoles.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=ut(pK()),r=ut(fK()),n=ut(mK()),i=ut(gK()),l=ut(yK()),c=ut(_K()),s=ut(bK()),p=ut(vK()),g=ut(xK()),_=ut(wK()),x=ut(EK()),P=ut(TK()),A=ut(SK()),M=ut(CK()),N=ut(PK()),z=ut(AK()),j=ut(RK()),$=ut(IK()),J=ut(MK()),X=ut(OK()),re=ut(kK()),ne=ut(LK()),Z=ut(DK()),U=ut(NK()),K=ut(FK()),he=ut(zK()),ue=ut(jK()),Ee=ut(BK()),Ie=ut(qK()),ee=ut($K()),pe=ut(VK()),ve=ut(UK()),xe=ut(GK()),tt=ut(HK()),Ke=ut(JK()),Ze=ut(WK()),bt=ut(ZK()),qe=ut(KK()),kt=ut(YK()),Jt=ut(XK()),Pt=ut(QK()),dt=ut(eY()),er=ut(tY()),Wt=ut(rY()),ar=ut(nY()),_t=ut(iY()),Ve=ut(oY()),pt=ut(sY()),lt=ut(aY()),Tt=ut(lY()),vt=ut(cY()),Dt=ut(uY()),Yt=ut(hY()),Bt=ut(dY()),xr=ut(pY()),$r=ut(fY()),Ir=ut(mY()),Zr=ut(gY()),yr=ut(yY()),ur=ut(_Y()),lr=ut(bY()),nr=ut(vY()),mr=ut(xY()),Yr=ut(wY()),ke=ut(EY()),oe=ut(TY()),ae=ut(SY()),de=ut(CY()),Te=ut(PY()),Le=ut(AY()),je=ut(RY()),Je=ut(IY()),Fe=ut(MY()),et=ut(OY()),ct=ut(kY()),it=ut(LY()),Ot=ut(DY()),$e=ut(NY()),Xt=ut(FY()),cr=ut(zY()),Nt=ut(jY()),Ht=ut(BY()),_r=ut(qY());function ut(Cr){return Cr&&Cr.__esModule?Cr:{default:Cr}}m(ut,"_interopRequireDefault");var Lt=[["alert",e.default],["alertdialog",r.default],["application",n.default],["article",i.default],["banner",l.default],["blockquote",c.default],["button",s.default],["caption",p.default],["cell",g.default],["checkbox",_.default],["code",x.default],["columnheader",P.default],["combobox",A.default],["complementary",M.default],["contentinfo",N.default],["definition",z.default],["deletion",j.default],["dialog",$.default],["directory",J.default],["document",X.default],["emphasis",re.default],["feed",ne.default],["figure",Z.default],["form",U.default],["generic",K.default],["grid",he.default],["gridcell",ue.default],["group",Ee.default],["heading",Ie.default],["img",ee.default],["insertion",pe.default],["link",ve.default],["list",xe.default],["listbox",tt.default],["listitem",Ke.default],["log",Ze.default],["main",bt.default],["mark",qe.default],["marquee",kt.default],["math",Jt.default],["menu",Pt.default],["menubar",dt.default],["menuitem",er.default],["menuitemcheckbox",Wt.default],["menuitemradio",ar.default],["meter",_t.default],["navigation",Ve.default],["none",pt.default],["note",lt.default],["option",Tt.default],["paragraph",vt.default],["presentation",Dt.default],["progressbar",Yt.default],["radio",Bt.default],["radiogroup",xr.default],["region",$r.default],["row",Ir.default],["rowgroup",Zr.default],["rowheader",yr.default],["scrollbar",ur.default],["search",lr.default],["searchbox",nr.default],["separator",mr.default],["slider",Yr.default],["spinbutton",ke.default],["status",oe.default],["strong",ae.default],["subscript",de.default],["superscript",Te.default],["switch",Le.default],["tab",je.default],["table",Je.default],["tablist",Fe.default],["tabpanel",et.default],["term",ct.default],["textbox",it.default],["time",Ot.default],["timer",$e.default],["toolbar",Xt.default],["tooltip",cr.default],["tree",Nt.default],["treegrid",Ht.default],["treeitem",_r.default]];t.default=Lt}}),VY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docAbstractRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"abstract [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),UY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docAcknowledgmentsRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"acknowledgments [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),GY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docAfterwordRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"afterword [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),HY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docAppendixRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"appendix [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),JY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docBacklinkRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"referrer [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};t.default=e}}),WY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docBiblioentryRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"EPUB biblioentry [EPUB-SSV]"},module:"EPUB"}],requireContextRole:["doc-bibliography"],requiredContextRole:["doc-bibliography"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","listitem"]]};t.default=e}}),ZY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docBibliographyRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"bibliography [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["doc-biblioentry"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),KY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docBibliorefRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"biblioref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};t.default=e}}),YY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docChapterRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"chapter [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),XY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docColophonRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"colophon [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),QY=He({"../node_modules/aria-query/lib/etc/roles/dpub/docConclusionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"conclusion [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),eX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docCoverRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"cover [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","img"]]};t.default=e}}),tX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docCreditRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"credit [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),rX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docCreditsRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"credits [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),nX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docDedicationRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"dedication [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),iX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docEndnoteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"rearnote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:["doc-endnotes"],requiredContextRole:["doc-endnotes"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","listitem"]]};t.default=e}}),oX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docEndnotesRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"rearnotes [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["doc-endnote"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),sX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docEpigraphRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"epigraph [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),aX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docEpilogueRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"epilogue [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),lX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docErrataRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"errata [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),cX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docExampleRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),uX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docFootnoteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"footnote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),hX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docForewordRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"foreword [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),dX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docGlossaryRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"glossary [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["definition"],["term"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),pX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docGlossrefRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"glossref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};t.default=e}}),fX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docIndexRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"index [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};t.default=e}}),mX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docIntroductionRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"introduction [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),gX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docNoterefRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"noteref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};t.default=e}}),yX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docNoticeRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"notice [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","note"]]};t.default=e}}),_X=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPagebreakRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"pagebreak [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","separator"]]};t.default=e}}),bX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPagefooterRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null,"aria-disabled":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),vX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPageheaderRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null,"aria-disabled":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),xX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPagelistRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"page-list [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};t.default=e}}),wX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPartRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"part [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),EX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPrefaceRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"preface [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),TX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPrologueRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"prologue [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};t.default=e}}),SX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docPullquoteRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"pullquote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["none"]]};t.default=e}}),CX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docQnaRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"qna [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};t.default=e}}),PX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docSubtitleRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"subtitle [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","sectionhead"]]};t.default=e}}),AX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docTipRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"help [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","note"]]};t.default=e}}),RX=He({"../node_modules/aria-query/lib/etc/roles/dpub/docTocRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"toc [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};t.default=e}}),IX=He({"../node_modules/aria-query/lib/etc/roles/ariaDpubRoles.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=dt(VY()),r=dt(UY()),n=dt(GY()),i=dt(HY()),l=dt(JY()),c=dt(WY()),s=dt(ZY()),p=dt(KY()),g=dt(YY()),_=dt(XY()),x=dt(QY()),P=dt(eX()),A=dt(tX()),M=dt(rX()),N=dt(nX()),z=dt(iX()),j=dt(oX()),$=dt(sX()),J=dt(aX()),X=dt(lX()),re=dt(cX()),ne=dt(uX()),Z=dt(hX()),U=dt(dX()),K=dt(pX()),he=dt(fX()),ue=dt(mX()),Ee=dt(gX()),Ie=dt(yX()),ee=dt(_X()),pe=dt(bX()),ve=dt(vX()),xe=dt(xX()),tt=dt(wX()),Ke=dt(EX()),Ze=dt(TX()),bt=dt(SX()),qe=dt(CX()),kt=dt(PX()),Jt=dt(AX()),Pt=dt(RX());function dt(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}m(dt,"_interopRequireDefault");var er=[["doc-abstract",e.default],["doc-acknowledgments",r.default],["doc-afterword",n.default],["doc-appendix",i.default],["doc-backlink",l.default],["doc-biblioentry",c.default],["doc-bibliography",s.default],["doc-biblioref",p.default],["doc-chapter",g.default],["doc-colophon",_.default],["doc-conclusion",x.default],["doc-cover",P.default],["doc-credit",A.default],["doc-credits",M.default],["doc-dedication",N.default],["doc-endnote",z.default],["doc-endnotes",j.default],["doc-epigraph",$.default],["doc-epilogue",J.default],["doc-errata",X.default],["doc-example",re.default],["doc-footnote",ne.default],["doc-foreword",Z.default],["doc-glossary",U.default],["doc-glossref",K.default],["doc-index",he.default],["doc-introduction",ue.default],["doc-noteref",Ee.default],["doc-notice",Ie.default],["doc-pagebreak",ee.default],["doc-pagefooter",pe.default],["doc-pageheader",ve.default],["doc-pagelist",xe.default],["doc-part",tt.default],["doc-preface",Ke.default],["doc-prologue",Ze.default],["doc-pullquote",bt.default],["doc-qna",qe.default],["doc-subtitle",kt.default],["doc-tip",Jt.default],["doc-toc",Pt.default]];t.default=er}}),MX=He({"../node_modules/aria-query/lib/etc/roles/graphics/graphicsDocumentRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{module:"GRAPHICS",concept:{name:"graphics-object"}},{module:"ARIA",concept:{name:"img"}},{module:"ARIA",concept:{name:"article"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","document"]]};t.default=e}}),OX=He({"../node_modules/aria-query/lib/etc/roles/graphics/graphicsObjectRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{module:"GRAPHICS",concept:{name:"graphics-document"}},{module:"ARIA",concept:{name:"group"}},{module:"ARIA",concept:{name:"img"}},{module:"GRAPHICS",concept:{name:"graphics-symbol"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","group"]]};t.default=e}}),kX=He({"../node_modules/aria-query/lib/etc/roles/graphics/graphicsSymbolRole.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","img"]]};t.default=e}}),LX=He({"../node_modules/aria-query/lib/etc/roles/ariaGraphicsRoles.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(MX()),r=i(OX()),n=i(kX());function i(c){return c&&c.__esModule?c:{default:c}}m(i,"_interopRequireDefault");var l=[["graphics-document",e.default],["graphics-object",r.default],["graphics-symbol",n.default]];t.default=l}}),vC=He({"../node_modules/aria-query/lib/rolesMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=c(dK()),r=c($Y()),n=c(IX()),i=c(LX()),l=c(ky());function c(z){return z&&z.__esModule?z:{default:z}}m(c,"_interopRequireDefault");function s(z,j){var $=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!$){if(Array.isArray(z)||($=_(z))||j&&z&&typeof z.length=="number"){$&&(z=$);var J=0,X=m(function(){},"F");return{s:X,n:m(function(){return J>=z.length?{done:!0}:{done:!1,value:z[J++]}},"n"),e:m(function(K){throw K},"e"),f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re,ne=!0,Z=!1;return{s:m(function(){$=$.call(z)},"s"),n:m(function(){var K=$.next();return ne=K.done,K},"n"),e:m(function(K){Z=!0,re=K},"e"),f:m(function(){try{ne||$.return==null||$.return()}finally{if(Z)throw re}},"f")}}m(s,"_createForOfIteratorHelper");function p(z,j){return A(z)||P(z,j)||_(z,j)||g()}m(p,"_slicedToArray");function g(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(g,"_nonIterableRest");function _(z,j){if(z){if(typeof z=="string")return x(z,j);var $={}.toString.call(z).slice(8,-1);return $==="Object"&&z.constructor&&($=z.constructor.name),$==="Map"||$==="Set"?Array.from(z):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?x(z,j):void 0}}m(_,"_unsupportedIterableToArray");function x(z,j){(j==null||j>z.length)&&(j=z.length);for(var $=0,J=Array(j);$<j;$++)J[$]=z[$];return J}m(x,"_arrayLikeToArray");function P(z,j){var $=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if($!=null){var J,X,re,ne,Z=[],U=!0,K=!1;try{if(re=($=$.call(z)).next,j===0){if(Object($)!==$)return;U=!1}else for(;!(U=(J=re.call($)).done)&&(Z.push(J.value),Z.length!==j);U=!0);}catch(he){K=!0,X=he}finally{try{if(!U&&$.return!=null&&(ne=$.return(),Object(ne)!==ne))return}finally{if(K)throw X}}return Z}}m(P,"_iterableToArrayLimit");function A(z){if(Array.isArray(z))return z}m(A,"_arrayWithHoles");var M=[].concat(e.default,r.default,n.default,i.default);M.forEach(function(z){var j=p(z,2),$=j[1],J=s($.superClass),X;try{for(J.s();!(X=J.n()).done;){var re=X.value,ne=s(re),Z;try{var U=m(function(){var he=Z.value,ue=M.filter(function(ve){var xe=p(ve,1),tt=xe[0];return tt===he})[0];if(ue)for(var Ee=ue[1],Ie=0,ee=Object.keys(Ee.props);Ie<ee.length;Ie++){var pe=ee[Ie];Object.prototype.hasOwnProperty.call($.props,pe)||($.props[pe]=Ee.props[pe])}},"_loop");for(ne.s();!(Z=ne.n()).done;)U()}catch(K){ne.e(K)}finally{ne.f()}}}catch(K){J.e(K)}finally{J.f()}});var N={entries:m(function(){return M},"entries"),forEach:m(function(j){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,J=s(M),X;try{for(J.s();!(X=J.n()).done;){var re=p(X.value,2),ne=re[0],Z=re[1];j.call($,Z,ne,M)}}catch(U){J.e(U)}finally{J.f()}},"forEach"),get:m(function(j){var $=M.filter(function(J){return J[0]===j})[0];return $&&$[1]},"get"),has:m(function(j){return!!N.get(j)},"has"),keys:m(function(){return M.map(function(j){var $=p(j,1),J=$[0];return J})},"keys"),values:m(function(){return M.map(function(j){var $=p(j,2),J=$[1];return J})},"values")};t.default=(0,l.default)(N,N.entries())}}),DX=He({"../node_modules/aria-query/lib/elementRoleMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(ky()),r=n(vC());function n(ne){return ne&&ne.__esModule?ne:{default:ne}}m(n,"_interopRequireDefault");function i(ne,Z){return g(ne)||p(ne,Z)||c(ne,Z)||l()}m(i,"_slicedToArray");function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(l,"_nonIterableRest");function c(ne,Z){if(ne){if(typeof ne=="string")return s(ne,Z);var U={}.toString.call(ne).slice(8,-1);return U==="Object"&&ne.constructor&&(U=ne.constructor.name),U==="Map"||U==="Set"?Array.from(ne):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?s(ne,Z):void 0}}m(c,"_unsupportedIterableToArray");function s(ne,Z){(Z==null||Z>ne.length)&&(Z=ne.length);for(var U=0,K=Array(Z);U<Z;U++)K[U]=ne[U];return K}m(s,"_arrayLikeToArray");function p(ne,Z){var U=ne==null?null:typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(U!=null){var K,he,ue,Ee,Ie=[],ee=!0,pe=!1;try{if(ue=(U=U.call(ne)).next,Z===0){if(Object(U)!==U)return;ee=!1}else for(;!(ee=(K=ue.call(U)).done)&&(Ie.push(K.value),Ie.length!==Z);ee=!0);}catch(ve){pe=!0,he=ve}finally{try{if(!ee&&U.return!=null&&(Ee=U.return(),Object(Ee)!==Ee))return}finally{if(pe)throw he}}return Ie}}m(p,"_iterableToArrayLimit");function g(ne){if(Array.isArray(ne))return ne}m(g,"_arrayWithHoles");var _=[],x=r.default.keys();for(j=0;j<x.length;j++)if(P=x[j],A=r.default.get(P),A)for(M=[].concat(A.baseConcepts,A.relatedConcepts),N=m(function(){var Z=M[z];if(Z.module==="HTML"){var U=Z.concept;if(U){var K=_.filter(function(Ie){return J(Ie[0],U)})[0],he;K?he=K[1]:he=[];for(var ue=!0,Ee=0;Ee<he.length;Ee++)if(he[Ee]===P){ue=!1;break}ue&&he.push(P),K||_.push([U,he])}}},"_loop"),z=0;z<M.length;z++)N();var P,A,M,N,z,j,$={entries:m(function(){return _},"entries"),forEach:m(function(Z){for(var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,K=0,he=_;K<he.length;K++){var ue=i(he[K],2),Ee=ue[0],Ie=ue[1];Z.call(U,Ie,Ee,_)}},"forEach"),get:m(function(Z){var U=_.filter(function(K){return Z.name===K[0].name&&re(Z.attributes,K[0].attributes)})[0];return U&&U[1]},"get"),has:m(function(Z){return!!$.get(Z)},"has"),keys:m(function(){return _.map(function(Z){var U=i(Z,1),K=U[0];return K})},"keys"),values:m(function(){return _.map(function(Z){var U=i(Z,2),K=U[1];return K})},"values")};function J(ne,Z){return ne.name===Z.name&&X(ne.constraints,Z.constraints)&&re(ne.attributes,Z.attributes)}m(J,"ariaRoleRelationConceptEquals");function X(ne,Z){if(ne===void 0&&Z!==void 0||ne!==void 0&&Z===void 0)return!1;if(ne!==void 0&&Z!==void 0){if(ne.length!==Z.length)return!1;for(var U=0;U<ne.length;U++)if(ne[U]!==Z[U])return!1}return!0}m(X,"ariaRoleRelationConstraintsEquals");function re(ne,Z){if(ne===void 0&&Z!==void 0||ne!==void 0&&Z===void 0)return!1;if(ne!==void 0&&Z!==void 0){if(ne.length!==Z.length)return!1;for(var U=0;U<ne.length;U++){if(ne[U].name!==Z[U].name||ne[U].value!==Z[U].value||ne[U].constraints===void 0&&Z[U].constraints!==void 0||ne[U].constraints!==void 0&&Z[U].constraints===void 0)return!1;if(ne[U].constraints!==void 0&&Z[U].constraints!==void 0){if(ne[U].constraints.length!==Z[U].constraints.length)return!1;for(var K=0;K<ne[U].constraints.length;K++)if(ne[U].constraints[K]!==Z[U].constraints[K])return!1}}}return!0}m(re,"ariaRoleRelationConceptAttributeEquals"),t.default=(0,e.default)($,$.entries())}}),NX=He({"../node_modules/aria-query/lib/roleElementMap.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(ky()),r=n(vC());function n(re){return re&&re.__esModule?re:{default:re}}m(n,"_interopRequireDefault");function i(re,ne){return g(re)||p(re,ne)||c(re,ne)||l()}m(i,"_slicedToArray");function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}m(l,"_nonIterableRest");function c(re,ne){if(re){if(typeof re=="string")return s(re,ne);var Z={}.toString.call(re).slice(8,-1);return Z==="Object"&&re.constructor&&(Z=re.constructor.name),Z==="Map"||Z==="Set"?Array.from(re):Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z)?s(re,ne):void 0}}m(c,"_unsupportedIterableToArray");function s(re,ne){(ne==null||ne>re.length)&&(ne=re.length);for(var Z=0,U=Array(ne);Z<ne;Z++)U[Z]=re[Z];return U}m(s,"_arrayLikeToArray");function p(re,ne){var Z=re==null?null:typeof Symbol<"u"&&re[Symbol.iterator]||re["@@iterator"];if(Z!=null){var U,K,he,ue,Ee=[],Ie=!0,ee=!1;try{if(he=(Z=Z.call(re)).next,ne===0){if(Object(Z)!==Z)return;Ie=!1}else for(;!(Ie=(U=he.call(Z)).done)&&(Ee.push(U.value),Ee.length!==ne);Ie=!0);}catch(pe){ee=!0,K=pe}finally{try{if(!Ie&&Z.return!=null&&(ue=Z.return(),Object(ue)!==ue))return}finally{if(ee)throw K}}return Ee}}m(p,"_iterableToArrayLimit");function g(re){if(Array.isArray(re))return re}m(g,"_arrayWithHoles");var _=[],x=r.default.keys();for(J=0;J<x.length;J++)if(P=x[J],A=r.default.get(P),M=[],A){for(N=[].concat(A.baseConcepts,A.relatedConcepts),$=0;$<N.length;$++)z=N[$],z.module==="HTML"&&(j=z.concept,j!=null&&M.push(j));M.length>0&&_.push([P,M])}var P,A,M,N,z,j,$,J,X={entries:m(function(){return _},"entries"),forEach:m(function(ne){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,U=0,K=_;U<K.length;U++){var he=i(K[U],2),ue=he[0],Ee=he[1];ne.call(Z,Ee,ue,_)}},"forEach"),get:m(function(ne){var Z=_.filter(function(U){return U[0]===ne})[0];return Z&&Z[1]},"get"),has:m(function(ne){return!!X.get(ne)},"has"),keys:m(function(){return _.map(function(ne){var Z=i(ne,1),U=Z[0];return U})},"keys"),values:m(function(){return _.map(function(ne){var Z=i(ne,2),U=Z[1];return U})},"values")};t.default=(0,e.default)(X,X.entries())}}),xC=He({"../node_modules/aria-query/lib/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.roles=t.roleElements=t.elementRoles=t.dom=t.aria=void 0;var e=c(XZ()),r=c(QZ()),n=c(vC()),i=c(DX()),l=c(NX());function c(s){return s&&s.__esModule?s:{default:s}}m(c,"_interopRequireDefault"),t.aria=e.default,t.dom=r.default,t.roles=n.default,t.elementRoles=i.default,t.roleElements=l.default}}),jD=He({"../node_modules/picocolors/picocolors.browser.js"(t,e){var r=String,n=m(function(){return{isColorSupported:!1,reset:r,bold:r,dim:r,italic:r,underline:r,inverse:r,hidden:r,strikethrough:r,black:r,red:r,green:r,yellow:r,blue:r,magenta:r,cyan:r,white:r,gray:r,bgBlack:r,bgRed:r,bgGreen:r,bgYellow:r,bgBlue:r,bgMagenta:r,bgCyan:r,bgWhite:r,blackBright:r,redBright:r,greenBright:r,yellowBright:r,blueBright:r,magentaBright:r,cyanBright:r,whiteBright:r,bgBlackBright:r,bgRedBright:r,bgGreenBright:r,bgYellowBright:r,bgBlueBright:r,bgMagentaBright:r,bgCyanBright:r,bgWhiteBright:r}},"create");e.exports=n(),e.exports.createColors=n}}),BD=He({"../node_modules/css.escape/css.escape.js"(t,e){(function(r,n){typeof t=="object"?e.exports=n(r):typeof define=="function"&&define.amd?define([],n.bind(r,r)):n(r)})(typeof global<"u"?global:t,function(r){if(r.CSS&&r.CSS.escape)return r.CSS.escape;var n=m(function(i){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var l=String(i),c=l.length,s=-1,p,g="",_=l.charCodeAt(0);++s<c;){if(p=l.charCodeAt(s),p==0){g+="";continue}if(p>=1&&p<=31||p==127||s==0&&p>=48&&p<=57||s==1&&p>=48&&p<=57&&_==45){g+="\\"+p.toString(16)+" ";continue}if(s==0&&c==1&&p==45){g+="\\"+l.charAt(s);continue}if(p>=128||p==45||p==95||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122){g+=l.charAt(s);continue}g+="\\"+l.charAt(s)}return g},"cssEscape");return r.CSS||(r.CSS={}),r.CSS.escape=n,n})}}),qD=He({"../node_modules/pretty-format/node_modules/ansi-styles/index.js"(t,e){var r=10,n=m((c=0)=>s=>`\x1B[${38+c};5;${s}m`,"wrapAnsi256"),i=m((c=0)=>(s,p,g)=>`\x1B[${38+c};2;${s};${p};${g}m`,"wrapAnsi16m");function l(){const c=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.gray=s.color.blackBright,s.bgColor.bgGray=s.bgColor.bgBlackBright,s.color.grey=s.color.blackBright,s.bgColor.bgGrey=s.bgColor.bgBlackBright;for(const[p,g]of Object.entries(s)){for(const[_,x]of Object.entries(g))s[_]={open:`\x1B[${x[0]}m`,close:`\x1B[${x[1]}m`},g[_]=s[_],c.set(x[0],x[1]);Object.defineProperty(s,p,{value:g,enumerable:!1})}return Object.defineProperty(s,"codes",{value:c,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi256=n(),s.color.ansi16m=i(),s.bgColor.ansi256=n(r),s.bgColor.ansi16m=i(r),Object.defineProperties(s,{rgbToAnsi256:{value:m((p,g,_)=>p===g&&g===_?p<8?16:p>248?231:Math.round((p-8)/247*24)+232:16+36*Math.round(p/255*5)+6*Math.round(g/255*5)+Math.round(_/255*5),"value"),enumerable:!1},hexToRgb:{value:m(p=>{const g=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(p.toString(16));if(!g)return[0,0,0];let{colorString:_}=g.groups;_.length===3&&(_=_.split("").map(P=>P+P).join(""));const x=Number.parseInt(_,16);return[x>>16&255,x>>8&255,x&255]},"value"),enumerable:!1},hexToAnsi256:{value:m(p=>s.rgbToAnsi256(...s.hexToRgb(p)),"value"),enumerable:!1}}),s}m(l,"assembleStyles"),Object.defineProperty(e,"exports",{enumerable:!0,get:l})}}),Vv=He({"../node_modules/pretty-format/build/collections.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.printIteratorEntries=r,t.printIteratorValues=n,t.printListItems=i,t.printObjectProperties=l;var e=m((c,s)=>{const p=Object.keys(c).sort(s);return Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(c).forEach(g=>{Object.getOwnPropertyDescriptor(c,g).enumerable&&p.push(g)}),p},"getKeysOfEnumerableProperties");function r(c,s,p,g,_,x,P=": "){let A="",M=c.next();if(!M.done){A+=s.spacingOuter;const N=p+s.indent;for(;!M.done;){const z=x(M.value[0],s,N,g,_),j=x(M.value[1],s,N,g,_);A+=N+z+P+j,M=c.next(),M.done?s.min||(A+=","):A+=","+s.spacingInner}A+=s.spacingOuter+p}return A}m(r,"printIteratorEntries");function n(c,s,p,g,_,x){let P="",A=c.next();if(!A.done){P+=s.spacingOuter;const M=p+s.indent;for(;!A.done;)P+=M+x(A.value,s,M,g,_),A=c.next(),A.done?s.min||(P+=","):P+=","+s.spacingInner;P+=s.spacingOuter+p}return P}m(n,"printIteratorValues");function i(c,s,p,g,_,x){let P="";if(c.length){P+=s.spacingOuter;const A=p+s.indent;for(let M=0;M<c.length;M++)P+=A,M in c&&(P+=x(c[M],s,A,g,_)),M<c.length-1?P+=","+s.spacingInner:s.min||(P+=",");P+=s.spacingOuter+p}return P}m(i,"printListItems");function l(c,s,p,g,_,x){let P="";const A=e(c,s.compareKeys);if(A.length){P+=s.spacingOuter;const M=p+s.indent;for(let N=0;N<A.length;N++){const z=A[N],j=x(z,s,M,g,_),$=x(c[z],s,M,g,_);P+=M+j+": "+$,N<A.length-1?P+=","+s.spacingInner:s.min||(P+=",")}P+=s.spacingOuter+p}return P}m(l,"printObjectProperties")}}),FX=He({"../node_modules/pretty-format/build/plugins/AsymmetricMatcher.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=Vv(),r=function(){return typeof globalThis<"u"?globalThis:typeof r<"u"?r:typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),n=r["jest-symbol-do-not-touch"]||r.Symbol,i=typeof n=="function"&&n.for?n.for("jest.asymmetricMatcher"):1267621,l=" ",c=m((_,x,P,A,M,N)=>{const z=_.toString();return z==="ArrayContaining"||z==="ArrayNotContaining"?++A>x.maxDepth?"["+z+"]":z+l+"["+(0,e.printListItems)(_.sample,x,P,A,M,N)+"]":z==="ObjectContaining"||z==="ObjectNotContaining"?++A>x.maxDepth?"["+z+"]":z+l+"{"+(0,e.printObjectProperties)(_.sample,x,P,A,M,N)+"}":z==="StringMatching"||z==="StringNotMatching"||z==="StringContaining"||z==="StringNotContaining"?z+l+N(_.sample,x,P,A,M):_.toAsymmetricMatcher()},"serialize");t.serialize=c;var s=m(_=>_&&_.$$typeof===i,"test");t.test=s;var p={serialize:c,test:s},g=p;t.default=g}}),zX=He({"../node_modules/pretty-format/node_modules/ansi-regex/index.js"(t,e){e.exports=({onlyFirst:r=!1}={})=>{const n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(n,r?void 0:"g")}}}),jX=He({"../node_modules/pretty-format/build/plugins/ConvertAnsi.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=n(zX()),r=n(qD());function n(g){return g&&g.__esModule?g:{default:g}}m(n,"_interopRequireDefault");var i=m(g=>g.replace((0,e.default)(),_=>{switch(_){case r.default.red.close:case r.default.green.close:case r.default.cyan.close:case r.default.gray.close:case r.default.white.close:case r.default.yellow.close:case r.default.bgRed.close:case r.default.bgGreen.close:case r.default.bgYellow.close:case r.default.inverse.close:case r.default.dim.close:case r.default.bold.close:case r.default.reset.open:case r.default.reset.close:return"</>";case r.default.red.open:return"<red>";case r.default.green.open:return"<green>";case r.default.cyan.open:return"<cyan>";case r.default.gray.open:return"<gray>";case r.default.white.open:return"<white>";case r.default.yellow.open:return"<yellow>";case r.default.bgRed.open:return"<bgRed>";case r.default.bgGreen.open:return"<bgGreen>";case r.default.bgYellow.open:return"<bgYellow>";case r.default.inverse.open:return"<inverse>";case r.default.dim.open:return"<dim>";case r.default.bold.open:return"<bold>";default:return""}}),"toHumanReadableAnsi"),l=m(g=>typeof g=="string"&&!!g.match((0,e.default)()),"test");t.test=l;var c=m((g,_,x,P,A,M)=>M(i(g),_,x,P,A),"serialize");t.serialize=c;var s={serialize:c,test:l},p=s;t.default=p}}),BX=He({"../node_modules/pretty-format/build/plugins/DOMCollection.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=Vv(),r=" ",n=["DOMStringMap","NamedNodeMap"],i=/^(HTML\w*Collection|NodeList)$/,l=m(x=>n.indexOf(x)!==-1||i.test(x),"testName"),c=m(x=>x&&x.constructor&&!!x.constructor.name&&l(x.constructor.name),"test");t.test=c;var s=m(x=>x.constructor.name==="NamedNodeMap","isNamedNodeMap"),p=m((x,P,A,M,N,z)=>{const j=x.constructor.name;return++M>P.maxDepth?"["+j+"]":(P.min?"":j+r)+(n.indexOf(j)!==-1?"{"+(0,e.printObjectProperties)(s(x)?Array.from(x).reduce(($,J)=>($[J.name]=J.value,$),{}):{...x},P,A,M,N,z)+"}":"["+(0,e.printListItems)(Array.from(x),P,A,M,N,z)+"]")},"serialize");t.serialize=p;var g={serialize:p,test:c},_=g;t.default=_}}),qX=He({"../node_modules/pretty-format/build/plugins/lib/escapeHTML.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=e;function e(r){return r.replace(/</g,"&lt;").replace(/>/g,"&gt;")}m(e,"escapeHTML")}}),wC=He({"../node_modules/pretty-format/build/plugins/lib/markup.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.printText=t.printProps=t.printElementAsLeaf=t.printElement=t.printComment=t.printChildren=void 0;var e=r(qX());function r(g){return g&&g.__esModule?g:{default:g}}m(r,"_interopRequireDefault");var n=m((g,_,x,P,A,M,N)=>{const z=P+x.indent,j=x.colors;return g.map($=>{const J=_[$];let X=N(J,x,z,A,M);return typeof J!="string"&&(X.indexOf(`
`)!==-1&&(X=x.spacingOuter+z+X+x.spacingOuter+P),X="{"+X+"}"),x.spacingInner+P+j.prop.open+$+j.prop.close+"="+j.value.open+X+j.value.close}).join("")},"printProps");t.printProps=n;var i=m((g,_,x,P,A,M)=>g.map(N=>_.spacingOuter+x+(typeof N=="string"?l(N,_):M(N,_,x,P,A))).join(""),"printChildren");t.printChildren=i;var l=m((g,_)=>{const x=_.colors.content;return x.open+(0,e.default)(g)+x.close},"printText");t.printText=l;var c=m((g,_)=>{const x=_.colors.comment;return x.open+"<!--"+(0,e.default)(g)+"-->"+x.close},"printComment");t.printComment=c;var s=m((g,_,x,P,A)=>{const M=P.colors.tag;return M.open+"<"+g+(_&&M.close+_+P.spacingOuter+A+M.open)+(x?">"+M.close+x+P.spacingOuter+A+M.open+"</"+g:(_&&!P.min?"":" ")+"/")+">"+M.close},"printElement");t.printElement=s;var p=m((g,_)=>{const x=_.colors.tag;return x.open+"<"+g+x.close+" "+x.open+" />"+x.close},"printElementAsLeaf");t.printElementAsLeaf=p}}),$X=He({"../node_modules/pretty-format/build/plugins/DOMElement.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=wC(),r=1,n=3,i=8,l=11,c=/^((HTML|SVG)\w*)?Element$/,s=m(z=>{try{return typeof z.hasAttribute=="function"&&z.hasAttribute("is")}catch{return!1}},"testHasAttribute"),p=m(z=>{const j=z.constructor.name,{nodeType:$,tagName:J}=z,X=typeof J=="string"&&J.includes("-")||s(z);return $===r&&(c.test(j)||X)||$===n&&j==="Text"||$===i&&j==="Comment"||$===l&&j==="DocumentFragment"},"testNode"),g=m(z=>{var j;return(z==null||(j=z.constructor)===null||j===void 0?void 0:j.name)&&p(z)},"test");t.test=g;function _(z){return z.nodeType===n}m(_,"nodeIsText");function x(z){return z.nodeType===i}m(x,"nodeIsComment");function P(z){return z.nodeType===l}m(P,"nodeIsFragment");var A=m((z,j,$,J,X,re)=>{if(_(z))return(0,e.printText)(z.data,j);if(x(z))return(0,e.printComment)(z.data,j);const ne=P(z)?"DocumentFragment":z.tagName.toLowerCase();return++J>j.maxDepth?(0,e.printElementAsLeaf)(ne,j):(0,e.printElement)(ne,(0,e.printProps)(P(z)?[]:Array.from(z.attributes).map(Z=>Z.name).sort(),P(z)?{}:Array.from(z.attributes).reduce((Z,U)=>(Z[U.name]=U.value,Z),{}),j,$+j.indent,J,X,re),(0,e.printChildren)(Array.prototype.slice.call(z.childNodes||z.children),j,$+j.indent,J,X,re),j,$)},"serialize");t.serialize=A;var M={serialize:A,test:g},N=M;t.default=N}}),VX=He({"../node_modules/pretty-format/build/plugins/Immutable.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=Vv(),r="@@__IMMUTABLE_ITERABLE__@@",n="@@__IMMUTABLE_LIST__@@",i="@@__IMMUTABLE_KEYED__@@",l="@@__IMMUTABLE_MAP__@@",c="@@__IMMUTABLE_ORDERED__@@",s="@@__IMMUTABLE_RECORD__@@",p="@@__IMMUTABLE_SEQ__@@",g="@@__IMMUTABLE_SET__@@",_="@@__IMMUTABLE_STACK__@@",x=m(U=>"Immutable."+U,"getImmutableName"),P=m(U=>"["+U+"]","printAsLeaf"),A=" ",M="",N=m((U,K,he,ue,Ee,Ie,ee)=>++ue>K.maxDepth?P(x(ee)):x(ee)+A+"{"+(0,e.printIteratorEntries)(U.entries(),K,he,ue,Ee,Ie)+"}","printImmutableEntries");function z(U){let K=0;return{next(){if(K<U._keys.length){const he=U._keys[K++];return{done:!1,value:[he,U.get(he)]}}return{done:!0,value:void 0}}}}m(z,"getRecordEntries");var j=m((U,K,he,ue,Ee,Ie)=>{const ee=x(U._name||"Record");return++ue>K.maxDepth?P(ee):ee+A+"{"+(0,e.printIteratorEntries)(z(U),K,he,ue,Ee,Ie)+"}"},"printImmutableRecord"),$=m((U,K,he,ue,Ee,Ie)=>{const ee=x("Seq");return++ue>K.maxDepth?P(ee):U[i]?ee+A+"{"+(U._iter||U._object?(0,e.printIteratorEntries)(U.entries(),K,he,ue,Ee,Ie):M)+"}":ee+A+"["+(U._iter||U._array||U._collection||U._iterable?(0,e.printIteratorValues)(U.values(),K,he,ue,Ee,Ie):M)+"]"},"printImmutableSeq"),J=m((U,K,he,ue,Ee,Ie,ee)=>++ue>K.maxDepth?P(x(ee)):x(ee)+A+"["+(0,e.printIteratorValues)(U.values(),K,he,ue,Ee,Ie)+"]","printImmutableValues"),X=m((U,K,he,ue,Ee,Ie)=>U[l]?N(U,K,he,ue,Ee,Ie,U[c]?"OrderedMap":"Map"):U[n]?J(U,K,he,ue,Ee,Ie,"List"):U[g]?J(U,K,he,ue,Ee,Ie,U[c]?"OrderedSet":"Set"):U[_]?J(U,K,he,ue,Ee,Ie,"Stack"):U[p]?$(U,K,he,ue,Ee,Ie):j(U,K,he,ue,Ee,Ie),"serialize");t.serialize=X;var re=m(U=>U&&(U[r]===!0||U[s]===!0),"test");t.test=re;var ne={serialize:X,test:re},Z=ne;t.default=Z}}),UX=He({"../node_modules/pretty-format/node_modules/react-is/cjs/react-is.production.min.js"(t){var e=60103,r=60106,n=60107,i=60108,l=60114,c=60109,s=60110,p=60112,g=60113,_=60120,x=60115,P=60116,A=60121,M=60122,N=60117,z=60129,j=60131;typeof Symbol=="function"&&Symbol.for&&($=Symbol.for,e=$("react.element"),r=$("react.portal"),n=$("react.fragment"),i=$("react.strict_mode"),l=$("react.profiler"),c=$("react.provider"),s=$("react.context"),p=$("react.forward_ref"),g=$("react.suspense"),_=$("react.suspense_list"),x=$("react.memo"),P=$("react.lazy"),A=$("react.block"),M=$("react.server.block"),N=$("react.fundamental"),z=$("react.debug_trace_mode"),j=$("react.legacy_hidden"));var $;function J(ee){if(typeof ee=="object"&&ee!==null){var pe=ee.$$typeof;switch(pe){case e:switch(ee=ee.type,ee){case n:case l:case i:case g:case _:return ee;default:switch(ee=ee&&ee.$$typeof,ee){case s:case p:case P:case x:case c:return ee;default:return pe}}case r:return pe}}}m(J,"y");var X=c,re=e,ne=p,Z=n,U=P,K=x,he=r,ue=l,Ee=i,Ie=g;t.ContextConsumer=s,t.ContextProvider=X,t.Element=re,t.ForwardRef=ne,t.Fragment=Z,t.Lazy=U,t.Memo=K,t.Portal=he,t.Profiler=ue,t.StrictMode=Ee,t.Suspense=Ie,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(ee){return J(ee)===s},t.isContextProvider=function(ee){return J(ee)===c},t.isElement=function(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===e},t.isForwardRef=function(ee){return J(ee)===p},t.isFragment=function(ee){return J(ee)===n},t.isLazy=function(ee){return J(ee)===P},t.isMemo=function(ee){return J(ee)===x},t.isPortal=function(ee){return J(ee)===r},t.isProfiler=function(ee){return J(ee)===l},t.isStrictMode=function(ee){return J(ee)===i},t.isSuspense=function(ee){return J(ee)===g},t.isValidElementType=function(ee){return typeof ee=="string"||typeof ee=="function"||ee===n||ee===l||ee===z||ee===i||ee===g||ee===_||ee===j||typeof ee=="object"&&ee!==null&&(ee.$$typeof===P||ee.$$typeof===x||ee.$$typeof===c||ee.$$typeof===s||ee.$$typeof===p||ee.$$typeof===N||ee.$$typeof===A||ee[0]===M)},t.typeOf=J}}),GX=He({"../node_modules/pretty-format/node_modules/react-is/index.js"(t,e){e.exports=UX()}}),HX=He({"../node_modules/pretty-format/build/plugins/ReactElement.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=i(GX()),r=wC();function n(P){if(typeof WeakMap!="function")return null;var A=new WeakMap,M=new WeakMap;return(n=m(function(N){return N?M:A},"_getRequireWildcardCache"))(P)}m(n,"_getRequireWildcardCache");function i(P,A){if(!A&&P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var M=n(A);if(M&&M.has(P))return M.get(P);var N={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in P)if(j!=="default"&&Object.prototype.hasOwnProperty.call(P,j)){var $=z?Object.getOwnPropertyDescriptor(P,j):null;$&&($.get||$.set)?Object.defineProperty(N,j,$):N[j]=P[j]}return N.default=P,M&&M.set(P,N),N}m(i,"_interopRequireWildcard");var l=m((P,A=[])=>(Array.isArray(P)?P.forEach(M=>{l(M,A)}):P!=null&&P!==!1&&A.push(P),A),"getChildren"),c=m(P=>{const A=P.type;if(typeof A=="string")return A;if(typeof A=="function")return A.displayName||A.name||"Unknown";if(e.isFragment(P))return"React.Fragment";if(e.isSuspense(P))return"React.Suspense";if(typeof A=="object"&&A!==null){if(e.isContextProvider(P))return"Context.Provider";if(e.isContextConsumer(P))return"Context.Consumer";if(e.isForwardRef(P)){if(A.displayName)return A.displayName;const M=A.render.displayName||A.render.name||"";return M!==""?"ForwardRef("+M+")":"ForwardRef"}if(e.isMemo(P)){const M=A.displayName||A.type.displayName||A.type.name||"";return M!==""?"Memo("+M+")":"Memo"}}return"UNDEFINED"},"getType"),s=m(P=>{const{props:A}=P;return Object.keys(A).filter(M=>M!=="children"&&A[M]!==void 0).sort()},"getPropKeys"),p=m((P,A,M,N,z,j)=>++N>A.maxDepth?(0,r.printElementAsLeaf)(c(P),A):(0,r.printElement)(c(P),(0,r.printProps)(s(P),P.props,A,M+A.indent,N,z,j),(0,r.printChildren)(l(P.props.children),A,M+A.indent,N,z,j),A,M),"serialize");t.serialize=p;var g=m(P=>P!=null&&e.isElement(P),"test");t.test=g;var _={serialize:p,test:g},x=_;t.default=x}}),JX=He({"../node_modules/pretty-format/build/plugins/ReactTestComponent.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.test=t.serialize=t.default=void 0;var e=wC(),r=function(){return typeof globalThis<"u"?globalThis:typeof r<"u"?r:typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),n=r["jest-symbol-do-not-touch"]||r.Symbol,i=typeof n=="function"&&n.for?n.for("react.test.json"):245830487,l=m(_=>{const{props:x}=_;return x?Object.keys(x).filter(P=>x[P]!==void 0).sort():[]},"getPropKeys"),c=m((_,x,P,A,M,N)=>++A>x.maxDepth?(0,e.printElementAsLeaf)(_.type,x):(0,e.printElement)(_.type,_.props?(0,e.printProps)(l(_),_.props,x,P+x.indent,A,M,N):"",_.children?(0,e.printChildren)(_.children,x,P+x.indent,A,M,N):"",x,P),"serialize");t.serialize=c;var s=m(_=>_&&_.$$typeof===i,"test");t.test=s;var p={serialize:c,test:s},g=p;t.default=g}}),WX=He({"../node_modules/pretty-format/build/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_OPTIONS=void 0,t.format=Wt,t.plugins=void 0;var e=_(qD()),r=Vv(),n=_(FX()),i=_(jX()),l=_(BX()),c=_($X()),s=_(VX()),p=_(HX()),g=_(JX());function _(Ve){return Ve&&Ve.__esModule?Ve:{default:Ve}}m(_,"_interopRequireDefault");var x=Object.prototype.toString,P=Date.prototype.toISOString,A=Error.prototype.toString,M=RegExp.prototype.toString,N=m(Ve=>typeof Ve.constructor=="function"&&Ve.constructor.name||"Object","getConstructorName"),z=m(Ve=>typeof window<"u"&&Ve===window,"isWindow"),j=/^Symbol\((.*)\)(.*)$/,$=/\n/gi,J=class extends Error{constructor(pt,lt){super(pt),this.stack=lt,this.name=this.constructor.name}};m(J,"PrettyFormatPluginError");var X=J;function re(Ve){return Ve==="[object Array]"||Ve==="[object ArrayBuffer]"||Ve==="[object DataView]"||Ve==="[object Float32Array]"||Ve==="[object Float64Array]"||Ve==="[object Int8Array]"||Ve==="[object Int16Array]"||Ve==="[object Int32Array]"||Ve==="[object Uint8Array]"||Ve==="[object Uint8ClampedArray]"||Ve==="[object Uint16Array]"||Ve==="[object Uint32Array]"}m(re,"isToStringedArrayType");function ne(Ve){return Object.is(Ve,-0)?"-0":String(Ve)}m(ne,"printNumber");function Z(Ve){return`${Ve}n`}m(Z,"printBigInt");function U(Ve,pt){return pt?"[Function "+(Ve.name||"anonymous")+"]":"[Function]"}m(U,"printFunction");function K(Ve){return String(Ve).replace(j,"Symbol($1)")}m(K,"printSymbol");function he(Ve){return"["+A.call(Ve)+"]"}m(he,"printError");function ue(Ve,pt,lt,Tt){if(Ve===!0||Ve===!1)return""+Ve;if(Ve===void 0)return"undefined";if(Ve===null)return"null";const vt=typeof Ve;if(vt==="number")return ne(Ve);if(vt==="bigint")return Z(Ve);if(vt==="string")return Tt?'"'+Ve.replace(/"|\\/g,"\\$&")+'"':'"'+Ve+'"';if(vt==="function")return U(Ve,pt);if(vt==="symbol")return K(Ve);const Dt=x.call(Ve);return Dt==="[object WeakMap]"?"WeakMap {}":Dt==="[object WeakSet]"?"WeakSet {}":Dt==="[object Function]"||Dt==="[object GeneratorFunction]"?U(Ve,pt):Dt==="[object Symbol]"?K(Ve):Dt==="[object Date]"?isNaN(+Ve)?"Date { NaN }":P.call(Ve):Dt==="[object Error]"?he(Ve):Dt==="[object RegExp]"?lt?M.call(Ve).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"):M.call(Ve):Ve instanceof Error?he(Ve):null}m(ue,"printBasicValue");function Ee(Ve,pt,lt,Tt,vt,Dt){if(vt.indexOf(Ve)!==-1)return"[Circular]";vt=vt.slice(),vt.push(Ve);const Yt=++Tt>pt.maxDepth,Bt=pt.min;if(pt.callToJSON&&!Yt&&Ve.toJSON&&typeof Ve.toJSON=="function"&&!Dt)return ve(Ve.toJSON(),pt,lt,Tt,vt,!0);const xr=x.call(Ve);return xr==="[object Arguments]"?Yt?"[Arguments]":(Bt?"":"Arguments ")+"["+(0,r.printListItems)(Ve,pt,lt,Tt,vt,ve)+"]":re(xr)?Yt?"["+Ve.constructor.name+"]":(Bt||!pt.printBasicPrototype&&Ve.constructor.name==="Array"?"":Ve.constructor.name+" ")+"["+(0,r.printListItems)(Ve,pt,lt,Tt,vt,ve)+"]":xr==="[object Map]"?Yt?"[Map]":"Map {"+(0,r.printIteratorEntries)(Ve.entries(),pt,lt,Tt,vt,ve," => ")+"}":xr==="[object Set]"?Yt?"[Set]":"Set {"+(0,r.printIteratorValues)(Ve.values(),pt,lt,Tt,vt,ve)+"}":Yt||z(Ve)?"["+N(Ve)+"]":(Bt||!pt.printBasicPrototype&&N(Ve)==="Object"?"":N(Ve)+" ")+"{"+(0,r.printObjectProperties)(Ve,pt,lt,Tt,vt,ve)+"}"}m(Ee,"printComplexValue");function Ie(Ve){return Ve.serialize!=null}m(Ie,"isNewPlugin");function ee(Ve,pt,lt,Tt,vt,Dt){let Yt;try{Yt=Ie(Ve)?Ve.serialize(pt,lt,Tt,vt,Dt,ve):Ve.print(pt,Bt=>ve(Bt,lt,Tt,vt,Dt),Bt=>{const xr=Tt+lt.indent;return xr+Bt.replace($,`
`+xr)},{edgeSpacing:lt.spacingOuter,min:lt.min,spacing:lt.spacingInner},lt.colors)}catch(Bt){throw new X(Bt.message,Bt.stack)}if(typeof Yt!="string")throw new Error(`pretty-format: Plugin must return type "string" but instead returned "${typeof Yt}".`);return Yt}m(ee,"printPlugin");function pe(Ve,pt){for(let lt=0;lt<Ve.length;lt++)try{if(Ve[lt].test(pt))return Ve[lt]}catch(Tt){throw new X(Tt.message,Tt.stack)}return null}m(pe,"findPlugin");function ve(Ve,pt,lt,Tt,vt,Dt){const Yt=pe(pt.plugins,Ve);if(Yt!==null)return ee(Yt,Ve,pt,lt,Tt,vt);const Bt=ue(Ve,pt.printFunctionName,pt.escapeRegex,pt.escapeString);return Bt!==null?Bt:Ee(Ve,pt,lt,Tt,vt,Dt)}m(ve,"printer");var xe={comment:"gray",content:"reset",prop:"yellow",tag:"cyan",value:"green"},tt=Object.keys(xe),Ke={callToJSON:!0,compareKeys:void 0,escapeRegex:!1,escapeString:!0,highlight:!1,indent:2,maxDepth:1/0,min:!1,plugins:[],printBasicPrototype:!0,printFunctionName:!0,theme:xe};t.DEFAULT_OPTIONS=Ke;function Ze(Ve){if(Object.keys(Ve).forEach(pt=>{if(!Ke.hasOwnProperty(pt))throw new Error(`pretty-format: Unknown option "${pt}".`)}),Ve.min&&Ve.indent!==void 0&&Ve.indent!==0)throw new Error('pretty-format: Options "min" and "indent" cannot be used together.');if(Ve.theme!==void 0){if(Ve.theme===null)throw new Error('pretty-format: Option "theme" must not be null.');if(typeof Ve.theme!="object")throw new Error(`pretty-format: Option "theme" must be of type "object" but instead received "${typeof Ve.theme}".`)}}m(Ze,"validateOptions");var bt=m(Ve=>tt.reduce((pt,lt)=>{const Tt=Ve.theme&&Ve.theme[lt]!==void 0?Ve.theme[lt]:xe[lt],vt=Tt&&e.default[Tt];if(vt&&typeof vt.close=="string"&&typeof vt.open=="string")pt[lt]=vt;else throw new Error(`pretty-format: Option "theme" has a key "${lt}" whose value "${Tt}" is undefined in ansi-styles.`);return pt},Object.create(null)),"getColorsHighlight"),qe=m(()=>tt.reduce((Ve,pt)=>(Ve[pt]={close:"",open:""},Ve),Object.create(null)),"getColorsEmpty"),kt=m(Ve=>Ve&&Ve.printFunctionName!==void 0?Ve.printFunctionName:Ke.printFunctionName,"getPrintFunctionName"),Jt=m(Ve=>Ve&&Ve.escapeRegex!==void 0?Ve.escapeRegex:Ke.escapeRegex,"getEscapeRegex"),Pt=m(Ve=>Ve&&Ve.escapeString!==void 0?Ve.escapeString:Ke.escapeString,"getEscapeString"),dt=m(Ve=>{var pt;return{callToJSON:Ve&&Ve.callToJSON!==void 0?Ve.callToJSON:Ke.callToJSON,colors:Ve&&Ve.highlight?bt(Ve):qe(),compareKeys:Ve&&typeof Ve.compareKeys=="function"?Ve.compareKeys:Ke.compareKeys,escapeRegex:Jt(Ve),escapeString:Pt(Ve),indent:Ve&&Ve.min?"":er(Ve&&Ve.indent!==void 0?Ve.indent:Ke.indent),maxDepth:Ve&&Ve.maxDepth!==void 0?Ve.maxDepth:Ke.maxDepth,min:Ve&&Ve.min!==void 0?Ve.min:Ke.min,plugins:Ve&&Ve.plugins!==void 0?Ve.plugins:Ke.plugins,printBasicPrototype:(pt=Ve?.printBasicPrototype)!==null&&pt!==void 0?pt:!0,printFunctionName:kt(Ve),spacingInner:Ve&&Ve.min?" ":`
`,spacingOuter:Ve&&Ve.min?"":`
`}},"getConfig");function er(Ve){return new Array(Ve+1).join(" ")}m(er,"createIndent");function Wt(Ve,pt){if(pt&&(Ze(pt),pt.plugins)){const Tt=pe(pt.plugins,Ve);if(Tt!==null)return ee(Tt,Ve,dt(pt),"",0,[])}const lt=ue(Ve,kt(pt),Jt(pt),Pt(pt));return lt!==null?lt:Ee(Ve,dt(pt),"",0,[])}m(Wt,"format");var ar={AsymmetricMatcher:n.default,ConvertAnsi:i.default,DOMCollection:l.default,DOMElement:c.default,Immutable:s.default,ReactElement:p.default,ReactTestComponent:g.default};t.plugins=ar;var _t=Wt;t.default=_t}}),ZX=He({"../node_modules/lz-string/libs/lz-string.js"(t,e){var r=function(){var n=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function s(g,_){if(!c[g]){c[g]={};for(var x=0;x<g.length;x++)c[g][g.charAt(x)]=x}return c[g][_]}m(s,"getBaseValue");var p={compressToBase64:m(function(g){if(g==null)return"";var _=p._compress(g,6,function(x){return i.charAt(x)});switch(_.length%4){default:case 0:return _;case 1:return _+"===";case 2:return _+"==";case 3:return _+"="}},"compressToBase64"),decompressFromBase64:m(function(g){return g==null?"":g==""?null:p._decompress(g.length,32,function(_){return s(i,g.charAt(_))})},"decompressFromBase64"),compressToUTF16:m(function(g){return g==null?"":p._compress(g,15,function(_){return n(_+32)})+" "},"compressToUTF16"),decompressFromUTF16:m(function(g){return g==null?"":g==""?null:p._decompress(g.length,16384,function(_){return g.charCodeAt(_)-32})},"decompressFromUTF16"),compressToUint8Array:m(function(g){for(var _=p.compress(g),x=new Uint8Array(_.length*2),P=0,A=_.length;P<A;P++){var M=_.charCodeAt(P);x[P*2]=M>>>8,x[P*2+1]=M%256}return x},"compressToUint8Array"),decompressFromUint8Array:m(function(g){if(g==null)return p.decompress(g);for(var _=new Array(g.length/2),x=0,P=_.length;x<P;x++)_[x]=g[x*2]*256+g[x*2+1];var A=[];return _.forEach(function(M){A.push(n(M))}),p.decompress(A.join(""))},"decompressFromUint8Array"),compressToEncodedURIComponent:m(function(g){return g==null?"":p._compress(g,6,function(_){return l.charAt(_)})},"compressToEncodedURIComponent"),decompressFromEncodedURIComponent:m(function(g){return g==null?"":g==""?null:(g=g.replace(/ /g,"+"),p._decompress(g.length,32,function(_){return s(l,g.charAt(_))}))},"decompressFromEncodedURIComponent"),compress:m(function(g){return p._compress(g,16,function(_){return n(_)})},"compress"),_compress:m(function(g,_,x){if(g==null)return"";var P,A,M={},N={},z="",j="",$="",J=2,X=3,re=2,ne=[],Z=0,U=0,K;for(K=0;K<g.length;K+=1)if(z=g.charAt(K),Object.prototype.hasOwnProperty.call(M,z)||(M[z]=X++,N[z]=!0),j=$+z,Object.prototype.hasOwnProperty.call(M,j))$=j;else{if(Object.prototype.hasOwnProperty.call(N,$)){if($.charCodeAt(0)<256){for(P=0;P<re;P++)Z=Z<<1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++;for(A=$.charCodeAt(0),P=0;P<8;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1}else{for(A=1,P=0;P<re;P++)Z=Z<<1|A,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=0;for(A=$.charCodeAt(0),P=0;P<16;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1}J--,J==0&&(J=Math.pow(2,re),re++),delete N[$]}else for(A=M[$],P=0;P<re;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1;J--,J==0&&(J=Math.pow(2,re),re++),M[j]=X++,$=String(z)}if($!==""){if(Object.prototype.hasOwnProperty.call(N,$)){if($.charCodeAt(0)<256){for(P=0;P<re;P++)Z=Z<<1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++;for(A=$.charCodeAt(0),P=0;P<8;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1}else{for(A=1,P=0;P<re;P++)Z=Z<<1|A,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=0;for(A=$.charCodeAt(0),P=0;P<16;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1}J--,J==0&&(J=Math.pow(2,re),re++),delete N[$]}else for(A=M[$],P=0;P<re;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1;J--,J==0&&(J=Math.pow(2,re),re++)}for(A=2,P=0;P<re;P++)Z=Z<<1|A&1,U==_-1?(U=0,ne.push(x(Z)),Z=0):U++,A=A>>1;for(;;)if(Z=Z<<1,U==_-1){ne.push(x(Z));break}else U++;return ne.join("")},"_compress"),decompress:m(function(g){return g==null?"":g==""?null:p._decompress(g.length,32768,function(_){return g.charCodeAt(_)})},"decompress"),_decompress:m(function(g,_,x){var P=[],A=4,M=4,N=3,z="",j=[],$,J,X,re,ne,Z,U,K={val:x(0),position:_,index:1};for($=0;$<3;$+=1)P[$]=$;for(X=0,ne=Math.pow(2,2),Z=1;Z!=ne;)re=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(re>0?1:0)*Z,Z<<=1;switch(X){case 0:for(X=0,ne=Math.pow(2,8),Z=1;Z!=ne;)re=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(re>0?1:0)*Z,Z<<=1;U=n(X);break;case 1:for(X=0,ne=Math.pow(2,16),Z=1;Z!=ne;)re=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(re>0?1:0)*Z,Z<<=1;U=n(X);break;case 2:return""}for(P[3]=U,J=U,j.push(U);;){if(K.index>g)return"";for(X=0,ne=Math.pow(2,N),Z=1;Z!=ne;)re=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(re>0?1:0)*Z,Z<<=1;switch(U=X){case 0:for(X=0,ne=Math.pow(2,8),Z=1;Z!=ne;)re=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(re>0?1:0)*Z,Z<<=1;P[M++]=n(X),U=M-1,A--;break;case 1:for(X=0,ne=Math.pow(2,16),Z=1;Z!=ne;)re=K.val&K.position,K.position>>=1,K.position==0&&(K.position=_,K.val=x(K.index++)),X|=(re>0?1:0)*Z,Z<<=1;P[M++]=n(X),U=M-1,A--;break;case 2:return j.join("")}if(A==0&&(A=Math.pow(2,N),N++),P[U])z=P[U];else if(U===M)z=J+J.charAt(0);else return null;j.push(z),P[M++]=J+z.charAt(0),A--,J=z,A==0&&(A=Math.pow(2,N),N++)}},"_decompress")};return p}();typeof define=="function"&&define.amd?define(function(){return r}):typeof e<"u"&&e!=null?e.exports=r:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return r})}}),$D=He({"../node_modules/memoizerific/memoizerific.js"(t,e){(function(r){if(typeof t=="object"&&typeof e<"u")e.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n=this,n.memoizerific=r()}})(function(){return m(function r(n,i,l){function c(g,_){if(!i[g]){if(!n[g]){var x=typeof E0=="function"&&E0;if(!_&&x)return x(g,!0);if(s)return s(g,!0);var P=new Error("Cannot find module '"+g+"'");throw P.code="MODULE_NOT_FOUND",P}var A=i[g]={exports:{}};n[g][0].call(A.exports,function(M){var N=n[g][1][M];return c(N||M)},A,A.exports,r,n,i,l)}return i[g].exports}m(c,"s");for(var s=typeof E0=="function"&&E0,p=0;p<l.length;p++)c(l[p]);return c},"e")({1:[function(r,n,i){n.exports=function(l){if(typeof Map!="function"||l){var c=r("./similar");return new c}else return new Map}},{"./similar":2}],2:[function(r,n,i){function l(){return this.list=[],this.lastItem=void 0,this.size=0,this}m(l,"Similar"),l.prototype.get=function(c){var s;if(this.lastItem&&this.isEqual(this.lastItem.key,c))return this.lastItem.val;if(s=this.indexOf(c),s>=0)return this.lastItem=this.list[s],this.list[s].val},l.prototype.set=function(c,s){var p;return this.lastItem&&this.isEqual(this.lastItem.key,c)?(this.lastItem.val=s,this):(p=this.indexOf(c),p>=0?(this.lastItem=this.list[p],this.list[p].val=s,this):(this.lastItem={key:c,val:s},this.list.push(this.lastItem),this.size++,this))},l.prototype.delete=function(c){var s;if(this.lastItem&&this.isEqual(this.lastItem.key,c)&&(this.lastItem=void 0),s=this.indexOf(c),s>=0)return this.size--,this.list.splice(s,1)[0]},l.prototype.has=function(c){var s;return this.lastItem&&this.isEqual(this.lastItem.key,c)?!0:(s=this.indexOf(c),s>=0?(this.lastItem=this.list[s],!0):!1)},l.prototype.forEach=function(c,s){var p;for(p=0;p<this.size;p++)c.call(s||this,this.list[p].val,this.list[p].key,this)},l.prototype.indexOf=function(c){var s;for(s=0;s<this.size;s++)if(this.isEqual(this.list[s].key,c))return s;return-1},l.prototype.isEqual=function(c,s){return c===s||c!==c&&s!==s},n.exports=l},{}],3:[function(r,n,i){var l=r("map-or-similar");n.exports=function(g){var _=new l(!1),x=[];return function(P){var A=m(function(){var M=_,N,z,j=arguments.length-1,$=Array(j+1),J=!0,X;if((A.numArgs||A.numArgs===0)&&A.numArgs!==j+1)throw new Error("Memoizerific functions should always be called with the same number of arguments");for(X=0;X<j;X++){if($[X]={cacheItem:M,arg:arguments[X]},M.has(arguments[X])){M=M.get(arguments[X]);continue}J=!1,N=new l(!1),M.set(arguments[X],N),M=N}return J&&(M.has(arguments[j])?z=M.get(arguments[j]):J=!1),J||(z=P.apply(null,arguments),M.set(arguments[j],z)),g>0&&($[j]={cacheItem:M,arg:arguments[j]},J?c(x,$):x.push($),x.length>g&&s(x.shift())),A.wasMemoized=J,A.numArgs=j+1,z},"memoizerific");return A.limit=g,A.wasMemoized=!1,A.cache=_,A.lru=x,A}};function c(g,_){var x=g.length,P=_.length,A,M,N;for(M=0;M<x;M++){for(A=!0,N=0;N<P;N++)if(!p(g[M][N].arg,_[N].arg)){A=!1;break}if(A)break}g.push(g.splice(M,1)[0])}m(c,"moveToMostRecentLru");function s(g){var _=g.length,x=g[_-1],P,A;for(x.cacheItem.delete(x.arg),A=_-2;A>=0&&(x=g[A],P=x.cacheItem.get(x.arg),!P||!P.size);A--)x.cacheItem.delete(x.arg)}m(s,"removeCachedResult");function p(g,_){return g===_||g!==g&&_!==_}m(p,"isEqual")},{"map-or-similar":1}]},{},[3])(3)})}}),VD=He({"../node_modules/picoquery/lib/string-util.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeString=n;var e=Array.from({length:256},(i,l)=>"%"+((l<16?"0":"")+l.toString(16)).toUpperCase()),r=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function n(i){const l=i.length;if(l===0)return"";let c="",s=0,p=0;e:for(;p<l;p++){let g=i.charCodeAt(p);for(;g<128;){if(r[g]!==1&&(s<p&&(c+=i.slice(s,p)),s=p+1,c+=e[g]),++p===l)break e;g=i.charCodeAt(p)}if(s<p&&(c+=i.slice(s,p)),g<2048){s=p+1,c+=e[192|g>>6]+e[128|g&63];continue}if(g<55296||g>=57344){s=p+1,c+=e[224|g>>12]+e[128|g>>6&63]+e[128|g&63];continue}if(++p,p>=l)throw new Error("URI malformed");const _=i.charCodeAt(p)&1023;s=p+1,g=65536+((g&1023)<<10|_),c+=e[240|g>>18]+e[128|g>>12&63]+e[128|g>>6&63]+e[128|g&63]}return s===0?i:s<l?c+i.slice(s):c}m(n,"encodeString")}}),EC=He({"../node_modules/picoquery/lib/shared.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=t.defaultShouldSerializeObject=t.defaultValueSerializer=void 0;var e=VD(),r=m(l=>{switch(typeof l){case"string":return(0,e.encodeString)(l);case"bigint":case"boolean":return""+l;case"number":if(Number.isFinite(l))return l<1e21?""+l:(0,e.encodeString)(""+l);break}return l instanceof Date?(0,e.encodeString)(l.toISOString()):""},"defaultValueSerializer");t.defaultValueSerializer=r;var n=m(l=>l instanceof Date,"defaultShouldSerializeObject");t.defaultShouldSerializeObject=n;var i=m(l=>l,"identityFunc");t.defaultOptions={nesting:!0,nestingSyntax:"dot",arrayRepeat:!1,arrayRepeatSyntax:"repeat",delimiter:38,valueDeserializer:i,valueSerializer:t.defaultValueSerializer,keyDeserializer:i,shouldSerializeObject:t.defaultShouldSerializeObject}}}),UD=He({"../node_modules/picoquery/lib/object-util.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepObject=i,t.stringifyObject=_;var e=EC(),r=VD();function n(x){return x==="__proto__"||x==="constructor"||x==="prototype"}m(n,"isPrototypeKey");function i(x,P,A,M,N){if(n(P))return x;const z=x[P];return typeof z=="object"&&z!==null?z:!M&&(N||typeof A=="number"||typeof A=="string"&&A*0===0&&A.indexOf(".")===-1)?x[P]=[]:x[P]={}}m(i,"getDeepObject");var l=20,c="[]",s="[",p="]",g=".";function _(x,P,A=0,M,N){const{nestingSyntax:z=e.defaultOptions.nestingSyntax,arrayRepeat:j=e.defaultOptions.arrayRepeat,arrayRepeatSyntax:$=e.defaultOptions.arrayRepeatSyntax,nesting:J=e.defaultOptions.nesting,delimiter:X=e.defaultOptions.delimiter,valueSerializer:re=e.defaultOptions.valueSerializer,shouldSerializeObject:ne=e.defaultOptions.shouldSerializeObject}=P,Z=typeof X=="number"?String.fromCharCode(X):X,U=N===!0&&j,K=z==="dot"||z==="js"&&!N;if(A>l)return"";let he="",ue=!0,Ee=!1;for(const Ie in x){const ee=x[Ie];if(ee===void 0)continue;let pe;M?(pe=M,U?$==="bracket"&&(pe+=c):K?(pe+=g,pe+=Ie):(pe+=s,pe+=Ie,pe+=p)):pe=Ie,ue||(he+=Z),typeof ee=="object"&&ee!==null&&!ne(ee)?(Ee=ee.pop!==void 0,(J||j&&Ee)&&(he+=_(ee,P,A+1,pe,Ee))):(he+=(0,r.encodeString)(pe),he+="=",he+=re(ee,Ie)),ue&&(ue=!1)}return he}m(_,"stringifyObject")}}),KX=He({"../node_modules/picoquery/lib/decode-uri-component.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeURIComponent=i;var e=12,r=0,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function i(s){let p=s.indexOf("%");if(p===-1)return s;const g=s.length;let _="",x=0,P=0,A=p,M=e;for(;p>-1&&p<g;){const N=c(s[p+1],4),z=c(s[p+2],0),j=N|z,$=n[j];if(M=n[256+M+$],P=P<<6|j&n[364+$],M===e)_+=s.slice(x,A),_+=P<=65535?String.fromCharCode(P):String.fromCharCode(55232+(P>>10),56320+(P&1023)),P=0,x=p+3,p=A=s.indexOf("%",x);else{if(M===r)return null;if(p+=3,p<g&&s.charCodeAt(p)===37)continue;return null}}return _+s.slice(x)}m(i,"decodeURIComponent");var l={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function c(s,p){const g=l[s];return g===void 0?255:g<<p}m(c,"hexCodeToInt")}}),YX=He({"../node_modules/picoquery/lib/parse.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.numberValueDeserializer=t.numberKeyDeserializer=void 0,t.parse=g;var e=UD(),r=EC(),n=KX(),i=m(_=>{const x=Number(_);return Number.isNaN(x)?_:x},"numberKeyDeserializer");t.numberKeyDeserializer=i;var l=m(_=>{const x=Number(_);return Number.isNaN(x)?_:x},"numberValueDeserializer");t.numberValueDeserializer=l;var c=/\+/g,s=m(function(){},"Empty");s.prototype=Object.create(null);function p(_,x,P,A,M){let N=_.substring(x,P);return A&&(N=N.replace(c," ")),M&&(N=(0,n.decodeURIComponent)(N)||N),N}m(p,"computeKeySlice");function g(_,x){const{valueDeserializer:P=r.defaultOptions.valueDeserializer,keyDeserializer:A=r.defaultOptions.keyDeserializer,arrayRepeatSyntax:M=r.defaultOptions.arrayRepeatSyntax,nesting:N=r.defaultOptions.nesting,arrayRepeat:z=r.defaultOptions.arrayRepeat,nestingSyntax:j=r.defaultOptions.nestingSyntax,delimiter:$=r.defaultOptions.delimiter}=x??{},J=typeof $=="string"?$.charCodeAt(0):$,X=j==="js",re=new s;if(typeof _!="string")return re;const ne=_.length;let Z="",U=-1,K=-1,he=-1,ue=re,Ee,Ie="",ee="",pe=!1,ve=!1,xe=!1,tt=!1,Ke=!1,Ze=!1,bt=0,qe=-1,kt=-1,Jt=-1;for(let Pt=0;Pt<ne+1;Pt++){if(bt=Pt!==ne?_.charCodeAt(Pt):J,bt===J){if(Ze=K>U,Ze||(K=Pt),he!==K-1&&(ee=p(_,he+1,qe>-1?qe:K,xe,pe),Ie=A(ee),Ee!==void 0&&(ue=(0,e.getDeepObject)(ue,Ee,Ie,X&&Ke,void 0))),Ze||Ie!==""){Ze&&(Z=_.slice(K+1,Pt),tt&&(Z=Z.replace(c," ")),ve&&(Z=(0,n.decodeURIComponent)(Z)||Z));const dt=P(Z,Ie);if(z){const er=ue[Ie];er===void 0?qe>-1?ue[Ie]=[dt]:ue[Ie]=dt:er.pop?er.push(dt):ue[Ie]=[er,dt]}else ue[Ie]=dt}Z="",U=Pt,K=Pt,pe=!1,ve=!1,xe=!1,tt=!1,Ke=!1,qe=-1,he=Pt,ue=re,Ee=void 0,Ie=""}else bt===93?(z&&M==="bracket"&&Jt===91&&(qe=kt),N&&(j==="index"||X)&&K<=U&&(he!==kt&&(ee=p(_,he+1,Pt,xe,pe),Ie=A(ee),Ee!==void 0&&(ue=(0,e.getDeepObject)(ue,Ee,Ie,void 0,void 0)),Ee=Ie,xe=!1,pe=!1),he=Pt,Ke=!1)):bt===46?N&&(j==="dot"||X)&&K<=U&&(he!==kt&&(ee=p(_,he+1,Pt,xe,pe),Ie=A(ee),Ee!==void 0&&(ue=(0,e.getDeepObject)(ue,Ee,Ie,X)),Ee=Ie,xe=!1,pe=!1),Ke=!0,he=Pt):bt===91?N&&(j==="index"||X)&&K<=U&&(he!==kt&&(ee=p(_,he+1,Pt,xe,pe),Ie=A(ee),X&&Ee!==void 0&&(ue=(0,e.getDeepObject)(ue,Ee,Ie,X)),Ee=Ie,xe=!1,pe=!1,Ke=!1),he=Pt):bt===61?K<=U?K=Pt:ve=!0:bt===43?K>U?tt=!0:xe=!0:bt===37&&(K>U?ve=!0:pe=!0);kt=Pt,Jt=bt}return re}m(g,"parse")}}),XX=He({"../node_modules/picoquery/lib/stringify.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=r;var e=UD();function r(n,i){if(n===null||typeof n!="object")return"";const l=i??{};return(0,e.stringifyObject)(n,l)}m(r,"stringify")}}),TC=He({"../node_modules/picoquery/lib/main.js"(t){var e=t&&t.__createBinding||(Object.create?function(l,c,s,p){p===void 0&&(p=s);var g=Object.getOwnPropertyDescriptor(c,s);(!g||("get"in g?!c.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:m(function(){return c[s]},"get")}),Object.defineProperty(l,p,g)}:function(l,c,s,p){p===void 0&&(p=s),l[p]=c[s]}),r=t&&t.__exportStar||function(l,c){for(var s in l)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&e(c,l,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=t.parse=void 0;var n=YX();Object.defineProperty(t,"parse",{enumerable:!0,get:m(function(){return n.parse},"get")});var i=XX();Object.defineProperty(t,"stringify",{enumerable:!0,get:m(function(){return i.stringify},"get")}),r(EC(),t)}}),GD=He({"../node_modules/entities/lib/maps/entities.json"(t,e){e.exports={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}}}),QX=He({"../node_modules/entities/lib/maps/legacy.json"(t,e){e.exports={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",amp:"&",AMP:"&",Aring:"",aring:"",Atilde:"",atilde:"",Auml:"",auml:"",brvbar:"",Ccedil:"",ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",ETH:"",eth:"",Euml:"",euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",iquest:"",Iuml:"",iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",Ntilde:"",ntilde:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",Ograve:"",ograve:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",Ouml:"",ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",THORN:"",thorn:"",times:"",Uacute:"",uacute:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",Uuml:"",uuml:"",Yacute:"",yacute:"",yen:"",yuml:""}}}),HD=He({"../node_modules/entities/lib/maps/xml.json"(t,e){e.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}}}),eQ=He({"../node_modules/entities/lib/maps/decode.json"(t,e){e.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}}}),tQ=He({"../node_modules/entities/lib/decode_codepoint.js"(t){var e=t&&t.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0});var r=e(eQ()),n=String.fromCodePoint||function(l){var c="";return l>65535&&(l-=65536,c+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),c+=String.fromCharCode(l),c};function i(l){return l>=55296&&l<=57343||l>1114111?"":(l in r.default&&(l=r.default[l]),n(l))}m(i,"decodeCodePoint"),t.default=i}}),q3=He({"../node_modules/entities/lib/decode.js"(t){var e=t&&t.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var r=e(GD()),n=e(QX()),i=e(HD()),l=e(tQ()),c=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;t.decodeXML=s(i.default),t.decodeHTMLStrict=s(r.default);function s(_){var x=g(_);return function(P){return String(P).replace(c,x)}}m(s,"getStrictDecoder");var p=m(function(_,x){return _<x?1:-1},"sorter");t.decodeHTML=function(){for(var _=Object.keys(n.default).sort(p),x=Object.keys(r.default).sort(p),P=0,A=0;P<x.length;P++)_[A]===x[P]?(x[P]+=";?",A++):x[P]+=";";var M=new RegExp("&(?:"+x.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),N=g(r.default);function z(j){return j.substr(-1)!==";"&&(j+=";"),N(j)}return m(z,"replacer"),function(j){return String(j).replace(M,z)}}();function g(_){return m(function(P){if(P.charAt(1)==="#"){var A=P.charAt(2);return A==="X"||A==="x"?l.default(parseInt(P.substr(3),16)):l.default(parseInt(P.substr(2),10))}return _[P.slice(1,-1)]||P},"replace")}m(g,"getReplacer")}}),$3=He({"../node_modules/entities/lib/encode.js"(t){var e=t&&t.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var r=e(HD()),n=p(r.default),i=g(n);t.encodeXML=j(n);var l=e(GD()),c=p(l.default),s=g(c);t.encodeHTML=A(c,s),t.encodeNonAsciiHTML=j(c);function p($){return Object.keys($).sort().reduce(function(J,X){return J[$[X]]="&"+X+";",J},{})}m(p,"getInverseObj");function g($){for(var J=[],X=[],re=0,ne=Object.keys($);re<ne.length;re++){var Z=ne[re];Z.length===1?J.push("\\"+Z):X.push(Z)}J.sort();for(var U=0;U<J.length-1;U++){for(var K=U;K<J.length-1&&J[K].charCodeAt(1)+1===J[K+1].charCodeAt(1);)K+=1;var he=1+K-U;he<3||J.splice(U,he,J[U]+"-"+J[K])}return X.unshift("["+J.join("")+"]"),new RegExp(X.join("|"),"g")}m(g,"getInverseReplacer");var _=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,x=String.prototype.codePointAt!=null?function($){return $.codePointAt(0)}:function($){return($.charCodeAt(0)-55296)*1024+$.charCodeAt(1)-56320+65536};function P($){return"&#x"+($.length>1?x($):$.charCodeAt(0)).toString(16).toUpperCase()+";"}m(P,"singleCharReplacer");function A($,J){return function(X){return X.replace(J,function(re){return $[re]}).replace(_,P)}}m(A,"getInverse");var M=new RegExp(i.source+"|"+_.source,"g");function N($){return $.replace(M,P)}m(N,"escape"),t.escape=N;function z($){return $.replace(i,P)}m(z,"escapeUTF8"),t.escapeUTF8=z;function j($){return function(J){return J.replace(M,function(X){return $[X]||P(X)})}}m(j,"getASCIIEncoder")}}),rQ=He({"../node_modules/entities/lib/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var e=q3(),r=$3();function n(p,g){return(!g||g<=0?e.decodeXML:e.decodeHTML)(p)}m(n,"decode"),t.decode=n;function i(p,g){return(!g||g<=0?e.decodeXML:e.decodeHTMLStrict)(p)}m(i,"decodeStrict"),t.decodeStrict=i;function l(p,g){return(!g||g<=0?r.encodeXML:r.encodeHTML)(p)}m(l,"encode"),t.encode=l;var c=$3();Object.defineProperty(t,"encodeXML",{enumerable:!0,get:m(function(){return c.encodeXML},"get")}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:m(function(){return c.encodeHTML},"get")}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:m(function(){return c.encodeNonAsciiHTML},"get")}),Object.defineProperty(t,"escape",{enumerable:!0,get:m(function(){return c.escape},"get")}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:m(function(){return c.escapeUTF8},"get")}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:m(function(){return c.encodeHTML},"get")}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:m(function(){return c.encodeHTML},"get")});var s=q3();Object.defineProperty(t,"decodeXML",{enumerable:!0,get:m(function(){return s.decodeXML},"get")}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:m(function(){return s.decodeHTML},"get")}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:m(function(){return s.decodeHTMLStrict},"get")}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:m(function(){return s.decodeHTML},"get")}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:m(function(){return s.decodeHTML},"get")}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:m(function(){return s.decodeHTMLStrict},"get")}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:m(function(){return s.decodeHTMLStrict},"get")}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:m(function(){return s.decodeXML},"get")})}}),nQ=He({"../node_modules/ansi-to-html/lib/ansi_to_html.js"(t,e){function r(ee,pe){if(!(ee instanceof pe))throw new TypeError("Cannot call a class as a function")}m(r,"_classCallCheck");function n(ee,pe){for(var ve=0;ve<pe.length;ve++){var xe=pe[ve];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(ee,xe.key,xe)}}m(n,"_defineProperties");function i(ee,pe,ve){return pe&&n(ee.prototype,pe),ve&&n(ee,ve),ee}m(i,"_createClass");function l(ee,pe){var ve=typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(!ve){if(Array.isArray(ee)||(ve=c(ee))||pe&&ee&&typeof ee.length=="number"){ve&&(ee=ve);var xe=0,tt=m(function(){},"F");return{s:tt,n:m(function(){return xe>=ee.length?{done:!0}:{done:!1,value:ee[xe++]}},"n"),e:m(function(kt){throw kt},"e"),f:tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ke=!0,Ze=!1,bt;return{s:m(function(){ve=ve.call(ee)},"s"),n:m(function(){var kt=ve.next();return Ke=kt.done,kt},"n"),e:m(function(kt){Ze=!0,bt=kt},"e"),f:m(function(){try{!Ke&&ve.return!=null&&ve.return()}finally{if(Ze)throw bt}},"f")}}m(l,"_createForOfIteratorHelper");function c(ee,pe){if(ee){if(typeof ee=="string")return s(ee,pe);var ve=Object.prototype.toString.call(ee).slice(8,-1);if(ve==="Object"&&ee.constructor&&(ve=ee.constructor.name),ve==="Map"||ve==="Set")return Array.from(ee);if(ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve))return s(ee,pe)}}m(c,"_unsupportedIterableToArray");function s(ee,pe){(pe==null||pe>ee.length)&&(pe=ee.length);for(var ve=0,xe=new Array(pe);ve<pe;ve++)xe[ve]=ee[ve];return xe}m(s,"_arrayLikeToArray");var p=rQ(),g={fg:"#FFF",bg:"#000",newline:!1,escapeXML:!1,stream:!1,colors:_()};function _(){var ee={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return $(0,5).forEach(function(pe){$(0,5).forEach(function(ve){$(0,5).forEach(function(xe){return x(pe,ve,xe,ee)})})}),$(0,23).forEach(function(pe){var ve=pe+232,xe=P(pe*10+8);ee[ve]="#"+xe+xe+xe}),ee}m(_,"getDefaultColors");function x(ee,pe,ve,xe){var tt=16+ee*36+pe*6+ve,Ke=ee>0?ee*40+55:0,Ze=pe>0?pe*40+55:0,bt=ve>0?ve*40+55:0;xe[tt]=A([Ke,Ze,bt])}m(x,"setStyleColor");function P(ee){for(var pe=ee.toString(16);pe.length<2;)pe="0"+pe;return pe}m(P,"toHexString");function A(ee){var pe=[],ve=l(ee),xe;try{for(ve.s();!(xe=ve.n()).done;){var tt=xe.value;pe.push(P(tt))}}catch(Ke){ve.e(Ke)}finally{ve.f()}return"#"+pe.join("")}m(A,"toColorHexString");function M(ee,pe,ve,xe){var tt;return pe==="text"?tt=re(ve,xe):pe==="display"?tt=z(ee,ve,xe):pe==="xterm256Foreground"?tt=U(ee,xe.colors[ve]):pe==="xterm256Background"?tt=K(ee,xe.colors[ve]):pe==="rgb"&&(tt=N(ee,ve)),tt}m(M,"generateOutput");function N(ee,pe){pe=pe.substring(2).slice(0,-1);var ve=+pe.substr(0,2),xe=pe.substring(5).split(";"),tt=xe.map(function(Ke){return("0"+Number(Ke).toString(16)).substr(-2)}).join("");return Z(ee,(ve===38?"color:#":"background-color:#")+tt)}m(N,"handleRgb");function z(ee,pe,ve){pe=parseInt(pe,10);var xe={"-1":m(function(){return"<br/>"},"_"),0:m(function(){return ee.length&&j(ee)},"_"),1:m(function(){return ne(ee,"b")},"_"),3:m(function(){return ne(ee,"i")},"_"),4:m(function(){return ne(ee,"u")},"_"),8:m(function(){return Z(ee,"display:none")},"_"),9:m(function(){return ne(ee,"strike")},"_"),22:m(function(){return Z(ee,"font-weight:normal;text-decoration:none;font-style:normal")},"_"),23:m(function(){return he(ee,"i")},"_"),24:m(function(){return he(ee,"u")},"_"),39:m(function(){return U(ee,ve.fg)},"_"),49:m(function(){return K(ee,ve.bg)},"_"),53:m(function(){return Z(ee,"text-decoration:overline")},"_")},tt;return xe[pe]?tt=xe[pe]():4<pe&&pe<7?tt=ne(ee,"blink"):29<pe&&pe<38?tt=U(ee,ve.colors[pe-30]):39<pe&&pe<48?tt=K(ee,ve.colors[pe-40]):89<pe&&pe<98?tt=U(ee,ve.colors[8+(pe-90)]):99<pe&&pe<108&&(tt=K(ee,ve.colors[8+(pe-100)])),tt}m(z,"handleDisplay");function j(ee){var pe=ee.slice(0);return ee.length=0,pe.reverse().map(function(ve){return"</"+ve+">"}).join("")}m(j,"resetStyles");function $(ee,pe){for(var ve=[],xe=ee;xe<=pe;xe++)ve.push(xe);return ve}m($,"range");function J(ee){return function(pe){return(ee===null||pe.category!==ee)&&ee!=="all"}}m(J,"notCategory");function X(ee){ee=parseInt(ee,10);var pe=null;return ee===0?pe="all":ee===1?pe="bold":2<ee&&ee<5?pe="underline":4<ee&&ee<7?pe="blink":ee===8?pe="hide":ee===9?pe="strike":29<ee&&ee<38||ee===39||89<ee&&ee<98?pe="foreground-color":(39<ee&&ee<48||ee===49||99<ee&&ee<108)&&(pe="background-color"),pe}m(X,"categoryForCode");function re(ee,pe){return pe.escapeXML?p.encodeXML(ee):ee}m(re,"pushText");function ne(ee,pe,ve){return ve||(ve=""),ee.push(pe),"<".concat(pe).concat(ve?' style="'.concat(ve,'"'):"",">")}m(ne,"pushTag");function Z(ee,pe){return ne(ee,"span",pe)}m(Z,"pushStyle");function U(ee,pe){return ne(ee,"span","color:"+pe)}m(U,"pushForegroundColor");function K(ee,pe){return ne(ee,"span","background-color:"+pe)}m(K,"pushBackgroundColor");function he(ee,pe){var ve;if(ee.slice(-1)[0]===pe&&(ve=ee.pop()),ve)return"</"+pe+">"}m(he,"closeTag");function ue(ee,pe,ve){var xe=!1,tt=3;function Ke(){return""}m(Ke,"remove");function Ze(vt,Dt){return ve("xterm256Foreground",Dt),""}m(Ze,"removeXterm256Foreground");function bt(vt,Dt){return ve("xterm256Background",Dt),""}m(bt,"removeXterm256Background");function qe(vt){return pe.newline?ve("display",-1):ve("text",vt),""}m(qe,"newline");function kt(vt,Dt){xe=!0,Dt.trim().length===0&&(Dt="0"),Dt=Dt.trimRight(";").split(";");var Yt=l(Dt),Bt;try{for(Yt.s();!(Bt=Yt.n()).done;){var xr=Bt.value;ve("display",xr)}}catch($r){Yt.e($r)}finally{Yt.f()}return""}m(kt,"ansiMess");function Jt(vt){return ve("text",vt),""}m(Jt,"realText");function Pt(vt){return ve("rgb",vt),""}m(Pt,"rgb");var dt=[{pattern:/^\x08+/,sub:Ke},{pattern:/^\x1b\[[012]?K/,sub:Ke},{pattern:/^\x1b\[\(B/,sub:Ke},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:Pt},{pattern:/^\x1b\[38;5;(\d+)m/,sub:Ze},{pattern:/^\x1b\[48;5;(\d+)m/,sub:bt},{pattern:/^\n/,sub:qe},{pattern:/^\r+\n/,sub:qe},{pattern:/^\r/,sub:qe},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:kt},{pattern:/^\x1b\[\d?J/,sub:Ke},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:Ke},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:Ke},{pattern:/^(([^\x1b\x08\r\n])+)/,sub:Jt}];function er(vt,Dt){Dt>tt&&xe||(xe=!1,ee=ee.replace(vt.pattern,vt.sub))}m(er,"process");var Wt=[],ar=ee,_t=ar.length;e:for(;_t>0;){for(var Ve=0,pt=0,lt=dt.length;pt<lt;Ve=++pt){var Tt=dt[Ve];if(er(Tt,Ve),ee.length!==_t){_t=ee.length;continue e}}if(ee.length===_t)break;Wt.push(0),_t=ee.length}return Wt}m(ue,"tokenize");function Ee(ee,pe,ve){return pe!=="text"&&(ee=ee.filter(J(X(ve))),ee.push({token:pe,data:ve,category:X(ve)})),ee}m(Ee,"updateStickyStack");var Ie=function(){function ee(pe){r(this,ee),pe=pe||{},pe.colors&&(pe.colors=Object.assign({},g.colors,pe.colors)),this.options=Object.assign({},g,pe),this.stack=[],this.stickyStack=[]}return m(ee,"Filter"),i(ee,[{key:"toHtml",value:m(function(ve){var xe=this;ve=typeof ve=="string"?[ve]:ve;var tt=this.stack,Ke=this.options,Ze=[];return this.stickyStack.forEach(function(bt){var qe=M(tt,bt.token,bt.data,Ke);qe&&Ze.push(qe)}),ue(ve.join(""),Ke,function(bt,qe){var kt=M(tt,bt,qe,Ke);kt&&Ze.push(kt),Ke.stream&&(xe.stickyStack=Ee(xe.stickyStack,bt,qe))}),tt.length&&Ze.push(j(tt)),Ze.join("")},"toHtml")}]),ee}();e.exports=Ie}}),iQ=He({"../node_modules/jsdoc-type-pratt-parser/dist/index.js"(t,e){(function(r,n){typeof t=="object"&&typeof e<"u"?n(t):typeof define=="function"&&define.amd?define(["exports"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.jtpp={}))})(t,function(r){function n(E){return E.text!==void 0&&E.text!==""?`'${E.type}' with value '${E.text}'`:`'${E.type}'`}m(n,"tokenToString");const i=class JD extends Error{constructor(D){super(`No parslet found for token: ${n(D)}`),this.token=D,Object.setPrototypeOf(this,JD.prototype)}getToken(){return this.token}};m(i,"NoParsletFoundError");let l=i;const c=class WD extends Error{constructor(D){super(`The parsing ended early. The next token was: ${n(D)}`),this.token=D,Object.setPrototypeOf(this,WD.prototype)}getToken(){return this.token}};m(c,"EarlyEndOfParseError");let s=c;const p=class ZD extends Error{constructor(D,W){let me=`Unexpected type: '${D.type}'.`;W!==void 0&&(me+=` Message: ${W}`),super(me),Object.setPrototypeOf(this,ZD.prototype)}};m(p,"UnexpectedTypeError");let g=p;function _(E){return D=>D.startsWith(E)?{type:E,text:E}:null}m(_,"makePunctuationRule");function x(E){let D=0,W;const me=E[0];let ze=!1;if(me!=="'"&&me!=='"')return null;for(;D<E.length;){if(D++,W=E[D],!ze&&W===me){D++;break}ze=!ze&&W==="\\"}if(W!==me)throw new Error("Unterminated String");return E.slice(0,D)}m(x,"getQuoted");const P=new RegExp("[$_\\p{ID_Start}]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u"),A=new RegExp("[$\\-\\p{ID_Continue}\\u200C\\u200D]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u");function M(E){let D=E[0];if(!P.test(D))return null;let W=1;do{if(D=E[W],!A.test(D))break;W++}while(W<E.length);return E.slice(0,W)}m(M,"getIdentifier");const N=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))/;function z(E){var D,W;return(W=(D=N.exec(E))===null||D===void 0?void 0:D[0])!==null&&W!==void 0?W:null}m(z,"getNumber");const j=m(E=>{const D=M(E);return D==null?null:{type:"Identifier",text:D}},"identifierRule");function $(E){return D=>{if(!D.startsWith(E))return null;const W=D[E.length];return W!==void 0&&A.test(W)?null:{type:E,text:E}}}m($,"makeKeyWordRule");const J=m(E=>{const D=x(E);return D==null?null:{type:"StringValue",text:D}},"stringValueRule"),X=m(E=>E.length>0?null:{type:"EOF",text:""},"eofRule"),re=m(E=>{const D=z(E);return D===null?null:{type:"Number",text:D}},"numberRule"),ne=[X,_("=>"),_("("),_(")"),_("{"),_("}"),_("["),_("]"),_("|"),_("&"),_("<"),_(">"),_(","),_(";"),_("*"),_("?"),_("!"),_("="),_(":"),_("..."),_("."),_("#"),_("~"),_("/"),_("@"),$("undefined"),$("null"),$("function"),$("this"),$("new"),$("module"),$("event"),$("extends"),$("external"),$("infer"),$("typeof"),$("keyof"),$("readonly"),$("import"),$("is"),$("in"),$("asserts"),re,j,J],Z=/^\s*\n\s*/,U=class K0{static create(D){const W=this.read(D);D=W.text;const me=this.read(D);return D=me.text,new K0(D,void 0,W.token,me.token)}constructor(D,W,me,ze){this.text="",this.text=D,this.previous=W,this.current=me,this.next=ze}static read(D,W=!1){W=W||Z.test(D),D=D.trim();for(const me of ne){const ze=me(D);if(ze!==null){const nt=Object.assign(Object.assign({},ze),{startOfLine:W});return D=D.slice(nt.text.length),{text:D,token:nt}}}throw new Error("Unexpected Token "+D)}advance(){const D=K0.read(this.text);return new K0(D.text,this.current,this.next,D.token)}};m(U,"Lexer");let K=U;function he(E){if(E===void 0)throw new Error("Unexpected undefined");if(E.type==="JsdocTypeKeyValue"||E.type==="JsdocTypeParameterList"||E.type==="JsdocTypeProperty"||E.type==="JsdocTypeReadonlyProperty"||E.type==="JsdocTypeObjectField"||E.type==="JsdocTypeJsdocObjectField"||E.type==="JsdocTypeIndexSignature"||E.type==="JsdocTypeMappedType"||E.type==="JsdocTypeTypeParameter")throw new g(E);return E}m(he,"assertRootResult");function ue(E){return E.type==="JsdocTypeKeyValue"?Ie(E):he(E)}m(ue,"assertPlainKeyValueOrRootResult");function Ee(E){return E.type==="JsdocTypeName"?E:Ie(E)}m(Ee,"assertPlainKeyValueOrNameResult");function Ie(E){if(E.type!=="JsdocTypeKeyValue")throw new g(E);return E}m(Ie,"assertPlainKeyValueResult");function ee(E){var D;if(E.type==="JsdocTypeVariadic"){if(((D=E.element)===null||D===void 0?void 0:D.type)==="JsdocTypeName")return E;throw new g(E)}if(E.type!=="JsdocTypeNumber"&&E.type!=="JsdocTypeName")throw new g(E);return E}m(ee,"assertNumberOrVariadicNameResult");function pe(E){if(E.type==="JsdocTypeTuple"||E.type==="JsdocTypeGeneric"&&E.meta.brackets==="square")return E;throw new g(E)}m(pe,"assertArrayOrTupleResult");function ve(E){return E.type==="JsdocTypeIndexSignature"||E.type==="JsdocTypeMappedType"}m(ve,"isSquaredProperty");var xe;(function(E){E[E.ALL=0]="ALL",E[E.PARAMETER_LIST=1]="PARAMETER_LIST",E[E.OBJECT=2]="OBJECT",E[E.KEY_VALUE=3]="KEY_VALUE",E[E.INDEX_BRACKETS=4]="INDEX_BRACKETS",E[E.UNION=5]="UNION",E[E.INTERSECTION=6]="INTERSECTION",E[E.PREFIX=7]="PREFIX",E[E.INFIX=8]="INFIX",E[E.TUPLE=9]="TUPLE",E[E.SYMBOL=10]="SYMBOL",E[E.OPTIONAL=11]="OPTIONAL",E[E.NULLABLE=12]="NULLABLE",E[E.KEY_OF_TYPE_OF=13]="KEY_OF_TYPE_OF",E[E.FUNCTION=14]="FUNCTION",E[E.ARROW=15]="ARROW",E[E.ARRAY_BRACKETS=16]="ARRAY_BRACKETS",E[E.GENERIC=17]="GENERIC",E[E.NAME_PATH=18]="NAME_PATH",E[E.PARENTHESIS=19]="PARENTHESIS",E[E.SPECIAL_TYPES=20]="SPECIAL_TYPES"})(xe||(xe={}));const tt=class{constructor(D,W,me){this.grammar=D,typeof W=="string"?this._lexer=K.create(W):this._lexer=W,this.baseParser=me}get lexer(){return this._lexer}parse(){const D=this.parseType(xe.ALL);if(this.lexer.current.type!=="EOF")throw new s(this.lexer.current);return D}parseType(D){return he(this.parseIntermediateType(D))}parseIntermediateType(D){const W=this.tryParslets(null,D);if(W===null)throw new l(this.lexer.current);return this.parseInfixIntermediateType(W,D)}parseInfixIntermediateType(D,W){let me=this.tryParslets(D,W);for(;me!==null;)D=me,me=this.tryParslets(D,W);return D}tryParslets(D,W){for(const me of this.grammar){const ze=me(this,W,D);if(ze!==null)return ze}return null}consume(D){return Array.isArray(D)||(D=[D]),D.includes(this.lexer.current.type)?(this._lexer=this.lexer.advance(),!0):!1}acceptLexerState(D){this._lexer=D.lexer}};m(tt,"Parser");let Ke=tt;function Ze(E){return E==="}"||E==="EOF"||E==="|"||E===","||E===")"||E===">"}m(Ze,"isQuestionMarkUnknownType");const bt=m((E,D,W)=>{const me=E.lexer.current.type,ze=E.lexer.next.type;return W==null&&me==="?"&&!Ze(ze)||W!=null&&me==="?"?(E.consume("?"),W==null?{type:"JsdocTypeNullable",element:E.parseType(xe.NULLABLE),meta:{position:"prefix"}}:{type:"JsdocTypeNullable",element:he(W),meta:{position:"suffix"}}):null},"nullableParslet");function qe(E){const D=m((W,me,ze)=>{const nt=W.lexer.current.type,St=W.lexer.next.type;if(ze===null){if("parsePrefix"in E&&E.accept(nt,St))return E.parsePrefix(W)}else if("parseInfix"in E&&E.precedence>me&&E.accept(nt,St))return E.parseInfix(W,ze);return null},"parslet");return Object.defineProperty(D,"name",{value:E.name}),D}m(qe,"composeParslet");const kt=qe({name:"optionalParslet",accept:m(E=>E==="=","accept"),precedence:xe.OPTIONAL,parsePrefix:m(E=>(E.consume("="),{type:"JsdocTypeOptional",element:E.parseType(xe.OPTIONAL),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:m((E,D)=>(E.consume("="),{type:"JsdocTypeOptional",element:he(D),meta:{position:"suffix"}}),"parseInfix")}),Jt=qe({name:"numberParslet",accept:m(E=>E==="Number","accept"),parsePrefix:m(E=>{const D=parseFloat(E.lexer.current.text);return E.consume("Number"),{type:"JsdocTypeNumber",value:D}},"parsePrefix")}),Pt=qe({name:"parenthesisParslet",accept:m(E=>E==="(","accept"),parsePrefix:m(E=>{if(E.consume("("),E.consume(")"))return{type:"JsdocTypeParameterList",elements:[]};const D=E.parseIntermediateType(xe.ALL);if(!E.consume(")"))throw new Error("Unterminated parenthesis");return D.type==="JsdocTypeParameterList"?D:D.type==="JsdocTypeKeyValue"?{type:"JsdocTypeParameterList",elements:[D]}:{type:"JsdocTypeParenthesis",element:he(D)}},"parsePrefix")}),dt=qe({name:"specialTypesParslet",accept:m((E,D)=>E==="?"&&Ze(D)||E==="null"||E==="undefined"||E==="*","accept"),parsePrefix:m(E=>{if(E.consume("null"))return{type:"JsdocTypeNull"};if(E.consume("undefined"))return{type:"JsdocTypeUndefined"};if(E.consume("*"))return{type:"JsdocTypeAny"};if(E.consume("?"))return{type:"JsdocTypeUnknown"};throw new Error("Unacceptable token: "+E.lexer.current.text)},"parsePrefix")}),er=qe({name:"notNullableParslet",accept:m(E=>E==="!","accept"),precedence:xe.NULLABLE,parsePrefix:m(E=>(E.consume("!"),{type:"JsdocTypeNotNullable",element:E.parseType(xe.NULLABLE),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:m((E,D)=>(E.consume("!"),{type:"JsdocTypeNotNullable",element:he(D),meta:{position:"suffix"}}),"parseInfix")});function Wt({allowTrailingComma:E}){return qe({name:"parameterListParslet",accept:m(D=>D===",","accept"),precedence:xe.PARAMETER_LIST,parseInfix:m((D,W)=>{const me=[ue(W)];D.consume(",");do try{const ze=D.parseIntermediateType(xe.PARAMETER_LIST);me.push(ue(ze))}catch(ze){if(ze instanceof l)break;throw ze}while(D.consume(","));if(me.length>0&&me.slice(0,-1).some(ze=>ze.type==="JsdocTypeVariadic"))throw new Error("Only the last parameter may be a rest parameter");return{type:"JsdocTypeParameterList",elements:me}},"parseInfix")})}m(Wt,"createParameterListParslet");const ar=qe({name:"genericParslet",accept:m((E,D)=>E==="<"||E==="."&&D==="<","accept"),precedence:xe.GENERIC,parseInfix:m((E,D)=>{const W=E.consume(".");E.consume("<");const me=[];let ze=!1;if(E.consume("infer")){ze=!0;const nt=E.parseIntermediateType(xe.SYMBOL);if(nt.type!=="JsdocTypeName")throw new g(nt,"A typescript asserts always has to have a name on the left side.");me.push(nt)}else do me.push(E.parseType(xe.PARAMETER_LIST));while(E.consume(","));if(!E.consume(">"))throw new Error("Unterminated generic parameter list");return Object.assign(Object.assign({type:"JsdocTypeGeneric",left:he(D),elements:me},ze?{infer:!0}:{}),{meta:{brackets:"angle",dot:W}})},"parseInfix")}),_t=qe({name:"unionParslet",accept:m(E=>E==="|","accept"),precedence:xe.UNION,parseInfix:m((E,D)=>{E.consume("|");const W=[];do W.push(E.parseType(xe.UNION));while(E.consume("|"));return{type:"JsdocTypeUnion",elements:[he(D),...W]}},"parseInfix")}),Ve=[bt,kt,Jt,Pt,dt,er,Wt({allowTrailingComma:!0}),ar,_t,kt];function pt({allowSquareBracketsOnAnyType:E,allowJsdocNamePaths:D,pathGrammar:W}){return m(function(ze,nt,St){if(St==null||nt>=xe.NAME_PATH)return null;const rr=ze.lexer.current.type,Jr=ze.lexer.next.type;if(!(rr==="."&&Jr!=="<"||rr==="["&&(E||St.type==="JsdocTypeName")||D&&(rr==="~"||rr==="#")))return null;let Xr,po=!1;ze.consume(".")?Xr="property":ze.consume("[")?(Xr="property-brackets",po=!0):ze.consume("~")?Xr="inner":(ze.consume("#"),Xr="instance");const sa=W!==null?new Ke(W,ze.lexer,ze):ze,$n=sa.parseIntermediateType(xe.NAME_PATH);ze.acceptLexerState(sa);let di;switch($n.type){case"JsdocTypeName":di={type:"JsdocTypeProperty",value:$n.value,meta:{quote:void 0}};break;case"JsdocTypeNumber":di={type:"JsdocTypeProperty",value:$n.value.toString(10),meta:{quote:void 0}};break;case"JsdocTypeStringValue":di={type:"JsdocTypeProperty",value:$n.value,meta:{quote:$n.meta.quote}};break;case"JsdocTypeSpecialNamePath":if($n.specialType==="event")di=$n;else throw new g($n,"Type 'JsdocTypeSpecialNamePath' is only allowed with specialType 'event'");break;default:throw new g($n,"Expecting 'JsdocTypeName', 'JsdocTypeNumber', 'JsdocStringValue' or 'JsdocTypeSpecialNamePath'")}if(po&&!ze.consume("]")){const aa=ze.lexer.current;throw new Error(`Unterminated square brackets. Next token is '${aa.type}' with text '${aa.text}'`)}return{type:"JsdocTypeNamePath",left:he(St),right:di,pathType:Xr}},"namePathParslet")}m(pt,"createNamePathParslet");function lt({allowedAdditionalTokens:E}){return qe({name:"nameParslet",accept:m(D=>D==="Identifier"||D==="this"||D==="new"||E.includes(D),"accept"),parsePrefix:m(D=>{const{type:W,text:me}=D.lexer.current;return D.consume(W),{type:"JsdocTypeName",value:me}},"parsePrefix")})}m(lt,"createNameParslet");const Tt=qe({name:"stringValueParslet",accept:m(E=>E==="StringValue","accept"),parsePrefix:m(E=>{const D=E.lexer.current.text;return E.consume("StringValue"),{type:"JsdocTypeStringValue",value:D.slice(1,-1),meta:{quote:D[0]==="'"?"single":"double"}}},"parsePrefix")});function vt({pathGrammar:E,allowedTypes:D}){return qe({name:"specialNamePathParslet",accept:m(W=>D.includes(W),"accept"),parsePrefix:m(W=>{const me=W.lexer.current.type;if(W.consume(me),!W.consume(":"))return{type:"JsdocTypeName",value:me};let ze,nt=W.lexer.current;if(W.consume("StringValue"))ze={type:"JsdocTypeSpecialNamePath",value:nt.text.slice(1,-1),specialType:me,meta:{quote:nt.text[0]==="'"?"single":"double"}};else{let Jr="";const Ar=["Identifier","@","/"];for(;Ar.some(Xr=>W.consume(Xr));)Jr+=nt.text,nt=W.lexer.current;ze={type:"JsdocTypeSpecialNamePath",value:Jr,specialType:me,meta:{quote:void 0}}}const St=new Ke(E,W.lexer,W),rr=St.parseInfixIntermediateType(ze,xe.ALL);return W.acceptLexerState(St),he(rr)},"parsePrefix")})}m(vt,"createSpecialNamePathParslet");const Dt=[lt({allowedAdditionalTokens:["external","module"]}),Tt,Jt,pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:null})],Yt=[...Dt,vt({allowedTypes:["event"],pathGrammar:Dt})];function Bt(E){let D;if(E.type==="JsdocTypeParameterList")D=E.elements;else if(E.type==="JsdocTypeParenthesis")D=[E.element];else throw new g(E);return D.map(W=>ue(W))}m(Bt,"getParameters");function xr(E){const D=Bt(E);if(D.some(W=>W.type==="JsdocTypeKeyValue"))throw new Error("No parameter should be named");return D}m(xr,"getUnnamedParameters");function $r({allowNamedParameters:E,allowNoReturnType:D,allowWithoutParenthesis:W,allowNewAsFunctionKeyword:me}){return qe({name:"functionParslet",accept:m((ze,nt)=>ze==="function"||me&&ze==="new"&&nt==="(","accept"),parsePrefix:m(ze=>{const nt=ze.consume("new");ze.consume("function");const St=ze.lexer.current.type==="(";if(!St){if(!W)throw new Error("function is missing parameter list");return{type:"JsdocTypeName",value:"function"}}let rr={type:"JsdocTypeFunction",parameters:[],arrow:!1,constructor:nt,parenthesis:St};const Jr=ze.parseIntermediateType(xe.FUNCTION);if(E===void 0)rr.parameters=xr(Jr);else{if(nt&&Jr.type==="JsdocTypeFunction"&&Jr.arrow)return rr=Jr,rr.constructor=!0,rr;rr.parameters=Bt(Jr);for(const Ar of rr.parameters)if(Ar.type==="JsdocTypeKeyValue"&&!E.includes(Ar.key))throw new Error(`only allowed named parameters are ${E.join(", ")} but got ${Ar.type}`)}if(ze.consume(":"))rr.returnType=ze.parseType(xe.PREFIX);else if(!D)throw new Error("function is missing return type");return rr},"parsePrefix")})}m($r,"createFunctionParslet");function Ir({allowPostfix:E,allowEnclosingBrackets:D}){return qe({name:"variadicParslet",accept:m(W=>W==="...","accept"),precedence:xe.PREFIX,parsePrefix:m(W=>{W.consume("...");const me=D&&W.consume("[");try{const ze=W.parseType(xe.PREFIX);if(me&&!W.consume("]"))throw new Error("Unterminated variadic type. Missing ']'");return{type:"JsdocTypeVariadic",element:he(ze),meta:{position:"prefix",squareBrackets:me}}}catch(ze){if(ze instanceof l){if(me)throw new Error("Empty square brackets for variadic are not allowed.");return{type:"JsdocTypeVariadic",meta:{position:void 0,squareBrackets:!1}}}else throw ze}},"parsePrefix"),parseInfix:E?(W,me)=>(W.consume("..."),{type:"JsdocTypeVariadic",element:he(me),meta:{position:"suffix",squareBrackets:!1}}):void 0})}m(Ir,"createVariadicParslet");const Zr=qe({name:"symbolParslet",accept:m(E=>E==="(","accept"),precedence:xe.SYMBOL,parseInfix:m((E,D)=>{if(D.type!=="JsdocTypeName")throw new Error("Symbol expects a name on the left side. (Reacting on '(')");E.consume("(");const W={type:"JsdocTypeSymbol",value:D.value};if(!E.consume(")")){const me=E.parseIntermediateType(xe.SYMBOL);if(W.element=ee(me),!E.consume(")"))throw new Error("Symbol does not end after value")}return W},"parseInfix")}),yr=qe({name:"arrayBracketsParslet",precedence:xe.ARRAY_BRACKETS,accept:m((E,D)=>E==="["&&D==="]","accept"),parseInfix:m((E,D)=>(E.consume("["),E.consume("]"),{type:"JsdocTypeGeneric",left:{type:"JsdocTypeName",value:"Array"},elements:[he(D)],meta:{brackets:"square",dot:!1}}),"parseInfix")});function ur({objectFieldGrammar:E,allowKeyTypes:D}){return qe({name:"objectParslet",accept:m(W=>W==="{","accept"),parsePrefix:m(W=>{W.consume("{");const me={type:"JsdocTypeObject",meta:{separator:"comma"},elements:[]};if(!W.consume("}")){let ze;const nt=new Ke(E,W.lexer,W);for(;;){nt.acceptLexerState(W);let St=nt.parseIntermediateType(xe.OBJECT);W.acceptLexerState(nt),St===void 0&&D&&(St=W.parseIntermediateType(xe.OBJECT));let rr=!1;if(St.type==="JsdocTypeNullable"&&(rr=!0,St=St.element),St.type==="JsdocTypeNumber"||St.type==="JsdocTypeName"||St.type==="JsdocTypeStringValue"){let Ar;St.type==="JsdocTypeStringValue"&&(Ar=St.meta.quote),me.elements.push({type:"JsdocTypeObjectField",key:St.value.toString(),right:void 0,optional:rr,readonly:!1,meta:{quote:Ar}})}else if(St.type==="JsdocTypeObjectField"||St.type==="JsdocTypeJsdocObjectField")me.elements.push(St);else throw new g(St);if(W.lexer.current.startOfLine)ze="linebreak",W.consume(",")||W.consume(";");else if(W.consume(","))ze="comma";else if(W.consume(";"))ze="semicolon";else break;if(W.lexer.current.type==="}")break}if(me.meta.separator=ze??"comma",ze==="linebreak"&&(me.meta.propertyIndent="  "),!W.consume("}"))throw new Error("Unterminated record type. Missing '}'")}return me},"parsePrefix")})}m(ur,"createObjectParslet");function lr({allowSquaredProperties:E,allowKeyTypes:D,allowReadonly:W,allowOptional:me}){return qe({name:"objectFieldParslet",precedence:xe.KEY_VALUE,accept:m(ze=>ze===":","accept"),parseInfix:m((ze,nt)=>{var St;let rr=!1,Jr=!1;me&&nt.type==="JsdocTypeNullable"&&(rr=!0,nt=nt.element),W&&nt.type==="JsdocTypeReadonlyProperty"&&(Jr=!0,nt=nt.element);const Ar=(St=ze.baseParser)!==null&&St!==void 0?St:ze;if(Ar.acceptLexerState(ze),nt.type==="JsdocTypeNumber"||nt.type==="JsdocTypeName"||nt.type==="JsdocTypeStringValue"||ve(nt)){if(ve(nt)&&!E)throw new g(nt);Ar.consume(":");let Xr;nt.type==="JsdocTypeStringValue"&&(Xr=nt.meta.quote);const po=Ar.parseType(xe.KEY_VALUE);return ze.acceptLexerState(Ar),{type:"JsdocTypeObjectField",key:ve(nt)?nt:nt.value.toString(),right:po,optional:rr,readonly:Jr,meta:{quote:Xr}}}else{if(!D)throw new g(nt);Ar.consume(":");const Xr=Ar.parseType(xe.KEY_VALUE);return ze.acceptLexerState(Ar),{type:"JsdocTypeJsdocObjectField",left:he(nt),right:Xr}}},"parseInfix")})}m(lr,"createObjectFieldParslet");function nr({allowOptional:E,allowVariadic:D}){return qe({name:"keyValueParslet",precedence:xe.KEY_VALUE,accept:m(W=>W===":","accept"),parseInfix:m((W,me)=>{let ze=!1,nt=!1;if(E&&me.type==="JsdocTypeNullable"&&(ze=!0,me=me.element),D&&me.type==="JsdocTypeVariadic"&&me.element!==void 0&&(nt=!0,me=me.element),me.type!=="JsdocTypeName")throw new g(me);W.consume(":");const St=W.parseType(xe.KEY_VALUE);return{type:"JsdocTypeKeyValue",key:me.value,right:St,optional:ze,variadic:nt}},"parseInfix")})}m(nr,"createKeyValueParslet");const mr=[...Ve,$r({allowWithoutParenthesis:!0,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),Tt,vt({allowedTypes:["module","external","event"],pathGrammar:Yt}),Ir({allowEnclosingBrackets:!0,allowPostfix:!0}),lt({allowedAdditionalTokens:["keyof"]}),Zr,yr,pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:Yt})],Yr=[...mr,ur({objectFieldGrammar:[lt({allowedAdditionalTokens:["typeof","module","in"]}),lr({allowSquaredProperties:!1,allowKeyTypes:!0,allowOptional:!1,allowReadonly:!1}),...mr],allowKeyTypes:!0}),nr({allowOptional:!0,allowVariadic:!0})],ke=qe({name:"typeOfParslet",accept:m(E=>E==="typeof","accept"),parsePrefix:m(E=>(E.consume("typeof"),{type:"JsdocTypeTypeof",element:E.parseType(xe.KEY_OF_TYPE_OF)}),"parsePrefix")}),oe=[lt({allowedAdditionalTokens:["typeof","module","keyof","event","external","in"]}),bt,kt,Tt,Jt,lr({allowSquaredProperties:!1,allowKeyTypes:!1,allowOptional:!1,allowReadonly:!1})],ae=[...Ve,ur({allowKeyTypes:!1,objectFieldGrammar:oe}),lt({allowedAdditionalTokens:["event","external","in"]}),ke,$r({allowWithoutParenthesis:!1,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),Ir({allowEnclosingBrackets:!1,allowPostfix:!1}),lt({allowedAdditionalTokens:["keyof"]}),vt({allowedTypes:["module"],pathGrammar:Yt}),pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:Yt}),nr({allowOptional:!1,allowVariadic:!1}),Zr],de=qe({name:"assertsParslet",accept:m(E=>E==="asserts","accept"),parsePrefix:m(E=>{E.consume("asserts");const D=E.parseIntermediateType(xe.SYMBOL);if(D.type!=="JsdocTypeName")throw new g(D,"A typescript asserts always has to have a name on the left side.");return E.consume("is")?{type:"JsdocTypeAsserts",left:D,right:he(E.parseIntermediateType(xe.INFIX))}:{type:"JsdocTypeAssertsPlain",element:D}},"parsePrefix")});function Te({allowQuestionMark:E}){return qe({name:"tupleParslet",accept:m(D=>D==="[","accept"),parsePrefix:m(D=>{D.consume("[");const W={type:"JsdocTypeTuple",elements:[]};if(D.consume("]"))return W;const me=D.parseIntermediateType(xe.ALL);if(me.type==="JsdocTypeParameterList"?me.elements[0].type==="JsdocTypeKeyValue"?W.elements=me.elements.map(Ie):W.elements=me.elements.map(he):me.type==="JsdocTypeKeyValue"?W.elements=[Ie(me)]:W.elements=[he(me)],!D.consume("]"))throw new Error("Unterminated '['");if(W.elements.some(ze=>ze.type==="JsdocTypeUnknown"))throw new Error("Question mark in tuple not allowed");return W},"parsePrefix")})}m(Te,"createTupleParslet");const Le=qe({name:"keyOfParslet",accept:m(E=>E==="keyof","accept"),parsePrefix:m(E=>(E.consume("keyof"),{type:"JsdocTypeKeyof",element:he(E.parseType(xe.KEY_OF_TYPE_OF))}),"parsePrefix")}),je=qe({name:"importParslet",accept:m(E=>E==="import","accept"),parsePrefix:m(E=>{if(E.consume("import"),!E.consume("("))throw new Error("Missing parenthesis after import keyword");const D=E.parseType(xe.PREFIX);if(D.type!=="JsdocTypeStringValue")throw new Error("Only string values are allowed as paths for imports");if(!E.consume(")"))throw new Error("Missing closing parenthesis after import keyword");return{type:"JsdocTypeImport",element:D}},"parsePrefix")}),Je=qe({name:"readonlyPropertyParslet",accept:m(E=>E==="readonly","accept"),parsePrefix:m(E=>(E.consume("readonly"),{type:"JsdocTypeReadonlyProperty",element:E.parseIntermediateType(xe.KEY_VALUE)}),"parsePrefix")}),Fe=qe({name:"arrowFunctionParslet",precedence:xe.ARROW,accept:m(E=>E==="=>","accept"),parseInfix:m((E,D)=>(E.consume("=>"),{type:"JsdocTypeFunction",parameters:Bt(D).map(Ee),arrow:!0,constructor:!1,parenthesis:!0,returnType:E.parseType(xe.OBJECT)}),"parseInfix")}),et=qe({name:"genericArrowFunctionParslet",accept:m(E=>E==="<","accept"),parsePrefix:m(E=>{const D=[];E.consume("<");do{let me,ze=E.parseIntermediateType(xe.SYMBOL);if(ze.type==="JsdocTypeOptional"&&(ze=ze.element,me=E.parseType(xe.SYMBOL)),ze.type!=="JsdocTypeName")throw new g(ze);let nt;E.consume("extends")&&(nt=E.parseType(xe.SYMBOL),nt.type==="JsdocTypeOptional"&&(nt=nt.element,me=E.parseType(xe.SYMBOL)));const St={type:"JsdocTypeTypeParameter",name:ze};if(nt!==void 0&&(St.constraint=nt),me!==void 0&&(St.defaultValue=me),D.push(St),E.consume(">"))break}while(E.consume(","));const W=E.parseIntermediateType(xe.SYMBOL);return W.typeParameters=D,W},"parsePrefix")}),ct=qe({name:"intersectionParslet",accept:m(E=>E==="&","accept"),precedence:xe.INTERSECTION,parseInfix:m((E,D)=>{E.consume("&");const W=[];do W.push(E.parseType(xe.INTERSECTION));while(E.consume("&"));return{type:"JsdocTypeIntersection",elements:[he(D),...W]}},"parseInfix")}),it=qe({name:"predicateParslet",precedence:xe.INFIX,accept:m(E=>E==="is","accept"),parseInfix:m((E,D)=>{if(D.type!=="JsdocTypeName")throw new g(D,"A typescript predicate always has to have a name on the left side.");return E.consume("is"),{type:"JsdocTypePredicate",left:D,right:he(E.parseIntermediateType(xe.INFIX))}},"parseInfix")}),Ot=qe({name:"objectSquareBracketPropertyParslet",accept:m(E=>E==="[","accept"),parsePrefix:m(E=>{if(E.baseParser===void 0)throw new Error("Only allowed inside object grammar");E.consume("[");const D=E.lexer.current.text;E.consume("Identifier");let W;if(E.consume(":")){const me=E.baseParser;me.acceptLexerState(E),W={type:"JsdocTypeIndexSignature",key:D,right:me.parseType(xe.INDEX_BRACKETS)},E.acceptLexerState(me)}else if(E.consume("in")){const me=E.baseParser;me.acceptLexerState(E),W={type:"JsdocTypeMappedType",key:D,right:me.parseType(xe.ARRAY_BRACKETS)},E.acceptLexerState(me)}else throw new Error("Missing ':' or 'in' inside square bracketed property.");if(!E.consume("]"))throw new Error("Unterminated square brackets");return W},"parsePrefix")}),$e=qe({name:"readonlyArrayParslet",accept:m(E=>E==="readonly","accept"),parsePrefix:m(E=>(E.consume("readonly"),{type:"JsdocTypeReadonlyArray",element:pe(E.parseIntermediateType(xe.ALL))}),"parsePrefix")}),Xt=qe({name:"conditionalParslet",precedence:xe.INFIX,accept:m(E=>E==="extends","accept"),parseInfix:m((E,D)=>{E.consume("extends");const W=E.parseType(xe.KEY_OF_TYPE_OF).element,me=E.parseType(xe.INFIX);return E.consume(":"),{type:"JsdocTypeConditional",checksType:he(D),extendsType:W,trueType:me,falseType:E.parseType(xe.INFIX)}},"parseInfix")}),cr=[Je,lt({allowedAdditionalTokens:["typeof","module","keyof","event","external","in"]}),bt,kt,Tt,Jt,lr({allowSquaredProperties:!0,allowKeyTypes:!1,allowOptional:!0,allowReadonly:!0}),Ot],Nt=[...Ve,ur({allowKeyTypes:!1,objectFieldGrammar:cr}),$e,ke,Le,je,Tt,$r({allowWithoutParenthesis:!0,allowNoReturnType:!1,allowNamedParameters:["this","new","args"],allowNewAsFunctionKeyword:!0}),Te({allowQuestionMark:!1}),Ir({allowEnclosingBrackets:!1,allowPostfix:!1}),de,Xt,lt({allowedAdditionalTokens:["event","external","in"]}),vt({allowedTypes:["module"],pathGrammar:Yt}),yr,Fe,et,pt({allowSquareBracketsOnAnyType:!0,allowJsdocNamePaths:!1,pathGrammar:Yt}),ct,it,nr({allowVariadic:!0,allowOptional:!0})];function Ht(E,D){switch(D){case"closure":return new Ke(ae,E).parse();case"jsdoc":return new Ke(Yr,E).parse();case"typescript":return new Ke(Nt,E).parse()}}m(Ht,"parse");function _r(E,D=["typescript","closure","jsdoc"]){let W;for(const me of D)try{return Ht(E,me)}catch(ze){W=ze}throw W}m(_r,"tryParse");function ut(E,D){const W=E[D.type];if(W===void 0)throw new Error(`In this set of transform rules exists no rule for type ${D.type}.`);return W(D,me=>ut(E,me))}m(ut,"transform");function Lt(E){throw new Error("This transform is not available. Are you trying the correct parsing mode?")}m(Lt,"notAvailableTransform");function Cr(E){const D={params:[]};for(const W of E.parameters)W.type==="JsdocTypeKeyValue"?W.key==="this"?D.this=W.right:W.key==="new"?D.new=W.right:D.params.push(W):D.params.push(W);return D}m(Cr,"extractSpecialParams");function Kt(E,D,W){return E==="prefix"?W+D:D+W}m(Kt,"applyPosition");function jt(E,D){switch(D){case"double":return`"${E}"`;case"single":return`'${E}'`;case void 0:return E}}m(jt,"quote");function Pr(){return{JsdocTypeParenthesis:m((E,D)=>`(${E.element!==void 0?D(E.element):""})`,"JsdocTypeParenthesis"),JsdocTypeKeyof:m((E,D)=>`keyof ${D(E.element)}`,"JsdocTypeKeyof"),JsdocTypeFunction:m((E,D)=>{var W;if(E.arrow){if(E.returnType===void 0)throw new Error("Arrow function needs a return type.");let me=`${E.typeParameters!==void 0?`<${(W=E.typeParameters.map(D).join(", "))!==null&&W!==void 0?W:""}>`:""}(${E.parameters.map(D).join(", ")}) => ${D(E.returnType)}`;return E.constructor&&(me="new "+me),me}else{let me=E.constructor?"new":"function";return E.parenthesis&&(me+=`(${E.parameters.map(D).join(", ")})`,E.returnType!==void 0&&(me+=`: ${D(E.returnType)}`)),me}},"JsdocTypeFunction"),JsdocTypeName:m(E=>E.value,"JsdocTypeName"),JsdocTypeTuple:m((E,D)=>`[${E.elements.map(D).join(", ")}]`,"JsdocTypeTuple"),JsdocTypeVariadic:m((E,D)=>E.meta.position===void 0?"...":Kt(E.meta.position,D(E.element),"..."),"JsdocTypeVariadic"),JsdocTypeNamePath:m((E,D)=>{const W=D(E.left),me=D(E.right);switch(E.pathType){case"inner":return`${W}~${me}`;case"instance":return`${W}#${me}`;case"property":return`${W}.${me}`;case"property-brackets":return`${W}[${me}]`}},"JsdocTypeNamePath"),JsdocTypeStringValue:m(E=>jt(E.value,E.meta.quote),"JsdocTypeStringValue"),JsdocTypeAny:m(()=>"*","JsdocTypeAny"),JsdocTypeGeneric:m((E,D)=>{if(E.meta.brackets==="square"){const W=E.elements[0],me=D(W);return W.type==="JsdocTypeUnion"||W.type==="JsdocTypeIntersection"?`(${me})[]`:`${me}[]`}else return`${D(E.left)}${E.meta.dot?".":""}<${E.infer===!0?"infer ":""}${E.elements.map(D).join(", ")}>`},"JsdocTypeGeneric"),JsdocTypeImport:m((E,D)=>`import(${D(E.element)})`,"JsdocTypeImport"),JsdocTypeObjectField:m((E,D)=>{let W="";return E.readonly&&(W+="readonly "),typeof E.key=="string"?W+=jt(E.key,E.meta.quote):W+=D(E.key),E.optional&&(W+="?"),E.right===void 0?W:W+`: ${D(E.right)}`},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:m((E,D)=>`${D(E.left)}: ${D(E.right)}`,"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:m((E,D)=>{let W=E.key;return E.optional&&(W+="?"),E.variadic&&(W="..."+W),E.right===void 0?W:W+`: ${D(E.right)}`},"JsdocTypeKeyValue"),JsdocTypeSpecialNamePath:m(E=>`${E.specialType}:${jt(E.value,E.meta.quote)}`,"JsdocTypeSpecialNamePath"),JsdocTypeNotNullable:m((E,D)=>Kt(E.meta.position,D(E.element),"!"),"JsdocTypeNotNullable"),JsdocTypeNull:m(()=>"null","JsdocTypeNull"),JsdocTypeNullable:m((E,D)=>Kt(E.meta.position,D(E.element),"?"),"JsdocTypeNullable"),JsdocTypeNumber:m(E=>E.value.toString(),"JsdocTypeNumber"),JsdocTypeObject:m((E,D)=>{var W,me;return`{${(E.meta.separator==="linebreak"&&E.elements.length>1?`
`+((W=E.meta.propertyIndent)!==null&&W!==void 0?W:""):"")+E.elements.map(D).join(E.meta.separator==="comma"?", ":E.meta.separator==="linebreak"?`
`+((me=E.meta.propertyIndent)!==null&&me!==void 0?me:""):"; ")+(E.meta.separator==="linebreak"&&E.elements.length>1?`
`:"")}}`},"JsdocTypeObject"),JsdocTypeOptional:m((E,D)=>Kt(E.meta.position,D(E.element),"="),"JsdocTypeOptional"),JsdocTypeSymbol:m((E,D)=>`${E.value}(${E.element!==void 0?D(E.element):""})`,"JsdocTypeSymbol"),JsdocTypeTypeof:m((E,D)=>`typeof ${D(E.element)}`,"JsdocTypeTypeof"),JsdocTypeUndefined:m(()=>"undefined","JsdocTypeUndefined"),JsdocTypeUnion:m((E,D)=>E.elements.map(D).join(" | "),"JsdocTypeUnion"),JsdocTypeUnknown:m(()=>"?","JsdocTypeUnknown"),JsdocTypeIntersection:m((E,D)=>E.elements.map(D).join(" & "),"JsdocTypeIntersection"),JsdocTypeProperty:m(E=>jt(E.value,E.meta.quote),"JsdocTypeProperty"),JsdocTypePredicate:m((E,D)=>`${D(E.left)} is ${D(E.right)}`,"JsdocTypePredicate"),JsdocTypeIndexSignature:m((E,D)=>`[${E.key}: ${D(E.right)}]`,"JsdocTypeIndexSignature"),JsdocTypeMappedType:m((E,D)=>`[${E.key} in ${D(E.right)}]`,"JsdocTypeMappedType"),JsdocTypeAsserts:m((E,D)=>`asserts ${D(E.left)} is ${D(E.right)}`,"JsdocTypeAsserts"),JsdocTypeReadonlyArray:m((E,D)=>`readonly ${D(E.element)}`,"JsdocTypeReadonlyArray"),JsdocTypeAssertsPlain:m((E,D)=>`asserts ${D(E.element)}`,"JsdocTypeAssertsPlain"),JsdocTypeConditional:m((E,D)=>`${D(E.checksType)} extends ${D(E.extendsType)} ? ${D(E.trueType)} : ${D(E.falseType)}`,"JsdocTypeConditional"),JsdocTypeTypeParameter:m((E,D)=>`${D(E.name)}${E.constraint!==void 0?` extends ${D(E.constraint)}`:""}${E.defaultValue!==void 0?` = ${D(E.defaultValue)}`:""}`,"JsdocTypeTypeParameter")}}m(Pr,"stringifyRules");const yt=Pr();function In(E){return ut(yt,E)}m(In,"stringify");const vn=["null","true","false","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];function mn(E){const D={type:"NameExpression",name:E};return vn.includes(E)&&(D.reservedWord=!0),D}m(mn,"makeName");const hs={JsdocTypeOptional:m((E,D)=>{const W=D(E.element);return W.optional=!0,W},"JsdocTypeOptional"),JsdocTypeNullable:m((E,D)=>{const W=D(E.element);return W.nullable=!0,W},"JsdocTypeNullable"),JsdocTypeNotNullable:m((E,D)=>{const W=D(E.element);return W.nullable=!1,W},"JsdocTypeNotNullable"),JsdocTypeVariadic:m((E,D)=>{if(E.element===void 0)throw new Error("dots without value are not allowed in catharsis mode");const W=D(E.element);return W.repeatable=!0,W},"JsdocTypeVariadic"),JsdocTypeAny:m(()=>({type:"AllLiteral"}),"JsdocTypeAny"),JsdocTypeNull:m(()=>({type:"NullLiteral"}),"JsdocTypeNull"),JsdocTypeStringValue:m(E=>mn(jt(E.value,E.meta.quote)),"JsdocTypeStringValue"),JsdocTypeUndefined:m(()=>({type:"UndefinedLiteral"}),"JsdocTypeUndefined"),JsdocTypeUnknown:m(()=>({type:"UnknownLiteral"}),"JsdocTypeUnknown"),JsdocTypeFunction:m((E,D)=>{const W=Cr(E),me={type:"FunctionType",params:W.params.map(D)};return W.this!==void 0&&(me.this=D(W.this)),W.new!==void 0&&(me.new=D(W.new)),E.returnType!==void 0&&(me.result=D(E.returnType)),me},"JsdocTypeFunction"),JsdocTypeGeneric:m((E,D)=>({type:"TypeApplication",applications:E.elements.map(W=>D(W)),expression:D(E.left)}),"JsdocTypeGeneric"),JsdocTypeSpecialNamePath:m(E=>mn(E.specialType+":"+jt(E.value,E.meta.quote)),"JsdocTypeSpecialNamePath"),JsdocTypeName:m(E=>E.value!=="function"?mn(E.value):{type:"FunctionType",params:[]},"JsdocTypeName"),JsdocTypeNumber:m(E=>mn(E.value.toString()),"JsdocTypeNumber"),JsdocTypeObject:m((E,D)=>{const W={type:"RecordType",fields:[]};for(const me of E.elements)me.type!=="JsdocTypeObjectField"&&me.type!=="JsdocTypeJsdocObjectField"?W.fields.push({type:"FieldType",key:D(me),value:void 0}):W.fields.push(D(me));return W},"JsdocTypeObject"),JsdocTypeObjectField:m((E,D)=>{if(typeof E.key!="string")throw new Error("Index signatures and mapped types are not supported");return{type:"FieldType",key:mn(jt(E.key,E.meta.quote)),value:E.right===void 0?void 0:D(E.right)}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:m((E,D)=>({type:"FieldType",key:D(E.left),value:D(E.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeUnion:m((E,D)=>({type:"TypeUnion",elements:E.elements.map(W=>D(W))}),"JsdocTypeUnion"),JsdocTypeKeyValue:m((E,D)=>({type:"FieldType",key:mn(E.key),value:E.right===void 0?void 0:D(E.right)}),"JsdocTypeKeyValue"),JsdocTypeNamePath:m((E,D)=>{const W=D(E.left);let me;E.right.type==="JsdocTypeSpecialNamePath"?me=D(E.right).name:me=jt(E.right.value,E.right.meta.quote);const ze=E.pathType==="inner"?"~":E.pathType==="instance"?"#":".";return mn(`${W.name}${ze}${me}`)},"JsdocTypeNamePath"),JsdocTypeSymbol:m(E=>{let D="",W=E.element,me=!1;return W?.type==="JsdocTypeVariadic"&&(W.meta.position==="prefix"?D="...":me=!0,W=W.element),W?.type==="JsdocTypeName"?D+=W.value:W?.type==="JsdocTypeNumber"&&(D+=W.value.toString()),me&&(D+="..."),mn(`${E.value}(${D})`)},"JsdocTypeSymbol"),JsdocTypeParenthesis:m((E,D)=>D(he(E.element)),"JsdocTypeParenthesis"),JsdocTypeMappedType:Lt,JsdocTypeIndexSignature:Lt,JsdocTypeImport:Lt,JsdocTypeKeyof:Lt,JsdocTypeTuple:Lt,JsdocTypeTypeof:Lt,JsdocTypeIntersection:Lt,JsdocTypeProperty:Lt,JsdocTypePredicate:Lt,JsdocTypeAsserts:Lt,JsdocTypeReadonlyArray:Lt,JsdocTypeAssertsPlain:Lt,JsdocTypeConditional:Lt,JsdocTypeTypeParameter:Lt};function Ct(E){return ut(hs,E)}m(Ct,"catharsisTransform");function tr(E){switch(E){case void 0:return"none";case"single":return"single";case"double":return"double"}}m(tr,"getQuoteStyle");function gr(E){switch(E){case"inner":return"INNER_MEMBER";case"instance":return"INSTANCE_MEMBER";case"property":return"MEMBER";case"property-brackets":return"MEMBER"}}m(gr,"getMemberType");function xn(E,D){return D.length===2?{type:E,left:D[0],right:D[1]}:{type:E,left:D[0],right:xn(E,D.slice(1))}}m(xn,"nestResults");const Lo={JsdocTypeOptional:m((E,D)=>({type:"OPTIONAL",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_EQUAL_SIGN":"SUFFIX_EQUALS_SIGN"}}),"JsdocTypeOptional"),JsdocTypeNullable:m((E,D)=>({type:"NULLABLE",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_QUESTION_MARK":"SUFFIX_QUESTION_MARK"}}),"JsdocTypeNullable"),JsdocTypeNotNullable:m((E,D)=>({type:"NOT_NULLABLE",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_BANG":"SUFFIX_BANG"}}),"JsdocTypeNotNullable"),JsdocTypeVariadic:m((E,D)=>{const W={type:"VARIADIC",meta:{syntax:E.meta.position==="prefix"?"PREFIX_DOTS":E.meta.position==="suffix"?"SUFFIX_DOTS":"ONLY_DOTS"}};return E.element!==void 0&&(W.value=D(E.element)),W},"JsdocTypeVariadic"),JsdocTypeName:m(E=>({type:"NAME",name:E.value}),"JsdocTypeName"),JsdocTypeTypeof:m((E,D)=>({type:"TYPE_QUERY",name:D(E.element)}),"JsdocTypeTypeof"),JsdocTypeTuple:m((E,D)=>({type:"TUPLE",entries:E.elements.map(D)}),"JsdocTypeTuple"),JsdocTypeKeyof:m((E,D)=>({type:"KEY_QUERY",value:D(E.element)}),"JsdocTypeKeyof"),JsdocTypeImport:m(E=>({type:"IMPORT",path:{type:"STRING_VALUE",quoteStyle:tr(E.element.meta.quote),string:E.element.value}}),"JsdocTypeImport"),JsdocTypeUndefined:m(()=>({type:"NAME",name:"undefined"}),"JsdocTypeUndefined"),JsdocTypeAny:m(()=>({type:"ANY"}),"JsdocTypeAny"),JsdocTypeFunction:m((E,D)=>{const W=Cr(E),me={type:E.arrow?"ARROW":"FUNCTION",params:W.params.map(ze=>{if(ze.type==="JsdocTypeKeyValue"){if(ze.right===void 0)throw new Error("Function parameter without ':' is not expected to be 'KEY_VALUE'");return{type:"NAMED_PARAMETER",name:ze.key,typeName:D(ze.right)}}else return D(ze)}),new:null,returns:null};return W.this!==void 0?me.this=D(W.this):E.arrow||(me.this=null),W.new!==void 0&&(me.new=D(W.new)),E.returnType!==void 0&&(me.returns=D(E.returnType)),me},"JsdocTypeFunction"),JsdocTypeGeneric:m((E,D)=>{const W={type:"GENERIC",subject:D(E.left),objects:E.elements.map(D),meta:{syntax:E.meta.brackets==="square"?"SQUARE_BRACKET":E.meta.dot?"ANGLE_BRACKET_WITH_DOT":"ANGLE_BRACKET"}};return E.meta.brackets==="square"&&E.elements[0].type==="JsdocTypeFunction"&&!E.elements[0].parenthesis&&(W.objects[0]={type:"NAME",name:"function"}),W},"JsdocTypeGeneric"),JsdocTypeObjectField:m((E,D)=>{if(typeof E.key!="string")throw new Error("Index signatures and mapped types are not supported");if(E.right===void 0)return{type:"RECORD_ENTRY",key:E.key,quoteStyle:tr(E.meta.quote),value:null,readonly:!1};let W=D(E.right);return E.optional&&(W={type:"OPTIONAL",value:W,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:E.key.toString(),quoteStyle:tr(E.meta.quote),value:W,readonly:!1}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:m(()=>{throw new Error("Keys may not be typed in jsdoctypeparser.")},"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:m((E,D)=>{if(E.right===void 0)return{type:"RECORD_ENTRY",key:E.key,quoteStyle:"none",value:null,readonly:!1};let W=D(E.right);return E.optional&&(W={type:"OPTIONAL",value:W,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:E.key,quoteStyle:"none",value:W,readonly:!1}},"JsdocTypeKeyValue"),JsdocTypeObject:m((E,D)=>{const W=[];for(const me of E.elements)(me.type==="JsdocTypeObjectField"||me.type==="JsdocTypeJsdocObjectField")&&W.push(D(me));return{type:"RECORD",entries:W}},"JsdocTypeObject"),JsdocTypeSpecialNamePath:m(E=>{if(E.specialType!=="module")throw new Error(`jsdoctypeparser does not support type ${E.specialType} at this point.`);return{type:"MODULE",value:{type:"FILE_PATH",quoteStyle:tr(E.meta.quote),path:E.value}}},"JsdocTypeSpecialNamePath"),JsdocTypeNamePath:m((E,D)=>{let W=!1,me,ze;E.right.type==="JsdocTypeSpecialNamePath"&&E.right.specialType==="event"?(W=!0,me=E.right.value,ze=tr(E.right.meta.quote)):(me=E.right.value,ze=tr(E.right.meta.quote));const nt={type:gr(E.pathType),owner:D(E.left),name:me,quoteStyle:ze,hasEventPrefix:W};if(nt.owner.type==="MODULE"){const St=nt.owner;return nt.owner=nt.owner.value,St.value=nt,St}else return nt},"JsdocTypeNamePath"),JsdocTypeUnion:m((E,D)=>xn("UNION",E.elements.map(D)),"JsdocTypeUnion"),JsdocTypeParenthesis:m((E,D)=>({type:"PARENTHESIS",value:D(he(E.element))}),"JsdocTypeParenthesis"),JsdocTypeNull:m(()=>({type:"NAME",name:"null"}),"JsdocTypeNull"),JsdocTypeUnknown:m(()=>({type:"UNKNOWN"}),"JsdocTypeUnknown"),JsdocTypeStringValue:m(E=>({type:"STRING_VALUE",quoteStyle:tr(E.meta.quote),string:E.value}),"JsdocTypeStringValue"),JsdocTypeIntersection:m((E,D)=>xn("INTERSECTION",E.elements.map(D)),"JsdocTypeIntersection"),JsdocTypeNumber:m(E=>({type:"NUMBER_VALUE",number:E.value.toString()}),"JsdocTypeNumber"),JsdocTypeSymbol:Lt,JsdocTypeProperty:Lt,JsdocTypePredicate:Lt,JsdocTypeMappedType:Lt,JsdocTypeIndexSignature:Lt,JsdocTypeAsserts:Lt,JsdocTypeReadonlyArray:Lt,JsdocTypeAssertsPlain:Lt,JsdocTypeConditional:Lt,JsdocTypeTypeParameter:Lt};function to(E){return ut(Lo,E)}m(to,"jtpTransform");function hr(){return{JsdocTypeIntersection:m((E,D)=>({type:"JsdocTypeIntersection",elements:E.elements.map(D)}),"JsdocTypeIntersection"),JsdocTypeGeneric:m((E,D)=>({type:"JsdocTypeGeneric",left:D(E.left),elements:E.elements.map(D),meta:{dot:E.meta.dot,brackets:E.meta.brackets}}),"JsdocTypeGeneric"),JsdocTypeNullable:m(E=>E,"JsdocTypeNullable"),JsdocTypeUnion:m((E,D)=>({type:"JsdocTypeUnion",elements:E.elements.map(D)}),"JsdocTypeUnion"),JsdocTypeUnknown:m(E=>E,"JsdocTypeUnknown"),JsdocTypeUndefined:m(E=>E,"JsdocTypeUndefined"),JsdocTypeTypeof:m((E,D)=>({type:"JsdocTypeTypeof",element:D(E.element)}),"JsdocTypeTypeof"),JsdocTypeSymbol:m((E,D)=>{const W={type:"JsdocTypeSymbol",value:E.value};return E.element!==void 0&&(W.element=D(E.element)),W},"JsdocTypeSymbol"),JsdocTypeOptional:m((E,D)=>({type:"JsdocTypeOptional",element:D(E.element),meta:{position:E.meta.position}}),"JsdocTypeOptional"),JsdocTypeObject:m((E,D)=>({type:"JsdocTypeObject",meta:{separator:"comma"},elements:E.elements.map(D)}),"JsdocTypeObject"),JsdocTypeNumber:m(E=>E,"JsdocTypeNumber"),JsdocTypeNull:m(E=>E,"JsdocTypeNull"),JsdocTypeNotNullable:m((E,D)=>({type:"JsdocTypeNotNullable",element:D(E.element),meta:{position:E.meta.position}}),"JsdocTypeNotNullable"),JsdocTypeSpecialNamePath:m(E=>E,"JsdocTypeSpecialNamePath"),JsdocTypeObjectField:m((E,D)=>({type:"JsdocTypeObjectField",key:E.key,right:E.right===void 0?void 0:D(E.right),optional:E.optional,readonly:E.readonly,meta:E.meta}),"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:m((E,D)=>({type:"JsdocTypeJsdocObjectField",left:D(E.left),right:D(E.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:m((E,D)=>({type:"JsdocTypeKeyValue",key:E.key,right:E.right===void 0?void 0:D(E.right),optional:E.optional,variadic:E.variadic}),"JsdocTypeKeyValue"),JsdocTypeImport:m((E,D)=>({type:"JsdocTypeImport",element:D(E.element)}),"JsdocTypeImport"),JsdocTypeAny:m(E=>E,"JsdocTypeAny"),JsdocTypeStringValue:m(E=>E,"JsdocTypeStringValue"),JsdocTypeNamePath:m(E=>E,"JsdocTypeNamePath"),JsdocTypeVariadic:m((E,D)=>{const W={type:"JsdocTypeVariadic",meta:{position:E.meta.position,squareBrackets:E.meta.squareBrackets}};return E.element!==void 0&&(W.element=D(E.element)),W},"JsdocTypeVariadic"),JsdocTypeTuple:m((E,D)=>({type:"JsdocTypeTuple",elements:E.elements.map(D)}),"JsdocTypeTuple"),JsdocTypeName:m(E=>E,"JsdocTypeName"),JsdocTypeFunction:m((E,D)=>{const W={type:"JsdocTypeFunction",arrow:E.arrow,parameters:E.parameters.map(D),constructor:E.constructor,parenthesis:E.parenthesis};return E.returnType!==void 0&&(W.returnType=D(E.returnType)),W},"JsdocTypeFunction"),JsdocTypeKeyof:m((E,D)=>({type:"JsdocTypeKeyof",element:D(E.element)}),"JsdocTypeKeyof"),JsdocTypeParenthesis:m((E,D)=>({type:"JsdocTypeParenthesis",element:D(E.element)}),"JsdocTypeParenthesis"),JsdocTypeProperty:m(E=>E,"JsdocTypeProperty"),JsdocTypePredicate:m((E,D)=>({type:"JsdocTypePredicate",left:D(E.left),right:D(E.right)}),"JsdocTypePredicate"),JsdocTypeIndexSignature:m((E,D)=>({type:"JsdocTypeIndexSignature",key:E.key,right:D(E.right)}),"JsdocTypeIndexSignature"),JsdocTypeMappedType:m((E,D)=>({type:"JsdocTypeMappedType",key:E.key,right:D(E.right)}),"JsdocTypeMappedType"),JsdocTypeAsserts:m((E,D)=>({type:"JsdocTypeAsserts",left:D(E.left),right:D(E.right)}),"JsdocTypeAsserts"),JsdocTypeReadonlyArray:m((E,D)=>({type:"JsdocTypeReadonlyArray",element:D(E.element)}),"JsdocTypeReadonlyArray"),JsdocTypeAssertsPlain:m((E,D)=>({type:"JsdocTypeAssertsPlain",element:D(E.element)}),"JsdocTypeAssertsPlain"),JsdocTypeConditional:m((E,D)=>({type:"JsdocTypeConditional",checksType:D(E.checksType),extendsType:D(E.extendsType),trueType:D(E.trueType),falseType:D(E.falseType)}),"JsdocTypeConditional"),JsdocTypeTypeParameter:m((E,D)=>({type:"JsdocTypeTypeParameter",name:D(E.name),constraint:E.constraint!==void 0?D(E.constraint):void 0,defaultValue:E.defaultValue!==void 0?D(E.defaultValue):void 0}),"JsdocTypeTypeParameter")}}m(hr,"identityTransformRules");const ds={JsdocTypeAny:[],JsdocTypeFunction:["parameters","returnType"],JsdocTypeGeneric:["left","elements"],JsdocTypeImport:[],JsdocTypeIndexSignature:["right"],JsdocTypeIntersection:["elements"],JsdocTypeKeyof:["element"],JsdocTypeKeyValue:["right"],JsdocTypeMappedType:["right"],JsdocTypeName:[],JsdocTypeNamePath:["left","right"],JsdocTypeNotNullable:["element"],JsdocTypeNull:[],JsdocTypeNullable:["element"],JsdocTypeNumber:[],JsdocTypeObject:["elements"],JsdocTypeObjectField:["right"],JsdocTypeJsdocObjectField:["left","right"],JsdocTypeOptional:["element"],JsdocTypeParenthesis:["element"],JsdocTypeSpecialNamePath:[],JsdocTypeStringValue:[],JsdocTypeSymbol:["element"],JsdocTypeTuple:["elements"],JsdocTypeTypeof:["element"],JsdocTypeUndefined:[],JsdocTypeUnion:["elements"],JsdocTypeUnknown:[],JsdocTypeVariadic:["element"],JsdocTypeProperty:[],JsdocTypePredicate:["left","right"],JsdocTypeAsserts:["left","right"],JsdocTypeReadonlyArray:["element"],JsdocTypeAssertsPlain:["element"],JsdocTypeConditional:["checksType","extendsType","trueType","falseType"],JsdocTypeTypeParameter:["name","constraint","defaultValue"]};function hi(E,D,W,me,ze){me?.(E,D,W);const nt=ds[E.type];for(const St of nt){const rr=E[St];if(rr!==void 0)if(Array.isArray(rr))for(const Jr of rr)hi(Jr,E,St,me,ze);else hi(rr,E,St,me,ze)}ze?.(E,D,W)}m(hi,"_traverse");function ps(E,D,W){hi(E,void 0,void 0,D,W)}m(ps,"traverse"),r.catharsisTransform=Ct,r.identityTransformRules=hr,r.jtpTransform=to,r.parse=Ht,r.stringify=In,r.stringifyRules=Pr,r.transform=ut,r.traverse=ps,r.tryParse=_r,r.visitorKeys=ds})}}),oQ=He({"../node_modules/browser-dtector/browser-dtector.umd.min.js"(t,e){(function(r,n){typeof t=="object"&&typeof e<"u"?e.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).BrowserDetector=n()})(t,function(){function r(p,g){for(var _=0;_<g.length;_++){var x=g[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,(P=x.key,A=void 0,typeof(A=function(M,N){if(typeof M!="object"||M===null)return M;var z=M[Symbol.toPrimitive];if(z!==void 0){var j=z.call(M,N);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(M)}(P,"string"))=="symbol"?A:String(A)),x)}var P,A}m(r,"e");var n={chrome:"Google Chrome",brave:"Brave",crios:"Google Chrome",edge:"Microsoft Edge",edg:"Microsoft Edge",edgios:"Microsoft Edge",fennec:"Mozilla Firefox",jsdom:"JsDOM",mozilla:"Mozilla Firefox",fxios:"Mozilla Firefox",msie:"Microsoft Internet Explorer",opera:"Opera",opios:"Opera",opr:"Opera",opt:"Opera",rv:"Microsoft Internet Explorer",safari:"Safari",samsungbrowser:"Samsung Browser",electron:"Electron"},i={android:"Android",androidTablet:"Android Tablet",cros:"Chrome OS",fennec:"Android Tablet",ipad:"IPad",iphone:"IPhone",jsdom:"JsDOM",linux:"Linux",mac:"Macintosh",tablet:"Android Tablet",win:"Windows","windows phone":"Windows Phone",xbox:"Microsoft Xbox"},l=m(function(p){var g=new RegExp("^-?\\d+(?:.\\d{0,".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,"})?")),_=Number(p).toString().match(g);return _?_[0]:null},"n"),c=m(function(){return typeof window<"u"?window.navigator:null},"i"),s=function(){function p(P){var A;(function(M,N){if(!(M instanceof N))throw new TypeError("Cannot call a class as a function")})(this,p),this.userAgent=P||((A=c())===null||A===void 0?void 0:A.userAgent)||null}m(p,"t");var g,_,x;return g=p,_=[{key:"parseUserAgent",value:m(function(P){var A,M,N,z={},j=P||this.userAgent||"",$=j.toLowerCase().replace(/\s\s+/g," "),J=/(edge)\/([\w.]+)/.exec($)||/(edg)[/]([\w.]+)/.exec($)||/(opr)[/]([\w.]+)/.exec($)||/(opt)[/]([\w.]+)/.exec($)||/(fxios)[/]([\w.]+)/.exec($)||/(edgios)[/]([\w.]+)/.exec($)||/(jsdom)[/]([\w.]+)/.exec($)||/(samsungbrowser)[/]([\w.]+)/.exec($)||/(electron)[/]([\w.]+)/.exec($)||/(chrome)[/]([\w.]+)/.exec($)||/(crios)[/]([\w.]+)/.exec($)||/(opios)[/]([\w.]+)/.exec($)||/(version)(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec($)||/(webkit)[/]([\w.]+).*(version)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec($)||/(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec($)||/(webkit)[/]([\w.]+)/.exec($)||/(opera)(?:.*version|)[/]([\w.]+)/.exec($)||/(msie) ([\w.]+)/.exec($)||/(fennec)[/]([\w.]+)/.exec($)||$.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec($)||$.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec($)||[],X=/(ipad)/.exec($)||/(ipod)/.exec($)||/(iphone)/.exec($)||/(jsdom)/.exec($)||/(windows phone)/.exec($)||/(xbox)/.exec($)||/(win)/.exec($)||/(tablet)/.exec($)||/(android)/.test($)&&/(mobile)/.test($)===!1&&["androidTablet"]||/(android)/.exec($)||/(mac)/.exec($)||/(linux)/.exec($)||/(cros)/.exec($)||[],re=J[5]||J[3]||J[1]||null,ne=X[0]||null,Z=J[4]||J[2]||null,U=c();re==="chrome"&&typeof(U==null||(A=U.brave)===null||A===void 0?void 0:A.isBrave)=="function"&&(re="brave"),re&&(z[re]=!0),ne&&(z[ne]=!0);var K=!!(z.tablet||z.android||z.androidTablet),he=!!(z.ipad||z.tablet||z.androidTablet),ue=!!(z.android||z.androidTablet||z.tablet||z.ipad||z.ipod||z.iphone||z["windows phone"]),Ee=!!(z.cros||z.mac||z.linux||z.win),Ie=!!(z.brave||z.chrome||z.crios||z.opr||z.safari||z.edg||z.electron),ee=!!(z.msie||z.rv);return{name:(M=n[re])!==null&&M!==void 0?M:null,platform:(N=i[ne])!==null&&N!==void 0?N:null,userAgent:j,version:Z,shortVersion:Z?l(parseFloat(Z),2):null,isAndroid:K,isTablet:he,isMobile:ue,isDesktop:Ee,isWebkit:Ie,isIE:ee}},"value")},{key:"getBrowserInfo",value:m(function(){var P=this.parseUserAgent();return{name:P.name,platform:P.platform,userAgent:P.userAgent,version:P.version,shortVersion:P.shortVersion}},"value")}],x=[{key:"VERSION",get:m(function(){return"3.4.0"},"get")}],_&&r(g.prototype,_),x&&r(g,x),Object.defineProperty(g,"prototype",{writable:!1}),p}();return s})}}),SC={};ko(SC,{ARGTYPES_INFO_REQUEST:()=>gN,ARGTYPES_INFO_RESPONSE:()=>BT,CHANNEL_CREATED:()=>aQ,CHANNEL_WS_DISCONNECT:()=>KD,CONFIG_ERROR:()=>YD,CREATE_NEW_STORYFILE_REQUEST:()=>lQ,CREATE_NEW_STORYFILE_RESPONSE:()=>cQ,CURRENT_STORY_WAS_SET:()=>FT,DOCS_PREPARED:()=>XD,DOCS_RENDERED:()=>PC,FILE_COMPONENT_SEARCH_REQUEST:()=>uQ,FILE_COMPONENT_SEARCH_RESPONSE:()=>hQ,FORCE_REMOUNT:()=>bb,FORCE_RE_RENDER:()=>AC,GLOBALS_UPDATED:()=>Bg,NAVIGATE_URL:()=>dQ,OPEN_IN_EDITOR_REQUEST:()=>IQ,OPEN_IN_EDITOR_RESPONSE:()=>MQ,PLAY_FUNCTION_THREW_EXCEPTION:()=>QD,PRELOAD_ENTRIES:()=>tN,PREVIEW_BUILDER_PROGRESS:()=>pQ,PREVIEW_INITIALIZED:()=>rN,PREVIEW_KEYDOWN:()=>nN,REGISTER_SUBSCRIPTION:()=>fQ,REQUEST_WHATS_NEW_DATA:()=>TQ,RESET_STORY_ARGS:()=>RC,RESULT_WHATS_NEW_DATA:()=>SQ,SAVE_STORY_REQUEST:()=>AQ,SAVE_STORY_RESPONSE:()=>RQ,SELECT_STORY:()=>mQ,SET_CONFIG:()=>gQ,SET_CURRENT_STORY:()=>IC,SET_FILTER:()=>yQ,SET_GLOBALS:()=>iN,SET_INDEX:()=>_Q,SET_STORIES:()=>bQ,SET_WHATS_NEW_CACHE:()=>CQ,SHARED_STATE_CHANGED:()=>vQ,SHARED_STATE_SET:()=>xQ,STORIES_COLLAPSE_ALL:()=>wQ,STORIES_EXPAND_ALL:()=>EQ,STORY_ARGS_UPDATED:()=>oN,STORY_CHANGED:()=>sN,STORY_ERRORED:()=>aN,STORY_FINISHED:()=>jT,STORY_HOT_UPDATED:()=>pN,STORY_INDEX_INVALIDATED:()=>lN,STORY_MISSING:()=>zT,STORY_PREPARED:()=>cN,STORY_RENDERED:()=>vb,STORY_RENDER_PHASE_CHANGED:()=>Th,STORY_SPECIFIED:()=>uN,STORY_THREW_EXCEPTION:()=>hN,STORY_UNCHANGED:()=>dN,TELEMETRY_ERROR:()=>mN,TOGGLE_WHATS_NEW_NOTIFICATIONS:()=>PQ,UNHANDLED_ERRORS_WHILE_PLAYING:()=>eN,UPDATE_GLOBALS:()=>MC,UPDATE_QUERY_PARAMS:()=>fN,UPDATE_STORY_ARGS:()=>OC,default:()=>sQ});var CC=(t=>(t.CHANNEL_WS_DISCONNECT="channelWSDisconnect",t.CHANNEL_CREATED="channelCreated",t.CONFIG_ERROR="configError",t.STORY_INDEX_INVALIDATED="storyIndexInvalidated",t.STORY_SPECIFIED="storySpecified",t.SET_CONFIG="setConfig",t.SET_STORIES="setStories",t.SET_INDEX="setIndex",t.SET_CURRENT_STORY="setCurrentStory",t.CURRENT_STORY_WAS_SET="currentStoryWasSet",t.FORCE_RE_RENDER="forceReRender",t.FORCE_REMOUNT="forceRemount",t.PRELOAD_ENTRIES="preloadStories",t.STORY_PREPARED="storyPrepared",t.DOCS_PREPARED="docsPrepared",t.STORY_CHANGED="storyChanged",t.STORY_UNCHANGED="storyUnchanged",t.STORY_RENDERED="storyRendered",t.STORY_FINISHED="storyFinished",t.STORY_MISSING="storyMissing",t.STORY_ERRORED="storyErrored",t.STORY_THREW_EXCEPTION="storyThrewException",t.STORY_RENDER_PHASE_CHANGED="storyRenderPhaseChanged",t.STORY_HOT_UPDATED="storyHotUpdated",t.PLAY_FUNCTION_THREW_EXCEPTION="playFunctionThrewException",t.UNHANDLED_ERRORS_WHILE_PLAYING="unhandledErrorsWhilePlaying",t.UPDATE_STORY_ARGS="updateStoryArgs",t.STORY_ARGS_UPDATED="storyArgsUpdated",t.RESET_STORY_ARGS="resetStoryArgs",t.SET_FILTER="setFilter",t.SET_GLOBALS="setGlobals",t.UPDATE_GLOBALS="updateGlobals",t.GLOBALS_UPDATED="globalsUpdated",t.REGISTER_SUBSCRIPTION="registerSubscription",t.PREVIEW_INITIALIZED="previewInitialized",t.PREVIEW_KEYDOWN="previewKeydown",t.PREVIEW_BUILDER_PROGRESS="preview_builder_progress",t.SELECT_STORY="selectStory",t.STORIES_COLLAPSE_ALL="storiesCollapseAll",t.STORIES_EXPAND_ALL="storiesExpandAll",t.DOCS_RENDERED="docsRendered",t.SHARED_STATE_CHANGED="sharedStateChanged",t.SHARED_STATE_SET="sharedStateSet",t.NAVIGATE_URL="navigateUrl",t.UPDATE_QUERY_PARAMS="updateQueryParams",t.REQUEST_WHATS_NEW_DATA="requestWhatsNewData",t.RESULT_WHATS_NEW_DATA="resultWhatsNewData",t.SET_WHATS_NEW_CACHE="setWhatsNewCache",t.TOGGLE_WHATS_NEW_NOTIFICATIONS="toggleWhatsNewNotifications",t.TELEMETRY_ERROR="telemetryError",t.FILE_COMPONENT_SEARCH_REQUEST="fileComponentSearchRequest",t.FILE_COMPONENT_SEARCH_RESPONSE="fileComponentSearchResponse",t.SAVE_STORY_REQUEST="saveStoryRequest",t.SAVE_STORY_RESPONSE="saveStoryResponse",t.ARGTYPES_INFO_REQUEST="argtypesInfoRequest",t.ARGTYPES_INFO_RESPONSE="argtypesInfoResponse",t.CREATE_NEW_STORYFILE_REQUEST="createNewStoryfileRequest",t.CREATE_NEW_STORYFILE_RESPONSE="createNewStoryfileResponse",t.OPEN_IN_EDITOR_REQUEST="openInEditorRequest",t.OPEN_IN_EDITOR_RESPONSE="openInEditorResponse",t))(CC||{}),sQ=CC,{CHANNEL_WS_DISCONNECT:KD,CHANNEL_CREATED:aQ,CONFIG_ERROR:YD,CREATE_NEW_STORYFILE_REQUEST:lQ,CREATE_NEW_STORYFILE_RESPONSE:cQ,CURRENT_STORY_WAS_SET:FT,DOCS_PREPARED:XD,DOCS_RENDERED:PC,FILE_COMPONENT_SEARCH_REQUEST:uQ,FILE_COMPONENT_SEARCH_RESPONSE:hQ,FORCE_RE_RENDER:AC,FORCE_REMOUNT:bb,GLOBALS_UPDATED:Bg,NAVIGATE_URL:dQ,PLAY_FUNCTION_THREW_EXCEPTION:QD,UNHANDLED_ERRORS_WHILE_PLAYING:eN,PRELOAD_ENTRIES:tN,PREVIEW_INITIALIZED:rN,PREVIEW_BUILDER_PROGRESS:pQ,PREVIEW_KEYDOWN:nN,REGISTER_SUBSCRIPTION:fQ,RESET_STORY_ARGS:RC,SELECT_STORY:mQ,SET_CONFIG:gQ,SET_CURRENT_STORY:IC,SET_FILTER:yQ,SET_GLOBALS:iN,SET_INDEX:_Q,SET_STORIES:bQ,SHARED_STATE_CHANGED:vQ,SHARED_STATE_SET:xQ,STORIES_COLLAPSE_ALL:wQ,STORIES_EXPAND_ALL:EQ,STORY_ARGS_UPDATED:oN,STORY_CHANGED:sN,STORY_ERRORED:aN,STORY_INDEX_INVALIDATED:lN,STORY_MISSING:zT,STORY_PREPARED:cN,STORY_RENDER_PHASE_CHANGED:Th,STORY_RENDERED:vb,STORY_FINISHED:jT,STORY_SPECIFIED:uN,STORY_THREW_EXCEPTION:hN,STORY_UNCHANGED:dN,STORY_HOT_UPDATED:pN,UPDATE_GLOBALS:MC,UPDATE_QUERY_PARAMS:fN,UPDATE_STORY_ARGS:OC,REQUEST_WHATS_NEW_DATA:TQ,RESULT_WHATS_NEW_DATA:SQ,SET_WHATS_NEW_CACHE:CQ,TOGGLE_WHATS_NEW_NOTIFICATIONS:PQ,TELEMETRY_ERROR:mN,SAVE_STORY_REQUEST:AQ,SAVE_STORY_RESPONSE:RQ,ARGTYPES_INFO_REQUEST:gN,ARGTYPES_INFO_RESPONSE:BT,OPEN_IN_EDITOR_REQUEST:IQ,OPEN_IN_EDITOR_RESPONSE:MQ}=CC,yN={};ko(yN,{global:()=>$t});var $t=(()=>{let t;return typeof window<"u"?t=window:typeof globalThis<"u"?t=globalThis:typeof global<"u"?t=global:typeof self<"u"?t=self:t={},t})(),_N={"@storybook/global":"__STORYBOOK_MODULE_GLOBAL__","storybook/test":"__STORYBOOK_MODULE_TEST__","storybook/actions":"__STORYBOOK_MODULE_ACTIONS__","storybook/preview-api":"__STORYBOOK_MODULE_PREVIEW_API__","storybook/internal/channels":"__STORYBOOK_MODULE_CHANNELS__","storybook/internal/client-logger":"__STORYBOOK_MODULE_CLIENT_LOGGER__","storybook/internal/core-events":"__STORYBOOK_MODULE_CORE_EVENTS__","storybook/internal/preview-errors":"__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__","storybook/internal/types":"__STORYBOOK_MODULE_TYPES__","storybook/internal/preview-api":"__STORYBOOK_MODULE_PREVIEW_API__"},OQ=Object.keys(_N),bN={};ko(bN,{Channel:()=>Uv,HEARTBEAT_INTERVAL:()=>I4,HEARTBEAT_MAX_LATENCY:()=>M4,PostMessageTransport:()=>R4,WebsocketTransport:()=>k4,createBrowserChannel:()=>L4,default:()=>nre});function Kr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(s,p){var g=p.match(/\n([\t ]+|(?!\s).)/g);return g?s.concat(g.map(function(_){var x,P;return(P=(x=_.match(/[\t ]/g))===null||x===void 0?void 0:x.length)!==null&&P!==void 0?P:0})):s},[]);if(i.length){var l=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(s){return s.replace(l,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var c=n[0];return e.forEach(function(s,p){var g=c.match(/(?:^|\n)( *)$/),_=g?g[1]:"",x=s;typeof s=="string"&&s.includes(`
`)&&(x=String(s).split(`
`).map(function(P,A){return A===0?P:""+_+P}).join(`
`)),c+=x+n[p+1]}),c}m(Kr,"dedent");var V3=new Map,kQ="UNIVERSAL_STORE:",bs={PENDING:"PENDING",RESOLVED:"RESOLVED",REJECTED:"REJECTED"},tu=class kr{constructor(e,r){if(this.debugging=!1,this.listeners=new Map([["*",new Set]]),this.getState=m(()=>(this.debug("getState",{state:this.state}),this.state),"getState"),this.subscribe=m((n,i)=>{const l=typeof n=="function",c=l?"*":n,s=l?n:i;if(this.debug("subscribe",{eventType:c,listener:s}),!s)throw new TypeError(`Missing first subscribe argument, or second if first is the event type, when subscribing to a UniversalStore with id '${this.id}'`);return this.listeners.has(c)||this.listeners.set(c,new Set),this.listeners.get(c).add(s),()=>{this.debug("unsubscribe",{eventType:c,listener:s}),this.listeners.has(c)&&(this.listeners.get(c).delete(s),this.listeners.get(c)?.size===0&&this.listeners.delete(c))}},"subscribe"),this.send=m(n=>{if(this.debug("send",{event:n}),this.status!==kr.Status.READY)throw new TypeError(Kr`Cannot send event before store is ready. You can get the current status with store.status,
        or await store.readyPromise to wait for the store to be ready before sending events.
        ${JSON.stringify({event:n,id:this.id,actor:this.actor,environment:this.environment},null,2)}`);this.emitToListeners(n,{actor:this.actor}),this.emitToChannel(n,{actor:this.actor})},"send"),this.debugging=e.debug??!1,!kr.isInternalConstructing)throw new TypeError("UniversalStore is not constructable - use UniversalStore.create() instead");if(kr.isInternalConstructing=!1,this.id=e.id,this.actorId=Date.now().toString(36)+Math.random().toString(36).substring(2),this.actorType=e.leader?kr.ActorType.LEADER:kr.ActorType.FOLLOWER,this.state=e.initialState,this.channelEventName=`${kQ}${this.id}`,this.debug("constructor",{options:e,environmentOverrides:r,channelEventName:this.channelEventName}),this.actor.type===kr.ActorType.LEADER)this.syncing={state:bs.RESOLVED,promise:Promise.resolve()};else{let n,i;const l=new Promise((c,s)=>{n=m(()=>{this.syncing.state===bs.PENDING&&(this.syncing.state=bs.RESOLVED,c())},"syncingResolve"),i=m(p=>{this.syncing.state===bs.PENDING&&(this.syncing.state=bs.REJECTED,s(p))},"syncingReject")});this.syncing={state:bs.PENDING,promise:l,resolve:n,reject:i}}this.getState=this.getState.bind(this),this.setState=this.setState.bind(this),this.subscribe=this.subscribe.bind(this),this.onStateChange=this.onStateChange.bind(this),this.send=this.send.bind(this),this.emitToChannel=this.emitToChannel.bind(this),this.prepareThis=this.prepareThis.bind(this),this.emitToListeners=this.emitToListeners.bind(this),this.handleChannelEvents=this.handleChannelEvents.bind(this),this.debug=this.debug.bind(this),this.channel=r?.channel??kr.preparation.channel,this.environment=r?.environment??kr.preparation.environment,this.channel&&this.environment?(kr.preparation.resolve({channel:this.channel,environment:this.environment}),this.prepareThis({channel:this.channel,environment:this.environment})):kr.preparation.promise.then(this.prepareThis)}static setupPreparationPromise(){let e,r;const n=new Promise((i,l)=>{e=m(c=>{i(c)},"resolveRef"),r=m((...c)=>{l(c)},"rejectRef")});kr.preparation={resolve:e,reject:r,promise:n}}get actor(){return Object.freeze({id:this.actorId,type:this.actorType,environment:this.environment??kr.Environment.UNKNOWN})}get status(){if(!this.channel||!this.environment)return kr.Status.UNPREPARED;switch(this.syncing?.state){case bs.PENDING:case void 0:return kr.Status.SYNCING;case bs.REJECTED:return kr.Status.ERROR;case bs.RESOLVED:default:return kr.Status.READY}}untilReady(){return Promise.all([kr.preparation.promise,this.syncing?.promise])}static create(e){if(!e||typeof e?.id!="string")throw new TypeError("id is required and must be a string, when creating a UniversalStore");e.debug&&console.debug(Kr`[UniversalStore]
        create`,{options:e});const r=V3.get(e.id);if(r)return console.warn(Kr`UniversalStore with id "${e.id}" already exists in this environment, re-using existing.
        You should reuse the existing instance instead of trying to create a new one.`),r;kr.isInternalConstructing=!0;const n=new kr(e);return V3.set(e.id,n),n}static __prepare(e,r){kr.preparation.channel=e,kr.preparation.environment=r,kr.preparation.resolve({channel:e,environment:r})}setState(e){const r=this.state,n=typeof e=="function"?e(r):e;if(this.debug("setState",{newState:n,previousState:r,updater:e}),this.status!==kr.Status.READY)throw new TypeError(Kr`Cannot set state before store is ready. You can get the current status with store.status,
        or await store.readyPromise to wait for the store to be ready before sending events.
        ${JSON.stringify({newState:n,id:this.id,actor:this.actor,environment:this.environment},null,2)}`);this.state=n;const i={type:kr.InternalEventType.SET_STATE,payload:{state:n,previousState:r}};this.emitToChannel(i,{actor:this.actor}),this.emitToListeners(i,{actor:this.actor})}onStateChange(e){return this.debug("onStateChange",{listener:e}),this.subscribe(kr.InternalEventType.SET_STATE,({payload:r},n)=>{e(r.state,r.previousState,n)})}emitToChannel(e,r){this.debug("emitToChannel",{event:e,eventInfo:r,channel:!!this.channel}),this.channel?.emit(this.channelEventName,{event:e,eventInfo:r})}prepareThis({channel:e,environment:r}){this.channel=e,this.environment=r,this.debug("prepared",{channel:!!e,environment:r}),this.channel.on(this.channelEventName,this.handleChannelEvents),this.actor.type===kr.ActorType.LEADER?this.emitToChannel({type:kr.InternalEventType.LEADER_CREATED},{actor:this.actor}):(this.emitToChannel({type:kr.InternalEventType.FOLLOWER_CREATED},{actor:this.actor}),this.emitToChannel({type:kr.InternalEventType.EXISTING_STATE_REQUEST},{actor:this.actor}),setTimeout(()=>{this.syncing.reject(new TypeError(`No existing state found for follower with id: '${this.id}'. Make sure a leader with the same id exists before creating a follower.`))},1e3))}emitToListeners(e,r){const n=this.listeners.get(e.type),i=this.listeners.get("*");this.debug("emitToListeners",{event:e,eventInfo:r,eventTypeListeners:n,everythingListeners:i}),[...n??[],...i??[]].forEach(l=>l(e,r))}handleChannelEvents(e){const{event:r,eventInfo:n}=e;if([n.actor.id,n.forwardingActor?.id].includes(this.actor.id)){this.debug("handleChannelEvents: Ignoring event from self",{channelEvent:e});return}else if(this.syncing?.state===bs.PENDING&&r.type!==kr.InternalEventType.EXISTING_STATE_RESPONSE){this.debug("handleChannelEvents: Ignoring event while syncing",{channelEvent:e});return}if(this.debug("handleChannelEvents",{channelEvent:e}),this.actor.type===kr.ActorType.LEADER){let i=!0;switch(r.type){case kr.InternalEventType.EXISTING_STATE_REQUEST:i=!1;const l={type:kr.InternalEventType.EXISTING_STATE_RESPONSE,payload:this.state};this.debug("handleChannelEvents: responding to existing state request",{responseEvent:l}),this.emitToChannel(l,{actor:this.actor}),this.emitToListeners(l,{actor:this.actor});break;case kr.InternalEventType.LEADER_CREATED:i=!1,this.syncing.state=bs.REJECTED,this.debug("handleChannelEvents: erroring due to second leader being created",{event:r}),console.error(Kr`Detected multiple UniversalStore leaders created with the same id "${this.id}".
            Only one leader can exists at a time, your stores are now in an invalid state.
            Leaders detected:
            this: ${JSON.stringify(this.actor,null,2)}
            other: ${JSON.stringify(n.actor,null,2)}`);break}i&&(this.debug("handleChannelEvents: forwarding event",{channelEvent:e}),this.emitToChannel(r,{actor:n.actor,forwardingActor:this.actor}))}if(this.actor.type===kr.ActorType.FOLLOWER)switch(r.type){case kr.InternalEventType.EXISTING_STATE_RESPONSE:if(this.debug("handleChannelEvents: Setting state from leader's existing state response",{event:r}),this.syncing?.state!==bs.PENDING)break;this.syncing.resolve?.();const i={type:kr.InternalEventType.SET_STATE,payload:{state:r.payload,previousState:this.state}};this.state=r.payload,this.emitToListeners(i,n);break}switch(r.type){case kr.InternalEventType.SET_STATE:this.debug("handleChannelEvents: Setting state",{event:r}),this.state=r.payload.state;break}this.emitToListeners(r,{actor:n.actor})}debug(e,r){this.debugging&&console.debug(Kr`[UniversalStore::${this.id}::${this.environment??kr.Environment.UNKNOWN}]
        ${e}`,JSON.stringify({data:r,actor:this.actor,state:this.state,status:this.status},null,2))}static __reset(){kr.preparation.reject(new Error("reset")),kr.setupPreparationPromise(),kr.isInternalConstructing=!1}};m(tu,"UniversalStore");tu.ActorType={LEADER:"LEADER",FOLLOWER:"FOLLOWER"};tu.Environment={SERVER:"SERVER",MANAGER:"MANAGER",PREVIEW:"PREVIEW",UNKNOWN:"UNKNOWN",MOCK:"MOCK"};tu.InternalEventType={EXISTING_STATE_REQUEST:"__EXISTING_STATE_REQUEST",EXISTING_STATE_RESPONSE:"__EXISTING_STATE_RESPONSE",SET_STATE:"__SET_STATE",LEADER_CREATED:"__LEADER_CREATED",FOLLOWER_CREATED:"__FOLLOWER_CREATED"};tu.Status={UNPREPARED:"UNPREPARED",SYNCING:"SYNCING",READY:"READY",ERROR:"ERROR"};tu.isInternalConstructing=!1;tu.setupPreparationPromise();var _E=tu,LQ=m(t=>t.transports!==void 0,"isMulti"),DQ=m(()=>Math.random().toString(16).slice(2),"generateRandomId"),vN=class{constructor(e={}){this.sender=DQ(),this.events={},this.data={},this.transports=[],this.isAsync=e.async||!1,LQ(e)?(this.transports=e.transports||[],this.transports.forEach(r=>{r.setHandler(n=>this.handleEvent(n))})):this.transports=e.transport?[e.transport]:[],this.transports.forEach(r=>{r.setHandler(n=>this.handleEvent(n))})}get hasTransport(){return this.transports.length>0}addListener(e,r){this.events[e]=this.events[e]||[],this.events[e].push(r)}emit(e,...r){const n={type:e,args:r,from:this.sender};let i={};r.length>=1&&r[0]&&r[0].options&&(i=r[0].options);const l=m(()=>{this.transports.forEach(c=>{c.send(n,i)}),this.handleEvent(n)},"handler");this.isAsync?setImmediate(l):l()}last(e){return this.data[e]}eventNames(){return Object.keys(this.events)}listenerCount(e){const r=this.listeners(e);return r?r.length:0}listeners(e){return this.events[e]||void 0}once(e,r){const n=this.onceListener(e,r);this.addListener(e,n)}removeAllListeners(e){e?this.events[e]&&delete this.events[e]:this.events={}}removeListener(e,r){const n=this.listeners(e);n&&(this.events[e]=n.filter(i=>i!==r))}on(e,r){this.addListener(e,r)}off(e,r){this.removeListener(e,r)}handleEvent(e){const r=this.listeners(e.type);r&&r.length&&r.forEach(n=>{n.apply(e,e.args)}),this.data[e.type]=e.args}onceListener(e,r){const n=m((...i)=>(this.removeListener(e,n),r(...i)),"onceListener");return n}};m(vN,"Channel");var Uv=vN,xN={};ko(xN,{deprecate:()=>kC,logger:()=>Bn,once:()=>oi,pretty:()=>ls});var{LOGLEVEL:NQ}=$t,Tc={trace:1,debug:2,info:3,warn:4,error:5,silent:10},FQ=NQ,tp=Tc[FQ]||Tc.info,Bn={trace:m((t,...e)=>{tp<=Tc.trace&&console.trace(t,...e)},"trace"),debug:m((t,...e)=>{tp<=Tc.debug&&console.debug(t,...e)},"debug"),info:m((t,...e)=>{tp<=Tc.info&&console.info(t,...e)},"info"),warn:m((t,...e)=>{tp<=Tc.warn&&console.warn(t,...e)},"warn"),error:m((t,...e)=>{tp<=Tc.error&&console.error(t,...e)},"error"),log:m((t,...e)=>{tp<Tc.silent&&console.log(t,...e)},"log")},qT=new Set,oi=m(t=>(e,...r)=>{if(!qT.has(e))return qT.add(e),Bn[t](e,...r)},"once");oi.clear=()=>qT.clear();oi.trace=oi("trace");oi.debug=oi("debug");oi.info=oi("info");oi.warn=oi("warn");oi.error=oi("error");oi.log=oi("log");var kC=oi("warn"),ls=m(t=>(...e)=>{const r=[];if(e.length){const n=/<span\s+style=(['"])([^'"]*)\1\s*>/gi,i=/<\/span>/gi;let l;for(r.push(e[0].replace(n,"%c").replace(i,"%c"));l=n.exec(e[0]);)r.push(l[2]),r.push("");for(let c=1;c<e.length;c++)r.push(e[c])}Bn[t].apply(Bn,r)},"pretty");ls.trace=ls("trace");ls.debug=ls("debug");ls.info=ls("info");ls.warn=ls("warn");ls.error=ls("error");var zQ=Object.create,wN=Object.defineProperty,jQ=Object.getOwnPropertyDescriptor,EN=Object.getOwnPropertyNames,BQ=Object.getPrototypeOf,qQ=Object.prototype.hasOwnProperty,Hr=m((t,e)=>m(function(){return e||(0,t[EN(t)[0]])((e={exports:{}}).exports,e),e.exports},"__require"),"__commonJS"),$Q=m((t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of EN(e))!qQ.call(t,i)&&i!==r&&wN(t,i,{get:m(()=>e[i],"get"),enumerable:!(n=jQ(e,i))||n.enumerable});return t},"__copyProps"),LC=m((t,e,r)=>(r=t!=null?zQ(BQ(t)):{},$Q(e||!t||!t.__esModule?wN(r,"default",{value:t,enumerable:!0}):r,t)),"__toESM"),VQ=["bubbles","cancelBubble","cancelable","composed","currentTarget","defaultPrevented","eventPhase","isTrusted","returnValue","srcElement","target","timeStamp","type"],UQ=["detail"];function TN(t){const e=VQ.filter(r=>t[r]!==void 0).reduce((r,n)=>(r[n]=t[n],r),{});if(t instanceof CustomEvent)for(const r of UQ.filter(n=>t[n]!==void 0))e[r]=t[r];return e}m(TN,"extractEventHiddenProperties");var SN=Hr({"node_modules/.pnpm/es-object-atoms@1.1.1/node_modules/es-object-atoms/index.js"(t,e){e.exports=Object}}),GQ=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/index.js"(t,e){e.exports=Error}}),HQ=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/eval.js"(t,e){e.exports=EvalError}}),JQ=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/range.js"(t,e){e.exports=RangeError}}),WQ=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/ref.js"(t,e){e.exports=ReferenceError}}),ZQ=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/syntax.js"(t,e){e.exports=SyntaxError}}),DC=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/type.js"(t,e){e.exports=TypeError}}),KQ=Hr({"node_modules/.pnpm/es-errors@1.3.0/node_modules/es-errors/uri.js"(t,e){e.exports=URIError}}),YQ=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/abs.js"(t,e){e.exports=Math.abs}}),XQ=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/floor.js"(t,e){e.exports=Math.floor}}),QQ=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/max.js"(t,e){e.exports=Math.max}}),eee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/min.js"(t,e){e.exports=Math.min}}),tee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/pow.js"(t,e){e.exports=Math.pow}}),ree=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/round.js"(t,e){e.exports=Math.round}}),nee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/isNaN.js"(t,e){e.exports=Number.isNaN||m(function(n){return n!==n},"isNaN2")}}),iee=Hr({"node_modules/.pnpm/math-intrinsics@1.1.0/node_modules/math-intrinsics/sign.js"(t,e){var r=nee();e.exports=m(function(i){return r(i)||i===0?i:i<0?-1:1},"sign")}}),oee=Hr({"node_modules/.pnpm/gopd@1.2.0/node_modules/gopd/gOPD.js"(t,e){e.exports=Object.getOwnPropertyDescriptor}}),NC=Hr({"node_modules/.pnpm/gopd@1.2.0/node_modules/gopd/index.js"(t,e){var r=oee();if(r)try{r([],"length")}catch{r=null}e.exports=r}}),see=Hr({"node_modules/.pnpm/es-define-property@1.0.1/node_modules/es-define-property/index.js"(t,e){var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}e.exports=r}}),CN=Hr({"node_modules/.pnpm/has-symbols@1.1.0/node_modules/has-symbols/shams.js"(t,e){e.exports=m(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},i=Symbol("test"),l=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(l)!=="[object Symbol]")return!1;var c=42;n[i]=c;for(var s in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var p=Object.getOwnPropertySymbols(n);if(p.length!==1||p[0]!==i||!Object.prototype.propertyIsEnumerable.call(n,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var g=Object.getOwnPropertyDescriptor(n,i);if(g.value!==c||g.enumerable!==!0)return!1}return!0},"hasSymbols")}}),PN=Hr({"node_modules/.pnpm/has-symbols@1.1.0/node_modules/has-symbols/index.js"(t,e){var r=typeof Symbol<"u"&&Symbol,n=CN();e.exports=m(function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()},"hasNativeSymbols")}}),AN=Hr({"node_modules/.pnpm/get-proto@1.0.1/node_modules/get-proto/Reflect.getPrototypeOf.js"(t,e){e.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}}),RN=Hr({"node_modules/.pnpm/get-proto@1.0.1/node_modules/get-proto/Object.getPrototypeOf.js"(t,e){var r=SN();e.exports=r.getPrototypeOf||null}}),aee=Hr({"node_modules/.pnpm/function-bind@1.1.2/node_modules/function-bind/implementation.js"(t,e){var r="Function.prototype.bind called on incompatible ",n=Object.prototype.toString,i=Math.max,l="[object Function]",c=m(function(_,x){for(var P=[],A=0;A<_.length;A+=1)P[A]=_[A];for(var M=0;M<x.length;M+=1)P[M+_.length]=x[M];return P},"concatty2"),s=m(function(_,x){for(var P=[],A=x||0,M=0;A<_.length;A+=1,M+=1)P[M]=_[A];return P},"slicy2"),p=m(function(g,_){for(var x="",P=0;P<g.length;P+=1)x+=g[P],P+1<g.length&&(x+=_);return x},"joiny");e.exports=m(function(_){var x=this;if(typeof x!="function"||n.apply(x)!==l)throw new TypeError(r+x);for(var P=s(arguments,1),A,M=m(function(){if(this instanceof A){var J=x.apply(this,c(P,arguments));return Object(J)===J?J:this}return x.apply(_,c(P,arguments))},"binder"),N=i(0,x.length-P.length),z=[],j=0;j<N;j++)z[j]="$"+j;if(A=Function("binder","return function ("+p(z,",")+"){ return binder.apply(this,arguments); }")(M),x.prototype){var $=m(function(){},"Empty2");$.prototype=x.prototype,A.prototype=new $,$.prototype=null}return A},"bind")}}),Gv=Hr({"node_modules/.pnpm/function-bind@1.1.2/node_modules/function-bind/index.js"(t,e){var r=aee();e.exports=Function.prototype.bind||r}}),FC=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/functionCall.js"(t,e){e.exports=Function.prototype.call}}),IN=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/functionApply.js"(t,e){e.exports=Function.prototype.apply}}),lee=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/reflectApply.js"(t,e){e.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}}),cee=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/actualApply.js"(t,e){var r=Gv(),n=IN(),i=FC(),l=lee();e.exports=l||r.call(i,n)}}),MN=Hr({"node_modules/.pnpm/call-bind-apply-helpers@1.0.2/node_modules/call-bind-apply-helpers/index.js"(t,e){var r=Gv(),n=DC(),i=FC(),l=cee();e.exports=m(function(s){if(s.length<1||typeof s[0]!="function")throw new n("a function is required");return l(r,i,s)},"callBindBasic")}}),uee=Hr({"node_modules/.pnpm/dunder-proto@1.0.1/node_modules/dunder-proto/get.js"(t,e){var r=MN(),n=NC(),i;try{i=[].__proto__===Array.prototype}catch(p){if(!p||typeof p!="object"||!("code"in p)||p.code!=="ERR_PROTO_ACCESS")throw p}var l=!!i&&n&&n(Object.prototype,"__proto__"),c=Object,s=c.getPrototypeOf;e.exports=l&&typeof l.get=="function"?r([l.get]):typeof s=="function"?m(function(g){return s(g==null?g:c(g))},"getDunder"):!1}}),hee=Hr({"node_modules/.pnpm/get-proto@1.0.1/node_modules/get-proto/index.js"(t,e){var r=AN(),n=RN(),i=uee();e.exports=r?m(function(c){return r(c)},"getProto"):n?m(function(c){if(!c||typeof c!="object"&&typeof c!="function")throw new TypeError("getProto: not an object");return n(c)},"getProto"):i?m(function(c){return i(c)},"getProto"):null}}),ON=Hr({"node_modules/.pnpm/hasown@2.0.2/node_modules/hasown/index.js"(t,e){var r=Function.prototype.call,n=Object.prototype.hasOwnProperty,i=Gv();e.exports=i.call(r,n)}}),dee=Hr({"node_modules/.pnpm/get-intrinsic@1.3.0/node_modules/get-intrinsic/index.js"(t,e){var r,n=SN(),i=GQ(),l=HQ(),c=JQ(),s=WQ(),p=ZQ(),g=DC(),_=KQ(),x=YQ(),P=XQ(),A=QQ(),M=eee(),N=tee(),z=ree(),j=iee(),$=Function,J=m(function(Ve){try{return $('"use strict"; return ('+Ve+").constructor;")()}catch{}},"getEvalledConstructor"),X=NC(),re=see(),ne=m(function(){throw new g},"throwTypeError"),Z=X?function(){try{return arguments.callee,ne}catch{try{return X(arguments,"callee").get}catch{return ne}}}():ne,U=PN()(),K=hee(),he=RN(),ue=AN(),Ee=IN(),Ie=FC(),ee={},pe=typeof Uint8Array>"u"||!K?r:K(Uint8Array),ve={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":U&&K?K([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":ee,"%AsyncGenerator%":ee,"%AsyncGeneratorFunction%":ee,"%AsyncIteratorPrototype%":ee,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":l,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":$,"%GeneratorFunction%":ee,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":U&&K?K(K([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!U||!K?r:K(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":n,"%Object.getOwnPropertyDescriptor%":X,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":c,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!U||!K?r:K(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":U&&K?K(""[Symbol.iterator]()):r,"%Symbol%":U?Symbol:r,"%SyntaxError%":p,"%ThrowTypeError%":Z,"%TypedArray%":pe,"%TypeError%":g,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":_,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":Ie,"%Function.prototype.apply%":Ee,"%Object.defineProperty%":re,"%Object.getPrototypeOf%":he,"%Math.abs%":x,"%Math.floor%":P,"%Math.max%":A,"%Math.min%":M,"%Math.pow%":N,"%Math.round%":z,"%Math.sign%":j,"%Reflect.getPrototypeOf%":ue};if(K)try{null.error}catch(Ve){xe=K(K(Ve)),ve["%Error.prototype%"]=xe}var xe,tt=m(function Ve(pt){var lt;if(pt==="%AsyncFunction%")lt=J("async function () {}");else if(pt==="%GeneratorFunction%")lt=J("function* () {}");else if(pt==="%AsyncGeneratorFunction%")lt=J("async function* () {}");else if(pt==="%AsyncGenerator%"){var Tt=Ve("%AsyncGeneratorFunction%");Tt&&(lt=Tt.prototype)}else if(pt==="%AsyncIteratorPrototype%"){var vt=Ve("%AsyncGenerator%");vt&&K&&(lt=K(vt.prototype))}return ve[pt]=lt,lt},"doEval2"),Ke={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ze=Gv(),bt=ON(),qe=Ze.call(Ie,Array.prototype.concat),kt=Ze.call(Ee,Array.prototype.splice),Jt=Ze.call(Ie,String.prototype.replace),Pt=Ze.call(Ie,String.prototype.slice),dt=Ze.call(Ie,RegExp.prototype.exec),er=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Wt=/\\(\\)?/g,ar=m(function(pt){var lt=Pt(pt,0,1),Tt=Pt(pt,-1);if(lt==="%"&&Tt!=="%")throw new p("invalid intrinsic syntax, expected closing `%`");if(Tt==="%"&&lt!=="%")throw new p("invalid intrinsic syntax, expected opening `%`");var vt=[];return Jt(pt,er,function(Dt,Yt,Bt,xr){vt[vt.length]=Bt?Jt(xr,Wt,"$1"):Yt||Dt}),vt},"stringToPath3"),_t=m(function(pt,lt){var Tt=pt,vt;if(bt(Ke,Tt)&&(vt=Ke[Tt],Tt="%"+vt[0]+"%"),bt(ve,Tt)){var Dt=ve[Tt];if(Dt===ee&&(Dt=tt(Tt)),typeof Dt>"u"&&!lt)throw new g("intrinsic "+pt+" exists, but is not available. Please file an issue!");return{alias:vt,name:Tt,value:Dt}}throw new p("intrinsic "+pt+" does not exist!")},"getBaseIntrinsic2");e.exports=m(function(pt,lt){if(typeof pt!="string"||pt.length===0)throw new g("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof lt!="boolean")throw new g('"allowMissing" argument must be a boolean');if(dt(/^%?[^%]*%?$/,pt)===null)throw new p("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Tt=ar(pt),vt=Tt.length>0?Tt[0]:"",Dt=_t("%"+vt+"%",lt),Yt=Dt.name,Bt=Dt.value,xr=!1,$r=Dt.alias;$r&&(vt=$r[0],kt(Tt,qe([0,1],$r)));for(var Ir=1,Zr=!0;Ir<Tt.length;Ir+=1){var yr=Tt[Ir],ur=Pt(yr,0,1),lr=Pt(yr,-1);if((ur==='"'||ur==="'"||ur==="`"||lr==='"'||lr==="'"||lr==="`")&&ur!==lr)throw new p("property names with quotes must have matching quotes");if((yr==="constructor"||!Zr)&&(xr=!0),vt+="."+yr,Yt="%"+vt+"%",bt(ve,Yt))Bt=ve[Yt];else if(Bt!=null){if(!(yr in Bt)){if(!lt)throw new g("base intrinsic for "+pt+" exists, but the property is not available.");return}if(X&&Ir+1>=Tt.length){var nr=X(Bt,yr);Zr=!!nr,Zr&&"get"in nr&&!("originalValue"in nr.get)?Bt=nr.get:Bt=Bt[yr]}else Zr=bt(Bt,yr),Bt=Bt[yr];Zr&&!xr&&(ve[Yt]=Bt)}}return Bt},"GetIntrinsic")}}),zC=Hr({"node_modules/.pnpm/call-bound@1.0.4/node_modules/call-bound/index.js"(t,e){var r=dee(),n=MN(),i=n([r("%String.prototype.indexOf%")]);e.exports=m(function(c,s){var p=r(c,!!s);return typeof p=="function"&&i(c,".prototype.")>-1?n([p]):p},"callBoundIntrinsic")}}),pee=Hr({"node_modules/.pnpm/has-tostringtag@1.0.2/node_modules/has-tostringtag/shams.js"(t,e){var r=CN();e.exports=m(function(){return r()&&!!Symbol.toStringTag},"hasToStringTagShams")}}),kN=Hr({"node_modules/.pnpm/is-regex@1.2.1/node_modules/is-regex/index.js"(t,e){var r=zC(),n=pee()(),i=ON(),l=NC(),c;n?(s=r("RegExp.prototype.exec"),p={},g=m(function(){throw p},"throwRegexMarker"),_={toString:g,valueOf:g},typeof Symbol.toPrimitive=="symbol"&&(_[Symbol.toPrimitive]=g),c=m(function(M){if(!M||typeof M!="object")return!1;var N=l(M,"lastIndex"),z=N&&i(N,"value");if(!z)return!1;try{s(M,_)}catch(j){return j===p}},"isRegex")):(x=r("Object.prototype.toString"),P="[object RegExp]",c=m(function(M){return!M||typeof M!="object"&&typeof M!="function"?!1:x(M)===P},"isRegex"));var s,p,g,_,x,P;e.exports=c}}),fee=Hr({"node_modules/.pnpm/is-function@1.0.2/node_modules/is-function/index.js"(t,e){e.exports=n;var r=Object.prototype.toString;function n(i){if(!i)return!1;var l=r.call(i);return l==="[object Function]"||typeof i=="function"&&l!=="[object RegExp]"||typeof window<"u"&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)}m(n,"isFunction3")}}),mee=Hr({"node_modules/.pnpm/safe-regex-test@1.1.0/node_modules/safe-regex-test/index.js"(t,e){var r=zC(),n=kN(),i=r("RegExp.prototype.exec"),l=DC();e.exports=m(function(s){if(!n(s))throw new l("`regex` must be a RegExp");return m(function(g){return i(s,g)!==null},"test")},"regexTester")}}),gee=Hr({"node_modules/.pnpm/is-symbol@1.1.1/node_modules/is-symbol/index.js"(t,e){var r=zC(),n=r("Object.prototype.toString"),i=PN()(),l=mee();i?(c=r("Symbol.prototype.toString"),s=l(/^Symbol\(.*\)$/),p=m(function(_){return typeof _.valueOf()!="symbol"?!1:s(c(_))},"isRealSymbolObject"),e.exports=m(function(_){if(typeof _=="symbol")return!0;if(!_||typeof _!="object"||n(_)!=="[object Symbol]")return!1;try{return p(_)}catch{return!1}},"isSymbol3")):e.exports=m(function(_){return!1},"isSymbol3");var c,s,p}}),yee=LC(kN()),_ee=LC(fee()),bee=LC(gee());function LN(t){return t!=null&&typeof t=="object"&&Array.isArray(t)===!1}m(LN,"isObject");var vee=typeof global=="object"&&global&&global.Object===Object&&global,xee=vee,wee=typeof self=="object"&&self&&self.Object===Object&&self,Eee=xee||wee||Function("return this")(),jC=Eee,Tee=jC.Symbol,qp=Tee,DN=Object.prototype,See=DN.hasOwnProperty,Cee=DN.toString,Hm=qp?qp.toStringTag:void 0;function NN(t){var e=See.call(t,Hm),r=t[Hm];try{t[Hm]=void 0;var n=!0}catch{}var i=Cee.call(t);return n&&(e?t[Hm]=r:delete t[Hm]),i}m(NN,"getRawTag");var Pee=NN,Aee=Object.prototype,Ree=Aee.toString;function FN(t){return Ree.call(t)}m(FN,"objectToString");var Iee=FN,Mee="[object Null]",Oee="[object Undefined]",U3=qp?qp.toStringTag:void 0;function zN(t){return t==null?t===void 0?Oee:Mee:U3&&U3 in Object(t)?Pee(t):Iee(t)}m(zN,"baseGetTag");var jN=zN;function BN(t){return t!=null&&typeof t=="object"}m(BN,"isObjectLike");var kee=BN,Lee="[object Symbol]";function qN(t){return typeof t=="symbol"||kee(t)&&jN(t)==Lee}m(qN,"isSymbol");var BC=qN;function $N(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}m($N,"arrayMap");var Dee=$N,Nee=Array.isArray,qC=Nee,G3=qp?qp.prototype:void 0,H3=G3?G3.toString:void 0;function $C(t){if(typeof t=="string")return t;if(qC(t))return Dee(t,$C)+"";if(BC(t))return H3?H3.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}m($C,"baseToString");var Fee=$C;function VN(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}m(VN,"isObject2");var UN=VN,zee="[object AsyncFunction]",jee="[object Function]",Bee="[object GeneratorFunction]",qee="[object Proxy]";function GN(t){if(!UN(t))return!1;var e=jN(t);return e==jee||e==Bee||e==zee||e==qee}m(GN,"isFunction");var $ee=GN,Vee=jC["__core-js_shared__"],bE=Vee,J3=function(){var t=/[^.]+$/.exec(bE&&bE.keys&&bE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function HN(t){return!!J3&&J3 in t}m(HN,"isMasked");var Uee=HN,Gee=Function.prototype,Hee=Gee.toString;function JN(t){if(t!=null){try{return Hee.call(t)}catch{}try{return t+""}catch{}}return""}m(JN,"toSource");var Jee=JN,Wee=/[\\^$.*+?()[\]{}|]/g,Zee=/^\[object .+?Constructor\]$/,Kee=Function.prototype,Yee=Object.prototype,Xee=Kee.toString,Qee=Yee.hasOwnProperty,ete=RegExp("^"+Xee.call(Qee).replace(Wee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WN(t){if(!UN(t)||Uee(t))return!1;var e=$ee(t)?ete:Zee;return e.test(Jee(t))}m(WN,"baseIsNative");var tte=WN;function ZN(t,e){return t?.[e]}m(ZN,"getValue");var rte=ZN;function KN(t,e){var r=rte(t,e);return tte(r)?r:void 0}m(KN,"getNative");var YN=KN;function XN(t,e){return t===e||t!==t&&e!==e}m(XN,"eq");var nte=XN,ite=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ote=/^\w*$/;function QN(t,e){if(qC(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||BC(t)?!0:ote.test(t)||!ite.test(t)||e!=null&&t in Object(e)}m(QN,"isKey");var ste=QN,ate=YN(Object,"create"),qg=ate;function e4(){this.__data__=qg?qg(null):{},this.size=0}m(e4,"hashClear");var lte=e4;function t4(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}m(t4,"hashDelete");var cte=t4,ute="__lodash_hash_undefined__",hte=Object.prototype,dte=hte.hasOwnProperty;function r4(t){var e=this.__data__;if(qg){var r=e[t];return r===ute?void 0:r}return dte.call(e,t)?e[t]:void 0}m(r4,"hashGet");var pte=r4,fte=Object.prototype,mte=fte.hasOwnProperty;function n4(t){var e=this.__data__;return qg?e[t]!==void 0:mte.call(e,t)}m(n4,"hashHas");var gte=n4,yte="__lodash_hash_undefined__";function i4(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=qg&&e===void 0?yte:e,this}m(i4,"hashSet");var _te=i4;function $h(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}m($h,"Hash");$h.prototype.clear=lte;$h.prototype.delete=cte;$h.prototype.get=pte;$h.prototype.has=gte;$h.prototype.set=_te;var W3=$h;function o4(){this.__data__=[],this.size=0}m(o4,"listCacheClear");var bte=o4;function s4(t,e){for(var r=t.length;r--;)if(nte(t[r][0],e))return r;return-1}m(s4,"assocIndexOf");var Hv=s4,vte=Array.prototype,xte=vte.splice;function a4(t){var e=this.__data__,r=Hv(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():xte.call(e,r,1),--this.size,!0}m(a4,"listCacheDelete");var wte=a4;function l4(t){var e=this.__data__,r=Hv(e,t);return r<0?void 0:e[r][1]}m(l4,"listCacheGet");var Ete=l4;function c4(t){return Hv(this.__data__,t)>-1}m(c4,"listCacheHas");var Tte=c4;function u4(t,e){var r=this.__data__,n=Hv(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}m(u4,"listCacheSet");var Ste=u4;function Vh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}m(Vh,"ListCache");Vh.prototype.clear=bte;Vh.prototype.delete=wte;Vh.prototype.get=Ete;Vh.prototype.has=Tte;Vh.prototype.set=Ste;var Cte=Vh,Pte=YN(jC,"Map"),Ate=Pte;function h4(){this.size=0,this.__data__={hash:new W3,map:new(Ate||Cte),string:new W3}}m(h4,"mapCacheClear");var Rte=h4;function d4(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}m(d4,"isKeyable");var Ite=d4;function p4(t,e){var r=t.__data__;return Ite(e)?r[typeof e=="string"?"string":"hash"]:r.map}m(p4,"getMapData");var Jv=p4;function f4(t){var e=Jv(this,t).delete(t);return this.size-=e?1:0,e}m(f4,"mapCacheDelete");var Mte=f4;function m4(t){return Jv(this,t).get(t)}m(m4,"mapCacheGet");var Ote=m4;function g4(t){return Jv(this,t).has(t)}m(g4,"mapCacheHas");var kte=g4;function y4(t,e){var r=Jv(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}m(y4,"mapCacheSet");var Lte=y4;function Uh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}m(Uh,"MapCache");Uh.prototype.clear=Rte;Uh.prototype.delete=Mte;Uh.prototype.get=Ote;Uh.prototype.has=kte;Uh.prototype.set=Lte;var _4=Uh,Dte="Expected a function";function Wv(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Dte);var r=m(function(){var n=arguments,i=e?e.apply(this,n):n[0],l=r.cache;if(l.has(i))return l.get(i);var c=t.apply(this,n);return r.cache=l.set(i,c)||l,c},"memoized");return r.cache=new(Wv.Cache||_4),r}m(Wv,"memoize");Wv.Cache=_4;var Nte=Wv,Fte=500;function b4(t){var e=Nte(t,function(n){return r.size===Fte&&r.clear(),n}),r=e.cache;return e}m(b4,"memoizeCapped");var zte=b4,jte=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bte=/\\(\\)?/g,qte=zte(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(jte,function(r,n,i,l){e.push(i?l.replace(Bte,"$1"):n||r)}),e}),$te=qte;function v4(t){return t==null?"":Fee(t)}m(v4,"toString");var Vte=v4;function x4(t,e){return qC(t)?t:ste(t,e)?[t]:$te(Vte(t))}m(x4,"castPath");var Ute=x4;function w4(t){if(typeof t=="string"||BC(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}m(w4,"toKey");var Gte=w4;function E4(t,e){e=Ute(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Gte(e[r++])];return r&&r==n?t:void 0}m(E4,"baseGet");var Hte=E4;function T4(t,e,r){var n=t==null?void 0:Hte(t,e);return n===void 0?r:n}m(T4,"get");var Jte=T4,VC=LN,Wte=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/,UC=m(t=>t.match(/^[\[\{\"\}].*[\]\}\"]$/),"isJSON");function GC(t){if(!VC(t))return t;let e=t,r=!1;return typeof Event<"u"&&t instanceof Event&&(e=TN(e),r=!0),e=Object.keys(e).reduce((n,i)=>{try{e[i]&&e[i].toJSON,n[i]=e[i]}catch{r=!0}return n},{}),r?e:t}m(GC,"convertUnconventionalData");var Zte=m(function(e){let r,n,i,l;return m(function(s,p){try{if(s==="")return l=[],r=new Map([[p,"[]"]]),n=new Map,i=[],p;const g=n.get(this)||this;for(;i.length&&g!==i[0];)i.shift(),l.pop();if(typeof p=="boolean")return p;if(p===void 0)return e.allowUndefined?"_undefined_":void 0;if(p===null)return null;if(typeof p=="number")return p===Number.NEGATIVE_INFINITY?"_-Infinity_":p===Number.POSITIVE_INFINITY?"_Infinity_":Number.isNaN(p)?"_NaN_":p;if(typeof p=="bigint")return`_bigint_${p.toString()}`;if(typeof p=="string")return Wte.test(p)?e.allowDate?`_date_${p}`:void 0:p;if((0,yee.default)(p))return e.allowRegExp?`_regexp_${p.flags}|${p.source}`:void 0;if((0,_ee.default)(p))return;if((0,bee.default)(p)){if(!e.allowSymbol)return;const x=Symbol.keyFor(p);return x!==void 0?`_gsymbol_${x}`:`_symbol_${p.toString().slice(7,-1)}`}if(i.length>=e.maxDepth)return Array.isArray(p)?`[Array(${p.length})]`:"[Object]";if(p===this)return`_duplicate_${JSON.stringify(l)}`;if(p instanceof Error&&e.allowError)return{__isConvertedError__:!0,errorProperties:{...p.cause?{cause:p.cause}:{},...p,name:p.name,message:p.message,stack:p.stack,"_constructor-name_":p.constructor.name}};if(p?.constructor?.name&&p.constructor.name!=="Object"&&!Array.isArray(p)){const x=r.get(p);if(!x){const P={__isClassInstance__:!0,__className__:p.constructor.name,...Object.getOwnPropertyNames(p).reduce((A,M)=>{try{A[M]=p[M]}catch{}return A},{})};return l.push(s),i.unshift(P),r.set(p,JSON.stringify(l)),p!==P&&n.set(p,P),P}return`_duplicate_${x}`}const _=r.get(p);if(!_){const x=Array.isArray(p)?p:GC(p);return l.push(s),i.unshift(x),r.set(p,JSON.stringify(l)),p!==x&&n.set(p,x),x}return`_duplicate_${_}`}catch{return}},"replace")},"replacer2"),Kte=m(function(e){const r=[];let n;return m(function(l,c){if(l===""&&(n=c,r.forEach(({target:s,container:p,replacement:g})=>{const _=UC(g)?JSON.parse(g):g.split(".");_.length===0?p[s]=n:p[s]=Jte(n,_)})),l==="_constructor-name_")return c;if(VC(c)&&c.__isConvertedError__){const{message:s,...p}=c.errorProperties,g=new Error(s);return Object.assign(g,p),g}if(typeof c=="string"&&c.startsWith("_regexp_")&&e.allowRegExp){const[,s,p]=c.match(/_regexp_([^|]*)\|(.*)/)||[];return new RegExp(p,s)}return typeof c=="string"&&c.startsWith("_date_")&&e.allowDate?new Date(c.replace("_date_","")):typeof c=="string"&&c.startsWith("_duplicate_")?(r.push({target:l,container:this,replacement:c.replace(/^_duplicate_/,"")}),null):typeof c=="string"&&c.startsWith("_symbol_")&&e.allowSymbol?Symbol(c.replace("_symbol_","")):typeof c=="string"&&c.startsWith("_gsymbol_")&&e.allowSymbol?Symbol.for(c.replace("_gsymbol_","")):typeof c=="string"&&c==="_-Infinity_"?Number.NEGATIVE_INFINITY:typeof c=="string"&&c==="_Infinity_"?Number.POSITIVE_INFINITY:typeof c=="string"&&c==="_NaN_"?Number.NaN:typeof c=="string"&&c.startsWith("_bigint_")&&typeof BigInt=="function"?BigInt(c.replace("_bigint_","")):c},"revive")},"reviver2"),S4={maxDepth:10,space:void 0,allowRegExp:!0,allowDate:!0,allowError:!0,allowUndefined:!0,allowSymbol:!0},C4=m((t,e={})=>{const r={...S4,...e};return JSON.stringify(GC(t),Zte(r),e.space)},"stringify"),Yte=m(()=>{const t=new Map;return m(function e(r){VC(r)&&Object.entries(r).forEach(([n,i])=>{i==="_undefined_"?r[n]=void 0:t.get(i)||(t.set(i,!0),e(i))}),Array.isArray(r)&&r.forEach((n,i)=>{n==="_undefined_"?(t.set(n,!0),r[i]=void 0):t.get(n)||(t.set(n,!0),e(n))})},"mutateUndefined")},"mutator"),P4=m((t,e={})=>{const r={...S4,...e},n=JSON.parse(t,Kte(r));return Yte()(n),n},"parse"),Xte="Invariant failed";function Aa(t,e){if(!t)throw new Error(Xte)}m(Aa,"invariant");var Qte=m(t=>{const e=Array.from(document.querySelectorAll("iframe[data-is-storybook]")),[r,...n]=e.filter(l=>{try{return l.contentWindow?.location.origin===t.source.location.origin&&l.contentWindow?.location.pathname===t.source.location.pathname}catch{}try{return l.contentWindow===t.source}catch{}const c=l.getAttribute("src");let s;try{if(!c)return!1;({origin:s}=new URL(c,document.location.toString()))}catch{return!1}return s===t.origin}),i=r?.getAttribute("src");if(i&&n.length===0){const{protocol:l,host:c,pathname:s}=new URL(i,document.location.toString());return`${l}//${c}${s}`}return n.length>0&&Bn.error("found multiple candidates for event source"),null},"getEventSourceUrl"),{document:vE,location:xE}=$t,Z3="storybook-channel",ere={maxDepth:25},A4=class{constructor(e){if(this.config=e,this.connected=!1,this.buffer=[],typeof $t?.addEventListener=="function"&&$t.addEventListener("message",this.handleEvent.bind(this),!1),e.page!=="manager"&&e.page!=="preview")throw new Error(`postmsg-channel: "config.page" cannot be "${e.page}"`)}setHandler(e){this.handler=(...r)=>{e.apply(this,r),!this.connected&&this.getLocalFrame().length&&(this.flush(),this.connected=!0)}}send(e,r){const{target:n,allowRegExp:i,allowSymbol:l,allowDate:c,allowError:s,allowUndefined:p,maxDepth:g,space:_}=r||{},x=Object.fromEntries(Object.entries({allowRegExp:i,allowSymbol:l,allowDate:c,allowError:s,allowUndefined:p,maxDepth:g,space:_}).filter(([z,j])=>typeof j<"u")),P={...ere,...$t.CHANNEL_OPTIONS||{},...x},A=this.getFrames(n),M=new URLSearchParams(xE?.search||""),N=C4({key:Z3,event:e,refId:M.get("refId")},P);return A.length?(this.buffer.length&&this.flush(),A.forEach(z=>{try{z.postMessage(N,"*")}catch{Bn.error("sending over postmessage fail")}}),Promise.resolve(null)):new Promise((z,j)=>{this.buffer.push({event:e,resolve:z,reject:j})})}flush(){const{buffer:e}=this;this.buffer=[],e.forEach(r=>{this.send(r.event).then(r.resolve).catch(r.reject)})}getFrames(e){if(this.config.page==="manager"){const n=Array.from(vE.querySelectorAll("iframe[data-is-storybook][data-is-loaded]")).flatMap(i=>{try{return i.contentWindow&&i.dataset.isStorybook!==void 0&&i.id===e?[i.contentWindow]:[]}catch{return[]}});return n?.length?n:this.getCurrentFrames()}return $t&&$t.parent&&$t.parent!==$t.self?[$t.parent]:[]}getCurrentFrames(){return this.config.page==="manager"?Array.from(vE.querySelectorAll('[data-is-storybook="true"]')).flatMap(r=>r.contentWindow?[r.contentWindow]:[]):$t&&$t.parent?[$t.parent]:[]}getLocalFrame(){return this.config.page==="manager"?Array.from(vE.querySelectorAll("#storybook-preview-iframe")).flatMap(r=>r.contentWindow?[r.contentWindow]:[]):$t&&$t.parent?[$t.parent]:[]}handleEvent(e){try{const{data:r}=e,{key:n,event:i,refId:l}=typeof r=="string"&&UC(r)?P4(r,$t.CHANNEL_OPTIONS||{}):r;if(n===Z3){const c=this.config.page==="manager"?'<span style="color: #37D5D3; background: black"> manager </span>':'<span style="color: #1EA7FD; background: black"> preview </span>',s=Object.values(SC).includes(i.type)?`<span style="color: #FF4785">${i.type}</span>`:`<span style="color: #FFAE00">${i.type}</span>`;if(l&&(i.refId=l),i.source=this.config.page==="preview"?e.origin:Qte(e),!i.source){ls.error(`${c} received ${s} but was unable to determine the source of the event`);return}const p=`${c} received ${s} (${r.length})`;ls.debug(xE.origin!==i.source?p:`${p} <span style="color: gray">(on ${xE.origin} from ${i.source})</span>`,...i.args),Aa(this.handler,"ChannelHandler should be set"),this.handler(i)}}catch(r){Bn.error(r)}}};m(A4,"PostMessageTransport");var R4=A4,{WebSocket:tre}=$t,I4=15e3,M4=5e3,O4=class{constructor({url:e,onError:r,page:n}){this.buffer=[],this.isReady=!1,this.isClosed=!1,this.pingTimeout=0,this.socket=new tre(e),this.socket.onopen=()=>{this.isReady=!0,this.heartbeat(),this.flush()},this.socket.onmessage=({data:i})=>{const l=typeof i=="string"&&UC(i)?P4(i):i;Aa(this.handler),this.handler(l),l.type==="ping"&&(this.heartbeat(),this.send({type:"pong"}))},this.socket.onerror=i=>{r&&r(i)},this.socket.onclose=i=>{Aa(this.handler),this.handler({type:KD,args:[{reason:i.reason,code:i.code}],from:n||"preview"}),this.isClosed=!0,clearTimeout(this.pingTimeout)}}heartbeat(){clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{this.socket.close(3008,"timeout")},I4+M4)}setHandler(e){this.handler=e}send(e){this.isClosed||(this.isReady?this.sendNow(e):this.sendLater(e))}sendLater(e){this.buffer.push(e)}sendNow(e){const r=C4(e,{maxDepth:15,...$t.CHANNEL_OPTIONS});this.socket.send(r)}flush(){const{buffer:e}=this;this.buffer=[],e.forEach(r=>this.send(r))}};m(O4,"WebsocketTransport");var k4=O4,{CONFIG_TYPE:rre}=$t,nre=Uv;function L4({page:t,extraTransports:e=[]}){const r=[new R4({page:t}),...e];if(rre==="DEVELOPMENT"){const i=window.location.protocol==="http:"?"ws":"wss",{hostname:l,port:c}=window.location,s=`${i}://${l}:${c}/storybook-server-channel`;r.push(new k4({url:s,onError:m(()=>{},"onError"),page:t}))}const n=new Uv({transports:r});return _E.__prepare(n,t==="manager"?_E.Environment.MANAGER:_E.Environment.PREVIEW),n}m(L4,"createBrowserChannel");var D4={};ko(D4,{CalledExtractOnStoreError:()=>U4,CalledPreviewMethodBeforeInitializationError:()=>Qo,Category:()=>z4,ElementA11yParameterError:()=>cre,EmptyIndexError:()=>Q4,ImplicitActionsDuringRendering:()=>$4,MdxFileWithNoCsfReferencesError:()=>Y4,MissingRenderToCanvasError:()=>H4,MissingStoryAfterHmrError:()=>B4,MissingStoryFromCsfFileError:()=>nF,MountMustBeDestructuredError:()=>HC,NextJsSharpError:()=>ore,NextjsRouterMocksNotAvailable:()=>sre,NoRenderFunctionError:()=>lF,NoStoryMatchError:()=>tF,NoStoryMountedError:()=>uF,StatusTypeIdMismatchError:()=>ire,StoryIndexFetchError:()=>Z4,StoryStoreAccessedBeforeInitializationError:()=>oF,UnknownArgTypesError:()=>are,UnsupportedViewportDimensionError:()=>lre});function $T({code:t,category:e}){const r=String(t).padStart(4,"0");return`SB_${e}_${r}`}m($T,"parseErrorCode");function VT(t){if(/^(?!.*storybook\.js\.org)|[?&]ref=error\b/.test(t))return t;try{const e=new URL(t);return e.searchParams.set("ref","error"),e.toString()}catch{return t}}m(VT,"appendErrorRef");var N4=class F4 extends Error{constructor(e){super(F4.getFullMessage(e)),this.data={},this.fromStorybook=!0,this.category=e.category,this.documentation=e.documentation??!1,this.code=e.code}get fullErrorCode(){return $T({code:this.code,category:this.category})}get name(){const e=this.constructor.name;return`${this.fullErrorCode} (${e})`}static getFullMessage({documentation:e,code:r,category:n,message:i}){let l;return e===!0?l=`https://storybook.js.org/error/${$T({code:r,category:n})}?ref=error`:typeof e=="string"?l=VT(e):Array.isArray(e)&&(l=`
${e.map(c=>`	- ${VT(c)}`).join(`
`)}`),`${i}${l!=null?`

More info: ${l}
`:""}`}};m(N4,"StorybookError");var Si=N4,z4=(t=>(t.BLOCKS="BLOCKS",t.DOCS_TOOLS="DOCS-TOOLS",t.PREVIEW_CLIENT_LOGGER="PREVIEW_CLIENT-LOGGER",t.PREVIEW_CHANNELS="PREVIEW_CHANNELS",t.PREVIEW_CORE_EVENTS="PREVIEW_CORE-EVENTS",t.PREVIEW_INSTRUMENTER="PREVIEW_INSTRUMENTER",t.PREVIEW_API="PREVIEW_API",t.PREVIEW_REACT_DOM_SHIM="PREVIEW_REACT-DOM-SHIM",t.PREVIEW_ROUTER="PREVIEW_ROUTER",t.PREVIEW_THEMING="PREVIEW_THEMING",t.RENDERER_HTML="RENDERER_HTML",t.RENDERER_PREACT="RENDERER_PREACT",t.RENDERER_REACT="RENDERER_REACT",t.RENDERER_SERVER="RENDERER_SERVER",t.RENDERER_SVELTE="RENDERER_SVELTE",t.RENDERER_VUE="RENDERER_VUE",t.RENDERER_VUE3="RENDERER_VUE3",t.RENDERER_WEB_COMPONENTS="RENDERER_WEB-COMPONENTS",t.FRAMEWORK_NEXTJS="FRAMEWORK_NEXTJS",t.ADDON_VITEST="ADDON_VITEST",t.ADDON_A11Y="ADDON_A11Y",t))(z4||{}),j4=class extends Si{constructor(e){super({category:"PREVIEW_API",code:1,message:Kr`
        Couldn't find story matching id '${e.storyId}' after HMR.
        - Did you just rename a story?
        - Did you remove it from your CSF file?
        - Are you sure a story with the id '${e.storyId}' exists?
        - Please check the values in the stories field of your main.js config and see if they would match your CSF File.
        - Also check the browser console and terminal for potential error messages.`}),this.data=e}};m(j4,"MissingStoryAfterHmrError");var B4=j4,q4=class extends Si{constructor(e){super({category:"PREVIEW_API",code:2,documentation:"https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#using-implicit-actions-during-rendering-is-deprecated-for-example-in-the-play-function",message:Kr`
        We detected that you use an implicit action arg while ${e.phase} of your story.  
        ${e.deprecated?`
This is deprecated and won't work in Storybook 8 anymore.
`:""}
        Please provide an explicit spy to your args like this:
          import { fn } from 'storybook/test';
          ... 
          args: {
           ${e.name}: fn()
          }`}),this.data=e}};m(q4,"ImplicitActionsDuringRendering");var $4=q4,V4=class extends Si{constructor(){super({category:"PREVIEW_API",code:3,message:Kr`
        Cannot call \`storyStore.extract()\` without calling \`storyStore.cacheAllCsfFiles()\` first.

        You probably meant to call \`await preview.extract()\` which does the above for you.`})}};m(V4,"CalledExtractOnStoreError");var U4=V4,G4=class extends Si{constructor(){super({category:"PREVIEW_API",code:4,message:Kr`
        Expected your framework's preset to export a \`renderToCanvas\` field.

        Perhaps it needs to be upgraded for Storybook 7.0?`,documentation:"https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#mainjs-framework-field"})}};m(G4,"MissingRenderToCanvasError");var H4=G4,J4=class extends Si{constructor(e){super({category:"PREVIEW_API",code:5,message:Kr`
        Called \`Preview.${e.methodName}()\` before initialization.
        
        The preview needs to load the story index before most methods can be called. If you want
        to call \`${e.methodName}\`, try \`await preview.initializationPromise;\` first.
        
        If you didn't call the above code, then likely it was called by an addon that needs to
        do the above.`}),this.data=e}};m(J4,"CalledPreviewMethodBeforeInitializationError");var Qo=J4,W4=class extends Si{constructor(e){super({category:"PREVIEW_API",code:6,message:Kr`
        Error fetching \`/index.json\`:
        
        ${e.text}

        If you are in development, this likely indicates a problem with your Storybook process,
        check the terminal for errors.

        If you are in a deployed Storybook, there may have been an issue deploying the full Storybook
        build.`}),this.data=e}};m(W4,"StoryIndexFetchError");var Z4=W4,K4=class extends Si{constructor(e){super({category:"PREVIEW_API",code:7,message:Kr`
        Tried to render docs entry ${e.storyId} but it is a MDX file that has no CSF
        references, or autodocs for a CSF file that some doesn't refer to itself.
        
        This likely is an internal error in Storybook's indexing, or you've attached the
        \`attached-mdx\` tag to an MDX file that is not attached.`}),this.data=e}};m(K4,"MdxFileWithNoCsfReferencesError");var Y4=K4,X4=class extends Si{constructor(){super({category:"PREVIEW_API",code:8,message:Kr`
        Couldn't find any stories in your Storybook.

        - Please check your stories field of your main.js config: does it match correctly?
        - Also check the browser console and terminal for error messages.`})}};m(X4,"EmptyIndexError");var Q4=X4,eF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:9,message:Kr`
        Couldn't find story matching '${e.storySpecifier}'.

        - Are you sure a story with that id exists?
        - Please check your stories field of your main.js config.
        - Also check the browser console and terminal for error messages.`}),this.data=e}};m(eF,"NoStoryMatchError");var tF=eF,rF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:10,message:Kr`
        Couldn't find story matching id '${e.storyId}' after importing a CSF file.

        The file was indexed as if the story was there, but then after importing the file in the browser
        we didn't find the story. Possible reasons:
        - You are using a custom story indexer that is misbehaving.
        - You have a custom file loader that is removing or renaming exports.

        Please check your browser console and terminal for errors that may explain the issue.`}),this.data=e}};m(rF,"MissingStoryFromCsfFileError");var nF=rF,iF=class extends Si{constructor(){super({category:"PREVIEW_API",code:11,message:Kr`
        Cannot access the Story Store until the index is ready.

        It is not recommended to use methods directly on the Story Store anyway, in Storybook 9 we will
        remove access to the store entirely`})}};m(iF,"StoryStoreAccessedBeforeInitializationError");var oF=iF,sF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:12,message:Kr`
      Incorrect use of mount in the play function.
      
      To use mount in the play function, you must satisfy the following two requirements: 
      
      1. You *must* destructure the mount property from the \`context\` (the argument passed to your play function). 
         This makes sure that Storybook does not start rendering the story before the play function begins.
      
      2. Your Storybook framework or builder must be configured to transpile to ES2017 or newer. 
         This is because destructuring statements and async/await usages are otherwise transpiled away, 
         which prevents Storybook from recognizing your usage of \`mount\`.
      
      Note that Angular is not supported. As async/await is transpiled to support the zone.js polyfill. 
      
      More info: https://storybook.js.org/docs/writing-tests/interaction-testing?ref=error#run-code-before-the-component-gets-rendered
      
      Received the following play function:
      ${e.playFunction}`}),this.data=e}};m(sF,"MountMustBeDestructuredError");var HC=sF,aF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:14,message:Kr`
        No render function available for storyId '${e.id}'
      `}),this.data=e}};m(aF,"NoRenderFunctionError");var lF=aF,cF=class extends Si{constructor(){super({category:"PREVIEW_API",code:15,message:Kr`
        No component is mounted in your story.
        
        This usually occurs when you destructure mount in the play function, but forget to call it.
        
        For example:

        async play({ mount, canvasElement }) {
          //  mount should be called: await mount(); 
          const canvas = within(canvasElement);
          const button = await canvas.findByRole('button');
          await userEvent.click(button);
        };

        Make sure to either remove it or call mount in your play function.
      `})}};m(cF,"NoStoryMountedError");var uF=cF,hF=class extends Si{constructor(e){super({category:"PREVIEW_API",code:16,message:`Status has typeId "${e.status.typeId}" but was added to store with typeId "${e.typeId}". Full status: ${JSON.stringify(e.status,null,2)}`}),this.data=e}};m(hF,"StatusTypeIdMismatchError");var ire=hF,dF=class extends Si{constructor(){super({category:"FRAMEWORK_NEXTJS",code:1,documentation:"https://storybook.js.org/docs/get-started/nextjs#faq",message:Kr`
      You are importing avif images, but you don't have sharp installed.

      You have to install sharp in order to use image optimization features in Next.js.
      `})}};m(dF,"NextJsSharpError");var ore=dF,pF=class extends Si{constructor(e){super({category:"FRAMEWORK_NEXTJS",code:2,message:Kr`
        Tried to access router mocks from "${e.importType}" but they were not created yet. You might be running code in an unsupported environment.
      `}),this.data=e}};m(pF,"NextjsRouterMocksNotAvailable");var sre=pF,fF=class extends Si{constructor(e){super({category:"DOCS-TOOLS",code:1,documentation:"https://github.com/storybookjs/storybook/issues/26606",message:Kr`
        There was a failure when generating detailed ArgTypes in ${e.language} for:
        ${JSON.stringify(e.type,null,2)} 
        
        Storybook will fall back to use a generic type description instead.

        This type is either not supported or it is a bug in the docgen generation in Storybook.
        If you think this is a bug, please detail it as much as possible in the Github issue.
      `}),this.data=e}};m(fF,"UnknownArgTypesError");var are=fF,mF=class extends Si{constructor(e){super({category:"ADDON_VITEST",code:1,message:Kr`
        Encountered an unsupported value "${e.value}" when setting the viewport ${e.dimension} dimension.
        
        The Storybook plugin only supports values in the following units:
        - px, vh, vw, em, rem and %.
        
        You can either change the viewport for this story to use one of the supported units or skip the test by adding '!test' to the story's tags per https://storybook.js.org/docs/writing-stories/tags
      `}),this.data=e}};m(mF,"UnsupportedViewportDimensionError");var lre=mF,gF=class extends Si{constructor(){super({category:"ADDON_A11Y",code:1,documentation:"https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#a11y-addon-replace-element-parameter-with-context-parameter",message:'The "element" parameter in parameters.a11y has been removed. Use "context" instead.'})}};m(gF,"ElementA11yParameterError");var cre=gF,yF={};ko(yF,{Addon_TypesEnum:()=>_F});var _F=(t=>(t.TAB="tab",t.PANEL="panel",t.TOOL="tool",t.TOOLEXTRA="toolextra",t.PREVIEW="preview",t.experimental_PAGE="page",t.experimental_TEST_PROVIDER="test-provider",t))(_F||{}),bF={};ko(bF,{ADDON_ID:()=>Zv,CLEAR_ID:()=>dre,CYCLIC_KEY:()=>pre,EVENT_ID:()=>vF,PANEL_ID:()=>hre,PARAM_KEY:()=>ure,action:()=>Of,actions:()=>$ce,config:()=>ay,configureActions:()=>jce});var ure="actions",Zv="storybook/actions",hre=`${Zv}/panel`,vF=`${Zv}/action-event`,dre=`${Zv}/action-clear`,pre="$___storybook.isCyclic",UT={};ko(UT,{DocsContext:()=>II,HooksContext:()=>WC,Preview:()=>YV,PreviewWeb:()=>Mce,PreviewWithSelection:()=>aU,ReporterAPI:()=>PI,StoryStore:()=>HV,UrlStore:()=>fU,WebView:()=>yU,addons:()=>Rs,applyHooks:()=>TF,combineArgs:()=>av,combineParameters:()=>kh,composeConfigs:()=>Lh,composeStepRunners:()=>TI,composeStories:()=>$V,composeStory:()=>RI,createPlaywrightTest:()=>VV,decorateStory:()=>yI,defaultDecorateStory:()=>bI,emitTransformCode:()=>wU,filterArgTypes:()=>NV,getCsfFactoryAnnotations:()=>AI,inferControls:()=>EI,makeDecorator:()=>yre,mockChannel:()=>JC,normalizeArrays:()=>kn,normalizeProjectAnnotations:()=>sy,normalizeStory:()=>Lp,pauseAnimations:()=>ux,prepareMeta:()=>vI,prepareStory:()=>cx,sanitizeStoryContextUpdate:()=>_I,setDefaultProjectAnnotations:()=>jV,setProjectAnnotations:()=>qV,simulateDOMContentLoaded:()=>hv,simulatePageLoad:()=>vU,sortStoriesV7:()=>_ce,useArgs:()=>OF,useCallback:()=>$p,useChannel:()=>IF,useEffect:()=>Wc,useGlobals:()=>kF,useMemo:()=>YC,useParameter:()=>MF,useReducer:()=>RF,useRef:()=>CF,useState:()=>AF,useStoryContext:()=>Dy,userOrAutoTitle:()=>mce,userOrAutoTitleFromSpecifier:()=>WV,waitForAnimations:()=>hx});function JC(){const t={setHandler:m(()=>{},"setHandler"),send:m(()=>{},"send")};return new Uv({transport:t})}m(JC,"mockChannel");var xF=class{constructor(){this.getChannel=m(()=>{if(!this.channel){const e=JC();return this.setChannel(e),e}return this.channel},"getChannel"),this.ready=m(()=>this.promise,"ready"),this.hasChannel=m(()=>!!this.channel,"hasChannel"),this.setChannel=m(e=>{this.channel=e,this.resolve()},"setChannel"),this.promise=new Promise(e=>{this.resolve=()=>e(this.getChannel())})}};m(xF,"AddonStore");var fre=xF,wE="__STORYBOOK_ADDONS_PREVIEW";function wF(){return $t[wE]||($t[wE]=new fre),$t[wE]}m(wF,"getAddonsStore");var Rs=wF(),EF=class{constructor(){this.hookListsMap=void 0,this.mountedDecorators=void 0,this.prevMountedDecorators=void 0,this.currentHooks=void 0,this.nextHookIndex=void 0,this.currentPhase=void 0,this.currentEffects=void 0,this.prevEffects=void 0,this.currentDecoratorName=void 0,this.hasUpdates=void 0,this.currentContext=void 0,this.renderListener=m(e=>{e===this.currentContext?.id&&(this.triggerEffects(),this.currentContext=null,this.removeRenderListeners())},"renderListener"),this.init()}init(){this.hookListsMap=new WeakMap,this.mountedDecorators=new Set,this.prevMountedDecorators=new Set,this.currentHooks=[],this.nextHookIndex=0,this.currentPhase="NONE",this.currentEffects=[],this.prevEffects=[],this.currentDecoratorName=null,this.hasUpdates=!1,this.currentContext=null}clean(){this.prevEffects.forEach(e=>{e.destroy&&e.destroy()}),this.init(),this.removeRenderListeners()}getNextHook(){const e=this.currentHooks[this.nextHookIndex];return this.nextHookIndex+=1,e}triggerEffects(){this.prevEffects.forEach(e=>{!this.currentEffects.includes(e)&&e.destroy&&e.destroy()}),this.currentEffects.forEach(e=>{this.prevEffects.includes(e)||(e.destroy=e.create())}),this.prevEffects=this.currentEffects,this.currentEffects=[]}addRenderListeners(){this.removeRenderListeners(),Rs.getChannel().on(vb,this.renderListener)}removeRenderListeners(){Rs.getChannel().removeListener(vb,this.renderListener)}};m(EF,"HooksContext");var WC=EF;function GT(t){const e=m((...r)=>{const{hooks:n}=typeof r[0]=="function"?r[1]:r[0],i=n.currentPhase,l=n.currentHooks,c=n.nextHookIndex,s=n.currentDecoratorName;n.currentDecoratorName=t.name,n.prevMountedDecorators.has(t)?(n.currentPhase="UPDATE",n.currentHooks=n.hookListsMap.get(t)||[]):(n.currentPhase="MOUNT",n.currentHooks=[],n.hookListsMap.set(t,n.currentHooks),n.prevMountedDecorators.add(t)),n.nextHookIndex=0;const p=$t.STORYBOOK_HOOKS_CONTEXT;$t.STORYBOOK_HOOKS_CONTEXT=n;const g=t(...r);if($t.STORYBOOK_HOOKS_CONTEXT=p,n.currentPhase==="UPDATE"&&n.getNextHook()!=null)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return n.currentPhase=i,n.currentHooks=l,n.nextHookIndex=c,n.currentDecoratorName=s,g},"hookified");return e.originalFn=t,e}m(GT,"hookify");var EE=0,mre=25,TF=m(t=>(e,r)=>{const n=t(GT(e),r.map(i=>GT(i)));return i=>{const{hooks:l}=i;l.prevMountedDecorators??(l.prevMountedDecorators=new Set),l.mountedDecorators=new Set([e,...r]),l.currentContext=i,l.hasUpdates=!1;let c=n(i);for(EE=1;l.hasUpdates;)if(l.hasUpdates=!1,l.currentEffects=[],c=n(i),EE+=1,EE>mre)throw new Error("Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.");return l.addRenderListeners(),c}},"applyHooks"),gre=m((t,e)=>t.length===e.length&&t.every((r,n)=>r===e[n]),"areDepsEqual"),ZC=m(()=>new Error("Storybook preview hooks can only be called inside decorators and story functions."),"invalidHooksError");function KC(){return $t.STORYBOOK_HOOKS_CONTEXT||null}m(KC,"getHooksContextOrNull");function Kv(){const t=KC();if(t==null)throw ZC();return t}m(Kv,"getHooksContextOrThrow");function SF(t,e,r){const n=Kv();if(n.currentPhase==="MOUNT"){r!=null&&!Array.isArray(r)&&Bn.warn(`${t} received a final argument that is not an array (instead, received ${r}). When specified, the final argument must be an array.`);const i={name:t,deps:r};return n.currentHooks.push(i),e(i),i}if(n.currentPhase==="UPDATE"){const i=n.getNextHook();if(i==null)throw new Error("Rendered more hooks than during the previous render.");return i.name!==t&&Bn.warn(`Storybook has detected a change in the order of Hooks${n.currentDecoratorName?` called by ${n.currentDecoratorName}`:""}. This will lead to bugs and errors if not fixed.`),r!=null&&i.deps==null&&Bn.warn(`${t} received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.`),r!=null&&i.deps!=null&&r.length!==i.deps.length&&Bn.warn(`The final argument passed to ${t} changed size between renders. The order and size of this array must remain constant.
Previous: ${i.deps}
Incoming: ${r}`),(r==null||i.deps==null||!gre(r,i.deps))&&(e(i),i.deps=r),i}throw ZC()}m(SF,"useHook");function Ly(t,e,r){const{memoizedState:n}=SF(t,i=>{i.memoizedState=e()},r);return n}m(Ly,"useMemoLike");function YC(t,e){return Ly("useMemo",t,e)}m(YC,"useMemo");function $p(t,e){return Ly("useCallback",()=>t,e)}m($p,"useCallback");function XC(t,e){return Ly(t,()=>({current:e}),[])}m(XC,"useRefLike");function CF(t){return XC("useRef",t)}m(CF,"useRef");function PF(){const t=KC();if(t!=null&&t.currentPhase!=="NONE")t.hasUpdates=!0;else try{Rs.getChannel().emit(AC)}catch{Bn.warn("State updates of Storybook preview hooks work only in browser")}}m(PF,"triggerUpdate");function QC(t,e){const r=XC(t,typeof e=="function"?e():e),n=m(i=>{r.current=typeof i=="function"?i(r.current):i,PF()},"setState");return[r.current,n]}m(QC,"useStateLike");function AF(t){return QC("useState",t)}m(AF,"useState");function RF(t,e,r){const n=r!=null?()=>r(e):e,[i,l]=QC("useReducer",n);return[i,m(s=>l(p=>t(p,s)),"dispatch")]}m(RF,"useReducer");function Wc(t,e){const r=Kv(),n=Ly("useEffect",()=>({create:t}),e);r.currentEffects.includes(n)||r.currentEffects.push(n)}m(Wc,"useEffect");function IF(t,e=[]){const r=Rs.getChannel();return Wc(()=>(Object.entries(t).forEach(([n,i])=>r.on(n,i)),()=>{Object.entries(t).forEach(([n,i])=>r.removeListener(n,i))}),[...Object.keys(t),...e]),$p(r.emit.bind(r),[r])}m(IF,"useChannel");function Dy(){const{currentContext:t}=Kv();if(t==null)throw ZC();return t}m(Dy,"useStoryContext");function MF(t,e){const{parameters:r}=Dy();if(t)return r[t]??e}m(MF,"useParameter");function OF(){const t=Rs.getChannel(),{id:e,args:r}=Dy(),n=$p(l=>t.emit(OC,{storyId:e,updatedArgs:l}),[t,e]),i=$p(l=>t.emit(RC,{storyId:e,argNames:l}),[t,e]);return[r,n,i]}m(OF,"useArgs");function kF(){const t=Rs.getChannel(),{globals:e}=Dy(),r=$p(n=>t.emit(MC,{globals:n}),[t]);return[e,r]}m(kF,"useGlobals");var yre=m(({name:t,parameterName:e,wrapper:r,skipIfNoParametersOrOptions:n=!1})=>{const i=m(l=>(c,s)=>{const p=s.parameters&&s.parameters[e];return p&&p.disable||n&&!l&&!p?c(s):r(c,s,{options:l,parameters:p})},"decorator");return(...l)=>typeof l[0]=="function"?i()(...l):(...c)=>{if(c.length>1)return l.length>1?i(l)(...c):i(...l)(...c);throw new Error(`Passing stories directly into ${t}() is not allowed,
        instead use addDecorator(${t}) and pass options with the '${e}' parameter`)}},"makeDecorator");function LF(t){return t.replace(/_/g," ").replace(/-/g," ").replace(/\./g," ").replace(/([^\n])([A-Z])([a-z])/g,(e,r,n,i)=>`${r} ${n}${i}`).replace(/([a-z])([A-Z])/g,(e,r,n)=>`${r} ${n}`).replace(/([a-z])([0-9])/gi,(e,r,n)=>`${r} ${n}`).replace(/([0-9])([a-z])/gi,(e,r,n)=>`${r} ${n}`).replace(/(\s|^)(\w)/g,(e,r,n)=>`${r}${n.toUpperCase()}`).replace(/ +/g," ").trim()}m(LF,"toStartCaseStr");var K3=Ti(JZ(),1),DF=m(t=>t.map(e=>typeof e<"u").filter(Boolean).length,"count"),_re=m((t,e)=>{const{exists:r,eq:n,neq:i,truthy:l}=t;if(DF([r,n,i,l])>1)throw new Error(`Invalid conditional test ${JSON.stringify({exists:r,eq:n,neq:i})}`);if(typeof n<"u")return(0,K3.isEqual)(e,n);if(typeof i<"u")return!(0,K3.isEqual)(e,i);if(typeof r<"u"){const s=typeof e<"u";return r?s:!s}return(typeof l>"u"?!0:l)?!!e:!e},"testValue"),bre=m((t,e,r)=>{if(!t.if)return!0;const{arg:n,global:i}=t.if;if(DF([n,i])!==1)throw new Error(`Invalid conditional value ${JSON.stringify({arg:n,global:i})}`);const l=n?e[n]:r[i];return _re(t.if,l)},"includeConditionalArg");function NF(t){return t!=null&&FF(t).includes("mount")}m(NF,"mountDestructured");function FF(t){const e=t.toString().match(/[^(]*\(([^)]*)/);if(!e)return[];const r=HT(e[1]);if(!r.length)return[];const n=r[0];return n.startsWith("{")&&n.endsWith("}")?HT(n.slice(1,-1).replace(/\s/g,"")).map(l=>l.replace(/:.*|=.*/g,"")):[]}m(FF,"getUsedProps");function HT(t){const e=[],r=[];let n=0;for(let l=0;l<t.length;l++)if(t[l]==="{"||t[l]==="[")r.push(t[l]==="{"?"}":"]");else if(t[l]===r[r.length-1])r.pop();else if(!r.length&&t[l]===","){const c=t.substring(n,l).trim();c&&e.push(c),n=l+1}const i=t.substring(n).trim();return i&&e.push(i),e}m(HT,"splitByComma");var zF={};ko(zF,{argsEnhancers:()=>wre});var jF=m((t,e)=>typeof e[t]>"u"&&!(t in e),"isInInitialArgs"),vre=m(t=>{const{initialArgs:e,argTypes:r,id:n,parameters:{actions:i}}=t;if(!i||i.disable||!i.argTypesRegex||!r)return{};const l=new RegExp(i.argTypesRegex);return Object.entries(r).filter(([s])=>!!l.test(s)).reduce((s,[p,g])=>(jF(p,e)&&(s[p]=Of(p,{implicit:!0,id:n})),s),{})},"inferActionsFromArgTypesRegex"),xre=m(t=>{const{initialArgs:e,argTypes:r,parameters:{actions:n}}=t;return n?.disable||!r?{}:Object.entries(r).filter(([l,c])=>!!c.action).reduce((l,[c,s])=>(jF(c,e)&&(l[c]=Of(typeof s.action=="string"?s.action:c)),l),{})},"addActionsFromArgTypes"),wre=[xre,vre],BF={};ko(BF,{loaders:()=>Oae});var qF={};ko(qF,{buildQueries:()=>hse,clearAllMocks:()=>hR,configure:()=>dse,createEvent:()=>pse,expect:()=>Rae,findAllByAltText:()=>mse,findAllByDisplayValue:()=>gse,findAllByLabelText:()=>yse,findAllByPlaceholderText:()=>_se,findAllByRole:()=>bse,findAllByTestId:()=>vse,findAllByText:()=>xse,findAllByTitle:()=>wse,findByAltText:()=>Ese,findByDisplayValue:()=>Tse,findByLabelText:()=>Sse,findByPlaceholderText:()=>Cse,findByRole:()=>Pse,findByTestId:()=>Ase,findByText:()=>Rse,findByTitle:()=>Ise,fireEvent:()=>fse,fn:()=>cR,getAllByAltText:()=>Mse,getAllByDisplayValue:()=>Ose,getAllByLabelText:()=>kse,getAllByPlaceholderText:()=>Lse,getAllByRole:()=>Dse,getAllByTestId:()=>Nse,getAllByText:()=>Fse,getAllByTitle:()=>zse,getByAltText:()=>jse,getByDisplayValue:()=>Bse,getByLabelText:()=>qse,getByPlaceholderText:()=>$se,getByRole:()=>Vse,getByTestId:()=>Use,getByText:()=>Gse,getByTitle:()=>Hse,getConfig:()=>Jse,getDefaultNormalizer:()=>Wse,getElementError:()=>Zse,getNodeText:()=>Kse,getQueriesForElement:()=>Yse,getRoles:()=>Xse,getSuggestedQuery:()=>Qse,isInaccessible:()=>eae,isMockFunction:()=>dh,logDOM:()=>tae,logRoles:()=>rae,mocked:()=>nq,mocks:()=>Ky,onMockCall:()=>lR,prettyDOM:()=>nae,prettyFormat:()=>Pae,queries:()=>iae,queryAllByAltText:()=>oae,queryAllByAttribute:()=>sae,queryAllByDisplayValue:()=>aae,queryAllByLabelText:()=>lae,queryAllByPlaceholderText:()=>cae,queryAllByRole:()=>uae,queryAllByTestId:()=>hae,queryAllByText:()=>dae,queryAllByTitle:()=>pae,queryByAltText:()=>fae,queryByAttribute:()=>mae,queryByDisplayValue:()=>gae,queryByLabelText:()=>yae,queryByPlaceholderText:()=>_ae,queryByRole:()=>bae,queryByTestId:()=>vae,queryByText:()=>xae,queryByTitle:()=>wae,queryHelpers:()=>Eae,resetAllMocks:()=>dR,restoreAllMocks:()=>pR,sb:()=>Iae,screen:()=>Tae,spyOn:()=>ioe,uninstrumentedUserEvent:()=>Z9,userEvent:()=>Aae,waitFor:()=>Sae,waitForElementToBeRemoved:()=>Cae,within:()=>W9});var Ere={reset:[0,0],bold:[1,22,"\x1B[22m\x1B[1m"],dim:[2,22,"\x1B[22m\x1B[2m"],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},$F=Object.entries(Ere);function Ny(t){return String(t)}m(Ny,"a");Ny.open="";Ny.close="";$F.reduce((t,[e])=>(t[e]=Ny,t),{isColorSupported:!1});function VF(t=!1){let e=typeof process<"u"?process:void 0,r=e?.env||{},n=e?.argv||[];return!("NO_COLOR"in r||n.includes("--no-color"))&&("FORCE_COLOR"in r||n.includes("--color")||e?.platform==="win32"||t&&r.TERM!=="dumb"||"CI"in r)||typeof window<"u"&&!!window.chrome}m(VF,"C");function UF(t=!1){let e=VF(t),r=m((c,s,p,g)=>{let _="",x=0;do _+=c.substring(x,g)+p,x=g+s.length,g=c.indexOf(s,x);while(~g);return _+c.substring(x)},"i"),n=m((c,s,p=c)=>{let g=m(_=>{let x=String(_),P=x.indexOf(s,c.length);return~P?c+r(x,s,p,P)+s:c+x+s},"o");return g.open=c,g.close=s,g},"g"),i={isColorSupported:e},l=m(c=>`\x1B[${c}m`,"d");for(let[c,s]of $F)i[c]=e?n(l(s[0]),l(s[1]),s[2]):Ny;return i}m(UF,"p");var ii=UF();function eP(t,e){return e.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in t)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:m(function(){return r[n]},"get")})}})}),Object.freeze(t)}m(eP,"_mergeNamespaces");function GF(t,e){const r=Object.keys(t),n=e===null?r:r.sort(e);if(Object.getOwnPropertySymbols)for(const i of Object.getOwnPropertySymbols(t))Object.getOwnPropertyDescriptor(t,i).enumerable&&n.push(i);return n}m(GF,"getKeysOfEnumerableProperties");function xf(t,e,r,n,i,l,c=": "){let s="",p=0,g=t.next();if(!g.done){s+=e.spacingOuter;const _=r+e.indent;for(;!g.done;){if(s+=_,p++===e.maxWidth){s+="";break}const x=l(g.value[0],e,_,n,i),P=l(g.value[1],e,_,n,i);s+=x+c+P,g=t.next(),g.done?e.min||(s+=","):s+=`,${e.spacingInner}`}s+=e.spacingOuter+r}return s}m(xf,"printIteratorEntries");function Yv(t,e,r,n,i,l){let c="",s=0,p=t.next();if(!p.done){c+=e.spacingOuter;const g=r+e.indent;for(;!p.done;){if(c+=g,s++===e.maxWidth){c+="";break}c+=l(p.value,e,g,n,i),p=t.next(),p.done?e.min||(c+=","):c+=`,${e.spacingInner}`}c+=e.spacingOuter+r}return c}m(Yv,"printIteratorValues");function $g(t,e,r,n,i,l){let c="";t=t instanceof ArrayBuffer?new DataView(t):t;const s=m(g=>g instanceof DataView,"isDataView"),p=s(t)?t.byteLength:t.length;if(p>0){c+=e.spacingOuter;const g=r+e.indent;for(let _=0;_<p;_++){if(c+=g,_===e.maxWidth){c+="";break}(s(t)||_ in t)&&(c+=l(s(t)?t.getInt8(_):t[_],e,g,n,i)),_<p-1?c+=`,${e.spacingInner}`:e.min||(c+=",")}c+=e.spacingOuter+r}return c}m($g,"printListItems");function Xv(t,e,r,n,i,l){let c="";const s=GF(t,e.compareKeys);if(s.length>0){c+=e.spacingOuter;const p=r+e.indent;for(let g=0;g<s.length;g++){const _=s[g],x=l(_,e,p,n,i),P=l(t[_],e,p,n,i);c+=`${p+x}: ${P}`,g<s.length-1?c+=`,${e.spacingInner}`:e.min||(c+=",")}c+=e.spacingOuter+r}return c}m(Xv,"printObjectProperties");var Tre=typeof Symbol=="function"&&Symbol.for?Symbol.for("jest.asymmetricMatcher"):1267621,T0=" ",Sre=m((t,e,r,n,i,l)=>{const c=t.toString();if(c==="ArrayContaining"||c==="ArrayNotContaining")return++n>e.maxDepth?`[${c}]`:`${c+T0}[${$g(t.sample,e,r,n,i,l)}]`;if(c==="ObjectContaining"||c==="ObjectNotContaining")return++n>e.maxDepth?`[${c}]`:`${c+T0}{${Xv(t.sample,e,r,n,i,l)}}`;if(c==="StringMatching"||c==="StringNotMatching"||c==="StringContaining"||c==="StringNotContaining")return c+T0+l(t.sample,e,r,n,i);if(typeof t.toAsymmetricMatcher!="function")throw new TypeError(`Asymmetric matcher ${t.constructor.name} does not implement toAsymmetricMatcher()`);return t.toAsymmetricMatcher()},"serialize$5"),Cre=m(t=>t&&t.$$typeof===Tre,"test$5"),Pre={serialize:Sre,test:Cre},Are=" ",HF=new Set(["DOMStringMap","NamedNodeMap"]),Rre=/^(?:HTML\w*Collection|NodeList)$/;function JF(t){return HF.has(t)||Rre.test(t)}m(JF,"testName");var Ire=m(t=>t&&t.constructor&&!!t.constructor.name&&JF(t.constructor.name),"test$4");function WF(t){return t.constructor.name==="NamedNodeMap"}m(WF,"isNamedNodeMap");var Mre=m((t,e,r,n,i,l)=>{const c=t.constructor.name;return++n>e.maxDepth?`[${c}]`:(e.min?"":c+Are)+(HF.has(c)?`{${Xv(WF(t)?[...t].reduce((s,p)=>(s[p.name]=p.value,s),{}):{...t},e,r,n,i,l)}}`:`[${$g([...t],e,r,n,i,l)}]`)},"serialize$4"),Ore={serialize:Mre,test:Ire};function tP(t){return t.replaceAll("<","&lt;").replaceAll(">","&gt;")}m(tP,"escapeHTML");function Qv(t,e,r,n,i,l,c){const s=n+r.indent,p=r.colors;return t.map(g=>{const _=e[g];let x=c(_,r,s,i,l);return typeof _!="string"&&(x.includes(`
`)&&(x=r.spacingOuter+s+x+r.spacingOuter+n),x=`{${x}}`),`${r.spacingInner+n+p.prop.open+g+p.prop.close}=${p.value.open}${x}${p.value.close}`}).join("")}m(Qv,"printProps");function e1(t,e,r,n,i,l){return t.map(c=>e.spacingOuter+r+(typeof c=="string"?rP(c,e):l(c,e,r,n,i))).join("")}m(e1,"printChildren");function rP(t,e){const r=e.colors.content;return r.open+tP(t)+r.close}m(rP,"printText");function ZF(t,e){const r=e.colors.comment;return`${r.open}<!--${tP(t)}-->${r.close}`}m(ZF,"printComment");function t1(t,e,r,n,i){const l=n.colors.tag;return`${l.open}<${t}${e&&l.close+e+n.spacingOuter+i+l.open}${r?`>${l.close}${r}${n.spacingOuter}${i}${l.open}</${t}`:`${e&&!n.min?"":" "}/`}>${l.close}`}m(t1,"printElement");function r1(t,e){const r=e.colors.tag;return`${r.open}<${t}${r.close} ${r.open} />${r.close}`}m(r1,"printElementAsLeaf");var kre=1,KF=3,YF=8,XF=11,Lre=/^(?:(?:HTML|SVG)\w*)?Element$/;function QF(t){try{return typeof t.hasAttribute=="function"&&t.hasAttribute("is")}catch{return!1}}m(QF,"testHasAttribute");function e6(t){const e=t.constructor.name,{nodeType:r,tagName:n}=t,i=typeof n=="string"&&n.includes("-")||QF(t);return r===kre&&(Lre.test(e)||i)||r===KF&&e==="Text"||r===YF&&e==="Comment"||r===XF&&e==="DocumentFragment"}m(e6,"testNode");var Dre=m(t=>{var e;return(t==null||(e=t.constructor)===null||e===void 0?void 0:e.name)&&e6(t)},"test$3");function t6(t){return t.nodeType===KF}m(t6,"nodeIsText");function r6(t){return t.nodeType===YF}m(r6,"nodeIsComment");function Y0(t){return t.nodeType===XF}m(Y0,"nodeIsFragment");var Nre=m((t,e,r,n,i,l)=>{if(t6(t))return rP(t.data,e);if(r6(t))return ZF(t.data,e);const c=Y0(t)?"DocumentFragment":t.tagName.toLowerCase();return++n>e.maxDepth?r1(c,e):t1(c,Qv(Y0(t)?[]:Array.from(t.attributes,s=>s.name).sort(),Y0(t)?{}:[...t.attributes].reduce((s,p)=>(s[p.name]=p.value,s),{}),e,r+e.indent,n,i,l),e1(Array.prototype.slice.call(t.childNodes||t.children),e,r+e.indent,n,i,l),e,r)},"serialize$3"),Fre={serialize:Nre,test:Dre},zre="@@__IMMUTABLE_ITERABLE__@@",jre="@@__IMMUTABLE_LIST__@@",Bre="@@__IMMUTABLE_KEYED__@@",qre="@@__IMMUTABLE_MAP__@@",Y3="@@__IMMUTABLE_ORDERED__@@",$re="@@__IMMUTABLE_RECORD__@@",Vre="@@__IMMUTABLE_SEQ__@@",Ure="@@__IMMUTABLE_SET__@@",Gre="@@__IMMUTABLE_STACK__@@",Vp=m(t=>`Immutable.${t}`,"getImmutableName"),n1=m(t=>`[${t}]`,"printAsLeaf"),Vg=" ",X3="";function n6(t,e,r,n,i,l,c){return++n>e.maxDepth?n1(Vp(c)):`${Vp(c)+Vg}{${xf(t.entries(),e,r,n,i,l)}}`}m(n6,"printImmutableEntries");function i6(t){let e=0;return{next(){if(e<t._keys.length){const r=t._keys[e++];return{done:!1,value:[r,t.get(r)]}}return{done:!0,value:void 0}}}}m(i6,"getRecordEntries");function o6(t,e,r,n,i,l){const c=Vp(t._name||"Record");return++n>e.maxDepth?n1(c):`${c+Vg}{${xf(i6(t),e,r,n,i,l)}}`}m(o6,"printImmutableRecord");function s6(t,e,r,n,i,l){const c=Vp("Seq");return++n>e.maxDepth?n1(c):t[Bre]?`${c+Vg}{${t._iter||t._object?xf(t.entries(),e,r,n,i,l):X3}}`:`${c+Vg}[${t._iter||t._array||t._collection||t._iterable?Yv(t.values(),e,r,n,i,l):X3}]`}m(s6,"printImmutableSeq");function X0(t,e,r,n,i,l,c){return++n>e.maxDepth?n1(Vp(c)):`${Vp(c)+Vg}[${Yv(t.values(),e,r,n,i,l)}]`}m(X0,"printImmutableValues");var Hre=m((t,e,r,n,i,l)=>t[qre]?n6(t,e,r,n,i,l,t[Y3]?"OrderedMap":"Map"):t[jre]?X0(t,e,r,n,i,l,"List"):t[Ure]?X0(t,e,r,n,i,l,t[Y3]?"OrderedSet":"Set"):t[Gre]?X0(t,e,r,n,i,l,"Stack"):t[Vre]?s6(t,e,r,n,i,l):o6(t,e,r,n,i,l),"serialize$2"),Jre=m(t=>t&&(t[zre]===!0||t[$re]===!0),"test$2"),Wre={serialize:Hre,test:Jre};function nP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}m(nP,"getDefaultExportFromCjs");var TE={exports:{}},Pn={},Q3;function a6(){if(Q3)return Pn;Q3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),P=Symbol.for("react.view_transition"),A=Symbol.for("react.client.reference");function M(N){if(typeof N=="object"&&N!==null){var z=N.$$typeof;switch(z){case t:switch(N=N.type,N){case r:case i:case n:case p:case g:case P:return N;default:switch(N=N&&N.$$typeof,N){case c:case s:case x:case _:return N;case l:return N;default:return z}}case e:return z}}}return m(M,"typeOf"),Pn.ContextConsumer=l,Pn.ContextProvider=c,Pn.Element=t,Pn.ForwardRef=s,Pn.Fragment=r,Pn.Lazy=x,Pn.Memo=_,Pn.Portal=e,Pn.Profiler=i,Pn.StrictMode=n,Pn.Suspense=p,Pn.SuspenseList=g,Pn.isContextConsumer=function(N){return M(N)===l},Pn.isContextProvider=function(N){return M(N)===c},Pn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},Pn.isForwardRef=function(N){return M(N)===s},Pn.isFragment=function(N){return M(N)===r},Pn.isLazy=function(N){return M(N)===x},Pn.isMemo=function(N){return M(N)===_},Pn.isPortal=function(N){return M(N)===e},Pn.isProfiler=function(N){return M(N)===i},Pn.isStrictMode=function(N){return M(N)===n},Pn.isSuspense=function(N){return M(N)===p},Pn.isSuspenseList=function(N){return M(N)===g},Pn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===i||N===n||N===p||N===g||typeof N=="object"&&N!==null&&(N.$$typeof===x||N.$$typeof===_||N.$$typeof===c||N.$$typeof===l||N.$$typeof===s||N.$$typeof===A||N.getModuleId!==void 0)},Pn.typeOf=M,Pn}m(a6,"requireReactIs_production");var eO;function l6(){return eO||(eO=1,TE.exports=a6()),TE.exports}m(l6,"requireReactIs$1");var c6=l6(),Zre=nP(c6),Kre=eP({__proto__:null,default:Zre},[c6]),SE={exports:{}},_n={},tO;function u6(){if(tO)return _n;tO=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),s=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),M;M=Symbol.for("react.module.reference");function N(z){if(typeof z=="object"&&z!==null){var j=z.$$typeof;switch(j){case t:switch(z=z.type,z){case r:case i:case n:case g:case _:return z;default:switch(z=z&&z.$$typeof,z){case s:case c:case p:case P:case x:case l:return z;default:return j}}case e:return j}}}return m(N,"v"),_n.ContextConsumer=c,_n.ContextProvider=l,_n.Element=t,_n.ForwardRef=p,_n.Fragment=r,_n.Lazy=P,_n.Memo=x,_n.Portal=e,_n.Profiler=i,_n.StrictMode=n,_n.Suspense=g,_n.SuspenseList=_,_n.isAsyncMode=function(){return!1},_n.isConcurrentMode=function(){return!1},_n.isContextConsumer=function(z){return N(z)===c},_n.isContextProvider=function(z){return N(z)===l},_n.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===t},_n.isForwardRef=function(z){return N(z)===p},_n.isFragment=function(z){return N(z)===r},_n.isLazy=function(z){return N(z)===P},_n.isMemo=function(z){return N(z)===x},_n.isPortal=function(z){return N(z)===e},_n.isProfiler=function(z){return N(z)===i},_n.isStrictMode=function(z){return N(z)===n},_n.isSuspense=function(z){return N(z)===g},_n.isSuspenseList=function(z){return N(z)===_},_n.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===r||z===i||z===n||z===g||z===_||z===A||typeof z=="object"&&z!==null&&(z.$$typeof===P||z.$$typeof===x||z.$$typeof===l||z.$$typeof===c||z.$$typeof===p||z.$$typeof===M||z.getModuleId!==void 0)},_n.typeOf=N,_n}m(u6,"requireReactIs_production_min");var rO;function h6(){return rO||(rO=1,SE.exports=u6()),SE.exports}m(h6,"requireReactIs");var d6=h6(),Yre=nP(d6),Xre=eP({__proto__:null,default:Yre},[d6]),Qre=["isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isSuspenseList","isValidElementType"],Wu=Object.fromEntries(Qre.map(t=>[t,e=>Xre[t](e)||Kre[t](e)]));function iP(t,e=[]){if(Array.isArray(t))for(const r of t)iP(r,e);else t!=null&&t!==!1&&t!==""&&e.push(t);return e}m(iP,"getChildren");function JT(t){const e=t.type;if(typeof e=="string")return e;if(typeof e=="function")return e.displayName||e.name||"Unknown";if(Wu.isFragment(t))return"React.Fragment";if(Wu.isSuspense(t))return"React.Suspense";if(typeof e=="object"&&e!==null){if(Wu.isContextProvider(t))return"Context.Provider";if(Wu.isContextConsumer(t))return"Context.Consumer";if(Wu.isForwardRef(t)){if(e.displayName)return e.displayName;const r=e.render.displayName||e.render.name||"";return r===""?"ForwardRef":`ForwardRef(${r})`}if(Wu.isMemo(t)){const r=e.displayName||e.type.displayName||e.type.name||"";return r===""?"Memo":`Memo(${r})`}}return"UNDEFINED"}m(JT,"getType");function p6(t){const{props:e}=t;return Object.keys(e).filter(r=>r!=="children"&&e[r]!==void 0).sort()}m(p6,"getPropKeys$1");var ene=m((t,e,r,n,i,l)=>++n>e.maxDepth?r1(JT(t),e):t1(JT(t),Qv(p6(t),t.props,e,r+e.indent,n,i,l),e1(iP(t.props.children),e,r+e.indent,n,i,l),e,r),"serialize$1"),tne=m(t=>t!=null&&Wu.isElement(t),"test$1"),rne={serialize:ene,test:tne},nne=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.test.json"):245830487;function f6(t){const{props:e}=t;return e?Object.keys(e).filter(r=>e[r]!==void 0).sort():[]}m(f6,"getPropKeys");var ine=m((t,e,r,n,i,l)=>++n>e.maxDepth?r1(t.type,e):t1(t.type,t.props?Qv(f6(t),t.props,e,r+e.indent,n,i,l):"",t.children?e1(t.children,e,r+e.indent,n,i,l):"",e,r),"serialize"),one=m(t=>t&&t.$$typeof===nne,"test"),sne={serialize:ine,test:one},m6=Object.prototype.toString,ane=Date.prototype.toISOString,lne=Error.prototype.toString,nO=RegExp.prototype.toString;function wg(t){return typeof t.constructor=="function"&&t.constructor.name||"Object"}m(wg,"getConstructorName");function g6(t){return typeof window<"u"&&t===window}m(g6,"isWindow");var cne=/^Symbol\((.*)\)(.*)$/,une=/\n/g,y6=class extends Error{constructor(e,r){super(e),this.stack=r,this.name=this.constructor.name}};m(y6,"PrettyFormatPluginError");var _6=y6;function b6(t){return t==="[object Array]"||t==="[object ArrayBuffer]"||t==="[object DataView]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object Int8Array]"||t==="[object Int16Array]"||t==="[object Int32Array]"||t==="[object Uint8Array]"||t==="[object Uint8ClampedArray]"||t==="[object Uint16Array]"||t==="[object Uint32Array]"}m(b6,"isToStringedArrayType");function v6(t){return Object.is(t,-0)?"-0":String(t)}m(v6,"printNumber");function x6(t){return`${t}n`}m(x6,"printBigInt");function WT(t,e){return e?`[Function ${t.name||"anonymous"}]`:"[Function]"}m(WT,"printFunction");function ZT(t){return String(t).replace(cne,"Symbol($1)")}m(ZT,"printSymbol");function KT(t){return`[${lne.call(t)}]`}m(KT,"printError");function oP(t,e,r,n){if(t===!0||t===!1)return`${t}`;if(t===void 0)return"undefined";if(t===null)return"null";const i=typeof t;if(i==="number")return v6(t);if(i==="bigint")return x6(t);if(i==="string")return n?`"${t.replaceAll(/"|\\/g,"\\$&")}"`:`"${t}"`;if(i==="function")return WT(t,e);if(i==="symbol")return ZT(t);const l=m6.call(t);return l==="[object WeakMap]"?"WeakMap {}":l==="[object WeakSet]"?"WeakSet {}":l==="[object Function]"||l==="[object GeneratorFunction]"?WT(t,e):l==="[object Symbol]"?ZT(t):l==="[object Date]"?Number.isNaN(+t)?"Date { NaN }":ane.call(t):l==="[object Error]"?KT(t):l==="[object RegExp]"?r?nO.call(t).replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&"):nO.call(t):t instanceof Error?KT(t):null}m(oP,"printBasicValue");function sP(t,e,r,n,i,l){if(i.includes(t))return"[Circular]";i=[...i],i.push(t);const c=++n>e.maxDepth,s=e.min;if(e.callToJSON&&!c&&t.toJSON&&typeof t.toJSON=="function"&&!l)return yl(t.toJSON(),e,r,n,i,!0);const p=m6.call(t);return p==="[object Arguments]"?c?"[Arguments]":`${s?"":"Arguments "}[${$g(t,e,r,n,i,yl)}]`:b6(p)?c?`[${t.constructor.name}]`:`${s||!e.printBasicPrototype&&t.constructor.name==="Array"?"":`${t.constructor.name} `}[${$g(t,e,r,n,i,yl)}]`:p==="[object Map]"?c?"[Map]":`Map {${xf(t.entries(),e,r,n,i,yl," => ")}}`:p==="[object Set]"?c?"[Set]":`Set {${Yv(t.values(),e,r,n,i,yl)}}`:c||g6(t)?`[${wg(t)}]`:`${s||!e.printBasicPrototype&&wg(t)==="Object"?"":`${wg(t)} `}{${Xv(t,e,r,n,i,yl)}}`}m(sP,"printComplexValue");var hne={test:m(t=>t&&t instanceof Error,"test"),serialize(t,e,r,n,i,l){if(i.includes(t))return"[Circular]";i=[...i,t];const c=++n>e.maxDepth,{message:s,cause:p,...g}=t,_={message:s,...typeof p<"u"?{cause:p}:{},...t instanceof AggregateError?{errors:t.errors}:{},...g},x=t.name!=="Error"?t.name:wg(t);return c?`[${x}]`:`${x} {${xf(Object.entries(_).values(),e,r,n,i,l)}}`}};function w6(t){return t.serialize!=null}m(w6,"isNewPlugin");function aP(t,e,r,n,i,l){let c;try{c=w6(t)?t.serialize(e,r,n,i,l,yl):t.print(e,s=>yl(s,r,n,i,l),s=>{const p=n+r.indent;return p+s.replaceAll(une,`
${p}`)},{edgeSpacing:r.spacingOuter,min:r.min,spacing:r.spacingInner},r.colors)}catch(s){throw new _6(s.message,s.stack)}if(typeof c!="string")throw new TypeError(`pretty-format: Plugin must return type "string" but instead returned "${typeof c}".`);return c}m(aP,"printPlugin");function lP(t,e){for(const r of t)try{if(r.test(e))return r}catch(n){throw new _6(n.message,n.stack)}return null}m(lP,"findPlugin");function yl(t,e,r,n,i,l){const c=lP(e.plugins,t);if(c!==null)return aP(c,t,e,r,n,i);const s=oP(t,e.printFunctionName,e.escapeRegex,e.escapeString);return s!==null?s:sP(t,e,r,n,i,l)}m(yl,"printer");var cP={comment:"gray",content:"reset",prop:"yellow",tag:"cyan",value:"green"},E6=Object.keys(cP),Hs={callToJSON:!0,compareKeys:void 0,escapeRegex:!1,escapeString:!0,highlight:!1,indent:2,maxDepth:Number.POSITIVE_INFINITY,maxWidth:Number.POSITIVE_INFINITY,min:!1,plugins:[],printBasicPrototype:!0,printFunctionName:!0,theme:cP};function T6(t){for(const e of Object.keys(t))if(!Object.prototype.hasOwnProperty.call(Hs,e))throw new Error(`pretty-format: Unknown option "${e}".`);if(t.min&&t.indent!==void 0&&t.indent!==0)throw new Error('pretty-format: Options "min" and "indent" cannot be used together.')}m(T6,"validateOptions");function S6(){return E6.reduce((t,e)=>{const r=cP[e],n=r&&ii[r];if(n&&typeof n.close=="string"&&typeof n.open=="string")t[e]=n;else throw new Error(`pretty-format: Option "theme" has a key "${e}" whose value "${r}" is undefined in ansi-styles.`);return t},Object.create(null))}m(S6,"getColorsHighlight");function C6(){return E6.reduce((t,e)=>(t[e]={close:"",open:""},t),Object.create(null))}m(C6,"getColorsEmpty");function uP(t){return t?.printFunctionName??Hs.printFunctionName}m(uP,"getPrintFunctionName");function hP(t){return t?.escapeRegex??Hs.escapeRegex}m(hP,"getEscapeRegex");function dP(t){return t?.escapeString??Hs.escapeString}m(dP,"getEscapeString");function YT(t){return{callToJSON:t?.callToJSON??Hs.callToJSON,colors:t?.highlight?S6():C6(),compareKeys:typeof t?.compareKeys=="function"||t?.compareKeys===null?t.compareKeys:Hs.compareKeys,escapeRegex:hP(t),escapeString:dP(t),indent:t?.min?"":P6(t?.indent??Hs.indent),maxDepth:t?.maxDepth??Hs.maxDepth,maxWidth:t?.maxWidth??Hs.maxWidth,min:t?.min??Hs.min,plugins:t?.plugins??Hs.plugins,printBasicPrototype:t?.printBasicPrototype??!0,printFunctionName:uP(t),spacingInner:t?.min?" ":`
`,spacingOuter:t?.min?"":`
`}}m(YT,"getConfig");function P6(t){return Array.from({length:t+1}).join(" ")}m(P6,"createIndent");function Ys(t,e){if(e&&(T6(e),e.plugins)){const n=lP(e.plugins,t);if(n!==null)return aP(n,t,YT(e),"",0,[])}const r=oP(t,uP(e),hP(e),dP(e));return r!==null?r:sP(t,YT(e),"",0,[])}m(Ys,"format");var pP={AsymmetricMatcher:Pre,DOMCollection:Ore,DOMElement:Fre,Immutable:Wre,ReactElement:rne,ReactTestComponent:sne,Error:hne},iO={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},dne={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},Up="";function A6(t,e){const r=iO[dne[e]]||iO[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}m(A6,"colorise");function R6({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:l=1/0,breakLength:c=1/0,seen:s=[],truncate:p=1/0,stylize:g=String}={},_){const x={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(l),breakLength:Number(c),truncate:Number(p),seen:s,inspect:_,stylize:g};return x.colors&&(x.stylize=A6),x}m(R6,"normaliseOptions");function I6(t){return t>="\uD800"&&t<="\uDBFF"}m(I6,"isHighSurrogate");function Nl(t,e,r=Up){t=String(t);const n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let l=e-n;return l>0&&I6(t[l-1])&&(l=l-1),`${t.slice(0,l)}${r}`}return t}m(Nl,"truncate");function Is(t,e,r,n=", "){r=r||e.inspect;const i=t.length;if(i===0)return"";const l=e.truncate;let c="",s="",p="";for(let g=0;g<i;g+=1){const _=g+1===t.length,x=g+2===t.length;p=`${Up}(${t.length-g})`;const P=t[g];e.truncate=l-c.length-(_?0:n.length);const A=s||r(P,e)+(_?"":n),M=c.length+A.length,N=M+p.length;if(_&&M>l&&c.length+p.length<=l||!_&&!x&&N>l||(s=_?"":r(t[g+1],e)+(x?"":n),!_&&x&&N>l&&M+s.length>l))break;if(c+=A,!_&&!x&&M+s.length>=l){p=`${Up}(${t.length-g-1})`;break}p=""}return`${c}${p}`}m(Is,"inspectList");function M6(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}m(M6,"quoteComplexKey");function Gp([t,e],r){return r.truncate-=2,typeof t=="string"?t=M6(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}m(Gp,"inspectProperty");function O6(t,e){const r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;const n=Is(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Is(r.map(l=>[l,t[l]]),e,Gp)),`[ ${n}${i?`, ${i}`:""} ]`}m(O6,"inspectArray");var pne=m(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ba(t,e){const r=pne(t);e.truncate-=r.length+4;const n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let c=0;c<t.length;c++){const s=`${e.stylize(Nl(t[c],e.truncate),"number")}${c===t.length-1?"":", "}`;if(e.truncate-=s.length,t[c]!==t.length&&e.truncate<=3){i+=`${Up}(${t.length-t[c]+1})`;break}i+=s}let l="";return n.length&&(l=Is(n.map(c=>[c,t[c]]),e,Gp)),`${r}[ ${i}${l?`, ${l}`:""} ]`}m(ba,"inspectTypedArray");function k6(t,e){const r=t.toJSON();if(r===null)return"Invalid Date";const n=r.split("T"),i=n[0];return e.stylize(`${i}T${Nl(n[1],e.truncate-i.length-1)}`,"date")}m(k6,"inspectDate");function XT(t,e){const r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Nl(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}m(XT,"inspectFunction");function L6([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}m(L6,"inspectMapEntry");function D6(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}m(D6,"mapToEntries");function N6(t,e){return t.size===0?"Map{}":(e.truncate-=7,`Map{ ${Is(D6(t),e,L6)} }`)}m(N6,"inspectMap");var fne=Number.isNaN||(t=>t!==t);function QT(t,e){return fne(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Nl(String(t),e.truncate),"number")}m(QT,"inspectNumber");function eS(t,e){let r=Nl(t.toString(),e.truncate-1);return r!==Up&&(r+="n"),e.stylize(r,"bigint")}m(eS,"inspectBigInt");function F6(t,e){const r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Nl(i,n)}/${r}`,"regexp")}m(F6,"inspectRegExp");function z6(t){const e=[];return t.forEach(r=>{e.push(r)}),e}m(z6,"arrayFromSet");function j6(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Is(z6(t),e)} }`)}m(j6,"inspectSet");var oO=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),mne={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},gne=16;function B6(t){return mne[t]||`\\u${`0000${t.charCodeAt(0).toString(gne)}`.slice(-4)}`}m(B6,"escape");function tS(t,e){return oO.test(t)&&(t=t.replace(oO,B6)),e.stylize(`'${Nl(t,e.truncate-2)}'`,"string")}m(tS,"inspectString");function rS(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}m(rS,"inspectSymbol");var yne=m(()=>"Promise{}","getPromiseValue"),_ne=yne;function Eg(t,e){const r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);const i=Is(r.map(s=>[s,t[s]]),e,Gp),l=Is(n.map(s=>[s,t[s]]),e,Gp);e.seen.pop();let c="";return i&&l&&(c=", "),`{ ${i}${c}${l} }`}m(Eg,"inspectObject");var CE=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function q6(t,e){let r="";return CE&&CE in t&&(r=t[CE]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Eg(t,e)}`}m(q6,"inspectClass");function $6(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Is(t,e)} ]`)}m($6,"inspectArguments");var bne=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function V6(t,e){const r=Object.getOwnPropertyNames(t).filter(c=>bne.indexOf(c)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Nl(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);const l=Is(r.map(c=>[c,t[c]]),e,Gp);return`${n}${i}${l?` { ${l} }`:""}`}m(V6,"inspectObject");function U6([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}m(U6,"inspectAttribute");function xb(t,e){return Is(t,e,G6,`
`)}m(xb,"inspectNodeCollection");function G6(t,e){switch(t.nodeType){case 1:return fP(t,e);case 3:return e.inspect(t.data,e);default:return e.inspect(t,e)}}m(G6,"inspectNode");function fP(t,e){const r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),l=e.stylize(">","special"),c=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let s="";r.length>0&&(s+=" ",s+=Is(r.map(_=>[_,t.getAttribute(_)]),e,U6," ")),e.truncate-=s.length;const p=e.truncate;let g=xb(t.children,e);return g&&g.length>p&&(g=`${Up}(${t.children.length})`),`${i}${s}${l}${g}${c}`}m(fP,"inspectHTML");var vne=typeof Symbol=="function"&&typeof Symbol.for=="function",PE=vne?Symbol.for("chai/inspect"):"@@chai/inspect",AE=Symbol.for("nodejs.util.inspect.custom"),sO=new WeakMap,aO={},lO={undefined:m((t,e)=>e.stylize("undefined","undefined"),"undefined"),null:m((t,e)=>e.stylize("null","null"),"null"),boolean:m((t,e)=>e.stylize(String(t),"boolean"),"boolean"),Boolean:m((t,e)=>e.stylize(String(t),"boolean"),"Boolean"),number:QT,Number:QT,bigint:eS,BigInt:eS,string:tS,String:tS,function:XT,Function:XT,symbol:rS,Symbol:rS,Array:O6,Date:k6,Map:N6,Set:j6,RegExp:F6,Promise:_ne,WeakSet:m((t,e)=>e.stylize("WeakSet{}","special"),"WeakSet"),WeakMap:m((t,e)=>e.stylize("WeakMap{}","special"),"WeakMap"),Arguments:$6,Int8Array:ba,Uint8Array:ba,Uint8ClampedArray:ba,Int16Array:ba,Uint16Array:ba,Int32Array:ba,Uint32Array:ba,Float32Array:ba,Float64Array:ba,Generator:m(()=>"","Generator"),DataView:m(()=>"","DataView"),ArrayBuffer:m(()=>"","ArrayBuffer"),Error:V6,HTMLCollection:xb,NodeList:xb},xne=m((t,e,r,n)=>PE in t&&typeof t[PE]=="function"?t[PE](e):AE in t&&typeof t[AE]=="function"?t[AE](e.depth,e,n):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&sO.has(t.constructor)?sO.get(t.constructor)(t,e):aO[r]?aO[r](t,e):"","inspectCustom"),wne=Object.prototype.toString;function Tg(t,e={}){const r=R6(e,Tg),{customInspect:n}=r;let i=t===null?"null":typeof t;if(i==="object"&&(i=wne.call(t).slice(8,-1)),i in lO)return lO[i](t,r);if(n&&t){const c=xne(t,r,i,Tg);if(c)return typeof c=="string"?c:Tg(c,r)}const l=t?Object.getPrototypeOf(t):!1;return l===Object.prototype||l===null?Eg(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?fP(t,r):"constructor"in t?t.constructor!==Object?q6(t,r):Eg(t,r):t===Object(t)?Eg(t,r):r.stylize(String(t),i)}m(Tg,"inspect");var{AsymmetricMatcher:Ene,DOMCollection:Tne,DOMElement:Sne,Immutable:Cne,ReactElement:Pne,ReactTestComponent:Ane}=pP,cO=[Ane,Pne,Sne,Tne,Cne,Ene];function Mo(t,e=10,{maxLength:r,...n}={}){const i=r??1e4;let l;try{l=Ys(t,{maxDepth:e,escapeString:!1,plugins:cO,...n})}catch{l=Ys(t,{callToJSON:!1,maxDepth:e,escapeString:!1,plugins:cO,...n})}return l.length>=i&&e>1?Mo(t,Math.floor(Math.min(e,Number.MAX_SAFE_INTEGER)/2),{maxLength:r,...n}):l}m(Mo,"stringify");var Rne=/%[sdjifoOc%]/g;function H6(...t){if(typeof t[0]!="string"){const l=[];for(let c=0;c<t.length;c++)l.push(dp(t[c],{depth:0,colors:!1}));return l.join(" ")}const e=t.length;let r=1;const n=t[0];let i=String(n).replace(Rne,l=>{if(l==="%%")return"%";if(r>=e)return l;switch(l){case"%s":{const c=t[r++];return typeof c=="bigint"?`${c.toString()}n`:typeof c=="number"&&c===0&&1/c<0?"-0":typeof c=="object"&&c!==null?typeof c.toString=="function"&&c.toString!==Object.prototype.toString?c.toString():dp(c,{depth:0,colors:!1}):String(c)}case"%d":{const c=t[r++];return typeof c=="bigint"?`${c.toString()}n`:Number(c).toString()}case"%i":{const c=t[r++];return typeof c=="bigint"?`${c.toString()}n`:Number.parseInt(String(c)).toString()}case"%f":return Number.parseFloat(String(t[r++])).toString();case"%o":return dp(t[r++],{showHidden:!0,showProxy:!0});case"%O":return dp(t[r++]);case"%c":return r++,"";case"%j":try{return JSON.stringify(t[r++])}catch(c){const s=c.message;if(s.includes("circular structure")||s.includes("cyclic structures")||s.includes("cyclic object"))return"[Circular]";throw c}default:return l}});for(let l=t[r];r<e;l=t[++r])l===null||typeof l!="object"?i+=` ${l}`:i+=` ${dp(l)}`;return i}m(H6,"format");function dp(t,e={}){return e.truncate===0&&(e.truncate=Number.POSITIVE_INFINITY),Tg(t,e)}m(dp,"inspect");function mP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}m(mP,"getDefaultExportFromCjs");function va(t,e,r){const n=typeof t;if(!r.includes(n))throw new TypeError(`${e} value must be ${r.join(" or ")}, received "${n}"`)}m(va,"assertTypes");function Sg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}m(Sg,"isObject");function J6(t){return t===Object.prototype||t===Function.prototype||t===RegExp.prototype}m(J6,"isFinalObj");function Ug(t){return Object.prototype.toString.apply(t).slice(8,-1)}m(Ug,"getType");function W6(t,e){const r=typeof e=="function"?e:n=>e.add(n);Object.getOwnPropertyNames(t).forEach(r),Object.getOwnPropertySymbols(t).forEach(r)}m(W6,"collectOwnProperties");function gP(t){const e=new Set;return J6(t)?[]:(W6(t,e),Array.from(e))}m(gP,"getOwnProperties");var Z6={forceWritable:!1};function nS(t,e=Z6){return wb(t,new WeakMap,e)}m(nS,"deepClone");function wb(t,e,r=Z6){let n,i;if(e.has(t))return e.get(t);if(Array.isArray(t)){for(i=Array.from({length:n=t.length}),e.set(t,i);n--;)i[n]=wb(t[n],e,r);return i}if(Object.prototype.toString.call(t)==="[object Object]"){i=Object.create(Object.getPrototypeOf(t)),e.set(t,i);const l=gP(t);for(const c of l){const s=Object.getOwnPropertyDescriptor(t,c);if(!s)continue;const p=wb(t[c],e,r);r.forceWritable?Object.defineProperty(i,c,{enumerable:s.enumerable,configurable:!0,writable:!0,value:p}):"get"in s?Object.defineProperty(i,c,{...s,get(){return p}}):Object.defineProperty(i,c,{...s,value:p})}return i}return t}m(wb,"clone");function K6(){}m(K6,"noop");var ho=-1,Ki=1,ni=0,Y6=class{constructor(e,r){Er(this,0);Er(this,1);this[0]=e,this[1]=r}};m(Y6,"Diff");var Zn=Y6;function X6(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;let r=0,n=Math.min(t.length,e.length),i=n,l=0;for(;r<i;)t.substring(l,i)===e.substring(l,i)?(r=i,l=r):n=i,i=Math.floor((n-r)/2+r);return i}m(X6,"diff_commonPrefix");function yP(t,e){if(!t||!e||t.charAt(t.length-1)!==e.charAt(e.length-1))return 0;let r=0,n=Math.min(t.length,e.length),i=n,l=0;for(;r<i;)t.substring(t.length-i,t.length-l)===e.substring(e.length-i,e.length-l)?(r=i,l=r):n=i,i=Math.floor((n-r)/2+r);return i}m(yP,"diff_commonSuffix");function iS(t,e){const r=t.length,n=e.length;if(r===0||n===0)return 0;r>n?t=t.substring(r-n):r<n&&(e=e.substring(0,r));const i=Math.min(r,n);if(t===e)return i;let l=0,c=1;for(;;){const s=t.substring(i-c),p=e.indexOf(s);if(p===-1)return l;c+=p,(p===0||t.substring(i-c)===e.substring(0,c))&&(l=c,c++)}}m(iS,"diff_commonOverlap_");function Q6(t){let e=!1;const r=[];let n=0,i=null,l=0,c=0,s=0,p=0,g=0;for(;l<t.length;)t[l][0]===ni?(r[n++]=l,c=p,s=g,p=0,g=0,i=t[l][1]):(t[l][0]===Ki?p+=t[l][1].length:g+=t[l][1].length,i&&i.length<=Math.max(c,s)&&i.length<=Math.max(p,g)&&(t.splice(r[n-1],0,new Zn(ho,i)),t[r[n-1]+1][0]=Ki,n--,n--,l=n>0?r[n-1]:-1,c=0,s=0,p=0,g=0,i=null,e=!0)),l++;for(e&&_P(t),ez(t),l=1;l<t.length;){if(t[l-1][0]===ho&&t[l][0]===Ki){const _=t[l-1][1],x=t[l][1],P=iS(_,x),A=iS(x,_);P>=A?(P>=_.length/2||P>=x.length/2)&&(t.splice(l,0,new Zn(ni,x.substring(0,P))),t[l-1][1]=_.substring(0,_.length-P),t[l+1][1]=x.substring(P),l++):(A>=_.length/2||A>=x.length/2)&&(t.splice(l,0,new Zn(ni,_.substring(0,A))),t[l-1][0]=Ki,t[l-1][1]=x.substring(0,x.length-A),t[l+1][0]=ho,t[l+1][1]=_.substring(A),l++),l++}l++}}m(Q6,"diff_cleanupSemantic");var uO=/[^a-z0-9]/i,hO=/\s/,dO=/[\r\n]/,Ine=/\n\r?\n$/,Mne=/^\r?\n\r?\n/;function ez(t){let e=1;for(;e<t.length-1;){if(t[e-1][0]===ni&&t[e+1][0]===ni){let r=t[e-1][1],n=t[e][1],i=t[e+1][1];const l=yP(r,n);if(l){const _=n.substring(n.length-l);r=r.substring(0,r.length-l),n=_+n.substring(0,n.length-l),i=_+i}let c=r,s=n,p=i,g=ag(r,n)+ag(n,i);for(;n.charAt(0)===i.charAt(0);){r+=n.charAt(0),n=n.substring(1)+i.charAt(0),i=i.substring(1);const _=ag(r,n)+ag(n,i);_>=g&&(g=_,c=r,s=n,p=i)}t[e-1][1]!==c&&(c?t[e-1][1]=c:(t.splice(e-1,1),e--),t[e][1]=s,p?t[e+1][1]=p:(t.splice(e+1,1),e--))}e++}}m(ez,"diff_cleanupSemanticLossless");function _P(t){t.push(new Zn(ni,""));let e=0,r=0,n=0,i="",l="",c;for(;e<t.length;)switch(t[e][0]){case Ki:n++,l+=t[e][1],e++;break;case ho:r++,i+=t[e][1],e++;break;case ni:r+n>1?(r!==0&&n!==0&&(c=X6(l,i),c!==0&&(e-r-n>0&&t[e-r-n-1][0]===ni?t[e-r-n-1][1]+=l.substring(0,c):(t.splice(0,0,new Zn(ni,l.substring(0,c))),e++),l=l.substring(c),i=i.substring(c)),c=yP(l,i),c!==0&&(t[e][1]=l.substring(l.length-c)+t[e][1],l=l.substring(0,l.length-c),i=i.substring(0,i.length-c))),e-=r+n,t.splice(e,r+n),i.length&&(t.splice(e,0,new Zn(ho,i)),e++),l.length&&(t.splice(e,0,new Zn(Ki,l)),e++),e++):e!==0&&t[e-1][0]===ni?(t[e-1][1]+=t[e][1],t.splice(e,1)):e++,n=0,r=0,i="",l="";break}t[t.length-1][1]===""&&t.pop();let s=!1;for(e=1;e<t.length-1;)t[e-1][0]===ni&&t[e+1][0]===ni&&(t[e][1].substring(t[e][1].length-t[e-1][1].length)===t[e-1][1]?(t[e][1]=t[e-1][1]+t[e][1].substring(0,t[e][1].length-t[e-1][1].length),t[e+1][1]=t[e-1][1]+t[e+1][1],t.splice(e-1,1),s=!0):t[e][1].substring(0,t[e+1][1].length)===t[e+1][1]&&(t[e-1][1]+=t[e+1][1],t[e][1]=t[e][1].substring(t[e+1][1].length)+t[e+1][1],t.splice(e+1,1),s=!0)),e++;s&&_P(t)}m(_P,"diff_cleanupMerge");function ag(t,e){if(!t||!e)return 6;const r=t.charAt(t.length-1),n=e.charAt(0),i=r.match(uO),l=n.match(uO),c=i&&r.match(hO),s=l&&n.match(hO),p=c&&r.match(dO),g=s&&n.match(dO),_=p&&t.match(Ine),x=g&&e.match(Mne);return _||x?5:p||g?4:i&&!c&&s?3:c||s?2:i||l?1:0}m(ag,"diff_cleanupSemanticScore_");var tz="Compared values have no visual difference.",One="Compared values serialize to the same structure.\nPrinting internal object structure without calling `toJSON` instead.",S0={},pO;function rz(){if(pO)return S0;pO=1,Object.defineProperty(S0,"__esModule",{value:!0}),S0.default=P;const t="diff-sequences",e=0,r=m((A,M,N,z,j)=>{let $=0;for(;A<M&&N<z&&j(A,N);)A+=1,N+=1,$+=1;return $},"countCommonItemsF"),n=m((A,M,N,z,j)=>{let $=0;for(;A<=M&&N<=z&&j(M,z);)M-=1,z-=1,$+=1;return $},"countCommonItemsR"),i=m((A,M,N,z,j,$,J)=>{let X=0,re=-A,ne=$[X],Z=ne;$[X]+=r(ne+1,M,z+ne-re+1,N,j);const U=A<J?A:J;for(X+=1,re+=2;X<=U;X+=1,re+=2){if(X!==A&&Z<$[X])ne=$[X];else if(ne=Z+1,M<=ne)return X-1;Z=$[X],$[X]=ne+r(ne+1,M,z+ne-re+1,N,j)}return J},"extendPathsF"),l=m((A,M,N,z,j,$,J)=>{let X=0,re=A,ne=$[X],Z=ne;$[X]-=n(M,ne-1,N,z+ne-re-1,j);const U=A<J?A:J;for(X+=1,re-=2;X<=U;X+=1,re-=2){if(X!==A&&$[X]<Z)ne=$[X];else if(ne=Z-1,ne<M)return X-1;Z=$[X],$[X]=ne-n(M,ne-1,N,z+ne-re-1,j)}return J},"extendPathsR"),c=m((A,M,N,z,j,$,J,X,re,ne,Z)=>{const U=z-M,K=N-M,ue=j-z-K,Ee=-ue-(A-1),Ie=-ue+(A-1);let ee=e;const pe=A<X?A:X;for(let ve=0,xe=-A;ve<=pe;ve+=1,xe+=2){const tt=ve===0||ve!==A&&ee<J[ve],Ke=tt?J[ve]:ee,Ze=tt?Ke:Ke+1,bt=U+Ze-xe,qe=r(Ze+1,N,bt+1,j,$),kt=Ze+qe;if(ee=J[ve],J[ve]=kt,Ee<=xe&&xe<=Ie){const Jt=(A-1-(xe+ue))/2;if(Jt<=ne&&re[Jt]-1<=kt){const Pt=U+Ke-(tt?xe+1:xe-1),dt=n(M,Ke,z,Pt,$),er=Ke-dt,Wt=Pt-dt,ar=er+1,_t=Wt+1;Z.nChangePreceding=A-1,A-1===ar+_t-M-z?(Z.aEndPreceding=M,Z.bEndPreceding=z):(Z.aEndPreceding=ar,Z.bEndPreceding=_t),Z.nCommonPreceding=dt,dt!==0&&(Z.aCommonPreceding=ar,Z.bCommonPreceding=_t),Z.nCommonFollowing=qe,qe!==0&&(Z.aCommonFollowing=Ze+1,Z.bCommonFollowing=bt+1);const Ve=kt+1,pt=bt+qe+1;return Z.nChangeFollowing=A-1,A-1===N+j-Ve-pt?(Z.aStartFollowing=N,Z.bStartFollowing=j):(Z.aStartFollowing=Ve,Z.bStartFollowing=pt),!0}}}return!1},"extendOverlappablePathsF"),s=m((A,M,N,z,j,$,J,X,re,ne,Z)=>{const U=j-N,K=N-M,ue=j-z-K,Ee=ue-A,Ie=ue+A;let ee=e;const pe=A<ne?A:ne;for(let ve=0,xe=A;ve<=pe;ve+=1,xe-=2){const tt=ve===0||ve!==A&&re[ve]<ee,Ke=tt?re[ve]:ee,Ze=tt?Ke:Ke-1,bt=U+Ze-xe,qe=n(M,Ze-1,z,bt-1,$),kt=Ze-qe;if(ee=re[ve],re[ve]=kt,Ee<=xe&&xe<=Ie){const Jt=(A+(xe-ue))/2;if(Jt<=X&&kt-1<=J[Jt]){const Pt=bt-qe;if(Z.nChangePreceding=A,A===kt+Pt-M-z?(Z.aEndPreceding=M,Z.bEndPreceding=z):(Z.aEndPreceding=kt,Z.bEndPreceding=Pt),Z.nCommonPreceding=qe,qe!==0&&(Z.aCommonPreceding=kt,Z.bCommonPreceding=Pt),Z.nChangeFollowing=A-1,A===1)Z.nCommonFollowing=0,Z.aStartFollowing=N,Z.bStartFollowing=j;else{const dt=U+Ke-(tt?xe-1:xe+1),er=r(Ke,N,dt,j,$);Z.nCommonFollowing=er,er!==0&&(Z.aCommonFollowing=Ke,Z.bCommonFollowing=dt);const Wt=Ke+er,ar=dt+er;A-1===N+j-Wt-ar?(Z.aStartFollowing=N,Z.bStartFollowing=j):(Z.aStartFollowing=Wt,Z.bStartFollowing=ar)}return!0}}}return!1},"extendOverlappablePathsR"),p=m((A,M,N,z,j,$,J,X,re)=>{const ne=z-M,Z=j-N,U=N-M,K=j-z,he=K-U;let ue=U,Ee=U;if(J[0]=M-1,X[0]=N,he%2===0){const Ie=(A||he)/2,ee=(U+K)/2;for(let pe=1;pe<=ee;pe+=1)if(ue=i(pe,N,j,ne,$,J,ue),pe<Ie)Ee=l(pe,M,z,Z,$,X,Ee);else if(s(pe,M,N,z,j,$,J,ue,X,Ee,re))return}else{const Ie=((A||he)+1)/2,ee=(U+K+1)/2;let pe=1;for(ue=i(pe,N,j,ne,$,J,ue),pe+=1;pe<=ee;pe+=1)if(Ee=l(pe-1,M,z,Z,$,X,Ee),pe<Ie)ue=i(pe,N,j,ne,$,J,ue);else if(c(pe,M,N,z,j,$,J,ue,X,Ee,re))return}throw new Error(`${t}: no overlap aStart=${M} aEnd=${N} bStart=${z} bEnd=${j}`)},"divide"),g=m((A,M,N,z,j,$,J,X,re,ne)=>{if(j-z<N-M){if($=!$,$&&J.length===1){const{foundSubsequence:kt,isCommon:Jt}=J[0];J[1]={foundSubsequence:m((Pt,dt,er)=>{kt(Pt,er,dt)},"foundSubsequence"),isCommon:m((Pt,dt)=>Jt(dt,Pt),"isCommon")}}const bt=M,qe=N;M=z,N=j,z=bt,j=qe}const{foundSubsequence:Z,isCommon:U}=J[$?1:0];p(A,M,N,z,j,U,X,re,ne);const{nChangePreceding:K,aEndPreceding:he,bEndPreceding:ue,nCommonPreceding:Ee,aCommonPreceding:Ie,bCommonPreceding:ee,nCommonFollowing:pe,aCommonFollowing:ve,bCommonFollowing:xe,nChangeFollowing:tt,aStartFollowing:Ke,bStartFollowing:Ze}=ne;M<he&&z<ue&&g(K,M,he,z,ue,$,J,X,re,ne),Ee!==0&&Z(Ee,Ie,ee),pe!==0&&Z(pe,ve,xe),Ke<N&&Ze<j&&g(tt,Ke,N,Ze,j,$,J,X,re,ne)},"findSubsequences"),_=m((A,M)=>{if(typeof M!="number")throw new TypeError(`${t}: ${A} typeof ${typeof M} is not a number`);if(!Number.isSafeInteger(M))throw new RangeError(`${t}: ${A} value ${M} is not a safe integer`);if(M<0)throw new RangeError(`${t}: ${A} value ${M} is a negative integer`)},"validateLength"),x=m((A,M)=>{const N=typeof M;if(N!=="function")throw new TypeError(`${t}: ${A} typeof ${N} is not a function`)},"validateCallback");function P(A,M,N,z){_("aLength",A),_("bLength",M),x("isCommon",N),x("foundSubsequence",z);const j=r(0,A,0,M,N);if(j!==0&&z(j,0,0),A!==j||M!==j){const $=j,J=j,X=n($,A-1,J,M-1,N),re=A-X,ne=M-X,Z=j+X;A!==Z&&M!==Z&&g(0,$,re,J,ne,!1,[{foundSubsequence:z,isCommon:N}],[e],[e],{aCommonFollowing:e,aCommonPreceding:e,aEndPreceding:e,aStartFollowing:e,bCommonFollowing:e,bCommonPreceding:e,bEndPreceding:e,bStartFollowing:e,nChangeFollowing:e,nChangePreceding:e,nCommonFollowing:e,nCommonPreceding:e}),X!==0&&z(X,re,ne)}}return m(P,"diffSequence"),S0}m(rz,"requireBuild");var kne=rz(),nz=mP(kne);function iz(t,e){return t.replace(/\s+$/,r=>e(r))}m(iz,"formatTrailingSpaces");function i1(t,e,r,n,i,l){return t.length!==0?r(`${n} ${iz(t,i)}`):n!==" "?r(n):e&&l.length!==0?r(`${n} ${l}`):""}m(i1,"printDiffLine");function bP(t,e,{aColor:r,aIndicator:n,changeLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return i1(t,e,r,n,i,l)}m(bP,"printDeleteLine");function vP(t,e,{bColor:r,bIndicator:n,changeLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return i1(t,e,r,n,i,l)}m(vP,"printInsertLine");function xP(t,e,{commonColor:r,commonIndicator:n,commonLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return i1(t,e,r,n,i,l)}m(xP,"printCommonLine");function oS(t,e,r,n,{patchColor:i}){return i(`@@ -${t+1},${e-t} +${r+1},${n-r} @@`)}m(oS,"createPatchMark");function oz(t,e){const r=t.length,n=e.contextLines,i=n+n;let l=r,c=!1,s=0,p=0;for(;p!==r;){const X=p;for(;p!==r&&t[p][0]===ni;)p+=1;if(X!==p)if(X===0)p>n&&(l-=p-n,c=!0);else if(p===r){const re=p-X;re>n&&(l-=re-n,c=!0)}else{const re=p-X;re>i&&(l-=re-i,s+=1)}for(;p!==r&&t[p][0]!==ni;)p+=1}const g=s!==0||c;s!==0?l+=s+1:c&&(l+=1);const _=l-1,x=[];let P=0;g&&x.push("");let A=0,M=0,N=0,z=0;const j=m(X=>{const re=x.length;x.push(xP(X,re===0||re===_,e)),N+=1,z+=1},"pushCommonLine"),$=m(X=>{const re=x.length;x.push(bP(X,re===0||re===_,e)),N+=1},"pushDeleteLine"),J=m(X=>{const re=x.length;x.push(vP(X,re===0||re===_,e)),z+=1},"pushInsertLine");for(p=0;p!==r;){let X=p;for(;p!==r&&t[p][0]===ni;)p+=1;if(X!==p)if(X===0){p>n&&(X=p-n,A=X,M=X,N=A,z=M);for(let re=X;re!==p;re+=1)j(t[re][1])}else if(p===r){const re=p-X>n?X+n:p;for(let ne=X;ne!==re;ne+=1)j(t[ne][1])}else{const re=p-X;if(re>i){const ne=X+n;for(let U=X;U!==ne;U+=1)j(t[U][1]);x[P]=oS(A,N,M,z,e),P=x.length,x.push("");const Z=re-i;A=N+Z,M=z+Z,N=A,z=M;for(let U=p-n;U!==p;U+=1)j(t[U][1])}else for(let ne=X;ne!==p;ne+=1)j(t[ne][1])}for(;p!==r&&t[p][0]===ho;)$(t[p][1]),p+=1;for(;p!==r&&t[p][0]===Ki;)J(t[p][1]),p+=1}return g&&(x[P]=oS(A,N,M,z,e)),x.join(`
`)}m(oz,"joinAlignedDiffsNoExpand");function sz(t,e){return t.map((r,n,i)=>{const l=r[1],c=n===0||n===i.length-1;switch(r[0]){case ho:return bP(l,c,e);case Ki:return vP(l,c,e);default:return xP(l,c,e)}}).join(`
`)}m(sz,"joinAlignedDiffsExpand");var RE=m(t=>t,"noColor"),az=5,Lne=0;function lz(){return{aAnnotation:"Expected",aColor:ii.green,aIndicator:"-",bAnnotation:"Received",bColor:ii.red,bIndicator:"+",changeColor:ii.inverse,changeLineTrailingSpaceColor:RE,commonColor:ii.dim,commonIndicator:" ",commonLineTrailingSpaceColor:RE,compareKeys:void 0,contextLines:az,emptyFirstOrLastLinePlaceholder:"",expand:!1,includeChangeCounts:!1,omitAnnotationLines:!1,patchColor:ii.yellow,printBasicPrototype:!1,truncateThreshold:Lne,truncateAnnotation:"... Diff result is truncated",truncateAnnotationColor:RE}}m(lz,"getDefaultOptions");function cz(t){return t&&typeof t=="function"?t:void 0}m(cz,"getCompareKeys");function uz(t){return typeof t=="number"&&Number.isSafeInteger(t)&&t>=0?t:az}m(uz,"getContextLines");function ru(t={}){return{...lz(),...t,compareKeys:cz(t.compareKeys),contextLines:uz(t.contextLines)}}m(ru,"normalizeDiffOptions");function Qu(t){return t.length===1&&t[0].length===0}m(Qu,"isEmptyString");function hz(t){let e=0,r=0;return t.forEach(n=>{switch(n[0]){case ho:e+=1;break;case Ki:r+=1;break}}),{a:e,b:r}}m(hz,"countChanges");function dz({aAnnotation:t,aColor:e,aIndicator:r,bAnnotation:n,bColor:i,bIndicator:l,includeChangeCounts:c,omitAnnotationLines:s},p){if(s)return"";let g="",_="";if(c){const A=String(p.a),M=String(p.b),N=n.length-t.length,z=" ".repeat(Math.max(0,N)),j=" ".repeat(Math.max(0,-N)),$=M.length-A.length,J=" ".repeat(Math.max(0,$)),X=" ".repeat(Math.max(0,-$));g=`${z}  ${r} ${J}${A}`,_=`${j}  ${l} ${X}${M}`}const x=`${r} ${t}${g}`,P=`${l} ${n}${_}`;return`${e(x)}
${i(P)}

`}m(dz,"printAnnotation");function o1(t,e,r){return dz(r,hz(t))+(r.expand?sz(t,r):oz(t,r))+(e?r.truncateAnnotationColor(`
${r.truncateAnnotation}`):"")}m(o1,"printDiffLines");function Fy(t,e,r){const n=ru(r),[i,l]=wP(Qu(t)?[]:t,Qu(e)?[]:e,n);return o1(i,l,n)}m(Fy,"diffLinesUnified");function pz(t,e,r,n,i){if(Qu(t)&&Qu(r)&&(t=[],r=[]),Qu(e)&&Qu(n)&&(e=[],n=[]),t.length!==r.length||e.length!==n.length)return Fy(t,e,i);const[l,c]=wP(r,n,i);let s=0,p=0;return l.forEach(g=>{switch(g[0]){case ho:g[1]=t[s],s+=1;break;case Ki:g[1]=e[p],p+=1;break;default:g[1]=e[p],s+=1,p+=1}}),o1(l,c,ru(i))}m(pz,"diffLinesUnified2");function wP(t,e,r){const n=r?.truncateThreshold??!1,i=Math.max(Math.floor(r?.truncateThreshold??0),0),l=n?Math.min(t.length,i):t.length,c=n?Math.min(e.length,i):e.length,s=l!==t.length||c!==e.length,p=m((A,M)=>t[A]===e[M],"isCommon"),g=[];let _=0,x=0;for(nz(l,c,p,m((A,M,N)=>{for(;_!==M;_+=1)g.push(new Zn(ho,t[_]));for(;x!==N;x+=1)g.push(new Zn(Ki,e[x]));for(;A!==0;A-=1,_+=1,x+=1)g.push(new Zn(ni,e[x]))},"foundSubsequence"));_!==l;_+=1)g.push(new Zn(ho,t[_]));for(;x!==c;x+=1)g.push(new Zn(Ki,e[x]));return[g,s]}m(wP,"diffLinesRaw");function sS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(Array.isArray(t))return"array";if(typeof t=="boolean")return"boolean";if(typeof t=="function")return"function";if(typeof t=="number")return"number";if(typeof t=="string")return"string";if(typeof t=="bigint")return"bigint";if(typeof t=="object"){if(t!=null){if(t.constructor===RegExp)return"regexp";if(t.constructor===Map)return"map";if(t.constructor===Set)return"set";if(t.constructor===Date)return"date"}return"object"}else if(typeof t=="symbol")return"symbol";throw new Error(`value of unknown type: ${t}`)}m(sS,"getType");function aS(t){return t.includes(`\r
`)?`\r
`:`
`}m(aS,"getNewLineSymbol");function fz(t,e,r){const n=r?.truncateThreshold??!1,i=Math.max(Math.floor(r?.truncateThreshold??0),0);let l=t.length,c=e.length;if(n){const A=t.includes(`
`),M=e.includes(`
`),N=aS(t),z=aS(e),j=A?`${t.split(N,i).join(N)}
`:t,$=M?`${e.split(z,i).join(z)}
`:e;l=j.length,c=$.length}const s=l!==t.length||c!==e.length,p=m((A,M)=>t[A]===e[M],"isCommon");let g=0,_=0;const x=[];return nz(l,c,p,m((A,M,N)=>{g!==M&&x.push(new Zn(ho,t.slice(g,M))),_!==N&&x.push(new Zn(Ki,e.slice(_,N))),g=M+A,_=N+A,x.push(new Zn(ni,e.slice(N,_)))},"foundSubsequence")),g!==l&&x.push(new Zn(ho,t.slice(g))),_!==c&&x.push(new Zn(Ki,e.slice(_))),[x,s]}m(fz,"diffStrings");function mz(t,e,r){return e.reduce((n,i)=>n+(i[0]===ni?i[1]:i[0]===t&&i[1].length!==0?r(i[1]):""),"")}m(mz,"concatenateRelevantDiffs");var gz=class{constructor(e,r){Er(this,"op");Er(this,"line");Er(this,"lines");Er(this,"changeColor");this.op=e,this.line=[],this.lines=[],this.changeColor=r}pushSubstring(e){this.pushDiff(new Zn(this.op,e))}pushLine(){this.lines.push(this.line.length!==1?new Zn(this.op,mz(this.op,this.line,this.changeColor)):this.line[0][0]===this.op?this.line[0]:new Zn(this.op,this.line[0][1])),this.line.length=0}isLineEmpty(){return this.line.length===0}pushDiff(e){this.line.push(e)}align(e){const r=e[1];if(r.includes(`
`)){const n=r.split(`
`),i=n.length-1;n.forEach((l,c)=>{c<i?(this.pushSubstring(l),this.pushLine()):l.length!==0&&this.pushSubstring(l)})}else this.pushDiff(e)}moveLinesTo(e){this.isLineEmpty()||this.pushLine(),e.push(...this.lines),this.lines.length=0}};m(gz,"ChangeBuffer");var fO=gz,yz=class{constructor(e,r){Er(this,"deleteBuffer");Er(this,"insertBuffer");Er(this,"lines");this.deleteBuffer=e,this.insertBuffer=r,this.lines=[]}pushDiffCommonLine(e){this.lines.push(e)}pushDiffChangeLines(e){const r=e[1].length===0;(!r||this.deleteBuffer.isLineEmpty())&&this.deleteBuffer.pushDiff(e),(!r||this.insertBuffer.isLineEmpty())&&this.insertBuffer.pushDiff(e)}flushChangeLines(){this.deleteBuffer.moveLinesTo(this.lines),this.insertBuffer.moveLinesTo(this.lines)}align(e){const r=e[0],n=e[1];if(n.includes(`
`)){const i=n.split(`
`),l=i.length-1;i.forEach((c,s)=>{if(s===0){const p=new Zn(r,c);this.deleteBuffer.isLineEmpty()&&this.insertBuffer.isLineEmpty()?(this.flushChangeLines(),this.pushDiffCommonLine(p)):(this.pushDiffChangeLines(p),this.flushChangeLines())}else s<l?this.pushDiffCommonLine(new Zn(r,c)):c.length!==0&&this.pushDiffChangeLines(new Zn(r,c))})}else this.pushDiffChangeLines(e)}getLines(){return this.flushChangeLines(),this.lines}};m(yz,"CommonBuffer");var Dne=yz;function _z(t,e){const r=new fO(ho,e),n=new fO(Ki,e),i=new Dne(r,n);return t.forEach(l=>{switch(l[0]){case ho:r.align(l);break;case Ki:n.align(l);break;default:i.align(l)}}),i.getLines()}m(_z,"getAlignedDiffs");function bz(t,e){if(e){const r=t.length-1;return t.some((n,i)=>n[0]===ni&&(i!==r||n[1]!==`
`))}return t.some(r=>r[0]===ni)}m(bz,"hasCommonDiff");function vz(t,e,r){if(t!==e&&t.length!==0&&e.length!==0){const n=t.includes(`
`)||e.includes(`
`),[i,l]=EP(n?`${t}
`:t,n?`${e}
`:e,!0,r);if(bz(i,n)){const c=ru(r),s=_z(i,c.changeColor);return o1(s,l,c)}}return Fy(t.split(`
`),e.split(`
`),r)}m(vz,"diffStringsUnified");function EP(t,e,r,n){const[i,l]=fz(t,e,n);return r&&Q6(i),[i,l]}m(EP,"diffStringsRaw");function Eb(t,e){const{commonColor:r}=ru(e);return r(t)}m(Eb,"getCommonMessage");var{AsymmetricMatcher:Nne,DOMCollection:Fne,DOMElement:zne,Immutable:jne,ReactElement:Bne,ReactTestComponent:qne}=pP,xz=[qne,Bne,zne,Fne,jne,Nne,pP.Error],lS={maxDepth:20,plugins:xz},wz={callToJSON:!1,maxDepth:8,plugins:xz};function Gh(t,e,r){if(Object.is(t,e))return"";const n=sS(t);let i=n,l=!1;if(n==="object"&&typeof t.asymmetricMatch=="function"){if(t.$$typeof!==Symbol.for("jest.asymmetricMatcher")||typeof t.getExpectedType!="function")return;i=t.getExpectedType(),l=i==="string"}if(i!==sS(e)){let c=function(J){return J.length<=z?J:`${J.slice(0,z)}...`};m(c,"truncate");const{aAnnotation:s,aColor:p,aIndicator:g,bAnnotation:_,bColor:x,bIndicator:P}=ru(r),A=Tb(wz,r);let M=Ys(t,A),N=Ys(e,A);const z=1e5;M=c(M),N=c(N);const j=`${p(`${g} ${s}:`)} 
${M}`,$=`${x(`${P} ${_}:`)} 
${N}`;return`${j}

${$}`}if(!l)switch(n){case"string":return Fy(t.split(`
`),e.split(`
`),r);case"boolean":case"number":return Ez(t,e,r);case"map":return Q0(cS(t),cS(e),r);case"set":return Q0(uS(t),uS(e),r);default:return Q0(t,e,r)}}m(Gh,"diff");function Ez(t,e,r){const n=Ys(t,lS),i=Ys(e,lS);return n===i?"":Fy(n.split(`
`),i.split(`
`),r)}m(Ez,"comparePrimitive");function cS(t){return new Map(Array.from(t.entries()).sort())}m(cS,"sortMap");function uS(t){return new Set(Array.from(t.values()).sort())}m(uS,"sortSet");function Q0(t,e,r){let n,i=!1;try{const c=Tb(lS,r);n=hS(t,e,c,r)}catch{i=!0}const l=Eb(tz,r);if(n===void 0||n===l){const c=Tb(wz,r);n=hS(t,e,c,r),n!==l&&!i&&(n=`${Eb(One,r)}

${n}`)}return n}m(Q0,"compareObjects");function Tb(t,e){const{compareKeys:r,printBasicPrototype:n,maxDepth:i}=ru(e);return{...t,compareKeys:r,printBasicPrototype:n,maxDepth:i??t.maxDepth}}m(Tb,"getFormatOptions");function hS(t,e,r,n){const i={...r,indent:0},l=Ys(t,i),c=Ys(e,i);if(l===c)return Eb(tz,n);{const s=Ys(t,r),p=Ys(e,r);return pz(s.split(`
`),p.split(`
`),l.split(`
`),c.split(`
`),n)}}m(hS,"getObjectsDifference");var mO=2e4;function dS(t){return Ug(t)==="Object"&&typeof t.asymmetricMatch=="function"}m(dS,"isAsymmetricMatcher");function pS(t,e){const r=Ug(t),n=Ug(e);return r===n&&(r==="Object"||r==="Array")}m(pS,"isReplaceable");function TP(t,e,r){const{aAnnotation:n,bAnnotation:i}=ru(r);if(typeof e=="string"&&typeof t=="string"&&e.length>0&&t.length>0&&e.length<=mO&&t.length<=mO&&e!==t){if(e.includes(`
`)||t.includes(`
`))return vz(e,t,r);const[_]=EP(e,t,!0),x=_.some(N=>N[0]===ni),P=Tz(n,i),A=P(n)+Cz(fS(_,ho,x)),M=P(i)+Sz(fS(_,Ki,x));return`${A}
${M}`}const l=nS(e,{forceWritable:!0}),c=nS(t,{forceWritable:!0}),{replacedExpected:s,replacedActual:p}=SP(c,l);return Gh(s,p,r)}m(TP,"printDiffOrStringify");function SP(t,e,r=new WeakSet,n=new WeakSet){return t instanceof Error&&e instanceof Error&&typeof t.cause<"u"&&typeof e.cause>"u"?(delete t.cause,{replacedActual:t,replacedExpected:e}):pS(t,e)?r.has(t)||n.has(e)?{replacedActual:t,replacedExpected:e}:(r.add(t),n.add(e),gP(e).forEach(i=>{const l=e[i],c=t[i];if(dS(l))l.asymmetricMatch(c)&&(t[i]=l);else if(dS(c))c.asymmetricMatch(l)&&(e[i]=c);else if(pS(c,l)){const s=SP(c,l,r,n);t[i]=s.replacedActual,e[i]=s.replacedExpected}}),{replacedActual:t,replacedExpected:e}):{replacedActual:t,replacedExpected:e}}m(SP,"replaceAsymmetricMatcher");function Tz(...t){const e=t.reduce((r,n)=>n.length>r?n.length:r,0);return r=>`${r}: ${" ".repeat(e-r.length)}`}m(Tz,"getLabelPrinter");var $ne="";function CP(t){return t.replace(/\s+$/gm,e=>$ne.repeat(e.length))}m(CP,"replaceTrailingSpaces");function Sz(t){return ii.red(CP(Mo(t)))}m(Sz,"printReceived");function Cz(t){return ii.green(CP(Mo(t)))}m(Cz,"printExpected");function fS(t,e,r){return t.reduce((n,i)=>n+(i[0]===ni?i[1]:i[0]===e?r?ii.inverse(i[1]):i[1]:""),"")}m(fS,"getCommonAndChangedSubstrings");var Vne="@@__IMMUTABLE_RECORD__@@",Une="@@__IMMUTABLE_ITERABLE__@@";function Pz(t){return t&&(t[Une]||t[Vne])}m(Pz,"isImmutable");var Gne=Object.getPrototypeOf({});function mS(t){return t instanceof Error?`<unserializable>: ${t.message}`:typeof t=="string"?`<unserializable>: ${t}`:"<unserializable>"}m(mS,"getUnserializableMessage");function _l(t,e=new WeakMap){if(!t||typeof t=="string")return t;if(t instanceof Error&&"toJSON"in t&&typeof t.toJSON=="function"){const r=t.toJSON();return r&&r!==t&&typeof r=="object"&&(typeof t.message=="string"&&lg(()=>r.message??(r.message=t.message)),typeof t.stack=="string"&&lg(()=>r.stack??(r.stack=t.stack)),typeof t.name=="string"&&lg(()=>r.name??(r.name=t.name)),t.cause!=null&&lg(()=>r.cause??(r.cause=_l(t.cause,e)))),_l(r,e)}if(typeof t=="function")return`Function<${t.name||"anonymous"}>`;if(typeof t=="symbol")return t.toString();if(typeof t!="object")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return`<Buffer(${t.length}) ...>`;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return`<Uint8Array(${t.length}) ...>`;if(Pz(t))return _l(t.toJSON(),e);if(t instanceof Promise||t.constructor&&t.constructor.prototype==="AsyncFunction")return"Promise";if(typeof Element<"u"&&t instanceof Element)return t.tagName;if(typeof t.asymmetricMatch=="function")return`${t.toString()} ${H6(t.sample)}`;if(typeof t.toJSON=="function")return _l(t.toJSON(),e);if(e.has(t))return e.get(t);if(Array.isArray(t)){const r=new Array(t.length);return e.set(t,r),t.forEach((n,i)=>{try{r[i]=_l(n,e)}catch(l){r[i]=mS(l)}}),r}else{const r=Object.create(null);e.set(t,r);let n=t;for(;n&&n!==Gne;)Object.getOwnPropertyNames(n).forEach(i=>{if(!(i in r))try{r[i]=_l(t[i],e)}catch(l){delete r[i],r[i]=mS(l)}}),n=Object.getPrototypeOf(n);return r}}m(_l,"serializeValue");function lg(t){try{return t()}catch{}}m(lg,"safe");function Az(t){return t.replace(/__(vite_ssr_import|vi_import)_\d+__\./g,"")}m(Az,"normalizeErrorMessage");function s1(t,e,r=new WeakSet){if(!t||typeof t!="object")return{message:String(t)};const n=t;(n.showDiff||n.showDiff===void 0&&n.expected!==void 0&&n.actual!==void 0)&&(n.diff=TP(n.actual,n.expected,{...e,...n.diffOptions})),"expected"in n&&typeof n.expected!="string"&&(n.expected=Mo(n.expected,10)),"actual"in n&&typeof n.actual!="string"&&(n.actual=Mo(n.actual,10));try{typeof n.message=="string"&&(n.message=Az(n.message))}catch{}try{!r.has(n)&&typeof n.cause=="object"&&(r.add(n),n.cause=s1(n.cause,e,r))}catch{}try{return _l(n)}catch(i){return _l(new Error(`Failed to fully serialize error: ${i?.message}
Inner error message: ${n?.message}`))}}m(s1,"processError");var al={CALL:"storybook/instrumenter/call",SYNC:"storybook/instrumenter/sync",START:"storybook/instrumenter/start",BACK:"storybook/instrumenter/back",GOTO:"storybook/instrumenter/goto",NEXT:"storybook/instrumenter/next",END:"storybook/instrumenter/end"},IE=globalThis.__STORYBOOK_ADDONS_PREVIEW,Hne=new Error("This function ran after the play function completed. Did you forget to `await` it?"),gO=m(t=>Object.prototype.toString.call(t)==="[object Object]","isObject"),Jne=m(t=>Object.prototype.toString.call(t)==="[object Module]","isModule"),Wne=m(t=>{if(!gO(t)&&!Jne(t))return!1;if(t.constructor===void 0)return!0;const e=t.constructor.prototype;return!!gO(e)},"isInstrumentable"),Zne=m(t=>{try{return new t.constructor}catch{return{}}},"construct"),ME=m(()=>({renderPhase:"preparing",isDebugging:!1,isPlaying:!1,isLocked:!1,cursor:0,calls:[],shadowCalls:[],callRefsByResult:new Map,chainedCallIds:new Set,ancestors:[],playUntil:void 0,resolvers:{},syncTimeout:void 0}),"getInitialState"),yO=m((t,e=!1)=>{const r=(e?t.shadowCalls:t.calls).filter(i=>i.retain);if(!r.length)return;const n=new Map(Array.from(t.callRefsByResult.entries()).filter(([,i])=>i.retain));return{cursor:r.length,calls:r,callRefsByResult:n}},"getRetainedState"),Rz=class{constructor(){this.detached=!1,this.initialized=!1,this.state={},this.loadParentWindowState=m(()=>{try{this.state=$t.window?.parent?.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__||{}}catch{this.detached=!0}},"loadParentWindowState"),this.updateParentWindowState=m(()=>{try{$t.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state}catch{this.detached=!0}},"updateParentWindowState"),this.loadParentWindowState();const e=m(({storyId:p,renderPhase:g,isPlaying:_=!0,isDebugging:x=!1})=>{const P=this.getState(p);this.setState(p,{...ME(),...yO(P,x),renderPhase:g||P.renderPhase,shadowCalls:x?P.shadowCalls:[],chainedCallIds:x?P.chainedCallIds:new Set,playUntil:x?P.playUntil:void 0,isPlaying:_,isDebugging:x}),this.sync(p)},"resetState"),r=m(p=>({storyId:g,playUntil:_})=>{this.getState(g).isDebugging||this.setState(g,({calls:P})=>({calls:[],shadowCalls:P.map(A=>({...A,status:"waiting"})),isDebugging:!0}));const x=this.getLog(g);this.setState(g,({shadowCalls:P})=>{if(_||!x.length)return{playUntil:_};const A=P.findIndex(M=>M.id===x[0].callId);return{playUntil:P.slice(0,A).filter(M=>M.interceptable&&!M.ancestors?.length).slice(-1)[0]?.id}}),p.emit(bb,{storyId:g,isDebugging:!0})},"start"),n=m(p=>({storyId:g})=>{const _=this.getLog(g).filter(P=>!P.ancestors?.length),x=_.reduceRight((P,A,M)=>P>=0||A.status==="waiting"?P:M,-1);r(p)({storyId:g,playUntil:_[x-1]?.callId})},"back"),i=m(p=>({storyId:g,callId:_})=>{const{calls:x,shadowCalls:P,resolvers:A}=this.getState(g),M=x.find(({id:z})=>z===_),N=P.find(({id:z})=>z===_);if(!M&&N&&Object.values(A).length>0){const z=this.getLog(g).find(j=>j.status==="waiting")?.callId;N.id!==z&&this.setState(g,{playUntil:N.id}),Object.values(A).forEach(j=>j())}else r(p)({storyId:g,playUntil:_})},"goto"),l=m(p=>({storyId:g})=>{const{resolvers:_}=this.getState(g);if(Object.values(_).length>0)Object.values(_).forEach(x=>x());else{const x=this.getLog(g).find(P=>P.status==="waiting")?.callId;x?r(p)({storyId:g,playUntil:x}):c({storyId:g})}},"next"),c=m(({storyId:p})=>{this.setState(p,{playUntil:void 0,isDebugging:!1}),Object.values(this.getState(p).resolvers).forEach(g=>g())},"end"),s=m(({storyId:p,newPhase:g})=>{const{isDebugging:_}=this.getState(p);if(g==="preparing"&&_)return e({storyId:p,renderPhase:g,isDebugging:_});if(g==="playing")return e({storyId:p,renderPhase:g,isDebugging:_});g==="played"?this.setState(p,{renderPhase:g,isLocked:!1,isPlaying:!1,isDebugging:!1}):g==="errored"?this.setState(p,{renderPhase:g,isLocked:!1,isPlaying:!1}):g==="aborted"?this.setState(p,{renderPhase:g,isLocked:!0,isPlaying:!1}):this.setState(p,{renderPhase:g}),this.sync(p)},"renderPhaseChanged");IE&&IE.ready().then(()=>{this.channel=IE.getChannel(),this.channel.on(bb,e),this.channel.on(Th,s),this.channel.on(IC,()=>{this.initialized?this.cleanup():this.initialized=!0}),this.channel.on(al.START,r(this.channel)),this.channel.on(al.BACK,n(this.channel)),this.channel.on(al.GOTO,i(this.channel)),this.channel.on(al.NEXT,l(this.channel)),this.channel.on(al.END,c)})}getState(e){return this.state[e]||ME()}setState(e,r){if(e){const n=this.getState(e),i=typeof r=="function"?r(n):r;this.state={...this.state,[e]:{...n,...i}},this.updateParentWindowState()}}cleanup(){this.state=Object.entries(this.state).reduce((n,[i,l])=>{const c=yO(l);return c&&(n[i]=Object.assign(ME(),c)),n},{});const r={controlStates:{detached:this.detached,start:!1,back:!1,goto:!1,next:!1,end:!1},logItems:[]};this.channel?.emit(al.SYNC,r),this.updateParentWindowState()}getLog(e){const{calls:r,shadowCalls:n}=this.getState(e),i=[...n];r.forEach((c,s)=>{i[s]=c});const l=new Set;return i.reduceRight((c,s)=>(s.args.forEach(p=>{p?.__callId__&&l.add(p.__callId__)}),s.path.forEach(p=>{p.__callId__&&l.add(p.__callId__)}),(s.interceptable||s.exception)&&!l.has(s.id)&&(c.unshift({callId:s.id,status:s.status,ancestors:s.ancestors}),l.add(s.id)),c),[])}instrument(e,r,n=0){if(!Wne(e))return e;const{mutate:i=!1,path:l=[]}=r,c=r.getKeys?r.getKeys(e,n):Object.keys(e);return n+=1,c.reduce((s,p)=>{const g=Iz(e,p);if(typeof g?.get=="function"){if(g.configurable){const x=m(()=>g?.get?.bind(e)?.(),"getter");Object.defineProperty(s,p,{get:m(()=>this.instrument(x(),{...r,path:l.concat(p)},n),"get")})}return s}const _=e[p];return typeof _!="function"?(s[p]=this.instrument(_,{...r,path:l.concat(p)},n),s):"__originalFn__"in _&&typeof _.__originalFn__=="function"?(s[p]=_,s):(s[p]=(...x)=>this.track(p,_,e,x,r),s[p].__originalFn__=_,Object.defineProperty(s[p],"name",{value:p,writable:!1}),Object.keys(_).length>0&&Object.assign(s[p],this.instrument({..._},{...r,path:l.concat(p)},n)),s)},i?e:Zne(e))}track(e,r,n,i,l){const c=i?.[0]?.__storyId__||$t.__STORYBOOK_PREVIEW__?.selectionStore?.selection?.storyId,{cursor:s,ancestors:p}=this.getState(c);this.setState(c,{cursor:s+1});const g=`${p.slice(-1)[0]||c} [${s}] ${e}`,{path:_=[],intercept:x=!1,retain:P=!1}=l,A=typeof x=="function"?x(e,_):x,M={id:g,cursor:s,storyId:c,ancestors:p,path:_,method:e,args:i,interceptable:A,retain:P},z=(A&&!p.length?this.intercept:this.invoke).call(this,r,n,M,l);return this.instrument(z,{...l,mutate:!0,path:[{__callId__:M.id}]})}intercept(e,r,n,i){const{chainedCallIds:l,isDebugging:c,playUntil:s}=this.getState(n.storyId),p=l.has(n.id);return!c||p||s?(s===n.id&&this.setState(n.storyId,{playUntil:void 0}),this.invoke(e,r,n,i)):new Promise(g=>{this.setState(n.storyId,({resolvers:_})=>({isLocked:!1,resolvers:{..._,[n.id]:g}}))}).then(()=>(this.setState(n.storyId,g=>{const{[n.id]:_,...x}=g.resolvers;return{isLocked:!0,resolvers:x}}),this.invoke(e,r,n,i)))}invoke(e,r,n,i){const{callRefsByResult:l,renderPhase:c}=this.getState(n.storyId),s=25,p=m((x,P,A)=>{if(A.includes(x))return"[Circular]";if(A=[...A,x],P>s)return"...";if(l.has(x))return l.get(x);if(x instanceof Array)return x.map(M=>p(M,++P,A));if(x instanceof Date)return{__date__:{value:x.toISOString()}};if(x instanceof Error){const{name:M,message:N,stack:z}=x;return{__error__:{name:M,message:N,stack:z}}}if(x instanceof RegExp){const{flags:M,source:N}=x;return{__regexp__:{flags:M,source:N}}}if(x instanceof $t.window?.HTMLElement){const{prefix:M,localName:N,id:z,classList:j,innerText:$}=x,J=Array.from(j);return{__element__:{prefix:M,localName:N,id:z,classNames:J,innerText:$}}}return typeof x=="function"?{__function__:{name:"getMockName"in x?x.getMockName():x.name}}:typeof x=="symbol"?{__symbol__:{description:x.description}}:typeof x=="object"&&x?.constructor?.name&&x?.constructor?.name!=="Object"?{__class__:{name:x.constructor.name}}:Object.prototype.toString.call(x)==="[object Object]"?Object.fromEntries(Object.entries(x).map(([M,N])=>[M,p(N,++P,A)])):x},"serializeValues"),g={...n,args:n.args.map(x=>p(x,0,[]))};n.path.forEach(x=>{x?.__callId__&&this.setState(n.storyId,({chainedCallIds:P})=>({chainedCallIds:new Set(Array.from(P).concat(x.__callId__))}))});const _=m(x=>{if(x instanceof Error){const{name:P,message:A,stack:M,callId:N=n.id}=x,{showDiff:z=void 0,diff:j=void 0,actual:$=void 0,expected:J=void 0}=x.name==="AssertionError"?s1(x):x,X={name:P,message:A,stack:M,callId:N,showDiff:z,diff:j,actual:$,expected:J};if(this.update({...g,status:"error",exception:X}),this.setState(n.storyId,re=>({callRefsByResult:new Map([...Array.from(re.callRefsByResult.entries()),[x,{__callId__:n.id,retain:n.retain}]])})),n.ancestors?.length)throw Object.prototype.hasOwnProperty.call(x,"callId")||Object.defineProperty(x,"callId",{value:n.id}),x}throw x},"handleException");try{if(c==="played"&&!n.retain)throw Hne;const P=(i.getArgs?i.getArgs(n,this.getState(n.storyId)):n.args).map(M=>typeof M!="function"||Mz(M)||Object.keys(M).length?M:(...N)=>{const{cursor:z,ancestors:j}=this.getState(n.storyId);this.setState(n.storyId,{cursor:0,ancestors:[...j,n.id]});const $=m(()=>this.setState(n.storyId,{cursor:z,ancestors:j}),"restore");let J=!1;try{const X=M(...N);return X instanceof Promise?(J=!0,X.finally($)):X}finally{J||$()}}),A=e.apply(r,P);return A&&["object","function","symbol"].includes(typeof A)&&this.setState(n.storyId,M=>({callRefsByResult:new Map([...Array.from(M.callRefsByResult.entries()),[A,{__callId__:n.id,retain:n.retain}]])})),this.update({...g,status:A instanceof Promise?"active":"done"}),A instanceof Promise?A.then(M=>(this.update({...g,status:"done"}),M),_):A}catch(x){return _(x)}}update(e){this.channel?.emit(al.CALL,e),this.setState(e.storyId,({calls:r})=>{const n=r.concat(e).reduce((i,l)=>Object.assign(i,{[l.id]:l}),{});return{calls:Object.values(n).sort((i,l)=>i.id.localeCompare(l.id,void 0,{numeric:!0}))}}),this.sync(e.storyId)}sync(e){const r=m(()=>{const{isLocked:n,isPlaying:i}=this.getState(e),l=this.getLog(e),c=l.filter(({ancestors:x})=>!x.length).find(x=>x.status==="waiting")?.callId,s=l.some(x=>x.status==="active");if(this.detached||n||s||l.length===0){const P={controlStates:{detached:this.detached,start:!1,back:!1,goto:!1,next:!1,end:!1},logItems:l};this.channel?.emit(al.SYNC,P);return}const p=l.some(x=>x.status==="done"||x.status==="error"),_={controlStates:{detached:this.detached,start:p,back:p,goto:!0,next:i,end:i},logItems:l,pausedAt:c};this.channel?.emit(al.SYNC,_)},"synchronize");this.setState(e,({syncTimeout:n})=>(clearTimeout(n),{syncTimeout:setTimeout(r,0)}))}};m(Rz,"Instrumenter");var Kne=Rz;function wf(t,e={}){try{let r=!1,n=!1;return $t.window?.location?.search?.includes("instrument=true")?r=!0:$t.window?.location?.search?.includes("instrument=false")&&(n=!0),$t.window?.parent===$t.window&&!r||n?t:($t.window&&!$t.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__&&($t.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__=new Kne),($t.window?.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__).instrument(t,e))}catch(r){return oi.warn(r),t}}m(wf,"instrument");function Iz(t,e){let r=t;for(;r!=null;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}m(Iz,"getPropertyDescriptor");function Mz(t){if(typeof t!="function")return!1;const e=Object.getOwnPropertyDescriptor(t,"prototype");return e?!e.writable:!1}m(Mz,"isClass");var Oz=Object.defineProperty,rt=m((t,e)=>Oz(t,"name",{value:e,configurable:!0}),"__name"),PP=m((t,e)=>{for(var r in e)Oz(t,r,{get:e[r],enumerable:!0})},"__export"),Ta={};PP(Ta,{addChainableMethod:m(()=>_1,"addChainableMethod"),addLengthGuard:m(()=>Sf,"addLengthGuard"),addMethod:m(()=>m1,"addMethod"),addProperty:m(()=>f1,"addProperty"),checkError:m(()=>Xo,"checkError"),compareByInspect:m(()=>Wg,"compareByInspect"),eql:m(()=>Lz,"eql"),expectTypes:m(()=>LP,"expectTypes"),flag:m(()=>Dr,"flag"),getActual:m(()=>jy,"getActual"),getMessage:m(()=>c1,"getMessage"),getName:m(()=>qy,"getName"),getOperator:m(()=>w1,"getOperator"),getOwnEnumerableProperties:m(()=>x1,"getOwnEnumerableProperties"),getOwnEnumerablePropertySymbols:m(()=>v1,"getOwnEnumerablePropertySymbols"),getPathInfo:m(()=>p1,"getPathInfo"),hasProperty:m(()=>By,"hasProperty"),inspect:m(()=>on,"inspect"),isNaN:m(()=>jb,"isNaN"),isNumeric:m(()=>Di,"isNumeric"),isProxyEnabled:m(()=>Tf,"isProxyEnabled"),isRegExp:m(()=>Zg,"isRegExp"),objDisplay:m(()=>zc,"objDisplay"),overwriteChainableMethod:m(()=>b1,"overwriteChainableMethod"),overwriteMethod:m(()=>y1,"overwriteMethod"),overwriteProperty:m(()=>g1,"overwriteProperty"),proxify:m(()=>Hh,"proxify"),test:m(()=>a1,"test"),transferFlags:m(()=>Ms,"transferFlags"),type:m(()=>Tn,"type")});var Xo={};PP(Xo,{compatibleConstructor:m(()=>IP,"compatibleConstructor"),compatibleInstance:m(()=>RP,"compatibleInstance"),compatibleMessage:m(()=>MP,"compatibleMessage"),getConstructorName:m(()=>OP,"getConstructorName"),getMessage:m(()=>kP,"getMessage")});function zy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}m(zy,"isErrorInstance");rt(zy,"isErrorInstance");function AP(t){return Object.prototype.toString.call(t)==="[object RegExp]"}m(AP,"isRegExp");rt(AP,"isRegExp");function RP(t,e){return zy(e)&&t===e}m(RP,"compatibleInstance");rt(RP,"compatibleInstance");function IP(t,e){return zy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}m(IP,"compatibleConstructor");rt(IP,"compatibleConstructor");function MP(t,e){const r=typeof t=="string"?t:t.message;return AP(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}m(MP,"compatibleMessage");rt(MP,"compatibleMessage");function OP(t){let e=t;return zy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}m(OP,"getConstructorName");rt(OP,"getConstructorName");function kP(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}m(kP,"getMessage");rt(kP,"getMessage");function Dr(t,e,r){let n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}m(Dr,"flag");rt(Dr,"flag");function a1(t,e){let r=Dr(t,"negate"),n=e[0];return r?!n:n}m(a1,"test");rt(a1,"test");function Tn(t){if(typeof t>"u")return"undefined";if(t===null)return"null";const e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}m(Tn,"type");rt(Tn,"type");var Yne="captureStackTrace"in Error,Jm,un=(Jm=class extends Error{constructor(e="Unspecified AssertionError",r,n){super(e);Er(this,"message");this.message=e,Yne&&Error.captureStackTrace(this,n||Jm);for(const i in r)i in this||(this[i]=r[i])}get name(){return"AssertionError"}get ok(){return!1}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}},m(Jm,"_AssertionError"),rt(Jm,"AssertionError"),Jm);function LP(t,e){let r=Dr(t,"message"),n=Dr(t,"ssfi");r=r?r+": ":"",t=Dr(t,"object"),e=e.map(function(c){return c.toLowerCase()}),e.sort();let i=e.map(function(c,s){let p=~["a","e","i","o","u"].indexOf(c.charAt(0))?"an":"a";return(e.length>1&&s===e.length-1?"or ":"")+p+" "+c}).join(", "),l=Tn(t).toLowerCase();if(!e.some(function(c){return l===c}))throw new un(r+"object tested must be "+i+", but "+l+" given",void 0,n)}m(LP,"expectTypes");rt(LP,"expectTypes");function jy(t,e){return e.length>4?e[4]:t._obj}m(jy,"getActual");rt(jy,"getActual");var _O={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},Xne={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},Hp="";function DP(t,e){const r=_O[Xne[e]]||_O[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}m(DP,"colorise");rt(DP,"colorise");function NP({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:l=1/0,breakLength:c=1/0,seen:s=[],truncate:p=1/0,stylize:g=String}={},_){const x={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(l),breakLength:Number(c),truncate:Number(p),seen:s,inspect:_,stylize:g};return x.colors&&(x.stylize=DP),x}m(NP,"normaliseOptions");rt(NP,"normaliseOptions");function FP(t){return t>="\uD800"&&t<="\uDBFF"}m(FP,"isHighSurrogate");rt(FP,"isHighSurrogate");function Fa(t,e,r=Hp){t=String(t);const n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let l=e-n;return l>0&&FP(t[l-1])&&(l=l-1),`${t.slice(0,l)}${r}`}return t}m(Fa,"truncate");rt(Fa,"truncate");function cs(t,e,r,n=", "){r=r||e.inspect;const i=t.length;if(i===0)return"";const l=e.truncate;let c="",s="",p="";for(let g=0;g<i;g+=1){const _=g+1===t.length,x=g+2===t.length;p=`${Hp}(${t.length-g})`;const P=t[g];e.truncate=l-c.length-(_?0:n.length);const A=s||r(P,e)+(_?"":n),M=c.length+A.length,N=M+p.length;if(_&&M>l&&c.length+p.length<=l||!_&&!x&&N>l||(s=_?"":r(t[g+1],e)+(x?"":n),!_&&x&&N>l&&M+s.length>l))break;if(c+=A,!_&&!x&&M+s.length>=l){p=`${Hp}(${t.length-g-1})`;break}p=""}return`${c}${p}`}m(cs,"inspectList");rt(cs,"inspectList");function zP(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}m(zP,"quoteComplexKey");rt(zP,"quoteComplexKey");function Sh([t,e],r){return r.truncate-=2,typeof t=="string"?t=zP(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}m(Sh,"inspectProperty");rt(Sh,"inspectProperty");function jP(t,e){const r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;const n=cs(t,e);e.truncate-=n.length;let i="";return r.length&&(i=cs(r.map(l=>[l,t[l]]),e,Sh)),`[ ${n}${i?`, ${i}`:""} ]`}m(jP,"inspectArray");rt(jP,"inspectArray");var Qne=rt(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function Us(t,e){const r=Qne(t);e.truncate-=r.length+4;const n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let c=0;c<t.length;c++){const s=`${e.stylize(Fa(t[c],e.truncate),"number")}${c===t.length-1?"":", "}`;if(e.truncate-=s.length,t[c]!==t.length&&e.truncate<=3){i+=`${Hp}(${t.length-t[c]+1})`;break}i+=s}let l="";return n.length&&(l=cs(n.map(c=>[c,t[c]]),e,Sh)),`${r}[ ${i}${l?`, ${l}`:""} ]`}m(Us,"inspectTypedArray");rt(Us,"inspectTypedArray");function BP(t,e){const r=t.toJSON();if(r===null)return"Invalid Date";const n=r.split("T"),i=n[0];return e.stylize(`${i}T${Fa(n[1],e.truncate-i.length-1)}`,"date")}m(BP,"inspectDate");rt(BP,"inspectDate");function Sb(t,e){const r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Fa(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}m(Sb,"inspectFunction");rt(Sb,"inspectFunction");function qP([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}m(qP,"inspectMapEntry");rt(qP,"inspectMapEntry");function $P(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}m($P,"mapToEntries");rt($P,"mapToEntries");function VP(t,e){return t.size===0?"Map{}":(e.truncate-=7,`Map{ ${cs($P(t),e,qP)} }`)}m(VP,"inspectMap");rt(VP,"inspectMap");var eie=Number.isNaN||(t=>t!==t);function Cb(t,e){return eie(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Fa(String(t),e.truncate),"number")}m(Cb,"inspectNumber");rt(Cb,"inspectNumber");function Pb(t,e){let r=Fa(t.toString(),e.truncate-1);return r!==Hp&&(r+="n"),e.stylize(r,"bigint")}m(Pb,"inspectBigInt");rt(Pb,"inspectBigInt");function UP(t,e){const r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Fa(i,n)}/${r}`,"regexp")}m(UP,"inspectRegExp");rt(UP,"inspectRegExp");function GP(t){const e=[];return t.forEach(r=>{e.push(r)}),e}m(GP,"arrayFromSet");rt(GP,"arrayFromSet");function HP(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${cs(GP(t),e)} }`)}m(HP,"inspectSet");rt(HP,"inspectSet");var bO=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),tie={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},rie=16;function JP(t){return tie[t]||`\\u${`0000${t.charCodeAt(0).toString(rie)}`.slice(-4)}`}m(JP,"escape");rt(JP,"escape");function Ab(t,e){return bO.test(t)&&(t=t.replace(bO,JP)),e.stylize(`'${Fa(t,e.truncate-2)}'`,"string")}m(Ab,"inspectString");rt(Ab,"inspectString");function Rb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}m(Rb,"inspectSymbol");rt(Rb,"inspectSymbol");var nie=rt(()=>"Promise{}","getPromiseValue"),iie=nie;function Ap(t,e){const r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);const i=cs(r.map(s=>[s,t[s]]),e,Sh),l=cs(n.map(s=>[s,t[s]]),e,Sh);e.seen.pop();let c="";return i&&l&&(c=", "),`{ ${i}${c}${l} }`}m(Ap,"inspectObject");rt(Ap,"inspectObject");var OE=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function WP(t,e){let r="";return OE&&OE in t&&(r=t[OE]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Ap(t,e)}`}m(WP,"inspectClass");rt(WP,"inspectClass");function ZP(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${cs(t,e)} ]`)}m(ZP,"inspectArguments");rt(ZP,"inspectArguments");var oie=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function KP(t,e){const r=Object.getOwnPropertyNames(t).filter(c=>oie.indexOf(c)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Fa(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);const l=cs(r.map(c=>[c,t[c]]),e,Sh);return`${n}${i}${l?` { ${l} }`:""}`}m(KP,"inspectObject2");rt(KP,"inspectObject");function YP([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}m(YP,"inspectAttribute");rt(YP,"inspectAttribute");function Gg(t,e){return cs(t,e,XP,`
`)}m(Gg,"inspectNodeCollection");rt(Gg,"inspectNodeCollection");function XP(t,e){switch(t.nodeType){case 1:return l1(t,e);case 3:return e.inspect(t.data,e);default:return e.inspect(t,e)}}m(XP,"inspectNode");rt(XP,"inspectNode");function l1(t,e){const r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),l=e.stylize(">","special"),c=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let s="";r.length>0&&(s+=" ",s+=cs(r.map(_=>[_,t.getAttribute(_)]),e,YP," ")),e.truncate-=s.length;const p=e.truncate;let g=Gg(t.children,e);return g&&g.length>p&&(g=`${Hp}(${t.children.length})`),`${i}${s}${l}${g}${c}`}m(l1,"inspectHTML");rt(l1,"inspectHTML");var sie=typeof Symbol=="function"&&typeof Symbol.for=="function",kE=sie?Symbol.for("chai/inspect"):"@@chai/inspect",LE=Symbol.for("nodejs.util.inspect.custom"),vO=new WeakMap,xO={},wO={undefined:rt((t,e)=>e.stylize("undefined","undefined"),"undefined"),null:rt((t,e)=>e.stylize("null","null"),"null"),boolean:rt((t,e)=>e.stylize(String(t),"boolean"),"boolean"),Boolean:rt((t,e)=>e.stylize(String(t),"boolean"),"Boolean"),number:Cb,Number:Cb,bigint:Pb,BigInt:Pb,string:Ab,String:Ab,function:Sb,Function:Sb,symbol:Rb,Symbol:Rb,Array:jP,Date:BP,Map:VP,Set:HP,RegExp:UP,Promise:iie,WeakSet:rt((t,e)=>e.stylize("WeakSet{}","special"),"WeakSet"),WeakMap:rt((t,e)=>e.stylize("WeakMap{}","special"),"WeakMap"),Arguments:ZP,Int8Array:Us,Uint8Array:Us,Uint8ClampedArray:Us,Int16Array:Us,Uint16Array:Us,Int32Array:Us,Uint32Array:Us,Float32Array:Us,Float64Array:Us,Generator:rt(()=>"","Generator"),DataView:rt(()=>"","DataView"),ArrayBuffer:rt(()=>"","ArrayBuffer"),Error:KP,HTMLCollection:Gg,NodeList:Gg},aie=rt((t,e,r)=>kE in t&&typeof t[kE]=="function"?t[kE](e):LE in t&&typeof t[LE]=="function"?t[LE](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&vO.has(t.constructor)?vO.get(t.constructor)(t,e):xO[r]?xO[r](t,e):"","inspectCustom"),lie=Object.prototype.toString;function Hg(t,e={}){const r=NP(e,Hg),{customInspect:n}=r;let i=t===null?"null":typeof t;if(i==="object"&&(i=lie.call(t).slice(8,-1)),i in wO)return wO[i](t,r);if(n&&t){const c=aie(t,r,i);if(c)return typeof c=="string"?c:Hg(c,r)}const l=t?Object.getPrototypeOf(t):!1;return l===Object.prototype||l===null?Ap(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?l1(t,r):"constructor"in t?t.constructor!==Object?WP(t,r):Ap(t,r):t===Object(t)?Ap(t,r):r.stylize(String(t),i)}m(Hg,"inspect");rt(Hg,"inspect");var vo={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function on(t,e,r,n){let i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:vo.truncateThreshold?vo.truncateThreshold:1/0};return Hg(t,i)}m(on,"inspect2");rt(on,"inspect");function zc(t){let e=on(t),r=Object.prototype.toString.call(t);if(vo.truncateThreshold&&e.length>=vo.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){let n=Object.keys(t);return"{ Object ("+(n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", "))+") }"}else return e}else return e}m(zc,"objDisplay");rt(zc,"objDisplay");function c1(t,e){let r=Dr(t,"negate"),n=Dr(t,"object"),i=e[3],l=jy(t,e),c=r?e[2]:e[1],s=Dr(t,"message");return typeof c=="function"&&(c=c()),c=c||"",c=c.replace(/#\{this\}/g,function(){return zc(n)}).replace(/#\{act\}/g,function(){return zc(l)}).replace(/#\{exp\}/g,function(){return zc(i)}),s?s+": "+c:c}m(c1,"getMessage2");rt(c1,"getMessage");function Ms(t,e,r){let n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(let i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}m(Ms,"transferFlags");rt(Ms,"transferFlags");function Ib(t){if(typeof t>"u")return"undefined";if(t===null)return"null";const e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}m(Ib,"type2");rt(Ib,"type");function u1(){this._key="chai/deep-eql__"+Math.random()+Date.now()}m(u1,"FakeMap");rt(u1,"FakeMap");u1.prototype={get:rt(m(function(e){return e[this._key]},"get"),"get"),set:rt(m(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set"),"set")};var kz=typeof WeakMap=="function"?WeakMap:u1;function Mb(t,e,r){if(!r||Zc(t)||Zc(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}m(Mb,"memoizeCompare");rt(Mb,"memoizeCompare");function wp(t,e,r,n){if(!(!r||Zc(t)||Zc(e))){var i=r.get(t);i?i.set(e,n):(i=new kz,i.set(e,n),r.set(t,i))}}m(wp,"memoizeSet");rt(wp,"memoizeSet");var Lz=Ef;function Ef(t,e,r){if(r&&r.comparator)return Ob(t,e,r);var n=h1(t,e);return n!==null?n:Ob(t,e,r)}m(Ef,"deepEqual");rt(Ef,"deepEqual");function h1(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Zc(t)||Zc(e)?!1:null}m(h1,"simpleEqual");rt(h1,"simpleEqual");function Ob(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new kz;var n=r&&r.comparator,i=Mb(t,e,r.memoize);if(i!==null)return i;var l=Mb(e,t,r.memoize);if(l!==null)return l;if(n){var c=n(t,e);if(c===!1||c===!0)return wp(t,e,r.memoize,c),c;var s=h1(t,e);if(s!==null)return s}var p=Ib(t);if(p!==Ib(e))return wp(t,e,r.memoize,!1),!1;wp(t,e,r.memoize,!0);var g=QP(t,e,p,r);return wp(t,e,r.memoize,g),g}m(Ob,"extensiveDeepEqual");rt(Ob,"extensiveDeepEqual");function QP(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Ef(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return d1(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Tl(t,e,n);case"RegExp":return eA(t,e);case"Generator":return tA(t,e,n);case"DataView":return Tl(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Tl(new Uint8Array(t),new Uint8Array(e),n);case"Set":return kb(t,e,n);case"Map":return kb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return nA(t,e,n)}}m(QP,"extensiveDeepEqualByType");rt(QP,"extensiveDeepEqualByType");function eA(t,e){return t.toString()===e.toString()}m(eA,"regexpEqual");rt(eA,"regexpEqual");function kb(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(rt(m(function(c,s){n.push([c,s])},"gatherEntries"),"gatherEntries")),e.forEach(rt(m(function(c,s){i.push([c,s])},"gatherEntries"),"gatherEntries")),Tl(n.sort(),i.sort(),r)}m(kb,"entriesEqual");rt(kb,"entriesEqual");function Tl(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Ef(t[i],e[i],r)===!1)return!1;return!0}m(Tl,"iterableEqual");rt(Tl,"iterableEqual");function tA(t,e,r){return Tl(Jg(t),Jg(e),r)}m(tA,"generatorEqual");rt(tA,"generatorEqual");function rA(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}m(rA,"hasIteratorFunction");rt(rA,"hasIteratorFunction");function Lb(t){if(rA(t))try{return Jg(t[Symbol.iterator]())}catch{return[]}return[]}m(Lb,"getIteratorEntries");rt(Lb,"getIteratorEntries");function Jg(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}m(Jg,"getGeneratorEntries");rt(Jg,"getGeneratorEntries");function Db(t){var e=[];for(var r in t)e.push(r);return e}m(Db,"getEnumerableKeys");rt(Db,"getEnumerableKeys");function Nb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}m(Nb,"getEnumerableSymbols");rt(Nb,"getEnumerableSymbols");function d1(t,e,r,n){var i=r.length;if(i===0)return!0;for(var l=0;l<i;l+=1)if(Ef(t[r[l]],e[r[l]],n)===!1)return!1;return!0}m(d1,"keysEqual");rt(d1,"keysEqual");function nA(t,e,r){var n=Db(t),i=Db(e),l=Nb(t),c=Nb(e);if(n=n.concat(l),i=i.concat(c),n.length&&n.length===i.length)return Tl(Fb(n).sort(),Fb(i).sort())===!1?!1:d1(t,e,n,r);var s=Lb(t),p=Lb(e);return s.length&&s.length===p.length?(s.sort(),p.sort(),Tl(s,p,r)):n.length===0&&s.length===0&&i.length===0&&p.length===0}m(nA,"objectEqual");rt(nA,"objectEqual");function Zc(t){return t===null||typeof t!="object"}m(Zc,"isPrimitive");rt(Zc,"isPrimitive");function Fb(t){return t.map(rt(m(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"),"mapSymbol"))}m(Fb,"mapSymbols");rt(Fb,"mapSymbols");function By(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}m(By,"hasProperty");rt(By,"hasProperty");function iA(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};const l=/^\[(\d+)\]$/.exec(n);let c=null;return l?c={i:parseFloat(l[1])}:c={p:n.replace(/\\([.[\]])/g,"$1")},c})}m(iA,"parsePath");rt(iA,"parsePath");function zb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let l=0;l<r;l++){const c=e[l];n&&(typeof c.p>"u"?n=n[c.i]:n=n[c.p],l===r-1&&(i=n))}return i}m(zb,"internalGetPathValue");rt(zb,"internalGetPathValue");function p1(t,e){const r=iA(e),n=r[r.length-1],i={parent:r.length>1?zb(t,r,r.length-1):t,name:n.p||n.i,value:zb(t,r)};return i.exists=By(i.parent,i.name),i}m(p1,"getPathInfo");rt(p1,"getPathInfo");var Wm,Me=(Wm=class{constructor(t,e,r,n){Er(this,"__flags",{});return Dr(this,"ssfi",r||Wm),Dr(this,"lockSsfi",n),Dr(this,"object",t),Dr(this,"message",e),Dr(this,"eql",vo.deepEqual||Lz),Hh(this)}static get includeStack(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),vo.includeStack}static set includeStack(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),vo.includeStack=t}static get showDiff(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),vo.showDiff}static set showDiff(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),vo.showDiff=t}static addProperty(t,e){f1(this.prototype,t,e)}static addMethod(t,e){m1(this.prototype,t,e)}static addChainableMethod(t,e,r){_1(this.prototype,t,e,r)}static overwriteProperty(t,e){g1(this.prototype,t,e)}static overwriteMethod(t,e){y1(this.prototype,t,e)}static overwriteChainableMethod(t,e,r){b1(this.prototype,t,e,r)}assert(t,e,r,n,i,l){const c=a1(this,arguments);if(l!==!1&&(l=!0),n===void 0&&i===void 0&&(l=!1),vo.showDiff!==!0&&(l=!1),!c){e=c1(this,arguments);const p={actual:jy(this,arguments),expected:n,showDiff:l},g=w1(this,arguments);throw g&&(p.operator=g),new un(e,p,vo.includeStack?this.assert:Dr(this,"ssfi"))}}get _obj(){return Dr(this,"object")}set _obj(t){Dr(this,"object",t)}},m(Wm,"_Assertion"),rt(Wm,"Assertion"),Wm);function Tf(){return vo.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}m(Tf,"isProxyEnabled");rt(Tf,"isProxyEnabled");function f1(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:rt(m(function n(){!Tf()&&!Dr(this,"lockSsfi")&&Dr(this,"ssfi",n);let i=r.call(this);if(i!==void 0)return i;let l=new Me;return Ms(this,l),l},"propertyGetter"),"propertyGetter"),configurable:!0})}m(f1,"addProperty");rt(f1,"addProperty");var cie=Object.getOwnPropertyDescriptor(function(){},"length");function Sf(t,e,r){return cie.configurable&&Object.defineProperty(t,"length",{get:rt(function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')},"get")}),t}m(Sf,"addLengthGuard");rt(Sf,"addLengthGuard");function oA(t){let e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}m(r,"addProperty2"),rt(r,"addProperty");let n=Object.getPrototypeOf(t);for(;n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}m(oA,"getProperties");rt(oA,"getProperties");var EO=["__flags","__methods","_obj","assert"];function Hh(t,e){return Tf()?new Proxy(t,{get:rt(m(function r(n,i){if(typeof i=="string"&&vo.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');let l=null,c=4;throw oA(n).forEach(function(s){if(!Object.prototype.hasOwnProperty(s)&&EO.indexOf(s)===-1){let p=sA(i,s,c);p<c&&(l=s,c=p)}}),Error(l!==null?"Invalid Chai property: "+i+'. Did you mean "'+l+'"?':"Invalid Chai property: "+i)}return EO.indexOf(i)===-1&&!Dr(n,"lockSsfi")&&Dr(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter"),"proxyGetter")}):t}m(Hh,"proxify");rt(Hh,"proxify");function sA(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;let n=[];for(let i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(let i=0;i<e.length;i++)n[0][i]=i;for(let i=1;i<=t.length;i++){let l=t.charCodeAt(i-1);for(let c=1;c<=e.length;c++){if(Math.abs(i-c)>=r){n[i][c]=r;continue}n[i][c]=Math.min(n[i-1][c]+1,n[i][c-1]+1,n[i-1][c-1]+(l===e.charCodeAt(c-1)?0:1))}}return n[t.length][e.length]}m(sA,"stringDistanceCapped");rt(sA,"stringDistanceCapped");function m1(t,e,r){let n=rt(function(){Dr(this,"lockSsfi")||Dr(this,"ssfi",n);let i=r.apply(this,arguments);if(i!==void 0)return i;let l=new Me;return Ms(this,l),l},"methodWrapper");Sf(n,e,!1),t[e]=Hh(n,e)}m(m1,"addMethod");rt(m1,"addMethod");function g1(t,e,r){let n=Object.getOwnPropertyDescriptor(t,e),i=rt(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:rt(m(function l(){!Tf()&&!Dr(this,"lockSsfi")&&Dr(this,"ssfi",l);let c=Dr(this,"lockSsfi");Dr(this,"lockSsfi",!0);let s=r(i).call(this);if(Dr(this,"lockSsfi",c),s!==void 0)return s;let p=new Me;return Ms(this,p),p},"overwritingPropertyGetter"),"overwritingPropertyGetter"),configurable:!0})}m(g1,"overwriteProperty");rt(g1,"overwriteProperty");function y1(t,e,r){let n=t[e],i=rt(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);let l=rt(function(){Dr(this,"lockSsfi")||Dr(this,"ssfi",l);let c=Dr(this,"lockSsfi");Dr(this,"lockSsfi",!0);let s=r(i).apply(this,arguments);if(Dr(this,"lockSsfi",c),s!==void 0)return s;let p=new Me;return Ms(this,p),p},"overwritingMethodWrapper");Sf(l,e,!1),t[e]=Hh(l,e)}m(y1,"overwriteMethod");rt(y1,"overwriteMethod");var uie=typeof Object.setPrototypeOf=="function",TO=rt(function(){},"testFn"),hie=Object.getOwnPropertyNames(TO).filter(function(t){let e=Object.getOwnPropertyDescriptor(TO,t);return typeof e!="object"?!0:!e.configurable}),die=Function.prototype.call,pie=Function.prototype.apply;function _1(t,e,r,n){typeof n!="function"&&(n=rt(function(){},"chainingBehavior"));let i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:rt(m(function(){i.chainingBehavior.call(this);let c=rt(function(){Dr(this,"lockSsfi")||Dr(this,"ssfi",c);let s=i.method.apply(this,arguments);if(s!==void 0)return s;let p=new Me;return Ms(this,p),p},"chainableMethodWrapper");if(Sf(c,e,!0),uie){let s=Object.create(this);s.call=die,s.apply=pie,Object.setPrototypeOf(c,s)}else Object.getOwnPropertyNames(t).forEach(function(p){if(hie.indexOf(p)!==-1)return;let g=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(c,p,g)});return Ms(this,c),Hh(c)},"chainableMethodGetter"),"chainableMethodGetter"),configurable:!0})}m(_1,"addChainableMethod");rt(_1,"addChainableMethod");function b1(t,e,r,n){let i=t.__methods[e],l=i.chainingBehavior;i.chainingBehavior=rt(m(function(){let p=n(l).call(this);if(p!==void 0)return p;let g=new Me;return Ms(this,g),g},"overwritingChainableMethodGetter"),"overwritingChainableMethodGetter");let c=i.method;i.method=rt(m(function(){let p=r(c).apply(this,arguments);if(p!==void 0)return p;let g=new Me;return Ms(this,g),g},"overwritingChainableMethodWrapper"),"overwritingChainableMethodWrapper")}m(b1,"overwriteChainableMethod");rt(b1,"overwriteChainableMethod");function Wg(t,e){return on(t)<on(e)?-1:1}m(Wg,"compareByInspect");rt(Wg,"compareByInspect");function v1(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}m(v1,"getOwnEnumerablePropertySymbols");rt(v1,"getOwnEnumerablePropertySymbols");function x1(t){return Object.keys(t).concat(v1(t))}m(x1,"getOwnEnumerableProperties");rt(x1,"getOwnEnumerableProperties");var jb=Number.isNaN;function aA(t){let e=Tn(t);return["Array","Object","Function"].indexOf(e)!==-1}m(aA,"isObjectType");rt(aA,"isObjectType");function w1(t,e){let r=Dr(t,"operator"),n=Dr(t,"negate"),i=e[3],l=n?e[2]:e[1];if(r)return r;if(typeof l=="function"&&(l=l()),l=l||"",!l||/\shave\s/.test(l))return;let c=aA(i);return/\snot\s/.test(l)?c?"notDeepStrictEqual":"notStrictEqual":c?"deepStrictEqual":"strictEqual"}m(w1,"getOperator");rt(w1,"getOperator");function qy(t){return t.name}m(qy,"getName");rt(qy,"getName");function Zg(t){return Object.prototype.toString.call(t)==="[object RegExp]"}m(Zg,"isRegExp2");rt(Zg,"isRegExp");function Di(t){return["Number","BigInt"].includes(Tn(t))}m(Di,"isNumeric");rt(Di,"isNumeric");var{flag:We}=Ta;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){Me.addProperty(t)});Me.addProperty("not",function(){We(this,"negate",!0)});Me.addProperty("deep",function(){We(this,"deep",!0)});Me.addProperty("nested",function(){We(this,"nested",!0)});Me.addProperty("own",function(){We(this,"own",!0)});Me.addProperty("ordered",function(){We(this,"ordered",!0)});Me.addProperty("any",function(){We(this,"any",!0),We(this,"all",!1)});Me.addProperty("all",function(){We(this,"all",!0),We(this,"any",!1)});var SO={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function E1(t,e){e&&We(this,"message",e),t=t.toLowerCase();let r=We(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";const i=Tn(r).toLowerCase();SO.function.includes(t)?this.assert(SO[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}m(E1,"an");rt(E1,"an");Me.addChainableMethod("an",E1);Me.addChainableMethod("a",E1);function lA(t,e){return jb(t)&&jb(e)||t===e}m(lA,"SameValueZero");rt(lA,"SameValueZero");function Cf(){We(this,"contains",!0)}m(Cf,"includeChainingBehavior");rt(Cf,"includeChainingBehavior");function Pf(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=Tn(r).toLowerCase(),i=We(this,"message"),l=We(this,"negate"),c=We(this,"ssfi"),s=We(this,"deep"),p=s?"deep ":"",g=s?We(this,"eql"):lA;i=i?i+": ":"";let _=!1;switch(n){case"string":_=r.indexOf(t)!==-1;break;case"weakset":if(s)throw new un(i+"unable to use .deep.include with WeakSet",void 0,c);_=r.has(t);break;case"map":r.forEach(function(x){_=_||g(x,t)});break;case"set":s?r.forEach(function(x){_=_||g(x,t)}):_=r.has(t);break;case"array":s?_=r.some(function(x){return g(x,t)}):_=r.indexOf(t)!==-1;break;default:{if(t!==Object(t))throw new un(i+"the given combination of arguments ("+n+" and "+Tn(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Tn(t).toLowerCase(),void 0,c);let x=Object.keys(t),P=null,A=0;if(x.forEach(function(M){let N=new Me(r);if(Ms(this,N,!0),We(N,"lockSsfi",!0),!l||x.length===1){N.property(M,t[M]);return}try{N.property(M,t[M])}catch(z){if(!Xo.compatibleConstructor(z,un))throw z;P===null&&(P=z),A++}},this),l&&x.length>1&&A===x.length)throw P;return}}this.assert(_,"expected #{this} to "+p+"include "+on(t),"expected #{this} to not "+p+"include "+on(t))}m(Pf,"include");rt(Pf,"include");Me.addChainableMethod("include",Pf,Cf);Me.addChainableMethod("contain",Pf,Cf);Me.addChainableMethod("contains",Pf,Cf);Me.addChainableMethod("includes",Pf,Cf);Me.addProperty("ok",function(){this.assert(We(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});Me.addProperty("true",function(){this.assert(We(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!We(this,"negate"))});Me.addProperty("numeric",function(){const t=We(this,"object");this.assert(["Number","BigInt"].includes(Tn(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!We(this,"negate"))});Me.addProperty("callable",function(){const t=We(this,"object"),e=We(this,"ssfi"),r=We(this,"message"),n=r?`${r}: `:"",i=We(this,"negate"),l=i?`${n}expected ${on(t)} not to be a callable function`:`${n}expected ${on(t)} to be a callable function`,c=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Tn(t));if(c&&i||!c&&!i)throw new un(l,void 0,e)});Me.addProperty("false",function(){this.assert(We(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!We(this,"negate"))});Me.addProperty("null",function(){this.assert(We(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});Me.addProperty("undefined",function(){this.assert(We(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});Me.addProperty("NaN",function(){this.assert(jb(We(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function T1(){let t=We(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}m(T1,"assertExist");rt(T1,"assertExist");Me.addProperty("exist",T1);Me.addProperty("exists",T1);Me.addProperty("empty",function(){let t=We(this,"object"),e=We(this,"ssfi"),r=We(this,"message"),n;switch(r=r?r+": ":"",Tn(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new un(r+".empty was passed a weak collection",void 0,e);case"function":{const i=r+".empty was passed a function "+qy(t);throw new un(i.trim(),void 0,e)}default:if(t!==Object(t))throw new un(r+".empty was passed non-string primitive "+on(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function S1(){let t=We(this,"object"),e=Tn(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}m(S1,"checkArguments");rt(S1,"checkArguments");Me.addProperty("arguments",S1);Me.addProperty("Arguments",S1);function $y(t,e){e&&We(this,"message",e);let r=We(this,"object");if(We(this,"deep")){let n=We(this,"lockSsfi");We(this,"lockSsfi",!0),this.eql(t),We(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}m($y,"assertEqual");rt($y,"assertEqual");Me.addMethod("equal",$y);Me.addMethod("equals",$y);Me.addMethod("eq",$y);function C1(t,e){e&&We(this,"message",e);let r=We(this,"eql");this.assert(r(t,We(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}m(C1,"assertEql");rt(C1,"assertEql");Me.addMethod("eql",C1);Me.addMethod("eqls",C1);function Vy(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"doLength"),i=We(this,"message"),l=i?i+": ":"",c=We(this,"ssfi"),s=Tn(r).toLowerCase(),p=Tn(t).toLowerCase();if(n&&s!=="map"&&s!=="set"&&new Me(r,i,c,!0).to.have.property("length"),!n&&s==="date"&&p!=="date")throw new un(l+"the argument to above must be a date",void 0,c);if(!Di(t)&&(n||Di(r)))throw new un(l+"the argument to above must be a number",void 0,c);if(!n&&s!=="date"&&!Di(r)){let g=s==="string"?"'"+r+"'":r;throw new un(l+"expected "+g+" to be a number or a date",void 0,c)}if(n){let g="length",_;s==="map"||s==="set"?(g="size",_=r.size):_=r.length,this.assert(_>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,_)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}m(Vy,"assertAbove");rt(Vy,"assertAbove");Me.addMethod("above",Vy);Me.addMethod("gt",Vy);Me.addMethod("greaterThan",Vy);function Uy(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"doLength"),i=We(this,"message"),l=i?i+": ":"",c=We(this,"ssfi"),s=Tn(r).toLowerCase(),p=Tn(t).toLowerCase(),g,_=!0;if(n&&s!=="map"&&s!=="set"&&new Me(r,i,c,!0).to.have.property("length"),!n&&s==="date"&&p!=="date")g=l+"the argument to least must be a date";else if(!Di(t)&&(n||Di(r)))g=l+"the argument to least must be a number";else if(!n&&s!=="date"&&!Di(r)){let x=s==="string"?"'"+r+"'":r;g=l+"expected "+x+" to be a number or a date"}else _=!1;if(_)throw new un(g,void 0,c);if(n){let x="length",P;s==="map"||s==="set"?(x="size",P=r.size):P=r.length,this.assert(P>=t,"expected #{this} to have a "+x+" at least #{exp} but got #{act}","expected #{this} to have a "+x+" below #{exp}",t,P)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}m(Uy,"assertLeast");rt(Uy,"assertLeast");Me.addMethod("least",Uy);Me.addMethod("gte",Uy);Me.addMethod("greaterThanOrEqual",Uy);function Gy(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"doLength"),i=We(this,"message"),l=i?i+": ":"",c=We(this,"ssfi"),s=Tn(r).toLowerCase(),p=Tn(t).toLowerCase(),g,_=!0;if(n&&s!=="map"&&s!=="set"&&new Me(r,i,c,!0).to.have.property("length"),!n&&s==="date"&&p!=="date")g=l+"the argument to below must be a date";else if(!Di(t)&&(n||Di(r)))g=l+"the argument to below must be a number";else if(!n&&s!=="date"&&!Di(r)){let x=s==="string"?"'"+r+"'":r;g=l+"expected "+x+" to be a number or a date"}else _=!1;if(_)throw new un(g,void 0,c);if(n){let x="length",P;s==="map"||s==="set"?(x="size",P=r.size):P=r.length,this.assert(P<t,"expected #{this} to have a "+x+" below #{exp} but got #{act}","expected #{this} to not have a "+x+" below #{exp}",t,P)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}m(Gy,"assertBelow");rt(Gy,"assertBelow");Me.addMethod("below",Gy);Me.addMethod("lt",Gy);Me.addMethod("lessThan",Gy);function Hy(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"doLength"),i=We(this,"message"),l=i?i+": ":"",c=We(this,"ssfi"),s=Tn(r).toLowerCase(),p=Tn(t).toLowerCase(),g,_=!0;if(n&&s!=="map"&&s!=="set"&&new Me(r,i,c,!0).to.have.property("length"),!n&&s==="date"&&p!=="date")g=l+"the argument to most must be a date";else if(!Di(t)&&(n||Di(r)))g=l+"the argument to most must be a number";else if(!n&&s!=="date"&&!Di(r)){let x=s==="string"?"'"+r+"'":r;g=l+"expected "+x+" to be a number or a date"}else _=!1;if(_)throw new un(g,void 0,c);if(n){let x="length",P;s==="map"||s==="set"?(x="size",P=r.size):P=r.length,this.assert(P<=t,"expected #{this} to have a "+x+" at most #{exp} but got #{act}","expected #{this} to have a "+x+" above #{exp}",t,P)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}m(Hy,"assertMost");rt(Hy,"assertMost");Me.addMethod("most",Hy);Me.addMethod("lte",Hy);Me.addMethod("lessThanOrEqual",Hy);Me.addMethod("within",function(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"doLength"),l=We(this,"message"),c=l?l+": ":"",s=We(this,"ssfi"),p=Tn(n).toLowerCase(),g=Tn(t).toLowerCase(),_=Tn(e).toLowerCase(),x,P=!0,A=g==="date"&&_==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new Me(n,l,s,!0).to.have.property("length"),!i&&p==="date"&&(g!=="date"||_!=="date"))x=c+"the arguments to within must be dates";else if((!Di(t)||!Di(e))&&(i||Di(n)))x=c+"the arguments to within must be numbers";else if(!i&&p!=="date"&&!Di(n)){let M=p==="string"?"'"+n+"'":n;x=c+"expected "+M+" to be a number or a date"}else P=!1;if(P)throw new un(x,void 0,s);if(i){let M="length",N;p==="map"||p==="set"?(M="size",N=n.size):N=n.length,this.assert(N>=t&&N<=e,"expected #{this} to have a "+M+" within "+A,"expected #{this} to not have a "+M+" within "+A)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+A,"expected #{this} to not be within "+A)});function P1(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"ssfi"),i=We(this,"message"),l;try{l=r instanceof t}catch(s){throw s instanceof TypeError?(i=i?i+": ":"",new un(i+"The instanceof assertion needs a constructor but "+Tn(t)+" was given.",void 0,n)):s}let c=qy(t);c==null&&(c="an unnamed constructor"),this.assert(l,"expected #{this} to be an instance of "+c,"expected #{this} to not be an instance of "+c)}m(P1,"assertInstanceOf");rt(P1,"assertInstanceOf");Me.addMethod("instanceof",P1);Me.addMethod("instanceOf",P1);function A1(t,e,r){r&&We(this,"message",r);let n=We(this,"nested"),i=We(this,"own"),l=We(this,"message"),c=We(this,"object"),s=We(this,"ssfi"),p=typeof t;if(l=l?l+": ":"",n){if(p!=="string")throw new un(l+"the argument to property must be a string when using nested syntax",void 0,s)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new un(l+"the argument to property must be a string, number, or symbol",void 0,s);if(n&&i)throw new un(l+'The "nested" and "own" flags cannot be combined.',void 0,s);if(c==null)throw new un(l+"Target cannot be null or undefined.",void 0,s);let g=We(this,"deep"),_=We(this,"negate"),x=n?p1(c,t):null,P=n?x.value:c[t],A=g?We(this,"eql"):(z,j)=>z===j,M="";g&&(M+="deep "),i&&(M+="own "),n&&(M+="nested "),M+="property ";let N;i?N=Object.prototype.hasOwnProperty.call(c,t):n?N=x.exists:N=By(c,t),(!_||arguments.length===1)&&this.assert(N,"expected #{this} to have "+M+on(t),"expected #{this} to not have "+M+on(t)),arguments.length>1&&this.assert(N&&A(e,P),"expected #{this} to have "+M+on(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+M+on(t)+" of #{act}",e,P),We(this,"object",P)}m(A1,"assertProperty");rt(A1,"assertProperty");Me.addMethod("property",A1);function R1(t,e,r){We(this,"own",!0),A1.apply(this,arguments)}m(R1,"assertOwnProperty");rt(R1,"assertOwnProperty");Me.addMethod("ownProperty",R1);Me.addMethod("haveOwnProperty",R1);function I1(t,e,r){typeof e=="string"&&(r=e,e=null),r&&We(this,"message",r);let n=We(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),l=We(this,"eql");i&&e?this.assert(l(e,i),"expected the own property descriptor for "+on(t)+" on #{this} to match "+on(e)+", got "+on(i),"expected the own property descriptor for "+on(t)+" on #{this} to not match "+on(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+on(t),"expected #{this} to not have an own property descriptor for "+on(t)),We(this,"object",i)}m(I1,"assertOwnPropertyDescriptor");rt(I1,"assertOwnPropertyDescriptor");Me.addMethod("ownPropertyDescriptor",I1);Me.addMethod("haveOwnPropertyDescriptor",I1);function M1(){We(this,"doLength",!0)}m(M1,"assertLengthChain");rt(M1,"assertLengthChain");function O1(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=Tn(r).toLowerCase(),i=We(this,"message"),l=We(this,"ssfi"),c="length",s;switch(n){case"map":case"set":c="size",s=r.size;break;default:new Me(r,i,l,!0).to.have.property("length"),s=r.length}this.assert(s==t,"expected #{this} to have a "+c+" of #{exp} but got #{act}","expected #{this} to not have a "+c+" of #{act}",t,s)}m(O1,"assertLength");rt(O1,"assertLength");Me.addChainableMethod("length",O1,M1);Me.addChainableMethod("lengthOf",O1,M1);function k1(t,e){e&&We(this,"message",e);let r=We(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}m(k1,"assertMatch");rt(k1,"assertMatch");Me.addMethod("match",k1);Me.addMethod("matches",k1);Me.addMethod("string",function(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"message"),i=We(this,"ssfi");new Me(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+on(t),"expected #{this} to not contain "+on(t))});function L1(t){let e=We(this,"object"),r=Tn(e),n=Tn(t),i=We(this,"ssfi"),l=We(this,"deep"),c,s="",p,g=!0,_=We(this,"message");_=_?_+": ":"";let x=_+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")s=l?"deeply ":"",p=[],e.forEach(function(j,$){p.push($)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=x1(e),n){case"Array":if(arguments.length>1)throw new un(x,void 0,i);break;case"Object":if(arguments.length>1)throw new un(x,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(j){return typeof j=="symbol"?j:String(j)})}if(!t.length)throw new un(_+"keys required",void 0,i);let P=t.length,A=We(this,"any"),M=We(this,"all"),N=t,z=l?We(this,"eql"):(j,$)=>j===$;if(!A&&!M&&(M=!0),A&&(g=N.some(function(j){return p.some(function($){return z(j,$)})})),M&&(g=N.every(function(j){return p.some(function($){return z(j,$)})}),We(this,"contains")||(g=g&&t.length==p.length)),P>1){t=t.map(function($){return on($)});let j=t.pop();M&&(c=t.join(", ")+", and "+j),A&&(c=t.join(", ")+", or "+j)}else c=on(t[0]);c=(P>1?"keys ":"key ")+c,c=(We(this,"contains")?"contain ":"have ")+c,this.assert(g,"expected #{this} to "+s+c,"expected #{this} to not "+s+c,N.slice(0).sort(Wg),p.sort(Wg),!0)}m(L1,"assertKeys");rt(L1,"assertKeys");Me.addMethod("keys",L1);Me.addMethod("key",L1);function Jy(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"ssfi"),l=We(this,"message"),c=We(this,"negate")||!1;new Me(n,l,i,!0).is.a("function"),(Zg(t)||typeof t=="string")&&(e=t,t=null);let s,p=!1;try{n()}catch(A){p=!0,s=A}let g=t===void 0&&e===void 0,_=!!(t&&e),x=!1,P=!1;if(g||!g&&!c){let A="an error";t instanceof Error?A="#{exp}":t&&(A=Xo.getConstructorName(t));let M=s;if(s instanceof Error)M=s.toString();else if(typeof s=="string")M=s;else if(s&&(typeof s=="object"||typeof s=="function"))try{M=Xo.getConstructorName(s)}catch{}this.assert(p,"expected #{this} to throw "+A,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),M)}if(t&&s&&(t instanceof Error&&Xo.compatibleInstance(s,t)===c&&(_&&c?x=!0:this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s&&!c?" but #{act} was thrown":""),t.toString(),s.toString())),Xo.compatibleConstructor(s,t)===c&&(_&&c?x=!0:this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Xo.getConstructorName(t),s instanceof Error?s.toString():s&&Xo.getConstructorName(s)))),s&&e!==void 0&&e!==null){let A="including";Zg(e)&&(A="matching"),Xo.compatibleMessage(s,e)===c&&(_&&c?P=!0:this.assert(c,"expected #{this} to throw error "+A+" #{exp} but got #{act}","expected #{this} to throw error not "+A+" #{exp}",e,Xo.getMessage(s)))}x&&P&&this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Xo.getConstructorName(t),s instanceof Error?s.toString():s&&Xo.getConstructorName(s)),We(this,"object",s)}m(Jy,"assertThrows");rt(Jy,"assertThrows");Me.addMethod("throw",Jy);Me.addMethod("throws",Jy);Me.addMethod("Throw",Jy);function D1(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+on(t),"expected #{this} to not respond to "+on(t))}m(D1,"respondTo");rt(D1,"respondTo");Me.addMethod("respondTo",D1);Me.addMethod("respondsTo",D1);Me.addProperty("itself",function(){We(this,"itself",!0)});function N1(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+zc(t),"expected #{this} to not satisfy"+zc(t),!We(this,"negate"),n)}m(N1,"satisfy");rt(N1,"satisfy");Me.addMethod("satisfy",N1);Me.addMethod("satisfies",N1);function F1(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"message"),l=We(this,"ssfi");new Me(n,i,l,!0).is.numeric;let c="A `delta` value is required for `closeTo`";if(e==null)throw new un(i?`${i}: ${c}`:c,void 0,l);if(new Me(e,i,l,!0).is.numeric,c="A `expected` value is required for `closeTo`",t==null)throw new un(i?`${i}: ${c}`:c,void 0,l);new Me(t,i,l,!0).is.numeric;const s=rt(g=>g<0n?-g:g,"abs"),p=rt(g=>parseFloat(parseFloat(g).toPrecision(12)),"strip");this.assert(p(s(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}m(F1,"closeTo");rt(F1,"closeTo");Me.addMethod("closeTo",F1);Me.addMethod("approximately",F1);function cA(t,e,r,n,i){let l=Array.from(e),c=Array.from(t);if(!n){if(c.length!==l.length)return!1;l=l.slice()}return c.every(function(s,p){if(i)return r?r(s,l[p]):s===l[p];if(!r){let g=l.indexOf(s);return g===-1?!1:(n||l.splice(g,1),!0)}return l.some(function(g,_){return r(s,g)?(n||l.splice(_,1),!0):!1})})}m(cA,"isSubsetOf");rt(cA,"isSubsetOf");Me.addMethod("members",function(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"message"),i=We(this,"ssfi");new Me(r,n,i,!0).to.be.iterable,new Me(t,n,i,!0).to.be.iterable;let l=We(this,"contains"),c=We(this,"ordered"),s,p,g;l?(s=c?"an ordered superset":"a superset",p="expected #{this} to be "+s+" of #{exp}",g="expected #{this} to not be "+s+" of #{exp}"):(s=c?"ordered members":"members",p="expected #{this} to have the same "+s+" as #{exp}",g="expected #{this} to not have the same "+s+" as #{exp}");let _=We(this,"deep")?We(this,"eql"):void 0;this.assert(cA(t,r,_,l,c),p,g,t,r,!0)});Me.addProperty("iterable",function(t){t&&We(this,"message",t);let e=We(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function uA(t,e){e&&We(this,"message",e);let r=We(this,"object"),n=We(this,"message"),i=We(this,"ssfi"),l=We(this,"contains"),c=We(this,"deep"),s=We(this,"eql");new Me(t,n,i,!0).to.be.an("array"),l?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):c?this.assert(t.some(function(p){return s(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}m(uA,"oneOf");rt(uA,"oneOf");Me.addMethod("oneOf",uA);function z1(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"message"),l=We(this,"ssfi");new Me(n,i,l,!0).is.a("function");let c;e?(new Me(t,i,l,!0).to.have.property(e),c=t[e]):(new Me(t,i,l,!0).is.a("function"),c=t()),n();let s=e==null?t():t[e],p=e==null?c:"."+e;We(this,"deltaMsgObj",p),We(this,"initialDeltaValue",c),We(this,"finalDeltaValue",s),We(this,"deltaBehavior","change"),We(this,"realDelta",s!==c),this.assert(c!==s,"expected "+p+" to change","expected "+p+" to not change")}m(z1,"assertChanges");rt(z1,"assertChanges");Me.addMethod("change",z1);Me.addMethod("changes",z1);function j1(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"message"),l=We(this,"ssfi");new Me(n,i,l,!0).is.a("function");let c;e?(new Me(t,i,l,!0).to.have.property(e),c=t[e]):(new Me(t,i,l,!0).is.a("function"),c=t()),new Me(c,i,l,!0).is.a("number"),n();let s=e==null?t():t[e],p=e==null?c:"."+e;We(this,"deltaMsgObj",p),We(this,"initialDeltaValue",c),We(this,"finalDeltaValue",s),We(this,"deltaBehavior","increase"),We(this,"realDelta",s-c),this.assert(s-c>0,"expected "+p+" to increase","expected "+p+" to not increase")}m(j1,"assertIncreases");rt(j1,"assertIncreases");Me.addMethod("increase",j1);Me.addMethod("increases",j1);function B1(t,e,r){r&&We(this,"message",r);let n=We(this,"object"),i=We(this,"message"),l=We(this,"ssfi");new Me(n,i,l,!0).is.a("function");let c;e?(new Me(t,i,l,!0).to.have.property(e),c=t[e]):(new Me(t,i,l,!0).is.a("function"),c=t()),new Me(c,i,l,!0).is.a("number"),n();let s=e==null?t():t[e],p=e==null?c:"."+e;We(this,"deltaMsgObj",p),We(this,"initialDeltaValue",c),We(this,"finalDeltaValue",s),We(this,"deltaBehavior","decrease"),We(this,"realDelta",c-s),this.assert(s-c<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}m(B1,"assertDecreases");rt(B1,"assertDecreases");Me.addMethod("decrease",B1);Me.addMethod("decreases",B1);function hA(t,e){e&&We(this,"message",e);let r=We(this,"deltaMsgObj"),n=We(this,"initialDeltaValue"),i=We(this,"finalDeltaValue"),l=We(this,"deltaBehavior"),c=We(this,"realDelta"),s;l==="change"?s=Math.abs(i-n)===Math.abs(t):s=c===Math.abs(t),this.assert(s,"expected "+r+" to "+l+" by "+t,"expected "+r+" to not "+l+" by "+t)}m(hA,"assertDelta");rt(hA,"assertDelta");Me.addMethod("by",hA);Me.addProperty("extensible",function(){let t=We(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});Me.addProperty("sealed",function(){let t=We(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});Me.addProperty("frozen",function(){let t=We(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});Me.addProperty("finite",function(t){let e=We(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Kg(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return Kg(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){let n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?Kg(n,i):typeof n=="function"?n(i):i===n}):!1}m(Kg,"compareSubset");rt(Kg,"compareSubset");Me.addMethod("containSubset",function(t){const e=Dr(this,"object"),r=vo.showDiff;this.assert(Kg(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function jc(t,e){return new Me(t,e)}m(jc,"expect");rt(jc,"expect");jc.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new un(r,{actual:t,expected:e,operator:n},jc.fail)};var Dz={};PP(Dz,{Should:m(()=>mie,"Should"),should:m(()=>fie,"should")});function q1(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new Me(this.valueOf(),null,t):new Me(this,null,t)}m(t,"shouldGetter"),rt(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}m(e,"shouldSetter"),rt(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});let r={};return r.fail=function(n,i,l,c){throw arguments.length<2&&(l=n,n=void 0),l=l||"should.fail()",new un(l,{actual:n,expected:i,operator:c},r.fail)},r.equal=function(n,i,l){new Me(n,l).to.equal(i)},r.Throw=function(n,i,l,c){new Me(n,c).to.Throw(i,l)},r.exist=function(n,i){new Me(n,i).to.exist},r.not={},r.not.equal=function(n,i,l){new Me(n,l).to.not.equal(i)},r.not.Throw=function(n,i,l,c){new Me(n,c).to.not.Throw(i,l)},r.not.exist=function(n,i){new Me(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}m(q1,"loadShould");rt(q1,"loadShould");var fie=q1,mie=q1;function Ce(t,e){new Me(null,null,Ce,!0).assert(t,e,"[ negation message unavailable ]")}m(Ce,"assert");rt(Ce,"assert");Ce.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new un(r,{actual:t,expected:e,operator:n},Ce.fail)};Ce.isOk=function(t,e){new Me(t,e,Ce.isOk,!0).is.ok};Ce.isNotOk=function(t,e){new Me(t,e,Ce.isNotOk,!0).is.not.ok};Ce.equal=function(t,e,r){let n=new Me(t,r,Ce.equal,!0);n.assert(e==Dr(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};Ce.notEqual=function(t,e,r){let n=new Me(t,r,Ce.notEqual,!0);n.assert(e!=Dr(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};Ce.strictEqual=function(t,e,r){new Me(t,r,Ce.strictEqual,!0).to.equal(e)};Ce.notStrictEqual=function(t,e,r){new Me(t,r,Ce.notStrictEqual,!0).to.not.equal(e)};Ce.deepEqual=Ce.deepStrictEqual=function(t,e,r){new Me(t,r,Ce.deepEqual,!0).to.eql(e)};Ce.notDeepEqual=function(t,e,r){new Me(t,r,Ce.notDeepEqual,!0).to.not.eql(e)};Ce.isAbove=function(t,e,r){new Me(t,r,Ce.isAbove,!0).to.be.above(e)};Ce.isAtLeast=function(t,e,r){new Me(t,r,Ce.isAtLeast,!0).to.be.least(e)};Ce.isBelow=function(t,e,r){new Me(t,r,Ce.isBelow,!0).to.be.below(e)};Ce.isAtMost=function(t,e,r){new Me(t,r,Ce.isAtMost,!0).to.be.most(e)};Ce.isTrue=function(t,e){new Me(t,e,Ce.isTrue,!0).is.true};Ce.isNotTrue=function(t,e){new Me(t,e,Ce.isNotTrue,!0).to.not.equal(!0)};Ce.isFalse=function(t,e){new Me(t,e,Ce.isFalse,!0).is.false};Ce.isNotFalse=function(t,e){new Me(t,e,Ce.isNotFalse,!0).to.not.equal(!1)};Ce.isNull=function(t,e){new Me(t,e,Ce.isNull,!0).to.equal(null)};Ce.isNotNull=function(t,e){new Me(t,e,Ce.isNotNull,!0).to.not.equal(null)};Ce.isNaN=function(t,e){new Me(t,e,Ce.isNaN,!0).to.be.NaN};Ce.isNotNaN=function(t,e){new Me(t,e,Ce.isNotNaN,!0).not.to.be.NaN};Ce.exists=function(t,e){new Me(t,e,Ce.exists,!0).to.exist};Ce.notExists=function(t,e){new Me(t,e,Ce.notExists,!0).to.not.exist};Ce.isUndefined=function(t,e){new Me(t,e,Ce.isUndefined,!0).to.equal(void 0)};Ce.isDefined=function(t,e){new Me(t,e,Ce.isDefined,!0).to.not.equal(void 0)};Ce.isCallable=function(t,e){new Me(t,e,Ce.isCallable,!0).is.callable};Ce.isNotCallable=function(t,e){new Me(t,e,Ce.isNotCallable,!0).is.not.callable};Ce.isObject=function(t,e){new Me(t,e,Ce.isObject,!0).to.be.a("object")};Ce.isNotObject=function(t,e){new Me(t,e,Ce.isNotObject,!0).to.not.be.a("object")};Ce.isArray=function(t,e){new Me(t,e,Ce.isArray,!0).to.be.an("array")};Ce.isNotArray=function(t,e){new Me(t,e,Ce.isNotArray,!0).to.not.be.an("array")};Ce.isString=function(t,e){new Me(t,e,Ce.isString,!0).to.be.a("string")};Ce.isNotString=function(t,e){new Me(t,e,Ce.isNotString,!0).to.not.be.a("string")};Ce.isNumber=function(t,e){new Me(t,e,Ce.isNumber,!0).to.be.a("number")};Ce.isNotNumber=function(t,e){new Me(t,e,Ce.isNotNumber,!0).to.not.be.a("number")};Ce.isNumeric=function(t,e){new Me(t,e,Ce.isNumeric,!0).is.numeric};Ce.isNotNumeric=function(t,e){new Me(t,e,Ce.isNotNumeric,!0).is.not.numeric};Ce.isFinite=function(t,e){new Me(t,e,Ce.isFinite,!0).to.be.finite};Ce.isBoolean=function(t,e){new Me(t,e,Ce.isBoolean,!0).to.be.a("boolean")};Ce.isNotBoolean=function(t,e){new Me(t,e,Ce.isNotBoolean,!0).to.not.be.a("boolean")};Ce.typeOf=function(t,e,r){new Me(t,r,Ce.typeOf,!0).to.be.a(e)};Ce.notTypeOf=function(t,e,r){new Me(t,r,Ce.notTypeOf,!0).to.not.be.a(e)};Ce.instanceOf=function(t,e,r){new Me(t,r,Ce.instanceOf,!0).to.be.instanceOf(e)};Ce.notInstanceOf=function(t,e,r){new Me(t,r,Ce.notInstanceOf,!0).to.not.be.instanceOf(e)};Ce.include=function(t,e,r){new Me(t,r,Ce.include,!0).include(e)};Ce.notInclude=function(t,e,r){new Me(t,r,Ce.notInclude,!0).not.include(e)};Ce.deepInclude=function(t,e,r){new Me(t,r,Ce.deepInclude,!0).deep.include(e)};Ce.notDeepInclude=function(t,e,r){new Me(t,r,Ce.notDeepInclude,!0).not.deep.include(e)};Ce.nestedInclude=function(t,e,r){new Me(t,r,Ce.nestedInclude,!0).nested.include(e)};Ce.notNestedInclude=function(t,e,r){new Me(t,r,Ce.notNestedInclude,!0).not.nested.include(e)};Ce.deepNestedInclude=function(t,e,r){new Me(t,r,Ce.deepNestedInclude,!0).deep.nested.include(e)};Ce.notDeepNestedInclude=function(t,e,r){new Me(t,r,Ce.notDeepNestedInclude,!0).not.deep.nested.include(e)};Ce.ownInclude=function(t,e,r){new Me(t,r,Ce.ownInclude,!0).own.include(e)};Ce.notOwnInclude=function(t,e,r){new Me(t,r,Ce.notOwnInclude,!0).not.own.include(e)};Ce.deepOwnInclude=function(t,e,r){new Me(t,r,Ce.deepOwnInclude,!0).deep.own.include(e)};Ce.notDeepOwnInclude=function(t,e,r){new Me(t,r,Ce.notDeepOwnInclude,!0).not.deep.own.include(e)};Ce.match=function(t,e,r){new Me(t,r,Ce.match,!0).to.match(e)};Ce.notMatch=function(t,e,r){new Me(t,r,Ce.notMatch,!0).to.not.match(e)};Ce.property=function(t,e,r){new Me(t,r,Ce.property,!0).to.have.property(e)};Ce.notProperty=function(t,e,r){new Me(t,r,Ce.notProperty,!0).to.not.have.property(e)};Ce.propertyVal=function(t,e,r,n){new Me(t,n,Ce.propertyVal,!0).to.have.property(e,r)};Ce.notPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notPropertyVal,!0).to.not.have.property(e,r)};Ce.deepPropertyVal=function(t,e,r,n){new Me(t,n,Ce.deepPropertyVal,!0).to.have.deep.property(e,r)};Ce.notDeepPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};Ce.ownProperty=function(t,e,r){new Me(t,r,Ce.ownProperty,!0).to.have.own.property(e)};Ce.notOwnProperty=function(t,e,r){new Me(t,r,Ce.notOwnProperty,!0).to.not.have.own.property(e)};Ce.ownPropertyVal=function(t,e,r,n){new Me(t,n,Ce.ownPropertyVal,!0).to.have.own.property(e,r)};Ce.notOwnPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};Ce.deepOwnPropertyVal=function(t,e,r,n){new Me(t,n,Ce.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};Ce.notDeepOwnPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};Ce.nestedProperty=function(t,e,r){new Me(t,r,Ce.nestedProperty,!0).to.have.nested.property(e)};Ce.notNestedProperty=function(t,e,r){new Me(t,r,Ce.notNestedProperty,!0).to.not.have.nested.property(e)};Ce.nestedPropertyVal=function(t,e,r,n){new Me(t,n,Ce.nestedPropertyVal,!0).to.have.nested.property(e,r)};Ce.notNestedPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};Ce.deepNestedPropertyVal=function(t,e,r,n){new Me(t,n,Ce.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};Ce.notDeepNestedPropertyVal=function(t,e,r,n){new Me(t,n,Ce.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};Ce.lengthOf=function(t,e,r){new Me(t,r,Ce.lengthOf,!0).to.have.lengthOf(e)};Ce.hasAnyKeys=function(t,e,r){new Me(t,r,Ce.hasAnyKeys,!0).to.have.any.keys(e)};Ce.hasAllKeys=function(t,e,r){new Me(t,r,Ce.hasAllKeys,!0).to.have.all.keys(e)};Ce.containsAllKeys=function(t,e,r){new Me(t,r,Ce.containsAllKeys,!0).to.contain.all.keys(e)};Ce.doesNotHaveAnyKeys=function(t,e,r){new Me(t,r,Ce.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};Ce.doesNotHaveAllKeys=function(t,e,r){new Me(t,r,Ce.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};Ce.hasAnyDeepKeys=function(t,e,r){new Me(t,r,Ce.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};Ce.hasAllDeepKeys=function(t,e,r){new Me(t,r,Ce.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};Ce.containsAllDeepKeys=function(t,e,r){new Me(t,r,Ce.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};Ce.doesNotHaveAnyDeepKeys=function(t,e,r){new Me(t,r,Ce.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};Ce.doesNotHaveAllDeepKeys=function(t,e,r){new Me(t,r,Ce.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};Ce.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);let i=new Me(t,n,Ce.throws,!0).to.throw(e,r);return Dr(i,"object")};Ce.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new Me(t,n,Ce.doesNotThrow,!0).to.not.throw(e,r)};Ce.operator=function(t,e,r,n){let i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new un(n+'Invalid operator "'+e+'"',void 0,Ce.operator)}let l=new Me(i,n,Ce.operator,!0);l.assert(Dr(l,"object")===!0,"expected "+on(t)+" to be "+e+" "+on(r),"expected "+on(t)+" to not be "+e+" "+on(r))};Ce.closeTo=function(t,e,r,n){new Me(t,n,Ce.closeTo,!0).to.be.closeTo(e,r)};Ce.approximately=function(t,e,r,n){new Me(t,n,Ce.approximately,!0).to.be.approximately(e,r)};Ce.sameMembers=function(t,e,r){new Me(t,r,Ce.sameMembers,!0).to.have.same.members(e)};Ce.notSameMembers=function(t,e,r){new Me(t,r,Ce.notSameMembers,!0).to.not.have.same.members(e)};Ce.sameDeepMembers=function(t,e,r){new Me(t,r,Ce.sameDeepMembers,!0).to.have.same.deep.members(e)};Ce.notSameDeepMembers=function(t,e,r){new Me(t,r,Ce.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};Ce.sameOrderedMembers=function(t,e,r){new Me(t,r,Ce.sameOrderedMembers,!0).to.have.same.ordered.members(e)};Ce.notSameOrderedMembers=function(t,e,r){new Me(t,r,Ce.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};Ce.sameDeepOrderedMembers=function(t,e,r){new Me(t,r,Ce.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};Ce.notSameDeepOrderedMembers=function(t,e,r){new Me(t,r,Ce.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};Ce.includeMembers=function(t,e,r){new Me(t,r,Ce.includeMembers,!0).to.include.members(e)};Ce.notIncludeMembers=function(t,e,r){new Me(t,r,Ce.notIncludeMembers,!0).to.not.include.members(e)};Ce.includeDeepMembers=function(t,e,r){new Me(t,r,Ce.includeDeepMembers,!0).to.include.deep.members(e)};Ce.notIncludeDeepMembers=function(t,e,r){new Me(t,r,Ce.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};Ce.includeOrderedMembers=function(t,e,r){new Me(t,r,Ce.includeOrderedMembers,!0).to.include.ordered.members(e)};Ce.notIncludeOrderedMembers=function(t,e,r){new Me(t,r,Ce.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};Ce.includeDeepOrderedMembers=function(t,e,r){new Me(t,r,Ce.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};Ce.notIncludeDeepOrderedMembers=function(t,e,r){new Me(t,r,Ce.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};Ce.oneOf=function(t,e,r){new Me(t,r,Ce.oneOf,!0).to.be.oneOf(e)};Ce.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${on(t)} to be an iterable`:`expected ${on(t)} to be an iterable`,new un(e,void 0,Ce.isIterable)};Ce.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.changes,!0).to.change(e,r)};Ce.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.changesBy,!0).to.change(e,r).by(n)};Ce.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.doesNotChange,!0).to.not.change(e,r)};Ce.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.changesButNotBy,!0).to.change(e,r).but.not.by(n)};Ce.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.increases,!0).to.increase(e,r)};Ce.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.increasesBy,!0).to.increase(e,r).by(n)};Ce.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.doesNotIncrease,!0).to.not.increase(e,r)};Ce.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};Ce.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.decreases,!0).to.decrease(e,r)};Ce.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.decreasesBy,!0).to.decrease(e,r).by(n)};Ce.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new Me(t,n,Ce.doesNotDecrease,!0).to.not.decrease(e,r)};Ce.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);return new Me(t,i,Ce.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};Ce.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){let l=n;n=r,i=l}else arguments.length===3&&(n=r,r=null);new Me(t,i,Ce.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};Ce.ifError=function(t){if(t)throw t};Ce.isExtensible=function(t,e){new Me(t,e,Ce.isExtensible,!0).to.be.extensible};Ce.isNotExtensible=function(t,e){new Me(t,e,Ce.isNotExtensible,!0).to.not.be.extensible};Ce.isSealed=function(t,e){new Me(t,e,Ce.isSealed,!0).to.be.sealed};Ce.isNotSealed=function(t,e){new Me(t,e,Ce.isNotSealed,!0).to.not.be.sealed};Ce.isFrozen=function(t,e){new Me(t,e,Ce.isFrozen,!0).to.be.frozen};Ce.isNotFrozen=function(t,e){new Me(t,e,Ce.isNotFrozen,!0).to.not.be.frozen};Ce.isEmpty=function(t,e){new Me(t,e,Ce.isEmpty,!0).to.be.empty};Ce.isNotEmpty=function(t,e){new Me(t,e,Ce.isNotEmpty,!0).to.not.be.empty};Ce.containsSubset=function(t,e,r){new Me(t,r).to.containSubset(e)};Ce.doesNotContainSubset=function(t,e,r){new Me(t,r).to.not.containSubset(e)};var gie=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(const[t,e]of gie)Ce[e]=Ce[t];var CO=[];function uh(t){const e={use:uh,AssertionError:un,util:Ta,config:vo,expect:jc,assert:Ce,Assertion:Me,...Dz};return~CO.indexOf(t)||(t(e,Ta),CO.push(t)),e}m(uh,"use");rt(uh,"use");var Nz={};ko(Nz,{toBeChecked:()=>HA,toBeDisabled:()=>zA,toBeEmpty:()=>EA,toBeEmptyDOMElement:()=>TA,toBeEnabled:()=>jA,toBeInTheDOM:()=>qb,toBeInTheDocument:()=>wA,toBeInvalid:()=>$A,toBePartiallyChecked:()=>WA,toBePartiallyPressed:()=>QA,toBePressed:()=>XA,toBeRequired:()=>BA,toBeValid:()=>VA,toBeVisible:()=>kA,toContainElement:()=>$b,toContainHTML:()=>SA,toHaveAccessibleDescription:()=>Vb,toHaveAccessibleErrorMessage:()=>PA,toHaveAccessibleName:()=>Gb,toHaveAttribute:()=>AA,toHaveClass:()=>RA,toHaveDescription:()=>ZA,toHaveDisplayValue:()=>GA,toHaveErrorMessage:()=>KA,toHaveFocus:()=>IA,toHaveFormValues:()=>MA,toHaveRole:()=>Ub,toHaveSelection:()=>YA,toHaveStyle:()=>Hb,toHaveTextContent:()=>CA,toHaveValue:()=>UA});var PO=Ti(zD(),1),Fz=class extends Error{constructor(r,n,i,l,c){super(`${r}:${i}:${l}: ${n}`);Er(this,"reason");Er(this,"filename");Er(this,"line");Er(this,"column");Er(this,"source");this.reason=n,this.filename=r,this.line=i,this.column=l,this.source=c}};m(Fz,"t");var yie=Fz,zz=class{constructor(e,r,n){Er(this,"start");Er(this,"end");Er(this,"source");this.start=e,this.end=r,this.source=n}};m(zz,"e");var _ie=zz,Ii;(function(t){t.stylesheet="stylesheet",t.rule="rule",t.declaration="declaration",t.comment="comment",t.container="container",t.charset="charset",t.document="document",t.customMedia="custom-media",t.fontFace="font-face",t.host="host",t.import="import",t.keyframes="keyframes",t.keyframe="keyframe",t.layer="layer",t.media="media",t.namespace="namespace",t.page="page",t.startingStyle="starting-style",t.supports="supports"})(Ii||(Ii={}));var AO=m((t,e,r)=>{let n=r,i=1e4;do{const l=e.map(p=>t.indexOf(p,n));l.push(t.indexOf("\\",n));const c=l.filter(p=>p!==-1);if(c.length===0)return-1;const s=Math.min(...c);if(t[s]!=="\\")return s;n=s+2,i--}while(i>0);throw new Error("Too many escaping")},"s"),gS=m((t,e,r)=>{let n=r,i=1e4;do{const l=e.map(p=>t.indexOf(p,n));l.push(t.indexOf("(",n)),l.push(t.indexOf('"',n)),l.push(t.indexOf("'",n)),l.push(t.indexOf("\\",n));const c=l.filter(p=>p!==-1);if(c.length===0)return-1;const s=Math.min(...c);switch(t[s]){case"\\":n=s+2;break;case"(":{const p=gS(t,[")"],s+1);if(p===-1)return-1;n=p+1}break;case'"':{const p=AO(t,['"'],s+1);if(p===-1)return-1;n=p+1}break;case"'":{const p=AO(t,["'"],s+1);if(p===-1)return-1;n=p+1}break;default:return s}i--}while(i>0);throw new Error("Too many escaping")},"n"),DE=/\/\*[^]*?(?:\*\/|$)/g;function Ko(t){return t?t.trim():""}m(Ko,"o");function Bb(t,e){const r=t&&typeof t.type=="string",n=r?t:e;for(const i in t){const l=t[i];Array.isArray(l)?l.forEach(c=>{Bb(c,n)}):l&&typeof l=="object"&&Bb(l,n)}return r&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),t}m(Bb,"c");var bie=m((t,e)=>{e=e||{};let r=1,n=1;function i(){const U={line:r,column:n};return K=>(K.position=new _ie(U,{line:r,column:n},e?.source||""),x(),K)}m(i,"u");const l=[];function c(U){const K=new yie(e?.source||"",U,r,n,t);if(!e?.silent)throw K;l.push(K)}m(c,"l");function s(){const U=/^{\s*/.exec(t);return!!U&&(_(U),!0)}m(s,"f");function p(){const U=/^}/.exec(t);return!!U&&(_(U),!0)}m(p,"d");function g(){let U;const K=[];for(x(),P(K);t.length&&t.charAt(0)!=="}"&&(U=ne()||Z(),U);)K.push(U),P(K);return K}m(g,"y");function _(U){const K=U[0];return function(he){const ue=he.match(/\n/g);ue&&(r+=ue.length);const Ee=he.lastIndexOf(`
`);n=~Ee?he.length-Ee:n+he.length}(K),t=t.slice(K.length),U}m(_,"g");function x(){const U=/^\s*/.exec(t);U&&_(U)}m(x,"$");function P(U){U=U||[];let K=A();for(;K;)U.push(K),K=A();return U}m(P,"x");function A(){const U=i();if(t.charAt(0)!=="/"||t.charAt(1)!=="*")return;const K=/^\/\*[^]*?\*\//.exec(t);return K?(_(K),U({type:Ii.comment,comment:K[0].slice(2,-2)})):c("End of comment missing")}m(A,"V");function M(){const U=/^([^{]+)/.exec(t);if(U)return _(U),((K,he)=>{const ue=[];let Ee=0;for(;Ee<K.length;){const Ie=gS(K,he,Ee);if(Ie===-1)return ue.push(K.substring(Ee)),ue;ue.push(K.substring(Ee,Ie)),Ee=Ie+1}return ue})(Ko(U[0]).replace(DE,""),[","]).map(K=>Ko(K))}m(M,"k");function N(){const U=i(),K=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/.exec(t);if(!K)return;_(K);const he=Ko(K[0]),ue=/^:\s*/.exec(t);if(!ue)return c("property missing ':'");_(ue);let Ee="";const Ie=gS(t,[";","}"]);Ie!==-1&&(Ee=t.substring(0,Ie),_([Ee]),Ee=Ko(Ee).replace(DE,""));const ee=U({type:Ii.declaration,property:he.replace(DE,""),value:Ee}),pe=/^[;\s]*/.exec(t);return pe&&_(pe),ee}m(N,"v");function z(){const U=[];if(!s())return c("missing '{'");P(U);let K=N();for(;K;)U.push(K),P(U),K=N();return p()?U:c("missing '}'")}m(z,"w");function j(){const U=[],K=i();let he=/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/.exec(t);for(;he;){const ue=_(he);U.push(ue[1]);const Ee=/^,\s*/.exec(t);Ee&&_(Ee),he=/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/.exec(t)}if(U.length)return K({type:Ii.keyframe,values:U,declarations:z()||[]})}m(j,"b");const $=re("import"),J=re("charset"),X=re("namespace");function re(U){const K=new RegExp("^@"+U+`\\s*((?::?[^;'"]|"(?:\\\\"|[^"])*?"|'(?:\\\\'|[^'])*?')+)(?:;|$)`);return()=>{const he=i(),ue=K.exec(t);if(!ue)return;const Ee=_(ue),Ie={type:U};return Ie[U]=Ee[1].trim(),he(Ie)}}m(re,"M");function ne(){if(t[0]==="@")return function(){const U=i(),K=/^@([-\w]+)?keyframes\s*/.exec(t);if(!K)return;const he=_(K)[1],ue=/^([-\w]+)\s*/.exec(t);if(!ue)return c("@keyframes missing name");const Ee=_(ue)[1];if(!s())return c("@keyframes missing '{'");let Ie=P(),ee=j();for(;ee;)Ie.push(ee),Ie=Ie.concat(P()),ee=j();return p()?U({type:Ii.keyframes,name:Ee,vendor:he,keyframes:Ie}):c("@keyframes missing '}'")}()||function(){const U=i(),K=/^@media *([^{]+)/.exec(t);if(!K)return;const he=Ko(_(K)[1]);if(!s())return c("@media missing '{'");const ue=P().concat(g());return p()?U({type:Ii.media,media:he,rules:ue}):c("@media missing '}'")}()||function(){const U=i(),K=/^@custom-media\s+(--\S+)\s+([^{;\s][^{;]*);/.exec(t);if(!K)return;const he=_(K);return U({type:Ii.customMedia,name:Ko(he[1]),media:Ko(he[2])})}()||function(){const U=i(),K=/^@supports *([^{]+)/.exec(t);if(!K)return;const he=Ko(_(K)[1]);if(!s())return c("@supports missing '{'");const ue=P().concat(g());return p()?U({type:Ii.supports,supports:he,rules:ue}):c("@supports missing '}'")}()||$()||J()||X()||function(){const U=i(),K=/^@([-\w]+)?document *([^{]+)/.exec(t);if(!K)return;const he=_(K),ue=Ko(he[1]),Ee=Ko(he[2]);if(!s())return c("@document missing '{'");const Ie=P().concat(g());return p()?U({type:Ii.document,document:Ee,vendor:ue,rules:Ie}):c("@document missing '}'")}()||function(){const U=i(),K=/^@page */.exec(t);if(!K)return;_(K);const he=M()||[];if(!s())return c("@page missing '{'");let ue=P(),Ee=N();for(;Ee;)ue.push(Ee),ue=ue.concat(P()),Ee=N();return p()?U({type:Ii.page,selectors:he,declarations:ue}):c("@page missing '}'")}()||function(){const U=i(),K=/^@host\s*/.exec(t);if(!K)return;if(_(K),!s())return c("@host missing '{'");const he=P().concat(g());return p()?U({type:Ii.host,rules:he}):c("@host missing '}'")}()||function(){const U=i(),K=/^@font-face\s*/.exec(t);if(!K)return;if(_(K),!s())return c("@font-face missing '{'");let he=P(),ue=N();for(;ue;)he.push(ue),he=he.concat(P()),ue=N();return p()?U({type:Ii.fontFace,declarations:he}):c("@font-face missing '}'")}()||function(){const U=i(),K=/^@container *([^{]+)/.exec(t);if(!K)return;const he=Ko(_(K)[1]);if(!s())return c("@container missing '{'");const ue=P().concat(g());return p()?U({type:Ii.container,container:he,rules:ue}):c("@container missing '}'")}()||function(){const U=i(),K=/^@starting-style\s*/.exec(t);if(!K)return;if(_(K),!s())return c("@starting-style missing '{'");const he=P().concat(g());return p()?U({type:Ii.startingStyle,rules:he}):c("@starting-style missing '}'")}()||function(){const U=i(),K=/^@layer *([^{;@]+)/.exec(t);if(!K)return;const he=Ko(_(K)[1]);if(!s()){const Ee=/^[;\s]*/.exec(t);return Ee&&_(Ee),U({type:Ii.layer,layer:he})}const ue=P().concat(g());return p()?U({type:Ii.layer,layer:he,rules:ue}):c("@layer missing '}'")}()}m(ne,"A");function Z(){const U=i(),K=M();return K?(P(),U({type:Ii.rule,selectors:K,declarations:z()||[]})):c("selector missing")}return m(Z,"S"),Bb(function(){const U=g();return{type:Ii.stylesheet,stylesheet:{source:e?.source,rules:U,parsingErrors:l}}}())},"m"),vie=Object.prototype.toString;function yS(t){return typeof t=="function"||vie.call(t)==="[object Function]"}m(yS,"isCallable");function jz(t){var e=Number(t);return isNaN(e)?0:e===0||!isFinite(e)?e:(e>0?1:-1)*Math.floor(Math.abs(e))}m(jz,"toInteger");var xie=Math.pow(2,53)-1;function Bz(t){var e=jz(t);return Math.min(Math.max(e,0),xie)}m(Bz,"toLength");function ws(t,e){var r=Array,n=Object(t);if(t==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");if(typeof e<"u"&&!yS(e))throw new TypeError("Array.from: when provided, the second argument must be a function");for(var i=Bz(n.length),l=yS(r)?Object(new r(i)):new Array(i),c=0,s;c<i;)s=n[c],e?l[c]=e(s,c):l[c]=s,c+=1;return l.length=i,l}m(ws,"arrayFrom");function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}m(Jp,"_typeof");function qz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}m(qz,"_classCallCheck");function _S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dA(n.key),n)}}m(_S,"_defineProperties");function $z(t,e,r){return e&&_S(t.prototype,e),r&&_S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}m($z,"_createClass");function Vz(t,e,r){return e=dA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(Vz,"_defineProperty");function dA(t){var e=Uz(t,"string");return Jp(e)==="symbol"?e:String(e)}m(dA,"_toPropertyKey");function Uz(t,e){if(Jp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Jp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}m(Uz,"_toPrimitive");var wie=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];qz(this,t),Vz(this,"items",void 0),this.items=e}return m(t,"SetLike"),$z(t,[{key:"add",value:m(function(r){return this.has(r)===!1&&this.items.push(r),this},"add")},{key:"clear",value:m(function(){this.items=[]},"clear")},{key:"delete",value:m(function(r){var n=this.items.length;return this.items=this.items.filter(function(i){return i!==r}),n!==this.items.length},"_delete")},{key:"forEach",value:m(function(r){var n=this;this.items.forEach(function(i){r(i,i,n)})},"forEach")},{key:"has",value:m(function(r){return this.items.indexOf(r)!==-1},"has")},{key:"size",get:m(function(){return this.items.length},"get")}]),t}(),Eie=typeof Set>"u"?Set:wie;function Xi(t){var e;return(e=t.localName)!==null&&e!==void 0?e:t.tagName.toLowerCase()}m(Xi,"getLocalName");var Tie={article:"article",aside:"complementary",button:"button",datalist:"listbox",dd:"definition",details:"group",dialog:"dialog",dt:"term",fieldset:"group",figure:"figure",form:"form",footer:"contentinfo",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",header:"banner",hr:"separator",html:"document",legend:"legend",li:"listitem",math:"math",main:"main",menu:"list",nav:"navigation",ol:"list",optgroup:"group",option:"option",output:"status",progress:"progressbar",section:"region",summary:"button",table:"table",tbody:"rowgroup",textarea:"textbox",tfoot:"rowgroup",td:"cell",th:"columnheader",thead:"rowgroup",tr:"row",ul:"list"},Sie={caption:new Set(["aria-label","aria-labelledby"]),code:new Set(["aria-label","aria-labelledby"]),deletion:new Set(["aria-label","aria-labelledby"]),emphasis:new Set(["aria-label","aria-labelledby"]),generic:new Set(["aria-label","aria-labelledby","aria-roledescription"]),insertion:new Set(["aria-label","aria-labelledby"]),none:new Set(["aria-label","aria-labelledby"]),paragraph:new Set(["aria-label","aria-labelledby"]),presentation:new Set(["aria-label","aria-labelledby"]),strong:new Set(["aria-label","aria-labelledby"]),subscript:new Set(["aria-label","aria-labelledby"]),superscript:new Set(["aria-label","aria-labelledby"])};function Gz(t,e){return["aria-atomic","aria-busy","aria-controls","aria-current","aria-description","aria-describedby","aria-details","aria-dropeffect","aria-flowto","aria-grabbed","aria-hidden","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription"].some(function(r){var n;return t.hasAttribute(r)&&!((n=Sie[e])!==null&&n!==void 0&&n.has(r))})}m(Gz,"hasGlobalAriaAttributes");function pA(t,e){return Gz(t,e)}m(pA,"ignorePresentationalRole");function Hz(t){var e=Wz(t);if(e===null||bS.indexOf(e)!==-1){var r=Jz(t);if(bS.indexOf(e||"")===-1||pA(t,r||""))return r}return e}m(Hz,"getRole");function Jz(t){var e=Tie[Xi(t)];if(e!==void 0)return e;switch(Xi(t)){case"a":case"area":case"link":if(t.hasAttribute("href"))return"link";break;case"img":return t.getAttribute("alt")===""&&!pA(t,"img")?"presentation":"img";case"input":{var r=t,n=r.type;switch(n){case"button":case"image":case"reset":case"submit":return"button";case"checkbox":case"radio":return n;case"range":return"slider";case"email":case"tel":case"text":case"url":return t.hasAttribute("list")?"combobox":"textbox";case"search":return t.hasAttribute("list")?"combobox":"searchbox";case"number":return"spinbutton";default:return null}}case"select":return t.hasAttribute("multiple")||t.size>1?"listbox":"combobox"}return null}m(Jz,"getImplicitRole");function Wz(t){var e=t.getAttribute("role");if(e!==null){var r=e.trim().split(" ")[0];if(r.length>0)return r}return null}m(Wz,"getExplicitRole");var bS=["presentation","none"];function zn(t){return t!==null&&t.nodeType===t.ELEMENT_NODE}m(zn,"isElement");function fA(t){return zn(t)&&Xi(t)==="caption"}m(fA,"isHTMLTableCaptionElement");function Cg(t){return zn(t)&&Xi(t)==="input"}m(Cg,"isHTMLInputElement");function Zz(t){return zn(t)&&Xi(t)==="optgroup"}m(Zz,"isHTMLOptGroupElement");function Kz(t){return zn(t)&&Xi(t)==="select"}m(Kz,"isHTMLSelectElement");function Yz(t){return zn(t)&&Xi(t)==="table"}m(Yz,"isHTMLTableElement");function Xz(t){return zn(t)&&Xi(t)==="textarea"}m(Xz,"isHTMLTextAreaElement");function Qz(t){var e=t.ownerDocument===null?t:t.ownerDocument,r=e.defaultView;if(r===null)throw new TypeError("no window available");return r}m(Qz,"safeWindow");function ej(t){return zn(t)&&Xi(t)==="fieldset"}m(ej,"isHTMLFieldSetElement");function tj(t){return zn(t)&&Xi(t)==="legend"}m(tj,"isHTMLLegendElement");function rj(t){return zn(t)&&Xi(t)==="slot"}m(rj,"isHTMLSlotElement");function nj(t){return zn(t)&&t.ownerSVGElement!==void 0}m(nj,"isSVGElement");function ij(t){return zn(t)&&Xi(t)==="svg"}m(ij,"isSVGSVGElement");function oj(t){return nj(t)&&Xi(t)==="title"}m(oj,"isSVGTitleElement");function Yg(t,e){if(zn(t)&&t.hasAttribute(e)){var r=t.getAttribute(e).split(" "),n=t.getRootNode?t.getRootNode():t.ownerDocument;return r.map(function(i){return n.getElementById(i)}).filter(function(i){return i!==null})}return[]}m(Yg,"queryIdRefs");function Sa(t,e){return zn(t)?e.indexOf(Hz(t))!==-1:!1}m(Sa,"hasAnyConcreteRoles");function sj(t){return t.trim().replace(/\s\s+/g," ")}m(sj,"asFlatString");function aj(t,e){if(!zn(t))return!1;if(t.hasAttribute("hidden")||t.getAttribute("aria-hidden")==="true")return!0;var r=e(t);return r.getPropertyValue("display")==="none"||r.getPropertyValue("visibility")==="hidden"}m(aj,"isHidden");function lj(t){return Sa(t,["button","combobox","listbox","textbox"])||mA(t,"range")}m(lj,"isControl");function mA(t,e){if(!zn(t))return!1;switch(e){case"range":return Sa(t,["meter","progressbar","scrollbar","slider","spinbutton"]);default:throw new TypeError("No knowledge about abstract role '".concat(e,"'. This is likely a bug :("))}}m(mA,"hasAbstractRole");function vS(t,e){var r=ws(t.querySelectorAll(e));return Yg(t,"aria-owns").forEach(function(n){r.push.apply(r,ws(n.querySelectorAll(e)))}),r}m(vS,"querySelectorAllSubtree");function cj(t){return Kz(t)?t.selectedOptions||vS(t,"[selected]"):vS(t,'[aria-selected="true"]')}m(cj,"querySelectedOptions");function uj(t){return Sa(t,bS)}m(uj,"isMarkedPresentational");function hj(t){return fA(t)}m(hj,"isNativeHostLanguageTextAlternativeElement");function dj(t){return Sa(t,["button","cell","checkbox","columnheader","gridcell","heading","label","legend","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","row","rowheader","switch","tab","tooltip","treeitem"])}m(dj,"allowsNameFromContent");function pj(t){return!1}m(pj,"isDescendantOfNativeHostLanguageTextAlternativeElement");function fj(t){return Cg(t)||Xz(t)?t.value:t.textContent||""}m(fj,"getValueOfTextbox");function xS(t){var e=t.getPropertyValue("content");return/^["'].*["']$/.test(e)?e.slice(1,-1):""}m(xS,"getTextualContent");function gA(t){var e=Xi(t);return e==="button"||e==="input"&&t.getAttribute("type")!=="hidden"||e==="meter"||e==="output"||e==="progress"||e==="select"||e==="textarea"}m(gA,"isLabelableElement");function yA(t){if(gA(t))return t;var e=null;return t.childNodes.forEach(function(r){if(e===null&&zn(r)){var n=yA(r);n!==null&&(e=n)}}),e}m(yA,"findLabelableElement");function mj(t){if(t.control!==void 0)return t.control;var e=t.getAttribute("for");return e!==null?t.ownerDocument.getElementById(e):yA(t)}m(mj,"getControlOfLabel");function gj(t){var e=t.labels;if(e===null)return e;if(e!==void 0)return ws(e);if(!gA(t))return null;var r=t.ownerDocument;return ws(r.querySelectorAll("label")).filter(function(n){return mj(n)===t})}m(gj,"getLabels");function yj(t){var e=t.assignedNodes();return e.length===0?ws(t.childNodes):e}m(yj,"getSlotContents");function _A(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Eie,n=Qz(t),i=e.compute,l=i===void 0?"name":i,c=e.computedStyleSupportsPseudoElements,s=c===void 0?e.getComputedStyle!==void 0:c,p=e.getComputedStyle,g=p===void 0?n.getComputedStyle.bind(n):p,_=e.hidden,x=_===void 0?!1:_;function P(j,$){var J="";if(zn(j)&&s){var X=g(j,"::before"),re=xS(X);J="".concat(re," ").concat(J)}var ne=rj(j)?yj(j):ws(j.childNodes).concat(Yg(j,"aria-owns"));if(ne.forEach(function(K){var he=z(K,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!1,recursion:!0}),ue=zn(K)?g(K).getPropertyValue("display"):"inline",Ee=ue!=="inline"?" ":"";J+="".concat(Ee).concat(he).concat(Ee)}),zn(j)&&s){var Z=g(j,"::after"),U=xS(Z);J="".concat(J," ").concat(U)}return J.trim()}m(P,"computeMiscTextAlternative");function A(j,$){var J=j.getAttributeNode($);return J!==null&&!r.has(J)&&J.value.trim()!==""?(r.add(J),J.value):null}m(A,"useAttribute");function M(j){return zn(j)?A(j,"title"):null}m(M,"computeTooltipAttributeValue");function N(j){if(!zn(j))return null;if(ej(j)){r.add(j);for(var $=ws(j.childNodes),J=0;J<$.length;J+=1){var X=$[J];if(tj(X))return z(X,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(Yz(j)){r.add(j);for(var re=ws(j.childNodes),ne=0;ne<re.length;ne+=1){var Z=re[ne];if(fA(Z))return z(Z,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(ij(j)){r.add(j);for(var U=ws(j.childNodes),K=0;K<U.length;K+=1){var he=U[K];if(oj(he))return he.textContent}return null}else if(Xi(j)==="img"||Xi(j)==="area"){var ue=A(j,"alt");if(ue!==null)return ue}else if(Zz(j)){var Ee=A(j,"label");if(Ee!==null)return Ee}if(Cg(j)&&(j.type==="button"||j.type==="submit"||j.type==="reset")){var Ie=A(j,"value");if(Ie!==null)return Ie;if(j.type==="submit")return"Submit";if(j.type==="reset")return"Reset"}var ee=gj(j);if(ee!==null&&ee.length!==0)return r.add(j),ws(ee).map(function(tt){return z(tt,{isEmbeddedInLabel:!0,isReferenced:!1,recursion:!0})}).filter(function(tt){return tt.length>0}).join(" ");if(Cg(j)&&j.type==="image"){var pe=A(j,"alt");if(pe!==null)return pe;var ve=A(j,"title");return ve!==null?ve:"Submit Query"}if(Sa(j,["button"])){var xe=P(j,{isEmbeddedInLabel:!1});if(xe!=="")return xe}return null}m(N,"computeElementTextAlternative");function z(j,$){if(r.has(j))return"";if(!x&&aj(j,g)&&!$.isReferenced)return r.add(j),"";var J=zn(j)?j.getAttributeNode("aria-labelledby"):null,X=J!==null&&!r.has(J)?Yg(j,"aria-labelledby"):[];if(l==="name"&&!$.isReferenced&&X.length>0)return r.add(J),X.map(function(ue){return z(ue,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!0,recursion:!1})}).join(" ");var re=$.recursion&&lj(j)&&l==="name";if(!re){var ne=(zn(j)&&j.getAttribute("aria-label")||"").trim();if(ne!==""&&l==="name")return r.add(j),ne;if(!uj(j)){var Z=N(j);if(Z!==null)return r.add(j),Z}}if(Sa(j,["menu"]))return r.add(j),"";if(re||$.isEmbeddedInLabel||$.isReferenced){if(Sa(j,["combobox","listbox"])){r.add(j);var U=cj(j);return U.length===0?Cg(j)?j.value:"":ws(U).map(function(ue){return z(ue,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!1,recursion:!0})}).join(" ")}if(mA(j,"range"))return r.add(j),j.hasAttribute("aria-valuetext")?j.getAttribute("aria-valuetext"):j.hasAttribute("aria-valuenow")?j.getAttribute("aria-valuenow"):j.getAttribute("value")||"";if(Sa(j,["textbox"]))return r.add(j),fj(j)}if(dj(j)||zn(j)&&$.isReferenced||hj(j)||pj()){var K=P(j,{isEmbeddedInLabel:$.isEmbeddedInLabel});if(K!=="")return r.add(j),K}if(j.nodeType===j.TEXT_NODE)return r.add(j),j.textContent||"";if($.recursion)return r.add(j),P(j,{isEmbeddedInLabel:$.isEmbeddedInLabel});var he=M(j);return he!==null?(r.add(j),he):(r.add(j),"")}return m(z,"computeTextAlternative"),sj(z(t,{isEmbeddedInLabel:!1,isReferenced:l==="description",recursion:!1}))}m(_A,"computeTextAlternative");function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}m(Wp,"_typeof");function wS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}m(wS,"ownKeys");function ES(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wS(Object(r),!0).forEach(function(n){_j(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}m(ES,"_objectSpread");function _j(t,e,r){return e=bj(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(_j,"_defineProperty");function bj(t){var e=vj(t,"string");return Wp(e)==="symbol"?e:String(e)}m(bj,"_toPropertyKey");function vj(t,e){if(Wp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Wp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}m(vj,"_toPrimitive");function xj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Yg(t,"aria-describedby").map(function(l){return _A(l,ES(ES({},e),{},{compute:"description"}))}).join(" ");if(r===""){var n=t.getAttribute("aria-description");r=n===null?"":n}if(r===""){var i=t.getAttribute("title");r=i===null?"":i}return r}m(xj,"computeAccessibleDescription");function wj(t){return Sa(t,["caption","code","deletion","emphasis","generic","insertion","none","paragraph","presentation","strong","subscript","superscript"])}m(wj,"prohibitsNaming");function Ej(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return wj(t)?"":_A(t,e)}m(Ej,"computeAccessibleName");var bA=Ti(xC(),1),Cie=Ti(jD(),1),Pie=Ti(BD(),1),Tj=class extends Error{constructor(e,r,n,i){super(),Error.captureStackTrace&&Error.captureStackTrace(this,n);let l="";try{l=i.utils.printWithType("Received",r,i.utils.printReceived)}catch{}this.message=[i.utils.matcherHint(`${i.isNot?".not":""}.${n.name}`,"received",""),"",`${i.utils.RECEIVED_COLOR("received")} value must ${e}.`,l].join(`
`)}};m(Tj,"GenericTypeError");var Sj=Tj,Cj=class extends Sj{constructor(...e){super("be an HTMLElement or an SVGElement",...e)}};m(Cj,"HtmlElementTypeError");var RO=Cj,Pj=class extends Sj{constructor(...e){super("be a Node",...e)}};m(Pj,"NodeTypeError");var IO=Pj;function vA(t,e,...r){if(!t||!t.ownerDocument||!t.ownerDocument.defaultView)throw new e(t,...r)}m(vA,"checkHasWindow");function Aj(t,...e){vA(t,IO,...e);const r=t.ownerDocument.defaultView;if(!(t instanceof r.Node))throw new IO(t,...e)}m(Aj,"checkNode");function sn(t,...e){vA(t,RO,...e);const r=t.ownerDocument.defaultView;if(!(t instanceof r.HTMLElement)&&!(t instanceof r.SVGElement))throw new RO(t,...e)}m(sn,"checkHtmlElement");var Rj=class extends Error{constructor(e,r,n){super(),Error.captureStackTrace&&Error.captureStackTrace(this,r),this.message=[e.message,"",n.utils.RECEIVED_COLOR("Failing css:"),n.utils.RECEIVED_COLOR(`${e.css}`)].join(`
`)}};m(Rj,"InvalidCSSError");var Aie=Rj;function Ij(t,...e){const r=bie(`selector { ${t} }`,{silent:!0}).stylesheet;if(r.parsingErrors&&r.parsingErrors.length>0){const{reason:i,line:l}=r.parsingErrors[0];throw new Aie({css:t,message:`Syntax error parsing expected css: ${i} on line: ${l}`},...e)}return r.rules[0].declarations.filter(i=>i.type==="declaration").reduce((i,{property:l,value:c})=>Object.assign(i,{[l]:c}),{})}m(Ij,"parseCSS");function TS(t,e){return typeof e=="string"?e:t.utils.stringify(e)}m(TS,"display");function wi(t,e,r,n,i,l){return[`${e}
`,`${r}:
${t.utils.EXPECTED_COLOR((0,PO.default)(TS(t,n),2))}`,`${i}:
${t.utils.RECEIVED_COLOR((0,PO.default)(TS(t,l),2))}`].join(`
`)}m(wi,"getMessage");function Mj(t,e){return e instanceof RegExp?e.test(t):t.includes(String(e))}m(Mj,"matches");function Wy(t,e){console.warn(`Warning: ${t} has been deprecated and will be removed in future updates.`,e)}m(Wy,"deprecate");function Zy(t){return t.replace(/\s+/g," ").trim()}m(Zy,"normalize");function Sl(t){return t.tagName&&t.tagName.toLowerCase()}m(Sl,"getTag");function Oj({multiple:t,options:e}){const r=[...e].filter(n=>n.selected);if(t)return[...r].map(n=>n.value);if(r.length!==0)return r[0].value}m(Oj,"getSelectValue");function kj(t){switch(t.type){case"number":return t.value===""?null:Number(t.value);case"checkbox":return t.checked;default:return t.value}}m(kj,"getInputValue");var Rie=["meter","progressbar","slider","spinbutton"];function Lj(t){if(Rie.includes(t.getAttribute("role")))return Number(t.getAttribute("aria-valuenow"))}m(Lj,"getAccessibleValue");function xA(t){if(t)switch(t.tagName.toLowerCase()){case"input":return kj(t);case"select":return Oj(t);default:return t.value??Lj(t)}}m(xA,"getSingleElementValue");function Dj(t,{wordConnector:e=", ",lastWordConnector:r=" and "}={}){return[t.slice(0,-1).join(e),t[t.length-1]].join(t.length>1?r:"")}m(Dj,"toSentence");function $1(t,e){return Array.isArray(t)&&Array.isArray(e)?[...new Set(t)].every(r=>new Set(e).has(r)):t===e}m($1,"compareAsSet");function qb(t,e){return Wy("toBeInTheDOM","Please use toBeInTheDocument for searching the entire document and toContainElement for searching a specific container."),t&&sn(t,qb,this),e&&sn(e,qb,this),{pass:e?e.contains(t):!!t,message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toBeInTheDOM`,"element",""),"","Received:",`  ${this.utils.printReceived(t&&t.cloneNode(!1))}`].join(`
`),"message")}}m(qb,"toBeInTheDOM");function wA(t){(t!==null||!this.isNot)&&sn(t,wA,this);const e=t===null?!1:t.ownerDocument===t.getRootNode({composed:!0}),r=m(()=>`expected document not to contain element, found ${this.utils.stringify(t.cloneNode(!0))} instead`,"errorFound"),n=m(()=>"element could not be found in the document","errorNotFound");return{pass:e,message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toBeInTheDocument`,"element",""),"",this.utils.RECEIVED_COLOR(this.isNot?r():n())].join(`
`),"message")}}m(wA,"toBeInTheDocument");function EA(t){return Wy("toBeEmpty","Please use instead toBeEmptyDOMElement for finding empty nodes in the DOM."),sn(t,EA,this),{pass:t.innerHTML==="",message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toBeEmpty`,"element",""),"","Received:",`  ${this.utils.printReceived(t.innerHTML)}`].join(`
`),"message")}}m(EA,"toBeEmpty");function TA(t){return sn(t,TA,this),{pass:Nj(t),message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toBeEmptyDOMElement`,"element",""),"","Received:",`  ${this.utils.printReceived(t.innerHTML)}`].join(`
`),"message")}}m(TA,"toBeEmptyDOMElement");function Nj(t){return[...t.childNodes].filter(r=>r.nodeType!==8).length===0}m(Nj,"isEmptyElement");function $b(t,e){return sn(t,$b,this),e!==null&&sn(e,$b,this),{pass:t.contains(e),message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toContainElement`,"element","element"),"",this.utils.RECEIVED_COLOR(`${this.utils.stringify(t.cloneNode(!1))} ${this.isNot?"contains:":"does not contain:"} ${this.utils.stringify(e&&e.cloneNode(!1))}
        `)].join(`
`),"message")}}m($b,"toContainElement");function Fj(t,e){const r=t.ownerDocument.createElement("div");return r.innerHTML=e,r.innerHTML}m(Fj,"getNormalizedHtml");function SA(t,e){if(sn(t,SA,this),typeof e!="string")throw new Error(`.toContainHTML() expects a string value, got ${e}`);return{pass:t.outerHTML.includes(Fj(t,e)),message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toContainHTML`,"element",""),"Expected:",`  ${this.utils.EXPECTED_COLOR(e)}`,"Received:",`  ${this.utils.printReceived(t.cloneNode(!0))}`].join(`
`),"message")}}m(SA,"toContainHTML");function CA(t,e,r={normalizeWhitespace:!0}){Aj(t,CA,this);const n=r.normalizeWhitespace?Zy(t.textContent):t.textContent.replace(/\u00a0/g," "),i=n!==""&&e==="";return{pass:!i&&Mj(n,e),message:m(()=>{const l=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveTextContent`,"element",""),i?"Checking with empty string will always match, use .toBeEmptyDOMElement() instead":`Expected element ${l} have text content`,e,"Received",n)},"message")}}m(CA,"toHaveTextContent");function Vb(t,e){sn(t,Vb,this);const r=xj(t),n=arguments.length===1;let i=!1;return n?i=r!=="":i=e instanceof RegExp?e.test(r):this.equals(r,e),{pass:i,message:m(()=>{const l=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.${Vb.name}`,"element",""),`Expected element ${l} have accessible description`,e,"Received",r)},"message")}}m(Vb,"toHaveAccessibleDescription");var Zm="aria-invalid",Iie=["false"];function PA(t,e){sn(t,PA,this);const r=this.isNot?"not to":"to",n=this.isNot?".not.toHaveAccessibleErrorMessage":".toHaveAccessibleErrorMessage",i=t.getAttribute("aria-errormessage");if(!!i&&/\s+/.test(i))return{pass:!1,message:m(()=>wi(this,this.utils.matcherHint(n,"element"),"Expected element's `aria-errormessage` attribute to be empty or a single, valid ID","","Received",`aria-errormessage="${i}"`),"message")};const c=t.getAttribute(Zm);if(!t.hasAttribute(Zm)||Iie.includes(c))return{pass:!1,message:m(()=>wi(this,this.utils.matcherHint(n,"element"),"Expected element to be marked as invalid with attribute",`${Zm}="${String(!0)}"`,"Received",t.hasAttribute("aria-invalid")?`${Zm}="${t.getAttribute(Zm)}`:null),"message")};const p=Zy(t.ownerDocument.getElementById(i)?.textContent??"");return{pass:e===void 0?!!p:e instanceof RegExp?e.test(p):this.equals(p,e),message:m(()=>wi(this,this.utils.matcherHint(n,"element"),`Expected element ${r} have accessible error message`,e??"","Received",p),"message")}}m(PA,"toHaveAccessibleErrorMessage");var Mie=Bj(bA.elementRoles);function Ub(t,e){sn(t,Ub,this);const r=zj(t);return{pass:r.some(i=>i===e),message:m(()=>{const i=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.${Ub.name}`,"element",""),`Expected element ${i} have role`,e,"Received",r.join(", "))},"message")}}m(Ub,"toHaveRole");function zj(t){return t.hasAttribute("role")?t.getAttribute("role").split(" ").filter(Boolean):jj(t)}m(zj,"getExplicitOrImplicitRoles");function jj(t){for(const{match:e,roles:r}of Mie)if(e(t))return[...r];return[]}m(jj,"getImplicitAriaRoles");function Bj(t){function e({name:c,attributes:s}){return`${c}${s.map(({name:p,value:g,constraints:_=[]})=>_.indexOf("undefined")!==-1?`:not([${p}])`:g?`[${p}="${g}"]`:`[${p}]`).join("")}`}m(e,"makeElementSelector");function r({attributes:c=[]}){return c.length}m(r,"getSelectorSpecificity");function n({specificity:c},{specificity:s}){return s-c}m(n,"bySelectorSpecificity");function i(c){let{attributes:s=[]}=c;const p=s.findIndex(_=>_.value&&_.name==="type"&&_.value==="text");p>=0&&(s=[...s.slice(0,p),...s.slice(p+1)]);const g=e({...c,attributes:s});return _=>p>=0&&_.type!=="text"?!1:_.matches(g)}m(i,"match");let l=[];for(const[c,s]of t.entries())l=[...l,{match:i(c),roles:Array.from(s),specificity:r(c)}];return l.sort(n)}m(Bj,"buildElementRoleList");function Gb(t,e){sn(t,Gb,this);const r=Ej(t),n=arguments.length===1;let i=!1;return n?i=r!=="":i=e instanceof RegExp?e.test(r):this.equals(r,e),{pass:i,message:m(()=>{const l=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.${Gb.name}`,"element",""),`Expected element ${l} have accessible name`,e,"Received",r)},"message")}}m(Gb,"toHaveAccessibleName");function SS(t,e,r){return r===void 0?e:`${e}=${t(r)}`}m(SS,"printAttribute");function qj(t,e,r){return r===void 0?`element.hasAttribute(${t(e)})`:`element.getAttribute(${t(e)}) === ${t(r)}`}m(qj,"getAttributeComment");function AA(t,e,r){sn(t,AA,this);const n=r!==void 0,i=t.hasAttribute(e),l=t.getAttribute(e);return{pass:n?i&&this.equals(l,r):i,message:m(()=>{const c=this.isNot?"not to":"to",s=i?SS(this.utils.stringify,e,l):null,p=this.utils.matcherHint(`${this.isNot?".not":""}.toHaveAttribute`,"element",this.utils.printExpected(e),{secondArgument:n?this.utils.printExpected(r):void 0,comment:qj(this.utils.stringify,e,r)});return wi(this,p,`Expected the element ${c} have attribute`,SS(this.utils.stringify,e,r),"Received",s)},"message")}}m(AA,"toHaveAttribute");function $j(t){const e=t.pop();let r,n;return typeof e=="object"&&!(e instanceof RegExp)?(r=t,n=e):(r=t.concat(e),n={exact:!1}),{expectedClassNames:r,options:n}}m($j,"getExpectedClassNamesAndOptions");function CS(t){return t?t.split(/\s+/).filter(e=>e.length>0):[]}m(CS,"splitClassNames");function PS(t,e){return t.every(r=>typeof r=="string"?e.includes(r):e.some(n=>r.test(n)))}m(PS,"isSubset$1");function RA(t,...e){sn(t,RA,this);const{expectedClassNames:r,options:n}=$j(e),i=CS(t.getAttribute("class")),l=r.reduce((s,p)=>s.concat(typeof p=="string"||!p?CS(p):p),[]),c=l.some(s=>s instanceof RegExp);if(n.exact&&c)throw new Error("Exact option does not support RegExp expected class names");return n.exact?{pass:PS(l,i)&&l.length===i.length,message:m(()=>{const s=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveClass`,"element",this.utils.printExpected(l.join(" "))),`Expected the element ${s} have EXACTLY defined classes`,l.join(" "),"Received",i.join(" "))},"message")}:l.length>0?{pass:PS(l,i),message:m(()=>{const s=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveClass`,"element",this.utils.printExpected(l.join(" "))),`Expected the element ${s} have class`,l.join(" "),"Received",i.join(" "))},"message")}:{pass:this.isNot?i.length>0:!1,message:m(()=>this.isNot?wi(this,this.utils.matcherHint(".not.toHaveClass","element",""),"Expected the element to have classes","(none)","Received",i.join(" ")):[this.utils.matcherHint(".toHaveClass","element"),"At least one expected class must be provided."].join(`
`),"message")}}m(RA,"toHaveClass");function Vj(t,e){const r={},n=t.createElement("div");return Object.keys(e).forEach(i=>{n.style[i]=e[i],r[i]=n.style[i]}),r}m(Vj,"getStyleDeclaration");function Uj(t,e){return!!Object.keys(t).length&&Object.entries(t).every(([r,n])=>{const i=r.startsWith("--"),l=[r];return i||l.push(r.toLowerCase()),l.some(c=>e[c]===n||e.getPropertyValue(c)===n)})}m(Uj,"isSubset");function AS(t){return Object.keys(t).sort().map(e=>`${e}: ${t[e]};`).join(`
`)}m(AS,"printoutStyles");function Gj(t,e,r){const n=Array.from(r).filter(l=>e[l]!==void 0).reduce((l,c)=>Object.assign(l,{[c]:r.getPropertyValue(c)}),{});return t(AS(e),AS(n)).replace(`${Cie.default.red("+ Received")}
`,"")}m(Gj,"expectedDiff");function Hb(t,e){sn(t,Hb,this);const r=typeof e=="object"?e:Ij(e,Hb,this),{getComputedStyle:n}=t.ownerDocument.defaultView,i=Vj(t.ownerDocument,r),l=n(t);return{pass:Uj(i,l),message:m(()=>{const c=`${this.isNot?".not":""}.toHaveStyle`;return[this.utils.matcherHint(c,"element",""),Gj(this.utils.diff,i,l)].join(`

`)},"message")}}m(Hb,"toHaveStyle");function IA(t){return sn(t,IA,this),{pass:t.ownerDocument.activeElement===t,message:m(()=>[this.utils.matcherHint(`${this.isNot?".not":""}.toHaveFocus`,"element",""),"",...this.isNot?["Received element is focused:",`  ${this.utils.printReceived(t)}`]:["Expected element with focus:",`  ${this.utils.printExpected(t)}`,"Received element with focus:",`  ${this.utils.printReceived(t.ownerDocument.activeElement)}`]].join(`
`),"message")}}m(IA,"toHaveFocus");function Hj(t){const e=[...new Set(t.map(r=>r.type))];if(e.length!==1)throw new Error("Multiple form elements with the same name must be of the same type");switch(e[0]){case"radio":{const r=t.find(n=>n.checked);return r?r.value:void 0}case"checkbox":return t.filter(r=>r.checked).map(r=>r.value);default:return t.map(r=>r.value)}}m(Hj,"getMultiElementValue");function Jj(t,e){const r=[...t.querySelectorAll(`[name="${(0,Pie.default)(e)}"]`)];if(r.length!==0)switch(r.length){case 1:return xA(r[0]);default:return Hj(r)}}m(Jj,"getFormValue");function Wj(t){return/\[\]$/.test(t)?t.slice(0,-2):t}m(Wj,"getPureName");function Zj(t){return Array.from(t.elements).map(r=>r.name).reduce((r,n)=>({...r,[Wj(n)]:Jj(t,n)}),{})}m(Zj,"getAllFormValues");function MA(t,e){if(sn(t,MA,this),!t.elements)throw new Error("toHaveFormValues must be called on a form or a fieldset");const r=Zj(t);return{pass:Object.entries(e).every(([n,i])=>$1(r[n],i)),message:m(()=>{const n=this.isNot?"not to":"to",i=`${this.isNot?".not":""}.toHaveFormValues`,l=Object.keys(r).filter(c=>e.hasOwnProperty(c)).reduce((c,s)=>({...c,[s]:r[s]}),{});return[this.utils.matcherHint(i,"element",""),`Expected the element ${n} have form values`,this.utils.diff(e,l)].join(`

`)},"message")}}m(MA,"toHaveFormValues");function Kj(t){const{getComputedStyle:e}=t.ownerDocument.defaultView,{display:r,visibility:n,opacity:i}=e(t);return r!=="none"&&n!=="hidden"&&n!=="collapse"&&i!=="0"&&i!==0}m(Kj,"isStyleVisible");function Yj(t,e){let r;return e?r=t.nodeName==="DETAILS"&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0:r=t.nodeName==="DETAILS"?t.hasAttribute("open"):!0,!t.hasAttribute("hidden")&&r}m(Yj,"isAttributeVisible");function OA(t,e){return Kj(t)&&Yj(t,e)&&(!t.parentElement||OA(t.parentElement,t))}m(OA,"isElementVisible");function kA(t){sn(t,kA,this);const e=t.ownerDocument===t.getRootNode({composed:!0}),r=e&&OA(t);return{pass:r,message:m(()=>{const n=r?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeVisible`,"element",""),"",`Received element ${n} visible${e?"":" (element is not in the document)"}:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(kA,"toBeVisible");var Oie=["fieldset","input","select","optgroup","option","button","textarea"];function Xj(t,e){return Sl(t)==="legend"&&Sl(e)==="fieldset"&&t.isSameNode(Array.from(e.children).find(r=>Sl(r)==="legend"))}m(Xj,"isFirstLegendChildOfFieldset");function Qj(t,e){return DA(e)&&!Xj(t,e)}m(Qj,"isElementDisabledByParent");function eB(t){return t.includes("-")}m(eB,"isCustomElement");function LA(t){const e=Sl(t);return Oie.includes(e)||eB(e)}m(LA,"canElementBeDisabled");function DA(t){return LA(t)&&t.hasAttribute("disabled")}m(DA,"isElementDisabled");function NA(t){const e=t.parentElement;return!!e&&(Qj(t,e)||NA(e))}m(NA,"isAncestorDisabled");function FA(t){return LA(t)&&(DA(t)||NA(t))}m(FA,"isElementOrAncestorDisabled");function zA(t){sn(t,zA,this);const e=FA(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeDisabled`,"element",""),"",`Received element ${r} disabled:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(zA,"toBeDisabled");function jA(t){sn(t,jA,this);const e=!FA(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeEnabled`,"element",""),"",`Received element ${r} enabled:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(jA,"toBeEnabled");var kie=["select","textarea"],Lie=["input","select","textarea"],Die=["color","hidden","range","submit","image","reset"],Nie=["checkbox","combobox","gridcell","listbox","radiogroup","spinbutton","textbox","tree"];function tB(t){return kie.includes(Sl(t))&&t.hasAttribute("required")}m(tB,"isRequiredOnFormTagsExceptInput");function rB(t){return Sl(t)==="input"&&t.hasAttribute("required")&&(t.hasAttribute("type")&&!Die.includes(t.getAttribute("type"))||!t.hasAttribute("type"))}m(rB,"isRequiredOnSupportedInput");function nB(t){return t.hasAttribute("aria-required")&&t.getAttribute("aria-required")==="true"&&(Lie.includes(Sl(t))||t.hasAttribute("role")&&Nie.includes(t.getAttribute("role")))}m(nB,"isElementRequiredByARIA");function BA(t){sn(t,BA,this);const e=tB(t)||rB(t)||nB(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeRequired`,"element",""),"",`Received element ${r} required:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(BA,"toBeRequired");var Fie=["form","input","select","textarea"];function iB(t){return t.hasAttribute("aria-invalid")&&t.getAttribute("aria-invalid")!=="false"}m(iB,"isElementHavingAriaInvalid");function oB(t){return Fie.includes(Sl(t))}m(oB,"isSupportsValidityMethod");function qA(t){const e=iB(t);return oB(t)?e||!t.checkValidity():e}m(qA,"isElementInvalid");function $A(t){sn(t,$A,this);const e=qA(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeInvalid`,"element",""),"",`Received element ${r} currently invalid:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m($A,"toBeInvalid");function VA(t){sn(t,VA,this);const e=!qA(t);return{pass:e,message:m(()=>{const r=e?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeValid`,"element",""),"",`Received element ${r} currently valid:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(VA,"toBeValid");function UA(t,e){if(sn(t,UA,this),t.tagName.toLowerCase()==="input"&&["checkbox","radio"].includes(t.type))throw new Error("input with type=checkbox or type=radio cannot be used with .toHaveValue(). Use .toBeChecked() for type=checkbox or .toHaveFormValues() instead");const r=xA(t),n=e!==void 0;let i=e,l=r;return e==r&&e!==r&&(i=`${e} (${typeof e})`,l=`${r} (${typeof r})`),{pass:n?$1(r,e):!!r,message:m(()=>{const c=this.isNot?"not to":"to",s=this.utils.matcherHint(`${this.isNot?".not":""}.toHaveValue`,"element",e);return wi(this,s,`Expected the element ${c} have value`,n?i:"(any)","Received",l)},"message")}}m(UA,"toHaveValue");function GA(t,e){sn(t,GA,this);const r=t.tagName.toLowerCase();if(!["select","input","textarea"].includes(r))throw new Error(".toHaveDisplayValue() currently supports only input, textarea or select elements, try with another matcher instead.");if(r==="input"&&["radio","checkbox"].includes(t.type))throw new Error(`.toHaveDisplayValue() currently does not support input[type="${t.type}"], try with another matcher instead.`);const n=sB(r,t),i=aB(e),l=i.filter(p=>n.some(g=>p instanceof RegExp?p.test(g):this.equals(g,String(p)))).length,c=l===n.length,s=l===i.length;return{pass:c&&s,message:m(()=>wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveDisplayValue`,"element",""),`Expected element ${this.isNot?"not ":""}to have display value`,e,"Received",n),"message")}}m(GA,"toHaveDisplayValue");function sB(t,e){return t==="select"?Array.from(e).filter(r=>r.selected).map(r=>r.textContent):[e.value]}m(sB,"getValues");function aB(t){return t instanceof Array?t:[t]}m(aB,"getExpectedValues");function HA(t){sn(t,HA,this);const e=m(()=>t.tagName.toLowerCase()==="input"&&["checkbox","radio"].includes(t.type),"isValidInput"),r=m(()=>JA(t.getAttribute("role"))&&["true","false"].includes(t.getAttribute("aria-checked")),"isValidAriaElement");if(!e()&&!r())return{pass:!1,message:m(()=>`only inputs with type="checkbox" or type="radio" or elements with ${lB()} and a valid aria-checked attribute can be used with .toBeChecked(). Use .toHaveValue() instead`,"message")};const n=m(()=>e()?t.checked:t.getAttribute("aria-checked")==="true","isChecked");return{pass:n(),message:m(()=>{const i=n()?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBeChecked`,"element",""),"",`Received element ${i} checked:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(HA,"toBeChecked");function lB(){return Dj(cB().map(t=>`role="${t}"`),{lastWordConnector:" or "})}m(lB,"supportedRolesSentence");function cB(){return bA.roles.keys().filter(JA)}m(cB,"supportedRoles");function JA(t){return bA.roles.get(t)?.props["aria-checked"]!==void 0}m(JA,"roleSupportsChecked");function WA(t){sn(t,WA,this);const e=m(()=>t.tagName.toLowerCase()==="input"&&t.type==="checkbox","isValidInput"),r=m(()=>t.getAttribute("role")==="checkbox","isValidAriaElement");if(!e()&&!r())return{pass:!1,message:m(()=>'only inputs with type="checkbox" or elements with role="checkbox" and a valid aria-checked attribute can be used with .toBePartiallyChecked(). Use .toHaveValue() instead',"message")};const n=m(()=>{const i=t.getAttribute("aria-checked")==="mixed";return e()&&t.indeterminate||i},"isPartiallyChecked");return{pass:n(),message:m(()=>{const i=n()?"is":"is not";return[this.utils.matcherHint(`${this.isNot?".not":""}.toBePartiallyChecked`,"element",""),"",`Received element ${i} partially checked:`,`  ${this.utils.printReceived(t.cloneNode(!1))}`].join(`
`)},"message")}}m(WA,"toBePartiallyChecked");function ZA(t,e){Wy("toHaveDescription","Please use toHaveAccessibleDescription."),sn(t,ZA,this);const r=e!==void 0,i=(t.getAttribute("aria-describedby")||"").split(/\s+/).filter(Boolean);let l="";if(i.length>0){const c=t.ownerDocument,s=i.map(p=>c.getElementById(p)).filter(Boolean);l=Zy(s.map(p=>p.textContent).join(" "))}return{pass:r?e instanceof RegExp?e.test(l):this.equals(l,e):!!l,message:m(()=>{const c=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveDescription`,"element",""),`Expected the element ${c} have description`,this.utils.printExpected(e),"Received",this.utils.printReceived(l))},"message")}}m(ZA,"toHaveDescription");function KA(t,e){if(Wy("toHaveErrorMessage","Please use toHaveAccessibleErrorMessage."),sn(t,KA,this),!t.hasAttribute("aria-invalid")||t.getAttribute("aria-invalid")==="false"){const c=this.isNot?".not":"";return{pass:!1,message:m(()=>wi(this,this.utils.matcherHint(`${c}.toHaveErrorMessage`,"element",""),"Expected the element to have invalid state indicated by",'aria-invalid="true"',"Received",t.hasAttribute("aria-invalid")?`aria-invalid="${t.getAttribute("aria-invalid")}"`:this.utils.printReceived("")),"message")}}const r=e!==void 0,i=(t.getAttribute("aria-errormessage")||"").split(/\s+/).filter(Boolean);let l="";if(i.length>0){const c=t.ownerDocument,s=i.map(p=>c.getElementById(p)).filter(Boolean);l=Zy(s.map(p=>p.textContent).join(" "))}return{pass:r?e instanceof RegExp?e.test(l):this.equals(l,e):!!l,message:m(()=>{const c=this.isNot?"not to":"to";return wi(this,this.utils.matcherHint(`${this.isNot?".not":""}.toHaveErrorMessage`,"element",""),`Expected the element ${c} have error message`,this.utils.printExpected(e),"Received",this.utils.printReceived(l))},"message")}}m(KA,"toHaveErrorMessage");function uB(t){const e=t.ownerDocument.getSelection();if(["input","textarea"].includes(t.tagName.toLowerCase()))return["radio","checkbox"].includes(t.type)?"":t.value.toString().substring(t.selectionStart,t.selectionEnd);if(e.anchorNode===null||e.focusNode===null)return"";const r=e.getRangeAt(0),n=t.ownerDocument.createRange();if(e.containsNode(t,!1))n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n);else if(!(t.contains(e.anchorNode)&&t.contains(e.focusNode))){const l=t===r.startContainer||t.contains(r.startContainer),c=t===r.endContainer||t.contains(r.endContainer);e.removeAllRanges(),(l||c)&&(n.selectNodeContents(t),l&&n.setStart(r.startContainer,r.startOffset),c&&n.setEnd(r.endContainer,r.endOffset),e.addRange(n))}const i=e.toString();return e.removeAllRanges(),e.addRange(r),i}m(uB,"getSelection");function YA(t,e){sn(t,YA,this);const r=e!==void 0;if(r&&typeof e!="string")throw new Error("expected selection must be a string or undefined");const n=uB(t);return{pass:r?$1(n,e):!!n,message:m(()=>{const i=this.isNot?"not to":"to",l=this.utils.matcherHint(`${this.isNot?".not":""}.toHaveSelection`,"element",e);return wi(this,l,`Expected the element ${i} have selection`,r?e:"(any)","Received",n)},"message")}}m(YA,"toHaveSelection");function XA(t){sn(t,XA,this);const e=(t.getAttribute("role")||"").split(" ").map(c=>c.trim()),r=t.tagName.toLowerCase()==="button"||t.tagName.toLowerCase()==="input"&&t.type==="button"||e.includes("button"),n=t.getAttribute("aria-pressed");return!r||!(n==="true"||n==="false")?{pass:!1,message:m(()=>'Only button or input with type="button" or element with role="button" and a valid aria-pressed attribute can be used with .toBePressed()',"message")}:{pass:r&&n==="true",message:m(()=>{const c=this.utils.matcherHint(`${this.isNot?".not":""}.toBePressed`,"element","");return wi(this,c,"Expected element to have",`aria-pressed="${this.isNot?"false":"true"}"`,"Received",`aria-pressed="${n}"`)},"message")}}m(XA,"toBePressed");function QA(t){sn(t,QA,this);const e=(t.getAttribute("role")||"").split(" ").map(c=>c.trim()),r=t.tagName.toLowerCase()==="button"||t.tagName.toLowerCase()==="input"&&t.type==="button"||e.includes("button"),n=t.getAttribute("aria-pressed");return!r||!(n==="true"||n==="false"||n==="mixed")?{pass:!1,message:m(()=>'Only button or input with type="button" or element with role="button" and a valid aria-pressed attribute can be used with .toBePartiallyPressed()',"message")}:{pass:r&&n==="mixed",message:m(()=>{const c=this.isNot?"not to":"to",s=this.utils.matcherHint(`${this.isNot?".not":""}.toBePartiallyPressed`,"element","");return wi(this,s,`Expected element ${c} have`,'aria-pressed="mixed"',"Received",`aria-pressed="${n}"`)},"message")}}m(QA,"toBePartiallyPressed");Ti(zD(),1);Ti(xC(),1);Ti(jD(),1);Ti(BD(),1);var NE,MO;function hB(){if(MO)return NE;MO=1;var t,e,r,n,i,l,c,s,p,g,_,x,P,A,M,N,z,j,$;return P=/\/(?![*\/])(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\\]).|\\.)*(\/[$_\u200C\u200D\p{ID_Continue}]*|\\)?/yu,x=/--|\+\+|=>|\.{3}|\??\.(?!\d)|(?:&&|\|\||\?\?|[+\-%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2}|\/(?![\/*]))=?|[?~,:;[\](){}]/y,t=/(\x23?)(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+/yu,M=/(['"])(?:(?!\1)[^\\\n\r]|\\(?:\r\n|[^]))*(\1)?/y,_=/(?:0[xX][\da-fA-F](?:_?[\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|0n|[1-9](?:_?\d)*n|(?:(?:0(?!\d)|0\d*[89]\d*|[1-9](?:_?\d)*)(?:\.(?:\d(?:_?\d)*)?)?|\.\d(?:_?\d)*)(?:[eE][+-]?\d(?:_?\d)*)?|0[0-7]+/y,N=/[`}](?:[^`\\$]|\\[^]|\$(?!\{))*(`|\$\{)?/y,$=/[\t\v\f\ufeff\p{Zs}]+/yu,s=/\r?\n|[\r\u2028\u2029]/y,p=/\/\*(?:[^*]|\*(?!\/))*(\*\/)?/y,A=/\/\/.*/y,r=/[<>.:={}]|\/(?![\/*])/y,e=/[$_\p{ID_Start}][$_\u200C\u200D\p{ID_Continue}-]*/yu,n=/(['"])(?:(?!\1)[^])*(\1)?/y,i=/[^<>{}]+/y,j=/^(?:[\/+-]|\.{3}|\?(?:InterpolationIn(?:JSX|Template)|NoLineTerminatorHere|NonExpressionParenEnd|UnaryIncDec))?$|[{}([,;<>=*%&|^!~?:]$/,z=/^(?:=>|[;\]){}]|else|\?(?:NoLineTerminatorHere|NonExpressionParenEnd))?$/,l=/^(?:await|case|default|delete|do|else|instanceof|new|return|throw|typeof|void|yield)$/,c=/^(?:return|throw|yield)$/,g=RegExp(s.source),NE=m(function*(J,{jsx:X=!1}={}){var re,ne,Z,U,K,he,ue,Ee,Ie,ee,pe,ve,xe,tt;for({length:he}=J,U=0,K="",tt=[{tag:"JS"}],re=[],pe=0,ve=!1;U<he;){switch(Ee=tt[tt.length-1],Ee.tag){case"JS":case"JSNonExpressionParen":case"InterpolationInTemplate":case"InterpolationInJSX":if(J[U]==="/"&&(j.test(K)||l.test(K))&&(P.lastIndex=U,ue=P.exec(J))){U=P.lastIndex,K=ue[0],ve=!0,yield{type:"RegularExpressionLiteral",value:ue[0],closed:ue[1]!==void 0&&ue[1]!=="\\"};continue}if(x.lastIndex=U,ue=x.exec(J)){switch(xe=ue[0],Ie=x.lastIndex,ee=xe,xe){case"(":K==="?NonExpressionParenKeyword"&&tt.push({tag:"JSNonExpressionParen",nesting:pe}),pe++,ve=!1;break;case")":pe--,ve=!0,Ee.tag==="JSNonExpressionParen"&&pe===Ee.nesting&&(tt.pop(),ee="?NonExpressionParenEnd",ve=!1);break;case"{":x.lastIndex=0,Z=!z.test(K)&&(j.test(K)||l.test(K)),re.push(Z),ve=!1;break;case"}":switch(Ee.tag){case"InterpolationInTemplate":if(re.length===Ee.nesting){N.lastIndex=U,ue=N.exec(J),U=N.lastIndex,K=ue[0],ue[1]==="${"?(K="?InterpolationInTemplate",ve=!1,yield{type:"TemplateMiddle",value:ue[0]}):(tt.pop(),ve=!0,yield{type:"TemplateTail",value:ue[0],closed:ue[1]==="`"});continue}break;case"InterpolationInJSX":if(re.length===Ee.nesting){tt.pop(),U+=1,K="}",yield{type:"JSXPunctuator",value:"}"};continue}}ve=re.pop(),ee=ve?"?ExpressionBraceEnd":"}";break;case"]":ve=!0;break;case"++":case"--":ee=ve?"?PostfixIncDec":"?UnaryIncDec";break;case"<":if(X&&(j.test(K)||l.test(K))){tt.push({tag:"JSXTag"}),U+=1,K="<",yield{type:"JSXPunctuator",value:xe};continue}ve=!1;break;default:ve=!1}U=Ie,K=ee,yield{type:"Punctuator",value:xe};continue}if(t.lastIndex=U,ue=t.exec(J)){switch(U=t.lastIndex,ee=ue[0],ue[0]){case"for":case"if":case"while":case"with":K!=="."&&K!=="?."&&(ee="?NonExpressionParenKeyword")}K=ee,ve=!l.test(ue[0]),yield{type:ue[1]==="#"?"PrivateIdentifier":"IdentifierName",value:ue[0]};continue}if(M.lastIndex=U,ue=M.exec(J)){U=M.lastIndex,K=ue[0],ve=!0,yield{type:"StringLiteral",value:ue[0],closed:ue[2]!==void 0};continue}if(_.lastIndex=U,ue=_.exec(J)){U=_.lastIndex,K=ue[0],ve=!0,yield{type:"NumericLiteral",value:ue[0]};continue}if(N.lastIndex=U,ue=N.exec(J)){U=N.lastIndex,K=ue[0],ue[1]==="${"?(K="?InterpolationInTemplate",tt.push({tag:"InterpolationInTemplate",nesting:re.length}),ve=!1,yield{type:"TemplateHead",value:ue[0]}):(ve=!0,yield{type:"NoSubstitutionTemplate",value:ue[0],closed:ue[1]==="`"});continue}break;case"JSXTag":case"JSXTagEnd":if(r.lastIndex=U,ue=r.exec(J)){switch(U=r.lastIndex,ee=ue[0],ue[0]){case"<":tt.push({tag:"JSXTag"});break;case">":tt.pop(),K==="/"||Ee.tag==="JSXTagEnd"?(ee="?JSX",ve=!0):tt.push({tag:"JSXChildren"});break;case"{":tt.push({tag:"InterpolationInJSX",nesting:re.length}),ee="?InterpolationInJSX",ve=!1;break;case"/":K==="<"&&(tt.pop(),tt[tt.length-1].tag==="JSXChildren"&&tt.pop(),tt.push({tag:"JSXTagEnd"}))}K=ee,yield{type:"JSXPunctuator",value:ue[0]};continue}if(e.lastIndex=U,ue=e.exec(J)){U=e.lastIndex,K=ue[0],yield{type:"JSXIdentifier",value:ue[0]};continue}if(n.lastIndex=U,ue=n.exec(J)){U=n.lastIndex,K=ue[0],yield{type:"JSXString",value:ue[0],closed:ue[2]!==void 0};continue}break;case"JSXChildren":if(i.lastIndex=U,ue=i.exec(J)){U=i.lastIndex,K=ue[0],yield{type:"JSXText",value:ue[0]};continue}switch(J[U]){case"<":tt.push({tag:"JSXTag"}),U++,K="<",yield{type:"JSXPunctuator",value:"<"};continue;case"{":tt.push({tag:"InterpolationInJSX",nesting:re.length}),U++,K="?InterpolationInJSX",ve=!1,yield{type:"JSXPunctuator",value:"{"};continue}}if($.lastIndex=U,ue=$.exec(J)){U=$.lastIndex,yield{type:"WhiteSpace",value:ue[0]};continue}if(s.lastIndex=U,ue=s.exec(J)){U=s.lastIndex,ve=!1,c.test(K)&&(K="?NoLineTerminatorHere"),yield{type:"LineTerminatorSequence",value:ue[0]};continue}if(p.lastIndex=U,ue=p.exec(J)){U=p.lastIndex,g.test(ue[0])&&(ve=!1,c.test(K)&&(K="?NoLineTerminatorHere")),yield{type:"MultiLineComment",value:ue[0],closed:ue[1]!==void 0};continue}if(A.lastIndex=U,ue=A.exec(J)){U=A.lastIndex,ve=!1,yield{type:"SingleLineComment",value:ue[0]};continue}ne=String.fromCodePoint(J.codePointAt(U)),U+=ne.length,K=ne,ve=!1,yield{type:Ee.tag.startsWith("JSX")?"JSXInvalid":"Invalid",value:ne}}},"jsTokens_1"),NE}m(hB,"requireJsTokens");var zie=hB();mP(zie);var dB={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"]};new Set(dB.keyword);new Set(dB.strict);function Pg(t,e){if(!t)throw new Error(e)}m(Pg,"assert");function eh(t,e){return typeof e===t}m(eh,"isType");function pB(t){return t instanceof Promise}m(pB,"isPromise");function Zp(t,e,r){Object.defineProperty(t,e,r)}m(Zp,"define");function hh(t,e,r){Zp(t,e,{value:r,configurable:!0,writable:!0})}m(hh,"defineValue");var Bc=Symbol.for("tinyspy:spy"),jie=new Set,Bie=m(t=>{t.called=!1,t.callCount=0,t.calls=[],t.results=[],t.resolves=[],t.next=[]},"reset"),qie=m(t=>(Zp(t,Bc,{value:{reset:m(()=>Bie(t[Bc]),"reset")}}),t[Bc]),"defineState"),RS=m(t=>t[Bc]||qie(t),"getInternalState");function fB(t){Pg(eh("function",t)||eh("undefined",t),"cannot spy on a non-function value");let e=m(function(...n){let i=RS(e);i.called=!0,i.callCount++,i.calls.push(n);let l=i.next.shift();if(l){i.results.push(l);let[_,x]=l;if(_==="ok")return x;throw x}let c,s="ok",p=i.results.length;if(i.impl)try{new.target?c=Reflect.construct(i.impl,n,new.target):c=i.impl.apply(this,n),s="ok"}catch(_){throw c=_,s="error",i.results.push([s,_]),_}let g=[s,c];return pB(c)&&c.then(_=>i.resolves[p]=["ok",_],_=>i.resolves[p]=["error",_]),i.results.push(g),c},"fn");hh(e,"_isMockFunction",!0),hh(e,"length",t?t.length:0),hh(e,"name",t&&t.name||"spy");let r=RS(e);return r.reset(),r.impl=t,e}m(fB,"createInternalSpy");function mB(t){return!!t&&t._isMockFunction===!0}m(mB,"isMockFunction");var gB=m((t,e)=>{let r=Object.getOwnPropertyDescriptor(t,e);if(r)return[t,r];let n=Object.getPrototypeOf(t);for(;n!==null;){let i=Object.getOwnPropertyDescriptor(n,e);if(i)return[n,i];n=Object.getPrototypeOf(n)}},"getDescriptor"),OO=m((t,e)=>{e!=null&&typeof e=="function"&&e.prototype!=null&&Object.setPrototypeOf(t.prototype,e.prototype)},"setPototype");function eR(t,e,r){Pg(!eh("undefined",t),"spyOn could not find an object to spy upon"),Pg(eh("object",t)||eh("function",t),"cannot spyOn on a primitive value");let[n,i]=(()=>{if(!eh("object",e))return[e,"value"];if("getter"in e&&"setter"in e)throw new Error("cannot spy on both getter and setter");if("getter"in e)return[e.getter,"get"];if("setter"in e)return[e.setter,"set"];throw new Error("specify getter or setter to spy on")})(),[l,c]=gB(t,n)||[];Pg(c||n in t,`${String(n)} does not exist`);let s=!1;i==="value"&&c&&!c.value&&c.get&&(i="get",s=!0,r=c.get());let p;c?p=c[i]:i!=="value"?p=m(()=>t[n],"original"):p=t[n],p&&bB(p)&&(p=p[Bc].getOriginal());let g=m(A=>{let{value:M,...N}=c||{configurable:!0,writable:!0};i!=="value"&&delete N.writable,N[i]=A,Zp(t,n,N)},"reassign"),_=m(()=>{l!==t?Reflect.deleteProperty(t,n):c&&!p?Zp(t,n,c):g(p)},"restore");r||(r=p);let x=_B(fB(r),r);i==="value"&&OO(x,p);let P=x[Bc];return hh(P,"restore",_),hh(P,"getOriginal",()=>s?p():p),hh(P,"willCall",A=>(P.impl=A,x)),g(s?()=>(OO(x,r),x):x),jie.add(x),x}m(eR,"internalSpyOn");var $ie=new Set(["length","name","prototype"]);function yB(t){let e=new Set,r={};for(;t&&t!==Object.prototype&&t!==Function.prototype;){let n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(let i of n)r[i]||$ie.has(i)||(e.add(i),r[i]=Object.getOwnPropertyDescriptor(t,i));t=Object.getPrototypeOf(t)}return{properties:e,descriptors:r}}m(yB,"getAllProperties");function _B(t,e){if(!e||Bc in e)return t;let{properties:r,descriptors:n}=yB(e);for(let i of r){let l=n[i];gB(t,i)||Zp(t,i,l)}return t}m(_B,"wrap");function bB(t){return mB(t)&&"getOriginal"in t[Bc]}m(bB,"isSpyFunction");var Ky=new Set;function dh(t){return typeof t=="function"&&"_isMockFunction"in t&&t._isMockFunction}m(dh,"isMockFunction");function vB(t,e,r){const i=r?{[{get:"getter",set:"setter"}[r]]:e}:e;let l;const c=xB(t,e),s=c&&c[r||"value"];dh(s)&&(l=s.mock._state());try{const p=eR(t,i),g=tR(p);return l&&g.mock._state(l),g}catch(p){throw p instanceof TypeError&&Symbol.toStringTag&&t[Symbol.toStringTag]==="Module"&&(p.message.includes("Cannot redefine property")||p.message.includes("Cannot replace module namespace")||p.message.includes("can't redefine non-configurable property"))?new TypeError(`Cannot spy on export "${String(i)}". Module namespace is not configurable in ESM. See: https://vitest.dev/guide/browser/#limitations`,{cause:p}):p}}m(vB,"spyOn");var Vie=0;function tR(t){const e=t;let r,n=[],i=!1,l=[],c=[],s=[];const p=RS(t),g={get calls(){return p.calls},get contexts(){return c},get instances(){return l},get invocationCallOrder(){return s},get results(){return p.results.map(([A,M])=>({type:A==="error"?"throw":"return",value:M}))},get settledResults(){return p.resolves.map(([A,M])=>({type:A==="error"?"rejected":"fulfilled",value:M}))},get lastCall(){return p.calls[p.calls.length-1]},_state(A){return A&&(r=A.implementation,n=A.onceImplementations,i=A.implementationChangedTemporarily),{implementation:r,onceImplementations:n,implementationChangedTemporarily:i}}};function _(...A){return l.push(this),c.push(this),s.push(++Vie),(i?r:n.shift()||r||p.getOriginal()||(()=>{})).apply(this,A)}m(_,"mockCall");let x=e.name;e.getMockName=()=>x||"vi.fn()",e.mockName=A=>(x=A,e),e.mockClear=()=>(p.reset(),l=[],c=[],s=[],e),e.mockReset=()=>(e.mockClear(),r=void 0,n=[],e),e.mockRestore=()=>(e.mockReset(),p.restore(),e),Symbol.dispose&&(e[Symbol.dispose]=()=>e.mockRestore()),e.getMockImplementation=()=>i?r:n.at(0)||r,e.mockImplementation=A=>(r=A,p.willCall(_),e),e.mockImplementationOnce=A=>(n.push(A),e);function P(A,M){const N=r;r=A,p.willCall(_),i=!0;const z=m(()=>{r=N,i=!1},"reset"),j=M();return typeof j=="object"&&j&&typeof j.then=="function"?j.then(()=>(z(),e)):(z(),e)}return m(P,"withImplementation"),e.withImplementation=P,e.mockReturnThis=()=>e.mockImplementation(function(){return this}),e.mockReturnValue=A=>e.mockImplementation(()=>A),e.mockReturnValueOnce=A=>e.mockImplementationOnce(()=>A),e.mockResolvedValue=A=>e.mockImplementation(()=>Promise.resolve(A)),e.mockResolvedValueOnce=A=>e.mockImplementationOnce(()=>Promise.resolve(A)),e.mockRejectedValue=A=>e.mockImplementation(()=>Promise.reject(A)),e.mockRejectedValueOnce=A=>e.mockImplementationOnce(()=>Promise.reject(A)),Object.defineProperty(e,"mock",{get:m(()=>g,"get")}),p.willCall(_),Ky.add(e),e}m(tR,"enhanceSpy");function IS(t){const e=tR(eR({spy:t||function(){}},"spy"));return t&&e.mockImplementation(t),e}m(IS,"fn");function xB(t,e){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;let n=Object.getPrototypeOf(t);for(;n!==null;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Object.getPrototypeOf(n)}}m(xB,"getDescriptor");var Xg=Symbol.for("matchers-object"),Qg=Symbol.for("$$jest-matchers-object-storybook"),rR=Symbol.for("expect-global"),MS=Symbol.for("asymmetric-matchers-object"),Uie={toSatisfy(t,e,r){const{printReceived:n,printExpected:i,matcherHint:l}=this.utils,c=e(t);return{pass:c,message:m(()=>c?`${l(".not.toSatisfy","received","")}

Expected value to not satisfy:
${r||i(e)}
Received:
${n(t)}`:`${l(".toSatisfy","received","")}

Expected value to satisfy:
${r||i(e)}

Received:
${n(t)}`,"message")}},toBeOneOf(t,e){const{equals:r,customTesters:n}=this,{printReceived:i,printExpected:l,matcherHint:c}=this.utils;if(!Array.isArray(e))throw new TypeError(`You must provide an array to ${c(".toBeOneOf")}, not '${typeof e}'.`);const s=e.length===0||e.some(p=>r(p,t,n));return{pass:s,message:m(()=>s?`${c(".not.toBeOneOf","received","")}

Expected value to not be one of:
${l(e)}
Received:
${i(t)}`:`${c(".toBeOneOf","received","")}

Expected value to be one of:
${l(e)}

Received:
${i(t)}`,"message")}}},Jb=ii.green,nR=ii.red,Gie=ii.inverse,Hie=ii.bold,vc=ii.dim;function wB(t,e="received",r="expected",n={}){const{comment:i="",isDirectExpectCall:l=!1,isNot:c=!1,promise:s="",secondArgument:p="",expectedColor:g=Jb,receivedColor:_=nR,secondArgumentColor:x=Jb}=n;let P="",A="expect";return!l&&e!==""&&(P+=vc(`${A}(`)+_(e),A=")"),s!==""&&(P+=vc(`${A}.`)+s,A=""),c&&(P+=`${vc(`${A}.`)}not`,A=""),t.includes(".")?A+=t:(P+=vc(`${A}.`)+t,A=""),r===""?A+="()":(P+=vc(`${A}(`)+g(r),p&&(P+=vc(", ")+x(p)),A=")"),i!==""&&(A+=` // ${i}`),A!==""&&(P+=vc(A)),P}m(wB,"matcherHint");var Jie="";function iR(t){return t.replace(/\s+$/gm,e=>Jie.repeat(e.length))}m(iR,"replaceTrailingSpaces");function EB(t){return nR(iR(Mo(t)))}m(EB,"printReceived");function TB(t){return Jb(iR(Mo(t)))}m(TB,"printExpected");function oR(){return{EXPECTED_COLOR:Jb,RECEIVED_COLOR:nR,INVERTED_COLOR:Gie,BOLD_WEIGHT:Hie,DIM_COLOR:vc,diff:Gh,matcherHint:wB,printReceived:EB,printExpected:TB,printDiffOrStringify:TP,printWithType:SB}}m(oR,"getMatcherUtils");function SB(t,e,r){const n=Ug(e),i=n!=="null"&&n!=="undefined"?`${t} has type:  ${n}
`:"",l=`${t} has value: ${r(e)}`;return i+l}m(SB,"printWithType");function V1(){return globalThis[Qg].customEqualityTesters}m(V1,"getCustomEqualityTesters");function ln(t,e,r,n){return r=r||[],Rp(t,e,[],[],r,n?sR:AB)}m(ln,"equals");function OS(t){return!!t&&typeof t=="object"&&"asymmetricMatch"in t&&Cs("Function",t.asymmetricMatch)}m(OS,"isAsymmetric");function CB(t,e){const r=OS(t),n=OS(e);if(!(r&&n)){if(r)return t.asymmetricMatch(e);if(n)return e.asymmetricMatch(t)}}m(CB,"asymmetricMatch");function Rp(t,e,r,n,i,l){let c=!0;const s=CB(t,e);if(s!==void 0)return s;const p={equals:ln};for(let M=0;M<i.length;M++){const N=i[M].call(p,t,e,i);if(N!==void 0)return N}if(typeof URL=="function"&&t instanceof URL&&e instanceof URL)return t.href===e.href;if(Object.is(t,e))return!0;if(t===null||e===null)return t===e;const g=Object.prototype.toString.call(t);if(g!==Object.prototype.toString.call(e))return!1;switch(g){case"[object Boolean]":case"[object String]":case"[object Number]":return typeof t!=typeof e?!1:typeof t!="object"&&typeof e!="object"?Object.is(t,e):Object.is(t.valueOf(),e.valueOf());case"[object Date]":{const M=+t,N=+e;return M===N||Number.isNaN(M)&&Number.isNaN(N)}case"[object RegExp]":return t.source===e.source&&t.flags===e.flags;case"[object Temporal.Instant]":case"[object Temporal.ZonedDateTime]":case"[object Temporal.PlainDateTime]":case"[object Temporal.PlainDate]":case"[object Temporal.PlainTime]":case"[object Temporal.PlainYearMonth]":case"[object Temporal.PlainMonthDay]":return t.equals(e);case"[object Temporal.Duration]":return t.toString()===e.toString()}if(typeof t!="object"||typeof e!="object")return!1;if(LS(t)&&LS(e))return t.isEqualNode(e);let _=r.length;for(;_--;){if(r[_]===t)return n[_]===e;if(n[_]===e)return!1}if(r.push(t),n.push(e),g==="[object Array]"&&t.length!==e.length)return!1;if(t instanceof Error&&e instanceof Error)try{return PB(t,e,r,n,i,l)}finally{r.pop(),n.pop()}const x=kS(t,l);let P,A=x.length;if(kS(e,l).length!==A)return!1;for(;A--;)if(P=x[A],c=l(e,P)&&Rp(t[P],e[P],r,n,i,l),!c)return!1;return r.pop(),n.pop(),c}m(Rp,"eq");function PB(t,e,r,n,i,l){let c=Object.getPrototypeOf(t)===Object.getPrototypeOf(e)&&t.name===e.name&&t.message===e.message;return typeof e.cause<"u"&&c&&(c=Rp(t.cause,e.cause,r,n,i,l)),t instanceof AggregateError&&e instanceof AggregateError&&c&&(c=Rp(t.errors,e.errors,r,n,i,l)),c&&(c=Rp({...t},{...e},r,n,i,l)),c}m(PB,"isErrorEqual");function kS(t,e){const r=[];for(const n in t)e(t,n)&&r.push(n);return r.concat(Object.getOwnPropertySymbols(t).filter(n=>Object.getOwnPropertyDescriptor(t,n).enumerable))}m(kS,"keys");function AB(t,e){return sR(t,e)&&t[e]!==void 0}m(AB,"hasDefinedKey");function sR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}m(sR,"hasKey");function Cs(t,e){return Object.prototype.toString.apply(e)===`[object ${t}]`}m(Cs,"isA");function LS(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"&&"nodeName"in t&&typeof t.nodeName=="string"&&"isEqualNode"in t&&typeof t.isEqualNode=="function"}m(LS,"isDomNode");var RB="@@__IMMUTABLE_KEYED__@@",IB="@@__IMMUTABLE_SET__@@",Wie="@@__IMMUTABLE_LIST__@@",U1="@@__IMMUTABLE_ORDERED__@@",Zie="@@__IMMUTABLE_RECORD__@@";function MB(t){return!!(t&&t[RB]&&!t[U1])}m(MB,"isImmutableUnorderedKeyed");function OB(t){return!!(t&&t[IB]&&!t[U1])}m(OB,"isImmutableUnorderedSet");function Yy(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}m(Yy,"isObjectLiteral");function kB(t){return!!(t&&Yy(t)&&t[Wie])}m(kB,"isImmutableList");function LB(t){return!!(t&&Yy(t)&&t[RB]&&t[U1])}m(LB,"isImmutableOrderedKeyed");function DB(t){return!!(t&&Yy(t)&&t[IB]&&t[U1])}m(DB,"isImmutableOrderedSet");function NB(t){return!!(t&&Yy(t)&&t[Zie])}m(NB,"isImmutableRecord");var FB=Symbol.iterator;function DS(t){return!!(t!=null&&t[FB])}m(DS,"hasIterator");function ts(t,e,r=[],n=[],i=[]){if(typeof t!="object"||typeof e!="object"||Array.isArray(t)||Array.isArray(e)||!DS(t)||!DS(e))return;if(t.constructor!==e.constructor)return!1;let l=n.length;for(;l--;)if(n[l]===t)return i[l]===e;n.push(t),i.push(e);const c=[...r.filter(g=>g!==ts),s];function s(g,_){return ts(g,_,[...r],[...n],[...i])}if(m(s,"iterableEqualityWithStack"),t.size!==void 0){if(t.size!==e.size)return!1;if(Cs("Set",t)||OB(t)){let g=!0;for(const _ of t)if(!e.has(_)){let x=!1;for(const P of e)ln(_,P,c)===!0&&(x=!0);if(x===!1){g=!1;break}}return n.pop(),i.pop(),g}else if(Cs("Map",t)||MB(t)){let g=!0;for(const _ of t)if(!e.has(_[0])||!ln(_[1],e.get(_[0]),c)){let x=!1;for(const P of e){const A=ln(_[0],P[0],c);let M=!1;A===!0&&(M=ln(_[1],P[1],c)),M===!0&&(x=!0)}if(x===!1){g=!1;break}}return n.pop(),i.pop(),g}}const p=e[FB]();for(const g of t){const _=p.next();if(_.done||!ln(g,_.value,c))return!1}if(!p.next().done)return!1;if(!kB(t)&&!LB(t)&&!DB(t)&&!NB(t)){const g=Object.entries(t),_=Object.entries(e);if(!ln(g,_,c))return!1}return n.pop(),i.pop(),!0}m(ts,"iterableEquality");function G1(t,e){return!t||typeof t!="object"||t===Object.prototype?!1:Object.prototype.hasOwnProperty.call(t,e)||G1(Object.getPrototypeOf(t),e)}m(G1,"hasPropertyInObject");function zB(t){return Sg(t)&&!(t instanceof Error)&&!Array.isArray(t)&&!(t instanceof Date)}m(zB,"isObjectWithKeys");function Af(t,e,r=[]){const n=r.filter(l=>l!==Af),i=m((l=new WeakMap)=>(c,s)=>{if(zB(s))return Object.keys(s).every(p=>{if(s[p]!=null&&typeof s[p]=="object"){if(l.has(s[p]))return ln(c[p],s[p],n);l.set(s[p],!0)}const g=c!=null&&G1(c,p)&&ln(c[p],s[p],[...n,i(l)]);return l.delete(s[p]),g})},"subsetEqualityWithContext");return i()(t,e)}m(Af,"subsetEquality");function NS(t,e){if(!(t==null||e==null||t.constructor===e.constructor))return!1}m(NS,"typeEquality");function FS(t,e){let r=t,n=e;if(!(t instanceof DataView&&e instanceof DataView)){if(!(t instanceof ArrayBuffer)||!(e instanceof ArrayBuffer))return;try{r=new DataView(t),n=new DataView(e)}catch{return}}if(r.byteLength!==n.byteLength)return!1;for(let i=0;i<r.byteLength;i++)if(r.getUint8(i)!==n.getUint8(i))return!1;return!0}m(FS,"arrayBufferEquality");function Wb(t,e,r=[]){if(!Array.isArray(t)||!Array.isArray(e))return;const n=Object.keys(t),i=Object.keys(e),l=r.filter(c=>c!==Wb);return ln(t,e,l,!0)&&ln(n,i)}m(Wb,"sparseArrayEquality");function jB(t,e="#{this}",r="#{exp}"){const n=`expected ${e} to be ${r} // Object.is equality`;return["toStrictEqual","toEqual"].includes(t)?`${n}

If it should pass with deep equality, replace "toBe" with "${t}"

Expected: ${e}
Received: serializes to the same string
`:n}m(jB,"generateToBeMessage");function BB(t,e){return`${e} ${t}${e===1?"":"s"}`}m(BB,"pluralize");function eb(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t).filter(e=>{var r;return(r=Object.getOwnPropertyDescriptor(t,e))===null||r===void 0?void 0:r.enumerable})]}m(eb,"getObjectKeys");function qB(t,e,r){let n=0;const i=m((l=new WeakMap)=>(c,s)=>{if(Array.isArray(c)){if(Array.isArray(s)&&s.length===c.length)return s.map((p,g)=>i(l)(c[g],p))}else{if(c instanceof Date)return c;if(Sg(c)&&Sg(s)){if(ln(c,s,[...r,ts,Af]))return s;const p={};l.set(c,p),typeof c.constructor=="function"&&typeof c.constructor.name=="string"&&Object.defineProperty(p,"constructor",{enumerable:!1,value:c.constructor});for(const g of eb(c))G1(s,g)?p[g]=l.has(c[g])?l.get(c[g]):i(l)(c[g],s[g]):l.has(c[g])||(n+=1,Sg(c[g])&&(n+=eb(c[g]).length),i(l)(c[g],s[g]));if(eb(p).length>0)return p}}return c},"getObjectSubsetWithContext");return{subset:i()(t,e),stripped:n}}m(qB,"getObjectSubset");if(!Object.prototype.hasOwnProperty.call(globalThis,Xg)){const t=new WeakMap;Object.defineProperty(globalThis,Xg,{get:m(()=>t,"get")})}if(!Object.prototype.hasOwnProperty.call(globalThis,Qg)){const t=Object.create(null),e=[];Object.defineProperty(globalThis,Qg,{configurable:!0,get:m(()=>({state:globalThis[Xg].get(globalThis[rR]),matchers:t,customEqualityTesters:e}),"get")})}if(!Object.prototype.hasOwnProperty.call(globalThis,MS)){const t=Object.create(null);Object.defineProperty(globalThis,MS,{get:m(()=>t,"get")})}function ey(t){return globalThis[Xg].get(t)}m(ey,"getState");function tb(t,e){const r=globalThis[Xg],n=r.get(e)||{},i=Object.defineProperties(n,{...Object.getOwnPropertyDescriptors(n),...Object.getOwnPropertyDescriptors(t)});r.set(e,i)}m(tb,"setState");var $B=class{constructor(e,r=!1){Er(this,"$$typeof",Symbol.for("jest.asymmetricMatcher"));this.sample=e,this.inverse=r}getMatcherContext(e){return{...ey(e||globalThis[rR]),equals:ln,isNot:this.inverse,customTesters:V1(),utils:{...oR(),diff:Gh,stringify:Mo,iterableEquality:ts,subsetEquality:Af}}}};m($B,"AsymmetricMatcher");var Fl=$B;Fl.prototype[Symbol.for("chai/inspect")]=function(t){const e=Mo(this,t.depth,{min:!0});return e.length<=t.truncate?e:`${this.toString()}{}`};var VB=class extends Fl{constructor(e,r=!1){if(!Cs("String",e))throw new Error("Expected is not a string");super(e,r)}asymmetricMatch(e){const r=Cs("String",e)&&e.includes(this.sample);return this.inverse?!r:r}toString(){return`String${this.inverse?"Not":""}Containing`}getExpectedType(){return"string"}};m(VB,"StringContaining");var kO=VB,UB=class extends Fl{asymmetricMatch(e){return e!=null}toString(){return"Anything"}toAsymmetricMatcher(){return"Anything"}};m(UB,"Anything");var Kie=UB,GB=class extends Fl{constructor(e,r=!1){super(e,r)}getPrototype(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.constructor.prototype===e?null:e.constructor.prototype}hasProperty(e,r){return e?Object.prototype.hasOwnProperty.call(e,r)?!0:this.hasProperty(this.getPrototype(e),r):!1}asymmetricMatch(e){if(typeof this.sample!="object")throw new TypeError(`You must provide an object to ${this.toString()}, not '${typeof this.sample}'.`);let r=!0;const n=this.getMatcherContext();for(const i in this.sample)if(!this.hasProperty(e,i)||!ln(this.sample[i],e[i],n.customTesters)){r=!1;break}return this.inverse?!r:r}toString(){return`Object${this.inverse?"Not":""}Containing`}getExpectedType(){return"object"}};m(GB,"ObjectContaining");var LO=GB,HB=class extends Fl{constructor(e,r=!1){super(e,r)}asymmetricMatch(e){if(!Array.isArray(this.sample))throw new TypeError(`You must provide an array to ${this.toString()}, not '${typeof this.sample}'.`);const r=this.getMatcherContext(),n=this.sample.length===0||Array.isArray(e)&&this.sample.every(i=>e.some(l=>ln(i,l,r.customTesters)));return this.inverse?!n:n}toString(){return`Array${this.inverse?"Not":""}Containing`}getExpectedType(){return"array"}};m(HB,"ArrayContaining");var DO=HB,JB=class extends Fl{constructor(e){if(typeof e>"u")throw new TypeError("any() expects to be passed a constructor function. Please pass one or use anything() to match any object.");super(e)}fnNameFor(e){if(e.name)return e.name;const n=Function.prototype.toString.call(e).match(/^(?:async)?\s*function\s*(?:\*\s*)?([\w$]+)\s*\(/);return n?n[1]:"<anonymous>"}asymmetricMatch(e){return this.sample===String?typeof e=="string"||e instanceof String:this.sample===Number?typeof e=="number"||e instanceof Number:this.sample===Function?typeof e=="function"||typeof e=="function":this.sample===Boolean?typeof e=="boolean"||e instanceof Boolean:this.sample===BigInt?typeof e=="bigint"||e instanceof BigInt:this.sample===Symbol?typeof e=="symbol"||e instanceof Symbol:this.sample===Object?typeof e=="object":e instanceof this.sample}toString(){return"Any"}getExpectedType(){return this.sample===String?"string":this.sample===Number?"number":this.sample===Function?"function":this.sample===Object?"object":this.sample===Boolean?"boolean":this.fnNameFor(this.sample)}toAsymmetricMatcher(){return`Any<${this.fnNameFor(this.sample)}>`}};m(JB,"Any");var Yie=JB,WB=class extends Fl{constructor(e,r=!1){if(!Cs("String",e)&&!Cs("RegExp",e))throw new Error("Expected is not a String or a RegExp");super(new RegExp(e),r)}asymmetricMatch(e){const r=Cs("String",e)&&this.sample.test(e);return this.inverse?!r:r}toString(){return`String${this.inverse?"Not":""}Matching`}getExpectedType(){return"string"}};m(WB,"StringMatching");var NO=WB,ZB=class extends Fl{constructor(r,n=2,i=!1){if(!Cs("Number",r))throw new Error("Expected is not a Number");if(!Cs("Number",n))throw new Error("Precision is not a Number");super(r);Er(this,"precision");this.inverse=i,this.precision=n}asymmetricMatch(r){if(!Cs("Number",r))return!1;let n=!1;return r===Number.POSITIVE_INFINITY&&this.sample===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY&&this.sample===Number.NEGATIVE_INFINITY?n=!0:n=Math.abs(this.sample-r)<10**-this.precision/2,this.inverse?!n:n}toString(){return`Number${this.inverse?"Not":""}CloseTo`}getExpectedType(){return"number"}toAsymmetricMatcher(){return[this.toString(),this.sample,`(${BB("digit",this.precision)})`].join(" ")}};m(ZB,"CloseTo");var FO=ZB,Xie=m((t,e)=>{e.addMethod(t.expect,"anything",()=>new Kie),e.addMethod(t.expect,"any",r=>new Yie(r)),e.addMethod(t.expect,"stringContaining",r=>new kO(r)),e.addMethod(t.expect,"objectContaining",r=>new LO(r)),e.addMethod(t.expect,"arrayContaining",r=>new DO(r)),e.addMethod(t.expect,"stringMatching",r=>new NO(r)),e.addMethod(t.expect,"closeTo",(r,n)=>new FO(r,n)),t.expect.not={stringContaining:m(r=>new kO(r,!0),"stringContaining"),objectContaining:m(r=>new LO(r,!0),"objectContaining"),arrayContaining:m(r=>new DO(r,!0),"arrayContaining"),stringMatching:m(r=>new NO(r,!0),"stringMatching"),closeTo:m((r,n)=>new FO(r,n,!0),"closeTo")}},"JestAsymmetricMatchers");function zS(t,e,r){const n=t.flag(e,"negate")?"not.":"",i=`${t.flag(e,"_name")}(${r?"expected":""})`,l=t.flag(e,"promise");return`expect(actual)${l?`.${l}`:""}.${n}${i}`}m(zS,"createAssertionMessage");function jS(t,e,r,n){const i=t;if(i&&e instanceof Promise){e=e.finally(()=>{if(!i.promises)return;const c=i.promises.indexOf(e);c!==-1&&i.promises.splice(c,1)}),i.promises||(i.promises=[]),i.promises.push(e);let l=!1;return i.onFinished??(i.onFinished=[]),i.onFinished.push(()=>{if(!l){var c;const p=(((c=globalThis.__vitest_worker__)===null||c===void 0?void 0:c.onFilterStackTrace)||(g=>g||""))(n.stack);console.warn([`Promise returned by \`${r}\` was not awaited. `,"Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. ",`Please remember to await the assertion.
`,p].join(""))}}),{then(c,s){return l=!0,e.then(c,s)},catch(c){return e.catch(c)},finally(c){return e.finally(c)},[Symbol.toStringTag]:"Promise"}}return e}m(jS,"recordAsyncExpect");function BS(t,e){var r;t.result||(t.result={state:"fail"}),t.result.state="fail",(r=t.result).errors||(r.errors=[]),t.result.errors.push(s1(e))}m(BS,"handleTestError");function aR(t,e,r){return function(...n){if(e!=="withTest"&&t.flag(this,"_name",e),!t.flag(this,"soft"))return r.apply(this,n);const i=t.flag(this,"vitest-test");if(!i)throw new Error("expect.soft() can only be used inside a test");try{const l=r.apply(this,n);return l&&typeof l=="object"&&typeof l.then=="function"?l.then(K6,c=>{BS(i,c)}):l}catch(l){BS(i,l)}}}m(aR,"wrapAssertion");var Qie=m((t,e)=>{const{AssertionError:r}=t,n=V1();function i(g,_){const x=m(P=>{const A=aR(e,P,_);e.addMethod(t.Assertion.prototype,P,A),e.addMethod(globalThis[Qg].matchers,P,A)},"addMethod");Array.isArray(g)?g.forEach(P=>x(P)):x(g)}m(i,"def"),["throw","throws","Throw"].forEach(g=>{e.overwriteMethod(t.Assertion.prototype,g,_=>function(...x){const P=e.flag(this,"promise"),A=e.flag(this,"object"),M=e.flag(this,"negate");if(P==="rejects")e.flag(this,"object",()=>{throw A});else if(P==="resolves"&&typeof A!="function"){if(M)return;{const N=e.flag(this,"message")||"expected promise to throw an error, but it didn't",z={showDiff:!1};throw new r(N,z,e.flag(this,"ssfi"))}}_.apply(this,x)})}),i("withTest",function(g){return e.flag(this,"vitest-test",g),this}),i("toEqual",function(g){const _=e.flag(this,"object"),x=ln(_,g,[...n,ts]);return this.assert(x,"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",g,_)}),i("toStrictEqual",function(g){const _=e.flag(this,"object"),x=ln(_,g,[...n,ts,NS,Wb,FS],!0);return this.assert(x,"expected #{this} to strictly equal #{exp}","expected #{this} to not strictly equal #{exp}",g,_)}),i("toBe",function(g){const _=this._obj,x=Object.is(_,g);let P="";return x||(ln(_,g,[...n,ts,NS,Wb,FS],!0)?P="toStrictEqual":ln(_,g,[...n,ts])&&(P="toEqual")),this.assert(x,jB(P),"expected #{this} not to be #{exp} // Object.is equality",g,_)}),i("toMatchObject",function(g){const _=this._obj,x=ln(_,g,[...n,ts,Af]),P=e.flag(this,"negate"),{subset:A,stripped:M}=qB(_,g,n);if(x&&P||!x&&!P){const N=e.getMessage(this,[x,"expected #{this} to match object #{exp}","expected #{this} to not match object #{exp}",g,A,!1]),z=M===0?N:`${N}
(${M} matching ${M===1?"property":"properties"} omitted from actual)`;throw new r(z,{showDiff:!0,expected:g,actual:A})}}),i("toMatch",function(g){const _=this._obj;if(typeof _!="string")throw new TypeError(`.toMatch() expects to receive a string, but got ${typeof _}`);return this.assert(typeof g=="string"?_.includes(g):_.match(g),"expected #{this} to match #{exp}","expected #{this} not to match #{exp}",g,_)}),i("toContain",function(g){const _=this._obj;if(typeof Node<"u"&&_ instanceof Node){if(!(g instanceof Node))throw new TypeError(`toContain() expected a DOM node as the argument, but got ${typeof g}`);return this.assert(_.contains(g),"expected #{this} to contain element #{exp}","expected #{this} not to contain element #{exp}",g,_)}if(typeof DOMTokenList<"u"&&_ instanceof DOMTokenList){va(g,"class name",["string"]);const P=e.flag(this,"negate")?_.value.replace(g,"").trim():`${_.value} ${g}`;return this.assert(_.contains(g),`expected "${_.value}" to contain "${g}"`,`expected "${_.value}" not to contain "${g}"`,P,_.value)}return typeof _=="string"&&typeof g=="string"?this.assert(_.includes(g),"expected #{this} to contain #{exp}","expected #{this} not to contain #{exp}",g,_):(_!=null&&typeof _!="string"&&e.flag(this,"object",Array.from(_)),this.contain(g))}),i("toContainEqual",function(g){const _=e.flag(this,"object"),x=Array.from(_).findIndex(P=>ln(P,g,n));this.assert(x!==-1,"expected #{this} to deep equally contain #{exp}","expected #{this} to not deep equally contain #{exp}",g)}),i("toBeTruthy",function(){const g=e.flag(this,"object");this.assert(!!g,"expected #{this} to be truthy","expected #{this} to not be truthy",!0,g)}),i("toBeFalsy",function(){const g=e.flag(this,"object");this.assert(!g,"expected #{this} to be falsy","expected #{this} to not be falsy",!1,g)}),i("toBeGreaterThan",function(g){const _=this._obj;return va(_,"actual",["number","bigint"]),va(g,"expected",["number","bigint"]),this.assert(_>g,`expected ${_} to be greater than ${g}`,`expected ${_} to be not greater than ${g}`,g,_,!1)}),i("toBeGreaterThanOrEqual",function(g){const _=this._obj;return va(_,"actual",["number","bigint"]),va(g,"expected",["number","bigint"]),this.assert(_>=g,`expected ${_} to be greater than or equal to ${g}`,`expected ${_} to be not greater than or equal to ${g}`,g,_,!1)}),i("toBeLessThan",function(g){const _=this._obj;return va(_,"actual",["number","bigint"]),va(g,"expected",["number","bigint"]),this.assert(_<g,`expected ${_} to be less than ${g}`,`expected ${_} to be not less than ${g}`,g,_,!1)}),i("toBeLessThanOrEqual",function(g){const _=this._obj;return va(_,"actual",["number","bigint"]),va(g,"expected",["number","bigint"]),this.assert(_<=g,`expected ${_} to be less than or equal to ${g}`,`expected ${_} to be not less than or equal to ${g}`,g,_,!1)}),i("toBeNaN",function(){const g=e.flag(this,"object");this.assert(Number.isNaN(g),"expected #{this} to be NaN","expected #{this} not to be NaN",Number.NaN,g)}),i("toBeUndefined",function(){const g=e.flag(this,"object");this.assert(g===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined",void 0,g)}),i("toBeNull",function(){const g=e.flag(this,"object");this.assert(g===null,"expected #{this} to be null","expected #{this} not to be null",null,g)}),i("toBeDefined",function(){const g=e.flag(this,"object");this.assert(typeof g<"u","expected #{this} to be defined","expected #{this} to be undefined",g)}),i("toBeTypeOf",function(g){const _=typeof this._obj,x=g===_;return this.assert(x,"expected #{this} to be type of #{exp}","expected #{this} not to be type of #{exp}",g,_)}),i("toBeInstanceOf",function(g){return this.instanceOf(g)}),i("toHaveLength",function(g){return this.have.length(g)}),i("toHaveProperty",function(...g){Array.isArray(g[0])&&(g[0]=g[0].map($=>String($).replace(/([.[\]])/g,"\\$1")).join("."));const _=this._obj,[x,P]=g,A=m(()=>Object.prototype.hasOwnProperty.call(_,x)?{value:_[x],exists:!0}:e.getPathInfo(_,x),"getValue"),{value:M,exists:N}=A(),z=N&&(g.length===1||ln(P,M,n)),j=g.length===1?"":` with value ${e.objDisplay(P)}`;return this.assert(z,`expected #{this} to have property "${x}"${j}`,`expected #{this} to not have property "${x}"${j}`,P,N?M:void 0)}),i("toBeCloseTo",function(g,_=2){const x=this._obj;let P=!1,A=0,M=0;return g===Number.POSITIVE_INFINITY&&x===Number.POSITIVE_INFINITY||g===Number.NEGATIVE_INFINITY&&x===Number.NEGATIVE_INFINITY?P=!0:(A=10**-_/2,M=Math.abs(x-g),P=M<A),this.assert(P,`expected #{this} to be close to #{exp}, received difference is ${M}, but expected ${A}`,`expected #{this} to not be close to #{exp}, received difference is ${M}, but expected ${A}`,g,x,!1)});function l(g){if(!dh(g._obj))throw new TypeError(`${e.inspect(g._obj)} is not a spy or a call to a spy!`)}m(l,"assertIsMock");function c(g){return l(g),g._obj}m(c,"getSpy"),i(["toHaveBeenCalledTimes","toBeCalledTimes"],function(g){const _=c(this),x=_.getMockName(),P=_.mock.calls.length;return this.assert(P===g,`expected "${x}" to be called #{exp} times, but got ${P} times`,`expected "${x}" to not be called #{exp} times`,g,P,!1)}),i("toHaveBeenCalledOnce",function(){const g=c(this),_=g.getMockName(),x=g.mock.calls.length;return this.assert(x===1,`expected "${_}" to be called once, but got ${x} times`,`expected "${_}" to not be called once`,1,x,!1)}),i(["toHaveBeenCalled","toBeCalled"],function(){const g=c(this),_=g.getMockName(),x=g.mock.calls.length,P=x>0,A=e.flag(this,"negate");let M=e.getMessage(this,[P,`expected "${_}" to be called at least once`,`expected "${_}" to not be called at all, but actually been called ${x} times`,!0,P]);if(P&&A&&(M=rb(g,M)),P&&A||!P&&!A)throw new r(M)});function s(g,_){return g.length===_.length&&g.every((x,P)=>ln(x,_[P],[...n,ts]))}m(s,"equalsArgumentArray"),i(["toHaveBeenCalledWith","toBeCalledWith"],function(...g){const _=c(this),x=_.getMockName(),P=_.mock.calls.some(N=>s(N,g)),A=e.flag(this,"negate"),M=e.getMessage(this,[P,`expected "${x}" to be called with arguments: #{exp}`,`expected "${x}" to not be called with arguments: #{exp}`,g]);if(P&&A||!P&&!A)throw new r(rb(_,M,g))}),i("toHaveBeenCalledExactlyOnceWith",function(...g){const _=c(this),x=_.getMockName(),P=_.mock.calls.length,M=_.mock.calls.some(j=>s(j,g))&&P===1,N=e.flag(this,"negate"),z=e.getMessage(this,[M,`expected "${x}" to be called once with arguments: #{exp}`,`expected "${x}" to not be called once with arguments: #{exp}`,g]);if(M&&N||!M&&!N)throw new r(rb(_,z,g))}),i(["toHaveBeenNthCalledWith","nthCalledWith"],function(g,..._){const x=c(this),P=x.getMockName(),A=x.mock.calls[g-1],M=x.mock.calls.length,N=g<=M;this.assert(A&&s(A,_),`expected ${Ip(g)} "${P}" call to have been called with #{exp}${N?"":`, but called only ${M} times`}`,`expected ${Ip(g)} "${P}" call to not have been called with #{exp}`,_,A,N)}),i(["toHaveBeenLastCalledWith","lastCalledWith"],function(...g){const _=c(this),x=_.getMockName(),P=_.mock.calls[_.mock.calls.length-1];this.assert(P&&s(P,g),`expected last "${x}" call to have been called with #{exp}`,`expected last "${x}" call to not have been called with #{exp}`,g,P)});function p(g,_,x){const P=g.mock.invocationCallOrder,A=_.mock.invocationCallOrder;return P.length===0?!x:A.length===0?!1:P[0]<A[0]}m(p,"isSpyCalledBeforeAnotherSpy"),i(["toHaveBeenCalledBefore"],function(g,_=!0){const x=c(this);if(!dh(g))throw new TypeError(`${e.inspect(g)} is not a spy or a call to a spy`);this.assert(p(x,g,_),`expected "${x.getMockName()}" to have been called before "${g.getMockName()}"`,`expected "${x.getMockName()}" to not have been called before "${g.getMockName()}"`,g,x)}),i(["toHaveBeenCalledAfter"],function(g,_=!0){const x=c(this);if(!dh(g))throw new TypeError(`${e.inspect(g)} is not a spy or a call to a spy`);this.assert(p(g,x,_),`expected "${x.getMockName()}" to have been called after "${g.getMockName()}"`,`expected "${x.getMockName()}" to not have been called after "${g.getMockName()}"`,g,x)}),i(["toThrow","toThrowError"],function(g){if(typeof g=="string"||typeof g>"u"||g instanceof RegExp)return this.throws(g===""?/^$/:g);const _=this._obj,x=e.flag(this,"promise"),P=e.flag(this,"negate");let A=null;if(x==="rejects")A=_;else if(x==="resolves"&&typeof _!="function"){if(P)return;{const M=e.flag(this,"message")||"expected promise to throw an error, but it didn't",N={showDiff:!1};throw new r(M,N,e.flag(this,"ssfi"))}}else{let M=!1;try{_()}catch(N){M=!0,A=N}if(!M&&!P){const N=e.flag(this,"message")||"expected function to throw an error, but it didn't",z={showDiff:!1};throw new r(N,z,e.flag(this,"ssfi"))}}if(typeof g=="function"){const M=g.name||g.prototype.constructor.name;return this.assert(A&&A instanceof g,`expected error to be instance of ${M}`,`expected error not to be instance of ${M}`,g,A)}if(g instanceof Error){const M=ln(A,g,[...n,ts]);return this.assert(M,"expected a thrown error to be #{exp}","expected a thrown error not to be #{exp}",g,A)}if(typeof g=="object"&&"asymmetricMatch"in g&&typeof g.asymmetricMatch=="function"){const M=g;return this.assert(A&&M.asymmetricMatch(A),"expected error to match asymmetric matcher","expected error not to match asymmetric matcher",M,A)}throw new Error(`"toThrow" expects string, RegExp, function, Error instance or asymmetric matcher, got "${typeof g}"`)}),[{name:"toHaveResolved",condition:m(g=>g.mock.settledResults.length>0&&g.mock.settledResults.some(({type:_})=>_==="fulfilled"),"condition"),action:"resolved"},{name:["toHaveReturned","toReturn"],condition:m(g=>g.mock.calls.length>0&&g.mock.results.some(({type:_})=>_!=="throw"),"condition"),action:"called"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(){const P=c(this),A=P.getMockName(),M=_(P);this.assert(M,`expected "${A}" to be successfully ${x} at least once`,`expected "${A}" to not be successfully ${x}`,M,!M,!1)})}),[{name:"toHaveResolvedTimes",condition:m((g,_)=>g.mock.settledResults.reduce((x,{type:P})=>P==="fulfilled"?++x:x,0)===_,"condition"),action:"resolved"},{name:["toHaveReturnedTimes","toReturnTimes"],condition:m((g,_)=>g.mock.results.reduce((x,{type:P})=>P==="throw"?x:++x,0)===_,"condition"),action:"called"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(P){const A=c(this),M=A.getMockName(),N=_(A,P);this.assert(N,`expected "${M}" to be successfully ${x} ${P} times`,`expected "${M}" to not be successfully ${x} ${P} times`,`expected resolved times: ${P}`,`received resolved times: ${N}`,!1)})}),[{name:"toHaveResolvedWith",condition:m((g,_)=>g.mock.settledResults.some(({type:x,value:P})=>x==="fulfilled"&&ln(_,P)),"condition"),action:"resolve"},{name:["toHaveReturnedWith","toReturnWith"],condition:m((g,_)=>g.mock.results.some(({type:x,value:P})=>x==="return"&&ln(_,P)),"condition"),action:"return"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(P){const A=c(this),M=_(A,P),N=e.flag(this,"negate");if(M&&N||!M&&!N){const z=A.getMockName(),j=e.getMessage(this,[M,`expected "${z}" to ${x} with: #{exp} at least once`,`expected "${z}" to not ${x} with: #{exp}`,P]),$=x==="return"?A.mock.results:A.mock.settledResults;throw new r(KB(A,$,j,P))}})}),[{name:"toHaveLastResolvedWith",condition:m((g,_)=>{const x=g.mock.settledResults[g.mock.settledResults.length-1];return x&&x.type==="fulfilled"&&ln(x.value,_)},"condition"),action:"resolve"},{name:["toHaveLastReturnedWith","lastReturnedWith"],condition:m((g,_)=>{const x=g.mock.results[g.mock.results.length-1];return x&&x.type==="return"&&ln(x.value,_)},"condition"),action:"return"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(P){const A=c(this),M=x==="return"?A.mock.results:A.mock.settledResults,N=M[M.length-1],z=A.getMockName();this.assert(_(A,P),`expected last "${z}" call to ${x} #{exp}`,`expected last "${z}" call to not ${x} #{exp}`,P,N?.value)})}),[{name:"toHaveNthResolvedWith",condition:m((g,_,x)=>{const P=g.mock.settledResults[_-1];return P&&P.type==="fulfilled"&&ln(P.value,x)},"condition"),action:"resolve"},{name:["toHaveNthReturnedWith","nthReturnedWith"],condition:m((g,_,x)=>{const P=g.mock.results[_-1];return P&&P.type==="return"&&ln(P.value,x)},"condition"),action:"return"}].forEach(({name:g,condition:_,action:x})=>{i(g,function(P,A){const M=c(this),N=M.getMockName(),j=(x==="return"?M.mock.results:M.mock.settledResults)[P-1],$=`${Ip(P)} call`;this.assert(_(M,P,A),`expected ${$} "${N}" call to ${x} #{exp}`,`expected ${$} "${N}" call to not ${x} #{exp}`,A,j?.value)})}),i("withContext",function(g){for(const _ in g)e.flag(this,_,g[_]);return this}),e.addProperty(t.Assertion.prototype,"resolves",m(function(){const _=new Error("resolves");e.flag(this,"promise","resolves"),e.flag(this,"error",_);const x=e.flag(this,"vitest-test"),P=e.flag(this,"object");if(e.flag(this,"poll"))throw new SyntaxError("expect.poll() is not supported in combination with .resolves");if(typeof P?.then!="function")throw new TypeError(`You must provide a Promise to expect() when using .resolves, not '${typeof P}'.`);const A=new Proxy(this,{get:m((M,N,z)=>{const j=Reflect.get(M,N,z);return typeof j!="function"?j instanceof t.Assertion?A:j:(...$)=>{e.flag(this,"_name",N);const J=P.then(X=>(e.flag(this,"object",X),j.call(this,...$)),X=>{const re=new r(`promise rejected "${e.inspect(X)}" instead of resolving`,{showDiff:!1});throw re.cause=X,re.stack=_.stack.replace(_.message,re.message),re});return jS(x,J,zS(e,this,!!$.length),_)}},"get")});return A},"__VITEST_RESOLVES__")),e.addProperty(t.Assertion.prototype,"rejects",m(function(){const _=new Error("rejects");e.flag(this,"promise","rejects"),e.flag(this,"error",_);const x=e.flag(this,"vitest-test"),P=e.flag(this,"object"),A=typeof P=="function"?P():P;if(e.flag(this,"poll"))throw new SyntaxError("expect.poll() is not supported in combination with .rejects");if(typeof A?.then!="function")throw new TypeError(`You must provide a Promise to expect() when using .rejects, not '${typeof A}'.`);const M=new Proxy(this,{get:m((N,z,j)=>{const $=Reflect.get(N,z,j);return typeof $!="function"?$ instanceof t.Assertion?M:$:(...J)=>{e.flag(this,"_name",z);const X=A.then(re=>{const ne=new r(`promise resolved "${e.inspect(re)}" instead of rejecting`,{showDiff:!0,expected:new Error("rejected promise"),actual:re});throw ne.stack=_.stack.replace(_.message,ne.message),ne},re=>(e.flag(this,"object",re),$.call(this,...J)));return jS(x,X,zS(e,this,!!J.length),_)}},"get")});return M},"__VITEST_REJECTS__"))},"JestChaiExpect");function Ip(t){const e=t%10,r=t%100;return e===1&&r!==11?`${t}st`:e===2&&r!==12?`${t}nd`:e===3&&r!==13?`${t}rd`:`${t}th`}m(Ip,"ordinalOf");function rb(t,e,r){return t.mock.calls.length&&(e+=ii.gray(`

Received: 

${t.mock.calls.map((n,i)=>{let l=ii.bold(`  ${Ip(i+1)} ${t.getMockName()} call:

`);return r?l+=Gh(r,n,{omitAnnotationLines:!0}):l+=Mo(n).split(`
`).map(c=>`    ${c}`).join(`
`),l+=`
`,l}).join(`
`)}`)),e+=ii.gray(`

Number of calls: ${ii.bold(t.mock.calls.length)}
`),e}m(rb,"formatCalls");function KB(t,e,r,n){return e.length&&(r+=ii.gray(`

Received: 

${e.map((i,l)=>{let c=ii.bold(`  ${Ip(l+1)} ${t.getMockName()} call return:

`);return n?c+=Gh(n,i.value,{omitAnnotationLines:!0}):c+=Mo(i).split(`
`).map(s=>`    ${s}`).join(`
`),c+=`
`,c}).join(`
`)}`)),r+=ii.gray(`

Number of calls: ${ii.bold(t.mock.calls.length)}
`),r}m(KB,"formatReturns");function YB(t,e){const r=t._obj,n=Ta.flag(t,"negate"),i=Ta.flag(t,"promise")||"",l={...oR(),diff:Gh,stringify:Mo,iterableEquality:ts,subsetEquality:Af};return{state:{...ey(e),customTesters:V1(),isNot:n,utils:l,promise:i,equals:ln,suppressedErrors:[],soft:Ta.flag(t,"soft"),poll:Ta.flag(t,"poll")},isNot:n,obj:r}}m(YB,"getMatcherState");var XB=class extends Error{constructor(e,r,n){super(e),this.actual=r,this.expected=n}};m(XB,"JestExtendError");var zO=XB;function QB(t,e,r){return(n,i)=>{Object.entries(r).forEach(([l,c])=>{function s(...P){const{state:A,isNot:M,obj:N}=YB(this,e),z=c.call(A,N,...P);if(z&&typeof z=="object"&&typeof z.then=="function")return z.then(({pass:ne,message:Z,actual:U,expected:K})=>{if(ne&&M||!ne&&!M)throw new zO(Z(),U,K)});const{pass:j,message:$,actual:J,expected:X}=z;if(j&&M||!j&&!M)throw new zO($(),J,X)}m(s,"expectWrapper");const p=aR(i,l,s);i.addMethod(globalThis[Qg].matchers,l,p),i.addMethod(t.Assertion.prototype,l,p);const g=class extends Fl{constructor(A=!1,...M){super(M,A)}asymmetricMatch(A){const{pass:M}=c.call(this.getMatcherContext(e),A,...this.sample);return this.inverse?!M:M}toString(){return`${this.inverse?"not.":""}${l}`}getExpectedType(){return"any"}toAsymmetricMatcher(){return`${this.toString()}<${this.sample.map(A=>Mo(A)).join(", ")}>`}};m(g,"CustomMatcher");let _=g;const x=m((...P)=>new _(!1,...P),"customMatcher");Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:x,writable:!0}),Object.defineProperty(e.not,l,{configurable:!0,enumerable:!0,value:m((...P)=>new _(!0,...P),"value"),writable:!0}),Object.defineProperty(globalThis[MS],l,{configurable:!0,enumerable:!0,value:x,writable:!0})})}}m(QB,"JestExtendPlugin");var eoe=m((t,e)=>{e.addMethod(t.expect,"extend",(r,n)=>{uh(QB(t,r,n))})},"JestExtend");function eq(){uh(eoe),uh(Qie),uh(Xie);const t=m((n,i)=>{const{assertionCalls:l}=ey(t);return tb({assertionCalls:l+1,soft:!1},t),jc(n,i)},"expect");Object.assign(t,jc),t.getState=()=>ey(t),t.setState=n=>tb(n,t),t.extend=n=>jc.extend(t,n),t.soft=(...n)=>{const i=t(...n);return t.setState({soft:!0}),i},t.extend(Uie),t.unreachable=n=>{Ce.fail(`expected${n?` "${n}" `:" "}not to be reached`)};function e(n){const i=m(()=>new Error(`expected number of assertions to be ${n}, but got ${t.getState().assertionCalls}`),"errorGen");"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(i(),e),t.setState({expectedAssertionsNumber:n,expectedAssertionsNumberErrorGen:i})}m(e,"assertions");function r(){const n=new Error("expected any number of assertion, but got none");"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(n,r),t.setState({isExpectingAssertions:!0,isExpectingAssertionsError:n})}return m(r,"hasAssertions"),tb({assertionCalls:0,isExpectingAssertions:!1,isExpectingAssertionsError:null,expectedAssertionsNumber:null,expectedAssertionsNumberErrorGen:null},t),Ta.addMethod(t,"assertions",e),Ta.addMethod(t,"hasAssertions",r),t.extend(Nz),t}m(eq,"createExpect");var tq=eq();Object.defineProperty(globalThis,rR,{value:tq,writable:!0,configurable:!0});function rq(t,e,r){Object.defineProperty(t,e,r)}m(rq,"f");var nb=Symbol.for("tinyspy:spy"),toe=m(t=>{t.called=!1,t.callCount=0,t.calls=[],t.results=[],t.resolves=[],t.next=[]},"P"),roe=m(t=>(rq(t,nb,{value:{reset:m(()=>toe(t[nb]),"reset")}}),t[nb]),"K"),noe=m(t=>t[nb]||roe(t),"T"),qS=new Set;function lR(t){return qS.add(t),()=>void qS.delete(t)}m(lR,"onMockCall");var ioe=m((...t)=>{const e=vB(...t);return uR(e)},"spyOn");function cR(t){const e=t?IS(t):IS();return uR(e)}m(cR,"fn");function uR(t){const e=$S(t),r=e.mockImplementation.bind(null);return e.mockImplementation=n=>$S(r(n)),e}m(uR,"reactiveMock");function $S(t){const e=noe(t),r=e.impl;return e.willCall(function(...n){return qS.forEach(i=>i(t,n)),r?.apply(this,n)}),t}m($S,"listenWhenCalled");function hR(){Ky.forEach(t=>t.mockClear())}m(hR,"clearAllMocks");function dR(){Ky.forEach(t=>t.mockReset())}m(dR,"resetAllMocks");function pR(){Ky.forEach(t=>t.mockRestore())}m(pR,"restoreAllMocks");function nq(t,e={}){return t}m(nq,"mocked");var iq={};ko(iq,{buildQueries:()=>ja,configure:()=>r8,createEvent:()=>Rg,findAllByAltText:()=>K8,findAllByDisplayValue:()=>U8,findAllByLabelText:()=>E8,findAllByPlaceholderText:()=>O8,findAllByRole:()=>u$,findAllByTestId:()=>g$,findAllByText:()=>z8,findAllByTitle:()=>r$,findByAltText:()=>Y8,findByDisplayValue:()=>G8,findByLabelText:()=>T8,findByPlaceholderText:()=>k8,findByRole:()=>h$,findByTestId:()=>y$,findByText:()=>j8,findByTitle:()=>n$,fireEvent:()=>Qp,getAllByAltText:()=>W8,getAllByDisplayValue:()=>$8,getAllByLabelText:()=>S8,getAllByPlaceholderText:()=>I8,getAllByRole:()=>l$,getAllByTestId:()=>f$,getAllByText:()=>N8,getAllByTitle:()=>e$,getByAltText:()=>Z8,getByDisplayValue:()=>V8,getByLabelText:()=>C8,getByPlaceholderText:()=>M8,getByRole:()=>c$,getByTestId:()=>m$,getByText:()=>F8,getByTitle:()=>t$,getConfig:()=>nn,getDefaultNormalizer:()=>W1,getElementError:()=>Qy,getMultipleElementsFoundError:()=>e_,getNodeText:()=>Rf,getQueriesForElement:()=>Yb,getRoles:()=>kR,getSuggestedQuery:()=>ry,isInaccessible:()=>Xy,logDOM:()=>ZS,logRoles:()=>Poe,makeFindQuery:()=>Ph,makeGetAllQuery:()=>Y1,makeSingleQuery:()=>Ch,prettyDOM:()=>Xp,prettyFormat:()=>fR,queries:()=>Kb,queryAllByAltText:()=>H8,queryAllByAttribute:()=>iu,queryAllByDisplayValue:()=>B8,queryAllByLabelText:()=>P8,queryAllByPlaceholderText:()=>A8,queryAllByRole:()=>s$,queryAllByTestId:()=>d$,queryAllByText:()=>L8,queryAllByTitle:()=>X8,queryByAltText:()=>J8,queryByAttribute:()=>DR,queryByDisplayValue:()=>q8,queryByLabelText:()=>x8,queryByPlaceholderText:()=>R8,queryByRole:()=>a$,queryByTestId:()=>p$,queryByText:()=>D8,queryByTitle:()=>Q8,queryHelpers:()=>Aoe,screen:()=>Woe,waitFor:()=>K1,waitForElementToBeRemoved:()=>b$,within:()=>Yb,wrapAllByQueryWithSuggestion:()=>Oo,wrapSingleQueryWithSuggestion:()=>qc});var fR=Ti(WX()),ooe=Object.prototype.toString;function VS(t){return typeof t=="function"||ooe.call(t)==="[object Function]"}m(VS,"isCallable");function oq(t){var e=Number(t);return isNaN(e)?0:e===0||!isFinite(e)?e:(e>0?1:-1)*Math.floor(Math.abs(e))}m(oq,"toInteger");var soe=Math.pow(2,53)-1;function sq(t){var e=oq(t);return Math.min(Math.max(e,0),soe)}m(sq,"toLength");function Es(t,e){var r=Array,n=Object(t);if(t==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");if(typeof e<"u"&&!VS(e))throw new TypeError("Array.from: when provided, the second argument must be a function");for(var i=sq(n.length),l=VS(r)?Object(new r(i)):new Array(i),c=0,s;c<i;)s=n[c],e?l[c]=e(s,c):l[c]=s,c+=1;return l.length=i,l}m(Es,"arrayFrom");function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}m(Kp,"_typeof");function aq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}m(aq,"_classCallCheck");function US(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mR(n.key),n)}}m(US,"_defineProperties");function lq(t,e,r){return e&&US(t.prototype,e),r&&US(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}m(lq,"_createClass");function cq(t,e,r){return e=mR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(cq,"_defineProperty");function mR(t){var e=uq(t,"string");return Kp(e)==="symbol"?e:String(e)}m(mR,"_toPropertyKey");function uq(t,e){if(Kp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Kp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}m(uq,"_toPrimitive");var aoe=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];aq(this,t),cq(this,"items",void 0),this.items=e}return m(t,"SetLike"),lq(t,[{key:"add",value:m(function(r){return this.has(r)===!1&&this.items.push(r),this},"add")},{key:"clear",value:m(function(){this.items=[]},"clear")},{key:"delete",value:m(function(r){var n=this.items.length;return this.items=this.items.filter(function(i){return i!==r}),n!==this.items.length},"_delete")},{key:"forEach",value:m(function(r){var n=this;this.items.forEach(function(i){r(i,i,n)})},"forEach")},{key:"has",value:m(function(r){return this.items.indexOf(r)!==-1},"has")},{key:"size",get:m(function(){return this.items.length},"get")}]),t}(),loe=typeof Set>"u"?Set:aoe;function Qi(t){var e;return(e=t.localName)!==null&&e!==void 0?e:t.tagName.toLowerCase()}m(Qi,"getLocalName");var coe={article:"article",aside:"complementary",button:"button",datalist:"listbox",dd:"definition",details:"group",dialog:"dialog",dt:"term",fieldset:"group",figure:"figure",form:"form",footer:"contentinfo",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",header:"banner",hr:"separator",html:"document",legend:"legend",li:"listitem",math:"math",main:"main",menu:"list",nav:"navigation",ol:"list",optgroup:"group",option:"option",output:"status",progress:"progressbar",section:"region",summary:"button",table:"table",tbody:"rowgroup",textarea:"textbox",tfoot:"rowgroup",td:"cell",th:"columnheader",thead:"rowgroup",tr:"row",ul:"list"},uoe={caption:new Set(["aria-label","aria-labelledby"]),code:new Set(["aria-label","aria-labelledby"]),deletion:new Set(["aria-label","aria-labelledby"]),emphasis:new Set(["aria-label","aria-labelledby"]),generic:new Set(["aria-label","aria-labelledby","aria-roledescription"]),insertion:new Set(["aria-label","aria-labelledby"]),paragraph:new Set(["aria-label","aria-labelledby"]),presentation:new Set(["aria-label","aria-labelledby"]),strong:new Set(["aria-label","aria-labelledby"]),subscript:new Set(["aria-label","aria-labelledby"]),superscript:new Set(["aria-label","aria-labelledby"])};function hq(t,e){return["aria-atomic","aria-busy","aria-controls","aria-current","aria-describedby","aria-details","aria-dropeffect","aria-flowto","aria-grabbed","aria-hidden","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription"].some(function(r){var n;return t.hasAttribute(r)&&!((n=uoe[e])!==null&&n!==void 0&&n.has(r))})}m(hq,"hasGlobalAriaAttributes");function gR(t,e){return hq(t,e)}m(gR,"ignorePresentationalRole");function dq(t){var e=fq(t);if(e===null||e==="presentation"){var r=pq(t);if(e!=="presentation"||gR(t,r||""))return r}return e}m(dq,"getRole");function pq(t){var e=coe[Qi(t)];if(e!==void 0)return e;switch(Qi(t)){case"a":case"area":case"link":if(t.hasAttribute("href"))return"link";break;case"img":return t.getAttribute("alt")===""&&!gR(t,"img")?"presentation":"img";case"input":{var r=t,n=r.type;switch(n){case"button":case"image":case"reset":case"submit":return"button";case"checkbox":case"radio":return n;case"range":return"slider";case"email":case"tel":case"text":case"url":return t.hasAttribute("list")?"combobox":"textbox";case"search":return t.hasAttribute("list")?"combobox":"searchbox";case"number":return"spinbutton";default:return null}}case"select":return t.hasAttribute("multiple")||t.size>1?"listbox":"combobox"}return null}m(pq,"getImplicitRole");function fq(t){var e=t.getAttribute("role");if(e!==null){var r=e.trim().split(" ")[0];if(r.length>0)return r}return null}m(fq,"getExplicitRole");function jn(t){return t!==null&&t.nodeType===t.ELEMENT_NODE}m(jn,"isElement");function yR(t){return jn(t)&&Qi(t)==="caption"}m(yR,"isHTMLTableCaptionElement");function Ag(t){return jn(t)&&Qi(t)==="input"}m(Ag,"isHTMLInputElement");function mq(t){return jn(t)&&Qi(t)==="optgroup"}m(mq,"isHTMLOptGroupElement");function gq(t){return jn(t)&&Qi(t)==="select"}m(gq,"isHTMLSelectElement");function yq(t){return jn(t)&&Qi(t)==="table"}m(yq,"isHTMLTableElement");function _q(t){return jn(t)&&Qi(t)==="textarea"}m(_q,"isHTMLTextAreaElement");function bq(t){var e=t.ownerDocument===null?t:t.ownerDocument,r=e.defaultView;if(r===null)throw new TypeError("no window available");return r}m(bq,"safeWindow");function vq(t){return jn(t)&&Qi(t)==="fieldset"}m(vq,"isHTMLFieldSetElement");function xq(t){return jn(t)&&Qi(t)==="legend"}m(xq,"isHTMLLegendElement");function wq(t){return jn(t)&&Qi(t)==="slot"}m(wq,"isHTMLSlotElement");function Eq(t){return jn(t)&&t.ownerSVGElement!==void 0}m(Eq,"isSVGElement");function Tq(t){return jn(t)&&Qi(t)==="svg"}m(Tq,"isSVGSVGElement");function Sq(t){return Eq(t)&&Qi(t)==="title"}m(Sq,"isSVGTitleElement");function ty(t,e){if(jn(t)&&t.hasAttribute(e)){var r=t.getAttribute(e).split(" "),n=t.getRootNode?t.getRootNode():t.ownerDocument;return r.map(function(i){return n.getElementById(i)}).filter(function(i){return i!==null})}return[]}m(ty,"queryIdRefs");function Ca(t,e){return jn(t)?e.indexOf(dq(t))!==-1:!1}m(Ca,"hasAnyConcreteRoles");function Cq(t){return t.trim().replace(/\s\s+/g," ")}m(Cq,"asFlatString");function Pq(t,e){if(!jn(t))return!1;if(t.hasAttribute("hidden")||t.getAttribute("aria-hidden")==="true")return!0;var r=e(t);return r.getPropertyValue("display")==="none"||r.getPropertyValue("visibility")==="hidden"}m(Pq,"isHidden");function Aq(t){return Ca(t,["button","combobox","listbox","textbox"])||_R(t,"range")}m(Aq,"isControl");function _R(t,e){if(!jn(t))return!1;switch(e){case"range":return Ca(t,["meter","progressbar","scrollbar","slider","spinbutton"]);default:throw new TypeError("No knowledge about abstract role '".concat(e,"'. This is likely a bug :("))}}m(_R,"hasAbstractRole");function GS(t,e){var r=Es(t.querySelectorAll(e));return ty(t,"aria-owns").forEach(function(n){r.push.apply(r,Es(n.querySelectorAll(e)))}),r}m(GS,"querySelectorAllSubtree");function Rq(t){return gq(t)?t.selectedOptions||GS(t,"[selected]"):GS(t,'[aria-selected="true"]')}m(Rq,"querySelectedOptions");function Iq(t){return Ca(t,["none","presentation"])}m(Iq,"isMarkedPresentational");function Mq(t){return yR(t)}m(Mq,"isNativeHostLanguageTextAlternativeElement");function Oq(t){return Ca(t,["button","cell","checkbox","columnheader","gridcell","heading","label","legend","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","row","rowheader","switch","tab","tooltip","treeitem"])}m(Oq,"allowsNameFromContent");function kq(t){return!1}m(kq,"isDescendantOfNativeHostLanguageTextAlternativeElement");function Lq(t){return Ag(t)||_q(t)?t.value:t.textContent||""}m(Lq,"getValueOfTextbox");function HS(t){var e=t.getPropertyValue("content");return/^["'].*["']$/.test(e)?e.slice(1,-1):""}m(HS,"getTextualContent");function bR(t){var e=Qi(t);return e==="button"||e==="input"&&t.getAttribute("type")!=="hidden"||e==="meter"||e==="output"||e==="progress"||e==="select"||e==="textarea"}m(bR,"isLabelableElement");function vR(t){if(bR(t))return t;var e=null;return t.childNodes.forEach(function(r){if(e===null&&jn(r)){var n=vR(r);n!==null&&(e=n)}}),e}m(vR,"findLabelableElement");function Dq(t){if(t.control!==void 0)return t.control;var e=t.getAttribute("for");return e!==null?t.ownerDocument.getElementById(e):vR(t)}m(Dq,"getControlOfLabel");function Nq(t){var e=t.labels;if(e===null)return e;if(e!==void 0)return Es(e);if(!bR(t))return null;var r=t.ownerDocument;return Es(r.querySelectorAll("label")).filter(function(n){return Dq(n)===t})}m(Nq,"getLabels");function Fq(t){var e=t.assignedNodes();return e.length===0?Es(t.childNodes):e}m(Fq,"getSlotContents");function xR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new loe,n=bq(t),i=e.compute,l=i===void 0?"name":i,c=e.computedStyleSupportsPseudoElements,s=c===void 0?e.getComputedStyle!==void 0:c,p=e.getComputedStyle,g=p===void 0?n.getComputedStyle.bind(n):p,_=e.hidden,x=_===void 0?!1:_;function P(j,$){var J="";if(jn(j)&&s){var X=g(j,"::before"),re=HS(X);J="".concat(re," ").concat(J)}var ne=wq(j)?Fq(j):Es(j.childNodes).concat(ty(j,"aria-owns"));if(ne.forEach(function(K){var he=z(K,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!1,recursion:!0}),ue=jn(K)?g(K).getPropertyValue("display"):"inline",Ee=ue!=="inline"?" ":"";J+="".concat(Ee).concat(he).concat(Ee)}),jn(j)&&s){var Z=g(j,"::after"),U=HS(Z);J="".concat(J," ").concat(U)}return J.trim()}m(P,"computeMiscTextAlternative");function A(j,$){var J=j.getAttributeNode($);return J!==null&&!r.has(J)&&J.value.trim()!==""?(r.add(J),J.value):null}m(A,"useAttribute");function M(j){return jn(j)?A(j,"title"):null}m(M,"computeTooltipAttributeValue");function N(j){if(!jn(j))return null;if(vq(j)){r.add(j);for(var $=Es(j.childNodes),J=0;J<$.length;J+=1){var X=$[J];if(xq(X))return z(X,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(yq(j)){r.add(j);for(var re=Es(j.childNodes),ne=0;ne<re.length;ne+=1){var Z=re[ne];if(yR(Z))return z(Z,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(Tq(j)){r.add(j);for(var U=Es(j.childNodes),K=0;K<U.length;K+=1){var he=U[K];if(Sq(he))return he.textContent}return null}else if(Qi(j)==="img"||Qi(j)==="area"){var ue=A(j,"alt");if(ue!==null)return ue}else if(mq(j)){var Ee=A(j,"label");if(Ee!==null)return Ee}if(Ag(j)&&(j.type==="button"||j.type==="submit"||j.type==="reset")){var Ie=A(j,"value");if(Ie!==null)return Ie;if(j.type==="submit")return"Submit";if(j.type==="reset")return"Reset"}var ee=Nq(j);if(ee!==null&&ee.length!==0)return r.add(j),Es(ee).map(function(tt){return z(tt,{isEmbeddedInLabel:!0,isReferenced:!1,recursion:!0})}).filter(function(tt){return tt.length>0}).join(" ");if(Ag(j)&&j.type==="image"){var pe=A(j,"alt");if(pe!==null)return pe;var ve=A(j,"title");return ve!==null?ve:"Submit Query"}if(Ca(j,["button"])){var xe=P(j,{isEmbeddedInLabel:!1});if(xe!=="")return xe}return null}m(N,"computeElementTextAlternative");function z(j,$){if(r.has(j))return"";if(!x&&Pq(j,g)&&!$.isReferenced)return r.add(j),"";var J=jn(j)?j.getAttributeNode("aria-labelledby"):null,X=J!==null&&!r.has(J)?ty(j,"aria-labelledby"):[];if(l==="name"&&!$.isReferenced&&X.length>0)return r.add(J),X.map(function(ue){return z(ue,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!0,recursion:!1})}).join(" ");var re=$.recursion&&Aq(j)&&l==="name";if(!re){var ne=(jn(j)&&j.getAttribute("aria-label")||"").trim();if(ne!==""&&l==="name")return r.add(j),ne;if(!Iq(j)){var Z=N(j);if(Z!==null)return r.add(j),Z}}if(Ca(j,["menu"]))return r.add(j),"";if(re||$.isEmbeddedInLabel||$.isReferenced){if(Ca(j,["combobox","listbox"])){r.add(j);var U=Rq(j);return U.length===0?Ag(j)?j.value:"":Es(U).map(function(ue){return z(ue,{isEmbeddedInLabel:$.isEmbeddedInLabel,isReferenced:!1,recursion:!0})}).join(" ")}if(_R(j,"range"))return r.add(j),j.hasAttribute("aria-valuetext")?j.getAttribute("aria-valuetext"):j.hasAttribute("aria-valuenow")?j.getAttribute("aria-valuenow"):j.getAttribute("value")||"";if(Ca(j,["textbox"]))return r.add(j),Lq(j)}if(Oq(j)||jn(j)&&$.isReferenced||Mq(j)||kq()){var K=P(j,{isEmbeddedInLabel:$.isEmbeddedInLabel});if(K!=="")return r.add(j),K}if(j.nodeType===j.TEXT_NODE)return r.add(j),j.textContent||"";if($.recursion)return r.add(j),P(j,{isEmbeddedInLabel:$.isEmbeddedInLabel});var he=M(j);return he!==null?(r.add(j),he):(r.add(j),"")}return m(z,"computeTextAlternative"),Cq(z(t,{isEmbeddedInLabel:!1,isReferenced:l==="description",recursion:!1}))}m(xR,"computeTextAlternative");function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(t)}m(Yp,"_typeof");function JS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}m(JS,"ownKeys");function WS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JS(Object(r),!0).forEach(function(n){zq(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}m(WS,"_objectSpread");function zq(t,e,r){return e=jq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(zq,"_defineProperty");function jq(t){var e=Bq(t,"string");return Yp(e)==="symbol"?e:String(e)}m(jq,"_toPropertyKey");function Bq(t,e){if(Yp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Yp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}m(Bq,"_toPrimitive");function wR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=ty(t,"aria-describedby").map(function(i){return xR(i,WS(WS({},e),{},{compute:"description"}))}).join(" ");if(r===""){var n=t.getAttribute("title");r=n===null?"":n}return r}m(wR,"computeAccessibleDescription");function qq(t){return Ca(t,["caption","code","deletion","emphasis","generic","insertion","paragraph","presentation","strong","subscript","superscript"])}m(qq,"prohibitsNaming");function H1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qq(t)?"":xR(t,e)}m(H1,"computeAccessibleName");var xs=Ti(xC()),hoe=Ti(ZX());function ER(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}m(ER,"escapeHTML");var doe=m((t,e,r,n,i,l,c)=>{const s=n+r.indent,p=r.colors;return t.map(g=>{const _=e[g];let x=c(_,r,s,i,l);return typeof _!="string"&&(x.indexOf(`
`)!==-1&&(x=r.spacingOuter+s+x+r.spacingOuter+n),x="{"+x+"}"),r.spacingInner+n+p.prop.open+g+p.prop.close+"="+p.value.open+x+p.value.close}).join("")},"printProps"),poe=3,foe=m((t,e,r,n,i,l)=>t.map(c=>{const s=typeof c=="string"?$q(c,e):l(c,e,r,n,i);return s===""&&typeof c=="object"&&c!==null&&c.nodeType!==poe?"":e.spacingOuter+r+s}).join(""),"printChildren"),$q=m((t,e)=>{const r=e.colors.content;return r.open+ER(t)+r.close},"printText"),moe=m((t,e)=>{const r=e.colors.comment;return r.open+"<!--"+ER(t)+"-->"+r.close},"printComment"),goe=m((t,e,r,n,i)=>{const l=n.colors.tag;return l.open+"<"+t+(e&&l.close+e+n.spacingOuter+i+l.open)+(r?">"+l.close+r+n.spacingOuter+i+l.open+"</"+t:(e&&!n.min?"":" ")+"/")+">"+l.close},"printElement"),yoe=m((t,e)=>{const r=e.colors.tag;return r.open+"<"+t+r.close+" "+r.open+" />"+r.close},"printElementAsLeaf"),_oe=1,Vq=3,Uq=8,Gq=11,boe=/^((HTML|SVG)\w*)?Element$/,Hq=m(t=>{const{tagName:e}=t;return!!(typeof e=="string"&&e.includes("-")||typeof t.hasAttribute=="function"&&t.hasAttribute("is"))},"isCustomElement"),voe=m(t=>{const e=t.constructor.name,{nodeType:r}=t;return r===_oe&&(boe.test(e)||Hq(t))||r===Vq&&e==="Text"||r===Uq&&e==="Comment"||r===Gq&&e==="DocumentFragment"},"testNode");function Jq(t){return t.nodeType===Vq}m(Jq,"nodeIsText");function Wq(t){return t.nodeType===Uq}m(Wq,"nodeIsComment");function ib(t){return t.nodeType===Gq}m(ib,"nodeIsFragment");function Zq(t){return{test:m(e=>{var r;return((e==null||(r=e.constructor)==null?void 0:r.name)||Hq(e))&&voe(e)},"test"),serialize:m((e,r,n,i,l,c)=>{if(Jq(e))return $q(e.data,r);if(Wq(e))return moe(e.data,r);const s=ib(e)?"DocumentFragment":e.tagName.toLowerCase();return++i>r.maxDepth?yoe(s,r):goe(s,doe(ib(e)?[]:Array.from(e.attributes).map(p=>p.name).sort(),ib(e)?{}:Array.from(e.attributes).reduce((p,g)=>(p[g.name]=g.value,p),{}),r,n+r.indent,i,l,c),foe(Array.prototype.slice.call(e.childNodes||e.children).filter(t),r,n+r.indent,i,l,c),r,n)},"serialize")}}m(Zq,"createDOMElementFilter");var Kq=null,TR=null,SR=null;try{const t=module&&module.require;TR=t.call(module,"fs").readFileSync,SR=t.call(module,"@babel/code-frame").codeFrameColumns,Kq=t.call(module,"picocolors")}catch{}function Yq(t){const e=t.indexOf("(")+1,r=t.indexOf(")"),n=t.slice(e,r),i=n.split(":"),[l,c,s]=[i[0],parseInt(i[1],10),parseInt(i[2],10)];let p="";try{p=TR(l,"utf-8")}catch{return""}const g=SR(p,{start:{line:c,column:s}},{highlightCode:!0,linesBelow:0});return Kq.dim(n)+`
`+g+`
`}m(Yq,"getCodeFrame");function Xq(){if(!TR||!SR)return"";const e=new Error().stack.split(`
`).slice(1).find(r=>!r.includes("node_modules/"));return Yq(e)}m(Xq,"getUserCodeFrame");var Qq=3;function ob(){return typeof jest<"u"&&jest!==null?setTimeout._isMockFunction===!0||Object.prototype.hasOwnProperty.call(setTimeout,"clock"):!1}m(ob,"jestFakeTimersAreEnabled");function J1(){if(typeof window>"u")throw new Error("Could not find default container");return window.document}m(J1,"getDocument");function CR(t){if(t.defaultView)return t.defaultView;if(t.ownerDocument&&t.ownerDocument.defaultView)return t.ownerDocument.defaultView;if(t.window)return t.window;throw t.ownerDocument&&t.ownerDocument.defaultView===null?new Error("It looks like the window object is not available for the provided node."):t.then instanceof Function?new Error("It looks like you passed a Promise object instead of a DOM node. Did you do something like `fireEvent.click(screen.findBy...` when you meant to use a `getBy` query `fireEvent.click(screen.getBy...`, or await the findBy query `fireEvent.click(await screen.findBy...`?"):Array.isArray(t)?new Error("It looks like you passed an Array instead of a DOM node. Did you do something like `fireEvent.click(screen.getAllBy...` when you meant to use a `getBy` query `fireEvent.click(screen.getBy...`?"):typeof t.debug=="function"&&typeof t.logTestingPlaygroundURL=="function"?new Error("It looks like you passed a `screen` object. Did you do something like `fireEvent.click(screen, ...` when you meant to use a query, e.g. `fireEvent.click(screen.getBy..., `?"):new Error("The given node is not an Element, the node type is: "+typeof t+".")}m(CR,"getWindowFromNode");function za(t){if(!t||typeof t.querySelector!="function"||typeof t.querySelectorAll!="function")throw new TypeError("Expected container to be an Element, a Document or a DocumentFragment but got "+e(t)+".");function e(r){return typeof r=="object"?r===null?"null":r.constructor.name:typeof r}m(e,"getTypeName")}m(za,"checkContainerType");var xoe=m(()=>{if(typeof process>"u")return!1;let t;try{var e;const r=(e=NT)==null?void 0:e.COLORS;r&&(t=JSON.parse(r))}catch{}return typeof t=="boolean"?t:process.versions!==void 0&&process.versions.node!==void 0},"shouldHighlight"),{DOMCollection:woe}=fR.plugins,Eoe=1,Toe=8;function e8(t){return t.nodeType!==Toe&&(t.nodeType!==Eoe||!t.matches(nn().defaultIgnore))}m(e8,"filterCommentsAndDefaultIgnoreTagsTags");function Xp(t,e,r){if(r===void 0&&(r={}),t||(t=J1().body),typeof e!="number"&&(e=typeof process<"u"&&typeof NT<"u"&&NT.DEBUG_PRINT_LIMIT||7e3),e===0)return"";t.documentElement&&(t=t.documentElement);let n=typeof t;if(n==="object"?n=t.constructor.name:t={},!("outerHTML"in t))throw new TypeError("Expected an element or document but got "+n);const{filterNode:i=e8,...l}=r,c=fR.format(t,{plugins:[Zq(i),woe],printFunctionName:!1,highlight:xoe(),...l});return e!==void 0&&t.outerHTML.length>e?c.slice(0,e)+"...":c}m(Xp,"prettyDOM");var ZS=m(function(){const t=Xq();console.log(t?Xp(...arguments)+`

`+t:Xp(...arguments))},"logDOM"),ph={testIdAttribute:"data-testid",asyncUtilTimeout:1e3,asyncWrapper:m(t=>t(),"asyncWrapper"),unstable_advanceTimersWrapper:m(t=>t(),"unstable_advanceTimersWrapper"),eventWrapper:m(t=>t(),"eventWrapper"),defaultHidden:!1,defaultIgnore:"script, style",showOriginalStackTrace:!1,throwSuggestions:!1,getElementError(t,e){const r=Xp(e),n=new Error([t,"Ignored nodes: comments, "+ph.defaultIgnore+`
`+r].filter(Boolean).join(`

`));return n.name="TestingLibraryElementError",n},_disableExpensiveErrorDiagnostics:!1,computedStyleSupportsPseudoElements:!1};function t8(t){try{return ph._disableExpensiveErrorDiagnostics=!0,t()}finally{ph._disableExpensiveErrorDiagnostics=!1}}m(t8,"runWithExpensiveErrorDiagnosticsDisabled");function r8(t){typeof t=="function"&&(t=t(ph)),ph={...ph,...t}}m(r8,"configure");function nn(){return ph}m(nn,"getConfig");var Soe=["button","meter","output","progress","select","textarea","input"];function PR(t){return Soe.includes(t.nodeName.toLowerCase())?"":t.nodeType===Qq?t.textContent:Array.from(t.childNodes).map(e=>PR(e)).join("")}m(PR,"getTextContent");function Zb(t){let e;return t.tagName.toLowerCase()==="label"?e=PR(t):e=t.value||t.textContent,e}m(Zb,"getLabelContent");function AR(t){if(t.labels!==void 0){var e;return(e=t.labels)!=null?e:[]}if(!n8(t))return[];const r=t.ownerDocument.querySelectorAll("label");return Array.from(r).filter(n=>n.control===t)}m(AR,"getRealLabels");function n8(t){return/BUTTON|METER|OUTPUT|PROGRESS|SELECT|TEXTAREA/.test(t.tagName)||t.tagName==="INPUT"&&t.getAttribute("type")!=="hidden"}m(n8,"isLabelable");function RR(t,e,r){let{selector:n="*"}=r===void 0?{}:r;const i=e.getAttribute("aria-labelledby"),l=i?i.split(" "):[];return l.length?l.map(c=>{const s=t.querySelector('[id="'+c+'"]');return s?{content:Zb(s),formControl:null}:{content:"",formControl:null}}):Array.from(AR(e)).map(c=>{const s=Zb(c),g=Array.from(c.querySelectorAll("button, input, meter, output, progress, select, textarea")).filter(_=>_.matches(n))[0];return{content:s,formControl:g}})}m(RR,"getLabels");function IR(t){if(t==null)throw new Error("It looks like "+t+" was passed instead of a matcher. Did you do something like getByText("+t+")?")}m(IR,"assertNotNullOrUndefined");function Jh(t,e,r,n){if(typeof t!="string")return!1;IR(r);const i=n(t);return typeof r=="string"||typeof r=="number"?i.toLowerCase().includes(r.toString().toLowerCase()):typeof r=="function"?r(i,e):MR(r,i)}m(Jh,"fuzzyMatches");function Ra(t,e,r,n){if(typeof t!="string")return!1;IR(r);const i=n(t);return r instanceof Function?r(i,e):r instanceof RegExp?MR(r,i):i===String(r)}m(Ra,"matches");function W1(t){let{trim:e=!0,collapseWhitespace:r=!0}=t===void 0?{}:t;return n=>{let i=n;return i=e?i.trim():i,i=r?i.replace(/\s+/g," "):i,i}}m(W1,"getDefaultNormalizer");function nu(t){let{trim:e,collapseWhitespace:r,normalizer:n}=t;if(!n)return W1({trim:e,collapseWhitespace:r});if(typeof e<"u"||typeof r<"u")throw new Error('trim and collapseWhitespace are not supported with a normalizer. If you want to use the default trim and collapseWhitespace logic in your normalizer, use "getDefaultNormalizer({trim, collapseWhitespace})" and compose that into your normalizer');return n}m(nu,"makeNormalizer");function MR(t,e){const r=t.test(e);return t.global&&t.lastIndex!==0&&(console.warn("To match all elements we had to reset the lastIndex of the RegExp because the global flag is enabled. We encourage to remove the global flag from the RegExp."),t.lastIndex=0),r}m(MR,"matchRegExp");function Rf(t){return t.matches("input[type=submit], input[type=button], input[type=reset]")?t.value:Array.from(t.childNodes).filter(e=>e.nodeType===Qq&&!!e.textContent).map(e=>e.textContent).join("")}m(Rf,"getNodeText");var Coe=i8(xs.elementRoles);function OR(t){return t.hidden===!0||t.getAttribute("aria-hidden")==="true"||t.ownerDocument.defaultView.getComputedStyle(t).display==="none"}m(OR,"isSubtreeInaccessible");function Xy(t,e){e===void 0&&(e={});const{isSubtreeInaccessible:r=OR}=e;if(t.ownerDocument.defaultView.getComputedStyle(t).visibility==="hidden")return!0;let i=t;for(;i;){if(r(i))return!0;i=i.parentElement}return!1}m(Xy,"isInaccessible");function Z1(t){for(const{match:e,roles:r}of Coe)if(e(t))return[...r];return[]}m(Z1,"getImplicitAriaRoles");function i8(t){function e(c){let{name:s,attributes:p}=c;return""+s+p.map(g=>{let{name:_,value:x,constraints:P=[]}=g;const A=P.indexOf("undefined")!==-1,M=P.indexOf("set")!==-1;return typeof x<"u"?"["+_+'="'+x+'"]':A?":not(["+_+"])":M?"["+_+"]:not(["+_+'=""])':"["+_+"]"}).join("")}m(e,"makeElementSelector");function r(c){let{attributes:s=[]}=c;return s.length}m(r,"getSelectorSpecificity");function n(c,s){let{specificity:p}=c,{specificity:g}=s;return g-p}m(n,"bySelectorSpecificity");function i(c){let{attributes:s=[]}=c;const p=s.findIndex(_=>_.value&&_.name==="type"&&_.value==="text");p>=0&&(s=[...s.slice(0,p),...s.slice(p+1)]);const g=e({...c,attributes:s});return _=>p>=0&&_.type!=="text"?!1:_.matches(g)}m(i,"match");let l=[];for(const[c,s]of t.entries())l=[...l,{match:i(c),roles:Array.from(s),specificity:r(c)}];return l.sort(n)}m(i8,"buildElementRoleList");function kR(t,e){let{hidden:r=!1}=e===void 0?{}:e;function n(i){return[i,...Array.from(i.children).reduce((l,c)=>[...l,...n(c)],[])]}return m(n,"flattenDOM"),n(t).filter(i=>r===!1?Xy(i)===!1:!0).reduce((i,l)=>{let c=[];return l.hasAttribute("role")?c=l.getAttribute("role").split(" ").slice(0,1):c=Z1(l),c.reduce((s,p)=>Array.isArray(s[p])?{...s,[p]:[...s[p],l]}:{...s,[p]:[l]},i)},{})}m(kR,"getRoles");function LR(t,e){let{hidden:r,includeDescription:n}=e;const i=kR(t,{hidden:r});return Object.entries(i).filter(l=>{let[c]=l;return c!=="generic"}).map(l=>{let[c,s]=l;const p="-".repeat(50),g=s.map(_=>{const x='Name "'+H1(_,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements})+`":
`,P=Xp(_.cloneNode(!1));if(n){const A='Description "'+wR(_,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements})+`":
`;return""+x+A+P}return""+x+P}).join(`

`);return c+`:

`+g+`

`+p}).join(`
`)}m(LR,"prettyRoles");var Poe=m(function(t,e){let{hidden:r=!1}=e===void 0?{}:e;return console.log(LR(t,{hidden:r}))},"logRoles");function o8(t){return t.tagName==="OPTION"?t.selected:If(t,"aria-selected")}m(o8,"computeAriaSelected");function s8(t){return t.getAttribute("aria-busy")==="true"}m(s8,"computeAriaBusy");function a8(t){if(!("indeterminate"in t&&t.indeterminate))return"checked"in t?t.checked:If(t,"aria-checked")}m(a8,"computeAriaChecked");function l8(t){return If(t,"aria-pressed")}m(l8,"computeAriaPressed");function c8(t){var e,r;return(e=(r=If(t,"aria-current"))!=null?r:t.getAttribute("aria-current"))!=null?e:!1}m(c8,"computeAriaCurrent");function u8(t){return If(t,"aria-expanded")}m(u8,"computeAriaExpanded");function If(t,e){const r=t.getAttribute(e);if(r==="true")return!0;if(r==="false")return!1}m(If,"checkBooleanAttribute");function h8(t){const e={H1:1,H2:2,H3:3,H4:4,H5:5,H6:6};return t.getAttribute("aria-level")&&Number(t.getAttribute("aria-level"))||e[t.tagName]}m(h8,"computeHeadingLevel");function d8(t){const e=t.getAttribute("aria-valuenow");return e===null?void 0:+e}m(d8,"computeAriaValueNow");function p8(t){const e=t.getAttribute("aria-valuemax");return e===null?void 0:+e}m(p8,"computeAriaValueMax");function f8(t){const e=t.getAttribute("aria-valuemin");return e===null?void 0:+e}m(f8,"computeAriaValueMin");function m8(t){const e=t.getAttribute("aria-valuetext");return e===null?void 0:e}m(m8,"computeAriaValueText");var jO=W1();function g8(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}m(g8,"escapeRegExp");function KS(t){return new RegExp(g8(t.toLowerCase()),"i")}m(KS,"getRegExpMatcher");function hl(t,e,r,n){let{variant:i,name:l}=n,c="";const s={},p=[["Role","TestId"].includes(t)?r:KS(r)];l&&(s.name=KS(l)),t==="Role"&&Xy(e)&&(s.hidden=!0,c=`Element is inaccessible. This means that the element and all its children are invisible to screen readers.
    If you are using the aria-hidden prop, make sure this is the right choice for your case.
    `),Object.keys(s).length>0&&p.push(s);const g=i+"By"+t;return{queryName:t,queryMethod:g,queryArgs:p,variant:i,warning:c,toString(){c&&console.warn(c);let[_,x]=p;return _=typeof _=="string"?"'"+_+"'":_,x=x?", { "+Object.entries(x).map(P=>{let[A,M]=P;return A+": "+M}).join(", ")+" }":"",g+"("+_+x+")"}}}m(hl,"makeSuggestion");function dl(t,e,r){return r&&(!e||e.toLowerCase()===t.toLowerCase())}m(dl,"canSuggest");function ry(t,e,r){var n,i;if(e===void 0&&(e="get"),t.matches(nn().defaultIgnore))return;const l=(n=t.getAttribute("role"))!=null?n:(i=Z1(t))==null?void 0:i[0];if(l!=="generic"&&dl("Role",r,l))return hl("Role",t,l,{variant:e,name:H1(t,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements})});const c=RR(document,t).map(P=>P.content).join(" ");if(dl("LabelText",r,c))return hl("LabelText",t,c,{variant:e});const s=t.getAttribute("placeholder");if(dl("PlaceholderText",r,s))return hl("PlaceholderText",t,s,{variant:e});const p=jO(Rf(t));if(dl("Text",r,p))return hl("Text",t,p,{variant:e});if(dl("DisplayValue",r,t.value))return hl("DisplayValue",t,jO(t.value),{variant:e});const g=t.getAttribute("alt");if(dl("AltText",r,g))return hl("AltText",t,g,{variant:e});const _=t.getAttribute("title");if(dl("Title",r,_))return hl("Title",t,_,{variant:e});const x=t.getAttribute(nn().testIdAttribute);if(dl("TestId",r,x))return hl("TestId",t,x,{variant:e})}m(ry,"getSuggestedQuery");function cg(t,e){t.stack=e.stack.replace(e.message,t.message)}m(cg,"copyStackTrace");function y8(t,e){let{container:r=J1(),timeout:n=nn().asyncUtilTimeout,showOriginalStackTrace:i=nn().showOriginalStackTrace,stackTraceError:l,interval:c=50,onTimeout:s=m(g=>(Object.defineProperty(g,"message",{value:nn().getElementError(g.message,r).message}),g),"onTimeout"),mutationObserverOptions:p={subtree:!0,childList:!0,attributes:!0,characterData:!0}}=e;if(typeof t!="function")throw new TypeError("Received `callback` arg must be a function");return new Promise(async(g,_)=>{let x,P,A,M=!1,N="idle";const z=setTimeout(re,n),j=ob();if(j){const{unstable_advanceTimersWrapper:ne}=nn();for(X();!M;){if(!ob()){const Z=new Error("Changed from using fake timers to real timers while using waitFor. This is not allowed and will result in very strange behavior. Please ensure you're awaiting all async things your test is doing before changing to real timers. For more info, please go to https://github.com/testing-library/dom-testing-library/issues/830");i||cg(Z,l),_(Z);return}if(await ne(async()=>{jest.advanceTimersByTime(c)}),M)break;X()}}else{try{za(r)}catch(Z){_(Z);return}P=setInterval(J,c);const{MutationObserver:ne}=CR(r);A=new ne(J),A.observe(r,p),X()}function $(ne,Z){M=!0,clearTimeout(z),j||(clearInterval(P),A.disconnect()),ne?_(ne):g(Z)}m($,"onDone");function J(){if(ob()){const ne=new Error("Changed from using real timers to fake timers while using waitFor. This is not allowed and will result in very strange behavior. Please ensure you're awaiting all async things your test is doing before changing to fake timers. For more info, please go to https://github.com/testing-library/dom-testing-library/issues/830");return i||cg(ne,l),_(ne)}else return X()}m(J,"checkRealTimersCallback");function X(){if(N!=="pending")try{const ne=t8(t);typeof ne?.then=="function"?(N="pending",ne.then(Z=>{N="resolved",$(null,Z)},Z=>{N="rejected",x=Z})):$(null,ne)}catch(ne){x=ne}}m(X,"checkCallback");function re(){let ne;x?(ne=x,!i&&ne.name==="TestingLibraryElementError"&&cg(ne,l)):(ne=new Error("Timed out in waitFor."),i||cg(ne,l)),$(s(ne),null)}m(re,"handleTimeout")})}m(y8,"waitFor");function K1(t,e){const r=new Error("STACK_TRACE_MESSAGE");return nn().asyncWrapper(()=>y8(t,{stackTraceError:r,...e}))}m(K1,"waitForWrapper");function Qy(t,e){return nn().getElementError(t,e)}m(Qy,"getElementError");function e_(t,e){return Qy(t+"\n\n(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).",e)}m(e_,"getMultipleElementsFoundError");function iu(t,e,r,n){let{exact:i=!0,collapseWhitespace:l,trim:c,normalizer:s}=n===void 0?{}:n;const p=i?Ra:Jh,g=nu({collapseWhitespace:l,trim:c,normalizer:s});return Array.from(e.querySelectorAll("["+t+"]")).filter(_=>p(_.getAttribute(t),_,r,g))}m(iu,"queryAllByAttribute");function DR(t,e,r,n){const i=iu(t,e,r,n);if(i.length>1)throw e_("Found multiple elements by ["+t+"="+r+"]",e);return i[0]||null}m(DR,"queryByAttribute");function Ch(t,e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),l=1;l<n;l++)i[l-1]=arguments[l];const c=t(r,...i);if(c.length>1){const s=c.map(p=>Qy(null,p).message).join(`

`);throw e_(e(r,...i)+`

Here are the matching elements:

`+s,r)}return c[0]||null}}m(Ch,"makeSingleQuery");function NR(t,e){return nn().getElementError(`A better query is available, try this:
`+t.toString()+`
`,e)}m(NR,"getSuggestionError");function Y1(t,e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),l=1;l<n;l++)i[l-1]=arguments[l];const c=t(r,...i);if(!c.length)throw nn().getElementError(e(r,...i),r);return c}}m(Y1,"makeGetAllQuery");function Ph(t){return(e,r,n,i)=>K1(()=>t(e,r,n),{container:e,...i})}m(Ph,"makeFindQuery");var qc=m((t,e,r)=>function(n){for(var i=arguments.length,l=new Array(i>1?i-1:0),c=1;c<i;c++)l[c-1]=arguments[c];const s=t(n,...l),[{suggest:p=nn().throwSuggestions}={}]=l.slice(-1);if(s&&p){const g=ry(s,r);if(g&&!e.endsWith(g.queryName))throw NR(g.toString(),n)}return s},"wrapSingleQueryWithSuggestion"),Oo=m((t,e,r)=>function(n){for(var i=arguments.length,l=new Array(i>1?i-1:0),c=1;c<i;c++)l[c-1]=arguments[c];const s=t(n,...l),[{suggest:p=nn().throwSuggestions}={}]=l.slice(-1);if(s.length&&p){const g=[...new Set(s.map(_=>{var x;return(x=ry(_,r))==null?void 0:x.toString()}))];if(g.length===1&&!e.endsWith(ry(s[0],r).queryName))throw NR(g[0],n)}return s},"wrapAllByQueryWithSuggestion");function ja(t,e,r){const n=qc(Ch(t,e),t.name,"query"),i=Y1(t,r),l=Ch(i,e),c=qc(l,t.name,"get"),s=Oo(i,t.name.replace("query","get"),"getAll"),p=Ph(Oo(i,t.name,"findAll")),g=Ph(qc(l,t.name,"find"));return[n,s,c,p,g]}m(ja,"buildQueries");var Aoe=Object.freeze({__proto__:null,getElementError:Qy,wrapAllByQueryWithSuggestion:Oo,wrapSingleQueryWithSuggestion:qc,getMultipleElementsFoundError:e_,queryAllByAttribute:iu,queryByAttribute:DR,makeSingleQuery:Ch,makeGetAllQuery:Y1,makeFindQuery:Ph,buildQueries:ja});function _8(t){return Array.from(t.querySelectorAll("label,input")).map(e=>({node:e,textToMatch:Zb(e)})).filter(e=>{let{textToMatch:r}=e;return r!==null})}m(_8,"queryAllLabels");var Roe=m(function(t,e,r){let{exact:n=!0,trim:i,collapseWhitespace:l,normalizer:c}=r===void 0?{}:r;const s=n?Ra:Jh,p=nu({collapseWhitespace:l,trim:i,normalizer:c});return _8(t).filter(_=>{let{node:x,textToMatch:P}=_;return s(P,x,e,p)}).map(_=>{let{node:x}=_;return x})},"queryAllLabelsByText"),ny=m(function(t,e,r){let{selector:n="*",exact:i=!0,collapseWhitespace:l,trim:c,normalizer:s}=r===void 0?{}:r;za(t);const p=i?Ra:Jh,g=nu({collapseWhitespace:l,trim:c,normalizer:s}),_=Array.from(t.querySelectorAll("*")).filter(x=>AR(x).length||x.hasAttribute("aria-labelledby")).reduce((x,P)=>{const A=RR(t,P,{selector:n});A.filter(N=>!!N.formControl).forEach(N=>{p(N.content,N.formControl,e,g)&&N.formControl&&x.push(N.formControl)});const M=A.filter(N=>!!N.content).map(N=>N.content);return p(M.join(" "),P,e,g)&&x.push(P),M.length>1&&M.forEach((N,z)=>{p(N,P,e,g)&&x.push(P);const j=[...M];j.splice(z,1),j.length>1&&p(j.join(" "),P,e,g)&&x.push(P)}),x},[]).concat(iu("aria-label",t,e,{exact:i,normalizer:g}));return Array.from(new Set(_)).filter(x=>x.matches(n))},"queryAllByLabelText"),Ah=m(function(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];const l=ny(t,e,...n);if(!l.length){const c=Roe(t,e,...n);if(c.length){const s=c.map(p=>b8(t,p)).filter(p=>!!p);throw s.length?nn().getElementError(s.map(p=>"Found a label with the text of: "+e+", however the element associated with this label (<"+p+" />) is non-labellable [https://html.spec.whatwg.org/multipage/forms.html#category-label]. If you really need to label a <"+p+" />, you can use aria-label or aria-labelledby instead.").join(`

`),t):nn().getElementError("Found a label with the text of: "+e+`, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.`,t)}else throw nn().getElementError("Unable to find a label with the text of: "+e,t)}return l},"getAllByLabelText");function b8(t,e){const r=e.getAttribute("for");if(!r)return null;const n=t.querySelector('[id="'+r+'"]');return n?n.tagName.toLowerCase():null}m(b8,"getTagNameOfElementAssociatedWithLabelViaFor");var v8=m((t,e)=>"Found multiple elements with the text of: "+e,"getMultipleError$7"),x8=qc(Ch(ny,v8),ny.name,"query"),w8=Ch(Ah,v8),E8=Ph(Oo(Ah,Ah.name,"findAll")),T8=Ph(qc(w8,Ah.name,"find")),S8=Oo(Ah,Ah.name,"getAll"),C8=qc(w8,Ah.name,"get"),P8=Oo(ny,ny.name,"queryAll"),YS=m(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return za(e[0]),iu("placeholder",...e)},"queryAllByPlaceholderText"),Ioe=m((t,e)=>"Found multiple elements with the placeholder text of: "+e,"getMultipleError$6"),Moe=m((t,e)=>"Unable to find an element with the placeholder text of: "+e,"getMissingError$6"),A8=Oo(YS,YS.name,"queryAll"),[R8,I8,M8,O8,k8]=ja(YS,Ioe,Moe),XS=m(function(t,e,r){let{selector:n="*",exact:i=!0,collapseWhitespace:l,trim:c,ignore:s=nn().defaultIgnore,normalizer:p}=r===void 0?{}:r;za(t);const g=i?Ra:Jh,_=nu({collapseWhitespace:l,trim:c,normalizer:p});let x=[];return typeof t.matches=="function"&&t.matches(n)&&(x=[t]),[...x,...Array.from(t.querySelectorAll(n))].filter(P=>!s||!P.matches(s)).filter(P=>g(Rf(P),P,e,_))},"queryAllByText"),Ooe=m((t,e)=>"Found multiple elements with the text: "+e,"getMultipleError$5"),koe=m(function(t,e,r){r===void 0&&(r={});const{collapseWhitespace:n,trim:i,normalizer:l,selector:c}=r,p=nu({collapseWhitespace:n,trim:i,normalizer:l})(e.toString()),g=p!==e.toString(),_=(c??"*")!=="*";return"Unable to find an element with the text: "+(g?p+" (normalized from '"+e+"')":e)+(_?", which matches selector '"+c+"'":"")+". This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible."},"getMissingError$5"),L8=Oo(XS,XS.name,"queryAll"),[D8,N8,F8,z8,j8]=ja(XS,Ooe,koe),QS=m(function(t,e,r){let{exact:n=!0,collapseWhitespace:i,trim:l,normalizer:c}=r===void 0?{}:r;za(t);const s=n?Ra:Jh,p=nu({collapseWhitespace:i,trim:l,normalizer:c});return Array.from(t.querySelectorAll("input,textarea,select")).filter(g=>g.tagName==="SELECT"?Array.from(g.options).filter(x=>x.selected).some(x=>s(Rf(x),x,e,p)):s(g.value,g,e,p))},"queryAllByDisplayValue"),Loe=m((t,e)=>"Found multiple elements with the display value: "+e+".","getMultipleError$4"),Doe=m((t,e)=>"Unable to find an element with the display value: "+e+".","getMissingError$4"),B8=Oo(QS,QS.name,"queryAll"),[q8,$8,V8,U8,G8]=ja(QS,Loe,Doe),Noe=/^(img|input|area|.+-.+)$/i,e2=m(function(t,e,r){return r===void 0&&(r={}),za(t),iu("alt",t,e,r).filter(n=>Noe.test(n.tagName))},"queryAllByAltText"),Foe=m((t,e)=>"Found multiple elements with the alt text: "+e,"getMultipleError$3"),zoe=m((t,e)=>"Unable to find an element with the alt text: "+e,"getMissingError$3"),H8=Oo(e2,e2.name,"queryAll"),[J8,W8,Z8,K8,Y8]=ja(e2,Foe,zoe),joe=m(t=>{var e;return t.tagName.toLowerCase()==="title"&&((e=t.parentElement)==null?void 0:e.tagName.toLowerCase())==="svg"},"isSvgTitle"),t2=m(function(t,e,r){let{exact:n=!0,collapseWhitespace:i,trim:l,normalizer:c}=r===void 0?{}:r;za(t);const s=n?Ra:Jh,p=nu({collapseWhitespace:i,trim:l,normalizer:c});return Array.from(t.querySelectorAll("[title], svg > title")).filter(g=>s(g.getAttribute("title"),g,e,p)||joe(g)&&s(Rf(g),g,e,p))},"queryAllByTitle"),Boe=m((t,e)=>"Found multiple elements with the title: "+e+".","getMultipleError$2"),qoe=m((t,e)=>"Unable to find an element with the title: "+e+".","getMissingError$2"),X8=Oo(t2,t2.name,"queryAll"),[Q8,e$,t$,r$,n$]=ja(t2,Boe,qoe),r2=m(function(t,e,r){let{hidden:n=nn().defaultHidden,name:i,description:l,queryFallbacks:c=!1,selected:s,busy:p,checked:g,pressed:_,current:x,level:P,expanded:A,value:{now:M,min:N,max:z,text:j}={}}=r===void 0?{}:r;if(za(t),s!==void 0){var $;if((($=xs.roles.get(e))==null?void 0:$.props["aria-selected"])===void 0)throw new Error('"aria-selected" is not supported on role "'+e+'".')}if(p!==void 0){var J;if(((J=xs.roles.get(e))==null?void 0:J.props["aria-busy"])===void 0)throw new Error('"aria-busy" is not supported on role "'+e+'".')}if(g!==void 0){var X;if(((X=xs.roles.get(e))==null?void 0:X.props["aria-checked"])===void 0)throw new Error('"aria-checked" is not supported on role "'+e+'".')}if(_!==void 0){var re;if(((re=xs.roles.get(e))==null?void 0:re.props["aria-pressed"])===void 0)throw new Error('"aria-pressed" is not supported on role "'+e+'".')}if(x!==void 0){var ne;if(((ne=xs.roles.get(e))==null?void 0:ne.props["aria-current"])===void 0)throw new Error('"aria-current" is not supported on role "'+e+'".')}if(P!==void 0&&e!=="heading")throw new Error('Role "'+e+'" cannot have "level" property.');if(M!==void 0){var Z;if(((Z=xs.roles.get(e))==null?void 0:Z.props["aria-valuenow"])===void 0)throw new Error('"aria-valuenow" is not supported on role "'+e+'".')}if(z!==void 0){var U;if(((U=xs.roles.get(e))==null?void 0:U.props["aria-valuemax"])===void 0)throw new Error('"aria-valuemax" is not supported on role "'+e+'".')}if(N!==void 0){var K;if(((K=xs.roles.get(e))==null?void 0:K.props["aria-valuemin"])===void 0)throw new Error('"aria-valuemin" is not supported on role "'+e+'".')}if(j!==void 0){var he;if(((he=xs.roles.get(e))==null?void 0:he.props["aria-valuetext"])===void 0)throw new Error('"aria-valuetext" is not supported on role "'+e+'".')}if(A!==void 0){var ue;if(((ue=xs.roles.get(e))==null?void 0:ue.props["aria-expanded"])===void 0)throw new Error('"aria-expanded" is not supported on role "'+e+'".')}const Ee=new WeakMap;function Ie(ee){return Ee.has(ee)||Ee.set(ee,OR(ee)),Ee.get(ee)}return m(Ie,"cachedIsSubtreeInaccessible"),Array.from(t.querySelectorAll(i$(e))).filter(ee=>{if(ee.hasAttribute("role")){const xe=ee.getAttribute("role");if(c)return xe.split(" ").filter(Boolean).some(Ke=>Ke===e);const[tt]=xe.split(" ");return tt===e}return Z1(ee).some(xe=>xe===e)}).filter(ee=>{if(s!==void 0)return s===o8(ee);if(p!==void 0)return p===s8(ee);if(g!==void 0)return g===a8(ee);if(_!==void 0)return _===l8(ee);if(x!==void 0)return x===c8(ee);if(A!==void 0)return A===u8(ee);if(P!==void 0)return P===h8(ee);if(M!==void 0||z!==void 0||N!==void 0||j!==void 0){let ve=!0;if(M!==void 0&&ve&&(ve=M===d8(ee)),z!==void 0&&ve&&(ve=z===p8(ee)),N!==void 0&&ve&&(ve=N===f8(ee)),j!==void 0){var pe;ve&&(ve=Ra((pe=m8(ee))!=null?pe:null,ee,j,xe=>xe))}return ve}return!0}).filter(ee=>i===void 0?!0:Ra(H1(ee,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements}),ee,i,pe=>pe)).filter(ee=>l===void 0?!0:Ra(wR(ee,{computedStyleSupportsPseudoElements:nn().computedStyleSupportsPseudoElements}),ee,l,pe=>pe)).filter(ee=>n===!1?Xy(ee,{isSubtreeInaccessible:Ie})===!1:!0)},"queryAllByRole");function i$(t){var e;const r='*[role~="'+t+'"]',n=(e=xs.roleElements.get(t))!=null?e:new Set,i=new Set(Array.from(n).map(l=>{let{name:c}=l;return c}));return[r].concat(Array.from(i)).join(",")}m(i$,"makeRoleSelector");var o$=m(t=>{let e="";return t===void 0?e="":typeof t=="string"?e=' and name "'+t+'"':e=" and name `"+t+"`",e},"getNameHint"),$oe=m(function(t,e,r){let{name:n}=r===void 0?{}:r;return'Found multiple elements with the role "'+e+'"'+o$(n)},"getMultipleError$1"),Voe=m(function(t,e,r){let{hidden:n=nn().defaultHidden,name:i,description:l}=r===void 0?{}:r;if(nn()._disableExpensiveErrorDiagnostics)return'Unable to find role="'+e+'"'+o$(i);let c="";Array.from(t.children).forEach(_=>{c+=LR(_,{hidden:n,includeDescription:l!==void 0})});let s;c.length===0?n===!1?s="There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole":s="There are no available roles.":s=(`
Here are the `+(n===!1?"accessible":"available")+` roles:

  `+c.replace(/\n/g,`
  `).replace(/\n\s\s\n/g,`

`)+`
`).trim();let p="";i===void 0?p="":typeof i=="string"?p=' and name "'+i+'"':p=" and name `"+i+"`";let g="";return l===void 0?g="":typeof l=="string"?g=' and description "'+l+'"':g=" and description `"+l+"`",(`
Unable to find an `+(n===!1?"accessible ":"")+'element with the role "'+e+'"'+p+g+`

`+s).trim()},"getMissingError$1"),s$=Oo(r2,r2.name,"queryAll"),[a$,l$,c$,u$,h$]=ja(r2,$oe,Voe),FR=m(()=>nn().testIdAttribute,"getTestIdAttribute"),n2=m(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return za(e[0]),iu(FR(),...e)},"queryAllByTestId"),Uoe=m((t,e)=>"Found multiple elements by: ["+FR()+'="'+e+'"]',"getMultipleError"),Goe=m((t,e)=>"Unable to find an element by: ["+FR()+'="'+e+'"]',"getMissingError"),d$=Oo(n2,n2.name,"queryAll"),[p$,f$,m$,g$,y$]=ja(n2,Uoe,Goe),Kb=Object.freeze({__proto__:null,queryAllByLabelText:P8,queryByLabelText:x8,getAllByLabelText:S8,getByLabelText:C8,findAllByLabelText:E8,findByLabelText:T8,queryByPlaceholderText:R8,queryAllByPlaceholderText:A8,getByPlaceholderText:M8,getAllByPlaceholderText:I8,findAllByPlaceholderText:O8,findByPlaceholderText:k8,queryByText:D8,queryAllByText:L8,getByText:F8,getAllByText:N8,findAllByText:z8,findByText:j8,queryByDisplayValue:q8,queryAllByDisplayValue:B8,getByDisplayValue:V8,getAllByDisplayValue:$8,findAllByDisplayValue:U8,findByDisplayValue:G8,queryByAltText:J8,queryAllByAltText:H8,getByAltText:Z8,getAllByAltText:W8,findAllByAltText:K8,findByAltText:Y8,queryByTitle:Q8,queryAllByTitle:X8,getByTitle:t$,getAllByTitle:e$,findAllByTitle:r$,findByTitle:n$,queryByRole:a$,queryAllByRole:s$,getAllByRole:l$,getByRole:c$,findAllByRole:u$,findByRole:h$,queryByTestId:p$,queryAllByTestId:d$,getByTestId:m$,getAllByTestId:f$,findAllByTestId:g$,findByTestId:y$});function Yb(t,e,r){return e===void 0&&(e=Kb),r===void 0&&(r={}),Object.keys(e).reduce((n,i)=>{const l=e[i];return n[i]=l.bind(null,t),n},r)}m(Yb,"getQueriesForElement");var _$=m(t=>!t||Array.isArray(t)&&!t.length,"isRemoved");function i2(t){if(_$(t))throw new Error("The element(s) given to waitForElementToBeRemoved are already removed. waitForElementToBeRemoved requires that the element(s) exist(s) before waiting for removal.")}m(i2,"initialCheck");async function b$(t,e){const r=new Error("Timed out in waitForElementToBeRemoved.");if(typeof t!="function"){i2(t);const i=(Array.isArray(t)?t:[t]).map(l=>{let c=l.parentElement;if(c===null)return()=>null;for(;c.parentElement;)c=c.parentElement;return()=>c.contains(l)?l:null});t=m(()=>i.map(l=>l()).filter(Boolean),"callback")}return i2(t()),K1(()=>{let n;try{n=t()}catch(i){if(i.name==="TestingLibraryElementError")return;throw i}if(!_$(n))throw r},e)}m(b$,"waitForElementToBeRemoved");var BO={copy:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},cut:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},paste:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionEnd:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionStart:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionUpdate:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keyDown:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},keyPress:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},keyUp:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},focus:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},blur:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},focusIn:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},focusOut:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},change:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},input:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},invalid:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!0}},submit:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}},reset:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}},click:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,button:0,composed:!0}},contextMenu:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dblClick:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},drag:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragEnd:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragEnter:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragExit:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragLeave:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragOver:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragStart:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},drop:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseDown:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseEnter:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseLeave:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseMove:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseOut:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseOver:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseUp:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},select:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},touchCancel:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},touchEnd:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},touchMove:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},touchStart:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},resize:{EventType:"UIEvent",defaultInit:{bubbles:!1,cancelable:!1}},scroll:{EventType:"UIEvent",defaultInit:{bubbles:!1,cancelable:!1}},wheel:{EventType:"WheelEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},abort:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},canPlay:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},canPlayThrough:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},durationChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},emptied:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},encrypted:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},ended:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadedData:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadedMetadata:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadStart:{EventType:"ProgressEvent",defaultInit:{bubbles:!1,cancelable:!1}},pause:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},play:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},playing:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},progress:{EventType:"ProgressEvent",defaultInit:{bubbles:!1,cancelable:!1}},rateChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},seeked:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},seeking:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},stalled:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},suspend:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},timeUpdate:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},volumeChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},waiting:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},load:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},error:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},animationStart:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},animationEnd:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},animationIteration:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionCancel:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionEnd:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}},transitionRun:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionStart:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},pointerOver:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerEnter:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},pointerDown:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerMove:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerUp:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerCancel:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},pointerOut:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerLeave:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},gotPointerCapture:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},lostPointerCapture:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},popState:{EventType:"PopStateEvent",defaultInit:{bubbles:!0,cancelable:!1}},offline:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},online:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},pageHide:{EventType:"PageTransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}},pageShow:{EventType:"PageTransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}}},qO={doubleClick:"dblClick"};function Qp(t,e){return nn().eventWrapper(()=>{if(!e)throw new Error("Unable to fire an event - please provide an event object.");if(!t)throw new Error('Unable to fire a "'+e.type+'" event - please provide a DOM element.');return t.dispatchEvent(e)})}m(Qp,"fireEvent");function Rg(t,e,r,n){let{EventType:i="Event",defaultInit:l={}}=n===void 0?{}:n;if(!e)throw new Error('Unable to fire a "'+t+'" event - please provide a DOM element.');const c={...l,...r},{target:{value:s,files:p,...g}={}}=c;s!==void 0&&v$(e,s),p!==void 0&&Object.defineProperty(e,"files",{configurable:!0,enumerable:!0,writable:!0,value:p}),Object.assign(e,g);const _=CR(e),x=_[i]||_.Event;let P;if(typeof x=="function")P=new x(t,c);else{P=_.document.createEvent(i);const{bubbles:M,cancelable:N,detail:z,...j}=c;P.initEvent(t,M,N,z),Object.keys(j).forEach($=>{P[$]=j[$]})}return["dataTransfer","clipboardData"].forEach(M=>{const N=c[M];typeof N=="object"&&(typeof _.DataTransfer=="function"?Object.defineProperty(P,M,{value:Object.getOwnPropertyNames(N).reduce((z,j)=>(Object.defineProperty(z,j,{value:N[j]}),z),new _.DataTransfer)}):Object.defineProperty(P,M,{value:N}))}),P}m(Rg,"createEvent");Object.keys(BO).forEach(t=>{const{EventType:e,defaultInit:r}=BO[t],n=t.toLowerCase();Rg[t]=(i,l)=>Rg(n,i,l,{EventType:e,defaultInit:r}),Qp[t]=(i,l)=>Qp(i,Rg[t](i,l))});function v$(t,e){const{set:r}=Object.getOwnPropertyDescriptor(t,"value")||{},n=Object.getPrototypeOf(t),{set:i}=Object.getOwnPropertyDescriptor(n,"value")||{};if(i&&r!==i)i.call(t,e);else if(r)r.call(t,e);else throw new Error("The given element does not have a value setter")}m(v$,"setNativeValue");Object.keys(qO).forEach(t=>{const e=qO[t];Qp[t]=function(){return Qp[e](...arguments)}});function x$(t){return t.replace(/[ \t]*[\n][ \t]*/g,`
`)}m(x$,"unindent");function w$(t){return hoe.default.compressToEncodedURIComponent(x$(t))}m(w$,"encode");function E$(t){return"https://testing-playground.com/#markup="+w$(t)}m(E$,"getPlaygroundUrl");var Hoe=m((t,e,r)=>Array.isArray(t)?t.forEach(n=>ZS(n,e,r)):ZS(t,e,r),"debug"),Joe=m(function(t){if(t===void 0&&(t=J1().body),!t||!("innerHTML"in t)){console.log("The element you're providing isn't a valid DOM element.");return}if(!t.innerHTML){console.log("The provided element doesn't have any children.");return}const e=E$(t.innerHTML);return console.log(`Open this URL in your browser

`+e),e},"logTestingPlaygroundURL"),$O={debug:Hoe,logTestingPlaygroundURL:Joe},Woe=typeof document<"u"&&document.body?Yb(document.body,Kb,$O):Object.keys(Kb).reduce((t,e)=>(t[e]=()=>{throw new TypeError("For queries bound to document.body a global document has to be available... Learn more: https://testing-library.com/s/screen-global-error")},t),$O);function Gr(t,e,r){return t.namespaceURI&&t.namespaceURI!=="http://www.w3.org/1999/xhtml"||(e=Array.isArray(e)?e:[e],!e.includes(t.tagName.toLowerCase()))?!1:r?Object.entries(r).every(([n,i])=>t[n]===i):!0}m(Gr,"isElementType");function us(t){var e;if(T$(t)&&t.defaultView)return t.defaultView;if(!((e=t.ownerDocument)===null||e===void 0)&&e.defaultView)return t.ownerDocument.defaultView;throw new Error(`Could not determine window of node. Node was ${S$(t)}`)}m(us,"getWindow");function T$(t){return t.nodeType===9}m(T$,"isDocument");function S$(t){return typeof t=="function"?`function ${t.name}`:t===null?"null":String(t)}m(S$,"describe");function zR(t,e){return new Promise((r,n)=>{const i=new e;i.onerror=n,i.onabort=n,i.onload=()=>{r(String(i.result))},i.readAsText(t)})}m(zR,"readBlobText");function X1(t,e){const r={...e,length:e.length,item:m(n=>r[n],"item"),[Symbol.iterator]:m(function*(){for(let i=0;i<r.length;i++)yield r[i]},"nextFile")};return r.constructor=t.FileList,t.FileList&&Object.setPrototypeOf(r,t.FileList.prototype),Object.freeze(r),r}m(X1,"createFileList");function vl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(vl,"_define_property");var C$=class{getAsFile(){return this.file}getAsString(e){typeof this.data=="string"&&e(this.data)}webkitGetAsEntry(){throw new Error("not implemented")}constructor(e,r){vl(this,"kind",void 0),vl(this,"type",void 0),vl(this,"file",null),vl(this,"data",void 0),typeof e=="string"?(this.kind="string",this.type=String(r),this.data=e):(this.kind="file",this.type=e.type,this.file=e)}};m(C$,"DataTransferItemStub");var P$=C$,A$=class extends Array{add(...e){const r=new P$(e[0],e[1]);return this.push(r),r}clear(){this.splice(0,this.length)}remove(e){this.splice(e,1)}};m(A$,"DataTransferItemListStub");var Zoe=A$;function ug(t,e){const[r,n]=t.split("/"),i=!n||n==="*";return l=>e?l.type===(i?r:t):i?l.type.startsWith(`${r}/`):l.type===r}m(ug,"getTypeMatcher");function R$(t){var e;return new(e=class{getData(r){var n;const i=(n=this.items.find(ug(r,!0)))!==null&&n!==void 0?n:this.items.find(ug(r,!1));let l="";return i?.getAsString(c=>{l=c}),l}setData(r,n){const i=this.items.findIndex(ug(r,!0)),l=new P$(n,r);i>=0?this.items.splice(i,1,l):this.items.push(l)}clearData(r){if(r){const n=this.items.findIndex(ug(r,!0));n>=0&&this.items.remove(n)}else this.items.clear()}get types(){const r=[];return this.files.length&&r.push("Files"),this.items.forEach(n=>r.push(n.type)),Object.freeze(r),r}setDragImage(){}constructor(){vl(this,"dropEffect","none"),vl(this,"effectAllowed","uninitialized"),vl(this,"items",new Zoe),vl(this,"files",X1(t,[]))}},m(e,"DataTransferStub"),e)}m(R$,"createDataTransferStub");function Q1(t,e=[]){const r=typeof t.DataTransfer>"u"?R$(t):new t.DataTransfer;return Object.defineProperty(r,"files",{get:m(()=>X1(t,e),"get")}),r}m(Q1,"createDataTransfer");async function I$(t,e){return e.kind==="file"?e.getAsFile():new t.Blob([await new Promise(r=>e.getAsString(r))],{type:e.type})}m(I$,"getBlobFromDataTransferItem");function jR(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(jR,"_define_property");function BR(t,...e){var r;const n=Object.fromEntries(e.map(i=>[typeof i=="string"?"text/plain":i.type,Promise.resolve(i)]));return typeof t.ClipboardItem<"u"?new t.ClipboardItem(n):new(r=class{get types(){return Array.from(Object.keys(this.data))}async getType(i){const l=await this.data[i];if(!l)throw new Error(`${i} is not one of the available MIME types on this item.`);return l instanceof t.Blob?l:new t.Blob([l],{type:i})}constructor(i){jR(this,"data",void 0),this.data=i}},m(r,"ClipboardItem"),r)(n)}m(BR,"createClipboardItem");var ef=Symbol("Manage ClipboardSub");function o2(t,e){var r;return Object.assign(new(r=class extends t.EventTarget{async read(){return Array.from(this.items)}async readText(){let n="";for(const i of this.items){const l=i.types.includes("text/plain")?"text/plain":i.types.find(c=>c.startsWith("text/"));l&&(n+=await i.getType(l).then(c=>zR(c,t.FileReader)))}return n}async write(n){this.items=n}async writeText(n){this.items=[BR(t,n)]}constructor(...n){super(...n),jR(this,"items",[])}},m(r,"Clipboard"),r),{[ef]:e})}m(o2,"createClipboardStub");function ex(t){return!!t?.[ef]}m(ex,"isClipboardStub");function M$(t){if(ex(t.navigator.clipboard))return t.navigator.clipboard[ef];const e=Object.getOwnPropertyDescriptor(t.navigator,"clipboard");let r;const n={resetClipboardStub:m(()=>{r=o2(t,n)},"resetClipboardStub"),detachClipboardStub:m(()=>{e?Object.defineProperty(t.navigator,"clipboard",e):Object.defineProperty(t.navigator,"clipboard",{value:void 0,configurable:!0})},"detachClipboardStub")};return r=o2(t,n),Object.defineProperty(t.navigator,"clipboard",{get:m(()=>r,"get"),configurable:!0}),r[ef]}m(M$,"attachClipboardStubToView");function O$(t){ex(t.navigator.clipboard)&&t.navigator.clipboard[ef].resetClipboardStub()}m(O$,"resetClipboardStubOnView");function k$(t){ex(t.navigator.clipboard)&&t.navigator.clipboard[ef].detachClipboardStub()}m(k$,"detachClipboardStubFromView");async function L$(t){const e=t.defaultView,r=e?.navigator.clipboard,n=r&&await r.read();if(!n)throw new Error("The Clipboard API is unavailable.");const i=Q1(e);for(const l of n)for(const c of l.types)i.setData(c,await l.getType(c).then(s=>zR(s,e.FileReader)));return i}m(L$,"readDataTransferFromClipboard");async function qR(t,e){const r=us(t),n=r.navigator.clipboard,i=[];for(let c=0;c<e.items.length;c++){const s=e.items[c],p=await I$(r,s);i.push(BR(r,p))}if(!(n&&await n.write(i).then(()=>!0,()=>!1)))throw new Error("The Clipboard API is unavailable.")}m(qR,"writeDataTransferToClipboard");var Xb=globalThis;typeof Xb.afterEach=="function"&&Xb.afterEach(()=>{typeof globalThis.window<"u"&&O$(globalThis.window)});typeof Xb.afterAll=="function"&&Xb.afterAll(()=>{typeof globalThis.window<"u"&&k$(globalThis.window)});var D$=["input:not([type=hidden]):not([disabled])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contenteditable=""]','[contenteditable="true"]',"a[href]","[tabindex]:not([disabled])"].join(", ");function tx(t){return t.matches(D$)}m(tx,"isFocusable");function N$(t){return new t.constructor(t.type,t)}m(N$,"cloneEvent");function Na(t){for(let r=t;r;r=r.parentElement)if(Gr(r,["button","input","select","textarea","optgroup","option"])){if(r.hasAttribute("disabled"))return!0}else if(Gr(r,"fieldset")){var e;if(r.hasAttribute("disabled")&&!(!((e=r.querySelector(":scope > legend"))===null||e===void 0)&&e.contains(t)))return!0}else if(r.tagName.includes("-")&&r.constructor.formAssociated&&r.hasAttribute("disabled"))return!0;return!1}m(Na,"isDisabled");function Mf(t){const e=t.activeElement;return e?.shadowRoot?Mf(e.shadowRoot):Na(e)?t.ownerDocument?t.ownerDocument.body:t.body:e}m(Mf,"getActiveElement");function sb(t){var e;return(e=Mf(t))!==null&&e!==void 0?e:t.body}m(sb,"getActiveElementOrBody");function F$(t,e){let r=t;do{if(e(r))return r;r=r.parentElement}while(r&&r!==t.ownerDocument.body)}m(F$,"findClosest");function Kc(t){return t.hasAttribute("contenteditable")&&(t.getAttribute("contenteditable")=="true"||t.getAttribute("contenteditable")=="")}m(Kc,"isContentEditable");function tf(t){const e=z$(t);return e&&(e.closest('[contenteditable=""]')||e.closest('[contenteditable="true"]'))}m(tf,"getContentEditable");function z$(t){return t.nodeType===1?t:t.parentElement}m(z$,"getElement");var j$=function(t){return t.button="button",t.color="color",t.file="file",t.image="image",t.reset="reset",t.submit="submit",t.checkbox="checkbox",t.radio="radio",t}(j$||{});function $R(t){return Gr(t,"button")||Gr(t,"input")&&t.type in j$}m($R,"isClickableInput");function Rh(t){return VR(t)&&!t.readOnly||Kc(t)}m(Rh,"isEditable");var B$=function(t){return t.text="text",t.date="date",t["datetime-local"]="datetime-local",t.email="email",t.month="month",t.number="number",t.password="password",t.search="search",t.tel="tel",t.time="time",t.url="url",t.week="week",t}(B$||{});function VR(t){return Gr(t,"textarea")||Gr(t,"input")&&t.type in B$}m(VR,"isEditableInputOrTextArea");function na(t){return UR(t)&&VR(t)}m(na,"hasOwnSelection");function q$(t){return UR(t)&&$R(t)}m(q$,"hasNoSelection");function UR(t){return t.nodeType===1}m(UR,"isElement");function $$(t){const e=t.ownerDocument.getSelection();if(e?.focusNode&&na(t)){const n=tf(e.focusNode);if(n){if(!e.isCollapsed){var r;const i=((r=n.firstChild)===null||r===void 0?void 0:r.nodeType)===3?n.firstChild:n;e.setBaseAndExtent(i,0,i,0)}}else e.setBaseAndExtent(t,0,t,0)}}m($$,"updateSelectionOnFocus");function Ih(t,e){return nn().eventWrapper(t)}m(Ih,"wrapEvent");function Il(t){const e=F$(t,tx),r=Mf(t.ownerDocument);(e??t.ownerDocument.body)!==r&&(Ih(e?()=>e.focus():()=>r?.blur()),$$(e??t.ownerDocument.body))}m(Il,"focusElement");function V$(t){!tx(t)||!(Mf(t.ownerDocument)===t)||Ih(()=>t.blur())}m(V$,"blurElement");var Yc={};Yc.click=(t,e,r)=>{const n=e.closest("button,input,label,select,textarea"),i=n&&Gr(n,"label")&&n.control;if(i&&i!==e)return()=>{tx(i)&&(Il(i),r.dispatchEvent(i,N$(t)))};if(Gr(e,"input",{type:"file"}))return()=>{V$(e),e.dispatchEvent(new(us(e)).Event("fileDialog")),Il(e)}};var rf=Symbol("Displayed value in UI"),xl=Symbol("Displayed selection in UI"),Qb=Symbol("Initial value to compare on blur");function U$(t){return typeof t=="object"&&rf in t}m(U$,"isUIValue");function G$(t){return!!t&&typeof t=="object"&&xl in t}m(G$,"isUISelectionStart");function H$(t,e){t[Qb]===void 0&&(t[Qb]=t.value),t[rf]=e,t.value=Object.assign(new String(e),{[rf]:!0})}m(H$,"setUIValue");function ia(t){return t[rf]===void 0?t.value:String(t[rf])}m(ia,"getUIValue");function rx(t){t[rf]=void 0}m(rx,"setUIValueClean");function GR(t){t[Qb]=void 0}m(GR,"clearInitialValue");function J$(t){return t[Qb]}m(J$,"getInitialValue");function W$(t,e){t[xl]=e}m(W$,"setUISelectionRaw");function Wh(t,{focusOffset:e,anchorOffset:r=e},n="replace"){const i=ia(t).length,l=m(x=>Math.max(0,Math.min(i,x)),"sanitizeOffset"),c=n==="replace"||t[xl]===void 0?l(r):t[xl].anchorOffset,s=l(e),p=Math.min(c,s),g=Math.max(c,s);if(t[xl]={anchorOffset:c,focusOffset:s},t.selectionStart===p&&t.selectionEnd===g)return;const _=Object.assign(new Number(p),{[xl]:!0});try{t.setSelectionRange(_,g)}catch{}}m(Wh,"setUISelection");function nf(t){var e,r,n;const i=(n=t[xl])!==null&&n!==void 0?n:{anchorOffset:(e=t.selectionStart)!==null&&e!==void 0?e:0,focusOffset:(r=t.selectionEnd)!==null&&r!==void 0?r:0};return{...i,startOffset:Math.min(i.anchorOffset,i.focusOffset),endOffset:Math.max(i.anchorOffset,i.focusOffset)}}m(nf,"getUISelection");function Z$(t){return!!t[xl]}m(Z$,"hasUISelection");function Ig(t){t[xl]=void 0}m(Ig,"setUISelectionClean");var ev=globalThis.parseInt;function K$(t){const e=t.replace(/\D/g,"");if(e.length<2)return t;const r=ev(e[0],10),n=ev(e[1],10);if(r>=3||r===2&&n>=4){let i;return r>=3?i=1:i=2,s2(e,i)}return t.length===2?t:s2(e,2)}m(K$,"buildTimeValue");function s2(t,e){const r=t.slice(0,e),n=Math.min(ev(r,10),23),i=t.slice(e),l=ev(i,10),c=Math.min(l,59);return`${n.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`}m(s2,"build");function HR(t,e){const r=t.cloneNode();return r.value=e,r.value===e}m(HR,"isValidDateOrTimeValue");var Y$=function(t){return t.email="email",t.password="password",t.search="search",t.telephone="telephone",t.text="text",t.url="url",t}(Y$||{});function X$(t){var e;const r=(e=t.getAttribute("maxlength"))!==null&&e!==void 0?e:"";return/^\d+$/.test(r)&&Number(r)>=0?Number(r):void 0}m(X$,"getMaxLength");function Q$(t){return Gr(t,"textarea")||Gr(t,"input")&&t.type in Y$}m(Q$,"supportsMaxLength");function JR(t,e,r,n){if(Mg(t)&&e+r>=0&&e+r<=t.nodeValue.length)return{node:t,offset:e+r};const i=a2(t,e,r);if(i){if(Mg(i))return{node:i,offset:r>0?Math.min(1,i.nodeValue.length):Math.max(i.nodeValue.length-1,0)};if(Gr(i,"br")){const l=a2(i,void 0,r);return l?Mg(l)?{node:l,offset:r>0?0:l.nodeValue.length}:r<0&&Gr(l,"br")?{node:i.parentNode,offset:hg(i)}:{node:l.parentNode,offset:hg(l)+(r>0?0:1)}:r<0&&n==="deleteContentBackward"?{node:i.parentNode,offset:hg(i)}:void 0}else return{node:i.parentNode,offset:hg(i)+(r>0?1:0)}}}m(JR,"getNextCursorPosition");function a2(t,e,r){const n=Number(e)+(r<0?-1:0);return e!==void 0&&nx(t)&&n>=0&&n<t.children.length&&(t=t.children[n]),t7(t,r===1?"next":"previous",e7)}m(a2,"getNextCharacterContentNode");function e7(t){if(Mg(t))return!0;if(nx(t)){if(Gr(t,["input","textarea"]))return t.type!=="hidden";if(Gr(t,"br"))return!0}return!1}m(e7,"isTreatedAsCharacterContent");function hg(t){let e=0;for(;t.previousSibling;)e++,t=t.previousSibling;return e}m(hg,"getOffset");function nx(t){return t.nodeType===1}m(nx,"isElement");function Mg(t){return t.nodeType===3}m(Mg,"isTextNode");function t7(t,e,r){for(;;){var n;const i=t[`${e}Sibling`];if(i){if(t=r7(i,e==="next"?"first":"last"),r(t))return t}else if(t.parentNode&&(!nx(t.parentNode)||!Kc(t.parentNode)&&t.parentNode!==((n=t.ownerDocument)===null||n===void 0?void 0:n.body)))t=t.parentNode;else break}}m(t7,"walkNodes");function r7(t,e){for(;t.hasChildNodes();)t=t[`${e}Child`];return t}m(r7,"getDescendant");var iy=Symbol("Track programmatic changes for React workaround");function n7(t){return Object.getOwnPropertyNames(t).some(e=>e.startsWith("__react"))&&us(t).REACT_VERSION===17}m(n7,"isReact17Element");function i7(t){n7(t)&&(t[iy]={previousValue:String(t.value),tracked:[]})}m(i7,"startTrackValue");function o7(t,e){var r,n;(n=t[iy])===null||n===void 0||(r=n.tracked)===null||r===void 0||r.push(e),t[iy]||(rx(t),Wh(t,{focusOffset:e.length}))}m(o7,"trackOrSetValue");function s7(t,e){var r;const n=t[iy];if(t[iy]=void 0,!(!(n==null||(r=n.tracked)===null||r===void 0)&&r.length))return;const i=n.tracked.length===2&&n.tracked[0]===n.previousValue&&n.tracked[1]===t.value;i||rx(t),Z$(t)&&Wh(t,{focusOffset:i?e:t.value.length})}m(s7,"commitValueAfterInput");function WR(t){const e=a7(t);if(e&&na(e))return{type:"input",selection:nf(e)};const r=e?.ownerDocument.getSelection();return{type:tf(t)&&r?.anchorNode&&tf(r.anchorNode)?"contenteditable":"default",selection:r}}m(WR,"getTargetTypeAndSelection");function a7(t){return t.nodeType===1?t:t.parentElement}m(a7,"getElement");function l7(t){const e=WR(t);if(e.type==="input")return e.selection;if(e.type==="contenteditable"){var r;return(r=e.selection)===null||r===void 0?void 0:r.getRangeAt(0)}}m(l7,"getInputRange");function Xc({focusNode:t,focusOffset:e,anchorNode:r=t,anchorOffset:n=e}){var i,l;if(WR(t).type==="input")return Wh(t,{anchorOffset:n,focusOffset:e});(l=r.ownerDocument)===null||l===void 0||(i=l.getSelection())===null||i===void 0||i.setBaseAndExtent(r,n,t,e)}m(Xc,"setSelection");function ZR(t){return Gr(t,"input")&&["date","time"].includes(t.type)}m(ZR,"isDateOrTime");function Mh(t,e,r,n="insertText"){const i=l7(e);i&&(!ZR(e)&&!t.dispatchUIEvent(e,"beforeinput",{inputType:n,data:r})||("startContainer"in i?c7(t,e,i,r,n):u7(t,e,i,r,n)))}m(Mh,"input");function c7(t,e,r,n,i){let l=!1;if(!r.collapsed)l=!0,r.deleteContents();else if(["deleteContentBackward","deleteContentForward"].includes(i)){const c=JR(r.startContainer,r.startOffset,i==="deleteContentBackward"?-1:1,i);if(c){l=!0;const s=r.cloneRange();s.comparePoint(c.node,c.offset)<0?s.setStart(c.node,c.offset):s.setEnd(c.node,c.offset),s.deleteContents()}}if(n)if(r.endContainer.nodeType===3){const c=r.endOffset;r.endContainer.insertData(c,n),r.setStart(r.endContainer,c+n.length),r.setEnd(r.endContainer,c+n.length)}else{const c=e.ownerDocument.createTextNode(n);r.insertNode(c),r.setStart(c,n.length),r.setEnd(c,n.length)}(l||n)&&t.dispatchUIEvent(e,"input",{inputType:i})}m(c7,"editContenteditable");function u7(t,e,r,n,i){let l=n;if(Q$(e)){const g=X$(e);if(g!==void 0&&n.length>0){const _=g-e.value.length;if(_>0)l=n.substring(0,_);else return}}const{newValue:c,newOffset:s,oldValue:p}=h7(l,e,r,i);c===p&&s===r.startOffset&&s===r.endOffset||Gr(e,"input",{type:"number"})&&!d7(c)||(H$(e,c),Xc({focusNode:e,anchorOffset:s,focusOffset:s}),ZR(e)?HR(e,c)&&(l2(t,e,s,{}),t.dispatchUIEvent(e,"change"),GR(e)):l2(t,e,s,{data:n,inputType:i}))}m(u7,"editInputElement");function h7(t,e,{startOffset:r,endOffset:n},i){const l=ia(e),c=Math.max(0,r===n&&i==="deleteContentBackward"?r-1:r),s=l.substring(0,c),p=Math.min(l.length,r===n&&i==="deleteContentForward"?r+1:n),g=l.substring(p,l.length);let _=`${s}${t}${g}`,x=c+t.length;if(Gr(e,"input",{type:"time"})){const P=K$(_);P!==""&&HR(e,P)&&(_=P,x=P.length)}return{oldValue:l,newValue:_,newOffset:x}}m(h7,"calculateNewValue");function l2(t,e,r,n){t.dispatchUIEvent(e,"input",n),s7(e,r)}m(l2,"commitInput");function d7(t){var e,r;const n=t.split("e",2);return!(/[^\d.\-e]/.test(t)||Number((e=t.match(/-/g))===null||e===void 0?void 0:e.length)>2||Number((r=t.match(/\./g))===null||r===void 0?void 0:r.length)>1||n[1]&&!/^-?\d*$/.test(n[1]))}m(d7,"isValidNumberInput");Yc.cut=(t,e,r)=>()=>{Rh(e)&&Mh(r,e,"","deleteByCut")};function p7(t){return t?Kc(t)?t.textContent:ia(t):null}m(p7,"getValueOrTextContent");function f7(t){const e=us(t);for(let r=t;r?.ownerDocument;r=r.parentElement){const{display:n,visibility:i}=e.getComputedStyle(r);if(n==="none"||i==="hidden")return!1}return!0}m(f7,"isVisible");function m7(t,e){const r=t.ownerDocument,n=r.querySelectorAll(D$),i=Array.from(n).filter(p=>p===t||!(Number(p.getAttribute("tabindex"))<0||Na(p)));Number(t.getAttribute("tabindex"))>=0&&i.sort((p,g)=>{const _=Number(p.getAttribute("tabindex")),x=Number(g.getAttribute("tabindex"));return _===x?0:_===0?1:x===0?-1:_-x});const l={};let c=[r.body];const s=Gr(t,"input",{type:"radio"})?t.name:void 0;i.forEach(p=>{const g=p;if(Gr(g,"input",{type:"radio"})&&g.name){if(g===t){c.push(g);return}else if(g.name===s)return;if(g.checked){c=c.filter(_=>!Gr(_,"input",{type:"radio",name:g.name})),c.push(g),l[g.name]=g;return}if(typeof l[g.name]<"u")return}c.push(g)});for(let p=c.findIndex(g=>g===t);;)if(p+=e?-1:1,p===c.length?p=0:p===-1&&(p=c.length-1),c[p]===t||c[p]===r.body||f7(c[p]))return c[p]}m(m7,"getTabDestination");function c2(t,e){if(na(t)){const r=nf(t);Xc({focusNode:t,focusOffset:r.startOffset===r.endOffset?r.focusOffset+e:e<0?r.startOffset:r.endOffset})}else{const r=t.ownerDocument.getSelection();if(!r?.focusNode)return;if(r.isCollapsed){const n=JR(r.focusNode,r.focusOffset,e);n&&Xc({focusNode:n.node,focusOffset:n.offset})}else r[e<0?"collapseToStart":"collapseToEnd"]()}}m(c2,"moveSelection");function KR(t){if(na(t))return Xc({focusNode:t,anchorOffset:0,focusOffset:ia(t).length});var e;const r=(e=tf(t))!==null&&e!==void 0?e:t.ownerDocument.body;Xc({focusNode:r,anchorOffset:0,focusOffset:r.childNodes.length})}m(KR,"selectAll");function g7(t){if(na(t))return nf(t).startOffset===0&&nf(t).endOffset===ia(t).length;var e;const r=(e=tf(t))!==null&&e!==void 0?e:t.ownerDocument.body,n=t.ownerDocument.getSelection();return n?.anchorNode===r&&n.focusNode===r&&n.anchorOffset===0&&n.focusOffset===r.childNodes.length}m(g7,"isAllSelected");function Ep(t,e,r){var n;if(na(t))return Xc({focusNode:t,anchorOffset:e,focusOffset:r});if(Kc(t)&&((n=t.firstChild)===null||n===void 0?void 0:n.nodeType)===3)return Xc({focusNode:t.firstChild,anchorOffset:e,focusOffset:r});throw new Error("Not implemented. The result of this interaction is unreliable.")}m(Ep,"setSelectionRange");function dg(t,e,r){const n=us(e),i=Array.from(e.ownerDocument.querySelectorAll(e.name?`input[type="radio"][name="${n.CSS.escape(e.name)}"]`:'input[type="radio"][name=""], input[type="radio"]:not([name])'));for(let l=i.findIndex(c=>c===e)+r;;l+=r){if(i[l]||(l=r>0?0:i.length-1),i[l]===e)return;if(!Na(i[l])){Il(i[l]),t.dispatchUIEvent(i[l],"click");return}}}m(dg,"walkRadio");Yc.keydown=(t,e,r)=>{var n,i;return(i=(n=VO[t.key])===null||n===void 0?void 0:n.call(VO,t,e,r))!==null&&i!==void 0?i:Koe(t,e,r)};var VO={ArrowDown:m((t,e,r)=>{if(Gr(e,"input",{type:"radio"}))return()=>dg(r,e,1)},"ArrowDown"),ArrowLeft:m((t,e,r)=>Gr(e,"input",{type:"radio"})?()=>dg(r,e,-1):()=>c2(e,-1),"ArrowLeft"),ArrowRight:m((t,e,r)=>Gr(e,"input",{type:"radio"})?()=>dg(r,e,1):()=>c2(e,1),"ArrowRight"),ArrowUp:m((t,e,r)=>{if(Gr(e,"input",{type:"radio"}))return()=>dg(r,e,-1)},"ArrowUp"),Backspace:m((t,e,r)=>{if(Rh(e))return()=>{Mh(r,e,"","deleteContentBackward")}},"Backspace"),Delete:m((t,e,r)=>{if(Rh(e))return()=>{Mh(r,e,"","deleteContentForward")}},"Delete"),End:m((t,e)=>{if(Gr(e,["input","textarea"])||Kc(e))return()=>{var r,n;const i=(n=(r=p7(e))===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0;Ep(e,i,i)}},"End"),Home:m((t,e)=>{if(Gr(e,["input","textarea"])||Kc(e))return()=>{Ep(e,0,0)}},"Home"),PageDown:m((t,e)=>{if(Gr(e,["input"]))return()=>{const r=ia(e).length;Ep(e,r,r)}},"PageDown"),PageUp:m((t,e)=>{if(Gr(e,["input"]))return()=>{Ep(e,0,0)}},"PageUp"),Tab:m((t,e,r)=>()=>{const n=m7(e,r.system.keyboard.modifiers.Shift);Il(n),na(n)&&Wh(n,{anchorOffset:0,focusOffset:n.value.length})},"Tab")},Koe=m((t,e,r)=>{if(t.code==="KeyA"&&r.system.keyboard.modifiers.Control)return()=>KR(e)},"combinationBehavior");Yc.keypress=(t,e,r)=>{if(t.key==="Enter"){if(Gr(e,"button")||Gr(e,"input")&&Yoe.includes(e.type)||Gr(e,"a")&&e.href)return()=>{r.dispatchUIEvent(e,"click")};if(Gr(e,"input")){const n=e.form,i=n?.querySelector('input[type="submit"], button:not([type]), button[type="submit"]');return i?()=>r.dispatchUIEvent(i,"click"):n&&Xoe.includes(e.type)&&n.querySelectorAll("input").length===1?()=>r.dispatchUIEvent(n,"submit"):void 0}}if(Rh(e)){const n=t.key==="Enter"?Kc(e)&&!r.system.keyboard.modifiers.Shift?"insertParagraph":"insertLineBreak":"insertText",i=t.key==="Enter"?`
`:t.key;return()=>Mh(r,e,i,n)}};var Yoe=["button","color","file","image","reset","submit"],Xoe=["email","month","password","search","tel","text","url","week"];Yc.keyup=(t,e,r)=>{var n;return(n=UO[t.key])===null||n===void 0?void 0:n.call(UO,t,e,r)};var UO={" ":m((t,e,r)=>{if($R(e))return()=>r.dispatchUIEvent(e,"click")}," ")};Yc.paste=(t,e,r)=>{if(Rh(e))return()=>{var n;const i=(n=t.clipboardData)===null||n===void 0?void 0:n.getData("text");i&&Mh(r,e,i,"insertFromPaste")}};var y7={auxclick:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},beforeinput:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},blur:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},click:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},contextmenu:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},copy:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},change:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},cut:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dblclick:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},focus:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},focusin:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},focusout:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},keydown:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keypress:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keyup:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},paste:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},input:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},mousedown:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseenter:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseleave:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mousemove:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseout:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseover:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseup:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerover:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerenter:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},pointerdown:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointermove:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerup:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointercancel:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},pointerout:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerleave:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},submit:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}}};function YR(t){return y7[t].EventType}m(YR,"getEventClass");var Qoe=["MouseEvent","PointerEvent"];function _7(t){return Qoe.includes(YR(t))}m(_7,"isMouseEvent");function b7(t){return YR(t)==="KeyboardEvent"}m(b7,"isKeyboardEvent");var ese={ClipboardEvent:[x7],Event:[],FocusEvent:[pp,w7],InputEvent:[pp,E7],MouseEvent:[pp,ab,u2],PointerEvent:[pp,ab,u2,S7],KeyboardEvent:[pp,ab,T7]};function XR(t,e,r){const n=us(e),{EventType:i,defaultInit:l}=y7[t],c=new(v7(n))[i](t,l);return ese[i].forEach(s=>s(c,r??{})),c}m(XR,"createEvent");function v7(t){var e,r,n,i,l,c,s,p,g,_,x,P,A,M,N,z;const j=(z=t.Event)!==null&&z!==void 0?z:(e=class{},m(e,"Event"),e);var $;const J=($=t.AnimationEvent)!==null&&$!==void 0?$:(r=class extends j{},m(r,"AnimationEvent"),r);var X;const re=(X=t.ClipboardEvent)!==null&&X!==void 0?X:(n=class extends j{},m(n,"ClipboardEvent"),n);var ne;const Z=(ne=t.PopStateEvent)!==null&&ne!==void 0?ne:(i=class extends j{},m(i,"PopStateEvent"),i);var U;const K=(U=t.ProgressEvent)!==null&&U!==void 0?U:(l=class extends j{},m(l,"ProgressEvent"),l);var he;const ue=(he=t.TransitionEvent)!==null&&he!==void 0?he:(c=class extends j{},m(c,"TransitionEvent"),c);var Ee;const Ie=(Ee=t.UIEvent)!==null&&Ee!==void 0?Ee:(s=class extends j{},m(s,"UIEvent"),s);var ee;const pe=(ee=t.CompositionEvent)!==null&&ee!==void 0?ee:(p=class extends Ie{},m(p,"CompositionEvent"),p);var ve;const xe=(ve=t.FocusEvent)!==null&&ve!==void 0?ve:(g=class extends Ie{},m(g,"FocusEvent"),g);var tt;const Ke=(tt=t.InputEvent)!==null&&tt!==void 0?tt:(_=class extends Ie{},m(_,"InputEvent"),_);var Ze;const bt=(Ze=t.KeyboardEvent)!==null&&Ze!==void 0?Ze:(x=class extends Ie{},m(x,"KeyboardEvent"),x);var qe;const kt=(qe=t.MouseEvent)!==null&&qe!==void 0?qe:(P=class extends Ie{},m(P,"MouseEvent"),P);var Jt;const Pt=(Jt=t.DragEvent)!==null&&Jt!==void 0?Jt:(A=class extends kt{},m(A,"DragEvent"),A);var dt;const er=(dt=t.PointerEvent)!==null&&dt!==void 0?dt:(M=class extends kt{},m(M,"PointerEvent"),M);var Wt;const ar=(Wt=t.TouchEvent)!==null&&Wt!==void 0?Wt:(N=class extends Ie{},m(N,"TouchEvent"),N);return{Event:j,AnimationEvent:J,ClipboardEvent:re,PopStateEvent:Z,ProgressEvent:K,TransitionEvent:ue,UIEvent:Ie,CompositionEvent:pe,FocusEvent:xe,InputEvent:Ke,KeyboardEvent:bt,MouseEvent:kt,DragEvent:Pt,PointerEvent:er,TouchEvent:ar}}m(v7,"getEventConstructors");function zl(t,e){for(const[r,n]of Object.entries(e))Object.defineProperty(t,r,{get:m(()=>n??null,"get")})}m(zl,"assignProps");function Jn(t){return Number(t??0)}m(Jn,"sanitizeNumber");function x7(t,{clipboardData:e}){zl(t,{clipboardData:e})}m(x7,"initClipboardEvent");function w7(t,{relatedTarget:e}){zl(t,{relatedTarget:e})}m(w7,"initFocusEvent");function E7(t,{data:e,inputType:r,isComposing:n}){zl(t,{data:e,isComposing:!!n,inputType:String(r)})}m(E7,"initInputEvent");function pp(t,{view:e,detail:r}){zl(t,{view:e,detail:Jn(r??0)})}m(pp,"initUIEvent");function ab(t,{altKey:e,ctrlKey:r,metaKey:n,shiftKey:i,modifierAltGraph:l,modifierCapsLock:c,modifierFn:s,modifierFnLock:p,modifierNumLock:g,modifierScrollLock:_,modifierSymbol:x,modifierSymbolLock:P}){zl(t,{altKey:!!e,ctrlKey:!!r,metaKey:!!n,shiftKey:!!i,getModifierState(A){return!!{Alt:e,AltGraph:l,CapsLock:c,Control:r,Fn:s,FnLock:p,Meta:n,NumLock:g,ScrollLock:_,Shift:i,Symbol:x,SymbolLock:P}[A]}})}m(ab,"initUIEventModifiers");function T7(t,{key:e,code:r,location:n,repeat:i,isComposing:l,charCode:c}){zl(t,{key:String(e),code:String(r),location:Jn(n),repeat:!!i,isComposing:!!l,charCode:c})}m(T7,"initKeyboardEvent");function u2(t,{x:e,y:r,screenX:n,screenY:i,clientX:l=e,clientY:c=r,button:s,buttons:p,relatedTarget:g,offsetX:_,offsetY:x,pageX:P,pageY:A}){zl(t,{screenX:Jn(n),screenY:Jn(i),clientX:Jn(l),x:Jn(l),clientY:Jn(c),y:Jn(c),button:Jn(s),buttons:Jn(p),relatedTarget:g,offsetX:Jn(_),offsetY:Jn(x),pageX:Jn(P),pageY:Jn(A)})}m(u2,"initMouseEvent");function S7(t,{pointerId:e,width:r,height:n,pressure:i,tangentialPressure:l,tiltX:c,tiltY:s,twist:p,pointerType:g,isPrimary:_}){zl(t,{pointerId:Jn(e),width:Jn(r??1),height:Jn(n??1),pressure:Jn(i),tangentialPressure:Jn(l),tiltX:Jn(c),tiltY:Jn(s),twist:Jn(p),pointerType:String(g),isPrimary:!!_})}m(S7,"initPointerEvent");function C7(t,e,r,n=!1){(_7(e)||b7(e))&&(r={...r,...this.system.getUIEventModifiers()});const i=XR(e,t,r);return QR.call(this,t,i,n)}m(C7,"dispatchUIEvent");function QR(t,e,r=!1){var n;const i=e.type,l=r?()=>{}:(n=Yc[i])===null||n===void 0?void 0:n.call(Yc,e,t,this);if(l){e.preventDefault();let c=!1;return Object.defineProperty(e,"defaultPrevented",{get:m(()=>c,"get")}),Object.defineProperty(e,"preventDefault",{value:m(()=>{c=e.cancelable},"value")}),Ih(()=>t.dispatchEvent(e)),c||l(),!c}return Ih(()=>t.dispatchEvent(e))}m(QR,"dispatchEvent");function Sc(t,e,r){const n=XR(e,t,r);Ih(()=>t.dispatchEvent(n))}m(Sc,"dispatchDOMEvent");var GO=Symbol("patched focus/blur methods");function eI(t){if(t.prototype[GO])return;const{focus:e,blur:r}=t.prototype;Object.defineProperties(t.prototype,{focus:{configurable:!0,get:m(()=>i,"get")},blur:{configurable:!0,get:m(()=>l,"get")},[GO]:{configurable:!0,get:m(()=>({focus:e,blur:r}),"get")}});let n;function i(c){if(this.ownerDocument.visibilityState!=="hidden")return e.call(this,c);const s=h2(this.ownerDocument);if(s===this)return;const p=Symbol("focus call");n=p,s&&(r.call(s),Sc(s,"blur",{relatedTarget:this}),Sc(s,"focusout",{relatedTarget:n===p?this:null})),n===p&&(e.call(this,c),Sc(this,"focus",{relatedTarget:s})),n===p&&Sc(this,"focusin",{relatedTarget:s})}m(i,"patchedFocus");function l(){if(this.ownerDocument.visibilityState!=="hidden")return r.call(this);const c=h2(this.ownerDocument);if(c!==this)return;n=Symbol("blur call"),r.call(this),Sc(c,"blur",{relatedTarget:null}),Sc(c,"focusout",{relatedTarget:null})}m(l,"patchedBlur")}m(eI,"patchFocus");function h2(t){const e=Mf(t);return e?.tagName==="BODY"?null:e}m(h2,"getActiveTarget");var FE=Symbol("Interceptor for programmatical calls");function th(t,e,r){const n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=Object.getOwnPropertyDescriptor(t,e),l=n?.set?"set":"value";if(typeof n?.[l]!="function"||n[l][FE])throw new Error(`Element ${t.tagName} does not implement "${String(e)}".`);function c(...s){const{applyNative:p=!1,realArgs:g,then:_}=r.call(this,...s),x=(!p&&i||n)[l];l==="set"?x.call(this,g):x.call(this,...g),_?.()}m(c,"intercept"),c[FE]=FE,Object.defineProperty(t,e,{...i??n,[l]:c})}m(th,"prepareInterceptor");function P7(t){th(t,"value",m(function(r){const n=U$(r);return n&&i7(this),{applyNative:!!n,realArgs:A7(this,r),then:n?void 0:()=>o7(this,String(r))}},"interceptorImpl"))}m(P7,"prepareValueInterceptor");function A7(t,e){return Gr(t,"input",{type:"number"})&&String(e)!==""&&!Number.isNaN(Number(e))?String(Number(e)):String(e)}m(A7,"sanitizeValue");function R7(t){th(t,"setSelectionRange",m(function(r,...n){const i=G$(r);return{applyNative:!!i,realArgs:[Number(r),...n],then:m(()=>i?void 0:Ig(t),"then")}},"interceptorImpl")),th(t,"selectionStart",m(function(r){return{realArgs:r,then:m(()=>Ig(t),"then")}},"interceptorImpl")),th(t,"selectionEnd",m(function(r){return{realArgs:r,then:m(()=>Ig(t),"then")}},"interceptorImpl")),th(t,"select",m(function(){return{realArgs:[],then:m(()=>W$(t,{anchorOffset:0,focusOffset:ia(t).length}),"then")}},"interceptorImpl"))}m(R7,"prepareSelectionInterceptor");function I7(t){th(t,"setRangeText",m(function(...r){return{realArgs:r,then:m(()=>{rx(t),Ig(t)},"then")}},"interceptorImpl"))}m(I7,"prepareRangeTextInterceptor");var Mp=Symbol("Node prepared with document state workarounds");function tI(t){t[Mp]||(t.addEventListener("focus",e=>{const r=e.target;d2(r)},{capture:!0,passive:!0}),t.activeElement&&d2(t.activeElement),t.addEventListener("blur",e=>{const r=e.target,n=J$(r);n!==void 0&&(r.value!==n&&Sc(r,"change"),GR(r))},{capture:!0,passive:!0}),t[Mp]=Mp)}m(tI,"prepareDocument");function d2(t){t[Mp]||(Gr(t,["input","textarea"])&&(P7(t),R7(t),I7(t)),t[Mp]=Mp)}m(d2,"prepareElement");function M7(t){return O7(t)?t:t.ownerDocument}m(M7,"getDocumentFromNode");function O7(t){return t.nodeType===9}m(O7,"isDocument");var es=function(t){return t[t.Trigger=2]="Trigger",t[t.Call=1]="Call",t}({});function Tp(t,e){t.levelRefs[e]={}}m(Tp,"setLevelRef");function pg(t,e){return t.levelRefs[e]}m(pg,"getLevelRef");function Oh(t){const e=t.delay;if(typeof e=="number")return Promise.all([new Promise(r=>globalThis.setTimeout(()=>r(),e)),t.advanceTimers(e)])}m(Oh,"wait");var lb=function(t){return t[t.EachTrigger=4]="EachTrigger",t[t.EachApiCall=2]="EachApiCall",t[t.EachTarget=1]="EachTarget",t[t.Never=0]="Never",t}({});function xc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(xc,"_define_property");var _a=function(t){return t[t.STANDARD=0]="STANDARD",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.NUMPAD=3]="NUMPAD",t}({}),tse=["Alt","AltGraph","Control","Fn","Meta","Shift","Symbol"];function p2(t){return tse.includes(t)}m(p2,"isModifierKey");var rse=["CapsLock","FnLock","NumLock","ScrollLock","SymbolLock"];function f2(t){return rse.includes(t)}m(f2,"isModifierLock");var k7=class{isKeyPressed(e){return this.pressed.has(String(e.code))}getPressedKeys(){return this.pressed.values().map(e=>e.keyDef)}async keydown(e,r){const n=String(r.key),i=String(r.code),l=sb(e.config.document);this.setKeydownTarget(l),this.pressed.add(i,r),p2(n)&&(this.modifiers[n]=!0);const c=e.dispatchUIEvent(l,"keydown",{key:n,code:i});f2(n)&&!this.modifiers[n]&&(this.modifiers[n]=!0,this.modifierLockStart[n]=!0),c&&this.pressed.setUnprevented(i),c&&this.hasKeyPress(n)&&e.dispatchUIEvent(sb(e.config.document),"keypress",{key:n,code:i,charCode:r.key==="Enter"?13:String(r.key).charCodeAt(0)})}async keyup(e,r){const n=String(r.key),i=String(r.code),l=this.pressed.isUnprevented(i);this.pressed.delete(i),p2(n)&&!this.pressed.values().find(c=>c.keyDef.key===n)&&(this.modifiers[n]=!1),e.dispatchUIEvent(sb(e.config.document),"keyup",{key:n,code:i},!l),f2(n)&&this.modifiers[n]&&(this.modifierLockStart[n]?this.modifierLockStart[n]=!1:this.modifiers[n]=!1)}setKeydownTarget(e){e!==this.lastKeydownTarget&&(this.carryChar=""),this.lastKeydownTarget=e}hasKeyPress(e){return(e.length===1||e==="Enter")&&!this.modifiers.Control&&!this.modifiers.Alt}constructor(e){xc(this,"system",void 0),xc(this,"modifiers",{Alt:!1,AltGraph:!1,CapsLock:!1,Control:!1,Fn:!1,FnLock:!1,Meta:!1,NumLock:!1,ScrollLock:!1,Shift:!1,Symbol:!1,SymbolLock:!1}),xc(this,"pressed",new class{add(r,n){var i,l,c;(c=(i=this.registry)[l=r])!==null&&c!==void 0||(i[l]={keyDef:n,unpreventedDefault:!1})}has(r){return!!this.registry[r]}setUnprevented(r){const n=this.registry[r];n&&(n.unpreventedDefault=!0)}isUnprevented(r){var n;return!!(!((n=this.registry[r])===null||n===void 0)&&n.unpreventedDefault)}delete(r){delete this.registry[r]}values(){return Object.values(this.registry)}constructor(){xc(this,"registry",{})}}),xc(this,"carryChar",""),xc(this,"lastKeydownTarget",void 0),xc(this,"modifierLockStart",{}),this.system=e}};m(k7,"KeyboardHost");var nse=k7,ise=[..."0123456789".split("").map(t=>({code:`Digit${t}`,key:t})),...")!@#$%^&*(".split("").map((t,e)=>({code:`Digit${e}`,key:t,shiftKey:!0})),..."abcdefghijklmnopqrstuvwxyz".split("").map(t=>({code:`Key${t.toUpperCase()}`,key:t})),..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(t=>({code:`Key${t}`,key:t,shiftKey:!0})),{code:"BracketLeft",key:"["},{code:"BracketLeft",key:"{",shiftKey:!0},{code:"BracketRight",key:"]"},{code:"BracketRight",key:"}",shiftKey:!0},{code:"Space",key:" "},{code:"AltLeft",key:"Alt",location:_a.LEFT},{code:"AltRight",key:"Alt",location:_a.RIGHT},{code:"ShiftLeft",key:"Shift",location:_a.LEFT},{code:"ShiftRight",key:"Shift",location:_a.RIGHT},{code:"ControlLeft",key:"Control",location:_a.LEFT},{code:"ControlRight",key:"Control",location:_a.RIGHT},{code:"MetaLeft",key:"Meta",location:_a.LEFT},{code:"MetaRight",key:"Meta",location:_a.RIGHT},{code:"OSLeft",key:"OS",location:_a.LEFT},{code:"OSRight",key:"OS",location:_a.RIGHT},{code:"ContextMenu",key:"ContextMenu"},{code:"Tab",key:"Tab"},{code:"CapsLock",key:"CapsLock"},{code:"Backspace",key:"Backspace"},{code:"Enter",key:"Enter"},{code:"Escape",key:"Escape"},{code:"ArrowUp",key:"ArrowUp"},{code:"ArrowDown",key:"ArrowDown"},{code:"ArrowLeft",key:"ArrowLeft"},{code:"ArrowRight",key:"ArrowRight"},{code:"Home",key:"Home"},{code:"End",key:"End"},{code:"Delete",key:"Delete"},{code:"PageUp",key:"PageUp"},{code:"PageDown",key:"PageDown"},{code:"Fn",key:"Fn"},{code:"Symbol",key:"Symbol"},{code:"AltRight",key:"AltGraph"}],ose=[{name:"MouseLeft",pointerType:"mouse",button:"primary"},{name:"MouseRight",pointerType:"mouse",button:"secondary"},{name:"MouseMiddle",pointerType:"mouse",button:"auxiliary"},{name:"TouchA",pointerType:"touch"},{name:"TouchB",pointerType:"touch"},{name:"TouchC",pointerType:"touch"}];function L7(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(L7,"_define_property");var D7=class{getButtons(){let e=0;for(const r of Object.keys(this.pressed))e|=2**Number(r);return e}down(e){const r=tv(e.button);if(r in this.pressed){this.pressed[r].push(e);return}return this.pressed[r]=[e],r}up(e){const r=tv(e.button);if(r in this.pressed&&(this.pressed[r]=this.pressed[r].filter(n=>n.name!==e.name),this.pressed[r].length===0))return delete this.pressed[r],r}constructor(){L7(this,"pressed",{})}};m(D7,"Buttons");var N7=D7,HO={primary:0,secondary:1,auxiliary:2,back:3,X1:3,forward:4,X2:4};function tv(t=0){return t in HO?HO[t]:Number(t)}m(tv,"getMouseButtonId");var JO={1:2,2:1};function rv(t){return t=tv(t),t in JO?JO[t]:t}m(rv,"getMouseEventButton");function F7(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(F7,"_define_property");var z7=class{get countPressed(){return this.pressedKeys.size}isPressed(e){return this.pressedKeys.has(e.name)}addPressed(e){return this.pressedKeys.add(e.name)}removePressed(e){return this.pressedKeys.delete(e.name)}constructor(){F7(this,"pressedKeys",new Set)}};m(z7,"Device");var sse=z7;function Op(t,e){const r=[];for(let l=t;l;l=l.parentElement)r.push(l);const n=[];for(let l=e;l;l=l.parentElement)n.push(l);let i=0;for(;!(i>=r.length||i>=n.length||r[r.length-1-i]!==n[n.length-1-i]);i++);return[r.slice(0,r.length-i),n.slice(0,n.length-i),n.slice(n.length-i)]}m(Op,"getTreeDiff");function nv({target:t,node:e,offset:r}){return na(t)?{node:t,offset:r??ia(t).length}:e?{node:e,offset:r??(e.nodeType===3?e.nodeValue.length:e.childNodes.length)}:rI(t,r)}m(nv,"resolveCaretPosition");function rI(t,e,r=!0){let n=e===void 0?t.childNodes.length-1:0;const i=e===void 0?-1:1;for(;e===void 0?n>=(r?Math.max(t.childNodes.length-1,0):0):n<=t.childNodes.length;){if(e&&n===t.childNodes.length)throw new Error("The given offset is out of bounds.");const l=t.childNodes.item(n),c=String(l.textContent);if(c.length)if(e!==void 0&&c.length<e)e-=c.length;else{if(l.nodeType===1)return rI(l,e,!1);if(l.nodeType===3)return{node:l,offset:e??l.nodeValue.length}}n+=i}return{node:t,offset:t.childNodes.length}}m(rI,"findNodeAtTextOffset");function j7({document:t,target:e,clickCount:r,node:n,offset:i}){if(q$(e))return;const l=na(e),c=String(l?ia(e):e.textContent),[s,p]=n?[i,i]:B7(c,i,r);if(l)return Wh(e,{anchorOffset:s??c.length,focusOffset:p??c.length}),{node:e,start:s??0,end:p??c.length};{const{node:g,offset:_}=nv({target:e,node:n,offset:s}),{node:x,offset:P}=nv({target:e,node:n,offset:p}),A=e.ownerDocument.createRange();try{A.setStart(g,_),A.setEnd(x,P)}catch{throw new Error("The given offset is out of bounds.")}const M=t.getSelection();return M?.removeAllRanges(),M?.addRange(A.cloneRange()),A}}m(j7,"setSelectionPerMouseDown");function B7(t,e,r){if(r%3===1||t.length===0)return[e,e];const n=e??t.length;return r%3===2?[n-t.substr(0,e).match(/(\w+|\s+|\W)?$/)[0].length,e===void 0?e:e+t.substr(e).match(/^(\w+|\s+|\W)?/)[0].length]:[n-t.substr(0,e).match(/[^\r\n]*$/)[0].length,e===void 0?e:e+t.substr(e).match(/^[^\r\n]*/)[0].length]}m(B7,"getTextRange");function q7(t,{document:e,target:r,node:n,offset:i}){const l=nv({target:r,node:n,offset:i});if("node"in t){if(l.node===t.node){const c=l.offset<t.start?t.end:t.start,s=l.offset>t.end||l.offset<t.start?l.offset:t.end;Wh(t.node,{anchorOffset:c,focusOffset:s})}}else{const c=t.cloneRange(),s=c.comparePoint(l.node,l.offset);s<0?c.setStart(l.node,l.offset):s>0&&c.setEnd(l.node,l.offset);const p=e.getSelection();p?.removeAllRanges(),p?.addRange(c.cloneRange())}}m(q7,"modifySelectionPerMouseMove");function nI(t,e){var r,n,i,l,c,s,p,g,_,x,P,A,M,N,z,j,$,J,X,re,ne,Z,U,K;return t.target!==e.target||((r=t.coords)===null||r===void 0?void 0:r.x)!==((n=e.coords)===null||n===void 0?void 0:n.x)||((i=t.coords)===null||i===void 0?void 0:i.y)!==((l=e.coords)===null||l===void 0?void 0:l.y)||((c=t.coords)===null||c===void 0?void 0:c.clientX)!==((s=e.coords)===null||s===void 0?void 0:s.clientX)||((p=t.coords)===null||p===void 0?void 0:p.clientY)!==((g=e.coords)===null||g===void 0?void 0:g.clientY)||((_=t.coords)===null||_===void 0?void 0:_.offsetX)!==((x=e.coords)===null||x===void 0?void 0:x.offsetX)||((P=t.coords)===null||P===void 0?void 0:P.offsetY)!==((A=e.coords)===null||A===void 0?void 0:A.offsetY)||((M=t.coords)===null||M===void 0?void 0:M.pageX)!==((N=e.coords)===null||N===void 0?void 0:N.pageX)||((z=t.coords)===null||z===void 0?void 0:z.pageY)!==((j=e.coords)===null||j===void 0?void 0:j.pageY)||(($=t.coords)===null||$===void 0?void 0:$.screenX)!==((J=e.coords)===null||J===void 0?void 0:J.screenX)||((X=t.coords)===null||X===void 0?void 0:X.screenY)!==((re=e.coords)===null||re===void 0?void 0:re.screenY)||((ne=t.caret)===null||ne===void 0?void 0:ne.node)!==((Z=e.caret)===null||Z===void 0?void 0:Z.node)||((U=t.caret)===null||U===void 0?void 0:U.offset)!==((K=e.caret)===null||K===void 0?void 0:K.offset)}m(nI,"isDifferentPointerPosition");function wc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(wc,"_define_property");var $7=class{move(e,r,n){const i=this.position,l=this.getTarget(e);if(this.position=r,!nI(i,r))return;const c=this.getTarget(e),s=this.getEventInit("mousemove"),[p,g]=Op(l,c);return{leave:m(()=>{l!==c&&(e.dispatchUIEvent(l,"mouseout",s),p.forEach(_=>e.dispatchUIEvent(_,"mouseleave",s)))},"leave"),enter:m(()=>{l!==c&&(e.dispatchUIEvent(c,"mouseover",s),g.forEach(_=>e.dispatchUIEvent(_,"mouseenter",s)))},"enter"),move:m(()=>{n||(e.dispatchUIEvent(c,"mousemove",s),this.modifySelecting(e))},"move")}}down(e,r,n){const i=this.buttons.down(r);if(i===void 0)return;const l=this.getTarget(e);this.buttonDownTarget[i]=l;const c=this.getEventInit("mousedown",r.button),s=Na(l);!n&&(s||e.dispatchUIEvent(l,"mousedown",c))&&(this.startSelecting(e,c.detail),Il(l)),!s&&rv(r.button)===2&&e.dispatchUIEvent(l,"contextmenu",this.getEventInit("contextmenu",r.button))}up(e,r,n){const i=this.buttons.up(r);if(i===void 0)return;const l=this.getTarget(e);if(!Na(l)){if(!n){const s=this.getEventInit("mouseup",r.button);e.dispatchUIEvent(l,"mouseup",s),this.endSelecting()}const c=Op(this.buttonDownTarget[i],l)[2][0];if(c){const s=this.getEventInit("click",r.button);s.detail&&(e.dispatchUIEvent(c,s.button===0?"click":"auxclick",s),s.button===0&&s.detail===2&&e.dispatchUIEvent(c,"dblclick",{...this.getEventInit("dblclick",r.button),detail:s.detail}))}}}resetClickCount(){this.clickCount.reset()}getEventInit(e,r){const n={...this.position.coords};return n.button=rv(r),n.buttons=this.buttons.getButtons(),e==="mousedown"?n.detail=this.clickCount.getOnDown(n.button):e==="mouseup"?n.detail=this.clickCount.getOnUp(n.button):(e==="click"||e==="auxclick")&&(n.detail=this.clickCount.incOnClick(n.button)),n}getTarget(e){var r;return(r=this.position.target)!==null&&r!==void 0?r:e.config.document.body}startSelecting(e,r){var n,i;this.selecting=j7({document:e.config.document,target:this.getTarget(e),node:(n=this.position.caret)===null||n===void 0?void 0:n.node,offset:(i=this.position.caret)===null||i===void 0?void 0:i.offset,clickCount:r})}modifySelecting(e){var r,n;this.selecting&&q7(this.selecting,{document:e.config.document,target:this.getTarget(e),node:(r=this.position.caret)===null||r===void 0?void 0:r.node,offset:(n=this.position.caret)===null||n===void 0?void 0:n.offset})}endSelecting(){this.selecting=void 0}constructor(){wc(this,"position",{}),wc(this,"buttons",new N7),wc(this,"selecting",void 0),wc(this,"buttonDownTarget",{}),wc(this,"clickCount",new class{incOnClick(e){const r=this.down[e]===void 0?void 0:Number(this.down[e])+1;return this.count=this.count[e]===void 0?{}:{[e]:Number(this.count[e])+1},r}getOnDown(e){var r;this.down={[e]:(r=this.count[e])!==null&&r!==void 0?r:0};var n;return this.count={[e]:(n=this.count[e])!==null&&n!==void 0?n:0},Number(this.count[e])+1}getOnUp(e){return this.down[e]===void 0?void 0:Number(this.down[e])+1}reset(){this.count={}}constructor(){wc(this,"down",{}),wc(this,"count",{})}})}};m($7,"Mouse");var ase=$7;function oy(t,e){var r;return((r=iI(t,e))===null||r===void 0?void 0:r.pointerEvents)!=="none"}m(oy,"hasPointerEvents");function V7(t){const e=us(t);for(let r=t,n=[];r?.ownerDocument;r=r.parentElement){n.push(r);const i=e.getComputedStyle(r).pointerEvents;if(i&&!["inherit","unset"].includes(i))return{pointerEvents:i,tree:n}}}m(V7,"closestPointerEventsDeclaration");var WO=Symbol("Last check for pointer-events");function iI(t,e){const r=e[WO];if(!(t.config.pointerEventsCheck!==lb.Never&&(!r||m2(t.config.pointerEventsCheck,lb.EachApiCall)&&r[es.Call]!==pg(t,es.Call)||m2(t.config.pointerEventsCheck,lb.EachTrigger)&&r[es.Trigger]!==pg(t,es.Trigger))))return r?.result;const i=V7(e);return e[WO]={[es.Call]:pg(t,es.Call),[es.Trigger]:pg(t,es.Trigger),result:i},i}m(iI,"checkPointerEvents");function Sp(t,e){const r=iI(t,e);if(r?.pointerEvents==="none")throw new Error([`Unable to perform pointer interaction as the element ${r.tree.length>1?"inherits":"has"} \`pointer-events: none\`:`,"",U7(r.tree)].join(`
`))}m(Sp,"assertPointerEvents");function U7(t){return t.reverse().map((e,r)=>["".padEnd(r),e.tagName,e.id&&`#${e.id}`,e.hasAttribute("data-testid")&&`(testId=${e.getAttribute("data-testid")})`,G7(e),t.length>1&&r===0&&"  <-- This element declared `pointer-events: none`",t.length>1&&r===t.length-1&&"  <-- Asserted pointer events here"].filter(Boolean).join("")).join(`
`)}m(U7,"printTree");function G7(t){var e;let r;if(t.hasAttribute("aria-label"))r=t.getAttribute("aria-label");else if(t.hasAttribute("aria-labelledby")){var n,i;r=(i=t.ownerDocument.getElementById(t.getAttribute("aria-labelledby")))===null||i===void 0||(n=i.textContent)===null||n===void 0?void 0:n.trim()}else if(Gr(t,["button","input","meter","output","progress","select","textarea"])&&(!((e=t.labels)===null||e===void 0)&&e.length))r=Array.from(t.labels).map(c=>{var s;return(s=c.textContent)===null||s===void 0?void 0:s.trim()}).join("|");else if(Gr(t,"button")){var l;r=(l=t.textContent)===null||l===void 0?void 0:l.trim()}return r=r?.replace(/\n/g,"  "),Number(r?.length)>30&&(r=`${r?.substring(0,29)}`),r?`(label=${r})`:""}m(G7,"getLabelDescr");function m2(t,e){return(t&e)>0}m(m2,"hasBitFlag");function xa(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(xa,"_define_property");var H7=class{init(e){const r=this.getTarget(e),[,n]=Op(null,r),i=this.getEventInit();return Sp(e,r),e.dispatchUIEvent(r,"pointerover",i),n.forEach(l=>e.dispatchUIEvent(l,"pointerenter",i)),this}move(e,r){const n=this.position,i=this.getTarget(e);if(this.position=r,!nI(n,r))return;const l=this.getTarget(e),c=this.getEventInit(-1),[s,p]=Op(i,l);return{leave:m(()=>{oy(e,i)&&i!==l&&(e.dispatchUIEvent(i,"pointerout",c),s.forEach(g=>e.dispatchUIEvent(g,"pointerleave",c)))},"leave"),enter:m(()=>{Sp(e,l),i!==l&&(e.dispatchUIEvent(l,"pointerover",c),p.forEach(g=>e.dispatchUIEvent(g,"pointerenter",c)))},"enter"),move:m(()=>{e.dispatchUIEvent(l,"pointermove",c)},"move")}}down(e,r=0){if(this.isDown)return;const n=this.getTarget(e);Sp(e,n),this.isDown=!0,this.isPrevented=!e.dispatchUIEvent(n,"pointerdown",this.getEventInit(r))}up(e,r=0){if(!this.isDown)return;const n=this.getTarget(e);Sp(e,n),this.isPrevented=!1,this.isDown=!1,e.dispatchUIEvent(n,"pointerup",this.getEventInit(r))}release(e){const r=this.getTarget(e),[n]=Op(r,null),i=this.getEventInit();oy(e,r)&&(e.dispatchUIEvent(r,"pointerout",i),n.forEach(l=>e.dispatchUIEvent(l,"pointerleave",i))),this.isCancelled=!0}getTarget(e){var r;return(r=this.position.target)!==null&&r!==void 0?r:e.config.document.body}getEventInit(e){return{...this.position.coords,pointerId:this.pointerId,pointerType:this.pointerType,isPrimary:this.isPrimary,button:rv(e),buttons:this.buttons.getButtons()}}constructor({pointerId:e,pointerType:r,isPrimary:n},i){xa(this,"pointerId",void 0),xa(this,"pointerType",void 0),xa(this,"isPrimary",void 0),xa(this,"buttons",void 0),xa(this,"isMultitouch",!1),xa(this,"isCancelled",!1),xa(this,"isDown",!1),xa(this,"isPrevented",!1),xa(this,"position",{}),this.pointerId=e,this.pointerType=r,this.isPrimary=n,this.isMultitouch=!n,this.buttons=i}};m(H7,"Pointer");var lse=H7;function pl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(pl,"_define_property");var J7=class{isKeyPressed(e){return this.devices.get(e.pointerType).isPressed(e)}async press(e,r,n){this.devices.get(r.pointerType).addPressed(r),this.buttons.down(r);const i=this.getPointerName(r),l=r.pointerType==="touch"?this.pointers.new(i,r.pointerType,this.buttons):this.pointers.get(i);l.position=n,l.pointerType!=="touch"&&(this.mouse.position=n),l.pointerType==="touch"&&l.init(e),l.down(e,r.button),l.pointerType!=="touch"&&this.mouse.down(e,r,l.isPrevented)}async move(e,r,n){const i=this.pointers.get(r),l=i.move(e,n),c=i.pointerType==="touch"?void 0:this.mouse.move(e,n,i.isPrevented);l?.leave(),c?.leave(),l?.enter(),c?.enter(),l?.move(),c?.move()}async release(e,r,n){const i=this.devices.get(r.pointerType);i.removePressed(r),this.buttons.up(r);const l=this.pointers.get(this.getPointerName(r)),c=l.isPrevented;if(l.position=n,l.pointerType!=="touch"&&(this.mouse.position=n),i.countPressed===0&&l.up(e,r.button),l.pointerType==="touch"&&l.release(e),l.pointerType==="touch"&&!l.isMultitouch){const s=this.mouse.move(e,n,c);s?.leave(),s?.enter(),s?.move(),this.mouse.down(e,r,c)}if(!l.isMultitouch){const s=this.mouse.move(e,n,c);s?.leave(),s?.enter(),s?.move(),this.mouse.up(e,r,c)}}getPointerName(e){return e.pointerType==="touch"?e.name:e.pointerType}getPreviousPosition(e){return this.pointers.has(e)?this.pointers.get(e).position:void 0}resetClickCount(){this.mouse.resetClickCount()}getMouseTarget(e){var r;return(r=this.mouse.position.target)!==null&&r!==void 0?r:e.config.document.body}setMousePosition(e){this.mouse.position=e,this.pointers.get("mouse").position=e}constructor(e){pl(this,"system",void 0),pl(this,"mouse",void 0),pl(this,"buttons",void 0),pl(this,"devices",new class{get(r){var n,i,l;return(l=(n=this.registry)[i=r])!==null&&l!==void 0?l:n[i]=new sse}constructor(){pl(this,"registry",{})}}),pl(this,"pointers",new class{new(r,n,i){const l=n!=="touch"||!Object.values(this.registry).some(c=>c.pointerType==="touch"&&!c.isCancelled);return l||Object.values(this.registry).forEach(c=>{c.pointerType===n&&!c.isCancelled&&(c.isMultitouch=!0)}),this.registry[r]=new lse({pointerId:this.nextId++,pointerType:n,isPrimary:l},i),this.registry[r]}get(r){if(!this.has(r))throw new Error(`Trying to access pointer "${r}" which does not exist.`);return this.registry[r]}has(r){return r in this.registry}constructor(){pl(this,"registry",{}),pl(this,"nextId",1)}}),this.system=e,this.buttons=new N7,this.mouse=new ase,this.pointers.new("mouse","mouse",this.buttons)}};m(J7,"PointerHost");var cse=J7;function g2(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(g2,"_define_property");var W7=class{getUIEventModifiers(){return{altKey:this.keyboard.modifiers.Alt,ctrlKey:this.keyboard.modifiers.Control,metaKey:this.keyboard.modifiers.Meta,shiftKey:this.keyboard.modifiers.Shift,modifierAltGraph:this.keyboard.modifiers.AltGraph,modifierCapsLock:this.keyboard.modifiers.CapsLock,modifierFn:this.keyboard.modifiers.Fn,modifierFnLock:this.keyboard.modifiers.FnLock,modifierNumLock:this.keyboard.modifiers.NumLock,modifierScrollLock:this.keyboard.modifiers.ScrollLock,modifierSymbol:this.keyboard.modifiers.Symbol,modifierSymbolLock:this.keyboard.modifiers.SymbolLock}}constructor(){g2(this,"keyboard",new nse(this)),g2(this,"pointer",new cse(this))}};m(W7,"System");var Z7=W7;async function K7(t){const e=[];return this.config.skipHover||e.push({target:t}),e.push({keys:"[MouseLeft]",target:t}),this.pointer(e)}m(K7,"click");async function Y7(t){return this.pointer([{target:t},"[MouseLeft][MouseLeft]"])}m(Y7,"dblClick");async function X7(t){return this.pointer([{target:t},"[MouseLeft][MouseLeft][MouseLeft]"])}m(X7,"tripleClick");async function Q7(t){return this.pointer({target:t})}m(Q7,"hover");async function e9(t){return Sp(this,this.system.pointer.getMouseTarget(this)),this.pointer({target:t.ownerDocument.body})}m(e9,"unhover");async function t9({shift:t}={}){return this.keyboard(t===!0?"{Shift>}{Tab}{/Shift}":t===!1?"[/ShiftLeft][/ShiftRight]{Tab}":"{Tab}")}m(t9,"tab");var oI=function(t){return t["{"]="}",t["["]="]",t}(oI||{});function sI(t,e){let r=0;const n=t[r]in oI?t[r]:"";r+=n.length;const l=new RegExp(`^\\${n}{2}`).test(t)?"":n;return{type:l,...l===""?r9(t,r,e):n9(t,r,l,e)}}m(sI,"readNextDescriptor");function r9(t,e,r){const n=t[e];return aI(n,t,e,r),e+=n.length,{consumedLength:e,descriptor:n,releasePrevious:!1,releaseSelf:!0,repeat:1}}m(r9,"readPrintableChar");function n9(t,e,r,n){var i,l;const c=t[e]==="/"?"/":"";e+=c.length;const s=r==="{"&&t[e]==="\\";e+=Number(s);const p=s?t[e]:(i=t.slice(e).match(r==="{"?/^\w+|^[^}>/]/:/^\w+/))===null||i===void 0?void 0:i[0];aI(p,t,e,n),e+=p.length;var g;const _=(g=(l=t.slice(e).match(/^>\d+/))===null||l===void 0?void 0:l[0])!==null&&g!==void 0?g:"";e+=_.length;const x=t[e]==="/"||!_&&t[e]===">"?t[e]:"";e+=x.length;const P=oI[r],A=t[e]===P?P:"";if(!A)throw new Error(lI([!_&&"repeat modifier",!x&&"release modifier",`"${P}"`].filter(Boolean).join(" or "),t[e],t,n));return e+=A.length,{consumedLength:e,descriptor:p,releasePrevious:!!c,repeat:_?Math.max(Number(_.substr(1)),1):1,releaseSelf:i9(x,_)}}m(n9,"readTag");function aI(t,e,r,n){if(!t)throw new Error(lI("key descriptor",e[r],e,n))}m(aI,"assertDescriptor");function i9(t,e){if(t)return t==="/";if(e)return!1}m(i9,"hasReleaseSelf");function lI(t,e,r,n){return`Expected ${t} but found "${e??""}" in "${r}"
    See ${n==="pointer"?"https://testing-library.com/docs/user-event/pointer#pressing-a-button-or-touching-the-screen":"https://testing-library.com/docs/user-event/keyboard"}
    for more information about how userEvent parses your input.`}m(lI,"getErrorMessage");function o9(t,e){const r=[];do{const{type:i,descriptor:l,consumedLength:c,releasePrevious:s,releaseSelf:p=!0,repeat:g}=sI(e,"keyboard");var n;const _=(n=t.find(x=>{if(i==="["){var P;return((P=x.code)===null||P===void 0?void 0:P.toLowerCase())===l.toLowerCase()}else if(i==="{"){var A;return((A=x.key)===null||A===void 0?void 0:A.toLowerCase())===l.toLowerCase()}return x.key===l}))!==null&&n!==void 0?n:{key:"Unknown",code:"Unknown",[i==="["?"code":"key"]:l};r.push({keyDef:_,releasePrevious:s,releaseSelf:p,repeat:g}),e=e.slice(c)}while(e);return r}m(o9,"parseKeyDef");async function s9(t){const e=o9(this.config.keyboardMap,t);for(let r=0;r<e.length;r++)await Oh(this.config),await a9(this,e[r])}m(s9,"keyboard");async function a9(t,{keyDef:e,releasePrevious:r,releaseSelf:n,repeat:i}){const{system:l}=t;if(l.keyboard.isKeyPressed(e)&&await l.keyboard.keyup(t,e),!r){for(let c=1;c<=i;c++)await l.keyboard.keydown(t,e),c<i&&await Oh(t.config);n&&await l.keyboard.keyup(t,e)}}m(a9,"keyboardAction");async function l9(t){for(const e of t.system.keyboard.getPressedKeys())await t.system.keyboard.keyup(t,e)}m(l9,"releaseAllKeys");function cI(t){const e=na(t)?{"text/plain":c9(t)}:{"text/plain":String(t.ownerDocument.getSelection())},r=Q1(us(t));for(const n in e)e[n]&&r.setData(n,e[n]);return r}m(cI,"copySelection");function c9(t){const e=nf(t);return ia(t).substring(e.startOffset,e.endOffset)}m(c9,"readSelectedValueFromInput");async function u9(){const t=this.config.document;var e;const r=(e=t.activeElement)!==null&&e!==void 0?e:t.body,n=cI(r);if(n.items.length!==0)return this.dispatchUIEvent(r,"copy",{clipboardData:n})&&this.config.writeToClipboard&&await qR(t,n),n}m(u9,"copy");async function h9(){const t=this.config.document;var e;const r=(e=t.activeElement)!==null&&e!==void 0?e:t.body,n=cI(r);if(n.items.length!==0)return this.dispatchUIEvent(r,"cut",{clipboardData:n})&&this.config.writeToClipboard&&await qR(r.ownerDocument,n),n}m(h9,"cut");async function d9(t){const e=this.config.document;var r;const n=(r=e.activeElement)!==null&&r!==void 0?r:e.body;var i;const l=(i=typeof t=="string"?p9(e,t):t)!==null&&i!==void 0?i:await L$(e).catch(()=>{throw new Error("`userEvent.paste()` without `clipboardData` requires the `ClipboardAPI` to be available.")});this.dispatchUIEvent(n,"paste",{clipboardData:l})}m(d9,"paste");function p9(t,e){const r=Q1(us(t));return r.setData("text",e),r}m(p9,"getClipboardDataFromString");function y2(t,e){const r=[];do{const{descriptor:n,consumedLength:i,releasePrevious:l,releaseSelf:c=!0}=sI(e,"pointer"),s=t.find(p=>p.name===n);s&&r.push({keyDef:s,releasePrevious:l,releaseSelf:c}),e=e.slice(i)}while(e);return r}m(y2,"parseKeyDef");async function f9(t){const{pointerMap:e}=this.config,r=[];(Array.isArray(t)?t:[t]).forEach(n=>{typeof n=="string"?r.push(...y2(e,n)):"keys"in n?r.push(...y2(e,n.keys).map(i=>({...n,...i}))):r.push(n)});for(let n=0;n<r.length;n++)await Oh(this.config),await m9(this,r[n]);this.system.pointer.resetClickCount()}m(f9,"pointer");async function m9(t,e){var r,n;const i="pointerName"in e&&e.pointerName?e.pointerName:"keyDef"in e?t.system.pointer.getPointerName(e.keyDef):"mouse",l=t.system.pointer.getPreviousPosition(i);var c,s,p,g;const _={target:(c=e.target)!==null&&c!==void 0?c:g9(t,l),coords:(s=e.coords)!==null&&s!==void 0?s:l?.coords,caret:{node:(p=e.node)!==null&&p!==void 0?p:_2(e)||l==null||(r=l.caret)===null||r===void 0?void 0:r.node,offset:(g=e.offset)!==null&&g!==void 0?g:_2(e)||l==null||(n=l.caret)===null||n===void 0?void 0:n.offset}};"keyDef"in e?(t.system.pointer.isKeyPressed(e.keyDef)&&(Tp(t,es.Trigger),await t.system.pointer.release(t,e.keyDef,_)),e.releasePrevious||(Tp(t,es.Trigger),await t.system.pointer.press(t,e.keyDef,_),e.releaseSelf&&(Tp(t,es.Trigger),await t.system.pointer.release(t,e.keyDef,_)))):(Tp(t,es.Trigger),await t.system.pointer.move(t,i,_))}m(m9,"pointerAction");function _2(t){var e,r;return!!((r=(e=t.target)!==null&&e!==void 0?e:t.node)!==null&&r!==void 0?r:t.offset!==void 0)}m(_2,"hasCaretPosition");function g9(t,e){if(!e)throw new Error("This pointer has no previous position. Provide a target property!");var r;return(r=e.target)!==null&&r!==void 0?r:t.config.document.body}m(g9,"getPrevTarget");async function y9(t){if(!Rh(t)||Na(t))throw new Error("clear()` is only supported on editable elements.");if(Il(t),t.ownerDocument.activeElement!==t)throw new Error("The element to be cleared could not be focused.");if(KR(t),!g7(t))throw new Error("The element content to be cleared could not be selected.");Mh(this,t,"","deleteContentBackward")}m(y9,"clear");async function _9(t,e){return uI.call(this,!0,t,e)}m(_9,"selectOptions");async function b9(t,e){return uI.call(this,!1,t,e)}m(b9,"deselectOptions");async function uI(t,e,r){if(!t&&!e.multiple)throw nn().getElementError("Unable to deselect an option in a non-multiple select. Use selectOptions to change the selection instead.",e);const n=Array.isArray(r)?r:[r],i=Array.from(e.querySelectorAll('option, [role="option"]')),l=n.map(s=>{if(typeof s!="string"&&i.includes(s))return s;{const p=i.find(g=>g.value===s||g.innerHTML===s);if(p)return p;throw nn().getElementError(`Value "${String(s)}" not found in options`,e)}}).filter(s=>!Na(s));if(Na(e)||!l.length)return;const c=m(s=>{s.selected=t,this.dispatchUIEvent(e,"input",{bubbles:!0,cancelable:!1,composed:!0}),this.dispatchUIEvent(e,"change")},"selectOption");if(Gr(e,"select"))if(e.multiple)for(const s of l){const p=this.config.pointerEventsCheck===0?!0:oy(this,s);p&&(this.dispatchUIEvent(s,"pointerover"),this.dispatchUIEvent(e,"pointerenter"),this.dispatchUIEvent(s,"mouseover"),this.dispatchUIEvent(e,"mouseenter"),this.dispatchUIEvent(s,"pointermove"),this.dispatchUIEvent(s,"mousemove"),this.dispatchUIEvent(s,"pointerdown"),this.dispatchUIEvent(s,"mousedown")),Il(e),p&&(this.dispatchUIEvent(s,"pointerup"),this.dispatchUIEvent(s,"mouseup")),c(s),p&&this.dispatchUIEvent(s,"click"),await Oh(this.config)}else if(l.length===1){const s=this.config.pointerEventsCheck===0?!0:oy(this,e);s?await this.click(e):Il(e),c(l[0]),s&&(this.dispatchUIEvent(e,"pointerover"),this.dispatchUIEvent(e,"pointerenter"),this.dispatchUIEvent(e,"mouseover"),this.dispatchUIEvent(e,"mouseenter"),this.dispatchUIEvent(e,"pointerup"),this.dispatchUIEvent(e,"mouseup"),this.dispatchUIEvent(e,"click")),await Oh(this.config)}else throw nn().getElementError("Cannot select multiple options on a non-multiple select",e);else if(e.getAttribute("role")==="listbox")for(const s of l)await this.click(s),await this.unhover(s);else throw nn().getElementError("Cannot select options on elements that are neither select nor listbox elements",e)}m(uI,"selectOptionsBase");async function v9(t,e,{skipClick:r=this.config.skipClick,skipAutoClose:n=this.config.skipAutoClose,initialSelectionStart:i,initialSelectionEnd:l}={}){t.disabled||(r||await this.click(t),i!==void 0&&Ep(t,i,l??i),await this.keyboard(e),n||await l9(this))}m(v9,"type");var ZO=Symbol("files and value properties are mocked");function cb(t,e,r){r?Object.defineProperty(t,e,r):delete t[e]}m(cb,"restoreProperty");function x9(t,e){var r;(r=t[ZO])===null||r===void 0||r.restore();const n=Object.getOwnPropertyDescriptor(t,"type"),i=Object.getOwnPropertyDescriptor(t,"value"),l=Object.getOwnPropertyDescriptor(t,"files");function c(){cb(t,"type",n),cb(t,"value",i),cb(t,"files",l)}m(c,"restore"),t[ZO]={restore:c},Object.defineProperties(t,{files:{configurable:!0,get:m(()=>e,"get")},value:{configurable:!0,get:m(()=>e.length?`C:\\fakepath\\${e[0].name}`:"","get"),set(s){if(s==="")c();else{var p;i==null||(p=i.set)===null||p===void 0||p.call(t,s)}}},type:{configurable:!0,get:m(()=>"file","get"),set(s){s!=="file"&&(c(),t.type=s)}}})}m(x9,"setFiles");async function w9(t,e){const r=Gr(t,"label")?t.control:t;if(!r||!Gr(r,"input",{type:"file"}))throw new TypeError(`The ${r===t?"given":"associated"} ${r?.tagName} element does not accept file uploads`);if(Na(t))return;const n=(Array.isArray(e)?e:[e]).filter(l=>!this.config.applyAccept||E9(l,r.accept)).slice(0,r.multiple?void 0:1),i=m(()=>{var l;n.length===((l=r.files)===null||l===void 0?void 0:l.length)&&n.every((c,s)=>{var p;return c===((p=r.files)===null||p===void 0?void 0:p.item(s))})||(x9(r,X1(us(t),n)),this.dispatchUIEvent(r,"input"),this.dispatchUIEvent(r,"change"))},"fileDialog");r.addEventListener("fileDialog",i),await this.click(t),r.removeEventListener("fileDialog",i)}m(w9,"upload");function fg(t){return t.toLowerCase().replace(/(\.|\/)jpg\b/g,"$1jpeg")}m(fg,"normalize");function E9(t,e){if(!e)return!0;const r=["audio/*","image/*","video/*"];return fg(e).trim().split(/\s*,\s*/).some(n=>n.startsWith(".")?fg(t.name).endsWith(n):r.includes(n)?fg(t.type).startsWith(n.replace("*","")):fg(t.type)===n)}m(E9,"isAcceptableFile");var KO={click:K7,dblClick:Y7,tripleClick:X7,hover:Q7,unhover:e9,tab:t9,keyboard:s9,copy:u9,cut:h9,paste:d9,pointer:f9,clear:y9,deselectOptions:b9,selectOptions:_9,type:v9,upload:w9};function T9(t){return nn().asyncWrapper(t)}m(T9,"wrapAsync");var S9={applyAccept:!0,autoModify:!0,delay:0,document:globalThis.document,keyboardMap:ise,pointerMap:ose,pointerEventsCheck:lb.EachApiCall,skipAutoClose:!1,skipClick:!1,skipHover:!1,writeToClipboard:!1,advanceTimers:m(()=>Promise.resolve(),"advanceTimers")},use={...S9,writeToClipboard:!0};function hI(t={},e=use,r){const n=R9(t,r,e);return{...e,...t,document:n}}m(hI,"createConfig");function C9(t={}){const e=hI(t);tI(e.document),eI(us(e.document).HTMLElement);var r;const n=(r=e.document.defaultView)!==null&&r!==void 0?r:globalThis.window;return M$(n),ix(e).api}m(C9,"setupMain");function eo({keyboardState:t,pointerState:e,...r}={},n){const i=hI(r,S9,n);tI(i.document),eI(us(i.document).HTMLElement);var l;const c=(l=e??t)!==null&&l!==void 0?l:new Z7;return{api:ix(i,c).api,system:c}}m(eo,"setupDirect");function P9(t){return ix({...this.config,...t},this.system).api}m(P9,"setupSub");function A9(t,e){function r(...n){return Tp(t,es.Call),T9(()=>e.apply(t,n).then(async i=>(await Oh(t.config),i)))}return m(r,"method"),Object.defineProperty(r,"name",{get:m(()=>e.name,"get")}),r}m(A9,"wrapAndBindImpl");function ix(t,e=new Z7){const r={};return Object.assign(r,{config:t,dispatchEvent:QR.bind(r),dispatchUIEvent:C7.bind(r),system:e,levelRefs:{},...KO}),{instance:r,api:{...Object.fromEntries(Object.entries(KO).map(([n,i])=>[n,A9(r,i)])),setup:P9.bind(r)}}}m(ix,"createInstance");function R9(t,e,r){var n,i;return(i=(n=t.document)!==null&&n!==void 0?n:e&&M7(e))!==null&&i!==void 0?i:r.document}m(R9,"getDocument");var I9={};ko(I9,{clear:()=>M9,click:()=>O9,copy:()=>k9,cut:()=>L9,dblClick:()=>D9,deselectOptions:()=>N9,hover:()=>F9,keyboard:()=>z9,paste:()=>B9,pointer:()=>j9,selectOptions:()=>q9,tab:()=>H9,tripleClick:()=>$9,type:()=>V9,unhover:()=>U9,upload:()=>G9});function M9(t){return eo().api.clear(t)}m(M9,"clear");function O9(t,e={}){return eo(e,t).api.click(t)}m(O9,"click");function k9(t={}){return eo(t).api.copy()}m(k9,"copy");function L9(t={}){return eo(t).api.cut()}m(L9,"cut");function D9(t,e={}){return eo(e).api.dblClick(t)}m(D9,"dblClick");function N9(t,e,r={}){return eo(r).api.deselectOptions(t,e)}m(N9,"deselectOptions");function F9(t,e={}){return eo(e).api.hover(t)}m(F9,"hover");async function z9(t,e={}){const{api:r,system:n}=eo(e);return r.keyboard(t).then(()=>n)}m(z9,"keyboard");async function j9(t,e={}){const{api:r,system:n}=eo(e);return r.pointer(t).then(()=>n)}m(j9,"pointer");function B9(t,e){return eo(e).api.paste(t)}m(B9,"paste");function q9(t,e,r={}){return eo(r).api.selectOptions(t,e)}m(q9,"selectOptions");function $9(t,e={}){return eo(e).api.tripleClick(t)}m($9,"tripleClick");function V9(t,e,r={}){return eo(r,t).api.type(t,e,r)}m(V9,"type");function U9(t,e={}){const{api:r,system:n}=eo(e);return n.pointer.setMousePosition({target:t}),r.unhover(t)}m(U9,"unhover");function G9(t,e,r={}){return eo(r).api.upload(t,e)}m(G9,"upload");function H9(t={}){return eo().api.tab(t)}m(H9,"tab");var J9={...I9,setup:C9},b2=wf({...iq},{getKeys:m(t=>Object.keys(t).filter(e=>e!=="eventWrapper"),"getKeys"),intercept:m((t,e)=>e[0]==="fireEvent"||t.startsWith("find")||t.startsWith("waitFor"),"intercept")});b2.screen=new Proxy(b2.screen,{get(t,e,r){return typeof window<"u"&&globalThis.location?.href?.includes("viewMode=docs")&&oi.warn(Kr`
        You are using Testing Library's \`screen\` object while the story is rendered in docs mode. This will likely lead to issues, as multiple stories are rendered in the same page and therefore screen will potentially find multiple elements. Use the \`canvas\` utility from the story context instead, which will scope the queries to each story's canvas.

        More info: https://storybook.js.org/docs/writing-tests/interaction-testing?ref=error#querying-the-canvas
      `),Reflect.get(t,e,r)}});var{buildQueries:hse,configure:dse,createEvent:pse,fireEvent:fse,findAllByAltText:mse,findAllByDisplayValue:gse,findAllByLabelText:yse,findAllByPlaceholderText:_se,findAllByRole:bse,findAllByTestId:vse,findAllByText:xse,findAllByTitle:wse,findByAltText:Ese,findByDisplayValue:Tse,findByLabelText:Sse,findByPlaceholderText:Cse,findByRole:Pse,findByTestId:Ase,findByText:Rse,findByTitle:Ise,getAllByAltText:Mse,getAllByDisplayValue:Ose,getAllByLabelText:kse,getAllByPlaceholderText:Lse,getAllByRole:Dse,getAllByTestId:Nse,getAllByText:Fse,getAllByTitle:zse,getByAltText:jse,getByDisplayValue:Bse,getByLabelText:qse,getByPlaceholderText:$se,getByRole:Vse,getByTestId:Use,getByText:Gse,getByTitle:Hse,getConfig:Jse,getDefaultNormalizer:Wse,getElementError:Zse,getNodeText:Kse,getQueriesForElement:Yse,getRoles:Xse,getSuggestedQuery:Qse,isInaccessible:eae,logDOM:tae,logRoles:rae,prettyDOM:nae,queries:iae,queryAllByAltText:oae,queryAllByAttribute:sae,queryAllByDisplayValue:aae,queryAllByLabelText:lae,queryAllByPlaceholderText:cae,queryAllByRole:uae,queryAllByTestId:hae,queryAllByText:dae,queryAllByTitle:pae,queryByAltText:fae,queryByAttribute:mae,queryByDisplayValue:gae,queryByLabelText:yae,queryByPlaceholderText:_ae,queryByRole:bae,queryByTestId:vae,queryByText:xae,queryByTitle:wae,queryHelpers:Eae,screen:Tae,waitFor:Sae,waitForElementToBeRemoved:Cae,within:W9,prettyFormat:Pae}=b2,Z9=J9,{userEvent:Aae}=wf({userEvent:J9},{intercept:!0,getKeys:m(t=>Object.keys(t).filter(e=>e!=="eventWrapper"),"getKeys")}),{expect:Rae}=wf({expect:tq},{getKeys:m((t,e)=>{if("constructor"in t&&t.constructor===Me){const r=["assert","__methods","__flags","_obj"],n=Object.keys(Object.getPrototypeOf(t)).filter(i=>!r.includes(i));return e>2?n:[...n,"not"]}return"any"in t?Object.keys(t).filter(r=>r!=="any"):Object.keys(t)},"getKeys"),mutate:!0,intercept:m(t=>t!=="expect","intercept")}),Iae={mock:m(()=>{},"mock")},YO=!1,Mae=m(t=>{const{parameters:e}=t;e?.actions?.disable||YO||(lR((r,n)=>{const i=r.getMockName();i!=="spy"&&i!=="vi.fn()"&&(!/^next\/.*::/.test(i)||["next/router::useRouter()","next/navigation::useRouter()","next/navigation::redirect","next/cache::","next/headers::cookies().set","next/headers::cookies().delete","next/headers::headers().set","next/headers::headers().delete"].some(l=>i.startsWith(l)))&&Of(i)(n)}),YO=!0)},"logActionsWhenMockCalled"),Oae=[Mae],XO=m(()=>({...zF,...BF}),"default"),iv="backgrounds",kae={light:{name:"light",value:"#F8F8F8"},dark:{name:"dark",value:"#333"}},{document:Js}=globalThis,Lae=m(()=>globalThis?.matchMedia?!!globalThis.matchMedia("(prefers-reduced-motion: reduce)")?.matches:!1,"isReduceMotionEnabled"),QO=m(t=>{(Array.isArray(t)?t:[t]).forEach(Dae)},"clearStyles"),Dae=m(t=>{if(!Js)return;const e=Js.getElementById(t);e&&e.parentElement&&e.parentElement.removeChild(e)},"clearStyle"),Nae=m((t,e)=>{if(!Js)return;const r=Js.getElementById(t);if(r)r.innerHTML!==e&&(r.innerHTML=e);else{const n=Js.createElement("style");n.setAttribute("id",t),n.innerHTML=e,Js.head.appendChild(n)}},"addGridStyle"),Fae=m((t,e,r)=>{if(!Js)return;const n=Js.getElementById(t);if(n)n.innerHTML!==e&&(n.innerHTML=e);else{const i=Js.createElement("style");i.setAttribute("id",t),i.innerHTML=e;const l=`addon-backgrounds-grid${r?`-docs-${r}`:""}`,c=Js.getElementById(l);c?c.parentElement?.insertBefore(i,c):Js.head.appendChild(i)}},"addBackgroundStyle"),zae={cellSize:100,cellAmount:10,opacity:.8},ek="addon-backgrounds",tk="addon-backgrounds-grid",jae=Lae()?"":"transition: background-color 0.3s;",Bae=m((t,e)=>{const{globals:r={},parameters:n={},viewMode:i,id:l}=e,{options:c=kae,disable:s,grid:p=zae}=n[iv]||{},g=r[iv]||{},_=typeof g=="string"?g:g?.value,x=_?c[_]:void 0,P=typeof x=="string"?x:x?.value||"transparent",A=typeof g=="string"?!1:g.grid||!1,M=!!x&&!s,N=i==="docs"?`#anchor--${l} .docs-story`:".sb-show-main",z=i==="docs"?`#anchor--${l} .docs-story`:".sb-show-main",j=n.layout===void 0||n.layout==="padded",$=i==="docs"?20:j?16:0,{cellAmount:J,cellSize:X,opacity:re,offsetX:ne=$,offsetY:Z=$}=p,U=i==="docs"?`${ek}-docs-${l}`:`${ek}-color`,K=i==="docs"?l:null;Wc(()=>{const ue=`
    ${N} {
      background: ${P} !important;
      ${jae}
      }`;if(!M){QO(U);return}Fae(U,ue,K)},[N,U,K,M,P]);const he=i==="docs"?`${tk}-docs-${l}`:`${tk}`;return Wc(()=>{if(!A){QO(he);return}const ue=[`${X*J}px ${X*J}px`,`${X*J}px ${X*J}px`,`${X}px ${X}px`,`${X}px ${X}px`].join(", "),Ee=`
        ${z} {
          background-size: ${ue} !important;
          background-position: ${ne}px ${Z}px, ${ne}px ${Z}px, ${ne}px ${Z}px, ${ne}px ${Z}px !important;
          background-blend-mode: difference !important;
          background-image: linear-gradient(rgba(130, 130, 130, ${re}) 1px, transparent 1px),
           linear-gradient(90deg, rgba(130, 130, 130, ${re}) 1px, transparent 1px),
           linear-gradient(rgba(130, 130, 130, ${re/2}) 1px, transparent 1px),
           linear-gradient(90deg, rgba(130, 130, 130, ${re/2}) 1px, transparent 1px) !important;
        }
      `;Nae(he,Ee)},[J,X,z,he,A,ne,Z,re]),t()},"withBackgroundAndGrid"),qae=globalThis.FEATURES?.backgrounds?[Bae]:[],$ae={[iv]:{grid:{cellSize:20,opacity:.5,cellAmount:5},disable:!1}},Vae={[iv]:{value:void 0,grid:!1}},rk=m(()=>({decorators:qae,parameters:$ae,initialGlobals:Vae}),"default"),{step:Uae}=wf({step:m(async(t,e,r)=>e(r),"step")},{intercept:!0}),nk=m(()=>({parameters:{throwPlayFunctionExceptions:!1},runStep:Uae}),"default"),ox="storybook/highlight",Gae=`${ox}/add`,Hae=`${ox}/remove`,Jae=`${ox}/reset`,Wae=`${ox}/scroll-into-view`,ik=2147483647,Cc=28,ok={chevronLeft:["M9.10355 10.1464C9.29882 10.3417 9.29882 10.6583 9.10355 10.8536C8.90829 11.0488 8.59171 11.0488 8.39645 10.8536L4.89645 7.35355C4.70118 7.15829 4.70118 6.84171 4.89645 6.64645L8.39645 3.14645C8.59171 2.95118 8.90829 2.95118 9.10355 3.14645C9.29882 3.34171 9.29882 3.65829 9.10355 3.85355L5.95711 7L9.10355 10.1464Z"],chevronRight:["M4.89645 10.1464C4.70118 10.3417 4.70118 10.6583 4.89645 10.8536C5.09171 11.0488 5.40829 11.0488 5.60355 10.8536L9.10355 7.35355C9.29882 7.15829 9.29882 6.84171 9.10355 6.64645L5.60355 3.14645C5.40829 2.95118 5.09171 2.95118 4.89645 3.14645C4.70118 3.34171 4.70118 3.65829 4.89645 3.85355L8.04289 7L4.89645 10.1464Z"],info:["M7 5.5a.5.5 0 01.5.5v4a.5.5 0 01-1 0V6a.5.5 0 01.5-.5zM7 4.5A.75.75 0 107 3a.75.75 0 000 1.5z","M7 14A7 7 0 107 0a7 7 0 000 14zm0-1A6 6 0 107 1a6 6 0 000 12z"],shareAlt:["M2 1.004a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1v-4.5a.5.5 0 00-1 0v4.5H2v-10h4.5a.5.5 0 000-1H2z","M7.354 7.357L12 2.711v1.793a.5.5 0 001 0v-3a.5.5 0 00-.5-.5h-3a.5.5 0 100 1h1.793L6.646 6.65a.5.5 0 10.708.707z"]},Zae="svg,path,rect,circle,line,polyline,polygon,ellipse,text".split(","),Mi=m((t,e={},r)=>{const n=Zae.includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return Object.entries(e).forEach(([i,l])=>{/[A-Z]/.test(i)?(i==="onClick"&&(n.addEventListener("click",l),n.addEventListener("keydown",c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),l())})),i==="onMouseEnter"&&n.addEventListener("mouseenter",l),i==="onMouseLeave"&&n.addEventListener("mouseleave",l)):n.setAttribute(i,l)}),r?.forEach(i=>{if(!(i==null||i===!1))try{n.appendChild(i)}catch{n.appendChild(document.createTextNode(String(i)))}}),n},"createElement"),C0=m(t=>ok[t]&&Mi("svg",{width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},ok[t].map(e=>Mi("path",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd",d:e}))),"createIcon"),Kae=m(t=>{if("elements"in t){const{elements:n,color:i,style:l}=t;return{id:void 0,priority:0,selectors:n,styles:{outline:`2px ${l} ${i}`,outlineOffset:"2px",boxShadow:"0 0 0 6px rgba(255,255,255,0.6)"},menu:void 0}}const{menu:e,...r}=t;return{id:void 0,priority:0,styles:{outline:"2px dashed #029cfd"},...r,menu:Array.isArray(e)?e.every(Array.isArray)?e:[e]:void 0}},"normalizeOptions"),Yae=m(t=>t instanceof Function,"isFunction"),Km=new Map,qu=new Map,P0=new Map,ll=m(t=>{const e=Symbol();return qu.set(e,[]),Km.set(e,t),{get:m(()=>Km.get(e),"get"),set:m(c=>{const s=Km.get(e),p=Yae(c)?c(s):c;p!==s&&(Km.set(e,p),qu.get(e)?.forEach(g=>{P0.get(g)?.(),P0.set(g,g(p))}))},"set"),subscribe:m(c=>(qu.get(e)?.push(c),()=>{const s=qu.get(e);s&&qu.set(e,s.filter(p=>p!==c))}),"subscribe"),teardown:m(()=>{qu.get(e)?.forEach(c=>{P0.get(c)?.(),P0.delete(c)}),qu.delete(e),Km.delete(e)},"teardown")}},"useStore"),sk=m(t=>{const e=document.getElementById("storybook-root"),r=new Map;for(const n of t){const{priority:i=0}=n;for(const l of n.selectors){const c=[...document.querySelectorAll(`:is(${l}):not([id^="storybook-"], [id^="storybook-"] *, [class^="sb-"], [class^="sb-"] *)`),...e?.querySelectorAll(l)||[]];for(const s of c){const p=r.get(s);(!p||p.priority<=i)&&r.set(s,{...n,priority:i,selectors:Array.from(new Set((p?.selectors||[]).concat(l)))})}}}return r},"mapElements"),Xae=m(t=>Array.from(t.entries()).map(([e,{selectors:r,styles:n,hoverStyles:i,focusStyles:l,menu:c}])=>{const{top:s,left:p,width:g,height:_}=e.getBoundingClientRect(),{position:x}=getComputedStyle(e);return{element:e,selectors:r,styles:n,hoverStyles:i,focusStyles:l,menu:c,top:x==="fixed"?s:s+window.scrollY,left:x==="fixed"?p:p+window.scrollX,width:g,height:_}}).sort((e,r)=>r.width*r.height-e.width*e.height),"mapBoxes"),ak=m((t,e)=>{const r=t.getBoundingClientRect(),{x:n,y:i}=e;return r?.top&&r?.left&&n>=r.left&&n<=r.left+r.width&&i>=r.top&&i<=r.top+r.height},"isOverMenu"),lk=m((t,e,r)=>{if(!e||!r)return!1;let{left:n,top:i,width:l,height:c}=t;c<Cc&&(i=i-Math.round((Cc-c)/2),c=Cc),l<Cc&&(n=n-Math.round((Cc-l)/2),l=Cc),e.style.position==="fixed"&&(n+=window.scrollX,i+=window.scrollY);const{x:s,y:p}=r;return s>=n&&s<=n+l&&p>=i&&p<=i+c},"isTargeted"),Qae=m((t,e,r={})=>{const{x:n,y:i}=e,{margin:l=5,topOffset:c=0,centered:s=!1}=r,{scrollX:p,scrollY:g,innerHeight:_,innerWidth:x}=window,P=Math.min(t.style.position==="fixed"?i-g:i,_-t.clientHeight-l-c+g),A=s?t.clientWidth/2:0,M=t.style.position==="fixed"?Math.max(Math.min(n-p,x-A-l),A+l):Math.max(Math.min(n,x-A-l+p),A+l+p);Object.assign(t.style,{...M!==n&&{left:`${M}px`},...P!==i&&{top:`${P}px`}})},"keepInViewport"),ck=m(t=>{window.HTMLElement.prototype.hasOwnProperty("showPopover")&&t.showPopover()},"showPopover"),ele=m(t=>{window.HTMLElement.prototype.hasOwnProperty("showPopover")&&t.hidePopover()},"hidePopover"),tle=m(t=>({top:t.top,left:t.left,width:t.width,height:t.height,selectors:t.selectors,element:{attributes:Object.fromEntries(Array.from(t.element.attributes).map(e=>[e.name,e.value])),localName:t.element.localName,tagName:t.element.tagName,outerHTML:t.element.outerHTML}}),"getEventDetails"),Fn="storybook-highlights-menu",uk="storybook-highlights-root",rle="storybook-root",nle=m(t=>{if(globalThis.__STORYBOOK_HIGHLIGHT_INITIALIZED)return;globalThis.__STORYBOOK_HIGHLIGHT_INITIALIZED=!0;const{document:e}=globalThis,r=ll([]),n=ll(new Map),i=ll([]),l=ll(),c=ll(),s=ll([]),p=ll([]),g=ll(),_=ll();let x=e.getElementById(uk);r.subscribe(()=>{x||(x=Mi("div",{id:uk}),e.body.appendChild(x))}),r.subscribe(Z=>{const U=e.getElementById(rle);if(!U)return;n.set(sk(Z));const K=new MutationObserver(()=>n.set(sk(Z)));return K.observe(U,{subtree:!0,childList:!0}),()=>{K.disconnect()}}),n.subscribe(Z=>{const U=m(()=>requestAnimationFrame(()=>i.set(Xae(Z))),"updateBoxes"),K=new ResizeObserver(U);K.observe(e.body),Array.from(Z.keys()).forEach(ue=>K.observe(ue));const he=Array.from(e.body.querySelectorAll("*")).filter(ue=>{const{overflow:Ee,overflowX:Ie,overflowY:ee}=window.getComputedStyle(ue);return["auto","scroll"].some(pe=>[Ee,Ie,ee].includes(pe))});return he.forEach(ue=>ue.addEventListener("scroll",U)),()=>{K.disconnect(),he.forEach(ue=>ue.removeEventListener("scroll",U))}}),n.subscribe(Z=>{const U=Array.from(Z.keys()).filter(({style:he})=>he.position==="sticky"),K=m(()=>requestAnimationFrame(()=>{i.set(he=>he.map(ue=>{if(U.includes(ue.element)){const{top:Ee,left:Ie}=ue.element.getBoundingClientRect();return{...ue,top:Ee+window.scrollY,left:Ie+window.scrollX}}return ue}))}),"updateBoxes");return e.addEventListener("scroll",K),()=>e.removeEventListener("scroll",K)}),n.subscribe(Z=>{s.set(U=>U.filter(({element:K})=>Z.has(K)))}),s.subscribe(Z=>{Z.length?(_.set(U=>Z.some(K=>K.element===U?.element)?U:void 0),g.set(U=>Z.some(K=>K.element===U?.element)?U:void 0)):(_.set(void 0),g.set(void 0),l.set(void 0))});const P=new Map(new Map);r.subscribe(Z=>{Z.forEach(({keyframes:U})=>{if(U){let K=P.get(U);K||(K=e.createElement("style"),K.setAttribute("data-highlight","keyframes"),P.set(U,K),e.head.appendChild(K)),K.innerHTML=U}}),P.forEach((U,K)=>{Z.some(he=>he.keyframes===K)||(U.remove(),P.delete(K))})});const A=new Map(new Map);i.subscribe(Z=>{Z.forEach(U=>{let K=A.get(U.element);if(x&&!K){const he={popover:"manual","data-highlight-dimensions":`w${U.width.toFixed(0)}h${U.height.toFixed(0)}`,"data-highlight-coordinates":`x${U.left.toFixed(0)}y${U.top.toFixed(0)}`};K=x.appendChild(Mi("div",he,[Mi("div")])),A.set(U.element,K)}}),A.forEach((U,K)=>{Z.some(({element:he})=>he===K)||(U.remove(),A.delete(K))})}),i.subscribe(Z=>{const U=Z.filter(he=>he.menu);if(!U.length)return;const K=m(he=>{requestAnimationFrame(()=>{const ue=e.getElementById(Fn),Ee={x:he.pageX,y:he.pageY};if(ue&&!ak(ue,Ee)){const Ie=U.filter(ee=>{const pe=A.get(ee.element);return lk(ee,pe,Ee)});l.set(Ie.length?Ee:void 0),s.set(Ie)}})},"onClick");return e.addEventListener("click",K),()=>e.removeEventListener("click",K)});const M=m(()=>{const Z=e.getElementById(Fn),U=c.get();!U||Z&&ak(Z,U)||p.set(K=>{const he=i.get().filter(ee=>{const pe=A.get(ee.element);return lk(ee,pe,U)}),ue=K.filter(ee=>he.includes(ee)),Ee=he.filter(ee=>!K.includes(ee)),Ie=K.length-ue.length;return Ee.length||Ie?[...ue,...Ee]:K})},"updateHovered");c.subscribe(M),i.subscribe(M);const N=m(()=>{const Z=_.get(),U=Z?[Z]:s.get(),K=U.length===1?U[0]:g.get(),he=l.get()!==void 0;i.get().forEach(ue=>{const Ee=A.get(ue.element);if(Ee){const Ie=K===ue,ee=he?K?Ie:U.includes(ue):p.get()?.includes(ue);Object.assign(Ee.style,{animation:"none",background:"transparent",border:"none",boxSizing:"border-box",outline:"none",outlineOffset:"0px",...ue.styles,...ee?ue.hoverStyles:{},...Ie?ue.focusStyles:{},position:getComputedStyle(ue.element).position==="fixed"?"fixed":"absolute",zIndex:ik-10,top:`${ue.top}px`,left:`${ue.left}px`,width:`${ue.width}px`,height:`${ue.height}px`,margin:0,padding:0,cursor:ue.menu&&ee?"pointer":"default",pointerEvents:ue.menu?"auto":"none",display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible"}),Object.assign(Ee.children[0].style,{width:"100%",height:"100%",minHeight:`${Cc}px`,minWidth:`${Cc}px`,boxSizing:"content-box",padding:Ee.style.outlineWidth||"0px"}),ck(Ee)}})},"updateBoxStyles");i.subscribe(N),s.subscribe(N),p.subscribe(N),g.subscribe(N),_.subscribe(N);const z=m(()=>{if(!x)return;let Z=e.getElementById(Fn);if(Z)Z.innerHTML="";else{const ue={id:Fn,popover:"manual"};Z=x.appendChild(Mi("div",ue)),x.appendChild(Mi("style",{},[`
            #${Fn} {
              position: absolute;
              z-index: ${ik};
              width: 300px;
              padding: 0px;
              margin: 15px 0 0 0;
              transform: translateX(-50%);
              font-family: "Nunito Sans", -apple-system, ".SFNSText-Regular", "San Francisco", BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Helvetica, Arial, sans-serif;
              font-size: 12px;
              background: white;
              border: none;
              border-radius: 6px;
              box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.05), 0 5px 15px 0 rgba(0, 0, 0, 0.1);
              color: #2E3438;
            }
            #${Fn} ul {
              list-style: none;
              margin: 0;
              padding: 0;
            }
            #${Fn} > ul {
              max-height: 300px;
              overflow-y: auto;
              padding: 4px 0;
            }
            #${Fn} li {
              padding: 0 4px;
              margin: 0;
            }
            #${Fn} li > :not(ul) {
              display: flex;
              padding: 8px;
              margin: 0;
              align-items: center;
              gap: 8px;
              border-radius: 4px;
            }
            #${Fn} button {
              width: 100%;
              border: 0;
              background: transparent;
              color: inherit;
              text-align: left;
              font-family: inherit;
              font-size: inherit;
            }
            #${Fn} button:focus-visible {
              outline-color: #029CFD;
            }
            #${Fn} button:hover {
              background: rgba(2, 156, 253, 0.07);
              color: #029CFD;
              cursor: pointer;
            }
            #${Fn} li code {
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
              line-height: 16px;
              font-size: 11px;
            }
            #${Fn} li svg {
              flex-shrink: 0;
              margin: 1px;
              color: #73828C;
            }
            #${Fn} li > button:hover svg, #${Fn} li > button:focus-visible svg {
              color: #029CFD;
            }
            #${Fn} .element-list li svg {
              display: none;
            }
            #${Fn} li.selectable svg, #${Fn} li.selected svg {
              display: block;
            }
            #${Fn} .menu-list {
              border-top: 1px solid rgba(38, 85, 115, 0.15);
            }
            #${Fn} .menu-list > li:not(:last-child) {
              padding-bottom: 4px;
              margin-bottom: 4px;
              border-bottom: 1px solid rgba(38, 85, 115, 0.15);
            }
            #${Fn} .menu-items, #${Fn} .menu-items li {
              padding: 0;
            }
            #${Fn} .menu-item {
              display: flex;
            }
            #${Fn} .menu-item-content {
              display: flex;
              flex-direction: column;
              flex-grow: 1;
            }
          `]))}const U=_.get(),K=U?[U]:s.get();if(K.length&&(Z.style.position=getComputedStyle(K[0].element).position==="fixed"?"fixed":"absolute",Z.appendChild(Mi("ul",{class:"element-list"},K.map(ue=>{const Ee=K.length>1&&!!ue.menu?.some(pe=>pe.some(ve=>!ve.selectors||ve.selectors.some(xe=>ue.selectors.includes(xe)))),Ie=Ee?{class:"selectable",onClick:m(()=>_.set(ue),"onClick"),onMouseEnter:m(()=>g.set(ue),"onMouseEnter"),onMouseLeave:m(()=>g.set(void 0),"onMouseLeave")}:U?{class:"selected",onClick:m(()=>_.set(void 0),"onClick")}:{},ee=Ee||U;return Mi("li",Ie,[Mi(ee?"button":"div",ee?{type:"button"}:{},[U?C0("chevronLeft"):null,Mi("code",{},[ue.element.outerHTML]),Ee?C0("chevronRight"):null])])})))),_.get()||s.get().length===1){const ue=_.get()||s.get()[0],Ee=ue.menu?.filter(Ie=>Ie.some(ee=>!ee.selectors||ee.selectors.some(pe=>ue.selectors.includes(pe))));Ee?.length&&Z.appendChild(Mi("ul",{class:"menu-list"},Ee.map(Ie=>Mi("li",{},[Mi("ul",{class:"menu-items"},Ie.map(({id:ee,title:pe,description:ve,iconLeft:xe,iconRight:tt,clickEvent:Ke})=>{const Ze=Ke&&(()=>t.emit(Ke,ee,tle(ue)));return Mi("li",{},[Mi(Ze?"button":"div",Ze?{class:"menu-item",type:"button",onClick:Ze}:{class:"menu-item"},[xe?C0(xe):null,Mi("div",{class:"menu-item-content"},[Mi(ve?"strong":"span",{},[pe]),ve&&Mi("span",{},[ve])]),tt?C0(tt):null])])}))]))))}const he=l.get();he?(Object.assign(Z.style,{display:"block",left:`${Z.style.position==="fixed"?he.x-window.scrollX:he.x}px`,top:`${Z.style.position==="fixed"?he.y-window.scrollY:he.y}px`}),ck(Z),requestAnimationFrame(()=>Qae(Z,he,{topOffset:15,centered:!0}))):(ele(Z),Object.assign(Z.style,{display:"none"}))},"renderMenu");s.subscribe(z),_.subscribe(z);const j=m(Z=>{const U=Kae(Z);r.set(K=>{const he=U.id?K.filter(ue=>ue.id!==U.id):K;return U.selectors?.length?[...he,U]:he})},"addHighlight"),$=m(Z=>{Z&&r.set(U=>U.filter(K=>K.id!==Z))},"removeHighlight"),J=m(()=>{r.set([]),n.set(new Map),i.set([]),l.set(void 0),c.set(void 0),s.set([]),p.set([]),g.set(void 0),_.set(void 0)},"resetState");let X;const re=m((Z,U)=>{const K="scrollIntoView-highlight";clearTimeout(X),$(K);const he=e.querySelector(Z);if(!he){console.warn(`Cannot scroll into view: ${Z} not found`);return}he.scrollIntoView({behavior:"smooth",block:"center",...U});const ue=`kf-${Math.random().toString(36).substring(2,15)}`;r.set(Ee=>[...Ee,{id:K,priority:1e3,selectors:[Z],styles:{outline:"2px solid #1EA7FD",outlineOffset:"-1px",animation:`${ue} 3s linear forwards`},keyframes:`@keyframes ${ue} {
          0% { outline: 2px solid #1EA7FD; }
          20% { outline: 2px solid #1EA7FD00; }
          40% { outline: 2px solid #1EA7FD; }
          60% { outline: 2px solid #1EA7FD00; }
          80% { outline: 2px solid #1EA7FD; }
          100% { outline: 2px solid #1EA7FD00; }
        }`}]),X=setTimeout(()=>$(K),3500)},"scrollIntoView"),ne=m(Z=>{requestAnimationFrame(()=>c.set({x:Z.pageX,y:Z.pageY}))},"onMouseMove");e.body.addEventListener("mousemove",ne),t.on(Gae,j),t.on(Hae,$),t.on(Jae,J),t.on(Wae,re),t.on(Th,({newPhase:Z})=>{Z==="loading"&&J()})},"useHighlights");globalThis?.FEATURES?.highlight&&Rs?.ready&&Rs.ready().then(nle);var hk=m(()=>({}),"default"),ile="measureEnabled";function dI(){const t=$t.document.documentElement,e=Math.max(t.scrollHeight,t.offsetHeight);return{width:Math.max(t.scrollWidth,t.offsetWidth),height:e}}m(dI,"getDocumentWidthAndHeight");function K9(){const t=$t.document.createElement("canvas");t.id="storybook-addon-measure";const e=t.getContext("2d");Aa(e!=null);const{width:r,height:n}=dI();return ov(t,e,{width:r,height:n}),t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.zIndex="2147483647",t.style.pointerEvents="none",$t.document.body.appendChild(t),{canvas:t,context:e,width:r,height:n}}m(K9,"createCanvas");function ov(t,e,{width:r,height:n}){t.style.width=`${r}px`,t.style.height=`${n}px`;const i=$t.window.devicePixelRatio;t.width=Math.floor(r*i),t.height=Math.floor(n*i),e.scale(i,i)}m(ov,"setCanvasWidthAndHeight");var ki={};function Y9(){ki.canvas||(ki=K9())}m(Y9,"init");function pI(){ki.context&&ki.context.clearRect(0,0,ki.width??0,ki.height??0)}m(pI,"clear");function X9(t){pI(),t(ki.context)}m(X9,"draw");function Q9(){Aa(ki.canvas),Aa(ki.context),ov(ki.canvas,ki.context,{width:0,height:0});const{width:t,height:e}=dI();ov(ki.canvas,ki.context,{width:t,height:e}),ki.width=t,ki.height=e}m(Q9,"rescale");function eV(){ki.canvas&&(pI(),ki.canvas.parentNode?.removeChild(ki.canvas),ki={})}m(eV,"destroy");var rp={margin:"#f6b26b",border:"#ffe599",padding:"#93c47d",content:"#6fa8dc",text:"#232020"},wl=6;function v2(t,{x:e,y:r,w:n,h:i,r:l}){e=e-n/2,r=r-i/2,n<2*l&&(l=n/2),i<2*l&&(l=i/2),t.beginPath(),t.moveTo(e+l,r),t.arcTo(e+n,r,e+n,r+i,l),t.arcTo(e+n,r+i,e,r+i,l),t.arcTo(e,r+i,e,r,l),t.arcTo(e,r,e+n,r,l),t.closePath()}m(v2,"roundedRect");function tV(t,{padding:e,border:r,width:n,height:i,top:l,left:c}){const s=n-r.left-r.right-e.left-e.right,p=i-e.top-e.bottom-r.top-r.bottom;let g=c+r.left+e.left,_=l+r.top+e.top;return t==="top"?g+=s/2:t==="right"?(g+=s,_+=p/2):t==="bottom"?(g+=s/2,_+=p):t==="left"?_+=p/2:t==="center"&&(g+=s/2,_+=p/2),{x:g,y:_}}m(tV,"positionCoordinate");function rV(t,e,{margin:r,border:n,padding:i},l,c){let s=m(P=>0,"shift"),p=0,g=0;const _=c?1:.5,x=c?l*2:0;return t==="padding"?s=m(P=>i[P]*_+x,"shift"):t==="border"?s=m(P=>i[P]+n[P]*_+x,"shift"):t==="margin"&&(s=m(P=>i[P]+n[P]+r[P]*_+x,"shift")),e==="top"?g=-s("top"):e==="right"?p=s("right"):e==="bottom"?g=s("bottom"):e==="left"&&(p=-s("left")),{offsetX:p,offsetY:g}}m(rV,"offset");function nV(t,e){return Math.abs(t.x-e.x)<Math.abs(t.w+e.w)/2&&Math.abs(t.y-e.y)<Math.abs(t.h+e.h)/2}m(nV,"collide");function iV(t,e,r){return t==="top"?e.y=r.y-r.h-wl:t==="right"?e.x=r.x+r.w/2+wl+e.w/2:t==="bottom"?e.y=r.y+r.h+wl:t==="left"&&(e.x=r.x-r.w/2-wl-e.w/2),{x:e.x,y:e.y}}m(iV,"overlapAdjustment");function fI(t,e,{x:r,y:n,w:i,h:l},c){return v2(t,{x:r,y:n,w:i,h:l,r:3}),t.fillStyle=`${rp[e]}dd`,t.fill(),t.strokeStyle=rp[e],t.stroke(),t.fillStyle=rp.text,t.fillText(c,r,n),v2(t,{x:r,y:n,w:i,h:l,r:3}),t.fillStyle=`${rp[e]}dd`,t.fill(),t.strokeStyle=rp[e],t.stroke(),t.fillStyle=rp.text,t.fillText(c,r,n),{x:r,y:n,w:i,h:l}}m(fI,"textWithRect");function mI(t,e){t.font="600 12px monospace",t.textBaseline="middle",t.textAlign="center";const r=t.measureText(e),n=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent,i=r.width+wl*2,l=n+wl*2;return{w:i,h:l}}m(mI,"configureText");function oV(t,e,{type:r,position:n="center",text:i},l,c=!1){let{x:s,y:p}=tV(n,e);const{offsetX:g,offsetY:_}=rV(r,n,e,wl+1,c);s+=g,p+=_;const{w:x,h:P}=mI(t,i);if(l&&nV({x:s,y:p,w:x,h:P},l)){const A=iV(n,{x:s,y:p,w:x},l);s=A.x,p=A.y}return fI(t,r,{x:s,y:p,w:x,h:P},i)}m(oV,"drawLabel");function sV(t,{w:e,h:r}){const n=e*.5+wl,i=r*.5+wl;return{offsetX:(t.x==="left"?-1:1)*n,offsetY:(t.y==="top"?-1:1)*i}}m(sV,"floatingOffset");function aV(t,e,{type:r,text:n}){const{floatingAlignment:i,extremities:l}=e;let c=l[i.x],s=l[i.y];const{w:p,h:g}=mI(t,n),{offsetX:_,offsetY:x}=sV(i,{w:p,h:g});return c+=_,s+=x,fI(t,r,{x:c,y:s,w:p,h:g},n)}m(aV,"drawFloatingLabel");function fp(t,e,r,n){const i=[];r.forEach((l,c)=>{const s=n&&l.position==="center"?aV(t,e,l):oV(t,e,l,i[c-1],n);i[c]=s})}m(fp,"drawStack");function lV(t,e,r,n){const i=r.reduce((l,c)=>(Object.prototype.hasOwnProperty.call(l,c.position)||(l[c.position]=[]),l[c.position]?.push(c),l),{});i.top&&fp(t,e,i.top,n),i.right&&fp(t,e,i.right,n),i.bottom&&fp(t,e,i.bottom,n),i.left&&fp(t,e,i.left,n),i.center&&fp(t,e,i.center,n)}m(lV,"labelStacks");var sx={margin:"#f6b26ba8",border:"#ffe599a8",padding:"#93c47d8c",content:"#6fa8dca8"},dk=30;function Yo(t){return parseInt(t.replace("px",""),10)}m(Yo,"pxToNumber");function rh(t){return Number.isInteger(t)?t:t.toFixed(2)}m(rh,"round");function ax(t){return t.filter(e=>e.text!==0&&e.text!=="0")}m(ax,"filterZeroValues");function cV(t){const e={top:$t.window.scrollY,bottom:$t.window.scrollY+$t.window.innerHeight,left:$t.window.scrollX,right:$t.window.scrollX+$t.window.innerWidth},r={top:Math.abs(e.top-t.top),bottom:Math.abs(e.bottom-t.bottom),left:Math.abs(e.left-t.left),right:Math.abs(e.right-t.right)};return{x:r.left>r.right?"left":"right",y:r.top>r.bottom?"top":"bottom"}}m(cV,"floatingAlignment");function uV(t){const e=$t.getComputedStyle(t);let{top:r,left:n,right:i,bottom:l,width:c,height:s}=t.getBoundingClientRect();const{marginTop:p,marginBottom:g,marginLeft:_,marginRight:x,paddingTop:P,paddingBottom:A,paddingLeft:M,paddingRight:N,borderBottomWidth:z,borderTopWidth:j,borderLeftWidth:$,borderRightWidth:J}=e;r=r+$t.window.scrollY,n=n+$t.window.scrollX,l=l+$t.window.scrollY,i=i+$t.window.scrollX;const X={top:Yo(p),bottom:Yo(g),left:Yo(_),right:Yo(x)},re={top:Yo(P),bottom:Yo(A),left:Yo(M),right:Yo(N)},ne={top:Yo(j),bottom:Yo(z),left:Yo($),right:Yo(J)},Z={top:r-X.top,bottom:l+X.bottom,left:n-X.left,right:i+X.right};return{margin:X,padding:re,border:ne,top:r,left:n,bottom:l,right:i,width:c,height:s,extremities:Z,floatingAlignment:cV(Z)}}m(uV,"measureElement");function hV(t,{margin:e,width:r,height:n,top:i,left:l,bottom:c,right:s}){const p=n+e.bottom+e.top;t.fillStyle=sx.margin,t.fillRect(l,i-e.top,r,e.top),t.fillRect(s,i-e.top,e.right,p),t.fillRect(l,c,r,e.bottom),t.fillRect(l-e.left,i-e.top,e.left,p);const g=[{type:"margin",text:rh(e.top),position:"top"},{type:"margin",text:rh(e.right),position:"right"},{type:"margin",text:rh(e.bottom),position:"bottom"},{type:"margin",text:rh(e.left),position:"left"}];return ax(g)}m(hV,"drawMargin");function dV(t,{padding:e,border:r,width:n,height:i,top:l,left:c,bottom:s,right:p}){const g=n-r.left-r.right,_=i-e.top-e.bottom-r.top-r.bottom;t.fillStyle=sx.padding,t.fillRect(c+r.left,l+r.top,g,e.top),t.fillRect(p-e.right-r.right,l+e.top+r.top,e.right,_),t.fillRect(c+r.left,s-e.bottom-r.bottom,g,e.bottom),t.fillRect(c+r.left,l+e.top+r.top,e.left,_);const x=[{type:"padding",text:e.top,position:"top"},{type:"padding",text:e.right,position:"right"},{type:"padding",text:e.bottom,position:"bottom"},{type:"padding",text:e.left,position:"left"}];return ax(x)}m(dV,"drawPadding");function pV(t,{border:e,width:r,height:n,top:i,left:l,bottom:c,right:s}){const p=n-e.top-e.bottom;t.fillStyle=sx.border,t.fillRect(l,i,r,e.top),t.fillRect(l,c-e.bottom,r,e.bottom),t.fillRect(l,i+e.top,e.left,p),t.fillRect(s-e.right,i+e.top,e.right,p);const g=[{type:"border",text:e.top,position:"top"},{type:"border",text:e.right,position:"right"},{type:"border",text:e.bottom,position:"bottom"},{type:"border",text:e.left,position:"left"}];return ax(g)}m(pV,"drawBorder");function fV(t,{padding:e,border:r,width:n,height:i,top:l,left:c}){const s=n-r.left-r.right-e.left-e.right,p=i-e.top-e.bottom-r.top-r.bottom;return t.fillStyle=sx.content,t.fillRect(c+r.left+e.left,l+r.top+e.top,s,p),[{type:"content",position:"center",text:`${rh(s)} x ${rh(p)}`}]}m(fV,"drawContent");function mV(t){return e=>{if(t&&e){const r=uV(t),n=hV(e,r),i=dV(e,r),l=pV(e,r),c=fV(e,r),s=r.width<=dk*3||r.height<=dk;lV(e,r,[...c,...i,...l,...n],s)}}}m(mV,"drawBoxModel");function gV(t){X9(mV(t))}m(gV,"drawSelectedElement");var ole=m((t,e)=>{const r=$t.document.elementFromPoint(t,e),n=m(l=>{if(l&&l.shadowRoot){const c=l.shadowRoot.elementFromPoint(t,e);return l.isEqualNode(c)?l:c.shadowRoot?n(c):c}return l},"crawlShadows");return n(r)||r},"deepElementFromPoint"),pk,A0={x:0,y:0};function x2(t,e){pk=ole(t,e),gV(pk)}m(x2,"findAndDrawElement");var sle=m((t,e)=>{const{measureEnabled:r}=e.globals||{};return Wc(()=>{if(typeof globalThis.document>"u")return;const n=m(i=>{window.requestAnimationFrame(()=>{i.stopPropagation(),A0.x=i.clientX,A0.y=i.clientY})},"onPointerMove");return globalThis.document.addEventListener("pointermove",n),()=>{globalThis.document.removeEventListener("pointermove",n)}},[]),Wc(()=>{const n=m(l=>{window.requestAnimationFrame(()=>{l.stopPropagation(),x2(l.clientX,l.clientY)})},"onPointerOver"),i=m(()=>{window.requestAnimationFrame(()=>{Q9()})},"onResize");return e.viewMode==="story"&&r&&(globalThis.document.addEventListener("pointerover",n),Y9(),globalThis.window.addEventListener("resize",i),x2(A0.x,A0.y)),()=>{globalThis.window.removeEventListener("resize",i),eV()}},[r,e.viewMode]),t()},"withMeasure"),ale=globalThis.FEATURES?.measure?[sle]:[],lle={[ile]:!1},fk=m(()=>({decorators:ale,initialGlobals:lle}),"default"),yV="outline",mk=m(t=>{(Array.isArray(t)?t:[t]).forEach(cle)},"clearStyles"),cle=m(t=>{const e=typeof t=="string"?t:t.join(""),r=$t.document.getElementById(e);r&&r.parentElement&&r.parentElement.removeChild(r)},"clearStyle"),ule=m((t,e)=>{const r=$t.document.getElementById(t);if(r)r.innerHTML!==e&&(r.innerHTML=e);else{const n=$t.document.createElement("style");n.setAttribute("id",t),n.innerHTML=e,$t.document.head.appendChild(n)}},"addOutlineStyles");function _V(t){return Kr`
    ${t} body {
      outline: 1px solid #2980b9 !important;
    }

    ${t} article {
      outline: 1px solid #3498db !important;
    }

    ${t} nav {
      outline: 1px solid #0088c3 !important;
    }

    ${t} aside {
      outline: 1px solid #33a0ce !important;
    }

    ${t} section {
      outline: 1px solid #66b8da !important;
    }

    ${t} header {
      outline: 1px solid #99cfe7 !important;
    }

    ${t} footer {
      outline: 1px solid #cce7f3 !important;
    }

    ${t} h1 {
      outline: 1px solid #162544 !important;
    }

    ${t} h2 {
      outline: 1px solid #314e6e !important;
    }

    ${t} h3 {
      outline: 1px solid #3e5e85 !important;
    }

    ${t} h4 {
      outline: 1px solid #449baf !important;
    }

    ${t} h5 {
      outline: 1px solid #c7d1cb !important;
    }

    ${t} h6 {
      outline: 1px solid #4371d0 !important;
    }

    ${t} main {
      outline: 1px solid #2f4f90 !important;
    }

    ${t} address {
      outline: 1px solid #1a2c51 !important;
    }

    ${t} div {
      outline: 1px solid #036cdb !important;
    }

    ${t} p {
      outline: 1px solid #ac050b !important;
    }

    ${t} hr {
      outline: 1px solid #ff063f !important;
    }

    ${t} pre {
      outline: 1px solid #850440 !important;
    }

    ${t} blockquote {
      outline: 1px solid #f1b8e7 !important;
    }

    ${t} ol {
      outline: 1px solid #ff050c !important;
    }

    ${t} ul {
      outline: 1px solid #d90416 !important;
    }

    ${t} li {
      outline: 1px solid #d90416 !important;
    }

    ${t} dl {
      outline: 1px solid #fd3427 !important;
    }

    ${t} dt {
      outline: 1px solid #ff0043 !important;
    }

    ${t} dd {
      outline: 1px solid #e80174 !important;
    }

    ${t} figure {
      outline: 1px solid #ff00bb !important;
    }

    ${t} figcaption {
      outline: 1px solid #bf0032 !important;
    }

    ${t} table {
      outline: 1px solid #00cc99 !important;
    }

    ${t} caption {
      outline: 1px solid #37ffc4 !important;
    }

    ${t} thead {
      outline: 1px solid #98daca !important;
    }

    ${t} tbody {
      outline: 1px solid #64a7a0 !important;
    }

    ${t} tfoot {
      outline: 1px solid #22746b !important;
    }

    ${t} tr {
      outline: 1px solid #86c0b2 !important;
    }

    ${t} th {
      outline: 1px solid #a1e7d6 !important;
    }

    ${t} td {
      outline: 1px solid #3f5a54 !important;
    }

    ${t} col {
      outline: 1px solid #6c9a8f !important;
    }

    ${t} colgroup {
      outline: 1px solid #6c9a9d !important;
    }

    ${t} button {
      outline: 1px solid #da8301 !important;
    }

    ${t} datalist {
      outline: 1px solid #c06000 !important;
    }

    ${t} fieldset {
      outline: 1px solid #d95100 !important;
    }

    ${t} form {
      outline: 1px solid #d23600 !important;
    }

    ${t} input {
      outline: 1px solid #fca600 !important;
    }

    ${t} keygen {
      outline: 1px solid #b31e00 !important;
    }

    ${t} label {
      outline: 1px solid #ee8900 !important;
    }

    ${t} legend {
      outline: 1px solid #de6d00 !important;
    }

    ${t} meter {
      outline: 1px solid #e8630c !important;
    }

    ${t} optgroup {
      outline: 1px solid #b33600 !important;
    }

    ${t} option {
      outline: 1px solid #ff8a00 !important;
    }

    ${t} output {
      outline: 1px solid #ff9619 !important;
    }

    ${t} progress {
      outline: 1px solid #e57c00 !important;
    }

    ${t} select {
      outline: 1px solid #e26e0f !important;
    }

    ${t} textarea {
      outline: 1px solid #cc5400 !important;
    }

    ${t} details {
      outline: 1px solid #33848f !important;
    }

    ${t} summary {
      outline: 1px solid #60a1a6 !important;
    }

    ${t} command {
      outline: 1px solid #438da1 !important;
    }

    ${t} menu {
      outline: 1px solid #449da6 !important;
    }

    ${t} del {
      outline: 1px solid #bf0000 !important;
    }

    ${t} ins {
      outline: 1px solid #400000 !important;
    }

    ${t} img {
      outline: 1px solid #22746b !important;
    }

    ${t} iframe {
      outline: 1px solid #64a7a0 !important;
    }

    ${t} embed {
      outline: 1px solid #98daca !important;
    }

    ${t} object {
      outline: 1px solid #00cc99 !important;
    }

    ${t} param {
      outline: 1px solid #37ffc4 !important;
    }

    ${t} video {
      outline: 1px solid #6ee866 !important;
    }

    ${t} audio {
      outline: 1px solid #027353 !important;
    }

    ${t} source {
      outline: 1px solid #012426 !important;
    }

    ${t} canvas {
      outline: 1px solid #a2f570 !important;
    }

    ${t} track {
      outline: 1px solid #59a600 !important;
    }

    ${t} map {
      outline: 1px solid #7be500 !important;
    }

    ${t} area {
      outline: 1px solid #305900 !important;
    }

    ${t} a {
      outline: 1px solid #ff62ab !important;
    }

    ${t} em {
      outline: 1px solid #800b41 !important;
    }

    ${t} strong {
      outline: 1px solid #ff1583 !important;
    }

    ${t} i {
      outline: 1px solid #803156 !important;
    }

    ${t} b {
      outline: 1px solid #cc1169 !important;
    }

    ${t} u {
      outline: 1px solid #ff0430 !important;
    }

    ${t} s {
      outline: 1px solid #f805e3 !important;
    }

    ${t} small {
      outline: 1px solid #d107b2 !important;
    }

    ${t} abbr {
      outline: 1px solid #4a0263 !important;
    }

    ${t} q {
      outline: 1px solid #240018 !important;
    }

    ${t} cite {
      outline: 1px solid #64003c !important;
    }

    ${t} dfn {
      outline: 1px solid #b4005a !important;
    }

    ${t} sub {
      outline: 1px solid #dba0c8 !important;
    }

    ${t} sup {
      outline: 1px solid #cc0256 !important;
    }

    ${t} time {
      outline: 1px solid #d6606d !important;
    }

    ${t} code {
      outline: 1px solid #e04251 !important;
    }

    ${t} kbd {
      outline: 1px solid #5e001f !important;
    }

    ${t} samp {
      outline: 1px solid #9c0033 !important;
    }

    ${t} var {
      outline: 1px solid #d90047 !important;
    }

    ${t} mark {
      outline: 1px solid #ff0053 !important;
    }

    ${t} bdi {
      outline: 1px solid #bf3668 !important;
    }

    ${t} bdo {
      outline: 1px solid #6f1400 !important;
    }

    ${t} ruby {
      outline: 1px solid #ff7b93 !important;
    }

    ${t} rt {
      outline: 1px solid #ff2f54 !important;
    }

    ${t} rp {
      outline: 1px solid #803e49 !important;
    }

    ${t} span {
      outline: 1px solid #cc2643 !important;
    }

    ${t} br {
      outline: 1px solid #db687d !important;
    }

    ${t} wbr {
      outline: 1px solid #db175b !important;
    }`}m(_V,"outlineCSS");var hle=m((t,e)=>{const r=e.globals||{},n=[!0,"true"].includes(r[yV]),i=e.viewMode==="docs",l=YC(()=>_V(i?'[data-story-block="true"]':".sb-show-main"),[e]);return Wc(()=>{const c=i?`addon-outline-docs-${e.id}`:"addon-outline";return n?ule(c,l):mk(c),()=>{mk(c)}},[n,l,e]),t()},"withOutline"),dle=globalThis.FEATURES?.outline?[hle]:[],ple={[yV]:!1},gk=m(()=>({decorators:dle,initialGlobals:ple}),"default"),fle=m(({parameters:t})=>{t?.test?.mockReset===!0?dR():t?.test?.clearMocks===!0?hR():t?.test?.restoreMocks!==!1&&pR()},"resetAllMocksLoader"),w2=m((t,e=0,r)=>{if(e>5||t==null)return t;if(dh(t))return r&&t.mockName(r),t;if(typeof t=="function"&&"isAction"in t&&t.isAction&&!("implicit"in t&&t.implicit)){const n=cR(t);return r&&n.mockName(r),n}if(Array.isArray(t)){e++;for(let n=0;n<t.length;n++)Object.getOwnPropertyDescriptor(t,n)?.writable&&(t[n]=w2(t[n],e));return t}if(typeof t=="object"&&t.constructor===Object){e++;for(const[n,i]of Object.entries(t))Object.getOwnPropertyDescriptor(t,n)?.writable&&(t[n]=w2(i,e,n));return t}return t},"traverseArgs"),mle=m(({initialArgs:t})=>{w2(t)},"nameSpiesAndWrapActionsInSpies"),yk=!1,gle=m(async t=>{globalThis.HTMLElement&&t.canvasElement instanceof globalThis.HTMLElement&&(t.canvas=W9(t.canvasElement));const e=globalThis.window?.navigator?.clipboard;if(e){t.userEvent=wf({userEvent:Z9.setup()},{intercept:!0,getKeys:m(n=>Object.keys(n).filter(i=>i!=="eventWrapper"),"getKeys")}).userEvent,Object.defineProperty(globalThis.window.navigator,"clipboard",{get:m(()=>e,"get"),configurable:!0});let r=HTMLElement.prototype.focus;yk||Object.defineProperties(HTMLElement.prototype,{focus:{configurable:!0,set:m(n=>{r=n,yk=!0},"set"),get:m(()=>r,"get")}})}},"enhanceContext"),_k=m(()=>({loaders:[fle,mle,gle]}),"default"),yle="viewport",_le={[yle]:{value:void 0,isRotated:!1}},bk=m(()=>({initialGlobals:_le}),"default");function gI(){return[(fk.default??fk)(),(rk.default??rk)(),(hk.default??hk)(),(gk.default??gk)(),(bk.default??bk)(),(XO.default??XO)(),(nk.default??nk)(),(_k.default??_k)()]}m(gI,"getCoreAnnotations");function ble(t){return t}m(ble,"definePreviewAddon");function bV(t){return t!=null&&typeof t=="object"&&"_tag"in t&&t?._tag==="Meta"}m(bV,"isMeta");function lx(t){return t!=null&&typeof t=="object"&&"_tag"in t&&t?._tag==="Story"}m(lx,"isStory");function vV(t){return"__children"in t?t.__children:[]}m(vV,"getStoryChildren");var xV=m(t=>t.toLowerCase().replace(/[ '`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),"sanitize"),E2=m((t,e)=>{const r=xV(t);if(r==="")throw new Error(`Invalid ${e} '${t}', must include alphanumeric characters`);return r},"sanitizeSafe"),vle=m((t,e)=>`${E2(t,"kind")}${e?`--${E2(e,"name")}`:""}`,"toId"),xle=m((t,e)=>`${t}:${E2(e,"test")}`,"toTestId"),wle=m(t=>LF(t),"storyNameFromExport");function T2(t,e){return Array.isArray(e)?e.includes(t):t.match(e)}m(T2,"matches");function sv(t,{includeStories:e,excludeStories:r}){return t!=="__esModule"&&(!e||T2(t,e))&&(!r||!T2(t,r))}m(sv,"isExportStory");var Ele=m((...t)=>{const e=t.reduce((r,n)=>(n.startsWith("!")?r.delete(n.slice(1)):r.add(n),r),new Set);return Array.from(e)},"combineTags");function S2(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}m(S2,"getSymbols");function C2(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}m(C2,"getTag");var Tle="[object RegExp]",Sle="[object String]",Cle="[object Number]",Ple="[object Boolean]",vk="[object Arguments]",Ale="[object Symbol]",Rle="[object Date]",Ile="[object Map]",Mle="[object Set]",Ole="[object Array]",kle="[object Function]",Lle="[object ArrayBuffer]",zE="[object Object]",Dle="[object Error]",Nle="[object DataView]",Fle="[object Uint8Array]",zle="[object Uint8ClampedArray]",jle="[object Uint16Array]",Ble="[object Uint32Array]",qle="[object BigUint64Array]",$le="[object Int8Array]",Vle="[object Int16Array]",Ule="[object Int32Array]",Gle="[object BigInt64Array]",Hle="[object Float32Array]",Jle="[object Float64Array]";function ta(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}m(ta,"isPlainObject");function of(t,e){const r={},n=Object.keys(t);for(let i=0;i<n.length;i++){const l=n[i],c=t[l];r[l]=e(c,l,t)}return r}m(of,"mapValues");function wV(t,e){const r={},n=Object.keys(t);for(let i=0;i<n.length;i++){const l=n[i],c=t[l];e(c,l)&&(r[l]=c)}return r}m(wV,"pickBy");var jE=Ti($D(),1);function EV(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}m(EV,"eq");function TV(t,e,r){return Cp(t,e,void 0,void 0,void 0,void 0,r)}m(TV,"isEqualWith");function Cp(t,e,r,n,i,l,c){const s=c(t,e,r,n,i,l);if(s!==void 0)return s;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return kp(t,e,l,c)}return kp(t,e,l,c)}m(Cp,"isEqualWithImpl");function kp(t,e,r,n){if(Object.is(t,e))return!0;let i=C2(t),l=C2(e);if(i===vk&&(i=zE),l===vk&&(l=zE),i!==l)return!1;switch(i){case Sle:return t.toString()===e.toString();case Cle:{const p=t.valueOf(),g=e.valueOf();return EV(p,g)}case Ple:case Rle:case Ale:return Object.is(t.valueOf(),e.valueOf());case Tle:return t.source===e.source&&t.flags===e.flags;case kle:return t===e}r=r??new Map;const c=r.get(t),s=r.get(e);if(c!=null&&s!=null)return c===e;r.set(t,e),r.set(e,t);try{switch(i){case Ile:{if(t.size!==e.size)return!1;for(const[p,g]of t.entries())if(!e.has(p)||!Cp(g,e.get(p),p,t,e,r,n))return!1;return!0}case Mle:{if(t.size!==e.size)return!1;const p=Array.from(t.values()),g=Array.from(e.values());for(let _=0;_<p.length;_++){const x=p[_],P=g.findIndex(A=>Cp(x,A,void 0,t,e,r,n));if(P===-1)return!1;g.splice(P,1)}return!0}case Ole:case Fle:case zle:case jle:case Ble:case qle:case $le:case Vle:case Ule:case Gle:case Hle:case Jle:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let p=0;p<t.length;p++)if(!Cp(t[p],e[p],p,t,e,r,n))return!1;return!0}case Lle:return t.byteLength!==e.byteLength?!1:kp(new Uint8Array(t),new Uint8Array(e),r,n);case Nle:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:kp(new Uint8Array(t),new Uint8Array(e),r,n);case Dle:return t.name===e.name&&t.message===e.message;case zE:{if(!(kp(t.constructor,e.constructor,r,n)||ta(t)&&ta(e)))return!1;const g=[...Object.keys(t),...S2(t)],_=[...Object.keys(e),...S2(e)];if(g.length!==_.length)return!1;for(let x=0;x<g.length;x++){const P=g[x],A=t[P];if(!Object.hasOwn(e,P))return!1;const M=e[P];if(!Cp(A,M,P,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}m(kp,"areObjectsEqual");function SV(){}m(SV,"noop");function CV(t,e){return TV(t,e,SV)}m(CV,"isEqual");var Zu=Symbol("incompatible"),P2=m((t,e)=>{const r=e.type;if(t==null||!r||e.mapping)return t;switch(r.name){case"string":return String(t);case"enum":return t;case"number":return Number(t);case"boolean":return String(t)==="true";case"array":return!r.value||!Array.isArray(t)?Zu:t.reduce((n,i,l)=>{const c=P2(i,{type:r.value});return c!==Zu&&(n[l]=c),n},new Array(t.length));case"object":return typeof t=="string"||typeof t=="number"?t:!r.value||typeof t!="object"?Zu:Object.entries(t).reduce((n,[i,l])=>{const c=P2(l,{type:r.value[i]});return c===Zu?n:Object.assign(n,{[i]:c})},{});case"other":{const n=typeof t=="string"||typeof t=="number"||typeof t=="boolean";return r.value==="ReactNode"&&n?t:Zu}default:return Zu}},"map"),Wle=m((t,e)=>Object.entries(t).reduce((r,[n,i])=>{if(!e[n])return r;const l=P2(i,e[n]);return l===Zu?r:Object.assign(r,{[n]:l})},{}),"mapArgsToTypes"),av=m((t,e)=>Array.isArray(t)&&Array.isArray(e)?e.reduce((r,n,i)=>(r[i]=av(t[i],e[i]),r),[...t]).filter(r=>r!==void 0):!ta(t)||!ta(e)?e:Object.keys({...t,...e}).reduce((r,n)=>{if(n in e){const i=av(t[n],e[n]);i!==void 0&&(r[n]=i)}else r[n]=t[n];return r},{}),"combineArgs"),Zle=m((t,e)=>Object.entries(e).reduce((r,[n,{options:i}])=>{function l(){return n in t&&(r[n]=t[n]),r}if(m(l,"allowArg"),!i)return l();if(!Array.isArray(i))return oi.error(Kr`
        Invalid argType: '${n}.options' should be an array.

        More info: https://storybook.js.org/docs/api/arg-types?ref=error
      `),l();if(i.some(x=>x&&["object","function"].includes(typeof x)))return oi.error(Kr`
        Invalid argType: '${n}.options' should only contain primitives. Use a 'mapping' for complex values.

        More info: https://storybook.js.org/docs/writing-stories/args?ref=error#mapping-to-complex-arg-values
      `),l();const c=Array.isArray(t[n]),s=c&&t[n].findIndex(x=>!i.includes(x)),p=c&&s===-1;if(t[n]===void 0||i.includes(t[n])||p)return l();const g=c?`${n}[${s}]`:n,_=i.map(x=>typeof x=="string"?`'${x}'`:String(x)).join(", ");return oi.warn(`Received illegal value for '${g}'. Supported options: ${_}`),r},{}),"validateOptions"),Og=Symbol("Deeply equal"),lv=m((t,e)=>{if(typeof t!=typeof e)return e;if(CV(t,e))return Og;if(Array.isArray(t)&&Array.isArray(e)){const r=e.reduce((n,i,l)=>{const c=lv(t[l],i);return c!==Og&&(n[l]=c),n},new Array(e.length));return e.length>=t.length?r:r.concat(new Array(t.length-e.length).fill(void 0))}return ta(t)&&ta(e)?Object.keys({...t,...e}).reduce((r,n)=>{const i=lv(t?.[n],e?.[n]);return i===Og?r:Object.assign(r,{[n]:i})},{}):e},"deepDiff"),PV="UNTARGETED";function AV({args:t,argTypes:e}){const r={};return Object.entries(t).forEach(([n,i])=>{const{target:l=PV}=e[n]||{};r[l]=r[l]||{},r[l][n]=i}),r}m(AV,"groupArgsByTarget");function RV(t){return Object.keys(t).forEach(e=>t[e]===void 0&&delete t[e]),t}m(RV,"deleteUndefined");var IV=class{constructor(){this.initialArgsByStoryId={},this.argsByStoryId={}}get(e){if(!(e in this.argsByStoryId))throw new Error(`No args known for ${e} -- has it been rendered yet?`);return this.argsByStoryId[e]}setInitial(e){if(!this.initialArgsByStoryId[e.id])this.initialArgsByStoryId[e.id]=e.initialArgs,this.argsByStoryId[e.id]=e.initialArgs;else if(this.initialArgsByStoryId[e.id]!==e.initialArgs){const r=lv(this.initialArgsByStoryId[e.id],this.argsByStoryId[e.id]);this.initialArgsByStoryId[e.id]=e.initialArgs,this.argsByStoryId[e.id]=e.initialArgs,r!==Og&&this.updateFromDelta(e,r)}}updateFromDelta(e,r){const n=Zle(r,e.argTypes);this.argsByStoryId[e.id]=av(this.argsByStoryId[e.id],n)}updateFromPersisted(e,r){const n=Wle(r,e.argTypes);return this.updateFromDelta(e,n)}update(e,r){if(!(e in this.argsByStoryId))throw new Error(`No args known for ${e} -- has it been rendered yet?`);this.argsByStoryId[e]=RV({...this.argsByStoryId[e],...r})}};m(IV,"ArgsStore");var Kle=IV,MV=m((t={})=>Object.entries(t).reduce((e,[r,{defaultValue:n}])=>(typeof n<"u"&&(e[r]=n),e),{}),"getValuesFromArgTypes"),OV=class{constructor({globals:e={},globalTypes:r={}}){this.set({globals:e,globalTypes:r})}set({globals:e={},globalTypes:r={}}){const n=this.initialGlobals&&lv(this.initialGlobals,this.globals);this.allowedGlobalNames=new Set([...Object.keys(e),...Object.keys(r)]);const i=MV(r);this.initialGlobals={...i,...e},this.globals=this.initialGlobals,n&&n!==Og&&this.updateFromPersisted(n)}filterAllowedGlobals(e){return Object.entries(e).reduce((r,[n,i])=>(this.allowedGlobalNames.has(n)?r[n]=i:Bn.warn(`Attempted to set a global (${n}) that is not defined in initial globals or globalTypes`),r),{})}updateFromPersisted(e){const r=this.filterAllowedGlobals(e);this.globals={...this.globals,...r}}get(){return this.globals}update(e){this.globals={...this.globals,...this.filterAllowedGlobals(e)};for(const r in e)e[r]===void 0&&(this.globals[r]=this.initialGlobals[r])}};m(OV,"GlobalsStore");var Yle=OV,Xle=Ti($D(),1),Qle=(0,Xle.default)(1)(t=>Object.values(t).reduce((e,r)=>(e[r.importPath]=e[r.importPath]||r,e),{})),kV=class{constructor({entries:e}={v:5,entries:{}}){this.entries=e}entryFromSpecifier(e){const r=Object.values(this.entries);if(e==="*")return r[0];if(typeof e=="string")return this.entries[e]?this.entries[e]:r.find(l=>l.id.startsWith(e));const{name:n,title:i}=e;return r.find(l=>l.name===n&&l.title===i)}storyIdToEntry(e){const r=this.entries[e];if(!r)throw new B4({storyId:e});return r}importPathToEntry(e){return Qle(this.entries)[e]}};m(kV,"StoryIndexStore");var ece=kV,tce=m(t=>typeof t=="string"?{name:t}:t,"normalizeType"),rce=m(t=>typeof t=="string"?{type:t}:t,"normalizeControl"),nce=m((t,e)=>{const{type:r,control:n,...i}=t,l={name:e,...i};return r&&(l.type=tce(r)),n?l.control=rce(n):n===!1&&(l.control={disable:!0}),l},"normalizeInputType"),cv=m(t=>of(t,nce),"normalizeInputTypes"),kn=m(t=>Array.isArray(t)?t:t?[t]:[],"normalizeArrays"),ice=Kr`
CSF .story annotations deprecated; annotate story functions directly:
- StoryFn.story.name => StoryFn.storyName
- StoryFn.story.(parameters|decorators) => StoryFn.(parameters|decorators)
See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#hoisted-csf-annotations for details and codemod.
`;function Lp(t,e,r){const n=e,i=typeof e=="function"?e:null,{story:l}=n;l&&(Bn.debug("deprecated story",l),kC(ice));const c=wle(t),s=typeof n!="function"&&n.name||n.storyName||l?.name||c,p=[...kn(n.decorators),...kn(l?.decorators)],g={...l?.parameters,...n.parameters},_={...l?.args,...n.args},x={...l?.argTypes,...n.argTypes},P=[...kn(n.loaders),...kn(l?.loaders)],A=[...kn(n.beforeEach),...kn(l?.beforeEach)],M=[...kn(n.afterEach),...kn(l?.afterEach)],{render:N,play:z,tags:j=[],globals:$={}}=n,J=g.__id||vle(r.id,c);return{moduleExport:e,id:J,name:s,tags:j,decorators:p,parameters:g,args:_,argTypes:cv(x),loaders:P,beforeEach:A,afterEach:M,globals:$,...N&&{render:N},...i&&{userStoryFn:i},...z&&{play:z}}}m(Lp,"normalizeStory");function uv(t,e=t.title,r){const{id:n,argTypes:i}=t;return{id:xV(n||e),...t,title:e,...i&&{argTypes:cv(i)},parameters:{fileName:r,...t.parameters}}}m(uv,"normalizeComponentAnnotations");var oce=m(t=>{const{globals:e,globalTypes:r}=t;(e||r)&&Bn.error("Global args/argTypes can only be set globally",JSON.stringify({globals:e,globalTypes:r}))},"checkGlobals"),sce=m(t=>{const{options:e}=t;e?.storySort&&Bn.error("The storySort option parameter can only be set globally")},"checkStorySort"),R0=m(t=>{t&&(oce(t),sce(t))},"checkDisallowedParameters");function LV(t,e,r){const{default:n,__namedExportsOrder:i,...l}=t,c=Object.values(l)[0];if(lx(c)){const g=uv(c.meta.input,r,e);R0(g.parameters);const _={meta:g,stories:{},moduleExports:t};return Object.keys(l).forEach(x=>{if(sv(x,g)){const P=l[x],A=Lp(x,P.input,g);R0(A.parameters),_.stories[A.id]=A,vV(P).forEach(M=>{var j;const N=M.input.name,z=xle(A.id,N);(j=M.input).parameters??(j.parameters={}),M.input.parameters.__id=z,_.stories[z]=Lp(N,M.input,g)})}}),_.projectAnnotations=c.meta.preview.composed,_}const s=uv(n,r,e);R0(s.parameters);const p={meta:s,stories:{},moduleExports:t};return Object.keys(l).forEach(g=>{if(sv(g,s)){const _=Lp(g,l[g],s);R0(_.parameters),p.stories[_.id]=_}}),p}m(LV,"processCSFFile");function yI(t,e,r){const n=r(t);return i=>e(n,i)}m(yI,"decorateStory");function _I({componentId:t,title:e,kind:r,id:n,name:i,story:l,parameters:c,initialArgs:s,argTypes:p,...g}={}){return g}m(_I,"sanitizeStoryContextUpdate");function bI(t,e){const r={},n=m(l=>c=>{if(!r.value)throw new Error("Decorated function called without init");return r.value={...r.value,..._I(c)},l(r.value)},"bindWithContext"),i=e.reduce((l,c)=>yI(l,c,n),t);return l=>(r.value=l,i(l))}m(bI,"defaultDecorateStory");var kh=m((...t)=>{const e={},r=t.filter(Boolean),n=r.reduce((i,l)=>(Object.entries(l).forEach(([c,s])=>{const p=i[c];Array.isArray(s)||typeof p>"u"?i[c]=s:ta(s)&&ta(p)?e[c]=!0:typeof s<"u"&&(i[c]=s)}),i),{});return Object.keys(e).forEach(i=>{const l=r.filter(Boolean).map(c=>c[i]).filter(c=>typeof c<"u");l.every(c=>ta(c))?n[i]=kh(...l):n[i]=l[l.length-1]}),n},"combineParameters");function cx(t,e,r){const{moduleExport:n,id:i,name:l}=t||{},c=xI(t,e,r),s=m(async ne=>{const Z={};for(const U of[kn(r.loaders),kn(e.loaders),kn(t.loaders)]){if(ne.abortSignal.aborted)return Z;const K=await Promise.all(U.map(he=>he(ne)));Object.assign(Z,...K)}return Z},"applyLoaders"),p=m(async ne=>{const Z=new Array;for(const U of[...kn(r.beforeEach),...kn(e.beforeEach),...kn(t.beforeEach)]){if(ne.abortSignal.aborted)return Z;const K=await U(ne);K&&Z.push(K)}return Z},"applyBeforeEach"),g=m(async ne=>{const Z=[...kn(r.afterEach),...kn(e.afterEach),...kn(t.afterEach)].reverse();for(const U of Z){if(ne.abortSignal.aborted)return;await U(ne)}},"applyAfterEach"),_=m(ne=>ne.originalStoryFn(ne.args,ne),"undecoratedStoryFn"),{applyDecorators:x=bI,runStep:P}=r,A=[...kn(t?.decorators),...kn(e?.decorators),...kn(r?.decorators)],M=t?.userStoryFn||t?.render||e.render||r.render,N=TF(x)(_,A),z=m(ne=>N(ne),"unboundStoryFn"),j=t?.play??e?.play,$=NF(j);if(!M&&!$)throw new lF({id:i});const J=m(ne=>async()=>(await ne.renderToCanvas(),ne.canvas),"defaultMount"),X=t.mount??e.mount??r.mount??J,re=r.testingLibraryRender;return{storyGlobals:{},...c,moduleExport:n,id:i,name:l,story:l,originalStoryFn:M,undecoratedStoryFn:_,unboundStoryFn:z,applyLoaders:s,applyBeforeEach:p,applyAfterEach:g,playFunction:j,runStep:P,mount:X,testingLibraryRender:re,renderToCanvas:r.renderToCanvas,usesMount:$}}m(cx,"prepareStory");function vI(t,e,r){return{...xI(void 0,t,e),moduleExport:r}}m(vI,"prepareMeta");function xI(t,e,r){const n=["dev","test"],i=$t.DOCS_OPTIONS?.autodocs===!0?["autodocs"]:[],l=t?.tags?.includes("test-fn")?["!autodocs"]:[],c=Ele(...n,...i,...r.tags??[],...e.tags??[],...l,...t?.tags??[]),s=kh(r.parameters,e.parameters,t?.parameters),{argTypesEnhancers:p=[],argsEnhancers:g=[]}=r,_=kh(r.argTypes,e.argTypes,t?.argTypes);if(t){const $=t?.userStoryFn||t?.render||e.render||r.render;s.__isArgsStory=$&&$.length>0}const x={...r.args,...e.args,...t?.args},P={...e.globals,...t?.globals},A={componentId:e.id,title:e.title,kind:e.title,id:t?.id||e.id,name:t?.name||"__meta",story:t?.name||"__meta",component:e.component,subcomponents:e.subcomponents,tags:c,parameters:s,initialArgs:x,argTypes:_,storyGlobals:P};A.argTypes=p.reduce(($,J)=>J({...A,argTypes:$}),A.argTypes);const M={...x};A.initialArgs=[...g].reduce(($,J)=>({...$,...J({...A,initialArgs:$})}),M);const{name:N,story:z,...j}=A;return j}m(xI,"preparePartialAnnotations");function wI(t){const{args:e}=t;let r={...t,allArgs:void 0,argsByTarget:void 0};if($t.FEATURES?.argTypeTargetsV7){const l=AV(t);r={...t,allArgs:t.args,argsByTarget:l,args:l[PV]||{}}}const n=Object.entries(r.args).reduce((l,[c,s])=>{if(!r.argTypes[c]?.mapping)return l[c]=s,l;const p=m(g=>{const _=r.argTypes[c].mapping;return _&&g in _?_[g]:g},"mappingFn");return l[c]=Array.isArray(s)?s.map(p):p(s),l},{}),i=Object.entries(n).reduce((l,[c,s])=>{const p=r.argTypes[c]||{};return bre(p,n,r.globals)&&(l[c]=s),l},{});return{...r,unmappedArgs:e,args:i}}m(wI,"prepareContext");var A2=m((t,e,r)=>{const n=typeof t;switch(n){case"boolean":case"string":case"number":case"function":case"symbol":return{name:n}}return t?r.has(t)?(Bn.warn(Kr`
        We've detected a cycle in arg '${e}'. Args should be JSON-serializable.

        Consider using the mapping feature or fully custom args:
        - Mapping: https://storybook.js.org/docs/writing-stories/args#mapping-to-complex-arg-values
        - Custom args: https://storybook.js.org/docs/essentials/controls#fully-custom-args
      `),{name:"other",value:"cyclic object"}):(r.add(t),Array.isArray(t)?{name:"array",value:t.length>0?A2(t[0],e,new Set(r)):{name:"other",value:"unknown"}}:{name:"object",value:of(t,l=>A2(l,e,new Set(r)))}):{name:"object",value:{}}},"inferType"),DV=m(t=>{const{id:e,argTypes:r={},initialArgs:n={}}=t,i=of(n,(c,s)=>({name:s,type:A2(c,`${e}.${s}`,new Set)})),l=of(r,(c,s)=>({name:s}));return kh(i,l,r)},"inferArgTypes");DV.secondPass=!0;var xk=m((t,e)=>Array.isArray(e)?e.includes(t):t.match(e),"matches"),NV=m((t,e,r)=>!e&&!r?t:t&&wV(t,(n,i)=>{const l=n.name||i.toString();return!!(!e||xk(l,e))&&(!r||!xk(l,r))}),"filterArgTypes"),ace=m((t,e,r)=>{const{type:n,options:i}=t;if(n){if(r.color&&r.color.test(e)){const l=n.name;if(l==="string")return{control:{type:"color"}};l!=="enum"&&Bn.warn(`Addon controls: Control of type color only supports string, received "${l}" instead`)}if(r.date&&r.date.test(e))return{control:{type:"date"}};switch(n.name){case"array":return{control:{type:"object"}};case"boolean":return{control:{type:"boolean"}};case"string":return{control:{type:"text"}};case"number":return{control:{type:"number"}};case"enum":{const{value:l}=n;return{control:{type:l?.length<=5?"radio":"select"},options:l}}case"function":case"symbol":return null;default:return{control:{type:i?"select":"object"}}}}},"inferControl"),EI=m(t=>{const{argTypes:e,parameters:{__isArgsStory:r,controls:{include:n=null,exclude:i=null,matchers:l={}}={}}}=t;if(!r)return e;const c=NV(e,n,i),s=of(c,(p,g)=>p?.type&&ace(p,g.toString(),l));return kh(s,c)},"inferControls");EI.secondPass=!0;function sy({argTypes:t,globalTypes:e,argTypesEnhancers:r,decorators:n,loaders:i,beforeEach:l,afterEach:c,initialGlobals:s,...p}){return{...t&&{argTypes:cv(t)},...e&&{globalTypes:cv(e)},decorators:kn(n),loaders:kn(i),beforeEach:kn(l),afterEach:kn(c),argTypesEnhancers:[...r||[],DV,EI],initialGlobals:s,...p}}m(sy,"normalizeProjectAnnotations");var lce=m(t=>async()=>{const e=[];for(const r of t){const n=await r();n&&e.unshift(n)}return async()=>{for(const r of e)await r()}},"composeBeforeAllHooks");function TI(t){return async(e,r,n)=>{await t.reduceRight((l,c)=>async()=>c(e,l,n),async()=>r(n))()}}m(TI,"composeStepRunners");function sf(t,e){return t.map(r=>r.default?.[e]??r[e]).filter(Boolean)}m(sf,"getField");function fl(t,e,r={}){return sf(t,e).reduce((n,i)=>{const l=kn(i);return r.reverseFileOrder?[...l,...n]:[...n,...l]},[])}m(fl,"getArrayField");function mg(t,e){return Object.assign({},...sf(t,e))}m(mg,"getObjectField");function mp(t,e){return sf(t,e).pop()}m(mp,"getSingletonField");function Lh(t){const e=fl(t,"argTypesEnhancers"),r=sf(t,"runStep"),n=fl(t,"beforeAll");return{parameters:kh(...sf(t,"parameters")),decorators:fl(t,"decorators",{reverseFileOrder:!($t.FEATURES?.legacyDecoratorFileOrder??!1)}),args:mg(t,"args"),argsEnhancers:fl(t,"argsEnhancers"),argTypes:mg(t,"argTypes"),argTypesEnhancers:[...e.filter(i=>!i.secondPass),...e.filter(i=>i.secondPass)],initialGlobals:mg(t,"initialGlobals"),globalTypes:mg(t,"globalTypes"),loaders:fl(t,"loaders"),beforeAll:lce(n),beforeEach:fl(t,"beforeEach"),afterEach:fl(t,"afterEach"),render:mp(t,"render"),renderToCanvas:mp(t,"renderToCanvas"),applyDecorators:mp(t,"applyDecorators"),runStep:TI(r),tags:fl(t,"tags"),mount:mp(t,"mount"),testingLibraryRender:mp(t,"testingLibraryRender")}}m(Lh,"composeConfigs");var cce=5e3;function SI(){try{return!!globalThis.__vitest_browser__||!!globalThis.window?.navigator?.userAgent?.match(/StorybookTestRunner/)}catch{return!1}}m(SI,"isTestEnvironment");function ux(t=!0){if(!("document"in globalThis&&"createElement"in globalThis.document))return()=>{};const e=document.createElement("style");e.textContent=`*, *:before, *:after {
    animation: none !important;
  }`,document.head.appendChild(e);const r=document.createElement("style");return r.textContent=`*, *:before, *:after {
    animation-delay: 0s !important;
    animation-direction: ${t?"reverse":"normal"} !important;
    animation-play-state: paused !important;
    transition: none !important;
  }`,document.head.appendChild(r),document.body.clientHeight,document.head.removeChild(e),()=>{r.parentNode?.removeChild(r)}}m(ux,"pauseAnimations");async function hx(t){if(!("document"in globalThis&&"getAnimations"in globalThis.document&&"querySelectorAll"in globalThis.document))return;let e=!1;await Promise.race([new Promise(r=>{setTimeout(()=>{const n=[globalThis.document,...CI(globalThis.document)],i=m(async()=>{if(e||t?.aborted)return;const l=n.flatMap(c=>c?.getAnimations?.()||[]).filter(c=>c.playState==="running"&&!FV(c));l.length>0&&(await Promise.all(l.map(c=>c.finished)),await i())},"checkAnimationsFinished");i().then(r)},100)}),new Promise(r=>setTimeout(()=>{e=!0,r(void 0)},cce))])}m(hx,"waitForAnimations");function CI(t){return[t,...t.querySelectorAll("*")].reduce((e,r)=>("shadowRoot"in r&&r.shadowRoot&&e.push(r.shadowRoot,...CI(r.shadowRoot)),e),[])}m(CI,"getShadowRoots");function FV(t){if(t instanceof CSSAnimation&&t.effect instanceof KeyframeEffect&&t.effect.target){const e=getComputedStyle(t.effect.target,t.effect.pseudoElement),r=e.animationName?.split(", ").indexOf(t.animationName);return e.animationIterationCount.split(", ")[r]==="infinite"}return!1}m(FV,"isInfiniteAnimation");var zV=class{constructor(){this.reports=[]}async addReport(e){this.reports.push(e)}};m(zV,"ReporterAPI");var PI=zV;function AI(t,e,r){return lx(t)?{story:t.input,meta:t.meta.input,preview:t.meta.preview.composed}:{story:t,meta:bV(e)?e.input:e,preview:r}}m(AI,"getCsfFactoryAnnotations");function jV(t){globalThis.defaultProjectAnnotations=t}m(jV,"setDefaultProjectAnnotations");var uce="ComposedStory",hce="Unnamed Story";function BV(t){return t?Lh([t]):{}}m(BV,"extractAnnotation");function qV(t){const e=Array.isArray(t)?t:[t];return globalThis.globalProjectAnnotations=Lh([...gI(),globalThis.defaultProjectAnnotations??{},Lh(e.map(BV))]),globalThis.globalProjectAnnotations??{}}m(qV,"setProjectAnnotations");var Oc=[];function RI(t,e,r,n,i){if(t===void 0)throw new Error("Expected a story but received undefined.");e.title=e.title??uce;const l=uv(e),c=i||t.storyName||t.story?.name||t.name||hce,s=Lp(c,t,l),p=sy(Lh([n??globalThis.globalProjectAnnotations??{},r??{}])),g=cx(s,l,p),x={...MV(p.globalTypes),...p.initialGlobals,...g.storyGlobals},P=new PI,A=m(()=>{const J=wI({hooks:new WC,globals:x,args:{...g.initialArgs},viewMode:"story",reporting:P,loaded:{},abortSignal:new AbortController().signal,step:m((X,re)=>g.runStep(X,re,J),"step"),canvasElement:null,canvas:{},userEvent:{},globalTypes:p.globalTypes,...g,context:null,mount:null});return J.parameters.__isPortableStory=!0,J.context=J,g.renderToCanvas&&(J.renderToCanvas=async()=>{const X=await g.renderToCanvas?.({componentId:g.componentId,title:g.title,id:g.id,name:g.name,tags:g.tags,showMain:m(()=>{},"showMain"),showError:m(re=>{throw new Error(`${re.title}
${re.description}`)},"showError"),showException:m(re=>{throw re},"showException"),forceRemount:!0,storyContext:J,storyFn:m(()=>g.unboundStoryFn(J),"storyFn"),unboundStoryFn:g.unboundStoryFn},J.canvasElement);X&&Oc.push(X)}),J.mount=g.mount(J),J},"initializeContext");let M;const N=m(async J=>{const X=A();return X.canvasElement??(X.canvasElement=globalThis?.document?.body),M&&(X.loaded=M.loaded),Object.assign(X,J),g.playFunction(X)},"play"),z=m(J=>{const X=A();return Object.assign(X,J),UV(g,X)},"run"),j=g.playFunction?N:void 0;return Object.assign(m(function(X){const re=A();return M&&(re.loaded=M.loaded),re.args={...re.initialArgs,...X},g.unboundStoryFn(re)},"storyFn"),{id:g.id,storyName:c,load:m(async()=>{for(const X of[...Oc].reverse())await X();Oc.length=0;const J=A();J.loaded=await g.applyLoaders(J),Oc.push(...(await g.applyBeforeEach(J)).filter(Boolean)),M=J},"load"),globals:x,args:g.initialArgs,parameters:g.parameters,argTypes:g.argTypes,play:j,run:z,reporting:P,tags:g.tags})}m(RI,"composeStory");var dce=m((t,e,r,n)=>RI(t,e,r,{},n),"defaultComposeStory");function $V(t,e,r=dce){const{default:n,__esModule:i,__namedExportsOrder:l,...c}=t;let s=n;return Object.entries(c).reduce((g,[_,x])=>{const{story:P,meta:A}=AI(x);return!s&&A&&(s=A),sv(_,s)?Object.assign(g,{[_]:r(P,s,e,_)}):g},{})}m($V,"composeStories");function VV(t){return t.extend({mount:m(async({mount:e,page:r},n)=>{await n(async(i,...l)=>{if(!("__pw_type"in i)||"__pw_type"in i&&i.__pw_type!=="jsx")throw new Error(Kr`
              Portable stories in Playwright CT only work when referencing JSX elements.
              Please use JSX format for your components such as:

              instead of:
              await mount(MyComponent, { props: { foo: 'bar' } })

              do:
              await mount(<MyComponent foo="bar"/>)

              More info: https://storybook.js.org/docs/api/portable-stories/portable-stories-playwright?ref=error
            `);const{props:c,...s}=i;await r.evaluate(async g=>{const _=await globalThis.__pwUnwrapObject?.(g);return("__pw_type"in _?_.type:_)?.load?.()},s);const p=await e(i,...l);return await r.evaluate(async g=>{const _=await globalThis.__pwUnwrapObject?.(g),x="__pw_type"in _?_.type:_,P=document.querySelector("#root");return x?.play?.({canvasElement:P})},s),p})},"mount")})}m(VV,"createPlaywrightTest");async function UV(t,e){for(const l of[...Oc].reverse())await l();if(Oc.length=0,!e.canvasElement){const l=document.createElement("div");globalThis?.document?.body?.appendChild(l),e.canvasElement=l,Oc.push(()=>{globalThis?.document?.body?.contains(l)&&globalThis?.document?.body?.removeChild(l)})}if(e.loaded=await t.applyLoaders(e),e.abortSignal.aborted)return;Oc.push(...(await t.applyBeforeEach(e)).filter(Boolean));const r=t.playFunction,n=t.usesMount;if(n||await e.mount(),e.abortSignal.aborted)return;r&&(n||(e.mount=async()=>{throw new HC({playFunction:r.toString()})}),await r(e));let i;SI()?i=ux():await hx(e.abortSignal),await t.applyAfterEach(e),await i?.()}m(UV,"runStory");var wk=1e3,pce=1e4,GV=class{constructor(e,r,n){this.importFn=r,this.storyIndex=new ece(e),this.projectAnnotations=sy(Lh([...gI(),n]));const{initialGlobals:i,globalTypes:l}=this.projectAnnotations;this.args=new Kle,this.userGlobals=new Yle({globals:i,globalTypes:l}),this.hooks={},this.cleanupCallbacks={},this.processCSFFileWithCache=(0,jE.default)(wk)(LV),this.prepareMetaWithCache=(0,jE.default)(wk)(vI),this.prepareStoryWithCache=(0,jE.default)(pce)(cx)}setProjectAnnotations(e){this.projectAnnotations=sy(e);const{initialGlobals:r,globalTypes:n}=e;this.userGlobals.set({globals:r,globalTypes:n})}async onStoriesChanged({importFn:e,storyIndex:r}){e&&(this.importFn=e),r&&(this.storyIndex.entries=r.entries),this.cachedCSFFiles&&await this.cacheAllCSFFiles()}async storyIdToEntry(e){return this.storyIndex.storyIdToEntry(e)}async loadCSFFileByStoryId(e){const{importPath:r,title:n}=this.storyIndex.storyIdToEntry(e),i=await this.importFn(r);return this.processCSFFileWithCache(i,r,n)}async loadAllCSFFiles(){const e={};return Object.entries(this.storyIndex.entries).forEach(([n,{importPath:i}])=>{e[i]=n}),(await Promise.all(Object.entries(e).map(async([n,i])=>({importPath:n,csfFile:await this.loadCSFFileByStoryId(i)})))).reduce((n,{importPath:i,csfFile:l})=>(n[i]=l,n),{})}async cacheAllCSFFiles(){this.cachedCSFFiles=await this.loadAllCSFFiles()}preparedMetaFromCSFFile({csfFile:e}){const r=e.meta;return this.prepareMetaWithCache(r,this.projectAnnotations,e.moduleExports.default)}async loadStory({storyId:e}){const r=await this.loadCSFFileByStoryId(e);return this.storyFromCSFFile({storyId:e,csfFile:r})}storyFromCSFFile({storyId:e,csfFile:r}){const n=r.stories[e];if(!n)throw new nF({storyId:e});const i=r.meta,l=this.prepareStoryWithCache(n,i,r.projectAnnotations??this.projectAnnotations);return this.args.setInitial(l),this.hooks[l.id]=this.hooks[l.id]||new WC,l}componentStoriesFromCSFFile({csfFile:e}){return Object.keys(this.storyIndex.entries).filter(r=>!!e.stories[r]).map(r=>this.storyFromCSFFile({storyId:r,csfFile:e}))}async loadEntry(e){const r=await this.storyIdToEntry(e),n=r.type==="docs"?r.storiesImports:[],[i,...l]=await Promise.all([this.importFn(r.importPath),...n.map(c=>{const s=this.storyIndex.importPathToEntry(c);return this.loadCSFFileByStoryId(s.id)})]);return{entryExports:i,csfFiles:l}}getStoryContext(e,{forceInitialArgs:r=!1}={}){const n=this.userGlobals.get(),{initialGlobals:i}=this.userGlobals,l=new PI;return wI({...e,args:r?e.initialArgs:this.args.get(e.id),initialGlobals:i,globalTypes:this.projectAnnotations.globalTypes,userGlobals:n,reporting:l,globals:{...n,...e.storyGlobals},hooks:this.hooks[e.id]})}addCleanupCallbacks(e,...r){this.cleanupCallbacks[e.id]=(this.cleanupCallbacks[e.id]||[]).concat(r)}async cleanupStory(e){this.hooks[e.id].clean();const r=this.cleanupCallbacks[e.id];if(r)for(const n of[...r].reverse())await n();delete this.cleanupCallbacks[e.id]}extract(e={includeDocsOnly:!1}){const{cachedCSFFiles:r}=this;if(console.log("extract: extracting stories",r),!r)throw new U4;const n=Object.entries(this.storyIndex.entries).reduce((i,[l,c])=>{if(c.type==="docs")return i;const s=r[c.importPath],p=this.storyFromCSFFile({storyId:l,csfFile:s});return!e.includeDocsOnly&&p.parameters.docsOnly||(i[l]=Object.entries(p).reduce((g,[_,x])=>_==="story"&&c.subtype==="test"?{...g,story:c.parentName}:_==="moduleExport"||typeof x=="function"?g:Array.isArray(x)?Object.assign(g,{[_]:x.slice().sort()}):Object.assign(g,{[_]:x}),{args:p.initialArgs,globals:{...this.userGlobals.initialGlobals,...this.userGlobals.globals,...p.storyGlobals},storyId:c.parent?c.parent:l})),i},{});return console.log("extract: stories",n),n}};m(GV,"StoryStore");var HV=GV;function JV(t){return t.startsWith("\\\\?\\")?t:t.replace(/\\/g,"/")}m(JV,"slash");var fce=m(t=>{if(t.length===0)return t;const e=t[t.length-1],r=e?.replace(/(?:[.](?:story|stories))?([.][^.]+)$/i,"");if(t.length===1)return[r];const n=t[t.length-2];return r&&n&&r.toLowerCase()===n.toLowerCase()?[...t.slice(0,-2),r]:r&&(/^(story|stories)([.][^.]+)$/i.test(e)||/^index$/i.test(r))?t.slice(0,-1):[...t.slice(0,-1),r]},"sanitize");function R2(t){return t.flatMap(e=>e.split("/")).filter(Boolean).join("/")}m(R2,"pathJoin");var WV=m((t,e,r)=>{const{directory:n,importPathMatcher:i,titlePrefix:l=""}=e||{};typeof t=="number"&&oi.warn(Kr`
      CSF Auto-title received a numeric fileName. This typically happens when
      webpack is mis-configured in production mode. To force webpack to produce
      filenames, set optimization.moduleIds = "named" in your webpack config.
    `);const c=JV(String(t));if(i.exec(c)){if(!r){const s=c.replace(n,"");let p=R2([l,s]).split("/");return p=fce(p),p.join("/")}return l?R2([l,r]):r}},"userOrAutoTitleFromSpecifier"),mce=m((t,e,r)=>{for(let n=0;n<e.length;n+=1){const i=WV(t,e[n],r);if(i)return i}return r||void 0},"userOrAutoTitle"),Ek=/\s*\/\s*/,gce=m((t={})=>(e,r)=>{if(e.title===r.title&&!t.includeNames)return 0;const n=t.method||"configure";let i=t.order||[];const l=e.title.trim().split(Ek),c=r.title.trim().split(Ek);t.includeNames&&(l.push(e.name),c.push(r.name));let s=0;for(;l[s]||c[s];){if(!l[s])return-1;if(!c[s])return 1;const p=l[s],g=c[s];if(p!==g){let x=i.indexOf(p),P=i.indexOf(g);const A=i.indexOf("*");return x!==-1||P!==-1?(x===-1&&(A!==-1?x=A:x=i.length),P===-1&&(A!==-1?P=A:P=i.length),x-P):n==="configure"?0:p.localeCompare(g,t.locales?t.locales:void 0,{numeric:!0,sensitivity:"accent"})}let _=i.indexOf(p);_===-1&&(_=i.indexOf("*")),i=_!==-1&&Array.isArray(i[_+1])?i[_+1]:[],s+=1}return 0},"storySort"),yce=m((t,e,r)=>{if(e){let n;typeof e=="function"?n=e:n=gce(e),t.sort(n)}else t.sort((n,i)=>r.indexOf(n.importPath)-r.indexOf(i.importPath));return t},"sortStoriesCommon"),_ce=m((t,e,r)=>{try{return yce(t,e,r)}catch(n){throw new Error(Kr`
    Error sorting stories with sort parameter ${e}:

    > ${n.message}

    Are you using a V6-style sort function in V7 mode?

    More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort
  `)}},"sortStoriesV7"),dx=new Error("prepareAborted"),{AbortController:Tk}=globalThis;function I2(t){try{const{name:e="Error",message:r=String(t),stack:n}=t;return{name:e,message:r,stack:n}}catch{return{name:"Error",message:String(t)}}}m(I2,"serializeError");var ZV=class{constructor(e,r,n,i,l,c,s={autoplay:!0,forceInitialArgs:!1},p){this.channel=e,this.store=r,this.renderToScreen=n,this.callbacks=i,this.id=l,this.viewMode=c,this.renderOptions=s,this.type="story",this.notYetRendered=!0,this.rerenderEnqueued=!1,this.disableKeyListeners=!1,this.teardownRender=m(()=>{},"teardownRender"),this.torndown=!1,this.abortController=new Tk,this.renderId=Date.now(),p&&(this.story=p,this.phase="preparing")}async runPhase(e,r,n){this.phase=r,this.channel.emit(Th,{newPhase:this.phase,renderId:this.renderId,storyId:this.id}),n&&(await n(),this.checkIfAborted(e))}checkIfAborted(e){return e.aborted&&!["finished","aborted","errored"].includes(this.phase)&&(this.phase="aborted",this.channel.emit(Th,{newPhase:this.phase,renderId:this.renderId,storyId:this.id})),e.aborted}async prepare(){if(await this.runPhase(this.abortController.signal,"preparing",async()=>{this.story=await this.store.loadStory({storyId:this.id})}),this.abortController.signal.aborted)throw await this.store.cleanupStory(this.story),dx}isEqual(e){return!!(this.id===e.id&&this.story&&this.story===e.story)}isPreparing(){return["preparing"].includes(this.phase)}isPending(){return["loading","beforeEach","rendering","playing","afterEach"].includes(this.phase)}async renderToElement(e){return this.canvasElement=e,this.render({initial:!0,forceRemount:!0})}storyContext(){if(!this.story)throw new Error("Cannot call storyContext before preparing");const{forceInitialArgs:e}=this.renderOptions;return this.store.getStoryContext(this.story,{forceInitialArgs:e})}async render({initial:e=!1,forceRemount:r=!1}={}){const{canvasElement:n}=this;if(!this.story)throw new Error("cannot render when not prepared");const i=this.story;if(!n)throw new Error("cannot render when canvasElement is unset");const{id:l,componentId:c,title:s,name:p,tags:g,applyLoaders:_,applyBeforeEach:x,applyAfterEach:P,unboundStoryFn:A,playFunction:M,runStep:N}=i;r&&!e&&(this.cancelRender(),this.abortController=new Tk);const z=this.abortController.signal;let j=!1;const $=i.usesMount;try{const J={...this.storyContext(),viewMode:this.viewMode,abortSignal:z,canvasElement:n,loaded:{},step:m((Ie,ee)=>N(Ie,ee,J),"step"),context:null,canvas:{},userEvent:{},renderToCanvas:m(async()=>{const Ie=await this.renderToScreen(X,n);this.teardownRender=Ie||(()=>{}),j=!0},"renderToCanvas"),mount:m(async(...Ie)=>{this.callbacks.showStoryDuringRender?.();let ee=null;return await this.runPhase(z,"rendering",async()=>{ee=await i.mount(J)(...Ie)}),$&&await this.runPhase(z,"playing"),ee},"mount")};J.context=J;const X={componentId:c,title:s,kind:s,id:l,name:p,story:p,tags:g,...this.callbacks,showError:m(Ie=>(this.phase="errored",this.callbacks.showError(Ie)),"showError"),showException:m(Ie=>(this.phase="errored",this.callbacks.showException(Ie)),"showException"),forceRemount:r||this.notYetRendered,storyContext:J,storyFn:m(()=>A(J),"storyFn"),unboundStoryFn:A};if(await this.runPhase(z,"loading",async()=>{J.loaded=await _(J)}),z.aborted)return;const re=await x(J);if(this.store.addCleanupCallbacks(i,...re),this.checkIfAborted(z)||(!j&&!$&&await J.mount(),this.notYetRendered=!1,z.aborted))return;const ne=this.story.parameters?.test?.dangerouslyIgnoreUnhandledErrors===!0,Z=new Set,U=m(Ie=>{Ie.error&&Z.add(Ie.error)},"onError"),K=m(Ie=>{Ie.reason&&Z.add(Ie.reason)},"onUnhandledRejection");if(this.renderOptions.autoplay&&r&&M&&this.phase!=="errored"){window?.addEventListener?.("error",U),window?.addEventListener?.("unhandledrejection",K),this.disableKeyListeners=!0;try{if($?await M(J):(J.mount=async()=>{throw new HC({playFunction:M.toString()})},await this.runPhase(z,"playing",async()=>M(J))),!j)throw new uF;this.checkIfAborted(z),!ne&&Z.size>0?await this.runPhase(z,"errored"):await this.runPhase(z,"played")}catch(Ie){if(this.callbacks.showStoryDuringRender?.(),await this.runPhase(z,"errored",async()=>{this.channel.emit(QD,I2(Ie))}),this.story.parameters.throwPlayFunctionExceptions!==!1)throw Ie;console.error(Ie)}if(!ne&&Z.size>0&&this.channel.emit(eN,Array.from(Z).map(I2)),this.disableKeyListeners=!1,window?.removeEventListener?.("unhandledrejection",K),window?.removeEventListener?.("error",U),z.aborted)return}await this.runPhase(z,"completing",async()=>{SI()?this.store.addCleanupCallbacks(i,ux()):await hx(z)}),await this.runPhase(z,"completed",async()=>{this.channel.emit(vb,l)}),this.phase!=="errored"&&await this.runPhase(z,"afterEach",async()=>{await P(J)});const he=!ne&&Z.size>0,ue=J.reporting.reports.some(Ie=>Ie.status==="failed"),Ee=he||ue;await this.runPhase(z,"finished",async()=>this.channel.emit(jT,{storyId:l,status:Ee?"error":"success",reporters:J.reporting.reports}))}catch(J){this.phase="errored",this.callbacks.showException(J),await this.runPhase(z,"finished",async()=>this.channel.emit(jT,{storyId:l,status:"error",reporters:[]}))}this.rerenderEnqueued&&(this.rerenderEnqueued=!1,this.render())}async rerender(){if(this.isPending()&&this.phase!=="playing")this.rerenderEnqueued=!0;else return this.render()}async remount(){return await this.teardown(),this.render({forceRemount:!0})}cancelRender(){this.abortController.abort()}cancelPlayFunction(){this.phase==="playing"&&(this.abortController.abort(),this.runPhase(this.abortController.signal,"aborted"))}async teardown(){this.torndown=!0,this.cancelRender(),this.story&&await this.store.cleanupStory(this.story);for(let e=0;e<3;e+=1){if(!this.isPending()){await this.teardownRender();return}await new Promise(r=>setTimeout(r,0))}window?.location?.reload?.(),await new Promise(()=>{})}};m(ZV,"StoryRender");var M2=ZV,{fetch:bce}=$t,vce="./index.json",KV=class{constructor(e,r,n=Rs.getChannel(),i=!0){this.importFn=e,this.getProjectAnnotations=r,this.channel=n,this.storyRenders=[],this.storeInitializationPromise=new Promise((l,c)=>{this.resolveStoreInitializationPromise=l,this.rejectStoreInitializationPromise=c}),i&&this.initialize()}get storyStore(){return new Proxy({},{get:m((e,r)=>{if(this.storyStoreValue)return kC("Accessing the Story Store is deprecated and will be removed in 9.0"),this.storyStoreValue[r];throw new oF},"get")})}async initialize(){this.setupListeners();try{const e=await this.getProjectAnnotationsOrRenderError();await this.runBeforeAllHook(e),await this.initializeWithProjectAnnotations(e);const r=globalThis?.navigator?.userAgent;await this.channel.emit(rN,{userAgent:r})}catch(e){this.rejectStoreInitializationPromise(e)}}ready(){return this.storeInitializationPromise}setupListeners(){this.channel.on(lN,this.onStoryIndexChanged.bind(this)),this.channel.on(MC,this.onUpdateGlobals.bind(this)),this.channel.on(OC,this.onUpdateArgs.bind(this)),this.channel.on(gN,this.onRequestArgTypesInfo.bind(this)),this.channel.on(RC,this.onResetArgs.bind(this)),this.channel.on(AC,this.onForceReRender.bind(this)),this.channel.on(bb,this.onForceRemount.bind(this)),this.channel.on(pN,this.onStoryHotUpdated.bind(this))}async getProjectAnnotationsOrRenderError(){try{const e=await this.getProjectAnnotations();if(this.renderToCanvas=e.renderToCanvas,!this.renderToCanvas)throw new H4;return e}catch(e){throw this.renderPreviewEntryError("Error reading preview.js:",e),e}}async initializeWithProjectAnnotations(e){this.projectAnnotationsBeforeInitialization=e;try{const r=await this.getStoryIndexFromServer();return this.initializeWithStoryIndex(r)}catch(r){throw this.renderPreviewEntryError("Error loading story index:",r),r}}async runBeforeAllHook(e){try{await this.beforeAllCleanup?.(),this.beforeAllCleanup=await e.beforeAll?.()}catch(r){throw this.renderPreviewEntryError("Error in beforeAll hook:",r),r}}async getStoryIndexFromServer(){const e=await bce(vce);if(e.status===200)return e.json();throw new Z4({text:await e.text()})}initializeWithStoryIndex(e){if(!this.projectAnnotationsBeforeInitialization)throw new Error("Cannot call initializeWithStoryIndex until project annotations resolve");this.storyStoreValue=new HV(e,this.importFn,this.projectAnnotationsBeforeInitialization),delete this.projectAnnotationsBeforeInitialization,this.setInitialGlobals(),this.resolveStoreInitializationPromise()}async setInitialGlobals(){this.emitGlobals()}emitGlobals(){if(!this.storyStoreValue)throw new Qo({methodName:"emitGlobals"});const e={globals:this.storyStoreValue.userGlobals.get()||{},globalTypes:this.storyStoreValue.projectAnnotations.globalTypes||{}};this.channel.emit(iN,e)}async onGetProjectAnnotationsChanged({getProjectAnnotations:e}){delete this.previewEntryError,this.getProjectAnnotations=e;const r=await this.getProjectAnnotationsOrRenderError();if(await this.runBeforeAllHook(r),!this.storyStoreValue){await this.initializeWithProjectAnnotations(r);return}this.storyStoreValue.setProjectAnnotations(r),this.emitGlobals()}async onStoryIndexChanged(){if(delete this.previewEntryError,!(!this.storyStoreValue&&!this.projectAnnotationsBeforeInitialization))try{const e=await this.getStoryIndexFromServer();if(this.projectAnnotationsBeforeInitialization){this.initializeWithStoryIndex(e);return}await this.onStoriesChanged({storyIndex:e})}catch(e){throw this.renderPreviewEntryError("Error loading story index:",e),e}}async onStoriesChanged({importFn:e,storyIndex:r}){if(!this.storyStoreValue)throw new Qo({methodName:"onStoriesChanged"});await this.storyStoreValue.onStoriesChanged({importFn:e,storyIndex:r})}async onUpdateGlobals({globals:e,currentStory:r}){if(this.storyStoreValue||await this.storeInitializationPromise,!this.storyStoreValue)throw new Qo({methodName:"onUpdateGlobals"});if(this.storyStoreValue.userGlobals.update(e),r){const{initialGlobals:n,storyGlobals:i,userGlobals:l,globals:c}=this.storyStoreValue.getStoryContext(r);this.channel.emit(Bg,{initialGlobals:n,userGlobals:l,storyGlobals:i,globals:c})}else{const{initialGlobals:n,globals:i}=this.storyStoreValue.userGlobals;this.channel.emit(Bg,{initialGlobals:n,userGlobals:i,storyGlobals:{},globals:i})}await Promise.all(this.storyRenders.map(n=>n.rerender()))}async onUpdateArgs({storyId:e,updatedArgs:r}){if(!this.storyStoreValue)throw new Qo({methodName:"onUpdateArgs"});this.storyStoreValue.args.update(e,r),await Promise.all(this.storyRenders.filter(n=>n.id===e&&!n.renderOptions.forceInitialArgs).map(n=>n.story&&n.story.usesMount?n.remount():n.rerender())),this.channel.emit(oN,{storyId:e,args:this.storyStoreValue.args.get(e)})}async onRequestArgTypesInfo({id:e,payload:r}){try{await this.storeInitializationPromise;const n=await this.storyStoreValue?.loadStory(r);this.channel.emit(BT,{id:e,success:!0,payload:{argTypes:n?.argTypes||{}},error:null})}catch(n){this.channel.emit(BT,{id:e,success:!1,error:n?.message})}}async onResetArgs({storyId:e,argNames:r}){if(!this.storyStoreValue)throw new Qo({methodName:"onResetArgs"});const i=this.storyRenders.find(s=>s.id===e)?.story||await this.storyStoreValue.loadStory({storyId:e}),c=(r||[...new Set([...Object.keys(i.initialArgs),...Object.keys(this.storyStoreValue.args.get(e))])]).reduce((s,p)=>(s[p]=i.initialArgs[p],s),{});await this.onUpdateArgs({storyId:e,updatedArgs:c})}async onForceReRender(){await Promise.all(this.storyRenders.map(e=>e.rerender()))}async onForceRemount({storyId:e}){await Promise.all(this.storyRenders.filter(r=>r.id===e).map(r=>r.remount()))}async onStoryHotUpdated(){await Promise.all(this.storyRenders.map(e=>e.cancelPlayFunction()))}renderStoryToElement(e,r,n,i){if(!this.renderToCanvas||!this.storyStoreValue)throw new Qo({methodName:"renderStoryToElement"});const l=new M2(this.channel,this.storyStoreValue,this.renderToCanvas,n,e.id,"docs",i,e);return l.renderToElement(r),this.storyRenders.push(l),async()=>{await this.teardownRender(l)}}async teardownRender(e,{viewModeChanged:r}={}){this.storyRenders=this.storyRenders.filter(n=>n!==e),await e?.teardown?.({viewModeChanged:r})}async loadStory({storyId:e}){if(!this.storyStoreValue)throw new Qo({methodName:"loadStory"});return this.storyStoreValue.loadStory({storyId:e})}getStoryContext(e,{forceInitialArgs:r=!1}={}){if(!this.storyStoreValue)throw new Qo({methodName:"getStoryContext"});return this.storyStoreValue.getStoryContext(e,{forceInitialArgs:r})}async extract(e){if(!this.storyStoreValue)throw new Qo({methodName:"extract"});if(this.previewEntryError)throw this.previewEntryError;return await this.storyStoreValue.cacheAllCSFFiles(),this.storyStoreValue.extract(e)}renderPreviewEntryError(e,r){this.previewEntryError=r,Bn.error(e),Bn.error(r),this.channel.emit(YD,r)}};m(KV,"Preview");var YV=KV,XV=class{constructor(e,r,n,i){this.channel=e,this.store=r,this.renderStoryToElement=n,this.storyIdByName=m(l=>{const c=this.nameToStoryId.get(l);if(c)return c;throw new Error(`No story found with that name: ${l}`)},"storyIdByName"),this.componentStories=m(()=>this.componentStoriesValue,"componentStories"),this.componentStoriesFromCSFFile=m(l=>this.store.componentStoriesFromCSFFile({csfFile:l}),"componentStoriesFromCSFFile"),this.storyById=m(l=>{if(!l){if(!this.primaryStory)throw new Error("No primary story defined for docs entry. Did you forget to use `<Meta>`?");return this.primaryStory}const c=this.storyIdToCSFFile.get(l);if(!c)throw new Error(`Called \`storyById\` for story that was never loaded: ${l}`);return this.store.storyFromCSFFile({storyId:l,csfFile:c})},"storyById"),this.getStoryContext=m(l=>({...this.store.getStoryContext(l),loaded:{},viewMode:"docs"}),"getStoryContext"),this.loadStory=m(l=>this.store.loadStory({storyId:l}),"loadStory"),this.componentStoriesValue=[],this.storyIdToCSFFile=new Map,this.exportToStory=new Map,this.exportsToCSFFile=new Map,this.nameToStoryId=new Map,this.attachedCSFFiles=new Set,i.forEach((l,c)=>{this.referenceCSFFile(l)})}referenceCSFFile(e){this.exportsToCSFFile.set(e.moduleExports,e),this.exportsToCSFFile.set(e.moduleExports.default,e),this.store.componentStoriesFromCSFFile({csfFile:e}).forEach(n=>{const i=e.stories[n.id];this.storyIdToCSFFile.set(i.id,e),this.exportToStory.set(i.moduleExport,n)})}attachCSFFile(e){if(!this.exportsToCSFFile.has(e.moduleExports))throw new Error("Cannot attach a CSF file that has not been referenced");if(this.attachedCSFFiles.has(e))return;this.attachedCSFFiles.add(e),this.store.componentStoriesFromCSFFile({csfFile:e}).forEach(n=>{this.nameToStoryId.set(n.name,n.id),this.componentStoriesValue.push(n),this.primaryStory||(this.primaryStory=n)})}referenceMeta(e,r){const n=this.resolveModuleExport(e);if(n.type!=="meta")throw new Error("<Meta of={} /> must reference a CSF file module export or meta export. Did you mistakenly reference your component instead of your CSF file?");r&&this.attachCSFFile(n.csfFile)}get projectAnnotations(){const{projectAnnotations:e}=this.store;if(!e)throw new Error("Can't get projectAnnotations from DocsContext before they are initialized");return e}resolveAttachedModuleExportType(e){if(e==="story"){if(!this.primaryStory)throw new Error("No primary story attached to this docs file, did you forget to use <Meta of={} />?");return{type:"story",story:this.primaryStory}}if(this.attachedCSFFiles.size===0)throw new Error("No CSF file attached to this docs file, did you forget to use <Meta of={} />?");const r=Array.from(this.attachedCSFFiles)[0];if(e==="meta")return{type:"meta",csfFile:r};const{component:n}=r.meta;if(!n)throw new Error("Attached CSF file does not defined a component, did you forget to export one?");return{type:"component",component:n}}resolveModuleExport(e){const r=this.exportsToCSFFile.get(e);if(r)return{type:"meta",csfFile:r};const n=this.exportToStory.get(lx(e)?e.input:e);return n?{type:"story",story:n}:{type:"component",component:e}}resolveOf(e,r=[]){let n;if(["component","meta","story"].includes(e)){const i=e;n=this.resolveAttachedModuleExportType(i)}else n=this.resolveModuleExport(e);if(r.length&&!r.includes(n.type)){const i=n.type==="component"?"component or unknown":n.type;throw new Error(Kr`Invalid value passed to the 'of' prop. The value was resolved to a '${i}' type but the only types for this block are: ${r.join(", ")}.
        - Did you pass a component to the 'of' prop when the block only supports a story or a meta?
        - ... or vice versa?
        - Did you pass a story, CSF file or meta to the 'of' prop that is not indexed, ie. is not targeted by the 'stories' globs in the main configuration?`)}switch(n.type){case"component":return{...n,projectAnnotations:this.projectAnnotations};case"meta":return{...n,preparedMeta:this.store.preparedMetaFromCSFFile({csfFile:n.csfFile})};case"story":default:return n}}};m(XV,"DocsContext");var II=XV,QV=class{constructor(e,r,n,i){this.channel=e,this.store=r,this.entry=n,this.callbacks=i,this.type="docs",this.subtype="csf",this.torndown=!1,this.disableKeyListeners=!1,this.preparing=!1,this.id=n.id,this.renderId=Date.now()}isPreparing(){return this.preparing}async prepare(){this.preparing=!0;const{entryExports:e,csfFiles:r=[]}=await this.store.loadEntry(this.id);if(this.torndown)throw dx;const{importPath:n,title:i}=this.entry,l=this.store.processCSFFileWithCache(e,n,i),c=Object.keys(l.stories)[0];this.story=this.store.storyFromCSFFile({storyId:c,csfFile:l}),this.csfFiles=[l,...r],this.preparing=!1}isEqual(e){return!!(this.id===e.id&&this.story&&this.story===e.story)}docsContext(e){if(!this.csfFiles)throw new Error("Cannot render docs before preparing");const r=new II(this.channel,this.store,e,this.csfFiles);return this.csfFiles.forEach(n=>r.attachCSFFile(n)),r}async renderToElement(e,r){if(!this.story||!this.csfFiles)throw new Error("Cannot render docs before preparing");const n=this.docsContext(r),{docs:i}=this.story.parameters||{};if(!i)throw new Error("Cannot render a story in viewMode=docs if `@storybook/addon-docs` is not installed");const l=await i.renderer(),{render:c}=l,s=m(async()=>{try{await c(n,i,e),this.channel.emit(PC,this.id)}catch(p){this.callbacks.showException(p)}},"renderDocs");return this.rerender=async()=>s(),this.teardownRender=async({viewModeChanged:p})=>{!p||!e||l.unmount(e)},s()}async teardown({viewModeChanged:e}={}){this.teardownRender?.({viewModeChanged:e}),this.torndown=!0}};m(QV,"CsfDocsRender");var Sk=QV,eU=class{constructor(e,r,n,i){this.channel=e,this.store=r,this.entry=n,this.callbacks=i,this.type="docs",this.subtype="mdx",this.torndown=!1,this.disableKeyListeners=!1,this.preparing=!1,this.id=n.id,this.renderId=Date.now()}isPreparing(){return this.preparing}async prepare(){this.preparing=!0;const{entryExports:e,csfFiles:r=[]}=await this.store.loadEntry(this.id);if(this.torndown)throw dx;this.csfFiles=r,this.exports=e,this.preparing=!1}isEqual(e){return!!(this.id===e.id&&this.exports&&this.exports===e.exports)}docsContext(e){if(!this.csfFiles)throw new Error("Cannot render docs before preparing");return new II(this.channel,this.store,e,this.csfFiles)}async renderToElement(e,r){if(!this.exports||!this.csfFiles||!this.store.projectAnnotations)throw new Error("Cannot render docs before preparing");const n=this.docsContext(r),{docs:i}=this.store.projectAnnotations.parameters??{};if(!i)throw new Error("Cannot render a story in viewMode=docs if `@storybook/addon-docs` is not installed");const l={...i,page:this.exports.default},c=await i.renderer(),{render:s}=c,p=m(async()=>{try{await s(n,l,e),this.channel.emit(PC,this.id)}catch(g){this.callbacks.showException(g)}},"renderDocs");return this.rerender=async()=>p(),this.teardownRender=async({viewModeChanged:g}={})=>{!g||!e||(c.unmount(e),this.torndown=!0)},p()}async teardown({viewModeChanged:e}={}){this.teardownRender?.({viewModeChanged:e}),this.torndown=!0}};m(eU,"MdxDocsRender");var Ck=eU,xce=globalThis;function tU(t){const e=t.composedPath&&t.composedPath()[0]||t.target;return/input|textarea/i.test(e.tagName)||e.getAttribute("contenteditable")!==null}m(tU,"focusInInput");var rU="attached-mdx",wce="unattached-mdx";function nU({tags:t}){return t?.includes(wce)||t?.includes(rU)}m(nU,"isMdxEntry");function ub(t){return t.type==="story"}m(ub,"isStoryRender");function iU(t){return t.type==="docs"}m(iU,"isDocsRender");function oU(t){return iU(t)&&t.subtype==="csf"}m(oU,"isCsfDocsRender");var sU=class extends YV{constructor(e,r,n,i){super(e,r,void 0,!1),this.importFn=e,this.getProjectAnnotations=r,this.selectionStore=n,this.view=i,this.initialize()}setupListeners(){super.setupListeners(),xce.onkeydown=this.onKeydown.bind(this),this.channel.on(IC,this.onSetCurrentStory.bind(this)),this.channel.on(fN,this.onUpdateQueryParams.bind(this)),this.channel.on(tN,this.onPreloadStories.bind(this))}async setInitialGlobals(){if(!this.storyStoreValue)throw new Qo({methodName:"setInitialGlobals"});const{globals:e}=this.selectionStore.selectionSpecifier||{};e&&this.storyStoreValue.userGlobals.updateFromPersisted(e),this.emitGlobals()}async initializeWithStoryIndex(e){return await super.initializeWithStoryIndex(e),this.selectSpecifiedStory()}async selectSpecifiedStory(){if(!this.storyStoreValue)throw new Qo({methodName:"selectSpecifiedStory"});if(this.selectionStore.selection){await this.renderSelection();return}if(!this.selectionStore.selectionSpecifier){this.renderMissingStory();return}const{storySpecifier:e,args:r}=this.selectionStore.selectionSpecifier,n=this.storyStoreValue.storyIndex.entryFromSpecifier(e);if(!n){e==="*"?this.renderStoryLoadingException(e,new Q4):this.renderStoryLoadingException(e,new tF({storySpecifier:e.toString()}));return}const{id:i,type:l}=n;this.selectionStore.setSelection({storyId:i,viewMode:l}),this.channel.emit(uN,this.selectionStore.selection),this.channel.emit(FT,this.selectionStore.selection),await this.renderSelection({persistedArgs:r})}async onGetProjectAnnotationsChanged({getProjectAnnotations:e}){await super.onGetProjectAnnotationsChanged({getProjectAnnotations:e}),this.selectionStore.selection&&this.renderSelection()}async onStoriesChanged({importFn:e,storyIndex:r}){await super.onStoriesChanged({importFn:e,storyIndex:r}),this.selectionStore.selection?await this.renderSelection():await this.selectSpecifiedStory()}onKeydown(e){if(!this.storyRenders.find(r=>r.disableKeyListeners)&&!tU(e)){const{altKey:r,ctrlKey:n,metaKey:i,shiftKey:l,key:c,code:s,keyCode:p}=e;this.channel.emit(nN,{event:{altKey:r,ctrlKey:n,metaKey:i,shiftKey:l,key:c,code:s,keyCode:p}})}}async onSetCurrentStory(e){this.selectionStore.setSelection({viewMode:"story",...e}),await this.storeInitializationPromise,this.channel.emit(FT,this.selectionStore.selection),this.renderSelection()}onUpdateQueryParams(e){this.selectionStore.setQueryParams(e)}async onUpdateGlobals({globals:e}){const r=this.currentRender instanceof M2&&this.currentRender.story||void 0;super.onUpdateGlobals({globals:e,currentStory:r}),(this.currentRender instanceof Ck||this.currentRender instanceof Sk)&&await this.currentRender.rerender?.()}async onUpdateArgs({storyId:e,updatedArgs:r}){super.onUpdateArgs({storyId:e,updatedArgs:r})}async onPreloadStories({ids:e}){await this.storeInitializationPromise,this.storyStoreValue&&await Promise.allSettled(e.map(r=>this.storyStoreValue?.loadEntry(r)))}async renderSelection({persistedArgs:e}={}){const{renderToCanvas:r}=this;if(!this.storyStoreValue||!r)throw new Qo({methodName:"renderSelection"});const{selection:n}=this.selectionStore;if(!n)throw new Error("Cannot call renderSelection as no selection was made");const{storyId:i}=n;let l;try{l=await this.storyStoreValue.storyIdToEntry(i)}catch(P){this.currentRender&&await this.teardownRender(this.currentRender),this.renderStoryLoadingException(i,P);return}const c=this.currentSelection?.storyId!==i,s=this.currentRender?.type!==l.type;l.type==="story"?this.view.showPreparingStory({immediate:s}):this.view.showPreparingDocs({immediate:s}),this.currentRender?.isPreparing()&&await this.teardownRender(this.currentRender);let p;l.type==="story"?p=new M2(this.channel,this.storyStoreValue,r,this.mainStoryCallbacks(i),i,"story"):nU(l)?p=new Ck(this.channel,this.storyStoreValue,l,this.mainStoryCallbacks(i)):p=new Sk(this.channel,this.storyStoreValue,l,this.mainStoryCallbacks(i));const g=this.currentSelection;this.currentSelection=n;const _=this.currentRender;this.currentRender=p;try{await p.prepare()}catch(P){_&&await this.teardownRender(_),P!==dx&&this.renderStoryLoadingException(i,P);return}const x=!c&&_&&!p.isEqual(_);if(e&&ub(p)&&(Aa(!!p.story),this.storyStoreValue.args.updateFromPersisted(p.story,e)),_&&!_.torndown&&!c&&!x&&!s){this.currentRender=_,this.channel.emit(dN,i),this.view.showMain();return}if(_&&await this.teardownRender(_,{viewModeChanged:s}),g&&(c||s)&&this.channel.emit(sN,i),ub(p)){Aa(!!p.story);const{parameters:P,initialArgs:A,argTypes:M,unmappedArgs:N,initialGlobals:z,userGlobals:j,storyGlobals:$,globals:J}=this.storyStoreValue.getStoryContext(p.story);this.channel.emit(cN,{id:i,parameters:P,initialArgs:A,argTypes:M,args:N}),this.channel.emit(Bg,{userGlobals:j,storyGlobals:$,globals:J,initialGlobals:z})}else{let{parameters:P}=this.storyStoreValue.projectAnnotations;const{initialGlobals:A,globals:M}=this.storyStoreValue.userGlobals;if(this.channel.emit(Bg,{globals:M,initialGlobals:A,storyGlobals:{},userGlobals:M}),oU(p)||p.entry.tags?.includes(rU)){if(!p.csfFiles)throw new Y4({storyId:i});({parameters:P}=this.storyStoreValue.preparedMetaFromCSFFile({csfFile:p.csfFiles[0]}))}this.channel.emit(XD,{id:i,parameters:P})}ub(p)?(Aa(!!p.story),this.storyRenders.push(p),this.currentRender.renderToElement(this.view.prepareForStory(p.story))):this.currentRender.renderToElement(this.view.prepareForDocs(),this.renderStoryToElement.bind(this))}async teardownRender(e,{viewModeChanged:r=!1}={}){this.storyRenders=this.storyRenders.filter(n=>n!==e),await e?.teardown?.({viewModeChanged:r})}mainStoryCallbacks(e){return{showStoryDuringRender:m(()=>this.view.showStoryDuringRender(),"showStoryDuringRender"),showMain:m(()=>this.view.showMain(),"showMain"),showError:m(r=>this.renderError(e,r),"showError"),showException:m(r=>this.renderException(e,r),"showException")}}renderPreviewEntryError(e,r){super.renderPreviewEntryError(e,r),this.view.showErrorDisplay(r)}renderMissingStory(){this.view.showNoPreview(),this.channel.emit(zT)}renderStoryLoadingException(e,r){Bn.error(r),this.view.showErrorDisplay(r),this.channel.emit(zT,e)}renderException(e,r){const{name:n="Error",message:i=String(r),stack:l}=r,c=this.currentRender?.renderId;this.channel.emit(hN,{name:n,message:i,stack:l}),this.channel.emit(Th,{newPhase:"errored",renderId:c,storyId:e}),this.view.showErrorDisplay(r),Bn.error(`Error rendering story '${e}':`),Bn.error(r)}renderError(e,{title:r,description:n}){const i=this.currentRender?.renderId;this.channel.emit(aN,{title:r,description:n}),this.channel.emit(Th,{newPhase:"errored",renderId:i,storyId:e}),this.view.showErrorDisplay({message:r,stack:n}),Bn.error(`Error rendering story ${r}: ${n}`)}};m(sU,"PreviewWithSelection");var aU=sU,O2=Ti(TC(),1),Ece=Ti(TC(),1),Pk=/^[a-zA-Z0-9 _-]*$/,lU=/^-?[0-9]+(\.[0-9]+)?$/,Tce=/^#([a-f0-9]{3,4}|[a-f0-9]{6}|[a-f0-9]{8})$/i,cU=/^(rgba?|hsla?)\(([0-9]{1,3}),\s?([0-9]{1,3})%?,\s?([0-9]{1,3})%?,?\s?([0-9](\.[0-9]{1,2})?)?\)$/i,k2=m((t="",e)=>t===null||t===""||!Pk.test(t)?!1:e==null||e instanceof Date||typeof e=="number"||typeof e=="boolean"?!0:typeof e=="string"?Pk.test(e)||lU.test(e)||Tce.test(e)||cU.test(e):Array.isArray(e)?e.every(r=>k2(t,r)):ta(e)?Object.entries(e).every(([r,n])=>k2(r,n)):!1,"validateArgs"),Sce={delimiter:";",nesting:!0,arrayRepeat:!0,arrayRepeatSyntax:"bracket",nestingSyntax:"js",valueDeserializer(t){if(t.startsWith("!")){if(t==="!undefined")return;if(t==="!null")return null;if(t==="!true")return!0;if(t==="!false")return!1;if(t.startsWith("!date(")&&t.endsWith(")"))return new Date(t.replaceAll(" ","+").slice(6,-1));if(t.startsWith("!hex(")&&t.endsWith(")"))return`#${t.slice(5,-1)}`;const e=t.slice(1).match(cU);if(e)return t.startsWith("!rgba")||t.startsWith("!RGBA")?`${e[1]}(${e[2]}, ${e[3]}, ${e[4]}, ${e[5]})`:t.startsWith("!hsla")||t.startsWith("!HSLA")?`${e[1]}(${e[2]}, ${e[3]}%, ${e[4]}%, ${e[5]})`:t.startsWith("!rgb")||t.startsWith("!RGB")?`${e[1]}(${e[2]}, ${e[3]}, ${e[4]})`:`${e[1]}(${e[2]}, ${e[3]}%, ${e[4]}%)`}return lU.test(t)?Number(t):t}},Ak=m(t=>{const e=t.split(";").map(r=>r.replace("=","~").replace(":","="));return Object.entries((0,Ece.parse)(e.join(";"),Sce)).reduce((r,[n,i])=>k2(n,i)?Object.assign(r,{[n]:i}):(oi.warn(Kr`
      Omitted potentially unsafe URL args.

      More info: https://storybook.js.org/docs/writing-stories/args#setting-args-through-the-url?ref=error
    `),r),{})},"parseArgsParam"),{history:uU,document:$c}=$t;function hU(t){const e=(t||"").match(/^\/story\/(.+)/);if(!e)throw new Error(`Invalid path '${t}',  must start with '/story/'`);return e[1]}m(hU,"pathToId");var dU=m(({selection:t,extraParams:e})=>{const r=$c?.location.search.slice(1),{path:n,selectedKind:i,selectedStory:l,...c}=(0,O2.parse)(r);return`?${(0,O2.stringify)({...c,...e,...t&&{id:t.storyId,viewMode:t.viewMode}})}`},"getQueryString"),Cce=m(t=>{if(!t)return;const e=dU({selection:t}),{hash:r=""}=$c.location;$c.title=t.storyId,uU.replaceState({},"",`${$c.location.pathname}${e}${r}`)},"setPath"),Pce=m(t=>t!=null&&typeof t=="object"&&Array.isArray(t)===!1,"isObject"),kg=m(t=>{if(t!==void 0){if(typeof t=="string")return t;if(Array.isArray(t))return kg(t[0]);if(Pce(t))return kg(Object.values(t).filter(Boolean))}},"getFirstString"),Ace=m(()=>{if(typeof $c<"u"){const t=$c.location.search.slice(1),e=(0,O2.parse)(t),r=typeof e.args=="string"?Ak(e.args):void 0,n=typeof e.globals=="string"?Ak(e.globals):void 0;let i=kg(e.viewMode);(typeof i!="string"||!i.match(/docs|story/))&&(i="story");const l=kg(e.path),c=l?hU(l):kg(e.id);if(c)return{storySpecifier:c,args:r,globals:n,viewMode:i}}return null},"getSelectionSpecifierFromPath"),pU=class{constructor(){this.selectionSpecifier=Ace()}setSelection(e){this.selection=e,Cce(this.selection)}setQueryParams(e){const r=dU({extraParams:e}),{hash:n=""}=$c.location;uU.replaceState({},"",`${$c.location.pathname}${r}${n}`)}};m(pU,"UrlStore");var fU=pU,Rce=Ti(nQ(),1),Ice=Ti(TC(),1),{document:so}=$t,Rk=100,mU=(t=>(t.MAIN="MAIN",t.NOPREVIEW="NOPREVIEW",t.PREPARING_STORY="PREPARING_STORY",t.PREPARING_DOCS="PREPARING_DOCS",t.ERROR="ERROR",t))(mU||{}),BE={PREPARING_STORY:"sb-show-preparing-story",PREPARING_DOCS:"sb-show-preparing-docs",MAIN:"sb-show-main",NOPREVIEW:"sb-show-nopreview",ERROR:"sb-show-errordisplay"},qE={centered:"sb-main-centered",fullscreen:"sb-main-fullscreen",padded:"sb-main-padded"},Ik=new Rce.default({escapeXML:!0}),gU=class{constructor(){if(this.testing=!1,typeof so<"u"){const{__SPECIAL_TEST_PARAMETER__:e}=(0,Ice.parse)(so.location.search.slice(1));switch(e){case"preparing-story":{this.showPreparingStory(),this.testing=!0;break}case"preparing-docs":{this.showPreparingDocs(),this.testing=!0;break}}}}prepareForStory(e){return this.showStory(),this.applyLayout(e.parameters.layout),so.documentElement.scrollTop=0,so.documentElement.scrollLeft=0,this.storyRoot()}storyRoot(){return so.getElementById("storybook-root")}prepareForDocs(){return this.showMain(),this.showDocs(),this.applyLayout("fullscreen"),so.documentElement.scrollTop=0,so.documentElement.scrollLeft=0,this.docsRoot()}docsRoot(){return so.getElementById("storybook-docs")}applyLayout(e="padded"){if(e==="none"){so.body.classList.remove(this.currentLayoutClass),this.currentLayoutClass=null;return}this.checkIfLayoutExists(e);const r=qE[e];so.body.classList.remove(this.currentLayoutClass),so.body.classList.add(r),this.currentLayoutClass=r}checkIfLayoutExists(e){qE[e]||Bn.warn(Kr`
          The desired layout: ${e} is not a valid option.
          The possible options are: ${Object.keys(qE).join(", ")}, none.
        `)}showMode(e){clearTimeout(this.preparingTimeout),Object.keys(mU).forEach(r=>{r===e?so.body.classList.add(BE[r]):so.body.classList.remove(BE[r])})}showErrorDisplay({message:e="",stack:r=""}){let n=e,i=r;const l=e.split(`
`);l.length>1&&([n]=l,i=l.slice(1).join(`
`).replace(/^\n/,"")),so.getElementById("error-message").innerHTML=Ik.toHtml(n),so.getElementById("error-stack").innerHTML=Ik.toHtml(i),this.showMode("ERROR")}showNoPreview(){this.testing||(this.showMode("NOPREVIEW"),this.storyRoot()?.setAttribute("hidden","true"),this.docsRoot()?.setAttribute("hidden","true"))}showPreparingStory({immediate:e=!1}={}){clearTimeout(this.preparingTimeout),e?this.showMode("PREPARING_STORY"):this.preparingTimeout=setTimeout(()=>this.showMode("PREPARING_STORY"),Rk)}showPreparingDocs({immediate:e=!1}={}){clearTimeout(this.preparingTimeout),e?this.showMode("PREPARING_DOCS"):this.preparingTimeout=setTimeout(()=>this.showMode("PREPARING_DOCS"),Rk)}showMain(){this.showMode("MAIN")}showDocs(){this.storyRoot().setAttribute("hidden","true"),this.docsRoot().removeAttribute("hidden")}showStory(){this.docsRoot().setAttribute("hidden","true"),this.storyRoot().removeAttribute("hidden")}showStoryDuringRender(){so.body.classList.add(BE.MAIN)}};m(gU,"WebView");var yU=gU,_U=class extends aU{constructor(e,r){super(e,r,new fU,new yU),this.importFn=e,this.getProjectAnnotations=r,$t.__STORYBOOK_PREVIEW__=this}};m(_U,"PreviewWeb");var Mce=_U,{document:fh}=$t,Oce=["application/javascript","application/ecmascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript","module"],kce="script",Mk="scripts-root";function hv(){const t=fh.createEvent("Event");t.initEvent("DOMContentLoaded",!0,!0),fh.dispatchEvent(t)}m(hv,"simulateDOMContentLoaded");function bU(t,e,r){const n=fh.createElement("script");n.type=t.type==="module"?"module":"text/javascript",t.src?(n.onload=e,n.onerror=e,n.src=t.src):n.textContent=t.innerText,r?r.appendChild(n):fh.head.appendChild(n),t.parentNode.removeChild(t),t.src||e()}m(bU,"insertScript");function MI(t,e,r=0){t[r](()=>{r++,r===t.length?e():MI(t,e,r)})}m(MI,"insertScriptsSequentially");function vU(t){let e=fh.getElementById(Mk);e?e.innerHTML="":(e=fh.createElement("div"),e.id=Mk,fh.body.appendChild(e));const r=Array.from(t.querySelectorAll(kce));if(r.length){const n=[];r.forEach(i=>{const l=i.getAttribute("type");(!l||Oce.includes(l))&&n.push(c=>bU(i,c,e))}),n.length&&MI(n,hv,void 0)}else hv()}m(vU,"simulatePageLoad");var $E;(function(t){t.start="/**",t.nostart="/***",t.delim="*",t.end="*/"})($E=$E||($E={}));function xU(t){return t.start+t.delimiter+t.postDelimiter+t.tag+t.postTag+t.type+t.postType+t.name+t.postName+t.description+t.end+t.lineEnd}m(xU,"join");function Lce(){return t=>t.source.map(({tokens:e})=>xU(e)).join(`
`)}m(Lce,"getStringifier");var Dce=Ti(iQ(),1),Zh=(0,Dce.stringifyRules)(),Nce=Zh.JsdocTypeObject;Zh.JsdocTypeAny=()=>"any";Zh.JsdocTypeObject=(t,e)=>`(${Nce(t,e)})`;Zh.JsdocTypeOptional=(t,e)=>e(t.element);Zh.JsdocTypeNullable=(t,e)=>e(t.element);Zh.JsdocTypeNotNullable=(t,e)=>e(t.element);Zh.JsdocTypeUnion=(t,e)=>t.elements.map(e).join("|");var Fce="storybook/docs",zce=`${Fce}/snippet-rendered`;async function wU(t,e){const r=e.parameters?.docs?.source?.transform,{id:n,unmappedArgs:i}=e,l=r&&t?r?.(t,e):t,c=l?await l:void 0;Rs.getChannel().emit(zce,{id:n,source:c,args:i})}m(wU,"emitTransformCode");var ay={depth:10,clearOnStoryChange:!0,limit:50},jce=m((t={})=>{Object.assign(ay,t)},"configureActions"),EU=m((t,e)=>{const r=Object.getPrototypeOf(t);return!r||e(r)?r:EU(r,e)},"findProto"),Bce=m(t=>!!(typeof t=="object"&&t&&EU(t,e=>/^Synthetic(?:Base)?Event$/.test(e.constructor.name))&&typeof t.persist=="function"),"isReactSyntheticEvent"),qce=m(t=>{if(Bce(t)){const e=Object.create(t.constructor.prototype,Object.getOwnPropertyDescriptors(t));e.persist();const r=Object.getOwnPropertyDescriptor(e,"view"),n=r?.value;return typeof n=="object"&&n?.constructor.name==="Window"&&Object.defineProperty(e,"view",{...r,value:Object.create(n.constructor.prototype)}),e}return t},"serializeArg");function Of(t,e={}){const r={...ay,...e},n=m(function(...l){if(e.implicit){const A=("__STORYBOOK_PREVIEW__"in $t?$t.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find(M=>M.phase==="playing"||M.phase==="rendering");if(A){const M=!globalThis?.FEATURES?.disallowImplicitActionsInRenderV8,N=new $4({phase:A.phase,name:t,deprecated:M});if(M)console.warn(N);else throw N}}const c=Rs.getChannel(),s=Date.now().toString(36)+Math.random().toString(36).substring(2),p=5,g=l.map(qce),_=l.length>1?g:g[0],x={id:s,count:0,data:{name:t,args:_},options:{...r,maxDepth:p+(r.depth||3)}};c.emit(vF,x)},"actionHandler");return n.isAction=!0,n.implicit=e.implicit,n}m(Of,"action");var $ce=m((...t)=>{let e=ay,r=t;r.length===1&&Array.isArray(r[0])&&([r]=r),r.length!==1&&typeof r[r.length-1]!="string"&&(e={...ay,...r.pop()});let n=r[0];(r.length!==1||typeof n=="string")&&(n={},r.forEach(l=>{n[l]=l}));const i={};return Object.keys(n).forEach(l=>{i[l]=Of(n[l],e)}),i},"actions"),Vce={"@storybook/global":yN,"storybook/test":qF,"storybook/actions":bF,"storybook/preview-api":UT,"storybook/internal/channels":bN,"storybook/internal/client-logger":xN,"storybook/internal/core-events":SC,"storybook/internal/types":yF,"storybook/internal/preview-errors":D4,"storybook/internal/preview-api":UT};async function TU(){const t=new URL(window.location.href);if(t.searchParams.get("navigator")!=="true"||globalThis.__STORYBOOK_PREVIEW_NAVIGATOR__)return;globalThis.__STORYBOOK_PREVIEW_NAVIGATOR__=!0;const e=await(await fetch("/index.json")).json(),r=t.searchParams.get("id");if(!r){const n=Object.values(e.entries)[0];n&&(t.searchParams.set("id",n.id),t.searchParams.set("viewMode",n.type),window.location.href=t.toString());return}Uce(e,r)}m(TU,"maybeSetupPreviewNavigator");var Uce=m(async(t,e)=>{const r={entries:{}};for(const s of Object.values(t.entries)){const p=s.title.split("/");let g=r;for(const _ of p)g.entries||(g.entries={}),g.entries[_]?e===s.id&&(g.entries[_].isActive=!0):g.entries[_]={title:_,isActive:e===s.id,entries:{}},g=g.entries[_];g.entries||(g.entries={}),g.entries[s.name]={id:s.id,name:s.name,href:`?id=${s.id}&viewMode=${s.type}&navigator=true`,isActive:e===s.id}}const n=m(s=>{if("entries"in s&&"title"in s){const g=s;return`
      <li class="sb-navigator-branch">
        <details${g.isActive?" open":""}>
          <summary class="sb-navigator-title">
            ${g.title}
          </summary>
          <ul class="sb-navigator-entries" aria-label="${g.title}">
            ${Object.values(g.entries).map(n).join("")}
          </ul>
        </details>
      </li>
      `}const p=s;return`
      <li class="sb-navigator-story-item">
        <a href="${p.href}" 
           class="sb-navigator-story-link${p.isActive?" active":""}" 
           aria-current="${p.isActive?"location":"false"}">${p.name}</a>
      </li>
    `},"createHtmlForNode"),i=Object.values(r.entries).map(n).join(""),l=document.createElement("nav");l.id="sb-navigator-container",l.setAttribute("role","navigation"),l.setAttribute("aria-label","Story navigation"),l.innerHTML=`
    <ul class="sb-navigator-list">${i}</ul>
  `,document.body.insertBefore(l,document.body.firstChild);const c=document.createElement("style");c.id="sb-navigator-style",c.textContent=`
    body {
      display: grid !important;
      grid-template-columns: 300px 1fr;
      font-family: 'Nunito', sans-serif;
      height: 100vh;
      margin: 0;

      --text-color: rgb(46, 52, 56);
      --bg-color: rgb(246, 249, 252);

      @media (prefers-color-scheme: dark) {
        --text-color: rgb(201, 205, 207);
        --bg-color: rgb(34, 36, 37);
      }
    }
    #storybook-root, #storybook-docs {
      overflow-y: auto;
      max-height: 100vh;
      max-width: 100%;
    }
    #sb-navigator-container, #sb-navigator-container * {
      box-sizing: border-box;
    }
    #sb-navigator-container {
        height: 100vh;
        overflow-y: auto;
        border-right: 1px solid #eee;
        padding: 1rem;
        font-size: 14px;
        color: var(--text-color);
        background-color: var(--bg-color);
        align-self: start;
        z-index: 1000;
    }
    .sb-main-padded #sb-navigator-container {
      margin: -1rem 1rem -1rem -1rem;
    }
    .sb-navigator-list {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
    .sb-navigator-branch {
      list-style-type: none;
    }
    .sb-navigator-item {
      margin-bottom: 15px;
    }
    .sb-navigator-title {
      color: var(--text-color);
      text-decoration: none;
      padding-block: 5px;
      cursor: pointer;
    }
    .sb-navigator-entries {
      padding-left: 15px;
    }
    .sb-navigator-story-item {
      margin-bottom: 8px;
      margin-left: 8px;
    }
    .sb-navigator-story-link {
      color: var(--text-color);
    }
    .sb-navigator-story-link.active {
      font-weight: bold;
      color: rgb(2, 156, 253);
    }
  `,document.head.appendChild(c),l.querySelector(".sb-navigator-story-link.active")?.closest("details")?.scrollIntoView({block:"center"})},"setupPreviewNavigator"),Gce=Ti(oQ(),1),VE;function SU(){return VE||(VE=new Gce.default($t.navigator?.userAgent).getBrowserInfo()),VE}m(SU,"getBrowserInfo");function CU(t){return t.browserInfo=SU(),t}m(CU,"prepareForTelemetry");function PU(t){const e=t.error||t;e.fromStorybook&&$t.sendTelemetryError(e)}m(PU,"errorListener");function AU({reason:t}){t.fromStorybook&&$t.sendTelemetryError(t)}m(AU,"unhandledRejectionListener");function OI(){OQ.forEach(t=>{$t[_N[t]]=Vce[t]}),$t.sendTelemetryError=t=>{$t.__STORYBOOK_ADDONS_CHANNEL__.emit(mN,CU(t))},$t.addEventListener("error",PU),$t.addEventListener("unhandledrejection",AU),TU()}m(OI,"setup");OI();const{createBrowserChannel:Hce}=__STORYBOOK_MODULE_CHANNELS__,{addons:Jce}=__STORYBOOK_MODULE_PREVIEW_API__,kI=Hce({page:"preview"});Jce.setChannel(kI);window.__STORYBOOK_ADDONS_CHANNEL__=kI;window.CONFIG_TYPE==="DEVELOPMENT"&&(window.__STORYBOOK_SERVER_CHANNEL__=kI);var Wce=Object.create,px=Object.defineProperty,Zce=Object.getOwnPropertyDescriptor,RU=Object.getOwnPropertyNames,Kce=Object.getPrototypeOf,Yce=Object.prototype.hasOwnProperty,ye=(t,e)=>px(t,"name",{value:e,configurable:!0}),g1e=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),Xce=(t,e)=>function(){return e||(0,t[RU(t)[0]])((e={exports:{}}).exports,e),e.exports},y1e=(t,e)=>{for(var r in e)px(t,r,{get:e[r],enumerable:!0})},Qce=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of RU(e))!Yce.call(t,i)&&i!==r&&px(t,i,{get:()=>e[i],enumerable:!(n=Zce(e,i))||n.enumerable});return t},eue=(t,e,r)=>(r=t!=null?Wce(Kce(t)):{},Qce(e||!t||!t.__esModule?px(r,"default",{value:t,enumerable:!0}):r,t));function hb(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}ye(hb,"isPlainObject");function tue(t){return t==null||typeof t!="object"&&typeof t!="function"}ye(tue,"isPrimitive");function rue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}ye(rue,"isTypedArray");function nue(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}ye(nue,"getSymbols");function iue(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}ye(iue,"getTag");var _1e="[object RegExp]",b1e="[object String]",v1e="[object Number]",x1e="[object Boolean]",w1e="[object Arguments]",E1e="[object Symbol]",T1e="[object Date]",S1e="[object Map]",C1e="[object Set]",P1e="[object Array]",A1e="[object Function]",R1e="[object ArrayBuffer]",I1e="[object Object]",M1e="[object Error]",O1e="[object DataView]",k1e="[object Uint8Array]",L1e="[object Uint8ClampedArray]",D1e="[object Uint16Array]",N1e="[object Uint32Array]",F1e="[object BigUint64Array]",z1e="[object Int8Array]",j1e="[object Int16Array]",B1e="[object Int32Array]",q1e="[object BigInt64Array]",$1e="[object Float32Array]",V1e="[object Float64Array]",oue=Xce({"../node_modules/jsdoc-type-pratt-parser/dist/index.js"(t,e){(function(r,n){typeof t=="object"&&typeof e<"u"?n(t):typeof define=="function"&&define.amd?define(["exports"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.jtpp={}))})(t,function(r){function n(E){return E.text!==void 0&&E.text!==""?`'${E.type}' with value '${E.text}'`:`'${E.type}'`}ye(n,"tokenToString");const i=class IU extends Error{constructor(D){super(`No parslet found for token: ${n(D)}`),this.token=D,Object.setPrototypeOf(this,IU.prototype)}getToken(){return this.token}};ye(i,"NoParsletFoundError");let l=i;const c=class MU extends Error{constructor(D){super(`The parsing ended early. The next token was: ${n(D)}`),this.token=D,Object.setPrototypeOf(this,MU.prototype)}getToken(){return this.token}};ye(c,"EarlyEndOfParseError");let s=c;const p=class OU extends Error{constructor(D,W){let me=`Unexpected type: '${D.type}'.`;W!==void 0&&(me+=` Message: ${W}`),super(me),Object.setPrototypeOf(this,OU.prototype)}};ye(p,"UnexpectedTypeError");let g=p;function _(E){return D=>D.startsWith(E)?{type:E,text:E}:null}ye(_,"makePunctuationRule");function x(E){let D=0,W;const me=E[0];let ze=!1;if(me!=="'"&&me!=='"')return null;for(;D<E.length;){if(D++,W=E[D],!ze&&W===me){D++;break}ze=!ze&&W==="\\"}if(W!==me)throw new Error("Unterminated String");return E.slice(0,D)}ye(x,"getQuoted");const P=new RegExp("[$_\\p{ID_Start}]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u"),A=new RegExp("[$\\-\\p{ID_Continue}\\u200C\\u200D]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u");function M(E){let D=E[0];if(!P.test(D))return null;let W=1;do{if(D=E[W],!A.test(D))break;W++}while(W<E.length);return E.slice(0,W)}ye(M,"getIdentifier");const N=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))/;function z(E){var D,W;return(W=(D=N.exec(E))===null||D===void 0?void 0:D[0])!==null&&W!==void 0?W:null}ye(z,"getNumber");const j=ye(E=>{const D=M(E);return D==null?null:{type:"Identifier",text:D}},"identifierRule");function $(E){return D=>{if(!D.startsWith(E))return null;const W=D[E.length];return W!==void 0&&A.test(W)?null:{type:E,text:E}}}ye($,"makeKeyWordRule");const J=ye(E=>{const D=x(E);return D==null?null:{type:"StringValue",text:D}},"stringValueRule"),X=ye(E=>E.length>0?null:{type:"EOF",text:""},"eofRule"),re=ye(E=>{const D=z(E);return D===null?null:{type:"Number",text:D}},"numberRule"),ne=[X,_("=>"),_("("),_(")"),_("{"),_("}"),_("["),_("]"),_("|"),_("&"),_("<"),_(">"),_(","),_(";"),_("*"),_("?"),_("!"),_("="),_(":"),_("..."),_("."),_("#"),_("~"),_("/"),_("@"),$("undefined"),$("null"),$("function"),$("this"),$("new"),$("module"),$("event"),$("extends"),$("external"),$("infer"),$("typeof"),$("keyof"),$("readonly"),$("import"),$("is"),$("in"),$("asserts"),re,j,J],Z=/^\s*\n\s*/,U=class db{static create(D){const W=this.read(D);D=W.text;const me=this.read(D);return D=me.text,new db(D,void 0,W.token,me.token)}constructor(D,W,me,ze){this.text="",this.text=D,this.previous=W,this.current=me,this.next=ze}static read(D,W=!1){W=W||Z.test(D),D=D.trim();for(const me of ne){const ze=me(D);if(ze!==null){const nt=Object.assign(Object.assign({},ze),{startOfLine:W});return D=D.slice(nt.text.length),{text:D,token:nt}}}throw new Error("Unexpected Token "+D)}advance(){const D=db.read(this.text);return new db(D.text,this.current,this.next,D.token)}};ye(U,"Lexer");let K=U;function he(E){if(E===void 0)throw new Error("Unexpected undefined");if(E.type==="JsdocTypeKeyValue"||E.type==="JsdocTypeParameterList"||E.type==="JsdocTypeProperty"||E.type==="JsdocTypeReadonlyProperty"||E.type==="JsdocTypeObjectField"||E.type==="JsdocTypeJsdocObjectField"||E.type==="JsdocTypeIndexSignature"||E.type==="JsdocTypeMappedType"||E.type==="JsdocTypeTypeParameter")throw new g(E);return E}ye(he,"assertRootResult");function ue(E){return E.type==="JsdocTypeKeyValue"?Ie(E):he(E)}ye(ue,"assertPlainKeyValueOrRootResult");function Ee(E){return E.type==="JsdocTypeName"?E:Ie(E)}ye(Ee,"assertPlainKeyValueOrNameResult");function Ie(E){if(E.type!=="JsdocTypeKeyValue")throw new g(E);return E}ye(Ie,"assertPlainKeyValueResult");function ee(E){var D;if(E.type==="JsdocTypeVariadic"){if(((D=E.element)===null||D===void 0?void 0:D.type)==="JsdocTypeName")return E;throw new g(E)}if(E.type!=="JsdocTypeNumber"&&E.type!=="JsdocTypeName")throw new g(E);return E}ye(ee,"assertNumberOrVariadicNameResult");function pe(E){if(E.type==="JsdocTypeTuple"||E.type==="JsdocTypeGeneric"&&E.meta.brackets==="square")return E;throw new g(E)}ye(pe,"assertArrayOrTupleResult");function ve(E){return E.type==="JsdocTypeIndexSignature"||E.type==="JsdocTypeMappedType"}ye(ve,"isSquaredProperty");var xe;(function(E){E[E.ALL=0]="ALL",E[E.PARAMETER_LIST=1]="PARAMETER_LIST",E[E.OBJECT=2]="OBJECT",E[E.KEY_VALUE=3]="KEY_VALUE",E[E.INDEX_BRACKETS=4]="INDEX_BRACKETS",E[E.UNION=5]="UNION",E[E.INTERSECTION=6]="INTERSECTION",E[E.PREFIX=7]="PREFIX",E[E.INFIX=8]="INFIX",E[E.TUPLE=9]="TUPLE",E[E.SYMBOL=10]="SYMBOL",E[E.OPTIONAL=11]="OPTIONAL",E[E.NULLABLE=12]="NULLABLE",E[E.KEY_OF_TYPE_OF=13]="KEY_OF_TYPE_OF",E[E.FUNCTION=14]="FUNCTION",E[E.ARROW=15]="ARROW",E[E.ARRAY_BRACKETS=16]="ARRAY_BRACKETS",E[E.GENERIC=17]="GENERIC",E[E.NAME_PATH=18]="NAME_PATH",E[E.PARENTHESIS=19]="PARENTHESIS",E[E.SPECIAL_TYPES=20]="SPECIAL_TYPES"})(xe||(xe={}));const tt=class{constructor(D,W,me){this.grammar=D,typeof W=="string"?this._lexer=K.create(W):this._lexer=W,this.baseParser=me}get lexer(){return this._lexer}parse(){const D=this.parseType(xe.ALL);if(this.lexer.current.type!=="EOF")throw new s(this.lexer.current);return D}parseType(D){return he(this.parseIntermediateType(D))}parseIntermediateType(D){const W=this.tryParslets(null,D);if(W===null)throw new l(this.lexer.current);return this.parseInfixIntermediateType(W,D)}parseInfixIntermediateType(D,W){let me=this.tryParslets(D,W);for(;me!==null;)D=me,me=this.tryParslets(D,W);return D}tryParslets(D,W){for(const me of this.grammar){const ze=me(this,W,D);if(ze!==null)return ze}return null}consume(D){return Array.isArray(D)||(D=[D]),D.includes(this.lexer.current.type)?(this._lexer=this.lexer.advance(),!0):!1}acceptLexerState(D){this._lexer=D.lexer}};ye(tt,"Parser");let Ke=tt;function Ze(E){return E==="}"||E==="EOF"||E==="|"||E===","||E===")"||E===">"}ye(Ze,"isQuestionMarkUnknownType");const bt=ye((E,D,W)=>{const me=E.lexer.current.type,ze=E.lexer.next.type;return W==null&&me==="?"&&!Ze(ze)||W!=null&&me==="?"?(E.consume("?"),W==null?{type:"JsdocTypeNullable",element:E.parseType(xe.NULLABLE),meta:{position:"prefix"}}:{type:"JsdocTypeNullable",element:he(W),meta:{position:"suffix"}}):null},"nullableParslet");function qe(E){const D=ye((W,me,ze)=>{const nt=W.lexer.current.type,St=W.lexer.next.type;if(ze===null){if("parsePrefix"in E&&E.accept(nt,St))return E.parsePrefix(W)}else if("parseInfix"in E&&E.precedence>me&&E.accept(nt,St))return E.parseInfix(W,ze);return null},"parslet");return Object.defineProperty(D,"name",{value:E.name}),D}ye(qe,"composeParslet");const kt=qe({name:"optionalParslet",accept:ye(E=>E==="=","accept"),precedence:xe.OPTIONAL,parsePrefix:ye(E=>(E.consume("="),{type:"JsdocTypeOptional",element:E.parseType(xe.OPTIONAL),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:ye((E,D)=>(E.consume("="),{type:"JsdocTypeOptional",element:he(D),meta:{position:"suffix"}}),"parseInfix")}),Jt=qe({name:"numberParslet",accept:ye(E=>E==="Number","accept"),parsePrefix:ye(E=>{const D=parseFloat(E.lexer.current.text);return E.consume("Number"),{type:"JsdocTypeNumber",value:D}},"parsePrefix")}),Pt=qe({name:"parenthesisParslet",accept:ye(E=>E==="(","accept"),parsePrefix:ye(E=>{if(E.consume("("),E.consume(")"))return{type:"JsdocTypeParameterList",elements:[]};const D=E.parseIntermediateType(xe.ALL);if(!E.consume(")"))throw new Error("Unterminated parenthesis");return D.type==="JsdocTypeParameterList"?D:D.type==="JsdocTypeKeyValue"?{type:"JsdocTypeParameterList",elements:[D]}:{type:"JsdocTypeParenthesis",element:he(D)}},"parsePrefix")}),dt=qe({name:"specialTypesParslet",accept:ye((E,D)=>E==="?"&&Ze(D)||E==="null"||E==="undefined"||E==="*","accept"),parsePrefix:ye(E=>{if(E.consume("null"))return{type:"JsdocTypeNull"};if(E.consume("undefined"))return{type:"JsdocTypeUndefined"};if(E.consume("*"))return{type:"JsdocTypeAny"};if(E.consume("?"))return{type:"JsdocTypeUnknown"};throw new Error("Unacceptable token: "+E.lexer.current.text)},"parsePrefix")}),er=qe({name:"notNullableParslet",accept:ye(E=>E==="!","accept"),precedence:xe.NULLABLE,parsePrefix:ye(E=>(E.consume("!"),{type:"JsdocTypeNotNullable",element:E.parseType(xe.NULLABLE),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:ye((E,D)=>(E.consume("!"),{type:"JsdocTypeNotNullable",element:he(D),meta:{position:"suffix"}}),"parseInfix")});function Wt({allowTrailingComma:E}){return qe({name:"parameterListParslet",accept:ye(D=>D===",","accept"),precedence:xe.PARAMETER_LIST,parseInfix:ye((D,W)=>{const me=[ue(W)];D.consume(",");do try{const ze=D.parseIntermediateType(xe.PARAMETER_LIST);me.push(ue(ze))}catch(ze){if(ze instanceof l)break;throw ze}while(D.consume(","));if(me.length>0&&me.slice(0,-1).some(ze=>ze.type==="JsdocTypeVariadic"))throw new Error("Only the last parameter may be a rest parameter");return{type:"JsdocTypeParameterList",elements:me}},"parseInfix")})}ye(Wt,"createParameterListParslet");const ar=qe({name:"genericParslet",accept:ye((E,D)=>E==="<"||E==="."&&D==="<","accept"),precedence:xe.GENERIC,parseInfix:ye((E,D)=>{const W=E.consume(".");E.consume("<");const me=[];let ze=!1;if(E.consume("infer")){ze=!0;const nt=E.parseIntermediateType(xe.SYMBOL);if(nt.type!=="JsdocTypeName")throw new g(nt,"A typescript asserts always has to have a name on the left side.");me.push(nt)}else do me.push(E.parseType(xe.PARAMETER_LIST));while(E.consume(","));if(!E.consume(">"))throw new Error("Unterminated generic parameter list");return Object.assign(Object.assign({type:"JsdocTypeGeneric",left:he(D),elements:me},ze?{infer:!0}:{}),{meta:{brackets:"angle",dot:W}})},"parseInfix")}),_t=qe({name:"unionParslet",accept:ye(E=>E==="|","accept"),precedence:xe.UNION,parseInfix:ye((E,D)=>{E.consume("|");const W=[];do W.push(E.parseType(xe.UNION));while(E.consume("|"));return{type:"JsdocTypeUnion",elements:[he(D),...W]}},"parseInfix")}),Ve=[bt,kt,Jt,Pt,dt,er,Wt({allowTrailingComma:!0}),ar,_t,kt];function pt({allowSquareBracketsOnAnyType:E,allowJsdocNamePaths:D,pathGrammar:W}){return ye(function(ze,nt,St){if(St==null||nt>=xe.NAME_PATH)return null;const rr=ze.lexer.current.type,Jr=ze.lexer.next.type;if(!(rr==="."&&Jr!=="<"||rr==="["&&(E||St.type==="JsdocTypeName")||D&&(rr==="~"||rr==="#")))return null;let Xr,po=!1;ze.consume(".")?Xr="property":ze.consume("[")?(Xr="property-brackets",po=!0):ze.consume("~")?Xr="inner":(ze.consume("#"),Xr="instance");const sa=W!==null?new Ke(W,ze.lexer,ze):ze,$n=sa.parseIntermediateType(xe.NAME_PATH);ze.acceptLexerState(sa);let di;switch($n.type){case"JsdocTypeName":di={type:"JsdocTypeProperty",value:$n.value,meta:{quote:void 0}};break;case"JsdocTypeNumber":di={type:"JsdocTypeProperty",value:$n.value.toString(10),meta:{quote:void 0}};break;case"JsdocTypeStringValue":di={type:"JsdocTypeProperty",value:$n.value,meta:{quote:$n.meta.quote}};break;case"JsdocTypeSpecialNamePath":if($n.specialType==="event")di=$n;else throw new g($n,"Type 'JsdocTypeSpecialNamePath' is only allowed with specialType 'event'");break;default:throw new g($n,"Expecting 'JsdocTypeName', 'JsdocTypeNumber', 'JsdocStringValue' or 'JsdocTypeSpecialNamePath'")}if(po&&!ze.consume("]")){const aa=ze.lexer.current;throw new Error(`Unterminated square brackets. Next token is '${aa.type}' with text '${aa.text}'`)}return{type:"JsdocTypeNamePath",left:he(St),right:di,pathType:Xr}},"namePathParslet")}ye(pt,"createNamePathParslet");function lt({allowedAdditionalTokens:E}){return qe({name:"nameParslet",accept:ye(D=>D==="Identifier"||D==="this"||D==="new"||E.includes(D),"accept"),parsePrefix:ye(D=>{const{type:W,text:me}=D.lexer.current;return D.consume(W),{type:"JsdocTypeName",value:me}},"parsePrefix")})}ye(lt,"createNameParslet");const Tt=qe({name:"stringValueParslet",accept:ye(E=>E==="StringValue","accept"),parsePrefix:ye(E=>{const D=E.lexer.current.text;return E.consume("StringValue"),{type:"JsdocTypeStringValue",value:D.slice(1,-1),meta:{quote:D[0]==="'"?"single":"double"}}},"parsePrefix")});function vt({pathGrammar:E,allowedTypes:D}){return qe({name:"specialNamePathParslet",accept:ye(W=>D.includes(W),"accept"),parsePrefix:ye(W=>{const me=W.lexer.current.type;if(W.consume(me),!W.consume(":"))return{type:"JsdocTypeName",value:me};let ze,nt=W.lexer.current;if(W.consume("StringValue"))ze={type:"JsdocTypeSpecialNamePath",value:nt.text.slice(1,-1),specialType:me,meta:{quote:nt.text[0]==="'"?"single":"double"}};else{let Jr="";const Ar=["Identifier","@","/"];for(;Ar.some(Xr=>W.consume(Xr));)Jr+=nt.text,nt=W.lexer.current;ze={type:"JsdocTypeSpecialNamePath",value:Jr,specialType:me,meta:{quote:void 0}}}const St=new Ke(E,W.lexer,W),rr=St.parseInfixIntermediateType(ze,xe.ALL);return W.acceptLexerState(St),he(rr)},"parsePrefix")})}ye(vt,"createSpecialNamePathParslet");const Dt=[lt({allowedAdditionalTokens:["external","module"]}),Tt,Jt,pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:null})],Yt=[...Dt,vt({allowedTypes:["event"],pathGrammar:Dt})];function Bt(E){let D;if(E.type==="JsdocTypeParameterList")D=E.elements;else if(E.type==="JsdocTypeParenthesis")D=[E.element];else throw new g(E);return D.map(W=>ue(W))}ye(Bt,"getParameters");function xr(E){const D=Bt(E);if(D.some(W=>W.type==="JsdocTypeKeyValue"))throw new Error("No parameter should be named");return D}ye(xr,"getUnnamedParameters");function $r({allowNamedParameters:E,allowNoReturnType:D,allowWithoutParenthesis:W,allowNewAsFunctionKeyword:me}){return qe({name:"functionParslet",accept:ye((ze,nt)=>ze==="function"||me&&ze==="new"&&nt==="(","accept"),parsePrefix:ye(ze=>{const nt=ze.consume("new");ze.consume("function");const St=ze.lexer.current.type==="(";if(!St){if(!W)throw new Error("function is missing parameter list");return{type:"JsdocTypeName",value:"function"}}let rr={type:"JsdocTypeFunction",parameters:[],arrow:!1,constructor:nt,parenthesis:St};const Jr=ze.parseIntermediateType(xe.FUNCTION);if(E===void 0)rr.parameters=xr(Jr);else{if(nt&&Jr.type==="JsdocTypeFunction"&&Jr.arrow)return rr=Jr,rr.constructor=!0,rr;rr.parameters=Bt(Jr);for(const Ar of rr.parameters)if(Ar.type==="JsdocTypeKeyValue"&&!E.includes(Ar.key))throw new Error(`only allowed named parameters are ${E.join(", ")} but got ${Ar.type}`)}if(ze.consume(":"))rr.returnType=ze.parseType(xe.PREFIX);else if(!D)throw new Error("function is missing return type");return rr},"parsePrefix")})}ye($r,"createFunctionParslet");function Ir({allowPostfix:E,allowEnclosingBrackets:D}){return qe({name:"variadicParslet",accept:ye(W=>W==="...","accept"),precedence:xe.PREFIX,parsePrefix:ye(W=>{W.consume("...");const me=D&&W.consume("[");try{const ze=W.parseType(xe.PREFIX);if(me&&!W.consume("]"))throw new Error("Unterminated variadic type. Missing ']'");return{type:"JsdocTypeVariadic",element:he(ze),meta:{position:"prefix",squareBrackets:me}}}catch(ze){if(ze instanceof l){if(me)throw new Error("Empty square brackets for variadic are not allowed.");return{type:"JsdocTypeVariadic",meta:{position:void 0,squareBrackets:!1}}}else throw ze}},"parsePrefix"),parseInfix:E?(W,me)=>(W.consume("..."),{type:"JsdocTypeVariadic",element:he(me),meta:{position:"suffix",squareBrackets:!1}}):void 0})}ye(Ir,"createVariadicParslet");const Zr=qe({name:"symbolParslet",accept:ye(E=>E==="(","accept"),precedence:xe.SYMBOL,parseInfix:ye((E,D)=>{if(D.type!=="JsdocTypeName")throw new Error("Symbol expects a name on the left side. (Reacting on '(')");E.consume("(");const W={type:"JsdocTypeSymbol",value:D.value};if(!E.consume(")")){const me=E.parseIntermediateType(xe.SYMBOL);if(W.element=ee(me),!E.consume(")"))throw new Error("Symbol does not end after value")}return W},"parseInfix")}),yr=qe({name:"arrayBracketsParslet",precedence:xe.ARRAY_BRACKETS,accept:ye((E,D)=>E==="["&&D==="]","accept"),parseInfix:ye((E,D)=>(E.consume("["),E.consume("]"),{type:"JsdocTypeGeneric",left:{type:"JsdocTypeName",value:"Array"},elements:[he(D)],meta:{brackets:"square",dot:!1}}),"parseInfix")});function ur({objectFieldGrammar:E,allowKeyTypes:D}){return qe({name:"objectParslet",accept:ye(W=>W==="{","accept"),parsePrefix:ye(W=>{W.consume("{");const me={type:"JsdocTypeObject",meta:{separator:"comma"},elements:[]};if(!W.consume("}")){let ze;const nt=new Ke(E,W.lexer,W);for(;;){nt.acceptLexerState(W);let St=nt.parseIntermediateType(xe.OBJECT);W.acceptLexerState(nt),St===void 0&&D&&(St=W.parseIntermediateType(xe.OBJECT));let rr=!1;if(St.type==="JsdocTypeNullable"&&(rr=!0,St=St.element),St.type==="JsdocTypeNumber"||St.type==="JsdocTypeName"||St.type==="JsdocTypeStringValue"){let Ar;St.type==="JsdocTypeStringValue"&&(Ar=St.meta.quote),me.elements.push({type:"JsdocTypeObjectField",key:St.value.toString(),right:void 0,optional:rr,readonly:!1,meta:{quote:Ar}})}else if(St.type==="JsdocTypeObjectField"||St.type==="JsdocTypeJsdocObjectField")me.elements.push(St);else throw new g(St);if(W.lexer.current.startOfLine)ze="linebreak",W.consume(",")||W.consume(";");else if(W.consume(","))ze="comma";else if(W.consume(";"))ze="semicolon";else break;if(W.lexer.current.type==="}")break}if(me.meta.separator=ze??"comma",ze==="linebreak"&&(me.meta.propertyIndent="  "),!W.consume("}"))throw new Error("Unterminated record type. Missing '}'")}return me},"parsePrefix")})}ye(ur,"createObjectParslet");function lr({allowSquaredProperties:E,allowKeyTypes:D,allowReadonly:W,allowOptional:me}){return qe({name:"objectFieldParslet",precedence:xe.KEY_VALUE,accept:ye(ze=>ze===":","accept"),parseInfix:ye((ze,nt)=>{var St;let rr=!1,Jr=!1;me&&nt.type==="JsdocTypeNullable"&&(rr=!0,nt=nt.element),W&&nt.type==="JsdocTypeReadonlyProperty"&&(Jr=!0,nt=nt.element);const Ar=(St=ze.baseParser)!==null&&St!==void 0?St:ze;if(Ar.acceptLexerState(ze),nt.type==="JsdocTypeNumber"||nt.type==="JsdocTypeName"||nt.type==="JsdocTypeStringValue"||ve(nt)){if(ve(nt)&&!E)throw new g(nt);Ar.consume(":");let Xr;nt.type==="JsdocTypeStringValue"&&(Xr=nt.meta.quote);const po=Ar.parseType(xe.KEY_VALUE);return ze.acceptLexerState(Ar),{type:"JsdocTypeObjectField",key:ve(nt)?nt:nt.value.toString(),right:po,optional:rr,readonly:Jr,meta:{quote:Xr}}}else{if(!D)throw new g(nt);Ar.consume(":");const Xr=Ar.parseType(xe.KEY_VALUE);return ze.acceptLexerState(Ar),{type:"JsdocTypeJsdocObjectField",left:he(nt),right:Xr}}},"parseInfix")})}ye(lr,"createObjectFieldParslet");function nr({allowOptional:E,allowVariadic:D}){return qe({name:"keyValueParslet",precedence:xe.KEY_VALUE,accept:ye(W=>W===":","accept"),parseInfix:ye((W,me)=>{let ze=!1,nt=!1;if(E&&me.type==="JsdocTypeNullable"&&(ze=!0,me=me.element),D&&me.type==="JsdocTypeVariadic"&&me.element!==void 0&&(nt=!0,me=me.element),me.type!=="JsdocTypeName")throw new g(me);W.consume(":");const St=W.parseType(xe.KEY_VALUE);return{type:"JsdocTypeKeyValue",key:me.value,right:St,optional:ze,variadic:nt}},"parseInfix")})}ye(nr,"createKeyValueParslet");const mr=[...Ve,$r({allowWithoutParenthesis:!0,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),Tt,vt({allowedTypes:["module","external","event"],pathGrammar:Yt}),Ir({allowEnclosingBrackets:!0,allowPostfix:!0}),lt({allowedAdditionalTokens:["keyof"]}),Zr,yr,pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:Yt})],Yr=[...mr,ur({objectFieldGrammar:[lt({allowedAdditionalTokens:["typeof","module","in"]}),lr({allowSquaredProperties:!1,allowKeyTypes:!0,allowOptional:!1,allowReadonly:!1}),...mr],allowKeyTypes:!0}),nr({allowOptional:!0,allowVariadic:!0})],ke=qe({name:"typeOfParslet",accept:ye(E=>E==="typeof","accept"),parsePrefix:ye(E=>(E.consume("typeof"),{type:"JsdocTypeTypeof",element:E.parseType(xe.KEY_OF_TYPE_OF)}),"parsePrefix")}),oe=[lt({allowedAdditionalTokens:["typeof","module","keyof","event","external","in"]}),bt,kt,Tt,Jt,lr({allowSquaredProperties:!1,allowKeyTypes:!1,allowOptional:!1,allowReadonly:!1})],ae=[...Ve,ur({allowKeyTypes:!1,objectFieldGrammar:oe}),lt({allowedAdditionalTokens:["event","external","in"]}),ke,$r({allowWithoutParenthesis:!1,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),Ir({allowEnclosingBrackets:!1,allowPostfix:!1}),lt({allowedAdditionalTokens:["keyof"]}),vt({allowedTypes:["module"],pathGrammar:Yt}),pt({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:Yt}),nr({allowOptional:!1,allowVariadic:!1}),Zr],de=qe({name:"assertsParslet",accept:ye(E=>E==="asserts","accept"),parsePrefix:ye(E=>{E.consume("asserts");const D=E.parseIntermediateType(xe.SYMBOL);if(D.type!=="JsdocTypeName")throw new g(D,"A typescript asserts always has to have a name on the left side.");return E.consume("is")?{type:"JsdocTypeAsserts",left:D,right:he(E.parseIntermediateType(xe.INFIX))}:{type:"JsdocTypeAssertsPlain",element:D}},"parsePrefix")});function Te({allowQuestionMark:E}){return qe({name:"tupleParslet",accept:ye(D=>D==="[","accept"),parsePrefix:ye(D=>{D.consume("[");const W={type:"JsdocTypeTuple",elements:[]};if(D.consume("]"))return W;const me=D.parseIntermediateType(xe.ALL);if(me.type==="JsdocTypeParameterList"?me.elements[0].type==="JsdocTypeKeyValue"?W.elements=me.elements.map(Ie):W.elements=me.elements.map(he):me.type==="JsdocTypeKeyValue"?W.elements=[Ie(me)]:W.elements=[he(me)],!D.consume("]"))throw new Error("Unterminated '['");if(W.elements.some(ze=>ze.type==="JsdocTypeUnknown"))throw new Error("Question mark in tuple not allowed");return W},"parsePrefix")})}ye(Te,"createTupleParslet");const Le=qe({name:"keyOfParslet",accept:ye(E=>E==="keyof","accept"),parsePrefix:ye(E=>(E.consume("keyof"),{type:"JsdocTypeKeyof",element:he(E.parseType(xe.KEY_OF_TYPE_OF))}),"parsePrefix")}),je=qe({name:"importParslet",accept:ye(E=>E==="import","accept"),parsePrefix:ye(E=>{if(E.consume("import"),!E.consume("("))throw new Error("Missing parenthesis after import keyword");const D=E.parseType(xe.PREFIX);if(D.type!=="JsdocTypeStringValue")throw new Error("Only string values are allowed as paths for imports");if(!E.consume(")"))throw new Error("Missing closing parenthesis after import keyword");return{type:"JsdocTypeImport",element:D}},"parsePrefix")}),Je=qe({name:"readonlyPropertyParslet",accept:ye(E=>E==="readonly","accept"),parsePrefix:ye(E=>(E.consume("readonly"),{type:"JsdocTypeReadonlyProperty",element:E.parseIntermediateType(xe.KEY_VALUE)}),"parsePrefix")}),Fe=qe({name:"arrowFunctionParslet",precedence:xe.ARROW,accept:ye(E=>E==="=>","accept"),parseInfix:ye((E,D)=>(E.consume("=>"),{type:"JsdocTypeFunction",parameters:Bt(D).map(Ee),arrow:!0,constructor:!1,parenthesis:!0,returnType:E.parseType(xe.OBJECT)}),"parseInfix")}),et=qe({name:"genericArrowFunctionParslet",accept:ye(E=>E==="<","accept"),parsePrefix:ye(E=>{const D=[];E.consume("<");do{let me,ze=E.parseIntermediateType(xe.SYMBOL);if(ze.type==="JsdocTypeOptional"&&(ze=ze.element,me=E.parseType(xe.SYMBOL)),ze.type!=="JsdocTypeName")throw new g(ze);let nt;E.consume("extends")&&(nt=E.parseType(xe.SYMBOL),nt.type==="JsdocTypeOptional"&&(nt=nt.element,me=E.parseType(xe.SYMBOL)));const St={type:"JsdocTypeTypeParameter",name:ze};if(nt!==void 0&&(St.constraint=nt),me!==void 0&&(St.defaultValue=me),D.push(St),E.consume(">"))break}while(E.consume(","));const W=E.parseIntermediateType(xe.SYMBOL);return W.typeParameters=D,W},"parsePrefix")}),ct=qe({name:"intersectionParslet",accept:ye(E=>E==="&","accept"),precedence:xe.INTERSECTION,parseInfix:ye((E,D)=>{E.consume("&");const W=[];do W.push(E.parseType(xe.INTERSECTION));while(E.consume("&"));return{type:"JsdocTypeIntersection",elements:[he(D),...W]}},"parseInfix")}),it=qe({name:"predicateParslet",precedence:xe.INFIX,accept:ye(E=>E==="is","accept"),parseInfix:ye((E,D)=>{if(D.type!=="JsdocTypeName")throw new g(D,"A typescript predicate always has to have a name on the left side.");return E.consume("is"),{type:"JsdocTypePredicate",left:D,right:he(E.parseIntermediateType(xe.INFIX))}},"parseInfix")}),Ot=qe({name:"objectSquareBracketPropertyParslet",accept:ye(E=>E==="[","accept"),parsePrefix:ye(E=>{if(E.baseParser===void 0)throw new Error("Only allowed inside object grammar");E.consume("[");const D=E.lexer.current.text;E.consume("Identifier");let W;if(E.consume(":")){const me=E.baseParser;me.acceptLexerState(E),W={type:"JsdocTypeIndexSignature",key:D,right:me.parseType(xe.INDEX_BRACKETS)},E.acceptLexerState(me)}else if(E.consume("in")){const me=E.baseParser;me.acceptLexerState(E),W={type:"JsdocTypeMappedType",key:D,right:me.parseType(xe.ARRAY_BRACKETS)},E.acceptLexerState(me)}else throw new Error("Missing ':' or 'in' inside square bracketed property.");if(!E.consume("]"))throw new Error("Unterminated square brackets");return W},"parsePrefix")}),$e=qe({name:"readonlyArrayParslet",accept:ye(E=>E==="readonly","accept"),parsePrefix:ye(E=>(E.consume("readonly"),{type:"JsdocTypeReadonlyArray",element:pe(E.parseIntermediateType(xe.ALL))}),"parsePrefix")}),Xt=qe({name:"conditionalParslet",precedence:xe.INFIX,accept:ye(E=>E==="extends","accept"),parseInfix:ye((E,D)=>{E.consume("extends");const W=E.parseType(xe.KEY_OF_TYPE_OF).element,me=E.parseType(xe.INFIX);return E.consume(":"),{type:"JsdocTypeConditional",checksType:he(D),extendsType:W,trueType:me,falseType:E.parseType(xe.INFIX)}},"parseInfix")}),cr=[Je,lt({allowedAdditionalTokens:["typeof","module","keyof","event","external","in"]}),bt,kt,Tt,Jt,lr({allowSquaredProperties:!0,allowKeyTypes:!1,allowOptional:!0,allowReadonly:!0}),Ot],Nt=[...Ve,ur({allowKeyTypes:!1,objectFieldGrammar:cr}),$e,ke,Le,je,Tt,$r({allowWithoutParenthesis:!0,allowNoReturnType:!1,allowNamedParameters:["this","new","args"],allowNewAsFunctionKeyword:!0}),Te({allowQuestionMark:!1}),Ir({allowEnclosingBrackets:!1,allowPostfix:!1}),de,Xt,lt({allowedAdditionalTokens:["event","external","in"]}),vt({allowedTypes:["module"],pathGrammar:Yt}),yr,Fe,et,pt({allowSquareBracketsOnAnyType:!0,allowJsdocNamePaths:!1,pathGrammar:Yt}),ct,it,nr({allowVariadic:!0,allowOptional:!0})];function Ht(E,D){switch(D){case"closure":return new Ke(ae,E).parse();case"jsdoc":return new Ke(Yr,E).parse();case"typescript":return new Ke(Nt,E).parse()}}ye(Ht,"parse");function _r(E,D=["typescript","closure","jsdoc"]){let W;for(const me of D)try{return Ht(E,me)}catch(ze){W=ze}throw W}ye(_r,"tryParse");function ut(E,D){const W=E[D.type];if(W===void 0)throw new Error(`In this set of transform rules exists no rule for type ${D.type}.`);return W(D,me=>ut(E,me))}ye(ut,"transform");function Lt(E){throw new Error("This transform is not available. Are you trying the correct parsing mode?")}ye(Lt,"notAvailableTransform");function Cr(E){const D={params:[]};for(const W of E.parameters)W.type==="JsdocTypeKeyValue"?W.key==="this"?D.this=W.right:W.key==="new"?D.new=W.right:D.params.push(W):D.params.push(W);return D}ye(Cr,"extractSpecialParams");function Kt(E,D,W){return E==="prefix"?W+D:D+W}ye(Kt,"applyPosition");function jt(E,D){switch(D){case"double":return`"${E}"`;case"single":return`'${E}'`;case void 0:return E}}ye(jt,"quote");function Pr(){return{JsdocTypeParenthesis:ye((E,D)=>`(${E.element!==void 0?D(E.element):""})`,"JsdocTypeParenthesis"),JsdocTypeKeyof:ye((E,D)=>`keyof ${D(E.element)}`,"JsdocTypeKeyof"),JsdocTypeFunction:ye((E,D)=>{var W;if(E.arrow){if(E.returnType===void 0)throw new Error("Arrow function needs a return type.");let me=`${E.typeParameters!==void 0?`<${(W=E.typeParameters.map(D).join(", "))!==null&&W!==void 0?W:""}>`:""}(${E.parameters.map(D).join(", ")}) => ${D(E.returnType)}`;return E.constructor&&(me="new "+me),me}else{let me=E.constructor?"new":"function";return E.parenthesis&&(me+=`(${E.parameters.map(D).join(", ")})`,E.returnType!==void 0&&(me+=`: ${D(E.returnType)}`)),me}},"JsdocTypeFunction"),JsdocTypeName:ye(E=>E.value,"JsdocTypeName"),JsdocTypeTuple:ye((E,D)=>`[${E.elements.map(D).join(", ")}]`,"JsdocTypeTuple"),JsdocTypeVariadic:ye((E,D)=>E.meta.position===void 0?"...":Kt(E.meta.position,D(E.element),"..."),"JsdocTypeVariadic"),JsdocTypeNamePath:ye((E,D)=>{const W=D(E.left),me=D(E.right);switch(E.pathType){case"inner":return`${W}~${me}`;case"instance":return`${W}#${me}`;case"property":return`${W}.${me}`;case"property-brackets":return`${W}[${me}]`}},"JsdocTypeNamePath"),JsdocTypeStringValue:ye(E=>jt(E.value,E.meta.quote),"JsdocTypeStringValue"),JsdocTypeAny:ye(()=>"*","JsdocTypeAny"),JsdocTypeGeneric:ye((E,D)=>{if(E.meta.brackets==="square"){const W=E.elements[0],me=D(W);return W.type==="JsdocTypeUnion"||W.type==="JsdocTypeIntersection"?`(${me})[]`:`${me}[]`}else return`${D(E.left)}${E.meta.dot?".":""}<${E.infer===!0?"infer ":""}${E.elements.map(D).join(", ")}>`},"JsdocTypeGeneric"),JsdocTypeImport:ye((E,D)=>`import(${D(E.element)})`,"JsdocTypeImport"),JsdocTypeObjectField:ye((E,D)=>{let W="";return E.readonly&&(W+="readonly "),typeof E.key=="string"?W+=jt(E.key,E.meta.quote):W+=D(E.key),E.optional&&(W+="?"),E.right===void 0?W:W+`: ${D(E.right)}`},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:ye((E,D)=>`${D(E.left)}: ${D(E.right)}`,"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:ye((E,D)=>{let W=E.key;return E.optional&&(W+="?"),E.variadic&&(W="..."+W),E.right===void 0?W:W+`: ${D(E.right)}`},"JsdocTypeKeyValue"),JsdocTypeSpecialNamePath:ye(E=>`${E.specialType}:${jt(E.value,E.meta.quote)}`,"JsdocTypeSpecialNamePath"),JsdocTypeNotNullable:ye((E,D)=>Kt(E.meta.position,D(E.element),"!"),"JsdocTypeNotNullable"),JsdocTypeNull:ye(()=>"null","JsdocTypeNull"),JsdocTypeNullable:ye((E,D)=>Kt(E.meta.position,D(E.element),"?"),"JsdocTypeNullable"),JsdocTypeNumber:ye(E=>E.value.toString(),"JsdocTypeNumber"),JsdocTypeObject:ye((E,D)=>{var W,me;return`{${(E.meta.separator==="linebreak"&&E.elements.length>1?`
`+((W=E.meta.propertyIndent)!==null&&W!==void 0?W:""):"")+E.elements.map(D).join(E.meta.separator==="comma"?", ":E.meta.separator==="linebreak"?`
`+((me=E.meta.propertyIndent)!==null&&me!==void 0?me:""):"; ")+(E.meta.separator==="linebreak"&&E.elements.length>1?`
`:"")}}`},"JsdocTypeObject"),JsdocTypeOptional:ye((E,D)=>Kt(E.meta.position,D(E.element),"="),"JsdocTypeOptional"),JsdocTypeSymbol:ye((E,D)=>`${E.value}(${E.element!==void 0?D(E.element):""})`,"JsdocTypeSymbol"),JsdocTypeTypeof:ye((E,D)=>`typeof ${D(E.element)}`,"JsdocTypeTypeof"),JsdocTypeUndefined:ye(()=>"undefined","JsdocTypeUndefined"),JsdocTypeUnion:ye((E,D)=>E.elements.map(D).join(" | "),"JsdocTypeUnion"),JsdocTypeUnknown:ye(()=>"?","JsdocTypeUnknown"),JsdocTypeIntersection:ye((E,D)=>E.elements.map(D).join(" & "),"JsdocTypeIntersection"),JsdocTypeProperty:ye(E=>jt(E.value,E.meta.quote),"JsdocTypeProperty"),JsdocTypePredicate:ye((E,D)=>`${D(E.left)} is ${D(E.right)}`,"JsdocTypePredicate"),JsdocTypeIndexSignature:ye((E,D)=>`[${E.key}: ${D(E.right)}]`,"JsdocTypeIndexSignature"),JsdocTypeMappedType:ye((E,D)=>`[${E.key} in ${D(E.right)}]`,"JsdocTypeMappedType"),JsdocTypeAsserts:ye((E,D)=>`asserts ${D(E.left)} is ${D(E.right)}`,"JsdocTypeAsserts"),JsdocTypeReadonlyArray:ye((E,D)=>`readonly ${D(E.element)}`,"JsdocTypeReadonlyArray"),JsdocTypeAssertsPlain:ye((E,D)=>`asserts ${D(E.element)}`,"JsdocTypeAssertsPlain"),JsdocTypeConditional:ye((E,D)=>`${D(E.checksType)} extends ${D(E.extendsType)} ? ${D(E.trueType)} : ${D(E.falseType)}`,"JsdocTypeConditional"),JsdocTypeTypeParameter:ye((E,D)=>`${D(E.name)}${E.constraint!==void 0?` extends ${D(E.constraint)}`:""}${E.defaultValue!==void 0?` = ${D(E.defaultValue)}`:""}`,"JsdocTypeTypeParameter")}}ye(Pr,"stringifyRules");const yt=Pr();function In(E){return ut(yt,E)}ye(In,"stringify");const vn=["null","true","false","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];function mn(E){const D={type:"NameExpression",name:E};return vn.includes(E)&&(D.reservedWord=!0),D}ye(mn,"makeName");const hs={JsdocTypeOptional:ye((E,D)=>{const W=D(E.element);return W.optional=!0,W},"JsdocTypeOptional"),JsdocTypeNullable:ye((E,D)=>{const W=D(E.element);return W.nullable=!0,W},"JsdocTypeNullable"),JsdocTypeNotNullable:ye((E,D)=>{const W=D(E.element);return W.nullable=!1,W},"JsdocTypeNotNullable"),JsdocTypeVariadic:ye((E,D)=>{if(E.element===void 0)throw new Error("dots without value are not allowed in catharsis mode");const W=D(E.element);return W.repeatable=!0,W},"JsdocTypeVariadic"),JsdocTypeAny:ye(()=>({type:"AllLiteral"}),"JsdocTypeAny"),JsdocTypeNull:ye(()=>({type:"NullLiteral"}),"JsdocTypeNull"),JsdocTypeStringValue:ye(E=>mn(jt(E.value,E.meta.quote)),"JsdocTypeStringValue"),JsdocTypeUndefined:ye(()=>({type:"UndefinedLiteral"}),"JsdocTypeUndefined"),JsdocTypeUnknown:ye(()=>({type:"UnknownLiteral"}),"JsdocTypeUnknown"),JsdocTypeFunction:ye((E,D)=>{const W=Cr(E),me={type:"FunctionType",params:W.params.map(D)};return W.this!==void 0&&(me.this=D(W.this)),W.new!==void 0&&(me.new=D(W.new)),E.returnType!==void 0&&(me.result=D(E.returnType)),me},"JsdocTypeFunction"),JsdocTypeGeneric:ye((E,D)=>({type:"TypeApplication",applications:E.elements.map(W=>D(W)),expression:D(E.left)}),"JsdocTypeGeneric"),JsdocTypeSpecialNamePath:ye(E=>mn(E.specialType+":"+jt(E.value,E.meta.quote)),"JsdocTypeSpecialNamePath"),JsdocTypeName:ye(E=>E.value!=="function"?mn(E.value):{type:"FunctionType",params:[]},"JsdocTypeName"),JsdocTypeNumber:ye(E=>mn(E.value.toString()),"JsdocTypeNumber"),JsdocTypeObject:ye((E,D)=>{const W={type:"RecordType",fields:[]};for(const me of E.elements)me.type!=="JsdocTypeObjectField"&&me.type!=="JsdocTypeJsdocObjectField"?W.fields.push({type:"FieldType",key:D(me),value:void 0}):W.fields.push(D(me));return W},"JsdocTypeObject"),JsdocTypeObjectField:ye((E,D)=>{if(typeof E.key!="string")throw new Error("Index signatures and mapped types are not supported");return{type:"FieldType",key:mn(jt(E.key,E.meta.quote)),value:E.right===void 0?void 0:D(E.right)}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:ye((E,D)=>({type:"FieldType",key:D(E.left),value:D(E.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeUnion:ye((E,D)=>({type:"TypeUnion",elements:E.elements.map(W=>D(W))}),"JsdocTypeUnion"),JsdocTypeKeyValue:ye((E,D)=>({type:"FieldType",key:mn(E.key),value:E.right===void 0?void 0:D(E.right)}),"JsdocTypeKeyValue"),JsdocTypeNamePath:ye((E,D)=>{const W=D(E.left);let me;E.right.type==="JsdocTypeSpecialNamePath"?me=D(E.right).name:me=jt(E.right.value,E.right.meta.quote);const ze=E.pathType==="inner"?"~":E.pathType==="instance"?"#":".";return mn(`${W.name}${ze}${me}`)},"JsdocTypeNamePath"),JsdocTypeSymbol:ye(E=>{let D="",W=E.element,me=!1;return W?.type==="JsdocTypeVariadic"&&(W.meta.position==="prefix"?D="...":me=!0,W=W.element),W?.type==="JsdocTypeName"?D+=W.value:W?.type==="JsdocTypeNumber"&&(D+=W.value.toString()),me&&(D+="..."),mn(`${E.value}(${D})`)},"JsdocTypeSymbol"),JsdocTypeParenthesis:ye((E,D)=>D(he(E.element)),"JsdocTypeParenthesis"),JsdocTypeMappedType:Lt,JsdocTypeIndexSignature:Lt,JsdocTypeImport:Lt,JsdocTypeKeyof:Lt,JsdocTypeTuple:Lt,JsdocTypeTypeof:Lt,JsdocTypeIntersection:Lt,JsdocTypeProperty:Lt,JsdocTypePredicate:Lt,JsdocTypeAsserts:Lt,JsdocTypeReadonlyArray:Lt,JsdocTypeAssertsPlain:Lt,JsdocTypeConditional:Lt,JsdocTypeTypeParameter:Lt};function Ct(E){return ut(hs,E)}ye(Ct,"catharsisTransform");function tr(E){switch(E){case void 0:return"none";case"single":return"single";case"double":return"double"}}ye(tr,"getQuoteStyle");function gr(E){switch(E){case"inner":return"INNER_MEMBER";case"instance":return"INSTANCE_MEMBER";case"property":return"MEMBER";case"property-brackets":return"MEMBER"}}ye(gr,"getMemberType");function xn(E,D){return D.length===2?{type:E,left:D[0],right:D[1]}:{type:E,left:D[0],right:xn(E,D.slice(1))}}ye(xn,"nestResults");const Lo={JsdocTypeOptional:ye((E,D)=>({type:"OPTIONAL",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_EQUAL_SIGN":"SUFFIX_EQUALS_SIGN"}}),"JsdocTypeOptional"),JsdocTypeNullable:ye((E,D)=>({type:"NULLABLE",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_QUESTION_MARK":"SUFFIX_QUESTION_MARK"}}),"JsdocTypeNullable"),JsdocTypeNotNullable:ye((E,D)=>({type:"NOT_NULLABLE",value:D(E.element),meta:{syntax:E.meta.position==="prefix"?"PREFIX_BANG":"SUFFIX_BANG"}}),"JsdocTypeNotNullable"),JsdocTypeVariadic:ye((E,D)=>{const W={type:"VARIADIC",meta:{syntax:E.meta.position==="prefix"?"PREFIX_DOTS":E.meta.position==="suffix"?"SUFFIX_DOTS":"ONLY_DOTS"}};return E.element!==void 0&&(W.value=D(E.element)),W},"JsdocTypeVariadic"),JsdocTypeName:ye(E=>({type:"NAME",name:E.value}),"JsdocTypeName"),JsdocTypeTypeof:ye((E,D)=>({type:"TYPE_QUERY",name:D(E.element)}),"JsdocTypeTypeof"),JsdocTypeTuple:ye((E,D)=>({type:"TUPLE",entries:E.elements.map(D)}),"JsdocTypeTuple"),JsdocTypeKeyof:ye((E,D)=>({type:"KEY_QUERY",value:D(E.element)}),"JsdocTypeKeyof"),JsdocTypeImport:ye(E=>({type:"IMPORT",path:{type:"STRING_VALUE",quoteStyle:tr(E.element.meta.quote),string:E.element.value}}),"JsdocTypeImport"),JsdocTypeUndefined:ye(()=>({type:"NAME",name:"undefined"}),"JsdocTypeUndefined"),JsdocTypeAny:ye(()=>({type:"ANY"}),"JsdocTypeAny"),JsdocTypeFunction:ye((E,D)=>{const W=Cr(E),me={type:E.arrow?"ARROW":"FUNCTION",params:W.params.map(ze=>{if(ze.type==="JsdocTypeKeyValue"){if(ze.right===void 0)throw new Error("Function parameter without ':' is not expected to be 'KEY_VALUE'");return{type:"NAMED_PARAMETER",name:ze.key,typeName:D(ze.right)}}else return D(ze)}),new:null,returns:null};return W.this!==void 0?me.this=D(W.this):E.arrow||(me.this=null),W.new!==void 0&&(me.new=D(W.new)),E.returnType!==void 0&&(me.returns=D(E.returnType)),me},"JsdocTypeFunction"),JsdocTypeGeneric:ye((E,D)=>{const W={type:"GENERIC",subject:D(E.left),objects:E.elements.map(D),meta:{syntax:E.meta.brackets==="square"?"SQUARE_BRACKET":E.meta.dot?"ANGLE_BRACKET_WITH_DOT":"ANGLE_BRACKET"}};return E.meta.brackets==="square"&&E.elements[0].type==="JsdocTypeFunction"&&!E.elements[0].parenthesis&&(W.objects[0]={type:"NAME",name:"function"}),W},"JsdocTypeGeneric"),JsdocTypeObjectField:ye((E,D)=>{if(typeof E.key!="string")throw new Error("Index signatures and mapped types are not supported");if(E.right===void 0)return{type:"RECORD_ENTRY",key:E.key,quoteStyle:tr(E.meta.quote),value:null,readonly:!1};let W=D(E.right);return E.optional&&(W={type:"OPTIONAL",value:W,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:E.key.toString(),quoteStyle:tr(E.meta.quote),value:W,readonly:!1}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:ye(()=>{throw new Error("Keys may not be typed in jsdoctypeparser.")},"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:ye((E,D)=>{if(E.right===void 0)return{type:"RECORD_ENTRY",key:E.key,quoteStyle:"none",value:null,readonly:!1};let W=D(E.right);return E.optional&&(W={type:"OPTIONAL",value:W,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:E.key,quoteStyle:"none",value:W,readonly:!1}},"JsdocTypeKeyValue"),JsdocTypeObject:ye((E,D)=>{const W=[];for(const me of E.elements)(me.type==="JsdocTypeObjectField"||me.type==="JsdocTypeJsdocObjectField")&&W.push(D(me));return{type:"RECORD",entries:W}},"JsdocTypeObject"),JsdocTypeSpecialNamePath:ye(E=>{if(E.specialType!=="module")throw new Error(`jsdoctypeparser does not support type ${E.specialType} at this point.`);return{type:"MODULE",value:{type:"FILE_PATH",quoteStyle:tr(E.meta.quote),path:E.value}}},"JsdocTypeSpecialNamePath"),JsdocTypeNamePath:ye((E,D)=>{let W=!1,me,ze;E.right.type==="JsdocTypeSpecialNamePath"&&E.right.specialType==="event"?(W=!0,me=E.right.value,ze=tr(E.right.meta.quote)):(me=E.right.value,ze=tr(E.right.meta.quote));const nt={type:gr(E.pathType),owner:D(E.left),name:me,quoteStyle:ze,hasEventPrefix:W};if(nt.owner.type==="MODULE"){const St=nt.owner;return nt.owner=nt.owner.value,St.value=nt,St}else return nt},"JsdocTypeNamePath"),JsdocTypeUnion:ye((E,D)=>xn("UNION",E.elements.map(D)),"JsdocTypeUnion"),JsdocTypeParenthesis:ye((E,D)=>({type:"PARENTHESIS",value:D(he(E.element))}),"JsdocTypeParenthesis"),JsdocTypeNull:ye(()=>({type:"NAME",name:"null"}),"JsdocTypeNull"),JsdocTypeUnknown:ye(()=>({type:"UNKNOWN"}),"JsdocTypeUnknown"),JsdocTypeStringValue:ye(E=>({type:"STRING_VALUE",quoteStyle:tr(E.meta.quote),string:E.value}),"JsdocTypeStringValue"),JsdocTypeIntersection:ye((E,D)=>xn("INTERSECTION",E.elements.map(D)),"JsdocTypeIntersection"),JsdocTypeNumber:ye(E=>({type:"NUMBER_VALUE",number:E.value.toString()}),"JsdocTypeNumber"),JsdocTypeSymbol:Lt,JsdocTypeProperty:Lt,JsdocTypePredicate:Lt,JsdocTypeMappedType:Lt,JsdocTypeIndexSignature:Lt,JsdocTypeAsserts:Lt,JsdocTypeReadonlyArray:Lt,JsdocTypeAssertsPlain:Lt,JsdocTypeConditional:Lt,JsdocTypeTypeParameter:Lt};function to(E){return ut(Lo,E)}ye(to,"jtpTransform");function hr(){return{JsdocTypeIntersection:ye((E,D)=>({type:"JsdocTypeIntersection",elements:E.elements.map(D)}),"JsdocTypeIntersection"),JsdocTypeGeneric:ye((E,D)=>({type:"JsdocTypeGeneric",left:D(E.left),elements:E.elements.map(D),meta:{dot:E.meta.dot,brackets:E.meta.brackets}}),"JsdocTypeGeneric"),JsdocTypeNullable:ye(E=>E,"JsdocTypeNullable"),JsdocTypeUnion:ye((E,D)=>({type:"JsdocTypeUnion",elements:E.elements.map(D)}),"JsdocTypeUnion"),JsdocTypeUnknown:ye(E=>E,"JsdocTypeUnknown"),JsdocTypeUndefined:ye(E=>E,"JsdocTypeUndefined"),JsdocTypeTypeof:ye((E,D)=>({type:"JsdocTypeTypeof",element:D(E.element)}),"JsdocTypeTypeof"),JsdocTypeSymbol:ye((E,D)=>{const W={type:"JsdocTypeSymbol",value:E.value};return E.element!==void 0&&(W.element=D(E.element)),W},"JsdocTypeSymbol"),JsdocTypeOptional:ye((E,D)=>({type:"JsdocTypeOptional",element:D(E.element),meta:{position:E.meta.position}}),"JsdocTypeOptional"),JsdocTypeObject:ye((E,D)=>({type:"JsdocTypeObject",meta:{separator:"comma"},elements:E.elements.map(D)}),"JsdocTypeObject"),JsdocTypeNumber:ye(E=>E,"JsdocTypeNumber"),JsdocTypeNull:ye(E=>E,"JsdocTypeNull"),JsdocTypeNotNullable:ye((E,D)=>({type:"JsdocTypeNotNullable",element:D(E.element),meta:{position:E.meta.position}}),"JsdocTypeNotNullable"),JsdocTypeSpecialNamePath:ye(E=>E,"JsdocTypeSpecialNamePath"),JsdocTypeObjectField:ye((E,D)=>({type:"JsdocTypeObjectField",key:E.key,right:E.right===void 0?void 0:D(E.right),optional:E.optional,readonly:E.readonly,meta:E.meta}),"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:ye((E,D)=>({type:"JsdocTypeJsdocObjectField",left:D(E.left),right:D(E.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:ye((E,D)=>({type:"JsdocTypeKeyValue",key:E.key,right:E.right===void 0?void 0:D(E.right),optional:E.optional,variadic:E.variadic}),"JsdocTypeKeyValue"),JsdocTypeImport:ye((E,D)=>({type:"JsdocTypeImport",element:D(E.element)}),"JsdocTypeImport"),JsdocTypeAny:ye(E=>E,"JsdocTypeAny"),JsdocTypeStringValue:ye(E=>E,"JsdocTypeStringValue"),JsdocTypeNamePath:ye(E=>E,"JsdocTypeNamePath"),JsdocTypeVariadic:ye((E,D)=>{const W={type:"JsdocTypeVariadic",meta:{position:E.meta.position,squareBrackets:E.meta.squareBrackets}};return E.element!==void 0&&(W.element=D(E.element)),W},"JsdocTypeVariadic"),JsdocTypeTuple:ye((E,D)=>({type:"JsdocTypeTuple",elements:E.elements.map(D)}),"JsdocTypeTuple"),JsdocTypeName:ye(E=>E,"JsdocTypeName"),JsdocTypeFunction:ye((E,D)=>{const W={type:"JsdocTypeFunction",arrow:E.arrow,parameters:E.parameters.map(D),constructor:E.constructor,parenthesis:E.parenthesis};return E.returnType!==void 0&&(W.returnType=D(E.returnType)),W},"JsdocTypeFunction"),JsdocTypeKeyof:ye((E,D)=>({type:"JsdocTypeKeyof",element:D(E.element)}),"JsdocTypeKeyof"),JsdocTypeParenthesis:ye((E,D)=>({type:"JsdocTypeParenthesis",element:D(E.element)}),"JsdocTypeParenthesis"),JsdocTypeProperty:ye(E=>E,"JsdocTypeProperty"),JsdocTypePredicate:ye((E,D)=>({type:"JsdocTypePredicate",left:D(E.left),right:D(E.right)}),"JsdocTypePredicate"),JsdocTypeIndexSignature:ye((E,D)=>({type:"JsdocTypeIndexSignature",key:E.key,right:D(E.right)}),"JsdocTypeIndexSignature"),JsdocTypeMappedType:ye((E,D)=>({type:"JsdocTypeMappedType",key:E.key,right:D(E.right)}),"JsdocTypeMappedType"),JsdocTypeAsserts:ye((E,D)=>({type:"JsdocTypeAsserts",left:D(E.left),right:D(E.right)}),"JsdocTypeAsserts"),JsdocTypeReadonlyArray:ye((E,D)=>({type:"JsdocTypeReadonlyArray",element:D(E.element)}),"JsdocTypeReadonlyArray"),JsdocTypeAssertsPlain:ye((E,D)=>({type:"JsdocTypeAssertsPlain",element:D(E.element)}),"JsdocTypeAssertsPlain"),JsdocTypeConditional:ye((E,D)=>({type:"JsdocTypeConditional",checksType:D(E.checksType),extendsType:D(E.extendsType),trueType:D(E.trueType),falseType:D(E.falseType)}),"JsdocTypeConditional"),JsdocTypeTypeParameter:ye((E,D)=>({type:"JsdocTypeTypeParameter",name:D(E.name),constraint:E.constraint!==void 0?D(E.constraint):void 0,defaultValue:E.defaultValue!==void 0?D(E.defaultValue):void 0}),"JsdocTypeTypeParameter")}}ye(hr,"identityTransformRules");const ds={JsdocTypeAny:[],JsdocTypeFunction:["parameters","returnType"],JsdocTypeGeneric:["left","elements"],JsdocTypeImport:[],JsdocTypeIndexSignature:["right"],JsdocTypeIntersection:["elements"],JsdocTypeKeyof:["element"],JsdocTypeKeyValue:["right"],JsdocTypeMappedType:["right"],JsdocTypeName:[],JsdocTypeNamePath:["left","right"],JsdocTypeNotNullable:["element"],JsdocTypeNull:[],JsdocTypeNullable:["element"],JsdocTypeNumber:[],JsdocTypeObject:["elements"],JsdocTypeObjectField:["right"],JsdocTypeJsdocObjectField:["left","right"],JsdocTypeOptional:["element"],JsdocTypeParenthesis:["element"],JsdocTypeSpecialNamePath:[],JsdocTypeStringValue:[],JsdocTypeSymbol:["element"],JsdocTypeTuple:["elements"],JsdocTypeTypeof:["element"],JsdocTypeUndefined:[],JsdocTypeUnion:["elements"],JsdocTypeUnknown:[],JsdocTypeVariadic:["element"],JsdocTypeProperty:[],JsdocTypePredicate:["left","right"],JsdocTypeAsserts:["left","right"],JsdocTypeReadonlyArray:["element"],JsdocTypeAssertsPlain:["element"],JsdocTypeConditional:["checksType","extendsType","trueType","falseType"],JsdocTypeTypeParameter:["name","constraint","defaultValue"]};function hi(E,D,W,me,ze){me?.(E,D,W);const nt=ds[E.type];for(const St of nt){const rr=E[St];if(rr!==void 0)if(Array.isArray(rr))for(const Jr of rr)hi(Jr,E,St,me,ze);else hi(rr,E,St,me,ze)}ze?.(E,D,W)}ye(hi,"_traverse");function ps(E,D,W){hi(E,void 0,void 0,D,W)}ye(ps,"traverse"),r.catharsisTransform=Ct,r.identityTransformRules=hr,r.jtpTransform=to,r.parse=Ht,r.stringify=In,r.stringifyRules=Pr,r.transform=ut,r.traverse=ps,r.tryParse=_r,r.visitorKeys=ds})}});const{UnknownArgTypesError:G1e}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__,{UnknownArgTypesError:H1e}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;var sue=["null","undefined"];function fx(t){return sue.some(e=>e===t)}ye(fx,"isDefaultValueBlacklisted");var aue=ye(t=>{if(!t)return"";if(typeof t=="string")return t;throw new Error(`Description: expected string, got: ${JSON.stringify(t)}`)},"str");function LI(t){return!!t.__docgenInfo}ye(LI,"hasDocgen");function lue(t){return t!=null&&Object.keys(t).length>0}ye(lue,"isValidDocgenSection");function cue(t,e){return LI(t)?t.__docgenInfo[e]:null}ye(cue,"getDocgenSection");function kU(t){return LI(t)?aue(t.__docgenInfo.description):""}ye(kU,"getDocgenDescription");var Vc;(function(t){t.start="/**",t.nostart="/***",t.delim="*",t.end="*/"})(Vc=Vc||(Vc={}));function LU(t){return/^\s+$/.test(t)}ye(LU,"isSpace");function DU(t){const e=t.match(/\r+$/);return e==null?["",t]:[t.slice(-e[0].length),t.slice(0,-e[0].length)]}ye(DU,"splitCR");function mh(t){const e=t.match(/^\s+/);return e==null?["",t]:[t.slice(0,e[0].length),t.slice(e[0].length)]}ye(mh,"splitSpace");function NU(t){return t.split(/\n/)}ye(NU,"splitLines");function FU(t={}){return Object.assign({tag:"",name:"",type:"",optional:!1,description:"",problems:[],source:[]},t)}ye(FU,"seedSpec");function zU(t={}){return Object.assign({start:"",delimiter:"",postDelimiter:"",tag:"",postTag:"",name:"",postName:"",type:"",postType:"",description:"",end:"",lineEnd:""},t)}ye(zU,"seedTokens");var uue=/^@\S+/;function jU({fence:t="```"}={}){const e=BU(t),r=ye((n,i)=>e(n)?!i:i,"toggleFence");return ye(function(i){const l=[[]];let c=!1;for(const s of i)uue.test(s.tokens.description)&&!c?l.push([s]):l[l.length-1].push(s),c=r(s.tokens.description,c);return l},"parseBlock")}ye(jU,"getParser");function BU(t){return typeof t=="string"?e=>e.split(t).length%2===0:t}ye(BU,"getFencer");function qU({startLine:t=0,markers:e=Vc}={}){let r=null,n=t;return ye(function(l){let c=l;const s=zU();if([s.lineEnd,c]=DU(c),[s.start,c]=mh(c),r===null&&c.startsWith(e.start)&&!c.startsWith(e.nostart)&&(r=[],s.delimiter=c.slice(0,e.start.length),c=c.slice(e.start.length),[s.postDelimiter,c]=mh(c)),r===null)return n++,null;const p=c.trimRight().endsWith(e.end);if(s.delimiter===""&&c.startsWith(e.delim)&&!c.startsWith(e.end)&&(s.delimiter=e.delim,c=c.slice(e.delim.length),[s.postDelimiter,c]=mh(c)),p){const g=c.trimRight();s.end=c.slice(g.length-e.end.length),c=g.slice(0,-e.end.length)}if(s.description=c,r.push({number:n,source:l,tokens:s}),n++,p){const g=r.slice();return r=null,g}return null},"parseSource")}ye(qU,"getParser");function $U({tokenizers:t}){return ye(function(r){var n;let i=FU({source:r});for(const l of t)if(i=l(i),!((n=i.problems[i.problems.length-1])===null||n===void 0)&&n.critical)break;return i},"parseSpec")}ye($U,"getParser");function VU(){return t=>{const{tokens:e}=t.source[0],r=e.description.match(/\s*(@(\S+))(\s*)/);return r===null?(t.problems.push({code:"spec:tag:prefix",message:'tag should start with "@" symbol',line:t.source[0].number,critical:!0}),t):(e.tag=r[1],e.postTag=r[3],e.description=e.description.slice(r[0].length),t.tag=r[2],t)}}ye(VU,"tagTokenizer");function UU(t="compact"){const e=GU(t);return r=>{let n=0,i=[];for(const[s,{tokens:p}]of r.source.entries()){let g="";if(s===0&&p.description[0]!=="{")return r;for(const _ of p.description)if(_==="{"&&n++,_==="}"&&n--,g+=_,n===0)break;if(i.push([p,g]),n===0)break}if(n!==0)return r.problems.push({code:"spec:type:unpaired-curlies",message:"unpaired curlies",line:r.source[0].number,critical:!0}),r;const l=[],c=i[0][0].postDelimiter.length;for(const[s,[p,g]]of i.entries())p.type=g,s>0&&(p.type=p.postDelimiter.slice(c)+g,p.postDelimiter=p.postDelimiter.slice(0,c)),[p.postType,p.description]=mh(p.description.slice(g.length)),l.push(p.type);return l[0]=l[0].slice(1),l[l.length-1]=l[l.length-1].slice(0,-1),r.type=e(l),r}}ye(UU,"typeTokenizer");var hue=ye(t=>t.trim(),"trim");function GU(t){return t==="compact"?e=>e.map(hue).join(""):t==="preserve"?e=>e.join(`
`):t}ye(GU,"getJoiner");var due=ye(t=>t&&t.startsWith('"')&&t.endsWith('"'),"isQuoted");function HU(){const t=ye((e,{tokens:r},n)=>r.type===""?e:n,"typeEnd");return e=>{const{tokens:r}=e.source[e.source.reduce(t,0)],n=r.description.trimLeft(),i=n.split('"');if(i.length>1&&i[0]===""&&i.length%2===1)return e.name=i[1],r.name=`"${i[1]}"`,[r.postName,r.description]=mh(n.slice(r.name.length)),e;let l=0,c="",s=!1,p;for(const _ of n){if(l===0&&LU(_))break;_==="["&&l++,_==="]"&&l--,c+=_}if(l!==0)return e.problems.push({code:"spec:name:unpaired-brackets",message:"unpaired brackets",line:e.source[0].number,critical:!0}),e;const g=c;if(c[0]==="["&&c[c.length-1]==="]"){s=!0,c=c.slice(1,-1);const _=c.split("=");if(c=_[0].trim(),_[1]!==void 0&&(p=_.slice(1).join("=").trim()),c==="")return e.problems.push({code:"spec:name:empty-name",message:"empty name",line:e.source[0].number,critical:!0}),e;if(p==="")return e.problems.push({code:"spec:name:empty-default",message:"empty default value",line:e.source[0].number,critical:!0}),e;if(!due(p)&&/=(?!>)/.test(p))return e.problems.push({code:"spec:name:invalid-default",message:"invalid default value syntax",line:e.source[0].number,critical:!0}),e}return e.optional=s,e.name=c,r.name=g,p!==void 0&&(e.default=p),[r.postName,r.description]=mh(n.slice(r.name.length)),e}}ye(HU,"nameTokenizer");function JU(t="compact",e=Vc){const r=DI(t);return n=>(n.description=r(n.source,e),n)}ye(JU,"descriptionTokenizer");function DI(t){return t==="compact"?WU:t==="preserve"?ZU:t}ye(DI,"getJoiner");function WU(t,e=Vc){return t.map(({tokens:{description:r}})=>r.trim()).filter(r=>r!=="").join(" ")}ye(WU,"compactJoiner");var pue=ye((t,{tokens:e},r)=>e.type===""?t:r,"lineNo"),fue=ye(({tokens:t})=>(t.delimiter===""?t.start:t.postDelimiter.slice(1))+t.description,"getDescription");function ZU(t,e=Vc){if(t.length===0)return"";t[0].tokens.description===""&&t[0].tokens.delimiter===e.start&&(t=t.slice(1));const r=t[t.length-1];return r!==void 0&&r.tokens.description===""&&r.tokens.end.endsWith(e.end)&&(t=t.slice(0,-1)),t=t.slice(t.reduce(pue,0)),t.map(fue).join(`
`)}ye(ZU,"preserveJoiner");function KU({startLine:t=0,fence:e="```",spacing:r="compact",markers:n=Vc,tokenizers:i=[VU(),UU(r),HU(),JU(r)]}={}){if(t<0||t%1>0)throw new Error("Invalid startLine");const l=qU({startLine:t,markers:n}),c=jU({fence:e}),s=$U({tokenizers:i}),p=DI(r);return function(g){const _=[];for(const x of NU(g)){const P=l(x);if(P===null)continue;const A=c(P),M=A.slice(1).map(s);_.push({description:p(A[0],n),tags:M,source:P,problems:M.reduce((N,z)=>N.concat(z.problems),[])})}return _}}ye(KU,"getParser");function YU(t){return t.start+t.delimiter+t.postDelimiter+t.tag+t.postTag+t.type+t.postType+t.name+t.postName+t.description+t.end+t.lineEnd}ye(YU,"join");function mue(){return t=>t.source.map(({tokens:e})=>YU(e)).join(`
`)}ye(mue,"getStringifier");function XU(t,e={}){return KU(e)(t)}ye(XU,"parse");var NI=eue(oue(),1);function QU(t){return t!=null&&t.includes("@")}ye(QU,"containsJsDoc");function eG(t){const n=`/**
`+(t??"").split(`
`).map(l=>` * ${l}`).join(`
`)+`
*/`,i=XU(n,{spacing:"preserve"});if(!i||i.length===0)throw new Error("Cannot parse JSDoc tags.");return i[0]}ye(eG,"parse");var gue={tags:["param","arg","argument","returns","ignore","deprecated"]},yue=ye((t,e=gue)=>{if(!QU(t))return{includesJsDoc:!1,ignore:!1};const r=eG(t),n=tG(r,e.tags);return n.ignore?{includesJsDoc:!0,ignore:!0}:{includesJsDoc:!0,ignore:!1,description:r.description.trim(),extractedTags:n}},"parseJsDoc");function tG(t,e){const r={params:null,deprecated:null,returns:null,ignore:!1};for(const n of t.tags)if(!(e!==void 0&&!e.includes(n.tag)))if(n.tag==="ignore"){r.ignore=!0;break}else switch(n.tag){case"param":case"arg":case"argument":{const i=nG(n);i!=null&&(r.params==null&&(r.params=[]),r.params.push(i));break}case"deprecated":{const i=iG(n);i!=null&&(r.deprecated=i);break}case"returns":{const i=oG(n);i!=null&&(r.returns=i);break}}return r}ye(tG,"extractJsDocTags");function rG(t){return t.replace(/[\.-]$/,"")}ye(rG,"normaliseParamName");function nG(t){if(!t.name||t.name==="-")return null;const e=jI(t.type);return{name:t.name,type:e,description:zI(t.description),getPrettyName:ye(()=>rG(t.name),"getPrettyName"),getTypeName:ye(()=>e?BI(e):null,"getTypeName")}}ye(nG,"extractParam");function iG(t){return t.name?FI(t.name,t.description):null}ye(iG,"extractDeprecated");function FI(t,e){const r=t===""?e:`${t} ${e}`;return zI(r)}ye(FI,"joinNameAndDescription");function zI(t){const e=t.replace(/^- /g,"").trim();return e===""?null:e}ye(zI,"normaliseDescription");function oG(t){const e=jI(t.type);return e?{type:e,description:FI(t.name,t.description),getTypeName:ye(()=>BI(e),"getTypeName")}:null}ye(oG,"extractReturns");var ou=(0,NI.stringifyRules)(),_ue=ou.JsdocTypeObject;ou.JsdocTypeAny=()=>"any";ou.JsdocTypeObject=(t,e)=>`(${_ue(t,e)})`;ou.JsdocTypeOptional=(t,e)=>e(t.element);ou.JsdocTypeNullable=(t,e)=>e(t.element);ou.JsdocTypeNotNullable=(t,e)=>e(t.element);ou.JsdocTypeUnion=(t,e)=>t.elements.map(e).join("|");function jI(t){try{return(0,NI.parse)(t,"typescript")}catch{return null}}ye(jI,"extractType");function BI(t){return(0,NI.transform)(ou,t)}ye(BI,"extractTypeName");var bue=90,vue=50;function qI(t){return t.length>bue}ye(qI,"isTooLongForTypeSummary");function sG(t){return t.length>vue}ye(sG,"isTooLongForDefaultValueSummary");function Ni(t,e){return t===e?{summary:t}:{summary:t,detail:e}}ye(Ni,"createSummaryValue");function xue(t,e){if(t!=null){const{value:r}=t;if(!fx(r))return sG(r)?Ni(e?.name,r):Ni(r)}return null}ye(xue,"createDefaultValue");function $I({name:t,value:e,elements:r,raw:n}){return e??(r!=null?r.map($I).join(" | "):n??t)}ye($I,"generateUnionElement");function aG({name:t,raw:e,elements:r}){return r!=null?Ni(r.map($I).join(" | ")):e!=null?Ni(e.replace(/^\|\s*/,"")):Ni(t)}ye(aG,"generateUnion");function lG({type:t,raw:e}){return e!=null?Ni(e):Ni(t)}ye(lG,"generateFuncSignature");function cG({type:t,raw:e}){return e!=null?qI(e)?Ni(t,e):Ni(e):Ni(t)}ye(cG,"generateObjectSignature");function uG(t){const{type:e}=t;return e==="object"?cG(t):lG(t)}ye(uG,"generateSignature");function hG({name:t,raw:e}){return e!=null?qI(e)?Ni(t,e):Ni(e):Ni(t)}ye(hG,"generateDefault");function wue(t){if(t==null)return null;switch(t.name){case"union":return aG(t);case"signature":return uG(t);default:return hG(t)}}ye(wue,"createType");function Eue({defaultValue:t}){if(t!=null){const{value:e}=t;if(!fx(e))return Ni(e)}return null}ye(Eue,"createDefaultValue");function Tue({tsType:t,required:e}){if(t==null)return null;let r=t.name;return e||(r=r.replace(" | undefined","")),Ni(["Array","Record","signature"].includes(t.name)?t.raw:r)}ye(Tue,"createType");function dG(t){return t!=null?Ni(t.name):null}ye(dG,"createType");function pG(t){const{computed:e,func:r}=t;return typeof e>"u"&&typeof r>"u"}ye(pG,"isReactDocgenTypescript");function fG(t){return t?t.name==="string"?!0:t.name==="enum"?Array.isArray(t.value)&&t.value.every(({value:e})=>typeof e=="string"&&e[0]==='"'&&e[e.length-1]==='"'):!1:!1}ye(fG,"isStringValued");function mG(t,e){if(t!=null){const{value:r}=t;if(!fx(r))return pG(t)&&fG(e)?Ni(JSON.stringify(r)):Ni(r)}return null}ye(mG,"createDefaultValue");function Sue(t,e,r){const{description:n,required:i,defaultValue:l}=r;return{name:t,type:dG(e),required:i,description:n,defaultValue:mG(l,e)}}ye(Sue,"createBasicPropDef");function Cue(t,e){if(e?.includesJsDoc){const{description:r,extractedTags:n}=e;r!=null&&(t.description=e.description);const i={...n,params:n?.params?.map(l=>({name:l.getPrettyName(),description:l.description}))};Object.values(i).filter(Boolean).length>0&&(t.jsDocTags=i)}return t}ye(Cue,"applyJsDocResult");function Pue(t,e,r,n){const i=yue(e.description);return i.includesJsDoc&&i.ignore?null:{propDef:n(t,e,i),jsDocTags:i.extractedTags,docgenInfo:e,typeSystem:r}}ye(Pue,"extractProp");function Aue(t){return t!=null?kU(t):""}ye(Aue,"extractComponentDescription");var Rue=ye((...t)=>{const e={},r=t.filter(Boolean),n=r.reduce((i,l)=>(Object.entries(l).forEach(([c,s])=>{const p=i[c];Array.isArray(s)||typeof p>"u"?i[c]=s:hb(s)&&hb(p)?e[c]=!0:typeof s<"u"&&(i[c]=s)}),i),{});return Object.keys(e).forEach(i=>{const l=r.filter(Boolean).map(c=>c[i]).filter(c=>typeof c<"u");l.every(c=>hb(c))?n[i]=Rue(...l):n[i]=l[l.length-1]}),n},"combineParameters"),Iue="storybook/docs",J1e=`${Iue}/snippet-rendered`,dv=(t=>(t.AUTO="auto",t.CODE="code",t.DYNAMIC="dynamic",t))(dv||{});const Mue={"./src/stories/Introduction.mdx":()=>Gs(()=>import("./Introduction-BV1WDDGT.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),"./src/stories/map/layers-docs.mdx":()=>Gs(()=>import("./layers-docs-DkCstYSz.js"),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url),"./src/stories/map/layers-example.stories.ts":()=>Gs(()=>import("./layers-example.stories-DvCQ-3i8.js"),__vite__mapDeps([5,6,2]),import.meta.url),"./src/stories/map/overlays-docs.mdx":()=>Gs(()=>import("./overlays-docs-CTnLCeg7.js"),__vite__mapDeps([7,1,2,3,8,6]),import.meta.url),"./src/stories/map/overlays-example.stories.ts":()=>Gs(()=>import("./overlays-example.stories-CxDF3mLb.js"),__vite__mapDeps([8,6,2]),import.meta.url),"./src/stories/map/setup-docs.mdx":()=>Gs(()=>import("./setup-docs-BQ6N4u_V.js"),__vite__mapDeps([9,1,2,3,10,6]),import.meta.url),"./src/stories/map/setup-example.stories.ts":()=>Gs(()=>import("./setup-example.stories-CwVFXBNy.js"),__vite__mapDeps([10,6,2]),import.meta.url)};async function Oue(t){return await Mue[t]()}var gG=Object.defineProperty,mx=(t,e)=>gG(t,"name",{value:e,configurable:!0}),kue=(t,e)=>{for(var r in e)gG(t,r,{get:e[r],enumerable:!0})};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pb=globalThis,VI=pb.ShadowRoot&&(pb.ShadyCSS===void 0||pb.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,yG=Symbol(),Ok=new WeakMap;let Lue=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==yG)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(VI&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Ok.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Ok.set(r,e))}return e}toString(){return this.cssText}};const Due=t=>new Lue(typeof t=="string"?t:t+"",void 0,yG),Nue=(t,e)=>{if(VI)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=pb.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},kk=VI?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return Due(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Fue,defineProperty:zue,getOwnPropertyDescriptor:jue,getOwnPropertyNames:Bue,getOwnPropertySymbols:que,getPrototypeOf:$ue}=Object,Uc=globalThis,Lk=Uc.trustedTypes,Vue=Lk?Lk.emptyScript:"",Uue=Uc.reactiveElementPolyfillSupport,Lg=(t,e)=>t,L2={toAttribute(t,e){switch(e){case Boolean:t=t?Vue:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},_G=(t,e)=>!Fue(t,e),Dk={attribute:!0,type:String,converter:L2,reflect:!1,useDefault:!1,hasChanged:_G};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Uc.litPropertyMetadata??(Uc.litPropertyMetadata=new WeakMap);class gp extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=Dk){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&zue(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){const{get:i,set:l}=jue(this.prototype,e)??{get(){return this[r]},set(c){this[r]=c}};return{get:i,set(c){const s=i?.call(this);l?.call(this,c),this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Dk}static _$Ei(){if(this.hasOwnProperty(Lg("elementProperties")))return;const e=$ue(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Lg("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Lg("properties"))){const r=this.properties,n=[...Bue(r),...que(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(kk(i))}else e!==void 0&&r.push(kk(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Nue(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){const l=(n.converter?.toAttribute!==void 0?n.converter:L2).toAttribute(r,n.type);this._$Em=e,l==null?this.removeAttribute(i):this.setAttribute(i,l),this._$Em=null}}_$AK(e,r){const n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const l=n.getPropertyOptions(i),c=typeof l.converter=="function"?{fromAttribute:l.converter}:l.converter?.fromAttribute!==void 0?l.converter:L2;this._$Em=i;const s=c.fromAttribute(r,l.type);this[i]=s??this._$Ej?.get(i)??s,this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){const i=this.constructor,l=this[e];if(n??(n=i.getPropertyOptions(e)),!((n.hasChanged??_G)(l,r)||n.useDefault&&n.reflect&&l===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:i,wrapped:l},c){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,c??r??this[e]),l!==!0||c!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,l]of this._$Ep)this[i]=l;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[i,l]of n){const{wrapped:c}=l,s=this[i];c!==!0||this._$AL.has(i)||s===void 0||this.C(i,void 0,l,s)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach(n=>n.hostUpdate?.()),this.update(r)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach(r=>r.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}}gp.elementStyles=[],gp.shadowRootOptions={mode:"open"},gp[Lg("elementProperties")]=new Map,gp[Lg("finalized")]=new Map,Uue?.({ReactiveElement:gp}),(Uc.reactiveElementVersions??(Uc.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dg=globalThis,pv=Dg.trustedTypes,Nk=pv?pv.createPolicy("lit-html",{createHTML:t=>t}):void 0,bG="$lit$",Rc=`lit$${Math.random().toFixed(9).slice(2)}$`,vG="?"+Rc,Gue=`<${vG}>`,Dh=document,ly=()=>Dh.createComment(""),cy=t=>t===null||typeof t!="object"&&typeof t!="function",UI=Array.isArray,Hue=t=>UI(t)||typeof t?.[Symbol.iterator]=="function",UE=`[ 	
\f\r]`,Ym=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Fk=/-->/g,zk=/>/g,$u=RegExp(`>|${UE}(?:([^\\s"'>=/]+)(${UE}*=${UE}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),jk=/'/g,Bk=/"/g,xG=/^(?:script|style|textarea|title)$/i,af=Symbol.for("lit-noChange"),$i=Symbol.for("lit-nothing"),qk=new WeakMap,nh=Dh.createTreeWalker(Dh,129);function wG(t,e){if(!UI(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Nk!==void 0?Nk.createHTML(e):e}const Jue=(t,e)=>{const r=t.length-1,n=[];let i,l=e===2?"<svg>":e===3?"<math>":"",c=Ym;for(let s=0;s<r;s++){const p=t[s];let g,_,x=-1,P=0;for(;P<p.length&&(c.lastIndex=P,_=c.exec(p),_!==null);)P=c.lastIndex,c===Ym?_[1]==="!--"?c=Fk:_[1]!==void 0?c=zk:_[2]!==void 0?(xG.test(_[2])&&(i=RegExp("</"+_[2],"g")),c=$u):_[3]!==void 0&&(c=$u):c===$u?_[0]===">"?(c=i??Ym,x=-1):_[1]===void 0?x=-2:(x=c.lastIndex-_[2].length,g=_[1],c=_[3]===void 0?$u:_[3]==='"'?Bk:jk):c===Bk||c===jk?c=$u:c===Fk||c===zk?c=Ym:(c=$u,i=void 0);const A=c===$u&&t[s+1].startsWith("/>")?" ":"";l+=c===Ym?p+Gue:x>=0?(n.push(g),p.slice(0,x)+bG+p.slice(x)+Rc+A):p+Rc+(x===-2?s:A)}return[wG(t,l+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class uy{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let l=0,c=0;const s=e.length-1,p=this.parts,[g,_]=Jue(e,r);if(this.el=uy.createElement(g,n),nh.currentNode=this.el.content,r===2||r===3){const x=this.el.content.firstChild;x.replaceWith(...x.childNodes)}for(;(i=nh.nextNode())!==null&&p.length<s;){if(i.nodeType===1){if(i.hasAttributes())for(const x of i.getAttributeNames())if(x.endsWith(bG)){const P=_[c++],A=i.getAttribute(x).split(Rc),M=/([.?@])?(.*)/.exec(P);p.push({type:1,index:l,name:M[2],strings:A,ctor:M[1]==="."?Zue:M[1]==="?"?Kue:M[1]==="@"?Yue:gx}),i.removeAttribute(x)}else x.startsWith(Rc)&&(p.push({type:6,index:l}),i.removeAttribute(x));if(xG.test(i.tagName)){const x=i.textContent.split(Rc),P=x.length-1;if(P>0){i.textContent=pv?pv.emptyScript:"";for(let A=0;A<P;A++)i.append(x[A],ly()),nh.nextNode(),p.push({type:2,index:++l});i.append(x[P],ly())}}}else if(i.nodeType===8)if(i.data===vG)p.push({type:2,index:l});else{let x=-1;for(;(x=i.data.indexOf(Rc,x+1))!==-1;)p.push({type:7,index:l}),x+=Rc.length-1}l++}}static createElement(e,r){const n=Dh.createElement("template");return n.innerHTML=e,n}}function lf(t,e,r=t,n){if(e===af)return e;let i=n!==void 0?r._$Co?.[n]:r._$Cl;const l=cy(e)?void 0:e._$litDirective$;return i?.constructor!==l&&(i?._$AO?.(!1),l===void 0?i=void 0:(i=new l(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=i:r._$Cl=i),i!==void 0&&(e=lf(t,i._$AS(t,e.values),i,n)),e}class Wue{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,i=(e?.creationScope??Dh).importNode(r,!0);nh.currentNode=i;let l=nh.nextNode(),c=0,s=0,p=n[0];for(;p!==void 0;){if(c===p.index){let g;p.type===2?g=new GI(l,l.nextSibling,this,e):p.type===1?g=new p.ctor(l,p.name,p.strings,this,e):p.type===6&&(g=new Xue(l,this,e)),this._$AV.push(g),p=n[++s]}c!==p?.index&&(l=nh.nextNode(),c++)}return nh.currentNode=Dh,i}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}let GI=class EG{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=$i,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=lf(this,e,r),cy(e)?e===$i||e==null||e===""?(this._$AH!==$i&&this._$AR(),this._$AH=$i):e!==this._$AH&&e!==af&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Hue(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==$i&&cy(this._$AH)?this._$AA.nextSibling.data=e:this.T(Dh.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=uy.createElement(wG(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(r);else{const l=new Wue(i,this),c=l.u(this.options);l.p(r),this.T(c),this._$AH=l}}_$AC(e){let r=qk.get(e.strings);return r===void 0&&qk.set(e.strings,r=new uy(e)),r}k(e){UI(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const l of e)i===r.length?r.push(n=new EG(this.O(ly()),this.O(ly()),this,this.options)):n=r[i],n._$AI(l),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}};class gx{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,l){this.type=1,this._$AH=$i,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=l,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=$i}_$AI(e,r=this,n,i){const l=this.strings;let c=!1;if(l===void 0)e=lf(this,e,r,0),c=!cy(e)||e!==this._$AH&&e!==af,c&&(this._$AH=e);else{const s=e;let p,g;for(e=l[0],p=0;p<l.length-1;p++)g=lf(this,s[n+p],r,p),g===af&&(g=this._$AH[p]),c||(c=!cy(g)||g!==this._$AH[p]),g===$i?e=$i:e!==$i&&(e+=(g??"")+l[p+1]),this._$AH[p]=g}c&&!i&&this.j(e)}j(e){e===$i?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Zue extends gx{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===$i?void 0:e}}class Kue extends gx{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==$i)}}class Yue extends gx{constructor(e,r,n,i,l){super(e,r,n,i,l),this.type=5}_$AI(e,r=this){if((e=lf(this,e,r,0)??$i)===af)return;const n=this._$AH,i=e===$i&&n!==$i||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,l=e!==$i&&(n===$i||i);i&&this.element.removeEventListener(this.name,this,n),l&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class Xue{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){lf(this,e)}}const Que=Dg.litHtmlPolyfillSupport;Que?.(uy,GI),(Dg.litHtmlVersions??(Dg.litHtmlVersions=[])).push("3.3.1");const fv=(t,e,r)=>{const n=r?.renderBefore??e;let i=n._$litPart$;if(i===void 0){const l=r?.renderBefore??null;n._$litPart$=i=new GI(e.insertBefore(ly(),l),l,void 0,r??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ng=globalThis;class fb extends gp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=fv(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return af}}fb._$litElement$=!0,fb.finalized=!0,Ng.litElementHydrateSupport?.({LitElement:fb});const ehe=Ng.litElementPolyfillSupport;ehe?.({LitElement:fb});(Ng.litElementVersions??(Ng.litElementVersions=[])).push("4.2.1");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const the=(t,e)=>t?._$litType$!==void 0;function rhe(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(s,p){var g=p.match(/\n([\t ]+|(?!\s).)/g);return g?s.concat(g.map(function(_){var x,P;return(P=(x=_.match(/[\t ]/g))===null||x===void 0?void 0:x.length)!==null&&P!==void 0?P:0})):s},[]);if(i.length){var l=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(s){return s.replace(l,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var c=n[0];return e.forEach(function(s,p){var g=c.match(/(?:^|\n)( *)$/),_=g?g[1]:"",x=s;typeof s=="string"&&s.includes(`
`)&&(x=String(s).split(`
`).map(function(P,A){return A===0?P:""+_+P}).join(`
`)),c+=x+n[p+1]}),c}var nhe={};kue(nhe,{parameters:()=>SG,render:()=>TG,renderToCanvas:()=>HI});const{global:ihe}=__STORYBOOK_MODULE_GLOBAL__,{simulateDOMContentLoaded:ohe,simulatePageLoad:$k}=__STORYBOOK_MODULE_PREVIEW_API__;var{Node:she}=ihe,TG=mx((t,e)=>{const{id:r,component:n}=e;if(!n)throw new Error(`Unable to render story ${r} as the component annotation is missing from the default export`);const i=document.createElement(n);return Object.entries(t).forEach(([l,c])=>{i[l]=c}),i},"render");function HI({storyFn:t,kind:e,name:r,showMain:n,showError:i,forceRemount:l},c){const s=t();if(n(),the(s)){(l||!c.querySelector('[id="root-inner"]'))&&(c.innerHTML='<div id="root-inner"></div>');const p=c.querySelector('[id="root-inner"]');fv(s,p),$k(c)}else if(typeof s=="string")c.innerHTML=s,$k(c);else if(s instanceof she){if(c.firstChild===s&&!l)return;c.innerHTML="",c.appendChild(s),ohe()}else i({title:`Expecting an HTML snippet or DOM node from the story: "${r}" of "${e}".`,description:rhe`
        Did you forget to return the HTML snippet from the story?
        Use "() => <your snippet or node>" or when defining the story.
      `})}mx(HI,"renderToCanvas");var SG={renderer:"web-components"};const ahe=Object.freeze(Object.defineProperty({__proto__:null,parameters:SG,render:TG,renderToCanvas:HI},Symbol.toStringTag,{value:"Module"})),{emitTransformCode:lhe,useEffect:che}=__STORYBOOK_MODULE_PREVIEW_API__;var uhe=/<!--\?lit\$[0-9]+\$-->|<!--\??-->/g;function CG(t){const e=t?.parameters.docs?.source,r=t?.parameters.__isArgsStory;return e?.type===dv.DYNAMIC?!1:!r||e?.code||e?.type===dv.CODE}mx(CG,"skipSourceRender");function PG(t,e){const r=t(),n=e?.parameters.docs?.source?.excludeDecorators?e.originalStoryFn(e.args,e):r;let i;if(che(()=>{i&&lhe(i,e)}),!CG(e)){const l=window.document.createElement("div");n instanceof DocumentFragment?fv(n.cloneNode(!0),l):fv(n,l),i=l.innerHTML.replace(uhe,"")}return r}mx(PG,"sourceDecorator");var hhe=[PG],dhe={docs:{source:{type:dv.DYNAMIC,language:"html"},story:{inline:!0}}};const phe=Object.freeze(Object.defineProperty({__proto__:null,decorators:hhe,parameters:dhe},Symbol.toStringTag,{value:"Module"}));var fhe=Object.create,yx=Object.defineProperty,mhe=Object.getOwnPropertyDescriptor,AG=Object.getOwnPropertyNames,ghe=Object.getPrototypeOf,yhe=Object.prototype.hasOwnProperty,Vk=(t,e)=>yx(t,"name",{value:e,configurable:!0}),Z1e=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),K1e=(t,e)=>function(){return e||(0,t[AG(t)[0]])((e={exports:{}}).exports,e),e.exports},_he=(t,e)=>{for(var r in e)yx(t,r,{get:e[r],enumerable:!0})},bhe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of AG(e))!yhe.call(t,i)&&i!==r&&yx(t,i,{get:()=>e[i],enumerable:!(n=mhe(e,i))||n.enumerable});return t},Y1e=(t,e,r)=>(r=t!=null?fhe(ghe(t)):{},bhe(yx(r,"default",{value:t,enumerable:!0}),t)),vhe={};_he(vhe,{parameters:()=>RG});var xhe=Object.entries(globalThis.TAGS_OPTIONS??{}).reduce((t,e)=>{const[r,n]=e;return n.excludeFromDocsStories&&(t[r]=!0),t},{}),RG={docs:{renderer:Vk(async()=>{const{DocsRenderer:t}=await Gs(async()=>{const{DocsRenderer:e}=await import("./DocsRenderer-HT7GNKAR-BgpELC0G.js");return{DocsRenderer:e}},__vite__mapDeps([11,2,1]),import.meta.url);return new t},"renderer"),stories:{filter:Vk(t=>(t.tags||[]).filter(r=>xhe[r]).length===0&&!t.parameters.docs?.disable,"filter")}}};const whe=Object.freeze(Object.defineProperty({__proto__:null,parameters:RG},Symbol.toStringTag,{value:"Module"}));var Kh="storybook/a11y",Ehe=`${Kh}/panel`,The=`${Kh}/result`,She=`${Kh}/request`,Che=`${Kh}/running`,Phe=`${Kh}/error`,Ahe=`${Kh}/manual`,Rhe=`${Kh}/select`,GE={RESULT:The,REQUEST:She,RUNNING:Che,ERROR:Phe,MANUAL:Ahe,SELECT:Rhe},IG=Object.defineProperty,Nh=(t,e)=>IG(t,"name",{value:e,configurable:!0}),Ihe=(t,e)=>{for(var r in e)IG(t,r,{get:e[r],enumerable:!0})},Mhe={};Ihe(Mhe,{afterEach:()=>LG,initialGlobals:()=>DG,parameters:()=>NG});const{expect:Uk}=__STORYBOOK_MODULE_TEST__,{ElementA11yParameterError:Ohe}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__,{global:khe}=__STORYBOOK_MODULE_GLOBAL__,{addons:Lhe,waitForAnimations:Dhe}=__STORYBOOK_MODULE_PREVIEW_API__,{global:Nhe}=__STORYBOOK_MODULE_GLOBAL__;var{document:Fhe}=Nhe,zhe=Nh((t,e)=>{const r=Fhe.location.pathname.replace(/iframe\.html$/,""),n={...t};return["incomplete","passes","violations"].forEach(l=>{Array.isArray(t[l])&&(n[l]=t[l].map(c=>({...c,nodes:c.nodes.map((s,p)=>{const g=`${l}.${c.id}.${p+1}`,_=`${r}?path=/story/${e}&addonPanel=${Ehe}&a11ySelection=${g}`;return{id:g,...s,linkPath:_}})})))}),n},"withLinkPaths"),{document:Gk}=khe,HE=Lhe.getChannel(),MG={config:{},options:{}},jhe=["region"],D2=[],N2=!1,OG=Nh(async()=>{if(D2.length===0){N2=!1;return}N2=!0;const t=D2.shift();t&&await t(),OG()},"runNext"),kG=Nh(async(t=MG,e)=>{const n=(await Gs(()=>import("./axe-91BoEbKf.js").then(p=>p.a),[],import.meta.url))?.default||globalThis.axe,{config:i={},options:l={}}=t;if(t.element)throw new Ohe;const c={include:Gk?.body,exclude:[".sb-wrapper","#storybook-docs","#storybook-highlights-root"]};if(t.context){const p=typeof t.context=="object"&&"include"in t.context&&t.context.include!==void 0,g=typeof t.context=="object"&&"exclude"in t.context&&t.context.exclude!==void 0;p?c.include=t.context.include:!p&&!g&&(c.include=t.context),g&&(c.exclude=c.exclude.concat(t.context.exclude))}n.reset();const s={...i,rules:[...jhe.map(p=>({id:p,enabled:!1})),...i?.rules??[]]};return n.configure(s),new Promise((p,g)=>{const _=Gk?.getElementById("storybook-highlights-root");_&&(_.style.display="none");const x=Nh(async()=>{try{const P=await n.run(c,l),A=zhe(P,e);p(A)}catch(P){g(P)}},"task");D2.push(x),N2||OG(),_&&(_.style.display="")})},"run");HE.on(GE.MANUAL,async(t,e=MG)=>{try{await Dhe();const r=await kG(e,t),n=JSON.parse(JSON.stringify(r));HE.emit(GE.RESULT,n,t)}catch(r){HE.emit(GE.ERROR,r)}});function F2(){try{return!1}catch{return!1}}Nh(F2,"getIsVitestStandaloneRun");var Hk=!1,LG=Nh(async({id:t,reporting:e,parameters:r,globals:n,viewMode:i})=>{const l=r.a11y,c=n.a11y,s=l?.disable!==!0&&l?.test!=="off"&&c?.manual!==!0,p=Nh(()=>{switch(l?.test){case"todo":return"warning";case"error":default:return"failed"}},"getMode");if(s&&i==="story")try{const g=await kG(l,t);if(g){const _=(g?.violations.length??0)>0;if(e.addReport({type:"a11y",version:1,result:g,status:_?p():"passed"}),F2()&&_&&p()==="failed"){if(!Hk){const{toHaveNoViolations:x}=await Gs(async()=>{const{toHaveNoViolations:P}=await import("./matchers-ZRZBO4XZ-BrmjAYha.js");return{toHaveNoViolations:P}},__vite__mapDeps([12,2]),import.meta.url);Uk.extend({toHaveNoViolations:x}),Hk=!0}Uk(g).toHaveNoViolations()}}}catch(g){if(e.addReport({type:"a11y",version:1,result:{error:g},status:"failed"}),F2())throw g}},"afterEach"),DG={a11y:{manual:!1}},NG={a11y:{test:"todo"}};const Bhe=Object.freeze(Object.defineProperty({__proto__:null,afterEach:LG,initialGlobals:DG,parameters:NG},Symbol.toStringTag,{value:"Module"})),qhe=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0,0,0,0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}@media (hover:hover){.maplibregl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}}.maplibregl-ctrl button:not(:disabled):active{background-color:rgba(0,0,0,.05)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-globe .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%23333' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-globe-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%2333b5e5' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(pointer:coarse){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,Po={ADD:"add",REMOVE:"remove"},cf={PROPERTYCHANGE:"propertychange"},Rr={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class _x{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function $he(t,e,r){let n,i;r=r||Ia;let l=0,c=t.length,s=!1;for(;l<c;)n=l+(c-l>>1),i=+r(t[n],e),i<0?l=n+1:(c=n,s=!i);return s?l:~l}function Ia(t,e){return t>e?1:t<e?-1:0}function Vhe(t,e){return t<e?1:t>e?-1:0}function JI(t,e,r){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if(typeof r=="function"){for(let i=1;i<n;++i){const l=t[i];if(l===e)return i;if(l<e)return r(e,t[i-1],l)>0?i-1:i}return n-1}if(r>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1;return n-1}if(r<0){for(let i=1;i<n;++i)if(t[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function Uhe(t,e,r){for(;e<r;){const n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function Ma(t,e){const r=Array.isArray(e)?e:[e],n=r.length;for(let i=0;i<n;i++)t[t.length]=r[i]}function su(t,e){const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ghe(t,e,r){const n=e||Ia;return t.every(function(i,l){if(l===0)return!0;const c=n(t[l-1],i);return!(c>0||c===0)})}function hy(){return!0}function bx(){return!1}function dy(){}function FG(t){let e,r,n;return function(){const i=Array.prototype.slice.call(arguments);return(!r||this!==n||!su(i,r))&&(n=this,r=i,e=t.apply(this,arguments)),e}}function py(t){function e(){let r;try{r=t()}catch(n){return Promise.reject(n)}return r instanceof Promise?r:Promise.resolve(r)}return e()}function t_(t){for(const e in t)delete t[e]}function Qc(t){let e;for(e in t)return!1;return!e}class jl{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function Hhe(t){t.stopPropagation()}class vx extends _x{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,r){if(!e||!r)return;const n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);i.includes(r)||i.push(r)}dispatchEvent(e){const r=typeof e=="string",n=r?e:e.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const l=r?new jl(e):e;l.target||(l.target=this.eventTarget_||this);const c=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});n in c||(c[n]=0,s[n]=0),++c[n];let p;for(let g=0,_=i.length;g<_;++g)if("handleEvent"in i[g]?p=i[g].handleEvent(l):p=i[g].call(this,l),p===!1||l.propagationStopped){p=!1;break}if(--c[n]===0){let g=s[n];for(delete s[n];g--;)this.removeEventListener(n,dy);delete c[n]}return p}disposeInternal(){this.listeners_&&t_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,r){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const i=n.indexOf(r);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=dy,++this.pendingRemovals_[e]):(n.splice(i,1),n.length===0&&delete this.listeners_[e]))}}function en(t,e,r,n,i){if(i){const c=r;r=function(s){return t.removeEventListener(e,r),c.call(n??this,s)}}else n&&n!==t&&(r=r.bind(n));const l={target:t,type:e,listener:r};return t.addEventListener(e,r),l}function mv(t,e,r,n){return en(t,e,r,n,!0)}function Rn(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),t_(t))}class r_ extends vx{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Rr.CHANGE)}getRevision(){return this.revision_}onInternal(e,r){if(Array.isArray(e)){const n=e.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=en(this,e[l],r);return i}return en(this,e,r)}onceInternal(e,r){let n;if(Array.isArray(e)){const i=e.length;n=new Array(i);for(let l=0;l<i;++l)n[l]=mv(this,e[l],r)}else n=mv(this,e,r);return r.ol_key=n,n}unInternal(e,r){const n=r.ol_key;if(n)Jhe(n);else if(Array.isArray(e))for(let i=0,l=e.length;i<l;++i)this.removeEventListener(e[i],r);else this.removeEventListener(e,r)}}r_.prototype.on;r_.prototype.once;r_.prototype.un;function Jhe(t){if(Array.isArray(t))for(let e=0,r=t.length;e<r;++e)Rn(t[e]);else Rn(t)}function Sr(){throw new Error("Unimplemented abstract method.")}let Whe=0;function Nr(t){return t.ol_uid||(t.ol_uid=String(++Whe))}class Jk extends jl{constructor(e,r,n){super(e),this.key=r,this.oldValue=n}}class oa extends r_{constructor(e){super(),this.on,this.once,this.un,Nr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let r;return this.values_&&this.values_.hasOwnProperty(e)&&(r=this.values_[e]),r}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,r){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Jk(n,e,r)),n=cf.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Jk(n,e,r))}addChangeListener(e,r){this.addEventListener(`change:${e}`,r)}removeChangeListener(e,r){this.removeEventListener(`change:${e}`,r)}set(e,r,n){const i=this.values_||(this.values_={});if(n)i[e]=r;else{const l=i[e];i[e]=r,l!==r&&this.notify(e,l)}}setProperties(e,r){for(const n in e)this.set(n,e[n],r)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,r){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Qc(this.values_)&&(this.values_=null),r||this.notify(e,n)}}}const Wk={LENGTH:"length"};class I0 extends jl{constructor(e,r,n){super(e),this.element=r,this.index=n}}class Xs extends oa{constructor(e,r){if(super(),this.on,this.once,this.un,r=r||{},this.unique_=!!r.unique,this.array_=e||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let r=0,n=e.length;r<n;++r)this.push(e[r]);return this}forEach(e){const r=this.array_;for(let n=0,i=r.length;n<i;++n)e(r[n],n,r)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Wk.LENGTH)}insertAt(e,r){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(r),this.array_.splice(e,0,r),this.updateLength_(),this.dispatchEvent(new I0(Po.ADD,r,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const r=this.getLength();return this.insertAt(r,e),this.getLength()}remove(e){const r=this.array_;for(let n=0,i=r.length;n<i;++n)if(r[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const r=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new I0(Po.REMOVE,r,e)),r}setAt(e,r){const n=this.getLength();if(e>=n){this.insertAt(e,r);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(r,e);const i=this.array_[e];this.array_[e]=r,this.dispatchEvent(new I0(Po.REMOVE,i,e)),this.dispatchEvent(new I0(Po.ADD,r,e))}updateLength_(){this.set(Wk.LENGTH,this.array_.length)}assertUnique_(e,r){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==r)throw new Error("Duplicate item added to a unique collection")}}class yp extends jl{constructor(e,r,n){super(e),this.map=r,this.frameState=n!==void 0?n:null}}class Ec extends yp{constructor(e,r,n,i,l,c){super(e,r,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=c}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ti={SINGLECLICK:"singleclick",CLICK:Rr.CLICK,DBLCLICK:Rr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Fh=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Zhe=Fh.includes("safari")&&!Fh.includes("chrom");Zhe&&(Fh.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Fh));const Khe=Fh.includes("webkit")&&!Fh.includes("edge"),zG=Fh.includes("macintosh"),Yhe=typeof devicePixelRatio<"u"?devicePixelRatio:1,WI=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,jG=typeof Image<"u"&&Image.prototype.decode,BG=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}(),Ic={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup"};class Xhe extends vx{constructor(e,r){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=r===void 0?1:r,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=en(n,Ic.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=en(n,Ic.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Rr.TOUCHMOVE,this.boundHandleTouchMove_,BG?{passive:!1}:!1)}emulateClick_(e){let r=new Ec(ti.CLICK,this.map_,e);this.dispatchEvent(r),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,r=new Ec(ti.DBLCLICK,this.map_,e),this.dispatchEvent(r)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Ec(ti.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const r=e,n=r.pointerId;if(r.type==ti.POINTERUP||r.type==ti.POINTERCANCEL){delete this.trackedTouches_[n];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==r.target){delete this.trackedTouches_[i];break}}else(r.type==ti.POINTERDOWN||r.type==ti.POINTERMOVE)&&(this.trackedTouches_[n]=r);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const r=new Ec(ti.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(r),this.emulateClicks_&&!r.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Rn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const r=new Ec(ti.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(r),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(en(n,ti.POINTERMOVE,this.handlePointerMove_,this),en(n,ti.POINTERUP,this.handlePointerUp_,this),en(this.element_,ti.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(en(this.element_.getRootNode(),ti.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const r=new Ec(ti.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(r)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const r=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Ec(ti.POINTERMOVE,this.map_,e,r))}handleTouchMove_(e){const r=this.originalPointerMoveEvent_;(!r||r.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Rn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Rr.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Rn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Rn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const gl={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},lo={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},qt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function cn(t,e){if(!t)throw new Error(e)}const gv=1/0;class Qhe{constructor(e,r){this.priorityFunction_=e,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,t_(this.queuedElements_)}dequeue(){const e=this.elements_,r=this.priorities_,n=e[0];e.length==1?(e.length=0,r.length=0):(e[0]=e.pop(),r[0]=r.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(e){cn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const r=this.priorityFunction_(e);return r!=gv?(this.elements_.push(e),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const r=this.elements_,n=this.priorities_,i=r.length,l=r[e],c=n[e],s=e;for(;e<i>>1;){const p=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),_=g<i&&n[g]<n[p]?g:p;r[e]=r[_],n[e]=n[_],e=_}r[e]=l,n[e]=c,this.siftDown_(s,e)}siftDown_(e,r){const n=this.elements_,i=this.priorities_,l=n[r],c=i[r];for(;r>e;){const s=this.getParentIndex_(r);if(i[s]>c)n[r]=n[s],i[r]=i[s],r=s;else break}n[r]=l,i[r]=c}reprioritize(){const e=this.priorityFunction_,r=this.elements_,n=this.priorities_;let i=0;const l=r.length;let c,s,p;for(s=0;s<l;++s)c=r[s],p=e(c),p==gv?delete this.queuedElements_[this.keyFunction_(c)]:(n[i]=p,r[i++]=c);r.length=i,n.length=i,this.heapify_()}}class ede extends Qhe{constructor(e,r){super(n=>e.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=r,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const r=super.enqueue(e);return r&&e[0].addEventListener(Rr.CHANGE,this.boundHandleTileChange_),r}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const r=e.target,n=r.getState();if(n===qt.LOADED||n===qt.ERROR||n===qt.EMPTY){n!==qt.ERROR&&r.removeEventListener(Rr.CHANGE,this.boundHandleTileChange_);const i=r.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,r){let n=0;for(;this.tilesLoading_<e&&n<r&&this.getCount()>0;){const i=this.dequeue()[0],l=i.getKey();i.getState()===qt.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,i.load())}}}function tde(t,e,r,n,i){if(!t||!(r in t.wantedTiles)||!t.wantedTiles[r][e.getKey()])return gv;const l=t.viewState.center,c=n[0]-l[0],s=n[1]-l[1];return 65536*Math.log(i)+Math.sqrt(c*c+s*s)/i}const ri={ANIMATING:0,INTERACTING:1},Vs={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function qn(t,e,r){return Math.min(Math.max(t,e),r)}function rde(t,e,r,n,i,l){const c=i-r,s=l-n;if(c!==0||s!==0){const p=((t-r)*c+(e-n)*s)/(c*c+s*s);p>1?(r=i,n=l):p>0&&(r+=c*p,n+=s*p)}return gh(t,e,r,n)}function gh(t,e,r,n){const i=r-t,l=n-e;return i*i+l*l}function nde(t){const e=t.length;for(let n=0;n<e;n++){let i=n,l=Math.abs(t[n][n]);for(let s=n+1;s<e;s++){const p=Math.abs(t[s][n]);p>l&&(l=p,i=s)}if(l===0)return null;const c=t[i];t[i]=t[n],t[n]=c;for(let s=n+1;s<e;s++){const p=-t[s][n]/t[n][n];for(let g=n;g<e+1;g++)n==g?t[s][g]=0:t[s][g]+=p*t[n][g]}}const r=new Array(e);for(let n=e-1;n>=0;n--){r[n]=t[n][e]/t[n][n];for(let i=n-1;i>=0;i--)t[i][e]-=t[i][n]*r[n]}return r}function Zk(t){return t*180/Math.PI}function Gc(t){return t*Math.PI/180}function yh(t,e){const r=t%e;return r*e<0?r+e:r}function rs(t,e,r){return t+r*(e-t)}function xx(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}function M0(t,e){return Math.floor(xx(t,e))}function O0(t,e){return Math.ceil(xx(t,e))}function z2(t,e,r){if(t>=e&&t<r)return t;const n=r-e;return((t-e)%n+n)%n+e}function Kk(t,e,r){return function(n,i,l,c,s){if(!n)return;if(!i&&!e)return n;const p=e?0:l[0]*i,g=e?0:l[1]*i,_=s?s[0]:0,x=s?s[1]:0;let P=t[0]+p/2+_,A=t[2]-p/2+_,M=t[1]+g/2+x,N=t[3]-g/2+x;P>A&&(P=(A+P)/2,A=P),M>N&&(M=(N+M)/2,N=M);let z=qn(n[0],P,A),j=qn(n[1],M,N);if(c&&r&&i){const $=30*i;z+=-$*Math.log(1+Math.max(0,P-n[0])/$)+$*Math.log(1+Math.max(0,n[0]-A)/$),j+=-$*Math.log(1+Math.max(0,M-n[1])/$)+$*Math.log(1+Math.max(0,n[1]-N)/$)}return[z,j]}}function ide(t){return t}const qi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function j2(t){const e=Os();for(let r=0,n=t.length;r<n;++r)Fg(e,t[r]);return e}function ode(t,e,r){const n=Math.min.apply(null,t),i=Math.min.apply(null,e),l=Math.max.apply(null,t),c=Math.max.apply(null,e);return Ml(n,i,l,c,r)}function Hc(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function qG(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Yh(t,e,r){let n,i;return e<t[0]?n=t[0]-e:t[2]<e?n=e-t[2]:n=0,r<t[1]?i=t[1]-r:t[3]<r?i=r-t[3]:i=0,n*n+i*i}function uf(t,e){return ZI(t,e[0],e[1])}function ih(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function ZI(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function B2(t,e){const r=t[0],n=t[1],i=t[2],l=t[3],c=e[0],s=e[1];let p=qi.UNKNOWN;return c<r?p=p|qi.LEFT:c>i&&(p=p|qi.RIGHT),s<n?p=p|qi.BELOW:s>l&&(p=p|qi.ABOVE),p===qi.UNKNOWN&&(p=qi.INTERSECTING),p}function Os(){return[1/0,1/0,-1/0,-1/0]}function Ml(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function kf(t){return Ml(1/0,1/0,-1/0,-1/0,t)}function $G(t,e){const r=t[0],n=t[1];return Ml(r,n,r,n,e)}function KI(t,e,r,n,i){const l=kf(i);return UG(l,t,e,r,n)}function hf(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function VG(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Fg(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function UG(t,e,r,n,i){for(;r<n;r+=i)sde(t,e[r],e[r+1]);return t}function sde(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function GG(t,e){let r;return r=e(wx(t)),r||(r=e(Ex(t)),r)||(r=e(Tx(t)),r)||(r=e(Bl(t)),r)?r:!1}function q2(t){let e=0;return n_(t)||(e=En(t)*wo(t)),e}function wx(t){return[t[0],t[1]]}function Ex(t){return[t[2],t[1]]}function Ol(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ade(t,e){let r;if(e==="bottom-left")r=wx(t);else if(e==="bottom-right")r=Ex(t);else if(e==="top-left")r=Bl(t);else if(e==="top-right")r=Tx(t);else throw new Error("Invalid corner");return r}function $2(t,e,r,n,i){const[l,c,s,p,g,_,x,P]=HG(t,e,r,n);return Ml(Math.min(l,s,g,x),Math.min(c,p,_,P),Math.max(l,s,g,x),Math.max(c,p,_,P),i)}function HG(t,e,r,n){const i=e*n[0]/2,l=e*n[1]/2,c=Math.cos(r),s=Math.sin(r),p=i*c,g=i*s,_=l*c,x=l*s,P=t[0],A=t[1];return[P-p+x,A-g-_,P-p-x,A-g+_,P+p-x,A+g+_,P+p+x,A+g-_,P-p+x,A-g-_]}function wo(t){return t[3]-t[1]}function Cl(t,e,r){const n=r||Os();return ui(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):kf(n),n}function Bl(t){return[t[0],t[3]]}function Tx(t){return[t[2],t[3]]}function En(t){return t[2]-t[0]}function ui(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function n_(t){return t[2]<t[0]||t[3]<t[1]}function lde(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function cde(t,e,r){let n=!1;const i=B2(t,e),l=B2(t,r);if(i===qi.INTERSECTING||l===qi.INTERSECTING)n=!0;else{const c=t[0],s=t[1],p=t[2],g=t[3],_=e[0],x=e[1],P=r[0],A=r[1],M=(A-x)/(P-_);let N,z;l&qi.ABOVE&&!(i&qi.ABOVE)&&(N=P-(A-g)/M,n=N>=c&&N<=p),!n&&l&qi.RIGHT&&!(i&qi.RIGHT)&&(z=A-(P-p)*M,n=z>=s&&z<=g),!n&&l&qi.BELOW&&!(i&qi.BELOW)&&(N=P-(A-s)/M,n=N>=c&&N<=p),!n&&l&qi.LEFT&&!(i&qi.LEFT)&&(z=A-(P-c)*M,n=z>=s&&z<=g)}return n}function JG(t,e,r,n){if(n_(t))return kf(r);let i=[];i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]],e(i,i,2);const l=[],c=[];for(let s=0,p=i.length;s<p;s+=2)l.push(i[s]),c.push(i[s+1]);return ode(l,c,r)}function WG(t,e){const r=e.getExtent(),n=Ol(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){const i=En(r),c=Math.floor((n[0]-r[0])/i)*i;t[0]-=c,t[2]-=c}return t}function ZG(t,e,r){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];WG(t,e);const i=En(n);if(En(t)>i&&!r)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}function ude(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function yv(t,e){let r=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function YI(t,e){const r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,l=t[1]*r+t[0]*n;return t[0]=i,t[1]=l,t}function hde(t,e){return t[0]*=e,t[1]*=e,t}function dde(t,e){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function pde(t,e){return Math.sqrt(dde(t,e))}function XI(t,e){if(e.canWrapX()){const r=En(e.getExtent()),n=fde(t,e,r);n&&(t[0]-=n*r)}return t}function fde(t,e,r){const n=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(r=r||En(n),i=Math.floor((t[0]-n[0])/r)),i}function KG(t){return Math.pow(t,3)}function Xh(t){return 1-KG(1-t)}function mde(t){return 3*t*t-2*t*t*t}function gde(t){return t}const yde=63710088e-1;function Yk(t,e,r){r=r||yde;const n=Gc(t[1]),i=Gc(e[1]),l=(i-n)/2,c=Gc(e[0]-t[0])/2,s=Math.sin(l)*Math.sin(l)+Math.sin(c)*Math.sin(c)*Math.cos(n)*Math.cos(i);return 2*r*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}function YG(...t){console.warn(...t)}const zh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Sx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||zh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const i_=6378137,Pp=Math.PI*i_,_de=[-Pp,-Pp,Pp,Pp],bde=[-180,-85,180,85],k0=i_*Math.log(Math.tan(Math.PI/2));class np extends Sx{constructor(e){super({code:e,units:"m",extent:_de,global:!0,worldExtent:bde,getPointResolution:function(r,n){return r/Math.cosh(n[1]/i_)}})}}const Xk=[new np("EPSG:3857"),new np("EPSG:102100"),new np("EPSG:102113"),new np("EPSG:900913"),new np("http://www.opengis.net/def/crs/EPSG/0/3857"),new np("http://www.opengis.net/gml/srs/epsg.xml#3857")];function vde(t,e,r,n){const i=t.length;r=r>1?r:2,n=n??r,e===void 0&&(r>2?e=t.slice():e=new Array(i));for(let l=0;l<i;l+=n){e[l]=Pp*t[l]/180;let c=i_*Math.log(Math.tan(Math.PI*(+t[l+1]+90)/360));c>k0?c=k0:c<-k0&&(c=-k0),e[l+1]=c}return e}function xde(t,e,r,n){const i=t.length;r=r>1?r:2,n=n??r,e===void 0&&(r>2?e=t.slice():e=new Array(i));for(let l=0;l<i;l+=n)e[l]=180*t[l]/Pp,e[l+1]=360*Math.atan(Math.exp(t[l+1]/i_))/Math.PI-90;return e}const wde=6378137,Qk=[-180,-90,180,90],Ede=Math.PI*wde/180;class Vu extends Sx{constructor(e,r){super({code:e,units:"degrees",extent:Qk,axisOrientation:r,global:!0,metersPerUnit:Ede,worldExtent:Qk})}}const eL=[new Vu("CRS:84"),new Vu("EPSG:4326","neu"),new Vu("urn:ogc:def:crs:OGC:1.3:CRS84"),new Vu("urn:ogc:def:crs:OGC:2:84"),new Vu("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Vu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Vu("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let V2={};function Tde(t){return V2[t]||V2[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Sde(t,e){V2[t]=e}let Dp={};function fy(t,e,r){const n=t.getCode(),i=e.getCode();n in Dp||(Dp[n]={}),Dp[n][i]=r}function JE(t,e){return t in Dp&&e in Dp[t]?Dp[t][e]:null}const _v=.9996,Ps=.00669438,Cx=Ps*Ps,Px=Cx*Ps,oh=Ps/(1-Ps),tL=Math.sqrt(1-Ps),df=(1-tL)/(1+tL),XG=df*df,QI=XG*df,eM=QI*df,QG=eM*df,eH=1-Ps/4-3*Cx/64-5*Px/256,Cde=3*Ps/8+3*Cx/32+45*Px/1024,Pde=15*Cx/256+45*Px/1024,Ade=35*Px/3072,Rde=3/2*df-27/32*QI+269/512*QG,Ide=21/16*XG-55/32*eM,Mde=151/96*QI-417/128*QG,Ode=1097/512*eM,bv=6378137;function kde(t,e,r){const n=t-5e5,c=(r.north?e:e-1e7)/_v/(bv*eH),s=c+Rde*Math.sin(2*c)+Ide*Math.sin(4*c)+Mde*Math.sin(6*c)+Ode*Math.sin(8*c),p=Math.sin(s),g=p*p,_=Math.cos(s),x=p/_,P=x*x,A=P*P,M=1-Ps*g,N=Math.sqrt(1-Ps*g),z=bv/N,j=(1-Ps)/M,$=oh*_**2,J=$*$,X=n/(z*_v),re=X*X,ne=re*X,Z=ne*X,U=Z*X,K=U*X,he=s-x/j*(re/2-Z/24*(5+3*P+10*$-4*J-9*oh))+K/720*(61+90*P+298*$+45*A-252*oh-3*J);let ue=(X-ne/6*(1+2*P+$)+U/120*(5-2*$+28*P-3*J+8*oh+24*A))/_;return ue=z2(ue+Gc(tH(r.number)),-Math.PI,Math.PI),[Zk(ue),Zk(he)]}const rL=-80,nL=84,Lde=-180,Dde=180;function Nde(t,e,r){t=z2(t,Lde,Dde),e<rL?e=rL:e>nL&&(e=nL);const n=Gc(e),i=Math.sin(n),l=Math.cos(n),c=i/l,s=c*c,p=s*s,g=Gc(t),_=tH(r.number),x=Gc(_),P=bv/Math.sqrt(1-Ps*i**2),A=oh*l**2,M=l*z2(g-x,-Math.PI,Math.PI),N=M*M,z=N*M,j=z*M,$=j*M,J=$*M,X=bv*(eH*n-Cde*Math.sin(2*n)+Pde*Math.sin(4*n)-Ade*Math.sin(6*n)),re=_v*P*(M+z/6*(1-s+A)+$/120*(5-18*s+p+72*A-58*oh))+5e5;let ne=_v*(X+P*c*(N/2+j/24*(5-s+9*A+4*A**2)+J/720*(61-58*s+p+600*A-330*oh)));return r.north||(ne+=1e7),[re,ne]}function tH(t){return(t-1)*6-180+3}const Fde=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function rH(t){let e=0;for(const i of Fde){const l=t.match(i);if(l){e=parseInt(l[1]);break}}if(!e)return null;let r=0,n=!1;return e>32700&&e<32761?r=e-32700:e>32600&&e<32661&&(n=!0,r=e-32600),r?{number:r,north:n}:null}function iL(t,e){return function(r,n,i,l){const c=r.length;i=i>1?i:2,l=l??i,n||(i>2?n=r.slice():n=new Array(c));for(let s=0;s<c;s+=l){const p=r[s],g=r[s+1],_=t(p,g,e);n[s]=_[0],n[s+1]=_[1]}return n}}function zde(t){return rH(t)?new Sx({code:t,units:"m"}):null}function jde(t){const e=rH(t.getCode());return e?{forward:iL(Nde,e),inverse:iL(kde,e)}:null}const Bde=[jde],qde=[zde];let U2=!0;function nH(t){U2=!1}function tM(t,e){if(e!==void 0){for(let r=0,n=t.length;r<n;++r)e[r]=t[r];e=e}else e=t.slice();return e}function G2(t){Sde(t.getCode(),t),fy(t,t,tM)}function $de(t){t.forEach(G2)}function An(t){if(typeof t!="string")return t;const e=Tde(t);if(e)return e;for(const r of qde){const n=r(t);if(n)return n}return null}function vv(t,e,r,n){t=An(t);let i;const l=t.getPointResolutionFunc();if(l){if(i=l(e,r),n&&n!==t.getUnits()){const c=t.getMetersPerUnit();c&&(i=i*c/zh[n])}}else{const c=t.getUnits();if(c=="degrees"&&!n||n=="degrees")i=e;else{const s=o_(t,An("EPSG:4326"));if(!s&&c!=="degrees")i=e*t.getMetersPerUnit();else{let g=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];g=s(g,g,2);const _=Yk(g.slice(0,2),g.slice(2,4)),x=Yk(g.slice(4,6),g.slice(6,8));i=(_+x)/2}const p=n?zh[n]:t.getMetersPerUnit();p!==void 0&&(i/=p)}}return i}function oL(t){$de(t),t.forEach(function(e){t.forEach(function(r){e!==r&&fy(e,r,tM)})})}function Vde(t,e,r,n){t.forEach(function(i){e.forEach(function(l){fy(i,l,r),fy(l,i,n)})})}function rM(t,e){return t?typeof t=="string"?An(t):t:An(e)}function Ude(t){return function(e,r,n,i){const l=e.length;n=n!==void 0?n:2,i=i??n,r=r!==void 0?r:new Array(l);for(let c=0;c<l;c+=i){const s=t(e.slice(c,c+n)),p=s.length;for(let g=0,_=i;g<_;++g)r[c+g]=g>=p?e[c+g]:s[g]}return r}}function xv(t,e){return nH(),ff(t,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Gde(t,e){const r=ff(t,"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=yh(n+180,360)-180),r}function Np(t,e){if(t===e)return!0;const r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||o_(t,e)===tM)&&r}function o_(t,e){const r=t.getCode(),n=e.getCode();let i=JE(r,n);if(i)return i;let l=null,c=null;for(const p of Bde)l||(l=p(t)),c||(c=p(e));if(!l&&!c)return null;const s="EPSG:4326";if(c)if(l)i=WE(l.inverse,c.forward);else{const p=JE(r,s);p&&(i=WE(p,c.forward))}else{const p=JE(s,n);p&&(i=WE(l.inverse,p))}return i&&(G2(t),G2(e),fy(t,e,i)),i}function WE(t,e){return function(r,n,i,l){return n=t(r,n,i,l),e(n,n,i,l)}}function pf(t,e){const r=An(t),n=An(e);return o_(r,n)}function ff(t,e,r){const n=pf(e,r);if(!n){const i=An(e).getCode(),l=An(r).getCode();throw new Error(`No transform available between ${i} and ${l}`)}return n(t,void 0,t.length)}function Hde(t,e,r,n){const i=pf(e,r);return JG(t,i,void 0)}let Jde=null;function Wde(){return Jde}function H2(t,e){return t}function ml(t,e){return U2&&!yv(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(U2=!1,YG("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function nM(t,e){return t}function kc(t,e){return t}function Zde(){oL(Xk),oL(eL),Vde(eL,Xk,vde,xde)}Zde();const iH=new Array(6);function As(){return[1,0,0,1,0,0]}function sL(t){return oM(t,1,0,0,1,0,0)}function iM(t,e){const r=t[0],n=t[1],i=t[2],l=t[3],c=t[4],s=t[5],p=e[0],g=e[1],_=e[2],x=e[3],P=e[4],A=e[5];return t[0]=r*p+i*g,t[1]=n*p+l*g,t[2]=r*_+i*x,t[3]=n*_+l*x,t[4]=r*P+i*A+c,t[5]=n*P+l*A+s,t}function oM(t,e,r,n,i,l,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=l,t[5]=c,t}function Kde(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Li(t,e){const r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function ZE(t,e,r){return iM(t,oM(iH,e,0,0,r,0,0))}function Yde(t,e,r){return iM(t,oM(iH,1,0,0,1,e,r))}function kl(t,e,r,n,i,l,c,s){const p=Math.sin(l),g=Math.cos(l);return t[0]=n*g,t[1]=i*p,t[2]=-n*p,t[3]=i*g,t[4]=c*n*g-s*n*p+e,t[5]=c*i*p+s*i*g+r,t}function oH(t,e){const r=Xde(e);cn(r!==0,"Transformation matrix cannot be inverted");const n=e[0],i=e[1],l=e[2],c=e[3],s=e[4],p=e[5];return t[0]=c/r,t[1]=-i/r,t[2]=-l/r,t[3]=n/r,t[4]=(l*p-c*s)/r,t[5]=-(n*p-i*s)/r,t}function Xde(t){return t[0]*t[3]-t[1]*t[2]}const Qde=[1e5,1e5,1e5,1e5,2,2];function epe(t){return"matrix("+t.join(", ")+")"}function aL(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function tpe(t,e){const r=aL(t),n=aL(e);for(let i=0;i<6;++i)if(Math.round((r[i]-n[i])*Qde[i])!==0)return!1;return!0}function Jc(t,e,r,n,i,l,c){l=l||[],c=c||2;let s=0;for(let p=e;p<r;p+=n){const g=t[p],_=t[p+1];l[s++]=i[0]*g+i[2]*_+i[4],l[s++]=i[1]*g+i[3]*_+i[5];for(let x=2;x<c;x++)l[s++]=t[p+x]}return l&&l.length!=s&&(l.length=s),l}function sH(t,e,r,n,i,l,c){c=c||[];const s=Math.cos(i),p=Math.sin(i),g=l[0],_=l[1];let x=0;for(let P=e;P<r;P+=n){const A=t[P]-g,M=t[P+1]-_;c[x++]=g+A*s-M*p,c[x++]=_+A*p+M*s;for(let N=P+2;N<P+n;++N)c[x++]=t[N]}return c&&c.length!=x&&(c.length=x),c}function rpe(t,e,r,n,i,l,c,s){s=s||[];const p=c[0],g=c[1];let _=0;for(let x=e;x<r;x+=n){const P=t[x]-p,A=t[x+1]-g;s[_++]=p+i*P,s[_++]=g+l*A;for(let M=x+2;M<x+n;++M)s[_++]=t[M]}return s&&s.length!=_&&(s.length=_),s}function npe(t,e,r,n,i,l,c){c=c||[];let s=0;for(let p=e;p<r;p+=n){c[s++]=t[p]+i,c[s++]=t[p+1]+l;for(let g=p+2;g<p+n;++g)c[s++]=t[g]}return c&&c.length!=s&&(c.length=s),c}const lL=As(),ipe=[NaN,NaN];class aH extends oa{constructor(){super(),this.extent_=Os(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=FG((e,r,n)=>{if(!n)return this.getSimplifiedGeometry(r);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(r)})}simplifyTransformed(e,r){return this.simplifyTransformedInternal(this.getRevision(),e,r)}clone(){return Sr()}closestPointXY(e,r,n,i){return Sr()}containsXY(e,r){return this.closestPointXY(e,r,ipe,Number.MIN_VALUE)===0}getClosestPoint(e,r){return r=r||[NaN,NaN],this.closestPointXY(e[0],e[1],r,1/0),r}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Sr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&kf(r),this.extentRevision_=this.getRevision()}return lde(this.extent_,e)}rotate(e,r){Sr()}scale(e,r,n){Sr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Sr()}getType(){return Sr()}applyTransform(e){Sr()}intersectsExtent(e){return Sr()}translate(e,r){Sr()}transform(e,r){const n=An(e),i=n.getUnits()=="tile-pixels"?function(l,c,s){const p=n.getExtent(),g=n.getWorldExtent(),_=wo(g)/wo(p);kl(lL,g[0],g[3],_,-_,0,0,0);const x=Jc(l,0,l.length,s,lL,c),P=pf(n,r);return P?P(x,x,s):x}:pf(n,r);return this.applyTransform(i),this}}class Qh extends aH{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return KI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Sr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const r=this.getSimplifiedGeometryInternal(e);return r.getFlatCoordinates().length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,r){this.stride=cL(e),this.layout=e,this.flatCoordinates=r}setCoordinates(e,r){Sr()}setLayout(e,r,n){let i;if(e)i=cL(e);else{for(let l=0;l<n;++l){if(r.length===0){this.layout="XY",this.stride=2;return}r=r[0]}i=r.length,e=ed(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,r){const n=this.getFlatCoordinates();if(n){const i=this.getStride();sH(n,0,n.length,i,e,r,n),this.changed()}}scale(e,r,n){r===void 0&&(r=e),n||(n=Ol(this.getExtent()));const i=this.getFlatCoordinates();if(i){const l=this.getStride();rpe(i,0,i.length,l,e,r,n,i),this.changed()}}translate(e,r){const n=this.getFlatCoordinates();if(n){const i=this.getStride();npe(n,0,n.length,i,e,r,n),this.changed()}}}function ed(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function cL(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function ope(t,e,r){const n=t.getFlatCoordinates();if(!n)return null;const i=t.getStride();return Jc(n,0,n.length,i,e,r)}function lH(t,e,r,n){let i=0;const l=t[r-n],c=t[r-n+1];let s=0,p=0;for(;e<r;e+=n){const g=t[e]-l,_=t[e+1]-c;i+=p*g-s*_,s=g,p=_}return i/2}function cH(t,e,r,n){let i=0;for(let l=0,c=r.length;l<c;++l){const s=r[l];i+=lH(t,e,s,n),e=s}return i}function spe(t,e,r,n){let i=0;for(let l=0,c=r.length;l<c;++l){const s=r[l];i+=cH(t,e,s,n),e=s[s.length-1]}return i}function uL(t,e,r,n,i,l,c){const s=t[e],p=t[e+1],g=t[r]-s,_=t[r+1]-p;let x;if(g===0&&_===0)x=e;else{const P=((i-s)*g+(l-p)*_)/(g*g+_*_);if(P>1)x=r;else if(P>0){for(let A=0;A<n;++A)c[A]=rs(t[e+A],t[r+A],P);c.length=n;return}else x=e}for(let P=0;P<n;++P)c[P]=t[x+P];c.length=n}function sM(t,e,r,n,i){let l=t[e],c=t[e+1];for(e+=n;e<r;e+=n){const s=t[e],p=t[e+1],g=gh(l,c,s,p);g>i&&(i=g),l=s,c=p}return i}function aM(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){const s=r[l];i=sM(t,e,s,n,i),e=s}return i}function ape(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){const s=r[l];i=aM(t,e,s,n,i),e=s[s.length-1]}return i}function lM(t,e,r,n,i,l,c,s,p,g,_){if(e==r)return g;let x,P;if(i===0){if(P=gh(c,s,t[e],t[e+1]),P<g){for(x=0;x<n;++x)p[x]=t[e+x];return p.length=n,P}return g}_=_||[NaN,NaN];let A=e+n;for(;A<r;)if(uL(t,A-n,A,n,c,s,_),P=gh(c,s,_[0],_[1]),P<g){for(g=P,x=0;x<n;++x)p[x]=_[x];p.length=n,A+=n}else A+=n*Math.max((Math.sqrt(P)-Math.sqrt(g))/i|0,1);if(l&&(uL(t,r-n,e,n,c,s,_),P=gh(c,s,_[0],_[1]),P<g)){for(g=P,x=0;x<n;++x)p[x]=_[x];p.length=n}return g}function cM(t,e,r,n,i,l,c,s,p,g,_){_=_||[NaN,NaN];for(let x=0,P=r.length;x<P;++x){const A=r[x];g=lM(t,e,A,n,i,l,c,s,p,g,_),e=A}return g}function lpe(t,e,r,n,i,l,c,s,p,g,_){_=_||[NaN,NaN];for(let x=0,P=r.length;x<P;++x){const A=r[x];g=cM(t,e,A,n,i,l,c,s,p,g,_),e=A[A.length-1]}return g}function cpe(t,e,r,n){for(let i=0,l=r.length;i<l;++i)t[e++]=r[i];return e}function Ax(t,e,r,n){for(let i=0,l=r.length;i<l;++i){const c=r[i];for(let s=0;s<n;++s)t[e++]=c[s]}return e}function s_(t,e,r,n,i){i=i||[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=Ax(t,e,r[c],n);i[l++]=p,e=p}return i.length=l,i}function uH(t,e,r,n,i){i=i||[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=s_(t,e,r[c],n,i[l]);p.length===0&&(p[0]=e),i[l++]=p,e=p[p.length-1]}return i.length=l,i}function Lc(t,e,r,n,i){i=i!==void 0?i:[];let l=0;for(let c=e;c<r;c+=n)i[l++]=t.slice(c,c+n);return i.length=l,i}function my(t,e,r,n,i){i=i!==void 0?i:[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=r[c];i[l++]=Lc(t,e,p,n,i[l]),e=p}return i.length=l,i}function J2(t,e,r,n,i){i=i!==void 0?i:[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=r[c];i[l++]=p.length===1&&p[0]===e?[]:my(t,e,p,n,i[l]),e=p[p.length-1]}return i.length=l,i}function Rx(t,e,r,n,i,l,c){const s=(r-e)/n;if(s<3){for(;e<r;e+=n)l[c++]=t[e],l[c++]=t[e+1];return c}const p=new Array(s);p[0]=1,p[s-1]=1;const g=[e,r-n];let _=0;for(;g.length>0;){const x=g.pop(),P=g.pop();let A=0;const M=t[P],N=t[P+1],z=t[x],j=t[x+1];for(let $=P+n;$<x;$+=n){const J=t[$],X=t[$+1],re=rde(J,X,M,N,z,j);re>A&&(_=$,A=re)}A>i&&(p[(_-e)/n]=1,P+n<_&&g.push(P,_),_+n<x&&g.push(_,x))}for(let x=0;x<s;++x)p[x]&&(l[c++]=t[e+x*n],l[c++]=t[e+x*n+1]);return c}function hH(t,e,r,n,i,l,c,s){for(let p=0,g=r.length;p<g;++p){const _=r[p];c=Rx(t,e,_,n,i,l,c),s.push(c),e=_}return c}function Ku(t,e){return e*Math.round(t/e)}function upe(t,e,r,n,i,l,c){if(e==r)return c;let s=Ku(t[e],i),p=Ku(t[e+1],i);e+=n,l[c++]=s,l[c++]=p;let g,_;do if(g=Ku(t[e],i),_=Ku(t[e+1],i),e+=n,e==r)return l[c++]=g,l[c++]=_,c;while(g==s&&_==p);for(;e<r;){const x=Ku(t[e],i),P=Ku(t[e+1],i);if(e+=n,x==g&&P==_)continue;const A=g-s,M=_-p,N=x-s,z=P-p;if(A*z==M*N&&(A<0&&N<A||A==N||A>0&&N>A)&&(M<0&&z<M||M==z||M>0&&z>M)){g=x,_=P;continue}l[c++]=g,l[c++]=_,s=g,p=_,g=x,_=P}return l[c++]=g,l[c++]=_,c}function uM(t,e,r,n,i,l,c,s){for(let p=0,g=r.length;p<g;++p){const _=r[p];c=upe(t,e,_,n,i,l,c),s.push(c),e=_}return c}function hpe(t,e,r,n,i,l,c,s){for(let p=0,g=r.length;p<g;++p){const _=r[p],x=[];c=uM(t,e,_,n,i,l,c,x),s.push(x),e=_[_.length-1]}return c}class gy extends Qh{constructor(e,r){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,r!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(r,e):this.setCoordinates(e,r)}clone(){return new gy(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,r,n,i){return i<Yh(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,r,n,i))}getArea(){return lH(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Lc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const r=[];return r.length=Rx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,0),new gy(r,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ax(this.flatCoordinates,0,e,this.stride),this.changed()}}class eu extends Qh{constructor(e,r){super(),this.setCoordinates(e,r)}clone(){const e=new eu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,r,n,i){const l=this.flatCoordinates,c=gh(e,r,l[0],l[1]);if(c<i){const s=this.stride;for(let p=0;p<s;++p)n[p]=l[p];return n.length=s,c}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return $G(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return ZI(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cpe(this.flatCoordinates,0,e,this.stride),this.changed()}}function dpe(t,e,r,n,i){return!GG(i,function(c){return!sh(t,e,r,n,c[0],c[1])})}function sh(t,e,r,n,i,l){let c=0,s=t[r-n],p=t[r-n+1];for(;e<r;e+=n){const g=t[e],_=t[e+1];p<=l?_>l&&(g-s)*(l-p)-(i-s)*(_-p)>0&&c++:_<=l&&(g-s)*(l-p)-(i-s)*(_-p)<0&&c--,s=g,p=_}return c!==0}function hM(t,e,r,n,i,l){if(r.length===0||!sh(t,e,r[0],n,i,l))return!1;for(let c=1,s=r.length;c<s;++c)if(sh(t,r[c-1],r[c],n,i,l))return!1;return!0}function ppe(t,e,r,n,i,l){if(r.length===0)return!1;for(let c=0,s=r.length;c<s;++c){const p=r[c];if(hM(t,e,p,n,i,l))return!0;e=p[p.length-1]}return!1}function dM(t,e,r,n,i,l,c){let s,p,g,_,x,P,A;const M=i[l+1],N=[];for(let $=0,J=r.length;$<J;++$){const X=r[$];for(_=t[X-n],P=t[X-n+1],s=e;s<X;s+=n)x=t[s],A=t[s+1],(M<=P&&A<=M||P<=M&&M<=A)&&(g=(M-P)/(A-P)*(x-_)+_,N.push(g)),_=x,P=A}let z=NaN,j=-1/0;for(N.sort(Ia),_=N[0],s=1,p=N.length;s<p;++s){x=N[s];const $=Math.abs(x-_);$>j&&(g=(_+x)/2,hM(t,e,r,n,g,M)&&(z=g,j=$)),_=x}return isNaN(z)&&(z=i[l]),c?(c.push(z,M,j),c):[z,M,j]}function dH(t,e,r,n,i){let l=[];for(let c=0,s=r.length;c<s;++c){const p=r[c];l=dM(t,e,p,n,i,2*c,l),e=p[p.length-1]}return l}function pH(t,e,r,n,i){let l;for(e+=n;e<r;e+=n)if(l=i(t.slice(e-n,e),t.slice(e,e+n)),l)return l;return!1}function Ix(t,e,r,n,i,l){return l=l??UG(Os(),t,e,r,n),ui(i,l)?l[0]>=i[0]&&l[2]<=i[2]||l[1]>=i[1]&&l[3]<=i[3]?!0:pH(t,e,r,n,function(c,s){return cde(i,c,s)}):!1}function fpe(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){if(Ix(t,e,r[l],n,i))return!0;e=r[l]}return!1}function fH(t,e,r,n,i){return!!(Ix(t,e,r,n,i)||sh(t,e,r,n,i[0],i[1])||sh(t,e,r,n,i[0],i[3])||sh(t,e,r,n,i[2],i[1])||sh(t,e,r,n,i[2],i[3]))}function mH(t,e,r,n,i){if(!fH(t,e,r[0],n,i))return!1;if(r.length===1)return!0;for(let l=1,c=r.length;l<c;++l)if(dpe(t,r[l-1],r[l],n,i)&&!Ix(t,r[l-1],r[l],n,i))return!1;return!0}function mpe(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){const s=r[l];if(mH(t,e,s,n,i))return!0;e=s[s.length-1]}return!1}function gpe(t,e,r,n){for(;e<r-n;){for(let i=0;i<n;++i){const l=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=l}e+=n,r-=n}}function pM(t,e,r,n){let i=0,l=t[r-n],c=t[r-n+1];for(;e<r;e+=n){const s=t[e],p=t[e+1];i+=(s-l)*(p+c),l=s,c=p}return i===0?void 0:i>0}function fM(t,e,r,n,i){i=i!==void 0?i:!1;for(let l=0,c=r.length;l<c;++l){const s=r[l],p=pM(t,e,s,n);if(l===0){if(i&&p||!i&&!p)return!1}else if(i&&!p||!i&&p)return!1;e=s}return!0}function gH(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l){const s=r[l];if(!fM(t,e,s,n,i))return!1;s.length&&(e=s[s.length-1])}return!0}function wv(t,e,r,n,i){i=i!==void 0?i:!1;for(let l=0,c=r.length;l<c;++l){const s=r[l],p=pM(t,e,s,n);(l===0?i&&p||!i&&!p:i&&!p||!i&&p)&&gpe(t,e,s,n),e=s}return e}function W2(t,e,r,n,i){for(let l=0,c=r.length;l<c;++l)e=wv(t,e,r[l],n,i);return e}function yH(t,e){const r=[];let n=0,i=0,l;for(let c=0,s=e.length;c<s;++c){const p=e[c],g=pM(t,n,p,2);if(l===void 0&&(l=g),g===l)r.push(e.slice(i,c+1));else{if(r.length===0)continue;r[r.length-1].push(e[i])}i=c+1,n=p}return r}class Ll extends Qh{constructor(e,r,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,r!==void 0&&n?(this.setFlatCoordinates(r,e),this.ends_=n):this.setCoordinates(e,r)}appendLinearRing(e){this.flatCoordinates?Ma(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ll(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,r,n,i){return i<Yh(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(aM(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cM(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,r,n,i))}containsXY(e,r){return hM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,r)}getArea(){return cH(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let r;return e!==void 0?(r=this.getOrientedFlatCoordinates().slice(),wv(r,0,this.ends_,this.stride,e)):r=this.flatCoordinates,my(r,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ol(this.getExtent());this.flatInteriorPoint_=dM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new eu(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new gy(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,r=this.flatCoordinates,n=this.ends_,i=[];let l=0;for(let c=0,s=n.length;c<s;++c){const p=n[c],g=new gy(r.slice(l,p),e);i.push(g),l=p}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;fM(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=wv(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const r=[],n=[];return r.length=uM(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),r,0,n),new Ll(r,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return mH(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,r){this.setLayout(r,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=s_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function hL(t){if(n_(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],r=t[1],n=t[2],i=t[3],l=[e,r,e,i,n,i,n,r,e,r];return new Ll(l,"XY",[l.length])}function mM(t,e,r,n){const i=En(e)/r[0],l=wo(e)/r[1];return n?Math.min(t,Math.max(i,l)):Math.min(t,Math.min(i,l))}function gM(t,e,r){let n=Math.min(t,e);const i=50;return n*=Math.log(1+i*Math.max(0,t/e-1))/i+1,r&&(n=Math.max(n,r),n/=Math.log(1+i*Math.max(0,r/t-1))/i+1),qn(n,r/2,e*2)}function ype(t,e,r,n){return e=e!==void 0?e:!0,function(i,l,c,s){if(i!==void 0){const p=t[0],g=t[t.length-1],_=r?mM(p,r,c,n):p;if(s)return e?gM(i,_,g):qn(i,g,_);const x=Math.min(_,i),P=Math.floor(JI(t,x,l));return t[P]>_&&P<t.length-1?t[P+1]:t[P]}}}function _pe(t,e,r,n,i,l){return n=n!==void 0?n:!0,r=r!==void 0?r:0,function(c,s,p,g){if(c!==void 0){const _=i?mM(e,i,p,l):e;if(g)return n?gM(c,_,r):qn(c,r,_);const x=1e-9,P=Math.ceil(Math.log(e/_)/Math.log(t)-x),A=-s*(.5-x)+.5,M=Math.min(_,c),N=Math.floor(Math.log(e/M)/Math.log(t)+A),z=Math.max(P,N),j=e/Math.pow(t,z);return qn(j,r,_)}}}function dL(t,e,r,n,i){return r=r!==void 0?r:!0,function(l,c,s,p){if(l!==void 0){const g=n?mM(t,n,s,i):t;return!r||!p?qn(l,e,g):gM(l,g,e)}}}function yM(t){if(t!==void 0)return 0}function pL(t){if(t!==void 0)return t}function bpe(t){const e=2*Math.PI/t;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/e+.5)*e,r}}function vpe(t){const e=Gc(5);return function(r,n){return n||r===void 0?r:Math.abs(r)<=e?0:r}}const _H=42,_M=256,KE=0;class wa extends oa{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=rM(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&nH(),e.center&&(e.center=ml(e.center,this.projection_)),e.extent&&(e.extent=kc(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const r=Object.assign({},e);for(const s in Vs)delete r[s];this.setProperties(r,!0);const n=wpe(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const i=xpe(e),l=n.constraint,c=Epe(e);this.constraints_={center:i,resolution:l,rotation:c},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let r=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const i=e||[0,0,0,0];r=r||[0,0,0,0];const l=this.getResolution(),c=l/2*(i[3]-r[3]+r[1]-i[1]),s=l/2*(i[0]-r[0]+r[2]-i[2]);this.setCenterInternal([n[0]+c,n[1]-s])}}getUpdatedOptions_(e){const r=this.getProperties();return r.resolution!==void 0?r.resolution=this.getResolution():r.zoom=this.getZoom(),r.center=this.getCenterInternal(),r.rotation=this.getRotation(),Object.assign({},r,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const r=new Array(arguments.length);for(let n=0;n<r.length;++n){let i=arguments[n];i.center&&(i=Object.assign({},i),i.center=ml(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ml(i.anchor,this.getProjection())),r[n]=i}this.animateInternal.apply(this,r)}animateInternal(e){let r=arguments.length,n;r>1&&typeof arguments[r-1]=="function"&&(n=arguments[r-1],--r);let i=0;for(;i<r&&!this.isDef();++i){const _=arguments[i];_.center&&this.setCenterInternal(_.center),_.zoom!==void 0?this.setZoom(_.zoom):_.resolution&&this.setResolution(_.resolution),_.rotation!==void 0&&this.setRotation(_.rotation)}if(i===r){n&&L0(n,!0);return}let l=Date.now(),c=this.targetCenter_.slice(),s=this.targetResolution_,p=this.targetRotation_;const g=[];for(;i<r;++i){const _=arguments[i],x={start:l,complete:!1,anchor:_.anchor,duration:_.duration!==void 0?_.duration:1e3,easing:_.easing||mde,callback:n};if(_.center&&(x.sourceCenter=c,x.targetCenter=_.center.slice(),c=x.targetCenter),_.zoom!==void 0?(x.sourceResolution=s,x.targetResolution=this.getResolutionForZoom(_.zoom),s=x.targetResolution):_.resolution&&(x.sourceResolution=s,x.targetResolution=_.resolution,s=x.targetResolution),_.rotation!==void 0){x.sourceRotation=p;const P=yh(_.rotation-p+Math.PI,2*Math.PI)-Math.PI;x.targetRotation=p+P,p=x.targetRotation}Tpe(x)?x.complete=!0:l+=x.duration,g.push(x)}this.animations_.push(g),this.setHint(ri.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ri.ANIMATING]>0}getInteracting(){return this.hints_[ri.INTERACTING]>0}cancelAnimations(){this.setHint(ri.ANIMATING,-this.hints_[ri.ANIMATING]);let e;for(let r=0,n=this.animations_.length;r<n;++r){const i=this.animations_[r];if(i[0].callback&&L0(i[0].callback,!1),!e)for(let l=0,c=i.length;l<c;++l){const s=i[l];if(!s.complete){e=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let r=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let l=!0;for(let c=0,s=i.length;c<s;++c){const p=i[c];if(p.complete)continue;const g=e-p.start;let _=p.duration>0?g/p.duration:1;_>=1?(p.complete=!0,_=1):l=!1;const x=p.easing(_);if(p.sourceCenter){const P=p.sourceCenter[0],A=p.sourceCenter[1],M=p.targetCenter[0],N=p.targetCenter[1];this.nextCenter_=p.targetCenter;const z=P+x*(M-P),j=A+x*(N-A);this.targetCenter_=[z,j]}if(p.sourceResolution&&p.targetResolution){const P=x===1?p.targetResolution:p.sourceResolution+x*(p.targetResolution-p.sourceResolution);if(p.anchor){const A=this.getViewportSize_(this.getRotation()),M=this.constraints_.resolution(P,0,A,!0);this.targetCenter_=this.calculateCenterZoom(M,p.anchor)}this.nextResolution_=p.targetResolution,this.targetResolution_=P,this.applyTargetState_(!0)}if(p.sourceRotation!==void 0&&p.targetRotation!==void 0){const P=x===1?yh(p.targetRotation+Math.PI,2*Math.PI)-Math.PI:p.sourceRotation+x*(p.targetRotation-p.sourceRotation);if(p.anchor){const A=this.constraints_.rotation(P,!0);this.targetCenter_=this.calculateCenterRotate(A,p.anchor)}this.nextRotation_=p.targetRotation,this.targetRotation_=P}if(this.applyTargetState_(!0),r=!0,!p.complete)break}if(l){this.animations_[n]=null,this.setHint(ri.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const c=i[0].callback;c&&L0(c,!0)}}this.animations_=this.animations_.filter(Boolean),r&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,r){let n;const i=this.getCenterInternal();return i!==void 0&&(n=[i[0]-r[0],i[1]-r[1]],YI(n,e-this.getRotation()),ude(n,r)),n}calculateCenterZoom(e,r){let n;const i=this.getCenterInternal(),l=this.getResolution();if(i!==void 0&&l!==void 0){const c=r[0]-e*(r[0]-i[0])/l,s=r[1]-e*(r[1]-i[1])/l;n=[c,s]}return n}getViewportSize_(e){const r=this.viewportSize_;if(e){const n=r[0],i=r[1];return[Math.abs(n*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(i*Math.cos(e))]}return r}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&H2(e,this.getProjection())}getCenterInternal(){return this.get(Vs.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const r=this.calculateExtentInternal(e);return nM(r,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const r=this.getCenterInternal();cn(r,"The view center is not defined");const n=this.getResolution();cn(n!==void 0,"The view resolution is not defined");const i=this.getRotation();return cn(i!==void 0,"The view rotation is not defined"),$2(r,n,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Vs.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,r){return this.getResolutionForExtentInternal(kc(e,this.getProjection()),r)}getResolutionForExtentInternal(e,r){r=r||this.getViewportSizeMinusPadding_();const n=En(e)/r[0],i=wo(e)/r[1];return Math.max(n,i)}getResolutionForValueFunction(e){e=e||2;const r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(l){return r/Math.pow(e,l*i)}}getRotation(){return this.get(Vs.ROTATION)}getValueForResolutionFunction(e){const r=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,l=Math.log(n/i)/r;return function(c){return Math.log(n/c)/r/l}}getViewportSizeMinusPadding_(e){let r=this.getViewportSize_(e);const n=this.padding_;return n&&(r=[r[0]-n[1]-n[3],r[1]-n[0]-n[2]]),r}getState(){const e=this.getProjection(),r=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const l=this.padding_;if(l){const c=this.getViewportSizeMinusPadding_();i=YE(i,this.getViewportSize_(),[c[0]/2+l[3],c[1]/2+l[0]],r,n)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:r,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const r=this.getResolution();return r!==void 0&&(e=this.getZoomForResolution(r)),e}getZoomForResolution(e){let r=this.minZoom_||0,n,i;if(this.resolutions_){const l=JI(this.resolutions_,e,1);r=l,n=this.resolutions_[l],l==this.resolutions_.length-1?i=2:i=n/this.resolutions_[l+1]}else n=this.maxResolution_,i=this.zoomFactor_;return r+Math.log(n/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=qn(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(n,qn(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,r){let n;if(cn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){cn(!n_(e),"Cannot fit empty extent provided as `geometry`");const i=kc(e,this.getProjection());n=hL(i)}else if(e.getType()==="Circle"){const i=kc(e.getExtent(),this.getProjection());n=hL(i),n.rotate(this.getRotation(),Ol(i))}else n=e;this.fitInternal(n,r)}rotatedExtentForGeometry(e){const r=this.getRotation(),n=Math.cos(r),i=Math.sin(-r),l=e.getFlatCoordinates(),c=e.getStride();let s=1/0,p=1/0,g=-1/0,_=-1/0;for(let x=0,P=l.length;x<P;x+=c){const A=l[x]*n-l[x+1]*i,M=l[x]*i+l[x+1]*n;s=Math.min(s,A),p=Math.min(p,M),g=Math.max(g,A),_=Math.max(_,M)}return[s,p,g,_]}fitInternal(e,r){r=r||{};let n=r.size;n||(n=this.getViewportSizeMinusPadding_());const i=r.padding!==void 0?r.padding:[0,0,0,0],l=r.nearest!==void 0?r.nearest:!1;let c;r.minResolution!==void 0?c=r.minResolution:r.maxZoom!==void 0?c=this.getResolutionForZoom(r.maxZoom):c=0;const s=this.rotatedExtentForGeometry(e);let p=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);p=isNaN(p)?c:Math.max(p,c),p=this.getConstrainedResolution(p,l?0:1);const g=this.getRotation(),_=Math.sin(g),x=Math.cos(g),P=Ol(s);P[0]+=(i[1]-i[3])/2*p,P[1]+=(i[0]-i[2])/2*p;const A=P[0]*x-P[1]*_,M=P[1]*x+P[0]*_,N=this.getConstrainedCenter([A,M],p),z=r.callback?r.callback:dy;r.duration!==void 0?this.animateInternal({resolution:p,center:N,duration:r.duration,easing:r.easing},z):(this.targetResolution_=p,this.targetCenter_=N,this.applyTargetState_(!1,!0),L0(z,!0))}centerOn(e,r,n){this.centerOnInternal(ml(e,this.getProjection()),r,n)}centerOnInternal(e,r,n){this.setCenterInternal(YE(e,r,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,r,n,i){let l;const c=this.padding_;if(c&&e){const s=this.getViewportSizeMinusPadding_(-n),p=YE(e,i,[s[0]/2+c[3],s[1]/2+c[0]],r,n);l=[e[0]-p[0],e[1]-p[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const r=H2(this.targetCenter_,this.getProjection());this.setCenter([r[0]+e[0],r[1]+e[1]])}adjustCenterInternal(e){const r=this.targetCenter_;this.setCenterInternal([r[0]+e[0],r[1]+e[1]])}adjustResolution(e,r){r=r&&ml(r,this.getProjection()),this.adjustResolutionInternal(e,r)}adjustResolutionInternal(e,r){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,i,n);r&&(this.targetCenter_=this.calculateCenterZoom(l,r)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,r){this.adjustResolution(Math.pow(this.zoomFactor_,-e),r)}adjustRotation(e,r){r&&(r=ml(r,this.getProjection())),this.adjustRotationInternal(e,r)}adjustRotationInternal(e,r){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,n);r&&(this.targetCenter_=this.calculateCenterRotate(i,r)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ml(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,r){return this.hints_[e]+=r,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,r){const n=this.getAnimating()||this.getInteracting()||r,i=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(i),c=this.constraints_.resolution(this.targetResolution_,0,l,n),s=this.constraints_.center(this.targetCenter_,c,l,n,this.calculateCenterShift(this.targetCenter_,c,i,l));this.get(Vs.ROTATION)!==i&&this.set(Vs.ROTATION,i),this.get(Vs.RESOLUTION)!==c&&(this.set(Vs.RESOLUTION,c),this.set("zoom",this.getZoom(),!0)),(!s||!this.get(Vs.CENTER)||!yv(this.get(Vs.CENTER),s))&&this.set(Vs.CENTER,s),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,r,n){e=e!==void 0?e:200;const i=r||0,l=this.constraints_.rotation(this.targetRotation_),c=this.getViewportSize_(l),s=this.constraints_.resolution(this.targetResolution_,i,c),p=this.constraints_.center(this.targetCenter_,s,c,!1,this.calculateCenterShift(this.targetCenter_,s,l,c));if(e===0&&!this.cancelAnchor_){this.targetResolution_=s,this.targetRotation_=l,this.targetCenter_=p,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==s||this.getRotation()!==l||!this.getCenterInternal()||!yv(this.getCenterInternal(),p))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:p,resolution:s,duration:e,easing:Xh,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ri.INTERACTING,1)}endInteraction(e,r,n){n=n&&ml(n,this.getProjection()),this.endInteractionInternal(e,r,n)}endInteractionInternal(e,r,n){this.getInteracting()&&(this.setHint(ri.INTERACTING,-1),this.resolveConstraints(e,r,n))}getConstrainedCenter(e,r){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,r||this.getResolution(),n)}getConstrainedZoom(e,r){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,r))}getConstrainedResolution(e,r){r=r||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,r,n)}}function L0(t,e){setTimeout(function(){t(e)},0)}function xpe(t){if(t.extent!==void 0){const r=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return Kk(t.extent,t.constrainOnlyCenter,r)}const e=rM(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const r=e.getExtent().slice();return r[0]=-1/0,r[2]=1/0,Kk(r,!1,!1)}return ide}function wpe(t){let e,r,n,c=t.minZoom!==void 0?t.minZoom:KE,s=t.maxZoom!==void 0?t.maxZoom:28;const p=t.zoomFactor!==void 0?t.zoomFactor:2,g=t.multiWorld!==void 0?t.multiWorld:!1,_=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,x=t.showFullExtent!==void 0?t.showFullExtent:!1,P=rM(t.projection,"EPSG:3857"),A=P.getExtent();let M=t.constrainOnlyCenter,N=t.extent;if(!g&&!N&&P.isGlobal()&&(M=!1,N=A),t.resolutions!==void 0){const z=t.resolutions;r=z[c],n=z[s]!==void 0?z[s]:z[z.length-1],t.constrainResolution?e=ype(z,_,!M&&N,x):e=dL(r,n,_,!M&&N,x)}else{const j=(A?Math.max(En(A),wo(A)):360*zh.degrees/P.getMetersPerUnit())/_M/Math.pow(2,KE),$=j/Math.pow(2,28-KE);r=t.maxResolution,r!==void 0?c=0:r=j/Math.pow(p,c),n=t.minResolution,n===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?n=r/Math.pow(p,s):n=j/Math.pow(p,s):n=$),s=c+Math.floor(Math.log(r/n)/Math.log(p)),n=r/Math.pow(p,s-c),t.constrainResolution?e=_pe(p,r,n,_,!M&&N,x):e=dL(r,n,_,!M&&N,x)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:c,zoomFactor:p}}function Epe(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const r=t.constrainRotation;return r===void 0||r===!0?vpe():r===!1?pL:typeof r=="number"?bpe(r):pL}return yM}function Tpe(t){return!(t.sourceCenter&&t.targetCenter&&!yv(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function YE(t,e,r,n,i){const l=Math.cos(-i);let c=Math.sin(-i),s=t[0]*l-t[1]*c,p=t[1]*l+t[0]*c;s+=(e[0]/2-r[0])*n,p+=(r[1]-e[1]/2)*n,c=-c;const g=s*l-p*c,_=p*l+s*c;return[g,_]}const D0="ol-hidden",Spe="ol-selectable",jh="ol-unselectable",Mx="ol-control",fL="ol-collapsed",Cpe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),mL=["style","variant","weight","size","lineHeight","family"],Z2={normal:400,bold:700},K2=function(t){const e=t.match(Cpe);if(!e)return null;const r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,i=mL.length;n<i;++n){const l=e[n+1];l!==void 0&&(r[mL[n]]=typeof l=="string"?l.trim():l)}return isNaN(Number(r.weight))&&r.weight in Z2&&(r.weight=Z2[r.weight]),r.families=r.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),r};function Ei(t,e,r,n){let i;return r&&r.length?i=r.shift():WI?i=new OffscreenCanvas(t||300,e||300):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",n)}let XE;function Ev(){return XE||(XE=Ei(1,1)),XE}function a_(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Ppe(t){let e=t.offsetWidth;const r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),e}function Ape(t){let e=t.offsetHeight;const r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10),e}function gL(t,e){const r=e.parentNode;r&&r.replaceChild(t,e)}function bH(t){for(;t.lastChild;)t.lastChild.remove()}function Rpe(t,e){const r=t.childNodes;for(let n=0;;++n){const i=r[n],l=e[n];if(!i&&!l)break;if(i!==l){if(!i){t.appendChild(l);continue}if(!l){t.removeChild(i),--n;continue}t.insertBefore(l,i)}}}class Lf extends oa{constructor(e){super();const r=e.element;r&&!e.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),this.element=r||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let r=0,n=this.listenerKeys.length;r<n;++r)Rn(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==dy&&this.listenerKeys.push(en(e,gl.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Ipe extends Lf{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const r=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:r+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"",c=e.collapseClassName!==void 0?e.collapseClassName:r+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=c):this.collapseLabel_=l;const s=e.label!==void 0?e.label:"i";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s;const p=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(p),this.toggleButton_.addEventListener(Rr.CLICK,this.handleClick_.bind(this),!1);const g=r+" "+jh+" "+Mx+(this.collapsed_&&this.collapsible_?" "+fL:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=g,_.appendChild(this.toggleButton_),_.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const r=this.getMap().getAllLayers(),n=new Set(r.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>n.add(i)):n.add(this.attributions_)),!this.overrideCollapsible_){const i=!r.some(l=>l.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const r=await Promise.all(this.collectSourceAttributions_(e).map(i=>py(()=>i))),n=r.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!su(r,this.renderedAttributions_)){bH(this.ulElement_);for(let i=0,l=r.length;i<l;++i){const c=document.createElement("li");c.innerHTML=r[i],this.ulElement_.appendChild(c)}this.renderedAttributions_=r}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fL),this.collapsed_?gL(this.collapseLabel_,this.label_):gL(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class vH extends Lf{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const r=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const l=e.tipLabel?e.tipLabel:"Reset rotation",c=document.createElement("button");c.className=r+"-reset",c.setAttribute("type","button"),c.title=l,c.appendChild(this.label_),c.addEventListener(Rr.CLICK,this.handleClick_.bind(this),!1);const s=r+" "+jh+" "+Mx,p=this.element;p.className=s,p.appendChild(c),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(D0)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const r=this.getMap().getView();if(!r)return;const n=r.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?r.animate({rotation:0,duration:this.duration_,easing:Xh}):r.setRotation(0))}render(e){const r=e.frameState;if(!r)return;const n=r.viewState.rotation;if(n!=this.rotation_){const i="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(D0);!l&&n===0?this.element.classList.add(D0):l&&n!==0&&this.element.classList.remove(D0)}this.label_.style.transform=i}this.rotation_=n}}class Mpe extends Lf{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const r=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:r+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:r+"-out",c=e.zoomInLabel!==void 0?e.zoomInLabel:"+",s=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",p=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",_=document.createElement("button");_.className=i,_.setAttribute("type","button"),_.title=p,_.appendChild(typeof c=="string"?document.createTextNode(c):c),_.addEventListener(Rr.CLICK,this.handleClick_.bind(this,n),!1);const x=document.createElement("button");x.className=l,x.setAttribute("type","button"),x.title=g,x.appendChild(typeof s=="string"?document.createTextNode(s):s),x.addEventListener(Rr.CLICK,this.handleClick_.bind(this,-n),!1);const P=r+" "+jh+" "+Mx,A=this.element;A.className=P,A.appendChild(_),A.appendChild(x),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,r){r.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const i=n.getZoom();if(i!==void 0){const l=n.getConstrainedZoom(i+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:Xh})):n.setZoom(l)}}}function xH(t){t=t||{};const e=new Xs;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new Mpe(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new vH(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new Ipe(t.attributionOptions)),e}class wH{constructor(e,r,n){this.decay_=e,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,r){this.points_.push(e,r,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<e)return!1;let n=r-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const i=this.points_[r+2]-this.points_[n+2];if(i<1e3/60)return!1;const l=this.points_[r]-this.points_[n],c=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(c,l),this.initialVelocity_=Math.sqrt(l*l+c*c)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const yL={ACTIVE:"active"};class l_ extends oa{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(yL.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(yL.ACTIVE,e)}setMap(e){this.map_=e}}function Ope(t,e,r){const n=t.getCenterInternal();if(n){const i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:r!==void 0?r:250,easing:gde,center:t.getConstrainedCenter(i)})}}function bM(t,e,r,n){const i=t.getZoom();if(i===void 0)return;const l=t.getConstrainedZoom(i+e),c=t.getResolutionForZoom(l);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:c,anchor:r,duration:n!==void 0?n:250,easing:Xh})}class kpe extends l_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let r=!1;if(e.type==ti.DBLCLICK){const n=e.originalEvent,i=e.map,l=e.coordinate,c=n.shiftKey?-this.delta_:this.delta_,s=i.getView();bM(s,c,l,this.duration_),n.preventDefault(),r=!0}return!r}}function Y2(t){const e=arguments;return function(r){let n=!0;for(let i=0,l=e.length;i<l&&(n=n&&e[i](r),!!n);++i);return n}}const Lpe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Dpe=function(t){const e=t.map.getTargetElement(),r=e.getRootNode(),n=t.map.getOwnerDocument().activeElement;return r instanceof ShadowRoot?r.host.contains(n):e.contains(n)},EH=function(t){const e=t.map.getTargetElement(),r=e.getRootNode();return(r instanceof ShadowRoot?r.host:e).hasAttribute("tabindex")?Dpe(t):!0},Npe=hy,TH=function(t){const e=t.originalEvent;return"pointerId"in e&&e.button==0&&!(Khe&&zG&&e.ctrlKey)},SH=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Fpe=function(t){const e=t.originalEvent;return zG?e.metaKey:e.ctrlKey},zpe=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},CH=function(t){const e=t.originalEvent,r=e.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!e.target.isContentEditable},QE=function(t){const e=t.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},jpe=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class td extends l_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let r=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ti.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ti.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==ti.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,r=this.stopDown(n)}else e.type==ti.POINTERMOVE&&this.handleMoveEvent(e);return!r}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function vM(t){const e=t.length;let r=0,n=0;for(let i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return{clientX:r/e,clientY:n/e}}class yy extends td{constructor(e){super({stopDown:bx}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const r=e.condition?e.condition:Y2(SH,jpe);this.condition_=e.onFocusOnly?Y2(EH,r):r,this.noKinetic_=!1}handleDragEvent(e){const r=e.map;this.panning_||(this.panning_=!0,r.getView().beginInteraction());const n=this.targetPointers,i=r.getEventPixel(vM(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const l=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=e.map.getView();hde(l,s.getResolution()),YI(l,s.getRotation()),s.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const r=e.map,n=r.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),c=n.getCenterInternal(),s=r.getPixelFromCoordinateInternal(c),p=r.getCoordinateFromPixelInternal([s[0]-i*Math.cos(l),s[1]-i*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(p),duration:500,easing:Xh})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Bpe extends td{constructor(e){e=e||{},super({stopDown:bx}),this.condition_=e.condition?e.condition:Lpe,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!QE(e))return;const r=e.map,n=r.getView();if(n.getConstraints().rotation===yM)return;const i=r.getSize(),l=e.pixel,c=Math.atan2(i[1]/2-l[1],l[0]-i[0]/2);if(this.lastAngle_!==void 0){const s=c-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=c}handleUpEvent(e){return QE(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return QE(e)&&TH(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class qpe extends _x{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,r=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(e[0],r[0])+n,i.top=Math.min(e[1],r[1])+n,i.width=Math.abs(r[0]-e[0])+n,i.height=Math.abs(r[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const r=this.element_.style;r.left="inherit",r.top="inherit",r.width="inherit",r.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,r){this.startPixel_=e,this.endPixel_=r,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,r=this.endPixel_,i=[e,[e[0],r[1]],r,[r[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ll([i])}getGeometry(){return this.geometry_}}const ip={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Xm extends jl{constructor(e,r,n){super(e),this.coordinate=r,this.mapBrowserEvent=n}}class $pe extends td{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new qpe(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??TH,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,r,n){const i=n[0]-r[0],l=n[1]-r[1];return i*i+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Xm(ip.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const r=this.boxEndCondition_(e,this.startPixel_,e.pixel);return r&&this.onBoxEnd(e),this.dispatchEvent(new Xm(r?ip.BOXEND:ip.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Xm(ip.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Xm(ip.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Xm(ip.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Vpe extends $pe{constructor(e){e=e||{};const r=e.condition?e.condition:zpe;super({condition:r,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let i=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(i),c=n.getResolutionForExtentInternal(l),s=n.getResolution()/c;i=i.clone(),i.scale(s*s)}n.fitInternal(i,{duration:this.duration_,easing:Xh})}}const Uu={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Upe extends l_{constructor(e){super(),e=e||{},this.defaultCondition_=function(r){return SH(r)&&CH(r)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let r=!1;if(e.type==Rr.KEYDOWN){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==Uu.DOWN||i==Uu.LEFT||i==Uu.RIGHT||i==Uu.UP)){const c=e.map.getView(),s=c.getResolution()*this.pixelDelta_;let p=0,g=0;i==Uu.DOWN?g=-s:i==Uu.LEFT?p=-s:i==Uu.RIGHT?p=s:g=s;const _=[p,g];YI(_,c.getRotation()),Ope(c,_,this.duration_),n.preventDefault(),r=!0}}return!r}}class Gpe extends l_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(r){return!Fpe(r)&&CH(r)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let r=!1;if(e.type==Rr.KEYDOWN||e.type==Rr.KEYPRESS){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==="+"||i==="-")){const l=e.map,c=i==="+"?this.delta_:-this.delta_,s=l.getView();bM(s,c,void 0,this.duration_),n.preventDefault(),r=!0}}return!r}}const Hpe=40,Jpe=300;class Wpe extends l_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const r=e.condition?e.condition:Npe;this.condition_=e.onFocusOnly?Y2(EH,r):r,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Rr.WHEEL)return!0;const n=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:l*=Hpe;break;case WheelEvent.DOM_DELTA_PAGE:l*=Jpe;break}if(l===0)return!1;this.lastDelta_=l;const c=Date.now();this.startTime_===void 0&&(this.startTime_=c),(!this.mode_||c-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const s=n.getView();if(this.mode_==="trackpad"&&!(s.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=c,!1;this.totalDelta_+=l;const p=Math.max(this.timeout_-(c-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),p),!1}handleWheelZoom_(e){const r=e.getView();r.getAnimating()&&r.cancelAnimations();let n=-qn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(r.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),bM(r,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Zpe extends td{constructor(e){e=e||{};const r=e;r.stopDown||(r.stopDown=bx),super(r),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let r=0;const n=this.targetPointers[0],i=this.targetPointers[1],l=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){const p=l-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=p}this.lastAngle_=l;const c=e.map,s=c.getView();s.getConstraints().rotation!==yM&&(this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(vM(this.targetPointers))),this.rotating_&&(c.render(),s.adjustRotationInternal(r,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const r=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||r.getView().beginInteraction(),!0}return!1}}class Kpe extends td{constructor(e){e=e||{};const r=e;r.stopDown||(r.stopDown=bx),super(r),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let r=1;const n=this.targetPointers[0],i=this.targetPointers[1],l=n.clientX-i.clientX,c=n.clientY-i.clientY,s=Math.sqrt(l*l+c*c);this.lastDistance_!==void 0&&(r=this.lastDistance_/s),this.lastDistance_=s;const p=e.map,g=p.getView();r!=1&&(this.lastScaleDelta_=r),this.anchor_=p.getCoordinateFromPixelInternal(p.getEventPixel(vM(this.targetPointers))),p.render(),g.adjustResolutionInternal(r,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const r=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||r.getView().beginInteraction(),!0}return!1}}function PH(t){t=t||{};const e=new Xs,r=new wH(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new Bpe),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new kpe({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new yy({onFocusOnly:t.onFocusOnly,kinetic:r})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new Zpe),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new Kpe({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new Upe),e.push(new Gpe({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new Wpe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new Vpe({duration:t.zoomDuration})),e}const wn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class AH extends oa{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const r=Object.assign({},e);typeof e.properties=="object"&&(delete r.properties,Object.assign(r,e.properties)),r[wn.OPACITY]=e.opacity!==void 0?e.opacity:1,cn(typeof r[wn.OPACITY]=="number","Layer opacity must be a number"),r[wn.VISIBLE]=e.visible!==void 0?e.visible:!0,r[wn.Z_INDEX]=e.zIndex,r[wn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,r[wn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,r[wn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,r[wn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=r.className!==void 0?r.className:"ol-layer",delete r.className,this.setProperties(r),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const r=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return r.opacity=qn(Math.round(this.getOpacity()*100)/100,0,1),r.visible=this.getVisible(),r.extent=this.getExtent(),r.zIndex=n===void 0&&!r.managed?1/0:n,r.maxResolution=this.getMaxResolution(),r.minResolution=Math.max(this.getMinResolution(),0),r.minZoom=this.getMinZoom(),r.maxZoom=this.getMaxZoom(),this.state_=r,r}getLayersArray(e){return Sr()}getLayerStatesArray(e){return Sr()}getExtent(){return this.get(wn.EXTENT)}getMaxResolution(){return this.get(wn.MAX_RESOLUTION)}getMinResolution(){return this.get(wn.MIN_RESOLUTION)}getMinZoom(){return this.get(wn.MIN_ZOOM)}getMaxZoom(){return this.get(wn.MAX_ZOOM)}getOpacity(){return this.get(wn.OPACITY)}getSourceState(){return Sr()}getVisible(){return this.get(wn.VISIBLE)}getZIndex(){return this.get(wn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(wn.EXTENT,e)}setMaxResolution(e){this.set(wn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(wn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(wn.MAX_ZOOM,e)}setMinZoom(e){this.set(wn.MIN_ZOOM,e)}setOpacity(e){cn(typeof e=="number","Layer opacity must be a number"),this.set(wn.OPACITY,e)}setVisible(e){this.set(wn.VISIBLE,e)}setZIndex(e){this.set(wn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Pc extends jl{constructor(e,r){super(e),this.layer=r}}const eT={LAYERS:"layers"};class Df extends AH{constructor(e){e=e||{};const r=Object.assign({},e);delete r.layers;let n=e.layers;super(r),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(eT.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Xs(n.slice(),{unique:!0}):cn(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Xs(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Rn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(en(e,Po.ADD,this.handleLayersAdd_,this),en(e,Po.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Rn);t_(this.listenerKeys_);const r=e.getArray();for(let n=0,i=r.length;n<i;n++){const l=r[n];this.registerLayerListeners_(l),this.dispatchEvent(new Pc("addlayer",l))}this.changed()}registerLayerListeners_(e){const r=[en(e,cf.PROPERTYCHANGE,this.handleLayerChange_,this),en(e,Rr.CHANGE,this.handleLayerChange_,this)];e instanceof Df&&r.push(en(e,"addlayer",this.handleLayerGroupAdd_,this),en(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Nr(e)]=r}handleLayerGroupAdd_(e){this.dispatchEvent(new Pc("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Pc("removelayer",e.layer))}handleLayersAdd_(e){const r=e.element;this.registerLayerListeners_(r),this.dispatchEvent(new Pc("addlayer",r)),this.changed()}handleLayersRemove_(e){const r=e.element,n=Nr(r);this.listenerKeys_[n].forEach(Rn),delete this.listenerKeys_[n],this.dispatchEvent(new Pc("removelayer",r)),this.changed()}getLayers(){return this.get(eT.LAYERS)}setLayers(e){const r=this.getLayers();if(r){const n=r.getArray();for(let i=0,l=n.length;i<l;++i)this.dispatchEvent(new Pc("removelayer",n[i]))}this.set(eT.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(r){r.getLayersArray(e)}),e}getLayerStatesArray(e){const r=e!==void 0?e:[],n=r.length;this.getLayers().forEach(function(c){c.getLayerStatesArray(r)});const i=this.getLayerState();let l=i.zIndex;!e&&i.zIndex===void 0&&(l=0);for(let c=n,s=r.length;c<s;c++){const p=r[c];p.opacity*=i.opacity,p.visible=p.visible&&i.visible,p.maxResolution=Math.min(p.maxResolution,i.maxResolution),p.minResolution=Math.max(p.minResolution,i.minResolution),p.minZoom=Math.max(p.minZoom,i.minZoom),p.maxZoom=Math.min(p.maxZoom,i.maxZoom),i.extent!==void 0&&(p.extent!==void 0?p.extent=Cl(p.extent,i.extent):p.extent=i.extent),p.zIndex===void 0&&(p.zIndex=l)}return r}getSourceState(){return"ready"}}const Ts={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class xM extends AH{constructor(e){const r=Object.assign({},e);delete r.source,super(r),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(wn.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(wn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Rn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=en(e,Rr.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let r;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof wa?r={viewState:e.getState(),extent:e.calculateExtent()}:r=e,!r.layerStatesArray&&n&&(r.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let i;if(r.layerStatesArray){if(i=r.layerStatesArray.find(c=>c.layer===this),!i)return!1}else i=this.getLayerState();const l=this.getExtent();return wM(i,r.viewState)&&(!l||ui(l,r.extent))}getAttributions(e){if(!this.isVisible(e))return[];const r=this.getSource()?.getAttributions();if(!r)return[];const n=e instanceof wa?e.getViewStateAndExtent():e;let i=r(n);return Array.isArray(i)||(i=[i]),i}render(e,r){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,r)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,r){}renderDeferred(e){const r=this.getRenderer();r&&r.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(wn.MAP,e)}getMapInternal(){return this.get(wn.MAP)}setMap(e){this.mapPrecomposeKey_&&(Rn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Rn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=en(e,Ts.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=en(this,Rr.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const r=e.frameState.layerStatesArray,n=this.getLayerState(!1);cn(!r.some(i=>i.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(n)}setSource(e){this.set(wn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function wM(t,e){if(!t.visible)return!1;const r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}function RH(t,e,r=0,n=t.length-1,i=Ype){for(;n>r;){if(n-r>600){const p=n-r+1,g=e-r+1,_=Math.log(p),x=.5*Math.exp(2*_/3),P=.5*Math.sqrt(_*x*(p-x)/p)*(g-p/2<0?-1:1),A=Math.max(r,Math.floor(e-g*x/p+P)),M=Math.min(n,Math.floor(e+(p-g)*x/p+P));RH(t,e,A,M,i)}const l=t[e];let c=r,s=n;for(Qm(t,r,e),i(t[n],l)>0&&Qm(t,r,n);c<s;){for(Qm(t,c,s),c++,s--;i(t[c],l)<0;)c++;for(;i(t[s],l)>0;)s--}i(t[r],l)===0?Qm(t,r,s):(s++,Qm(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}}function Qm(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Ype(t,e){return t<e?-1:t>e?1:0}let IH=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let r=this.data;const n=[];if(!F0(e,r))return n;const i=this.toBBox,l=[];for(;r;){for(let c=0;c<r.children.length;c++){const s=r.children[c],p=r.leaf?i(s):s;F0(e,p)&&(r.leaf?n.push(s):rT(e,p)?this._all(s,n):l.push(s))}r=l.pop()}return n}collides(e){let r=this.data;if(!F0(e,r))return!1;const n=[];for(;r;){for(let i=0;i<r.children.length;i++){const l=r.children[i],c=r.leaf?this.toBBox(l):l;if(F0(e,c)){if(r.leaf||rT(e,c))return!0;n.push(l)}}r=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let r=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){const n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=_p([]),this}remove(e,r){if(!e)return this;let n=this.data;const i=this.toBBox(e),l=[],c=[];let s,p,g;for(;n||l.length;){if(n||(n=l.pop(),p=l[l.length-1],s=c.pop(),g=!0),n.leaf){const _=Xpe(e,n.children,r);if(_!==-1)return n.children.splice(_,1),l.push(n),this._condense(l),this}!g&&!n.leaf&&rT(n,i)?(l.push(n),c.push(s),s=0,p=n,n=n.children[0]):p?(s++,n=p.children[s],g=!1):n=null}return this}toBBox(e){return e}compareMinX(e,r){return e.minX-r.minX}compareMinY(e,r){return e.minY-r.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,r){const n=[];for(;e;)e.leaf?r.push(...e.children):n.push(...e.children),e=n.pop();return r}_build(e,r,n,i){const l=n-r+1;let c=this._maxEntries,s;if(l<=c)return s=_p(e.slice(r,n+1)),op(s,this.toBBox),s;i||(i=Math.ceil(Math.log(l)/Math.log(c)),c=Math.ceil(l/Math.pow(c,i-1))),s=_p([]),s.leaf=!1,s.height=i;const p=Math.ceil(l/c),g=p*Math.ceil(Math.sqrt(c));_L(e,r,n,g,this.compareMinX);for(let _=r;_<=n;_+=g){const x=Math.min(_+g-1,n);_L(e,_,x,p,this.compareMinY);for(let P=_;P<=x;P+=p){const A=Math.min(P+p-1,x);s.children.push(this._build(e,P,A,i-1))}}return op(s,this.toBBox),s}_chooseSubtree(e,r,n,i){for(;i.push(r),!(r.leaf||i.length-1===n);){let l=1/0,c=1/0,s;for(let p=0;p<r.children.length;p++){const g=r.children[p],_=tT(g),x=tfe(e,g)-_;x<c?(c=x,l=_<l?_:l,s=g):x===c&&_<l&&(l=_,s=g)}r=s||r.children[0]}return r}_insert(e,r,n){const i=n?e:this.toBBox(e),l=[],c=this._chooseSubtree(i,this.data,r,l);for(c.children.push(e),yg(c,i);r>=0&&l[r].children.length>this._maxEntries;)this._split(l,r),r--;this._adjustParentBBoxes(i,l,r)}_split(e,r){const n=e[r],i=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,i);const c=this._chooseSplitIndex(n,l,i),s=_p(n.children.splice(c,n.children.length-c));s.height=n.height,s.leaf=n.leaf,op(n,this.toBBox),op(s,this.toBBox),r?e[r-1].children.push(s):this._splitRoot(n,s)}_splitRoot(e,r){this.data=_p([e,r]),this.data.height=e.height+1,this.data.leaf=!1,op(this.data,this.toBBox)}_chooseSplitIndex(e,r,n){let i,l=1/0,c=1/0;for(let s=r;s<=n-r;s++){const p=gg(e,0,s,this.toBBox),g=gg(e,s,n,this.toBBox),_=rfe(p,g),x=tT(p)+tT(g);_<l?(l=_,i=s,c=x<c?x:c):_===l&&x<c&&(c=x,i=s)}return i||n-r}_chooseSplitAxis(e,r,n){const i=e.leaf?this.compareMinX:Qpe,l=e.leaf?this.compareMinY:efe,c=this._allDistMargin(e,r,n,i),s=this._allDistMargin(e,r,n,l);c<s&&e.children.sort(i)}_allDistMargin(e,r,n,i){e.children.sort(i);const l=this.toBBox,c=gg(e,0,r,l),s=gg(e,n-r,n,l);let p=N0(c)+N0(s);for(let g=r;g<n-r;g++){const _=e.children[g];yg(c,e.leaf?l(_):_),p+=N0(c)}for(let g=n-r-1;g>=r;g--){const _=e.children[g];yg(s,e.leaf?l(_):_),p+=N0(s)}return p}_adjustParentBBoxes(e,r,n){for(let i=n;i>=0;i--)yg(r[i],e)}_condense(e){for(let r=e.length-1,n;r>=0;r--)e[r].children.length===0?r>0?(n=e[r-1].children,n.splice(n.indexOf(e[r]),1)):this.clear():op(e[r],this.toBBox)}};function Xpe(t,e,r){if(!r)return e.indexOf(t);for(let n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function op(t,e){gg(t,0,t.children.length,e,t)}function gg(t,e,r,n,i){i||(i=_p(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let l=e;l<r;l++){const c=t.children[l];yg(i,t.leaf?n(c):c)}return i}function yg(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Qpe(t,e){return t.minX-e.minX}function efe(t,e){return t.minY-e.minY}function tT(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function N0(t){return t.maxX-t.minX+(t.maxY-t.minY)}function tfe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function rfe(t,e){const r=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),l=Math.min(t.maxY,e.maxY);return Math.max(0,i-r)*Math.max(0,l-n)}function rT(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function F0(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _L(t,e,r,n,i){const l=[e,r];for(;l.length;){if(r=l.pop(),e=l.pop(),r-e<=n)continue;const c=e+Math.ceil((r-e)/n/2)*n;RH(t,c,e,r,i),l.push(e,c,c,r)}}const EM=[NaN,NaN,NaN,0];let nT;function nfe(){return nT||(nT=Ei(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),nT}const ife=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,ofe=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,sfe=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,afe=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function z0(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function zg(t){throw new Error('failed to parse "'+t+'" as color')}function MH(t){if(t.toLowerCase().startsWith("rgb")){const l=t.match(ofe)||t.match(ife)||t.match(sfe);if(l){const c=l[4],s=100/255;return[qn(z0(l[1],s)+.5|0,0,255),qn(z0(l[2],s)+.5|0,0,255),qn(z0(l[3],s)+.5|0,0,255),c!==void 0?qn(z0(c,100),0,1):1]}zg(t)}if(t.startsWith("#")){if(afe.test(t)){const l=t.substring(1),c=l.length<=4?1:2,s=[0,0,0,255];for(let p=0,g=l.length;p<g;p+=c){let _=parseInt(l.substring(p,p+c),16);c===1&&(_+=_<<4),s[p/c]=_}return s[3]=s[3]/255,s}zg(t)}const e=nfe();e.fillStyle="#abcdef";let r=e.fillStyle;e.fillStyle=t,e.fillStyle===r&&(e.fillStyle="#fedcba",r=e.fillStyle,e.fillStyle=t,e.fillStyle===r&&zg(t));const n=e.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return MH(n);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=xx(i[3]/255,3),i}function lfe(t){return typeof t=="string"?t:SM(t)}const cfe=1024,eg={};let iT=0;function ufe(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function oT(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function sT(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function aT(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function lT(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function bL(t){const e=aT(t[0]),r=aT(t[1]),n=aT(t[2]),i=lT(e*.222488403+r*.716873169+n*.06060791),l=500*(lT(e*.452247074+r*.399439023+n*.148375274)-i),c=200*(i-lT(e*.016863605+r*.117638439+n*.865350722)),s=Math.atan2(c,l)*(180/Math.PI);return[116*i-16,Math.sqrt(l*l+c*c),s<0?s+360:s,t[3]]}function hfe(t){const e=(t[0]+16)/116,r=t[1],n=t[2]*Math.PI/180,i=sT(e),l=sT(e+r/500*Math.cos(n)),c=sT(e-r/200*Math.sin(n)),s=oT(l*3.021973625-i*1.617392459-c*.404875592),p=oT(l*-.943766287+i*1.916279586+c*.027607165),g=oT(l*.069407491-i*.22898585+c*1.159737864);return[qn(s+.5|0,0,255),qn(p+.5|0,0,255),qn(g+.5|0,0,255),t[3]]}function TM(t){if(t==="none")return EM;if(eg.hasOwnProperty(t))return eg[t];if(iT>=cfe){let r=0;for(const n in eg)(r++&3)===0&&(delete eg[n],--iT)}const e=MH(t);e.length!==4&&zg(t);for(const r of e)isNaN(r)&&zg(t);return eg[t]=e,++iT,e}function mf(t){return Array.isArray(t)?t:TM(t)}function SM(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let r=t[1];r!=(r|0)&&(r=r+.5|0);let n=t[2];n!=(n|0)&&(n=n+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+r+","+n+","+i+")"}function vL(t){return t[0]>0&&t[1]>0}function dfe(t,e,r){return r===void 0&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function uo(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}let rd=0;const xo=1<<rd++,rn=1<<rd++,Ao=1<<rd++,Ws=1<<rd++,Bh=1<<rd++,_g=1<<rd++,j0=Math.pow(2,rd)-1,CM={[xo]:"boolean",[rn]:"number",[Ao]:"string",[Ws]:"color",[Bh]:"number[]",[_g]:"size"},pfe=Object.keys(CM).map(Number).sort(Ia);function ffe(t){return t in CM}function bg(t){const e=[];for(const r of pfe)vg(t,r)&&e.push(CM[r]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function vg(t,e){return(t&e)===e}function fc(t,e){return t===e}class Oi{constructor(e,r){if(!ffe(e))throw new Error(`literal expressions must have a specific type, got ${bg(e)}`);this.type=e,this.value=r}}class mfe{constructor(e,r,...n){this.type=e,this.operator=r,this.args=n}}function OH(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Yi(t,e,r){switch(typeof t){case"boolean":{if(fc(e,Ao))return new Oi(Ao,t?"true":"false");if(!vg(e,xo))throw new Error(`got a boolean, but expected ${bg(e)}`);return new Oi(xo,t)}case"number":{if(fc(e,_g))return new Oi(_g,uo(t));if(fc(e,xo))return new Oi(xo,!!t);if(fc(e,Ao))return new Oi(Ao,t.toString());if(!vg(e,rn))throw new Error(`got a number, but expected ${bg(e)}`);return new Oi(rn,t)}case"string":{if(fc(e,Ws))return new Oi(Ws,TM(t));if(fc(e,xo))return new Oi(xo,!!t);if(!vg(e,Ao))throw new Error(`got a string, but expected ${bg(e)}`);return new Oi(Ao,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return Cfe(t,e,r);for(const n of t)if(typeof n!="number")throw new Error("expected an array of numbers");if(fc(e,_g)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new Oi(_g,t)}if(fc(e,Ws)){if(t.length===3)return new Oi(Ws,[...t,1]);if(t.length===4)return new Oi(Ws,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!vg(e,Bh))throw new Error(`got an array of numbers, but expected ${bg(e)}`);return new Oi(Bh,t)}const mt={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},gfe={[mt.Get]:Tr(qr(1,1/0),xL),[mt.Var]:Tr(qr(1,1),yfe),[mt.Has]:Tr(qr(1,1/0),xL),[mt.Id]:Tr(_fe,sp),[mt.Concat]:Tr(qr(2,1/0),fn(Ao)),[mt.GeometryType]:Tr(bfe,sp),[mt.LineMetric]:Tr(sp),[mt.Resolution]:Tr(cT,sp),[mt.Zoom]:Tr(cT,sp),[mt.Time]:Tr(cT,sp),[mt.Any]:Tr(qr(2,1/0),fn(xo)),[mt.All]:Tr(qr(2,1/0),fn(xo)),[mt.Not]:Tr(qr(1,1),fn(xo)),[mt.Equal]:Tr(qr(2,2),fn(j0)),[mt.NotEqual]:Tr(qr(2,2),fn(j0)),[mt.GreaterThan]:Tr(qr(2,2),fn(rn)),[mt.GreaterThanOrEqualTo]:Tr(qr(2,2),fn(rn)),[mt.LessThan]:Tr(qr(2,2),fn(rn)),[mt.LessThanOrEqualTo]:Tr(qr(2,2),fn(rn)),[mt.Multiply]:Tr(qr(2,1/0),wL),[mt.Coalesce]:Tr(qr(2,1/0),wL),[mt.Divide]:Tr(qr(2,2),fn(rn)),[mt.Add]:Tr(qr(2,1/0),fn(rn)),[mt.Subtract]:Tr(qr(2,2),fn(rn)),[mt.Clamp]:Tr(qr(3,3),fn(rn)),[mt.Mod]:Tr(qr(2,2),fn(rn)),[mt.Pow]:Tr(qr(2,2),fn(rn)),[mt.Abs]:Tr(qr(1,1),fn(rn)),[mt.Floor]:Tr(qr(1,1),fn(rn)),[mt.Ceil]:Tr(qr(1,1),fn(rn)),[mt.Round]:Tr(qr(1,1),fn(rn)),[mt.Sin]:Tr(qr(1,1),fn(rn)),[mt.Cos]:Tr(qr(1,1),fn(rn)),[mt.Atan]:Tr(qr(1,2),fn(rn)),[mt.Sqrt]:Tr(qr(1,1),fn(rn)),[mt.Match]:Tr(qr(4,1/0),EL,xfe),[mt.Between]:Tr(qr(3,3),fn(rn)),[mt.Interpolate]:Tr(qr(6,1/0),EL,wfe),[mt.Case]:Tr(qr(3,1/0),vfe,Efe),[mt.In]:Tr(qr(2,2),Tfe),[mt.Number]:Tr(qr(1,1/0),fn(j0)),[mt.String]:Tr(qr(1,1/0),fn(j0)),[mt.Array]:Tr(qr(1,1/0),fn(rn)),[mt.Color]:Tr(qr(1,4),fn(rn)),[mt.Band]:Tr(qr(1,3),fn(rn)),[mt.Palette]:Tr(qr(2,2),Sfe),[mt.ToString]:Tr(qr(1,1),fn(xo|rn|Ao|Ws))};function xL(t,e,r){const n=t.length-1,i=new Array(n);for(let l=0;l<n;++l){const c=t[l+1];switch(typeof c){case"number":{i[l]=new Oi(rn,c);break}case"string":{i[l]=new Oi(Ao,c);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${c}`)}l===0&&r.properties.add(String(c))}return i}function yfe(t,e,r){const n=t[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return r.variables.add(n),[new Oi(Ao,n)]}function _fe(t,e,r){r.featureId=!0}function bfe(t,e,r){r.geometryType=!0}function cT(t,e,r){r.mapState=!0}function sp(t,e,r){const n=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function qr(t,e){return function(r,n,i){const l=r[0],c=r.length-1;if(t===e){if(c!==t){const s=t===1?"":"s";throw new Error(`expected ${t} argument${s} for ${l}, got ${c}`)}}else if(c<t||c>e){const s=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${s} arguments for ${l}, got ${c}`)}}}function wL(t,e,r){const n=t.length-1,i=new Array(n);for(let l=0;l<n;++l){const c=Yi(t[l+1],e,r);i[l]=c}return i}function fn(t){return function(e,r,n){const i=e.length-1,l=new Array(i);for(let c=0;c<i;++c){const s=Yi(e[c+1],t,n);l[c]=s}return l}}function vfe(t,e,r){const n=t[0],i=t.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${i} instead`)}function EL(t,e,r){const n=t[0],i=t.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${i} instead`)}function xfe(t,e,r){const n=t.length-1,i=Ao|rn|xo,l=Yi(t[1],i,r),c=Yi(t[t.length-1],e,r),s=new Array(n-2);for(let p=0;p<n-2;p+=2){try{const g=Yi(t[p+2],l.type,r);s[p]=g}catch(g){throw new Error(`failed to parse argument ${p+1} of match expression: ${g.message}`)}try{const g=Yi(t[p+3],c.type,r);s[p+1]=g}catch(g){throw new Error(`failed to parse argument ${p+2} of match expression: ${g.message}`)}}return[l,...s,c]}function wfe(t,e,r){const n=t[1];let i;switch(n[0]){case"linear":i=1;break;case"exponential":const p=n[1];if(typeof p!="number"||p<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(p)} instead`);i=p;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new Oi(rn,i);let c;try{c=Yi(t[2],rn,r)}catch(p){throw new Error(`failed to parse argument 1 in interpolate expression: ${p.message}`)}const s=new Array(t.length-3);for(let p=0;p<s.length;p+=2){try{const g=Yi(t[p+3],rn,r);s[p]=g}catch(g){throw new Error(`failed to parse argument ${p+2} for interpolate expression: ${g.message}`)}try{const g=Yi(t[p+4],e,r);s[p+1]=g}catch(g){throw new Error(`failed to parse argument ${p+3} for interpolate expression: ${g.message}`)}}return[l,c,...s]}function Efe(t,e,r){const n=Yi(t[t.length-1],e,r),i=new Array(t.length-1);for(let l=0;l<i.length-1;l+=2){try{const c=Yi(t[l+1],xo,r);i[l]=c}catch(c){throw new Error(`failed to parse argument ${l} of case expression: ${c.message}`)}try{const c=Yi(t[l+2],n.type,r);i[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of case expression: ${c.message}`)}}return i[i.length-1]=n,i}function Tfe(t,e,r){let n=t[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],i=Ao}else i=rn;const l=new Array(n.length);for(let s=0;s<l.length;s++)try{const p=Yi(n[s],i,r);l[s]=p}catch(p){throw new Error(`failed to parse haystack item ${s} for "in" expression: ${p.message}`)}return[Yi(t[1],i,r),...l]}function Sfe(t,e,r){let n;try{n=Yi(t[1],rn,r)}catch(c){throw new Error(`failed to parse first argument in palette expression: ${c.message}`)}const i=t[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const l=new Array(i.length);for(let c=0;c<l.length;c++){let s;try{s=Yi(i[c],Ws,r)}catch(p){throw new Error(`failed to parse color at index ${c} in palette expression: ${p.message}`)}if(!(s instanceof Oi))throw new Error(`the palette color at index ${c} must be a literal value`);l[c]=s}return[n,...l]}function Tr(...t){return function(e,r,n){const i=e[0];let l;for(let c=0;c<t.length;c++){const s=t[c](e,r,n);if(c==t.length-1){if(!s)throw new Error("expected last argument validator to return the parsed args");l=s}}return new mfe(r,i,...l)}}function Cfe(t,e,r){const n=t[0],i=gfe[n];if(!i)throw new Error(`unknown operator: ${n}`);return i(t,e,r)}function kH(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return kH(t.getGeometries()[0]);default:return""}}function LH(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ql(t,e,r){const n=Yi(t,e,r);return ra(n)}function ra(t,e){if(t instanceof Oi){if(t.type===Ws&&typeof t.value=="string"){const n=TM(t.value);return function(){return n}}return function(){return t.value}}const r=t.operator;switch(r){case mt.Number:case mt.String:case mt.Coalesce:return Pfe(t);case mt.Get:case mt.Var:case mt.Has:return Afe(t);case mt.Id:return n=>n.featureId;case mt.GeometryType:return n=>n.geometryType;case mt.Concat:{const n=t.args.map(i=>ra(i));return i=>"".concat(...n.map(l=>l(i).toString()))}case mt.Resolution:return n=>n.resolution;case mt.Any:case mt.All:case mt.Between:case mt.In:case mt.Not:return Ife(t);case mt.Equal:case mt.NotEqual:case mt.LessThan:case mt.LessThanOrEqualTo:case mt.GreaterThan:case mt.GreaterThanOrEqualTo:return Rfe(t);case mt.Multiply:case mt.Divide:case mt.Add:case mt.Subtract:case mt.Clamp:case mt.Mod:case mt.Pow:case mt.Abs:case mt.Floor:case mt.Ceil:case mt.Round:case mt.Sin:case mt.Cos:case mt.Atan:case mt.Sqrt:return Mfe(t);case mt.Case:return Ofe(t);case mt.Match:return kfe(t);case mt.Interpolate:return Lfe(t);case mt.ToString:return Dfe(t);default:throw new Error(`Unsupported operator ${r}`)}}function Pfe(t,e){const r=t.operator,n=t.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=ra(t.args[l]);switch(r){case mt.Coalesce:return l=>{for(let c=0;c<n;++c){const s=i[c](l);if(typeof s<"u"&&s!==null)return s}throw new Error("Expected one of the values to be non-null")};case mt.Number:case mt.String:return l=>{for(let c=0;c<n;++c){const s=i[c](l);if(typeof s===r)return s}throw new Error(`Expected one of the values to be a ${r}`)};default:throw new Error(`Unsupported assertion operator ${r}`)}}function Afe(t,e){const n=t.args[0].value;switch(t.operator){case mt.Get:return i=>{const l=t.args;let c=i.properties[n];for(let s=1,p=l.length;s<p;++s){const _=l[s].value;c=c[_]}return c};case mt.Var:return i=>i.variables[n];case mt.Has:return i=>{const l=t.args;if(!(n in i.properties))return!1;let c=i.properties[n];for(let s=1,p=l.length;s<p;++s){const _=l[s].value;if(!c||!Object.hasOwn(c,_))return!1;c=c[_]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function Rfe(t,e){const r=t.operator,n=ra(t.args[0]),i=ra(t.args[1]);switch(r){case mt.Equal:return l=>n(l)===i(l);case mt.NotEqual:return l=>n(l)!==i(l);case mt.LessThan:return l=>n(l)<i(l);case mt.LessThanOrEqualTo:return l=>n(l)<=i(l);case mt.GreaterThan:return l=>n(l)>i(l);case mt.GreaterThanOrEqualTo:return l=>n(l)>=i(l);default:throw new Error(`Unsupported comparison operator ${r}`)}}function Ife(t,e){const r=t.operator,n=t.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=ra(t.args[l]);switch(r){case mt.Any:return l=>{for(let c=0;c<n;++c)if(i[c](l))return!0;return!1};case mt.All:return l=>{for(let c=0;c<n;++c)if(!i[c](l))return!1;return!0};case mt.Between:return l=>{const c=i[0](l),s=i[1](l),p=i[2](l);return c>=s&&c<=p};case mt.In:return l=>{const c=i[0](l);for(let s=1;s<n;++s)if(c===i[s](l))return!0;return!1};case mt.Not:return l=>!i[0](l);default:throw new Error(`Unsupported logical operator ${r}`)}}function Mfe(t,e){const r=t.operator,n=t.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=ra(t.args[l]);switch(r){case mt.Multiply:return l=>{let c=1;for(let s=0;s<n;++s)c*=i[s](l);return c};case mt.Divide:return l=>i[0](l)/i[1](l);case mt.Add:return l=>{let c=0;for(let s=0;s<n;++s)c+=i[s](l);return c};case mt.Subtract:return l=>i[0](l)-i[1](l);case mt.Clamp:return l=>{const c=i[0](l),s=i[1](l);if(c<s)return s;const p=i[2](l);return c>p?p:c};case mt.Mod:return l=>i[0](l)%i[1](l);case mt.Pow:return l=>Math.pow(i[0](l),i[1](l));case mt.Abs:return l=>Math.abs(i[0](l));case mt.Floor:return l=>Math.floor(i[0](l));case mt.Ceil:return l=>Math.ceil(i[0](l));case mt.Round:return l=>Math.round(i[0](l));case mt.Sin:return l=>Math.sin(i[0](l));case mt.Cos:return l=>Math.cos(i[0](l));case mt.Atan:return n===2?l=>Math.atan2(i[0](l),i[1](l)):l=>Math.atan(i[0](l));case mt.Sqrt:return l=>Math.sqrt(i[0](l));default:throw new Error(`Unsupported numeric operator ${r}`)}}function Ofe(t,e){const r=t.args.length,n=new Array(r);for(let i=0;i<r;++i)n[i]=ra(t.args[i]);return i=>{for(let l=0;l<r-1;l+=2)if(n[l](i))return n[l+1](i);return n[r-1](i)}}function kfe(t,e){const r=t.args.length,n=new Array(r);for(let i=0;i<r;++i)n[i]=ra(t.args[i]);return i=>{const l=n[0](i);for(let c=1;c<r-1;c+=2)if(l===n[c](i))return n[c+1](i);return n[r-1](i)}}function Lfe(t,e){const r=t.args.length,n=new Array(r);for(let i=0;i<r;++i)n[i]=ra(t.args[i]);return i=>{const l=n[0](i),c=n[1](i);let s,p;for(let g=2;g<r;g+=2){const _=n[g](i);let x=n[g+1](i);const P=Array.isArray(x);if(P&&(x=ufe(x)),_>=c)return g===2?x:P?Nfe(l,c,s,p,_,x):xg(l,c,s,p,_,x);s=_,p=x}return p}}function Dfe(t,e){const r=t.operator,n=t.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=ra(t.args[l]);switch(r){case mt.ToString:return l=>{const c=i[0](l);return t.args[0].type===Ws?SM(c):c.toString()};default:throw new Error(`Unsupported convert operator ${r}`)}}function xg(t,e,r,n,i,l){const c=i-r;if(c===0)return n;const s=e-r,p=t===1?s/c:(Math.pow(t,s)-1)/(Math.pow(t,c)-1);return n+p*(l-n)}function Nfe(t,e,r,n,i,l){if(i-r===0)return n;const s=bL(n),p=bL(l);let g=p[2]-s[2];g>180?g-=360:g<-180&&(g+=360);const _=[xg(t,e,r,s[0],i,p[0]),xg(t,e,r,s[1],i,p[1]),s[2]+xg(t,e,r,0,i,g),xg(t,e,r,n[3],i,l[3])];return hfe(_)}const Ur={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function Ffe(t,e,r){const n=t;let i=!0,l=!1,c=!1;const s=[mv(n,Rr.LOAD,function(){c=!0,l||e()})];return n.src&&jG?(l=!0,n.decode().then(function(){i&&e()}).catch(function(p){i&&(c?e():r())})):s.push(mv(n,Rr.ERROR,r)),function(){i=!1,s.forEach(Rn)}}function zfe(t,e){return new Promise((r,n)=>{function i(){c(),r(t)}function l(){c(),n(new Error("Image load error"))}function c(){t.removeEventListener("load",i),t.removeEventListener("error",l)}t.addEventListener("load",i),t.addEventListener("error",l)})}function jfe(t,e){return e&&(t.src=e),t.src&&jG?new Promise((r,n)=>t.decode().then(()=>r(t)).catch(i=>t.complete&&t.width?r(t):n(i))):zfe(t)}class Bfe{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const r in this.cache_){const n=this.cache_[r];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[r],delete this.patternCache_[r],--this.cacheSize_)}}}get(e,r,n){const i=uT(e,r,n);return i in this.cache_?this.cache_[i]:null}getPattern(e,r,n){const i=uT(e,r,n);return i in this.patternCache_?this.patternCache_[i]:null}set(e,r,n,i,l){const c=uT(e,r,n),s=c in this.cache_;this.cache_[c]=i,l&&(i.getImageState()===Ur.IDLE&&i.load(),i.getImageState()===Ur.LOADING?i.ready().then(()=>{this.patternCache_[c]=Ev().createPattern(i.getImage(1),"repeat")}):this.patternCache_[c]=Ev().createPattern(i.getImage(1),"repeat")),s||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function uT(t,e,r){const n=r?mf(r):"null";return e+":"+t+":"+n}const Ss=new Bfe;let tg=null;class DH extends vx{constructor(e,r,n,i,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=i===void 0?Ur.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=r,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ur.LOADED){tg||(tg=Ei(1,1,void 0,{willReadFrequently:!0})),tg.drawImage(this.image_,0,0);try{tg.getImageData(0,0,1,1),this.tainted_=!1}catch{tg=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Rr.CHANGE)}handleImageError_(){this.imageState_=Ur.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ur.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],r=this.size_[1],n=Ei(e,r);n.fillRect(0,0,e,r),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ur.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ur.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&jfe(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ur.LOADED)return;const r=this.image_,n=Ei(Math.ceil(r.width*e),Math.ceil(r.height*e)),i=n.canvas;n.scale(e,e),n.drawImage(r,0,0),n.globalCompositeOperation="multiply",n.fillStyle=lfe(this.color_),n.fillRect(0,0,i.width/e,i.height/e),n.globalCompositeOperation="destination-in",n.drawImage(r,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ur.LOADED||this.imageState_===Ur.ERROR)e();else{const r=()=>{(this.imageState_===Ur.LOADED||this.imageState_===Ur.ERROR)&&(this.removeEventListener(Rr.CHANGE,r),e())};this.addEventListener(Rr.CHANGE,r)}})),this.ready_}}function PM(t,e,r,n,i,l){let c=e===void 0?void 0:Ss.get(e,r,i);return c||(c=new DH(t,t&&"src"in t?t.src||void 0:e,r,n,i),Ss.set(e,r,i,c,l)),l&&c&&!Ss.getPattern(e,r,i)&&Ss.set(e,r,i,c,l),c}function Pa(t){return t?Array.isArray(t)?SM(t):typeof t=="object"&&"src"in t?qfe(t):t:null}function qfe(t){if(!t.offset||!t.size)return Ss.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,r=Ss.getPattern(e,void 0,t.color);if(r)return r;const n=Ss.get(t.src,"anonymous",null);if(n.getImageState()!==Ur.LOADED)return null;const i=Ei(t.size[0],t.size[1]);return i.drawImage(n.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),PM(i.canvas,e,void 0,Ur.LOADED,t.color,!0),Ss.getPattern(e,void 0,t.color)}const NH="10px sans-serif",Ro="#000",gf="round",Pl=[],Al=0,yf="round",_y=10,by="#000",vy="center",Tv="middle",ah=[0,0,0,0],xy=1,Yu=new oa;let rg=null,TL;const X2={},$fe=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Vfe(t,e,r){return`${t} ${e} 16px "${r}"`}const Ufe=function(){let e,r;async function n(l){await r.ready;const c=await r.load(l);if(c.length===0)return!1;const s=K2(l),p=s.families[0].toLowerCase(),g=s.weight;return c.some(_=>{const x=_.family.replace(/^['"]|['"]$/g,"").toLowerCase(),P=Z2[_.weight]||_.weight;return x===p&&_.style===s.style&&P==g})}async function i(){await r.ready;let l=!0;const c=Yu.getProperties(),s=Object.keys(c).filter(p=>c[p]<100);for(let p=s.length-1;p>=0;--p){const g=s[p];let _=c[g];_<100&&(await n(g)?(t_(X2),Yu.set(g,100)):(_+=10,Yu.set(g,_,!0),_<100&&(l=!1)))}e=void 0,l||(e=setTimeout(i,100))}return async function(l){r||(r=WI?self.fonts:document.fonts);const c=K2(l);if(!c)return;const s=c.families;let p=!1;for(const g of s){if($fe.has(g))continue;const _=Vfe(c.style,c.weight,g);Yu.get(_)===void 0&&(Yu.set(_,0,!0),p=!0)}p&&(clearTimeout(e),e=setTimeout(i,100))}}(),Gfe=function(){let t;return function(e){let r=X2[e];if(r==null){if(WI){const n=K2(e),i=FH(e,"g");r=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),r=t.offsetHeight,document.body.removeChild(t);X2[e]=r}return r}}();function FH(t,e){return rg||(rg=Ei(1,1)),t!=TL&&(rg.font=t,TL=rg.font),rg.measureText(e)}function zH(t,e){return FH(t,e).width}function SL(t,e,r){if(e in r)return r[e];const n=e.split(`
`).reduce((i,l)=>Math.max(i,zH(t,l)),0);return r[e]=n,n}function Hfe(t,e){const r=[],n=[],i=[];let l=0,c=0,s=0,p=0;for(let g=0,_=e.length;g<=_;g+=2){const x=e[g];if(x===`
`||g===_){l=Math.max(l,c),i.push(c),c=0,s+=p,p=0;continue}const P=e[g+1]||t.font,A=zH(P,x);r.push(A),c+=A;const M=Gfe(P);n.push(M),p=Math.max(p,M)}return{width:l,height:s,widths:r,heights:n,lineWidths:i}}function Jfe(t,e,r,n,i,l,c,s,p,g,_){t.save(),r!==1&&(t.globalAlpha===void 0?t.globalAlpha=x=>x.globalAlpha*=r:t.globalAlpha*=r),e&&t.transform.apply(t,e),n.contextInstructions?(t.translate(p,g),t.scale(_[0],_[1]),Wfe(n,t)):_[0]<0||_[1]<0?(t.translate(p,g),t.scale(_[0],_[1]),t.drawImage(n,i,l,c,s,0,0,c,s)):t.drawImage(n,i,l,c,s,p,g,c*_[0],s*_[1]),t.restore()}function Wfe(t,e){const r=t.contextInstructions;for(let n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}class Ox{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=uo(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ox({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Sr()}getImage(e){return Sr()}getHitDetectionImage(){return Sr()}getPixelRatio(e){return 1}getImageState(){return Sr()}getImageSize(){return Sr()}getOrigin(){return Sr()}getSize(){return Sr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=uo(e)}listenImageChange(e){Sr()}load(){Sr()}unlistenImageChange(e){Sr()}ready(){return Promise.resolve()}}class kx extends Ox{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ur.LOADING:Ur.LOADED,this.imageState_===Ur.LOADING&&this.ready().then(()=>this.imageState_=Ur.LOADED),this.render()}clone(){const e=this.getScale(),r=new kx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r}getAnchor(){const e=this.size_,r=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-r[0]/n[0],e[1]/2+r[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const r=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${r}`+Object.values(this.renderOptions_).join(",");let i=Ss.get(n,null,null)?.getImage(1);if(!i){const l=this.renderOptions_,c=Math.ceil(l.size*e),s=Ei(c,c);this.draw_(l,s,e),i=s.canvas,Ss.set(n,null,null,new DH(i,void 0,null,Ur.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,r,n){if(r===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return r;let i=this.radius,l=this.radius2_===void 0?i:this.radius2_;if(i<l){const ne=i;i=l,l=ne}const c=this.radius2_===void 0?this.points_:this.points_*2,s=2*Math.PI/c,p=l*Math.sin(s),g=Math.sqrt(l*l-p*p),_=i-g,x=Math.sqrt(p*p+_*_),P=x/p;if(e==="miter"&&P<=n)return P*r;const A=r/2/P,M=r/2*(_/x),z=Math.sqrt((i+A)*(i+A)+M*M)-i;if(this.radius2_===void 0||e==="bevel")return z*2;const j=i*Math.sin(s),$=Math.sqrt(i*i-j*j),J=l-$,re=Math.sqrt(j*j+J*J)/j;if(re<=n){const ne=re*r/2-l-i;return 2*Math.max(z,ne)}return z*2}createRenderOptions(){let e=gf,r=yf,n=0,i=null,l=0,c,s=0;this.stroke_&&(c=Pa(this.stroke_.getColor()??by),s=this.stroke_.getWidth()??xy,i=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,r=this.stroke_.getLineJoin()??yf,e=this.stroke_.getLineCap()??gf,n=this.stroke_.getMiterLimit()??_y);const p=this.calculateLineJoinSize_(r,s,n),g=Math.max(this.radius,this.radius2_||0),_=Math.ceil(2*g+p);return{strokeStyle:c,strokeWidth:s,size:_,lineCap:e,lineDash:i,lineDashOffset:l,lineJoin:r,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,r,n){if(r.scale(n,n),r.translate(e.size/2,e.size/2),this.createPath_(r),this.fill_){let i=this.fill_.getColor();i===null&&(i=Ro),r.fillStyle=Pa(i),r.fill()}e.strokeStyle&&(r.strokeStyle=e.strokeStyle,r.lineWidth=e.strokeWidth,e.lineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineCap=e.lineCap,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit,r.stroke())}createHitDetectionCanvas_(e){let r;if(this.fill_){let n=this.fill_.getColor(),i=0;typeof n=="string"&&(n=mf(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0&&(r=Ei(e.size,e.size),this.drawHitDetectionCanvas_(e,r))}return r?r.canvas:this.getImage(1)}createPath_(e){let r=this.points_;const n=this.radius;if(r===1/0)e.arc(0,0,n,0,2*Math.PI);else{const i=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(r*=2);const l=this.angle_-Math.PI/2,c=2*Math.PI/r;for(let s=0;s<r;s++){const p=l+s*c,g=s%2===0?n:i;e.lineTo(g*Math.cos(p),g*Math.sin(p))}e.closePath()}}drawHitDetectionCanvas_(e,r){r.translate(e.size/2,e.size/2),this.createPath_(r),r.fillStyle=Ro,r.fill(),e.strokeStyle&&(r.strokeStyle=e.strokeStyle,r.lineWidth=e.strokeWidth,e.lineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit,r.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class c_ extends kx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),r=new c_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r}setRadius(e){this.radius=e,this.render()}}class El{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new El({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const r=PM(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));r.ready().then(()=>{this.patternImage_=null}),r.getImageState()===Ur.IDLE&&r.load(),r.getImageState()===Ur.LOADING&&(this.patternImage_=r)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Nr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:mf(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function CL(t,e,r,n){return r!==void 0&&n!==void 0?[r/t,n/e]:r!==void 0?r/t:n!==void 0?n/e:1}class _f extends Ox{constructor(e){e=e||{};const r=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:r,rotation:n,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const c=e.img!==void 0?e.img:null;let s=e.src;cn(!(s!==void 0&&c),"`image` and `src` cannot be provided at the same time"),(s===void 0||s.length===0)&&c&&(s=c.src||Nr(c)),cn(s!==void 0&&s.length>0,"A defined and non-empty `src` or `image` must be provided"),cn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let p;if(e.src!==void 0?p=Ur.IDLE:c!==void 0&&("complete"in c?c.complete?p=c.src?Ur.LOADED:Ur.IDLE:p=Ur.LOADING:p=Ur.LOADED),this.color_=e.color!==void 0?mf(e.color):null,this.iconImage_=PM(c,s,this.crossOrigin_,p,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,_;if(e.size)[g,_]=e.size;else{const x=this.getImage(1);if(x.width&&x.height)g=x.width,_=x.height;else if(x instanceof HTMLImageElement){this.initialOptions_=e;const P=()=>{if(this.unlistenImageChange(P),!this.initialOptions_)return;const A=this.iconImage_.getSize();this.setScale(CL(A[0],A[1],e.width,e.height))};this.listenImageChange(P);return}}g!==void 0&&this.setScale(CL(g,_,e.width,e.height))}}clone(){let e,r,n;return this.initialOptions_?(r=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new _f({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:r,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const r=this.getDisplacement(),n=this.getScaleArray();return[e[0]-r[0]/n[0],e[1]+r[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const r=this.getSize(),n=this.iconImage_.getSize();if(!r||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-r[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-r[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ur.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ur.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Rr.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Rr.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Dc{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Dc({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class ns{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=PL,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new ns({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(r){return r.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=PL,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Zfe(t){let e;if(typeof t=="function")e=t;else{let r;Array.isArray(t)?r=t:(cn(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),r=[t]),e=function(){return r}}return e}let hT=null;function jH(t,e){if(!hT){const r=new El({color:"rgba(255,255,255,0.4)"}),n=new Dc({color:"#3399CC",width:1.25});hT=[new ns({image:new c_({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return hT}function PL(t){return t.getGeometry()}const Kfe="#333";class Lx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=uo(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new El({color:Kfe}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Lx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=uo(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function Yfe(t){return!0}function Xfe(t){const e=OH(),r=Qfe(t,e),n=LH();return function(i,l){if(n.properties=i.getPropertiesInternal(),n.resolution=l,e.featureId){const c=i.getId();c!==void 0?n.featureId=c:n.featureId=null}return e.geometryType&&(n.geometryType=kH(i.getGeometry())),r(n)}}function AL(t){const e=OH(),r=t.length,n=new Array(r);for(let c=0;c<r;++c)n[c]=Q2(t[c],e);const i=LH(),l=new Array(r);return function(c,s){if(i.properties=c.getPropertiesInternal(),i.resolution=s,e.featureId){const g=c.getId();g!==void 0?i.featureId=g:i.featureId=null}let p=0;for(let g=0;g<r;++g){const _=n[g](i);_&&(l[p]=_,p+=1)}return l.length=p,l}}function Qfe(t,e){const r=t.length,n=new Array(r);for(let i=0;i<r;++i){const l=t[i],c="filter"in l?ql(l.filter,xo,e):Yfe;let s;if(Array.isArray(l.style)){const p=l.style.length;s=new Array(p);for(let g=0;g<p;++g)s[g]=Q2(l.style[g],e)}else s=[Q2(l.style,e)];n[i]={filter:c,styles:s}}return function(i){const l=[];let c=!1;for(let s=0;s<r;++s){const p=n[s].filter;if(p(i)&&!(t[s].else&&c)){c=!0;for(const g of n[s].styles){const _=g(i);_&&l.push(_)}}}return l}}function Q2(t,e){const r=wy(t,"",e),n=Ey(t,"",e),i=eme(t,e),l=tme(t,e),c=Io(t,"z-index",e);if(!r&&!n&&!i&&!l&&!Qc(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const s=new ns;return function(p){let g=!0;if(r){const _=r(p);_&&(g=!1),s.setFill(_)}if(n){const _=n(p);_&&(g=!1),s.setStroke(_)}if(i){const _=i(p);_&&(g=!1),s.setText(_)}if(l){const _=l(p);_&&(g=!1),s.setImage(_)}return c&&s.setZIndex(c(p)),g?null:s}}function wy(t,e,r){let n;if(e+"fill-pattern-src"in t)n=ome(t,e+"fill-",r);else{if(t[e+"fill-color"]==="none")return l=>null;n=AM(t,e+"fill-color",r)}if(!n)return null;const i=new El;return function(l){const c=n(l);return c===EM?null:(i.setColor(c),i)}}function Ey(t,e,r){const n=Io(t,e+"stroke-width",r),i=AM(t,e+"stroke-color",r);if(!n&&!i)return null;const l=bl(t,e+"stroke-line-cap",r),c=bl(t,e+"stroke-line-join",r),s=BH(t,e+"stroke-line-dash",r),p=Io(t,e+"stroke-line-dash-offset",r),g=Io(t,e+"stroke-miter-limit",r),_=new Dc;return function(x){if(i){const P=i(x);if(P===EM)return null;_.setColor(P)}if(n&&_.setWidth(n(x)),l){const P=l(x);if(P!=="butt"&&P!=="round"&&P!=="square")throw new Error("Expected butt, round, or square line cap");_.setLineCap(P)}if(c){const P=c(x);if(P!=="bevel"&&P!=="round"&&P!=="miter")throw new Error("Expected bevel, round, or miter line join");_.setLineJoin(P)}return s&&_.setLineDash(s(x)),p&&_.setLineDashOffset(p(x)),g&&_.setMiterLimit(g(x)),_}}function eme(t,e){const r="text-",n=bl(t,r+"value",e);if(!n)return null;const i=wy(t,r,e),l=wy(t,r+"background-",e),c=Ey(t,r,e),s=Ey(t,r+"background-",e),p=bl(t,r+"font",e),g=Io(t,r+"max-angle",e),_=Io(t,r+"offset-x",e),x=Io(t,r+"offset-y",e),P=Fp(t,r+"overflow",e),A=bl(t,r+"placement",e),M=Io(t,r+"repeat",e),N=Dx(t,r+"scale",e),z=Fp(t,r+"rotate-with-view",e),j=Io(t,r+"rotation",e),$=bl(t,r+"align",e),J=bl(t,r+"justify",e),X=bl(t,r+"baseline",e),re=Fp(t,r+"keep-upright",e),ne=BH(t,r+"padding",e),Z=Nx(t,r+"declutter-mode"),U=new Lx({declutterMode:Z});return function(K){if(U.setText(n(K)),i&&U.setFill(i(K)),l&&U.setBackgroundFill(l(K)),c&&U.setStroke(c(K)),s&&U.setBackgroundStroke(s(K)),p&&U.setFont(p(K)),g&&U.setMaxAngle(g(K)),_&&U.setOffsetX(_(K)),x&&U.setOffsetY(x(K)),P&&U.setOverflow(P(K)),A){const he=A(K);if(he!=="point"&&he!=="line")throw new Error("Expected point or line for text-placement");U.setPlacement(he)}if(M&&U.setRepeat(M(K)),N&&U.setScale(N(K)),z&&U.setRotateWithView(z(K)),j&&U.setRotation(j(K)),$){const he=$(K);if(he!=="left"&&he!=="center"&&he!=="right"&&he!=="end"&&he!=="start")throw new Error("Expected left, right, center, start, or end for text-align");U.setTextAlign(he)}if(J){const he=J(K);if(he!=="left"&&he!=="right"&&he!=="center")throw new Error("Expected left, right, or center for text-justify");U.setJustify(he)}if(X){const he=X(K);if(he!=="bottom"&&he!=="top"&&he!=="middle"&&he!=="alphabetic"&&he!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");U.setTextBaseline(he)}return ne&&U.setPadding(ne(K)),re&&U.setKeepUpright(re(K)),U}}function tme(t,e){return"icon-src"in t?rme(t,e):"shape-points"in t?nme(t,e):"circle-radius"in t?ime(t,e):null}function rme(t,e){const r="icon-",n=r+"src",i=qH(t[n],n),l=Sv(t,r+"anchor",e),c=Dx(t,r+"scale",e),s=Io(t,r+"opacity",e),p=Sv(t,r+"displacement",e),g=Io(t,r+"rotation",e),_=Fp(t,r+"rotate-with-view",e),x=IL(t,r+"anchor-origin"),P=ML(t,r+"anchor-x-units"),A=ML(t,r+"anchor-y-units"),M=cme(t,r+"color"),N=ame(t,r+"cross-origin"),z=lme(t,r+"offset"),j=IL(t,r+"offset-origin"),$=Cv(t,r+"width"),J=Cv(t,r+"height"),X=sme(t,r+"size"),re=Nx(t,r+"declutter-mode"),ne=new _f({src:i,anchorOrigin:x,anchorXUnits:P,anchorYUnits:A,color:M,crossOrigin:N,offset:z,offsetOrigin:j,height:J,width:$,size:X,declutterMode:re});return function(Z){return s&&ne.setOpacity(s(Z)),p&&ne.setDisplacement(p(Z)),g&&ne.setRotation(g(Z)),_&&ne.setRotateWithView(_(Z)),c&&ne.setScale(c(Z)),l&&ne.setAnchor(l(Z)),ne}}function nme(t,e){const r="shape-",n=r+"points",i=r+"radius",l=eC(t[n],n),c=eC(t[i],i),s=wy(t,r,e),p=Ey(t,r,e),g=Dx(t,r+"scale",e),_=Sv(t,r+"displacement",e),x=Io(t,r+"rotation",e),P=Fp(t,r+"rotate-with-view",e),A=Cv(t,r+"radius2"),M=Cv(t,r+"angle"),N=Nx(t,r+"declutter-mode"),z=new kx({points:l,radius:c,radius2:A,angle:M,declutterMode:N});return function(j){return s&&z.setFill(s(j)),p&&z.setStroke(p(j)),_&&z.setDisplacement(_(j)),x&&z.setRotation(x(j)),P&&z.setRotateWithView(P(j)),g&&z.setScale(g(j)),z}}function ime(t,e){const r="circle-",n=wy(t,r,e),i=Ey(t,r,e),l=Io(t,r+"radius",e),c=Dx(t,r+"scale",e),s=Sv(t,r+"displacement",e),p=Io(t,r+"rotation",e),g=Fp(t,r+"rotate-with-view",e),_=Nx(t,r+"declutter-mode"),x=new c_({radius:5,declutterMode:_});return function(P){return l&&x.setRadius(l(P)),n&&x.setFill(n(P)),i&&x.setStroke(i(P)),s&&x.setDisplacement(s(P)),p&&x.setRotation(p(P)),g&&x.setRotateWithView(g(P)),c&&x.setScale(c(P)),x}}function Io(t,e,r){if(!(e in t))return;const n=ql(t[e],rn,r);return function(i){return eC(n(i),e)}}function bl(t,e,r){if(!(e in t))return null;const n=ql(t[e],Ao,r);return function(i){return qH(n(i),e)}}function ome(t,e,r){const n=bl(t,e+"pattern-src",r),i=RL(t,e+"pattern-offset",r),l=RL(t,e+"pattern-size",r),c=AM(t,e+"color",r);return function(s){return{src:n(s),offset:i&&i(s),size:l&&l(s),color:c&&c(s)}}}function Fp(t,e,r){if(!(e in t))return null;const n=ql(t[e],xo,r);return function(i){const l=n(i);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function AM(t,e,r){if(!(e in t))return null;const n=ql(t[e],Ws,r);return function(i){return $H(n(i),e)}}function BH(t,e,r){if(!(e in t))return null;const n=ql(t[e],Bh,r);return function(i){return u_(n(i),e)}}function Sv(t,e,r){if(!(e in t))return null;const n=ql(t[e],Bh,r);return function(i){const l=u_(n(i),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function RL(t,e,r){if(!(e in t))return null;const n=ql(t[e],Bh,r);return function(i){return VH(n(i),e)}}function Dx(t,e,r){if(!(e in t))return null;const n=ql(t[e],Bh|rn,r);return function(i){return ume(n(i),e)}}function Cv(t,e){const r=t[e];if(r!==void 0){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}}function sme(t,e){const r=t[e];if(r!==void 0){if(typeof r=="number")return uo(r);if(!Array.isArray(r))throw new Error(`Expected a number or size array for ${e}`);if(r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return r}}function ame(t,e){const r=t[e];if(r!==void 0){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}}function IL(t,e){const r=t[e];if(r!==void 0){if(r!=="bottom-left"&&r!=="bottom-right"&&r!=="top-left"&&r!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return r}}function ML(t,e){const r=t[e];if(r!==void 0){if(r!=="pixels"&&r!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return r}}function lme(t,e){const r=t[e];if(r!==void 0)return u_(r,e)}function Nx(t,e){const r=t[e];if(r!==void 0){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);if(r!=="declutter"&&r!=="obstacle"&&r!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return r}}function cme(t,e){const r=t[e];if(r!==void 0)return $H(r,e)}function u_(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const r=t.length;for(let n=0;n<r;++n)if(typeof t[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function qH(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function eC(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function $H(t,e){if(typeof t=="string")return t;const r=u_(t,e),n=r.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return r}function VH(t,e){const r=u_(t,e);if(r.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return r}function ume(t,e){return typeof t=="number"?t:VH(t,e)}const OL={RENDER_ORDER:"renderOrder"};class RM extends xM{constructor(e){e=e||{};const r=Object.assign({},e);delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,super(r),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(OL.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,r){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new IH(9)),this.getRenderer().renderDeclutter(e,r)}setRenderOrder(e){this.set(OL.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?jH:e;const r=hme(e);this.styleFunction_=e===null?void 0:Zfe(r),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function hme(t){if(t===void 0)return jH;if(!t)return null;if(typeof t=="function"||t instanceof ns)return t;if(!Array.isArray(t))return AL([t]);if(t.length===0)return[];const e=t.length,r=t[0];if(r instanceof ns){const i=new Array(e);for(let l=0;l<e;++l){const c=t[l];if(!(c instanceof ns))throw new Error("Expected a list of style instances");i[l]=c}return i}if("style"in r){const i=new Array(e);for(let l=0;l<e;++l){const c=t[l];if(!("style"in c))throw new Error("Expected a list of rules with a style property");i[l]=c}return Xfe(i)}return AL(t)}class UH extends jl{constructor(e,r,n,i){super(e),this.inversePixelTransform=r,this.frameState=n,this.context=i}}class dme extends _x{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,r){Sr()}calculateMatrices2D(e){const r=e.viewState,n=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;kl(n,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),oH(i,n)}forEachFeatureAtCoordinate(e,r,n,i,l,c,s,p){let g;const _=r.viewState;function x(X,re,ne,Z){return l.call(c,re,X?ne:null,Z)}const P=_.projection,A=XI(e.slice(),P),M=[[0,0]];if(P.canWrapX()&&i){const X=P.getExtent(),re=En(X);M.push([-re,0],[re,0])}const N=r.layerStatesArray,z=N.length,j=[],$=[];for(let X=0;X<M.length;X++)for(let re=z-1;re>=0;--re){const ne=N[re],Z=ne.layer;if(Z.hasRenderer()&&wM(ne,_)&&s.call(p,Z)){const U=Z.getRenderer(),K=Z.getSource();if(U&&K){const he=K.getWrapX()?A:e,ue=x.bind(null,ne.managed);$[0]=he[0]+M[X][0],$[1]=he[1]+M[X][1],g=U.forEachFeatureAtCoordinate($,r,n,ue,j)}if(g)return g}}if(j.length===0)return;const J=1/j.length;return j.forEach((X,re)=>X.distanceSq+=re*J),j.sort((X,re)=>X.distanceSq-re.distanceSq),j.some(X=>g=X.callback(X.feature,X.layer,X.geometry)),g}hasFeatureAtCoordinate(e,r,n,i,l,c){return this.forEachFeatureAtCoordinate(e,r,n,i,hy,this,l,c)!==void 0}getMap(){return this.map_}renderFrame(e){Sr()}scheduleExpireIconCache(e){Ss.canExpireCache()&&e.postRenderFunctions.push(pme)}}function pme(t,e){Ss.expire()}class fme extends dme{constructor(e){super(e),this.fontChangeListenerKey_=en(Yu,cf.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const r=this.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",this.element_.className=jh+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,r){const n=this.getMap();if(n.hasListener(e)){const i=new UH(e,void 0,r);n.dispatchEvent(i)}}disposeInternal(){Rn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ts.PRECOMPOSE,e);const r=e.layerStatesArray.sort((s,p)=>s.zIndex-p.zIndex);r.some(s=>s.layer instanceof RM&&s.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const l=[];let c=null;for(let s=0,p=r.length;s<p;++s){const g=r[s];e.layerIndex=s;const _=g.layer,x=_.getSourceState();if(!wM(g,i)||x!="ready"&&x!="undefined"){_.unrender();continue}const P=_.render(e,c);P&&(P!==c&&(this.children_.push(P),c=P),l.push(g))}this.declutter(e,l),Rpe(this.element_,this.children_),this.dispatchRenderEvent(Ts.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,r){if(e.declutter){for(let n=r.length-1;n>=0;--n){const i=r[n],l=i.layer;l.getDeclutter()&&l.renderDeclutter(e,i)}r.forEach(n=>n.layer.renderDeferred(e))}}}function GH(t){if(t instanceof xM){t.setMapInternal(null);return}t instanceof Df&&t.getLayers().forEach(GH)}function HH(t,e){if(t instanceof xM){t.setMapInternal(e);return}if(t instanceof Df){const r=t.getLayers().getArray();for(let n=0,i=r.length;n<i;++n)HH(r[n],e)}}let JH=class extends oa{constructor(e){super(),e=e||{},this.on,this.once,this.un;const r=mme(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Yhe,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=As(),this.pixelToCoordinateTransform_=As(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=r.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=r.controls||xH(),this.interactions=r.interactions||PH({onFocusOnly:!0}),this.overlays_=r.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ede(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(lo.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(lo.VIEW,this.handleViewChanged_),this.addChangeListener(lo.SIZE,this.handleSizeChanged_),this.addChangeListener(lo.TARGET,this.handleTargetChanged_),this.setProperties(r.values);const n=this;e.view&&!(e.view instanceof wa)&&e.view.then(function(i){n.setView(new wa(i))}),this.controls.addEventListener(Po.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Po.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Po.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Po.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Po.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Po.REMOVE,i=>{const l=i.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){HH(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const r=e.getId();r!==void 0&&(this.overlayIdIndex_[r.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,r,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,c=n.layerFilter!==void 0?n.layerFilter:hy,s=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,l,s,r,null,c,null)}getFeaturesAtPixel(e,r){const n=[];return this.forEachFeatureAtPixel(e,function(i){n.push(i)},r),n}getAllLayers(){const e=[];function r(n){n.forEach(function(i){i instanceof Df?r(i.getLayers()):e.push(i)})}return r(this.getLayers()),e}hasFeatureAtPixel(e,r){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const i=r.layerFilter!==void 0?r.layerFilter:hy,l=r.hitTolerance!==void 0?r.hitTolerance:0,c=r.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,c,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),i=this.getSize(),l=n.width/i[0],c=n.height/i[1],s="changedTouches"in e?e.changedTouches[0]:e;return[(s.clientX-n.left)/l,(s.clientY-n.top)/c]}getTarget(){return this.get(lo.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return H2(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const r=this.frameState_;return r?Li(r.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const r=this.overlayIdIndex_[e.toString()];return r!==void 0?r:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(lo.LAYERGROUP)}setLayers(e){const r=this.getLayerGroup();if(e instanceof Xs){r.setLayers(e);return}const n=r.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let r=0,n=e.length;r<n;++r){const i=e[r];if(!i.visible)continue;const l=i.layer.getRenderer();if(l&&!l.ready)return!0;const c=i.layer.getSource();if(c&&c.loading)return!0}return!1}getPixelFromCoordinate(e){const r=ml(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(r)}getPixelFromCoordinateInternal(e){const r=this.frameState_;return r?Li(r.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(lo.SIZE)}getView(){return this.get(lo.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,r,n,i){return tde(this.frameState_,e,r,n,i)}handleBrowserEvent(e,r){r=r||e.type;const n=new Ec(r,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const r=e.originalEvent,n=r.type;if(n===Ic.POINTERDOWN||n===Rr.WHEEL||n===Rr.KEYDOWN){const i=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():i,c=r.target,s=l instanceof ShadowRoot?l.host===c?l.host.ownerDocument:l:l===i?i.documentElement:l;if(this.overlayContainerStopEvent_.contains(c)||!s.contains(c))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let l=i.length-1;l>=0;l--){const c=i[l];if(c.getMap()!==this||!c.getActive()||!this.getTargetElement())continue;if(!c.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,r=this.tileQueue_;if(!r.isEmpty()){let i=this.maxTilesLoading_,l=i;if(e){const c=e.viewHints;if(c[ri.ANIMATING]||c[ri.INTERACTING]){const s=Date.now()-e.time>8;i=s?0:8,l=s?0:2}}r.getTilesLoading()<i&&(r.reprioritize(),r.loadMoreTiles(i,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ts.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ts.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new yp(gl.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new yp(gl.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let i=0,l=n.length;i<l;++i)n[i](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,i=this.targetChangeHandlerKeys_.length;n<i;++n)Rn(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Rr.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Rr.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),r=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=r,!r)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{r.appendChild(this.viewport_),this.renderer_||(this.renderer_=new fme(this)),this.mapBrowserEventHandler_=new Xhe(this,this.moveTolerance_);for(const l in ti)this.mapBrowserEventHandler_.addEventListener(ti[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Rr.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Rr.WHEEL,this.boundHandleBrowserEvent_,BG?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const l=r.getRootNode();n=l instanceof ShadowRoot?l.host:r}this.targetChangeHandlerKeys_=[en(n,Rr.KEYDOWN,this.handleBrowserEvent,this),en(n,Rr.KEYPRESS,this.handleBrowserEvent,this)];const i=r.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(r)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Rn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Rn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=en(e,cf.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=en(e,Rr.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Rn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Pc("addlayer",e)),this.layerGroupPropertyListenerKeys_=[en(e,cf.PROPERTYCHANGE,this.render,this),en(e,Rr.CHANGE,this.render,this),en(e,"addlayer",this.handleLayerAdd_,this),en(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let r=0,n=e.length;r<n;++r){const i=e[r].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){GH(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const r=this.getSize(),n=this.getView(),i=this.frameState_;let l=null;if(r!==void 0&&vL(r)&&n&&n.isDef()){const c=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:$2(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:c,wantedTiles:{},mapId:Nr(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const p=isNaN(s.nextRotation)?s.rotation:s.nextRotation;l.nextExtent=$2(s.nextCenter,s.nextResolution,p,r)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),i&&(!this.previousExtent_||!n_(this.previousExtent_)&&!hf(l.extent,this.previousExtent_))&&(this.dispatchEvent(new yp(gl.MOVESTART,this,i)),this.previousExtent_=kf(this.previousExtent_)),this.previousExtent_&&!l.viewHints[ri.ANIMATING]&&!l.viewHints[ri.INTERACTING]&&!hf(l.extent,this.previousExtent_)&&(this.dispatchEvent(new yp(gl.MOVEEND,this,l)),qG(l.extent,this.previousExtent_))),this.dispatchEvent(new yp(gl.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(gl.LOADSTART)||this.hasListener(gl.LOADEND)||this.hasListener(Ts.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const r=this.getLayerGroup();r&&this.handleLayerRemove_(new Pc("removelayer",r)),this.set(lo.LAYERGROUP,e)}setSize(e){this.set(lo.SIZE,e)}setTarget(e){this.set(lo.TARGET,e)}setView(e){if(!e||e instanceof wa){this.set(lo.VIEW,e);return}this.set(lo.VIEW,new wa);const r=this;e.then(function(n){r.setView(new wa(n))})}updateSize(){const e=this.getTargetElement();let r;if(e){const i=getComputedStyle(e),l=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),c=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(l)&&!isNaN(c)&&(r=[Math.max(0,l),Math.max(0,c)],!vL(r)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&YG("No map visible because the map container's width or height are 0."))}const n=this.getSize();r&&(!n||!su(r,n))&&(this.setSize(r),this.updateViewportSize_(r))}updateViewportSize_(e){const r=this.getView();r&&r.setViewportSize(e)}};function mme(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const r={},n=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new Df({layers:t.layers});r[lo.LAYERGROUP]=n,r[lo.TARGET]=t.target,r[lo.VIEW]=t.view instanceof wa?t.view:new wa;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new Xs(t.controls.slice()):(cn(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let l;t.interactions!==void 0&&(Array.isArray(t.interactions)?l=new Xs(t.interactions.slice()):(cn(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=t.interactions));let c;return t.overlays!==void 0?Array.isArray(t.overlays)?c=new Xs(t.overlays.slice()):(cn(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),c=t.overlays):c=new Xs,{controls:i,interactions:l,keyboardEventTarget:e,overlays:c,values:r}}const ao={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class gme extends oa{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Spe,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(ao.ELEMENT,this.handleElementChanged),this.addChangeListener(ao.MAP,this.handleMapChanged),this.addChangeListener(ao.OFFSET,this.handleOffsetChanged),this.addChangeListener(ao.POSITION,this.handlePositionChanged),this.addChangeListener(ao.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(ao.ELEMENT)}getId(){return this.id}getMap(){return this.get(ao.MAP)||null}getOffset(){return this.get(ao.OFFSET)}getPosition(){return this.get(ao.POSITION)}getPositioning(){return this.get(ao.POSITIONING)}handleElementChanged(){bH(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Rn(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=en(e,gl.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(ao.ELEMENT,e)}setMap(e){this.set(ao.MAP,e)}setOffset(e){this.set(ao.OFFSET,e)}setPosition(e){this.set(ao.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const r=this.getMap();if(!r||!r.getTargetElement()||!this.get(ao.POSITION))return;const n=this.getRect(r.getTargetElement(),r.getSize()),i=this.getElement(),l=this.getRect(i,[Ppe(i),Ape(i)]);e=e||{};const c=e.margin===void 0?20:e.margin;if(!ih(n,l)){const s=l[0]-n[0],p=n[2]-l[2],g=l[1]-n[1],_=n[3]-l[3],x=[0,0];if(s<0?x[0]=s-c:p<0&&(x[0]=Math.abs(p)+c),g<0?x[1]=g-c:_<0&&(x[1]=Math.abs(_)+c),x[0]!==0||x[1]!==0){const P=r.getView().getCenterInternal(),A=r.getPixelFromCoordinateInternal(P);if(!A)return;const M=[A[0]+x[0],A[1]+x[1]],N=e.animation||{};r.getView().animateInternal({center:r.getCoordinateFromPixelInternal(M),duration:N.duration,easing:N.easing})}}}getRect(e,r){const n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,l=n.top+window.pageYOffset;return[i,l,i+r[0],l+r[1]]}setPositioning(e){this.set(ao.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),r=this.getPosition();if(!e||!e.isRendered()||!r){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(r),i=e.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(e,r){const n=this.element.style,i=this.getOffset(),l=this.getPositioning();this.setVisible(!0);const c=`${e[0]+i[0]}px`,s=`${e[1]+i[1]}px`;let p="0%",g="0%";l=="bottom-right"||l=="center-right"||l=="top-right"?p="-100%":(l=="bottom-center"||l=="center-center"||l=="top-center")&&(p="-50%"),l=="bottom-left"||l=="bottom-center"||l=="bottom-right"?g="-100%":(l=="center-left"||l=="center-center"||l=="center-right")&&(g="-50%");const _=`translate(${p}, ${g}) translate(${c}, ${s})`;this.rendered.transform_!=_&&(this.rendered.transform_=_,n.transform=_)}getOptions(){return this.options}}const dT="units",yme=[1,2,5],ng=25.4/.28;class kL extends Lf{constructor(e){e=e||{};const r=document.createElement("div");r.style.pointerEvents="none",super({element:r,render:e.render,target:e.target}),this.on,this.once,this.un;const n=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+jh,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(dT,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(dT)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(dT,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const r=e.center,n=e.projection,i=this.getUnits(),l=i=="degrees"?"degrees":"m";let c=vv(n,e.resolution,r,l);const s=this.minWidth_*(this.dpi_||ng)/ng,p=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||ng)/ng:void 0;let g=s*c,_="";if(i=="degrees"){const J=zh.degrees;g*=J,g<J/60?(_="",c*=3600):g<J?(_="",c*=60):_=""}else if(i=="imperial")g<.9144?(_="in",c/=.0254):g<1609.344?(_="ft",c/=.3048):(_="mi",c/=1609.344);else if(i=="nautical")c/=1852,_="NM";else if(i=="metric")g<1e-6?(_="nm",c*=1e9):g<.001?(_="m",c*=1e6):g<1?(_="mm",c*=1e3):g<1e3?_="m":(_="km",c/=1e3);else if(i=="us")g<.9144?(_="in",c*=39.37):g<1609.344?(_="ft",c/=.30480061):(_="mi",c/=1609.3472);else throw new Error("Invalid units");let x=3*Math.floor(Math.log(s*c)/Math.log(10)),P,A,M,N=0,z,j;for(;;){M=Math.floor(x/3);const J=Math.pow(10,M);if(P=yme[(x%3+3)%3]*J,A=Math.round(P/c),isNaN(A)){this.element.style.display="none",this.renderedVisible_=!1;return}if(p!==void 0&&A>=p){P=N,A=z,M=j;break}else if(A>=s)break;N=P,z=A,j=M,++x}const $=this.scaleBar_?this.createScaleBar(A,P,_):P.toFixed(M<0?-M:0)+" "+_;this.renderedHTML_!=$&&(this.innerElement_.innerHTML=$,this.renderedHTML_=$),this.renderedWidth_!=A&&(this.innerElement_.style.width=A+"px",this.renderedWidth_=A),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,r,n){const i=this.getScaleForResolution(),l=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),c=this.scaleBarSteps_,s=e/c,p=[this.createMarker("absolute")];for(let _=0;_<c;++_){const x=_%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";p.push(`<div><div class="ol-scale-singlebar ${x}" style="width: ${s}px;"></div>`+this.createMarker("relative")+(_%2===0||c===2?this.createStepText(_,e,!1,r,n):"")+"</div>")}return p.push(this.createStepText(c,e,!0,r,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+l+"</div>":"")+p.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,r,n,i,l){const s=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+l),p=e===0?-3:r/this.scaleBarSteps_*-1,g=e===0?0:r/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${p}px;text-align: ${e===0?"left":"center"};min-width: ${g}px;left: ${n?r+"px":"unset"};">`+s+"</div>"}getScaleForResolution(){const e=vv(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),r=this.dpi_||ng,n=1e3/25.4;return e*n*r}render(e){const r=e.frameState;r?this.viewState_=r.viewState:this.viewState_=null,this.updateElement_()}}const ig={VERTICAL:0,HORIZONTAL:1};class _me extends Lf{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=ig.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const r=e.className!==void 0?e.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=r+"-thumb "+jh;const i=this.element;i.className=r+" "+jh+" "+Mx,i.appendChild(n),i.addEventListener(Ic.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),i.addEventListener(Ic.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),i.addEventListener(Ic.POINTERUP,this.handleDraggerEnd_.bind(this),!1),i.addEventListener(Rr.CLICK,this.handleContainerClick_.bind(this),!1),n.addEventListener(Rr.CLICK,Hhe,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let r=e.offsetWidth,n=e.offsetHeight;if(r===0&&n===0)return this.sliderInitialized_=!1;const i=getComputedStyle(e);r-=parseFloat(i.paddingRight)+parseFloat(i.paddingLeft),n-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);const l=e.firstElementChild,c=getComputedStyle(l),s=l.offsetWidth+parseFloat(c.marginRight)+parseFloat(c.marginLeft),p=l.offsetHeight+parseFloat(c.marginTop)+parseFloat(c.marginBottom);return this.thumbSize_=[s,p],r>n?(this.direction_=ig.HORIZONTAL,this.widthLimit_=r-s):(this.direction_=ig.VERTICAL,this.heightLimit_=n-p),this.sliderInitialized_=!0}handleContainerClick_(e){const r=this.getMap().getView(),n=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(n),l=r.getConstrainedZoom(r.getZoomForResolution(i));r.animateInternal({zoom:l,duration:this.duration_,easing:Xh})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const r=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(r.style.left),this.startY_=e.clientY-parseFloat(r.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const n=this.handleDraggerDrag_,i=this.handleDraggerEnd_,l=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(en(l,Ic.POINTERMOVE,n,this),en(l,Ic.POINTERUP,i,this))}}}handleDraggerDrag_(e){if(this.dragging_){const r=e.clientX-this.startX_,n=e.clientY-this.startY_,i=this.getRelativePosition_(r,n);this.currentResolution_=this.getResolutionForPosition_(i),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(Rn),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const r=this.getPositionForResolution_(e),n=this.element.firstElementChild;this.direction_==ig.HORIZONTAL?n.style.left=this.widthLimit_*r+"px":n.style.top=this.heightLimit_*r+"px"}getRelativePosition_(e,r){let n;return this.direction_===ig.HORIZONTAL?n=e/this.widthLimit_:n=r/this.heightLimit_,qn(n,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const r=this.getMap().getView().getValueForResolutionFunction();return qn(1-r(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const r=e.frameState.viewState.resolution;this.currentResolution_=r,this.setThumbPosition_(r)}}function LL(t){const e=Math.abs(t),r=Math.floor(e),n=(e-r)*60,i=Math.floor(n),l=(n-i)*60;return{d:r,m:i,s:l}}function bme(t,e){const r=t>=0?"N":"S",n=e>=0?"E":"W",{d:i,m:l,s:c}=LL(t),{d:s,m:p,s:g}=LL(e);return`${String(i).padStart(2,"0")} ${String(l).padStart(2,"0")} ${c.toFixed(2).padStart(5,"0")}${r} ${String(s).padStart(3,"0")} ${String(p).padStart(2,"0")} ${g.toFixed(2).padStart(5,"0")}${n}`}function vme(t,e,r=4){const n=c=>Math.abs(c).toFixed(r),i=t>=0?"N":"S",l=e>=0?"E":"W";return`${n(t)}${i} ${n(e)}${l}`}const Ac=class Ac extends Lf{constructor(r={}){const n=document.createElement("div");n.className=`${r.className??"em-map__location-dms"} ol-unselectable ol-control`;super({element:n});Er(this,"el");Er(this,"mapRef");Er(this,"mode");Er(this,"source");Er(this,"latLonDecimalPlaces");Er(this,"onMoveEnd",()=>{if(!this.mapRef)return;const r=this.mapRef.getView().getCenter();if(!r)return;const[n,i]=ff(r,Ac.PROJ_IN,Ac.PROJ_OUT);this.el.textContent=this.format(i,n)});Er(this,"onPointerMove",r=>{if(!r?.coordinate)return;const[n,i]=ff(r.coordinate,Ac.PROJ_IN,Ac.PROJ_OUT);this.el.textContent=this.format(i,n)});this.el=n,this.mode=r.mode??"latlon",this.source=r.source??"pointer",this.latLonDecimalPlaces=r.latLonDecimalPlaces??5}setMap(r){this.mapRef&&(this.mapRef.un("moveend",this.onMoveEnd),this.mapRef.un("pointermove",this.onPointerMove)),super.setMap(r),this.mapRef=r??void 0,r&&(this.source==="pointer"?r.on("pointermove",this.onPointerMove):(r.on("moveend",this.onMoveEnd),this.onMoveEnd()))}getElement(){return this.el}getText(){return this.el.textContent??""}format(r,n){return this.mode==="dms"?bme(r,n):vme(r,n,this.latLonDecimalPlaces)}};Er(Ac,"PROJ_IN","EPSG:3857"),Er(Ac,"PROJ_OUT","EPSG:4326");let tC=Ac;class Fx extends oa{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const r=e;this.setGeometry(r)}else{const r=e;this.setProperties(r)}}clone(){const e=new Fx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const r=this.getGeometry();r&&e.setGeometry(r.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Rn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=en(e,Rr.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?xme(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function xme(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(cn(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}class Pv extends aH{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Rn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)this.changeEventsKeys_.push(en(e[r],Rr.CHANGE,this.changed,this))}clone(){const e=new Pv(pT(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,r,n,i){if(i<Yh(this.getExtent(),e,r))return i;const l=this.geometries_;for(let c=0,s=l.length;c<s;++c)i=l[c].closestPointXY(e,r,n,i);return i}containsXY(e,r){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)if(n[i].containsXY(e,r))return!0;return!1}computeExtent(e){kf(e);const r=this.geometries_;for(let n=0,i=r.length;n<i;++n)VG(e,r[n].getExtent());return e}getGeometries(){return pT(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const r=this.geometries_;for(let n=0,i=r.length;n<i;++n)r[n].getType()===this.getType()?e=e.concat(r[n].getGeometriesArrayRecursive()):e.push(r[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const r=[],n=this.geometries_;let i=!1;for(let l=0,c=n.length;l<c;++l){const s=n[l],p=s.getSimplifiedGeometry(e);r.push(p),p!==s&&(i=!0)}return i?new Pv(r):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const r=this.geometries_;for(let n=0,i=r.length;n<i;++n)if(r[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,r){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)n[i].rotate(e,r);this.changed()}scale(e,r,n){n||(n=Ol(this.getExtent()));const i=this.geometries_;for(let l=0,c=i.length;l<c;++l)i[l].scale(e,r,n);this.changed()}setGeometries(e){this.setGeometriesArray(pT(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const r=this.geometries_;for(let n=0,i=r.length;n<i;++n)r[n].applyTransform(e);this.changed()}translate(e,r){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)n[i].translate(e,r);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function pT(t){return t.map(e=>e.clone())}function Av(t,e,r,n,i,l,c){let s,p;const g=(r-e)/n;if(g===1)s=e;else if(g===2)s=e,p=i;else if(g!==0){let _=t[e],x=t[e+1],P=0;const A=[0];for(let z=e+n;z<r;z+=n){const j=t[z],$=t[z+1];P+=Math.sqrt((j-_)*(j-_)+($-x)*($-x)),A.push(P),_=j,x=$}const M=i*P,N=$he(A,M);N<0?(p=(M-A[-N-2])/(A[-N-1]-A[-N-2]),s=e+(-N-2)*n):s=e+N*n}c=c>1?c:2,l=l||new Array(c);for(let _=0;_<c;++_)l[_]=s===void 0?NaN:p===void 0?t[s+_]:rs(t[s+_],t[s+n+_],p);return l}function rC(t,e,r,n,i,l){if(r==e)return null;let c;if(i<t[e+n-1])return l?(c=t.slice(e,e+n),c[n-1]=i,c):null;if(t[r-1]<i)return l?(c=t.slice(r-n,r),c[n-1]=i,c):null;if(i==t[e+n-1])return t.slice(e,e+n);let s=e/n,p=r/n;for(;s<p;){const P=s+p>>1;i<t[(P+1)*n-1]?p=P:s=P+1}const g=t[s*n-1];if(i==g)return t.slice((s-1)*n,(s-1)*n+n);const _=t[(s+1)*n-1],x=(i-g)/(_-g);c=[];for(let P=0;P<n-1;++P)c.push(rs(t[(s-1)*n+P],t[s*n+P],x));return c.push(i),c}function wme(t,e,r,n,i,l,c){if(c)return rC(t,e,r[r.length-1],n,i,l);let s;if(i<t[n-1])return l?(s=t.slice(0,n),s[n-1]=i,s):null;if(t[t.length-1]<i)return l?(s=t.slice(t.length-n),s[n-1]=i,s):null;for(let p=0,g=r.length;p<g;++p){const _=r[p];if(e!=_){if(i<t[e+n-1])return null;if(i<=t[_-1])return rC(t,e,_,n,i,!1);e=_}}return null}function IM(t,e,r,n){let i=t[e],l=t[e+1],c=0;for(let s=e+n;s<r;s+=n){const p=t[s],g=t[s+1];c+=Math.sqrt((p-i)*(p-i)+(g-l)*(g-l)),i=p,l=g}return c}class qh extends Qh{constructor(e,r){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,r!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(r,e):this.setCoordinates(e,r)}appendCoordinate(e){Ma(this.flatCoordinates,e),this.changed()}clone(){const e=new qh(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,r,n,i){return i<Yh(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,r,n,i))}forEachSegment(e){return pH(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,r){return this.layout!="XYM"&&this.layout!="XYZM"?null:(r=r!==void 0?r:!1,rC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r))}getCoordinates(){return Lc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,r){return Av(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,this.stride)}getLength(){return IM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const r=[];return r.length=Rx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,0),new qh(r,"XY")}getType(){return"LineString"}intersectsExtent(e){return Ix(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ax(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ty extends Qh{constructor(e,r,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,r);else if(r!==void 0&&n)this.setFlatCoordinates(r,e),this.ends_=n;else{const i=e,l=[],c=[];for(let p=0,g=i.length;p<g;++p){const _=i[p];Ma(l,_.getFlatCoordinates()),c.push(l.length)}const s=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(s,l),this.ends_=c}}appendLineString(e){Ma(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ty(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,r,n,i){return i<Yh(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(aM(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cM(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,r,n,i))}getCoordinateAtM(e,r,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(r=r!==void 0?r:!1,n=n!==void 0?n:!1,wme(this.flatCoordinates,0,this.ends_,this.stride,e,r,n))}getCoordinates(){return my(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new qh(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,r=this.ends_,n=this.layout,i=[];let l=0;for(let c=0,s=r.length;c<s;++c){const p=r[c],g=new qh(e.slice(l,p),n);i.push(g),l=p}return i}getLength(){const e=this.ends_;let r=0,n=0;for(let i=0,l=e.length;i<l;++i)n+=IM(this.flatCoordinates,r,e[i],this.stride),r=e[i];return n}getFlatMidpoints(){const e=[],r=this.flatCoordinates;let n=0;const i=this.ends_,l=this.stride;for(let c=0,s=i.length;c<s;++c){const p=i[c],g=Av(r,n,p,l,.5);Ma(e,g),n=p}return e}getSimplifiedGeometryInternal(e){const r=[],n=[];return r.length=hH(this.flatCoordinates,0,this.ends_,this.stride,e,r,0,n),new Ty(r,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return fpe(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,r){this.setLayout(r,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=s_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class h_ extends Qh{constructor(e,r){super(),r&&!Array.isArray(e[0])?this.setFlatCoordinates(r,e):this.setCoordinates(e,r)}appendPoint(e){Ma(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new h_(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,r,n,i){if(i<Yh(this.getExtent(),e,r))return i;const l=this.flatCoordinates,c=this.stride;for(let s=0,p=l.length;s<p;s+=c){const g=gh(e,r,l[s],l[s+1]);if(g<i){i=g;for(let _=0;_<c;++_)n[_]=l[s+_];n.length=c}}return i}getCoordinates(){return Lc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const r=this.flatCoordinates.length/this.stride;return e<0||r<=e?null:new eu(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,r=this.layout,n=this.stride,i=[];for(let l=0,c=e.length;l<c;l+=n){const s=new eu(e.slice(l,l+n),r);i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const r=this.flatCoordinates,n=this.stride;for(let i=0,l=r.length;i<l;i+=n){const c=r[i],s=r[i+1];if(ZI(e,c,s))return!0}return!1}setCoordinates(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ax(this.flatCoordinates,0,e,this.stride),this.changed()}}function WH(t,e,r,n){const i=[];let l=Os();for(let c=0,s=r.length;c<s;++c){const p=r[c];l=KI(t,e,p[0],n),i.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=p[p.length-1]}return i}class Sy extends Qh{constructor(e,r,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const i=e,l=[],c=[];for(let s=0,p=i.length;s<p;++s){const g=i[s],_=l.length,x=g.getEnds();for(let P=0,A=x.length;P<A;++P)x[P]+=_;Ma(l,g.getFlatCoordinates()),c.push(x)}r=i.length===0?this.getLayout():i[0].getLayout(),e=l,n=c}r!==void 0&&n?(this.setFlatCoordinates(r,e),this.endss_=n):this.setCoordinates(e,r)}appendPolygon(e){let r;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),r=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Ma(this.flatCoordinates,e.getFlatCoordinates()),r=e.getEnds().slice();for(let i=0,l=r.length;i<l;++i)r[i]+=n}this.endss_.push(r),this.changed()}clone(){const e=this.endss_.length,r=new Array(e);for(let i=0;i<e;++i)r[i]=this.endss_[i].slice();const n=new Sy(this.flatCoordinates.slice(),this.layout,r);return n.applyProperties(this),n}closestPointXY(e,r,n,i){return i<Yh(this.getExtent(),e,r)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ape(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lpe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,r,n,i))}containsXY(e,r){return ppe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,r)}getArea(){return spe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let r;return e!==void 0?(r=this.getOrientedFlatCoordinates().slice(),W2(r,0,this.endss_,this.stride,e)):r=this.flatCoordinates,J2(r,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=WH(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=dH(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new h_(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;gH(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=W2(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const r=[],n=[];return r.length=hpe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),r,0,n),new Sy(r,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let r;if(e===0)r=0;else{const l=this.endss_[e-1];r=l[l.length-1]}const n=this.endss_[e].slice(),i=n[n.length-1];if(r!==0)for(let l=0,c=n.length;l<c;++l)n[l]-=r;return new Ll(this.flatCoordinates.slice(r,i),this.layout,n)}getPolygons(){const e=this.layout,r=this.flatCoordinates,n=this.endss_,i=[];let l=0;for(let c=0,s=n.length;c<s;++c){const p=n[c].slice(),g=p[p.length-1];if(l!==0)for(let x=0,P=p.length;x<P;++x)p[x]-=l;const _=new Ll(r.slice(l,g),e,p);i.push(_),l=g}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return mpe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,r){this.setLayout(r,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=uH(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}class ZH{drawCustom(e,r,n,i,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,r,n){}drawFeature(e,r,n){}drawGeometryCollection(e,r,n){}drawLineString(e,r,n){}drawMultiLineString(e,r,n){}drawMultiPoint(e,r,n){}drawMultiPolygon(e,r,n){}drawPoint(e,r,n){}drawPolygon(e,r,n){}drawText(e,r,n){}setFillStrokeStyle(e,r){}setImageStyle(e,r){}setTextStyle(e,r){}}const fr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},B0=[fr.FILL],Nc=[fr.STROKE],lh=[fr.BEGIN_PATH],DL=[fr.CLOSE_PATH];class d_ extends ZH{constructor(e,r,n,i){super(),this.tolerance=e,this.maxExtent=r,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const r=this.pixelRatio;return r==1?e:e.map(function(n){return n*r})}appendFlatPointCoordinates(e,r){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,l=this.coordinates;let c=l.length;for(let s=0,p=e.length;s<p;s+=r)i[0]=e[s],i[1]=e[s+1],uf(n,i)&&(l[c++]=i[0],l[c++]=i[1]);return c}appendFlatLineCoordinates(e,r,n,i,l,c){const s=this.coordinates;let p=s.length;const g=this.getBufferedMaxExtent();c&&(r+=i);let _=e[r],x=e[r+1];const P=this.tmpCoordinate_;let A=!0,M,N,z;for(M=r+i;M<n;M+=i)P[0]=e[M],P[1]=e[M+1],z=B2(g,P),z!==N?(A&&(s[p++]=_,s[p++]=x,A=!1),s[p++]=P[0],s[p++]=P[1]):z===qi.INTERSECTING?(s[p++]=P[0],s[p++]=P[1],A=!1):A=!0,_=P[0],x=P[1],N=z;return(l&&A||M===r+i)&&(s[p++]=_,s[p++]=x),p}drawCustomCoordinates_(e,r,n,i,l){for(let c=0,s=n.length;c<s;++c){const p=n[c],g=this.appendFlatLineCoordinates(e,r,p,i,!1,!1);l.push(g),r=p}return r}drawCustom(e,r,n,i,l){this.beginGeometry(e,r,l);const c=e.getType(),s=e.getStride(),p=this.coordinates.length;let g,_,x,P,A;switch(c){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),P=[];const M=e.getEndss();A=0;for(let N=0,z=M.length;N<z;++N){const j=[];A=this.drawCustomCoordinates_(g,A,M[N],s,j),P.push(j)}this.instructions.push([fr.CUSTOM,p,P,e,n,J2,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,P,e,i||n,J2,l]);break;case"Polygon":case"MultiLineString":x=[],g=c=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),A=this.drawCustomCoordinates_(g,0,e.getEnds(),s,x),this.instructions.push([fr.CUSTOM,p,x,e,n,my,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,x,e,i||n,my,l]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),_=this.appendFlatLineCoordinates(g,0,g.length,s,!1,!1),this.instructions.push([fr.CUSTOM,p,_,e,n,Lc,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,_,e,i||n,Lc,l]);break;case"MultiPoint":g=e.getFlatCoordinates(),_=this.appendFlatPointCoordinates(g,s),_>p&&(this.instructions.push([fr.CUSTOM,p,_,e,n,Lc,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,_,e,i||n,Lc,l]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),_=this.coordinates.length,this.instructions.push([fr.CUSTOM,p,_,e,n,void 0,l]),this.hitDetectionInstructions.push([fr.CUSTOM,p,_,e,i||n,void 0,l]);break}this.endGeometry(r)}beginGeometry(e,r,n){this.beginGeometryInstruction1_=[fr.BEGIN_GEOMETRY,r,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fr.BEGIN_GEOMETRY,r,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let r;const n=e.length;let i,l,c=-1;for(r=0;r<n;++r)i=e[r],l=i[0],l==fr.END_GEOMETRY?c=r:l==fr.BEGIN_GEOMETRY&&(i[2]=r,Uhe(this.hitDetectionInstructions,c,r),c=-1)}fillStyleToState(e,r={}){if(e){const n=e.getColor();r.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,r.fillStyle=Pa(n||Ro)}else r.fillStyle=void 0;return r}strokeStyleToState(e,r={}){if(e){const n=e.getColor();r.strokeStyle=Pa(n||by);const i=e.getLineCap();r.lineCap=i!==void 0?i:gf;const l=e.getLineDash();r.lineDash=l?l.slice():Pl;const c=e.getLineDashOffset();r.lineDashOffset=c||Al;const s=e.getLineJoin();r.lineJoin=s!==void 0?s:yf;const p=e.getWidth();r.lineWidth=p!==void 0?p:xy;const g=e.getMiterLimit();r.miterLimit=g!==void 0?g:_y,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0;return r}setFillStrokeStyle(e,r){const n=this.state;this.fillStyleToState(e,n),this.strokeStyleToState(r,n)}createFill(e){const r=e.fillStyle,n=[fr.SET_FILL_STYLE,r];return typeof r!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,r){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(this.instructions.push(r.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,r){const n=e.strokeStyle,i=e.lineCap,l=e.lineDash,c=e.lineDashOffset,s=e.lineJoin,p=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=i||l!=e.currentLineDash&&!su(e.currentLineDash,l)||e.currentLineDashOffset!=c||e.currentLineJoin!=s||e.currentLineWidth!=p||e.currentMiterLimit!=g)&&(r.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=i,e.currentLineDash=l,e.currentLineDashOffset=c,e.currentLineJoin=s,e.currentLineWidth=p,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const r=[fr.END_GEOMETRY,e];this.instructions.push(r),this.hitDetectionInstructions.push(r)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=qG(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Hc(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Eme extends d_{constructor(e,r,n,i){super(e,r,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,r,n){if(!this.image_||this.maxExtent&&!uf(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,r,n);const i=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length,s=this.appendFlatPointCoordinates(i,l);this.instructions.push([fr.DRAW_IMAGE,c,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,c,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(r)}drawMultiPoint(e,r,n){if(!this.image_)return;this.beginGeometry(e,r,n);const i=e.getFlatCoordinates(),l=[];for(let p=0,g=i.length;p<g;p+=e.getStride())(!this.maxExtent||uf(this.maxExtent,i.slice(p,p+2)))&&l.push(i[p],i[p+1]);const c=this.coordinates.length,s=this.appendFlatPointCoordinates(l,2);this.instructions.push([fr.DRAW_IMAGE,c,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,c,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(r)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,r){const n=e.getAnchor(),i=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=r}}class Tme extends d_{constructor(e,r,n,i){super(e,r,n,i)}drawFlatCoordinates_(e,r,n,i){const l=this.coordinates.length,c=this.appendFlatLineCoordinates(e,r,n,i,!1,!1),s=[fr.MOVE_TO_LINE_TO,l,c];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}drawLineString(e,r,n){const i=this.state,l=i.strokeStyle,c=i.lineWidth;if(l===void 0||c===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,r,n),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,Al],lh);const s=e.getFlatCoordinates(),p=e.getStride();this.drawFlatCoordinates_(s,0,s.length,p),this.hitDetectionInstructions.push(Nc),this.endGeometry(r)}drawMultiLineString(e,r,n){const i=this.state,l=i.strokeStyle,c=i.lineWidth;if(l===void 0||c===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,r,n),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,Al],lh);const s=e.getEnds(),p=e.getFlatCoordinates(),g=e.getStride();let _=0;for(let x=0,P=s.length;x<P;++x)_=this.drawFlatCoordinates_(p,_,s[x],g);this.hitDetectionInstructions.push(Nc),this.endGeometry(r)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Nc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Nc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(lh)}}class NL extends d_{constructor(e,r,n,i){super(e,r,n,i)}drawFlatCoordinatess_(e,r,n,i){const l=this.state,c=l.fillStyle!==void 0,s=l.strokeStyle!==void 0,p=n.length;this.instructions.push(lh),this.hitDetectionInstructions.push(lh);for(let g=0;g<p;++g){const _=n[g],x=this.coordinates.length,P=this.appendFlatLineCoordinates(e,r,_,i,!0,!s),A=[fr.MOVE_TO_LINE_TO,x,P];this.instructions.push(A),this.hitDetectionInstructions.push(A),s&&(this.instructions.push(DL),this.hitDetectionInstructions.push(DL)),r=_}return c&&(this.instructions.push(B0),this.hitDetectionInstructions.push(B0)),s&&(this.instructions.push(Nc),this.hitDetectionInstructions.push(Nc)),r}drawCircle(e,r,n){const i=this.state,l=i.fillStyle,c=i.strokeStyle;if(l===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Ro]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,Al]);const s=e.getFlatCoordinates(),p=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,p,!1,!1);const _=[fr.CIRCLE,g];this.instructions.push(lh,_),this.hitDetectionInstructions.push(lh,_),i.fillStyle!==void 0&&(this.instructions.push(B0),this.hitDetectionInstructions.push(B0)),i.strokeStyle!==void 0&&(this.instructions.push(Nc),this.hitDetectionInstructions.push(Nc)),this.endGeometry(r)}drawPolygon(e,r,n){const i=this.state,l=i.fillStyle,c=i.strokeStyle;if(l===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Ro]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,Al]);const s=e.getEnds(),p=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(p,0,s,g),this.endGeometry(r)}drawMultiPolygon(e,r,n){const i=this.state,l=i.fillStyle,c=i.strokeStyle;if(l===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Ro]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,Al]);const s=e.getEndss(),p=e.getOrientedFlatCoordinates(),g=e.getStride();let _=0;for(let x=0,P=s.length;x<P;++x)_=this.drawFlatCoordinatess_(p,_,s[x],g);this.endGeometry(r)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const r=this.coordinates;for(let n=0,i=r.length;n<i;++n)r[n]=Ku(r[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Sme(t,e,r,n,i){const l=[];let c=r,s=0,p=e.slice(r,2);for(;s<t&&c+i<n;){const[g,_]=p.slice(-2),x=e[c+i],P=e[c+i+1],A=Math.sqrt((x-g)*(x-g)+(P-_)*(P-_));if(s+=A,s>=t){const M=(t-s+A)/A,N=rs(g,x,M),z=rs(_,P,M);p.push(N,z),l.push(p),p=[N,z],s==t&&(c+=i),s=0}else if(s<t)p.push(e[c+i],e[c+i+1]),c+=i;else{const M=A-s,N=rs(g,x,M/A),z=rs(_,P,M/A);p.push(N,z),l.push(p),p=[N,z],s=0,c+=i}}return s>0&&l.push(p),l}function Cme(t,e,r,n,i){let l=r,c=r,s=0,p=0,g=r,_,x,P,A,M,N,z,j,$,J;for(x=r;x<n;x+=i){const X=e[x],re=e[x+1];M!==void 0&&($=X-M,J=re-N,A=Math.sqrt($*$+J*J),z!==void 0&&(p+=P,_=Math.acos((z*$+j*J)/(P*A)),_>t&&(p>s&&(s=p,l=g,c=x),p=0,g=x-i)),P=A,z=$,j=J),M=X,N=re}return p+=A,p>s?[g,x]:[l,c]}const Rv={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Pme extends d_{constructor(e,r,n,i){super(e,r,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ro]={fillStyle:Ro},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,r,n){const i=this.textFillState_,l=this.textStrokeState_,c=this.textState_;if(this.text_===""||!c||!i&&!l)return;const s=this.coordinates;let p=s.length;const g=e.getType();let _=null,x=e.getStride();if(c.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!ui(this.maxExtent,e.getExtent()))return;let P;if(_=e.getFlatCoordinates(),g=="LineString")P=[_.length];else if(g=="MultiLineString")P=e.getEnds();else if(g=="Polygon")P=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const z=e.getEndss();P=[];for(let j=0,$=z.length;j<$;++j)P.push(z[j][0])}this.beginGeometry(e,r,n);const A=c.repeat,M=A?void 0:c.textAlign;let N=0;for(let z=0,j=P.length;z<j;++z){let $;A?$=Sme(A*this.resolution,_,N,P[z],x):$=[_.slice(N,P[z])];for(let J=0,X=$.length;J<X;++J){const re=$[J];let ne=0,Z=re.length;if(M==null){const K=Cme(c.maxAngle,re,0,re.length,2);ne=K[0],Z=K[1]}for(let K=ne;K<Z;K+=x)s.push(re[K],re[K+1]);const U=s.length;N=P[z],this.drawChars_(p,U),p=U}}this.endGeometry(r)}else{let P=c.overflow?null:[];switch(g){case"Point":case"MultiPoint":_=e.getFlatCoordinates();break;case"LineString":_=e.getFlatMidpoint();break;case"Circle":_=e.getCenter();break;case"MultiLineString":_=e.getFlatMidpoints(),x=2;break;case"Polygon":_=e.getFlatInteriorPoint(),c.overflow||P.push(_[2]/this.resolution),x=3;break;case"MultiPolygon":const X=e.getFlatInteriorPoints();_=[];for(let re=0,ne=X.length;re<ne;re+=3)c.overflow||P.push(X[re+2]/this.resolution),_.push(X[re],X[re+1]);if(_.length===0)return;x=2;break}const A=this.appendFlatPointCoordinates(_,x);if(A===p)return;if(P&&(A-p)/2!==_.length/x){let X=p/2;P=P.filter((re,ne)=>{const Z=s[(X+ne)*2]===_[ne*x]&&s[(X+ne)*2+1]===_[ne*x+1];return Z||--X,Z})}this.saveTextStates_();const M=c.backgroundFill?this.createFill(this.fillStyleToState(c.backgroundFill)):null,N=c.backgroundStroke?this.createStroke(this.strokeStyleToState(c.backgroundStroke)):null;this.beginGeometry(e,r,n);let z=c.padding;if(z!=ah&&(c.scale[0]<0||c.scale[1]<0)){let X=c.padding[0],re=c.padding[1],ne=c.padding[2],Z=c.padding[3];c.scale[0]<0&&(re=-re,Z=-Z),c.scale[1]<0&&(X=-X,ne=-ne),z=[X,re,ne,Z]}const j=this.pixelRatio;this.instructions.push([fr.DRAW_IMAGE,p,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,z==ah?ah:z.map(function(X){return X*j}),M,N,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,P]);const $=1/j,J=M?M.slice(0):null;J&&(J[1]=Ro),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,p,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[$,$],NaN,this.declutterMode_,this.declutterImageWithText_,z,J,N,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ro:this.fillKey_,this.textOffsetX_,this.textOffsetY_,P]),this.endGeometry(r)}}saveTextStates_(){const e=this.textStrokeState_,r=this.textState_,n=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:r.font,textAlign:r.textAlign||vy,justify:r.justify,textBaseline:r.textBaseline||Tv,scale:r.scale});const c=this.fillKey_;n&&(c in this.fillStates||(this.fillStates[c]={fillStyle:n.fillStyle}))}drawChars_(e,r){const n=this.textStrokeState_,i=this.textState_,l=this.strokeKey_,c=this.textKey_,s=this.fillKey_;this.saveTextStates_();const p=this.pixelRatio,g=Rv[i.textBaseline],_=this.textOffsetY_*p,x=this.text_,P=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([fr.DRAW_CHARS,e,r,g,i.overflow,s,i.maxAngle,p,_,l,P*p,x,c,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fr.DRAW_CHARS,e,r,g,i.overflow,s&&Ro,i.maxAngle,p,_,l,P*p,x,c,1/p,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,r){let n,i,l;if(!e)this.text_="";else{const c=e.getFill();c?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Pa(c.getColor()||Ro)):(i=null,this.textFillState_=i);const s=e.getStroke();if(!s)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const N=s.getLineDash(),z=s.getLineDashOffset(),j=s.getWidth(),$=s.getMiterLimit();l.lineCap=s.getLineCap()||gf,l.lineDash=N?N.slice():Pl,l.lineDashOffset=z===void 0?Al:z,l.lineJoin=s.getLineJoin()||yf,l.lineWidth=j===void 0?xy:j,l.miterLimit=$===void 0?_y:$,l.strokeStyle=Pa(s.getColor()||by)}n=this.textState_;const p=e.getFont()||NH;Ufe(p);const g=e.getScaleArray();n.overflow=e.getOverflow(),n.font=p,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Tv,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||ah,n.scale=g===void 0?[1,1]:g;const _=e.getOffsetX(),x=e.getOffsetY(),P=e.getRotateWithView(),A=e.getKeepUpright(),M=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=_===void 0?0:_,this.textOffsetY_=x===void 0?0:x,this.textRotateWithView_=P===void 0?!1:P,this.textKeepUpright_=A===void 0?!0:A,this.textRotation_=M===void 0?0:M,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Nr(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Nr(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=r}}const Ame={Circle:NL,Default:d_,Image:Eme,LineString:Tme,Polygon:NL,Text:Pme};class KH{constructor(e,r,n,i){this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const r in this.buildersByZIndex_){e[r]=e[r]||{};const n=this.buildersByZIndex_[r];for(const i in n){const l=n[i].finish();e[r][i]=l}}return e}getBuilder(e,r){const n=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);let l=i[r];if(l===void 0){const c=Ame[r];l=new c(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[r]=l}return l}}function Rme(t,e,r,n,i,l,c,s,p,g,_,x,P=!0){let A=t[e],M=t[e+1],N=0,z=0,j=0,$=0;function J(){N=A,z=M,e+=n,A=t[e],M=t[e+1],$+=j,j=Math.sqrt((A-N)*(A-N)+(M-z)*(M-z))}do J();while(e<r-n&&$+j<l);let X=j===0?0:(l-$)/j;const re=rs(N,A,X),ne=rs(z,M,X),Z=e-n,U=$,K=l+s*p(g,i,_);for(;e<r-n&&$+j<K;)J();X=j===0?0:(K-$)/j;const he=rs(N,A,X),ue=rs(z,M,X);let Ee=!1;if(P)if(x){const xe=[re,ne,he,ue];sH(xe,0,4,2,x,xe,xe),Ee=xe[0]>xe[2]}else Ee=re>he;const Ie=Math.PI,ee=[],pe=Z+n===e;e=Z,j=0,$=U,A=t[e],M=t[e+1];let ve;if(pe){J(),ve=Math.atan2(M-z,A-N),Ee&&(ve+=ve>0?-Ie:Ie);const xe=(he+re)/2,tt=(ue+ne)/2;return ee[0]=[xe,tt,(K-l)/2,ve,i],ee}i=i.replace(/\n/g," ");for(let xe=0,tt=i.length;xe<tt;){J();let Ke=Math.atan2(M-z,A-N);if(Ee&&(Ke+=Ke>0?-Ie:Ie),ve!==void 0){let Pt=Ke-ve;if(Pt+=Pt>Ie?-2*Ie:Pt<-Ie?2*Ie:0,Math.abs(Pt)>c)return null}ve=Ke;const Ze=xe;let bt=0;for(;xe<tt;++xe){const Pt=Ee?tt-xe-1:xe,dt=s*p(g,i[Pt],_);if(e+n<r&&$+j<l+bt+dt/2)break;bt+=dt}if(xe===Ze)continue;const qe=Ee?i.substring(tt-Ze,tt-xe):i.substring(Ze,xe);X=j===0?0:(l+bt/2-$)/j;const kt=rs(N,A,X),Jt=rs(z,M,X);ee.push([kt,Jt,bt/2,Ke,qe]),l+=bt}return ee}class MM{constructor(){Er(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Ev(),{get:(e,r)=>{if(typeof Ev()[r]=="function")return this.push_(r),this.pushMethodArgs_},set:(e,r,n)=>(this.push_(r,n),!0)})}push_(...e){const r=this.instructions_,n=this.zIndex+this.offset_;r[n]||(r[n]=[]),r[n].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(r=>{for(let n=0,i=r.length;n<i;++n){const l=r[n];if(typeof l=="function"){l(e);continue}const c=r[++n];if(typeof e[l]=="function")e[l](...c);else{if(typeof c=="function"){e[l]=c(e);continue}e[l]=c}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ap=Os(),mc=[],cl=[],ul=[],gc=[];function FL(t){return t[3].declutterBox}const zL=new RegExp("[-----]");function fT(t,e){return e==="start"?e=zL.test(t)?"right":"left":e==="end"&&(e=zL.test(t)?"left":"right"),Rv[e]}function Ime(t,e,r){return r>0&&t.push(`
`,""),t.push(e,""),t}function Mme(t,e,r){return r%2===0&&(t+=e),t}class Ome{constructor(e,r,n,i,l){this.overlaps=n,this.pixelRatio=r,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=As(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new MM:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,r,n,i){const l=e+r+n+i;if(this.labels_[l])return this.labels_[l];const c=i?this.strokeStates[i]:null,s=n?this.fillStates[n]:null,p=this.textStates[r],g=this.pixelRatio,_=[p.scale[0]*g,p.scale[1]*g],x=p.justify?Rv[p.justify]:fT(Array.isArray(e)?e[0]:e,p.textAlign||vy),P=i&&c.lineWidth?c.lineWidth:0,A=Array.isArray(e)?e:String(e).split(`
`).reduce(Ime,[]),{width:M,height:N,widths:z,heights:j,lineWidths:$}=Hfe(p,A),J=M+P,X=[],re=(J+2)*_[0],ne=(N+P)*_[1],Z={width:re<0?Math.floor(re):Math.ceil(re),height:ne<0?Math.floor(ne):Math.ceil(ne),contextInstructions:X};(_[0]!=1||_[1]!=1)&&X.push("scale",_),i&&(X.push("strokeStyle",c.strokeStyle),X.push("lineWidth",P),X.push("lineCap",c.lineCap),X.push("lineJoin",c.lineJoin),X.push("miterLimit",c.miterLimit),X.push("setLineDash",[c.lineDash]),X.push("lineDashOffset",c.lineDashOffset)),n&&X.push("fillStyle",s.fillStyle),X.push("textBaseline","middle"),X.push("textAlign","center");const U=.5-x;let K=x*J+U*P;const he=[],ue=[];let Ee=0,Ie=0,ee=0,pe=0,ve;for(let xe=0,tt=A.length;xe<tt;xe+=2){const Ke=A[xe];if(Ke===`
`){Ie+=Ee,Ee=0,K=x*J+U*P,++pe;continue}const Ze=A[xe+1]||p.font;Ze!==ve&&(i&&he.push("font",Ze),n&&ue.push("font",Ze),ve=Ze),Ee=Math.max(Ee,j[ee]);const bt=[Ke,K+U*z[ee]+x*(z[ee]-$[pe]),.5*(P+Ee)+Ie];K+=z[ee],i&&he.push("strokeText",bt),n&&ue.push("fillText",bt),++ee}return Array.prototype.push.apply(X,he),Array.prototype.push.apply(X,ue),this.labels_[l]=Z,Z}replayTextBackground_(e,r,n,i,l,c,s){e.beginPath(),e.moveTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,l),e.lineTo.apply(e,r),c&&(this.alignAndScaleFill_=c[2],e.fillStyle=c[1],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())}calculateImageOrLabelDimensions_(e,r,n,i,l,c,s,p,g,_,x,P,A,M,N,z){s*=P[0],p*=P[1];let j=n-s,$=i-p;const J=l+g>e?e-g:l,X=c+_>r?r-_:c,re=M[3]+J*P[0]+M[1],ne=M[0]+X*P[1]+M[2],Z=j-M[3],U=$-M[0];(N||x!==0)&&(mc[0]=Z,gc[0]=Z,mc[1]=U,cl[1]=U,cl[0]=Z+re,ul[0]=cl[0],ul[1]=U+ne,gc[1]=ul[1]);let K;return x!==0?(K=kl(As(),n,i,1,1,x,-n,-i),Li(K,mc),Li(K,cl),Li(K,ul),Li(K,gc),Ml(Math.min(mc[0],cl[0],ul[0],gc[0]),Math.min(mc[1],cl[1],ul[1],gc[1]),Math.max(mc[0],cl[0],ul[0],gc[0]),Math.max(mc[1],cl[1],ul[1],gc[1]),ap)):Ml(Math.min(Z,Z+re),Math.min(U,U+ne),Math.max(Z,Z+re),Math.max(U,U+ne),ap),A&&(j=Math.round(j),$=Math.round($)),{drawImageX:j,drawImageY:$,drawImageW:J,drawImageH:X,originX:g,originY:_,declutterBox:{minX:ap[0],minY:ap[1],maxX:ap[2],maxY:ap[3],value:z},canvasTransform:K,scale:P}}replayImageOrLabel_(e,r,n,i,l,c,s){const p=!!(c||s),g=i.declutterBox,_=s?s[2]*i.scale[0]/2:0;return g.minX-_<=r[0]&&g.maxX+_>=0&&g.minY-_<=r[1]&&g.maxY+_>=0&&(p&&this.replayTextBackground_(e,mc,cl,ul,gc,c,s),Jfe(e,i.canvasTransform,l,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const r=this.alignAndScaleFill_;if(r){const n=Li(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(n[0]%i,n[1]%i),r!==1&&e.scale(r,r),e.rotate(this.viewRotation_)}e.fill(),r&&e.restore()}setStrokeStyle_(e,r){e.strokeStyle=r[1],r[1]&&(e.lineWidth=r[2],e.lineCap=r[3],e.lineJoin=r[4],e.miterLimit=r[5],e.lineDashOffset=r[7],e.setLineDash(r[6]))}drawLabelWithPointPlacement_(e,r,n,i){const l=this.textStates[r],c=this.createLabel(e,r,i,n),s=this.strokeStates[n],p=this.pixelRatio,g=fT(Array.isArray(e)?e[0]:e,l.textAlign||vy),_=Rv[l.textBaseline||Tv],x=s&&s.lineWidth?s.lineWidth:0,P=c.width/p-2*l.scale[0],A=g*P+2*(.5-g)*x,M=_*c.height/p+2*(.5-_)*x;return{label:c,anchorX:A,anchorY:M}}execute_(e,r,n,i,l,c,s,p){const g=this.zIndexContext_;let _;this.pixelCoordinates_&&su(n,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=Jc(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Kde(this.renderedTransform_,n));let x=0;const P=i.length;let A=0,M,N,z,j,$,J,X,re,ne,Z,U,K,he,ue=0,Ee=0;const Ie=this.coordinateCache_,ee=this.viewRotation_,pe=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,ve={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ee},xe=this.instructions!=i||this.overlaps?0:200;let tt,Ke,Ze,bt;for(;x<P;){const qe=i[x];switch(qe[0]){case fr.BEGIN_GEOMETRY:tt=qe[1],bt=qe[3],tt.getGeometry()?s!==void 0&&!ui(s,bt.getExtent())?x=qe[2]+1:++x:x=qe[2],g&&(g.zIndex=qe[4]);break;case fr.BEGIN_PATH:ue>xe&&(this.fill_(e),ue=0),Ee>xe&&(e.stroke(),Ee=0),!ue&&!Ee&&(e.beginPath(),$=NaN,J=NaN),++x;break;case fr.CIRCLE:A=qe[1];const Jt=_[A],Pt=_[A+1],dt=_[A+2],er=_[A+3],Wt=dt-Jt,ar=er-Pt,_t=Math.sqrt(Wt*Wt+ar*ar);e.moveTo(Jt+_t,Pt),e.arc(Jt,Pt,_t,0,2*Math.PI,!0),++x;break;case fr.CLOSE_PATH:e.closePath(),++x;break;case fr.CUSTOM:A=qe[1],M=qe[2];const Ve=qe[3],pt=qe[4],lt=qe[5];ve.geometry=Ve,ve.feature=tt,x in Ie||(Ie[x]=[]);const Tt=Ie[x];lt?lt(_,A,M,2,Tt):(Tt[0]=_[A],Tt[1]=_[A+1],Tt.length=2),g&&(g.zIndex=qe[6]),pt(Tt,ve),++x;break;case fr.DRAW_IMAGE:A=qe[1],M=qe[2],ne=qe[3],N=qe[4],z=qe[5];let vt=qe[6];const Dt=qe[7],Yt=qe[8],Bt=qe[9],xr=qe[10];let $r=qe[11];const Ir=qe[12];let Zr=qe[13];j=qe[14]||"declutter";const yr=qe[15];if(!ne&&qe.length>=20){Z=qe[19],U=qe[20],K=qe[21],he=qe[22];const Nt=this.drawLabelWithPointPlacement_(Z,U,K,he);ne=Nt.label,qe[3]=ne;const Ht=qe[23];N=(Nt.anchorX-Ht)*this.pixelRatio,qe[4]=N;const _r=qe[24];z=(Nt.anchorY-_r)*this.pixelRatio,qe[5]=z,vt=ne.height,qe[6]=vt,Zr=ne.width,qe[13]=Zr}let ur;qe.length>25&&(ur=qe[25]);let lr,nr,mr;qe.length>17?(lr=qe[16],nr=qe[17],mr=qe[18]):(lr=ah,nr=null,mr=null),xr&&pe?$r+=ee:!xr&&!pe&&($r-=ee);let Yr=0;for(;A<M;A+=2){if(ur&&ur[Yr++]<Zr/this.pixelRatio)continue;const Nt=this.calculateImageOrLabelDimensions_(ne.width,ne.height,_[A],_[A+1],Zr,vt,N,z,Yt,Bt,$r,Ir,l,lr,!!nr||!!mr,tt),Ht=[e,r,ne,Nt,Dt,nr,mr];if(p){let _r,ut,Lt;if(yr){const jt=M-A;if(!yr[jt]){yr[jt]={args:Ht,declutterMode:j};continue}const Pr=yr[jt];_r=Pr.args,ut=Pr.declutterMode,delete yr[jt],Lt=FL(_r)}let Cr,Kt;if(_r&&(ut!=="declutter"||!p.collides(Lt))&&(Cr=!0),(j!=="declutter"||!p.collides(Nt.declutterBox))&&(Kt=!0),ut==="declutter"&&j==="declutter"){const jt=Cr&&Kt;Cr=jt,Kt=jt}Cr&&(ut!=="none"&&p.insert(Lt),this.replayImageOrLabel_.apply(this,_r)),Kt&&(j!=="none"&&p.insert(Nt.declutterBox),this.replayImageOrLabel_.apply(this,Ht))}else this.replayImageOrLabel_.apply(this,Ht)}++x;break;case fr.DRAW_CHARS:const ke=qe[1],oe=qe[2],ae=qe[3],de=qe[4];he=qe[5];const Te=qe[6],Le=qe[7],je=qe[8];K=qe[9];const Je=qe[10];Z=qe[11],Array.isArray(Z)&&(Z=Z.reduce(Mme,"")),U=qe[12];const Fe=[qe[13],qe[13]];j=qe[14]||"declutter";const et=qe[15],ct=this.textStates[U],it=ct.font,Ot=[ct.scale[0]*Le,ct.scale[1]*Le];let $e;it in this.widths_?$e=this.widths_[it]:($e={},this.widths_[it]=$e);const Xt=IM(_,ke,oe,2),cr=Math.abs(Ot[0])*SL(it,Z,$e);if(de||cr<=Xt){const Nt=this.textStates[U].textAlign,Ht=(Xt-cr)*fT(Z,Nt),_r=Rme(_,ke,oe,2,Z,Ht,Te,Math.abs(Ot[0]),SL,it,$e,pe?0:this.viewRotation_,et);e:if(_r){const ut=[];let Lt,Cr,Kt,jt,Pr;if(K)for(Lt=0,Cr=_r.length;Lt<Cr;++Lt){Pr=_r[Lt],Kt=Pr[4],jt=this.createLabel(Kt,U,"",K),N=Pr[2]+(Ot[0]<0?-Je:Je),z=ae*jt.height+(.5-ae)*2*Je*Ot[1]/Ot[0]-je;const yt=this.calculateImageOrLabelDimensions_(jt.width,jt.height,Pr[0],Pr[1],jt.width,jt.height,N,z,0,0,Pr[3],Fe,!1,ah,!1,tt);if(p&&j==="declutter"&&p.collides(yt.declutterBox))break e;ut.push([e,r,jt,yt,1,null,null])}if(he)for(Lt=0,Cr=_r.length;Lt<Cr;++Lt){Pr=_r[Lt],Kt=Pr[4],jt=this.createLabel(Kt,U,he,""),N=Pr[2],z=ae*jt.height-je;const yt=this.calculateImageOrLabelDimensions_(jt.width,jt.height,Pr[0],Pr[1],jt.width,jt.height,N,z,0,0,Pr[3],Fe,!1,ah,!1,tt);if(p&&j==="declutter"&&p.collides(yt.declutterBox))break e;ut.push([e,r,jt,yt,1,null,null])}p&&j!=="none"&&p.load(ut.map(FL));for(let yt=0,In=ut.length;yt<In;++yt)this.replayImageOrLabel_.apply(this,ut[yt])}}++x;break;case fr.END_GEOMETRY:if(c!==void 0){tt=qe[1];const Nt=c(tt,bt,j);if(Nt)return Nt}++x;break;case fr.FILL:xe?ue++:this.fill_(e),++x;break;case fr.MOVE_TO_LINE_TO:for(A=qe[1],M=qe[2],Ke=_[A],Ze=_[A+1],e.moveTo(Ke,Ze),$=Ke+.5|0,J=Ze+.5|0,A+=2;A<M;A+=2)Ke=_[A],Ze=_[A+1],X=Ke+.5|0,re=Ze+.5|0,(A==M-2||X!==$||re!==J)&&(e.lineTo(Ke,Ze),$=X,J=re);++x;break;case fr.SET_FILL_STYLE:this.alignAndScaleFill_=qe[2],ue&&(this.fill_(e),ue=0,Ee&&(e.stroke(),Ee=0)),e.fillStyle=qe[1],++x;break;case fr.SET_STROKE_STYLE:Ee&&(e.stroke(),Ee=0),this.setStrokeStyle_(e,qe),++x;break;case fr.STROKE:xe?Ee++:e.stroke(),++x;break;default:++x;break}}ue&&this.fill_(e),Ee&&e.stroke()}execute(e,r,n,i,l,c){this.viewRotation_=i,this.execute_(e,r,n,this.instructions,l,void 0,void 0,c)}executeHitDetection(e,r,n,i,l){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],r,this.hitDetectionInstructions,!0,i,l)}}const Xu=["Polygon","Circle","LineString","Image","Text","Default"],Iv=["Image","Text"],kme=Xu.filter(t=>!Iv.includes(t));class YH{constructor(e,r,n,i,l,c,s){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=c,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=As(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,s)}clip(e,r){const n=this.getClipCoords(r);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,r){for(const n in e){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const l=e[n];for(const c in l){const s=l[c];i[c]=new Ome(this.resolution_,this.pixelRatio_,this.overlaps_,s,r)}}}hasExecutors(e){for(const r in this.executorsByZIndex_){const n=this.executorsByZIndex_[r];for(let i=0,l=e.length;i<l;++i)if(e[i]in n)return!0}return!1}forEachFeatureAtCoordinate(e,r,n,i,l,c){i=Math.round(i);const s=i*2+1,p=kl(this.hitDetectionTransform_,i+.5,i+.5,1/r,-1/r,-n,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=Ei(s,s));const _=this.hitDetectionContext_;_.canvas.width!==s||_.canvas.height!==s?(_.canvas.width=s,_.canvas.height=s):g||_.clearRect(0,0,s,s);let x;this.renderBuffer_!==void 0&&(x=Os(),Fg(x,e),Hc(x,r*(this.renderBuffer_+i),x));const P=Lme(i);let A;function M(re,ne,Z){const U=_.getImageData(0,0,s,s).data;for(let K=0,he=P.length;K<he;K++)if(U[P[K]]>0){if(!c||Z==="none"||A!=="Image"&&A!=="Text"||c.includes(re)){const ue=(P[K]-3)/4,Ee=i-ue%s,Ie=i-(ue/s|0),ee=l(re,ne,Ee*Ee+Ie*Ie);if(ee)return ee}_.clearRect(0,0,s,s);break}}const N=Object.keys(this.executorsByZIndex_).map(Number);N.sort(Ia);let z,j,$,J,X;for(z=N.length-1;z>=0;--z){const re=N[z].toString();for($=this.executorsByZIndex_[re],j=Xu.length-1;j>=0;--j)if(A=Xu[j],J=$[A],J!==void 0&&(X=J.executeHitDetection(_,p,n,M,x),X))return X}}getClipCoords(e){const r=this.maxExtent_;if(!r)return null;const n=r[0],i=r[1],l=r[2],c=r[3],s=[n,i,n,c,l,c,l,i];return Jc(s,0,8,2,e,s),s}isEmpty(){return Qc(this.executorsByZIndex_)}execute(e,r,n,i,l,c,s){const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(s?Vhe:Ia),c=c||Xu;const g=Xu.length;for(let _=0,x=p.length;_<x;++_){const P=p[_].toString(),A=this.executorsByZIndex_[P];for(let M=0,N=c.length;M<N;++M){const z=c[M],j=A[z];if(j!==void 0){const $=s===null?void 0:j.getZIndexContext(),J=$?$.getContext():e,X=this.maxExtent_&&z!=="Image"&&z!=="Text";if(X&&(J.save(),this.clip(J,n)),!$||z==="Text"||z==="Image"?j.execute(J,r,n,i,l,s):$.pushFunction(re=>j.execute(re,r,n,i,l,s)),X&&J.restore(),$){$.offset();const re=p[_]*g+Xu.indexOf(z);this.deferredZIndexContexts_[re]||(this.deferredZIndexContexts_[re]=[]),this.deferredZIndexContexts_[re].push($)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,r=Object.keys(e).map(Number).sort(Ia);for(let n=0,i=r.length;n<i;++n)e[r[n]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[r[n]].length=0}}const mT={};function Lme(t){if(mT[t]!==void 0)return mT[t];const e=t*2+1,r=t*t,n=new Array(r+1);for(let l=0;l<=t;++l)for(let c=0;c<=t;++c){const s=l*l+c*c;if(s>r)break;let p=n[s];p||(p=[],n[s]=p),p.push(((t+l)*e+(t+c))*4+3),l>0&&p.push(((t-l)*e+(t+c))*4+3),c>0&&(p.push(((t+l)*e+(t-c))*4+3),l>0&&p.push(((t-l)*e+(t-c))*4+3))}const i=[];for(let l=0,c=n.length;l<c;++l)n[l]&&i.push(...n[l]);return mT[t]=i,i}class Dme extends ZH{constructor(e,r,n,i,l,c,s){super(),this.context_=e,this.pixelRatio_=r,this.extent_=n,this.transform_=i,this.transformRotation_=i?xx(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=c,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=As()}drawImages_(e,r,n,i){if(!this.image_)return;const l=Jc(e,r,n,i,this.transform_,this.pixelCoordinates_),c=this.context_,s=this.tmpLocalTransform_,p=c.globalAlpha;this.imageOpacity_!=1&&(c.globalAlpha=p*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let _=0,x=l.length;_<x;_+=2){const P=l[_]-this.imageAnchorX_,A=l[_+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const M=P+this.imageAnchorX_,N=A+this.imageAnchorY_;kl(s,M,N,1,1,g,-M,-N),c.save(),c.transform.apply(c,s),c.translate(M,N),c.scale(this.imageScale_[0],this.imageScale_[1]),c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),c.restore()}else c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,P,A,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(c.globalAlpha=p)}drawText_(e,r,n,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=Jc(e,r,n,i,this.transform_,this.pixelCoordinates_),c=this.context_;let s=this.textRotation_;for(this.transformRotation_===0&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);r<n;r+=i){const p=l[r]+this.textOffsetX_,g=l[r+1]+this.textOffsetY_;s!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(c.save(),c.translate(p-this.textOffsetX_,g-this.textOffsetY_),c.rotate(s),c.translate(this.textOffsetX_,this.textOffsetY_),c.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&c.strokeText(this.text_,0,0),this.textFillState_&&c.fillText(this.text_,0,0),c.restore()):(this.textStrokeState_&&c.strokeText(this.text_,p,g),this.textFillState_&&c.fillText(this.text_,p,g))}}moveToLineTo_(e,r,n,i,l){const c=this.context_,s=Jc(e,r,n,i,this.transform_,this.pixelCoordinates_);c.moveTo(s[0],s[1]);let p=s.length;l&&(p-=2);for(let g=2;g<p;g+=2)c.lineTo(s[g],s[g+1]);return l&&c.closePath(),n}drawRings_(e,r,n,i){for(let l=0,c=n.length;l<c;++l)r=this.moveToLineTo_(e,r,n[l],i,!0);return r}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ui(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=ope(e,this.transform_,this.pixelCoordinates_),n=r[2]-r[0],i=r[3]-r[1],l=Math.sqrt(n*n+i*i),c=this.context_;c.beginPath(),c.arc(r[0],r[1],l,0,2*Math.PI),this.fillState_&&c.fill(),this.strokeState_&&c.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,r){const n=r.getGeometryFunction()(e);n&&(this.setStyle(r),this.drawGeometry(n))}drawGeometryCollection(e){const r=e.getGeometriesArray();for(let n=0,i=r.length;n<i;++n)this.drawGeometry(r[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const r=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(r,0,r.length,n),this.text_!==""&&this.drawText_(r,0,r.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const r=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(r,0,r.length,n),this.text_!==""&&this.drawText_(r,0,r.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ui(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=e.getFlatCoordinates();r.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoint();this.drawText_(r,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const r=e.getExtent();if(ui(this.extent_,r)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();let l=0;const c=e.getEnds(),s=e.getStride();n.beginPath();for(let p=0,g=c.length;p<g;++p)l=this.moveToLineTo_(i,l,c[p],s,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ui(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=this.context_;r.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(this.text_!==""){const r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ui(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=e.getOrientedFlatCoordinates();let i=0;const l=e.getEndss(),c=e.getStride();r.beginPath();for(let s=0,p=l.length;s<p;++s){const g=l[s];i=this.drawRings_(n,i,g,c)}this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(this.text_!==""){const r=e.getFlatInteriorPoints();this.drawText_(r,0,r.length,2)}}}setContextFillState_(e){const r=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,r.fillStyle=e.fillStyle):(r.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const r=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,r.lineCap=e.lineCap),su(n.lineDash,e.lineDash)||r.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,r.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,r.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,r.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,r.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,r.strokeStyle=e.strokeStyle)):(r.lineCap=e.lineCap,r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset,r.lineJoin=e.lineJoin,r.lineWidth=e.lineWidth,r.miterLimit=e.miterLimit,r.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const r=this.context_,n=this.contextTextState_,i=e.textAlign?e.textAlign:vy;n?(n.font!=e.font&&(n.font=e.font,r.font=e.font),n.textAlign!=i&&(n.textAlign=i,r.textAlign=i),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,r.textBaseline=e.textBaseline)):(r.font=e.font,r.textAlign=i,r.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,r){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Pa(n||Ro)}}if(!r)this.strokeState_=null;else{const n=r.getColor(),i=r.getLineCap(),l=r.getLineDash(),c=r.getLineDashOffset(),s=r.getLineJoin(),p=r.getWidth(),g=r.getMiterLimit(),_=l||Pl;this.strokeState_={lineCap:i!==void 0?i:gf,lineDash:this.pixelRatio_===1?_:_.map(x=>x*this.pixelRatio_),lineDashOffset:(c||Al)*this.pixelRatio_,lineJoin:s!==void 0?s:yf,lineWidth:(p!==void 0?p:xy)*this.pixelRatio_,miterLimit:g!==void 0?g:_y,strokeStyle:Pa(n||by)}}}setImageStyle(e){let r;if(!e||!(r=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=r[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const c=e.getScaleArray();this.imageScale_=[c[0]*this.pixelRatio_/n,c[1]*this.pixelRatio_/n],this.imageWidth_=r[0]*n}setTextStyle(e){if(!e)this.text_="";else{const r=e.getFill();if(!r)this.textFillState_=null;else{const A=r.getColor();this.textFillState_={fillStyle:Pa(A||Ro)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const A=n.getColor(),M=n.getLineCap(),N=n.getLineDash(),z=n.getLineDashOffset(),j=n.getLineJoin(),$=n.getWidth(),J=n.getMiterLimit();this.textStrokeState_={lineCap:M!==void 0?M:gf,lineDash:N||Pl,lineDashOffset:z||Al,lineJoin:j!==void 0?j:yf,lineWidth:$!==void 0?$:xy,miterLimit:J!==void 0?J:_y,strokeStyle:Pa(A||by)}}const i=e.getFont(),l=e.getOffsetX(),c=e.getOffsetY(),s=e.getRotateWithView(),p=e.getRotation(),g=e.getScaleArray(),_=e.getText(),x=e.getTextAlign(),P=e.getTextBaseline();this.textState_={font:i!==void 0?i:NH,textAlign:x!==void 0?x:vy,textBaseline:P!==void 0?P:Tv},this.text_=_!==void 0?Array.isArray(_)?_.reduce((A,M,N)=>A+=N%2?" ":M,""):_:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=c!==void 0?this.pixelRatio_*c:0,this.textRotateWithView_=s!==void 0?s:!1,this.textRotation_=p!==void 0?p:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const is=.5;function XH(t,e,r,n,i,l,c,s,p){const g=p?nM(i):i,_=t[0]*is,x=t[1]*is,P=Ei(_,x);P.imageSmoothingEnabled=!1;const A=P.canvas,M=new Dme(P,is,i,null,c,s,p?o_(Wde(),p):null),N=r.length,z=Math.floor((256*256*256-1)/N),j={};for(let J=1;J<=N;++J){const X=r[J-1],re=X.getStyleFunction()||n;if(!re)continue;let ne=re(X,l);if(!ne)continue;Array.isArray(ne)||(ne=[ne]);const U=(J*z).toString(16).padStart(7,"#00000");for(let K=0,he=ne.length;K<he;++K){const ue=ne[K],Ee=ue.getGeometryFunction()(X);if(!Ee||!ui(g,Ee.getExtent()))continue;const Ie=ue.clone(),ee=Ie.getFill();ee&&ee.setColor(U);const pe=Ie.getStroke();pe&&(pe.setColor(U),pe.setLineDash(null)),Ie.setText(void 0);const ve=ue.getImage();if(ve){const Ze=ve.getImageSize();if(!Ze)continue;const bt=Ei(Ze[0],Ze[1],void 0,{alpha:!1}),qe=bt.canvas;bt.fillStyle=U,bt.fillRect(0,0,qe.width,qe.height),Ie.setImage(new _f({img:qe,anchor:ve.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ve.getOrigin(),opacity:1,size:ve.getSize(),scale:ve.getScale(),rotation:ve.getRotation(),rotateWithView:ve.getRotateWithView()}))}const xe=Ie.getZIndex()||0;let tt=j[xe];tt||(tt={},j[xe]=tt,tt.Polygon=[],tt.Circle=[],tt.LineString=[],tt.Point=[]);const Ke=Ee.getType();if(Ke==="GeometryCollection"){const Ze=Ee.getGeometriesArrayRecursive();for(let bt=0,qe=Ze.length;bt<qe;++bt){const kt=Ze[bt];tt[kt.getType().replace("Multi","")].push(kt,Ie)}}else tt[Ke.replace("Multi","")].push(Ee,Ie)}}const $=Object.keys(j).map(Number).sort(Ia);for(let J=0,X=$.length;J<X;++J){const re=j[$[J]];for(const ne in re){const Z=re[ne];for(let U=0,K=Z.length;U<K;U+=2){M.setStyle(Z[U+1]);for(let he=0,ue=e.length;he<ue;++he)M.setTransform(e[he]),M.drawGeometry(Z[U])}}}return P.getImageData(0,0,A.width,A.height)}function QH(t,e,r){const n=[];if(r){const i=Math.floor(Math.round(t[0])*is),l=Math.floor(Math.round(t[1])*is),c=(qn(i,0,r.width-1)+qn(l,0,r.height-1)*r.width)*4,s=r.data[c],p=r.data[c+1],_=r.data[c+2]+256*(p+256*s),x=Math.floor((256*256*256-1)/e.length);_&&_%x===0&&n.push(e[_/x-1])}return n}const Nme=.5,eJ={Point:Ume,LineString:qme,Polygon:Hme,MultiPoint:Gme,MultiLineString:$me,MultiPolygon:Vme,GeometryCollection:Bme,Circle:zme};function Fme(t,e){return parseInt(Nr(t),10)-parseInt(Nr(e),10)}function nC(t,e){const r=tJ(t,e);return r*r}function tJ(t,e){return Nme*t/e}function zme(t,e,r,n,i){const l=r.getFill(),c=r.getStroke();if(l||c){const p=t.getBuilder(r.getZIndex(),"Circle");p.setFillStrokeStyle(l,c),p.drawCircle(e,n,i)}const s=r.getText();if(s&&s.getText()){const p=t.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s),p.drawText(e,n)}}function Mv(t,e,r,n,i,l,c,s){const p=[],g=r.getImage();if(g){let P=!0;const A=g.getImageState();A==Ur.LOADED||A==Ur.ERROR?P=!1:A==Ur.IDLE&&g.load(),P&&p.push(g.ready())}const _=r.getFill();_&&_.loading()&&p.push(_.ready());const x=p.length>0;return x&&Promise.all(p).then(()=>i(null)),jme(t,e,r,n,l,c,s),x}function jme(t,e,r,n,i,l,c){const s=r.getGeometryFunction()(e);if(!s)return;const p=s.simplifyTransformed(n,i);if(r.getRenderer())rJ(t,p,r,e,c);else{const _=eJ[p.getType()];_(t,p,r,e,c,l)}}function rJ(t,e,r,n,i){if(e.getType()=="GeometryCollection"){const c=e.getGeometries();for(let s=0,p=c.length;s<p;++s)rJ(t,c[s],r,n,i);return}t.getBuilder(r.getZIndex(),"Default").drawCustom(e,n,r.getRenderer(),r.getHitDetectionRenderer(),i)}function Bme(t,e,r,n,i,l){const c=e.getGeometriesArray();let s,p;for(s=0,p=c.length;s<p;++s){const g=eJ[c[s].getType()];g(t,c[s],r,n,i,l)}}function qme(t,e,r,n,i){const l=r.getStroke();if(l){const s=t.getBuilder(r.getZIndex(),"LineString");s.setFillStrokeStyle(null,l),s.drawLineString(e,n,i)}const c=r.getText();if(c&&c.getText()){const s=t.getBuilder(r.getZIndex(),"Text");s.setTextStyle(c),s.drawText(e,n,i)}}function $me(t,e,r,n,i){const l=r.getStroke();if(l){const s=t.getBuilder(r.getZIndex(),"LineString");s.setFillStrokeStyle(null,l),s.drawMultiLineString(e,n,i)}const c=r.getText();if(c&&c.getText()){const s=t.getBuilder(r.getZIndex(),"Text");s.setTextStyle(c),s.drawText(e,n,i)}}function Vme(t,e,r,n,i){const l=r.getFill(),c=r.getStroke();if(c||l){const p=t.getBuilder(r.getZIndex(),"Polygon");p.setFillStrokeStyle(l,c),p.drawMultiPolygon(e,n,i)}const s=r.getText();if(s&&s.getText()){const p=t.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s),p.drawText(e,n,i)}}function Ume(t,e,r,n,i,l){const c=r.getImage(),s=r.getText(),p=s&&s.getText(),g=l&&c&&p?{}:void 0;if(c){if(c.getImageState()!=Ur.LOADED)return;const _=t.getBuilder(r.getZIndex(),"Image");_.setImageStyle(c,g),_.drawPoint(e,n,i)}if(p){const _=t.getBuilder(r.getZIndex(),"Text");_.setTextStyle(s,g),_.drawText(e,n,i)}}function Gme(t,e,r,n,i,l){const c=r.getImage(),s=c&&c.getOpacity()!==0,p=r.getText(),g=p&&p.getText(),_=l&&s&&g?{}:void 0;if(s){if(c.getImageState()!=Ur.LOADED)return;const x=t.getBuilder(r.getZIndex(),"Image");x.setImageStyle(c,_),x.drawMultiPoint(e,n,i)}if(g){const x=t.getBuilder(r.getZIndex(),"Text");x.setTextStyle(p,_),x.drawText(e,n,i)}}function Hme(t,e,r,n,i){const l=r.getFill(),c=r.getStroke();if(l||c){const p=t.getBuilder(r.getZIndex(),"Polygon");p.setFillStrokeStyle(l,c),p.drawPolygon(e,n,i)}const s=r.getText();if(s&&s.getText()){const p=t.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s),p.drawText(e,n,i)}}const Jme=5;class Wme extends r_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Jme}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Sr()}getData(e){return null}prepareFrame(e){return Sr()}renderFrame(e,r){return Sr()}forEachFeatureAtCoordinate(e,r,n,i,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const r=e.target;(r.getState()===Ur.LOADED||r.getState()===Ur.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let r=e.getState();return r!=Ur.LOADED&&r!=Ur.ERROR&&e.addEventListener(Rr.CHANGE,this.boundHandleImageChange_),r==Ur.IDLE&&(e.load(),r=e.getState()),r==Ur.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const jL=[];let bp=null;function Zme(){bp=Ei(1,1,void 0,{willReadFrequently:!0})}class nJ extends Wme{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=As(),this.pixelTransform=As(),this.inversePixelTransform=As(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,r,n){bp||Zme(),bp.clearRect(0,0,1,1);let i;try{bp.drawImage(e,r,n,1,1,0,0,1,1),i=bp.getImageData(0,0,1,1).data}catch{return bp=null,null}return i}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,r,n){const i=this.getLayer().getClassName();let l,c;if(e&&e.className===i&&(!n||e&&e.style.backgroundColor&&su(mf(e.style.backgroundColor),mf(n)))){const s=e.firstElementChild;s instanceof HTMLCanvasElement&&(c=s.getContext("2d"))}if(c&&tpe(c.canvas.style.transform,r)?(this.container=e,this.context=c,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=i;let s=l.style;s.position="absolute",s.width="100%",s.height="100%",c=Ei();const p=c.canvas;l.appendChild(p),s=p.style,s.position="absolute",s.left="0",s.transformOrigin="top left",this.container=l,this.context=c}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,r,n){const i=Bl(n),l=Tx(n),c=Ex(n),s=wx(n);Li(r.coordinateToPixelTransform,i),Li(r.coordinateToPixelTransform,l),Li(r.coordinateToPixelTransform,c),Li(r.coordinateToPixelTransform,s);const p=this.inversePixelTransform;Li(p,i),Li(p,l),Li(p,c),Li(p,s),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}prepareContainer(e,r){const n=e.extent,i=e.viewState.resolution,l=e.viewState.rotation,c=e.pixelRatio,s=Math.round(En(n)/i*c),p=Math.round(wo(n)/i*c);kl(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-s/2,-p/2),oH(this.inversePixelTransform,this.pixelTransform);const g=epe(this.pixelTransform);if(this.useContainer(r,g,this.getBackground(e)),!this.containerReused){const _=this.context.canvas;_.width!=s||_.height!=p?(_.width=s,_.height=p):this.context.clearRect(0,0,s,p),g!==_.style.transform&&(_.style.transform=g)}}dispatchRenderEvent_(e,r,n){const i=this.getLayer();if(i.hasListener(e)){const l=new UH(e,this.inversePixelTransform,n,r);i.dispatchEvent(l)}}preRender(e,r){this.frameState=r,!r.declutter&&this.dispatchRenderEvent_(Ts.PRERENDER,e,r)}postRender(e,r){r.declutter||this.dispatchRenderEvent_(Ts.POSTRENDER,e,r)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new MM),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ts.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ts.POSTRENDER,this.context,e))}getRenderTransform(e,r,n,i,l,c,s){const p=l/2,g=c/2,_=i/r,x=-_,P=-e[0]+s,A=-e[1];return kl(this.tempTransform,p,g,_,x,-n,P,A)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Kme extends nJ{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Os(),this.wrappedRenderedExtent_=Os(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,r,n){const i=r.extent,l=r.viewState,c=l.center,s=l.resolution,p=l.projection,g=l.rotation,_=p.getExtent(),x=this.getLayer().getSource(),P=this.getLayer().getDeclutter(),A=r.pixelRatio,M=r.viewHints,N=!(M[ri.ANIMATING]||M[ri.INTERACTING]),z=this.context,j=Math.round(En(i)/s*A),$=Math.round(wo(i)/s*A),J=x.getWrapX()&&p.canWrapX(),X=J?En(_):null,re=J?Math.ceil((i[2]-_[2])/X)+1:1;let ne=J?Math.floor((i[0]-_[0])/X):0;do{let Z=this.getRenderTransform(c,s,0,A,j,$,ne*X);r.declutter&&(Z=Z.slice(0)),e.execute(z,[z.canvas.width,z.canvas.height],Z,g,N,n===void 0?Xu:n?Iv:kme,n?P&&r.declutter[P]:void 0)}while(++ne<re)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ei(this.context.canvas.width,this.context.canvas.height,jL))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,a_(this.context),jL.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,r){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const i=e.viewState;this.prepareContainer(e,r);const l=this.context,c=this.replayGroup_;let s=c&&!c.isEmpty();if(!s&&!(this.getLayer().hasListener(Ts.PRERENDER)||this.getLayer().hasListener(Ts.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(l,e),i.projection,this.clipped_=!1,s&&n.extent&&this.clipping){const p=kc(n.extent);s=ui(p,e.extent),this.clipped_=s&&!ih(p,e.extent),this.clipped_&&this.clipUnrotated(l,e,p)}return s&&this.renderWorlds(c,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(r=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),i=this.renderedCenter_,l=this.renderedResolution_,c=this.renderedRotation_,s=this.renderedProjection_,p=this.wrappedRenderedExtent_,g=this.getLayer(),_=[],x=n[0]*is,P=n[1]*is;_.push(this.getRenderTransform(i,l,c,is,x,P,0).slice());const A=g.getSource(),M=s.getExtent();if(A.getWrapX()&&s.canWrapX()&&!ih(M,p)){let N=p[0];const z=En(M);let j=0,$;for(;N<M[0];)--j,$=z*j,_.push(this.getRenderTransform(i,l,c,is,x,P,$).slice()),N+=z;for(j=0,N=p[2];N>M[2];)++j,$=z*j,_.push(this.getRenderTransform(i,l,c,is,x,P,$).slice()),N-=z}this.hitDetectionImageData_=XH(n,_,this.renderedFeatures_,g.getStyleFunction(),p,l,c,nC(l,this.renderedPixelRatio_),null)}r(QH(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,r,n,i,l){if(!this.replayGroup_)return;const c=r.viewState.resolution,s=r.viewState.rotation,p=this.getLayer(),g={},_=function(P,A,M){const N=Nr(P),z=g[N];if(z){if(z!==!0&&M<z.distanceSq){if(M===0)return g[N]=!0,l.splice(l.lastIndexOf(z),1),i(P,p,A);z.geometry=A,z.distanceSq=M}}else{if(M===0)return g[N]=!0,i(P,p,A);l.push(g[N]={feature:P,layer:p,geometry:A,distanceSq:M,callback:i})}},x=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,c,s,n,_,x?r.declutter?.[x]?.all().map(P=>P.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const r=this.getLayer(),n=r.getSource();if(!n)return!1;const i=e.viewHints[ri.ANIMATING],l=e.viewHints[ri.INTERACTING],c=r.getUpdateWhileAnimating(),s=r.getUpdateWhileInteracting();if(this.ready&&!c&&i||!s&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const p=e.extent,g=e.viewState,_=g.projection,x=g.resolution,P=e.pixelRatio,A=r.getRevision(),M=r.getRenderBuffer();let N=r.getRenderOrder();N===void 0&&(N=Fme);const z=g.center.slice(),j=Hc(p,M*x),$=j.slice(),J=[j.slice()],X=_.getExtent();if(n.getWrapX()&&_.canWrapX()&&!ih(X,e.extent)){const ee=En(X),pe=Math.max(En(j)/2,ee);j[0]=X[0]-pe,j[2]=X[2]+pe,XI(z,_);const ve=WG(J[0],_);ve[0]<X[0]&&ve[2]<X[2]?J.push([ve[0]+ee,ve[1],ve[2]+ee,ve[3]]):ve[0]>X[0]&&ve[2]>X[2]&&J.push([ve[0]-ee,ve[1],ve[2]-ee,ve[3]])}if(this.ready&&this.renderedResolution_==x&&this.renderedRevision_==A&&this.renderedRenderOrder_==N&&this.renderedFrameDeclutter_===!!e.declutter&&ih(this.wrappedRenderedExtent_,j))return su(this.renderedExtent_,$)||(this.hitDetectionImageData_=null,this.renderedExtent_=$),this.renderedCenter_=z,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const re=new KH(tJ(x,P),j,x,P);let ne;for(let ee=0,pe=J.length;ee<pe;++ee)n.loadFeatures(J[ee],x,_);const Z=nC(x,P);let U=!0;const K=(ee,pe)=>{let ve;const xe=ee.getStyleFunction()||r.getStyleFunction();if(xe&&(ve=xe(ee,x)),ve){const tt=this.renderFeature(ee,Z,ve,re,ne,this.getLayer().getDeclutter(),pe);U=U&&!tt}},he=nM(j),ue=n.getFeaturesInExtent(he);N&&ue.sort(N);for(let ee=0,pe=ue.length;ee<pe;++ee)K(ue[ee],ee);this.renderedFeatures_=ue,this.ready=U;const Ee=re.finish(),Ie=new YH(j,x,P,n.getOverlaps(),Ee,r.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=x,this.renderedRevision_=A,this.renderedRenderOrder_=N,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=$,this.wrappedRenderedExtent_=j,this.renderedCenter_=z,this.renderedProjection_=_,this.renderedPixelRatio_=P,this.replayGroup_=Ie,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,r,n,i,l,c,s){if(!n)return!1;let p=!1;if(Array.isArray(n))for(let g=0,_=n.length;g<_;++g)p=Mv(i,e,n[g],r,this.boundHandleStyleImageChange_,l,c,s)||p;else p=Mv(i,e,n,r,this.boundHandleStyleImageChange_,l,c,s);return p}}class Yme extends RM{constructor(e){super(e)}createRenderer(){return new Kme(this)}}let Xme=!1;function iJ(t,e,r,n,i,l,c){const s=new XMLHttpRequest;s.open("GET",typeof t=="function"?t(r,n,i):t,!0),e.getType()=="arraybuffer"&&(s.responseType="arraybuffer"),s.withCredentials=Xme,s.onload=function(p){if(!s.status||s.status>=200&&s.status<300){const g=e.getType();try{let _;g=="text"||g=="json"?_=s.responseText:g=="xml"?_=s.responseXML||s.responseText:g=="arraybuffer"&&(_=s.response),_?l(e.readFeatures(_,{extent:r,featureProjection:i}),e.readProjection(_)):c()}catch{c()}}else c()},s.onerror=c,s.send()}function BL(t,e){return function(r,n,i,l,c){iJ(t,e,r,n,i,(s,p)=>{this.addFeatures(s),l!==void 0&&l(s)},()=>{this.changed(),c!==void 0&&c()})}}function Qme(t,e){return[[-1/0,-1/0,1/0,1/0]]}function ege(t,e){return[t]}const qL=As();class co{constructor(e,r,n,i,l,c){this.styleFunction,this.extent_,this.id_=c,this.type_=e,this.flatCoordinates_=r,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?$G(this.flatCoordinates_):KI(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ol(this.getExtent());this.flatInteriorPoints_=dM(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=yH(this.flatCoordinates_,this.ends_),r=WH(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=dH(this.flatCoordinates_,0,e,2,r)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Av(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let r=0;const n=this.ends_;for(let i=0,l=n.length;i<l;++i){const c=n[i],s=Av(e,r,c,2,.5);Ma(this.flatMidpoints_,s),r=c}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,r){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=An(e);const r=e.getExtent(),n=e.getWorldExtent();if(r&&n){const i=wo(n)/wo(r);kl(qL,n[0],n[3],i,-i,0,0,0),Jc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,qL,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new co(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=FG((e,r)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),r&&this.simplifiedGeometry_.applyTransform(r);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=Rx(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=hH(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,i);break;case"Polygon":i=[],n.length=uM(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,i);break}return i&&(this.simplifiedGeometry_=new co(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}co.prototype.getFlatCoordinates=co.prototype.getOrientedFlatCoordinates;class $L{constructor(e){this.rbush_=new IH(e),this.items_={}}insert(e,r){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:r};this.rbush_.insert(n),this.items_[Nr(r)]=n}load(e,r){const n=new Array(r.length);for(let i=0,l=r.length;i<l;i++){const c=e[i],s=r[i],p={minX:c[0],minY:c[1],maxX:c[2],maxY:c[3],value:s};n[i]=p,this.items_[Nr(s)]=p}this.rbush_.load(n)}remove(e){const r=Nr(e),n=this.items_[r];return delete this.items_[r],this.rbush_.remove(n)!==null}update(e,r){const n=this.items_[Nr(r)],i=[n.minX,n.minY,n.maxX,n.maxY];hf(i,e)||(this.remove(r),this.insert(e,r))}getAll(){return this.rbush_.all().map(function(r){return r.value})}getInExtent(e){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(r).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,r){return this.forEach_(this.getInExtent(e),r)}forEach_(e,r){let n;for(let i=0,l=e.length;i<l;i++)if(n=r(e[i]),n)return n;return n}isEmpty(){return Qc(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const r=this.rbush_.toJSON();return Ml(r.minX,r.minY,r.maxX,r.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const r in e.items_)this.items_[r]=e.items_[r]}}class oJ extends oa{constructor(e){super(),this.projection=An(e.projection),this.attributions_=VL(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const r=this;this.viewPromise_=new Promise(function(n,i){r.viewResolver=n,r.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=VL(e),this.changed()}setState(e){this.state_=e,this.changed()}}function VL(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const vs={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class yc extends jl{constructor(e,r,n){super(e),this.feature=r,this.features=n}}class gT extends oJ{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=dy,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(cn(this.format_,"`format` must be set when `url` is set"),this.loader_=BL(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Qme;const r=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=r?new $L:null,this.loadedExtentsRtree_=new $L,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,i;Array.isArray(e.features)?i=e.features:e.features&&(n=e.features,i=n.getArray()),!r&&n===void 0&&(n=new Xs(i)),i!==void 0&&this.addFeaturesInternal(i),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const r=Nr(e);if(!this.addToIndex_(r,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(r,e);const n=e.getGeometry();if(n){const i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[r]=e;this.dispatchEvent(new yc(vs.ADDFEATURE,e))}setupChangeEvents_(e,r){r instanceof co||(this.featureChangeKeys_[e]=[en(r,Rr.CHANGE,this.handleFeatureChange_,this),en(r,cf.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,r){let n=!0;if(r.getId()!==void 0){const i=String(r.getId());if(!(i in this.idIndex_))this.idIndex_[i]=r;else if(r instanceof co){const l=this.idIndex_[i];l instanceof co?Array.isArray(l)?l.push(r):this.idIndex_[i]=[l,r]:n=!1}else n=!1}return n&&(cn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=r),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const r=[],n=[],i=[];for(let l=0,c=e.length;l<c;l++){const s=e[l],p=Nr(s);this.addToIndex_(p,s)&&n.push(s)}for(let l=0,c=n.length;l<c;l++){const s=n[l],p=Nr(s);this.setupChangeEvents_(p,s);const g=s.getGeometry();if(g){const _=g.getExtent();r.push(_),i.push(s)}else this.nullGeometryFeatures_[p]=s}if(this.featuresRtree_&&this.featuresRtree_.load(r,i),this.hasListener(vs.ADDFEATURE))for(let l=0,c=n.length;l<c;l++)this.dispatchEvent(new yc(vs.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let r=!1;this.addEventListener(vs.ADDFEATURE,function(n){r||(r=!0,e.push(n.feature),r=!1)}),this.addEventListener(vs.REMOVEFEATURE,function(n){r||(r=!0,e.remove(n.feature),r=!1)}),e.addEventListener(Po.ADD,n=>{r||(r=!0,this.addFeature(n.element),r=!1)}),e.addEventListener(Po.REMOVE,n=>{r||(r=!0,this.removeFeature(n.element),r=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Rn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const r=new yc(vs.CLEAR);this.dispatchEvent(r),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,r){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(i){const l=i.getGeometry();if(l instanceof co||l.intersectsCoordinate(e))return r(i)})}forEachFeatureInExtent(e,r){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,r);this.featuresCollection_&&this.featuresCollection_.forEach(r)}forEachFeatureIntersectingExtent(e,r){return this.forEachFeatureInExtent(e,function(n){const i=n.getGeometry();if(i instanceof co||i.intersectsExtent(e)){const l=r(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Qc(this.nullGeometryFeatures_)||Ma(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const r=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){r.push(n)}),r}getFeaturesInExtent(e,r){if(this.featuresRtree_){if(!(r&&r.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=ZG(e,r);return[].concat(...i.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,r){const n=e[0],i=e[1];let l=null;const c=[NaN,NaN];let s=1/0;const p=[-1/0,-1/0,1/0,1/0];return r=r||hy,this.featuresRtree_.forEachInExtent(p,function(g){if(r(g)){const _=g.getGeometry(),x=s;if(s=_ instanceof co?0:_.closestPointXY(n,i,c,s),s<x){l=g;const P=Math.sqrt(s);p[0]=n-P,p[1]=i-P,p[2]=n+P,p[3]=i+P}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const r=this.idIndex_[e.toString()];return r!==void 0?r:null}getFeatureByUid(e){const r=this.uidIndex_[e];return r!==void 0?r:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const r=e.target,n=Nr(r),i=r.getGeometry();if(!i)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[n]=r);else{const c=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(c,r)):this.featuresRtree_&&this.featuresRtree_.update(c,r)}const l=r.getId();if(l!==void 0){const c=l.toString();this.idIndex_[c]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[c]=r)}else this.removeFromIdIndex_(r),this.uidIndex_[n]=r;this.changed(),this.dispatchEvent(new yc(vs.CHANGEFEATURE,r))}hasFeature(e){const r=e.getId();return r!==void 0?r in this.idIndex_:Nr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Qc(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,r,n){const i=this.loadedExtentsRtree_,l=this.strategy_(e,r,n);for(let c=0,s=l.length;c<s;++c){const p=l[c];i.forEachInExtent(p,function(_){return ih(_.extent,p)})||(++this.loadingExtentsCount_,this.dispatchEvent(new yc(vs.FEATURESLOADSTART)),this.loader_.call(this,p,r,n,_=>{--this.loadingExtentsCount_,this.dispatchEvent(new yc(vs.FEATURESLOADEND,void 0,_))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new yc(vs.FEATURESLOADERROR))}),i.insert(p,{extent:p.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const r=this.loadedExtentsRtree_,n=r.forEachInExtent(e,function(i){if(hf(i.extent,e))return i});n&&r.remove(n)}removeFeatures(e){let r=!1;for(let n=0,i=e.length;n<i;++n)r=this.removeFeatureInternal(e[n])||r;r&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const r=Nr(e);if(!(r in this.uidIndex_))return!1;r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[r]?.forEach(Rn),delete this.featureChangeKeys_[r];const i=e.getId();if(i!==void 0){const l=i.toString(),c=this.idIndex_[l];c===e?delete this.idIndex_[l]:Array.isArray(c)&&(c.splice(c.indexOf(e),1),c.length===1&&(this.idIndex_[l]=c[0]))}return delete this.uidIndex_[r],this.hasListener(vs.REMOVEFEATURE)&&this.dispatchEvent(new yc(vs.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r];break}}setLoader(e){this.loader_=e}setUrl(e){cn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(BL(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}function tge(){const t=new wH(-.004,.01,50);return new yy({kinetic:t})}class p_ extends vx{constructor(e,r,n){super(),n=n||{},this.tileCoord=e,this.state=r,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Rr.CHANGE)}release(){this.setState(qt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==qt.EMPTY){if(this.state!==qt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Sr()}getAlpha(e,r){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=r,this.transitionStarts_[e]=n;else if(n===-1)return 1;const i=r-n+1e3/60;return i>=this.transition_?1:KG(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class sJ extends p_{constructor(e,r,n,i,l,c){super(e,r,c),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=qt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=qt.ERROR,this.unlistenImage_(),this.image_=rge(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=qt.LOADED:this.state=qt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==qt.ERROR&&(this.state=qt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==qt.IDLE&&(this.state=qt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ffe(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function rge(){const t=Ei(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class OM{constructor(e,r,n,i){this.minX=e,this.maxX=r,this.minY=n,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,r){return this.minX<=e&&e<=this.maxX&&this.minY<=r&&r<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function lp(t,e,r,n,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new OM(t,e,r,n)}const UL=[];class nge extends p_{constructor(e,r,n,i,l){super(e,r,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=l,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=Ei(1,1,UL)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const r=Nr(e);return r in this.replayState_||(this.replayState_[r]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[r]}load(){this.getSourceTiles()}release(){this.context_&&(a_(this.context_),UL.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let aJ=class extends p_{constructor(e,r,n,i,l,c){super(e,r,c),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=l,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==qt.IDLE&&(this.setState(qt.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,r){this.setFeatures(e)}onError(){this.setState(qt.ERROR)}setFeatures(e){this.features_=e,this.setState(qt.LOADED)}setLoader(e){this.loader_=e}};const ige={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true",STORYBOOK_OS_MAPS_API_KEY_PUBLIC_DOCS:"iXbItSbCB53tFNL2iP8kwQNmnfkWK0EX"};var GL={};const oge=[-9.01,49.75,2.01,61.01],sge=[-2.547855,54.00366],age=()=>typeof import.meta<"u"&&"env"in import.meta?ige:typeof process<"u"&&GL?GL:{},lJ=age(),lge=lJ.OS_MAPS_VECTOR_BASE_URL||"https://api.os.uk/maps/vector/v1";lJ.OS_MAPS_AUTH_URL;const cge=`${lge.replace(/\/$/,"")}/vts`,uge="/os-map/vector",Mc={view:{zoom:{min:5,max:20},default:{zoom:6,extent:Hde(oge,"EPSG:4326","EPSG:3857"),centre:xv(sge)}},tiles:{urls:{localVectorStyleUrl:`${uge}/style`,vectorStyleUrl:`${cge}/resources/styles?srs=3857`}}};class hge extends wa{constructor(){super({projection:"EPSG:3857",extent:Mc.view.default.extent,showFullExtent:!0,minZoom:Mc.view.zoom.min,maxZoom:Mc.view.zoom.max,center:Mc.view.default.centre,zoom:Mc.view.default.zoom,constrainRotation:!1})}}class cJ extends JH{constructor(e){const r=e.layers||[],n=e.controls||{},i=xH({rotate:!1});if(n.rotate!==!1){const g=typeof n.rotate=="object"?n.rotate.autoHide===!0:!1;i.extend([new vH({autoHide:g})])}n.scaleControl==="bar"?i.push(new kL({units:"metric",bar:!0,steps:2,text:!1,minWidth:140})):n.scaleControl==="line"&&i.push(new kL({units:"metric"})),(n.locationDisplay==="dms"||n.locationDisplay==="latlon")&&i.push(new tC({mode:n.locationDisplay,source:n.locationDisplaySource??"pointer",position:"bottom-center"})),n.zoomSlider&&i.push(new _me);function l(g){return Array.isArray(g)?g:g instanceof Xs?g.getArray():[]}const c=n.olRotationMode!=="right-drag",p=[...l(PH({altShiftDragRotate:c})).filter(g=>!(g instanceof yy)).filter(g=>!(g instanceof yy)),tge(),...e.interactions||[]];super({target:e.target,layers:r,overlays:e.overlays||[],interactions:p,controls:i,view:new hge})}}function dge(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mb={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.0/LICENSE.txt
 */var pge=mb.exports,HL;function fge(){return HL||(HL=1,function(t,e){(function(r,n){t.exports=n()})(pge,function(){var r={},n={};function i(c,s,p){if(n[c]=p,c==="index"){var g="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",_={};return n.shared(_),n.index(r,_),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),r}}i("shared",["exports"],function(c){function s(h,a,u,f){return new(u||(u=Promise))(function(b,S){function C(F){try{O(f.next(F))}catch(B){S(B)}}function I(F){try{O(f.throw(F))}catch(B){S(B)}}function O(F){var B;F.done?b(F.value):(B=F.value,B instanceof u?B:new u(function(G){G(B)})).then(C,I)}O((f=f.apply(h,a||[])).next())})}function p(h,a){this.x=h,this.y=a}function g(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var _,x;typeof SuppressedError=="function"&&SuppressedError,p.prototype={clone(){return new p(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,a){return this.clone()._rotateAround(h,a)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){const a=h.x-this.x,u=h.y-this.y;return a*a+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,a){return Math.atan2(this.x*a-this.y*h,this.x*h+this.y*a)},_matMult(h){const a=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=a,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){const h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){const a=Math.cos(h),u=Math.sin(h),f=u*this.x+a*this.y;return this.x=a*this.x-u*this.y,this.y=f,this},_rotateAround(h,a){const u=Math.cos(h),f=Math.sin(h),b=a.y+f*(this.x-a.x)+u*(this.y-a.y);return this.x=a.x+u*(this.x-a.x)-f*(this.y-a.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:p},p.convert=function(h){if(h instanceof p)return h;if(Array.isArray(h))return new p(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new p(+h.x,+h.y);throw new Error("Expected [x, y] or {x, y} point format")};var P=function(){if(x)return _;function h(a,u,f,b){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=u,this.p2x=f,this.p2y=b}return x=1,_=h,h.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,u){if(u===void 0&&(u=1e-6),a<0)return 0;if(a>1)return 1;for(var f=a,b=0;b<8;b++){var S=this.sampleCurveX(f)-a;if(Math.abs(S)<u)return f;var C=this.sampleCurveDerivativeX(f);if(Math.abs(C)<1e-6)break;f-=S/C}var I=0,O=1;for(f=a,b=0;b<20&&(S=this.sampleCurveX(f),!(Math.abs(S-a)<u));b++)a>S?I=f:O=f,f=.5*(O-I)+I;return f},solve:function(a,u){return this.sampleCurveY(this.solveCurveX(a,u))}},_}(),A=g(P);let M,N;function z(){return M==null&&(M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),M}function j(){if(N==null&&(N=!1,z())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let f=0;f<5*5;f++){const b=4*f;a.fillStyle=`rgb(${b},${b+1},${b+2})`,a.fillRect(f%5,Math.floor(f/5),1,1)}const u=a.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&u[f]!==f){N=!0;break}}}return N||!1}var $=1e-6,J=typeof Float32Array<"u"?Float32Array:Array;function X(){var h=new J(9);return J!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function re(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ne(){var h=new J(3);return J!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function Z(h){var a=h[0],u=h[1],f=h[2];return Math.sqrt(a*a+u*u+f*f)}function U(h,a,u){var f=new J(3);return f[0]=h,f[1]=a,f[2]=u,f}function K(h,a,u){return h[0]=a[0]+u[0],h[1]=a[1]+u[1],h[2]=a[2]+u[2],h}function he(h,a,u){return h[0]=a[0]*u,h[1]=a[1]*u,h[2]=a[2]*u,h}function ue(h,a,u){var f=a[0],b=a[1],S=a[2],C=u[0],I=u[1],O=u[2];return h[0]=b*O-S*I,h[1]=S*C-f*O,h[2]=f*I-b*C,h}var Ee,Ie=Z;function ee(h,a,u){var f=a[0],b=a[1],S=a[2],C=a[3];return h[0]=u[0]*f+u[4]*b+u[8]*S+u[12]*C,h[1]=u[1]*f+u[5]*b+u[9]*S+u[13]*C,h[2]=u[2]*f+u[6]*b+u[10]*S+u[14]*C,h[3]=u[3]*f+u[7]*b+u[11]*S+u[15]*C,h}function pe(){var h=new J(4);return J!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function ve(h,a,u,f){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",S=Math.PI/360;a*=S,f*=S,u*=S;var C=Math.sin(a),I=Math.cos(a),O=Math.sin(u),F=Math.cos(u),B=Math.sin(f),G=Math.cos(f);switch(b){case"xyz":h[0]=C*F*G+I*O*B,h[1]=I*O*G-C*F*B,h[2]=I*F*B+C*O*G,h[3]=I*F*G-C*O*B;break;case"xzy":h[0]=C*F*G-I*O*B,h[1]=I*O*G-C*F*B,h[2]=I*F*B+C*O*G,h[3]=I*F*G+C*O*B;break;case"yxz":h[0]=C*F*G+I*O*B,h[1]=I*O*G-C*F*B,h[2]=I*F*B-C*O*G,h[3]=I*F*G+C*O*B;break;case"yzx":h[0]=C*F*G+I*O*B,h[1]=I*O*G+C*F*B,h[2]=I*F*B-C*O*G,h[3]=I*F*G-C*O*B;break;case"zxy":h[0]=C*F*G-I*O*B,h[1]=I*O*G+C*F*B,h[2]=I*F*B+C*O*G,h[3]=I*F*G-C*O*B;break;case"zyx":h[0]=C*F*G-I*O*B,h[1]=I*O*G+C*F*B,h[2]=I*F*B-C*O*G,h[3]=I*F*G+C*O*B;break;default:throw new Error("Unknown angle order "+b)}return h}function xe(){var h=new J(2);return J!=Float32Array&&(h[0]=0,h[1]=0),h}function tt(h,a){var u=new J(2);return u[0]=h,u[1]=a,u}ne(),Ee=new J(4),J!=Float32Array&&(Ee[0]=0,Ee[1]=0,Ee[2]=0,Ee[3]=0),ne(),U(1,0,0),U(0,1,0),pe(),pe(),X(),xe();const Ke=8192;function Ze(h,a,u){return a*(Ke/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}function bt(h,a){return(h%a+a)%a}function qe(h,a,u){return h*(1-u)+a*u}function kt(h){if(h<=0)return 0;if(h>=1)return 1;const a=h*h,u=a*h;return 4*(h<.5?u:3*(h-a)+u-.75)}function Jt(h,a,u,f){const b=new A(h,a,u,f);return S=>b.solve(S)}const Pt=Jt(.25,.1,.25,1);function dt(h,a,u){return Math.min(u,Math.max(a,h))}function er(h,a,u){const f=u-a,b=((h-a)%f+f)%f+a;return b===a?u:b}function Wt(h,...a){for(const u of a)for(const f in u)h[f]=u[f];return h}let ar=1;function _t(h,a,u){const f={};for(const b in h)f[b]=a.call(this,h[b],b,h);return f}function Ve(h,a,u){const f={};for(const b in h)a.call(this,h[b],b,h)&&(f[b]=h[b]);return f}function pt(h){return Array.isArray(h)?h.map(pt):typeof h=="object"&&h?_t(h,pt):h}const lt={};function Tt(h){lt[h]||(typeof console<"u"&&console.warn(h),lt[h]=!0)}function vt(h,a,u){return(u.y-h.y)*(a.x-h.x)>(a.y-h.y)*(u.x-h.x)}function Dt(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Yt=null;function Bt(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const xr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $r(h,a,u,f,b){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(h,{timestamp:0});try{const C=S?.format;if(!C||!C.startsWith("BGR")&&!C.startsWith("RGB"))throw new Error(`Unrecognized format ${C}`);const I=C.startsWith("BGR"),O=new Uint8ClampedArray(f*b*4);if(yield S.copyTo(O,function(F,B,G,Q,ie){const se=4*Math.max(-B,0),ce=(Math.max(0,G)-G)*Q*4+se,fe=4*Q,we=Math.max(0,B),Ue=Math.max(0,G);return{rect:{x:we,y:Ue,width:Math.min(F.width,B+Q)-we,height:Math.min(F.height,G+ie)-Ue},layout:[{offset:ce,stride:fe}]}}(h,a,u,f,b)),I)for(let F=0;F<O.length;F+=4){const B=O[F];O[F]=O[F+2],O[F+2]=B}return O}finally{S.close()}})}let Ir,Zr;function yr(h,a,u,f){return h.addEventListener(a,u,f),{unsubscribe:()=>{h.removeEventListener(a,u,f)}}}function ur(h){return h*Math.PI/180}function lr(h){return h/Math.PI*180}const nr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},mr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Yr="AbortError";function ke(){return new Error(Yr)}const oe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ae(h){return oe.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const de="global-dispatcher";class Te extends Error{constructor(a,u,f,b){super(`AJAXError: ${u} (${a}): ${f}`),this.status=a,this.statusText=u,this.url=f,this.body=b}}const Le=()=>Dt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,je=function(h,a){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const f=ae(h.url);if(f)return f(h,a);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:de},a)}if(!(/^file:/.test(u=h.url)||/^file:/.test(Le())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,b){return s(this,void 0,void 0,function*(){const S=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Le(),signal:b.signal});let C,I;f.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{C=yield fetch(S)}catch(F){throw new Te(0,F.message,f.url,new Blob)}if(!C.ok){const F=yield C.blob();throw new Te(C.status,C.statusText,f.url,F)}I=f.type==="arrayBuffer"||f.type==="image"?C.arrayBuffer():f.type==="json"?C.json():C.text();const O=yield I;if(b.signal.aborted)throw ke();return{data:O,cacheControl:C.headers.get("Cache-Control"),expires:C.headers.get("Expires")}})}(h,a);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:de},a)}var u;return function(f,b){return new Promise((S,C)=>{var I;const O=new XMLHttpRequest;O.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(O.responseType="arraybuffer");for(const F in f.headers)O.setRequestHeader(F,f.headers[F]);f.type==="json"&&(O.responseType="text",!((I=f.headers)===null||I===void 0)&&I.Accept||O.setRequestHeader("Accept","application/json")),O.withCredentials=f.credentials==="include",O.onerror=()=>{C(new Error(O.statusText))},O.onload=()=>{if(!b.signal.aborted)if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let F=O.response;if(f.type==="json")try{F=JSON.parse(O.response)}catch(B){return void C(B)}S({data:F,cacheControl:O.getResponseHeader("Cache-Control"),expires:O.getResponseHeader("Expires")})}else{const F=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});C(new Te(O.status,O.statusText,f.url,F))}},b.signal.addEventListener("abort",()=>{O.abort(),C(ke())}),O.send(f.body)})}(h,a)};function Je(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const a=new URL(h),u=window.location;return a.protocol===u.protocol&&a.host===u.host}function Fe(h,a,u){u[h]&&u[h].indexOf(a)!==-1||(u[h]=u[h]||[],u[h].push(a))}function et(h,a,u){if(u&&u[h]){const f=u[h].indexOf(a);f!==-1&&u[h].splice(f,1)}}class ct{constructor(a,u={}){Wt(this,u),this.type=a}}class it extends ct{constructor(a,u={}){super("error",Wt({error:a},u))}}class Ot{on(a,u){return this._listeners=this._listeners||{},Fe(a,u,this._listeners),{unsubscribe:()=>{this.off(a,u)}}}off(a,u){return et(a,u,this._listeners),et(a,u,this._oneTimeListeners),this}once(a,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Fe(a,u,this._oneTimeListeners),this):new Promise(f=>this.once(a,f))}fire(a,u){typeof a=="string"&&(a=new ct(a,u||{}));const f=a.type;if(this.listens(f)){a.target=this;const b=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const I of b)I.call(this,a);const S=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const I of S)et(f,I,this._oneTimeListeners),I.call(this,a);const C=this._eventedParent;C&&(Wt(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(a))}else a instanceof it&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,u){return this._eventedParent=a,this._eventedParentData=u,this}}var $e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Xt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function cr(h,a){const u={};for(const f in h)f!=="ref"&&(u[f]=h[f]);return Xt.forEach(f=>{f in a&&(u[f]=a[f])}),u}function Nt(h,a){if(Array.isArray(h)){if(!Array.isArray(a)||h.length!==a.length)return!1;for(let u=0;u<h.length;u++)if(!Nt(h[u],a[u]))return!1;return!0}if(typeof h=="object"&&h!==null&&a!==null){if(typeof a!="object"||Object.keys(h).length!==Object.keys(a).length)return!1;for(const u in h)if(!Nt(h[u],a[u]))return!1;return!0}return h===a}function Ht(h,a){h.push(a)}function _r(h,a,u){Ht(u,{command:"addSource",args:[h,a[h]]})}function ut(h,a,u){Ht(a,{command:"removeSource",args:[h]}),u[h]=!0}function Lt(h,a,u,f){ut(h,u,f),_r(h,a,u)}function Cr(h,a,u){let f;for(f in h[u])if(Object.prototype.hasOwnProperty.call(h[u],f)&&f!=="data"&&!Nt(h[u][f],a[u][f]))return!1;for(f in a[u])if(Object.prototype.hasOwnProperty.call(a[u],f)&&f!=="data"&&!Nt(h[u][f],a[u][f]))return!1;return!0}function Kt(h,a,u,f,b,S){h=h||{},a=a||{};for(const C in h)Object.prototype.hasOwnProperty.call(h,C)&&(Nt(h[C],a[C])||u.push({command:S,args:[f,C,a[C],b]}));for(const C in a)Object.prototype.hasOwnProperty.call(a,C)&&!Object.prototype.hasOwnProperty.call(h,C)&&(Nt(h[C],a[C])||u.push({command:S,args:[f,C,a[C],b]}))}function jt(h){return h.id}function Pr(h,a){return h[a.id]=a,h}class yt{constructor(a,u,f,b){this.message=(a?`${a}: `:"")+f,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function In(h,...a){for(const u of a)for(const f in u)h[f]=u[f];return h}class vn extends Error{constructor(a,u){super(u),this.message=u,this.key=a}}class mn{constructor(a,u=[]){this.parent=a,this.bindings={};for(const[f,b]of u)this.bindings[f]=b}concat(a){return new mn(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const hs={kind:"null"},Ct={kind:"number"},tr={kind:"string"},gr={kind:"boolean"},xn={kind:"color"},Lo={kind:"projectionDefinition"},to={kind:"object"},hr={kind:"value"},ds={kind:"collator"},hi={kind:"formatted"},ps={kind:"padding"},E={kind:"colorArray"},D={kind:"numberArray"},W={kind:"resolvedImage"},me={kind:"variableAnchorOffsetCollection"};function ze(h,a){return{kind:"array",itemType:h,N:a}}function nt(h){if(h.kind==="array"){const a=nt(h.itemType);return typeof h.N=="number"?`array<${a}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${a}>`}return h.kind}const St=[hs,Ct,tr,gr,xn,Lo,hi,to,ze(hr),ps,D,E,W,me];function rr(h,a){if(a.kind==="error")return null;if(h.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!rr(h.itemType,a.itemType))&&(typeof h.N!="number"||h.N===a.N))return null}else{if(h.kind===a.kind)return null;if(h.kind==="value"){for(const u of St)if(!rr(u,a))return null}}return`Expected ${nt(h)} but found ${nt(a)} instead.`}function Jr(h,a){return a.some(u=>u.kind===h.kind)}function Ar(h,a){return a.some(u=>u==="null"?h===null:u==="array"?Array.isArray(h):u==="object"?h&&!Array.isArray(h)&&typeof h=="object":u===typeof h)}function Xr(h,a){return h.kind==="array"&&a.kind==="array"?h.itemType.kind===a.itemType.kind&&typeof h.N=="number":h.kind===a.kind}const po=.96422,sa=.82521,$n=4/29,di=6/29,aa=3*di*di,iw=di*di*di,ow=Math.PI/180,sw=180/Math.PI;function zf(h){return(h%=360)<0&&(h+=360),h}function $l([h,a,u,f]){let b,S;const C=Bf((.2225045*(h=jf(h))+.7168786*(a=jf(a))+.0606169*(u=jf(u)))/1);h===a&&a===u?b=S=C:(b=Bf((.4360747*h+.3850649*a+.1430804*u)/po),S=Bf((.0139322*h+.0971045*a+.7141733*u)/sa));const I=116*C-16;return[I<0?0:I,500*(b-C),200*(C-S),f]}function jf(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Bf(h){return h>iw?Math.pow(h,1/3):h/aa+$n}function Vl([h,a,u,f]){let b=(h+16)/116,S=isNaN(a)?b:b+a/500,C=isNaN(u)?b:b-u/200;return b=1*$f(b),S=po*$f(S),C=sa*$f(C),[qf(3.1338561*S-1.6168667*b-.4906146*C),qf(-.9787684*S+1.9161415*b+.033454*C),qf(.0719453*S-.2289914*b+1.4052427*C),f]}function qf(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function $f(h){return h>di?h*h*h:aa*(h-$n)}const aw=Object.hasOwn||function(h,a){return Object.prototype.hasOwnProperty.call(h,a)};function Ul(h,a){return aw(h,a)?h[a]:void 0}function lu(h){return parseInt(h.padEnd(2,h),16)/255}function Do(h,a){return Mr(a?h/100:h,0,1)}function Mr(h,a,u){return Math.min(Math.max(a,h),u)}function Ba(h){return!h.some(Number.isNaN)}const la={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ks(h,a,u){return h+u*(a-h)}function qa(h,a,u){return h.map((f,b)=>ks(f,a[b],u))}class Or{constructor(a,u,f,b=1,S=!0){this.r=a,this.g=u,this.b=f,this.a=b,S||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[a,u,f,b]))}static parse(a){if(a instanceof Or)return a;if(typeof a!="string")return;const u=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const b=Ul(la,f);if(b){const[C,I,O]=b;return[C/255,I/255,O/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const C=f.length<6?1:2;let I=1;return[lu(f.slice(I,I+=C)),lu(f.slice(I,I+=C)),lu(f.slice(I,I+=C)),lu(f.slice(I,I+C)||"ff")]}if(f.startsWith("rgb")){const C=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[I,O,F,B,G,Q,ie,se,ce,fe,we,Ue]=C,Oe=[B||" ",ie||" ",fe].join("");if(Oe==="  "||Oe==="  /"||Oe===",,"||Oe===",,,"){const Ne=[F,Q,ce].join(""),Qe=Ne==="%%%"?100:Ne===""?255:0;if(Qe){const at=[Mr(+O/Qe,0,1),Mr(+G/Qe,0,1),Mr(+se/Qe,0,1),we?Do(+we,Ue):1];if(Ba(at))return at}}return}}const S=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[C,I,O,F,B,G,Q,ie,se]=S,ce=[O||" ",B||" ",Q].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const fe=[+I,Mr(+F,0,100),Mr(+G,0,100),ie?Do(+ie,se):1];if(Ba(fe))return function([we,Ue,Oe,Ne]){function Qe(at){const gt=(at+we/30)%12,Mt=Ue*Math.min(Oe,1-Oe);return Oe-Mt*Math.max(-1,Math.min(gt-3,9-gt,1))}return we=zf(we),Ue/=100,Oe/=100,[Qe(0),Qe(8),Qe(4),Ne]}(fe)}}}(a);return u?new Or(...u,!1):void 0}get rgb(){const{r:a,g:u,b:f,a:b}=this,S=b||1/0;return this.overwriteGetter("rgb",[a/S,u/S,f/S,b])}get hcl(){return this.overwriteGetter("hcl",function(a){const[u,f,b,S]=$l(a),C=Math.sqrt(f*f+b*b);return[Math.round(1e4*C)?zf(Math.atan2(b,f)*sw):NaN,C,u,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",$l(this.rgb))}overwriteGetter(a,u){return Object.defineProperty(this,a,{value:u}),u}toString(){const[a,u,f,b]=this.rgb;return`rgba(${[a,u,f].map(S=>Math.round(255*S)).join(",")},${b})`}static interpolate(a,u,f,b="rgb"){switch(b){case"rgb":{const[S,C,I,O]=qa(a.rgb,u.rgb,f);return new Or(S,C,I,O,!1)}case"hcl":{const[S,C,I,O]=a.hcl,[F,B,G,Q]=u.hcl;let ie,se;if(isNaN(S)||isNaN(F))isNaN(S)?isNaN(F)?ie=NaN:(ie=F,I!==1&&I!==0||(se=B)):(ie=S,G!==1&&G!==0||(se=C));else{let Oe=F-S;F>S&&Oe>180?Oe-=360:F<S&&S-F>180&&(Oe+=360),ie=S+f*Oe}const[ce,fe,we,Ue]=function([Oe,Ne,Qe,at]){return Oe=isNaN(Oe)?0:Oe*ow,Vl([Qe,Math.cos(Oe)*Ne,Math.sin(Oe)*Ne,at])}([ie,se??ks(C,B,f),ks(I,G,f),ks(O,Q,f)]);return new Or(ce,fe,we,Ue,!1)}case"lab":{const[S,C,I,O]=Vl(qa(a.lab,u.lab,f));return new Or(S,C,I,O,!1)}}}}Or.black=new Or(0,0,0,1),Or.white=new Or(1,1,1,1),Or.transparent=new Or(0,0,0,0),Or.red=new Or(1,0,0,1);class $a{constructor(a,u,f){this.sensitivity=a?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,u){return this.collator.compare(a,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const nd=["bottom","center","top"];class id{constructor(a,u,f,b,S,C){this.text=a,this.image=u,this.scale=f,this.fontStack=b,this.textColor=S,this.verticalAlign=C}}class Vi{constructor(a){this.sections=a}static fromString(a){return new Vi([new id(a,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Vi?a:Vi.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class pi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof pi)return a;if(typeof a=="number")return new pi([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const u of a)if(typeof u!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new pi(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,u,f){return new pi(qa(a.values,u.values,f))}}class Ui{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Ui)return a;if(typeof a=="number")return new Ui([a]);if(Array.isArray(a)){for(const u of a)if(typeof u!="number")return;return new Ui(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,u,f){return new Ui(qa(a.values,u.values,f))}}class Kn{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Kn)return a;if(typeof a=="string"){const f=Or.parse(a);return f?new Kn([f]):void 0}if(!Array.isArray(a))return;const u=[];for(const f of a){if(typeof f!="string")return;const b=Or.parse(f);if(!b)return;u.push(b)}return new Kn(u)}toString(){return JSON.stringify(this.values)}static interpolate(a,u,f,b="rgb"){const S=[];if(a.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${a.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let C=0;C<a.values.length;C++)S.push(Or.interpolate(a.values[C],u.values[C],f,b));return new Kn(S)}}class gn extends Error{constructor(a){super(a),this.name="RuntimeError"}toJSON(){return this.message}}const y_=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Gi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Gi)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let u=0;u<a.length;u+=2){const f=a[u],b=a[u+1];if(typeof f!="string"||!y_.has(f)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new Gi(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,u,f){const b=a.values,S=u.values;if(b.length!==S.length)throw new gn(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${u.toString()}`);const C=[];for(let I=0;I<b.length;I+=2){if(b[I]!==S[I])throw new gn(`Cannot interpolate values containing mismatched anchors. from[${I}]: ${b[I]}, to[${I}]: ${S[I]}`);C.push(b[I]);const[O,F]=b[I+1],[B,G]=S[I+1];C.push([ks(O,B,f),ks(F,G,f)])}return new Gi(C)}}class fo{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new fo({name:a,available:!1}):null}}class Fi{constructor(a,u,f){this.from=a,this.to=u,this.transition=f}static interpolate(a,u,f){return new Fi(a,u,f)}static parse(a){return a instanceof Fi?a:Array.isArray(a)&&a.length===3&&typeof a[0]=="string"&&typeof a[1]=="string"&&typeof a[2]=="number"?new Fi(a[0],a[1],a[2]):typeof a=="object"&&typeof a.from=="string"&&typeof a.to=="string"&&typeof a.transition=="number"?new Fi(a.from,a.to,a.transition):typeof a=="string"?new Fi(a,a,1):void 0}}function Sn(h,a,u,f){return typeof h=="number"&&h>=0&&h<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[h,a,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[h,a,u,f]:[h,a,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Va(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Fi||h instanceof Or||h instanceof $a||h instanceof Vi||h instanceof pi||h instanceof Ui||h instanceof Kn||h instanceof Gi||h instanceof fo)return!0;if(Array.isArray(h)){for(const a of h)if(!Va(a))return!1;return!0}if(typeof h=="object"){for(const a in h)if(!Va(h[a]))return!1;return!0}return!1}function or(h){if(h===null)return hs;if(typeof h=="string")return tr;if(typeof h=="boolean")return gr;if(typeof h=="number")return Ct;if(h instanceof Or)return xn;if(h instanceof Fi)return Lo;if(h instanceof $a)return ds;if(h instanceof Vi)return hi;if(h instanceof pi)return ps;if(h instanceof Ui)return D;if(h instanceof Kn)return E;if(h instanceof Gi)return me;if(h instanceof fo)return W;if(Array.isArray(h)){const a=h.length;let u;for(const f of h){const b=or(f);if(u){if(u===b)continue;u=hr;break}u=b}return ze(u||hr,a)}return to}function br(h){const a=typeof h;return h===null?"":a==="string"||a==="number"||a==="boolean"?String(h):h instanceof Or||h instanceof Fi||h instanceof Vi||h instanceof pi||h instanceof Ui||h instanceof Kn||h instanceof Gi||h instanceof fo?h.toString():JSON.stringify(h)}class Ls{constructor(a,u){this.type=a,this.value=u}static parse(a,u){if(a.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Va(a[1]))return u.error("invalid value");const f=a[1];let b=or(f);const S=u.expectedType;return b.kind!=="array"||b.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(b=S),new Ls(b,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Wr={string:tr,number:Ct,boolean:gr,object:to};class mo{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let f,b=1;const S=a[0];if(S==="array"){let I,O;if(a.length>2){const F=a[1];if(typeof F!="string"||!(F in Wr)||F==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);I=Wr[F],b++}else I=hr;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return u.error('The length argument to "array" must be a positive integer literal',2);O=a[2],b++}f=ze(I,O)}else{if(!Wr[S])throw new Error(`Types doesn't contain name = ${S}`);f=Wr[S]}const C=[];for(;b<a.length;b++){const I=u.parse(a[b],b,hr);if(!I)return null;C.push(I)}return new mo(f,C)}evaluate(a){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(a);if(!rr(this.type,or(f)))return f;if(u===this.args.length-1)throw new gn(`Expected value to be of type ${nt(this.type)}, but found ${nt(or(f))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const fs={"to-boolean":gr,"to-color":xn,"to-number":Ct,"to-string":tr};class ms{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const f=a[0];if(!fs[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&a.length!==2)return u.error("Expected one argument.");const b=fs[f],S=[];for(let C=1;C<a.length;C++){const I=u.parse(a[C],C,hr);if(!I)return null;S.push(I)}return new ms(b,S)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let u,f;for(const b of this.args){if(u=b.evaluate(a),f=null,u instanceof Or)return u;if(typeof u=="string"){const S=a.parseColor(u);if(S)return S}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Sn(u[0],u[1],u[2],u[3]),!f))return new Or(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new gn(f||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const f of this.args){u=f.evaluate(a);const b=pi.parse(u);if(b)return b}throw new gn(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(const f of this.args){u=f.evaluate(a);const b=Ui.parse(u);if(b)return b}throw new gn(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(const f of this.args){u=f.evaluate(a);const b=Kn.parse(u);if(b)return b}throw new gn(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const f of this.args){u=f.evaluate(a);const b=Gi.parse(u);if(b)return b}throw new gn(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const f of this.args){if(u=f.evaluate(a),u===null)return 0;const b=Number(u);if(!isNaN(b))return b}throw new gn(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Vi.fromString(br(this.args[0].evaluate(a)));case"resolvedImage":return fo.fromString(br(this.args[0].evaluate(a)));case"projectionDefinition":return this.args[0].evaluate(a);default:return br(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const od=["Unknown","Point","LineString","Polygon"];class Vf{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?od[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let u=this._parseColorCache.get(a);return u||(u=Or.parse(a),this._parseColorCache.set(a,u)),u}}class Gl{constructor(a,u,f=[],b,S=new mn,C=[]){this.registry=a,this.path=f,this.key=f.map(I=>`[${I}]`).join(""),this.scope=S,this.errors=C,this.expectedType=b,this._isConstant=u}parse(a,u,f,b,S={}){return u?this.concat(u,f,b)._parse(a,S):this._parse(a,S)}_parse(a,u){function f(b,S,C){return C==="assert"?new mo(S,[b]):C==="coerce"?new ms(S,[b]):b}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=a[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[b];if(S){let C=S.parse(a,this);if(!C)return null;if(this.expectedType){const I=this.expectedType,O=C.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||O.kind!=="value"){if(I.kind==="projectionDefinition"&&["string","array"].includes(O.kind)||["color","formatted","resolvedImage"].includes(I.kind)&&["value","string"].includes(O.kind)||["padding","numberArray"].includes(I.kind)&&["value","number","array"].includes(O.kind)||I.kind==="colorArray"&&["value","string","array"].includes(O.kind)||I.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(O.kind))C=f(C,I,u.typeAnnotation||"coerce");else if(this.checkSubtype(I,O))return null}else C=f(C,I,u.typeAnnotation||"assert")}if(!(C instanceof Ls)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const I=new Vf;try{C=new Ls(C.type,C.evaluate(I))}catch(O){return this.error(O.message),null}}return C}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,u,f){const b=typeof a=="number"?this.path.concat(a):this.path,S=f?this.scope.concat(f):this.scope;return new Gl(this.registry,this._isConstant,b,u||null,S,this.errors)}error(a,...u){const f=`${this.key}${u.map(b=>`[${b}]`).join("")}`;this.errors.push(new vn(f,a))}checkSubtype(a,u){const f=rr(a,u);return f&&this.error(f),f}}class cu{constructor(a,u){this.type=u.type,this.bindings=[].concat(a),this.result=u}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const u of this.bindings)a(u[1]);a(this.result)}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const f=[];for(let S=1;S<a.length-1;S+=2){const C=a[S];if(typeof C!="string")return u.error(`Expected string, but found ${typeof C} instead.`,S);if(/[^a-zA-Z0-9_]/.test(C))return u.error("Variable names must contain only alphanumeric characters or '_'.",S);const I=u.parse(a[S+1],S+1);if(!I)return null;f.push([C,I])}const b=u.parse(a[a.length-1],a.length-1,u.expectedType,f);return b?new cu(f,b):null}outputDefined(){return this.result.outputDefined()}}class sd{constructor(a,u){this.type=u.type,this.name=a,this.boundExpression=u}static parse(a,u){if(a.length!==2||typeof a[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=a[1];return u.scope.has(f)?new sd(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class ad{constructor(a,u,f){this.type=a,this.index=u,this.input=f}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=u.parse(a[1],1,Ct),b=u.parse(a[2],2,ze(u.expectedType||hr));return f&&b?new ad(b.type.itemType,f,b):null}evaluate(a){const u=this.index.evaluate(a),f=this.input.evaluate(a);if(u<0)throw new gn(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new gn(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new gn(`Array index must be an integer, but found ${u} instead.`);return f[u]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class ld{constructor(a,u){this.type=gr,this.needle=a,this.haystack=u}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=u.parse(a[1],1,hr),b=u.parse(a[2],2,hr);return f&&b?Jr(f.type,[gr,tr,Ct,hs,hr])?new ld(f,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${nt(f.type)} instead`):null}evaluate(a){const u=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!f)return!1;if(!Ar(u,["boolean","string","number","null"]))throw new gn(`Expected first argument to be of type boolean, string, number or null, but found ${nt(or(u))} instead.`);if(!Ar(f,["string","array"]))throw new gn(`Expected second argument to be of type array or string, but found ${nt(or(f))} instead.`);return f.indexOf(u)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class No{constructor(a,u,f){this.type=Ct,this.needle=a,this.haystack=u,this.fromIndex=f}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const f=u.parse(a[1],1,hr),b=u.parse(a[2],2,hr);if(!f||!b)return null;if(!Jr(f.type,[gr,tr,Ct,hs,hr]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${nt(f.type)} instead`);if(a.length===4){const S=u.parse(a[3],3,Ct);return S?new No(f,b,S):null}return new No(f,b)}evaluate(a){const u=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!Ar(u,["boolean","string","number","null"]))throw new gn(`Expected first argument to be of type boolean, string, number or null, but found ${nt(or(u))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(a)),Ar(f,["string"])){const S=f.indexOf(u,b);return S===-1?-1:[...f.slice(0,S)].length}if(Ar(f,["array"]))return f.indexOf(u,b);throw new gn(`Expected second argument to be of type array or string, but found ${nt(or(f))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class fi{constructor(a,u,f,b,S,C){this.inputType=a,this.type=u,this.input=f,this.cases=b,this.outputs=S,this.otherwise=C}static parse(a,u){if(a.length<5)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return u.error("Expected an even number of arguments.");let f,b;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);const S={},C=[];for(let F=2;F<a.length-1;F+=2){let B=a[F];const G=a[F+1];Array.isArray(B)||(B=[B]);const Q=u.concat(F);if(B.length===0)return Q.error("Expected at least one branch label.");for(const se of B){if(typeof se!="number"&&typeof se!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof se=="number"&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return Q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof se=="number"&&Math.floor(se)!==se)return Q.error("Numeric branch labels must be integer values.");if(f){if(Q.checkSubtype(f,or(se)))return null}else f=or(se);if(S[String(se)]!==void 0)return Q.error("Branch labels must be unique.");S[String(se)]=C.length}const ie=u.parse(G,F,b);if(!ie)return null;b=b||ie.type,C.push(ie)}const I=u.parse(a[1],1,hr);if(!I)return null;const O=u.parse(a[a.length-1],a.length-1,b);return O?I.type.kind!=="value"&&u.concat(1).checkSubtype(f,I.type)?null:new fi(f,b,I,S,C,O):null}evaluate(a){const u=this.input.evaluate(a);return(or(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class Hl{constructor(a,u,f){this.type=a,this.branches=u,this.otherwise=f}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const b=[];for(let C=1;C<a.length-1;C+=2){const I=u.parse(a[C],C,gr);if(!I)return null;const O=u.parse(a[C+1],C+1,f);if(!O)return null;b.push([I,O]),f=f||O.type}const S=u.parse(a[a.length-1],a.length-1,f);if(!S)return null;if(!f)throw new Error("Can't infer output type");return new Hl(f,b,S)}evaluate(a){for(const[u,f]of this.branches)if(u.evaluate(a))return f.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[u,f]of this.branches)a(u),a(f);a(this.otherwise)}outputDefined(){return this.branches.every(([a,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class uu{constructor(a,u,f,b){this.type=a,this.input=u,this.beginIndex=f,this.endIndex=b}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const f=u.parse(a[1],1,hr),b=u.parse(a[2],2,Ct);if(!f||!b)return null;if(!Jr(f.type,[ze(hr),tr,hr]))return u.error(`Expected first argument to be of type array or string, but found ${nt(f.type)} instead`);if(a.length===4){const S=u.parse(a[3],3,Ct);return S?new uu(f.type,f,b,S):null}return new uu(f.type,f,b)}evaluate(a){const u=this.input.evaluate(a),f=this.beginIndex.evaluate(a);let b;if(this.endIndex&&(b=this.endIndex.evaluate(a)),Ar(u,["string"]))return[...u].slice(f,b).join("");if(Ar(u,["array"]))return u.slice(f,b);throw new gn(`Expected first argument to be of type array or string, but found ${nt(or(u))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Ua(h,a){const u=h.length-1;let f,b,S=0,C=u,I=0;for(;S<=C;)if(I=Math.floor((S+C)/2),f=h[I],b=h[I+1],f<=a){if(I===u||a<b)return I;S=I+1}else{if(!(f>a))throw new gn("Input is not a number.");C=I-1}return 0}class Vn{constructor(a,u,f){this.type=a,this.input=u,this.labels=[],this.outputs=[];for(const[b,S]of f)this.labels.push(b),this.outputs.push(S)}static parse(a,u){if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(a[1],1,Ct);if(!f)return null;const b=[];let S=null;u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);for(let C=1;C<a.length;C+=2){const I=C===1?-1/0:a[C],O=a[C+1],F=C,B=C+1;if(typeof I!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(b.length&&b[b.length-1][0]>=I)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const G=u.parse(O,B,S);if(!G)return null;S=S||G.type,b.push([I,G])}return new Vn(S,f,b)}evaluate(a){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(a);const b=this.input.evaluate(a);if(b<=u[0])return f[0].evaluate(a);const S=u.length;return b>=u[S-1]?f[S-1].evaluate(a):f[Ua(u,b)].evaluate(a)}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function __(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var hu,Uf,lw=function(){if(Uf)return hu;function h(a,u,f,b){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=u,this.p2x=f,this.p2y=b}return Uf=1,hu=h,h.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,u){if(u===void 0&&(u=1e-6),a<0)return 0;if(a>1)return 1;for(var f=a,b=0;b<8;b++){var S=this.sampleCurveX(f)-a;if(Math.abs(S)<u)return f;var C=this.sampleCurveDerivativeX(f);if(Math.abs(C)<1e-6)break;f-=S/C}var I=0,O=1;for(f=a,b=0;b<20&&(S=this.sampleCurveX(f),!(Math.abs(S-a)<u));b++)a>S?I=f:O=f,f=.5*(O-I)+I;return f},solve:function(a,u){return this.sampleCurveY(this.solveCurveX(a,u))}},hu}(),Jl=__(lw);class Ci{constructor(a,u,f,b,S){this.type=a,this.operator=u,this.interpolation=f,this.input=b,this.labels=[],this.outputs=[];for(const[C,I]of S)this.labels.push(C),this.outputs.push(I)}static interpolationFactor(a,u,f,b){let S=0;if(a.name==="exponential")S=du(u,a.base,f,b);else if(a.name==="linear")S=du(u,1,f,b);else if(a.name==="cubic-bezier"){const C=a.controlPoints;S=new Jl(C[0],C[1],C[2],C[3]).solve(du(u,1,f,b))}return S}static parse(a,u){let[f,b,S,...C]=a;if(!Array.isArray(b)||b.length===0)return u.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const F=b[1];if(typeof F!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:F}}else{if(b[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const F=b.slice(1);if(F.length!==4||F.some(B=>typeof B!="number"||B<0||B>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:F}}}if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(S=u.parse(S,2,Ct),!S)return null;const I=[];let O=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||u.expectedType==E?u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType):O=xn;for(let F=0;F<C.length;F+=2){const B=C[F],G=C[F+1],Q=F+3,ie=F+4;if(typeof B!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(I.length&&I[I.length-1][0]>=B)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);const se=u.parse(G,ie,O);if(!se)return null;O=O||se.type,I.push([B,se])}return Xr(O,Ct)||Xr(O,Lo)||Xr(O,xn)||Xr(O,ps)||Xr(O,D)||Xr(O,E)||Xr(O,me)||Xr(O,ze(Ct))?new Ci(O,f,b,S,I):u.error(`Type ${nt(O)} is not interpolatable.`)}evaluate(a){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(a);const b=this.input.evaluate(a);if(b<=u[0])return f[0].evaluate(a);const S=u.length;if(b>=u[S-1])return f[S-1].evaluate(a);const C=Ua(u,b),I=Ci.interpolationFactor(this.interpolation,b,u[C],u[C+1]),O=f[C].evaluate(a),F=f[C+1].evaluate(a);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ks(O,F,I);case"color":return Or.interpolate(O,F,I);case"padding":return pi.interpolate(O,F,I);case"colorArray":return Kn.interpolate(O,F,I);case"numberArray":return Ui.interpolate(O,F,I);case"variableAnchorOffsetCollection":return Gi.interpolate(O,F,I);case"array":return qa(O,F,I);case"projectionDefinition":return Fi.interpolate(O,F,I)}case"interpolate-hcl":switch(this.type.kind){case"color":return Or.interpolate(O,F,I,"hcl");case"colorArray":return Kn.interpolate(O,F,I,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Or.interpolate(O,F,I,"lab");case"colorArray":return Kn.interpolate(O,F,I,"lab")}}}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function du(h,a,u,f){const b=f-u,S=h-u;return b===0?0:a===1?S/b:(Math.pow(a,S)-1)/(Math.pow(a,b)-1)}const gs={color:Or.interpolate,number:ks,padding:pi.interpolate,numberArray:Ui.interpolate,colorArray:Kn.interpolate,variableAnchorOffsetCollection:Gi.interpolate,array:qa};class pu{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let f=null;const b=u.expectedType;b&&b.kind!=="value"&&(f=b);const S=[];for(const I of a.slice(1)){const O=u.parse(I,1+S.length,f,void 0,{typeAnnotation:"omit"});if(!O)return null;f=f||O.type,S.push(O)}if(!f)throw new Error("No output type");const C=b&&S.some(I=>rr(b,I.type));return new pu(C?hr:f,S)}evaluate(a){let u,f=null,b=0;for(const S of this.args)if(b++,f=S.evaluate(a),f&&f instanceof fo&&!f.available&&(u||(u=f.name),f=null,b===this.args.length&&(f=u)),f!==null)break;return f}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}function fu(h,a){return h==="=="||h==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function mu(h,a,u,f){return f.compare(a,u)===0}function zi(h,a,u){const f=h!=="=="&&h!=="!=";return class uJ{constructor(S,C,I){this.type=gr,this.lhs=S,this.rhs=C,this.collator=I,this.hasUntypedArgument=S.type.kind==="value"||C.type.kind==="value"}static parse(S,C){if(S.length!==3&&S.length!==4)return C.error("Expected two or three arguments.");const I=S[0];let O=C.parse(S[1],1,hr);if(!O)return null;if(!fu(I,O.type))return C.concat(1).error(`"${I}" comparisons are not supported for type '${nt(O.type)}'.`);let F=C.parse(S[2],2,hr);if(!F)return null;if(!fu(I,F.type))return C.concat(2).error(`"${I}" comparisons are not supported for type '${nt(F.type)}'.`);if(O.type.kind!==F.type.kind&&O.type.kind!=="value"&&F.type.kind!=="value")return C.error(`Cannot compare types '${nt(O.type)}' and '${nt(F.type)}'.`);f&&(O.type.kind==="value"&&F.type.kind!=="value"?O=new mo(F.type,[O]):O.type.kind!=="value"&&F.type.kind==="value"&&(F=new mo(O.type,[F])));let B=null;if(S.length===4){if(O.type.kind!=="string"&&F.type.kind!=="string"&&O.type.kind!=="value"&&F.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(B=C.parse(S[3],3,ds),!B)return null}return new uJ(O,F,B)}evaluate(S){const C=this.lhs.evaluate(S),I=this.rhs.evaluate(S);if(f&&this.hasUntypedArgument){const O=or(C),F=or(I);if(O.kind!==F.kind||O.kind!=="string"&&O.kind!=="number")throw new gn(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${O.kind}, ${F.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const O=or(C),F=or(I);if(O.kind!=="string"||F.kind!=="string")return a(S,C,I)}return this.collator?u(S,C,I,this.collator.evaluate(S)):a(S,C,I)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const b_=zi("==",function(h,a,u){return a===u},mu),cd=zi("!=",function(h,a,u){return a!==u},function(h,a,u,f){return!mu(0,a,u,f)}),cw=zi("<",function(h,a,u){return a<u},function(h,a,u,f){return f.compare(a,u)<0}),Gf=zi(">",function(h,a,u){return a>u},function(h,a,u,f){return f.compare(a,u)>0}),uw=zi("<=",function(h,a,u){return a<=u},function(h,a,u,f){return f.compare(a,u)<=0}),hw=zi(">=",function(h,a,u){return a>=u},function(h,a,u,f){return f.compare(a,u)>=0});class ud{constructor(a,u,f){this.type=ds,this.locale=f,this.caseSensitive=a,this.diacriticSensitive=u}static parse(a,u){if(a.length!==2)return u.error("Expected one argument.");const f=a[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const b=u.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,gr);if(!b)return null;const S=u.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,gr);if(!S)return null;let C=null;return f.locale&&(C=u.parse(f.locale,1,tr),!C)?null:new ud(b,S,C)}evaluate(a){return new $a(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class Hf{constructor(a,u,f,b,S){this.type=tr,this.number=a,this.locale=u,this.currency=f,this.minFractionDigits=b,this.maxFractionDigits=S}static parse(a,u){if(a.length!==3)return u.error("Expected two arguments.");const f=u.parse(a[1],1,Ct);if(!f)return null;const b=a[2];if(typeof b!="object"||Array.isArray(b))return u.error("NumberFormat options argument must be an object.");let S=null;if(b.locale&&(S=u.parse(b.locale,1,tr),!S))return null;let C=null;if(b.currency&&(C=u.parse(b.currency,1,tr),!C))return null;let I=null;if(b["min-fraction-digits"]&&(I=u.parse(b["min-fraction-digits"],1,Ct),!I))return null;let O=null;return b["max-fraction-digits"]&&(O=u.parse(b["max-fraction-digits"],1,Ct),!O)?null:new Hf(f,S,C,I,O)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Ga{constructor(a){this.type=hi,this.sections=a}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const f=a[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const b=[];let S=!1;for(let C=1;C<=a.length-1;++C){const I=a[C];if(S&&typeof I=="object"&&!Array.isArray(I)){S=!1;let O=null;if(I["font-scale"]&&(O=u.parse(I["font-scale"],1,Ct),!O))return null;let F=null;if(I["text-font"]&&(F=u.parse(I["text-font"],1,ze(tr)),!F))return null;let B=null;if(I["text-color"]&&(B=u.parse(I["text-color"],1,xn),!B))return null;let G=null;if(I["vertical-align"]){if(typeof I["vertical-align"]=="string"&&!nd.includes(I["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${I["vertical-align"]}' instead.`);if(G=u.parse(I["vertical-align"],1,tr),!G)return null}const Q=b[b.length-1];Q.scale=O,Q.font=F,Q.textColor=B,Q.verticalAlign=G}else{const O=u.parse(a[C],1,hr);if(!O)return null;const F=O.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,b.push({content:O,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ga(b)}evaluate(a){return new Vi(this.sections.map(u=>{const f=u.content.evaluate(a);return or(f)===W?new id("",f,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(a):null):new id(br(f),null,u.scale?u.scale.evaluate(a):null,u.font?u.font.evaluate(a).join(","):null,u.textColor?u.textColor.evaluate(a):null,u.verticalAlign?u.verticalAlign.evaluate(a):null)}))}eachChild(a){for(const u of this.sections)a(u.content),u.scale&&a(u.scale),u.font&&a(u.font),u.textColor&&a(u.textColor),u.verticalAlign&&a(u.verticalAlign)}outputDefined(){return!1}}class Jf{constructor(a){this.type=W,this.input=a}static parse(a,u){if(a.length!==2)return u.error("Expected two arguments.");const f=u.parse(a[1],1,tr);return f?new Jf(f):u.error("No image name provided.")}evaluate(a){const u=this.input.evaluate(a),f=fo.fromString(u);return f&&a.availableImages&&(f.available=a.availableImages.indexOf(u)>-1),f}eachChild(a){a(this.input)}outputDefined(){return!1}}class hd{constructor(a){this.type=Ct,this.input=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=u.parse(a[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${nt(f.type)} instead.`):new hd(f):null}evaluate(a){const u=this.input.evaluate(a);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new gn(`Expected value to be of type string or array, but found ${nt(or(u))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const Fo=8192;function dw(h,a){const u=(180+h[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,b=Math.pow(2,a.z);return[Math.round(u*b*Fo),Math.round(f*b*Fo)]}function dd(h,a){const u=Math.pow(2,a.z);return[(b=(h[0]/Fo+a.x)/u,360*b-180),(f=(h[1]/Fo+a.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,b}function gu(h,a){h[0]=Math.min(h[0],a[0]),h[1]=Math.min(h[1],a[1]),h[2]=Math.max(h[2],a[0]),h[3]=Math.max(h[3],a[1])}function yu(h,a){return!(h[0]<=a[0]||h[2]>=a[2]||h[1]<=a[1]||h[3]>=a[3])}function pw(h,a,u){const f=h[0]-a[0],b=h[1]-a[1],S=h[0]-u[0],C=h[1]-u[1];return f*C-S*b==0&&f*S<=0&&b*C<=0}function pd(h,a,u,f){return(b=[f[0]-u[0],f[1]-u[1]])[0]*(S=[a[0]-h[0],a[1]-h[1]])[1]-b[1]*S[0]!=0&&!(!x_(h,a,u,f)||!x_(u,f,h,a));var b,S}function fw(h,a,u){for(const f of u)for(let b=0;b<f.length-1;++b)if(pd(h,a,f[b],f[b+1]))return!0;return!1}function Ha(h,a,u=!1){let f=!1;for(const I of a)for(let O=0;O<I.length-1;O++){if(pw(h,I[O],I[O+1]))return u;(S=I[O])[1]>(b=h)[1]!=(C=I[O+1])[1]>b[1]&&b[0]<(C[0]-S[0])*(b[1]-S[1])/(C[1]-S[1])+S[0]&&(f=!f)}var b,S,C;return f}function v_(h,a){for(const u of a)if(Ha(h,u))return!0;return!1}function Wf(h,a){for(const u of h)if(!Ha(u,a))return!1;for(let u=0;u<h.length-1;++u)if(fw(h[u],h[u+1],a))return!1;return!0}function mw(h,a){for(const u of a)if(Wf(h,u))return!0;return!1}function x_(h,a,u,f){const b=f[0]-u[0],S=f[1]-u[1],C=(h[0]-u[0])*S-b*(h[1]-u[1]),I=(a[0]-u[0])*S-b*(a[1]-u[1]);return C>0&&I<0||C<0&&I>0}function Zf(h,a,u){const f=[];for(let b=0;b<h.length;b++){const S=[];for(let C=0;C<h[b].length;C++){const I=dw(h[b][C],u);gu(a,I),S.push(I)}f.push(S)}return f}function w_(h,a,u){const f=[];for(let b=0;b<h.length;b++){const S=Zf(h[b],a,u);f.push(S)}return f}function fd(h,a,u,f){if(h[0]<u[0]||h[0]>u[2]){const b=.5*f;let S=h[0]-u[0]>b?-f:u[0]-h[0]>b?f:0;S===0&&(S=h[0]-u[2]>b?-f:u[2]-h[0]>b?f:0),h[0]+=S}gu(a,h)}function E_(h,a,u,f){const b=Math.pow(2,f.z)*Fo,S=[f.x*Fo,f.y*Fo],C=[];for(const I of h)for(const O of I){const F=[O.x+S[0],O.y+S[1]];fd(F,a,u,b),C.push(F)}return C}function T_(h,a,u,f){const b=Math.pow(2,f.z)*Fo,S=[f.x*Fo,f.y*Fo],C=[];for(const O of h){const F=[];for(const B of O){const G=[B.x+S[0],B.y+S[1]];gu(a,G),F.push(G)}C.push(F)}if(a[2]-a[0]<=b/2){(I=a)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const O of C)for(const F of O)fd(F,a,u,b)}var I;return C}class Ja{constructor(a,u){this.type=gr,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Va(a[1])){const f=a[1];if(f.type==="FeatureCollection"){const b=[];for(const S of f.features){const{type:C,coordinates:I}=S.geometry;C==="Polygon"&&b.push(I),C==="MultiPolygon"&&b.push(...I)}if(b.length)return new Ja(f,{type:"MultiPolygon",coordinates:b})}else if(f.type==="Feature"){const b=f.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Ja(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Ja(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(u,f){const b=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(f.type==="Polygon"){const I=Zf(f.coordinates,S,C),O=E_(u.geometry(),b,S,C);if(!yu(b,S))return!1;for(const F of O)if(!Ha(F,I))return!1}if(f.type==="MultiPolygon"){const I=w_(f.coordinates,S,C),O=E_(u.geometry(),b,S,C);if(!yu(b,S))return!1;for(const F of O)if(!v_(F,I))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(u,f){const b=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(f.type==="Polygon"){const I=Zf(f.coordinates,S,C),O=T_(u.geometry(),b,S,C);if(!yu(b,S))return!1;for(const F of O)if(!Wf(F,I))return!1}if(f.type==="MultiPolygon"){const I=w_(f.coordinates,S,C),O=T_(u.geometry(),b,S,C);if(!yu(b,S))return!1;for(const F of O)if(!mw(F,I))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Kf=class{constructor(h=[],a=(u,f)=>u<f?-1:u>f?1:0){if(this.data=h,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:a,compare:u}=this,f=a[h];for(;h>0;){const b=h-1>>1,S=a[b];if(u(f,S)>=0)break;a[h]=S,h=b}a[h]=f}_down(h){const{data:a,compare:u}=this,f=this.length>>1,b=a[h];for(;h<f;){let S=1+(h<<1);const C=S+1;if(C<this.length&&u(a[C],a[S])<0&&(S=C),u(a[S],b)>=0)break;a[h]=a[S],h=S}a[h]=b}};function Yf(h,a,u=0,f=h.length-1,b=gw){for(;f>u;){if(f-u>600){const O=f-u+1,F=a-u+1,B=Math.log(O),G=.5*Math.exp(2*B/3),Q=.5*Math.sqrt(B*G*(O-G)/O)*(F-O/2<0?-1:1);Yf(h,a,Math.max(u,Math.floor(a-F*G/O+Q)),Math.min(f,Math.floor(a+(O-F)*G/O+Q)),b)}const S=h[a];let C=u,I=f;for(_u(h,u,a),b(h[f],S)>0&&_u(h,u,f);C<I;){for(_u(h,C,I),C++,I--;b(h[C],S)<0;)C++;for(;b(h[I],S)>0;)I--}b(h[u],S)===0?_u(h,u,I):(I++,_u(h,I,f)),I<=a&&(u=I+1),a<=I&&(f=I-1)}}function _u(h,a,u){const f=h[a];h[a]=h[u],h[u]=f}function gw(h,a){return h<a?-1:h>a?1:0}function bu(h,a){if(h.length<=1)return[h];const u=[];let f,b;for(const S of h){const C=yw(S);C!==0&&(S.area=Math.abs(C),b===void 0&&(b=C<0),b===C<0?(f&&u.push(f),f=[S]):f.push(S))}if(f&&u.push(f),a>1)for(let S=0;S<u.length;S++)u[S].length<=a||(Yf(u[S],a,1,u[S].length-1,S_),u[S]=u[S].slice(0,a));return u}function S_(h,a){return a.area-h.area}function yw(h){let a=0;for(let u,f,b=0,S=h.length,C=S-1;b<S;C=b++)u=h[b],f=h[C],a+=(f.x-u.x)*(u.y+f.y);return a}const C_=1/298.257223563,P_=C_*(2-C_),Xf=Math.PI/180;class Qf{constructor(a){const u=6378.137*Xf*1e3,f=Math.cos(a*Xf),b=1/(1-P_*(1-f*f)),S=Math.sqrt(b);this.kx=u*S*f,this.ky=u*S*b*(1-P_)}distance(a,u){const f=this.wrap(a[0]-u[0])*this.kx,b=(a[1]-u[1])*this.ky;return Math.sqrt(f*f+b*b)}pointOnLine(a,u){let f,b,S,C,I=1/0;for(let O=0;O<a.length-1;O++){let F=a[O][0],B=a[O][1],G=this.wrap(a[O+1][0]-F)*this.kx,Q=(a[O+1][1]-B)*this.ky,ie=0;G===0&&Q===0||(ie=(this.wrap(u[0]-F)*this.kx*G+(u[1]-B)*this.ky*Q)/(G*G+Q*Q),ie>1?(F=a[O+1][0],B=a[O+1][1]):ie>0&&(F+=G/this.kx*ie,B+=Q/this.ky*ie)),G=this.wrap(u[0]-F)*this.kx,Q=(u[1]-B)*this.ky;const se=G*G+Q*Q;se<I&&(I=se,f=F,b=B,S=O,C=ie)}return{point:[f,b],index:S,t:Math.max(0,Math.min(1,C))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function A_(h,a){return a[0]-h[0]}function md(h){return h[1]-h[0]+1}function Ds(h,a){return h[1]>=h[0]&&h[1]<a}function Qr(h,a){if(h[0]>h[1])return[null,null];const u=md(h);if(a){if(u===2)return[h,null];const b=Math.floor(u/2);return[[h[0],h[0]+b],[h[0]+b,h[1]]]}if(u===1)return[h,null];const f=Math.floor(u/2)-1;return[[h[0],h[0]+f],[h[0]+f+1,h[1]]]}function em(h,a){if(!Ds(a,h.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let f=a[0];f<=a[1];++f)gu(u,h[f]);return u}function tm(h){const a=[1/0,1/0,-1/0,-1/0];for(const u of h)for(const f of u)gu(a,f);return a}function R_(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function rm(h,a,u){if(!R_(h)||!R_(a))return NaN;let f=0,b=0;return h[2]<a[0]&&(f=a[0]-h[2]),h[0]>a[2]&&(f=h[0]-a[2]),h[1]>a[3]&&(b=h[1]-a[3]),h[3]<a[1]&&(b=a[1]-h[3]),u.distance([0,0],[f,b])}function Wa(h,a,u){const f=u.pointOnLine(a,h);return u.distance(h,f.point)}function nm(h,a,u,f,b){const S=Math.min(Wa(h,[u,f],b),Wa(a,[u,f],b)),C=Math.min(Wa(u,[h,a],b),Wa(f,[h,a],b));return Math.min(S,C)}function _w(h,a,u,f,b){if(!Ds(a,h.length)||!Ds(f,u.length))return 1/0;let S=1/0;for(let C=a[0];C<a[1];++C){const I=h[C],O=h[C+1];for(let F=f[0];F<f[1];++F){const B=u[F],G=u[F+1];if(pd(I,O,B,G))return 0;S=Math.min(S,nm(I,O,B,G,b))}}return S}function bw(h,a,u,f,b){if(!Ds(a,h.length)||!Ds(f,u.length))return NaN;let S=1/0;for(let C=a[0];C<=a[1];++C)for(let I=f[0];I<=f[1];++I)if(S=Math.min(S,b.distance(h[C],u[I])),S===0)return S;return S}function vw(h,a,u){if(Ha(h,a,!0))return 0;let f=1/0;for(const b of a){const S=b[0],C=b[b.length-1];if(S!==C&&(f=Math.min(f,Wa(h,[C,S],u)),f===0))return f;const I=u.pointOnLine(b,h);if(f=Math.min(f,u.distance(h,I.point)),f===0)return f}return f}function xw(h,a,u,f){if(!Ds(a,h.length))return NaN;for(let S=a[0];S<=a[1];++S)if(Ha(h[S],u,!0))return 0;let b=1/0;for(let S=a[0];S<a[1];++S){const C=h[S],I=h[S+1];for(const O of u)for(let F=0,B=O.length,G=B-1;F<B;G=F++){const Q=O[G],ie=O[F];if(pd(C,I,Q,ie))return 0;b=Math.min(b,nm(C,I,Q,ie,f))}}return b}function I_(h,a){for(const u of h)for(const f of u)if(Ha(f,a,!0))return!0;return!1}function ww(h,a,u,f=1/0){const b=tm(h),S=tm(a);if(f!==1/0&&rm(b,S,u)>=f)return f;if(yu(b,S)){if(I_(h,a))return 0}else if(I_(a,h))return 0;let C=1/0;for(const I of h)for(let O=0,F=I.length,B=F-1;O<F;B=O++){const G=I[B],Q=I[O];for(const ie of a)for(let se=0,ce=ie.length,fe=ce-1;se<ce;fe=se++){const we=ie[fe],Ue=ie[se];if(pd(G,Q,we,Ue))return 0;C=Math.min(C,nm(G,Q,we,Ue,u))}}return C}function M_(h,a,u,f,b,S){if(!S)return;const C=rm(em(f,S),b,u);C<a&&h.push([C,S,[0,0]])}function gd(h,a,u,f,b,S,C){if(!S||!C)return;const I=rm(em(f,S),em(b,C),u);I<a&&h.push([I,S,C])}function yd(h,a,u,f,b=1/0){let S=Math.min(f.distance(h[0],u[0][0]),b);if(S===0)return S;const C=new Kf([[0,[0,h.length-1],[0,0]]],A_),I=tm(u);for(;C.length>0;){const O=C.pop();if(O[0]>=S)continue;const F=O[1],B=a?50:100;if(md(F)<=B){if(!Ds(F,h.length))return NaN;if(a){const G=xw(h,F,u,f);if(isNaN(G)||G===0)return G;S=Math.min(S,G)}else for(let G=F[0];G<=F[1];++G){const Q=vw(h[G],u,f);if(S=Math.min(S,Q),S===0)return 0}}else{const G=Qr(F,a);M_(C,S,f,h,I,G[0]),M_(C,S,f,h,I,G[1])}}return S}function _d(h,a,u,f,b,S=1/0){let C=Math.min(S,b.distance(h[0],u[0]));if(C===0)return C;const I=new Kf([[0,[0,h.length-1],[0,u.length-1]]],A_);for(;I.length>0;){const O=I.pop();if(O[0]>=C)continue;const F=O[1],B=O[2],G=a?50:100,Q=f?50:100;if(md(F)<=G&&md(B)<=Q){if(!Ds(F,h.length)&&Ds(B,u.length))return NaN;let ie;if(a&&f)ie=_w(h,F,u,B,b),C=Math.min(C,ie);else if(a&&!f){const se=h.slice(F[0],F[1]+1);for(let ce=B[0];ce<=B[1];++ce)if(ie=Wa(u[ce],se,b),C=Math.min(C,ie),C===0)return C}else if(!a&&f){const se=u.slice(B[0],B[1]+1);for(let ce=F[0];ce<=F[1];++ce)if(ie=Wa(h[ce],se,b),C=Math.min(C,ie),C===0)return C}else ie=bw(h,F,u,B,b),C=Math.min(C,ie)}else{const ie=Qr(F,a),se=Qr(B,f);gd(I,C,b,h,u,ie[0],se[0]),gd(I,C,b,h,u,ie[0],se[1]),gd(I,C,b,h,u,ie[1],se[0]),gd(I,C,b,h,u,ie[1],se[1])}}return C}function im(h){return h.type==="MultiPolygon"?h.coordinates.map(a=>({type:"Polygon",coordinates:a})):h.type==="MultiLineString"?h.coordinates.map(a=>({type:"LineString",coordinates:a})):h.type==="MultiPoint"?h.coordinates.map(a=>({type:"Point",coordinates:a})):[h]}class Za{constructor(a,u){this.type=Ct,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Va(a[1])){const f=a[1];if(f.type==="FeatureCollection")return new Za(f,f.features.map(b=>im(b.geometry)).flat());if(f.type==="Feature")return new Za(f,im(f.geometry));if("type"in f&&"coordinates"in f)return new Za(f,im(f))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(u,f){const b=u.geometry(),S=b.flat().map(O=>dd([O.x,O.y],u.canonical));if(b.length===0)return NaN;const C=new Qf(S[0][1]);let I=1/0;for(const O of f){switch(O.type){case"Point":I=Math.min(I,_d(S,!1,[O.coordinates],!1,C,I));break;case"LineString":I=Math.min(I,_d(S,!1,O.coordinates,!0,C,I));break;case"Polygon":I=Math.min(I,yd(S,!1,O.coordinates,C,I))}if(I===0)return I}return I}(a,this.geometries);if(a.geometryType()==="LineString")return function(u,f){const b=u.geometry(),S=b.flat().map(O=>dd([O.x,O.y],u.canonical));if(b.length===0)return NaN;const C=new Qf(S[0][1]);let I=1/0;for(const O of f){switch(O.type){case"Point":I=Math.min(I,_d(S,!0,[O.coordinates],!1,C,I));break;case"LineString":I=Math.min(I,_d(S,!0,O.coordinates,!0,C,I));break;case"Polygon":I=Math.min(I,yd(S,!0,O.coordinates,C,I))}if(I===0)return I}return I}(a,this.geometries);if(a.geometryType()==="Polygon")return function(u,f){const b=u.geometry();if(b.length===0||b[0].length===0)return NaN;const S=bu(b,0).map(O=>O.map(F=>F.map(B=>dd([B.x,B.y],u.canonical)))),C=new Qf(S[0][0][0][1]);let I=1/0;for(const O of f)for(const F of S){switch(O.type){case"Point":I=Math.min(I,yd([O.coordinates],!1,F,C,I));break;case"LineString":I=Math.min(I,yd(O.coordinates,!0,F,C,I));break;case"Polygon":I=Math.min(I,ww(F,O.coordinates,C,I))}if(I===0)return I}return I}(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class vu{constructor(a){this.type=hr,this.key=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=a[1];return f==null?u.error("Global state property must be defined."):typeof f!="string"?u.error(`Global state property must be string, but found ${typeof a[1]} instead.`):new vu(f)}evaluate(a){var u;const f=(u=a.globals)===null||u===void 0?void 0:u.globalState;return f&&Object.keys(f).length!==0?Ul(f,this.key):null}eachChild(){}outputDefined(){return!1}}const Wl={"==":b_,"!=":cd,">":Gf,"<":cw,">=":hw,"<=":uw,array:mo,at:ad,boolean:mo,case:Hl,coalesce:pu,collator:ud,format:Ga,image:Jf,in:ld,"index-of":No,interpolate:Ci,"interpolate-hcl":Ci,"interpolate-lab":Ci,length:hd,let:cu,literal:Ls,match:fi,number:mo,"number-format":Hf,object:mo,slice:uu,step:Vn,string:mo,"to-boolean":ms,"to-color":ms,"to-number":ms,"to-string":ms,var:sd,within:Ja,distance:Za,"global-state":vu};class Eo{constructor(a,u,f,b){this.name=a,this.type=u,this._evaluate=f,this.args=b}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,u){const f=a[0],b=Eo.definitions[f];if(!b)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(b)?b[0]:b.type,C=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,I=C.filter(([F])=>!Array.isArray(F)||F.length===a.length-1);let O=null;for(const[F,B]of I){O=new Gl(u.registry,bd,u.path,null,u.scope);const G=[];let Q=!1;for(let ie=1;ie<a.length;ie++){const se=a[ie],ce=Array.isArray(F)?F[ie-1]:F.type,fe=O.parse(se,1+G.length,ce);if(!fe){Q=!0;break}G.push(fe)}if(!Q)if(Array.isArray(F)&&F.length!==G.length)O.error(`Expected ${F.length} arguments, but found ${G.length} instead.`);else{for(let ie=0;ie<G.length;ie++){const se=Array.isArray(F)?F[ie]:F.type,ce=G[ie];O.concat(ie+1).checkSubtype(se,ce.type)}if(O.errors.length===0)return new Eo(f,S,B,G)}}if(I.length===1)u.errors.push(...O.errors);else{const F=(I.length?I:C).map(([G])=>{return Q=G,Array.isArray(Q)?`(${Q.map(nt).join(", ")})`:`(${nt(Q.type)}...)`;var Q}).join(" | "),B=[];for(let G=1;G<a.length;G++){const Q=u.parse(a[G],1+B.length);if(!Q)return null;B.push(nt(Q.type))}u.error(`Expected arguments of type ${F}, but found (${B.join(", ")}) instead.`)}return null}static register(a,u){Eo.definitions=u;for(const f in u)a[f]=Eo}}function O_(h,[a,u,f,b]){a=a.evaluate(h),u=u.evaluate(h),f=f.evaluate(h);const S=b?b.evaluate(h):1,C=Sn(a,u,f,S);if(C)throw new gn(C);return new Or(a/255,u/255,f/255,S,!1)}function k_(h,a){return h in a}function om(h,a){const u=a[h];return u===void 0?null:u}function Ka(h){return{type:h}}function bd(h){if(h instanceof sd)return bd(h.boundExpression);if(h instanceof Eo&&h.name==="error"||h instanceof ud||h instanceof Ja||h instanceof Za||h instanceof vu)return!1;const a=h instanceof ms||h instanceof mo;let u=!0;return h.eachChild(f=>{u=a?u&&bd(f):u&&f instanceof Ls}),!!u&&vd(h)&&xd(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function vd(h){if(h instanceof Eo&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Ja||h instanceof Za)return!1;let a=!0;return h.eachChild(u=>{a&&!vd(u)&&(a=!1)}),a}function xu(h){if(h instanceof Eo&&h.name==="feature-state")return!1;let a=!0;return h.eachChild(u=>{a&&!xu(u)&&(a=!1)}),a}function xd(h,a){if(h instanceof Eo&&a.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild(f=>{u&&!xd(f,a)&&(u=!1)}),u}function L_(h){return{result:"success",value:h}}function Zl(h){return{result:"error",value:h}}function ca(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function D_(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function sm(h){return!!h.expression&&h.expression.interpolated}function Fr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function wu(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&or(h)===to}function Ew(h){return h}function N_(h,a){const u=h.stops&&typeof h.stops[0][0]=="object",f=u||!(u||h.property!==void 0),b=h.type||(sm(a)?"exponential":"interval"),S=function(B){switch(B.type){case"color":return Or.parse;case"padding":return pi.parse;case"numberArray":return Ui.parse;case"colorArray":return Kn.parse;default:return null}}(a);if(S&&((h=In({},h)).stops&&(h.stops=h.stops.map(B=>[B[0],S(B[1])])),h.default=S(h.default?h.default:a.default)),h.colorSpace&&(C=h.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var C;const I=function(B){switch(B){case"exponential":return z_;case"interval":return Tw;case"categorical":return F_;case"identity":return Sw;default:throw new Error(`Unknown function type "${B}"`)}}(b);let O,F;if(b==="categorical"){O=Object.create(null);for(const B of h.stops)O[B[0]]=B[1];F=typeof h.stops[0][0]}if(u){const B={},G=[];for(let se=0;se<h.stops.length;se++){const ce=h.stops[se],fe=ce[0].zoom;B[fe]===void 0&&(B[fe]={zoom:fe,type:h.type,property:h.property,default:h.default,stops:[]},G.push(fe)),B[fe].stops.push([ce[0].value,ce[1]])}const Q=[];for(const se of G)Q.push([B[se].zoom,N_(B[se],a)]);const ie={name:"linear"};return{kind:"composite",interpolationType:ie,interpolationFactor:Ci.interpolationFactor.bind(void 0,ie),zoomStops:Q.map(se=>se[0]),evaluate:({zoom:se},ce)=>z_({stops:Q,base:h.base},a,se).evaluate(se,ce)}}if(f){const B=b==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:Ci.interpolationFactor.bind(void 0,B),zoomStops:h.stops.map(G=>G[0]),evaluate:({zoom:G})=>I(h,a,G,O,F)}}return{kind:"source",evaluate(B,G){const Q=G&&G.properties?G.properties[h.property]:void 0;return Q===void 0?ua(h.default,a.default):I(h,a,Q,O,F)}}}function ua(h,a,u){return h!==void 0?h:a!==void 0?a:u!==void 0?u:void 0}function F_(h,a,u,f,b){return ua(typeof u===b?f[u]:void 0,h.default,a.default)}function Tw(h,a,u){if(Fr(u)!=="number")return ua(h.default,a.default);const f=h.stops.length;if(f===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[f-1][0])return h.stops[f-1][1];const b=Ua(h.stops.map(S=>S[0]),u);return h.stops[b][1]}function z_(h,a,u){const f=h.base!==void 0?h.base:1;if(Fr(u)!=="number")return ua(h.default,a.default);const b=h.stops.length;if(b===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[b-1][0])return h.stops[b-1][1];const S=Ua(h.stops.map(B=>B[0]),u),C=function(B,G,Q,ie){const se=ie-Q,ce=B-Q;return se===0?0:G===1?ce/se:(Math.pow(G,ce)-1)/(Math.pow(G,se)-1)}(u,f,h.stops[S][0],h.stops[S+1][0]),I=h.stops[S][1],O=h.stops[S+1][1],F=gs[a.type]||Ew;return typeof I.evaluate=="function"?{evaluate(...B){const G=I.evaluate.apply(void 0,B),Q=O.evaluate.apply(void 0,B);if(G!==void 0&&Q!==void 0)return F(G,Q,C,h.colorSpace)}}:F(I,O,C,h.colorSpace)}function Sw(h,a,u){switch(a.type){case"color":u=Or.parse(u);break;case"formatted":u=Vi.fromString(u.toString());break;case"resolvedImage":u=fo.fromString(u.toString());break;case"padding":u=pi.parse(u);break;case"colorArray":u=Kn.parse(u);break;case"numberArray":u=Ui.parse(u);break;default:Fr(u)===a.type||a.type==="enum"&&a.values[u]||(u=void 0)}return ua(u,h.default,a.default)}Eo.register(Wl,{error:[{kind:"error"},[tr],(h,[a])=>{throw new gn(a.evaluate(h))}],typeof:[tr,[hr],(h,[a])=>nt(or(a.evaluate(h)))],"to-rgba":[ze(Ct,4),[xn],(h,[a])=>{const[u,f,b,S]=a.evaluate(h).rgb;return[255*u,255*f,255*b,S]}],rgb:[xn,[Ct,Ct,Ct],O_],rgba:[xn,[Ct,Ct,Ct,Ct],O_],has:{type:gr,overloads:[[[tr],(h,[a])=>k_(a.evaluate(h),h.properties())],[[tr,to],(h,[a,u])=>k_(a.evaluate(h),u.evaluate(h))]]},get:{type:hr,overloads:[[[tr],(h,[a])=>om(a.evaluate(h),h.properties())],[[tr,to],(h,[a,u])=>om(a.evaluate(h),u.evaluate(h))]]},"feature-state":[hr,[tr],(h,[a])=>om(a.evaluate(h),h.featureState||{})],properties:[to,[],h=>h.properties()],"geometry-type":[tr,[],h=>h.geometryType()],id:[hr,[],h=>h.id()],zoom:[Ct,[],h=>h.globals.zoom],"heatmap-density":[Ct,[],h=>h.globals.heatmapDensity||0],elevation:[Ct,[],h=>h.globals.elevation||0],"line-progress":[Ct,[],h=>h.globals.lineProgress||0],accumulated:[hr,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Ct,Ka(Ct),(h,a)=>{let u=0;for(const f of a)u+=f.evaluate(h);return u}],"*":[Ct,Ka(Ct),(h,a)=>{let u=1;for(const f of a)u*=f.evaluate(h);return u}],"-":{type:Ct,overloads:[[[Ct,Ct],(h,[a,u])=>a.evaluate(h)-u.evaluate(h)],[[Ct],(h,[a])=>-a.evaluate(h)]]},"/":[Ct,[Ct,Ct],(h,[a,u])=>a.evaluate(h)/u.evaluate(h)],"%":[Ct,[Ct,Ct],(h,[a,u])=>a.evaluate(h)%u.evaluate(h)],ln2:[Ct,[],()=>Math.LN2],pi:[Ct,[],()=>Math.PI],e:[Ct,[],()=>Math.E],"^":[Ct,[Ct,Ct],(h,[a,u])=>Math.pow(a.evaluate(h),u.evaluate(h))],sqrt:[Ct,[Ct],(h,[a])=>Math.sqrt(a.evaluate(h))],log10:[Ct,[Ct],(h,[a])=>Math.log(a.evaluate(h))/Math.LN10],ln:[Ct,[Ct],(h,[a])=>Math.log(a.evaluate(h))],log2:[Ct,[Ct],(h,[a])=>Math.log(a.evaluate(h))/Math.LN2],sin:[Ct,[Ct],(h,[a])=>Math.sin(a.evaluate(h))],cos:[Ct,[Ct],(h,[a])=>Math.cos(a.evaluate(h))],tan:[Ct,[Ct],(h,[a])=>Math.tan(a.evaluate(h))],asin:[Ct,[Ct],(h,[a])=>Math.asin(a.evaluate(h))],acos:[Ct,[Ct],(h,[a])=>Math.acos(a.evaluate(h))],atan:[Ct,[Ct],(h,[a])=>Math.atan(a.evaluate(h))],min:[Ct,Ka(Ct),(h,a)=>Math.min(...a.map(u=>u.evaluate(h)))],max:[Ct,Ka(Ct),(h,a)=>Math.max(...a.map(u=>u.evaluate(h)))],abs:[Ct,[Ct],(h,[a])=>Math.abs(a.evaluate(h))],round:[Ct,[Ct],(h,[a])=>{const u=a.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ct,[Ct],(h,[a])=>Math.floor(a.evaluate(h))],ceil:[Ct,[Ct],(h,[a])=>Math.ceil(a.evaluate(h))],"filter-==":[gr,[tr,hr],(h,[a,u])=>h.properties()[a.value]===u.value],"filter-id-==":[gr,[hr],(h,[a])=>h.id()===a.value],"filter-type-==":[gr,[tr],(h,[a])=>h.geometryType()===a.value],"filter-<":[gr,[tr,hr],(h,[a,u])=>{const f=h.properties()[a.value],b=u.value;return typeof f==typeof b&&f<b}],"filter-id-<":[gr,[hr],(h,[a])=>{const u=h.id(),f=a.value;return typeof u==typeof f&&u<f}],"filter->":[gr,[tr,hr],(h,[a,u])=>{const f=h.properties()[a.value],b=u.value;return typeof f==typeof b&&f>b}],"filter-id->":[gr,[hr],(h,[a])=>{const u=h.id(),f=a.value;return typeof u==typeof f&&u>f}],"filter-<=":[gr,[tr,hr],(h,[a,u])=>{const f=h.properties()[a.value],b=u.value;return typeof f==typeof b&&f<=b}],"filter-id-<=":[gr,[hr],(h,[a])=>{const u=h.id(),f=a.value;return typeof u==typeof f&&u<=f}],"filter->=":[gr,[tr,hr],(h,[a,u])=>{const f=h.properties()[a.value],b=u.value;return typeof f==typeof b&&f>=b}],"filter-id->=":[gr,[hr],(h,[a])=>{const u=h.id(),f=a.value;return typeof u==typeof f&&u>=f}],"filter-has":[gr,[hr],(h,[a])=>a.value in h.properties()],"filter-has-id":[gr,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[gr,[ze(tr)],(h,[a])=>a.value.indexOf(h.geometryType())>=0],"filter-id-in":[gr,[ze(hr)],(h,[a])=>a.value.indexOf(h.id())>=0],"filter-in-small":[gr,[tr,ze(hr)],(h,[a,u])=>u.value.indexOf(h.properties()[a.value])>=0],"filter-in-large":[gr,[tr,ze(hr)],(h,[a,u])=>function(f,b,S,C){for(;S<=C;){const I=S+C>>1;if(b[I]===f)return!0;b[I]>f?C=I-1:S=I+1}return!1}(h.properties()[a.value],u.value,0,u.value.length-1)],all:{type:gr,overloads:[[[gr,gr],(h,[a,u])=>a.evaluate(h)&&u.evaluate(h)],[Ka(gr),(h,a)=>{for(const u of a)if(!u.evaluate(h))return!1;return!0}]]},any:{type:gr,overloads:[[[gr,gr],(h,[a,u])=>a.evaluate(h)||u.evaluate(h)],[Ka(gr),(h,a)=>{for(const u of a)if(u.evaluate(h))return!0;return!1}]]},"!":[gr,[gr],(h,[a])=>!a.evaluate(h)],"is-supported-script":[gr,[tr],(h,[a])=>{const u=h.globals&&h.globals.isSupportedScript;return!u||u(a.evaluate(h))}],upcase:[tr,[tr],(h,[a])=>a.evaluate(h).toUpperCase()],downcase:[tr,[tr],(h,[a])=>a.evaluate(h).toLowerCase()],concat:[tr,Ka(hr),(h,a)=>a.map(u=>br(u.evaluate(h))).join("")],"resolved-locale":[tr,[ds],(h,[a])=>a.evaluate(h).resolvedLocale()]});class am{constructor(a,u){this.expression=a,this._warningHistory={},this._evaluator=new Vf,this._defaultValue=u?function(f){if(f.type==="color"&&wu(f.default))return new Or(0,0,0,0);switch(f.type){case"color":return Or.parse(f.default)||null;case"padding":return pi.parse(f.default)||null;case"numberArray":return Ui.parse(f.default)||null;case"colorArray":return Kn.parse(f.default)||null;case"variableAnchorOffsetCollection":return Gi.parse(f.default)||null;case"projectionDefinition":return Fi.parse(f.default)||null;default:return f.default===void 0?null:f.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(a,u,f,b,S,C){return this._evaluator.globals=a,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=b,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(a,u,f,b,S,C){this._evaluator.globals=a,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=b,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new gn(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function wd(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Wl}function Eu(h,a){const u=new Gl(Wl,bd,[],a?function(b){const S={color:xn,string:tr,number:Ct,enum:tr,boolean:gr,formatted:hi,padding:ps,numberArray:D,colorArray:E,projectionDefinition:Lo,resolvedImage:W,variableAnchorOffsetCollection:me};return b.type==="array"?ze(S[b.value]||hr,b.length):S[b.type]}(a):void 0),f=u.parse(h,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?L_(new am(f,a)):Zl(u.errors)}class Tu{constructor(a,u){this.kind=a,this._styleExpression=u,this.isStateDependent=a!=="constant"&&!xu(u.expression),this.globalStateRefs=Pu(u.expression)}evaluateWithoutErrorHandling(a,u,f,b,S,C){return this._styleExpression.evaluateWithoutErrorHandling(a,u,f,b,S,C)}evaluate(a,u,f,b,S,C){return this._styleExpression.evaluate(a,u,f,b,S,C)}}class lm{constructor(a,u,f,b){this.kind=a,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=a!=="camera"&&!xu(u.expression),this.globalStateRefs=Pu(u.expression),this.interpolationType=b}evaluateWithoutErrorHandling(a,u,f,b,S,C){return this._styleExpression.evaluateWithoutErrorHandling(a,u,f,b,S,C)}evaluate(a,u,f,b,S,C){return this._styleExpression.evaluate(a,u,f,b,S,C)}interpolationFactor(a,u,f){return this.interpolationType?Ci.interpolationFactor(this.interpolationType,a,u,f):0}}function j_(h,a){const u=Eu(h,a);if(u.result==="error")return u;const f=u.value.expression,b=vd(f);if(!b&&!ca(a))return Zl([new vn("","data expressions not supported")]);const S=xd(f,["zoom"]);if(!S&&!D_(a))return Zl([new vn("","zoom expressions not supported")]);const C=Cu(f);return C||S?C instanceof vn?Zl([C]):C instanceof Ci&&!sm(a)?Zl([new vn("",'"interpolate" expressions cannot be used with this property')]):L_(C?new lm(b?"camera":"composite",u.value,C.labels,C instanceof Ci?C.interpolation:void 0):new Tu(b?"constant":"source",u.value)):Zl([new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Su{constructor(a,u){this._parameters=a,this._specification=u,In(this,N_(this._parameters,this._specification))}static deserialize(a){return new Su(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Cu(h){let a=null;if(h instanceof cu)a=Cu(h.result);else if(h instanceof pu){for(const u of h.args)if(a=Cu(u),a)break}else(h instanceof Vn||h instanceof Ci)&&h.input instanceof Eo&&h.input.name==="zoom"&&(a=h);return a instanceof vn||h.eachChild(u=>{const f=Cu(u);f instanceof vn?a=f:!a&&f?a=new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&f&&a!==f&&(a=new vn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Pu(h,a=new Set){return h instanceof vu&&a.add(h.key),h.eachChild(u=>{Pu(u,a)}),a}function Ed(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const a of h.slice(1))if(!Ed(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const cm={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ya(h){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ed(h)||(h=Xa(h));const a=Eu(h,cm);if(a.result==="error")throw new Error(a.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,f,b)=>a.value.evaluate(u,f,{},b),needGeometry:Td(h),getGlobalStateRefs:()=>Pu(a.value.expression)}}function um(h,a){return h<a?-1:h>a?1:0}function Td(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let a=1;a<h.length;a++)if(Td(h[a]))return!0;return!1}function Xa(h){if(!h)return!0;const a=h[0];return h.length<=1?a!=="any":a==="=="?hm(h[1],h[2],"=="):a==="!="?Sd(hm(h[1],h[2],"==")):a==="<"||a===">"||a==="<="||a===">="?hm(h[1],h[2],a):a==="any"?(u=h.slice(1),["any"].concat(u.map(Xa))):a==="all"?["all"].concat(h.slice(1).map(Xa)):a==="none"?["all"].concat(h.slice(1).map(Xa).map(Sd)):a==="in"?B_(h[1],h.slice(2)):a==="!in"?Sd(B_(h[1],h.slice(2))):a==="has"?q_(h[1]):a!=="!has"||Sd(q_(h[1]));var u}function hm(h,a,u){switch(h){case"$type":return[`filter-type-${u}`,a];case"$id":return[`filter-id-${u}`,a];default:return[`filter-${u}`,h,a]}}function B_(h,a){if(a.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(u=>typeof u!=typeof a[0])?["filter-in-large",h,["literal",a.sort(um)]]:["filter-in-small",h,["literal",a]]}}function q_(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Sd(h){return["!",h]}function dm(h){const a=typeof h;if(a==="number"||a==="boolean"||a==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let b="[";for(const S of h)b+=`${dm(S)},`;return`${b}]`}const u=Object.keys(h).sort();let f="{";for(let b=0;b<u.length;b++)f+=`${JSON.stringify(u[b])}:${dm(h[u[b]])},`;return`${f}}`}function Cw(h){let a="";for(const u of Xt)a+=`/${dm(h[u])}`;return a}function pm(h){const a=h.value;return a?[new yt(h.key,a,"constants have been deprecated as of v8")]:[]}function Ln(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function ys(h){if(Array.isArray(h))return h.map(ys);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const a={};for(const u in h)a[u]=ys(h[u]);return a}return Ln(h)}function To(h){const a=h.key,u=h.value,f=h.valueSpec||{},b=h.objectElementValidators||{},S=h.style,C=h.styleSpec,I=h.validateSpec;let O=[];const F=Fr(u);if(F!=="object")return[new yt(a,u,`object expected, ${F} found`)];for(const B in u){const G=B.split(".")[0],Q=Ul(f,G)||f["*"];let ie;if(Ul(b,G))ie=b[G];else if(Ul(f,G))ie=I;else if(b["*"])ie=b["*"];else{if(!f["*"]){O.push(new yt(a,u[B],`unknown property "${B}"`));continue}ie=I}O=O.concat(ie({key:(a&&`${a}.`)+B,value:u[B],valueSpec:Q,style:S,styleSpec:C,object:u,objectKey:B,validateSpec:I},u))}for(const B in f)b[B]||f[B].required&&f[B].default===void 0&&u[B]===void 0&&O.push(new yt(a,u,`missing required property "${B}"`));return O}function Cd(h){const a=h.value,u=h.valueSpec,f=h.style,b=h.styleSpec,S=h.key,C=h.arrayElementValidator||h.validateSpec;if(Fr(a)!=="array")return[new yt(S,a,`array expected, ${Fr(a)} found`)];if(u.length&&a.length!==u.length)return[new yt(S,a,`array length ${u.length} expected, length ${a.length} found`)];if(u["min-length"]&&a.length<u["min-length"])return[new yt(S,a,`array length at least ${u["min-length"]} expected, length ${a.length} found`)];let I={type:u.value,values:u.values};b.$version<7&&(I.function=u.function),Fr(u.value)==="object"&&(I=u.value);let O=[];for(let F=0;F<a.length;F++)O=O.concat(C({array:a,arrayIndex:F,value:a[F],valueSpec:I,validateSpec:h.validateSpec,style:f,styleSpec:b,key:`${S}[${F}]`}));return O}function Au(h){const a=h.key,u=h.value,f=h.valueSpec;let b=Fr(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new yt(a,u,`number expected, ${b} found`)]:"minimum"in f&&u<f.minimum?[new yt(a,u,`${u} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&u>f.maximum?[new yt(a,u,`${u} is greater than the maximum value ${f.maximum}`)]:[]}function $_(h){const a=h.valueSpec,u=Ln(h.value.type);let f,b,S,C={};const I=u!=="categorical"&&h.value.property===void 0,O=!I,F=Fr(h.value.stops)==="array"&&Fr(h.value.stops[0])==="array"&&Fr(h.value.stops[0][0])==="object",B=To({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ie){if(u==="identity")return[new yt(ie.key,ie.value,'identity function may not have a "stops" property')];let se=[];const ce=ie.value;return se=se.concat(Cd({key:ie.key,value:ce,valueSpec:ie.valueSpec,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:G})),Fr(ce)==="array"&&ce.length===0&&se.push(new yt(ie.key,ce,"array must have at least one stop")),se},default:function(ie){return ie.validateSpec({key:ie.key,value:ie.value,valueSpec:a,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec})}}});return u==="identity"&&I&&B.push(new yt(h.key,h.value,'missing required property "property"')),u==="identity"||h.value.stops||B.push(new yt(h.key,h.value,'missing required property "stops"')),u==="exponential"&&h.valueSpec.expression&&!sm(h.valueSpec)&&B.push(new yt(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(O&&!ca(h.valueSpec)?B.push(new yt(h.key,h.value,"property functions not supported")):I&&!D_(h.valueSpec)&&B.push(new yt(h.key,h.value,"zoom functions not supported"))),u!=="categorical"&&!F||h.value.property!==void 0||B.push(new yt(h.key,h.value,'"property" property is required')),B;function G(ie){let se=[];const ce=ie.value,fe=ie.key;if(Fr(ce)!=="array")return[new yt(fe,ce,`array expected, ${Fr(ce)} found`)];if(ce.length!==2)return[new yt(fe,ce,`array length 2 expected, length ${ce.length} found`)];if(F){if(Fr(ce[0])!=="object")return[new yt(fe,ce,`object expected, ${Fr(ce[0])} found`)];if(ce[0].zoom===void 0)return[new yt(fe,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new yt(fe,ce,"object stop key must have value")];if(S&&S>Ln(ce[0].zoom))return[new yt(fe,ce[0].zoom,"stop zoom values must appear in ascending order")];Ln(ce[0].zoom)!==S&&(S=Ln(ce[0].zoom),b=void 0,C={}),se=se.concat(To({key:`${fe}[0]`,value:ce[0],valueSpec:{zoom:{}},validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:Au,value:Q}}))}else se=se.concat(Q({key:`${fe}[0]`,value:ce[0],validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec},ce));return wd(ys(ce[1]))?se.concat([new yt(`${fe}[1]`,ce[1],"expressions are not allowed in function stops.")]):se.concat(ie.validateSpec({key:`${fe}[1]`,value:ce[1],valueSpec:a,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec}))}function Q(ie,se){const ce=Fr(ie.value),fe=Ln(ie.value),we=ie.value!==null?ie.value:se;if(f){if(ce!==f)return[new yt(ie.key,we,`${ce} stop domain type must match previous stop domain type ${f}`)]}else f=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new yt(ie.key,we,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&u!=="categorical"){let Ue=`number expected, ${ce} found`;return ca(a)&&u===void 0&&(Ue+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(ie.key,we,Ue)]}return u!=="categorical"||ce!=="number"||isFinite(fe)&&Math.floor(fe)===fe?u!=="categorical"&&ce==="number"&&b!==void 0&&fe<b?[new yt(ie.key,we,"stop domain values must appear in ascending order")]:(b=fe,u==="categorical"&&fe in C?[new yt(ie.key,we,"stop domain values must be unique")]:(C[fe]=!0,[])):[new yt(ie.key,we,`integer expected, found ${fe}`)]}}function Qa(h){const a=(h.expressionContext==="property"?j_:Eu)(ys(h.value),h.valueSpec);if(a.result==="error")return a.value.map(f=>new yt(`${h.key}${f.key}`,h.value,f.message));const u=a.value.expression||a.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!u.outputDefined())return[new yt(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!xu(u))return[new yt(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!xu(u))return[new yt(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!xd(u,["zoom","feature-state"]))return[new yt(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!vd(u))return[new yt(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Pd(h){const a=h.key,u=h.value,f=Fr(u);return f!=="string"?[new yt(a,u,`color expected, ${f} found`)]:Or.parse(String(u))?[]:[new yt(a,u,`color expected, "${u}" found`)]}function Ns(h){const a=h.key,u=h.value,f=h.valueSpec,b=[];return Array.isArray(f.values)?f.values.indexOf(Ln(u))===-1&&b.push(new yt(a,u,`expected one of [${f.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(f.values).indexOf(Ln(u))===-1&&b.push(new yt(a,u,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(u)} found`)),b}function fm(h){return Ed(ys(h.value))?Qa(In({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):V_(h)}function V_(h){const a=h.value,u=h.key;if(Fr(a)!=="array")return[new yt(u,a,`array expected, ${Fr(a)} found`)];const f=h.styleSpec;let b,S=[];if(a.length<1)return[new yt(u,a,"filter array must have at least 1 element")];switch(S=S.concat(Ns({key:`${u}[0]`,value:a[0],valueSpec:f.filter_operator,style:h.style,styleSpec:h.styleSpec})),Ln(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&Ln(a[1])==="$type"&&S.push(new yt(u,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&S.push(new yt(u,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(b=Fr(a[1]),b!=="string"&&S.push(new yt(`${u}[1]`,a[1],`string expected, ${b} found`)));for(let C=2;C<a.length;C++)b=Fr(a[C]),Ln(a[1])==="$type"?S=S.concat(Ns({key:`${u}[${C}]`,value:a[C],valueSpec:f.geometry_type,style:h.style,styleSpec:h.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&S.push(new yt(`${u}[${C}]`,a[C],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let C=1;C<a.length;C++)S=S.concat(V_({key:`${u}[${C}]`,value:a[C],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":b=Fr(a[1]),a.length!==2?S.push(new yt(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):b!=="string"&&S.push(new yt(`${u}[1]`,a[1],`string expected, ${b} found`))}return S}function U_(h,a){const u=h.key,f=h.validateSpec,b=h.style,S=h.styleSpec,C=h.value,I=h.objectKey,O=S[`${a}_${h.layerType}`];if(!O)return[];const F=I.match(/^(.*)-transition$/);if(a==="paint"&&F&&O[F[1]]&&O[F[1]].transition)return f({key:u,value:C,valueSpec:S.transition,style:b,styleSpec:S});const B=h.valueSpec||O[I];if(!B)return[new yt(u,C,`unknown property "${I}"`)];let G;if(Fr(C)==="string"&&ca(B)&&!B.tokens&&(G=/^{([^}]+)}$/.exec(C)))return[new yt(u,C,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const Q=[];return h.layerType==="symbol"&&(I==="text-field"&&b&&!b.glyphs&&Q.push(new yt(u,C,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&wu(ys(C))&&Ln(C.type)==="identity"&&Q.push(new yt(u,C,'"text-font" does not support identity functions'))),Q.concat(f({key:h.key,value:C,valueSpec:B,style:b,styleSpec:S,expressionContext:"property",propertyType:a,propertyKey:I}))}function G_(h){return U_(h,"paint")}function H_(h){return U_(h,"layout")}function J_(h){let a=[];const u=h.value,f=h.key,b=h.style,S=h.styleSpec;if(Fr(u)!=="object")return[new yt(f,u,`object expected, ${Fr(u)} found`)];u.type||u.ref||a.push(new yt(f,u,'either "type" or "ref" is required'));let C=Ln(u.type);const I=Ln(u.ref);if(u.id){const O=Ln(u.id);for(let F=0;F<h.arrayIndex;F++){const B=b.layers[F];Ln(B.id)===O&&a.push(new yt(f,u.id,`duplicate layer id "${u.id}", previously used at line ${B.id.__line__}`))}}if("ref"in u){let O;["type","source","source-layer","filter","layout"].forEach(F=>{F in u&&a.push(new yt(f,u[F],`"${F}" is prohibited for ref layers`))}),b.layers.forEach(F=>{Ln(F.id)===I&&(O=F)}),O?O.ref?a.push(new yt(f,u.ref,"ref cannot reference another ref layer")):C=Ln(O.type):a.push(new yt(f,u.ref,`ref layer "${I}" not found`))}else if(C!=="background")if(u.source){const O=b.sources&&b.sources[u.source],F=O&&Ln(O.type);O?F==="vector"&&C==="raster"?a.push(new yt(f,u.source,`layer "${u.id}" requires a raster source`)):F!=="raster-dem"&&C==="hillshade"||F!=="raster-dem"&&C==="color-relief"?a.push(new yt(f,u.source,`layer "${u.id}" requires a raster-dem source`)):F==="raster"&&C!=="raster"?a.push(new yt(f,u.source,`layer "${u.id}" requires a vector source`)):F!=="vector"||u["source-layer"]?F==="raster-dem"&&C!=="hillshade"&&C!=="color-relief"?a.push(new yt(f,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):C!=="line"||!u.paint||!u.paint["line-gradient"]||F==="geojson"&&O.lineMetrics||a.push(new yt(f,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new yt(f,u,`layer "${u.id}" must specify a "source-layer"`)):a.push(new yt(f,u.source,`source "${u.source}" not found`))}else a.push(new yt(f,u,'missing required property "source"'));return a=a.concat(To({key:f,value:u,valueSpec:S.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${f}.type`,value:u.type,valueSpec:S.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:u,objectKey:"type"}),filter:fm,layout:O=>To({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":F=>H_(In({layerType:C},F))}}),paint:O=>To({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":F=>G_(In({layerType:C},F))}})}})),a}function zo(h){const a=h.value,u=h.key,f=Fr(a);return f!=="string"?[new yt(u,a,`string expected, ${f} found`)]:[]}const Kl={promoteId:function({key:h,value:a}){if(Fr(a)==="string")return zo({key:h,value:a});{const u=[];for(const f in a)u.push(...zo({key:`${h}.${f}`,value:a[f]}));return u}}};function ro(h){const a=h.value,u=h.key,f=h.styleSpec,b=h.style,S=h.validateSpec;if(!a.type)return[new yt(u,a,'"type" is required')];const C=Ln(a.type);let I;switch(C){case"vector":case"raster":return I=To({key:u,value:a,valueSpec:f[`source_${C.replace("-","_")}`],style:h.style,styleSpec:f,objectElementValidators:Kl,validateSpec:S}),I;case"raster-dem":return I=function(O){var F;const B=(F=O.sourceName)!==null&&F!==void 0?F:"",G=O.value,Q=O.styleSpec,ie=Q.source_raster_dem,se=O.style;let ce=[];const fe=Fr(G);if(G===void 0)return ce;if(fe!=="object")return ce.push(new yt("source_raster_dem",G,`object expected, ${fe} found`)),ce;const we=Ln(G.encoding)==="custom",Ue=["redFactor","greenFactor","blueFactor","baseShift"],Oe=O.value.encoding?`"${O.value.encoding}"`:"Default";for(const Ne in G)!we&&Ue.includes(Ne)?ce.push(new yt(Ne,G[Ne],`In "${B}": "${Ne}" is only valid when "encoding" is set to "custom". ${Oe} encoding found`)):ie[Ne]?ce=ce.concat(O.validateSpec({key:Ne,value:G[Ne],valueSpec:ie[Ne],validateSpec:O.validateSpec,style:se,styleSpec:Q})):ce.push(new yt(Ne,G[Ne],`unknown property "${Ne}"`));return ce}({sourceName:u,value:a,style:h.style,styleSpec:f,validateSpec:S}),I;case"geojson":if(I=To({key:u,value:a,valueSpec:f.source_geojson,style:b,styleSpec:f,validateSpec:S,objectElementValidators:Kl}),a.cluster)for(const O in a.clusterProperties){const[F,B]=a.clusterProperties[O],G=typeof F=="string"?[F,["accumulated"],["get",O]]:F;I.push(...Qa({key:`${u}.${O}.map`,value:B,expressionContext:"cluster-map"})),I.push(...Qa({key:`${u}.${O}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return I;case"video":return To({key:u,value:a,valueSpec:f.source_video,style:b,validateSpec:S,styleSpec:f});case"image":return To({key:u,value:a,valueSpec:f.source_image,style:b,validateSpec:S,styleSpec:f});case"canvas":return[new yt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ns({key:`${u}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Yl(h){const a=h.value,u=h.styleSpec,f=u.light,b=h.style;let S=[];const C=Fr(a);if(a===void 0)return S;if(C!=="object")return S=S.concat([new yt("light",a,`object expected, ${C} found`)]),S;for(const I in a){const O=I.match(/^(.*)-transition$/);S=S.concat(O&&f[O[1]]&&f[O[1]].transition?h.validateSpec({key:I,value:a[I],valueSpec:u.transition,validateSpec:h.validateSpec,style:b,styleSpec:u}):f[I]?h.validateSpec({key:I,value:a[I],valueSpec:f[I],validateSpec:h.validateSpec,style:b,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)])}return S}function mm(h){const a=h.value,u=h.styleSpec,f=u.sky,b=h.style,S=Fr(a);if(a===void 0)return[];if(S!=="object")return[new yt("sky",a,`object expected, ${S} found`)];let C=[];for(const I in a)C=C.concat(f[I]?h.validateSpec({key:I,value:a[I],valueSpec:f[I],style:b,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return C}function W_(h){const a=h.value,u=h.styleSpec,f=u.terrain,b=h.style;let S=[];const C=Fr(a);if(a===void 0)return S;if(C!=="object")return S=S.concat([new yt("terrain",a,`object expected, ${C} found`)]),S;for(const I in a)S=S.concat(f[I]?h.validateSpec({key:I,value:a[I],valueSpec:f[I],validateSpec:h.validateSpec,style:b,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return S}function Z_(h){let a=[];const u=h.value,f=h.key;if(Array.isArray(u)){const b=[],S=[];for(const C in u)u[C].id&&b.includes(u[C].id)&&a.push(new yt(f,u,`all the sprites' ids must be unique, but ${u[C].id} is duplicated`)),b.push(u[C].id),u[C].url&&S.includes(u[C].url)&&a.push(new yt(f,u,`all the sprites' URLs must be unique, but ${u[C].url} is duplicated`)),S.push(u[C].url),a=a.concat(To({key:`${f}[${C}]`,value:u[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return a}return zo({key:f,value:u})}function Xl(h){return a=h.value,a&&a.constructor===Object?[]:[new yt(h.key,h.value,`object expected, ${Fr(h.value)} found`)];var a}const gm={"*":()=>[],array:Cd,boolean:function(h){const a=h.value,u=h.key,f=Fr(a);return f!=="boolean"?[new yt(u,a,`boolean expected, ${f} found`)]:[]},number:Au,color:Pd,constants:pm,enum:Ns,filter:fm,function:$_,layer:J_,object:To,source:ro,light:Yl,sky:mm,terrain:W_,projection:function(h){const a=h.value,u=h.styleSpec,f=u.projection,b=h.style,S=Fr(a);if(a===void 0)return[];if(S!=="object")return[new yt("projection",a,`object expected, ${S} found`)];let C=[];for(const I in a)C=C.concat(f[I]?h.validateSpec({key:I,value:a[I],valueSpec:f[I],style:b,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return C},projectionDefinition:function(h){const a=h.key;let u=h.value;u=u instanceof String?u.valueOf():u;const f=Fr(u);return f!=="array"||function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"}(u)||function(b){return!!["interpolate","step","literal"].includes(b[0])}(u)?["array","string"].includes(f)?[]:[new yt(a,u,`projection expected, invalid type "${f}" found`)]:[new yt(a,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:zo,formatted:function(h){return zo(h).length===0?[]:Qa(h)},resolvedImage:function(h){return zo(h).length===0?[]:Qa(h)},padding:function(h){const a=h.key,u=h.value;if(Fr(u)==="array"){if(u.length<1||u.length>4)return[new yt(a,u,`padding requires 1 to 4 values; ${u.length} values found`)];const f={type:"number"};let b=[];for(let S=0;S<u.length;S++)b=b.concat(h.validateSpec({key:`${a}[${S}]`,value:u[S],validateSpec:h.validateSpec,valueSpec:f}));return b}return Au({key:a,value:u,valueSpec:{}})},numberArray:function(h){const a=h.key,u=h.value;if(Fr(u)==="array"){const f={type:"number"};if(u.length<1)return[new yt(a,u,"array length at least 1 expected, length 0 found")];let b=[];for(let S=0;S<u.length;S++)b=b.concat(h.validateSpec({key:`${a}[${S}]`,value:u[S],validateSpec:h.validateSpec,valueSpec:f}));return b}return Au({key:a,value:u,valueSpec:{}})},colorArray:function(h){const a=h.key,u=h.value;if(Fr(u)==="array"){if(u.length<1)return[new yt(a,u,"array length at least 1 expected, length 0 found")];let f=[];for(let b=0;b<u.length;b++)f=f.concat(Pd({key:`${a}[${b}]`,value:u[b]}));return f}return Pd({key:a,value:u})},variableAnchorOffsetCollection:function(h){const a=h.key,u=h.value,f=Fr(u),b=h.styleSpec;if(f!=="array"||u.length<1||u.length%2!=0)return[new yt(a,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let C=0;C<u.length;C+=2)S=S.concat(Ns({key:`${a}[${C}]`,value:u[C],valueSpec:b.layout_symbol["text-anchor"]})),S=S.concat(Cd({key:`${a}[${C+1}]`,value:u[C+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:b}));return S},sprite:Z_,state:Xl};function Ql(h){const a=h.value,u=h.valueSpec,f=h.styleSpec;return h.validateSpec=Ql,u.expression&&wu(Ln(a))?$_(h):u.expression&&wd(ys(a))?Qa(h):u.type&&gm[u.type]?gm[u.type](h):To(In({},h,{valueSpec:u.type?f[u.type]:u}))}function K_(h){const a=h.value,u=h.key,f=zo(h);return f.length||(a.indexOf("{fontstack}")===-1&&f.push(new yt(u,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&f.push(new yt(u,a,'"glyphs" url must include a "{range}" token'))),f}function no(h,a=$e){let u=[];return u=u.concat(Ql({key:"",value:h,valueSpec:a.$root,styleSpec:a,style:h,validateSpec:Ql,objectElementValidators:{glyphs:K_,"*":()=>[]}})),h.constants&&(u=u.concat(pm({key:"constants",value:h.constants}))),ec(u)}function jo(h){return function(a){return h({...a,validateSpec:Ql})}}function ec(h){return[].concat(h).sort((a,u)=>a.line-u.line)}function Bo(h){return function(...a){return ec(h.apply(this,a))}}no.source=Bo(jo(ro)),no.sprite=Bo(jo(Z_)),no.glyphs=Bo(jo(K_)),no.light=Bo(jo(Yl)),no.sky=Bo(jo(mm)),no.terrain=Bo(jo(W_)),no.state=Bo(jo(Xl)),no.layer=Bo(jo(J_)),no.filter=Bo(jo(fm)),no.paintProperty=Bo(jo(G_)),no.layoutProperty=Bo(jo(H_));const tc=no,Pw=tc.light,Ru=tc.sky,Aw=tc.paintProperty,Rw=tc.layoutProperty;function Iu(h,a){let u=!1;if(a&&a.length)for(const f of a)h.fire(new it(new Error(f.message))),u=!0;return u}class Mu{constructor(a,u,f){const b=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const C=new Int32Array(this.arrayBuffer);a=C[0],this.d=(u=C[1])+2*(f=C[2]);for(let O=0;O<this.d*this.d;O++){const F=C[3+O],B=C[3+O+1];b.push(F===B?null:C.subarray(F,B))}const I=C[3+b.length+1];this.keys=C.subarray(C[3+b.length],I),this.bboxes=C.subarray(I),this.insert=this._insertReadonly}else{this.d=u+2*f;for(let C=0;C<this.d*this.d;C++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=a,this.padding=f,this.scale=u/a,this.uid=0;const S=f/u*a;this.min=-S,this.max=a+S}insert(a,u,f,b,S){this._forEachCell(u,f,b,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(b),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,u,f,b,S,C){this.cells[S].push(C)}query(a,u,f,b,S){const C=this.min,I=this.max;if(a<=C&&u<=C&&I<=f&&I<=b&&!S)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(a,u,f,b,this._queryCell,O,{},S),O}}_queryCell(a,u,f,b,S,C,I,O){const F=this.cells[S];if(F!==null){const B=this.keys,G=this.bboxes;for(let Q=0;Q<F.length;Q++){const ie=F[Q];if(I[ie]===void 0){const se=4*ie;(O?O(G[se+0],G[se+1],G[se+2],G[se+3]):a<=G[se+2]&&u<=G[se+3]&&f>=G[se+0]&&b>=G[se+1])?(I[ie]=!0,C.push(B[ie])):I[ie]=!1}}}}_forEachCell(a,u,f,b,S,C,I,O){const F=this._convertToCellCoord(a),B=this._convertToCellCoord(u),G=this._convertToCellCoord(f),Q=this._convertToCellCoord(b);for(let ie=F;ie<=G;ie++)for(let se=B;se<=Q;se++){const ce=this.d*se+ie;if((!O||O(this._convertFromCellCoord(ie),this._convertFromCellCoord(se),this._convertFromCellCoord(ie+1),this._convertFromCellCoord(se+1)))&&S.call(this,a,u,f,b,ce,C,I,O))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,u=3+this.cells.length+1+1;let f=0;for(let C=0;C<this.cells.length;C++)f+=this.cells[C].length;const b=new Int32Array(u+f+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let S=u;for(let C=0;C<a.length;C++){const I=a[C];b[3+C]=S,b.set(I,S),S+=I.length}return b[3+a.length]=S,b.set(this.keys,S),S+=this.keys.length,b[3+a.length+1]=S,b.set(this.bboxes,S),S+=this.bboxes.length,b.buffer}static serialize(a,u){const f=a.toArrayBuffer();return u&&u.push(f),{buffer:f}}static deserialize(a){return new Mu(a.buffer)}}const qo={};function zt(h,a,u={}){if(qo[h])throw new Error(`${h} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:h,writeable:!1}),qo[h]={klass:a,omit:u.omit||[],shallow:u.shallow||[]}}zt("Object",Object),zt("Set",Set),zt("TransferableGridIndex",Mu),zt("Color",Or),zt("Error",Error),zt("AJAXError",Te),zt("ResolvedImage",fo),zt("StylePropertyFunction",Su),zt("StyleExpression",am,{omit:["_evaluator"]}),zt("ZoomDependentExpression",lm),zt("ZoomConstantExpression",Tu),zt("CompoundExpression",Eo,{omit:["_evaluate"]});for(const h in Wl)Wl[h]._classRegistryKey||zt(`Expression_${h}`,Wl[h]);function ym(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function Ad(h){return h.$name||h.constructor._classRegistryKey}function _m(h){return!function(a){if(a===null||typeof a!="object")return!1;const u=Ad(a);return!(!u||u==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||ym(h)||Bt(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function rc(h,a){if(_m(h))return(ym(h)||Bt(h))&&a&&a.push(h),ArrayBuffer.isView(h)&&a&&a.push(h.buffer),h instanceof ImageData&&a&&a.push(h.data.buffer),h;if(Array.isArray(h)){const S=[];for(const C of h)S.push(rc(C,a));return S}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const u=Ad(h);if(!u)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!qo[u])throw new Error(`${u} is not registered.`);const{klass:f}=qo[u],b=f.serialize?f.serialize(h,a):{};if(f.serialize){if(a&&b===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in h){if(!h.hasOwnProperty(S)||qo[u].omit.indexOf(S)>=0)continue;const C=h[S];b[S]=qo[u].shallow.indexOf(S)>=0?C:rc(C,a)}h instanceof Error&&(b.message=h.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(b.$name=u),b}function el(h){if(_m(h))return h;if(Array.isArray(h))return h.map(el);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const a=Ad(h)||"Object";if(!qo[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:u}=qo[a];if(!u)throw new Error(`can't deserialize unregistered class ${a}`);if(u.deserialize)return u.deserialize(h);const f=Object.create(u.prototype);for(const b of Object.keys(h)){if(b==="$name")continue;const S=h[b];f[b]=qo[a].shallow.indexOf(b)>=0?S:el(S)}return f}class Rd{constructor(){this.first=!0}update(a,u){const f=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=u),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=f,!0))}}const jr={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Id(h){for(const a of h)if(vm(a.charCodeAt(0)))return!0;return!1}function Iw(h){for(const a of h)if(!Y_(a.charCodeAt(0)))return!1;return!0}function Md(h){const a=h.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}}).filter(u=>u);return new RegExp(a.join("|"),"u")}const Mw=Md(["Arab","Dupl","Mong","Ougr","Syrc"]);function Y_(h){return!Mw.test(String.fromCodePoint(h))}const bm=Md(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function vm(h){return!(h!==746&&h!==747&&(h<4352||!(jr["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||jr["CJK Compatibility"](h)||jr["CJK Strokes"](h)||!(!jr["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||jr["Enclosed CJK Letters and Months"](h)||jr["Ideographic Description Characters"](h)||jr.Kanbun(h)||jr.Katakana(h)&&h!==12540||!(!jr["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!jr["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||jr["Vertical Forms"](h)||jr["Yijing Hexagram Symbols"](h)||/\p{sc=Cans}/u.test(String.fromCodePoint(h))||/\p{sc=Hang}/u.test(String.fromCodePoint(h))||bm.test(String.fromCodePoint(h)))))}function X_(h){return!(vm(h)||function(a){return!!(jr["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||jr["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||jr["Letterlike Symbols"](a)||jr["Number Forms"](a)||jr["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||jr["Control Pictures"](a)&&a!==9251||jr["Optical Character Recognition"](a)||jr["Enclosed Alphanumerics"](a)||jr["Geometric Shapes"](a)||jr["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||jr["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||jr["CJK Symbols and Punctuation"](a)||jr.Katakana(a)||jr["Private Use Area"](a)||jr["CJK Compatibility Forms"](a)||jr["Small Form Variants"](a)||jr["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(h))}const Q_=Md(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function xm(h){return Q_.test(String.fromCodePoint(h))}function e0(h,a){return!(!a&&xm(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||jr.Khmer(h))}function t0(h){for(const a of h)if(xm(a.charCodeAt(0)))return!0;return!1}const $o=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if($o.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,a){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const u=h.pluginURL,f=new Promise(S=>{this.loadScriptResolve=S});a(u);const b=new Promise(S=>setTimeout(()=>S(),this.TIMEOUT));if(yield Promise.race([f,b]),this.isParsed()){const S={pluginStatus:"loaded",pluginURL:u};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class yn{constructor(a,u){this.zoom=a,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new Rd,this.transition=u.transition||{},this.globalState=u.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Rd,this.transition={},this.globalState={})}isSupportedScript(a){return function(u,f){for(const b of u)if(!e0(b.charCodeAt(0),f))return!1;return!0}(a,$o.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,u=a-Math.floor(a),f=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*u}}}class nc{constructor(a,u){this.property=a,this.value=u,this.expression=function(f,b){if(wu(f))return new Su(f,b);if(wd(f)){const S=j_(f,b);if(S.result==="error")throw new Error(S.value.map(C=>`${C.key}: ${C.message}`).join(", "));return S.value}{let S=f;return b.type==="color"&&typeof f=="string"?S=Or.parse(f):b.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?b.type!=="numberArray"||typeof f!="number"&&!Array.isArray(f)?b.type!=="colorArray"||typeof f!="string"&&!Array.isArray(f)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(f)?S=Gi.parse(f):b.type==="projectionDefinition"&&typeof f=="string"&&(S=Fi.parse(f)):S=Kn.parse(f):S=Ui.parse(f):S=pi.parse(f),{globalStateRefs:new Set,kind:"constant",evaluate:()=>S}}}(u===void 0?a.specification.default:u,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(a,u,f){return this.property.possiblyEvaluate(this,a,u,f)}}class wm{constructor(a){this.property=a,this.value=new nc(a,void 0)}transitioned(a,u){return new Em(this.property,this.value,u,Wt({},a.transition,this.transition),a.now)}untransitioned(){return new Em(this.property,this.value,null,{},0)}}class r0{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return pt(this._values[a].value.value)}setValue(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new wm(this._values[a].property)),this._values[a].value=new nc(this._values[a].property,u===null?void 0:pt(u))}getTransition(a){return pt(this._values[a].transition)}setTransition(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new wm(this._values[a].property)),this._values[a].transition=pt(u)||void 0}serialize(){const a={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(a[u]=f);const b=this.getTransition(u);b!==void 0&&(a[`${u}-transition`]=b)}return a}transitioned(a,u){const f=new Tm(this._properties);for(const b of Object.keys(this._values))f._values[b]=this._values[b].transitioned(a,u._values[b]);return f}untransitioned(){const a=new Tm(this._properties);for(const u of Object.keys(this._values))a._values[u]=this._values[u].untransitioned();return a}}class Em{constructor(a,u,f,b,S){this.property=a,this.value=u,this.begin=S+b.delay||0,this.end=this.begin+b.duration||0,a.specification.transition&&(b.delay||b.duration)&&(this.prior=f)}possiblyEvaluate(a,u,f){const b=a.now||0,S=this.value.possiblyEvaluate(a,u,f),C=this.prior;if(C){if(b>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(b<this.begin)return C.possiblyEvaluate(a,u,f);{const I=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(a,u,f),S,kt(I))}}return S}}class Tm{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,u,f){const b=new Od(this._properties);for(const S of Object.keys(this._values))b._values[S]=this._values[S].possiblyEvaluate(a,u,f);return b}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class n0{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return pt(this._values[a].value)}setValue(a,u){this._values[a]=new nc(this._values[a].property,u===null?void 0:pt(u))}serialize(){const a={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(a[u]=f)}return a}possiblyEvaluate(a,u,f){const b=new Od(this._properties);for(const S of Object.keys(this._values))b._values[S]=this._values[S].possiblyEvaluate(a,u,f);return b}}class _s{constructor(a,u,f){this.property=a,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,u,f,b){return this.property.evaluate(this.value,this.parameters,a,u,f,b)}}class Od{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Gt{constructor(a){this.specification=a}possiblyEvaluate(a,u){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(u)}interpolate(a,u,f){const b=gs[this.specification.type];return b?b(a,u,f):a}}class ir{constructor(a,u){this.specification=a,this.overrides=u}possiblyEvaluate(a,u,f,b){return new _s(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(u,null,{},f,b)}:a.expression,u)}interpolate(a,u,f){if(a.value.kind!=="constant"||u.value.kind!=="constant")return a;if(a.value.value===void 0||u.value.value===void 0)return new _s(this,{kind:"constant",value:void 0},a.parameters);const b=gs[this.specification.type];if(b){const S=b(a.value.value,u.value.value,f);return new _s(this,{kind:"constant",value:S},a.parameters)}return a}evaluate(a,u,f,b,S,C){return a.kind==="constant"?a.value:a.evaluate(u,f,b,S,C)}}class kd extends ir{possiblyEvaluate(a,u,f,b){if(a.value===void 0)return new _s(this,{kind:"constant",value:void 0},u);if(a.expression.kind==="constant"){const S=a.expression.evaluate(u,null,{},f,b),C=a.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,I=this._calculate(C,C,C,u);return new _s(this,{kind:"constant",value:I},u)}if(a.expression.kind==="camera"){const S=this._calculate(a.expression.evaluate({zoom:u.zoom-1}),a.expression.evaluate({zoom:u.zoom}),a.expression.evaluate({zoom:u.zoom+1}),u);return new _s(this,{kind:"constant",value:S},u)}return new _s(this,a.expression,u)}evaluate(a,u,f,b,S,C){if(a.kind==="source"){const I=a.evaluate(u,f,b,S,C);return this._calculate(I,I,I,u)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(u.zoom)-1},f,b),a.evaluate({zoom:Math.floor(u.zoom)},f,b),a.evaluate({zoom:Math.floor(u.zoom)+1},f,b),u):a.value}_calculate(a,u,f,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:f,to:u}}interpolate(a){return a}}class ha{constructor(a){this.specification=a}possiblyEvaluate(a,u,f,b){if(a.value!==void 0){if(a.expression.kind==="constant"){const S=a.expression.evaluate(u,null,{},f,b);return this._calculate(S,S,S,u)}return this._calculate(a.expression.evaluate(new yn(Math.floor(u.zoom-1),u)),a.expression.evaluate(new yn(Math.floor(u.zoom),u)),a.expression.evaluate(new yn(Math.floor(u.zoom+1),u)),u)}}_calculate(a,u,f,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:f,to:u}}interpolate(a){return a}}class Ld{constructor(a){this.specification=a}possiblyEvaluate(a,u,f,b){return!!a.expression.evaluate(u,null,{},f,b)}interpolate(){return!1}}class Hi{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in a){const f=a[u];f.specification.overridable&&this.overridableProperties.push(u);const b=this.defaultPropertyValues[u]=new nc(f,void 0),S=this.defaultTransitionablePropertyValues[u]=new wm(f);this.defaultTransitioningPropertyValues[u]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}zt("DataDrivenProperty",ir),zt("DataConstantProperty",Gt),zt("CrossFadedDataDrivenProperty",kd),zt("CrossFadedProperty",ha),zt("ColorRampProperty",Ld);const i0="-transition";class So extends Ot{constructor(a,u){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter,this._featureFilter=Ya(a.filter)),u.layout&&(this._unevaluatedLayout=new n0(u.layout)),u.paint)){this._transitionablePaint=new r0(u.paint);for(const f in a.paint)this.setPaintProperty(f,a.paint[f],{validate:!1});for(const f in a.layout)this.setLayoutProperty(f,a.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Od(u.paint)}}setFilter(a){this.filter=a,this._featureFilter=Ya(a)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}getLayoutAffectingGlobalStateRefs(){const a=new Set;if(this._unevaluatedLayout)for(const u in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[u];for(const b of f.getGlobalStateRefs())a.add(b)}for(const u of this._featureFilter.getGlobalStateRefs())a.add(u);return a}getPaintAffectingGlobalStateRefs(){var a;const u=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const b=this._transitionablePaint._values[f].value;for(const S of b.getGlobalStateRefs()){const C=(a=u.get(S))!==null&&a!==void 0?a:[];C.push({name:f,value:b.value}),u.set(S,C)}}return u}setLayoutProperty(a,u,f={}){u!=null&&this._validate(Rw,`layers.${this.id}.layout.${a}`,a,u,f)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,u):this.visibility=u)}getPaintProperty(a){return a.endsWith(i0)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,u,f={}){if(u!=null&&this._validate(Aw,`layers.${this.id}.paint.${a}`,a,u,f))return!1;if(a.endsWith(i0))return this._transitionablePaint.setTransition(a.slice(0,-11),u||void 0),!1;{const b=this._transitionablePaint._values[a],S=b.property.specification["property-type"]==="cross-faded-data-driven",C=b.value.isDataDriven(),I=b.value;this._transitionablePaint.setValue(a,u),this._handleSpecialPaintPropertyUpdate(a);const O=this._transitionablePaint._values[a].value;return O.isDataDriven()||C||S||this._handleOverridablePaintPropertyUpdate(a,I,O)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,u,f){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,u){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,u)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Ve(a,(u,f)=>!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length))}_validate(a,u,f,b,S={}){return(!S||S.validate!==!1)&&Iu(this,a.call(tc,{key:u,layerType:this.type,objectKey:f,value:b,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const u=this.paint.get(a);if(u instanceof _s&&ca(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const Ow={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ou{constructor(a,u){this._structArray=a,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,u){return a._trim(),u&&(a.isTransferred=!0,u.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const u=Object.create(this.prototype);return u.arrayBuffer=a.arrayBuffer,u.length=a.length,u.capacity=a.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Un(h,a=1){let u=0,f=0;return{members:h.map(b=>{const S=Ow[b.type].BYTES_PER_ELEMENT,C=u=Dd(u,Math.max(a,S)),I=b.components||1;return f=Math.max(f,S),u+=S*I,{name:b.name,type:b.type,components:I,offset:C}}),size:Dd(u,Math.max(f,a)),alignment:a}}function Dd(h,a){return Math.ceil(h/a)*a}class ic extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u){const f=this.length;return this.resize(f+1),this.emplace(f,a,u)}emplace(a,u,f){const b=2*a;return this.int16[b+0]=u,this.int16[b+1]=f,a}}ic.prototype.bytesPerElement=4,zt("StructArrayLayout2i4",ic);class oc extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=3*a;return this.int16[S+0]=u,this.int16[S+1]=f,this.int16[S+2]=b,a}}oc.prototype.bytesPerElement=6,zt("StructArrayLayout3i6",oc);class Sm extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b){const S=this.length;return this.resize(S+1),this.emplace(S,a,u,f,b)}emplace(a,u,f,b,S){const C=4*a;return this.int16[C+0]=u,this.int16[C+1]=f,this.int16[C+2]=b,this.int16[C+3]=S,a}}Sm.prototype.bytesPerElement=8,zt("StructArrayLayout4i8",Sm);class sc extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,f,b,S,C)}emplace(a,u,f,b,S,C,I){const O=6*a;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=b,this.int16[O+3]=S,this.int16[O+4]=C,this.int16[O+5]=I,a}}sc.prototype.bytesPerElement=12,zt("StructArrayLayout2i4i12",sc);class tl extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,f,b,S,C)}emplace(a,u,f,b,S,C,I){const O=4*a,F=8*a;return this.int16[O+0]=u,this.int16[O+1]=f,this.uint8[F+4]=b,this.uint8[F+5]=S,this.uint8[F+6]=C,this.uint8[F+7]=I,a}}tl.prototype.bytesPerElement=8,zt("StructArrayLayout2i4ub8",tl);class ku extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u){const f=this.length;return this.resize(f+1),this.emplace(f,a,u)}emplace(a,u,f){const b=2*a;return this.float32[b+0]=u,this.float32[b+1]=f,a}}ku.prototype.bytesPerElement=8,zt("StructArrayLayout2f8",ku);class Nd extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,F,B){const G=this.length;return this.resize(G+1),this.emplace(G,a,u,f,b,S,C,I,O,F,B)}emplace(a,u,f,b,S,C,I,O,F,B,G){const Q=10*a;return this.uint16[Q+0]=u,this.uint16[Q+1]=f,this.uint16[Q+2]=b,this.uint16[Q+3]=S,this.uint16[Q+4]=C,this.uint16[Q+5]=I,this.uint16[Q+6]=O,this.uint16[Q+7]=F,this.uint16[Q+8]=B,this.uint16[Q+9]=G,a}}Nd.prototype.bytesPerElement=20,zt("StructArrayLayout10ui20",Nd);class rl extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,F,B,G,Q){const ie=this.length;return this.resize(ie+1),this.emplace(ie,a,u,f,b,S,C,I,O,F,B,G,Q)}emplace(a,u,f,b,S,C,I,O,F,B,G,Q,ie){const se=12*a;return this.int16[se+0]=u,this.int16[se+1]=f,this.int16[se+2]=b,this.int16[se+3]=S,this.uint16[se+4]=C,this.uint16[se+5]=I,this.uint16[se+6]=O,this.uint16[se+7]=F,this.int16[se+8]=B,this.int16[se+9]=G,this.int16[se+10]=Q,this.int16[se+11]=ie,a}}rl.prototype.bytesPerElement=24,zt("StructArrayLayout4i4ui4i24",rl);class Cm extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=3*a;return this.float32[S+0]=u,this.float32[S+1]=f,this.float32[S+2]=b,a}}Cm.prototype.bytesPerElement=12,zt("StructArrayLayout3f12",Cm);class Pm extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint32[1*a+0]=u,a}}Pm.prototype.bytesPerElement=4,zt("StructArrayLayout1ul4",Pm);class Fd extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,F){const B=this.length;return this.resize(B+1),this.emplace(B,a,u,f,b,S,C,I,O,F)}emplace(a,u,f,b,S,C,I,O,F,B){const G=10*a,Q=5*a;return this.int16[G+0]=u,this.int16[G+1]=f,this.int16[G+2]=b,this.int16[G+3]=S,this.int16[G+4]=C,this.int16[G+5]=I,this.uint32[Q+3]=O,this.uint16[G+8]=F,this.uint16[G+9]=B,a}}Fd.prototype.bytesPerElement=20,zt("StructArrayLayout6i1ul2ui20",Fd);class Am extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,f,b,S,C)}emplace(a,u,f,b,S,C,I){const O=6*a;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=b,this.int16[O+3]=S,this.int16[O+4]=C,this.int16[O+5]=I,a}}Am.prototype.bytesPerElement=12,zt("StructArrayLayout2i2i2i12",Am);class w extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S){const C=this.length;return this.resize(C+1),this.emplace(C,a,u,f,b,S)}emplace(a,u,f,b,S,C){const I=4*a,O=8*a;return this.float32[I+0]=u,this.float32[I+1]=f,this.float32[I+2]=b,this.int16[O+6]=S,this.int16[O+7]=C,a}}w.prototype.bytesPerElement=16,zt("StructArrayLayout2f1f2i16",w);class o extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,f,b,S,C)}emplace(a,u,f,b,S,C,I){const O=16*a,F=4*a,B=8*a;return this.uint8[O+0]=u,this.uint8[O+1]=f,this.float32[F+1]=b,this.float32[F+2]=S,this.int16[B+6]=C,this.int16[B+7]=I,a}}o.prototype.bytesPerElement=16,zt("StructArrayLayout2ub2f2i16",o);class d extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=3*a;return this.uint16[S+0]=u,this.uint16[S+1]=f,this.uint16[S+2]=b,a}}d.prototype.bytesPerElement=6,zt("StructArrayLayout3ui6",d);class y extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,F,B,G,Q,ie,se,ce,fe,we){const Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,a,u,f,b,S,C,I,O,F,B,G,Q,ie,se,ce,fe,we)}emplace(a,u,f,b,S,C,I,O,F,B,G,Q,ie,se,ce,fe,we,Ue){const Oe=24*a,Ne=12*a,Qe=48*a;return this.int16[Oe+0]=u,this.int16[Oe+1]=f,this.uint16[Oe+2]=b,this.uint16[Oe+3]=S,this.uint32[Ne+2]=C,this.uint32[Ne+3]=I,this.uint32[Ne+4]=O,this.uint16[Oe+10]=F,this.uint16[Oe+11]=B,this.uint16[Oe+12]=G,this.float32[Ne+7]=Q,this.float32[Ne+8]=ie,this.uint8[Qe+36]=se,this.uint8[Qe+37]=ce,this.uint8[Qe+38]=fe,this.uint32[Ne+10]=we,this.int16[Oe+22]=Ue,a}}y.prototype.bytesPerElement=48,zt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",y);class v extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f,b,S,C,I,O,F,B,G,Q,ie,se,ce,fe,we,Ue,Oe,Ne,Qe,at,gt,Mt,wt,Rt,Zt,At){const It=this.length;return this.resize(It+1),this.emplace(It,a,u,f,b,S,C,I,O,F,B,G,Q,ie,se,ce,fe,we,Ue,Oe,Ne,Qe,at,gt,Mt,wt,Rt,Zt,At)}emplace(a,u,f,b,S,C,I,O,F,B,G,Q,ie,se,ce,fe,we,Ue,Oe,Ne,Qe,at,gt,Mt,wt,Rt,Zt,At,It){const ht=32*a,sr=16*a;return this.int16[ht+0]=u,this.int16[ht+1]=f,this.int16[ht+2]=b,this.int16[ht+3]=S,this.int16[ht+4]=C,this.int16[ht+5]=I,this.int16[ht+6]=O,this.int16[ht+7]=F,this.uint16[ht+8]=B,this.uint16[ht+9]=G,this.uint16[ht+10]=Q,this.uint16[ht+11]=ie,this.uint16[ht+12]=se,this.uint16[ht+13]=ce,this.uint16[ht+14]=fe,this.uint16[ht+15]=we,this.uint16[ht+16]=Ue,this.uint16[ht+17]=Oe,this.uint16[ht+18]=Ne,this.uint16[ht+19]=Qe,this.uint16[ht+20]=at,this.uint16[ht+21]=gt,this.uint16[ht+22]=Mt,this.uint32[sr+12]=wt,this.float32[sr+13]=Rt,this.float32[sr+14]=Zt,this.uint16[ht+30]=At,this.uint16[ht+31]=It,a}}v.prototype.bytesPerElement=64,zt("StructArrayLayout8i15ui1ul2f2ui64",v);class T extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.float32[1*a+0]=u,a}}T.prototype.bytesPerElement=4,zt("StructArrayLayout1f4",T);class R extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=3*a;return this.uint16[6*a+0]=u,this.float32[S+1]=f,this.float32[S+2]=b,a}}R.prototype.bytesPerElement=12,zt("StructArrayLayout1ui2f12",R);class k extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,f)}emplace(a,u,f,b){const S=4*a;return this.uint32[2*a+0]=u,this.uint16[S+2]=f,this.uint16[S+3]=b,a}}k.prototype.bytesPerElement=8,zt("StructArrayLayout1ul2ui8",k);class L extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u){const f=this.length;return this.resize(f+1),this.emplace(f,a,u)}emplace(a,u,f){const b=2*a;return this.uint16[b+0]=u,this.uint16[b+1]=f,a}}L.prototype.bytesPerElement=4,zt("StructArrayLayout2ui4",L);class q extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint16[1*a+0]=u,a}}q.prototype.bytesPerElement=2,zt("StructArrayLayout1ui2",q);class V extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,f,b){const S=this.length;return this.resize(S+1),this.emplace(S,a,u,f,b)}emplace(a,u,f,b,S){const C=4*a;return this.float32[C+0]=u,this.float32[C+1]=f,this.float32[C+2]=b,this.float32[C+3]=S,a}}V.prototype.bytesPerElement=16,zt("StructArrayLayout4f16",V);class Y extends Ou{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class H extends Fd{get(a){return new Y(this,a)}}zt("CollisionBoxArray",H);class te extends Ou{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}te.prototype.size=48;class le extends y{get(a){return new te(this,a)}}zt("PlacedSymbolArray",le);class _e extends Ou{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}_e.prototype.size=64;class ge extends v{get(a){return new _e(this,a)}}zt("SymbolInstanceArray",ge);class be extends T{getoffsetX(a){return this.float32[1*a+0]}}zt("GlyphOffsetArray",be);class Se extends oc{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}zt("SymbolLineVertexArray",Se);class Re extends Ou{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Re.prototype.size=12;class Pe extends R{get(a){return new Re(this,a)}}zt("TextAnchorOffsetArray",Pe);class De extends Ou{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}De.prototype.size=8;class Be extends k{get(a){return new De(this,a)}}zt("FeatureIndexArray",Be);class Ae extends ic{}class Ge extends ic{}class st extends ic{}class Ye extends sc{}class Xe extends tl{}class ot extends ku{}class xt extends Nd{}class Et extends rl{}class ft extends Cm{}class Vt extends Pm{}class wr extends Am{}class tn extends o{}class dn extends d{}class an extends L{}const Mn=Un([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dn}=Mn;class vr{constructor(a=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=a}prepareSegment(a,u,f,b){const S=this.segments[this.segments.length-1];return a>vr.MAX_VERTEX_ARRAY_LENGTH&&Tt(`Max vertices per segment is ${vr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${vr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+a>vr.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==b?this.createNewSegment(u,f,b):S}createNewSegment(a,u,f){const b={vertexOffset:a.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(b.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(a,u,f){return this.prepareSegment(0,a,u,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const a of this.segments)for(const u in a.vaos)a.vaos[u].destroy()}static simpleSegment(a,u,f,b){return new vr([{vertexOffset:a,primitiveOffset:u,vertexLength:f,primitiveLength:b,vaos:{},sortKey:0}])}}function pn(h,a){return 256*(h=dt(Math.floor(h),0,255))+dt(Math.floor(a),0,255)}vr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zt("SegmentVector",vr);const Yn=Un([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var si,mi,Ji,Vo={exports:{}},da={exports:{}},pa={exports:{}},ac=function(){if(Ji)return Vo.exports;Ji=1;var h=(si||(si=1,da.exports=function(u,f){var b,S,C,I,O,F,B,G;for(S=u.length-(b=3&u.length),C=f,O=3432918353,F=461845907,G=0;G<S;)B=255&u.charCodeAt(G)|(255&u.charCodeAt(++G))<<8|(255&u.charCodeAt(++G))<<16|(255&u.charCodeAt(++G))<<24,++G,C=27492+(65535&(I=5*(65535&(C=(C^=B=(65535&(B=(B=(65535&B)*O+(((B>>>16)*O&65535)<<16)&4294967295)<<15|B>>>17))*F+(((B>>>16)*F&65535)<<16)&4294967295)<<13|C>>>19))+((5*(C>>>16)&65535)<<16)&4294967295))+((58964+(I>>>16)&65535)<<16);switch(B=0,b){case 3:B^=(255&u.charCodeAt(G+2))<<16;case 2:B^=(255&u.charCodeAt(G+1))<<8;case 1:C^=B=(65535&(B=(B=(65535&(B^=255&u.charCodeAt(G)))*O+(((B>>>16)*O&65535)<<16)&4294967295)<<15|B>>>17))*F+(((B>>>16)*F&65535)<<16)&4294967295}return C^=u.length,C=2246822507*(65535&(C^=C>>>16))+((2246822507*(C>>>16)&65535)<<16)&4294967295,C=3266489909*(65535&(C^=C>>>13))+((3266489909*(C>>>16)&65535)<<16)&4294967295,(C^=C>>>16)>>>0}),da.exports),a=(mi||(mi=1,pa.exports=function(u,f){for(var b,S=u.length,C=f^S,I=0;S>=4;)b=1540483477*(65535&(b=255&u.charCodeAt(I)|(255&u.charCodeAt(++I))<<8|(255&u.charCodeAt(++I))<<16|(255&u.charCodeAt(++I))<<24))+((1540483477*(b>>>16)&65535)<<16),C=1540483477*(65535&C)+((1540483477*(C>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),S-=4,++I;switch(S){case 3:C^=(255&u.charCodeAt(I+2))<<16;case 2:C^=(255&u.charCodeAt(I+1))<<8;case 1:C=1540483477*(65535&(C^=255&u.charCodeAt(I)))+((1540483477*(C>>>16)&65535)<<16)}return C=1540483477*(65535&(C^=C>>>13))+((1540483477*(C>>>16)&65535)<<16),(C^=C>>>15)>>>0}),pa.exports);return Vo.exports=h,Vo.exports.murmur3=h,Vo.exports.murmur2=a,Vo.exports}(),lc=g(ac);class nl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,u,f,b){this.ids.push(il(a)),this.positions.push(u,f,b)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=il(a);let f=0,b=this.ids.length-1;for(;f<b;){const C=f+b>>1;this.ids[C]>=u?b=C:f=C+1}const S=[];for(;this.ids[f]===u;)S.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return S}static serialize(a,u){const f=new Float64Array(a.ids),b=new Uint32Array(a.positions);return io(f,b,0,f.length-1),u&&u.push(f.buffer,b.buffer),{ids:f,positions:b}}static deserialize(a){const u=new nl;return u.ids=a.ids,u.positions=a.positions,u.indexed=!0,u}}function il(h){const a=+h;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:lc(String(h))}function io(h,a,u,f){for(;u<f;){const b=h[u+f>>1];let S=u-1,C=f+1;for(;;){do S++;while(h[S]<b);do C--;while(h[C]>b);if(S>=C)break;Uo(h,S,C),Uo(a,3*S,3*C),Uo(a,3*S+1,3*C+1),Uo(a,3*S+2,3*C+2)}C-u<f-C?(io(h,a,u,C),u=C+1):(io(h,a,C+1,f),f=C)}}function Uo(h,a,u){const f=h[a];h[a]=h[u],h[u]=f}zt("FeaturePositionMap",nl);class Wi{constructor(a,u){this.gl=a.gl,this.location=u}}class fa extends Wi{constructor(a,u){super(a,u),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Xn extends Wi{constructor(a,u){super(a,u),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class ai extends Wi{constructor(a,u){super(a,u),this.current=Or.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const Co=new Float32Array(16);function Qn(h){return[pn(255*h.r,255*h.g),pn(255*h.b,255*h.a)]}class Lu{constructor(a,u,f){this.value=a,this.uniformNames=u.map(b=>`u_${b}`),this.type=f}setUniform(a,u,f){a.set(f.constantOr(this.value))}getBinding(a,u,f){return this.type==="color"?new ai(a,u):new fa(a,u)}}class cc{constructor(a,u){this.uniformNames=u.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=a.tlbr}setUniform(a,u,f,b){const S=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&a.set(S)}getBinding(a,u,f){return f.substr(0,9)==="u_pattern"?new Xn(a,u):new fa(a,u)}}class Fs{constructor(a,u,f,b){this.expression=a,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(S=>({name:`a_${S}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(a,u,f){const b=this.paintVertexArray.length,S=this.expression.evaluate(new yn(0,f),u,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(a),this._setPaintValue(b,a,S)}updatePaintArray(a,u,f,b,S){const C=this.expression.evaluate(new yn(0,S),f,b);this._setPaintValue(a,u,C)}_setPaintValue(a,u,f){if(this.type==="color"){const b=Qn(f);for(let S=a;S<u;S++)this.paintVertexArray.emplace(S,b[0],b[1])}else{for(let b=a;b<u;b++)this.paintVertexArray.emplace(b,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Go{constructor(a,u,f,b,S,C){this.expression=a,this.uniformNames=u.map(I=>`u_${I}_t`),this.type=f,this.useIntegerZoom=b,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=u.map(I=>({name:`a_${I}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(a,u,f){const b=this.expression.evaluate(new yn(this.zoom,f),u,{},f.canonical,[],f.formattedSection),S=this.expression.evaluate(new yn(this.zoom+1,f),u,{},f.canonical,[],f.formattedSection),C=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(C,a,b,S)}updatePaintArray(a,u,f,b,S){const C=this.expression.evaluate(new yn(this.zoom,S),f,b),I=this.expression.evaluate(new yn(this.zoom+1,S),f,b);this._setPaintValue(a,u,C,I)}_setPaintValue(a,u,f,b){if(this.type==="color"){const S=Qn(f),C=Qn(b);for(let I=a;I<u;I++)this.paintVertexArray.emplace(I,S[0],S[1],C[0],C[1])}else{for(let S=a;S<u;S++)this.paintVertexArray.emplace(S,f,b);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(b))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,u){const f=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=dt(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);a.set(b)}getBinding(a,u,f){return new fa(a,u)}}class ma{constructor(a,u,f,b,S,C){this.expression=a,this.type=u,this.useIntegerZoom=f,this.zoom=b,this.layerId=C,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(a,u,f){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(b,a,u.patterns&&u.patterns[this.layerId],f.imagePositions)}updatePaintArray(a,u,f,b,S){this._setPaintValues(a,u,f.patterns&&f.patterns[this.layerId],S.imagePositions)}_setPaintValues(a,u,f,b){if(!b||!f)return;const{min:S,mid:C,max:I}=f,O=b[S],F=b[C],B=b[I];if(O&&F&&B)for(let G=a;G<u;G++)this.zoomInPaintVertexArray.emplace(G,F.tl[0],F.tl[1],F.br[0],F.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],F.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,F.tl[0],F.tl[1],F.br[0],F.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],F.pixelRatio,B.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Yn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Yn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class o0{constructor(a,u,f){this.binders={},this._buffers=[];const b=[];for(const S in a.paint._values){if(!f(S))continue;const C=a.paint.get(S);if(!(C instanceof _s&&ca(C.property.specification)))continue;const I=s0(S,a.type),O=C.value,F=C.property.specification.type,B=C.property.useIntegerZoom,G=C.property.specification["property-type"],Q=G==="cross-faded"||G==="cross-faded-data-driven";if(O.kind==="constant")this.binders[S]=Q?new cc(O.value,I):new Lu(O.value,I,F),b.push(`/u_${S}`);else if(O.kind==="source"||Q){const ie=Rm(S,F,"source");this.binders[S]=Q?new ma(O,F,B,u,ie,a.id):new Fs(O,I,F,ie),b.push(`/a_${S}`)}else{const ie=Rm(S,F,"composite");this.binders[S]=new Go(O,I,F,B,u,ie),b.push(`/z_${S}`)}}this.cacheKey=b.sort().join("")}getMaxValue(a){const u=this.binders[a];return u instanceof Fs||u instanceof Go?u.maxValue:0}populatePaintArrays(a,u,f){for(const b in this.binders){const S=this.binders[b];(S instanceof Fs||S instanceof Go||S instanceof ma)&&S.populatePaintArray(a,u,f)}}setConstantPatternPositions(a,u){for(const f in this.binders){const b=this.binders[f];b instanceof cc&&b.setConstantPatternPositions(a,u)}}updatePaintArrays(a,u,f,b,S){let C=!1;for(const I in a){const O=u.getPositions(I);for(const F of O){const B=f.feature(F.index);for(const G in this.binders){const Q=this.binders[G];if((Q instanceof Fs||Q instanceof Go||Q instanceof ma)&&Q.expression.isStateDependent===!0){const ie=b.paint.get(G);Q.expression=ie.value,Q.updatePaintArray(F.start,F.end,B,a[I],S),C=!0}}}}return C}defines(){const a=[];for(const u in this.binders){const f=this.binders[u];(f instanceof Lu||f instanceof cc)&&a.push(...f.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return a}getBinderAttributes(){const a=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Fs||f instanceof Go)for(let b=0;b<f.paintVertexAttributes.length;b++)a.push(f.paintVertexAttributes[b].name);else if(f instanceof ma)for(let b=0;b<Yn.members.length;b++)a.push(Yn.members[b].name)}return a}getBinderUniforms(){const a=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Lu||f instanceof cc||f instanceof Go)for(const b of f.uniformNames)a.push(b)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,u){const f=[];for(const b in this.binders){const S=this.binders[b];if(S instanceof Lu||S instanceof cc||S instanceof Go){for(const C of S.uniformNames)if(u[C]){const I=S.getBinding(a,u[C],C);f.push({name:C,property:b,binding:I})}}}return f}setUniforms(a,u,f,b){for(const{name:S,property:C,binding:I}of u)this.binders[C].setUniform(I,b,f.get(C),S)}updatePaintBuffers(a){this._buffers=[];for(const u in this.binders){const f=this.binders[u];if(a&&f instanceof ma){const b=a.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(f instanceof Fs||f instanceof Go)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(a){for(const u in this.binders){const f=this.binders[u];(f instanceof Fs||f instanceof Go||f instanceof ma)&&f.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const u=this.binders[a];(u instanceof Fs||u instanceof Go||u instanceof ma)&&u.destroy()}}}class go{constructor(a,u,f=()=>!0){this.programConfigurations={};for(const b of a)this.programConfigurations[b.id]=new o0(b,u,f);this.needsUpload=!1,this._featureMap=new nl,this._bufferOffset=0}populatePaintArrays(a,u,f,b){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(a,u,b);u.id!==void 0&&this._featureMap.add(u.id,f,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,u,f,b){for(const S of f)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(a,this._featureMap,u,S,b)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function s0(h,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${a}-`,"").replace(/-/g,"_")]}function Rm(h,a,u){const f={color:{source:ku,composite:V},number:{source:T,composite:ku}},b=function(S){return{"line-pattern":{source:xt,composite:xt},"fill-pattern":{source:xt,composite:xt},"fill-extrusion-pattern":{source:xt,composite:xt}}[S]}(h);return b&&b[u]||f[a][u]}zt("ConstantBinder",Lu),zt("CrossFadedConstantBinder",cc),zt("SourceExpressionBinder",Fs),zt("CrossFadedCompositeBinder",ma),zt("CompositeExpressionBinder",Go),zt("ProgramConfiguration",o0,{omit:["_buffers"]}),zt("ProgramConfigurationSet",go);const zd=Math.pow(2,14)-1,jd=-zd-1;function ga(h){const a=Ke/h.extent,u=h.loadGeometry();for(let f=0;f<u.length;f++){const b=u[f];for(let S=0;S<b.length;S++){const C=b[S],I=Math.round(C.x*a),O=Math.round(C.y*a);C.x=dt(I,jd,zd),C.y=dt(O,jd,zd),(I<C.x||I>C.x+1||O<C.y||O>C.y+1)&&Tt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function zs(h,a){return{type:h.type,id:h.id,properties:h.properties,geometry:a?ga(h):[]}}const a5=-32768;function HJ(h,a,u,f,b){h.emplaceBack(a5+8*a+f,a5+8*u+b)}class kw{constructor(a){this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ge,this.indexArray=new dn,this.segments=new vr,this.programConfigurations=new go(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,f){const b=this.layers[0],S=[];let C=null,I=!1,O=b.type==="heatmap";if(b.type==="circle"){const B=b;C=B.layout.get("circle-sort-key"),I=!C.isConstant(),O=O||B.paint.get("circle-pitch-alignment")==="map"}const F=O?u.subdivisionGranularity.circle:1;for(const{feature:B,id:G,index:Q,sourceLayerIndex:ie}of a){const se=this.layers[0]._featureFilter.needGeometry,ce=zs(B,se);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom,{globalState:this.globalState}),ce,f))continue;const fe=I?C.evaluate(ce,{},f):void 0,we={id:G,properties:B.properties,type:B.type,sourceLayerIndex:ie,index:Q,geometry:se?ce.geometry:ga(B),patterns:{},sortKey:fe};S.push(we)}I&&S.sort((B,G)=>B.sortKey-G.sortKey);for(const B of S){const{geometry:G,index:Q,sourceLayerIndex:ie}=B,se=a[Q].feature;this.addFeature(B,G,Q,f,F),u.featureIndex.insert(se,G,Q,ie,this.index)}}update(a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,{imagePositions:f,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Dn),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,u,f,b,S=1){let C;switch(S){case 1:C=[0,7];break;case 3:C=[0,2,5,7];break;case 5:C=[0,1,3,4,6,7];break;case 7:C=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}const I=C.length;for(const O of u)for(const F of O){const B=F.x,G=F.y;if(B<0||B>=Ke||G<0||G>=Ke)continue;const Q=this.segments.prepareSegment(I*I,this.layoutVertexArray,this.indexArray,a.sortKey),ie=Q.vertexLength;for(let se=0;se<I;se++)for(let ce=0;ce<I;ce++)HJ(this.layoutVertexArray,B,G,C[ce],C[se]);for(let se=0;se<I-1;se++)for(let ce=0;ce<I-1;ce++){const fe=ie+se*I+ce,we=ie+(se+1)*I+ce;this.indexArray.emplaceBack(fe,we+1,fe+1),this.indexArray.emplaceBack(fe,we,we+1)}Q.vertexLength+=I*I,Q.primitiveLength+=(I-1)*(I-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:{},canonical:b,globalState:this.globalState})}}function l5(h,a){for(let u=0;u<h.length;u++)if(Bd(a,h[u]))return!0;for(let u=0;u<a.length;u++)if(Bd(h,a[u]))return!0;return!!Lw(h,a)}function JJ(h,a,u){return!!Bd(h,a)||!!Dw(a,h,u)}function c5(h,a){if(h.length===1)return h5(a,h[0]);for(let u=0;u<a.length;u++){const f=a[u];for(let b=0;b<f.length;b++)if(Bd(h,f[b]))return!0}for(let u=0;u<h.length;u++)if(h5(a,h[u]))return!0;for(let u=0;u<a.length;u++)if(Lw(h,a[u]))return!0;return!1}function WJ(h,a,u){if(h.length>1){if(Lw(h,a))return!0;for(let f=0;f<a.length;f++)if(Dw(a[f],h,u))return!0}for(let f=0;f<h.length;f++)if(Dw(h[f],a,u))return!0;return!1}function Lw(h,a){if(h.length===0||a.length===0)return!1;for(let u=0;u<h.length-1;u++){const f=h[u],b=h[u+1];for(let S=0;S<a.length-1;S++)if(ZJ(f,b,a[S],a[S+1]))return!0}return!1}function ZJ(h,a,u,f){return vt(h,u,f)!==vt(a,u,f)&&vt(h,a,u)!==vt(h,a,f)}function Dw(h,a,u){const f=u*u;if(a.length===1)return h.distSqr(a[0])<f;for(let b=1;b<a.length;b++)if(u5(h,a[b-1],a[b])<f)return!0;return!1}function u5(h,a,u){const f=a.distSqr(u);if(f===0)return h.distSqr(a);const b=((h.x-a.x)*(u.x-a.x)+(h.y-a.y)*(u.y-a.y))/f;return h.distSqr(b<0?a:b>1?u:u.sub(a)._mult(b)._add(a))}function h5(h,a){let u,f,b,S=!1;for(let C=0;C<h.length;C++){u=h[C];for(let I=0,O=u.length-1;I<u.length;O=I++)f=u[I],b=u[O],f.y>a.y!=b.y>a.y&&a.x<(b.x-f.x)*(a.y-f.y)/(b.y-f.y)+f.x&&(S=!S)}return S}function Bd(h,a){let u=!1;for(let f=0,b=h.length-1;f<h.length;b=f++){const S=h[f],C=h[b];S.y>a.y!=C.y>a.y&&a.x<(C.x-S.x)*(a.y-S.y)/(C.y-S.y)+S.x&&(u=!u)}return u}function KJ(h,a,u){const f=u[0],b=u[2];if(h.x<f.x&&a.x<f.x||h.x>b.x&&a.x>b.x||h.y<f.y&&a.y<f.y||h.y>b.y&&a.y>b.y)return!1;const S=vt(h,a,u[0]);return S!==vt(h,a,u[1])||S!==vt(h,a,u[2])||S!==vt(h,a,u[3])}function Im(h,a,u){const f=a.paint.get(h).value;return f.kind==="constant"?f.value:u.programConfigurations.get(a.id).getMaxValue(h)}function a0(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function l0(h,a,u,f,b){if(!a[0]&&!a[1])return h;const S=p.convert(a)._mult(b);u==="viewport"&&S._rotate(-f);const C=[];for(let I=0;I<h.length;I++)C.push(h[I].sub(S));return C}let d5,p5;zt("CircleBucket",kw,{omit:["layers"]});var YJ={get paint(){return p5=p5||new Hi({"circle-radius":new ir($e.paint_circle["circle-radius"]),"circle-color":new ir($e.paint_circle["circle-color"]),"circle-blur":new ir($e.paint_circle["circle-blur"]),"circle-opacity":new ir($e.paint_circle["circle-opacity"]),"circle-translate":new Gt($e.paint_circle["circle-translate"]),"circle-translate-anchor":new Gt($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Gt($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Gt($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ir($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ir($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ir($e.paint_circle["circle-stroke-opacity"])})},get layout(){return d5=d5||new Hi({"circle-sort-key":new ir($e.layout_circle["circle-sort-key"])})}};class XJ extends So{constructor(a){super(a,YJ)}createBucket(a){return new kw(a)}queryRadius(a){const u=a;return Im("circle-radius",this,u)+Im("circle-stroke-width",this,u)+a0(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:a,feature:u,featureState:f,geometry:b,transform:S,pixelsToTileUnits:C,unwrappedTileID:I,getElevation:O}){const F=l0(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,C),B=this.paint.get("circle-radius").evaluate(u,f)+this.paint.get("circle-stroke-width").evaluate(u,f),G=this.paint.get("circle-pitch-alignment")==="map",Q=G?F:function(se,ce,fe,we){return se.map(Ue=>f5(Ue,ce,fe,we))}(F,S,I,O),ie=G?B*C:B;for(const se of b)for(const ce of se){const fe=G?ce:f5(ce,S,I,O);let we=ie;const Ue=S.projectTileCoordinates(ce.x,ce.y,I,O).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?we*=Ue/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(we*=S.cameraToCenterDistance/Ue),JJ(Q,fe,we))return!0}return!1}}function f5(h,a,u,f){const b=a.projectTileCoordinates(h.x,h.y,u,f).point;return new p((.5*b.x+.5)*a.width,(.5*-b.y+.5)*a.height)}class m5 extends kw{}let g5;zt("HeatmapBucket",m5,{omit:["layers"]});var QJ={get paint(){return g5=g5||new Hi({"heatmap-radius":new ir($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ir($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Gt($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ld($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Gt($e.paint_heatmap["heatmap-opacity"])})}};function Nw(h,{width:a,height:u},f,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==a*u*f)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${a*u*f}`)}else b=new Uint8Array(a*u*f);return h.width=a,h.height=u,h.data=b,h}function y5(h,{width:a,height:u},f){if(a===h.width&&u===h.height)return;const b=Nw({},{width:a,height:u},f);Fw(h,b,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,a),height:Math.min(h.height,u)},f),h.width=a,h.height=u,h.data=b.data}function Fw(h,a,u,f,b,S){if(b.width===0||b.height===0)return a;if(b.width>h.width||b.height>h.height||u.x>h.width-b.width||u.y>h.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>a.width||b.height>a.height||f.x>a.width-b.width||f.y>a.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const C=h.data,I=a.data;if(C===I)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<b.height;O++){const F=((u.y+O)*h.width+u.x)*S,B=((f.y+O)*a.width+f.x)*S;for(let G=0;G<b.width*S;G++)I[B+G]=C[F+G]}return a}class Mm{constructor(a,u){Nw(this,a,1,u)}resize(a){y5(this,a,1)}clone(){return new Mm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,f,b,S){Fw(a,u,f,b,S,1)}}class yo{constructor(a,u){Nw(this,a,4,u)}resize(a){y5(this,a,4)}replace(a,u){u?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new yo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,f,b,S){Fw(a,u,f,b,S,4)}setPixel(a,u,f){const b=4*(a*this.width+u);this.data[b+0]=Math.round(255*f.r/f.a),this.data[b+1]=Math.round(255*f.g/f.a),this.data[b+2]=Math.round(255*f.b/f.a),this.data[b+3]=Math.round(255*f.a)}}function _5(h){const a={},u=h.resolution||256,f=h.clips?h.clips.length:1,b=h.image||new yo({width:u,height:f});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const S=(C,I,O)=>{a[h.evaluationKey]=O;const F=h.expression.evaluate(a);b.setPixel(C/4/u,I/4,F)};if(h.clips)for(let C=0,I=0;C<f;++C,I+=4*u)for(let O=0,F=0;O<u;O++,F+=4){const B=O/(u-1),{start:G,end:Q}=h.clips[C];S(I,F,G*(1-B)+Q*B)}else for(let C=0,I=0;C<u;C++,I+=4)S(0,I,C/(u-1));return b}zt("AlphaImage",Mm),zt("RGBAImage",yo);const zw="big-fb";class eW extends So{createBucket(a){return new m5(a)}constructor(a){super(a,QJ),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=_5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(zw)&&this.heatmapFbos.delete(zw)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let b5;var tW={get paint(){return b5=b5||new Hi({"hillshade-illumination-direction":new Gt($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Gt($e.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Gt($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Gt($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Gt($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Gt($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Gt($e.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Gt($e.paint_hillshade["hillshade-method"])})}};class rW extends So{constructor(a){super(a,tW),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let a=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values;const S=Math.max(a.length,u.length,f.length,b.length);a=a.concat(Array(S-a.length).fill(a.at(-1))),u=u.concat(Array(S-u.length).fill(u.at(-1))),f=f.concat(Array(S-f.length).fill(f.at(-1))),b=b.concat(Array(S-b.length).fill(b.at(-1)));const C=u.map(ur);return{directionRadians:a.map(ur),altitudeRadians:C,shadowColor:b,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let v5;var nW={get paint(){return v5=v5||new Hi({"color-relief-opacity":new Gt($e["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Ld($e["paint_color-relief"]["color-relief-color"])})}};class jw{constructor(a,u,f,b){this.context=a,this.format=f,this.texture=a.gl.createTexture(),this.update(u,b)}update(a,u,f){const{width:b,height:S}=a,C=!(this.size&&this.size[0]===b&&this.size[1]===S||f),{context:I}=this,{gl:O}=I;if(this.useMipmap=!!(u&&u.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[b,S],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||Bt(a)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,a):O.texImage2D(O.TEXTURE_2D,0,this.format,b,S,0,this.format,O.UNSIGNED_BYTE,a.data);else{const{x:F,y:B}=f||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||Bt(a)?O.texSubImage2D(O.TEXTURE_2D,0,F,B,O.RGBA,O.UNSIGNED_BYTE,a):O.texSubImage2D(O.TEXTURE_2D,0,F,B,b,S,O.RGBA,O.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D),I.pixelStoreUnpackFlipY.setDefault(),I.pixelStoreUnpack.setDefault(),I.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(a,u,f){const{context:b}=this,{gl:S}=b;S.bindTexture(S.TEXTURE_2D,this.texture),f!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=S.LINEAR),a!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,a),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,f||a),this.filter=a),u!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class x5{constructor(a,u,f,b=1,S=1,C=1,I=0){if(this.uid=a,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Tt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const O=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=S,this.blueFactor=C,this.baseShift=I;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<O;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(O,F)]=this.data[this._idx(O-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,O)]=this.data[this._idx(F,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<O;F++)for(let B=0;B<O;B++){const G=this.get(F,B);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(a,u){const f=new Uint8Array(this.data.buffer),b=4*this._idx(a,u);return this.unpack(f[b],f[b+1],f[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,u){if(a<-1||a>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(a+1)}unpack(a,u,f){return a*this.redFactor+u*this.greenFactor+f*this.blueFactor-this.baseShift}pack(a){return w5(a,this.getUnpackVector())}getPixels(){return new yo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,u,f){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let b=u*this.dim,S=u*this.dim+this.dim,C=f*this.dim,I=f*this.dim+this.dim;switch(u){case-1:b=S-1;break;case 1:S=b+1}switch(f){case-1:C=I-1;break;case 1:I=C+1}const O=-u*this.dim,F=-f*this.dim;for(let B=C;B<I;B++)for(let G=b;G<S;G++)this.data[this._idx(G,B)]=a.data[this._idx(G+O,B+F)]}}function w5(h,a){const u=a[0],f=a[1],b=a[2],S=a[3],C=Math.min(u,f,b),I=Math.round((h+S)/C);return{r:Math.floor(I*C/u)%256,g:Math.floor(I*C/f)%256,b:Math.floor(I*C/b)%256}}zt("DEMData",x5);class iW extends So{constructor(a){super(a,nW)}_createColorRamp(a){const u={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Tu&&f._styleExpression.expression instanceof Ci){this.colorRampExpression=f;const C=f._styleExpression.expression;u.elevationStops=C.labels,u.colorStops=[];for(const I of u.elevationStops)u.colorStops.push(C.evaluate({globals:{elevation:I}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[Or.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=a)return u;const b={elevationStops:[],colorStops:[]},S=(u.elevationStops.length-1)/(a-1);for(let C=0;C<u.elevationStops.length-.5;C+=S)b.elevationStops.push(u.elevationStops[Math.round(C)]),b.colorStops.push(u.colorStops[Math.round(C)]);return Tt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(a,u,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const b=this._createColorRamp(u),S=new yo({width:b.colorStops.length,height:1}),C=new yo({width:b.colorStops.length,height:1});for(let I=0;I<b.elevationStops.length;I++){const O=w5(b.elevationStops[I],f);C.setPixel(0,I,new Or(O.r/255,O.g/255,O.b/255,1)),S.setPixel(0,I,b.colorStops[I])}return this.colorRampTextures={elevationTexture:new jw(a,C,a.gl.RGBA),colorTexture:new jw(a,S,a.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const oW=Un([{name:"a_pos",components:2,type:"Int16"}],4),{members:sW}=oW;function Bw(h,a,u){const f=u.patternDependencies;let b=!1;for(const S of a){const C=S.paint.get(`${h}-pattern`);C.isConstant()||(b=!0);const I=C.constantOr(null);I&&(b=!0,f[I.to]=!0,f[I.from]=!0)}return b}function qw(h,a,u,f,b){const S=b.patternDependencies;for(const C of a){const I=C.paint.get(`${h}-pattern`).value;if(I.kind!=="constant"){let O=I.evaluate({zoom:f-1},u,{},b.availableImages),F=I.evaluate({zoom:f},u,{},b.availableImages),B=I.evaluate({zoom:f+1},u,{},b.availableImages);O=O&&O.name?O.name:O,F=F&&F.name?F.name:F,B=B&&B.name?B.name:B,S[O]=!0,S[F]=!0,S[B]=!0,u.patterns[C.id]={min:O,mid:F,max:B}}}return u}function E5(h,a,u,f,b){let S;if(b===function(C,I,O,F){let B=0;for(let G=I,Q=O-F;G<O;G+=F)B+=(C[Q]-C[G])*(C[G+1]+C[Q+1]),Q=G;return B}(h,a,u,f)>0)for(let C=a;C<u;C+=f)S=P5(C/f|0,h[C],h[C+1],S);else for(let C=u-f;C>=a;C-=f)S=P5(C/f|0,h[C],h[C+1],S);return S&&qd(S,S.next)&&(Dm(S),S=S.next),S}function Du(h,a){if(!h)return h;a||(a=h);let u,f=h;do if(u=!1,f.steiner||!qd(f,f.next)&&Hn(f.prev,f,f.next)!==0)f=f.next;else{if(Dm(f),f=a=f.prev,f===f.next)break;u=!0}while(u||f!==a);return a}function Om(h,a,u,f,b,S,C){if(!h)return;!C&&S&&function(O,F,B,G){let Q=O;do Q.z===0&&(Q.z=$w(Q.x,Q.y,F,B,G)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==O);Q.prevZ.nextZ=null,Q.prevZ=null,function(ie){let se,ce=1;do{let fe,we=ie;ie=null;let Ue=null;for(se=0;we;){se++;let Oe=we,Ne=0;for(let at=0;at<ce&&(Ne++,Oe=Oe.nextZ,Oe);at++);let Qe=ce;for(;Ne>0||Qe>0&&Oe;)Ne!==0&&(Qe===0||!Oe||we.z<=Oe.z)?(fe=we,we=we.nextZ,Ne--):(fe=Oe,Oe=Oe.nextZ,Qe--),Ue?Ue.nextZ=fe:ie=fe,fe.prevZ=Ue,Ue=fe;we=Oe}Ue.nextZ=null,ce*=2}while(se>1)}(Q)}(h,f,b,S);let I=h;for(;h.prev!==h.next;){const O=h.prev,F=h.next;if(S?lW(h,f,b,S):aW(h))a.push(O.i,h.i,F.i),Dm(h),h=F.next,I=F.next;else if((h=F)===I){C?C===1?Om(h=cW(Du(h),a),a,u,f,b,S,2):C===2&&uW(h,a,u,f,b,S):Om(Du(h),a,u,f,b,S,1);break}}}function aW(h){const a=h.prev,u=h,f=h.next;if(Hn(a,u,f)>=0)return!1;const b=a.x,S=u.x,C=f.x,I=a.y,O=u.y,F=f.y,B=Math.min(b,S,C),G=Math.min(I,O,F),Q=Math.max(b,S,C),ie=Math.max(I,O,F);let se=f.next;for(;se!==a;){if(se.x>=B&&se.x<=Q&&se.y>=G&&se.y<=ie&&km(b,I,S,O,C,F,se.x,se.y)&&Hn(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function lW(h,a,u,f){const b=h.prev,S=h,C=h.next;if(Hn(b,S,C)>=0)return!1;const I=b.x,O=S.x,F=C.x,B=b.y,G=S.y,Q=C.y,ie=Math.min(I,O,F),se=Math.min(B,G,Q),ce=Math.max(I,O,F),fe=Math.max(B,G,Q),we=$w(ie,se,a,u,f),Ue=$w(ce,fe,a,u,f);let Oe=h.prevZ,Ne=h.nextZ;for(;Oe&&Oe.z>=we&&Ne&&Ne.z<=Ue;){if(Oe.x>=ie&&Oe.x<=ce&&Oe.y>=se&&Oe.y<=fe&&Oe!==b&&Oe!==C&&km(I,B,O,G,F,Q,Oe.x,Oe.y)&&Hn(Oe.prev,Oe,Oe.next)>=0||(Oe=Oe.prevZ,Ne.x>=ie&&Ne.x<=ce&&Ne.y>=se&&Ne.y<=fe&&Ne!==b&&Ne!==C&&km(I,B,O,G,F,Q,Ne.x,Ne.y)&&Hn(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;Oe&&Oe.z>=we;){if(Oe.x>=ie&&Oe.x<=ce&&Oe.y>=se&&Oe.y<=fe&&Oe!==b&&Oe!==C&&km(I,B,O,G,F,Q,Oe.x,Oe.y)&&Hn(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.prevZ}for(;Ne&&Ne.z<=Ue;){if(Ne.x>=ie&&Ne.x<=ce&&Ne.y>=se&&Ne.y<=fe&&Ne!==b&&Ne!==C&&km(I,B,O,G,F,Q,Ne.x,Ne.y)&&Hn(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function cW(h,a){let u=h;do{const f=u.prev,b=u.next.next;!qd(f,b)&&S5(f,u,u.next,b)&&Lm(f,b)&&Lm(b,f)&&(a.push(f.i,u.i,b.i),Dm(u),Dm(u.next),u=h=b),u=u.next}while(u!==h);return Du(u)}function uW(h,a,u,f,b,S){let C=h;do{let I=C.next.next;for(;I!==C.prev;){if(C.i!==I.i&&mW(C,I)){let O=C5(C,I);return C=Du(C,C.next),O=Du(O,O.next),Om(C,a,u,f,b,S,0),void Om(O,a,u,f,b,S,0)}I=I.next}C=C.next}while(C!==h)}function hW(h,a){let u=h.x-a.x;return u===0&&(u=h.y-a.y,u===0)&&(u=(h.next.y-h.y)/(h.next.x-h.x)-(a.next.y-a.y)/(a.next.x-a.x)),u}function dW(h,a){const u=function(b,S){let C=S;const I=b.x,O=b.y;let F,B=-1/0;if(qd(b,C))return C;do{if(qd(b,C.next))return C.next;if(O<=C.y&&O>=C.next.y&&C.next.y!==C.y){const ce=C.x+(O-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(ce<=I&&ce>B&&(B=ce,F=C.x<C.next.x?C:C.next,ce===I))return F}C=C.next}while(C!==S);if(!F)return null;const G=F,Q=F.x,ie=F.y;let se=1/0;C=F;do{if(I>=C.x&&C.x>=Q&&I!==C.x&&T5(O<ie?I:B,O,Q,ie,O<ie?B:I,O,C.x,C.y)){const ce=Math.abs(O-C.y)/(I-C.x);Lm(C,b)&&(ce<se||ce===se&&(C.x>F.x||C.x===F.x&&pW(F,C)))&&(F=C,se=ce)}C=C.next}while(C!==G);return F}(h,a);if(!u)return a;const f=C5(u,h);return Du(f,f.next),Du(u,u.next)}function pW(h,a){return Hn(h.prev,h,a.prev)<0&&Hn(a.next,h,h.next)<0}function $w(h,a,u,f,b){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*b|0)|h<<8))|h<<4))|h<<2))|h<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-f)*b|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function fW(h){let a=h,u=h;do(a.x<u.x||a.x===u.x&&a.y<u.y)&&(u=a),a=a.next;while(a!==h);return u}function T5(h,a,u,f,b,S,C,I){return(b-C)*(a-I)>=(h-C)*(S-I)&&(h-C)*(f-I)>=(u-C)*(a-I)&&(u-C)*(S-I)>=(b-C)*(f-I)}function km(h,a,u,f,b,S,C,I){return!(h===C&&a===I)&&T5(h,a,u,f,b,S,C,I)}function mW(h,a){return h.next.i!==a.i&&h.prev.i!==a.i&&!function(u,f){let b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==f.i&&b.next.i!==f.i&&S5(b,b.next,u,f))return!0;b=b.next}while(b!==u);return!1}(h,a)&&(Lm(h,a)&&Lm(a,h)&&function(u,f){let b=u,S=!1;const C=(u.x+f.x)/2,I=(u.y+f.y)/2;do b.y>I!=b.next.y>I&&b.next.y!==b.y&&C<(b.next.x-b.x)*(I-b.y)/(b.next.y-b.y)+b.x&&(S=!S),b=b.next;while(b!==u);return S}(h,a)&&(Hn(h.prev,h,a.prev)||Hn(h,a.prev,a))||qd(h,a)&&Hn(h.prev,h,h.next)>0&&Hn(a.prev,a,a.next)>0)}function Hn(h,a,u){return(a.y-h.y)*(u.x-a.x)-(a.x-h.x)*(u.y-a.y)}function qd(h,a){return h.x===a.x&&h.y===a.y}function S5(h,a,u,f){const b=u0(Hn(h,a,u)),S=u0(Hn(h,a,f)),C=u0(Hn(u,f,h)),I=u0(Hn(u,f,a));return b!==S&&C!==I||!(b!==0||!c0(h,u,a))||!(S!==0||!c0(h,f,a))||!(C!==0||!c0(u,h,f))||!(I!==0||!c0(u,a,f))}function c0(h,a,u){return a.x<=Math.max(h.x,u.x)&&a.x>=Math.min(h.x,u.x)&&a.y<=Math.max(h.y,u.y)&&a.y>=Math.min(h.y,u.y)}function u0(h){return h>0?1:h<0?-1:0}function Lm(h,a){return Hn(h.prev,h,h.next)<0?Hn(h,a,h.next)>=0&&Hn(h,h.prev,a)>=0:Hn(h,a,h.prev)<0||Hn(h,h.next,a)<0}function C5(h,a){const u=Vw(h.i,h.x,h.y),f=Vw(a.i,a.x,a.y),b=h.next,S=a.prev;return h.next=a,a.prev=h,u.next=b,b.prev=u,f.next=u,u.prev=f,S.next=f,f.prev=S,f}function P5(h,a,u,f){const b=Vw(h,a,u);return f?(b.next=f.next,b.prev=f,f.next.prev=b,f.next=b):(b.prev=b,b.next=b),b}function Dm(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Vw(h,a,u){return{i:h,x:a,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class $d{constructor(a,u){if(u>a)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=a,this._minGranularity=u}getGranularityForZoomLevel(a){return Math.max(Math.floor(this._baseZoomGranularity/(1<<a)),this._minGranularity,1)}}class h0{constructor(a){this.fill=a.fill,this.line=a.line,this.tile=a.tile,this.stencil=a.stencil,this.circle=a.circle}}h0.noSubdivision=new h0({fill:new $d(0,0),line:new $d(0,0),tile:new $d(0,0),stencil:new $d(0,0),circle:1}),zt("SubdivisionGranularityExpression",$d),zt("SubdivisionGranularitySetting",h0);const Vd=-32768,Nm=32767;class gW{constructor(a,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=a,this._granularityCellSize=Ke/a,this._canonical=u}_getKey(a,u){return(a+=32768)<<16|u+32768}_vertexToIndex(a,u){if(a<-32768||u<-32768||a>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(a),b=0|Math.round(u),S=this._getKey(f,b);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);const C=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,C),this._vertexBuffer.push(f,b),C}_subdivideTrianglesScanline(a){if(this._granularity<2)return function(b,S){const C=[];for(let I=0;I<S.length;I+=3){const O=S[I],F=S[I+1],B=S[I+2],G=b[2*O],Q=b[2*O+1];(b[2*F]-G)*(b[2*B+1]-Q)-(b[2*F+1]-Q)*(b[2*B]-G)>0?(C.push(O),C.push(B),C.push(F)):(C.push(O),C.push(F),C.push(B))}return C}(this._vertexBuffer,a);const u=[],f=a.length;for(let b=0;b<f;b+=3){const S=[a[b+0],a[b+1],a[b+2]],C=[this._vertexBuffer[2*a[b+0]+0],this._vertexBuffer[2*a[b+0]+1],this._vertexBuffer[2*a[b+1]+0],this._vertexBuffer[2*a[b+1]+1],this._vertexBuffer[2*a[b+2]+0],this._vertexBuffer[2*a[b+2]+1]];let I=1/0,O=1/0,F=-1/0,B=-1/0;for(let ce=0;ce<3;ce++){const fe=C[2*ce],we=C[2*ce+1];I=Math.min(I,fe),F=Math.max(F,fe),O=Math.min(O,we),B=Math.max(B,we)}if(I===F||O===B)continue;const G=Math.floor(I/this._granularityCellSize),Q=Math.ceil(F/this._granularityCellSize),ie=Math.floor(O/this._granularityCellSize),se=Math.ceil(B/this._granularityCellSize);if(G!==Q||ie!==se)for(let ce=ie;ce<se;ce++){const fe=this._scanlineGenerateVertexRingForCellRow(ce,C,S);yW(this._vertexBuffer,fe,u)}else u.push(...S)}return u}_scanlineGenerateVertexRingForCellRow(a,u,f){const b=a*this._granularityCellSize,S=b+this._granularityCellSize,C=[];for(let I=0;I<3;I++){const O=u[2*I],F=u[2*I+1],B=u[2*(I+1)%6],G=u[(2*(I+1)+1)%6],Q=u[2*(I+2)%6],ie=u[(2*(I+2)+1)%6],se=B-O,ce=G-F,fe=se===0,we=ce===0,Ue=(b-F)/ce,Oe=(S-F)/ce,Ne=Math.min(Ue,Oe),Qe=Math.max(Ue,Oe);if(!we&&(Ne>=1||Qe<=0)||we&&(F<b||F>S)){G>=b&&G<=S&&C.push(f[(I+1)%3]);continue}!we&&Ne>0&&C.push(this._vertexToIndex(O+se*Ne,F+ce*Ne));const at=O+se*Math.max(Ne,0),gt=O+se*Math.min(Qe,1);fe||this._generateIntraEdgeVertices(C,O,F,B,G,at,gt),!we&&Qe<1&&C.push(this._vertexToIndex(O+se*Qe,F+ce*Qe)),(we||G>=b&&G<=S)&&C.push(f[(I+1)%3]),!we&&(G<=b||G>=S)&&this._generateInterEdgeVertices(C,O,F,B,G,Q,ie,gt,b,S)}return C}_generateIntraEdgeVertices(a,u,f,b,S,C,I){const O=b-u,F=S-f,B=F===0,G=B?Math.min(u,b):Math.min(C,I),Q=B?Math.max(u,b):Math.max(C,I),ie=Math.floor(G/this._granularityCellSize)+1,se=Math.ceil(Q/this._granularityCellSize)-1;if(B?u<b:C<I)for(let ce=ie;ce<=se;ce++){const fe=ce*this._granularityCellSize;a.push(this._vertexToIndex(fe,f+F*(fe-u)/O))}else for(let ce=se;ce>=ie;ce--){const fe=ce*this._granularityCellSize;a.push(this._vertexToIndex(fe,f+F*(fe-u)/O))}}_generateInterEdgeVertices(a,u,f,b,S,C,I,O,F,B){const G=S-f,Q=C-b,ie=I-S,se=(F-S)/ie,ce=(B-S)/ie,fe=Math.min(se,ce),we=Math.max(se,ce),Ue=b+Q*fe;let Oe=Math.floor(Math.min(Ue,O)/this._granularityCellSize)+1,Ne=Math.ceil(Math.max(Ue,O)/this._granularityCellSize)-1,Qe=O<Ue;const at=ie===0;if(at&&(I===F||I===B))return;if(at||fe>=1||we<=0){const Mt=f-I,wt=C+(u-C)*Math.min((F-I)/Mt,(B-I)/Mt);Oe=Math.floor(Math.min(wt,O)/this._granularityCellSize)+1,Ne=Math.ceil(Math.max(wt,O)/this._granularityCellSize)-1,Qe=O<wt}const gt=G>0?B:F;if(Qe)for(let Mt=Oe;Mt<=Ne;Mt++)a.push(this._vertexToIndex(Mt*this._granularityCellSize,gt));else for(let Mt=Ne;Mt>=Oe;Mt--)a.push(this._vertexToIndex(Mt*this._granularityCellSize,gt))}_generateOutline(a){const u=[];for(const f of a){const b=Nu(f,this._granularity,!0),S=this._pointArrayToIndices(b),C=[];for(let I=1;I<S.length;I++)C.push(S[I-1]),C.push(S[I]);u.push(C)}return u}_handlePoles(a){let u=!1,f=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(u||f)&&this._fillPoles(a,u,f)}_ensureNoPoleVertices(){const a=this._vertexBuffer;for(let u=0;u<a.length;u+=2){const f=a[u+1];f===Vd&&(a[u+1]=-32767),f===Nm&&(a[u+1]=32766)}}_generatePoleQuad(a,u,f,b,S,C){b>S!=(C===Vd)?(a.push(u),a.push(f),a.push(this._vertexToIndex(b,C)),a.push(f),a.push(this._vertexToIndex(S,C)),a.push(this._vertexToIndex(b,C))):(a.push(f),a.push(u),a.push(this._vertexToIndex(b,C)),a.push(this._vertexToIndex(S,C)),a.push(f),a.push(this._vertexToIndex(b,C)))}_fillPoles(a,u,f){const b=this._vertexBuffer,S=Ke,C=a.length;for(let I=2;I<C;I+=3){const O=a[I-2],F=a[I-1],B=a[I],G=b[2*O],Q=b[2*O+1],ie=b[2*F],se=b[2*F+1],ce=b[2*B],fe=b[2*B+1];u&&(Q===0&&se===0&&this._generatePoleQuad(a,O,F,G,ie,Vd),se===0&&fe===0&&this._generatePoleQuad(a,F,B,ie,ce,Vd),fe===0&&Q===0&&this._generatePoleQuad(a,B,O,ce,G,Vd)),f&&(Q===S&&se===S&&this._generatePoleQuad(a,O,F,G,ie,Nm),se===S&&fe===S&&this._generatePoleQuad(a,F,B,ie,ce,Nm),fe===S&&Q===S&&this._generatePoleQuad(a,B,O,ce,G,Nm))}}_initializeVertices(a){for(let u=0;u<a.length;u+=2)this._vertexToIndex(a[u],a[u+1])}subdividePolygonInternal(a,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:b}=function(I){const O=[],F=[];for(const B of I)if(B.length!==0){B!==I[0]&&O.push(F.length/2);for(let G=0;G<B.length;G++)F.push(B[G].x),F.push(B[G].y)}return{flattened:F,holeIndices:O}}(a);let S;this._initializeVertices(f);try{const I=function(F,B,G=2){const Q=B&&B.length,ie=Q?B[0]*G:F.length;let se=E5(F,0,ie,G,!0);const ce=[];if(!se||se.next===se.prev)return ce;let fe,we,Ue;if(Q&&(se=function(Oe,Ne,Qe,at){const gt=[];for(let Mt=0,wt=Ne.length;Mt<wt;Mt++){const Rt=E5(Oe,Ne[Mt]*at,Mt<wt-1?Ne[Mt+1]*at:Oe.length,at,!1);Rt===Rt.next&&(Rt.steiner=!0),gt.push(fW(Rt))}gt.sort(hW);for(let Mt=0;Mt<gt.length;Mt++)Qe=dW(gt[Mt],Qe);return Qe}(F,B,se,G)),F.length>80*G){fe=F[0],we=F[1];let Oe=fe,Ne=we;for(let Qe=G;Qe<ie;Qe+=G){const at=F[Qe],gt=F[Qe+1];at<fe&&(fe=at),gt<we&&(we=gt),at>Oe&&(Oe=at),gt>Ne&&(Ne=gt)}Ue=Math.max(Oe-fe,Ne-we),Ue=Ue!==0?32767/Ue:0}return Om(se,ce,G,fe,we,Ue,0),ce}(f,b),O=this._convertIndices(f,I);S=this._subdivideTrianglesScanline(O)}catch(I){console.error(I)}let C=[];return u&&(C=this._generateOutline(a)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:C}}_convertIndices(a,u){const f=[];for(let b=0;b<u.length;b++)f.push(this._vertexToIndex(a[2*u[b]],a[2*u[b]+1]));return f}_pointArrayToIndices(a){const u=[];for(let f=0;f<a.length;f++){const b=a[f];u.push(this._vertexToIndex(b.x,b.y))}return u}}function A5(h,a,u,f=!0){return new gW(u,a).subdividePolygonInternal(h,f)}function Nu(h,a,u=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const f=h[0],b=h[h.length-1],S=u&&(f.x!==b.x||f.y!==b.y);if(a<2)return S?[...h,h[0]]:[...h];const C=Math.floor(Ke/a),I=[];I.push(new p(h[0].x,h[0].y));const O=h.length,F=S?O:O-1;for(let B=0;B<F;B++){const G=h[B],Q=B<O-1?h[B+1]:h[0],ie=G.x,se=G.y,ce=Q.x,fe=Q.y,we=ie!==ce,Ue=se!==fe;if(!we&&!Ue)continue;const Oe=ce-ie,Ne=fe-se,Qe=Math.abs(Oe),at=Math.abs(Ne);let gt=ie,Mt=se;for(;;){const Rt=Oe>0?(Math.floor(gt/C)+1)*C:(Math.ceil(gt/C)-1)*C,Zt=Ne>0?(Math.floor(Mt/C)+1)*C:(Math.ceil(Mt/C)-1)*C,At=Math.abs(gt-Rt),It=Math.abs(Mt-Zt),ht=Math.abs(gt-ce),sr=Math.abs(Mt-fe),dr=we?At/Qe:Number.POSITIVE_INFINITY,Qt=Ue?It/at:Number.POSITIVE_INFINITY;if((ht<=At||!we)&&(sr<=It||!Ue))break;if(dr<Qt&&we||!Ue){gt=Rt,Mt+=Ne*dr;const Ut=new p(gt,Math.round(Mt));I[I.length-1].x===Ut.x&&I[I.length-1].y===Ut.y||I.push(Ut)}else{gt+=Oe*Qt,Mt=Zt;const Ut=new p(Math.round(gt),Mt);I[I.length-1].x===Ut.x&&I[I.length-1].y===Ut.y||I.push(Ut)}}const wt=new p(ce,fe);I[I.length-1].x===wt.x&&I[I.length-1].y===wt.y||I.push(wt)}return I}function yW(h,a,u){if(a.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,b=h[2*a[0]];for(let O=1;O<a.length;O++){const F=h[2*a[O]];F<b&&(b=F,f=O)}const S=a.length;let C=f,I=(C+1)%S;for(;;){const O=C-1>=0?C-1:S-1,F=(I+1)%S,B=h[2*a[O]],G=h[2*a[F]],Q=h[2*a[C]],ie=h[2*a[C]+1],se=h[2*a[I]+1];let ce=!1;if(B<G)ce=!0;else if(B>G)ce=!1;else{const fe=se-ie,we=-(h[2*a[I]]-Q),Ue=ie<se?1:-1;((B-Q)*fe+(h[2*a[O]+1]-ie)*we)*Ue>((G-Q)*fe+(h[2*a[F]+1]-ie)*we)*Ue&&(ce=!0)}if(ce){const fe=a[O],we=a[C],Ue=a[I];fe!==we&&fe!==Ue&&we!==Ue&&u.push(Ue,we,fe),C--,C<0&&(C=S-1)}else{const fe=a[F],we=a[C],Ue=a[I];fe!==we&&fe!==Ue&&we!==Ue&&u.push(Ue,we,fe),I++,I>=S&&(I=0)}if(O===F)break}}function R5(h,a,u,f,b,S,C,I,O){const F=b.length/2,B=C&&I&&O;if(F<vr.MAX_VERTEX_ARRAY_LENGTH){const G=a.prepareSegment(F,u,f),Q=G.vertexLength;for(let ce=0;ce<S.length;ce+=3)f.emplaceBack(Q+S[ce],Q+S[ce+1],Q+S[ce+2]);let ie,se;G.vertexLength+=F,G.primitiveLength+=S.length/3,B&&(se=C.prepareSegment(F,u,I),ie=se.vertexLength,se.vertexLength+=F);for(let ce=0;ce<b.length;ce+=2)h(b[ce],b[ce+1]);if(B)for(let ce=0;ce<O.length;ce++){const fe=O[ce];for(let we=1;we<fe.length;we+=2)I.emplaceBack(ie+fe[we-1],ie+fe[we]);se.primitiveLength+=fe.length/2}}else(function(G,Q,ie,se,ce,fe){const we=[];for(let at=0;at<se.length/2;at++)we.push(-1);const Ue={count:0};let Oe=0,Ne=G.getOrCreateLatestSegment(Q,ie),Qe=Ne.vertexLength;for(let at=2;at<ce.length;at+=3){const gt=ce[at-2],Mt=ce[at-1],wt=ce[at];let Rt=we[gt]<Oe,Zt=we[Mt]<Oe,At=we[wt]<Oe;Ne.vertexLength+((Rt?1:0)+(Zt?1:0)+(At?1:0))>vr.MAX_VERTEX_ARRAY_LENGTH&&(Ne=G.createNewSegment(Q,ie),Oe=Ue.count,Rt=!0,Zt=!0,At=!0,Qe=0);const It=Fm(we,se,fe,Ue,gt,Rt,Ne),ht=Fm(we,se,fe,Ue,Mt,Zt,Ne),sr=Fm(we,se,fe,Ue,wt,At,Ne);ie.emplaceBack(Qe+It-Oe,Qe+ht-Oe,Qe+sr-Oe),Ne.primitiveLength++}})(a,u,f,b,S,h),B&&function(G,Q,ie,se,ce,fe){const we=[];for(let at=0;at<se.length/2;at++)we.push(-1);const Ue={count:0};let Oe=0,Ne=G.getOrCreateLatestSegment(Q,ie),Qe=Ne.vertexLength;for(let at=0;at<ce.length;at++){const gt=ce[at];for(let Mt=1;Mt<ce[at].length;Mt+=2){const wt=gt[Mt-1],Rt=gt[Mt];let Zt=we[wt]<Oe,At=we[Rt]<Oe;Ne.vertexLength+((Zt?1:0)+(At?1:0))>vr.MAX_VERTEX_ARRAY_LENGTH&&(Ne=G.createNewSegment(Q,ie),Oe=Ue.count,Zt=!0,At=!0,Qe=0);const It=Fm(we,se,fe,Ue,wt,Zt,Ne),ht=Fm(we,se,fe,Ue,Rt,At,Ne);ie.emplaceBack(Qe+It-Oe,Qe+ht-Oe),Ne.primitiveLength++}}}(C,u,I,b,O,h),a.forceNewSegmentOnNextPrepare(),C?.forceNewSegmentOnNextPrepare()}function Fm(h,a,u,f,b,S,C){if(S){const I=f.count;return u(a[2*b],a[2*b+1]),h[b]=f.count,f.count++,C.vertexLength++,I}return h[b]}class Uw{constructor(a){this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new st,this.indexArray=new dn,this.indexArray2=new an,this.programConfigurations=new go(a.layers,a.zoom),this.segments=new vr,this.segments2=new vr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,f){this.hasPattern=Bw("fill",this.layers,u);const b=this.layers[0].layout.get("fill-sort-key"),S=!b.isConstant(),C=[];for(const{feature:I,id:O,index:F,sourceLayerIndex:B}of a){const G=this.layers[0]._featureFilter.needGeometry,Q=zs(I,G);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom,{globalState:this.globalState}),Q,f))continue;const ie=S?b.evaluate(Q,{},f,u.availableImages):void 0,se={id:O,properties:I.properties,type:I.type,sourceLayerIndex:B,index:F,geometry:G?Q.geometry:ga(I),patterns:{},sortKey:ie};C.push(se)}S&&C.sort((I,O)=>I.sortKey-O.sortKey);for(const I of C){const{geometry:O,index:F,sourceLayerIndex:B}=I;if(this.hasPattern){const G=qw("fill",this.layers,I,this.zoom,u);this.patternFeatures.push(G)}else this.addFeature(I,O,F,f,{},u.subdivisionGranularity);u.featureIndex.insert(a[F].feature,O,F,B,this.index)}}update(a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,{imagePositions:f,globalState:this.globalState})}addFeatures(a,u,f){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,sW),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,u,f,b,S,C){for(const I of bu(u,500)){const O=A5(I,b,C.fill.getGranularityForZoomLevel(b.z)),F=this.layoutVertexArray;R5((B,G)=>{F.emplaceBack(B,G)},this.segments,this.layoutVertexArray,this.indexArray,O.verticesFlattened,O.indicesTriangles,this.segments2,this.indexArray2,O.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:S,canonical:b,globalState:this.globalState})}}let I5,M5;zt("FillBucket",Uw,{omit:["layers","patternFeatures"]});var _W={get paint(){return M5=M5||new Hi({"fill-antialias":new Gt($e.paint_fill["fill-antialias"]),"fill-opacity":new ir($e.paint_fill["fill-opacity"]),"fill-color":new ir($e.paint_fill["fill-color"]),"fill-outline-color":new ir($e.paint_fill["fill-outline-color"]),"fill-translate":new Gt($e.paint_fill["fill-translate"]),"fill-translate-anchor":new Gt($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new kd($e.paint_fill["fill-pattern"])})},get layout(){return I5=I5||new Hi({"fill-sort-key":new ir($e.layout_fill["fill-sort-key"])})}};class bW extends So{constructor(a){super(a,_W)}recalculate(a,u){super.recalculate(a,u);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Uw(a)}queryRadius(){return a0(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:a,geometry:u,transform:f,pixelsToTileUnits:b}){return c5(l0(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,b),u)}isTileClipped(){return!0}}const vW=Un([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xW=Un([{name:"a_centroid",components:2,type:"Int16"}],4),{members:wW}=vW;class Ud{constructor(a,u,f,b,S){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=a,this._geometry=-1,this._keys=b,this._values=S,a.readFields(EW,this,u)}loadGeometry(){const a=this._pbf;a.pos=this._geometry;const u=a.readVarint()+a.pos,f=[];let b,S=1,C=0,I=0,O=0;for(;a.pos<u;){if(C<=0){const F=a.readVarint();S=7&F,C=F>>3}if(C--,S===1||S===2)I+=a.readSVarint(),O+=a.readSVarint(),S===1&&(b&&f.push(b),b=[]),b&&b.push(new p(I,O));else{if(S!==7)throw new Error(`unknown command ${S}`);b&&b.push(b[0].clone())}}return b&&f.push(b),f}bbox(){const a=this._pbf;a.pos=this._geometry;const u=a.readVarint()+a.pos;let f=1,b=0,S=0,C=0,I=1/0,O=-1/0,F=1/0,B=-1/0;for(;a.pos<u;){if(b<=0){const G=a.readVarint();f=7&G,b=G>>3}if(b--,f===1||f===2)S+=a.readSVarint(),C+=a.readSVarint(),S<I&&(I=S),S>O&&(O=S),C<F&&(F=C),C>B&&(B=C);else if(f!==7)throw new Error(`unknown command ${f}`)}return[I,F,O,B]}toGeoJSON(a,u,f){const b=this.extent*Math.pow(2,f),S=this.extent*a,C=this.extent*u,I=this.loadGeometry();function O(Q){return[360*(Q.x+S)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(Q.y+C)/b)*Math.PI))-90]}function F(Q){return Q.map(O)}let B;if(this.type===1){const Q=[];for(const se of I)Q.push(se[0]);const ie=F(Q);B=Q.length===1?{type:"Point",coordinates:ie[0]}:{type:"MultiPoint",coordinates:ie}}else if(this.type===2){const Q=I.map(F);B=Q.length===1?{type:"LineString",coordinates:Q[0]}:{type:"MultiLineString",coordinates:Q}}else{if(this.type!==3)throw new Error("unknown feature type");{const Q=function(se){const ce=se.length;if(ce<=1)return[se];const fe=[];let we,Ue;for(let Oe=0;Oe<ce;Oe++){const Ne=TW(se[Oe]);Ne!==0&&(Ue===void 0&&(Ue=Ne<0),Ue===Ne<0?(we&&fe.push(we),we=[se[Oe]]):we&&we.push(se[Oe]))}return we&&fe.push(we),fe}(I),ie=[];for(const se of Q)ie.push(se.map(F));B=ie.length===1?{type:"Polygon",coordinates:ie[0]}:{type:"MultiPolygon",coordinates:ie}}}const G={type:"Feature",geometry:B,properties:this.properties};return this.id!=null&&(G.id=this.id),G}}function EW(h,a,u){h===1?a.id=u.readVarint():h===2?function(f,b){const S=f.readVarint()+f.pos;for(;f.pos<S;){const C=b._keys[f.readVarint()],I=b._values[f.readVarint()];b.properties[C]=I}}(u,a):h===3?a.type=u.readVarint():h===4&&(a._geometry=u.pos)}function TW(h){let a=0;for(let u,f,b=0,S=h.length,C=S-1;b<S;C=b++)u=h[b],f=h[C],a+=(f.x-u.x)*(u.y+f.y);return a}Ud.types=["Unknown","Point","LineString","Polygon"];class O5{constructor(a,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(SW,this,u),this.length=this._features.length}feature(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];const u=this._pbf.readVarint()+this._pbf.pos;return new Ud(this._pbf,u,this.extent,this._keys,this._values)}}function SW(h,a,u){h===15?a.version=u.readVarint():h===1?a.name=u.readString():h===5?a.extent=u.readVarint():h===2?a._features.push(u.pos):h===3?a._keys.push(u.readString()):h===4&&a._values.push(function(f){let b=null;const S=f.readVarint()+f.pos;for(;f.pos<S;){const C=f.readVarint()>>3;b=C===1?f.readString():C===2?f.readFloat():C===3?f.readDouble():C===4?f.readVarint64():C===5?f.readVarint():C===6?f.readSVarint():C===7?f.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b}(u))}class k5{constructor(a,u){this.layers=a.readFields(CW,{},u)}}function CW(h,a,u){if(h===3){const f=new O5(u,u.readVarint()+u.pos);f.length&&(a[f.name]=f)}}const Gw=Math.pow(2,13);function zm(h,a,u,f,b,S,C,I){h.emplaceBack(a,u,2*Math.floor(f*Gw)+C,b*Gw*2,S*Gw*2,Math.round(I))}class Hw{constructor(a){this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ye,this.centroidVertexArray=new Ae,this.indexArray=new dn,this.programConfigurations=new go(a.layers,a.zoom),this.segments=new vr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,f){this.features=[],this.hasPattern=Bw("fill-extrusion",this.layers,u);for(const{feature:b,id:S,index:C,sourceLayerIndex:I}of a){const O=this.layers[0]._featureFilter.needGeometry,F=zs(b,O);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom,{globalState:this.globalState}),F,f))continue;const B={id:S,sourceLayerIndex:I,index:C,geometry:O?F.geometry:ga(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(qw("fill-extrusion",this.layers,B,this.zoom,u)):this.addFeature(B,B.geometry,C,f,{},u.subdivisionGranularity),u.featureIndex.insert(b,B.geometry,C,I,this.index,!0)}}addFeatures(a,u,f){for(const b of this.features){const{geometry:S}=b;this.addFeature(b,S,b.index,u,f,a.subdivisionGranularity)}}update(a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,{imagePositions:f,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,wW),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,xW.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,u,f,b,S,C){for(const I of bu(u,500)){const O={x:0,y:0,sampleCount:0},F=this.layoutVertexArray.length;this.processPolygon(O,b,a,I,C);const B=this.layoutVertexArray.length-F,G=Math.floor(O.x/O.sampleCount),Q=Math.floor(O.y/O.sampleCount);for(let ie=0;ie<B;ie++)this.centroidVertexArray.emplaceBack(G,Q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:S,canonical:b,globalState:this.globalState})}processPolygon(a,u,f,b,S){if(b.length<1||L5(b[0]))return;for(const G of b)G.length!==0&&PW(a,G);const C={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},I=S.fill.getGranularityForZoomLevel(u.z),O=Ud.types[f.type]==="Polygon";for(const G of b){if(G.length===0||L5(G))continue;const Q=Nu(G,I,O);this._generateSideFaces(Q,C)}if(!O)return;const F=A5(b,u,I,!1),B=this.layoutVertexArray;R5((G,Q)=>{zm(B,G,Q,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles)}_generateSideFaces(a,u){let f=0;for(let b=1;b<a.length;b++){const S=a[b],C=a[b-1];if(AW(S,C))continue;u.segment.vertexLength+4>vr.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const I=S.sub(C)._perp()._unit(),O=C.dist(S);f+O>32768&&(f=0),zm(this.layoutVertexArray,S.x,S.y,I.x,I.y,0,0,f),zm(this.layoutVertexArray,S.x,S.y,I.x,I.y,0,1,f),f+=O,zm(this.layoutVertexArray,C.x,C.y,I.x,I.y,0,0,f),zm(this.layoutVertexArray,C.x,C.y,I.x,I.y,0,1,f);const F=u.segment.vertexLength;this.indexArray.emplaceBack(F,F+2,F+1),this.indexArray.emplaceBack(F+1,F+2,F+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function PW(h,a){for(let u=0;u<a.length;u++){const f=a[u];u===a.length-1&&a[0].x===f.x&&a[0].y===f.y||(h.x+=f.x,h.y+=f.y,h.sampleCount++)}}function AW(h,a){return h.x===a.x&&(h.x<0||h.x>Ke)||h.y===a.y&&(h.y<0||h.y>Ke)}function L5(h){return h.every(a=>a.x<0)||h.every(a=>a.x>Ke)||h.every(a=>a.y<0)||h.every(a=>a.y>Ke)}let D5;zt("FillExtrusionBucket",Hw,{omit:["layers","features"]});var RW={get paint(){return D5=D5||new Hi({"fill-extrusion-opacity":new Gt($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ir($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Gt($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Gt($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kd($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ir($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ir($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Gt($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class IW extends So{constructor(a){super(a,RW)}createBucket(a){return new Hw(a)}queryRadius(){return a0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:a,feature:u,featureState:f,geometry:b,transform:S,pixelsToTileUnits:C,pixelPosMatrix:I}){const O=l0(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,C),F=this.paint.get("fill-extrusion-height").evaluate(u,f),B=this.paint.get("fill-extrusion-base").evaluate(u,f),G=function(ie,se){const ce=[];for(const fe of ie){const we=[fe.x,fe.y,0,1];ee(we,we,se),ce.push(new p(we[0]/we[3],we[1]/we[3]))}return ce}(O,I),Q=function(ie,se,ce,fe){const we=[],Ue=[],Oe=fe[8]*se,Ne=fe[9]*se,Qe=fe[10]*se,at=fe[11]*se,gt=fe[8]*ce,Mt=fe[9]*ce,wt=fe[10]*ce,Rt=fe[11]*ce;for(const Zt of ie){const At=[],It=[];for(const ht of Zt){const sr=ht.x,dr=ht.y,Qt=fe[0]*sr+fe[4]*dr+fe[12],Ut=fe[1]*sr+fe[5]*dr+fe[13],Br=fe[2]*sr+fe[6]*dr+fe[14],Nn=fe[3]*sr+fe[7]*dr+fe[15],li=Br+Qe,Bi=Nn+at,Jo=Qt+gt,_o=Ut+Mt,Pi=Br+wt,On=Nn+Rt,yi=new p((Qt+Oe)/Bi,(Ut+Ne)/Bi);yi.z=li/Bi,At.push(yi);const Ai=new p(Jo/On,_o/On);Ai.z=Pi/On,It.push(Ai)}we.push(At),Ue.push(It)}return[we,Ue]}(b,B,F,I);return function(ie,se,ce){let fe=1/0;c5(ce,se)&&(fe=N5(ce,se[0]));for(let we=0;we<se.length;we++){const Ue=se[we],Oe=ie[we];for(let Ne=0;Ne<Ue.length-1;Ne++){const Qe=Ue[Ne],at=[Qe,Ue[Ne+1],Oe[Ne+1],Oe[Ne],Qe];l5(ce,at)&&(fe=Math.min(fe,N5(ce,at)))}}return fe!==1/0&&fe}(Q[0],Q[1],G)}}function jm(h,a){return h.x*a.x+h.y*a.y}function N5(h,a){if(h.length===1){let u=0;const f=a[u++];let b;for(;!b||f.equals(b);)if(b=a[u++],!b)return 1/0;for(;u<a.length;u++){const S=a[u],C=h[0],I=b.sub(f),O=S.sub(f),F=C.sub(f),B=jm(I,I),G=jm(I,O),Q=jm(O,O),ie=jm(F,I),se=jm(F,O),ce=B*Q-G*G,fe=(Q*ie-G*se)/ce,we=(B*se-G*ie)/ce,Ue=f.z*(1-fe-we)+b.z*fe+S.z*we;if(isFinite(Ue))return Ue}return 1/0}{let u=1/0;for(const f of a)u=Math.min(u,f.z);return u}}const MW=Un([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:OW}=MW,kW=Un([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:LW}=kW,DW=Math.cos(Math.PI/180*37.5),F5=Math.pow(2,14)/.5;class Jw{constructor(a){this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Xe,this.layoutVertexArray2=new ot,this.indexArray=new dn,this.programConfigurations=new go(a.layers,a.zoom),this.segments=new vr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,f){this.hasPattern=Bw("line",this.layers,u);const b=this.layers[0].layout.get("line-sort-key"),S=!b.isConstant(),C=[];for(const{feature:I,id:O,index:F,sourceLayerIndex:B}of a){const G=this.layers[0]._featureFilter.needGeometry,Q=zs(I,G);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom,{globalState:this.globalState}),Q,f))continue;const ie=S?b.evaluate(Q,{},f):void 0,se={id:O,properties:I.properties,type:I.type,sourceLayerIndex:B,index:F,geometry:G?Q.geometry:ga(I),patterns:{},sortKey:ie};C.push(se)}S&&C.sort((I,O)=>I.sortKey-O.sortKey);for(const I of C){const{geometry:O,index:F,sourceLayerIndex:B}=I;if(this.hasPattern){const G=qw("line",this.layers,I,this.zoom,u);this.patternFeatures.push(G)}else this.addFeature(I,O,F,f,{},u.subdivisionGranularity);u.featureIndex.insert(a[F].feature,O,F,B,this.index)}}update(a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,{imagePositions:f,globalState:this.globalState})}addFeatures(a,u,f){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,LW)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,OW),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,u,f,b,S,C){const I=this.layers[0].layout,O=I.get("line-join").evaluate(a,{}),F=I.get("line-cap"),B=I.get("line-miter-limit"),G=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const Q of u)this.addLine(Q,a,O,F,B,G,b,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:S,canonical:b,globalState:this.globalState})}addLine(a,u,f,b,S,C,I,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,a=Nu(a,I?O.line.getGranularityForZoomLevel(I.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Oe=0;Oe<a.length-1;Oe++)this.totalDistance+=a[Oe].dist(a[Oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const F=Ud.types[u.type]==="Polygon";let B=a.length;for(;B>=2&&a[B-1].equals(a[B-2]);)B--;let G=0;for(;G<B-1&&a[G].equals(a[G+1]);)G++;if(B<(F?3:2))return;f==="bevel"&&(S=1.05);const Q=this.overscaling<=16?122880/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let se,ce,fe,we,Ue;this.e1=this.e2=-1,F&&(se=a[B-2],Ue=a[G].sub(se)._unit()._perp());for(let Oe=G;Oe<B;Oe++){if(fe=Oe===B-1?F?a[G+1]:void 0:a[Oe+1],fe&&a[Oe].equals(fe))continue;Ue&&(we=Ue),se&&(ce=se),se=a[Oe],Ue=fe?fe.sub(se)._unit()._perp():we,we=we||Ue;let Ne=we.add(Ue);Ne.x===0&&Ne.y===0||Ne._unit();const Qe=we.x*Ue.x+we.y*Ue.y,at=Ne.x*Ue.x+Ne.y*Ue.y,gt=at!==0?1/at:1/0,Mt=2*Math.sqrt(2-2*at),wt=at<DW&&ce&&fe,Rt=we.x*Ue.y-we.y*Ue.x>0;if(wt&&Oe>G){const It=se.dist(ce);if(It>2*Q){const ht=se.sub(se.sub(ce)._mult(Q/It)._round());this.updateDistance(ce,ht),this.addCurrentVertex(ht,we,0,0,ie),ce=ht}}const Zt=ce&&fe;let At=Zt?f:F?"butt":b;if(Zt&&At==="round"&&(gt<C?At="miter":gt<=2&&(At="fakeround")),At==="miter"&&gt>S&&(At="bevel"),At==="bevel"&&(gt>2&&(At="flipbevel"),gt<S&&(At="miter")),ce&&this.updateDistance(ce,se),At==="miter")Ne._mult(gt),this.addCurrentVertex(se,Ne,0,0,ie);else if(At==="flipbevel"){if(gt>100)Ne=Ue.mult(-1);else{const It=gt*we.add(Ue).mag()/we.sub(Ue).mag();Ne._perp()._mult(It*(Rt?-1:1))}this.addCurrentVertex(se,Ne,0,0,ie),this.addCurrentVertex(se,Ne.mult(-1),0,0,ie)}else if(At==="bevel"||At==="fakeround"){const It=-Math.sqrt(gt*gt-1),ht=Rt?It:0,sr=Rt?0:It;if(ce&&this.addCurrentVertex(se,we,ht,sr,ie),At==="fakeround"){const dr=Math.round(180*Mt/Math.PI/20);for(let Qt=1;Qt<dr;Qt++){let Ut=Qt/dr;if(Ut!==.5){const Nn=Ut-.5;Ut+=Ut*Nn*(Ut-1)*((1.0904+Qe*(Qe*(3.55645-1.43519*Qe)-3.2452))*Nn*Nn+(.848013+Qe*(.215638*Qe-1.06021)))}const Br=Ue.sub(we)._mult(Ut)._add(we)._unit()._mult(Rt?-1:1);this.addHalfVertex(se,Br.x,Br.y,!1,Rt,0,ie)}}fe&&this.addCurrentVertex(se,Ue,-ht,-sr,ie)}else if(At==="butt")this.addCurrentVertex(se,Ne,0,0,ie);else if(At==="square"){const It=ce?1:-1;this.addCurrentVertex(se,Ne,It,It,ie)}else At==="round"&&(ce&&(this.addCurrentVertex(se,we,0,0,ie),this.addCurrentVertex(se,we,1,1,ie,!0)),fe&&(this.addCurrentVertex(se,Ue,-1,-1,ie,!0),this.addCurrentVertex(se,Ue,0,0,ie)));if(wt&&Oe<B-1){const It=se.dist(fe);if(It>2*Q){const ht=se.add(fe.sub(se)._mult(Q/It)._round());this.updateDistance(se,ht),this.addCurrentVertex(ht,Ue,0,0,ie),se=ht}}}}addCurrentVertex(a,u,f,b,S,C=!1){const I=u.y*b-u.x,O=-u.y-u.x*b;this.addHalfVertex(a,u.x+u.y*f,u.y-u.x*f,C,!1,f,S),this.addHalfVertex(a,I,O,C,!0,-b,S),this.distance>F5/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,u,f,b,S,C))}addHalfVertex({x:a,y:u},f,b,S,C,I,O){const F=.5*(this.lineClips?this.scaledDistance*(F5-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(S?1:0),(u<<1)+(C?1:0),Math.round(63*f)+128,Math.round(63*b)+128,1+(I===0?0:I<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,B,this.e2),O.primitiveLength++),C?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,u){this.distance+=a.dist(u),this.updateScaledDistance()}}let z5,j5;zt("LineBucket",Jw,{omit:["layers","patternFeatures"]});var B5={get paint(){return j5=j5||new Hi({"line-opacity":new ir($e.paint_line["line-opacity"]),"line-color":new ir($e.paint_line["line-color"]),"line-translate":new Gt($e.paint_line["line-translate"]),"line-translate-anchor":new Gt($e.paint_line["line-translate-anchor"]),"line-width":new ir($e.paint_line["line-width"]),"line-gap-width":new ir($e.paint_line["line-gap-width"]),"line-offset":new ir($e.paint_line["line-offset"]),"line-blur":new ir($e.paint_line["line-blur"]),"line-dasharray":new ha($e.paint_line["line-dasharray"]),"line-pattern":new kd($e.paint_line["line-pattern"]),"line-gradient":new Ld($e.paint_line["line-gradient"])})},get layout(){return z5=z5||new Hi({"line-cap":new Gt($e.layout_line["line-cap"]),"line-join":new ir($e.layout_line["line-join"]),"line-miter-limit":new Gt($e.layout_line["line-miter-limit"]),"line-round-limit":new Gt($e.layout_line["line-round-limit"]),"line-sort-key":new ir($e.layout_line["line-sort-key"])})}};class NW extends ir{possiblyEvaluate(a,u){return u=new yn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(a,u)}evaluate(a,u,f,b){return u=Wt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(a,u,f,b)}}let d0;class FW extends So{constructor(a){super(a,B5),this.gradientVersion=0,d0||(d0=new NW(B5.paint.properties["line-width"].specification),d0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Vn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,u){super.recalculate(a,u),this.paint._values["line-floorwidth"]=d0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Jw(a)}queryRadius(a){const u=a,f=q5(Im("line-width",this,u),Im("line-gap-width",this,u)),b=Im("line-offset",this,u);return f/2+Math.abs(b)+a0(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:a,feature:u,featureState:f,geometry:b,transform:S,pixelsToTileUnits:C}){const I=l0(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,C),O=C/2*q5(this.paint.get("line-width").evaluate(u,f),this.paint.get("line-gap-width").evaluate(u,f)),F=this.paint.get("line-offset").evaluate(u,f);return F&&(b=function(B,G){const Q=[];for(let ie=0;ie<B.length;ie++){const se=B[ie],ce=[];for(let fe=0;fe<se.length;fe++){const we=se[fe-1],Ue=se[fe],Oe=se[fe+1],Ne=fe===0?new p(0,0):Ue.sub(we)._unit()._perp(),Qe=fe===se.length-1?new p(0,0):Oe.sub(Ue)._unit()._perp(),at=Ne._add(Qe)._unit(),gt=at.x*Qe.x+at.y*Qe.y;gt!==0&&at._mult(1/gt),ce.push(at._mult(G)._add(Ue))}Q.push(ce)}return Q}(b,F*C)),function(B,G,Q){for(let ie=0;ie<G.length;ie++){const se=G[ie];if(B.length>=3){for(let ce=0;ce<se.length;ce++)if(Bd(B,se[ce]))return!0}if(WJ(B,se,Q))return!0}return!1}(I,b,O)}isTileClipped(){return!0}}function q5(h,a){return a>0?a+2*h:h}const zW=Un([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jW=Un([{name:"a_projected_pos",components:3,type:"Float32"}],4);Un([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const BW=Un([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Un([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const $5=Un([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qW=Un([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $W(h,a,u){return h.sections.forEach(f=>{f.text=function(b,S,C){const I=S.layout.get("text-transform").evaluate(C,{});return I==="uppercase"?b=b.toLocaleUpperCase():I==="lowercase"&&(b=b.toLocaleLowerCase()),$o.applyArabicShaping&&(b=$o.applyArabicShaping(b)),b}(f.text,a,u)}),h}Un([{name:"triangle",components:3,type:"Uint16"}]),Un([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Un([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Un([{type:"Float32",name:"offsetX"}]),Un([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Un([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Bm={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gi=24;const Ww=4294967296,V5=1/Ww,U5=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Zw{constructor(a=new Uint8Array(16)){this.buf=ArrayBuffer.isView(a)?a:new Uint8Array(a),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(a,u,f=this.length){for(;this.pos<f;){const b=this.readVarint(),S=b>>3,C=this.pos;this.type=7&b,a(S,u,this),this.pos===C&&this.skip(b)}return u}readMessage(a,u){return this.readFields(a,u,this.readVarint()+this.pos)}readFixed32(){const a=this.dataView.getUint32(this.pos,!0);return this.pos+=4,a}readSFixed32(){const a=this.dataView.getInt32(this.pos,!0);return this.pos+=4,a}readFixed64(){const a=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Ww;return this.pos+=8,a}readSFixed64(){const a=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Ww;return this.pos+=8,a}readFloat(){const a=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,a}readDouble(){const a=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,a}readVarint(a){const u=this.buf;let f,b;return b=u[this.pos++],f=127&b,b<128?f:(b=u[this.pos++],f|=(127&b)<<7,b<128?f:(b=u[this.pos++],f|=(127&b)<<14,b<128?f:(b=u[this.pos++],f|=(127&b)<<21,b<128?f:(b=u[this.pos],f|=(15&b)<<28,function(S,C,I){const O=I.buf;let F,B;if(B=O[I.pos++],F=(112&B)>>4,B<128||(B=O[I.pos++],F|=(127&B)<<3,B<128)||(B=O[I.pos++],F|=(127&B)<<10,B<128)||(B=O[I.pos++],F|=(127&B)<<17,B<128)||(B=O[I.pos++],F|=(127&B)<<24,B<128)||(B=O[I.pos++],F|=(1&B)<<31,B<128))return Gd(S,F,C);throw new Error("Expected varint not more than 10 bytes")}(f,a,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const a=this.readVarint();return a%2==1?(a+1)/-2:a/2}readBoolean(){return!!this.readVarint()}readString(){const a=this.readVarint()+this.pos,u=this.pos;return this.pos=a,a-u>=12&&U5?U5.decode(this.buf.subarray(u,a)):function(f,b,S){let C="",I=b;for(;I<S;){const O=f[I];let F,B,G,Q=null,ie=O>239?4:O>223?3:O>191?2:1;if(I+ie>S)break;ie===1?O<128&&(Q=O):ie===2?(F=f[I+1],(192&F)==128&&(Q=(31&O)<<6|63&F,Q<=127&&(Q=null))):ie===3?(F=f[I+1],B=f[I+2],(192&F)==128&&(192&B)==128&&(Q=(15&O)<<12|(63&F)<<6|63&B,(Q<=2047||Q>=55296&&Q<=57343)&&(Q=null))):ie===4&&(F=f[I+1],B=f[I+2],G=f[I+3],(192&F)==128&&(192&B)==128&&(192&G)==128&&(Q=(15&O)<<18|(63&F)<<12|(63&B)<<6|63&G,(Q<=65535||Q>=1114112)&&(Q=null))),Q===null?(Q=65533,ie=1):Q>65535&&(Q-=65536,C+=String.fromCharCode(Q>>>10&1023|55296),Q=56320|1023&Q),C+=String.fromCharCode(Q),I+=ie}return C}(this.buf,u,a)}readBytes(){const a=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,a);return this.pos=a,u}readPackedVarint(a=[],u){const f=this.readPackedEnd();for(;this.pos<f;)a.push(this.readVarint(u));return a}readPackedSVarint(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readSVarint());return a}readPackedBoolean(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readBoolean());return a}readPackedFloat(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readFloat());return a}readPackedDouble(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readDouble());return a}readPackedFixed32(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readFixed32());return a}readPackedSFixed32(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readSFixed32());return a}readPackedFixed64(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readFixed64());return a}readPackedSFixed64(a=[]){const u=this.readPackedEnd();for(;this.pos<u;)a.push(this.readSFixed64());return a}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(a){const u=7&a;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(a,u){this.writeVarint(a<<3|u)}realloc(a){let u=this.length||16;for(;u<this.pos+a;)u*=2;if(u!==this.length){const f=new Uint8Array(u);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(a){this.realloc(4),this.dataView.setInt32(this.pos,a,!0),this.pos+=4}writeSFixed32(a){this.realloc(4),this.dataView.setInt32(this.pos,a,!0),this.pos+=4}writeFixed64(a){this.realloc(8),this.dataView.setInt32(this.pos,-1&a,!0),this.dataView.setInt32(this.pos+4,Math.floor(a*V5),!0),this.pos+=8}writeSFixed64(a){this.realloc(8),this.dataView.setInt32(this.pos,-1&a,!0),this.dataView.setInt32(this.pos+4,Math.floor(a*V5),!0),this.pos+=8}writeVarint(a){(a=+a||0)>268435455||a<0?function(u,f){let b,S;if(u>=0?(b=u%4294967296|0,S=u/4294967296|0):(b=~(-u%4294967296),S=~(-u/4294967296),4294967295^b?b=b+1|0:(b=0,S=S+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(C,I,O){O.buf[O.pos++]=127&C|128,C>>>=7,O.buf[O.pos++]=127&C|128,C>>>=7,O.buf[O.pos++]=127&C|128,C>>>=7,O.buf[O.pos++]=127&C|128,O.buf[O.pos]=127&(C>>>=7)}(b,0,f),function(C,I){const O=(7&C)<<4;I.buf[I.pos++]|=O|((C>>>=3)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C)))))}(S,f)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))}writeSVarint(a){this.writeVarint(a<0?2*-a-1:2*a)}writeBoolean(a){this.writeVarint(+a)}writeString(a){a=String(a),this.realloc(4*a.length),this.pos++;const u=this.pos;this.pos=function(b,S,C){for(let I,O,F=0;F<S.length;F++){if(I=S.charCodeAt(F),I>55295&&I<57344){if(!O){I>56319||F+1===S.length?(b[C++]=239,b[C++]=191,b[C++]=189):O=I;continue}if(I<56320){b[C++]=239,b[C++]=191,b[C++]=189,O=I;continue}I=O-55296<<10|I-56320|65536,O=null}else O&&(b[C++]=239,b[C++]=191,b[C++]=189,O=null);I<128?b[C++]=I:(I<2048?b[C++]=I>>6|192:(I<65536?b[C++]=I>>12|224:(b[C++]=I>>18|240,b[C++]=I>>12&63|128),b[C++]=I>>6&63|128),b[C++]=63&I|128)}return C}(this.buf,a,this.pos);const f=this.pos-u;f>=128&&G5(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f}writeFloat(a){this.realloc(4),this.dataView.setFloat32(this.pos,a,!0),this.pos+=4}writeDouble(a){this.realloc(8),this.dataView.setFloat64(this.pos,a,!0),this.pos+=8}writeBytes(a){const u=a.length;this.writeVarint(u),this.realloc(u);for(let f=0;f<u;f++)this.buf[this.pos++]=a[f]}writeRawMessage(a,u){this.pos++;const f=this.pos;a(u,this);const b=this.pos-f;b>=128&&G5(f,b,this),this.pos=f-1,this.writeVarint(b),this.pos+=b}writeMessage(a,u,f){this.writeTag(a,2),this.writeRawMessage(u,f)}writePackedVarint(a,u){u.length&&this.writeMessage(a,VW,u)}writePackedSVarint(a,u){u.length&&this.writeMessage(a,UW,u)}writePackedBoolean(a,u){u.length&&this.writeMessage(a,JW,u)}writePackedFloat(a,u){u.length&&this.writeMessage(a,GW,u)}writePackedDouble(a,u){u.length&&this.writeMessage(a,HW,u)}writePackedFixed32(a,u){u.length&&this.writeMessage(a,WW,u)}writePackedSFixed32(a,u){u.length&&this.writeMessage(a,ZW,u)}writePackedFixed64(a,u){u.length&&this.writeMessage(a,KW,u)}writePackedSFixed64(a,u){u.length&&this.writeMessage(a,YW,u)}writeBytesField(a,u){this.writeTag(a,2),this.writeBytes(u)}writeFixed32Field(a,u){this.writeTag(a,5),this.writeFixed32(u)}writeSFixed32Field(a,u){this.writeTag(a,5),this.writeSFixed32(u)}writeFixed64Field(a,u){this.writeTag(a,1),this.writeFixed64(u)}writeSFixed64Field(a,u){this.writeTag(a,1),this.writeSFixed64(u)}writeVarintField(a,u){this.writeTag(a,0),this.writeVarint(u)}writeSVarintField(a,u){this.writeTag(a,0),this.writeSVarint(u)}writeStringField(a,u){this.writeTag(a,2),this.writeString(u)}writeFloatField(a,u){this.writeTag(a,5),this.writeFloat(u)}writeDoubleField(a,u){this.writeTag(a,1),this.writeDouble(u)}writeBooleanField(a,u){this.writeVarintField(a,+u)}}function Gd(h,a,u){return u?4294967296*a+(h>>>0):4294967296*(a>>>0)+(h>>>0)}function G5(h,a,u){const f=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));u.realloc(f);for(let b=u.pos-1;b>=h;b--)u.buf[b+f]=u.buf[b]}function VW(h,a){for(let u=0;u<h.length;u++)a.writeVarint(h[u])}function UW(h,a){for(let u=0;u<h.length;u++)a.writeSVarint(h[u])}function GW(h,a){for(let u=0;u<h.length;u++)a.writeFloat(h[u])}function HW(h,a){for(let u=0;u<h.length;u++)a.writeDouble(h[u])}function JW(h,a){for(let u=0;u<h.length;u++)a.writeBoolean(h[u])}function WW(h,a){for(let u=0;u<h.length;u++)a.writeFixed32(h[u])}function ZW(h,a){for(let u=0;u<h.length;u++)a.writeSFixed32(h[u])}function KW(h,a){for(let u=0;u<h.length;u++)a.writeFixed64(h[u])}function YW(h,a){for(let u=0;u<h.length;u++)a.writeSFixed64(h[u])}function XW(h,a,u){h===1&&u.readMessage(QW,a)}function QW(h,a,u){if(h===3){const{id:f,bitmap:b,width:S,height:C,left:I,top:O,advance:F}=u.readMessage(eZ,{});a.push({id:f,bitmap:new Mm({width:S+6,height:C+6},b),metrics:{width:S,height:C,left:I,top:O,advance:F}})}}function eZ(h,a,u){h===1?a.id=u.readVarint():h===2?a.bitmap=u.readBytes():h===3?a.width=u.readVarint():h===4?a.height=u.readVarint():h===5?a.left=u.readSVarint():h===6?a.top=u.readSVarint():h===7&&(a.advance=u.readVarint())}function H5(h){let a=0,u=0;for(const C of h)a+=C.w*C.h,u=Math.max(u,C.w);h.sort((C,I)=>I.h-C.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),u),h:1/0}];let b=0,S=0;for(const C of h)for(let I=f.length-1;I>=0;I--){const O=f[I];if(!(C.w>O.w||C.h>O.h)){if(C.x=O.x,C.y=O.y,S=Math.max(S,C.y+C.h),b=Math.max(b,C.x+C.w),C.w===O.w&&C.h===O.h){const F=f.pop();F&&I<f.length&&(f[I]=F)}else C.h===O.h?(O.x+=C.w,O.w-=C.w):C.w===O.w?(O.y+=C.h,O.h-=C.h):(f.push({x:O.x+C.w,y:O.y,w:O.w-C.w,h:C.h}),O.y+=C.h,O.h-=C.h);break}}return{w:b,h:S,fill:a/(b*S)||0}}class Kw{constructor(a,{pixelRatio:u,version:f,stretchX:b,stretchY:S,content:C,textFitWidth:I,textFitHeight:O}){this.paddedRect=a,this.pixelRatio=u,this.stretchX=b,this.stretchY=S,this.content=C,this.version=f,this.textFitWidth=I,this.textFitHeight=O}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class J5{constructor(a,u){const f={},b={};this.haveRenderCallbacks=[];const S=[];this.addImages(a,f,S),this.addImages(u,b,S);const{w:C,h:I}=H5(S),O=new yo({width:C||1,height:I||1});for(const F in a){const B=a[F],G=f[F].paddedRect;yo.copy(B.data,O,{x:0,y:0},{x:G.x+1,y:G.y+1},B.data)}for(const F in u){const B=u[F],G=b[F].paddedRect,Q=G.x+1,ie=G.y+1,se=B.data.width,ce=B.data.height;yo.copy(B.data,O,{x:0,y:0},{x:Q,y:ie},B.data),yo.copy(B.data,O,{x:0,y:ce-1},{x:Q,y:ie-1},{width:se,height:1}),yo.copy(B.data,O,{x:0,y:0},{x:Q,y:ie+ce},{width:se,height:1}),yo.copy(B.data,O,{x:se-1,y:0},{x:Q-1,y:ie},{width:1,height:ce}),yo.copy(B.data,O,{x:0,y:0},{x:Q+se,y:ie},{width:1,height:ce})}this.image=O,this.iconPositions=f,this.patternPositions=b}addImages(a,u,f){for(const b in a){const S=a[b],C={x:0,y:0,w:S.data.width+2,h:S.data.height+2};f.push(C),u[b]=new Kw(C,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(a,u){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in a.updatedImages)this.patchUpdatedImage(this.iconPositions[f],a.getImage(f),u),this.patchUpdatedImage(this.patternPositions[f],a.getImage(f),u)}patchUpdatedImage(a,u,f){if(!a||!u||a.version===u.version)return;a.version=u.version;const[b,S]=a.tl;f.update(u.data,void 0,{x:b,y:S})}}var uc;zt("ImagePosition",Kw),zt("ImageAtlas",J5),c.ao=void 0,(uc=c.ao||(c.ao={}))[uc.none=0]="none",uc[uc.horizontal=1]="horizontal",uc[uc.vertical=2]="vertical",uc[uc.horizontalOnly=3]="horizontalOnly";class qm{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(a,u,f){const b=new qm;return b.scale=a||1,b.fontStack=u,b.verticalAlign=f||"bottom",b}static forImage(a,u){const f=new qm;return f.imageName=a,f.verticalAlign=u||"bottom",f}}class Hd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,u){const f=new Hd;for(let b=0;b<a.sections.length;b++){const S=a.sections[b];S.image?f.addImageSection(S):f.addTextSection(S,u)}return f}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let u="";for(let f=0;f<a.length;f++){const b=a.charCodeAt(f+1)||null,S=a.charCodeAt(f-1)||null;u+=b&&X_(b)&&!Bm[a[f+1]]||S&&X_(S)&&!Bm[a[f-1]]||!Bm[a[f]]?a[f]:Bm[a[f]]}return u}(this.text)}trim(){let a=0;for(let f=0;f<this.text.length&&f0[this.text.charCodeAt(f)];f++)a++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=a&&f0[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(a,u),this.sectionIndex=this.sectionIndex.slice(a,u)}substring(a,u){const f=new Hd;return f.text=this.text.substring(a,u),f.sectionIndex=this.sectionIndex.slice(a,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,u)=>Math.max(a,this.sections[u].scale),0)}getMaxImageSize(a){let u=0,f=0;for(let b=0;b<this.length();b++){const S=this.getSection(b);if(S.imageName){const C=a[S.imageName];if(!C)continue;const I=C.displaySize;u=Math.max(u,I[0]),f=Math.max(f,I[1])}}return{maxImageWidth:u,maxImageHeight:f}}addTextSection(a,u){this.text+=a.text,this.sections.push(qm.forText(a.scale,a.fontStack||u,a.verticalAlign));const f=this.sections.length-1;for(let b=0;b<a.text.length;++b)this.sectionIndex.push(f)}addImageSection(a){const u=a.image?a.image.name:"";if(u.length===0)return void Tt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(qm.forImage(u,a.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Tt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function p0(h,a,u,f,b,S,C,I,O,F,B,G,Q,ie,se){const ce=Hd.fromFeature(h,b);let fe;G===c.ao.vertical&&ce.verticalizePunctuation();const{processBidirectionalText:we,processStyledBidirectionalText:Ue}=$o;if(we&&ce.sections.length===1){fe=[];const Qe=we(ce.toString(),Yw(ce,F,S,a,f,ie));for(const at of Qe){const gt=new Hd;gt.text=at,gt.sections=ce.sections;for(let Mt=0;Mt<at.length;Mt++)gt.sectionIndex.push(0);fe.push(gt)}}else if(Ue){fe=[];const Qe=Ue(ce.text,ce.sectionIndex,Yw(ce,F,S,a,f,ie));for(const at of Qe){const gt=new Hd;gt.text=at[0],gt.sectionIndex=at[1],gt.sections=ce.sections,fe.push(gt)}}else fe=function(Qe,at){const gt=[],Mt=Qe.text;let wt=0;for(const Rt of at)gt.push(Qe.substring(wt,Rt)),wt=Rt;return wt<Mt.length&&gt.push(Qe.substring(wt,Mt.length)),gt}(ce,Yw(ce,F,S,a,f,ie));const Oe=[],Ne={positionedLines:Oe,text:ce.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function(Qe,at,gt,Mt,wt,Rt,Zt,At,It,ht,sr,dr){let Qt=0,Ut=0,Br=0,Nn=0;const li=At==="right"?1:At==="left"?0:.5,Bi=gi/dr;let Jo=0;for(const On of wt){On.trim();const yi=On.getMaxScale(),Ai={positionedGlyphs:[],lineOffset:0};Qe.positionedLines[Jo]=Ai;const Ri=Ai.positionedGlyphs;let oo=0;if(!On.length()){Ut+=Rt,++Jo;continue}const Wo=iZ(Mt,On,Bi);for(let bo=0;bo<On.length();bo++){const ci=On.getSection(bo),bi=On.getSectionIndex(bo),vi=On.getCharCode(bo),ei=oZ(It,sr,vi);let Cn;if(ci.imageName){if(Qe.iconsInText=!0,ci.scale=ci.scale*Bi,Cn=aZ(ci,ei,yi,Wo,Mt),!Cn)continue;oo=Math.max(oo,Cn.imageOffset)}else if(Cn=sZ(ci,vi,ei,Wo,at,gt),!Cn)continue;const{rect:js,metrics:Kd,baselineOffset:Bs}=Cn;Ri.push({glyph:vi,imageName:ci.imageName,x:Qt,y:Ut+Bs+-17,vertical:ei,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:bi,metrics:Kd,rect:js}),ei?(Qe.verticalizable=!0,Qt+=(ci.imageName?Kd.advance:gi)*ci.scale+ht):Qt+=Kd.advance*ci.scale+ht}Ri.length!==0&&(Br=Math.max(Qt-ht,Br),lZ(Ri,0,Ri.length-1,li)),Qt=0,Ai.lineOffset=Math.max(oo,(yi-1)*gi);const _i=Rt*yi+oo;Ut+=_i,Nn=Math.max(_i,Nn),++Jo}const{horizontalAlign:_o,verticalAlign:Pi}=Xw(Zt);(function(On,yi,Ai,Ri,oo,Wo,_i,bo,ci){const bi=(yi-Ai)*oo;let vi=0;vi=Wo!==_i?-bo*Ri- -17:-Ri*ci*_i+.5*_i;for(const ei of On)for(const Cn of ei.positionedGlyphs)Cn.x+=bi,Cn.y+=vi})(Qe.positionedLines,li,_o,Pi,Br,Nn,Rt,Ut,wt.length),Qe.top+=-Pi*Ut,Qe.bottom=Qe.top+Ut,Qe.left+=-_o*Br,Qe.right=Qe.left+Br}(Ne,a,u,f,fe,C,I,O,G,F,Q,se),!function(Qe){for(const at of Qe)if(at.positionedGlyphs.length!==0)return!1;return!0}(Oe)&&Ne}const f0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tZ={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},rZ={40:!0};function W5(h,a,u,f,b,S){if(a.imageName){const C=f[a.imageName];return C?C.displaySize[0]*a.scale*gi/S+b:0}{const C=u[a.fontStack],I=C&&C[h];return I?I.metrics.advance*a.scale+b:0}}function Z5(h,a,u,f){const b=Math.pow(h-a,2);return f?h<a?b/2:2*b:b+Math.abs(u)*u}function nZ(h,a,u){let f=0;return h===10&&(f-=1e4),u&&(f+=150),h!==40&&h!==65288||(f+=50),a!==41&&a!==65289||(f+=50),f}function K5(h,a,u,f,b,S){let C=null,I=Z5(a,u,b,S);for(const O of f){const F=Z5(a-O.x,u,b,S)+O.badness;F<=I&&(C=O,I=F)}return{index:h,x:a,priorBreak:C,badness:I}}function Y5(h){return h?Y5(h.priorBreak).concat(h.index):[]}function Yw(h,a,u,f,b,S){if(!h)return[];const C=[],I=function(G,Q,ie,se,ce,fe){let we=0;for(let Ue=0;Ue<G.length();Ue++){const Oe=G.getSection(Ue);we+=W5(G.getCharCode(Ue),Oe,se,ce,Q,fe)}return we/Math.max(1,Math.ceil(we/ie))}(h,a,u,f,b,S),O=h.text.indexOf("")>=0;let F=0;for(let G=0;G<h.length();G++){const Q=h.getSection(G),ie=h.getCharCode(G);if(f0[ie]||(F+=W5(ie,Q,f,b,a,S)),G<h.length()-1){const se=!((B=ie)<11904)&&(!!jr["CJK Compatibility Forms"](B)||!!jr["CJK Compatibility"](B)||!!jr["CJK Strokes"](B)||!!jr["CJK Symbols and Punctuation"](B)||!!jr["Enclosed CJK Letters and Months"](B)||!!jr["Halfwidth and Fullwidth Forms"](B)||!!jr["Ideographic Description Characters"](B)||!!jr["Vertical Forms"](B)||bm.test(String.fromCodePoint(B)));(tZ[ie]||se||Q.imageName||G!==h.length()-2&&rZ[h.getCharCode(G+1)])&&C.push(K5(G+1,F,I,C,nZ(ie,h.getCharCode(G+1),se&&O),!1))}}var B;return Y5(K5(h.length(),F,I,C,0,!0))}function Xw(h){let a=.5,u=.5;switch(h){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:a,verticalAlign:u}}function iZ(h,a,u){const f=a.getMaxScale()*gi,{maxImageWidth:b,maxImageHeight:S}=a.getMaxImageSize(h),C=Math.max(f,S*u);return{verticalLineContentWidth:Math.max(f,b*u),horizontalLineContentHeight:C}}function X5(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function oZ(h,a,u){return!(h===c.ao.horizontal||!a&&!vm(u)||a&&(f0[u]||(f=u,/\p{sc=Arab}/u.test(String.fromCodePoint(f)))));var f}function sZ(h,a,u,f,b,S){const C=S[h.fontStack],I=function(F,B,G,Q){if(F&&F.rect)return F;const ie=B[G.fontStack],se=ie&&ie[Q];return se?{rect:null,metrics:se.metrics}:null}(C&&C[a],b,h,a);if(I===null)return null;let O;if(u)O=f.verticalLineContentWidth-h.scale*gi;else{const F=X5(h.verticalAlign);O=(f.horizontalLineContentHeight-h.scale*gi)*F}return{rect:I.rect,metrics:I.metrics,baselineOffset:O}}function aZ(h,a,u,f,b){const S=b[h.imageName];if(!S)return null;const C=S.paddedRect,I=S.displaySize,O={width:I[0],height:I[1],left:1,top:-3,advance:a?I[1]:I[0]};let F;if(a)F=f.verticalLineContentWidth-I[1]*h.scale;else{const B=X5(h.verticalAlign);F=(f.horizontalLineContentHeight-I[1]*h.scale)*B}return{rect:C,metrics:O,baselineOffset:F,imageOffset:(a?I[0]:I[1])*h.scale-gi*u}}function lZ(h,a,u,f){if(f===0)return;const b=h[u],S=(h[u].x+b.metrics.advance*b.scale)*f;for(let C=a;C<=u;C++)h[C].x-=S}function cZ(h,a,u){const{horizontalAlign:f,verticalAlign:b}=Xw(u),S=a[0]-h.displaySize[0]*f,C=a[1]-h.displaySize[1]*b;return{image:h,top:C,bottom:C+h.displaySize[1],left:S,right:S+h.displaySize[0]}}function Q5(h){var a,u;let f=h.left,b=h.top,S=h.right-f,C=h.bottom-b;const I=(a=h.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",O=(u=h.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",F=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(O==="proportional"){if(I==="stretchOnly"&&S/C<F||I==="proportional"){const B=Math.ceil(C*F);f*=B/S,S=B}}else if(I==="proportional"&&O==="stretchOnly"&&F!==0&&S/C>F){const B=Math.ceil(S/F);b*=B/C,C=B}return{x1:f,y1:b,x2:f+S,y2:b+C}}function e3(h,a,u,f,b,S){const C=h.image;let I;if(C.content){const fe=C.content,we=C.pixelRatio||1;I=[fe[0]/we,fe[1]/we,C.displaySize[0]-fe[2]/we,C.displaySize[1]-fe[3]/we]}const O=a.left*S,F=a.right*S;let B,G,Q,ie;u==="width"||u==="both"?(ie=b[0]+O-f[3],G=b[0]+F+f[1]):(ie=b[0]+(O+F-C.displaySize[0])/2,G=ie+C.displaySize[0]);const se=a.top*S,ce=a.bottom*S;return u==="height"||u==="both"?(B=b[1]+se-f[0],Q=b[1]+ce+f[2]):(B=b[1]+(se+ce-C.displaySize[1])/2,Q=B+C.displaySize[1]),{image:C,top:B,right:G,bottom:Q,left:ie,collisionPadding:I}}const ol=128,hc=32640;function t3(h,a){const{expression:u}=a;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new yn(h+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:b}=u;let S=0;for(;S<f.length&&f[S]<=h;)S++;S=Math.max(0,S-1);let C=S;for(;C<f.length&&f[C]<h+1;)C++;C=Math.min(f.length-1,C);const I=f[S],O=f[C];return u.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:O,interpolationType:b}:{kind:"camera",minZoom:I,maxZoom:O,minSize:u.evaluate(new yn(I)),maxSize:u.evaluate(new yn(O)),interpolationType:b}}}function Qw(h,a,u){let f="never";const b=h.get(a);return b?f=b:h.get(u)&&(f="always"),f}const uZ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function m0(h,a,u,f,b,S,C,I,O,F,B,G,Q){const ie=I?Math.min(hc,Math.round(I[0])):0,se=I?Math.min(hc,Math.round(I[1])):0;h.emplaceBack(a,u,Math.round(32*f),Math.round(32*b),S,C,(ie<<1)+(O?1:0),se,16*F,16*B,256*G,256*Q)}function eE(h,a,u){h.emplaceBack(a.x,a.y,u),h.emplaceBack(a.x,a.y,u),h.emplaceBack(a.x,a.y,u),h.emplaceBack(a.x,a.y,u)}function hZ(h){for(const a of h.sections)if(t0(a.text))return!0;return!1}class tE{constructor(a){this.layoutVertexArray=new Et,this.indexArray=new dn,this.programConfigurations=a,this.segments=new vr,this.dynamicLayoutVertexArray=new ft,this.opacityVertexArray=new Vt,this.hasVisibleVertices=!1,this.placedSymbolArray=new le}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,u,f,b){this.isEmpty()||(f&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,zW.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,jW.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,uZ,!0),this.opacityVertexBuffer.itemSize=1),(f||b)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}zt("SymbolBuffers",tE);class rE{constructor(a,u,f){this.layoutVertexArray=new a,this.layoutAttributes=u,this.indexArray=new f,this.segments=new vr,this.collisionVertexArray=new tn}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,BW.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}zt("CollisionBuffers",rE);class Jd{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.globalState=a.globalState,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(C=>C.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=t3(this.zoom,u["text-size"]),this.iconSizeData=t3(this.zoom,u["icon-size"]);const f=this.layers[0].layout,b=f.get("symbol-sort-key"),S=f.get("symbol-z-order");this.canOverlap=Qw(f,"text-overlap","text-allow-overlap")!=="never"||Qw(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(C=>c.ao[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=a.sourceID}createArrays(){this.text=new tE(new go(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new tE(new go(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new be,this.lineVertexArray=new Se,this.symbolInstances=new ge,this.textAnchorOffsets=new Pe}calculateGlyphDependencies(a,u,f,b,S){for(let C=0;C<a.length;C++)if(u[a.charCodeAt(C)]=!0,(f||b)&&S){const I=Bm[a.charAt(C)];I&&(u[I.charCodeAt(0)]=!0)}}populate(a,u,f){const b=this.layers[0],S=b.layout,C=S.get("text-font"),I=S.get("text-field"),O=S.get("icon-image"),F=(I.value.kind!=="constant"||I.value.value instanceof Vi&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),B=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,G=S.get("symbol-sort-key");if(this.features=[],!F&&!B)return;const Q=u.iconDependencies,ie=u.glyphDependencies,se=u.availableImages,ce=new yn(this.zoom,{globalState:this.globalState});for(const{feature:fe,id:we,index:Ue,sourceLayerIndex:Oe}of a){const Ne=b._featureFilter.needGeometry,Qe=zs(fe,Ne);if(!b._featureFilter.filter(ce,Qe,f))continue;let at,gt;if(Ne||(Qe.geometry=ga(fe)),F){const wt=b.getValueAndResolveTokens("text-field",Qe,f,se),Rt=Vi.factory(wt),Zt=this.hasRTLText=this.hasRTLText||hZ(Rt);(!Zt||$o.getRTLTextPluginStatus()==="unavailable"||Zt&&$o.isParsed())&&(at=$W(Rt,b,Qe))}if(B){const wt=b.getValueAndResolveTokens("icon-image",Qe,f,se);gt=wt instanceof fo?wt:fo.fromString(wt)}if(!at&&!gt)continue;const Mt=this.sortFeaturesByKey?G.evaluate(Qe,{},f):void 0;if(this.features.push({id:we,text:at,icon:gt,index:Ue,sourceLayerIndex:Oe,geometry:Qe.geometry,properties:fe.properties,type:Ud.types[fe.type],sortKey:Mt}),gt&&(Q[gt.name]=!0),at){const wt=C.evaluate(Qe,{},f).join(","),Rt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(const Zt of at.sections)if(Zt.image)Q[Zt.image.name]=!0;else{const At=Id(at.toString()),It=Zt.fontStack||wt,ht=ie[It]=ie[It]||{};this.calculateGlyphDependencies(Zt.text,ht,Rt,this.allowVerticalPlacement,At)}}}S.get("symbol-placement")==="line"&&(this.features=function(fe){const we={},Ue={},Oe=[];let Ne=0;function Qe(wt){Oe.push(fe[wt]),Ne++}function at(wt,Rt,Zt){const At=Ue[wt];return delete Ue[wt],Ue[Rt]=At,Oe[At].geometry[0].pop(),Oe[At].geometry[0]=Oe[At].geometry[0].concat(Zt[0]),At}function gt(wt,Rt,Zt){const At=we[Rt];return delete we[Rt],we[wt]=At,Oe[At].geometry[0].shift(),Oe[At].geometry[0]=Zt[0].concat(Oe[At].geometry[0]),At}function Mt(wt,Rt,Zt){const At=Zt?Rt[0][Rt[0].length-1]:Rt[0][0];return`${wt}:${At.x}:${At.y}`}for(let wt=0;wt<fe.length;wt++){const Rt=fe[wt],Zt=Rt.geometry,At=Rt.text?Rt.text.toString():null;if(!At){Qe(wt);continue}const It=Mt(At,Zt),ht=Mt(At,Zt,!0);if(It in Ue&&ht in we&&Ue[It]!==we[ht]){const sr=gt(It,ht,Zt),dr=at(It,ht,Oe[sr].geometry);delete we[It],delete Ue[ht],Ue[Mt(At,Oe[dr].geometry,!0)]=dr,Oe[sr].geometry=null}else It in Ue?at(It,ht,Zt):ht in we?gt(It,ht,Zt):(Qe(wt),we[It]=Ne-1,Ue[ht]=Ne-1)}return Oe.filter(wt=>wt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((fe,we)=>fe.sortKey-we.sortKey)}update(a,u,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,u,this.layers,{imagePositions:f,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(a,u,this.layers,{imagePositions:f,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,u){const f=this.lineVertexArray.length;if(a.segment!==void 0){let b=a.dist(u[a.segment+1]),S=a.dist(u[a.segment]);const C={};for(let I=a.segment+1;I<u.length;I++)C[I]={x:u[I].x,y:u[I].y,tileUnitDistanceFromAnchor:b},I<u.length-1&&(b+=u[I+1].dist(u[I]));for(let I=a.segment||0;I>=0;I--)C[I]={x:u[I].x,y:u[I].y,tileUnitDistanceFromAnchor:S},I>0&&(S+=u[I-1].dist(u[I]));for(let I=0;I<u.length;I++){const O=C[I];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(a,u,f,b,S,C,I,O,F,B,G,Q){const ie=a.indexArray,se=a.layoutVertexArray,ce=a.segments.prepareSegment(4*u.length,se,ie,this.canOverlap?C.sortKey:void 0),fe=this.glyphOffsetArray.length,we=ce.vertexLength,Ue=this.allowVerticalPlacement&&I===c.ao.vertical?Math.PI/2:0,Oe=C.text&&C.text.sections;for(let Ne=0;Ne<u.length;Ne++){const{tl:Qe,tr:at,bl:gt,br:Mt,tex:wt,pixelOffsetTL:Rt,pixelOffsetBR:Zt,minFontScaleX:At,minFontScaleY:It,glyphOffset:ht,isSDF:sr,sectionIndex:dr}=u[Ne],Qt=ce.vertexLength,Ut=ht[1];m0(se,O.x,O.y,Qe.x,Ut+Qe.y,wt.x,wt.y,f,sr,Rt.x,Rt.y,At,It),m0(se,O.x,O.y,at.x,Ut+at.y,wt.x+wt.w,wt.y,f,sr,Zt.x,Rt.y,At,It),m0(se,O.x,O.y,gt.x,Ut+gt.y,wt.x,wt.y+wt.h,f,sr,Rt.x,Zt.y,At,It),m0(se,O.x,O.y,Mt.x,Ut+Mt.y,wt.x+wt.w,wt.y+wt.h,f,sr,Zt.x,Zt.y,At,It),eE(a.dynamicLayoutVertexArray,O,Ue),ie.emplaceBack(Qt,Qt+2,Qt+1),ie.emplaceBack(Qt+1,Qt+2,Qt+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ht[0]),Ne!==u.length-1&&dr===u[Ne+1].sectionIndex||a.programConfigurations.populatePaintArrays(se.length,C,C.index,{imagePositions:{},canonical:Q,formattedSection:Oe&&Oe[dr],globalState:this.globalState})}a.placedSymbolArray.emplaceBack(O.x,O.y,fe,this.glyphOffsetArray.length-fe,we,F,B,O.segment,f?f[0]:0,f?f[1]:0,b[0],b[1],I,0,!1,0,G)}_addCollisionDebugVertex(a,u,f,b,S,C){return u.emplaceBack(0,0),a.emplaceBack(f.x,f.y,b,S,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(a,u,f,b,S,C,I){const O=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),F=O.vertexLength,B=S.layoutVertexArray,G=S.collisionVertexArray,Q=I.anchorX,ie=I.anchorY;this._addCollisionDebugVertex(B,G,C,Q,ie,new p(a,u)),this._addCollisionDebugVertex(B,G,C,Q,ie,new p(f,u)),this._addCollisionDebugVertex(B,G,C,Q,ie,new p(f,b)),this._addCollisionDebugVertex(B,G,C,Q,ie,new p(a,b)),O.vertexLength+=4;const se=S.indexArray;se.emplaceBack(F,F+1),se.emplaceBack(F+1,F+2),se.emplaceBack(F+2,F+3),se.emplaceBack(F+3,F),O.primitiveLength+=4}addDebugCollisionBoxes(a,u,f,b){for(let S=a;S<u;S++){const C=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,b?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rE(wr,$5.members,an),this.iconCollisionBox=new rE(wr,$5.members,an);for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(a,u,f,b,S,C,I,O,F){const B={};for(let G=u;G<f;G++){const Q=a.get(G);B.textBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},B.textFeatureIndex=Q.featureIndex;break}for(let G=b;G<S;G++){const Q=a.get(G);B.verticalTextBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},B.verticalTextFeatureIndex=Q.featureIndex;break}for(let G=C;G<I;G++){const Q=a.get(G);B.iconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},B.iconFeatureIndex=Q.featureIndex;break}for(let G=O;G<F;G++){const Q=a.get(G);B.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},B.verticalIconFeatureIndex=Q.featureIndex;break}return B}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,u){const f=a.placedSymbolArray.get(u),b=f.vertexStartIndex+4*f.numGlyphs;for(let S=f.vertexStartIndex;S<b;S+=4)a.indexArray.emplaceBack(S,S+2,S+1),a.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(a),f=Math.cos(a),b=[],S=[],C=[];for(let I=0;I<this.symbolInstances.length;++I){C.push(I);const O=this.symbolInstances.get(I);b.push(0|Math.round(u*O.anchorX+f*O.anchorY)),S.push(O.featureIndex)}return C.sort((I,O)=>b[I]-b[O]||S[O]-S[I]),C}addToSortKeyRanges(a,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((b,S,C)=>{b>=0&&C.indexOf(b)===S&&this.addIndicesForPlacedSymbol(this.text,b)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let r3,n3;zt("SymbolBucket",Jd,{omit:["layers","collisionBoxArray","features","compareText"]}),Jd.MAX_GLYPHS=65535,Jd.addDynamicAttributes=eE;var nE={get paint(){return n3=n3||new Hi({"icon-opacity":new ir($e.paint_symbol["icon-opacity"]),"icon-color":new ir($e.paint_symbol["icon-color"]),"icon-halo-color":new ir($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new ir($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ir($e.paint_symbol["icon-halo-blur"]),"icon-translate":new Gt($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new Gt($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new ir($e.paint_symbol["text-opacity"]),"text-color":new ir($e.paint_symbol["text-color"],{runtimeType:xn,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new ir($e.paint_symbol["text-halo-color"]),"text-halo-width":new ir($e.paint_symbol["text-halo-width"]),"text-halo-blur":new ir($e.paint_symbol["text-halo-blur"]),"text-translate":new Gt($e.paint_symbol["text-translate"]),"text-translate-anchor":new Gt($e.paint_symbol["text-translate-anchor"])})},get layout(){return r3=r3||new Hi({"symbol-placement":new Gt($e.layout_symbol["symbol-placement"]),"symbol-spacing":new Gt($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Gt($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ir($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Gt($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Gt($e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Gt($e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Gt($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new Gt($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Gt($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new ir($e.layout_symbol["icon-size"]),"icon-text-fit":new Gt($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Gt($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new ir($e.layout_symbol["icon-image"]),"icon-rotate":new ir($e.layout_symbol["icon-rotate"]),"icon-padding":new ir($e.layout_symbol["icon-padding"]),"icon-keep-upright":new Gt($e.layout_symbol["icon-keep-upright"]),"icon-offset":new ir($e.layout_symbol["icon-offset"]),"icon-anchor":new ir($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Gt($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Gt($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Gt($e.layout_symbol["text-rotation-alignment"]),"text-field":new ir($e.layout_symbol["text-field"]),"text-font":new ir($e.layout_symbol["text-font"]),"text-size":new ir($e.layout_symbol["text-size"]),"text-max-width":new ir($e.layout_symbol["text-max-width"]),"text-line-height":new Gt($e.layout_symbol["text-line-height"]),"text-letter-spacing":new ir($e.layout_symbol["text-letter-spacing"]),"text-justify":new ir($e.layout_symbol["text-justify"]),"text-radial-offset":new ir($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Gt($e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ir($e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ir($e.layout_symbol["text-anchor"]),"text-max-angle":new Gt($e.layout_symbol["text-max-angle"]),"text-writing-mode":new Gt($e.layout_symbol["text-writing-mode"]),"text-rotate":new ir($e.layout_symbol["text-rotate"]),"text-padding":new Gt($e.layout_symbol["text-padding"]),"text-keep-upright":new Gt($e.layout_symbol["text-keep-upright"]),"text-transform":new ir($e.layout_symbol["text-transform"]),"text-offset":new ir($e.layout_symbol["text-offset"]),"text-allow-overlap":new Gt($e.layout_symbol["text-allow-overlap"]),"text-overlap":new Gt($e.layout_symbol["text-overlap"]),"text-ignore-placement":new Gt($e.layout_symbol["text-ignore-placement"]),"text-optional":new Gt($e.layout_symbol["text-optional"])})}};class i3{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:hs,this.defaultValue=a}evaluate(a){if(a.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(a.formattedSection))return u.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zt("FormatSectionOverride",i3,{omit:["defaultValue"]});class g0 extends So{constructor(a){super(a,nE)}recalculate(a,u){if(super.recalculate(a,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const b=[];for(const S of f)b.indexOf(S)<0&&b.push(S);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,u,f,b){const S=this.layout.get(a).evaluate(u,{},f,b),C=this._unevaluatedLayout._values[a];return C.isDataDriven()||wd(C.value)||!S?S:function(I,O){return O.replace(/{([^{}]+)}/g,(F,B)=>I&&B in I?String(I[B]):"")}(u.properties,S)}createBucket(a){return new Jd(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of nE.paint.overridableProperties){if(!g0.hasPaintOverride(this.layout,a))continue;const u=this.paint.get(a),f=new i3(u),b=new am(f,u.property.specification);let S=null;S=u.value.kind==="constant"||u.value.kind==="source"?new Tu("source",b):new lm("composite",b,u.value.zoomStops),this.paint._values[a]=new _s(u.property,S,u.parameters)}}_handleOverridablePaintPropertyUpdate(a,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&g0.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,u){const f=a.get("text-field"),b=nE.paint.properties[u];let S=!1;const C=I=>{for(const O of I)if(b.overrides&&b.overrides.hasOverride(O))return void(S=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Vi)C(f.value.value.sections);else if(f.value.kind==="source"){const I=F=>{S||(F instanceof Ls&&or(F.value)===hi?C(F.value.sections):F instanceof Ga?C(F.sections):F.eachChild(I))},O=f.value;O._styleExpression&&I(O._styleExpression.expression)}return S}}let o3;var dZ={get paint(){return o3=o3||new Hi({"background-color":new Gt($e.paint_background["background-color"]),"background-pattern":new ha($e.paint_background["background-pattern"]),"background-opacity":new Gt($e.paint_background["background-opacity"])})}};class pZ extends So{constructor(a){super(a,dZ)}}let s3;var fZ={get paint(){return s3=s3||new Hi({"raster-opacity":new Gt($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new Gt($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Gt($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Gt($e.paint_raster["raster-brightness-max"]),"raster-saturation":new Gt($e.paint_raster["raster-saturation"]),"raster-contrast":new Gt($e.paint_raster["raster-contrast"]),"raster-resampling":new Gt($e.paint_raster["raster-resampling"]),"raster-fade-duration":new Gt($e.paint_raster["raster-fade-duration"])})}};class mZ extends So{constructor(a){super(a,fZ)}}class gZ extends So{constructor(a){super(a,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class yZ{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const _Z={once:!0},iE=63710088e-1;class dc{constructor(a,u){if(isNaN(a)||isNaN(u))throw new Error(`Invalid LngLat object: (${a}, ${u})`);if(this.lng=+a,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new dc(er(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const u=Math.PI/180,f=this.lat*u,b=a.lat*u,S=Math.sin(f)*Math.sin(b)+Math.cos(f)*Math.cos(b)*Math.cos((a.lng-this.lng)*u);return iE*Math.acos(Math.min(S,1))}static convert(a){if(a instanceof dc)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new dc(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new dc(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const a3=2*Math.PI*iE;function l3(h){return a3*Math.cos(h*Math.PI/180)}function c3(h){return(180+h)/360}function u3(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function h3(h,a){return h/l3(a)}function oE(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function d3(h,a){return h*l3(oE(a))}class $m{constructor(a,u,f=0){this.x=+a,this.y=+u,this.z=+f}static fromLngLat(a,u=0){const f=dc.convert(a);return new $m(c3(f.lng),u3(f.lat),h3(u,f.lat))}toLngLat(){return new dc(360*this.x-180,oE(this.y))}toAltitude(){return d3(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/a3*(a=oE(this.y),1/Math.cos(a*Math.PI/180));var a}}function p3(h,a,u){var f=2*Math.PI*6378137/256/Math.pow(2,u);return[h*f-2*Math.PI*6378137/2,a*f-2*Math.PI*6378137/2]}class sE{constructor(a,u,f){if(!function(b,S,C){return!(b<0||b>25||C<0||C>=Math.pow(2,b)||S<0||S>=Math.pow(2,b))}(a,u,f))throw new Error(`x=${u}, y=${f}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=u,this.y=f,this.key=Wd(0,a,a,u,f)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,u,f){const b=(C=this.y,I=this.z,O=p3(256*(S=this.x),256*(C=Math.pow(2,I)-C-1),I),F=p3(256*(S+1),256*(C+1),I),O[0]+","+O[1]+","+F[0]+","+F[1]);var S,C,I,O,F;const B=function(G,Q,ie){let se,ce="";for(let fe=G;fe>0;fe--)se=1<<fe-1,ce+=(Q&se?1:0)+(ie&se?2:0);return ce}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,b)}isChildOf(a){const u=this.z-a.z;return u>0&&a.x===this.x>>u&&a.y===this.y>>u}getTilePoint(a){const u=Math.pow(2,this.z);return new p((a.x*u-this.x)*Ke,(a.y*u-this.y)*Ke)}toString(){return`${this.z}/${this.x}/${this.y}`}}class f3{constructor(a,u){this.wrap=a,this.canonical=u,this.key=Wd(a,u.z,u.z,u.x,u.y)}}class Ho{constructor(a,u,f,b,S){if(this.terrainRttPosMatrix32f=null,a<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${f}`);this.overscaledZ=a,this.wrap=u,this.canonical=new sE(f,+b,+S),this.key=Wd(u,a,f,b,S)}clone(){return new Ho(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-a;return a>this.canonical.z?new Ho(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ho(a,this.wrap,a,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(a,u){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-a;return a>this.canonical.z?Wd(this.wrap*+u,a,this.canonical.z,this.canonical.x,this.canonical.y):Wd(this.wrap*+u,a,a,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const u=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>u&&a.canonical.y===this.canonical.y>>u}children(a){if(this.overscaledZ>=a)return[new Ho(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,b=2*this.canonical.y;return[new Ho(u,this.wrap,u,f,b),new Ho(u,this.wrap,u,f+1,b),new Ho(u,this.wrap,u,f,b+1),new Ho(u,this.wrap,u,f+1,b+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Ho(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Ho(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new f3(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new $m(a.x-this.wrap,a.y))}}function Wd(h,a,u,f,b){(h*=2)<0&&(h=-1*h-1);const S=1<<u;return(S*S*h+S*b+f).toString(36)+u.toString(36)+a.toString(36)}function Vm(h,a){return a?h.properties[a]:h.id}zt("CanonicalTileID",sE),zt("OverscaledTileID",Ho,{omit:["terrainRttPosMatrix32f"]});class Fu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(a){return this.minX=Math.min(this.minX,a.x),this.minY=Math.min(this.minY,a.y),this.maxX=Math.max(this.maxX,a.x),this.maxY=Math.max(this.maxY,a.y),this}expandBy(a){return this.minX-=a,this.minY-=a,this.maxX+=a,this.maxY+=a,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(a){return this.expandBy(-a)}map(a){const u=new Fu;return u.extend(a(new p(this.minX,this.minY))),u.extend(a(new p(this.maxX,this.minY))),u.extend(a(new p(this.minX,this.maxY))),u.extend(a(new p(this.maxX,this.maxY))),u}static fromPoints(a){const u=new Fu;for(const f of a)u.extend(f);return u}contains(a){return a.x>=this.minX&&a.x<=this.maxX&&a.y>=this.minY&&a.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(a){return!this.empty()&&!a.empty()&&a.minX>=this.minX&&a.maxX<=this.maxX&&a.minY>=this.minY&&a.maxY<=this.maxY}intersects(a){return!this.empty()&&!a.empty()&&a.minX<=this.maxX&&a.maxX>=this.minX&&a.minY<=this.maxY&&a.maxY>=this.minY}}class m3{constructor(a){this._stringToNumber={},this._numberToString=[];for(let u=0;u<a.length;u++){const f=a[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class g3{constructor(a,u,f,b,S){this.type="Feature",this._vectorTileFeature=a,a._z=u,a._x=f,a._y=b,this.properties=a.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(a[u]=this[u]);return a}}class y3{constructor(a,u){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Mu(Ke,16,0),this.grid3D=new Mu(Ke,16,0),this.featureIndexArray=new Be,this.promoteId=u}insert(a,u,f,b,S,C){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,b,S);const O=C?this.grid3D:this.grid;for(let F=0;F<u.length;F++){const B=u[F],G=[1/0,1/0,-1/0,-1/0];for(let Q=0;Q<B.length;Q++){const ie=B[Q];G[0]=Math.min(G[0],ie.x),G[1]=Math.min(G[1],ie.y),G[2]=Math.max(G[2],ie.x),G[3]=Math.max(G[3],ie.y)}G[0]<Ke&&G[1]<Ke&&G[2]>=0&&G[3]>=0&&O.insert(I,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new k5(new Zw(this.rawTileData)).layers,this.sourceLayerCoder=new m3(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,u,f,b){this.loadVTLayers();const S=a.params,C=Ke/a.tileSize/a.scale,I=Ya(S.filter),O=a.queryGeometry,F=a.queryPadding*C,B=Fu.fromPoints(O),G=this.grid.query(B.minX-F,B.minY-F,B.maxX+F,B.maxY+F),Q=Fu.fromPoints(a.cameraQueryGeometry).expandBy(F),ie=this.grid3D.query(Q.minX,Q.minY,Q.maxX,Q.maxY,(fe,we,Ue,Oe)=>function(Ne,Qe,at,gt,Mt){for(const Rt of Ne)if(Qe<=Rt.x&&at<=Rt.y&&gt>=Rt.x&&Mt>=Rt.y)return!0;const wt=[new p(Qe,at),new p(Qe,Mt),new p(gt,Mt),new p(gt,at)];if(Ne.length>2){for(const Rt of wt)if(Bd(Ne,Rt))return!0}for(let Rt=0;Rt<Ne.length-1;Rt++)if(KJ(Ne[Rt],Ne[Rt+1],wt))return!0;return!1}(a.cameraQueryGeometry,fe-F,we-F,Ue+F,Oe+F));for(const fe of ie)G.push(fe);G.sort(bZ);const se={};let ce;for(let fe=0;fe<G.length;fe++){const we=G[fe];if(we===ce)continue;ce=we;const Ue=this.featureIndexArray.get(we);let Oe=null;this.loadMatchingFeature(se,Ue.bucketIndex,Ue.sourceLayerIndex,Ue.featureIndex,I,S.layers,S.availableImages,u,f,b,(Ne,Qe,at)=>(Oe||(Oe=ga(Ne)),Qe.queryIntersectsFeature({queryGeometry:O,feature:Ne,featureState:at,geometry:Oe,zoom:this.z,transform:a.transform,pixelsToTileUnits:C,pixelPosMatrix:a.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:a.getElevation})))}return se}loadMatchingFeature(a,u,f,b,S,C,I,O,F,B,G){const Q=this.bucketLayerIDs[u];if(C&&!Q.some(fe=>C.has(fe)))return;const ie=this.sourceLayerCoder.decode(f),se=this.vtLayers[ie].feature(b);if(S.needGeometry){const fe=zs(se,!0);if(!S.filter(new yn(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!S.filter(new yn(this.tileID.overscaledZ),se))return;const ce=this.getId(se,ie);for(let fe=0;fe<Q.length;fe++){const we=Q[fe];if(C&&!C.has(we))continue;const Ue=O[we];if(!Ue)continue;let Oe={};ce&&B&&(Oe=B.getState(Ue.sourceLayer||"_geojsonTileLayer",ce));const Ne=Wt({},F[we]);Ne.paint=_3(Ne.paint,Ue.paint,se,Oe,I),Ne.layout=_3(Ne.layout,Ue.layout,se,Oe,I);const Qe=!G||G(se,Ue,Oe);if(!Qe)continue;const at=new g3(se,this.z,this.x,this.y,ce);at.layer=Ne;let gt=a[we];gt===void 0&&(gt=a[we]=[]),gt.push({featureIndex:b,feature:at,intersectionZ:Qe})}}lookupSymbolFeatures(a,u,f,b,S,C,I,O){const F={};this.loadVTLayers();const B=Ya(S);for(const G of a)this.loadMatchingFeature(F,f,b,G,B,C,I,O,u);return F}hasLayer(a){for(const u of this.bucketLayerIDs)for(const f of u)if(a===f)return!0;return!1}getId(a,u){var f;let b=a.id;return this.promoteId&&(b=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&(!((f=a.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(b=Number(a.properties.cluster_id))),b}}function _3(h,a,u,f,b){return _t(h,(S,C)=>{const I=a instanceof Od?a.get(C):null;return I&&I.evaluate?I.evaluate(u,f,b):I})}function bZ(h,a){return a-h}function b3(h,a,u,f,b){const S=[];for(let C=0;C<h.length;C++){const I=h[C];let O;for(let F=0;F<I.length-1;F++){let B=I[F],G=I[F+1];B.x<a&&G.x<a||(B.x<a?B=new p(a,B.y+(a-B.x)/(G.x-B.x)*(G.y-B.y))._round():G.x<a&&(G=new p(a,B.y+(a-B.x)/(G.x-B.x)*(G.y-B.y))._round()),B.y<u&&G.y<u||(B.y<u?B=new p(B.x+(u-B.y)/(G.y-B.y)*(G.x-B.x),u)._round():G.y<u&&(G=new p(B.x+(u-B.y)/(G.y-B.y)*(G.x-B.x),u)._round()),B.x>=f&&G.x>=f||(B.x>=f?B=new p(f,B.y+(f-B.x)/(G.x-B.x)*(G.y-B.y))._round():G.x>=f&&(G=new p(f,B.y+(f-B.x)/(G.x-B.x)*(G.y-B.y))._round()),B.y>=b&&G.y>=b||(B.y>=b?B=new p(B.x+(b-B.y)/(G.y-B.y)*(G.x-B.x),b)._round():G.y>=b&&(G=new p(B.x+(b-B.y)/(G.y-B.y)*(G.x-B.x),b)._round()),O&&B.equals(O[O.length-1])||(O=[B],S.push(O)),O.push(G)))))}}return S}zt("FeatureIndex",y3,{omit:["rawTileData","sourceLayerCoder"]});class pc extends p{constructor(a,u,f,b){super(a,u),this.angle=f,b!==void 0&&(this.segment=b)}clone(){return new pc(this.x,this.y,this.angle,this.segment)}}function v3(h,a,u,f,b){if(a.segment===void 0||u===0)return!0;let S=a,C=a.segment+1,I=0;for(;I>-u/2;){if(C--,C<0)return!1;I-=h[C].dist(S),S=h[C]}I+=h[C].dist(h[C+1]),C++;const O=[];let F=0;for(;I<u/2;){const B=h[C],G=h[C+1];if(!G)return!1;let Q=h[C-1].angleTo(B)-B.angleTo(G);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:I,angleDelta:Q}),F+=Q;I-O[0].distance>f;)F-=O.shift().angleDelta;if(F>b)return!1;C++,I+=B.dist(G)}return!0}function x3(h){let a=0;for(let u=0;u<h.length-1;u++)a+=h[u].dist(h[u+1]);return a}function w3(h,a,u){return h?.6*a*u:0}function E3(h,a){return Math.max(h?h.right-h.left:0,a?a.right-a.left:0)}function vZ(h,a,u,f,b,S){const C=w3(u,b,S),I=E3(u,f)*S;let O=0;const F=x3(h)/2;for(let B=0;B<h.length-1;B++){const G=h[B],Q=h[B+1],ie=G.dist(Q);if(O+ie>F){const se=(F-O)/ie,ce=gs.number(G.x,Q.x,se),fe=gs.number(G.y,Q.y,se),we=new pc(ce,fe,Q.angleTo(G),B);return we._round(),!C||v3(h,we,I,C,a)?we:void 0}O+=ie}}function xZ(h,a,u,f,b,S,C,I,O){const F=w3(f,S,C),B=E3(f,b),G=B*C,Q=h[0].x===0||h[0].x===O||h[0].y===0||h[0].y===O;return a-G<a/4&&(a=G+a/4),T3(h,Q?a/2*I%a:(B/2+2*S)*C*I%a,a,F,u,G,Q,!1,O)}function T3(h,a,u,f,b,S,C,I,O){const F=S/2,B=x3(h);let G=0,Q=a-u,ie=[];for(let se=0;se<h.length-1;se++){const ce=h[se],fe=h[se+1],we=ce.dist(fe),Ue=fe.angleTo(ce);for(;Q+u<G+we;){Q+=u;const Oe=(Q-G)/we,Ne=gs.number(ce.x,fe.x,Oe),Qe=gs.number(ce.y,fe.y,Oe);if(Ne>=0&&Ne<O&&Qe>=0&&Qe<O&&Q-F>=0&&Q+F<=B){const at=new pc(Ne,Qe,Ue,se);at._round(),f&&!v3(h,at,S,f,b)||ie.push(at)}}G+=we}return I||ie.length||C||(ie=T3(h,G/2,u,f,b,S,C,!0,O)),ie}function S3(h,a,u,f){const b=[],S=h.image,C=S.pixelRatio,I=S.paddedRect.w-2,O=S.paddedRect.h-2;let F={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const B=S.stretchX||[[0,I]],G=S.stretchY||[[0,O]],Q=(ht,sr)=>ht+sr[1]-sr[0],ie=B.reduce(Q,0),se=G.reduce(Q,0),ce=I-ie,fe=O-se;let we=0,Ue=ie,Oe=0,Ne=se,Qe=0,at=ce,gt=0,Mt=fe;if(S.content&&f){const ht=S.content,sr=ht[2]-ht[0],dr=ht[3]-ht[1];(S.textFitWidth||S.textFitHeight)&&(F=Q5(h)),we=y0(B,0,ht[0]),Oe=y0(G,0,ht[1]),Ue=y0(B,ht[0],ht[2]),Ne=y0(G,ht[1],ht[3]),Qe=ht[0]-we,gt=ht[1]-Oe,at=sr-Ue,Mt=dr-Ne}const wt=F.x1,Rt=F.y1,Zt=F.x2-wt,At=F.y2-Rt,It=(ht,sr,dr,Qt)=>{const Ut=_0(ht.stretch-we,Ue,Zt,wt),Br=b0(ht.fixed-Qe,at,ht.stretch,ie),Nn=_0(sr.stretch-Oe,Ne,At,Rt),li=b0(sr.fixed-gt,Mt,sr.stretch,se),Bi=_0(dr.stretch-we,Ue,Zt,wt),Jo=b0(dr.fixed-Qe,at,dr.stretch,ie),_o=_0(Qt.stretch-Oe,Ne,At,Rt),Pi=b0(Qt.fixed-gt,Mt,Qt.stretch,se),On=new p(Ut,Nn),yi=new p(Bi,Nn),Ai=new p(Bi,_o),Ri=new p(Ut,_o),oo=new p(Br/C,li/C),Wo=new p(Jo/C,Pi/C),_i=a*Math.PI/180;if(_i){const bi=Math.sin(_i),vi=Math.cos(_i),ei=[vi,-bi,bi,vi];On._matMult(ei),yi._matMult(ei),Ri._matMult(ei),Ai._matMult(ei)}const bo=ht.stretch+ht.fixed,ci=sr.stretch+sr.fixed;return{tl:On,tr:yi,bl:Ri,br:Ai,tex:{x:S.paddedRect.x+1+bo,y:S.paddedRect.y+1+ci,w:dr.stretch+dr.fixed-bo,h:Qt.stretch+Qt.fixed-ci},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:oo,pixelOffsetBR:Wo,minFontScaleX:at/C/Zt,minFontScaleY:Mt/C/At,isSDF:u}};if(f&&(S.stretchX||S.stretchY)){const ht=C3(B,ce,ie),sr=C3(G,fe,se);for(let dr=0;dr<ht.length-1;dr++){const Qt=ht[dr],Ut=ht[dr+1];for(let Br=0;Br<sr.length-1;Br++)b.push(It(Qt,sr[Br],Ut,sr[Br+1]))}}else b.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:O+1}));return b}function y0(h,a,u){let f=0;for(const b of h)f+=Math.max(a,Math.min(u,b[1]))-Math.max(a,Math.min(u,b[0]));return f}function C3(h,a,u){const f=[{fixed:-1,stretch:0}];for(const[b,S]of h){const C=f[f.length-1];f.push({fixed:b-C.stretch,stretch:C.stretch}),f.push({fixed:b-C.stretch,stretch:C.stretch+(S-b)})}return f.push({fixed:a+1,stretch:u}),f}function _0(h,a,u,f){return h/a*u+f}function b0(h,a,u,f){return h-a*u/f}zt("Anchor",pc);class v0{constructor(a,u,f,b,S,C,I,O,F,B){var G;if(this.boxStartIndex=a.length,F){let Q=C.top,ie=C.bottom;const se=C.collisionPadding;se&&(Q-=se[1],ie+=se[3]);let ce=ie-Q;ce>0&&(ce=Math.max(10,ce),this.circleDiameter=ce)}else{const Q=!((G=C.image)===null||G===void 0)&&G.content&&(C.image.textFitWidth||C.image.textFitHeight)?Q5(C):{x1:C.left,y1:C.top,x2:C.right,y2:C.bottom};Q.y1=Q.y1*I-O[0],Q.y2=Q.y2*I+O[2],Q.x1=Q.x1*I-O[3],Q.x2=Q.x2*I+O[1];const ie=C.collisionPadding;if(ie&&(Q.x1-=ie[0]*I,Q.y1-=ie[1]*I,Q.x2+=ie[2]*I,Q.y2+=ie[3]*I),B){const se=new p(Q.x1,Q.y1),ce=new p(Q.x2,Q.y1),fe=new p(Q.x1,Q.y2),we=new p(Q.x2,Q.y2),Ue=B*Math.PI/180;se._rotate(Ue),ce._rotate(Ue),fe._rotate(Ue),we._rotate(Ue),Q.x1=Math.min(se.x,ce.x,fe.x,we.x),Q.x2=Math.max(se.x,ce.x,fe.x,we.x),Q.y1=Math.min(se.y,ce.y,fe.y,we.y),Q.y2=Math.max(se.y,ce.y,fe.y,we.y)}a.emplaceBack(u.x,u.y,Q.x1,Q.y1,Q.x2,Q.y2,f,b,S)}this.boxEndIndex=a.length}}class wZ{constructor(a=[],u=(f,b)=>f<b?-1:f>b?1:0){if(this.data=a,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:u,compare:f}=this,b=u[a];for(;a>0;){const S=a-1>>1,C=u[S];if(f(b,C)>=0)break;u[a]=C,a=S}u[a]=b}_down(a){const{data:u,compare:f}=this,b=this.length>>1,S=u[a];for(;a<b;){let C=1+(a<<1);const I=C+1;if(I<this.length&&f(u[I],u[C])<0&&(C=I),f(u[C],S)>=0)break;u[a]=u[C],a=C}u[a]=S}}function EZ(h,a=1,u=!1){const f=Fu.fromPoints(h[0]),b=Math.min(f.width(),f.height());let S=b/2;const C=new wZ([],TZ),{minX:I,minY:O,maxX:F,maxY:B}=f;if(b===0)return new p(I,O);for(let ie=I;ie<F;ie+=b)for(let se=O;se<B;se+=b)C.push(new Zd(ie+S,se+S,S,h));let G=function(ie){let se=0,ce=0,fe=0;const we=ie[0];for(let Ue=0,Oe=we.length,Ne=Oe-1;Ue<Oe;Ne=Ue++){const Qe=we[Ue],at=we[Ne],gt=Qe.x*at.y-at.x*Qe.y;ce+=(Qe.x+at.x)*gt,fe+=(Qe.y+at.y)*gt,se+=3*gt}return new Zd(ce/se,fe/se,0,ie)}(h),Q=C.length;for(;C.length;){const ie=C.pop();(ie.d>G.d||!G.d)&&(G=ie,u&&console.log("found best %d after %d probes",Math.round(1e4*ie.d)/1e4,Q)),ie.max-G.d<=a||(S=ie.h/2,C.push(new Zd(ie.p.x-S,ie.p.y-S,S,h)),C.push(new Zd(ie.p.x+S,ie.p.y-S,S,h)),C.push(new Zd(ie.p.x-S,ie.p.y+S,S,h)),C.push(new Zd(ie.p.x+S,ie.p.y+S,S,h)),Q+=4)}return u&&(console.log(`num probes: ${Q}`),console.log(`best distance: ${G.d}`)),G.p}function TZ(h,a){return a.max-h.max}function Zd(h,a,u,f){this.p=new p(h,a),this.h=u,this.d=function(b,S){let C=!1,I=1/0;for(let O=0;O<S.length;O++){const F=S[O];for(let B=0,G=F.length,Q=G-1;B<G;Q=B++){const ie=F[B],se=F[Q];ie.y>b.y!=se.y>b.y&&b.x<(se.x-ie.x)*(b.y-ie.y)/(se.y-ie.y)+ie.x&&(C=!C),I=Math.min(I,u5(b,ie,se))}}return(C?1:-1)*Math.sqrt(I)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ji;c.aE=void 0,(ji=c.aE||(c.aE={}))[ji.center=1]="center",ji[ji.left=2]="left",ji[ji.right=3]="right",ji[ji.top=4]="top",ji[ji.bottom=5]="bottom",ji[ji["top-left"]=6]="top-left",ji[ji["top-right"]=7]="top-right",ji[ji["bottom-left"]=8]="bottom-left",ji[ji["bottom-right"]=9]="bottom-right";const aE=Number.POSITIVE_INFINITY;function P3(h,a){return a[1]!==aE?function(u,f,b){let S=0,C=0;switch(f=Math.abs(f),b=Math.abs(b),u){case"top-right":case"top-left":case"top":C=b-7;break;case"bottom-right":case"bottom-left":case"bottom":C=7-b}switch(u){case"top-right":case"bottom-right":case"right":S=-f;break;case"top-left":case"bottom-left":case"left":S=f}return[S,C]}(h,a[0],a[1]):function(u,f){let b=0,S=0;f<0&&(f=0);const C=f/Math.SQRT2;switch(u){case"top-right":case"top-left":S=C-7;break;case"bottom-right":case"bottom-left":S=7-C;break;case"bottom":S=7-f;break;case"top":S=f-7}switch(u){case"top-right":case"bottom-right":b=-C;break;case"top-left":case"bottom-left":b=C;break;case"left":b=f;break;case"right":b=-f}return[b,S]}(h,a[0])}function A3(h,a,u){var f;const b=h.layout,S=(f=b.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(a,{},u);if(S){const I=S.values,O=[];for(let F=0;F<I.length;F+=2){const B=O[F]=I[F],G=I[F+1].map(Q=>Q*gi);B.startsWith("top")?G[1]-=7:B.startsWith("bottom")&&(G[1]+=7),O[F+1]=G}return new Gi(O)}const C=b.get("text-variable-anchor");if(C){let I;I=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(a,{},u)*gi,aE]:b.get("text-offset").evaluate(a,{},u).map(F=>F*gi);const O=[];for(const F of C)O.push(F,P3(F,I));return new Gi(O)}return null}function lE(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function SZ(h,a,u,f,b,S,C,I,O,F,B,G){let Q=S.textMaxSize.evaluate(a,{});Q===void 0&&(Q=C);const ie=h.layers[0].layout,se=ie.get("icon-offset").evaluate(a,{},B),ce=I3(u.horizontal),fe=C/24,we=h.tilePixelRatio*fe,Ue=h.tilePixelRatio*Q/24,Oe=h.tilePixelRatio*I,Ne=h.tilePixelRatio*ie.get("symbol-spacing"),Qe=ie.get("text-padding")*h.tilePixelRatio,at=function(dr,Qt,Ut,Br=1){const Nn=dr.get("icon-padding").evaluate(Qt,{},Ut),li=Nn&&Nn.values;return[li[0]*Br,li[1]*Br,li[2]*Br,li[3]*Br]}(ie,a,B,h.tilePixelRatio),gt=ie.get("text-max-angle")/180*Math.PI,Mt=ie.get("text-rotation-alignment")!=="viewport"&&ie.get("symbol-placement")!=="point",wt=ie.get("icon-rotation-alignment")==="map"&&ie.get("symbol-placement")!=="point",Rt=ie.get("symbol-placement"),Zt=Ne/2,At=ie.get("icon-text-fit");let It;f&&At!=="none"&&(h.allowVerticalPlacement&&u.vertical&&(It=e3(f,u.vertical,At,ie.get("icon-text-fit-padding"),se,fe)),ce&&(f=e3(f,ce,At,ie.get("icon-text-fit-padding"),se,fe)));const ht=B?G.line.getGranularityForZoomLevel(B.z):1,sr=(dr,Qt)=>{Qt.x<0||Qt.x>=Ke||Qt.y<0||Qt.y>=Ke||function(Ut,Br,Nn,li,Bi,Jo,_o,Pi,On,yi,Ai,Ri,oo,Wo,_i,bo,ci,bi,vi,ei,Cn,js,Kd,Bs,AZ){const Yd=Ut.addToLineVertexArray(Br,Nn);let zu,Xd,Qd,ep,L3=0,D3=0,N3=0,F3=0,gE=-1,yE=-1;const sl={};let z3=lc("");if(Ut.allowVerticalPlacement&&li.vertical){const Zi=Pi.layout.get("text-rotate").evaluate(Cn,{},Bs)+90;Qd=new v0(On,Br,yi,Ai,Ri,li.vertical,oo,Wo,_i,Zi),_o&&(ep=new v0(On,Br,yi,Ai,Ri,_o,ci,bi,_i,Zi))}if(Bi){const Zi=Pi.layout.get("icon-rotate").evaluate(Cn,{}),Zo=Pi.layout.get("icon-text-fit")!=="none",ju=S3(Bi,Zi,Kd,Zo),$s=_o?S3(_o,Zi,Kd,Zo):void 0;Xd=new v0(On,Br,yi,Ai,Ri,Bi,ci,bi,!1,Zi),L3=4*ju.length;const Bu=Ut.iconSizeData;let ya=null;Bu.kind==="source"?(ya=[ol*Pi.layout.get("icon-size").evaluate(Cn,{})],ya[0]>hc&&Tt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Bu.kind==="composite"&&(ya=[ol*js.compositeIconSizes[0].evaluate(Cn,{},Bs),ol*js.compositeIconSizes[1].evaluate(Cn,{},Bs)],(ya[0]>hc||ya[1]>hc)&&Tt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ut.addSymbols(Ut.icon,ju,ya,ei,vi,Cn,c.ao.none,Br,Yd.lineStartIndex,Yd.lineLength,-1,Bs),gE=Ut.icon.placedSymbolArray.length-1,$s&&(D3=4*$s.length,Ut.addSymbols(Ut.icon,$s,ya,ei,vi,Cn,c.ao.vertical,Br,Yd.lineStartIndex,Yd.lineLength,-1,Bs),yE=Ut.icon.placedSymbolArray.length-1)}const j3=Object.keys(li.horizontal);for(const Zi of j3){const Zo=li.horizontal[Zi];if(!zu){z3=lc(Zo.text);const $s=Pi.layout.get("text-rotate").evaluate(Cn,{},Bs);zu=new v0(On,Br,yi,Ai,Ri,Zo,oo,Wo,_i,$s)}const ju=Zo.positionedLines.length===1;if(N3+=R3(Ut,Br,Zo,Jo,Pi,_i,Cn,bo,Yd,li.vertical?c.ao.horizontal:c.ao.horizontalOnly,ju?j3:[Zi],sl,gE,js,Bs),ju)break}li.vertical&&(F3+=R3(Ut,Br,li.vertical,Jo,Pi,_i,Cn,bo,Yd,c.ao.vertical,["vertical"],sl,yE,js,Bs));const RZ=zu?zu.boxStartIndex:Ut.collisionBoxArray.length,IZ=zu?zu.boxEndIndex:Ut.collisionBoxArray.length,MZ=Qd?Qd.boxStartIndex:Ut.collisionBoxArray.length,OZ=Qd?Qd.boxEndIndex:Ut.collisionBoxArray.length,kZ=Xd?Xd.boxStartIndex:Ut.collisionBoxArray.length,LZ=Xd?Xd.boxEndIndex:Ut.collisionBoxArray.length,DZ=ep?ep.boxStartIndex:Ut.collisionBoxArray.length,NZ=ep?ep.boxEndIndex:Ut.collisionBoxArray.length;let qs=-1;const w0=(Zi,Zo)=>Zi&&Zi.circleDiameter?Math.max(Zi.circleDiameter,Zo):Zo;qs=w0(zu,qs),qs=w0(Qd,qs),qs=w0(Xd,qs),qs=w0(ep,qs);const B3=qs>-1?1:0;B3&&(qs*=AZ/gi),Ut.glyphOffsetArray.length>=Jd.MAX_GLYPHS&&Tt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cn.sortKey!==void 0&&Ut.addToSortKeyRanges(Ut.symbolInstances.length,Cn.sortKey);const FZ=A3(Pi,Cn,Bs),[zZ,jZ]=function(Zi,Zo){const ju=Zi.length,$s=Zo?.values;if($s?.length>0)for(let Bu=0;Bu<$s.length;Bu+=2){const ya=$s[Bu+1];Zi.emplaceBack(c.aE[$s[Bu]],ya[0],ya[1])}return[ju,Zi.length]}(Ut.textAnchorOffsets,FZ);Ut.symbolInstances.emplaceBack(Br.x,Br.y,sl.right>=0?sl.right:-1,sl.center>=0?sl.center:-1,sl.left>=0?sl.left:-1,sl.vertical||-1,gE,yE,z3,RZ,IZ,MZ,OZ,kZ,LZ,DZ,NZ,yi,N3,F3,L3,D3,B3,0,oo,qs,zZ,jZ)}(h,Qt,dr,u,f,b,It,h.layers[0],h.collisionBoxArray,a.index,a.sourceLayerIndex,h.index,we,[Qe,Qe,Qe,Qe],Mt,O,Oe,at,wt,se,a,S,F,B,C)};if(Rt==="line")for(const dr of b3(a.geometry,0,0,Ke,Ke)){const Qt=Nu(dr,ht),Ut=xZ(Qt,Ne,gt,u.vertical||ce,f,24,Ue,h.overscaling,Ke);for(const Br of Ut)ce&&CZ(h,ce.text,Zt,Br)||sr(Qt,Br)}else if(Rt==="line-center"){for(const dr of a.geometry)if(dr.length>1){const Qt=Nu(dr,ht),Ut=vZ(Qt,gt,u.vertical||ce,f,24,Ue);Ut&&sr(Qt,Ut)}}else if(a.type==="Polygon")for(const dr of bu(a.geometry,0)){const Qt=EZ(dr,16);sr(Nu(dr[0],ht,!0),new pc(Qt.x,Qt.y,0))}else if(a.type==="LineString")for(const dr of a.geometry){const Qt=Nu(dr,ht);sr(Qt,new pc(Qt[0].x,Qt[0].y,0))}else if(a.type==="Point")for(const dr of a.geometry)for(const Qt of dr)sr([Qt],new pc(Qt.x,Qt.y,0))}function R3(h,a,u,f,b,S,C,I,O,F,B,G,Q,ie,se){const ce=function(Ue,Oe,Ne,Qe,at,gt,Mt,wt){const Rt=Qe.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,Zt=[];for(const At of Oe.positionedLines)for(const It of At.positionedGlyphs){if(!It.rect)continue;const ht=It.rect||{};let sr=4,dr=!0,Qt=1,Ut=0;const Br=(at||wt)&&It.vertical,Nn=It.metrics.advance*It.scale/2;if(wt&&Oe.verticalizable&&(Ut=At.lineOffset/2-(It.imageName?-(gi-It.metrics.width*It.scale)/2:(It.scale-1)*gi)),It.imageName){const bi=Mt[It.imageName];dr=bi.sdf,Qt=bi.pixelRatio,sr=1/Qt}const li=at?[It.x+Nn,It.y]:[0,0];let Bi=at?[0,0]:[It.x+Nn+Ne[0],It.y+Ne[1]-Ut],Jo=[0,0];Br&&(Jo=Bi,Bi=[0,0]);const _o=It.metrics.isDoubleResolution?2:1,Pi=(It.metrics.left-sr)*It.scale-Nn+Bi[0],On=(-It.metrics.top-sr)*It.scale+Bi[1],yi=Pi+ht.w/_o*It.scale/Qt,Ai=On+ht.h/_o*It.scale/Qt,Ri=new p(Pi,On),oo=new p(yi,On),Wo=new p(Pi,Ai),_i=new p(yi,Ai);if(Br){const bi=new p(-Nn,Nn- -17),vi=-Math.PI/2,ei=12-Nn,Cn=new p(22-ei,-(It.imageName?ei:0)),js=new p(...Jo);Ri._rotateAround(vi,bi)._add(Cn)._add(js),oo._rotateAround(vi,bi)._add(Cn)._add(js),Wo._rotateAround(vi,bi)._add(Cn)._add(js),_i._rotateAround(vi,bi)._add(Cn)._add(js)}if(Rt){const bi=Math.sin(Rt),vi=Math.cos(Rt),ei=[vi,-bi,bi,vi];Ri._matMult(ei),oo._matMult(ei),Wo._matMult(ei),_i._matMult(ei)}const bo=new p(0,0),ci=new p(0,0);Zt.push({tl:Ri,tr:oo,bl:Wo,br:_i,tex:ht,writingMode:Oe.writingMode,glyphOffset:li,sectionIndex:It.sectionIndex,isSDF:dr,pixelOffsetTL:bo,pixelOffsetBR:ci,minFontScaleX:0,minFontScaleY:0})}return Zt}(0,u,I,b,S,C,f,h.allowVerticalPlacement),fe=h.textSizeData;let we=null;fe.kind==="source"?(we=[ol*b.layout.get("text-size").evaluate(C,{})],we[0]>hc&&Tt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):fe.kind==="composite"&&(we=[ol*ie.compositeTextSizes[0].evaluate(C,{},se),ol*ie.compositeTextSizes[1].evaluate(C,{},se)],(we[0]>hc||we[1]>hc)&&Tt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,ce,we,I,S,C,F,a,O.lineStartIndex,O.lineLength,Q,se);for(const Ue of B)G[Ue]=h.text.placedSymbolArray.length-1;return 4*ce.length}function I3(h){for(const a in h)return h[a];return null}function CZ(h,a,u,f){const b=h.compareText;if(a in b){const S=b[a];for(let C=S.length-1;C>=0;C--)if(f.dist(S[C])<u)return!0}else b[a]=[];return b[a].push(f),!1}const M3=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class cE{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(a,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const b=f>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);const S=M3[15&f];if(!S)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(a,2,1),[I]=new Uint32Array(a,4,1);return new cE(I,C,S,a)}constructor(a,u=64,f=Float64Array,b){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const S=M3.indexOf(this.ArrayType),C=2*a*this.ArrayType.BYTES_PER_ELEMENT,I=a*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-I%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${f}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+O,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+C+I+O),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+O,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=a)}add(a,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=a,this.coords[this._pos++]=u,f}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return uE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,u,f,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:C,nodeSize:I}=this,O=[0,S.length-1,0],F=[];for(;O.length;){const B=O.pop()||0,G=O.pop()||0,Q=O.pop()||0;if(G-Q<=I){for(let fe=Q;fe<=G;fe++){const we=C[2*fe],Ue=C[2*fe+1];we>=a&&we<=f&&Ue>=u&&Ue<=b&&F.push(S[fe])}continue}const ie=Q+G>>1,se=C[2*ie],ce=C[2*ie+1];se>=a&&se<=f&&ce>=u&&ce<=b&&F.push(S[ie]),(B===0?a<=se:u<=ce)&&(O.push(Q),O.push(ie-1),O.push(1-B)),(B===0?f>=se:b>=ce)&&(O.push(ie+1),O.push(G),O.push(1-B))}return F}within(a,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:S,nodeSize:C}=this,I=[0,b.length-1,0],O=[],F=f*f;for(;I.length;){const B=I.pop()||0,G=I.pop()||0,Q=I.pop()||0;if(G-Q<=C){for(let fe=Q;fe<=G;fe++)k3(S[2*fe],S[2*fe+1],a,u)<=F&&O.push(b[fe]);continue}const ie=Q+G>>1,se=S[2*ie],ce=S[2*ie+1];k3(se,ce,a,u)<=F&&O.push(b[ie]),(B===0?a-f<=se:u-f<=ce)&&(I.push(Q),I.push(ie-1),I.push(1-B)),(B===0?a+f>=se:u+f>=ce)&&(I.push(ie+1),I.push(G),I.push(1-B))}return O}}function uE(h,a,u,f,b,S){if(b-f<=u)return;const C=f+b>>1;O3(h,a,C,f,b,S),uE(h,a,u,f,C-1,1-S),uE(h,a,u,C+1,b,1-S)}function O3(h,a,u,f,b,S){for(;b>f;){if(b-f>600){const F=b-f+1,B=u-f+1,G=Math.log(F),Q=.5*Math.exp(2*G/3),ie=.5*Math.sqrt(G*Q*(F-Q)/F)*(B-F/2<0?-1:1);O3(h,a,u,Math.max(f,Math.floor(u-B*Q/F+ie)),Math.min(b,Math.floor(u+(F-B)*Q/F+ie)),S)}const C=a[2*u+S];let I=f,O=b;for(Um(h,a,f,u),a[2*b+S]>C&&Um(h,a,f,b);I<O;){for(Um(h,a,I,O),I++,O--;a[2*I+S]<C;)I++;for(;a[2*O+S]>C;)O--}a[2*f+S]===C?Um(h,a,f,O):(O++,Um(h,a,O,b)),O<=u&&(f=O+1),u<=O&&(b=O-1)}}function Um(h,a,u,f){hE(h,u,f),hE(a,2*u,2*f),hE(a,2*u+1,2*f+1)}function hE(h,a,u){const f=h[a];h[a]=h[u],h[u]=f}function k3(h,a,u,f){const b=h-u,S=a-f;return b*b+S*S}var dE;c.cx=void 0,(dE=c.cx||(c.cx={})).create="create",dE.load="load",dE.fullLoad="fullLoad";let x0=null,Gm=[];const pE=1e3/60,fE="loadTime",mE="fullLoadTime",PZ={mark(h){performance.mark(h)},frame(h){const a=h;x0!=null&&Gm.push(a-x0),x0=a},clearMetrics(){x0=null,Gm=[],performance.clearMeasures(fE),performance.clearMeasures(mE);for(const h in c.cx)performance.clearMarks(c.cx[h])},getPerformanceMetrics(){performance.measure(fE,c.cx.create,c.cx.load),performance.measure(mE,c.cx.create,c.cx.fullLoad);const h=performance.getEntriesByName(fE)[0].duration,a=performance.getEntriesByName(mE)[0].duration,u=Gm.length,f=1/(Gm.reduce((S,C)=>S+C,0)/u/1e3),b=Gm.filter(S=>S>pE).reduce((S,C)=>S+(C-pE)/pE,0);return{loadTime:h,fullLoadTime:a,fps:f,percentDroppedFrames:b/(u+b)*100,totalFrames:u}}};c.$=Ke,c.A=J,c.B=function([h,a,u]){return a+=90,a*=Math.PI/180,u*=Math.PI/180,{x:h*Math.cos(a)*Math.sin(u),y:h*Math.sin(a)*Math.sin(u),z:h*Math.cos(u)}},c.C=gs,c.D=Gt,c.E=Ot,c.F=yn,c.G=Ru,c.H=function(h){if(Yt==null){const a=h.navigator?h.navigator.userAgent:null;Yt=!!h.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Yt},c.I=Kw,c.J=class{constructor(h,a){this.target=h,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new yZ(()=>this.process()),this.subscription=yr(this.target,"message",u=>this.receive(u),!1),this.globalScope=Dt(self)?h:window}registerMessageHandler(h,a){this.messageHandlers[h]=a}sendAsync(h,a){return new Promise((u,f)=>{const b=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=a?yr(a.signal,"abort",()=>{S?.unsubscribe(),delete this.resolveRejects[b];const O={id:b,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(O)},_Z):null;this.resolveRejects[b]={resolve:O=>{S?.unsubscribe(),u(O)},reject:O=>{S?.unsubscribe(),f(O)}};const C=[],I=Object.assign(Object.assign({},h),{id:b,sourceMapId:this.mapId,origin:location.origin,data:rc(h.data,C)});this.target.postMessage(I,{transfer:C})})}receive(h){const a=h.data,u=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[u];const f=this.abortControllers[u];return delete this.abortControllers[u],void(f&&f.abort())}if(Dt(self)||a.mustQueue)return this.tasks[u]=a,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,a)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),a=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(h,a)}processTask(h,a){return s(this,void 0,void 0,function*(){if(a.type==="<response>"){const b=this.resolveRejects[h];return delete this.resolveRejects[h],b?void(a.error?b.reject(el(a.error)):b.resolve(el(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=el(a.data),f=new AbortController;this.abortControllers[h]=f;try{const b=yield this.messageHandlers[a.type](a.sourceMapId,u,f);this.completeTask(h,null,b)}catch(b){this.completeTask(h,b)}})}completeTask(h,a,u){const f=[];delete this.abortControllers[h];const b={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?rc(a):null,data:rc(u,f)};this.target.postMessage(b,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=de,c.L=function(){var h=new J(16);return J!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},c.M=function(h,a,u){var f,b,S,C,I,O,F,B,G,Q,ie,se,ce=u[0],fe=u[1],we=u[2];return a===h?(h[12]=a[0]*ce+a[4]*fe+a[8]*we+a[12],h[13]=a[1]*ce+a[5]*fe+a[9]*we+a[13],h[14]=a[2]*ce+a[6]*fe+a[10]*we+a[14],h[15]=a[3]*ce+a[7]*fe+a[11]*we+a[15]):(b=a[1],S=a[2],C=a[3],I=a[4],O=a[5],F=a[6],B=a[7],G=a[8],Q=a[9],ie=a[10],se=a[11],h[0]=f=a[0],h[1]=b,h[2]=S,h[3]=C,h[4]=I,h[5]=O,h[6]=F,h[7]=B,h[8]=G,h[9]=Q,h[10]=ie,h[11]=se,h[12]=f*ce+I*fe+G*we+a[12],h[13]=b*ce+O*fe+Q*we+a[13],h[14]=S*ce+F*fe+ie*we+a[14],h[15]=C*ce+B*fe+se*we+a[15]),h},c.N=function(h,a,u){var f=u[0],b=u[1],S=u[2];return h[0]=a[0]*f,h[1]=a[1]*f,h[2]=a[2]*f,h[3]=a[3]*f,h[4]=a[4]*b,h[5]=a[5]*b,h[6]=a[6]*b,h[7]=a[7]*b,h[8]=a[8]*S,h[9]=a[9]*S,h[10]=a[10]*S,h[11]=a[11]*S,h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},c.O=function(h,a,u){var f=a[0],b=a[1],S=a[2],C=a[3],I=a[4],O=a[5],F=a[6],B=a[7],G=a[8],Q=a[9],ie=a[10],se=a[11],ce=a[12],fe=a[13],we=a[14],Ue=a[15],Oe=u[0],Ne=u[1],Qe=u[2],at=u[3];return h[0]=Oe*f+Ne*I+Qe*G+at*ce,h[1]=Oe*b+Ne*O+Qe*Q+at*fe,h[2]=Oe*S+Ne*F+Qe*ie+at*we,h[3]=Oe*C+Ne*B+Qe*se+at*Ue,h[4]=(Oe=u[4])*f+(Ne=u[5])*I+(Qe=u[6])*G+(at=u[7])*ce,h[5]=Oe*b+Ne*O+Qe*Q+at*fe,h[6]=Oe*S+Ne*F+Qe*ie+at*we,h[7]=Oe*C+Ne*B+Qe*se+at*Ue,h[8]=(Oe=u[8])*f+(Ne=u[9])*I+(Qe=u[10])*G+(at=u[11])*ce,h[9]=Oe*b+Ne*O+Qe*Q+at*fe,h[10]=Oe*S+Ne*F+Qe*ie+at*we,h[11]=Oe*C+Ne*B+Qe*se+at*Ue,h[12]=(Oe=u[12])*f+(Ne=u[13])*I+(Qe=u[14])*G+(at=u[15])*ce,h[13]=Oe*b+Ne*O+Qe*Q+at*fe,h[14]=Oe*S+Ne*F+Qe*ie+at*we,h[15]=Oe*C+Ne*B+Qe*se+at*Ue,h},c.P=p,c.Q=function(h,a){const u={};for(let f=0;f<a.length;f++){const b=a[f];b in h&&(u[b]=h[b])}return u},c.R=yo,c.S=dc,c.T=jw,c.U=u3,c.V=c3,c.W=z,c.X=j,c.Y=$r,c.Z=Ho,c._=s,c.a=oe,c.a$=Ie,c.a0=function(h,a){var u,f,b,S;if(!h)return a??{};if(!a)return h;const C=Object.assign({},h);if(a.removeAll&&(C.removeAll=!0),a.remove){const I=new Set(C.remove?C.remove.concat(a.remove):a.remove);C.remove=Array.from(I.values())}if(a.add){const I=C.add?C.add.concat(a.add):a.add,O=new Map(I.map(F=>[F.id,F]));C.add=Array.from(O.values())}if(a.update){const I=new Map((u=C.update)===null||u===void 0?void 0:u.map(O=>[O.id,O]));for(const O of a.update){const F=(f=I.get(O.id))!==null&&f!==void 0?f:{id:O.id};O.newGeometry&&(F.newGeometry=O.newGeometry),O.addOrUpdateProperties&&(F.addOrUpdateProperties=((b=F.addOrUpdateProperties)!==null&&b!==void 0?b:[]).concat(O.addOrUpdateProperties)),O.removeProperties&&(F.removeProperties=((S=F.removeProperties)!==null&&S!==void 0?S:[]).concat(O.removeProperties)),O.removeAllProperties&&(F.removeAllProperties=!0),I.set(O.id,F)}C.update=Array.from(I.values())}return C},c.a1=$m,c.a2=Fu,c.a3=25,c.a4=sE,c.a5=h=>{const a=window.document.createElement("video");return a.muted=!0,new Promise(u=>{a.onloadstart=()=>{u(a)};for(const f of h){const b=window.document.createElement("source");Je(f)||(a.crossOrigin="Anonymous"),b.src=f,a.appendChild(b)}})},c.a6=yt,c.a7=function(){return ar++},c.a8=H,c.a9=Jd,c.aA=function(h){let a=1/0,u=1/0,f=-1/0,b=-1/0;for(const S of h)a=Math.min(a,S.x),u=Math.min(u,S.y),f=Math.max(f,S.x),b=Math.max(b,S.y);return[a,u,f,b]},c.aB=gi,c.aC=Ze,c.aD=function(h,a,u,f,b=!1){if(!u[0]&&!u[1])return[0,0];const S=b?f==="map"?-h.bearingInRadians:0:f==="viewport"?h.bearingInRadians:0;if(S){const C=Math.sin(S),I=Math.cos(S);u=[u[0]*I-u[1]*C,u[0]*C+u[1]*I]}return[b?u[0]:Ze(a,u[0],h.zoom),b?u[1]:Ze(a,u[1],h.zoom)]},c.aF=Qw,c.aG=lE,c.aH=Xw,c.aI=cE,c.aJ=Un,c.aK=h0,c.aL=Ae,c.aM=vr,c.aN=dn,c.aO=er,c.aP=lr,c.aQ=d3,c.aR=he,c.aS=K,c.aT=function(h){var a=new J(3);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a},c.aU=function(h,a,u){return h[0]=a[0]-u[0],h[1]=a[1]-u[1],h[2]=a[2]-u[2],h},c.aV=function(h,a){var u=a[0],f=a[1],b=a[2],S=u*u+f*f+b*b;return S>0&&(S=1/Math.sqrt(S)),h[0]=a[0]*S,h[1]=a[1]*S,h[2]=a[2]*S,h},c.aW=ue,c.aX=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]},c.aY=function(h,a,u){return h[0]=a[0]*u[0],h[1]=a[1]*u[1],h[2]=a[2]*u[2],h[3]=a[3]*u[3],h},c.aZ=Z,c.a_=function(h,a,u){const f=a[0]*u[0]+a[1]*u[1]+a[2]*u[2];return f===0?null:(-(h[0]*u[0]+h[1]*u[1]+h[2]*u[2])-u[3])/f},c.aa=Ya,c.ab=zs,c.ac=g3,c.ad=function(h){const a={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,b,S)=>{const C=b||S;return a[f]=!C||C.toLowerCase(),""}),a["max-age"]){const u=parseInt(a["max-age"],10);isNaN(u)?delete a["max-age"]:a["max-age"]=u}return a},c.ae=ur,c.af=function(h){return Math.pow(2,h)},c.ag=re,c.ah=dt,c.ai=85.051129,c.aj=h3,c.ak=function(h){return Math.log(h)/Math.LN2},c.al=function(h){var a=h[0],u=h[1];return a*a+u*u},c.am=function(h,a){const u=[];for(const f in h)f in a||u.push(f);return u},c.an=function(h,a){let u=0,f=0;if(h.kind==="constant")f=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:b,minZoom:S,maxZoom:C}=h,I=b?dt(Ci.interpolationFactor(b,a,S,C),0,1):0;h.kind==="camera"?f=gs.number(h.minSize,h.maxSize,I):u=I}return{uSizeT:u,uSize:f}},c.ap=function(h,{uSize:a,uSizeT:u},{lowerSize:f,upperSize:b}){return h.kind==="source"?f/ol:h.kind==="composite"?gs.number(f/ol,b/ol,u):a},c.aq=function(h,a){var u=a[0],f=a[1],b=a[2],S=a[3],C=a[4],I=a[5],O=a[6],F=a[7],B=a[8],G=a[9],Q=a[10],ie=a[11],se=a[12],ce=a[13],fe=a[14],we=a[15],Ue=u*I-f*C,Oe=u*O-b*C,Ne=u*F-S*C,Qe=f*O-b*I,at=f*F-S*I,gt=b*F-S*O,Mt=B*ce-G*se,wt=B*fe-Q*se,Rt=B*we-ie*se,Zt=G*fe-Q*ce,At=G*we-ie*ce,It=Q*we-ie*fe,ht=Ue*It-Oe*At+Ne*Zt+Qe*Rt-at*wt+gt*Mt;return ht?(h[0]=(I*It-O*At+F*Zt)*(ht=1/ht),h[1]=(b*At-f*It-S*Zt)*ht,h[2]=(ce*gt-fe*at+we*Qe)*ht,h[3]=(Q*at-G*gt-ie*Qe)*ht,h[4]=(O*Rt-C*It-F*wt)*ht,h[5]=(u*It-b*Rt+S*wt)*ht,h[6]=(fe*Ne-se*gt-we*Oe)*ht,h[7]=(B*gt-Q*Ne+ie*Oe)*ht,h[8]=(C*At-I*Rt+F*Mt)*ht,h[9]=(f*Rt-u*At-S*Mt)*ht,h[10]=(se*at-ce*Ne+we*Ue)*ht,h[11]=(G*Ne-B*at-ie*Ue)*ht,h[12]=(I*wt-C*Zt-O*Mt)*ht,h[13]=(u*Zt-f*wt+b*Mt)*ht,h[14]=(ce*Oe-se*Qe-fe*Ue)*ht,h[15]=(B*Qe-G*Oe+Q*Ue)*ht,h):null},c.ar=xe,c.as=function(h){var a=h[0],u=h[1];return Math.sqrt(a*a+u*u)},c.at=function(h){return h[0]=0,h[1]=0,h},c.au=function(h,a,u){return h[0]=a[0]*u,h[1]=a[1]*u,h},c.av=eE,c.aw=ee,c.ax=function(h,a,u,f){const b=a.y-h.y,S=a.x-h.x,C=f.y-u.y,I=f.x-u.x,O=C*S-I*b;if(O===0)return null;const F=(I*(h.y-u.y)-C*(h.x-u.x))/O;return new p(h.x+F*S,h.y+F*b)},c.ay=b3,c.az=l5,c.b=Bt,c.b$=class extends w{},c.b0=function(h,a,u){return h[0]=a[0]*u,h[1]=a[1]*u,h[2]=a[2]*u,h[3]=a[3]*u,h},c.b1=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]+h[3]},c.b2=f3,c.b3=Wd,c.b4=function(h,a,u,f,b){var S=1/Math.tan(a/2);if(h[0]=S/u,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=S,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,b!=null&&b!==1/0){var C=1/(f-b);h[10]=(b+f)*C,h[14]=2*b*f*C}else h[10]=-1,h[14]=-2*f;return h},c.b5=function(h){var a=new J(16);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],a[9]=h[9],a[10]=h[10],a[11]=h[11],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15],a},c.b6=function(h,a,u){var f=Math.sin(u),b=Math.cos(u),S=a[0],C=a[1],I=a[2],O=a[3],F=a[4],B=a[5],G=a[6],Q=a[7];return a!==h&&(h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[0]=S*b+F*f,h[1]=C*b+B*f,h[2]=I*b+G*f,h[3]=O*b+Q*f,h[4]=F*b-S*f,h[5]=B*b-C*f,h[6]=G*b-I*f,h[7]=Q*b-O*f,h},c.b7=function(h,a,u){var f=Math.sin(u),b=Math.cos(u),S=a[4],C=a[5],I=a[6],O=a[7],F=a[8],B=a[9],G=a[10],Q=a[11];return a!==h&&(h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[4]=S*b+F*f,h[5]=C*b+B*f,h[6]=I*b+G*f,h[7]=O*b+Q*f,h[8]=F*b-S*f,h[9]=B*b-C*f,h[10]=G*b-I*f,h[11]=Q*b-O*f,h},c.b8=function(){const h=new Float32Array(16);return re(h),h},c.b9=function(){const h=new Float64Array(16);return re(h),h},c.bA=function(h,a){const u=bt(h,360),f=bt(a,360),b=f-u,S=f>u?b-360:b+360;return Math.abs(b)<Math.abs(S)?b:S},c.bB=function(h){return h[0]=0,h[1]=0,h[2]=0,h},c.bC=function(h,a,u,f){const b=Math.sqrt(h*h+a*a),S=Math.sqrt(u*u+f*f);h/=b,a/=b,u/=S,f/=S;const C=Math.acos(h*u+a*f);return-a*u+h*f>0?C:-C},c.bD=function(h,a){const u=bt(h,2*Math.PI),f=bt(a,2*Math.PI);return Math.min(Math.abs(u-f),Math.abs(u-f+2*Math.PI),Math.abs(u-f-2*Math.PI))},c.bE=function(){const h={},a=$e.$version;for(const u in $e.$root){const f=$e.$root[u];if(f.required){let b=null;b=u==="version"?a:f.type==="array"?[]:{},b!=null&&(h[u]=b)}}return h},c.bF=Rd,c.bG=Le,c.bH=function h(a,u){if(Array.isArray(a)){if(!Array.isArray(u)||a.length!==u.length)return!1;for(let f=0;f<a.length;f++)if(!h(a[f],u[f]))return!1;return!0}if(typeof a=="object"&&a!==null&&u!==null){if(typeof u!="object"||Object.keys(a).length!==Object.keys(u).length)return!1;for(const f in a)if(!h(a[f],u[f]))return!1;return!0}return a===u},c.bI=function(h){h=h.slice();const a=Object.create(null);for(let u=0;u<h.length;u++)a[h[u].id]=h[u];for(let u=0;u<h.length;u++)"ref"in h[u]&&(h[u]=cr(h[u],a[h[u].ref]));return h},c.bJ=function(h){if(h.type==="custom")return new gZ(h);switch(h.type){case"background":return new pZ(h);case"circle":return new XJ(h);case"color-relief":return new iW(h);case"fill":return new bW(h);case"fill-extrusion":return new IW(h);case"heatmap":return new eW(h);case"hillshade":return new rW(h);case"line":return new FW(h);case"raster":return new mZ(h);case"symbol":return new g0(h)}},c.bK=pt,c.bL=function(h,a){if(!h)return[{command:"setStyle",args:[a]}];let u=[];try{if(!Nt(h.version,a.version))return[{command:"setStyle",args:[a]}];Nt(h.center,a.center)||u.push({command:"setCenter",args:[a.center]}),Nt(h.state,a.state)||u.push({command:"setGlobalState",args:[a.state]}),Nt(h.centerAltitude,a.centerAltitude)||u.push({command:"setCenterAltitude",args:[a.centerAltitude]}),Nt(h.zoom,a.zoom)||u.push({command:"setZoom",args:[a.zoom]}),Nt(h.bearing,a.bearing)||u.push({command:"setBearing",args:[a.bearing]}),Nt(h.pitch,a.pitch)||u.push({command:"setPitch",args:[a.pitch]}),Nt(h.roll,a.roll)||u.push({command:"setRoll",args:[a.roll]}),Nt(h.sprite,a.sprite)||u.push({command:"setSprite",args:[a.sprite]}),Nt(h.glyphs,a.glyphs)||u.push({command:"setGlyphs",args:[a.glyphs]}),Nt(h.transition,a.transition)||u.push({command:"setTransition",args:[a.transition]}),Nt(h.light,a.light)||u.push({command:"setLight",args:[a.light]}),Nt(h.terrain,a.terrain)||u.push({command:"setTerrain",args:[a.terrain]}),Nt(h.sky,a.sky)||u.push({command:"setSky",args:[a.sky]}),Nt(h.projection,a.projection)||u.push({command:"setProjection",args:[a.projection]});const f={},b=[];(function(C,I,O,F){let B;for(B in I=I||{},C=C||{})Object.prototype.hasOwnProperty.call(C,B)&&(Object.prototype.hasOwnProperty.call(I,B)||ut(B,O,F));for(B in I)Object.prototype.hasOwnProperty.call(I,B)&&(Object.prototype.hasOwnProperty.call(C,B)?Nt(C[B],I[B])||(C[B].type==="geojson"&&I[B].type==="geojson"&&Cr(C,I,B)?Ht(O,{command:"setGeoJSONSourceData",args:[B,I[B].data]}):Lt(B,I,O,F)):_r(B,I,O))})(h.sources,a.sources,b,f);const S=[];h.layers&&h.layers.forEach(C=>{"source"in C&&f[C.source]?u.push({command:"removeLayer",args:[C.id]}):S.push(C)}),u=u.concat(b),function(C,I,O){I=I||[];const F=(C=C||[]).map(jt),B=I.map(jt),G=C.reduce(Pr,{}),Q=I.reduce(Pr,{}),ie=F.slice(),se=Object.create(null);let ce,fe,we,Ue,Oe;for(let Ne=0,Qe=0;Ne<F.length;Ne++)ce=F[Ne],Object.prototype.hasOwnProperty.call(Q,ce)?Qe++:(Ht(O,{command:"removeLayer",args:[ce]}),ie.splice(ie.indexOf(ce,Qe),1));for(let Ne=0,Qe=0;Ne<B.length;Ne++)ce=B[B.length-1-Ne],ie[ie.length-1-Ne]!==ce&&(Object.prototype.hasOwnProperty.call(G,ce)?(Ht(O,{command:"removeLayer",args:[ce]}),ie.splice(ie.lastIndexOf(ce,ie.length-Qe),1)):Qe++,Ue=ie[ie.length-Ne],Ht(O,{command:"addLayer",args:[Q[ce],Ue]}),ie.splice(ie.length-Ne,0,ce),se[ce]=!0);for(let Ne=0;Ne<B.length;Ne++)if(ce=B[Ne],fe=G[ce],we=Q[ce],!se[ce]&&!Nt(fe,we))if(Nt(fe.source,we.source)&&Nt(fe["source-layer"],we["source-layer"])&&Nt(fe.type,we.type)){for(Oe in Kt(fe.layout,we.layout,O,ce,null,"setLayoutProperty"),Kt(fe.paint,we.paint,O,ce,null,"setPaintProperty"),Nt(fe.filter,we.filter)||Ht(O,{command:"setFilter",args:[ce,we.filter]}),Nt(fe.minzoom,we.minzoom)&&Nt(fe.maxzoom,we.maxzoom)||Ht(O,{command:"setLayerZoomRange",args:[ce,we.minzoom,we.maxzoom]}),fe)Object.prototype.hasOwnProperty.call(fe,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?Kt(fe[Oe],we[Oe],O,ce,Oe.slice(6),"setPaintProperty"):Nt(fe[Oe],we[Oe])||Ht(O,{command:"setLayerProperty",args:[ce,Oe,we[Oe]]}));for(Oe in we)Object.prototype.hasOwnProperty.call(we,Oe)&&!Object.prototype.hasOwnProperty.call(fe,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?Kt(fe[Oe],we[Oe],O,ce,Oe.slice(6),"setPaintProperty"):Nt(fe[Oe],we[Oe])||Ht(O,{command:"setLayerProperty",args:[ce,Oe,we[Oe]]}))}else Ht(O,{command:"removeLayer",args:[ce]}),Ue=ie[ie.lastIndexOf(ce)+1],Ht(O,{command:"addLayer",args:[we,Ue]})}(S,a.layers,u)}catch(f){console.warn("Unable to compute style diff:",f),u=[{command:"setStyle",args:[a]}]}return u},c.bM=function(h){const a=[],u=h.id;return u===void 0&&a.push({message:`layers.${u}: missing required property "id"`}),h.render===void 0&&a.push({message:`layers.${u}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&a.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),a},c.bN=_t,c.bO=Ve,c.bP=class extends Wi{constructor(h,a){super(h,a),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},c.bQ=ai,c.bR=class extends Wi{constructor(h,a){super(h,a),this.current=Co}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let a=1;a<16;a++)if(h[a]!==this.current[a]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},c.bS=Xn,c.bT=class extends Wi{constructor(h,a){super(h,a),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},c.bU=class extends Wi{constructor(h,a){super(h,a),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},c.bV=X,c.bW=function(h,a){var u=Math.sin(a),f=Math.cos(a);return h[0]=f,h[1]=u,h[2]=0,h[3]=-u,h[4]=f,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},c.bX=function(h,a,u){var f=a[0],b=a[1],S=a[2];return h[0]=f*u[0]+b*u[3]+S*u[6],h[1]=f*u[1]+b*u[4]+S*u[7],h[2]=f*u[2]+b*u[5]+S*u[8],h},c.bY=function(h,a,u,f,b,S,C){var I=1/(a-u),O=1/(f-b),F=1/(S-C);return h[0]=-2*I,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*O,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*F,h[11]=0,h[12]=(a+u)*I,h[13]=(b+f)*O,h[14]=(C+S)*F,h[15]=1,h},c.bZ=class extends Wi{constructor(h,a){super(h,a),this.current=new Array}set(h){if(h!=this.current){this.current=h;const a=new Float32Array(4*h.length);for(let u=0;u<h.length;u++)a[4*u]=h[u].r,a[4*u+1]=h[u].g,a[4*u+2]=h[u].b,a[4*u+3]=h[u].a;this.gl.uniform4fv(this.location,a)}}},c.b_=class extends Wi{constructor(h,a){super(h,a),this.current=new Array}set(h){if(h!=this.current){this.current=h;const a=new Float32Array(h);this.gl.uniform1fv(this.location,a)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(h,a,u){const f=new Float64Array(4);return ve(f,h,a-90,u),f},c.bc=function(h,a,u,f){var b,S,C,I,O,F=a[0],B=a[1],G=a[2],Q=a[3],ie=u[0],se=u[1],ce=u[2],fe=u[3];return(S=F*ie+B*se+G*ce+Q*fe)<0&&(S=-S,ie=-ie,se=-se,ce=-ce,fe=-fe),1-S>$?(b=Math.acos(S),C=Math.sin(b),I=Math.sin((1-f)*b)/C,O=Math.sin(f*b)/C):(I=1-f,O=f),h[0]=I*F+O*ie,h[1]=I*B+O*se,h[2]=I*G+O*ce,h[3]=I*Q+O*fe,h},c.bd=function(h){const a=new Float64Array(9);var u,f,b,S,C,I,O,F,B,G,Q,ie,se,ce,fe,we,Ue,Oe;G=(b=(f=h)[0])*(O=b+b),Q=(S=f[1])*O,se=(C=f[2])*O,ce=C*(F=S+S),we=(I=f[3])*O,Ue=I*F,Oe=I*(B=C+C),(u=a)[0]=1-(ie=S*F)-(fe=C*B),u[3]=Q-Oe,u[6]=se+Ue,u[1]=Q+Oe,u[4]=1-G-fe,u[7]=ce-we,u[2]=se-Ue,u[5]=ce+we,u[8]=1-G-ie;const Ne=lr(-Math.asin(dt(a[2],-1,1)));let Qe,at;return Math.hypot(a[5],a[8])<.001?(Qe=0,at=-lr(Math.atan2(a[3],a[4]))):(Qe=lr(a[5]===0&&a[8]===0?0:Math.atan2(a[5],a[8])),at=lr(a[1]===0&&a[0]===0?0:Math.atan2(a[1],a[0]))),{roll:Qe,pitch:Ne+90,bearing:at}},c.be=function(h,a){return h.roll==a.roll&&h.pitch==a.pitch&&h.bearing==a.bearing},c.bf=Or,c.bg=fa,c.bh=Vd,c.bi=Nm,c.bj=$d,c.bk=qe,c.bl=kt,c.bm=Fi,c.bn=function(h,a,u,f,b){return qe(f,b,dt((h-a)/(u-a),0,1))},c.bo=bt,c.bp=function(){return new Float64Array(3)},c.bq=function(h,a,u,f){return h[0]=a[0]+u[0]*f,h[1]=a[1]+u[1]*f,h[2]=a[2]+u[2]*f,h},c.br=ve,c.bs=function(h,a,u){var f=u[0],b=u[1],S=u[2],C=u[3],I=a[0],O=a[1],F=a[2],B=b*F-S*O,G=S*I-f*F,Q=f*O-b*I;return h[0]=I+C*(B+=B)+b*(Q+=Q)-S*(G+=G),h[1]=O+C*G+S*B-f*Q,h[2]=F+C*Q+f*G-b*B,h},c.bt=function(h,a,u){const f=(b=[h[0],h[1],h[2],a[0],a[1],a[2],u[0],u[1],u[2]])[0]*((B=b[8])*(C=b[4])-(I=b[5])*(F=b[7]))+b[1]*(-B*(S=b[3])+I*(O=b[6]))+b[2]*(F*S-C*O);var b,S,C,I,O,F,B;if(f===0)return null;const G=ue([],[a[0],a[1],a[2]],[u[0],u[1],u[2]]),Q=ue([],[u[0],u[1],u[2]],[h[0],h[1],h[2]]),ie=ue([],[h[0],h[1],h[2]],[a[0],a[1],a[2]]),se=he([],G,-h[3]);return K(se,se,he([],Q,-a[3])),K(se,se,he([],ie,-u[3])),he(se,se,1/f),se},c.bu=iE,c.bv=function(){return new Float64Array(4)},c.bw=function(h,a,u,f){var b=[],S=[];return b[0]=a[0]-u[0],b[1]=a[1]-u[1],b[2]=a[2]-u[2],S[0]=b[0]*Math.cos(f)-b[1]*Math.sin(f),S[1]=b[0]*Math.sin(f)+b[1]*Math.cos(f),S[2]=b[2],h[0]=S[0]+u[0],h[1]=S[1]+u[1],h[2]=S[2]+u[2],h},c.bx=function(h,a,u,f){var b=[],S=[];return b[0]=a[0]-u[0],b[1]=a[1]-u[1],b[2]=a[2]-u[2],S[0]=b[0],S[1]=b[1]*Math.cos(f)-b[2]*Math.sin(f),S[2]=b[1]*Math.sin(f)+b[2]*Math.cos(f),h[0]=S[0]+u[0],h[1]=S[1]+u[1],h[2]=S[2]+u[2],h},c.by=function(h,a,u,f){var b=[],S=[];return b[0]=a[0]-u[0],b[1]=a[1]-u[1],b[2]=a[2]-u[2],S[0]=b[2]*Math.sin(f)+b[0]*Math.cos(f),S[1]=b[1],S[2]=b[2]*Math.cos(f)-b[0]*Math.sin(f),h[0]=S[0]+u[0],h[1]=S[1]+u[1],h[2]=S[2]+u[2],h},c.bz=function(h,a,u){var f=Math.sin(u),b=Math.cos(u),S=a[0],C=a[1],I=a[2],O=a[3],F=a[8],B=a[9],G=a[10],Q=a[11];return a!==h&&(h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[0]=S*b-F*f,h[1]=C*b-B*f,h[2]=I*b-G*f,h[3]=O*b-Q*f,h[8]=S*f+F*b,h[9]=C*f+B*b,h[10]=I*f+G*b,h[11]=O*f+Q*b,h},c.c=ke,c.c0=qW,c.c1=class extends d{},c.c2=zw,c.c3=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},c.c4=_5,c.c5=function(h,a,u){var f=a[0],b=a[1],S=a[2],C=u[3]*f+u[7]*b+u[11]*S+u[15];return h[0]=(u[0]*f+u[4]*b+u[8]*S+u[12])/(C=C||1),h[1]=(u[1]*f+u[5]*b+u[9]*S+u[13])/C,h[2]=(u[2]*f+u[6]*b+u[10]*S+u[14])/C,h},c.c6=class extends Sm{},c.c7=class extends q{},c.c8=function(h,a){return h[0]===a[0]&&h[1]===a[1]&&h[2]===a[2]&&h[3]===a[3]&&h[4]===a[4]&&h[5]===a[5]&&h[6]===a[6]&&h[7]===a[7]&&h[8]===a[8]&&h[9]===a[9]&&h[10]===a[10]&&h[11]===a[11]&&h[12]===a[12]&&h[13]===a[13]&&h[14]===a[14]&&h[15]===a[15]},c.c9=function(h,a){var u=h[0],f=h[1],b=h[2],S=h[3],C=h[4],I=h[5],O=h[6],F=h[7],B=h[8],G=h[9],Q=h[10],ie=h[11],se=h[12],ce=h[13],fe=h[14],we=h[15],Ue=a[0],Oe=a[1],Ne=a[2],Qe=a[3],at=a[4],gt=a[5],Mt=a[6],wt=a[7],Rt=a[8],Zt=a[9],At=a[10],It=a[11],ht=a[12],sr=a[13],dr=a[14],Qt=a[15];return Math.abs(u-Ue)<=$*Math.max(1,Math.abs(u),Math.abs(Ue))&&Math.abs(f-Oe)<=$*Math.max(1,Math.abs(f),Math.abs(Oe))&&Math.abs(b-Ne)<=$*Math.max(1,Math.abs(b),Math.abs(Ne))&&Math.abs(S-Qe)<=$*Math.max(1,Math.abs(S),Math.abs(Qe))&&Math.abs(C-at)<=$*Math.max(1,Math.abs(C),Math.abs(at))&&Math.abs(I-gt)<=$*Math.max(1,Math.abs(I),Math.abs(gt))&&Math.abs(O-Mt)<=$*Math.max(1,Math.abs(O),Math.abs(Mt))&&Math.abs(F-wt)<=$*Math.max(1,Math.abs(F),Math.abs(wt))&&Math.abs(B-Rt)<=$*Math.max(1,Math.abs(B),Math.abs(Rt))&&Math.abs(G-Zt)<=$*Math.max(1,Math.abs(G),Math.abs(Zt))&&Math.abs(Q-At)<=$*Math.max(1,Math.abs(Q),Math.abs(At))&&Math.abs(ie-It)<=$*Math.max(1,Math.abs(ie),Math.abs(It))&&Math.abs(se-ht)<=$*Math.max(1,Math.abs(se),Math.abs(ht))&&Math.abs(ce-sr)<=$*Math.max(1,Math.abs(ce),Math.abs(sr))&&Math.abs(fe-dr)<=$*Math.max(1,Math.abs(fe),Math.abs(dr))&&Math.abs(we-Qt)<=$*Math.max(1,Math.abs(we),Math.abs(Qt))},c.cA=function(h,a){oe.REGISTERED_PROTOCOLS[h]=a},c.cB=function(h){delete oe.REGISTERED_PROTOCOLS[h]},c.cC=function(h,a){const u={};for(let b=0;b<h.length;b++){const S=a&&a[h[b].id]||Cw(h[b]);a&&(a[h[b].id]=S);let C=u[S];C||(C=u[S]=[]),C.push(h[b])}const f=[];for(const b in u)f.push(u[b]);return f},c.cD=zt,c.cE=m3,c.cF=y3,c.cG=J5,c.cH=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=Ke/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const a=h.bucket.layers[0],u=a.layout,f=a._unevaluatedLayout._values,b={layoutIconSize:f["icon-size"].possiblyEvaluate(new yn(h.bucket.zoom+1),h.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new yn(h.bucket.zoom+1),h.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new yn(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:B}=h.bucket.textSizeData;b.compositeTextSizes=[f["text-size"].possiblyEvaluate(new yn(F),h.canonical),f["text-size"].possiblyEvaluate(new yn(B),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:B}=h.bucket.iconSizeData;b.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new yn(F),h.canonical),f["icon-size"].possiblyEvaluate(new yn(B),h.canonical)]}const S=u.get("text-line-height")*gi,C=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",I=u.get("text-keep-upright"),O=u.get("text-size");for(const F of h.bucket.features){const B=u.get("text-font").evaluate(F,{},h.canonical).join(","),G=O.evaluate(F,{},h.canonical),Q=b.layoutTextSize.evaluate(F,{},h.canonical),ie=b.layoutIconSize.evaluate(F,{},h.canonical),se={horizontal:{},vertical:void 0},ce=F.text;let fe,we=[0,0];if(ce){const Ne=ce.toString(),Qe=u.get("text-letter-spacing").evaluate(F,{},h.canonical)*gi,at=Iw(Ne)?Qe:0,gt=u.get("text-anchor").evaluate(F,{},h.canonical),Mt=A3(a,F,h.canonical);if(!Mt){const At=u.get("text-radial-offset").evaluate(F,{},h.canonical);we=At?P3(gt,[At*gi,aE]):u.get("text-offset").evaluate(F,{},h.canonical).map(It=>It*gi)}let wt=C?"center":u.get("text-justify").evaluate(F,{},h.canonical);const Rt=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(F,{},h.canonical)*gi:1/0,Zt=()=>{h.bucket.allowVerticalPlacement&&Id(Ne)&&(se.vertical=p0(ce,h.glyphMap,h.glyphPositions,h.imagePositions,B,Rt,S,gt,"left",at,we,c.ao.vertical,!0,Q,G))};if(!C&&Mt){const At=new Set;if(wt==="auto")for(let ht=0;ht<Mt.values.length;ht+=2)At.add(lE(Mt.values[ht]));else At.add(wt);let It=!1;for(const ht of At)if(!se.horizontal[ht])if(It)se.horizontal[ht]=se.horizontal[0];else{const sr=p0(ce,h.glyphMap,h.glyphPositions,h.imagePositions,B,Rt,S,"center",ht,at,we,c.ao.horizontal,!1,Q,G);sr&&(se.horizontal[ht]=sr,It=sr.positionedLines.length===1)}Zt()}else{wt==="auto"&&(wt=lE(gt));const At=p0(ce,h.glyphMap,h.glyphPositions,h.imagePositions,B,Rt,S,gt,wt,at,we,c.ao.horizontal,!1,Q,G);At&&(se.horizontal[wt]=At),Zt(),Id(Ne)&&C&&I&&(se.vertical=p0(ce,h.glyphMap,h.glyphPositions,h.imagePositions,B,Rt,S,gt,wt,at,we,c.ao.vertical,!1,Q,G))}}let Ue=!1;if(F.icon&&F.icon.name){const Ne=h.imageMap[F.icon.name];Ne&&(fe=cZ(h.imagePositions[F.icon.name],u.get("icon-offset").evaluate(F,{},h.canonical),u.get("icon-anchor").evaluate(F,{},h.canonical)),Ue=!!Ne.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Ue:h.bucket.sdfIcons!==Ue&&Tt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==h.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Oe=I3(se.horizontal)||se.vertical;h.bucket.iconsInText=!!Oe&&Oe.iconsInText,(Oe||fe)&&SZ(h.bucket,F,se,fe,h.imageMap,b,Q,ie,we,Ue,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},c.cI=Jw,c.cJ=Uw,c.cK=Hw,c.cL=k5,c.cM=Zw,c.cN=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},c.cO=function(h,a,u,f,b){return s(this,void 0,void 0,function*(){if(j())try{return yield $r(h,a,u,f,b)}catch{}return function(S,C,I,O,F){const B=S.width,G=S.height;Ir&&Zr||(Ir=new OffscreenCanvas(B,G),Zr=Ir.getContext("2d",{willReadFrequently:!0})),Ir.width=B,Ir.height=G,Zr.drawImage(S,0,0,B,G);const Q=Zr.getImageData(C,I,O,F);return Zr.clearRect(0,0,B,G),Q.data}(h,a,u,f,b)})},c.cP=x5,c.cQ=g,c.cR=O5,c.cS=Ud,c.cT=Eu,c.cU=function(h,a){const u=new Map;if(h!=null)if(h.type==="Feature")u.set(Vm(h,a),h);else for(const f of h.features)u.set(Vm(f,a),f);return u},c.cV=function(h,a){if(h==null)return!0;if(h.type==="Feature")return Vm(h,a)!=null;if(h.type==="FeatureCollection"){const u=new Set;for(const f of h.features){const b=Vm(f,a);if(b==null||u.has(b))return!1;u.add(b)}return!0}return!1},c.cW=function(h,a,u){var f,b,S,C;if(a.removeAll&&h.clear(),a.remove)for(const I of a.remove)h.delete(I);if(a.add)for(const I of a.add){const O=Vm(I,u);O!=null&&h.set(O,I)}if(a.update)for(const I of a.update){let O=h.get(I.id);if(O==null)continue;const F=!I.removeAllProperties&&(((f=I.removeProperties)===null||f===void 0?void 0:f.length)>0||((b=I.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0);if((I.newGeometry||I.removeAllProperties||F)&&(O=Object.assign({},O),h.set(I.id,O),F&&(O.properties=Object.assign({},O.properties))),I.newGeometry&&(O.geometry=I.newGeometry),I.removeAllProperties)O.properties={};else if(((S=I.removeProperties)===null||S===void 0?void 0:S.length)>0)for(const B of I.removeProperties)Object.prototype.hasOwnProperty.call(O.properties,B)&&delete O.properties[B];if(((C=I.addOrUpdateProperties)===null||C===void 0?void 0:C.length)>0)for(const{key:B,value:G}of I.addOrUpdateProperties)O.properties[B]=G}},c.cX=$o,c.ca=function(h,a){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},c.cb=h=>h.type==="symbol",c.cc=h=>h.type==="circle",c.cd=h=>h.type==="heatmap",c.ce=h=>h.type==="line",c.cf=h=>h.type==="fill",c.cg=h=>h.type==="fill-extrusion",c.ch=h=>h.type==="hillshade",c.ci=h=>h.type==="color-relief",c.cj=h=>h.type==="raster",c.ck=h=>h.type==="background",c.cl=h=>h.type==="custom",c.cm=Jt,c.cn=function(h,a,u){const f=tt(a.x-u.x,a.y-u.y),b=tt(h.x-u.x,h.y-u.y);var S,C;return lr(Math.atan2(f[0]*b[1]-f[1]*b[0],(S=f)[0]*(C=b)[0]+S[1]*C[1]))},c.co=Pt,c.cp=function(h,a){return mr[a]&&(h instanceof MouseEvent||h instanceof WheelEvent)},c.cq=function(h,a){return nr[a]&&"touches"in h},c.cr=function(h){return nr[h]||mr[h]},c.cs=function(h,a,u){var f=a[0],b=a[1];return h[0]=u[0]*f+u[4]*b+u[12],h[1]=u[1]*f+u[5]*b+u[13],h},c.ct=function(h,a){const{x:u,y:f}=$m.fromLngLat(a);return!(h<0||h>25||f<0||f>=1||u<0||u>=1)},c.cu=function(h,a){return h[0]=a[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=a[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=a[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},c.cv=class extends oc{},c.cw=PZ,c.cy=function(h){return h.message===Yr},c.cz=Te,c.d=Je,c.e=Wt,c.f=h=>s(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const a=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(a)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=ae,c.h=h=>new Promise((a,u)=>{const f=new Image;f.onload=()=>{a(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=xr})},f.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const b=new Blob([new Uint8Array(h)],{type:"image/png"});f.src=h.byteLength?URL.createObjectURL(b):xr}),c.i=Dt,c.j=(h,a)=>je(Wt(h,{type:"json"}),a),c.k=it,c.l=ct,c.m=je,c.n=(h,a)=>je(Wt(h,{type:"arrayBuffer"}),a),c.o=function(h){return new Zw(h).readFields(XW,[])},c.p=H5,c.q=Mm,c.r=Hi,c.s=yr,c.t=r0,c.u=jr,c.v=$e,c.w=Tt,c.x=Pw,c.y=Iu,c.z=tc}),i("worker",["./shared"],function(c){class s{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,ae){for(const Te of oe){this._layerConfigs[Te.id]=Te;const Le=this._layers[Te.id]=c.bJ(Te);Le._featureFilter=c.aa(Le.filter),this.keyCache[Te.id]&&delete this.keyCache[Te.id]}for(const Te of ae)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const de=c.cC(Object.values(this._layerConfigs),this.keyCache);for(const Te of de){const Le=Te.map(it=>this._layers[it.id]),je=Le[0];if(je.visibility==="none")continue;const Je=je.source||"";let Fe=this.familiesBySource[Je];Fe||(Fe=this.familiesBySource[Je]={});const et=je.sourceLayer||"_geojsonTileLayer";let ct=Fe[et];ct||(ct=Fe[et]=[]),ct.push(Le)}}}class p{constructor(oe){const ae={},de=[];for(const Je in oe){const Fe=oe[Je],et=ae[Je]={};for(const ct in Fe){const it=Fe[+ct];if(!it||it.bitmap.width===0||it.bitmap.height===0)continue;const Ot={x:0,y:0,w:it.bitmap.width+2,h:it.bitmap.height+2};de.push(Ot),et[ct]={rect:Ot,metrics:it.metrics}}}const{w:Te,h:Le}=c.p(de),je=new c.q({width:Te||1,height:Le||1});for(const Je in oe){const Fe=oe[Je];for(const et in Fe){const ct=Fe[+et];if(!ct||ct.bitmap.width===0||ct.bitmap.height===0)continue;const it=ae[Je][et].rect;c.q.copy(ct.bitmap,je,{x:0,y:0},{x:it.x+1,y:it.y+1},ct.bitmap)}}this.image=je,this.positions=ae}}c.cD("GlyphAtlas",p);class g{constructor(oe){this.tileID=new c.Z(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.globalState=oe.globalState}parse(oe,ae,de,Te,Le){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=oe,this.collisionBoxArray=new c.a8;const je=new c.cE(Object.keys(oe.layers).sort()),Je=new c.cF(this.tileID,this.promoteId);Je.bucketLayerIDs=[];const Fe={},et={featureIndex:Je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:de,subdivisionGranularity:Le},ct=ae.familiesBySource[this.source];for(const Kt in ct){const jt=oe.layers[Kt];if(!jt)continue;jt.version===1&&c.w(`Vector tile source "${this.source}" layer "${Kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pr=je.encode(Kt),yt=[];for(let In=0;In<jt.length;In++){const vn=jt.feature(In),mn=Je.getId(vn,Kt);yt.push({feature:vn,id:mn,index:In,sourceLayerIndex:Pr})}for(const In of ct[Kt]){const vn=In[0];vn.source!==this.source&&c.w(`layer.source = ${vn.source} does not equal this.source = ${this.source}`),vn.minzoom&&this.zoom<Math.floor(vn.minzoom)||vn.maxzoom&&this.zoom>=vn.maxzoom||vn.visibility!=="none"&&(_(In,this.zoom,de,this.globalState),(Fe[vn.id]=vn.createBucket({index:Je.bucketLayerIDs.length,layers:In,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pr,sourceID:this.source,globalState:this.globalState})).populate(yt,et,this.tileID.canonical),Je.bucketLayerIDs.push(In.map(mn=>mn.id)))}}const it=c.bN(et.glyphDependencies,Kt=>Object.keys(Kt).map(Number));this.inFlightDependencies.forEach(Kt=>Kt?.abort()),this.inFlightDependencies=[];let Ot=Promise.resolve({});if(Object.keys(it).length){const Kt=new AbortController;this.inFlightDependencies.push(Kt),Ot=Te.sendAsync({type:"GG",data:{stacks:it,source:this.source,tileID:this.tileID,type:"glyphs"}},Kt)}const $e=Object.keys(et.iconDependencies);let Xt=Promise.resolve({});if($e.length){const Kt=new AbortController;this.inFlightDependencies.push(Kt),Xt=Te.sendAsync({type:"GI",data:{icons:$e,source:this.source,tileID:this.tileID,type:"icons"}},Kt)}const cr=Object.keys(et.patternDependencies);let Nt=Promise.resolve({});if(cr.length){const Kt=new AbortController;this.inFlightDependencies.push(Kt),Nt=Te.sendAsync({type:"GI",data:{icons:cr,source:this.source,tileID:this.tileID,type:"patterns"}},Kt)}const[Ht,_r,ut]=yield Promise.all([Ot,Xt,Nt]),Lt=new p(Ht),Cr=new c.cG(_r,ut);for(const Kt in Fe){const jt=Fe[Kt];jt instanceof c.a9?(_(jt.layers,this.zoom,de,this.globalState),c.cH({bucket:jt,glyphMap:Ht,glyphPositions:Lt.positions,imageMap:_r,imagePositions:Cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:et.subdivisionGranularity})):jt.hasPattern&&(jt instanceof c.cI||jt instanceof c.cJ||jt instanceof c.cK)&&(_(jt.layers,this.zoom,de,this.globalState),jt.addFeatures(et,this.tileID.canonical,Cr.patternPositions))}return this.status="done",{buckets:Object.values(Fe).filter(Kt=>!Kt.isEmpty()),featureIndex:Je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lt.image,imageAtlas:Cr,glyphMap:this.returnDependencies?Ht:null,iconMap:this.returnDependencies?_r:null,glyphPositions:this.returnDependencies?Lt.positions:null}})}}function _(ke,oe,ae,de){const Te=new c.F(oe,{globalState:de});for(const Le of ke)Le.recalculate(Te,ae)}class x{constructor(oe,ae,de){this.actor=oe,this.layerIndex=ae,this.availableImages=de,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(oe,ae){return c._(this,void 0,void 0,function*(){const de=yield c.n(oe.request,ae);try{return{vectorTile:new c.cL(new c.cM(de.data)),rawData:de.data,cacheControl:de.cacheControl,expires:de.expires}}catch(Te){const Le=new Uint8Array(de.data);let je=`Unable to parse the tile at ${oe.request.url}, `;throw je+=Le[0]===31&&Le[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Te.message}`,new Error(je)}})}loadTile(oe){return c._(this,void 0,void 0,function*(){const ae=oe.uid,de=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.cN(oe.request),Te=new g(oe);this.loading[ae]=Te;const Le=new AbortController;Te.abort=Le;try{const je=yield this.loadVectorTile(oe,Le);if(delete this.loading[ae],!je)return null;const Je=je.rawData,Fe={};je.expires&&(Fe.expires=je.expires),je.cacheControl&&(Fe.cacheControl=je.cacheControl);const et={};if(de){const it=de.finish();it&&(et.resourceTiming=JSON.parse(JSON.stringify(it)))}Te.vectorTile=je.vectorTile;const ct=Te.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity);this.loaded[ae]=Te,this.fetching[ae]={rawTileData:Je,cacheControl:Fe,resourceTiming:et};try{const it=yield ct;return c.e({rawTileData:Je.slice(0)},it,Fe,et)}finally{delete this.fetching[ae]}}catch(je){throw delete this.loading[ae],Te.status="done",this.loaded[ae]=Te,je}})}reloadTile(oe){return c._(this,void 0,void 0,function*(){const ae=oe.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const de=this.loaded[ae];if(de.showCollisionBoxes=oe.showCollisionBoxes,de.globalState=oe.globalState,de.status==="parsing"){const Te=yield de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity);let Le;if(this.fetching[ae]){const{rawTileData:je,cacheControl:Je,resourceTiming:Fe}=this.fetching[ae];delete this.fetching[ae],Le=c.e({rawTileData:je.slice(0)},Te,Je,Fe)}else Le=Te;return Le}if(de.status==="done"&&de.vectorTile)return de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity)})}abortTile(oe){return c._(this,void 0,void 0,function*(){const ae=this.loading,de=oe.uid;ae&&ae[de]&&ae[de].abort&&(ae[de].abort.abort(),delete ae[de])})}removeTile(oe){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[oe.uid]&&delete this.loaded[oe.uid]})}}class P{constructor(){this.loaded={}}loadTile(oe){return c._(this,void 0,void 0,function*(){const{uid:ae,encoding:de,rawImageData:Te,redFactor:Le,greenFactor:je,blueFactor:Je,baseShift:Fe}=oe,et=Te.width+2,ct=Te.height+2,it=c.b(Te)?new c.R({width:et,height:ct},yield c.cO(Te,-1,-1,et,ct)):Te,Ot=new c.cP(ae,it,de,Le,je,Je,Fe);return this.loaded=this.loaded||{},this.loaded[ae]=Ot,Ot})}removeTile(oe){const ae=this.loaded,de=oe.uid;ae&&ae[de]&&delete ae[de]}}var A,M,N=function(){if(M)return A;function ke(ae,de){if(ae.length!==0){oe(ae[0],de);for(var Te=1;Te<ae.length;Te++)oe(ae[Te],!de)}}function oe(ae,de){for(var Te=0,Le=0,je=0,Je=ae.length,Fe=Je-1;je<Je;Fe=je++){var et=(ae[je][0]-ae[Fe][0])*(ae[Fe][1]+ae[je][1]),ct=Te+et;Le+=Math.abs(Te)>=Math.abs(et)?Te-ct+et:et-ct+Te,Te=ct}Te+Le>=0!=!!de&&ae.reverse()}return M=1,A=function ae(de,Te){var Le,je=de&&de.type;if(je==="FeatureCollection")for(Le=0;Le<de.features.length;Le++)ae(de.features[Le],Te);else if(je==="GeometryCollection")for(Le=0;Le<de.geometries.length;Le++)ae(de.geometries[Le],Te);else if(je==="Feature")ae(de.geometry,Te);else if(je==="Polygon")ke(de.coordinates,Te);else if(je==="MultiPolygon")for(Le=0;Le<de.coordinates.length;Le++)ke(de.coordinates[Le],Te);return de}}(),z=c.cQ(N);class j extends c.cS{constructor(oe,ae){super(new c.cM,0,ae,[],[]),this.feature=oe,this.type=oe.type,this.properties=oe.tags?oe.tags:{},"id"in oe&&(typeof oe.id=="string"?this.id=parseInt(oe.id,10):typeof oe.id!="number"||isNaN(oe.id)||(this.id=oe.id))}loadGeometry(){const oe=[],ae=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const de of ae){const Te=[];for(const Le of de)Te.push(new c.P(Le[0],Le[1]));oe.push(Te)}return oe}}class $ extends c.cR{constructor(oe,ae){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ae?ae.version:1,this.extent=ae?ae.extent:4096,this.length=oe.length,this.features=oe}feature(oe){return new j(this.features[oe],this.extent)}}function J(ke,oe){oe.writeVarintField(15,ke.version||1),oe.writeStringField(1,ke.name||""),oe.writeVarintField(5,ke.extent||4096);const ae={keys:[],values:[],keycache:{},valuecache:{}};for(let Le=0;Le<ke.length;Le++)ae.feature=ke.feature(Le),oe.writeMessage(2,X,ae);const de=ae.keys;for(const Le of de)oe.writeStringField(3,Le);const Te=ae.values;for(const Le of Te)oe.writeMessage(4,K,Le)}function X(ke,oe){if(!ke.feature)return;const ae=ke.feature;ae.id!==void 0&&oe.writeVarintField(1,ae.id),oe.writeMessage(2,re,ke),oe.writeVarintField(3,ae.type),oe.writeMessage(4,U,ae)}function re(ke,oe){for(const ae in ke.feature?.properties){let de=ke.feature.properties[ae],Te=ke.keycache[ae];if(de===null)continue;Te===void 0&&(ke.keys.push(ae),Te=ke.keys.length-1,ke.keycache[ae]=Te),oe.writeVarint(Te),typeof de!="string"&&typeof de!="boolean"&&typeof de!="number"&&(de=JSON.stringify(de));const Le=typeof de+":"+de;let je=ke.valuecache[Le];je===void 0&&(ke.values.push(de),je=ke.values.length-1,ke.valuecache[Le]=je),oe.writeVarint(je)}}function ne(ke,oe){return(oe<<3)+(7&ke)}function Z(ke){return ke<<1^ke>>31}function U(ke,oe){const ae=ke.loadGeometry(),de=ke.type;let Te=0,Le=0;for(const je of ae){let Je=1;de===1&&(Je=je.length),oe.writeVarint(ne(1,Je));const Fe=de===3?je.length-1:je.length;for(let et=0;et<Fe;et++){et===1&&de!==1&&oe.writeVarint(ne(2,Fe-1));const ct=je[et].x-Te,it=je[et].y-Le;oe.writeVarint(Z(ct)),oe.writeVarint(Z(it)),Te+=ct,Le+=it}ke.type===3&&oe.writeVarint(ne(7,1))}}function K(ke,oe){const ae=typeof ke;ae==="string"?oe.writeStringField(1,ke):ae==="boolean"?oe.writeBooleanField(7,ke):ae==="number"&&(ke%1!=0?oe.writeDoubleField(3,ke):ke<0?oe.writeSVarintField(6,ke):oe.writeVarintField(5,ke))}const he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},ue=Math.fround||(Ee=new Float32Array(1),ke=>(Ee[0]=+ke,Ee[0]));var Ee;class Ie{constructor(oe){this.options=Object.assign(Object.create(he),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:ae,minZoom:de,maxZoom:Te}=this.options;ae&&console.time("total time");const Le=`prepare ${oe.length} points`;ae&&console.time(Le),this.points=oe;const je=[];for(let Fe=0;Fe<oe.length;Fe++){const et=oe[Fe];if(!et.geometry)continue;const[ct,it]=et.geometry.coordinates,Ot=ue(ve(ct)),$e=ue(xe(it));je.push(Ot,$e,1/0,Fe,-1,1),this.options.reduce&&je.push(0)}let Je=this.trees[Te+1]=this._createTree(je);ae&&console.timeEnd(Le);for(let Fe=Te;Fe>=de;Fe--){const et=+Date.now();Je=this.trees[Fe]=this._createTree(this._cluster(Je,Fe)),ae&&console.log("z%d: %d clusters in %dms",Fe,Je.numItems,+Date.now()-et)}return ae&&console.timeEnd("total time"),this}getClusters(oe,ae){let de=((oe[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,oe[1]));let Le=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)de=-180,Le=180;else if(de>Le){const it=this.getClusters([de,Te,180,je],ae),Ot=this.getClusters([-180,Te,Le,je],ae);return it.concat(Ot)}const Je=this.trees[this._limitZoom(ae)],Fe=Je.range(ve(de),xe(je),ve(Le),xe(Te)),et=Je.data,ct=[];for(const it of Fe){const Ot=this.stride*it;ct.push(et[Ot+5]>1?ee(et,Ot,this.clusterProps):this.points[et[Ot+3]])}return ct}getChildren(oe){const ae=this._getOriginId(oe),de=this._getOriginZoom(oe),Te="No cluster with the specified id.",Le=this.trees[de];if(!Le)throw new Error(Te);const je=Le.data;if(ae*this.stride>=je.length)throw new Error(Te);const Je=this.options.radius/(this.options.extent*Math.pow(2,de-1)),Fe=Le.within(je[ae*this.stride],je[ae*this.stride+1],Je),et=[];for(const ct of Fe){const it=ct*this.stride;je[it+4]===oe&&et.push(je[it+5]>1?ee(je,it,this.clusterProps):this.points[je[it+3]])}if(et.length===0)throw new Error(Te);return et}getLeaves(oe,ae,de){const Te=[];return this._appendLeaves(Te,oe,ae=ae||10,de=de||0,0),Te}getTile(oe,ae,de){const Te=this.trees[this._limitZoom(oe)],Le=Math.pow(2,oe),{extent:je,radius:Je}=this.options,Fe=Je/je,et=(de-Fe)/Le,ct=(de+1+Fe)/Le,it={features:[]};return this._addTileFeatures(Te.range((ae-Fe)/Le,et,(ae+1+Fe)/Le,ct),Te.data,ae,de,Le,it),ae===0&&this._addTileFeatures(Te.range(1-Fe/Le,et,1,ct),Te.data,Le,de,Le,it),ae===Le-1&&this._addTileFeatures(Te.range(0,et,Fe/Le,ct),Te.data,-1,de,Le,it),it.features.length?it:null}getClusterExpansionZoom(oe){let ae=this._getOriginZoom(oe)-1;for(;ae<=this.options.maxZoom;){const de=this.getChildren(oe);if(ae++,de.length!==1)break;oe=de[0].properties.cluster_id}return ae}_appendLeaves(oe,ae,de,Te,Le){const je=this.getChildren(ae);for(const Je of je){const Fe=Je.properties;if(Fe&&Fe.cluster?Le+Fe.point_count<=Te?Le+=Fe.point_count:Le=this._appendLeaves(oe,Fe.cluster_id,de,Te,Le):Le<Te?Le++:oe.push(Je),oe.length===de)break}return Le}_createTree(oe){const ae=new c.aI(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let de=0;de<oe.length;de+=this.stride)ae.add(oe[de],oe[de+1]);return ae.finish(),ae.data=oe,ae}_addTileFeatures(oe,ae,de,Te,Le,je){for(const Je of oe){const Fe=Je*this.stride,et=ae[Fe+5]>1;let ct,it,Ot;if(et)ct=pe(ae,Fe,this.clusterProps),it=ae[Fe],Ot=ae[Fe+1];else{const cr=this.points[ae[Fe+3]];ct=cr.properties;const[Nt,Ht]=cr.geometry.coordinates;it=ve(Nt),Ot=xe(Ht)}const $e={type:1,geometry:[[Math.round(this.options.extent*(it*Le-de)),Math.round(this.options.extent*(Ot*Le-Te))]],tags:ct};let Xt;Xt=et||this.options.generateId?ae[Fe+3]:this.points[ae[Fe+3]].id,Xt!==void 0&&($e.id=Xt),je.features.push($e)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,ae){const{radius:de,extent:Te,reduce:Le,minPoints:je}=this.options,Je=de/(Te*Math.pow(2,ae)),Fe=oe.data,et=[],ct=this.stride;for(let it=0;it<Fe.length;it+=ct){if(Fe[it+2]<=ae)continue;Fe[it+2]=ae;const Ot=Fe[it],$e=Fe[it+1],Xt=oe.within(Fe[it],Fe[it+1],Je),cr=Fe[it+5];let Nt=cr;for(const Ht of Xt){const _r=Ht*ct;Fe[_r+2]>ae&&(Nt+=Fe[_r+5])}if(Nt>cr&&Nt>=je){let Ht,_r=Ot*cr,ut=$e*cr,Lt=-1;const Cr=(it/ct<<5)+(ae+1)+this.points.length;for(const Kt of Xt){const jt=Kt*ct;if(Fe[jt+2]<=ae)continue;Fe[jt+2]=ae;const Pr=Fe[jt+5];_r+=Fe[jt]*Pr,ut+=Fe[jt+1]*Pr,Fe[jt+4]=Cr,Le&&(Ht||(Ht=this._map(Fe,it,!0),Lt=this.clusterProps.length,this.clusterProps.push(Ht)),Le(Ht,this._map(Fe,jt)))}Fe[it+4]=Cr,et.push(_r/Nt,ut/Nt,1/0,Cr,-1,Nt),Le&&et.push(Lt)}else{for(let Ht=0;Ht<ct;Ht++)et.push(Fe[it+Ht]);if(Nt>1)for(const Ht of Xt){const _r=Ht*ct;if(!(Fe[_r+2]<=ae)){Fe[_r+2]=ae;for(let ut=0;ut<ct;ut++)et.push(Fe[_r+ut])}}}}return et}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,ae,de){if(oe[ae+5]>1){const je=this.clusterProps[oe[ae+6]];return de?Object.assign({},je):je}const Te=this.points[oe[ae+3]].properties,Le=this.options.map(Te);return de&&Le===Te?Object.assign({},Le):Le}}function ee(ke,oe,ae){return{type:"Feature",id:ke[oe+3],properties:pe(ke,oe,ae),geometry:{type:"Point",coordinates:[(de=ke[oe],360*(de-.5)),tt(ke[oe+1])]}};var de}function pe(ke,oe,ae){const de=ke[oe+5],Te=de>=1e4?`${Math.round(de/1e3)}k`:de>=1e3?Math.round(de/100)/10+"k":de,Le=ke[oe+6],je=Le===-1?{}:Object.assign({},ae[Le]);return Object.assign(je,{cluster:!0,cluster_id:ke[oe+3],point_count:de,point_count_abbreviated:Te})}function ve(ke){return ke/360+.5}function xe(ke){const oe=Math.sin(ke*Math.PI/180),ae=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ae<0?0:ae>1?1:ae}function tt(ke){const oe=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Ke(ke,oe,ae,de){let Te=de;const Le=oe+(ae-oe>>1);let je,Je=ae-oe;const Fe=ke[oe],et=ke[oe+1],ct=ke[ae],it=ke[ae+1];for(let Ot=oe+3;Ot<ae;Ot+=3){const $e=Ze(ke[Ot],ke[Ot+1],Fe,et,ct,it);if($e>Te)je=Ot,Te=$e;else if($e===Te){const Xt=Math.abs(Ot-Le);Xt<Je&&(je=Ot,Je=Xt)}}Te>de&&(je-oe>3&&Ke(ke,oe,je,de),ke[je+2]=Te,ae-je>3&&Ke(ke,je,ae,de))}function Ze(ke,oe,ae,de,Te,Le){let je=Te-ae,Je=Le-de;if(je!==0||Je!==0){const Fe=((ke-ae)*je+(oe-de)*Je)/(je*je+Je*Je);Fe>1?(ae=Te,de=Le):Fe>0&&(ae+=je*Fe,de+=Je*Fe)}return je=ke-ae,Je=oe-de,je*je+Je*Je}function bt(ke,oe,ae,de){const Te={id:ke??null,type:oe,geometry:ae,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(oe==="Point"||oe==="MultiPoint"||oe==="LineString")qe(Te,ae);else if(oe==="Polygon")qe(Te,ae[0]);else if(oe==="MultiLineString")for(const Le of ae)qe(Te,Le);else if(oe==="MultiPolygon")for(const Le of ae)qe(Te,Le[0]);return Te}function qe(ke,oe){for(let ae=0;ae<oe.length;ae+=3)ke.minX=Math.min(ke.minX,oe[ae]),ke.minY=Math.min(ke.minY,oe[ae+1]),ke.maxX=Math.max(ke.maxX,oe[ae]),ke.maxY=Math.max(ke.maxY,oe[ae+1])}function kt(ke,oe,ae,de){if(!oe.geometry)return;const Te=oe.geometry.coordinates;if(Te&&Te.length===0)return;const Le=oe.geometry.type,je=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let Je=[],Fe=oe.id;if(ae.promoteId?Fe=oe.properties[ae.promoteId]:ae.generateId&&(Fe=de||0),Le==="Point")Jt(Te,Je);else if(Le==="MultiPoint")for(const et of Te)Jt(et,Je);else if(Le==="LineString")Pt(Te,Je,je,!1);else if(Le==="MultiLineString"){if(ae.lineMetrics){for(const et of Te)Je=[],Pt(et,Je,je,!1),ke.push(bt(Fe,"LineString",Je,oe.properties));return}dt(Te,Je,je,!1)}else if(Le==="Polygon")dt(Te,Je,je,!0);else{if(Le!=="MultiPolygon"){if(Le==="GeometryCollection"){for(const et of oe.geometry.geometries)kt(ke,{id:Fe,geometry:et,properties:oe.properties},ae,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const et of Te){const ct=[];dt(et,ct,je,!0),Je.push(ct)}}ke.push(bt(Fe,Le,Je,oe.properties))}function Jt(ke,oe){oe.push(er(ke[0]),Wt(ke[1]),0)}function Pt(ke,oe,ae,de){let Te,Le,je=0;for(let Fe=0;Fe<ke.length;Fe++){const et=er(ke[Fe][0]),ct=Wt(ke[Fe][1]);oe.push(et,ct,0),Fe>0&&(je+=de?(Te*ct-et*Le)/2:Math.sqrt(Math.pow(et-Te,2)+Math.pow(ct-Le,2))),Te=et,Le=ct}const Je=oe.length-3;oe[2]=1,Ke(oe,0,Je,ae),oe[Je+2]=1,oe.size=Math.abs(je),oe.start=0,oe.end=oe.size}function dt(ke,oe,ae,de){for(let Te=0;Te<ke.length;Te++){const Le=[];Pt(ke[Te],Le,ae,de),oe.push(Le)}}function er(ke){return ke/360+.5}function Wt(ke){const oe=Math.sin(ke*Math.PI/180),ae=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ae<0?0:ae>1?1:ae}function ar(ke,oe,ae,de,Te,Le,je,Je){if(de/=oe,Le>=(ae/=oe)&&je<de)return ke;if(je<ae||Le>=de)return null;const Fe=[];for(const et of ke){const ct=et.geometry;let it=et.type;const Ot=Te===0?et.minX:et.minY,$e=Te===0?et.maxX:et.maxY;if(Ot>=ae&&$e<de){Fe.push(et);continue}if($e<ae||Ot>=de)continue;let Xt=[];if(it==="Point"||it==="MultiPoint")_t(ct,Xt,ae,de,Te);else if(it==="LineString")Ve(ct,Xt,ae,de,Te,!1,Je.lineMetrics);else if(it==="MultiLineString")lt(ct,Xt,ae,de,Te,!1);else if(it==="Polygon")lt(ct,Xt,ae,de,Te,!0);else if(it==="MultiPolygon")for(const cr of ct){const Nt=[];lt(cr,Nt,ae,de,Te,!0),Nt.length&&Xt.push(Nt)}if(Xt.length){if(Je.lineMetrics&&it==="LineString"){for(const cr of Xt)Fe.push(bt(et.id,it,cr,et.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(Xt.length===1?(it="LineString",Xt=Xt[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=Xt.length===3?"Point":"MultiPoint"),Fe.push(bt(et.id,it,Xt,et.tags))}}return Fe.length?Fe:null}function _t(ke,oe,ae,de,Te){for(let Le=0;Le<ke.length;Le+=3){const je=ke[Le+Te];je>=ae&&je<=de&&Tt(oe,ke[Le],ke[Le+1],ke[Le+2])}}function Ve(ke,oe,ae,de,Te,Le,je){let Je=pt(ke);const Fe=Te===0?vt:Dt;let et,ct,it=ke.start;for(let Nt=0;Nt<ke.length-3;Nt+=3){const Ht=ke[Nt],_r=ke[Nt+1],ut=ke[Nt+2],Lt=ke[Nt+3],Cr=ke[Nt+4],Kt=Te===0?Ht:_r,jt=Te===0?Lt:Cr;let Pr=!1;je&&(et=Math.sqrt(Math.pow(Ht-Lt,2)+Math.pow(_r-Cr,2))),Kt<ae?jt>ae&&(ct=Fe(Je,Ht,_r,Lt,Cr,ae),je&&(Je.start=it+et*ct)):Kt>de?jt<de&&(ct=Fe(Je,Ht,_r,Lt,Cr,de),je&&(Je.start=it+et*ct)):Tt(Je,Ht,_r,ut),jt<ae&&Kt>=ae&&(ct=Fe(Je,Ht,_r,Lt,Cr,ae),Pr=!0),jt>de&&Kt<=de&&(ct=Fe(Je,Ht,_r,Lt,Cr,de),Pr=!0),!Le&&Pr&&(je&&(Je.end=it+et*ct),oe.push(Je),Je=pt(ke)),je&&(it+=et)}let Ot=ke.length-3;const $e=ke[Ot],Xt=ke[Ot+1],cr=Te===0?$e:Xt;cr>=ae&&cr<=de&&Tt(Je,$e,Xt,ke[Ot+2]),Ot=Je.length-3,Le&&Ot>=3&&(Je[Ot]!==Je[0]||Je[Ot+1]!==Je[1])&&Tt(Je,Je[0],Je[1],Je[2]),Je.length&&oe.push(Je)}function pt(ke){const oe=[];return oe.size=ke.size,oe.start=ke.start,oe.end=ke.end,oe}function lt(ke,oe,ae,de,Te,Le){for(const je of ke)Ve(je,oe,ae,de,Te,Le,!1)}function Tt(ke,oe,ae,de){ke.push(oe,ae,de)}function vt(ke,oe,ae,de,Te,Le){const je=(Le-oe)/(de-oe);return Tt(ke,Le,ae+(Te-ae)*je,1),je}function Dt(ke,oe,ae,de,Te,Le){const je=(Le-ae)/(Te-ae);return Tt(ke,oe+(de-oe)*je,Le,1),je}function Yt(ke,oe){const ae=[];for(let de=0;de<ke.length;de++){const Te=ke[de],Le=Te.type;let je;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")je=Bt(Te.geometry,oe);else if(Le==="MultiLineString"||Le==="Polygon"){je=[];for(const Je of Te.geometry)je.push(Bt(Je,oe))}else if(Le==="MultiPolygon"){je=[];for(const Je of Te.geometry){const Fe=[];for(const et of Je)Fe.push(Bt(et,oe));je.push(Fe)}}ae.push(bt(Te.id,Le,je,Te.tags))}return ae}function Bt(ke,oe){const ae=[];ae.size=ke.size,ke.start!==void 0&&(ae.start=ke.start,ae.end=ke.end);for(let de=0;de<ke.length;de+=3)ae.push(ke[de]+oe,ke[de+1],ke[de+2]);return ae}function xr(ke,oe){if(ke.transformed)return ke;const ae=1<<ke.z,de=ke.x,Te=ke.y;for(const Le of ke.features){const je=Le.geometry,Je=Le.type;if(Le.geometry=[],Je===1)for(let Fe=0;Fe<je.length;Fe+=2)Le.geometry.push($r(je[Fe],je[Fe+1],oe,ae,de,Te));else for(let Fe=0;Fe<je.length;Fe++){const et=[];for(let ct=0;ct<je[Fe].length;ct+=2)et.push($r(je[Fe][ct],je[Fe][ct+1],oe,ae,de,Te));Le.geometry.push(et)}}return ke.transformed=!0,ke}function $r(ke,oe,ae,de,Te,Le){return[Math.round(ae*(ke*de-Te)),Math.round(ae*(oe*de-Le))]}function Ir(ke,oe,ae,de,Te){const Le=oe===Te.maxZoom?0:Te.tolerance/((1<<oe)*Te.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:ae,y:de,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Je of ke)Zr(je,Je,Le,Te);return je}function Zr(ke,oe,ae,de){const Te=oe.geometry,Le=oe.type,je=[];if(ke.minX=Math.min(ke.minX,oe.minX),ke.minY=Math.min(ke.minY,oe.minY),ke.maxX=Math.max(ke.maxX,oe.maxX),ke.maxY=Math.max(ke.maxY,oe.maxY),Le==="Point"||Le==="MultiPoint")for(let Je=0;Je<Te.length;Je+=3)je.push(Te[Je],Te[Je+1]),ke.numPoints++,ke.numSimplified++;else if(Le==="LineString")yr(je,Te,ke,ae,!1,!1);else if(Le==="MultiLineString"||Le==="Polygon")for(let Je=0;Je<Te.length;Je++)yr(je,Te[Je],ke,ae,Le==="Polygon",Je===0);else if(Le==="MultiPolygon")for(let Je=0;Je<Te.length;Je++){const Fe=Te[Je];for(let et=0;et<Fe.length;et++)yr(je,Fe[et],ke,ae,!0,et===0)}if(je.length){let Je=oe.tags||null;if(Le==="LineString"&&de.lineMetrics){Je={};for(const et in oe.tags)Je[et]=oe.tags[et];Je.mapbox_clip_start=Te.start/Te.size,Je.mapbox_clip_end=Te.end/Te.size}const Fe={geometry:je,type:Le==="Polygon"||Le==="MultiPolygon"?3:Le==="LineString"||Le==="MultiLineString"?2:1,tags:Je};oe.id!==null&&(Fe.id=oe.id),ke.features.push(Fe)}}function yr(ke,oe,ae,de,Te,Le){const je=de*de;if(de>0&&oe.size<(Te?je:de))return void(ae.numPoints+=oe.length/3);const Je=[];for(let Fe=0;Fe<oe.length;Fe+=3)(de===0||oe[Fe+2]>je)&&(ae.numSimplified++,Je.push(oe[Fe],oe[Fe+1])),ae.numPoints++;Te&&function(Fe,et){let ct=0;for(let it=0,Ot=Fe.length,$e=Ot-2;it<Ot;$e=it,it+=2)ct+=(Fe[it]-Fe[$e])*(Fe[it+1]+Fe[$e+1]);if(ct>0===et)for(let it=0,Ot=Fe.length;it<Ot/2;it+=2){const $e=Fe[it],Xt=Fe[it+1];Fe[it]=Fe[Ot-2-it],Fe[it+1]=Fe[Ot-1-it],Fe[Ot-2-it]=$e,Fe[Ot-1-it]=Xt}}(Je,Le),ke.push(Je)}const ur={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class lr{constructor(oe,ae){const de=(ae=this.options=function(Le,je){for(const Je in je)Le[Je]=je[Je];return Le}(Object.create(ur),ae)).debug;if(de&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Te=function(Le,je){const Je=[];if(Le.type==="FeatureCollection")for(let Fe=0;Fe<Le.features.length;Fe++)kt(Je,Le.features[Fe],je,Fe);else kt(Je,Le.type==="Feature"?Le:{geometry:Le},je);return Je}(oe,ae);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Te=function(Le,je){const Je=je.buffer/je.extent;let Fe=Le;const et=ar(Le,1,-1-Je,Je,0,-1,2,je),ct=ar(Le,1,1-Je,2+Je,0,-1,2,je);return(et||ct)&&(Fe=ar(Le,1,-Je,1+Je,0,-1,2,je)||[],et&&(Fe=Yt(et,1).concat(Fe)),ct&&(Fe=Fe.concat(Yt(ct,-1)))),Fe}(Te,ae),Te.length&&this.splitTile(Te,0,0,0),de&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(oe,ae,de,Te,Le,je,Je){const Fe=[oe,ae,de,Te],et=this.options,ct=et.debug;for(;Fe.length;){Te=Fe.pop(),de=Fe.pop(),ae=Fe.pop(),oe=Fe.pop();const it=1<<ae,Ot=nr(ae,de,Te);let $e=this.tiles[Ot];if(!$e&&(ct>1&&console.time("creation"),$e=this.tiles[Ot]=Ir(oe,ae,de,Te,et),this.tileCoords.push({z:ae,x:de,y:Te}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,de,Te,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));const Pr=`z${ae}`;this.stats[Pr]=(this.stats[Pr]||0)+1,this.total++}if($e.source=oe,Le==null){if(ae===et.indexMaxZoom||$e.numPoints<=et.indexMaxPoints)continue}else{if(ae===et.maxZoom||ae===Le)continue;if(Le!=null){const Pr=Le-ae;if(de!==je>>Pr||Te!==Je>>Pr)continue}}if($e.source=null,oe.length===0)continue;ct>1&&console.time("clipping");const Xt=.5*et.buffer/et.extent,cr=.5-Xt,Nt=.5+Xt,Ht=1+Xt;let _r=null,ut=null,Lt=null,Cr=null,Kt=ar(oe,it,de-Xt,de+Nt,0,$e.minX,$e.maxX,et),jt=ar(oe,it,de+cr,de+Ht,0,$e.minX,$e.maxX,et);oe=null,Kt&&(_r=ar(Kt,it,Te-Xt,Te+Nt,1,$e.minY,$e.maxY,et),ut=ar(Kt,it,Te+cr,Te+Ht,1,$e.minY,$e.maxY,et),Kt=null),jt&&(Lt=ar(jt,it,Te-Xt,Te+Nt,1,$e.minY,$e.maxY,et),Cr=ar(jt,it,Te+cr,Te+Ht,1,$e.minY,$e.maxY,et),jt=null),ct>1&&console.timeEnd("clipping"),Fe.push(_r||[],ae+1,2*de,2*Te),Fe.push(ut||[],ae+1,2*de,2*Te+1),Fe.push(Lt||[],ae+1,2*de+1,2*Te),Fe.push(Cr||[],ae+1,2*de+1,2*Te+1)}}getTile(oe,ae,de){oe=+oe,ae=+ae,de=+de;const Te=this.options,{extent:Le,debug:je}=Te;if(oe<0||oe>24)return null;const Je=1<<oe,Fe=nr(oe,ae=ae+Je&Je-1,de);if(this.tiles[Fe])return xr(this.tiles[Fe],Le);je>1&&console.log("drilling down to z%d-%d-%d",oe,ae,de);let et,ct=oe,it=ae,Ot=de;for(;!et&&ct>0;)ct--,it>>=1,Ot>>=1,et=this.tiles[nr(ct,it,Ot)];return et&&et.source?(je>1&&(console.log("found parent tile z%d-%d-%d",ct,it,Ot),console.time("drilling down")),this.splitTile(et.source,ct,it,Ot,oe,ae,de),je>1&&console.timeEnd("drilling down"),this.tiles[Fe]?xr(this.tiles[Fe],Le):null):null}}function nr(ke,oe,ae){return 32*((1<<ke)*ae+oe)+ke}class mr extends x{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(oe,ae){return c._(this,void 0,void 0,function*(){const de=oe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Te=this._geoJSONIndex.getTile(de.z,de.x,de.y);if(!Te)return null;const Le=new $(Te.features,{version:2,extent:c.$});let je=function(Je){const Fe=new c.cM;return function(et,ct){for(const it in et.layers)ct.writeMessage(3,J,et.layers[it])}(Je,Fe),Fe.finish()}(Le);return je.byteOffset===0&&je.byteLength===je.buffer.byteLength||(je=new Uint8Array(je)),{vectorTile:Le,rawData:je.buffer}})}loadData(oe){return c._(this,void 0,void 0,function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const de=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.cN(oe.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(oe,this._pendingRequest);const Te=yield this._pendingData;this._geoJSONIndex=oe.cluster?new Ie(function({superclusterOptions:je,clusterProperties:Je}){if(!Je||!je)return je;const Fe={},et={},ct={accumulated:null,zoom:0},it={properties:null},Ot=Object.keys(Je);for(const $e of Ot){const[Xt,cr]=Je[$e],Nt=c.cT(cr),Ht=c.cT(typeof Xt=="string"?[Xt,["accumulated"],["get",$e]]:Xt);Fe[$e]=Nt.value,et[$e]=Ht.value}return je.map=$e=>{it.properties=$e;const Xt={};for(const cr of Ot)Xt[cr]=Fe[cr].evaluate(ct,it);return Xt},je.reduce=($e,Xt)=>{it.properties=Xt;for(const cr of Ot)ct.accumulated=$e[cr],$e[cr]=et[cr].evaluate(ct,it)},je}(oe)).load(Te.features):function(je,Je){return new lr(je,Je)}(Te,oe.geojsonVtOptions),this.loaded={};const Le={data:Te};if(de){const je=de.finish();je&&(Le.resourceTiming={},Le.resourceTiming[oe.source]=JSON.parse(JSON.stringify(je)))}return Le}catch(Te){if(delete this._pendingRequest,c.cy(Te))return{abandoned:!0};throw Te}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(oe){const ae=this.loaded;return ae&&ae[oe.uid]?super.reloadTile(oe):this.loadTile(oe)}loadAndProcessGeoJSON(oe,ae){return c._(this,void 0,void 0,function*(){let de=yield this.loadGeoJSON(oe,ae);if(delete this._pendingRequest,typeof de!="object")throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`);if(z(de,!0),oe.filter){const Te=c.cT(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Te.result==="error")throw new Error(Te.value.map(je=>`${je.key}: ${je.message}`).join(", "));de={type:"FeatureCollection",features:de.features.filter(je=>Te.value.evaluate({zoom:0},je))}}return de})}loadGeoJSON(oe,ae){return c._(this,void 0,void 0,function*(){const{promoteId:de}=oe;if(oe.request){const Te=yield c.j(oe.request,ae);return this._dataUpdateable=c.cV(Te.data,de)?c.cU(Te.data,de):void 0,Te.data}if(typeof oe.data=="string")try{const Te=JSON.parse(oe.data);return this._dataUpdateable=c.cV(Te,de)?c.cU(Te,de):void 0,Te}catch{throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`)}if(!oe.dataDiff)throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${oe.source}`);return c.cW(this._dataUpdateable,oe.dataDiff,de),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(oe){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(oe){return this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId)}getClusterChildren(oe){return this._geoJSONIndex.getChildren(oe.clusterId)}getClusterLeaves(oe){return this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset)}}class Yr{constructor(oe){this.self=oe,this.actor=new c.J(oe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ae,de)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=de},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=ae=>{c.cX.setMethods(ae)},this.actor.registerMessageHandler("LDT",(ae,de)=>this._getDEMWorkerSource(ae,de.source).loadTile(de)),this.actor.registerMessageHandler("RDT",(ae,de)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ae,de.source).removeTile(de)})),this.actor.registerMessageHandler("GCEZ",(ae,de)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterExpansionZoom(de)})),this.actor.registerMessageHandler("GCC",(ae,de)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterChildren(de)})),this.actor.registerMessageHandler("GCL",(ae,de)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterLeaves(de)})),this.actor.registerMessageHandler("LD",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).loadData(de)),this.actor.registerMessageHandler("GD",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).getData()),this.actor.registerMessageHandler("LT",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).loadTile(de)),this.actor.registerMessageHandler("RT",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).reloadTile(de)),this.actor.registerMessageHandler("AT",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).abortTile(de)),this.actor.registerMessageHandler("RMT",(ae,de)=>this._getWorkerSource(ae,de.type,de.source).removeTile(de)),this.actor.registerMessageHandler("RS",(ae,de)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[ae]||!this.workerSources[ae][de.type]||!this.workerSources[ae][de.type][de.source])return;const Te=this.workerSources[ae][de.type][de.source];delete this.workerSources[ae][de.type][de.source],Te.removeSource!==void 0&&Te.removeSource(de)})),this.actor.registerMessageHandler("RM",ae=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae]})),this.actor.registerMessageHandler("SR",(ae,de)=>c._(this,void 0,void 0,function*(){this.referrer=de})),this.actor.registerMessageHandler("SRPS",(ae,de)=>this._syncRTLPluginState(ae,de)),this.actor.registerMessageHandler("IS",(ae,de)=>c._(this,void 0,void 0,function*(){this.self.importScripts(de)})),this.actor.registerMessageHandler("SI",(ae,de)=>this._setImages(ae,de)),this.actor.registerMessageHandler("UL",(ae,de)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ae).update(de.layers,de.removedIds)})),this.actor.registerMessageHandler("SL",(ae,de)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ae).replace(de)}))}_setImages(oe,ae){return c._(this,void 0,void 0,function*(){this.availableImages[oe]=ae;for(const de in this.workerSources[oe]){const Te=this.workerSources[oe][de];for(const Le in Te)Te[Le].availableImages=ae}})}_syncRTLPluginState(oe,ae){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(ae,this.self.importScripts)})}_getAvailableImages(oe){let ae=this.availableImages[oe];return ae||(ae=[]),ae}_getLayerIndex(oe){let ae=this.layerIndexes[oe];return ae||(ae=this.layerIndexes[oe]=new s),ae}_getWorkerSource(oe,ae,de){if(this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ae]||(this.workerSources[oe][ae]={}),!this.workerSources[oe][ae][de]){const Te={sendAsync:(Le,je)=>(Le.targetMapId=oe,this.actor.sendAsync(Le,je))};switch(ae){case"vector":this.workerSources[oe][ae][de]=new x(Te,this._getLayerIndex(oe),this._getAvailableImages(oe));break;case"geojson":this.workerSources[oe][ae][de]=new mr(Te,this._getLayerIndex(oe),this._getAvailableImages(oe));break;default:this.workerSources[oe][ae][de]=new this.externalWorkerSourceTypes[ae](Te,this._getLayerIndex(oe),this._getAvailableImages(oe))}}return this.workerSources[oe][ae][de]}_getDEMWorkerSource(oe,ae){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ae]||(this.demWorkerSources[oe][ae]=new P),this.demWorkerSources[oe][ae]}}return c.i(self)&&(self.worker=new Yr(self)),Yr}),i("index",["exports","./shared"],function(c,s){var p="5.7.0";function g(){var w=new s.A(4);return s.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let _,x;const P={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,o,d){const y=requestAnimationFrame(T=>{v(),o(T)}),{unsubscribe:v}=s.s(w.signal,"abort",()=>{v(),cancelAnimationFrame(y),d(s.c())},!1)},frameAsync(w){return new Promise((o,d)=>{this.frame(w,o,d)})},getImageData(w,o=0){return this.getImageCanvasContext(w).getImageData(-o,-o,w.width+2*o,w.height+2*o)},getImageCanvasContext(w){const o=window.document.createElement("canvas"),d=o.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return o.width=w.width,o.height=w.height,d.drawImage(w,0,0,w.width,w.height),d},resolveURL:w=>(_||(_=document.createElement("a")),_.href=w,_.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(x==null&&(x=matchMedia("(prefers-reduced-motion: reduce)")),x.matches)}};class A{static testProp(o){if(!A.docStyle)return o[0];for(let d=0;d<o.length;d++)if(o[d]in A.docStyle)return o[d];return o[0]}static create(o,d,y){const v=window.document.createElement(o);return d!==void 0&&(v.className=d),y&&y.appendChild(v),v}static createNS(o,d){return window.document.createElementNS(o,d)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(o,d){o.style[A.transformProp]=d}static addEventListener(o,d,y,v={}){o.addEventListener(d,y,"passive"in v?v:v.capture)}static removeEventListener(o,d,y,v={}){o.removeEventListener(d,y,"passive"in v?v:v.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(o){const d=o.getBoundingClientRect();return{x:d.width/o.offsetWidth||1,y:d.height/o.offsetHeight||1,boundingClientRect:d}}static getPoint(o,d,y){const v=d.boundingClientRect;return new s.P((y.clientX-v.left)/d.x-o.clientLeft,(y.clientY-v.top)/d.y-o.clientTop)}static mousePos(o,d){const y=A.getScale(o);return A.getPoint(o,y,d)}static touchPos(o,d){const y=[],v=A.getScale(o);for(let T=0;T<d.length;T++)y.push(A.getPoint(o,v,d[T]));return y}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}static sanitize(o){const d=new DOMParser().parseFromString(o,"text/html").body||document.createElement("body"),y=d.querySelectorAll("script");for(const v of y)v.remove();return A.clean(d),d.innerHTML}static isPossiblyDangerous(o,d){const y=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(o)||!y.includes("javascript:")&&!y.includes("data:"))||!!o.startsWith("on")||void 0}static clean(o){const d=o.children;for(const y of d)A.removeAttributes(y),A.clean(y)}static removeAttributes(o){for(const{name:d,value:y}of o.attributes)A.isPossiblyDangerous(d,y)&&o.removeAttribute(d)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const M={supported:!1,testSupport:function(w){!j&&z&&($?J(w):N=w)}};let N,z,j=!1,$=!1;function J(w){const o=w.createTexture();w.bindTexture(w.TEXTURE_2D,o);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,z),w.isContextLost())return;M.supported=!0}catch{}w.deleteTexture(o),j=!0}var X;typeof document<"u"&&(z=document.createElement("img"),z.onload=()=>{N&&J(N),N=null,$=!0},z.onerror=()=>{j=!0,N=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let o,d,y,v;w.resetRequestQueue=()=>{o=[],d=0,y=0,v={}},w.addThrottleControl=L=>{const q=y++;return v[q]=L,q},w.removeThrottleControl=L=>{delete v[L],R()},w.getImage=(L,q,V=!0)=>new Promise((Y,H)=>{M.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),s.e(L,{type:"image"}),o.push({abortController:q,requestParameters:L,supportImageRefresh:V,state:"queued",onError:te=>{H(te)},onSuccess:te=>{Y(te)}}),R()});const T=L=>s._(this,void 0,void 0,function*(){L.state="running";const{requestParameters:q,supportImageRefresh:V,onError:Y,onSuccess:H,abortController:te}=L,le=V===!1&&!s.i(self)&&!s.g(q.url)&&(!q.headers||Object.keys(q.headers).reduce((be,Se)=>be&&Se==="accept",!0));d++;const _e=le?k(q,te):s.m(q,te);try{const be=yield _e;delete L.abortController,L.state="completed",be.data instanceof HTMLImageElement||s.b(be.data)?H(be):be.data&&H({data:yield(ge=be.data,typeof createImageBitmap=="function"?s.f(ge):s.h(ge)),cacheControl:be.cacheControl,expires:be.expires})}catch(be){delete L.abortController,Y(be)}finally{d--,R()}var ge}),R=()=>{const L=(()=>{for(const q of Object.keys(v))if(v[q]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let q=d;q<L&&o.length>0;q++){const V=o.shift();V.abortController.signal.aborted?q--:T(V)}},k=(L,q)=>new Promise((V,Y)=>{const H=new Image,te=L.url,le=L.credentials;le&&le==="include"?H.crossOrigin="use-credentials":(le&&le==="same-origin"||!s.d(te))&&(H.crossOrigin="anonymous"),q.signal.addEventListener("abort",()=>{H.src="",Y(s.c())}),H.fetchPriority="high",H.onload=()=>{H.onerror=H.onload=null,V({data:H})},H.onerror=()=>{H.onerror=H.onload=null,q.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},H.src=te})}(X||(X={})),X.resetRequestQueue();class re{constructor(o){this._transformRequestFn=o??null}transformRequest(o,d){return this._transformRequestFn&&this._transformRequestFn(o,d)||{url:o}}setTransformRequest(o){this._transformRequestFn=o}}function ne(w){const o=[];if(typeof w=="string")o.push({id:"default",url:w});else if(w&&w.length>0){const d=[];for(const{id:y,url:v}of w){const T=`${y}${v}`;d.indexOf(T)===-1&&(d.push(T),o.push({id:y,url:v}))}}return o}function Z(w,o,d){try{const y=new URL(w);return y.pathname+=`${o}${d}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function U(w){const{userImage:o}=w;return!!(o&&o.render&&o.render())&&(w.data.replace(new Uint8Array(o.data.buffer)),!0)}class K extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:d,promiseResolve:y}of this.requestors)y(this._getImagesForIds(d));this.requestors=[]}}getImage(o){const d=this.images[o];if(d&&!d.data&&d.spriteData){const y=d.spriteData;d.data=new s.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),d.spriteData=null}return d}addImage(o,d){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,d)&&(this.images[o]=d)}_validate(o,d){let y=!0;const v=d.data||d.spriteData;return this._validateStretch(d.stretchX,v&&v.width)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "stretchX" value`))),y=!1),this._validateStretch(d.stretchY,v&&v.height)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "stretchY" value`))),y=!1),this._validateContent(d.content,d)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "content" value`))),y=!1),y}_validateStretch(o,d){if(!o)return!0;let y=0;for(const v of o){if(v[0]<y||v[1]<v[0]||d<v[1])return!1;y=v[1]}return!0}_validateContent(o,d){if(!o)return!0;if(o.length!==4)return!1;const y=d.spriteData,v=y&&y.width||d.data.width,T=y&&y.height||d.data.height;return!(o[0]<0||v<o[0]||o[1]<0||T<o[1]||o[2]<0||v<o[2]||o[3]<0||T<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,d,y=!0){const v=this.getImage(o);if(y&&(v.data.width!==d.data.width||v.data.height!==d.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=v.version+1,this.images[o]=d,this.updatedImages[o]=!0}removeImage(o){const d=this.images[o];delete this.images[o],delete this.patterns[o],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((d,y)=>{let v=!0;if(!this.isLoaded())for(const T of o)this.images[T]||(v=!1);this.isLoaded()||v?d(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:d})})}_getImagesForIds(o){const d={};for(const y of o){let v=this.getImage(y);v||(this.fire(new s.l("styleimagemissing",{id:y})),v=this.getImage(y)),v?d[y]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:s.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:o,height:d}=this.atlasImage;return{width:o,height:d}}getPattern(o){const d=this.patterns[o],y=this.getImage(o);if(!y)return null;if(d&&d.position.version===y.version)return d.position;if(d)d.position.version=y.version;else{const v={w:y.data.width+2,h:y.data.height+2,x:0,y:0},T=new s.I(v,y);this.patterns[o]={bin:v,position:T}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const d=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(o,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const T in this.patterns)o.push(this.patterns[T].bin);const{w:d,h:y}=s.p(o),v=this.atlasImage;v.resize({width:d||1,height:y||1});for(const T in this.patterns){const{bin:R}=this.patterns[T],k=R.x+1,L=R.y+1,q=this.getImage(T).data,V=q.width,Y=q.height;s.R.copy(q,v,{x:0,y:0},{x:k,y:L},{width:V,height:Y}),s.R.copy(q,v,{x:0,y:Y-1},{x:k,y:L-1},{width:V,height:1}),s.R.copy(q,v,{x:0,y:0},{x:k,y:L+Y},{width:V,height:1}),s.R.copy(q,v,{x:V-1,y:0},{x:k-1,y:L},{width:1,height:Y}),s.R.copy(q,v,{x:0,y:0},{x:k+V,y:L},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const d of o){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const y=this.getImage(d);y||s.w(`Image with ID: "${d}" was not found`),U(y)&&this.updateImage(d,y)}}}const he=1e20;function ue(w,o,d,y,v,T,R,k,L){for(let q=o;q<o+y;q++)Ee(w,d*T+q,T,v,R,k,L);for(let q=d;q<d+v;q++)Ee(w,q*T+o,1,y,R,k,L)}function Ee(w,o,d,y,v,T,R){T[0]=0,R[0]=-he,R[1]=he,v[0]=w[o];for(let k=1,L=0,q=0;k<y;k++){v[k]=w[o+k*d];const V=k*k;do{const Y=T[L];q=(v[k]-v[Y]+V-Y*Y)/(k-Y)/2}while(q<=R[L]&&--L>-1);L++,T[L]=k,R[L]=q,R[L+1]=he}for(let k=0,L=0;k<y;k++){for(;R[L+1]<k;)L++;const q=T[L],V=k-q;w[o+k*d]=v[q]+V*V}}class Ie{constructor(o,d,y){this.requestManager=o,this.localIdeographFontFamily=d,this.entries={},this.lang=y}setURL(o){this.url=o}getGlyphs(o){return s._(this,void 0,void 0,function*(){const d=[];for(const T in o)for(const R of o[T])d.push(this._getAndCacheGlyphsPromise(T,R));const y=yield Promise.all(d),v={};for(const{stack:T,id:R,glyph:k}of y)v[T]||(v[T]={}),v[T][R]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return v})}_getAndCacheGlyphsPromise(o,d){return s._(this,void 0,void 0,function*(){let y=this.entries[o];y||(y=this.entries[o]={glyphs:{},requests:{},ranges:{}});let v=y.glyphs[d];if(v!==void 0)return{stack:o,id:d,glyph:v};if(v=this._tinySDF(y,o,d),v)return y.glyphs[d]=v,{stack:o,id:d,glyph:v};const T=Math.floor(d/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(y.ranges[T])return{stack:o,id:d,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!y.requests[T]){const k=Ie.loadGlyphRange(o,T,this.url,this.requestManager);y.requests[T]=k}const R=yield y.requests[T];for(const k in R)this._doesCharSupportLocalGlyph(+k)||(y.glyphs[+k]=R[+k]);return y.ranges[T]=!0,{stack:o,id:d,glyph:R[d]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(o))||s.u["CJK Unified Ideographs"](o)||s.u["Hangul Syllables"](o)||s.u.Hiragana(o)||s.u.Katakana(o)||s.u["CJK Symbols and Punctuation"](o)||s.u["Halfwidth and Fullwidth Forms"](o))}_tinySDF(o,d,y){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(y))return;let T=o.tinySDF;if(!T){let k="400";/bold/i.test(d)?k="900":/medium/i.test(d)?k="500":/light/i.test(d)&&(k="200"),T=o.tinySDF=new Ie.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:v,fontWeight:k})}const R=T.draw(String.fromCharCode(y));return{id:y,bitmap:new s.q({width:R.width||60,height:R.height||60},R.data),metrics:{width:R.glyphWidth/2||24,height:R.glyphHeight/2||24,left:R.glyphLeft/2+.5||0,top:R.glyphTop/2-27.5||-8,advance:R.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ie.loadGlyphRange=function(w,o,d,y){return s._(this,void 0,void 0,function*(){const v=256*o,T=v+255,R=y.transformRequest(d.replace("{fontstack}",w).replace("{range}",`${v}-${T}`),"Glyphs"),k=yield s.n(R,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${o}, ${v}-${T}`);const L={};for(const q of s.o(k.data))L[q.id]=q;return L})},Ie.TinySDF=class{constructor({fontSize:w=24,buffer:o=3,radius:d=8,cutoff:y=.25,fontFamily:v="sans-serif",fontWeight:T="normal",fontStyle:R="normal",lang:k=null}={}){this.buffer=o,this.cutoff=y,this.radius=d,this.lang=k;const L=this.size=w+4*o,q=this._createCanvas(L),V=this.ctx=q.getContext("2d",{willReadFrequently:!0});V.font=`${R} ${T} ${w}px ${v}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(w){const o=document.createElement("canvas");return o.width=o.height=w,o}draw(w){const{width:o,actualBoundingBoxAscent:d,actualBoundingBoxDescent:y,actualBoundingBoxLeft:v,actualBoundingBoxRight:T}=this.ctx.measureText(w),R=Math.ceil(d),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-v))),L=Math.min(this.size-this.buffer,R+Math.ceil(y)),q=k+2*this.buffer,V=L+2*this.buffer,Y=Math.max(q*V,0),H=new Uint8ClampedArray(Y),te={data:H,width:q,height:V,glyphWidth:k,glyphHeight:L,glyphTop:R,glyphLeft:0,glyphAdvance:o};if(k===0||L===0)return te;const{ctx:le,buffer:_e,gridInner:ge,gridOuter:be}=this;this.lang&&(le.lang=this.lang),le.clearRect(_e,_e,k,L),le.fillText(w,_e,_e+R);const Se=le.getImageData(_e,_e,k,L);be.fill(he,0,Y),ge.fill(0,0,Y);for(let Re=0;Re<L;Re++)for(let Pe=0;Pe<k;Pe++){const De=Se.data[4*(Re*k+Pe)+3]/255;if(De===0)continue;const Be=(Re+_e)*q+Pe+_e;if(De===1)be[Be]=0,ge[Be]=he;else{const Ae=.5-De;be[Be]=Ae>0?Ae*Ae:0,ge[Be]=Ae<0?Ae*Ae:0}}ue(be,0,0,q,V,q,this.f,this.v,this.z),ue(ge,_e,_e,k,L,q,this.f,this.v,this.z);for(let Re=0;Re<Y;Re++){const Pe=Math.sqrt(be[Re])-Math.sqrt(ge[Re]);H[Re]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return te}};class ee{constructor(){this.specification=s.v.light.position}possiblyEvaluate(o,d){return s.B(o.expression.evaluate(d))}interpolate(o,d,y){return{x:s.C.number(o.x,d.x,y),y:s.C.number(o.y,d.y,y),z:s.C.number(o.z,d.z,y)}}}let pe;class ve extends s.E{constructor(o){super(),pe=pe||new s.r({anchor:new s.D(s.v.light.anchor),position:new ee,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.t(pe),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,d={}){if(!this._validate(s.x,o,d))for(const y in o){const v=o[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),v):this._transitionable.setValue(y,v)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,y){return(!y||y.validate!==!1)&&s.y(this,o.call(s.z,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const xe=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class tt extends s.E{constructor(o){super(),this._transitionable=new s.t(xe),this.setSky(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0))}setSky(o,d={}){if(!this._validate(s.G,o,d)){o||(o={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in o){const v=o[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),v):this._transitionable.setValue(y,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,y={}){return y?.validate!==!1&&s.y(this,o.call(s.z,s.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(o){return o<60?0:o<70?(o-60)/10:1}}class Ke{constructor(o,d){this.width=o,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,d){const y=o.join(",")+String(d);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(o,d)),this.dashEntry[y]}getDashRanges(o,d,y){const v=[];let T=o.length%2==1?-o[o.length-1]*y:0,R=o[0]*y,k=!0;v.push({left:T,right:R,isDash:k,zeroLength:o[0]===0});let L=o[0];for(let q=1;q<o.length;q++){k=!k;const V=o[q];T=L*y,L+=V,R=L*y,v.push({left:T,right:R,isDash:k,zeroLength:V===0})}return v}addRoundDash(o,d,y){const v=d/2;for(let T=-y;T<=y;T++){const R=this.width*(this.nextRow+y+T);let k=0,L=o[k];for(let q=0;q<this.width;q++){q/L.right>1&&(L=o[++k]);const V=Math.abs(q-L.left),Y=Math.abs(q-L.right),H=Math.min(V,Y);let te;const le=T/y*(v+1);if(L.isDash){const _e=v-Math.abs(le);te=Math.sqrt(H*H+_e*_e)}else te=v-Math.sqrt(H*H+le*le);this.data[R+q]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(o){for(let k=o.length-1;k>=0;--k){const L=o[k],q=o[k+1];L.zeroLength?o.splice(k,1):q&&q.isDash===L.isDash&&(q.left=L.left,o.splice(k,1))}const d=o[0],y=o[o.length-1];d.isDash===y.isDash&&(d.left=y.left-this.width,y.right=d.right+this.width);const v=this.width*this.nextRow;let T=0,R=o[T];for(let k=0;k<this.width;k++){k/R.right>1&&(R=o[++T]);const L=Math.abs(k-R.left),q=Math.abs(k-R.right),V=Math.min(L,q);this.data[v+k]=Math.max(0,Math.min(255,(R.isDash?V:-V)+128))}}addDash(o,d){const y=d?7:0,v=2*y+1;if(this.nextRow+v>this.height)return s.w("LineAtlas out of space"),null;let T=0;for(let k=0;k<o.length;k++)T+=o[k];if(T!==0){const k=this.width/T,L=this.getDashRanges(o,this.width,k);d?this.addRoundDash(L,k,y):this.addRegularDash(L)}const R={y:(this.nextRow+y+.5)/this.height,height:2*y/this.height,width:T};return this.nextRow+=v,this.dirty=!0,R}bind(o){const d=o.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const Ze="maplibre_preloaded_worker_pool";class bt{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<bt.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ze]}numActive(){return Object.keys(this.active).length}}const qe=Math.floor(P.hardwareConcurrency/2);let kt,Jt;function Pt(){return kt||(kt=new bt),kt}bt.workerCount=s.H(globalThis)?Math.max(Math.min(qe,3),1):1;class dt{constructor(o,d){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=d;const y=this.workerPool.acquire(d);for(let v=0;v<y.length;v++){const T=new s.J(y[v],d);T.name=`Worker ${v}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,d){const y=[];for(const v of this.actors)y.push(v.sendAsync({type:o,data:d}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,d){for(const y of this.actors)y.registerMessageHandler(o,d)}}function er(){return Jt||(Jt=new dt(Pt(),s.K),Jt.registerMessageHandler("GR",(w,o,d)=>s.m(o,d))),Jt}function Wt(w,o){const d=s.L();return s.M(d,d,[1,1,0]),s.N(d,d,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?s.O(d,d,w.calculatePosMatrix(o.toUnwrapped())):d}function ar(w,o,d,y,v,T,R){var k;const L=function(H,te,le){if(H)for(const _e of H){const ge=te[_e];if(ge&&ge.source===le&&ge.type==="fill-extrusion")return!0}else for(const _e in te){const ge=te[_e];if(ge.source===le&&ge.type==="fill-extrusion")return!0}return!1}((k=v?.layers)!==null&&k!==void 0?k:null,o,w.id),q=T.maxPitchScaleFactor(),V=w.tilesIn(y,q,L);V.sort(_t);const Y=[];for(const H of V)Y.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(o,d,w._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,v,T,q,Wt(w.transform,H.tileID),R?(te,le)=>R(H.tileID,te,le):void 0)});return function(H,te){for(const le in H)for(const _e of H[le])Ve(_e,te);return H}(function(H){const te={},le={};for(const _e of H){const ge=_e.queryResults,be=_e.wrappedTileID,Se=le[be]=le[be]||{};for(const Re in ge){const Pe=ge[Re],De=Se[Re]=Se[Re]||{},Be=te[Re]=te[Re]||[];for(const Ae of Pe)De[Ae.featureIndex]||(De[Ae.featureIndex]=!0,Be.push(Ae))}}return te}(Y),w)}function _t(w,o){const d=w.tileID,y=o.tileID;return d.overscaledZ-y.overscaledZ||d.canonical.y-y.canonical.y||d.wrap-y.wrap||d.canonical.x-y.canonical.x}function Ve(w,o){const d=w.feature,y=o.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=y}function pt(w,o,d){return s._(this,void 0,void 0,function*(){let y=w;if(w.url?y=(yield s.j(o.transformRequest(w.url,"Source"),d)).data:yield P.frameAsync(d),!y)return null;const v=s.Q(s.e(y,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(v.vectorLayerIds=y.vector_layers.map(T=>T.id)),v})}class lt{constructor(o,d){o&&(d?this.setSouthWest(o).setNorthEast(d):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof s.S?new s.S(o.lng,o.lat):s.S.convert(o),this}setSouthWest(o){return this._sw=o instanceof s.S?new s.S(o.lng,o.lat):s.S.convert(o),this}extend(o){const d=this._sw,y=this._ne;let v,T;if(o instanceof s.S)v=o,T=o;else{if(!(o instanceof lt))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(lt.convert(o)):this.extend(s.S.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(s.S.convert(o)):this;if(v=o._sw,T=o._ne,!v||!T)return this}return d||y?(d.lng=Math.min(v.lng,d.lng),d.lat=Math.min(v.lat,d.lat),y.lng=Math.max(T.lng,y.lng),y.lat=Math.max(T.lat,y.lat)):(this._sw=new s.S(v.lng,v.lat),this._ne=new s.S(T.lng,T.lat)),this}getCenter(){return new s.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.S(this.getWest(),this.getNorth())}getSouthEast(){return new s.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:d,lat:y}=s.S.convert(o);let v=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&v}static convert(o){return o instanceof lt?o:o&&new lt(o)}static fromLngLat(o,d=0){const y=360*d/40075017,v=y/Math.cos(Math.PI/180*o.lat);return new lt(new s.S(o.lng-v,o.lat-y),new s.S(o.lng+v,o.lat+y))}adjustAntiMeridian(){const o=new s.S(this._sw.lng,this._sw.lat),d=new s.S(this._ne.lng,this._ne.lat);return new lt(o,o.lng>d.lng?new s.S(d.lng+360,d.lat):d)}}class Tt{constructor(o,d,y){this.bounds=lt.convert(this.validateBounds(o)),this.minzoom=d||0,this.maxzoom=y||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const d=Math.pow(2,o.z),y=Math.floor(s.V(this.bounds.getWest())*d),v=Math.floor(s.U(this.bounds.getNorth())*d),T=Math.ceil(s.V(this.bounds.getEast())*d),R=Math.ceil(s.U(this.bounds.getSouth())*d);return o.x>=y&&o.x<T&&o.y>=v&&o.y<R}}class vt extends s.E{constructor(o,d,y,v){if(super(),this.id=o,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.Q(d,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(s.e(this,o),o.bounds&&(this.tileBounds=new Tt(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new s.k(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(o){return s._(this,void 0,void 0,function*(){const d=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(d,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};y.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(o.actor&&o.state!=="expired"){if(o.state==="loading")return new Promise((T,R)=>{o.reloadPromise={resolve:T,reject:R}})}else o.actor=this.dispatcher.getActor(),v="LT";o.abortController=new AbortController;try{const T=yield o.actor.sendAsync({type:v,data:y},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,T)}catch(T){if(delete o.abortController,o.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,d){if(d&&d.resourceTiming&&(o.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&o.setExpiryData(d),o.loadVectorData(d,this.map.painter),o.reloadPromise){const y=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(y.resolve).catch(y.reject)}}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Dt extends s.E{constructor(o,d,y,v){super(),this.id=o,this.dispatcher=y,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},d),s.e(this,s.Q(d,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(o=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const d=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(s.e(this,d),d.bounds&&(this.tileBounds=new Tt(d.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:o})))}catch(d){this._tileJSONRequest=null,this.fire(new s.k(d))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load(!0)}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return s.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return s._(this,void 0,void 0,function*(){const d=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{const y=yield X.getImage(this.map._requestManager.transformRequest(d,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&o.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const v=this.map.painter.context,T=v.gl,R=y.data;o.texture=this.map.painter.getTileTexture(R.width),o.texture?o.texture.update(R,{useMipmap:!0}):(o.texture=new s.T(v,R,T.RGBA,{useMipmap:!0}),o.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),o.state="loaded"}}catch(y){if(delete o.abortController,o.aborted)o.state="unloaded";else if(y)throw o.state="errored",y}})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class Yt extends Dt{constructor(o,d,y,v){super(o,d,y,v),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(o){return s._(this,void 0,void 0,function*(){const d=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(d,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{const v=yield X.getImage(y,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(v&&v.data){const T=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&o.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const R=s.b(T)&&s.W()?T:yield this.readImageNow(T),k={type:this.type,uid:o.uid,source:this.id,rawImageData:R,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||o.state==="expired"){o.actor=this.dispatcher.getActor();const L=yield o.actor.sendAsync({type:"LDT",data:k});o.dem=L,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(v){if(delete o.abortController,o.aborted)o.state="unloaded";else if(v)throw o.state="errored",v}})}readImageNow(o){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.X()){const d=o.width+2,y=o.height+2;try{return new s.R({width:d,height:y},yield s.Y(o,-1,-1,d,y))}catch{}}return P.getImageData(o,1)})}_getNeighboringTiles(o){const d=o.canonical,y=Math.pow(2,d.z),v=(d.x-1+y)%y,T=d.x===0?o.wrap-1:o.wrap,R=(d.x+1+y)%y,k=d.x+1===y?o.wrap+1:o.wrap,L={};return L[new s.Z(o.overscaledZ,T,d.z,v,d.y).key]={backfilled:!1},L[new s.Z(o.overscaledZ,k,d.z,R,d.y).key]={backfilled:!1},d.y>0&&(L[new s.Z(o.overscaledZ,T,d.z,v,d.y-1).key]={backfilled:!1},L[new s.Z(o.overscaledZ,o.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},L[new s.Z(o.overscaledZ,k,d.z,R,d.y-1).key]={backfilled:!1}),d.y+1<y&&(L[new s.Z(o.overscaledZ,T,d.z,v,d.y+1).key]={backfilled:!1},L[new s.Z(o.overscaledZ,o.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},L[new s.Z(o.overscaledZ,k,d.z,R,d.y+1).key]={backfilled:!1}),L}unloadTile(o){return s._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class Bt extends s.E{constructor(o,d,y,v){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:d.data},this.actor=y.getActor(),this.setEventedParent(v),this._data=d.data,this._options=s.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:s.$,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:s.$,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(o){return o*(s.$/this.tileSize)}_getClusterMaxZoom(o){const d=o?Math.round(o):this.maxzoom-1;return Number.isInteger(o)||o===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${o}" rounded to "${d}"`),d}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._pendingWorkerUpdate={data:o},this._updateWorkerData(),this}updateData(o){return this._pendingWorkerUpdate.diff=s.a0(this._pendingWorkerUpdate.diff,o),this._updateWorkerData(),this}getData(){return s._(this,void 0,void 0,function*(){const o=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:o})})}getCoordinatesFromGeometry(o){return o.type==="GeometryCollection"?o.geometries.map(d=>d.coordinates).flat(1/0):o.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const o=new lt,d=yield this.getData();let y;switch(d.type){case"FeatureCollection":y=d.features.map(v=>this.getCoordinatesFromGeometry(v.geometry)).flat(1/0);break;case"Feature":y=this.getCoordinatesFromGeometry(d.geometry);break;default:y=this.getCoordinatesFromGeometry(d)}if(y.length==0)return o;for(let v=0;v<y.length-1;v+=2)o.extend([y[v],y[v+1]]);return o})}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(o.clusterRadius)),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(o.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,d,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:d,offset:y}})}_updateWorkerData(){return s._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:o,diff:d}=this._pendingWorkerUpdate;if(!o&&!d)return void s.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const y=s.e({type:this.type},this.workerOptions);o?(typeof o=="string"?(y.request=this.map._requestManager.transformRequest(P.resolveURL(o),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(o),this._pendingWorkerUpdate.data=void 0):d&&(y.dataDiff=d,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||v.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));this._data=v.data;let T=null;v.resourceTiming&&v.resourceTiming[this.id]&&(T=v.resourceTiming[this.id].slice(0));const R={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&s.e(R,{resourceTiming:T}),this.fire(new s.l("data",Object.assign(Object.assign({},R),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},R),{sourceDataType:"content"})))}catch(v){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(v))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(o){return s._(this,void 0,void 0,function*(){const d=o.actor?"RT":"LT";o.actor=this.actor;const y={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};o.abortController=new AbortController;const v=yield this.actor.sendAsync({type:d,data:y},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(v,this.map.painter,d==="RT")})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class xr extends s.E{constructor(o,d,y,v){super(),this.flippedWindingOrder=!1,this.id=o,this.dispatcher=y,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=d}load(o){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield X.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,o&&(this.coordinates=o),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new s.k(d))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;const d=o.map(s.a1.fromLngLat);var y;return this.tileID=function(v){const T=s.a2.fromPoints(v),R=T.width(),k=T.height(),L=Math.max(R,k),q=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),V=Math.pow(2,q);return new s.a4(q,Math.floor((T.minX+T.maxX)/2*V),Math.floor((T.minY+T.maxY)/2*V))}(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(v=>this.tileID.getTilePoint(v)._round()),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,d=o.gl;this.texture||(this.texture=new s.T(o,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const v in this.tiles){const T=this.tiles[v];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(o){const{minX:d,minY:y,maxX:v,maxY:T}=s.a2.fromPoints(o),R={};for(let k=0;k<=s.a3;k++){const L=Math.pow(2,k),q=Math.floor(d*L),V=Math.floor(y*L),Y=Math.floor(v*L),H=Math.floor(T*L);R[k]={minTileX:q,minTileY:V,maxTileX:Y,maxTileY:H}}return R}}class $r extends xr{constructor(o,d,y,v){super(o,d,y,v),this.roundZoom=!0,this.type="video",this.options=d}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const o=this.options;this.urls=[];for(const d of o.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield s.a5(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new s.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const d=this.video.seekable;o<d.start(0)||o>d.end(0)?this.fire(new s.k(new s.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,d=o.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(o,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const v in this.tiles){const T=this.tiles[v];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ir extends xr{constructor(o,d,y,v){super(o,d,y,v),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(R=>typeof R!="number"))||this.fire(new s.k(new s.a6(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a6(`sources.${o}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new s.k(new s.a6(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a6(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a6(`sources.${o}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,y=d.gl;this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(d,this.canvas,y.RGBA,{premultiply:!0});let v=!1;for(const T in this.tiles){const R=this.tiles[T];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,v=!0)}v&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const Zr={},yr=w=>{switch(w){case"geojson":return Bt;case"image":return xr;case"raster":return Dt;case"raster-dem":return Yt;case"vector":return vt;case"video":return $r;case"canvas":return Ir}return Zr[w]},ur="RTLPluginLoaded";class lr extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=er()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return s._(this,arguments,void 0,function*(d,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(ur))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let nr=null;function mr(){return nr||(nr=new lr),nr}class Yr{constructor(o,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=s.a7(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const d=o+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,d,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(v,T){const R={};if(!T)return R;for(const k of v){const L=k.layerIds.map(q=>T.getLayer(q)).filter(Boolean);if(L.length!==0){k.layers=L,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(q=>L.filter(V=>V.id===q)[0]));for(const q of L)R[q.id]=k}}return R}(o.buckets,d?.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const T=this.buckets[v];if(T instanceof s.a9){if(this.hasSymbolBuckets=!0,!y)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const T=this.buckets[v];if(T instanceof s.a9&&T.hasRTLText){this.hasRTLText=!0,mr().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const T=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(v).queryRadius(T))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new s.a8}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const y in this.buckets){const v=this.buckets[y];v.uploadPending()&&v.upload(o)}const d=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(o,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(o,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,d,y,v,T,R,k,L,q,V,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:T,scale:R,tileSize:this.tileSize,pixelPosMatrix:V,transform:L,params:k,queryPadding:this.queryPadding*q,getElevation:Y},o,d,y):{}}querySourceFeatures(o,d){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const v=y.loadVTLayers(),T=d&&d.sourceLayer?d.sourceLayer:"",R=v._geojsonTileLayer||v[T];if(!R)return;const k=s.aa(d&&d.filter),{z:L,x:q,y:V}=this.tileID.canonical,Y={z:L,x:q,y:V};for(let H=0;H<R.length;H++){const te=R.feature(H);if(k.needGeometry){const ge=s.ab(te,!0);if(!k.filter(new s.F(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!k.filter(new s.F(this.tileID.overscaledZ),te))continue;const le=y.getId(te,T),_e=new s.ac(te,L,q,V,le);_e.tile=Y,o.push(_e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const y=s.ad(o.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const y=Date.now();let v=!1;if(this.expirationTime>y)v=!1;else if(d)if(this.expirationTime<d)v=!0;else{const T=this.expirationTime-d;T?this.expirationTime=y+Math.max(T,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!d.style.hasLayer(v))continue;const T=this.buckets[v],R=T.layers[0].sourceLayer||"_geojsonTileLayer",k=y[R],L=o[R];if(!k||!L||Object.keys(L).length===0)continue;T.update(L,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const q=d&&d.style&&d.style.getLayer(v);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=P.now()+o}setDependencies(o,d){const y={};for(const v of d)y[v]=!0;this.dependencies[o]=y}hasDependency(o,d){for(const y of o){const v=this.dependencies[y];if(v){for(const T of d)if(v[T])return!0}}return!1}}class ke{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,y){const v=o.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const T={value:d,timeout:void 0};if(y!==void 0&&(T.timeout=setTimeout(()=>{this.remove(o,T)},y)),this.data[v].push(T),this.order.push(v),this.order.length>this.max){const R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const y=o.wrapped().key,v=d===void 0?0:this.data[y].indexOf(d),T=this.data[y][v];return this.data[y].splice(v,1),T.timeout&&clearTimeout(T.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(T.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const y in this.data)for(const v of this.data[y])o(v.value)||d.push(v);for(const y of d)this.remove(y.value.tileID,y)}}class oe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,y){const v=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][v]=this.stateChanges[o][v]||{},s.e(this.stateChanges[o][v],y),this.deletedStates[o]===null){this.deletedStates[o]={};for(const T in this.state[o])T!==v&&(this.deletedStates[o][T]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][v]===null){this.deletedStates[o][v]={};for(const T in this.state[o][v])y[T]||(this.deletedStates[o][v][T]=null)}else for(const T in y)this.deletedStates[o]&&this.deletedStates[o][v]&&this.deletedStates[o][v][T]===null&&delete this.deletedStates[o][v][T]}removeFeatureState(o,d,y){if(this.deletedStates[o]===null)return;const v=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},y&&d!==void 0)this.deletedStates[o][v]!==null&&(this.deletedStates[o][v]=this.deletedStates[o][v]||{},this.deletedStates[o][v][y]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][v])for(y in this.deletedStates[o][v]={},this.stateChanges[o][v])this.deletedStates[o][v][y]=null;else this.deletedStates[o][v]=null;else this.deletedStates[o]=null}getState(o,d){const y=String(d),v=s.e({},(this.state[o]||{})[y],(this.stateChanges[o]||{})[y]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const T=this.deletedStates[o][d];if(T===null)return{};for(const R in T)delete v[R]}return v}initializeTileState(o,d){o.setFeatureState(this.state,d)}coalesceChanges(o,d){const y={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const T={};for(const R in this.stateChanges[v])this.state[v][R]||(this.state[v][R]={}),s.e(this.state[v][R],this.stateChanges[v][R]),T[R]=this.state[v][R];y[v]=T}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const T={};if(this.deletedStates[v]===null)for(const R in this.state[v])T[R]={},this.state[v][R]={};else for(const R in this.deletedStates[v]){if(this.deletedStates[v][R]===null)this.state[v][R]={};else for(const k of Object.keys(this.deletedStates[v][R]))delete this.state[v][R][k];T[R]=this.state[v][R]}y[v]=y[v]||{},s.e(y[v],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const v in o)o[v].setFeatureState(y,d)}}const ae=89.25;function de(w,o){const d=s.ah(o.lat,-s.ai,s.ai);return new s.P(s.V(o.lng)*w,s.U(d)*w)}function Te(w,o){return new s.a1(o.x/w,o.y/w).toLngLat()}function Le(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(s.ae(90-w.pitch)),Math.tan(s.ae(ae-w.pitch)))}function je(w,o){const d=w.canonical,y=o/s.af(d.z),v=d.x+Math.pow(2,d.z)*w.wrap,T=s.ag(new Float64Array(16));return s.M(T,T,[v*y,d.y*y,0]),s.N(T,T,[y/s.$,y/s.$,1]),T}function Je(w,o,d,y,v){const T=s.a1.fromLngLat(w,o),R=v*s.aj(1,w.lat),k=R*Math.cos(s.ae(d)),L=Math.sqrt(R*R-k*k),q=L*Math.sin(s.ae(-y)),V=L*Math.cos(s.ae(-y));return new s.a1(T.x+q,T.y+V,T.z+k)}function Fe(w,o,d){const y=o.intersectsFrustum(w);if(!d||y===0)return y;const v=o.intersectsPlane(d);return v===0?0:y===2&&v===2?2:1}function et(w,o,d){let y=0;const v=(d-o)/10;for(let T=0;T<10;T++)y+=v*Math.pow(Math.cos(o+(T+.5)/10*(d-o)),w);return y}function ct(w,o){return function(d,y,v,T,R){const k=2*((w-1)/s.ak(Math.cos(s.ae(ae-R))/Math.cos(s.ae(ae)))-1),L=Math.acos(v/T),q=2*et(k-1,0,s.ae(R/2)),V=Math.min(s.ae(ae),L+s.ae(R/2)),Y=et(k-1,Math.min(V,L-s.ae(R/2)),V),H=Math.atan(y/v),te=Math.hypot(y,v);let le=d;return le+=s.ak(T/te/Math.max(.5,Math.cos(s.ae(R/2)))),le+=k*s.ak(Math.cos(H))/2,le-=s.ak(Math.max(1,Y/q/o))/2,le}}const it=ct(9.314,3);function Ot(w,o){const d=(o.roundZoom?Math.round:Math.floor)(w.zoom+s.ak(w.tileSize/o.tileSize));return Math.max(0,d)}function $e(w,o){const d=w.getCameraFrustum(),y=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),T=s.a1.fromLngLat(w.center,w.elevation);v.z=T.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const R=w.getCoveringTilesDetailsProvider(),k=R.allowVariableZoom(w,o),L=Ot(w,o),q=o.minzoom||0,V=o.maxzoom!==void 0?o.maxzoom:w.maxZoom,Y=Math.min(Math.max(0,L),V),H=Math.pow(2,Y),te=[H*v.x,H*v.y,0],le=[H*T.x,H*T.y,0],_e=Math.hypot(T.x-v.x,T.y-v.y),ge=Math.abs(T.z-v.z),be=Math.hypot(_e,ge),Se=De=>({zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Re=[],Pe=[];if(w.renderWorldCopies&&R.allowWorldCopies())for(let De=1;De<=3;De++)Re.push(Se(-De)),Re.push(Se(De));for(Re.push(Se(0));Re.length>0;){const De=Re.pop(),Be=De.x,Ae=De.y;let Ge=De.fullyVisible;const st={x:Be,y:Ae,z:De.zoom},Ye=R.getTileBoundingVolume(st,De.wrap,w.elevation,o);if(!Ge){const Et=Fe(d,Ye,y);if(Et===0)continue;Ge=Et===2}const Xe=R.distanceToTile2d(v.x,v.y,st,Ye);let ot=L;k&&(ot=(o.calculateTileZoom||it)(w.zoom+s.ak(w.tileSize/o.tileSize),Xe,ge,be,w.fov)),ot=(o.roundZoom?Math.round:Math.floor)(ot),ot=Math.max(0,ot);const xt=Math.min(ot,V);if(De.wrap=R.getWrap(T,st,De.wrap),De.zoom>=xt){if(De.zoom<q)continue;const Et=Y-De.zoom,ft=te[0]-.5-(Be<<Et),Vt=te[1]-.5-(Ae<<Et),wr=o.reparseOverscaled?Math.max(De.zoom,ot):De.zoom;Pe.push({tileID:new s.Z(De.zoom===V?wr:De.zoom,De.wrap,De.zoom,Be,Ae),distanceSq:s.al([le[0]-.5-Be,le[1]-.5-Ae]),tileDistanceToCamera:Math.sqrt(ft*ft+Vt*Vt)})}else for(let Et=0;Et<4;Et++)Re.push({zoom:De.zoom+1,x:(Be<<1)+Et%2,y:(Ae<<1)+(Et>>1),wrap:De.wrap,fullyVisible:Ge})}return Pe.sort((De,Be)=>De.distanceSq-Be.distanceSq).map(De=>De.tileID)}const Xt=s.a2.fromPoints([new s.P(0,0),new s.P(s.$,s.$)]);class cr extends s.E{constructor(o,d,y){super(),this.id=o,this.dispatcher=y,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,T,R,k)=>{const L=new(yr(T.type))(v,T,R,k);if(L.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${L.id}`);return L})(o,d,y,this),this._tiles={},this._cache=new ke(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new oe,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const d=this._tiles[o];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,d,y){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,d,y)}catch(v){o.state="errored",v.status!==404?this._source.fire(new s.k(v,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new s.l("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const y=this._tiles[d];y.upload(o),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Nt).map(o=>o.key)}getRenderableIds(o){const d=[];for(const y in this._tiles)this._isIdRenderable(y,o)&&d.push(this._tiles[y]);return o?d.sort((y,v)=>{const T=y.tileID,R=v.tileID,k=new s.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),L=new s.P(R.canonical.x,R.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-R.overscaledZ||L.y-k.y||L.x-k.x}).map(y=>y.tileID.key):d.map(y=>y.tileID).sort(Nt).map(y=>y.key)}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())}reload(o){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)o?this._reloadTile(d,"expired"):this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(o,d){return s._(this,void 0,void 0,function*(){const y=this._tiles[o];y&&(y.state!=="loading"&&(y.state=d),yield this._loadTile(y,o,d))})}_tileLoaded(o,d,y){o.timeAdded=P.now(),y==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const d=this.getRenderableIds();for(let v=0;v<d.length;v++){const T=d[v];if(o.neighboringTiles&&o.neighboringTiles[T]){const R=this.getTileByID(T);y(o,R),y(R,o)}}function y(v,T){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let R=T.tileID.canonical.x-v.tileID.canonical.x;const k=T.tileID.canonical.y-v.tileID.canonical.y,L=Math.pow(2,v.tileID.canonical.z),q=T.tileID.key;R===0&&k===0||Math.abs(k)>1||(Math.abs(R)>1&&(Math.abs(R+L)===1?R+=L:Math.abs(R-L)===1&&(R-=L)),T.dem&&v.dem&&(v.dem.backfillBorder(T.dem,R,k),v.neighboringTiles&&v.neighboringTiles[q]&&(v.neighboringTiles[q].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,y,v){for(const T in this._tiles){let R=this._tiles[T];if(v[T]||!R.hasData()||R.tileID.overscaledZ<=d||R.tileID.overscaledZ>y)continue;let k=R.tileID;for(;R&&R.tileID.overscaledZ>d+1;){const q=R.tileID.scaledTo(R.tileID.overscaledZ-1);R=this._tiles[q.key],R&&R.hasData()&&(k=q)}let L=k;for(;L.overscaledZ>d;)if(L=L.scaledTo(L.overscaledZ-1),o[L.key]||o[L.canonical.key]){v[k.key]=k;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const y=this._loadedParentTiles[o.key];return y&&y.tileID.overscaledZ>=d?y:null}for(let y=o.overscaledZ-1;y>=d;y--){const v=o.scaledTo(y),T=this._getLoadedTile(v);if(T)return T}}findLoadedSibling(o){return this._getLoadedTile(o)}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const d=Math.ceil(o.width/this._source.tileSize)+1,y=Math.ceil(o.height/this._source.tileSize)+1,v=Math.floor(d*y*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(T)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const y={};for(const v in this._tiles){const T=this._tiles[v];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+d),y[T.tileID.key]=T}this._tiles=y;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(o,d,y,v,T,R){const k={},L={},q=Object.keys(o),V=P.now();for(const Y of q){const H=o[Y],te=this._tiles[Y];if(!te||te.fadeEndTime!==0&&te.fadeEndTime<=V)continue;const le=this.findLoadedParent(H,d),_e=this.findLoadedSibling(H),ge=le||_e||null;ge&&(this._addTile(ge.tileID),k[ge.tileID.key]=ge.tileID),L[Y]=H}this._retainLoadedChildren(L,v,y,o);for(const Y in k)o[Y]||(this._coveredTiles[Y]=!0,o[Y]=k[Y]);if(R){const Y={},H={};for(const te of T)this._tiles[te.key].hasData()?Y[te.key]=te:H[te.key]=te;for(const te in H){const le=H[te].children(this._source.maxzoom);this._tiles[le[0].key]&&this._tiles[le[1].key]&&this._tiles[le[2].key]&&this._tiles[le[3].key]&&(Y[le[0].key]=o[le[0].key]=le[0],Y[le[1].key]=o[le[1].key]=le[1],Y[le[2].key]=o[le[2].key]=le[2],Y[le[3].key]=o[le[3].key]=le[3],delete H[te])}for(const te in H){const le=H[te],_e=this.findLoadedParent(le,this._source.minzoom),ge=this.findLoadedSibling(le),be=_e||ge||null;if(be){Y[be.tileID.key]=o[be.tileID.key]=be.tileID;for(const Se in Y)Y[Se].isChildOf(be.tileID)&&delete Y[Se]}}for(const te in this._tiles)Y[te]||(this._coveredTiles[te]=!0)}}update(o,d){if(!this._sourceLoaded||this._paused)return;let y;this.transform=o,this.terrain=d,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new s.Z(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(y=$e(o,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter(V=>this._source.hasTile(V)))):y=[];const v=Ot(o,this._source),T=Math.max(v-cr.maxOverzooming,this._source.minzoom),R=Math.max(v+cr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const V={};for(const Y of y)if(Y.canonical.z>this._source.minzoom){const H=Y.scaledTo(Y.canonical.z-1);V[H.key]=H;const te=Y.scaledTo(Math.max(this._source.minzoom,Math.min(Y.canonical.z,5)));V[te.key]=te}y=y.concat(Object.values(V))}const k=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const L=this._updateRetainedTiles(y,v);Ht(this._source.type)&&this._updateCoveredAndRetainedTiles(L,T,R,v,y,d);for(const V in L)this._tiles[V].clearFadeHold();const q=s.am(this._tiles,L);for(const V of q){const Y=this._tiles[V];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,d){var y;const v={},T={},R=Math.max(d-cr.maxOverzooming,this._source.minzoom),k=Math.max(d+cr.maxUnderzooming,this._source.minzoom),L={};for(const q of o){const V=this._addTile(q);v[q.key]=q,V.hasData()||d<this._source.maxzoom&&(L[q.key]=q)}this._retainLoadedChildren(L,d,k,v);for(const q of o){let V=this._tiles[q.key];if(V.hasData())continue;if(d+1>this._source.maxzoom){const H=q.children(this._source.maxzoom)[0],te=this.getTile(H);if(te&&te.hasData()){v[H.key]=H;continue}}else{const H=q.children(this._source.maxzoom);if(v[H[0].key]&&v[H[1].key]&&v[H[2].key]&&v[H[3].key])continue}let Y=V.wasRequested();for(let H=q.overscaledZ-1;H>=R;--H){const te=q.scaledTo(H);if(T[te.key])break;if(T[te.key]=!0,V=this.getTile(te),!V&&Y&&(V=this._addTile(te)),V){const le=V.hasData();if((le||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||Y)&&(v[te.key]=te),Y=V.wasRequested(),le)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let y,v=this._tiles[o].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){y=this._loadedParentTiles[v.key];break}d.push(v.key);const T=v.scaledTo(v.overscaledZ-1);if(y=this._getLoadedTile(T),y)break;v=T}for(const T of d)this._loadedParentTiles[T]=y}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const o in this._tiles){const d=this._tiles[o].tileID,y=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=y}}_addTile(o){let d=this._tiles[o.key];if(d)return d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const y=d;return d||(d=new Yr(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(d,o.key,d.state)),d.uses++,this._tiles[o.key]=d,y||this._source.fire(new s.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const y=d.getExpiryTimeout();y&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},y))}refreshTiles(o){for(const d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&o.some(y=>y.equals(this._tiles[d].tileID.canonical))&&this._reloadTile(d,"expired")}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(o){const d=o.sourceDataType;o.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&o.dataType==="source"&&d==="content"&&(this.reload(o.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,d,y){const v=[],T=this.transform;if(!T)return v;const R=T.getCoveringTilesDetailsProvider().allowWorldCopies(),k=y?T.getCameraQueryGeometry(o):o,L=te=>T.screenPointToMercatorCoordinate(te,this.terrain),q=this.transformBbox(o,L,!R),V=this.transformBbox(k,L,!R),Y=this.getIds(),H=s.a2.fromPoints(V);for(let te=0;te<Y.length;te++){const le=this._tiles[Y[te]];if(le.holdingForFade())continue;const _e=R?[le.tileID]:[le.tileID.unwrapTo(-1),le.tileID.unwrapTo(0)],ge=Math.pow(2,T.zoom-le.tileID.overscaledZ),be=d*le.queryPadding*s.$/le.tileSize/ge;for(const Se of _e){const Re=H.map(Pe=>Se.getTilePoint(new s.a1(Pe.x,Pe.y)));if(Re.expandBy(be),Re.intersects(Xt)){const Pe=q.map(Be=>Se.getTilePoint(Be)),De=V.map(Be=>Se.getTilePoint(Be));v.push({tile:le,tileID:R?Se:Se.unwrapTo(0),queryGeometry:Pe,cameraQueryGeometry:De,scale:ge})}}}return v}transformBbox(o,d,y){let v=o.map(d);if(y){const T=s.a2.fromPoints(o);T.shrinkBy(.001*Math.min(T.width(),T.height()));const R=T.map(d);s.a2.fromPoints(v).covers(R)||(v=v.map(k=>k.x>.5?new s.a1(k.x-1,k.y,k.z):k))}return v}getVisibleCoordinates(o){const d=this.getRenderableIds(o).map(y=>this._tiles[y].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(Ht(this._source.type)){const o=P.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=o)return!0}return!1}setFeatureState(o,d,y){this._state.updateState(o=o||"_geojsonTileLayer",d,y)}removeFeatureState(o,d,y){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,y)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,y){const v=this._tiles[o];v&&v.setDependencies(d,y)}reloadTilesForDependencies(o,d){for(const y in this._tiles)this._tiles[y].hasDependency(o,d)&&this._reloadTile(y,"reloading");this._cache.filter(y=>!y.hasDependency(o,d))}}function Nt(w,o){const d=Math.abs(2*w.wrap)-+(w.wrap<0),y=Math.abs(2*o.wrap)-+(o.wrap<0);return w.overscaledZ-o.overscaledZ||y-d||o.canonical.y-w.canonical.y||o.canonical.x-w.canonical.x}function Ht(w){return w==="raster"||w==="image"||w==="video"}cr.maxOverzooming=10,cr.maxUnderzooming=3;class _r{constructor(o,d){this.reset(o,d)}reset(o,d){this.points=o||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=s.ah(o,0,1);let d=1,y=this._distances[d];const v=o*this.paddedLength+this.padding;for(;y<v&&d<this._distances.length;)y=this._distances[++d];const T=d-1,R=this._distances[T],k=y-R,L=k>0?(v-R)/k:0;return this.points[T].mult(1-L).add(this.points[d].mult(L))}}function ut(w,o){let d=!0;return w==="always"||w!=="never"&&o!=="never"||(d=!1),d}class Lt{constructor(o,d,y){const v=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(o/y),this.yCellCount=Math.ceil(d/y);for(let R=0;R<this.xCellCount*this.yCellCount;R++)v.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=d,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,d,y,v,T){this._forEachCell(d,y,v,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(v),this.bboxes.push(T)}insertCircle(o,d,y,v){this._forEachCell(d-v,y-v,d+v,y+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(d),this.circles.push(y),this.circles.push(v)}_insertBoxCell(o,d,y,v,T,R){this.boxCells[T].push(R)}_insertCircleCell(o,d,y,v,T,R){this.circleCells[T].push(R)}_query(o,d,y,v,T,R,k){if(y<0||o>this.width||v<0||d>this.height)return[];const L=[];if(o<=0&&d<=0&&this.width<=y&&this.height<=v){if(T)return[{key:null,x1:o,y1:d,x2:y,y2:v}];for(let q=0;q<this.boxKeys.length;q++)L.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const V=this.circles[3*q],Y=this.circles[3*q+1],H=this.circles[3*q+2];L.push({key:this.circleKeys[q],x1:V-H,y1:Y-H,x2:V+H,y2:Y+H})}}else this._forEachCell(o,d,y,v,this._queryCell,L,{hitTest:T,overlapMode:R,seenUids:{box:{},circle:{}}},k);return L}query(o,d,y,v){return this._query(o,d,y,v,!1,null)}hitTest(o,d,y,v,T,R){return this._query(o,d,y,v,!0,T,R).length>0}hitTestCircle(o,d,y,v,T){const R=o-y,k=o+y,L=d-y,q=d+y;if(k<0||R>this.width||q<0||L>this.height)return!1;const V=[];return this._forEachCell(R,L,k,q,this._queryCellCircle,V,{hitTest:!0,overlapMode:v,circle:{x:o,y:d,radius:y},seenUids:{box:{},circle:{}}},T),V.length>0}_queryCell(o,d,y,v,T,R,k,L){const{seenUids:q,hitTest:V,overlapMode:Y}=k,H=this.boxCells[T];if(H!==null){const le=this.bboxes;for(const _e of H)if(!q.box[_e]){q.box[_e]=!0;const ge=4*_e,be=this.boxKeys[_e];if(o<=le[ge+2]&&d<=le[ge+3]&&y>=le[ge+0]&&v>=le[ge+1]&&(!L||L(be))&&(!V||!ut(Y,be.overlapMode))&&(R.push({key:be,x1:le[ge],y1:le[ge+1],x2:le[ge+2],y2:le[ge+3]}),V))return!0}}const te=this.circleCells[T];if(te!==null){const le=this.circles;for(const _e of te)if(!q.circle[_e]){q.circle[_e]=!0;const ge=3*_e,be=this.circleKeys[_e];if(this._circleAndRectCollide(le[ge],le[ge+1],le[ge+2],o,d,y,v)&&(!L||L(be))&&(!V||!ut(Y,be.overlapMode))){const Se=le[ge],Re=le[ge+1],Pe=le[ge+2];if(R.push({key:be,x1:Se-Pe,y1:Re-Pe,x2:Se+Pe,y2:Re+Pe}),V)return!0}}}return!1}_queryCellCircle(o,d,y,v,T,R,k,L){const{circle:q,seenUids:V,overlapMode:Y}=k,H=this.boxCells[T];if(H!==null){const le=this.bboxes;for(const _e of H)if(!V.box[_e]){V.box[_e]=!0;const ge=4*_e,be=this.boxKeys[_e];if(this._circleAndRectCollide(q.x,q.y,q.radius,le[ge+0],le[ge+1],le[ge+2],le[ge+3])&&(!L||L(be))&&!ut(Y,be.overlapMode))return R.push(!0),!0}}const te=this.circleCells[T];if(te!==null){const le=this.circles;for(const _e of te)if(!V.circle[_e]){V.circle[_e]=!0;const ge=3*_e,be=this.circleKeys[_e];if(this._circlesCollide(le[ge],le[ge+1],le[ge+2],q.x,q.y,q.radius)&&(!L||L(be))&&!ut(Y,be.overlapMode))return R.push(!0),!0}}}_forEachCell(o,d,y,v,T,R,k,L){const q=this._convertToXCellCoord(o),V=this._convertToYCellCoord(d),Y=this._convertToXCellCoord(y),H=this._convertToYCellCoord(v);for(let te=q;te<=Y;te++)for(let le=V;le<=H;le++)if(T.call(this,o,d,y,v,this.xCellCount*le+te,R,k,L))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,d,y,v,T,R){const k=v-o,L=T-d,q=y+R;return q*q>k*k+L*L}_circleAndRectCollide(o,d,y,v,T,R,k){const L=(R-v)/2,q=Math.abs(o-(v+L));if(q>L+y)return!1;const V=(k-T)/2,Y=Math.abs(d-(T+V));if(Y>V+y)return!1;if(q<=L||Y<=V)return!0;const H=q-L,te=Y-V;return H*H+te*te<=y*y}}function Cr(w,o,d){const y=s.L();if(!w){const{vecSouth:Y,vecEast:H}=jt(o),te=g();te[0]=H[0],te[1]=H[1],te[2]=Y[0],te[3]=Y[1],v=te,(V=(R=(T=te)[0])*(q=T[3])-(L=T[2])*(k=T[1]))&&(v[0]=q*(V=1/V),v[1]=-k*V,v[2]=-L*V,v[3]=R*V),y[0]=te[0],y[1]=te[1],y[4]=te[2],y[5]=te[3]}var v,T,R,k,L,q,V;return s.N(y,y,[1/d,1/d,1]),y}function Kt(w,o,d,y){if(w){const v=s.L();if(!o){const{vecSouth:T,vecEast:R}=jt(d);v[0]=R[0],v[1]=R[1],v[4]=T[0],v[5]=T[1]}return s.N(v,v,[y,y,1]),v}return d.pixelsToClipSpaceMatrix}function jt(w){const o=Math.cos(w.rollInRadians),d=Math.sin(w.rollInRadians),y=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),T=Math.sin(w.bearingInRadians),R=s.ar();R[0]=-v*y*d-T*o,R[1]=-T*y*d+v*o;const k=s.as(R);k<1e-9?s.at(R):s.au(R,R,1/k);const L=s.ar();L[0]=v*y*o-T*d,L[1]=T*y*o+v*d;const q=s.as(L);return q<1e-9?s.at(L):s.au(L,L,1/q),{vecEast:L,vecSouth:R}}function Pr(w,o,d,y){let v;y?(v=[w,o,y(w,o),1],s.aw(v,v,d)):(v=[w,o,0,1],D(v,v,d));const T=v[3];return{point:new s.P(v[0]/T,v[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function yt(w,o){return .5+w/o*.5}function In(w,o){return w.x>=-o[0]&&w.x<=o[0]&&w.y>=-o[1]&&w.y<=o[1]}function vn(w,o,d,y,v,T,R,k,L,q,V,Y,H){const te=d?w.textSizeData:w.iconSizeData,le=s.an(te,o.transform.zoom),_e=[256/o.width*2+1,256/o.height*2+1],ge=d?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ge.clear();const be=w.lineVertexArray,Se=d?w.text.placedSymbolArray:w.icon.placedSymbolArray,Re=o.transform.width/o.transform.height;let Pe=!1;for(let De=0;De<Se.length;De++){const Be=Se.get(De);if(Be.hidden||Be.writingMode===s.ao.vertical&&!Pe){E(Be.numGlyphs,ge);continue}Pe=!1;const Ae=new s.P(Be.anchorX,Be.anchorY),Ge={getElevation:H,pitchedLabelPlaneMatrix:y,lineVertexArray:be,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:o.transform,tileAnchorPoint:Ae,unwrappedTileID:L,width:q,height:V,translation:Y},st=to(Be.anchorX,Be.anchorY,Ge);if(!In(st.point,_e)){E(Be.numGlyphs,ge);continue}const Ye=yt(o.transform.cameraToCenterDistance,st.signedDistanceFromCamera),Xe=s.ap(te,le,Be),ot=T?Xe*o.transform.getPitchedTextCorrection(Be.anchorX,Be.anchorY,L)/Ye:Xe*Ye,xt=Ct({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:v,symbol:Be,fontSize:ot,flip:!1,keepUpright:R,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Re,rotateToLine:k});Pe=xt.useVertical,(xt.notEnoughRoom||Pe||xt.needsFlipping&&Ct({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:v,symbol:Be,fontSize:ot,flip:!0,keepUpright:R,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Re,rotateToLine:k}).notEnoughRoom)&&E(Be.numGlyphs,ge)}d?w.text.dynamicLayoutVertexBuffer.updateData(ge):w.icon.dynamicLayoutVertexBuffer.updateData(ge)}function mn(w,o,d,y,v,T,R,k){const L=T.glyphStartIndex+T.numGlyphs,q=T.lineStartIndex,V=T.lineStartIndex+T.lineLength,Y=o.getoffsetX(T.glyphStartIndex),H=o.getoffsetX(L-1),te=hi(w*Y,d,y,v,T.segment,q,V,k,R);if(!te)return null;const le=hi(w*H,d,y,v,T.segment,q,V,k,R);return le?k.projectionCache.anyProjectionOccluded?null:{first:te,last:le}:null}function hs(w,o,d,y){return w===s.ao.horizontal&&Math.abs(d.y-o.y)>Math.abs(d.x-o.x)*y?{useVertical:!0}:(w===s.ao.vertical?o.y<d.y:o.x>d.x)?{needsFlipping:!0}:null}function Ct(w){const{projectionContext:o,pitchedLabelPlaneMatrixInverse:d,symbol:y,fontSize:v,flip:T,keepUpright:R,glyphOffsetArray:k,dynamicLayoutVertexArray:L,aspectRatio:q,rotateToLine:V}=w,Y=v/24,H=y.lineOffsetX*Y,te=y.lineOffsetY*Y;let le;if(y.numGlyphs>1){const _e=y.glyphStartIndex+y.numGlyphs,ge=y.lineStartIndex,be=y.lineStartIndex+y.lineLength,Se=mn(Y,k,H,te,T,y,V,o);if(!Se)return{notEnoughRoom:!0};const Re=Lo(Se.first.point.x,Se.first.point.y,o,d),Pe=Lo(Se.last.point.x,Se.last.point.y,o,d);if(R&&!T){const De=hs(y.writingMode,Re,Pe,q);if(De)return De}le=[Se.first];for(let De=y.glyphStartIndex+1;De<_e-1;De++){const Be=hi(Y*k.getoffsetX(De),H,te,T,y.segment,ge,be,o,V);if(!Be)return{notEnoughRoom:!0};le.push(Be)}le.push(Se.last)}else{if(R&&!T){const ge=xn(o.tileAnchorPoint.x,o.tileAnchorPoint.y,o).point,be=y.lineStartIndex+y.segment+1,Se=new s.P(o.lineVertexArray.getx(be),o.lineVertexArray.gety(be)),Re=xn(Se.x,Se.y,o),Pe=Re.signedDistanceFromCamera>0?Re.point:tr(o.tileAnchorPoint,Se,ge,1,o),De=Lo(ge.x,ge.y,o,d),Be=Lo(Pe.x,Pe.y,o,d),Ae=hs(y.writingMode,De,Be,q);if(Ae)return Ae}const _e=hi(Y*k.getoffsetX(y.glyphStartIndex),H,te,T,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,o,V);if(!_e||o.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};le=[_e]}for(const _e of le)s.av(L,_e.point,_e.angle);return{}}function tr(w,o,d,y,v){const T=w.add(w.sub(o)._unit()),R=xn(T.x,T.y,v).point,k=d.sub(R);return d.add(k._mult(y/k.mag()))}function gr(w,o,d){const y=o.projectionCache;if(y.projections[w])return y.projections[w];const v=new s.P(o.lineVertexArray.getx(w),o.lineVertexArray.gety(w)),T=xn(v.x,v.y,o);if(T.signedDistanceFromCamera>0)return y.projections[w]=T.point,y.anyProjectionOccluded=y.anyProjectionOccluded||T.isOccluded,T.point;const R=w-d.direction;return tr(d.distanceFromAnchor===0?o.tileAnchorPoint:new s.P(o.lineVertexArray.getx(R),o.lineVertexArray.gety(R)),v,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,o)}function xn(w,o,d){const y=w+d.translation[0],v=o+d.translation[1];let T;return d.pitchWithMap?(T=Pr(y,v,d.pitchedLabelPlaneMatrix,d.getElevation),T.isOccluded=!1):(T=d.transform.projectTileCoordinates(y,v,d.unwrappedTileID,d.getElevation),T.point.x=(.5*T.point.x+.5)*d.width,T.point.y=(.5*-T.point.y+.5)*d.height),T}function Lo(w,o,d,y){if(d.pitchWithMap){const v=[w,o,0,1];return s.aw(v,v,y),d.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],d.unwrappedTileID,d.getElevation).point}return{x:w/d.width*2-1,y:1-o/d.height*2}}function to(w,o,d){return d.transform.projectTileCoordinates(w,o,d.unwrappedTileID,d.getElevation)}function hr(w,o,d){return w._unit()._perp()._mult(o*d)}function ds(w,o,d,y,v,T,R,k,L){if(k.projectionCache.offsets[w])return k.projectionCache.offsets[w];const q=d.add(o);if(w+L.direction<y||w+L.direction>=v)return k.projectionCache.offsets[w]=q,q;const V=gr(w+L.direction,k,L),Y=hr(V.sub(d),R,L.direction),H=d.add(Y),te=V.add(Y);return k.projectionCache.offsets[w]=s.ax(T,q,H,te)||q,k.projectionCache.offsets[w]}function hi(w,o,d,y,v,T,R,k,L){const q=y?w-o:w+o;let V=q>0?1:-1,Y=0;y&&(V*=-1,Y=Math.PI),V<0&&(Y+=Math.PI);let H,te=V>0?T+v:T+v+1;k.projectionCache.cachedAnchorPoint?H=k.projectionCache.cachedAnchorPoint:(H=xn(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=H);let le,_e,ge=H,be=H,Se=0,Re=0;const Pe=Math.abs(q),De=[];let Be;for(;Se+Re<=Pe;){if(te+=V,te<T||te>=R)return null;Se+=Re,be=ge,_e=le;const st={absOffsetX:Pe,direction:V,distanceFromAnchor:Se,previousVertex:be};if(ge=gr(te,k,st),d===0)De.push(be),Be=ge.sub(be);else{let Ye;const Xe=ge.sub(be);Ye=Xe.mag()===0?hr(gr(te+V,k,st).sub(ge),d,V):hr(Xe,d,V),_e||(_e=be.add(Ye)),le=ds(te,Ye,ge,T,R,_e,d,k,st),De.push(_e),Be=le.sub(_e)}Re=Be.mag()}const Ae=Be._mult((Pe-Se)/Re)._add(_e||be),Ge=Y+Math.atan2(ge.y-be.y,ge.x-be.x);return De.push(Ae),{point:Ae,angle:L?Ge:0,path:De}}const ps=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function E(w,o){for(let d=0;d<w;d++){const y=o.length;o.resize(y+4),o.float32.set(ps,3*y)}}function D(w,o,d){const y=o[0],v=o[1];return w[0]=d[0]*y+d[4]*v+d[12],w[1]=d[1]*y+d[5]*v+d[13],w[3]=d[3]*y+d[7]*v+d[15],w}const W=100;class me{constructor(o,d=new Lt(o.width+200,o.height+200,25),y=new Lt(o.width+200,o.height+200,25)){this.transform=o,this.grid=d,this.ignoredGrid=y,this.pitchFactor=Math.cos(o.pitch*Math.PI/180)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+W,this.screenBottomBoundary=o.height+W,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,d,y,v,T,R,k,L,q,V,Y,H){const te=this.projectAndGetPerspectiveRatio(o.anchorPointX+L[0],o.anchorPointY+L[1],T,V,H),le=y*te.perspectiveRatio;let _e;if(R||k)_e=this._projectCollisionBox(o,le,v,T,R,k,L,te,V,Y,H);else{const Be=te.x+(Y?Y.x*le:0),Ae=te.y+(Y?Y.y*le:0);_e={allPointsOccluded:!1,box:[Be+o.x1*le,Ae+o.y1*le,Be+o.x2*le,Ae+o.y2*le]}}const[ge,be,Se,Re]=_e.box,Pe=R?_e.allPointsOccluded:te.isOccluded;let De=Pe;return De||(De=te.perspectiveRatio<this.perspectiveRatioCutoff),De||(De=!this.isInsideGrid(ge,be,Se,Re)),De||d!=="always"&&this.grid.hitTest(ge,be,Se,Re,d,q)?{box:[ge,be,Se,Re],placeable:!1,offscreen:!1,occluded:Pe}:{box:[ge,be,Se,Re],placeable:!0,offscreen:this.isOffscreen(ge,be,Se,Re),occluded:Pe}}placeCollisionCircles(o,d,y,v,T,R,k,L,q,V,Y,H,te,le){const _e=[],ge=new s.P(d.anchorX,d.anchorY),be=this.getPerspectiveRatio(ge.x,ge.y,R,le),Se=(q?T*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,R)/be:T*be)/s.aB,Re={getElevation:le,pitchedLabelPlaneMatrix:k,lineVertexArray:y,pitchWithMap:q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:R,width:this.transform.width,height:this.transform.height,translation:te},Pe=mn(Se,v,d.lineOffsetX*Se,d.lineOffsetY*Se,!1,d,!1,Re);let De=!1,Be=!1,Ae=!0;if(Pe){const Ge=.5*Y*be+H,st=new s.P(-100,-100),Ye=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Xe=new _r,ot=Pe.first,xt=Pe.last;let Et=[];for(let wr=ot.path.length-1;wr>=1;wr--)Et.push(ot.path[wr]);for(let wr=1;wr<xt.path.length;wr++)Et.push(xt.path[wr]);const ft=2.5*Ge;if(q){const wr=this.projectPathToScreenSpace(Et,Re);Et=wr.some(tn=>tn.signedDistanceFromCamera<=0)?[]:wr.map(tn=>tn.point)}let Vt=[];if(Et.length>0){const wr=Et[0].clone(),tn=Et[0].clone();for(let dn=1;dn<Et.length;dn++)wr.x=Math.min(wr.x,Et[dn].x),wr.y=Math.min(wr.y,Et[dn].y),tn.x=Math.max(tn.x,Et[dn].x),tn.y=Math.max(tn.y,Et[dn].y);Vt=wr.x>=st.x&&tn.x<=Ye.x&&wr.y>=st.y&&tn.y<=Ye.y?[Et]:tn.x<st.x||wr.x>Ye.x||tn.y<st.y||wr.y>Ye.y?[]:s.ay([Et],st.x,st.y,Ye.x,Ye.y)}for(const wr of Vt){Xe.reset(wr,.25*Ge);let tn=0;tn=Xe.length<=.5*Ge?1:Math.ceil(Xe.paddedLength/ft)+1;for(let dn=0;dn<tn;dn++){const an=dn/Math.max(tn-1,1),Mn=Xe.lerp(an),Dn=Mn.x+W,vr=Mn.y+W;_e.push(Dn,vr,Ge,0);const pn=Dn-Ge,Yn=vr-Ge,si=Dn+Ge,mi=vr+Ge;if(Ae=Ae&&this.isOffscreen(pn,Yn,si,mi),Be=Be||this.isInsideGrid(pn,Yn,si,mi),o!=="always"&&this.grid.hitTestCircle(Dn,vr,Ge,o,V)&&(De=!0,!L))return{circles:[],offscreen:!1,collisionDetected:De}}}}return{circles:!L&&De||!Be||be<this.perspectiveRatioCutoff?[]:_e,offscreen:Ae,collisionDetected:De}}projectPathToScreenSpace(o,d){const y=function(v,T){const R=s.L();return s.aq(R,T.pitchedLabelPlaneMatrix),v.map(k=>{const L=Pr(k.x,k.y,R,T.getElevation),q=T.transform.projectTileCoordinates(L.point.x,L.point.y,T.unwrappedTileID,T.getElevation);return q.point.x=(.5*q.point.x+.5)*T.width,q.point.y=(.5*-q.point.y+.5)*T.height,q})}(o,d);return function(v){let T=0,R=0,k=0,L=0;for(let q=0;q<v.length;q++)v[q].isOccluded?(k=q+1,L=0):(L++,L>R&&(R=L,T=k));return v.slice(T,T+R)}(y)}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[],y=new s.a2;for(const Y of o){const H=new s.P(Y.x+W,Y.y+W);y.extend(H),d.push(H)}const{minX:v,minY:T,maxX:R,maxY:k}=y,L=this.grid.query(v,T,R,k).concat(this.ignoredGrid.query(v,T,R,k)),q={},V={};for(const Y of L){const H=Y.key;if(q[H.bucketInstanceId]===void 0&&(q[H.bucketInstanceId]={}),q[H.bucketInstanceId][H.featureIndex])continue;const te=[new s.P(Y.x1,Y.y1),new s.P(Y.x2,Y.y1),new s.P(Y.x2,Y.y2),new s.P(Y.x1,Y.y2)];s.az(d,te)&&(q[H.bucketInstanceId][H.featureIndex]=!0,V[H.bucketInstanceId]===void 0&&(V[H.bucketInstanceId]=[]),V[H.bucketInstanceId].push(H.featureIndex))}return V}insertCollisionBox(o,d,y,v,T,R){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:T,collisionGroupID:R,overlapMode:d},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,d,y,v,T,R){const k=y?this.ignoredGrid:this.grid,L={bucketInstanceId:v,featureIndex:T,collisionGroupID:R,overlapMode:d};for(let q=0;q<o.length;q+=4)k.insertCircle(L,o[q],o[q+1],o[q+2])}projectAndGetPerspectiveRatio(o,d,y,v,T){if(T){let R;v?(R=[o,d,v(o,d),1],s.aw(R,R,T)):(R=[o,d,0,1],D(R,R,T));const k=R[3];return{x:(R[0]/k+1)/2*this.transform.width+W,y:(-R[1]/k+1)/2*this.transform.height+W,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{const R=this.transform.projectTileCoordinates(o,d,y,v);return{x:(R.point.x+1)/2*this.transform.width+W,y:(1-R.point.y)/2*this.transform.height+W,perspectiveRatio:.5+this.transform.cameraToCenterDistance/R.signedDistanceFromCamera*.5,isOccluded:R.isOccluded,signedDistanceFromCamera:R.signedDistanceFromCamera}}}getPerspectiveRatio(o,d,y,v){const T=this.transform.projectTileCoordinates(o,d,y,v);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(o,d,y,v){return y<W||o>=this.screenRightBoundary||v<W||d>this.screenBottomBoundary}isInsideGrid(o,d,y,v){return y>=0&&o<this.gridRightBoundary&&v>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const o=s.ag([]);return s.M(o,o,[-100,-100,0]),o}_projectCollisionBox(o,d,y,v,T,R,k,L,q,V,Y){let H=1,te=0,le=0,_e=1;const ge=o.anchorPointX+k[0],be=o.anchorPointY+k[1];if(R&&!T){const Et=this.projectAndGetPerspectiveRatio(ge+1,be,v,q,Y),ft=Et.x-L.x,Vt=Math.atan((Et.y-L.y)/ft)+(ft<0?Math.PI:0),wr=Math.sin(Vt),tn=Math.cos(Vt);H=tn,te=wr,le=-wr,_e=tn}else if(!R&&T){const Et=jt(this.transform);H=Et.vecEast[0],te=Et.vecEast[1],le=Et.vecSouth[0],_e=Et.vecSouth[1]}let Se=L.x,Re=L.y,Pe=d;T&&(Se=ge,Re=be,Pe=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),Pe*=this.transform.getPitchedTextCorrection(ge,be,v),V||(Pe*=s.ah(.5+L.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(Se+=H*V.x*Pe+le*V.y*Pe,Re+=te*V.x*Pe+_e*V.y*Pe);const De=o.x1*Pe,Be=o.x2*Pe,Ae=(De+Be)/2,Ge=o.y1*Pe,st=o.y2*Pe,Ye=(Ge+st)/2,Xe=[{offsetX:De,offsetY:Ge},{offsetX:Ae,offsetY:Ge},{offsetX:Be,offsetY:Ge},{offsetX:Be,offsetY:Ye},{offsetX:Be,offsetY:st},{offsetX:Ae,offsetY:st},{offsetX:De,offsetY:st},{offsetX:De,offsetY:Ye}];let ot=[];for(const{offsetX:Et,offsetY:ft}of Xe)ot.push(new s.P(Se+H*Et+le*ft,Re+te*Et+_e*ft));let xt=!1;if(T){const Et=ot.map(ft=>this.projectAndGetPerspectiveRatio(ft.x,ft.y,v,q,Y));xt=Et.some(ft=>!ft.isOccluded),ot=Et.map(ft=>new s.P(ft.x,ft.y))}else xt=!0;return{box:s.aA(ot),allPointsOccluded:!xt}}}class ze{constructor(o,d,y,v){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?d:-d))):v&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class nt{constructor(o,d,y,v,T){this.text=new ze(o?o.text:null,d,y,T),this.icon=new ze(o?o.icon:null,d,v,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class St{constructor(o,d,y){this.text=o,this.icon=d,this.skipFade=y}}class rr{constructor(o,d,y,v,T){this.bucketInstanceId=o,this.featureIndex=d,this.sourceLayerIndex=y,this.bucketIndex=v,this.tileID=T}}class Jr{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const d=++this.maxGroupID;this.collisionGroups[o]={ID:d,predicate:y=>y.collisionGroupID===d}}return this.collisionGroups[o]}}function Ar(w,o,d,y,v){const{horizontalAlign:T,verticalAlign:R}=s.aH(w);return new s.P(-(T-.5)*o+y[0]*v,-(R-.5)*d+y[1]*v)}class Xr{constructor(o,d,y,v,T){this.transform=o.clone(),this.terrain=d,this.collisionIndex=new me(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Jr(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(o){const d=this.terrain;return d?(y,v)=>d.getElevation(o,y,v):null}getBucketParts(o,d,y,v){const T=y.getBucket(d),R=y.latestFeatureIndex;if(!T||!R||d.id!==T.layerIds[0])return;const k=y.collisionBoxArray,L=T.layers[0].layout,q=T.layers[0].paint,V=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),Y=y.tileSize/s.$,H=y.tileID.toUnwrapped(),te=L.get("text-rotation-alignment")==="map",le=s.aC(y,1,this.transform.zoom),_e=s.aD(this.collisionIndex.transform,y,q.get("text-translate"),q.get("text-translate-anchor")),ge=s.aD(this.collisionIndex.transform,y,q.get("icon-translate"),q.get("icon-translate-anchor")),be=Cr(te,this.transform,le);this.retainedQueryData[T.bucketInstanceId]=new rr(T.bucketInstanceId,R,T.sourceLayerIndex,T.index,y.tileID);const Se={bucket:T,layout:L,translationText:_e,translationIcon:ge,unwrappedTileID:H,pitchedLabelPlaneMatrix:be,scale:V,textPixelRatio:Y,holdingForFade:y.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:s.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(v)for(const Re of T.sortKeyRanges){const{sortKey:Pe,symbolInstanceStart:De,symbolInstanceEnd:Be}=Re;o.push({sortKey:Pe,symbolInstanceStart:De,symbolInstanceEnd:Be,parameters:Se})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(o,d,y,v,T,R,k,L,q,V,Y,H,te,le,_e,ge,be,Se,Re,Pe){const De=s.aE[o.textAnchor],Be=[o.textOffset0,o.textOffset1],Ae=Ar(De,y,v,Be,T),Ge=this.collisionIndex.placeCollisionBox(d,H,L,q,V,k,R,ge,Y.predicate,Re,Ae,Pe);if((!Se||this.collisionIndex.placeCollisionBox(Se,H,L,q,V,k,R,be,Y.predicate,Re,Ae,Pe).placeable)&&Ge.placeable){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID].text&&(st=this.prevPlacement.variableOffsets[te.crossTileID].anchor),te.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[te.crossTileID]={textOffset:Be,width:y,height:v,anchor:De,textBoxScale:T,prevAnchor:st},this.markUsedJustification(le,De,te,_e),le.allowVerticalPlacement&&(this.markUsedOrientation(le,_e,te),this.placedOrientations[te.crossTileID]=_e),{shift:Ae,placedGlyphBoxes:Ge}}}placeLayerBucketPart(o,d,y){const{bucket:v,layout:T,translationText:R,translationIcon:k,unwrappedTileID:L,pitchedLabelPlaneMatrix:q,textPixelRatio:V,holdingForFade:Y,collisionBoxArray:H,partiallyEvaluatedTextSize:te,collisionGroup:le}=o.parameters,_e=T.get("text-optional"),ge=T.get("icon-optional"),be=s.aF(T,"text-overlap","text-allow-overlap"),Se=be==="always",Re=s.aF(T,"icon-overlap","icon-allow-overlap"),Pe=Re==="always",De=T.get("text-rotation-alignment")==="map",Be=T.get("text-pitch-alignment")==="map",Ae=T.get("icon-text-fit")!=="none",Ge=T.get("symbol-z-order")==="viewport-y",st=Se&&(Pe||!v.hasIconData()||ge),Ye=Pe&&(Se||!v.hasTextData()||_e);!v.collisionArrays&&H&&v.deserializeCollisionBoxes(H);const Xe=this.retainedQueryData[v.bucketInstanceId].tileID,ot=this._getTerrainElevationFunc(Xe),xt=this.transform.getFastPathSimpleProjectionMatrix(Xe),Et=(ft,Vt,wr)=>{var tn,dn;if(d[ft.crossTileID])return;if(Y)return void(this.placements[ft.crossTileID]=new St(!1,!1,!1));let an=!1,Mn=!1,Dn=!0,vr=null,pn={box:null,placeable:!1,offscreen:null,occluded:!1},Yn={placeable:!1},si=null,mi=null,Ji=null,Vo=0,da=0,pa=0;Vt.textFeatureIndex?Vo=Vt.textFeatureIndex:ft.useRuntimeCollisionCircles&&(Vo=ft.featureIndex),Vt.verticalTextFeatureIndex&&(da=Vt.verticalTextFeatureIndex);const ac=Vt.textBox;if(ac){const io=Xn=>{let ai=s.ao.horizontal;if(v.allowVerticalPlacement&&!Xn&&this.prevPlacement){const Co=this.prevPlacement.placedOrientations[ft.crossTileID];Co&&(this.placedOrientations[ft.crossTileID]=Co,ai=Co,this.markUsedOrientation(v,ai,ft))}return ai},Uo=(Xn,ai)=>{if(v.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&Vt.verticalTextBox){for(const Co of v.writingModes)if(Co===s.ao.vertical?(pn=ai(),Yn=pn):pn=Xn(),pn&&pn.placeable)break}else pn=Xn()},Wi=ft.textAnchorOffsetStartIndex,fa=ft.textAnchorOffsetEndIndex;if(fa===Wi){const Xn=(ai,Co)=>{const Qn=this.collisionIndex.placeCollisionBox(ai,be,V,Xe,L,Be,De,R,le.predicate,ot,void 0,xt);return Qn&&Qn.placeable&&(this.markUsedOrientation(v,Co,ft),this.placedOrientations[ft.crossTileID]=Co),Qn};Uo(()=>Xn(ac,s.ao.horizontal),()=>{const ai=Vt.verticalTextBox;return v.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&ai?Xn(ai,s.ao.vertical):{box:null,offscreen:null}}),io(pn&&pn.placeable)}else{let Xn=s.aE[(dn=(tn=this.prevPlacement)===null||tn===void 0?void 0:tn.variableOffsets[ft.crossTileID])===null||dn===void 0?void 0:dn.anchor];const ai=(Qn,Lu,cc)=>{const Fs=Qn.x2-Qn.x1,Go=Qn.y2-Qn.y1,ma=ft.textBoxScale,o0=Ae&&Re==="never"?Lu:null;let go=null,s0=be==="never"?1:2,Rm="never";Xn&&s0++;for(let zd=0;zd<s0;zd++){for(let jd=Wi;jd<fa;jd++){const ga=v.textAnchorOffsets.get(jd);if(Xn&&ga.textAnchor!==Xn)continue;const zs=this.attemptAnchorPlacement(ga,Qn,Fs,Go,ma,De,Be,V,Xe,L,le,Rm,ft,v,cc,R,k,o0,ot);if(zs&&(go=zs.placedGlyphBoxes,go&&go.placeable))return an=!0,vr=zs.shift,go}Xn?Xn=null:Rm=be}return y&&!go&&(go={box:this.collisionIndex.placeCollisionBox(ac,"always",V,Xe,L,Be,De,R,le.predicate,ot,void 0,xt).box,offscreen:!1,placeable:!1,occluded:!1}),go};Uo(()=>ai(ac,Vt.iconBox,s.ao.horizontal),()=>{const Qn=Vt.verticalTextBox;return v.allowVerticalPlacement&&(!pn||!pn.placeable)&&ft.numVerticalGlyphVertices>0&&Qn?ai(Qn,Vt.verticalIconBox,s.ao.vertical):{box:null,occluded:!0,offscreen:null}}),pn&&(an=pn.placeable,Dn=pn.offscreen);const Co=io(pn&&pn.placeable);if(!an&&this.prevPlacement){const Qn=this.prevPlacement.variableOffsets[ft.crossTileID];Qn&&(this.variableOffsets[ft.crossTileID]=Qn,this.markUsedJustification(v,Qn.anchor,ft,Co))}}}if(si=pn,an=si&&si.placeable,Dn=si&&si.offscreen,ft.useRuntimeCollisionCircles){const io=v.text.placedSymbolArray.get(ft.centerJustifiedTextSymbolIndex),Uo=s.ap(v.textSizeData,te,io),Wi=T.get("text-padding");mi=this.collisionIndex.placeCollisionCircles(be,io,v.lineVertexArray,v.glyphOffsetArray,Uo,L,q,y,Be,le.predicate,ft.collisionCircleDiameter,Wi,R,ot),mi.circles.length&&mi.collisionDetected&&!y&&s.w("Collisions detected, but collision boxes are not shown"),an=Se||mi.circles.length>0&&!mi.collisionDetected,Dn=Dn&&mi.offscreen}if(Vt.iconFeatureIndex&&(pa=Vt.iconFeatureIndex),Vt.iconBox){const io=Uo=>this.collisionIndex.placeCollisionBox(Uo,Re,V,Xe,L,Be,De,k,le.predicate,ot,Ae&&vr?vr:void 0,xt);Yn&&Yn.placeable&&Vt.verticalIconBox?(Ji=io(Vt.verticalIconBox),Mn=Ji.placeable):(Ji=io(Vt.iconBox),Mn=Ji.placeable),Dn=Dn&&Ji.offscreen}const lc=_e||ft.numHorizontalGlyphVertices===0&&ft.numVerticalGlyphVertices===0,nl=ge||ft.numIconVertices===0;lc||nl?nl?lc||(Mn=Mn&&an):an=Mn&&an:Mn=an=Mn&&an;const il=Mn&&Ji.placeable;if(an&&si.placeable&&this.collisionIndex.insertCollisionBox(si.box,be,T.get("text-ignore-placement"),v.bucketInstanceId,Yn&&Yn.placeable&&da?da:Vo,le.ID),il&&this.collisionIndex.insertCollisionBox(Ji.box,Re,T.get("icon-ignore-placement"),v.bucketInstanceId,pa,le.ID),mi&&an&&this.collisionIndex.insertCollisionCircles(mi.circles,be,T.get("text-ignore-placement"),v.bucketInstanceId,Vo,le.ID),y&&this.storeCollisionData(v.bucketInstanceId,wr,Vt,si,Ji,mi),ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ft.crossTileID]=new St((an||st)&&!si?.occluded,(Mn||Ye)&&!Ji?.occluded,Dn||v.justReloaded),d[ft.crossTileID]=!0};if(Ge){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ft=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Vt=ft.length-1;Vt>=0;--Vt){const wr=ft[Vt];Et(v.symbolInstances.get(wr),v.collisionArrays[wr],wr)}}else for(let ft=o.symbolInstanceStart;ft<o.symbolInstanceEnd;ft++)Et(v.symbolInstances.get(ft),v.collisionArrays[ft],ft);v.justReloaded=!1}storeCollisionData(o,d,y,v,T,R){if(y.textBox||y.iconBox){let k,L;this.collisionBoxArrays.has(o)?k=this.collisionBoxArrays.get(o):(k=new Map,this.collisionBoxArrays.set(o,k)),k.has(d)?L=k.get(d):(L={text:null,icon:null},k.set(d,L)),y.textBox&&(L.text=v.box),y.iconBox&&(L.icon=T.box)}if(R){let k=this.collisionCircleArrays[o];k===void 0&&(k=this.collisionCircleArrays[o]=[]);for(let L=0;L<R.circles.length;L+=4)k.push(R.circles[L+0]-W),k.push(R.circles[L+1]-W),k.push(R.circles[L+2]),k.push(R.collisionDetected?1:0)}}markUsedJustification(o,d,y,v){let T;T=v===s.ao.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[s.aG(d)];const R=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const k of R)k>=0&&(o.text.placedSymbolArray.get(k).crossTileID=T>=0&&k!==T?0:y.crossTileID)}markUsedOrientation(o,d,y){const v=d===s.ao.horizontal||d===s.ao.horizontalOnly?d:0,T=d===s.ao.vertical?d:0,R=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const k of R)o.text.placedSymbolArray.get(k).placedOrientation=v;y.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let y=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const v=d?d.symbolFadeChange(o):1,T=d?d.opacities:{},R=d?d.variableOffsets:{},k=d?d.placedOrientations:{};for(const L in this.placements){const q=this.placements[L],V=T[L];V?(this.opacities[L]=new nt(V,v,q.text,q.icon),y=y||q.text!==V.text.placed||q.icon!==V.icon.placed):(this.opacities[L]=new nt(null,v,q.text,q.icon,q.skipFade),y=y||q.text||q.icon)}for(const L in T){const q=T[L];if(!this.opacities[L]){const V=new nt(q,v,!1,!1);V.isHidden()||(this.opacities[L]=V,y=y||q.text.placed||q.icon.placed)}}for(const L in R)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=R[L]);for(const L in k)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=k[L]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:o)}updateLayerOpacities(o,d){const y={};for(const v of d){const T=v.getBucket(o);T&&v.latestFeatureIndex&&o.id===T.layerIds[0]&&this.updateBucketOpacities(T,v.tileID,y,v.collisionBoxArray)}}updateBucketOpacities(o,d,y,v){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const T=o.layers[0],R=T.layout,k=new nt(null,0,!1,!1,!0),L=R.get("text-allow-overlap"),q=R.get("icon-allow-overlap"),V=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=R.get("text-rotation-alignment")==="map",H=R.get("text-pitch-alignment")==="map",te=R.get("icon-text-fit")!=="none",le=new nt(null,0,L&&(q||!o.hasIconData()||R.get("icon-optional")),q&&(L||!o.hasTextData()||R.get("text-optional")),!0);!o.collisionArrays&&v&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(v);const _e=(be,Se,Re)=>{for(let Pe=0;Pe<Se/4;Pe++)be.opacityVertexArray.emplaceBack(Re);be.hasVisibleVertices=be.hasVisibleVertices||Re!==$l},ge=this.collisionBoxArrays.get(o.bucketInstanceId);for(let be=0;be<o.symbolInstances.length;be++){const Se=o.symbolInstances.get(be),{numHorizontalGlyphVertices:Re,numVerticalGlyphVertices:Pe,crossTileID:De}=Se;let Be=this.opacities[De];y[De]?Be=k:Be||(Be=le,this.opacities[De]=Be),y[De]=!0;const Ae=Se.numIconVertices>0,Ge=this.placedOrientations[Se.crossTileID],st=Ge===s.ao.vertical,Ye=Ge===s.ao.horizontal||Ge===s.ao.horizontalOnly;if(Re>0||Pe>0){const ot=zf(Be.text);_e(o.text,Re,st?$l:ot),_e(o.text,Pe,Ye?$l:ot);const xt=Be.text.isHidden();[Se.rightJustifiedTextSymbolIndex,Se.centerJustifiedTextSymbolIndex,Se.leftJustifiedTextSymbolIndex].forEach(Vt=>{Vt>=0&&(o.text.placedSymbolArray.get(Vt).hidden=xt||st?1:0)}),Se.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(Se.verticalPlacedTextSymbolIndex).hidden=xt||Ye?1:0);const Et=this.variableOffsets[Se.crossTileID];Et&&this.markUsedJustification(o,Et.anchor,Se,Ge);const ft=this.placedOrientations[Se.crossTileID];ft&&(this.markUsedJustification(o,"left",Se,ft),this.markUsedOrientation(o,ft,Se))}if(Ae){const ot=zf(Be.icon),xt=!(te&&Se.verticalPlacedIconSymbolIndex&&st);Se.placedIconSymbolIndex>=0&&(_e(o.icon,Se.numIconVertices,xt?ot:$l),o.icon.placedSymbolArray.get(Se.placedIconSymbolIndex).hidden=Be.icon.isHidden()),Se.verticalPlacedIconSymbolIndex>=0&&(_e(o.icon,Se.numVerticalIconVertices,xt?$l:ot),o.icon.placedSymbolArray.get(Se.verticalPlacedIconSymbolIndex).hidden=Be.icon.isHidden())}const Xe=ge&&ge.has(be)?ge.get(be):{text:null,icon:null};if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const ot=o.collisionArrays[be];if(ot){let xt=new s.P(0,0);if(ot.textBox||ot.verticalTextBox){let Et=!0;if(V){const ft=this.variableOffsets[De];ft?(xt=Ar(ft.anchor,ft.width,ft.height,ft.textOffset,ft.textBoxScale),Y&&xt._rotate(H?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Et=!1}if(ot.textBox||ot.verticalTextBox){let ft;ot.textBox&&(ft=st),ot.verticalTextBox&&(ft=Ye),po(o.textCollisionBox.collisionVertexArray,Be.text.placed,!Et||ft,Xe.text,xt.x,xt.y)}}if(ot.iconBox||ot.verticalIconBox){const Et=!!(!Ye&&ot.verticalIconBox);let ft;ot.iconBox&&(ft=Et),ot.verticalIconBox&&(ft=!Et),po(o.iconCollisionBox.collisionVertexArray,Be.icon.placed,ft,Xe.icon,te?xt.x:0,te?xt.y:0)}}}}if(o.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);o.bucketInstanceId in this.collisionCircleArrays&&(o.collisionCircleArray=this.collisionCircleArrays[o.bucketInstanceId],delete this.collisionCircleArrays[o.bucketInstanceId])}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,d){const y=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*y>o}setStale(){this.stale=!0}}function po(w,o,d,y,v,T){y&&y.length!==0||(y=[0,0,0,0]);const R=y[0]-W,k=y[1]-W,L=y[2]-W,q=y[3]-W;w.emplaceBack(o?1:0,d?1:0,v||0,T||0,R,k),w.emplaceBack(o?1:0,d?1:0,v||0,T||0,L,k),w.emplaceBack(o?1:0,d?1:0,v||0,T||0,L,q),w.emplaceBack(o?1:0,d?1:0,v||0,T||0,R,q)}const sa=Math.pow(2,25),$n=Math.pow(2,24),di=Math.pow(2,17),aa=Math.pow(2,16),iw=Math.pow(2,9),ow=Math.pow(2,8),sw=Math.pow(2,1);function zf(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const o=w.placed?1:0,d=Math.floor(127*w.opacity);return d*sa+o*$n+d*di+o*aa+d*iw+o*ow+d*sw+o}const $l=0;class jf{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,d,y,v,T){const R=this._bucketParts;for(;this._currentTileIndex<o.length;)if(d.getBucketParts(R,v,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort((k,L)=>k.sortKey-L.sortKey));this._currentPartIndex<R.length;)if(d.placeLayerBucketPart(R[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,T())return!0;return!1}}class Bf{constructor(o,d,y,v,T,R,k,L){this.placement=new Xr(o,d,R,k,L),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,d,y){const v=P.now(),T=()=>!this._forceFullPlacement&&P.now()-v>2;for(;this._currentPlacementIndex>=0;){const R=d[o[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(R.type==="symbol"&&(!R.minzoom||R.minzoom<=k)&&(!R.maxzoom||R.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new jf(R)),this._inProgressLayer.continuePlacement(y[R.source],this.placement,this._showCollisionBoxes,R,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Vl=512/s.$/2;class qf{constructor(o,d,y){this.tileID=o,this.bucketInstanceId=y,this._symbolsByKey={};const v=new Map;for(let T=0;T<d.length;T++){const R=d.get(T),k=R.key,L=v.get(k);L?L.push(R):v.set(k,[R])}for(const[T,R]of v){const k={positions:R.map(L=>({x:Math.floor(L.anchorX*Vl),y:Math.floor(L.anchorY*Vl)})),crossTileIDs:R.map(L=>L.crossTileID)};if(k.positions.length>128){const L=new s.aI(k.positions.length,16,Uint16Array);for(const{x:q,y:V}of k.positions)L.add(q,V);L.finish(),delete k.positions,k.index=L}this._symbolsByKey[T]=k}}getScaledCoordinates(o,d){const{x:y,y:v,z:T}=this.tileID.canonical,{x:R,y:k,z:L}=d.canonical,q=Vl/Math.pow(2,L-T),V=(k*s.$+o.anchorY)*q,Y=v*s.$*Vl;return{x:Math.floor((R*s.$+o.anchorX)*q-y*s.$*Vl),y:Math.floor(V-Y)}}findMatches(o,d,y){const v=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let T=0;T<o.length;T++){const R=o.get(T);if(R.crossTileID)continue;const k=this._symbolsByKey[R.key];if(!k)continue;const L=this.getScaledCoordinates(R,d);if(k.index){const q=k.index.range(L.x-v,L.y-v,L.x+v,L.y+v).sort();for(const V of q){const Y=k.crossTileIDs[V];if(!y[Y]){y[Y]=!0,R.crossTileID=Y;break}}}else if(k.positions)for(let q=0;q<k.positions.length;q++){const V=k.positions[q],Y=k.crossTileIDs[q];if(Math.abs(V.x-L.x)<=v&&Math.abs(V.y-L.y)<=v&&!y[Y]){y[Y]=!0,R.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class $f{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class aw{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const d=Math.round((o-this.lng)/360);if(d!==0)for(const y in this.indexes){const v=this.indexes[y],T={};for(const R in v){const k=v[R];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+d),T[k.tileID.key]=k}this.indexes[y]=T}this.lng=o}addBucket(o,d,y){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let T=0;T<d.symbolInstances.length;T++)d.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const v=this.usedCrossTileIDs[o.overscaledZ];for(const T in this.indexes){const R=this.indexes[T];if(Number(T)>o.overscaledZ)for(const k in R){const L=R[k];L.tileID.isChildOf(o)&&L.findMatches(d.symbolInstances,o,v)}else{const k=R[o.scaledTo(Number(T)).key];k&&k.findMatches(d.symbolInstances,o,v)}}for(let T=0;T<d.symbolInstances.length;T++){const R=d.symbolInstances.get(T);R.crossTileID||(R.crossTileID=y.generate(),v[R.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new qf(o,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(o,d){for(const y of d.getCrossTileIDsLists())for(const v of y)delete this.usedCrossTileIDs[o][v]}removeStaleBuckets(o){let d=!1;for(const y in this.indexes){const v=this.indexes[y];for(const T in v)o[v[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,v[T]),delete v[T],d=!0)}return d}}class Ul{constructor(){this.layerIndexes={},this.crossTileIDs=new $f,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,d,y){let v=this.layerIndexes[o.id];v===void 0&&(v=this.layerIndexes[o.id]=new aw);let T=!1;const R={};v.handleWrapJump(y);for(const k of d){const L=k.getBucket(o);L&&o.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(k.tileID,L,this.crossTileIDs)&&(T=!0),R[L.bucketInstanceId]=!0)}return v.removeStaleBuckets(R)&&(T=!0),T}pruneUnusedLayers(o){const d={};o.forEach(y=>{d[y]=!0});for(const y in this.layerIndexes)d[y]||delete this.layerIndexes[y]}}var lu="void main() {fragColor=vec4(1.0);}";const Do={prelude:Mr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Mr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Mr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Mr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Mr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Mr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Mr(lu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Mr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Mr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Mr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Mr(lu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Mr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Mr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Mr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Mr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Mr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Mr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Mr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Mr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Mr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Mr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Mr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Mr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Mr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Mr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Mr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Mr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Mr(w,o){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=o.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=T?T.concat(v):v,k={};return{fragmentSource:w=w.replace(d,(L,q,V,Y,H)=>(k[H]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${V} ${Y} ${H};
#else
uniform ${V} ${Y} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${V} ${Y} ${H} = u_${H};
#endif
`)),vertexSource:o=o.replace(d,(L,q,V,Y,H)=>{const te=Y==="float"?"vec2":"vec4",le=H.match(/color/)?"color":te;return k[H]?q==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${V} ${te} a_${H};
out ${V} ${Y} ${H};
#else
uniform ${V} ${Y} u_${H};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${V} ${Y} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${le}(a_${H}, u_${H}_t);
#else
    ${V} ${Y} ${H} = u_${H};
#endif
`:q==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${V} ${te} a_${H};
#else
uniform ${V} ${Y} u_${H};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${V} ${Y} ${H} = a_${H};
#else
    ${V} ${Y} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${V} ${Y} ${H} = unpack_mix_${le}(a_${H}, u_${H}_t);
#else
    ${V} ${Y} ${H} = u_${H};
#endif
`}),staticAttributes:y,staticUniforms:R}}class Ba{constructor(o,d,y){this.vertexBuffer=o,this.indexBuffer=d,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var la=s.aJ([{name:"a_pos",type:"Int16",components:2}]);const ks="#define PROJECTION_MERCATOR",qa="mercator";class Or{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return qa}get shaderDefine(){return ks}get shaderPreludeCode(){return Do.projectionMercator}get vertexShaderPreludeCode(){return Do.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(o){}getMeshFromTileID(o,d,y,v,T){if(this._cachedMesh)return this._cachedMesh;const R=new s.aL;R.emplaceBack(0,0),R.emplaceBack(s.$,0),R.emplaceBack(0,s.$),R.emplaceBack(s.$,s.$);const k=o.createVertexBuffer(R,la.members),L=s.aM.simpleSegment(0,0,4,2),q=new s.aN;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3);const V=o.createIndexBuffer(q);return this._cachedMesh=new Ba(k,V,L),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(o){}}class $a{constructor(o=0,d=0,y=0,v=0){if(isNaN(o)||o<0||isNaN(d)||d<0||isNaN(y)||y<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=d,this.left=y,this.right=v}interpolate(o,d,y){return d.top!=null&&o.top!=null&&(this.top=s.C.number(o.top,d.top,y)),d.bottom!=null&&o.bottom!=null&&(this.bottom=s.C.number(o.bottom,d.bottom,y)),d.left!=null&&o.left!=null&&(this.left=s.C.number(o.left,d.left,y)),d.right!=null&&o.right!=null&&(this.right=s.C.number(o.right,d.right,y)),this}getCenter(o,d){const y=s.ah((this.left+o-this.right)/2,0,o),v=s.ah((this.top+d-this.bottom)/2,0,d);return new s.P(y,v)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new $a(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function nd(w,o){if(!w.renderWorldCopies||w.lngRange)return;const d=o.lng-w.center.lng;o.lng+=d>180?-360:d<-180?360:0}function id(w){return Math.max(0,Math.floor(w))}class Vi{constructor(o,d,y,v,T,R){this._callbacks=o,this._tileSize=512,this._renderWorldCopies=R===void 0||!!R,this._minZoom=d||0,this._maxZoom=y||22,this._minPitch=v??0,this._maxPitch=T??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=id(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new $a,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(o,d,y){this._latRange=o.latRange,this._lngRange=o.lngRange,this._width=o.width,this._height=o.height,this._center=o.center,this._elevation=o.elevation,this._minElevationForCurrentTile=o.minElevationForCurrentTile,this._zoom=o.zoom,this._tileZoom=id(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=o.bearingInRadians,this._fovInRadians=o.fovInRadians,this._pitchInRadians=o.pitchInRadians,this._rollInRadians=o.rollInRadians,this._unmodified=o.unmodified,this._edgeInsets=new $a(o.padding.top,o.padding.bottom,o.padding.left,o.padding.right),this._minZoom=o.minZoom,this._maxZoom=o.maxZoom,this._minPitch=o.minPitch,this._maxPitch=o.maxPitch,this._renderWorldCopies=o.renderWorldCopies,this._cameraToCenterDistance=o.cameraToCenterDistance,this._nearZ=o.nearZ,this._farZ=o.farZ,this._autoCalculateNearFarZ=!y&&o.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(o){this._minElevationForCurrentTile=o}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(o){this._minZoom!==o&&(this._minZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(o){this._minPitch!==o&&(this._minPitch=o,this.setPitch(Math.max(this.pitch,o)))}get maxPitch(){return this._maxPitch}setMaxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.setPitch(Math.min(this.pitch,o)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(o){const d=s.aO(o,-180,180)*Math.PI/180;var y,v,T,R,k,L,q,V,Y;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=g(),y=this._rotationMatrix,T=-this._bearingInRadians,R=(v=this._rotationMatrix)[0],k=v[1],L=v[2],q=v[3],V=Math.sin(T),Y=Math.cos(T),y[0]=R*Y+L*V,y[1]=k*Y+q*V,y[2]=R*-V+L*Y,y[3]=k*-V+q*Y)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(o){const d=s.ah(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(o){const d=o/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aP(this._fovInRadians)}setFov(o){o=s.ah(o,.1,150),this.fov!==o&&(this._unmodified=!1,this._fovInRadians=s.ae(o),this._calcMatrices())}get zoom(){return this._zoom}setZoom(o){const d=this.getConstrained(this._center,o).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=s.af(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(o,d){this._autoCalculateNearFarZ=!1,this._nearZ=o,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,d,y){this._unmodified=!1,this._edgeInsets.interpolate(o,d,y),this._constrain(),this._calcMatrices()}resize(o,d,y=!0){this._width=o,this._height=d,y&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new lt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(o){o?(this._lngRange=[o.getWest(),o.getEast()],this._latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-s.ai,s.ai])}getConstrained(o,d){return this._callbacks.getConstrained(o,d)}getCameraQueryGeometry(o,d){if(d.length===1)return[d[0],o];{const{minX:y,minY:v,maxX:T,maxY:R}=s.a2.fromPoints(d).extend(o);return[new s.P(y,v),new s.P(T,v),new s.P(T,R),new s.P(y,R),new s.P(y,v)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const o=this._unmodified,{center:d,zoom:y}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(y),this._unmodified=o,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let o=s.ag(new Float64Array(16));s.N(o,o,[this._width/2,-this._height/2,1]),s.M(o,o,[1,-1,0]),this._clipSpaceToPixelsMatrix=o,o=s.ag(new Float64Array(16)),s.N(o,o,[1,-1,1]),s.M(o,o,[-1,-1,0]),s.N(o,o,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=o,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(o,d,y,v){const T=y!==void 0?y:this.bearing,R=v=v!==void 0?v:this.pitch,k=s.a1.fromLngLat(o,d),L=-Math.cos(s.ae(R)),q=Math.sin(s.ae(R)),V=q*Math.sin(s.ae(T)),Y=-q*Math.cos(s.ae(T));let H=this.elevation;const te=d-H;let le;L*te>=0||Math.abs(L)<.1?(le=1e4,H=d+le*L):le=-te/L;let _e,ge,be=s.aQ(1,k.y),Se=0;do{if(Se+=1,Se>10)break;ge=le/be,_e=new s.a1(k.x+V*ge,k.y+Y*ge),be=1/_e.meterInMercatorCoordinateUnits()}while(Math.abs(le-ge*be)>1e-12);return{center:_e.toLngLat(),elevation:H,zoom:s.ak(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(o){if(this.elevation-o==0)return;const d=s.aj(1,this.center.lat)*this.worldSize,y=this.cameraToCenterDistance/d,v=s.a1.fromLngLat(this.center,this.elevation),T=Je(this.center,this.elevation,this.pitch,this.bearing,y);this._elevation=o;const R=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),s.aQ(T.z,v.y),this.bearing,this.pitch);this._elevation=R.elevation,this._center=R.center,this.setZoom(R.zoom)}getCameraPoint(){const o=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(o*Math.sin(this.rollInRadians),o*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const o=s.aj(1,this.center.lat)*this.worldSize;return Je(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/o).toLngLat()}getMercatorTileCoordinates(o){if(!o)return[0,0,1,1];const d=o.canonical.z>=0?1<<o.canonical.z:Math.pow(2,o.canonical.z);return[o.canonical.x/d,o.canonical.y/d,1/d/s.$,1/d/s.$]}}class pi{constructor(o,d){this.min=o,this.max=d,this.center=s.aR([],s.aS([],this.min,this.max),.5)}quadrant(o){const d=[o%2==0,o<2],y=s.aT(this.min),v=s.aT(this.max);for(let T=0;T<d.length;T++)y[T]=d[T]?this.min[T]:this.center[T],v[T]=d[T]?this.center[T]:this.max[T];return v[2]=this.max[2],new pi(y,v)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersectsFrustum(o){let d=!0;for(let y=0;y<o.planes.length;y++){const v=this.intersectsPlane(o.planes[y]);if(v===0)return 0;v===1&&(d=!1)}return d?2:o.aabb.min[0]>this.max[0]||o.aabb.min[1]>this.max[1]||o.aabb.min[2]>this.max[2]||o.aabb.max[0]<this.min[0]||o.aabb.max[1]<this.min[1]||o.aabb.max[2]<this.min[2]?0:1}intersectsPlane(o){let d=o[3],y=o[3];for(let v=0;v<3;v++)o[v]>0?(d+=o[v]*this.min[v],y+=o[v]*this.max[v]):(y+=o[v]*this.min[v],d+=o[v]*this.max[v]);return d>=0?2:y<0?0:1}}class Ui{distanceToTile2d(o,d,y,v){const T=v.distanceX([o,d]),R=v.distanceY([o,d]);return Math.hypot(T,R)}getWrap(o,d,y){return y}getTileBoundingVolume(o,d,y,v){var T,R;let k=0,L=0;if(v?.terrain){const V=new s.Z(o.z,d,o.z,o.x,o.y),Y=v.terrain.getMinMaxElevation(V);k=(T=Y.minElevation)!==null&&T!==void 0?T:Math.min(0,y),L=(R=Y.maxElevation)!==null&&R!==void 0?R:Math.max(0,y)}const q=1<<o.z;return new pi([d+o.x/q,o.y/q,k],[d+(o.x+1)/q,(o.y+1)/q,L])}allowVariableZoom(o,d){const y=o.fov*(Math.abs(Math.cos(o.rollInRadians))*o.height+Math.abs(Math.sin(o.rollInRadians))*o.width)/o.height,v=s.ah(78.5-y/2,0,60);return!!d.terrain||o.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class Kn{constructor(o,d,y){this.points=o,this.planes=d,this.aabb=y}static fromInvProjectionMatrix(o,d=1,y=0,v,T){const R=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,y),L=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>function(te,le,_e,ge){const be=s.aw([],te,le),Se=1/be[3]/_e*ge;return s.aY(be,be,[Se,Se,1/be[3],Se])}(H,o,d,k));v&&function(H,te,le,_e){const ge=_e?4:0,be=_e?0:4;let Se=0;const Re=[],Pe=[];for(let Ae=0;Ae<4;Ae++){const Ge=s.aU([],H[Ae+be],H[Ae+ge]),st=s.aZ(Ge);s.aR(Ge,Ge,1/st),Re.push(st),Pe.push(Ge)}for(let Ae=0;Ae<4;Ae++){const Ge=s.a_(H[Ae+ge],Pe[Ae],le);Se=Ge!==null&&Ge>=0?Math.max(Se,Ge):Math.max(Se,Re[Ae])}const De=function(Ae,Ge){const st=s.aU([],Ae[Ge[0]],Ae[Ge[1]]),Ye=s.aU([],Ae[Ge[2]],Ae[Ge[1]]),Xe=[0,0,0,0];return s.aV(Xe,s.aW([],st,Ye)),Xe[3]=-s.aX(Xe,Ae[Ge[0]]),Xe}(H,te),Be=function(Ae,Ge){const st=s.a$(Ae),Ye=s.b0([],Ae,1/st),Xe=s.aU([],Ge,s.aR([],Ye,s.aX(Ge,Ye))),ot=s.a$(Xe);if(ot>0){const xt=Math.sqrt(1-Ye[3]*Ye[3]),Et=s.aR([],Ye,-Ye[3]),ft=s.aS([],Et,s.aR([],Xe,xt/ot));return s.b1(Ge,ft)}return null}(le,De);if(Be!==null){const Ae=Be/s.aX(Pe[0],De);Se=Math.min(Se,Ae)}for(let Ae=0;Ae<4;Ae++){const Ge=Math.min(Se,Re[Ae]);H[Ae+be]=[H[Ae+ge][0]+Pe[Ae][0]*Ge,H[Ae+ge][1]+Pe[Ae][1]*Ge,H[Ae+ge][2]+Pe[Ae][2]*Ge,1]}}(L,R[0],v,T);const q=R.map(H=>{const te=s.aU([],L[H[0]],L[H[1]]),le=s.aU([],L[H[2]],L[H[1]]),_e=s.aV([],s.aW([],te,le)),ge=-s.aX(_e,L[H[1]]);return _e.concat(ge)}),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Y=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const H of L)for(let te=0;te<3;te++)V[te]=Math.min(V[te],H[te]),Y[te]=Math.max(Y[te],H[te]);return new Kn(L,q,new pi(V,Y))}}class gn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,d,y){return this._helper.interpolatePadding(o,d,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,d,y=!0){this._helper.resize(o,d,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,d){this._helper.overrideNearFarZ(o,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o,d){}constructor(o,d,y,v,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(R,k)=>this.getConstrained(R,k)},o,d,y,v,T),this._coveringTilesDetailsProvider=new Ui}clone(){const o=new gn;return o.apply(this),o}apply(o,d,y){this._helper.apply(o,d,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(o){const d=[new s.b2(0,o)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new s.P(0,0)),v=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),R=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),k=Math.floor(Math.min(y.x,v.x,T.x,R.x)),L=Math.floor(Math.max(y.x,v.x,T.x,R.x)),q=1;for(let V=k-q;V<=L+q;V++)V!==0&&d.push(new s.b2(V,o))}return d}getCameraFrustum(){return Kn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){const d=this.screenPointToLocation(this.centerPoint,o),y=o?o.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(o,d){const y=s.aj(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(d,y),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),R=s.a1.fromLngLat(o),k=new s.a1(R.x-(v.x-T.x),R.y-(v.y-T.y));this.setCenter(k?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(o,d){return d?this.coordinatePoint(s.a1.fromLngLat(o),d.getElevationForLngLatZoom(o,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.a1.fromLngLat(o))}screenPointToLocation(o,d){var y;return(y=this.screenPointToMercatorCoordinate(o,d))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(o,d){if(d){const y=d.pointCoordinate(o);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(o)}screenPointToMercatorCoordinateAtZ(o,d){const y=d||0,v=[o.x,o.y,0,1],T=[o.x,o.y,1,1];s.aw(v,v,this._pixelMatrixInverse),s.aw(T,T,this._pixelMatrixInverse);const R=v[3],k=T[3],L=v[1]/R,q=T[1]/k,V=v[2]/R,Y=T[2]/k,H=V===Y?0:(y-V)/(Y-V);return new s.a1(s.C.number(v[0]/R,T[0]/k,H)/this.worldSize,s.C.number(L,q,H)/this.worldSize,y)}coordinatePoint(o,d=0,y=this._pixelMatrix){const v=[o.x*this.worldSize,o.y*this.worldSize,d,1];return s.aw(v,v,y),new s.P(v[0]/v[3],v[1]/v[3])}getBounds(){const o=Math.max(0,this._helper._height/2-Le(this));return new lt().extend(this.screenPointToLocation(new s.P(0,o))).extend(this.screenPointToLocation(new s.P(this._helper._width,o))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(o,d){return d?d.pointCoordinate(o)!=null:o.y>this.height/2-Le(this)}calculatePosMatrix(o,d=!1,y){var v;const T=(v=o.key)!==null&&v!==void 0?v:s.b3(o.wrap,o.canonical.z,o.canonical.z,o.canonical.x,o.canonical.y),R=d?this._alignedPosMatrixCache:this._posMatrixCache;if(R.has(T)){const q=R.get(T);return y?q.f32:q.f64}const k=je(o,this.worldSize);s.O(k,d?this._alignedProjMatrix:this._viewProjMatrix,k);const L={f64:k,f32:new Float32Array(k)};return R.set(T,L),y?L.f32:L.f64}calculateFogMatrix(o){const d=o.key,y=this._fogMatrixCacheF32;if(y.has(d))return y.get(d);const v=je(o,this.worldSize);return s.O(v,this._fogMatrix,v),y.set(d,new Float32Array(v)),y.get(d)}getConstrained(o,d){d=s.ah(+d,this.minZoom,this.maxZoom);const y={center:new s.S(o.lng,o.lat),zoom:d};let v=this._helper._lngRange;if(!this._helper._renderWorldCopies&&v===null){const Re=179.9999999999;v=[-Re,Re]}const T=this.tileSize*s.af(y.zoom);let R=0,k=T,L=0,q=T,V=0,Y=0;const{x:H,y:te}=this.size;if(this._helper._latRange){const Re=this._helper._latRange;R=s.U(Re[1])*T,k=s.U(Re[0])*T,k-R<te&&(V=te/(k-R))}v&&(L=s.aO(s.V(v[0])*T,0,T),q=s.aO(s.V(v[1])*T,0,T),q<L&&(q+=T),q-L<H&&(Y=H/(q-L)));const{x:le,y:_e}=de(T,o);let ge,be;const Se=Math.max(Y||0,V||0);if(Se){const Re=new s.P(Y?(q+L)/2:le,V?(k+R)/2:_e);return y.center=Te(T,Re).wrap(),y.zoom+=s.ak(Se),y}if(this._helper._latRange){const Re=te/2;_e-Re<R&&(be=R+Re),_e+Re>k&&(be=k-Re)}if(v){const Re=(L+q)/2;let Pe=le;this._helper._renderWorldCopies&&(Pe=s.aO(le,Re-T/2,Re+T/2));const De=H/2;Pe-De<L&&(ge=L+De),Pe+De>q&&(ge=q-De)}if(ge!==void 0||be!==void 0){const Re=new s.P(ge??le,be??_e);y.center=Te(T,Re).wrap()}return y}calculateCenterFromCameraLngLatAlt(o,d,y,v){return this._helper.calculateCenterFromCameraLngLatAlt(o,d,y,v)}_calculateNearFarZIfNeeded(o,d,y){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=o-v*this._helper._pixelPerMeter/Math.cos(d),R=v<0?T:o,k=Math.PI/2+this.pitchInRadians,L=s.ae(this.fov)*(Math.abs(Math.cos(s.ae(this.roll)))*this.height+Math.abs(Math.sin(s.ae(this.roll)))*this.width)/this.height*(.5+y.y/this.height),q=Math.sin(L)*R/Math.sin(s.ah(Math.PI-k-L,.01,Math.PI-.01)),V=Le(this),Y=Math.atan(V/this._helper.cameraToCenterDistance),H=s.ae(.75),te=Y>H?2*Y*(.5+y.y/(2*V)):H,le=Math.sin(te)*R/Math.sin(s.ah(Math.PI-k-te,.01,Math.PI-.01)),_e=Math.min(q,le);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*_e+R),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const o=this.centerOffset,d=de(this.worldSize,this.center),y=d.x,v=d.y;this._helper._pixelPerMeter=s.aj(1,this.center.lat)*this.worldSize;const T=s.ae(Math.min(this.pitch,ae)),R=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let k;this._calculateNearFarZIfNeeded(R,T,o),k=new Float64Array(16),s.b4(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aq(this._invProjMatrix,k),k[8]=2*-o.x/this._helper._width,k[9]=2*o.y/this._helper._height,this._projectionMatrix=s.b5(k),s.N(k,k,[1,-1,1]),s.M(k,k,[0,0,-this._helper.cameraToCenterDistance]),s.b6(k,k,-this.rollInRadians),s.b7(k,k,this.pitchInRadians),s.b6(k,k,-this.bearingInRadians),s.M(k,k,[-y,-v,0]),this._mercatorMatrix=s.N([],k,[this.worldSize,this.worldSize,this.worldSize]),s.N(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),s.M(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=s.aq([],k);const L=[0,0,-1,1];s.aw(L,L,this._invViewProjMatrix),this._cameraPosition=[L[0]/L[3],L[1]/L[3],L[2]/L[3]],this._fogMatrix=new Float64Array(16),s.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,R,this._helper._farZ),this._fogMatrix[8]=2*-o.x/this.width,this._fogMatrix[9]=2*o.y/this.height,s.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.M(this._fogMatrix,this._fogMatrix,[-y,-v,0]),s.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);const q=this._helper._width%2/2,V=this._helper._height%2/2,Y=Math.cos(this.bearingInRadians),H=Math.sin(-this.bearingInRadians),te=y-Math.round(y)+Y*q+H*V,le=v-Math.round(v)+Y*V+H*q,_e=new Float64Array(k);if(s.M(_e,_e,[te>.5?te-1:te,le>.5?le-1:le,0]),this._alignedProjMatrix=_e,k=s.aq(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const o=this.screenPointToMercatorCoordinate(new s.P(0,0)),d=[o.x*this.worldSize,o.y*this.worldSize,0,1];return s.aw(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const o=s.aj(1,this.center.lat)*this.worldSize;return Je(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/o).toLngLat()}lngLatToCameraDepth(o,d){const y=s.a1.fromLngLat(o),v=[y.x*this.worldSize,y.y*this.worldSize,d,1];return s.aw(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(o){const{overscaledTileID:d,aligned:y,applyTerrainMatrix:v}=o,T=this._helper.getMercatorTileCoordinates(d),R=d?this.calculatePosMatrix(d,y,!0):null;let k;return k=d&&d.terrainRttPosMatrix32f&&v?d.terrainRttPosMatrix32f:R||s.b8(),{mainMatrix:k,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(o){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(o,d,y){return 1}transformLightDirection(o){return s.aT(o)}getRayDirectionFromPixel(o){throw new Error("Not implemented.")}projectTileCoordinates(o,d,y,v){const T=this.calculatePosMatrix(y);let R;v?(R=[o,d,v(o,d),1],s.aw(R,R,T)):(R=[o,d,0,1],D(R,R,T));const k=R[3];return{point:new s.P(R[0]/k,R[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(o){for(const d of o)this.calculatePosMatrix(d)}getMatrixForModel(o,d){const y=s.a1.fromLngLat(o,d),v=y.meterInMercatorCoordinateUnits(),T=s.b9();return s.M(T,T,[y.x,y.y,y.z]),s.b6(T,T,Math.PI),s.b7(T,T,Math.PI/2),s.N(T,T,[-v,v,v]),T}getProjectionDataForCustomLayer(o=!0){const d=new s.Z(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:o}),v=je(d,this.worldSize);s.O(v,this._viewProjMatrix,v),y.tileMercatorCoords=[0,0,1,1];const T=[s.$,s.$,this.worldSize/this._helper.pixelsPerMeter],R=s.ba();return s.N(R,v,T),y.fallbackMatrix=R,y.mainMatrix=R,y}getFastPathSimpleProjectionMatrix(o){return this.calculatePosMatrix(o)}}function y_(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Gi(w){if(w.useSlerp)if(w.k<1){const o=s.bb(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),d=s.bb(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),y=new Float64Array(4);s.bc(y,o,d,w.k);const v=s.bd(y);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(s.C.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(s.C.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(s.C.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function fo(w,o,d,y,v){const T=v.padding,R=de(v.worldSize,d.getNorthWest()),k=de(v.worldSize,d.getNorthEast()),L=de(v.worldSize,d.getSouthEast()),q=de(v.worldSize,d.getSouthWest()),V=s.ae(-y),Y=R.rotate(V),H=k.rotate(V),te=L.rotate(V),le=q.rotate(V),_e=new s.P(Math.max(Y.x,H.x,le.x,te.x),Math.max(Y.y,H.y,le.y,te.y)),ge=new s.P(Math.min(Y.x,H.x,le.x,te.x),Math.min(Y.y,H.y,le.y,te.y)),be=_e.sub(ge),Se=(v.width-(T.left+T.right+o.left+o.right))/be.x,Re=(v.height-(T.top+T.bottom+o.top+o.bottom))/be.y;if(Re<0||Se<0)return void y_();const Pe=Math.min(s.ak(v.scale*Math.min(Se,Re)),w.maxZoom),De=s.P.convert(w.offset),Be=new s.P((o.left-o.right)/2,(o.top-o.bottom)/2).rotate(s.ae(y)),Ae=De.add(Be).mult(v.scale/s.af(Pe));return{center:Te(v.worldSize,R.add(L).div(2).sub(Ae)),zoom:Pe,bearing:y}}class Fi{get useGlobeControls(){return!1}handlePanInertia(o,d){return{easingOffset:o,easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(o,d){o.bearingDelta&&d.setBearing(d.bearing+o.bearingDelta),o.pitchDelta&&d.setPitch(d.pitch+o.pitchDelta),o.rollDelta&&d.setRoll(d.roll+o.rollDelta),o.zoomDelta&&d.setZoom(d.zoom+o.zoomDelta)}handleMapControlsPan(o,d,y){o.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(y,o.around)}cameraForBoxAndBearing(o,d,y,v,T){return fo(o,d,y,v,T)}handleJumpToCenterZoom(o,d){o.zoom!==(d.zoom!==void 0?+d.zoom:o.zoom)&&o.setZoom(+d.zoom),d.center!==void 0&&o.setCenter(s.S.convert(d.center))}handleEaseTo(o,d){const y=o.zoom,v=o.padding,T={roll:o.roll,pitch:o.pitch,bearing:o.bearing},R={roll:d.roll===void 0?o.roll:d.roll,pitch:d.pitch===void 0?o.pitch:d.pitch,bearing:d.bearing===void 0?o.bearing:d.bearing},k=d.zoom!==void 0,L=!o.isPaddingEqual(d.padding);let q=!1;const V=k?+d.zoom:o.zoom;let Y=o.centerPoint.add(d.offsetAsPoint);const H=o.screenPointToLocation(Y),{center:te,zoom:le}=o.getConstrained(s.S.convert(d.center||H),V??y);nd(o,te);const _e=de(o.worldSize,H),ge=de(o.worldSize,te).sub(_e),be=s.af(le-y);return q=le!==y,{easeFunc:Se=>{if(q&&o.setZoom(s.C.number(y,le,Se)),s.be(T,R)||Gi({startEulerAngles:T,endEulerAngles:R,tr:o,k:Se,useSlerp:T.roll!=R.roll}),L&&(o.interpolatePadding(v,d.padding,Se),Y=o.centerPoint.add(d.offsetAsPoint)),d.around)o.setLocationAtPoint(d.around,d.aroundPoint);else{const Re=s.af(o.zoom-y),Pe=le>y?Math.min(2,be):Math.max(.5,be),De=Math.pow(Pe,1-Se),Be=Te(o.worldSize,_e.add(ge.mult(Se*De)).mult(Re));o.setLocationAtPoint(o.renderWorldCopies?Be.wrap():Be,Y)}},isZooming:q,elevationCenter:te}}handleFlyTo(o,d){const y=d.zoom!==void 0,v=o.zoom,T=o.getConstrained(s.S.convert(d.center||d.locationAtOffset),y?+d.zoom:v),R=T.center,k=T.zoom;nd(o,R);const L=de(o.worldSize,d.locationAtOffset),q=de(o.worldSize,R).sub(L),V=q.mag(),Y=s.af(k-v);let H;if(d.minZoom!==void 0){const te=Math.min(+d.minZoom,v,k),le=o.getConstrained(R,te).zoom;H=s.af(le-v)}return{easeFunc:(te,le,_e,ge)=>{o.setZoom(te===1?k:v+s.ak(le));const be=te===1?R:Te(o.worldSize,L.add(q.mult(_e)).mult(le));o.setLocationAtPoint(o.renderWorldCopies?be.wrap():be,ge)},scaleOfZoom:Y,targetCenter:R,scaleOfMinZoom:H,pixelPathLength:V}}}class Sn{constructor(o,d,y){this.blendFunction=o,this.blendColor=d,this.mask=y}}Sn.Replace=[1,0],Sn.disabled=new Sn(Sn.Replace,s.bf.transparent,[!1,!1,!1,!1]),Sn.unblended=new Sn(Sn.Replace,s.bf.transparent,[!0,!0,!0,!0]),Sn.alphaBlended=new Sn([1,771],s.bf.transparent,[!0,!0,!0,!0]);const Va=2305;class or{constructor(o,d,y){this.enable=o,this.mode=d,this.frontFace=y}}or.disabled=new or(!1,1029,Va),or.backCCW=new or(!0,1029,Va),or.frontCCW=new or(!0,1028,Va);class br{constructor(o,d,y){this.func=o,this.mask=d,this.range=y}}br.ReadOnly=!1,br.ReadWrite=!0,br.disabled=new br(519,br.ReadOnly,[0,1]);const Ls=7680;class Wr{constructor(o,d,y,v,T,R){this.test=o,this.ref=d,this.mask=y,this.fail=v,this.depthFail=T,this.pass=R}}Wr.disabled=new Wr({func:519,mask:0},0,0,Ls,Ls,Ls);const mo=new WeakMap;function fs(w){var o;if(mo.has(w))return mo.get(w);{const d=(o=w.getParameter(w.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return mo.set(w,d),d}}class ms{get awaitingQuery(){return!!this._readbackQueue}constructor(o){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=o;const d=o.context,y=d.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const v=new s.aL;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const T=new s.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Ba(d.createVertexBuffer(v,la.members),d.createIndexBuffer(T),s.aM.simpleSegment(0,0,v.length,T.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(y.TEXTURE1);const R=y.createTexture();y.bindTexture(y.TEXTURE_2D,R),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(R),fs(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const o=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),o.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(o,d){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(o,d),this._updateCount++,this._measuredError}_bindFramebuffer(){const o=this._cachedRenderContext.context,d=o.gl;o.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),o.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(o,d){const y=this._cachedRenderContext.context,v=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:s.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,v.TRIANGLES,br.disabled,Wr.disabled,Sn.unblended,or.disabled,((T,R)=>({u_input:T,u_output_expected:R}))(o,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&fs(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const T=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const o=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&fs(o)){const d=o.clientWaitSync(this._readbackQueue.sync,0,0);if(d===o.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===o.TIMEOUT_EXPIRED)return;o.bindBuffer(o.PIXEL_PACK_BUFFER,this._pbo),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),o.bindBuffer(o.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),o.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ms._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(o){let d=0;return d+=o[0]/256,d+=o[1]/65536,d+=o[2]/16777216,o[3]<127&&(d=-d),d/128}}const od=s.$/128;function Vf(w,o){const d=w.granularity!==void 0?Math.max(w.granularity,1):1,y=d+(w.generateBorders?2:0),v=d+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),T=y+1,R=v+1,k=w.generateBorders?-1:0,L=w.generateBorders||w.extendToNorthPole?-1:0,q=d+(w.generateBorders?1:0),V=d+(w.generateBorders||w.extendToSouthPole?1:0),Y=T*R,H=y*v*6,te=T*R>65536;if(te&&o==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const le=te||o==="32bit",_e=new Int16Array(2*Y);let ge=0;for(let Re=L;Re<=V;Re++)for(let Pe=k;Pe<=q;Pe++){let De=Pe/d*s.$;Pe===-1&&(De=-od),Pe===d+1&&(De=s.$+od);let Be=Re/d*s.$;Re===-1&&(Be=w.extendToNorthPole?s.bh:-od),Re===d+1&&(Be=w.extendToSouthPole?s.bi:s.$+od),_e[ge++]=De,_e[ge++]=Be}const be=le?new Uint32Array(H):new Uint16Array(H);let Se=0;for(let Re=0;Re<v;Re++)for(let Pe=0;Pe<y;Pe++){const De=Pe+1+Re*T,Be=Pe+(Re+1)*T,Ae=Pe+1+(Re+1)*T;be[Se++]=Pe+Re*T,be[Se++]=Be,be[Se++]=De,be[Se++]=De,be[Se++]=Be,be[Se++]=Ae}return{vertices:_e.buffer.slice(0),indices:be.buffer.slice(0),uses32bitIndices:le}}const Gl=new s.aK({fill:new s.bj(128,2),line:new s.bj(512,0),tile:new s.bj(128,32),stencil:new s.bj(128,1),circle:3});class cu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Do.projectionGlobe}get vertexShaderPreludeCode(){return Do.projectionMercator.vertexSource}get subdivisionGranularity(){return Gl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(o){this._errorMeasurement||(this._errorMeasurement=new ms(o));const d=s.U(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(d,y),T=P.now();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=T);const R=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bl(R))}_getMeshKey(o){return`${o.granularity.toString(36)}_${o.generateBorders?"b":""}${o.extendToNorthPole?"n":""}${o.extendToSouthPole?"s":""}`}getMeshFromTileID(o,d,y,v,T){const R=(T==="stencil"?Gl.stencil:Gl.tile).getGranularityForZoomLevel(d.z);return this._getMesh(o,{granularity:R,generateBorders:y,extendToNorthPole:d.y===0&&v,extendToSouthPole:d.y===(1<<d.z)-1&&v})}_getMesh(o,d){const y=this._getMeshKey(d);if(y in this._tileMeshCache)return this._tileMeshCache[y];const v=function(T,R){const k=Vf(R,"16bit"),L=s.aL.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),q=s.aN.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new Ba(T.createVertexBuffer(L,la.members),T.createIndexBuffer(q),s.aM.simpleSegment(0,0,L.length,q.length))}(o,d);return this._tileMeshCache[y]=v,v}recalculate(o){}hasTransition(){const o=P.now();let d=!1;return d=d||(o-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(o){this._errorQueryLatitudeDegrees=o}}const sd=new s.r({type:new s.D(s.v.projection.type)});class ad extends s.E{constructor(o){super(),this._transitionable=new s.t(sd),this.setProjection(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0)),this._mercatorProjection=new Or,this._verticalPerspectiveProjection=new cu}get transitionState(){const o=this.properties.get("type");if(typeof o=="string"&&o==="mercator")return 0;if(typeof o=="string"&&o==="vertical-perspective")return 1;if(o instanceof s.bm){if(o.from==="vertical-perspective"&&o.to==="mercator")return 1-o.transition;if(o.from==="mercator"&&o.to==="vertical-perspective")return o.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(o){this._mercatorProjection.updateGPUdependent(o),this._verticalPerspectiveProjection.updateGPUdependent(o)}getMeshFromTileID(o,d,y,v,T){return this.currentProjection.getMeshFromTileID(o,d,y,v,T)}setProjection(o){this._transitionable.setValue("type",o?.type||"mercator")}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}setErrorQueryLatitudeDegrees(o){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(o),this._mercatorProjection.setErrorQueryLatitudeDegrees(o)}}function ld(w){const o=Hl(w.worldSize,w.center.lat);return 2*Math.PI*o}function No(w,o,d,y,v){const T=1/(1<<v),R=o/s.$*T+y*T,k=s.bo((w/s.$*T+d*T)*Math.PI*2+Math.PI,2*Math.PI),L=2*Math.atan(Math.exp(Math.PI-R*Math.PI*2))-.5*Math.PI,q=Math.cos(L),V=new Float64Array(3);return V[0]=Math.sin(k)*q,V[1]=Math.sin(L),V[2]=Math.cos(k)*q,V}function fi(w){return function(o,d){const y=Math.cos(d),v=new Float64Array(3);return v[0]=Math.sin(o)*y,v[1]=Math.sin(d),v[2]=Math.cos(o)*y,v}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Hl(w,o){return w/(2*Math.PI)/Math.cos(o*Math.PI/180)}function uu(w){const o=Math.asin(w[1])/Math.PI*180,d=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(d>1e-6){const y=w[0]/d,v=Math.acos(w[2]/d),T=(y>0?v:-v)/Math.PI*180;return new s.S(s.aO(T,-180,180),o)}return new s.S(0,o)}function Ua(w){return Math.cos(w*Math.PI/180)}function Vn(w,o){const d=Ua(w),y=Ua(o);return s.ak(y/d)}function __(w,o){const d=w.rotate(o.bearingInRadians),y=o.zoom+Vn(o.center.lat,0),v=s.bk(1/Ua(o.center.lat),1/Ua(Math.min(Math.abs(o.center.lat),60)),s.bn(y,7,3,0,1)),T=360/ld({worldSize:o.worldSize,center:{lat:o.center.lat}});return new s.S(o.center.lng-d.x*T*v,s.ah(o.center.lat+d.y*T,-s.ai,s.ai))}function hu(w){const o=.5*w,d=Math.sin(o),y=Math.cos(o);return Math.log(d+y)-Math.log(y-d)}function Uf(w,o,d,y){const v=w.lat+d*y;if(Math.abs(d)>1){const T=(Math.sign(w.lat+d)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,R=Math.abs(w.lat+d)*Math.PI/180,k=hu(T+y*(R-T)),L=hu(T),q=hu(R);return new s.S(w.lng+o*((k-L)/(q-L)),v)}return new s.S(w.lng+o*y,v)}class lw{constructor(o){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=o}swapBuffers(){if(!this._hadAnyChanges)return;const o=this._cachePrevious;this._cachePrevious=this._cache,this._cache=o,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(o,d,y,v){const T=`${o.z}_${o.x}_${o.y}_${v?.terrain?"t":""}`,R=this._cache.get(T);if(R)return R;const k=this._cachePrevious.get(T);if(k)return this._cache.set(T,k),k;const L=this._boundingVolumeFactory(o,d,y,v);return this._cache.set(T,L),this._hadAnyChanges=!0,L}}class Jl{constructor(o,d,y,v){this.min=y,this.max=v,this.points=o,this.planes=d}static fromAabb(o,d){const y=[];for(let v=0;v<8;v++)y.push([1&~v?o[0]:d[0],(v>>1&1)==1?d[1]:o[1],(v>>2&1)==1?d[2]:o[2]]);return new Jl(y,[[-1,0,0,d[0]],[1,0,0,-o[0]],[0,-1,0,d[1]],[0,1,0,-o[1]],[0,0,-1,d[2]],[0,0,1,-o[2]]],o,d)}static fromCenterSizeAngles(o,d,y){const v=s.br([],y[0],y[1],y[2]),T=s.bs([],[d[0],0,0],v),R=s.bs([],[0,d[1],0],v),k=s.bs([],[0,0,d[2]],v),L=[...o],q=[...o];for(let Y=0;Y<8;Y++)for(let H=0;H<3;H++){const te=o[H]+T[H]*(1&~Y?-1:1)+R[H]*((Y>>1&1)==1?1:-1)+k[H]*((Y>>2&1)==1?1:-1);L[H]=Math.min(L[H],te),q[H]=Math.max(q[H],te)}const V=[];for(let Y=0;Y<8;Y++){const H=[...o];s.aS(H,H,s.aR([],T,1&~Y?-1:1)),s.aS(H,H,s.aR([],R,(Y>>1&1)==1?1:-1)),s.aS(H,H,s.aR([],k,(Y>>2&1)==1?1:-1)),V.push(H)}return new Jl(V,[[...T,-s.aX(T,V[0])],[...R,-s.aX(R,V[0])],[...k,-s.aX(k,V[0])],[-T[0],-T[1],-T[2],-s.aX(T,V[7])],[-R[0],-R[1],-R[2],-s.aX(R,V[7])],[-k[0],-k[1],-k[2],-s.aX(k,V[7])]],L,q)}intersectsFrustum(o){let d=!0;const y=this.points.length,v=this.planes.length,T=o.planes.length,R=o.points.length;for(let k=0;k<T;k++){const L=o.planes[k];let q=0;for(let V=0;V<y;V++){const Y=this.points[V];L[0]*Y[0]+L[1]*Y[1]+L[2]*Y[2]+L[3]>=0&&q++}if(q===0)return 0;q<y&&(d=!1)}if(d)return 2;for(let k=0;k<v;k++){const L=this.planes[k];let q=0;for(let V=0;V<R;V++){const Y=o.points[V];L[0]*Y[0]+L[1]*Y[1]+L[2]*Y[2]+L[3]>=0&&q++}if(q===0)return 0}return 1}intersectsPlane(o){const d=this.points.length;let y=0;for(let v=0;v<d;v++){const T=this.points[v];o[0]*T[0]+o[1]*T[1]+o[2]*T[2]+o[3]>=0&&y++}return y===d?2:y===0?0:1}}function Ci(w,o,d){const y=w-o;return y<0?-y:Math.max(0,y-d)}function du(w,o,d,y,v){const T=w-d;let R;return R=T<0?Math.min(-T,1+T-v):T>1?Math.min(Math.max(T-v,0),1-T):0,Math.max(R,Ci(o,y,v))}class gs{constructor(){this._boundingVolumeCache=new lw(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(o,d,y,v){const T=1<<y.z,R=1/T,k=y.x/T,L=y.y/T;let q=2;return q=Math.min(q,du(o,d,k,L,R)),q=Math.min(q,du(o,d,k+.5,-L-R,R)),q=Math.min(q,du(o,d,k+.5,2-L-R,R)),q}getWrap(o,d,y){const v=1<<d.z,T=1/v,R=d.x/v,k=Ci(o.x,R,T),L=Ci(o.x,R-1,T),q=Ci(o.x,R+1,T),V=Math.min(k,L,q);return V===q?1:V===L?-1:0}allowVariableZoom(o,d){return Ot(o,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(o,d,y,v){return this._boundingVolumeCache.getTileBoundingVolume(o,d,y,v)}_computeTileBoundingVolume(o,d,y,v){var T,R;let k=0,L=0;if(v?.terrain){const q=new s.Z(o.z,d,o.z,o.x,o.y),V=v.terrain.getMinMaxElevation(q);k=(T=V.minElevation)!==null&&T!==void 0?T:Math.min(0,y),L=(R=V.maxElevation)!==null&&R!==void 0?R:Math.max(0,y)}if(k/=s.bu,L/=s.bu,k+=1,L+=1,o.z<=0)return Jl.fromAabb([-L,-L,-L],[L,L,L]);if(o.z===1)return Jl.fromAabb([o.x===0?-L:0,o.y===0?0:-L,-L],[o.x===0?0:L,o.y===0?L:0,L]);{const q=[No(0,0,o.x,o.y,o.z),No(s.$,0,o.x,o.y,o.z),No(s.$,s.$,o.x,o.y,o.z),No(0,s.$,o.x,o.y,o.z)],V=[];for(const Xe of q)V.push(s.aR([],Xe,L));if(L!==k)for(const Xe of q)V.push(s.aR([],Xe,k));o.y===0&&V.push([0,1,0]),o.y===(1<<o.z)-1&&V.push([0,-1,0]);const Y=[1,1,1],H=[-1,-1,-1];for(const Xe of V)for(let ot=0;ot<3;ot++)Y[ot]=Math.min(Y[ot],Xe[ot]),H[ot]=Math.max(H[ot],Xe[ot]);const te=No(s.$/2,s.$/2,o.x,o.y,o.z),le=s.aW([],[0,1,0],te);s.aV(le,le);const _e=s.aW([],te,le);s.aV(_e,_e);const ge=s.aW([],q[2],q[1]);s.aV(ge,ge);const be=s.aW([],q[0],q[3]);s.aV(be,be),V.push(s.aR([],te,L)),o.y>=(1<<o.z)/2&&V.push(s.aR([],No(s.$/2,0,o.x,o.y,o.z),L)),o.y<(1<<o.z)/2&&V.push(s.aR([],No(s.$/2,s.$,o.x,o.y,o.z),L));const Se=pu(te,V),Re=pu(_e,V),Pe=[-te[0],-te[1],-te[2],Se.max],De=[te[0],te[1],te[2],-Se.min],Be=[-_e[0],-_e[1],-_e[2],Re.max],Ae=[_e[0],_e[1],_e[2],-Re.min],Ge=[...ge,0],st=[...be,0],Ye=[];return o.y===0?Ye.push(s.bt(st,Ge,Pe),s.bt(st,Ge,De)):Ye.push(s.bt(Be,Ge,Pe),s.bt(Be,Ge,De),s.bt(Be,st,Pe),s.bt(Be,st,De)),o.y===(1<<o.z)-1?Ye.push(s.bt(st,Ge,Pe),s.bt(st,Ge,De)):Ye.push(s.bt(Ae,Ge,Pe),s.bt(Ae,Ge,De),s.bt(Ae,st,Pe),s.bt(Ae,st,De)),new Jl(Ye,[Pe,De,Be,Ae,Ge,st],Y,H)}}}function pu(w,o){let d=1/0,y=-1/0;for(const v of o){const T=s.aX(w,v);d=Math.min(d,T),y=Math.max(y,T)}return{min:d,max:y}}class fu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,d,y){return this._helper.interpolatePadding(o,d,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,d){this._helper.resize(o,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,d){this._helper.overrideNearFarZ(o,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o){}constructor(){this._cachedClippingPlane=s.bv(),this._projectionMatrix=s.b9(),this._globeViewProjMatrix32f=s.b8(),this._globeViewProjMatrixNoCorrection=s.b9(),this._globeViewProjMatrixNoCorrectionInverted=s.b9(),this._globeProjMatrixInverted=s.b9(),this._cameraPosition=s.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,d)=>this.getConstrained(o,d)}),this._coveringTilesDetailsProvider=new gs}clone(){const o=new fu;return o.apply(this),o}apply(o,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(o)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const o=s.bp();return o[0]=this._cameraPosition[0],o[1]=this._cameraPosition[1],o[2]=this._cameraPosition[2],o}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(o){const{overscaledTileID:d,applyGlobeMatrix:y}=o,v=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(o){const d=this.pitchInRadians,y=this.cameraToCenterDistance/o,v=Math.sin(d)*y,T=Math.cos(d)*y+1,R=1/Math.sqrt(v*v+T*T)*1;let k=-v,L=T;const q=Math.sqrt(k*k+L*L);k/=q,L/=q;const V=[0,k,L];s.bw(V,V,[0,0,0],-this.bearingInRadians),s.bx(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),s.by(V,V,[0,0,0],this.center.lng*Math.PI/180);const Y=1/s.aZ(V);return s.aR(V,V,Y),[...V,-R*Y]}isLocationOccluded(o){return!this.isSurfacePointVisible(fi(o))}transformLightDirection(o){const d=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,v=Math.cos(y),T=[Math.sin(d)*v,Math.sin(y),Math.cos(d)*v],R=[T[2],0,-T[0]],k=[0,0,0];s.aW(k,R,T),s.aV(R,R),s.aV(k,k);const L=[0,0,0];return s.aV(L,[R[0]*o[0]+k[0]*o[1]+T[0]*o[2],R[1]*o[0]+k[1]*o[1]+T[1]*o[2],R[2]*o[0]+k[2]*o[1]+T[2]*o[2]]),L}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(o,d,y){const v=function(k,L,q){const V=1/(1<<q.z);return new s.a1(k/s.$*V+q.x*V,L/s.$*V+q.y*V)}(o,d,y.canonical),T=(R=v.y,[s.bo(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-R*Math.PI*2))-.5*Math.PI]);var R;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(o,d,y,v){const T=y.canonical,R=No(o,d,T.x,T.y,T.z),k=1+(v?v(o,d):0)/s.bu,L=[R[0]*k,R[1]*k,R[2]*k,1];s.aw(L,L,this._globeViewProjMatrixNoCorrection);const q=this._cachedClippingPlane,V=q[0]*R[0]+q[1]*R[1]+q[2]*R[2]+q[3]<0;return{point:new s.P(L[0]/L[3],L[1]/L[3]),signedDistanceFromCamera:L[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const o=Hl(this.worldSize,this.center.lat),d=s.ba(),y=s.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*o),s.b4(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;d[8]=2*-v.x/this._helper._width,d[9]=2*v.y/this._helper._height,this._projectionMatrix=s.b5(d),this._globeProjMatrixInverted=s.ba(),s.aq(this._globeProjMatrixInverted,d),s.M(d,d,[0,0,-this.cameraToCenterDistance]),s.b6(d,d,this.rollInRadians),s.b7(d,d,-this.pitchInRadians),s.b6(d,d,this.bearingInRadians),s.M(d,d,[0,0,-o]);const T=s.bp();T[0]=o,T[1]=o,T[2]=o,s.b7(y,d,this.center.lat*Math.PI/180),s.bz(y,y,-this.center.lng*Math.PI/180),s.N(y,y,T),this._globeViewProjMatrixNoCorrection=y,s.b7(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bz(d,d,-this.center.lng*Math.PI/180),s.N(d,d,T),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=s.ba(),s.aq(this._globeViewProjMatrixNoCorrectionInverted,y);const R=s.bp();this._cameraPosition=s.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/o,s.bw(this._cameraPosition,this._cameraPosition,R,-this.rollInRadians),s.bx(this._cameraPosition,this._cameraPosition,R,this.pitchInRadians),s.bw(this._cameraPosition,this._cameraPosition,R,-this.bearingInRadians),s.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bx(this._cameraPosition,this._cameraPosition,R,-this.center.lat*Math.PI/180),s.by(this._cameraPosition,this._cameraPosition,R,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(o);const k=s.b5(this._globeViewProjMatrixNoCorrectionInverted);s.N(k,k,[1,1,-1]),this._cachedFrustum=Kn.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(o){s.w("calculateFogMatrix is not supported on globe projection.");const d=s.ba();return s.ag(d),d}getVisibleUnwrappedCoordinates(o){return[new s.b2(0,o)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){o&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,d){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=fi(o);s.aR(y,y,1+d/s.bu);const v=s.bv();return s.aw(v,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(o){}getBounds(){const o=.5*this.width,d=.5*this.height,y=[new s.P(0,0),new s.P(o,0),new s.P(this.width,0),new s.P(this.width,d),new s.P(this.width,this.height),new s.P(o,this.height),new s.P(0,this.height),new s.P(0,d)],v=[];for(const Y of y)v.push(this.unprojectScreenPoint(Y));let T=0,R=0,k=0,L=0;const q=this.center;for(const Y of v){const H=s.bA(q.lng,Y.lng),te=s.bA(q.lat,Y.lat);H<R&&(R=H),H>T&&(T=H),te<L&&(L=te),te>k&&(k=te)}const V=[q.lng+R,q.lat+L,q.lng+T,q.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new lt(V)}getConstrained(o,d){const y=s.ah(o.lat,-s.ai,s.ai),v=s.ah(+d,this.minZoom+Vn(0,y),this.maxZoom);return{center:new s.S(o.lng,y),zoom:v}}calculateCenterFromCameraLngLatAlt(o,d,y,v){return this._helper.calculateCenterFromCameraLngLatAlt(o,d,y,v)}setLocationAtPoint(o,d){const y=fi(this.unprojectScreenPoint(d)),v=fi(o),T=s.bp();s.bB(T);const R=s.bp();s.by(R,y,T,-this.center.lng*Math.PI/180),s.bx(R,R,T,this.center.lat*Math.PI/180);const k=v[0]*v[0]+v[2]*v[2],L=R[0]*R[0];if(k<L)return;const q=Math.sqrt(k-L),V=-q,Y=s.bC(v[0],v[2],R[0],q),H=s.bC(v[0],v[2],R[0],V),te=s.bp();s.by(te,v,T,-Y);const le=s.bC(te[1],te[2],R[1],R[2]),_e=s.bp();s.by(_e,v,T,-H);const ge=s.bC(_e[1],_e[2],R[1],R[2]),be=.5*Math.PI,Se=le>=-be&&le<=be,Re=ge>=-be&&ge<=be;let Pe,De;if(Se&&Re){const st=this.center.lng*Math.PI/180,Ye=this.center.lat*Math.PI/180;s.bD(Y,st)+s.bD(le,Ye)<s.bD(H,st)+s.bD(ge,Ye)?(Pe=Y,De=le):(Pe=H,De=ge)}else if(Se)Pe=Y,De=le;else{if(!Re)return;Pe=H,De=ge}const Be=Pe/Math.PI*180,Ae=De/Math.PI*180,Ge=this.center.lat;this.setCenter(new s.S(Be,s.ah(Ae,-90,90))),this.setZoom(this.zoom+Vn(Ge,this.center.lat))}locationToScreenPoint(o,d){const y=fi(o);if(d){const v=d.getElevationForLngLatZoom(o,this._helper._tileZoom);s.aR(y,y,1+v/s.bu)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(o){const d=s.bv();return s.aw(d,[...o,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new s.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(o,d){if(d){const y=d.pointCoordinate(o);if(y)return y}return s.a1.fromLngLat(this.unprojectScreenPoint(o))}screenPointToLocation(o,d){var y;return(y=this.screenPointToMercatorCoordinate(o,d))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(o,d){const y=this._cameraPosition,v=this.getRayDirectionFromPixel(o);return!!this.rayPlanetIntersection(y,v)}getRayDirectionFromPixel(o){const d=s.bv();d[0]=o.x/this.width*2-1,d[1]=-1*(o.y/this.height*2-1),d[2]=1,d[3]=1,s.aw(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];const y=s.bp();y[0]=d[0]-this._cameraPosition[0],y[1]=d[1]-this._cameraPosition[1],y[2]=d[2]-this._cameraPosition[2];const v=s.bp();return s.aV(v,y),v}isSurfacePointVisible(o){const d=this._cachedClippingPlane;return d[0]*o[0]+d[1]*o[1]+d[2]*o[2]+d[3]>=0}isSurfacePointOnScreen(o){if(!this.isSurfacePointVisible(o))return!1;const d=s.bv();return s.aw(d,[...o,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(o,d){const y=s.aX(o,d),v=s.bp(),T=s.bp();s.aR(T,d,y),s.aU(v,o,T);const R=1-s.aX(v,v);if(R<0)return null;const k=s.aX(o,o)-1,L=-y+(y<0?1:-1)*Math.sqrt(R),q=k/L,V=L;return{tMin:Math.min(q,V),tMax:Math.max(q,V)}}unprojectScreenPoint(o){const d=this._cameraPosition,y=this.getRayDirectionFromPixel(o),v=this.rayPlanetIntersection(d,y);if(v){const V=s.bp();s.aS(V,d,[y[0]*v.tMin,y[1]*v.tMin,y[2]*v.tMin]);const Y=s.bp();return s.aV(Y,V),uu(Y)}const T=this._cachedClippingPlane,R=T[0]*y[0]+T[1]*y[1]+T[2]*y[2],k=-s.b1(T,d)/R,L=s.bp();if(k>0)s.aS(L,d,[y[0]*k,y[1]*k,y[2]*k]);else{const V=s.bp();s.aS(V,d,[2*y[0],2*y[1],2*y[2]]);const Y=s.b1(this._cachedClippingPlane,V);s.aU(L,V,[this._cachedClippingPlane[0]*Y,this._cachedClippingPlane[1]*Y,this._cachedClippingPlane[2]*Y])}const q=function(V){const Y=s.bp();return Y[0]=V[0]*-V[3],Y[1]=V[1]*-V[3],Y[2]=V[2]*-V[3],{center:Y,radius:Math.sqrt(1-V[3]*V[3])}}(T);return uu(function(V,Y,H){const te=s.bp();s.aU(te,H,V);const le=s.bp();return s.bq(le,V,te,Y/s.a$(te)),le}(q.center,q.radius,L))}getMatrixForModel(o,d){const y=s.S.convert(o),v=1/s.bu,T=s.b9();return s.bz(T,T,y.lng/180*Math.PI),s.b7(T,T,-y.lat/180*Math.PI),s.M(T,T,[0,0,1+d/s.bu]),s.b7(T,T,.5*Math.PI),s.N(T,T,[v,v,v]),T}getProjectionDataForCustomLayer(o=!0){const d=this.getProjectionData({overscaledTileID:new s.Z(0,0,0,0,0),applyGlobeMatrix:o});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(o){}}class mu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,d,y){return this._helper.interpolatePadding(o,d,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,d,y=!0){this._helper.resize(o,d,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,d){this._helper.overrideNearFarZ(o,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(o,d){this._globeness=o,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,d)=>this.getConstrained(o,d)}),this._globeness=1,this._mercatorTransform=new gn,this._verticalPerspectiveTransform=new fu}clone(){const o=new mu;return o._globeness=this._globeness,o._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,o.apply(this),o}apply(o){this._helper.apply(o),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(o){const d=this._mercatorTransform.getProjectionData(o),y=this._verticalPerspectiveTransform.getProjectionData(o);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:d.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:o.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(o){return this.currentTransform.isLocationOccluded(o)}transformLightDirection(o){return this.currentTransform.transformLightDirection(o)}getPixelScale(){return s.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(o,d,y){const v=this._mercatorTransform.getPitchedTextCorrection(o,d,y),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(o,d,y);return s.bk(v,T,this._globeness)}projectTileCoordinates(o,d,y,v){return this.currentTransform.projectTileCoordinates(o,d,y,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(o){return this.currentTransform.calculateFogMatrix(o)}getVisibleUnwrappedCoordinates(o){return this.currentTransform.getVisibleUnwrappedCoordinates(o)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(o){this._mercatorTransform.recalculateZoomAndCenter(o),this._verticalPerspectiveTransform.recalculateZoomAndCenter(o)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,d){return this.currentTransform.lngLatToCameraDepth(o,d)}populateCache(o){this._mercatorTransform.populateCache(o),this._verticalPerspectiveTransform.populateCache(o)}getBounds(){return this.currentTransform.getBounds()}getConstrained(o,d){return this.currentTransform.getConstrained(o,d)}calculateCenterFromCameraLngLatAlt(o,d,y,v){return this._helper.calculateCenterFromCameraLngLatAlt(o,d,y,v)}setLocationAtPoint(o,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(o,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(o,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(o,d){return this.currentTransform.locationToScreenPoint(o,d)}screenPointToMercatorCoordinate(o,d){return this.currentTransform.screenPointToMercatorCoordinate(o,d)}screenPointToLocation(o,d){return this.currentTransform.screenPointToLocation(o,d)}isPointOnMapSurface(o,d){return this.currentTransform.isPointOnMapSurface(o,d)}getRayDirectionFromPixel(o){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(o)}getMatrixForModel(o,d){return this.currentTransform.getMatrixForModel(o,d)}getProjectionDataForCustomLayer(o=!0){const d=this._mercatorTransform.getProjectionDataForCustomLayer(o);if(!this.isGlobeRendering)return d;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(o);return y.fallbackMatrix=d.mainMatrix,y}getFastPathSimpleProjectionMatrix(o){return this.currentTransform.getFastPathSimpleProjectionMatrix(o)}}class zi{get useGlobeControls(){return!0}handlePanInertia(o,d){const y=__(o,d);return Math.abs(y.lng-d.center.lng)>180&&(y.lng=d.center.lng+179.5*Math.sign(y.lng-d.center.lng)),{easingCenter:y,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(o,d){const y=o.around,v=d.screenPointToLocation(y);o.bearingDelta&&d.setBearing(d.bearing+o.bearingDelta),o.pitchDelta&&d.setPitch(d.pitch+o.pitchDelta),o.rollDelta&&d.setRoll(d.roll+o.rollDelta);const T=d.zoom;o.zoomDelta&&d.setZoom(d.zoom+o.zoomDelta);const R=d.zoom-T;if(R===0)return;const k=s.bA(d.center.lng,v.lng),L=k/(Math.abs(k/180)+1),q=s.bA(d.center.lat,v.lat),V=d.getRayDirectionFromPixel(y),Y=d.cameraPosition,H=-1*s.aX(Y,V),te=s.bp();s.aS(te,Y,[V[0]*H,V[1]*H,V[2]*H]);const le=s.aZ(te)-1,_e=Math.exp(.5*-Math.max(le-.3,0)),ge=Hl(d.worldSize,d.center.lat)/Math.min(d.width,d.height),be=s.bn(ge,.9,.5,1,.25),Se=(1-s.af(-R))*Math.min(_e,be),Re=d.center.lat,Pe=d.zoom,De=new s.S(d.center.lng+L*Se,s.ah(d.center.lat+q*Se,-s.ai,s.ai));d.setLocationAtPoint(v,y);const Be=d.center,Ae=s.bn(Math.abs(k),45,85,0,1),Ge=s.bn(ge,.75,.35,0,1),st=Math.pow(Math.max(Ae,Ge),.25),Ye=s.bA(Be.lng,De.lng),Xe=s.bA(Be.lat,De.lat);d.setCenter(new s.S(Be.lng+Ye*st,Be.lat+Xe*st).wrap()),d.setZoom(Pe+Vn(Re,d.center.lat))}handleMapControlsPan(o,d,y){if(!o.panDelta)return;const v=d.center.lat,T=d.zoom;d.setCenter(__(o.panDelta,d).wrap()),d.setZoom(T+Vn(v,d.center.lat))}cameraForBoxAndBearing(o,d,y,v,T){const R=fo(o,d,y,v,T),k=d.left/T.width*2-1,L=(T.width-d.right)/T.width*2-1,q=d.top/T.height*-2+1,V=(T.height-d.bottom)/T.height*-2+1,Y=s.bA(y.getWest(),y.getEast())<0,H=Y?y.getEast():y.getWest(),te=Y?y.getWest():y.getEast(),le=Math.max(y.getNorth(),y.getSouth()),_e=Math.min(y.getNorth(),y.getSouth()),ge=H+.5*s.bA(H,te),be=le+.5*s.bA(le,_e),Se=T.clone();Se.setCenter(R.center),Se.setBearing(R.bearing),Se.setPitch(0),Se.setRoll(0),Se.setZoom(R.zoom);const Re=Se.modelViewProjectionMatrix,Pe=[fi(y.getNorthWest()),fi(y.getNorthEast()),fi(y.getSouthWest()),fi(y.getSouthEast()),fi(new s.S(te,be)),fi(new s.S(H,be)),fi(new s.S(ge,le)),fi(new s.S(ge,_e))],De=fi(R.center);let Be=Number.POSITIVE_INFINITY;for(const Ae of Pe)k<0&&(Be=zi.getLesserNonNegativeNonNull(Be,zi.solveVectorScale(Ae,De,Re,"x",k))),L>0&&(Be=zi.getLesserNonNegativeNonNull(Be,zi.solveVectorScale(Ae,De,Re,"x",L))),q>0&&(Be=zi.getLesserNonNegativeNonNull(Be,zi.solveVectorScale(Ae,De,Re,"y",q))),V<0&&(Be=zi.getLesserNonNegativeNonNull(Be,zi.solveVectorScale(Ae,De,Re,"y",V)));if(Number.isFinite(Be)&&Be!==0)return R.zoom=Se.zoom+s.ak(Be),R;y_()}handleJumpToCenterZoom(o,d){const y=o.center.lat,v=o.getConstrained(d.center?s.S.convert(d.center):o.center,o.zoom).center;o.setCenter(v.wrap());const T=d.zoom!==void 0?+d.zoom:o.zoom+Vn(y,v.lat);o.zoom!==T&&o.setZoom(T)}handleEaseTo(o,d){const y=o.zoom,v=o.center,T=o.padding,R={roll:o.roll,pitch:o.pitch,bearing:o.bearing},k={roll:d.roll===void 0?o.roll:d.roll,pitch:d.pitch===void 0?o.pitch:d.pitch,bearing:d.bearing===void 0?o.bearing:d.bearing},L=d.zoom!==void 0,q=!o.isPaddingEqual(d.padding);let V=!1;const Y=d.center?s.S.convert(d.center):v,H=o.getConstrained(Y,y).center;nd(o,H);const te=o.clone();te.setCenter(H),te.setZoom(L?+d.zoom:y+Vn(v.lat,Y.lat)),te.setBearing(d.bearing);const le=new s.P(s.ah(o.centerPoint.x+d.offsetAsPoint.x,0,o.width),s.ah(o.centerPoint.y+d.offsetAsPoint.y,0,o.height));te.setLocationAtPoint(H,le);const _e=(d.offset&&d.offsetAsPoint.mag())>0?te.center:H,ge=L?+d.zoom:y+Vn(v.lat,_e.lat),be=y+Vn(v.lat,0),Se=ge+Vn(_e.lat,0),Re=s.bA(v.lng,_e.lng),Pe=s.bA(v.lat,_e.lat),De=s.af(Se-be);return V=ge!==y,{easeFunc:Be=>{if(s.be(R,k)||Gi({startEulerAngles:R,endEulerAngles:k,tr:o,k:Be,useSlerp:R.roll!=k.roll}),q&&o.interpolatePadding(T,d.padding,Be),d.around)s.w("Easing around a point is not supported under globe projection."),o.setLocationAtPoint(d.around,d.aroundPoint);else{const Ae=Se>be?Math.min(2,De):Math.max(.5,De),Ge=Math.pow(Ae,1-Be),st=Uf(v,Re,Pe,Be*Ge);o.setCenter(st.wrap())}if(V){const Ae=s.C.number(be,Se,Be)+Vn(0,o.center.lat);o.setZoom(Ae)}},isZooming:V,elevationCenter:_e}}handleFlyTo(o,d){const y=d.zoom!==void 0,v=o.center,T=o.zoom,R=o.padding,k=!o.isPaddingEqual(d.padding),L=o.getConstrained(s.S.convert(d.center||d.locationAtOffset),T).center,q=y?+d.zoom:o.zoom+Vn(o.center.lat,L.lat),V=o.clone();V.setCenter(L),V.setZoom(q),V.setBearing(d.bearing);const Y=new s.P(s.ah(o.centerPoint.x+d.offsetAsPoint.x,0,o.width),s.ah(o.centerPoint.y+d.offsetAsPoint.y,0,o.height));V.setLocationAtPoint(L,Y);const H=V.center;nd(o,H);const te=function(Pe,De,Be){const Ae=fi(De),Ge=fi(Be),st=s.aX(Ae,Ge),Ye=Math.acos(st),Xe=ld(Pe);return Ye/(2*Math.PI)*Xe}(o,v,H),le=T+Vn(v.lat,0),_e=q+Vn(H.lat,0),ge=s.af(_e-le);let be;if(typeof d.minZoom=="number"){const Pe=+d.minZoom+Vn(H.lat,0),De=Math.min(Pe,le,_e)+Vn(0,H.lat),Be=o.getConstrained(H,De).zoom+Vn(H.lat,0);be=s.af(Be-le)}const Se=s.bA(v.lng,H.lng),Re=s.bA(v.lat,H.lat);return{easeFunc:(Pe,De,Be,Ae)=>{const Ge=Uf(v,Se,Re,Be);k&&o.interpolatePadding(R,d.padding,Pe);const st=Pe===1?H:Ge;o.setCenter(st.wrap());const Ye=le+s.ak(De);o.setZoom(Pe===1?q:Ye+Vn(0,st.lat))},scaleOfZoom:ge,targetCenter:H,scaleOfMinZoom:be,pixelPathLength:te}}static solveVectorScale(o,d,y,v,T){const R=v==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],k=[y[3],y[7],y[11],y[15]],L=o[0]*R[0]+o[1]*R[1]+o[2]*R[2],q=o[0]*k[0]+o[1]*k[1]+o[2]*k[2],V=d[0]*R[0]+d[1]*R[1]+d[2]*R[2],Y=d[0]*k[0]+d[1]*k[1]+d[2]*k[2];return V+T*q===L+T*Y||k[3]*(L-V)+R[3]*(Y-q)+L*Y==V*q?null:(V+R[3]-T*Y-T*k[3])/(V-L-T*Y+T*q)}static getLesserNonNegativeNonNull(o,d){return d!==null&&d>=0&&d<o?d:o}}class b_{constructor(o){this._globe=o,this._mercatorCameraHelper=new Fi,this._verticalPerspectiveCameraHelper=new zi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(o,d){return this.currentHelper.handlePanInertia(o,d)}handleMapControlsRollPitchBearingZoom(o,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(o,d)}handleMapControlsPan(o,d,y){this.currentHelper.handleMapControlsPan(o,d,y)}cameraForBoxAndBearing(o,d,y,v,T){return this.currentHelper.cameraForBoxAndBearing(o,d,y,v,T)}handleJumpToCenterZoom(o,d){this.currentHelper.handleJumpToCenterZoom(o,d)}handleEaseTo(o,d){return this.currentHelper.handleEaseTo(o,d)}handleFlyTo(o,d){return this.currentHelper.handleFlyTo(o,d)}}const cd=(w,o)=>s.y(w,o&&o.filter(d=>d.identifier!=="source.canvas")),cw=s.bE();class Gf extends s.E{constructor(o,d={}){var y,v;super(),this._rtlPluginLoaded=()=>{for(const R in this.sourceCaches){const k=this.sourceCaches[R].getSource().type;k!=="vector"&&k!=="geojson"||this.sourceCaches[R].reload()}},this.map=o,this.dispatcher=new dt(Pt(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(R,k)=>this.getGlyphs(R,k)),this.dispatcher.registerMessageHandler("GI",(R,k)=>this.getImages(R,k)),this.imageManager=new K,this.imageManager.setEventedParent(this);const T=((y=o._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new Ie(o._requestManager,d.localIdeographFontFamily,T),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new Ul,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",s.bG()),mr().on(ur,this._rtlPluginLoaded),this.on("data",R=>{if(R.dataType!=="source"||R.sourceDataType!=="metadata")return;const k=this.sourceCaches[R.sourceId];if(!k)return;const L=k.getSource();if(L&&L.vectorLayerIds)for(const q in this._layers){const V=this._layers[q];V.source===L.id&&this._validateLayer(V)}})}setGlobalStateProperty(o,d){var y,v,T;this._checkLoaded();const R=d===null?(T=(v=(y=this.stylesheet.state)===null||y===void 0?void 0:y[o])===null||v===void 0?void 0:v.default)!==null&&T!==void 0?T:null:d;if(s.bH(R,this._globalState[o]))return this;this._globalState[o]=R,this._applyGlobalStateChanges([o])}getGlobalState(){return this._globalState}setGlobalState(o){this._checkLoaded();const d=[];for(const y in o)!s.bH(this._globalState[y],o[y].default)&&(d.push(y),this._globalState[y]=o[y].default);this._applyGlobalStateChanges(d)}_applyGlobalStateChanges(o){if(o.length===0)return;const d=new Set;for(const y in this._layers){const v=this._layers[y],T=v.getLayoutAffectingGlobalStateRefs(),R=v.getPaintAffectingGlobalStateRefs();for(const k of o)if(T.has(k)&&d.add(v.source),R.has(k))for(const{name:L,value:q}of R.get(k))this._updatePaintProperty(v,L,q)}for(const y in this.sourceCaches)d.has(y)&&(this._reloadSource(y),this._changed=!0)}loadURL(o,d={},y){this.fire(new s.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const v=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;s.j(v,this._loadStyleRequest).then(R=>{this._loadStyleRequest=null,this._load(R.data,d,y)}).catch(R=>{this._loadStyleRequest=null,R&&!T.signal.aborted&&this.fire(new s.k(R))})}loadJSON(o,d={},y){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(o,d,y)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(cw,{validate:!1})}_load(o,d,y){var v,T,R;let k=d.transformStyle?d.transformStyle(y,o):o;if(!d.validate||!cd(this,s.z(k))){k=Object.assign({},k),this._loaded=!0,this.stylesheet=k;for(const L in k.sources)this.addSource(L,k.sources[L],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new ve(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new tt(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.setGlobalState((R=this.stylesheet.state)!==null&&R!==void 0?R:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){const o=s.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",o),this._order=o.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of o){const y=s.bJ(d);y.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=y}}_loadSprite(o,d=!1,y=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,R,k,L){return s._(this,void 0,void 0,function*(){const q=ne(T),V=k>1?"@2x":"",Y={},H={};for(const{id:te,url:le}of q){const _e=R.transformRequest(Z(le,V,".json"),"SpriteJSON");Y[te]=s.j(_e,L);const ge=R.transformRequest(Z(le,V,".png"),"SpriteImage");H[te]=X.getImage(ge,L)}return yield Promise.all([...Object.values(Y),...Object.values(H)]),function(te,le){return s._(this,void 0,void 0,function*(){const _e={};for(const ge in te){_e[ge]={};const be=P.getImageCanvasContext((yield le[ge]).data),Se=(yield te[ge]).data;for(const Re in Se){const{width:Pe,height:De,x:Be,y:Ae,sdf:Ge,pixelRatio:st,stretchX:Ye,stretchY:Xe,content:ot,textFitWidth:xt,textFitHeight:Et}=Se[Re];_e[ge][Re]={data:null,pixelRatio:st,sdf:Ge,stretchX:Ye,stretchY:Xe,content:ot,textFitWidth:xt,textFitHeight:Et,spriteData:{width:Pe,height:De,x:Be,y:Ae,context:be}}}}return _e})}(Y,H)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(const R in T){this._spritesImagesIds[R]=[];const k=this._spritesImagesIds[R]?this._spritesImagesIds[R].filter(L=>!(L in T)):[];for(const L of k)this.imageManager.removeImage(L),this._changedImages[L]=!0;for(const L in T[R]){const q=R==="default"?L:`${R}:${L}`;this._spritesImagesIds[R].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,T[R][L],!1):this.imageManager.addImage(q,T[R][L]),d&&(this._changedImages[q]=!0)}}}).catch(T=>{this._spriteRequest=null,v=T,this.fire(new s.k(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),y&&y(v)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(o){const d=this.sourceCaches[o.source];if(!d)return;const y=o.sourceLayer;if(!y)return;const v=d.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.k(new Error(`Source layer "${y}" does not exist on source "${v.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o,d=!1){const y=this._serializedAllLayers();if(!o||o.length===0)return Object.values(d?s.bK(y):y);const v=[];for(const T of o)if(y[T]){const R=d?s.bK(y[T]):y[T];v.push(R)}return v}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const d=Object.keys(this._layers);for(const y of d){const v=this._layers[y];v.type!=="custom"&&(o[y]=v.serialize())}return o}hasTransitions(){var o,d,y;if(!((o=this.light)===null||o===void 0)&&o.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const v in this.sourceCaches)if(this.sourceCaches[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const d=this._changed;if(d){const v=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(v.length||T.length)&&this._updateWorkerLayers(v,T);for(const R in this._updatedSources){const k=this._updatedSources[R];if(k==="reload")this._reloadSource(R);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(R)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const R in this._updatedPaintProps)this._layers[R].updateTransitions(o);this.light.updateTransitions(o),this.sky.updateTransitions(o),this._resetUpdates()}const y={};for(const v in this.sourceCaches){const T=this.sourceCaches[v];y[v]=T.used,T.used=!1}for(const v of this._order){const T=this._layers[v];T.recalculate(o,this._availableImages),!T.isHidden(o.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const v in y){const T=this.sourceCaches[v];!!y[v]!=!!T.used&&T.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(o),this.sky.recalculate(o),this.projection.recalculate(o),this.z=o.zoom,d&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,d={}){var y;this._checkLoaded();const v=this.serialize();if(o=d.transformStyle?d.transformStyle(v,o):o,((y=d.validate)===null||y===void 0||y)&&cd(this,s.z(o)))return!1;(o=s.bK(o)).layers=s.bI(o.layers);const T=s.bL(v,o),R=this._getOperationsToPerform(T);if(R.unimplemented.length>0)throw new Error(`Unimplemented: ${R.unimplemented.join(", ")}.`);if(R.operations.length===0)return!1;for(const k of R.operations)k();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){const d=[],y=[];for(const v of o)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":d.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":d.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,v.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setSky":d.push(()=>this.setSky.apply(this,v.args));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":d.push(()=>this.setGlobalState.apply(this,v.args));break;case"setTransition":d.push(()=>{});break;default:y.push(v.command)}return{operations:d,unimplemented:y}}addImage(o,d){if(this.getImage(o))return this.fire(new s.k(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,d),this._afterImageUpdated(o)}updateImage(o,d){this.imageManager.updateImage(o,d)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new s.k(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,d,y={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(s.z.source,`sources.${o}`,d,null,y))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const v=this.sourceCaches[o]=new cr(o,d,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:o})),v.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===o)return this.fire(new s.k(new Error(`Source "${o}" cannot be removed while layer "${y}" is using it.`)));const d=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],d.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,d){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const y=this.sourceCaches[o].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(d),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,d,y={}){this._checkLoaded();const v=o.id;if(this.getLayer(v))return void this.fire(new s.k(new Error(`Layer "${v}" already exists on this map.`)));let T;if(o.type==="custom"){if(cd(this,s.bM(o)))return;T=s.bJ(o)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(v,o.source),o=s.bK(o),o=s.e(o,{source:v})),this._validate(s.z.layer,`layers.${v}`,o,{arrayIndex:-1},y))return;T=s.bJ(o),this._validateLayer(T),T.setEventedParent(this,{layer:{id:v}})}const R=d?this._order.indexOf(d):this._order.length;if(d&&R===-1)this.fire(new s.k(new Error(`Cannot add layer "${v}" before non-existing layer "${d}".`)));else{if(this._order.splice(R,0,v),this._layerOrderChanged=!0,this._layers[v]=T,this._removedLayers[v]&&T.source&&T.type!=="custom"){const k=this._removedLayers[v];delete this._removedLayers[v],k.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(o,d){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new s.k(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===d)return;const y=this._order.indexOf(o);this._order.splice(y,1);const v=d?this._order.indexOf(d):this._order.length;d&&v===-1?this.fire(new s.k(new Error(`Cannot move layer "${o}" before non-existing layer "${d}".`))):(this._order.splice(v,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const d=this._layers[o];if(!d)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${o}".`)));d.setEventedParent(null);const y=this._order.indexOf(o);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=d,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],d.onRemove&&d.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,d,y){this._checkLoaded();const v=this.getLayer(o);v?v.minzoom===d&&v.maxzoom===y||(d!=null&&(v.minzoom=d),y!=null&&(v.maxzoom=y),this._updateLayer(v)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,d,y={}){this._checkLoaded();const v=this.getLayer(o);if(v){if(!s.bH(v.filter,d))return d==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(s.z.filter,`layers.${v.id}.filter`,d,null,y)||(v.setFilter(s.bK(d)),this._updateLayer(v)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return s.bK(this.getLayer(o).filter)}setLayoutProperty(o,d,y,v={}){this._checkLoaded();const T=this.getLayer(o);T?s.bH(T.getLayoutProperty(d),y)||(T.setLayoutProperty(d,y,v),this._updateLayer(T)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,d){const y=this.getLayer(o);if(y)return y.getLayoutProperty(d);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,d,y,v={}){this._checkLoaded();const T=this.getLayer(o);T?s.bH(T.getPaintProperty(d),y)||this._updatePaintProperty(T,d,y,v):this.fire(new s.k(new Error(`Cannot style non-existing layer "${o}".`)))}_updatePaintProperty(o,d,y,v={}){o.setPaintProperty(d,y,v)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[o.id]=!0,this._serializedLayers=null}getPaintProperty(o,d){return this.getLayer(o).getPaintProperty(d)}setFeatureState(o,d){this._checkLoaded();const y=o.source,v=o.sourceLayer,T=this.sourceCaches[y];if(T===void 0)return void this.fire(new s.k(new Error(`The source '${y}' does not exist in the map's style.`)));const R=T.getSource().type;R==="geojson"&&v?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):R!=="vector"||v?(o.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(v,o.id,d)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,d){this._checkLoaded();const y=o.source,v=this.sourceCaches[y];if(v===void 0)return void this.fire(new s.k(new Error(`The source '${y}' does not exist in the map's style.`)));const T=v.getSource().type,R=T==="vector"?o.sourceLayer:void 0;T!=="vector"||R?d&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(R,o.id,d):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const d=o.source,y=o.sourceLayer,v=this.sourceCaches[d];if(v!==void 0)return v.getSource().type!=="vector"||y?(o.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(y,o.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=s.bN(this.sourceCaches,T=>T.serialize()),d=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,v=this.stylesheet;return s.bO({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:o,layers:d,terrain:y},T=>T!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const d=R=>this._layers[R].type==="fill-extrusion",y={},v=[];for(let R=this._order.length-1;R>=0;R--){const k=this._order[R];if(d(k)){y[k]=R;for(const L of o){const q=L[k];if(q)for(const V of q)v.push(V)}}}v.sort((R,k)=>k.intersectionZ-R.intersectionZ);const T=[];for(let R=this._order.length-1;R>=0;R--){const k=this._order[R];if(d(k))for(let L=v.length-1;L>=0;L--){const q=v[L].feature;if(y[q.layer.id]<R)break;T.push(q),v.pop()}else for(const L of o){const q=L[k];if(q)for(const V of q)T.push(V.feature)}}return T}queryRenderedFeatures(o,d,y){d&&d.filter&&this._validate(s.z.filter,"queryRenderedFeatures.filter",d.filter,null,d);const v={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const q of d.layers){const V=this._layers[q];if(!V)return this.fire(new s.k(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];v[V.source]=!0}}const T=[];d.availableImages=this._availableImages;const R=this._serializedAllLayers(),k=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,L=Object.assign(Object.assign({},d),{layers:k});for(const q in this.sourceCaches)d.layers&&!v[q]||T.push(ar(this.sourceCaches[q],this._layers,R,o,L,y,this.map.terrain?(V,Y,H)=>this.map.terrain.getElevation(V,Y,H):void 0));return this.placement&&T.push(function(q,V,Y,H,te,le,_e){const ge={},be=le.queryRenderedSymbols(H),Se=[];for(const Re of Object.keys(be).map(Number))Se.push(_e[Re]);Se.sort(_t);for(const Re of Se){const Pe=Re.featureIndex.lookupSymbolFeatures(be[Re.bucketInstanceId],V,Re.bucketIndex,Re.sourceLayerIndex,te.filter,te.layers,te.availableImages,q);for(const De in Pe){const Be=ge[De]=ge[De]||[],Ae=Pe[De];Ae.sort((Ge,st)=>{const Ye=Re.featureSortOrder;if(Ye){const Xe=Ye.indexOf(Ge.featureIndex);return Ye.indexOf(st.featureIndex)-Xe}return st.featureIndex-Ge.featureIndex});for(const Ge of Ae)Be.push(Ge)}}return function(Re,Pe,De){for(const Be in Re)for(const Ae of Re[Be])Ve(Ae,De[Pe[Be].source]);return Re}(ge,q,Y)}(this._layers,R,this.sourceCaches,o,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(o,d){d&&d.filter&&this._validate(s.z.filter,"querySourceFeatures.filter",d.filter,null,d);const y=this.sourceCaches[o];return y?function(v,T){const R=v.getRenderableIds().map(q=>v.getTileByID(q)),k=[],L={};for(let q=0;q<R.length;q++){const V=R[q],Y=V.tileID.canonical.key;L[Y]||(L[Y]=!0,V.querySourceFeatures(k,T))}return k}(y,d):[]}getLight(){return this.light.getLight()}setLight(o,d={}){this._checkLoaded();const y=this.light.getLight();let v=!1;for(const R in o)if(!s.bH(o[R],y[R])){v=!0;break}if(!v)return;const T={now:P.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,d),this.light.updateTransitions(T)}getProjection(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.projection}setProjection(o){if(this._checkLoaded(),this.projection){if(this.projection.name===o.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=o,this._setProjectionInternal(o.type)}getSky(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.sky}setSky(o,d={}){this._checkLoaded();const y=this.getSky();let v=!1;if(!o&&!y)return;if(o&&!y)v=!0;else if(!o&&y)v=!0;else for(const R in o)if(!s.bH(o[R],y[R])){v=!0;break}if(!v)return;const T={now:P.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=o,this.sky.setSky(o,d),this.sky.updateTransitions(T)}_setProjectionInternal(o){const d=function(y){if(Array.isArray(y)){const v=new ad({type:y});return{projection:v,transform:new mu,cameraHelper:new b_(v)}}switch(y){case"mercator":return{projection:new Or,transform:new gn,cameraHelper:new Fi};case"globe":{const v=new ad({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:v,transform:new mu,cameraHelper:new b_(v)}}case"vertical-perspective":return{projection:new cu,transform:new fu,cameraHelper:new zi};default:return s.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new Or,transform:new gn,cameraHelper:new Fi}}}(o);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(const y in this.sourceCaches)this.sourceCaches[y].reload()}_validate(o,d,y,v,T={}){return(!T||T.validate!==!1)&&cd(this,o.call(s.z,s.e({key:d,style:this.serialize(),value:y,styleSpec:s.v},v)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),mr().off(ur,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const y=this.sourceCaches[d];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const d in this.sourceCaches)this.sourceCaches[d].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,d,y,v,T=!1){let R=!1,k=!1;const L={};for(const q of this._order){const V=this._layers[q];if(V.type!=="symbol")continue;if(!L[V.source]){const H=this.sourceCaches[V.source];L[V.source]=H.getRenderableIds(!0).map(te=>H.getTileByID(te)).sort((te,le)=>le.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(le.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(V,L[V.source],o.center.lng);R=R||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(P.now(),o.zoom))&&(this.pauseablePlacement=new Bf(o,this.map.terrain,this._order,T,d,y,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(P.now()),k=!0),R&&this.pauseablePlacement.placement.setStale()),k||R)for(const q of this._order){const V=this._layers[q];V.type==="symbol"&&this.placement.updateLayerOpacities(V,L[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(P.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,d){return s._(this,void 0,void 0,function*(){const y=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[d.source];return v&&v.setDependencies(d.tileID.key,d.type,d.icons),y})}getGlyphs(o,d){return s._(this,void 0,void 0,function*(){const y=yield this.glyphManager.getGlyphs(d.stacks),v=this.sourceCaches[d.source];return v&&v.setDependencies(d.tileID.key,d.type,[""]),y})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,d={}){this._checkLoaded(),o&&this._validate(s.z.glyphs,"glyphs",o,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,d,y={},v){this._checkLoaded();const T=[{id:o,url:d}],R=[...ne(this.stylesheet.sprite),...T];this._validate(s.z.sprite,"sprite",R,null,y)||(this.stylesheet.sprite=R,this._loadSprite(T,!0,v))}removeSprite(o){this._checkLoaded();const d=ne(this.stylesheet.sprite);if(d.find(y=>y.id===o)){if(this._spritesImagesIds[o])for(const y of this._spritesImagesIds[o])this.imageManager.removeImage(y),this._changedImages[y]=!0;d.splice(d.findIndex(y=>y.id===o),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(o,d={},y){this._checkLoaded(),o&&this._validate(s.z.sprite,"sprite",o,null,d)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,y):(this._unloadSprite(),y&&y(null)))}}var uw=s.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class hw{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,d,y,v,T,R,k,L,q){this.context=o;let V=this.boundPaintVertexBuffers.length!==v.length;for(let Y=0;!V&&Y<v.length;Y++)this.boundPaintVertexBuffers[Y]!==v[Y]&&(V=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==y||V||this.boundIndexBuffer!==T||this.boundVertexOffset!==R||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==q?this.freshBind(d,y,v,T,R,k,L,q):(o.bindVertexArray.set(this.vao),k&&k.bind(),T&&T.dynamicDraw&&T.bind(),L&&L.bind(),q&&q.bind())}freshBind(o,d,y,v,T,R,k,L){const q=o.numAttributes,V=this.context,Y=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=v,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=R,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=L,d.enableAttributes(Y,o);for(const H of y)H.enableAttributes(Y,o);R&&R.enableAttributes(Y,o),k&&k.enableAttributes(Y,o),L&&L.enableAttributes(Y,o),d.bind(),d.setVertexAttribPointers(Y,o,T);for(const H of y)H.bind(),H.setVertexAttribPointers(Y,o,T);R&&(R.bind(),R.setVertexAttribPointers(Y,o,T)),v&&v.bind(),k&&(k.bind(),k.setVertexAttribPointers(Y,o,T)),L&&(L.bind(),L.setVertexAttribPointers(Y,o,T)),V.currentNumAttributes=q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ud=(w,o,d,y,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:o,u_fog_color:d?d.properties.get("fog-color"):s.bf.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:d?d.calculateFogBlendOpacity(y):0,u_horizon_color:d?d.properties.get("horizon-color"):s.bf.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),Hf={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ga(w){const o=[];for(let d=0;d<w.length;d++){if(w[d]===null)continue;const y=w[d].split(" ");o.push(y.pop())}return o}class Jf{constructor(o,d,y,v,T,R,k,L,q=[]){const V=o.gl;this.program=V.createProgram();const Y=Ga(d.staticAttributes),H=y?y.getBinderAttributes():[],te=Y.concat(H),le=Do.prelude.staticUniforms?Ga(Do.prelude.staticUniforms):[],_e=k.staticUniforms?Ga(k.staticUniforms):[],ge=d.staticUniforms?Ga(d.staticUniforms):[],be=y?y.getBinderUniforms():[],Se=le.concat(_e).concat(ge).concat(be),Re=[];for(const Ye of Se)Re.indexOf(Ye)<0&&Re.push(Ye);const Pe=y?y.defines():[];fs(V)&&Pe.unshift("#version 300 es"),T&&Pe.push("#define OVERDRAW_INSPECTOR;"),R&&Pe.push("#define TERRAIN3D;"),L&&Pe.push(L),q&&Pe.push(...q);let De=Pe.concat(Do.prelude.fragmentSource,k.fragmentSource,d.fragmentSource).join(`
`),Be=Pe.concat(Do.prelude.vertexSource,k.vertexSource,d.vertexSource).join(`
`);fs(V)||(De=function(Ye){return Ye.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(De),Be=function(Ye){return Ye.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Be));const Ae=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ae,De),V.compileShader(Ae),!V.getShaderParameter(Ae,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(Ae)}`);V.attachShader(this.program,Ae);const Ge=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ge,Be),V.compileShader(Ge),!V.getShaderParameter(Ge,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(Ge)}`);V.attachShader(this.program,Ge),this.attributes={};const st={};this.numAttributes=te.length;for(let Ye=0;Ye<this.numAttributes;Ye++)te[Ye]&&(V.bindAttribLocation(this.program,Ye,te[Ye]),this.attributes[te[Ye]]=Ye);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(Ge),V.deleteShader(Ae);for(let Ye=0;Ye<Re.length;Ye++){const Xe=Re[Ye];if(Xe&&!st[Xe]){const ot=V.getUniformLocation(this.program,Xe);ot&&(st[Xe]=ot)}}this.fixedUniforms=v(o,st),this.terrainUniforms=((Ye,Xe)=>({u_depth:new s.bP(Ye,Xe.u_depth),u_terrain:new s.bP(Ye,Xe.u_terrain),u_terrain_dim:new s.bg(Ye,Xe.u_terrain_dim),u_terrain_matrix:new s.bR(Ye,Xe.u_terrain_matrix),u_terrain_unpack:new s.bS(Ye,Xe.u_terrain_unpack),u_terrain_exaggeration:new s.bg(Ye,Xe.u_terrain_exaggeration)}))(o,st),this.projectionUniforms=((Ye,Xe)=>({u_projection_matrix:new s.bR(Ye,Xe.u_projection_matrix),u_projection_tile_mercator_coords:new s.bS(Ye,Xe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bS(Ye,Xe.u_projection_clipping_plane),u_projection_transition:new s.bg(Ye,Xe.u_projection_transition),u_projection_fallback_matrix:new s.bR(Ye,Xe.u_projection_fallback_matrix)}))(o,st),this.binderUniforms=y?y.getUniforms(o,st):[]}draw(o,d,y,v,T,R,k,L,q,V,Y,H,te,le,_e,ge,be,Se,Re){const Pe=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(y),o.setStencilMode(v),o.setColorMode(T),o.setCullFace(R),L){o.activeTexture.set(Pe.TEXTURE2),Pe.bindTexture(Pe.TEXTURE_2D,L.depthTexture),o.activeTexture.set(Pe.TEXTURE3),Pe.bindTexture(Pe.TEXTURE_2D,L.texture);for(const Be in this.terrainUniforms)this.terrainUniforms[Be].set(L[Be])}if(q)for(const Be in q)this.projectionUniforms[Hf[Be]].set(q[Be]);if(k)for(const Be in this.fixedUniforms)this.fixedUniforms[Be].set(k[Be]);ge&&ge.setUniforms(o,this.binderUniforms,le,{zoom:_e});let De=0;switch(d){case Pe.LINES:De=2;break;case Pe.TRIANGLES:De=3;break;case Pe.LINE_STRIP:De=1}for(const Be of te.get()){const Ae=Be.vaos||(Be.vaos={});(Ae[V]||(Ae[V]=new hw)).bind(o,this,Y,ge?ge.getPaintVertexBuffers():[],H,Be.vertexOffset,be,Se,Re),Pe.drawElements(d,Be.primitiveLength*De,Pe.UNSIGNED_SHORT,Be.primitiveOffset*De*2)}}}function hd(w,o,d){const y=1/s.aC(d,1,o.transform.tileZoom),v=Math.pow(2,d.tileID.overscaledZ),T=d.tileSize*Math.pow(2,o.transform.tileZoom)/v,R=T*(d.tileID.canonical.x+d.tileID.wrap*v),k=T*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[y,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[R>>16,k>>16],u_pixel_coord_lower:[65535&R,65535&k]}}const Fo=(w,o,d,y)=>{const v=w.style.light,T=v.properties.get("position"),R=[T.x,T.y,T.z],k=s.bV();v.properties.get("anchor")==="viewport"&&s.bW(k,w.transform.bearingInRadians),s.bX(R,R,k);const L=w.transform.transformLightDirection(R),q=v.properties.get("color");return{u_lightpos:R,u_lightpos_globe:L,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_vertical_gradient:+o,u_opacity:d,u_fill_translate:y}},dw=(w,o,d,y,v,T,R)=>s.e(Fo(w,o,d,y),hd(T,w,R),{u_height_factor:-Math.pow(2,v.overscaledZ)/R.tileSize/8}),dd=(w,o,d,y)=>s.e(hd(o,w,d),{u_fill_translate:y}),gu=(w,o)=>({u_world:w,u_fill_translate:o}),yu=(w,o,d,y,v)=>s.e(dd(w,o,d,v),{u_world:y}),pw=(w,o,d,y,v)=>{const T=w.transform;let R,k,L=0;if(d.paint.get("circle-pitch-alignment")==="map"){const q=s.aC(o,1,T.zoom);R=!0,k=[q,q],L=q/(s.$*Math.pow(2,o.tileID.overscaledZ))*2*Math.PI*v}else R=!1,k=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+R,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:L,u_translate:y}},pd=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),fw=w=>({u_viewport_size:[w.width,w.height]}),Ha=(w,o=1)=>({u_color:w,u_overlay:0,u_overlay_scale:o}),v_=(w,o,d,y)=>{const v=s.aC(w,1,o)/(s.$*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:s.aC(w,1,o),u_intensity:d,u_globe_extrude_scale:v}},Wf=(w,o,d,y)=>{const v=s.L();s.bY(v,0,w.width,w.height,0,0,1);const T=w.context.gl;return{u_matrix:v,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:d,u_color_ramp:y,u_opacity:o.paint.get("heatmap-opacity")}},mw=(w,o,d)=>{const y=d.paint.get("hillshade-accent-color");let v;switch(d.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const T=d.getIlluminationProperties();for(let R=0;R<T.directionRadians.length;R++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[R]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:Zf(0,o.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:y,u_method:v,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},x_=(w,o)=>{const d=o.stride,y=s.L();return s.bY(y,0,s.$,-s.$,0,0,1),s.M(y,y,[0,-s.$,0]),{u_matrix:y,u_image:1,u_dimension:[d,d],u_zoom:w.overscaledZ,u_unpack:o.getUnpackVector()}};function Zf(w,o){const d=Math.pow(2,o.canonical.z),y=o.canonical.y;return[new s.a1(0,y/d).toLngLat().lat,new s.a1(0,(y+1)/d).toLngLat().lat]}const w_=(w,o,d=0)=>({u_image:0,u_unpack:o.getUnpackVector(),u_dimension:[o.stride,o.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:d,u_opacity:w.paint.get("color-relief-opacity")}),fd=(w,o,d,y)=>{const v=w.transform;return{u_translation:Yf(w,o,d),u_ratio:y/s.aC(o,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},E_=(w,o,d,y,v)=>s.e(fd(w,o,d,y),{u_image:0,u_image_height:v}),T_=(w,o,d,y,v)=>{const T=w.transform,R=Kf(o,T);return{u_translation:Yf(w,o,d),u_texsize:o.imageAtlasTexture.size,u_ratio:y/s.aC(o,1,T.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[R,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Ja=(w,o,d,y,v,T)=>{const R=w.lineAtlas,k=Kf(o,w.transform),L=d.layout.get("line-cap")==="round",q=R.getDash(v.from,L),V=R.getDash(v.to,L),Y=q.width*T.fromScale,H=V.width*T.toScale;return s.e(fd(w,o,d,y),{u_patternscale_a:[k/Y,-q.height/2],u_patternscale_b:[k/H,-V.height/2],u_sdfgamma:R.width/(256*Math.min(Y,H)*w.pixelRatio)/2,u_image:0,u_tex_y_a:q.y,u_tex_y_b:V.y,u_mix:T.t})};function Kf(w,o){return 1/s.aC(w,1,o.tileZoom)}function Yf(w,o,d){return s.aD(w.transform,o,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const _u=(w,o,d,y,v)=>{return{u_tl_parent:w,u_scale_parent:o,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(R=y.paint.get("raster-saturation"),R>0?1-1/(1.001-R):-R),u_contrast_factor:(T=y.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:gw(y.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var T,R};function gw(w){w*=Math.PI/180;const o=Math.sin(w),d=Math.cos(w);return[(2*d+1)/3,(-Math.sqrt(3)*o-d+1)/3,(Math.sqrt(3)*o-d+1)/3]}const bu=(w,o,d,y,v,T,R,k,L,q,V,Y,H)=>{const te=R.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_pitch:te.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:te.width/te.height,u_fade_change:R.options.fadeDuration?R.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:L,u_is_text:+V,u_pitch_with_map:+y,u_is_along_line:v,u_is_variable_anchor:T,u_texsize:Y,u_texture:0,u_translation:q,u_pitched_scale:H}},S_=(w,o,d,y,v,T,R,k,L,q,V,Y,H,te)=>{const le=R.transform;return s.e(bu(w,o,d,y,v,T,R,k,L,q,V,Y,te),{u_gamma_scale:y?Math.cos(le.pitch*Math.PI/180)*le.cameraToCenterDistance:1,u_device_pixel_ratio:R.pixelRatio,u_is_halo:1})},yw=(w,o,d,y,v,T,R,k,L,q,V,Y,H)=>s.e(S_(w,o,d,y,v,T,R,k,L,q,!0,V,0,H),{u_texsize_icon:Y,u_texture_icon:1}),C_=(w,o)=>({u_opacity:w,u_color:o}),P_=(w,o,d,y,v)=>s.e(function(T,R,k,L){const q=k.imageManager.getPattern(T.from.toString()),V=k.imageManager.getPattern(T.to.toString()),{width:Y,height:H}=k.imageManager.getPixelSize(),te=Math.pow(2,L.tileID.overscaledZ),le=L.tileSize*Math.pow(2,k.transform.tileZoom)/te,_e=le*(L.tileID.canonical.x+L.tileID.wrap*te),ge=le*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:q.tl,u_pattern_br_a:q.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[Y,H],u_mix:R.t,u_pattern_size_a:q.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/s.aC(L,1,k.transform.tileZoom),u_pixel_coord_upper:[_e>>16,ge>>16],u_pixel_coord_lower:[65535&_e,65535&ge]}}(d,v,o,y),{u_opacity:w}),Xf=(w,o)=>{},Qf={fillExtrusion:(w,o)=>({u_lightpos:new s.bT(w,o.u_lightpos),u_lightpos_globe:new s.bT(w,o.u_lightpos_globe),u_lightintensity:new s.bg(w,o.u_lightintensity),u_lightcolor:new s.bT(w,o.u_lightcolor),u_vertical_gradient:new s.bg(w,o.u_vertical_gradient),u_opacity:new s.bg(w,o.u_opacity),u_fill_translate:new s.bU(w,o.u_fill_translate)}),fillExtrusionPattern:(w,o)=>({u_lightpos:new s.bT(w,o.u_lightpos),u_lightpos_globe:new s.bT(w,o.u_lightpos_globe),u_lightintensity:new s.bg(w,o.u_lightintensity),u_lightcolor:new s.bT(w,o.u_lightcolor),u_vertical_gradient:new s.bg(w,o.u_vertical_gradient),u_height_factor:new s.bg(w,o.u_height_factor),u_opacity:new s.bg(w,o.u_opacity),u_fill_translate:new s.bU(w,o.u_fill_translate),u_image:new s.bP(w,o.u_image),u_texsize:new s.bU(w,o.u_texsize),u_pixel_coord_upper:new s.bU(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(w,o.u_pixel_coord_lower),u_scale:new s.bT(w,o.u_scale),u_fade:new s.bg(w,o.u_fade)}),fill:(w,o)=>({u_fill_translate:new s.bU(w,o.u_fill_translate)}),fillPattern:(w,o)=>({u_image:new s.bP(w,o.u_image),u_texsize:new s.bU(w,o.u_texsize),u_pixel_coord_upper:new s.bU(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(w,o.u_pixel_coord_lower),u_scale:new s.bT(w,o.u_scale),u_fade:new s.bg(w,o.u_fade),u_fill_translate:new s.bU(w,o.u_fill_translate)}),fillOutline:(w,o)=>({u_world:new s.bU(w,o.u_world),u_fill_translate:new s.bU(w,o.u_fill_translate)}),fillOutlinePattern:(w,o)=>({u_world:new s.bU(w,o.u_world),u_image:new s.bP(w,o.u_image),u_texsize:new s.bU(w,o.u_texsize),u_pixel_coord_upper:new s.bU(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(w,o.u_pixel_coord_lower),u_scale:new s.bT(w,o.u_scale),u_fade:new s.bg(w,o.u_fade),u_fill_translate:new s.bU(w,o.u_fill_translate)}),circle:(w,o)=>({u_camera_to_center_distance:new s.bg(w,o.u_camera_to_center_distance),u_scale_with_map:new s.bP(w,o.u_scale_with_map),u_pitch_with_map:new s.bP(w,o.u_pitch_with_map),u_extrude_scale:new s.bU(w,o.u_extrude_scale),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_globe_extrude_scale:new s.bg(w,o.u_globe_extrude_scale),u_translate:new s.bU(w,o.u_translate)}),collisionBox:(w,o)=>({u_pixel_extrude_scale:new s.bU(w,o.u_pixel_extrude_scale)}),collisionCircle:(w,o)=>({u_viewport_size:new s.bU(w,o.u_viewport_size)}),debug:(w,o)=>({u_color:new s.bQ(w,o.u_color),u_overlay:new s.bP(w,o.u_overlay),u_overlay_scale:new s.bg(w,o.u_overlay_scale)}),depth:Xf,clippingMask:Xf,heatmap:(w,o)=>({u_extrude_scale:new s.bg(w,o.u_extrude_scale),u_intensity:new s.bg(w,o.u_intensity),u_globe_extrude_scale:new s.bg(w,o.u_globe_extrude_scale)}),heatmapTexture:(w,o)=>({u_matrix:new s.bR(w,o.u_matrix),u_world:new s.bU(w,o.u_world),u_image:new s.bP(w,o.u_image),u_color_ramp:new s.bP(w,o.u_color_ramp),u_opacity:new s.bg(w,o.u_opacity)}),hillshade:(w,o)=>({u_image:new s.bP(w,o.u_image),u_latrange:new s.bU(w,o.u_latrange),u_exaggeration:new s.bg(w,o.u_exaggeration),u_altitudes:new s.b_(w,o.u_altitudes),u_azimuths:new s.b_(w,o.u_azimuths),u_accent:new s.bQ(w,o.u_accent),u_method:new s.bP(w,o.u_method),u_shadows:new s.bZ(w,o.u_shadows),u_highlights:new s.bZ(w,o.u_highlights)}),hillshadePrepare:(w,o)=>({u_matrix:new s.bR(w,o.u_matrix),u_image:new s.bP(w,o.u_image),u_dimension:new s.bU(w,o.u_dimension),u_zoom:new s.bg(w,o.u_zoom),u_unpack:new s.bS(w,o.u_unpack)}),colorRelief:(w,o)=>({u_image:new s.bP(w,o.u_image),u_unpack:new s.bS(w,o.u_unpack),u_dimension:new s.bU(w,o.u_dimension),u_elevation_stops:new s.bP(w,o.u_elevation_stops),u_color_stops:new s.bP(w,o.u_color_stops),u_color_ramp_size:new s.bP(w,o.u_color_ramp_size),u_opacity:new s.bg(w,o.u_opacity)}),line:(w,o)=>({u_translation:new s.bU(w,o.u_translation),u_ratio:new s.bg(w,o.u_ratio),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_units_to_pixels:new s.bU(w,o.u_units_to_pixels)}),lineGradient:(w,o)=>({u_translation:new s.bU(w,o.u_translation),u_ratio:new s.bg(w,o.u_ratio),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_units_to_pixels:new s.bU(w,o.u_units_to_pixels),u_image:new s.bP(w,o.u_image),u_image_height:new s.bg(w,o.u_image_height)}),linePattern:(w,o)=>({u_translation:new s.bU(w,o.u_translation),u_texsize:new s.bU(w,o.u_texsize),u_ratio:new s.bg(w,o.u_ratio),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_image:new s.bP(w,o.u_image),u_units_to_pixels:new s.bU(w,o.u_units_to_pixels),u_scale:new s.bT(w,o.u_scale),u_fade:new s.bg(w,o.u_fade)}),lineSDF:(w,o)=>({u_translation:new s.bU(w,o.u_translation),u_ratio:new s.bg(w,o.u_ratio),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_units_to_pixels:new s.bU(w,o.u_units_to_pixels),u_patternscale_a:new s.bU(w,o.u_patternscale_a),u_patternscale_b:new s.bU(w,o.u_patternscale_b),u_sdfgamma:new s.bg(w,o.u_sdfgamma),u_image:new s.bP(w,o.u_image),u_tex_y_a:new s.bg(w,o.u_tex_y_a),u_tex_y_b:new s.bg(w,o.u_tex_y_b),u_mix:new s.bg(w,o.u_mix)}),raster:(w,o)=>({u_tl_parent:new s.bU(w,o.u_tl_parent),u_scale_parent:new s.bg(w,o.u_scale_parent),u_buffer_scale:new s.bg(w,o.u_buffer_scale),u_fade_t:new s.bg(w,o.u_fade_t),u_opacity:new s.bg(w,o.u_opacity),u_image0:new s.bP(w,o.u_image0),u_image1:new s.bP(w,o.u_image1),u_brightness_low:new s.bg(w,o.u_brightness_low),u_brightness_high:new s.bg(w,o.u_brightness_high),u_saturation_factor:new s.bg(w,o.u_saturation_factor),u_contrast_factor:new s.bg(w,o.u_contrast_factor),u_spin_weights:new s.bT(w,o.u_spin_weights),u_coords_top:new s.bS(w,o.u_coords_top),u_coords_bottom:new s.bS(w,o.u_coords_bottom)}),symbolIcon:(w,o)=>({u_is_size_zoom_constant:new s.bP(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(w,o.u_is_size_feature_constant),u_size_t:new s.bg(w,o.u_size_t),u_size:new s.bg(w,o.u_size),u_camera_to_center_distance:new s.bg(w,o.u_camera_to_center_distance),u_pitch:new s.bg(w,o.u_pitch),u_rotate_symbol:new s.bP(w,o.u_rotate_symbol),u_aspect_ratio:new s.bg(w,o.u_aspect_ratio),u_fade_change:new s.bg(w,o.u_fade_change),u_label_plane_matrix:new s.bR(w,o.u_label_plane_matrix),u_coord_matrix:new s.bR(w,o.u_coord_matrix),u_is_text:new s.bP(w,o.u_is_text),u_pitch_with_map:new s.bP(w,o.u_pitch_with_map),u_is_along_line:new s.bP(w,o.u_is_along_line),u_is_variable_anchor:new s.bP(w,o.u_is_variable_anchor),u_texsize:new s.bU(w,o.u_texsize),u_texture:new s.bP(w,o.u_texture),u_translation:new s.bU(w,o.u_translation),u_pitched_scale:new s.bg(w,o.u_pitched_scale)}),symbolSDF:(w,o)=>({u_is_size_zoom_constant:new s.bP(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(w,o.u_is_size_feature_constant),u_size_t:new s.bg(w,o.u_size_t),u_size:new s.bg(w,o.u_size),u_camera_to_center_distance:new s.bg(w,o.u_camera_to_center_distance),u_pitch:new s.bg(w,o.u_pitch),u_rotate_symbol:new s.bP(w,o.u_rotate_symbol),u_aspect_ratio:new s.bg(w,o.u_aspect_ratio),u_fade_change:new s.bg(w,o.u_fade_change),u_label_plane_matrix:new s.bR(w,o.u_label_plane_matrix),u_coord_matrix:new s.bR(w,o.u_coord_matrix),u_is_text:new s.bP(w,o.u_is_text),u_pitch_with_map:new s.bP(w,o.u_pitch_with_map),u_is_along_line:new s.bP(w,o.u_is_along_line),u_is_variable_anchor:new s.bP(w,o.u_is_variable_anchor),u_texsize:new s.bU(w,o.u_texsize),u_texture:new s.bP(w,o.u_texture),u_gamma_scale:new s.bg(w,o.u_gamma_scale),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_is_halo:new s.bP(w,o.u_is_halo),u_translation:new s.bU(w,o.u_translation),u_pitched_scale:new s.bg(w,o.u_pitched_scale)}),symbolTextAndIcon:(w,o)=>({u_is_size_zoom_constant:new s.bP(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(w,o.u_is_size_feature_constant),u_size_t:new s.bg(w,o.u_size_t),u_size:new s.bg(w,o.u_size),u_camera_to_center_distance:new s.bg(w,o.u_camera_to_center_distance),u_pitch:new s.bg(w,o.u_pitch),u_rotate_symbol:new s.bP(w,o.u_rotate_symbol),u_aspect_ratio:new s.bg(w,o.u_aspect_ratio),u_fade_change:new s.bg(w,o.u_fade_change),u_label_plane_matrix:new s.bR(w,o.u_label_plane_matrix),u_coord_matrix:new s.bR(w,o.u_coord_matrix),u_is_text:new s.bP(w,o.u_is_text),u_pitch_with_map:new s.bP(w,o.u_pitch_with_map),u_is_along_line:new s.bP(w,o.u_is_along_line),u_is_variable_anchor:new s.bP(w,o.u_is_variable_anchor),u_texsize:new s.bU(w,o.u_texsize),u_texsize_icon:new s.bU(w,o.u_texsize_icon),u_texture:new s.bP(w,o.u_texture),u_texture_icon:new s.bP(w,o.u_texture_icon),u_gamma_scale:new s.bg(w,o.u_gamma_scale),u_device_pixel_ratio:new s.bg(w,o.u_device_pixel_ratio),u_is_halo:new s.bP(w,o.u_is_halo),u_translation:new s.bU(w,o.u_translation),u_pitched_scale:new s.bg(w,o.u_pitched_scale)}),background:(w,o)=>({u_opacity:new s.bg(w,o.u_opacity),u_color:new s.bQ(w,o.u_color)}),backgroundPattern:(w,o)=>({u_opacity:new s.bg(w,o.u_opacity),u_image:new s.bP(w,o.u_image),u_pattern_tl_a:new s.bU(w,o.u_pattern_tl_a),u_pattern_br_a:new s.bU(w,o.u_pattern_br_a),u_pattern_tl_b:new s.bU(w,o.u_pattern_tl_b),u_pattern_br_b:new s.bU(w,o.u_pattern_br_b),u_texsize:new s.bU(w,o.u_texsize),u_mix:new s.bg(w,o.u_mix),u_pattern_size_a:new s.bU(w,o.u_pattern_size_a),u_pattern_size_b:new s.bU(w,o.u_pattern_size_b),u_scale_a:new s.bg(w,o.u_scale_a),u_scale_b:new s.bg(w,o.u_scale_b),u_pixel_coord_upper:new s.bU(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(w,o.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bg(w,o.u_tile_units_to_pixels)}),terrain:(w,o)=>({u_texture:new s.bP(w,o.u_texture),u_ele_delta:new s.bg(w,o.u_ele_delta),u_fog_matrix:new s.bR(w,o.u_fog_matrix),u_fog_color:new s.bQ(w,o.u_fog_color),u_fog_ground_blend:new s.bg(w,o.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bg(w,o.u_fog_ground_blend_opacity),u_horizon_color:new s.bQ(w,o.u_horizon_color),u_horizon_fog_blend:new s.bg(w,o.u_horizon_fog_blend),u_is_globe_mode:new s.bg(w,o.u_is_globe_mode)}),terrainDepth:(w,o)=>({u_ele_delta:new s.bg(w,o.u_ele_delta)}),terrainCoords:(w,o)=>({u_texture:new s.bP(w,o.u_texture),u_terrain_coords_id:new s.bg(w,o.u_terrain_coords_id),u_ele_delta:new s.bg(w,o.u_ele_delta)}),projectionErrorMeasurement:(w,o)=>({u_input:new s.bg(w,o.u_input),u_output_expected:new s.bg(w,o.u_output_expected)}),atmosphere:(w,o)=>({u_sun_pos:new s.bT(w,o.u_sun_pos),u_atmosphere_blend:new s.bg(w,o.u_atmosphere_blend),u_globe_position:new s.bT(w,o.u_globe_position),u_globe_radius:new s.bg(w,o.u_globe_radius),u_inv_proj_matrix:new s.bR(w,o.u_inv_proj_matrix)}),sky:(w,o)=>({u_sky_color:new s.bQ(w,o.u_sky_color),u_horizon_color:new s.bQ(w,o.u_horizon_color),u_horizon:new s.bU(w,o.u_horizon),u_horizon_normal:new s.bU(w,o.u_horizon_normal),u_sky_horizon_blend:new s.bg(w,o.u_sky_horizon_blend),u_sky_blend:new s.bg(w,o.u_sky_blend)})};class A_{constructor(o,d,y){this.context=o;const v=o.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const md={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ds{constructor(o,d,y,v){this.length=d.length,this.attributes=y,this.itemSize=d.bytesPerElement,this.dynamicDraw=v,this.context=o;const T=o.gl;this.buffer=T.createBuffer(),o.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,d){for(let y=0;y<this.attributes.length;y++){const v=d.attributes[this.attributes[y].name];v!==void 0&&o.enableVertexAttribArray(v)}}setVertexAttribPointers(o,d,y){for(let v=0;v<this.attributes.length;v++){const T=this.attributes[v],R=d.attributes[T.name];R!==void 0&&o.vertexAttribPointer(R,T.components,o[md[T.type]],!1,this.itemSize,T.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Qr{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class em extends Qr{getDefault(){return s.bf.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class tm extends Qr{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class R_ extends Qr{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class rm extends Qr{getDefault(){return[!0,!0,!0,!0]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Wa extends Qr{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class nm extends Qr{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class _w extends Qr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const d=this.current;(o.func!==d.func||o.ref!==d.ref||o.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class bw extends Qr{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class vw extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=o,this.dirty=!1}}class xw extends Qr{getDefault(){return[0,1]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class I_ extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=o,this.dirty=!1}}class ww extends Qr{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class M_ extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.BLEND):d.disable(d.BLEND),this.current=o,this.dirty=!1}}class gd extends Qr{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class yd extends Qr{getDefault(){return s.bf.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class _d extends Qr{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class im extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=o,this.dirty=!1}}class Za extends Qr{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class vu extends Qr{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Wl extends Qr{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Eo extends Qr{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class O_ extends Qr{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class k_ extends Qr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class om extends Qr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Ka extends Qr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class bd extends Qr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class vd extends Qr{getDefault(){return null}set(o){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class xu extends Qr{getDefault(){return null}set(o){var d;if(o===this.current&&!this.dirty)return;const y=this.gl;fs(y)?y.bindVertexArray(o):(d=y.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class xd extends Qr{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class L_ extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Zl extends Qr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class ca extends Qr{constructor(o,d){super(o),this.context=o,this.parent=d}getDefault(){return null}}class D_ extends ca{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class sm extends ca{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Fr extends ca{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}const wu="Framebuffer is not complete";class Ew{constructor(o,d,y,v,T){this.context=o,this.width=d,this.height=y;const R=o.gl,k=this.framebuffer=R.createFramebuffer();if(this.colorAttachment=new D_(o,k),v)this.depthAttachment=T?new Fr(o,k):new sm(o,k);else if(T)throw new Error("Stencil cannot be set without depth");if(R.checkFramebufferStatus(R.FRAMEBUFFER)!==R.FRAMEBUFFER_COMPLETE)throw new Error(wu)}destroy(){const o=this.context.gl,d=this.colorAttachment.get();if(d&&o.deleteTexture(d),this.depthAttachment){const y=this.depthAttachment.get();y&&o.deleteRenderbuffer(y)}o.deleteFramebuffer(this.framebuffer)}}class N_{constructor(o){var d,y;if(this.gl=o,this.clearColor=new em(this),this.clearDepth=new tm(this),this.clearStencil=new R_(this),this.colorMask=new rm(this),this.depthMask=new Wa(this),this.stencilMask=new nm(this),this.stencilFunc=new _w(this),this.stencilOp=new bw(this),this.stencilTest=new vw(this),this.depthRange=new xw(this),this.depthTest=new I_(this),this.depthFunc=new ww(this),this.blend=new M_(this),this.blendFunc=new gd(this),this.blendColor=new yd(this),this.blendEquation=new _d(this),this.cullFace=new im(this),this.cullFaceSide=new Za(this),this.frontFace=new vu(this),this.program=new Wl(this),this.activeTexture=new Eo(this),this.viewport=new O_(this),this.bindFramebuffer=new k_(this),this.bindRenderbuffer=new om(this),this.bindTexture=new Ka(this),this.bindVertexBuffer=new bd(this),this.bindElementBuffer=new vd(this),this.bindVertexArray=new xu(this),this.pixelStoreUnpack=new xd(this),this.pixelStoreUnpackPremultiplyAlpha=new L_(this),this.pixelStoreUnpackFlipY=new Zl(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),fs(o)){this.HALF_FLOAT=o.HALF_FLOAT;const v=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=o.RGBA16F)!==null&&d!==void 0?d:v?.RGBA16F_EXT,this.RGB16F=(y=o.RGB16F)!==null&&y!==void 0?y:v?.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const v=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=v?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,d){return new A_(this,o,d)}createVertexBuffer(o,d,y){return new Ds(this,o,d,y)}createRenderbuffer(o,d,y){const v=this.gl,T=v.createRenderbuffer();return this.bindRenderbuffer.set(T),v.renderbufferStorage(v.RENDERBUFFER,o,d,y),this.bindRenderbuffer.set(null),T}createFramebuffer(o,d,y,v){return new Ew(this,o,d,y,v)}clear({color:o,depth:d,stencil:y}){const v=this.gl;let T=0;o&&(T|=v.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(T|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),y!==void 0&&(T|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),v.clear(T)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){s.bH(o.blendFunction,Sn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return fs(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var d;return fs(this.gl)?this.gl.deleteVertexArray(o):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}let ua;function F_(w,o,d,y,v){const T=w.context,R=w.transform,k=T.gl,L=w.useProgram("collisionBox"),q=[];let V=0,Y=0;for(let be=0;be<y.length;be++){const Se=y[be],Re=o.getTile(Se).getBucket(d);if(!Re)continue;const Pe=v?Re.textCollisionBox:Re.iconCollisionBox,De=Re.collisionCircleArray;De.length>0&&(q.push({circleArray:De,circleOffset:Y,coord:Se}),V+=De.length/4,Y=V),Pe&&L.draw(T,k.LINES,br.disabled,Wr.disabled,w.colorModeForRenderPass(),or.disabled,pd(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Se),R.getProjectionData({overscaledTileID:Se,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,w.transform.zoom,null,null,Pe.collisionVertexBuffer)}if(!v||!q.length)return;const H=w.useProgram("collisionCircle"),te=new s.b$;te.resize(4*V),te._trim();let le=0;for(const be of q)for(let Se=0;Se<be.circleArray.length/4;Se++){const Re=4*Se,Pe=be.circleArray[Re+0],De=be.circleArray[Re+1],Be=be.circleArray[Re+2],Ae=be.circleArray[Re+3];te.emplace(le++,Pe,De,Be,Ae,0),te.emplace(le++,Pe,De,Be,Ae,1),te.emplace(le++,Pe,De,Be,Ae,2),te.emplace(le++,Pe,De,Be,Ae,3)}(!ua||ua.length<2*V)&&(ua=function(be){const Se=2*be,Re=new s.c1;Re.resize(Se),Re._trim();for(let Pe=0;Pe<Se;Pe++){const De=6*Pe;Re.uint16[De+0]=4*Pe+0,Re.uint16[De+1]=4*Pe+1,Re.uint16[De+2]=4*Pe+2,Re.uint16[De+3]=4*Pe+2,Re.uint16[De+4]=4*Pe+3,Re.uint16[De+5]=4*Pe+0}return Re}(V));const _e=T.createIndexBuffer(ua,!0),ge=T.createVertexBuffer(te,s.c0.members,!0);for(const be of q){const Se=fw(w.transform);H.draw(T,k.TRIANGLES,br.disabled,Wr.disabled,w.colorModeForRenderPass(),or.disabled,Se,w.style.map.terrain&&w.style.map.terrain.getTerrainData(be.coord),null,d.id,ge,_e,s.aM.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,w.transform.zoom,null,null,null)}ge.destroy(),_e.destroy()}const Tw=s.ag(new Float32Array(16));function z_(w,o,d,y,v,T){const{horizontalAlign:R,verticalAlign:k}=s.aH(w);return new s.P((-(R-.5)*o/v+y[0])*T,(-(k-.5)*d/v+y[1])*T)}function Sw(w,o,d,y,v,T){const R=o.tileAnchorPoint.add(new s.P(o.translation[0],o.translation[1]));if(o.pitchWithMap){let k=y.mult(T);d||(k=k.rotate(-v));const L=R.add(k);return Pr(L.x,L.y,o.pitchedLabelPlaneMatrix,o.getElevation).point}if(d){const k=xn(o.tileAnchorPoint.x+1,o.tileAnchorPoint.y,o).point.sub(w),L=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return w.add(y.rotate(L))}return w.add(y)}function am(w,o,d,y,v,T,R,k,L,q,V,Y){const H=w.text.placedSymbolArray,te=w.text.dynamicLayoutVertexArray,le=w.icon.dynamicLayoutVertexArray,_e={};te.clear();for(let ge=0;ge<H.length;ge++){const be=H.get(ge),Se=be.hidden||!be.crossTileID||w.allowVerticalPlacement&&!be.placedOrientation?null:y[be.crossTileID];if(Se){const Re=new s.P(be.anchorX,be.anchorY),Pe={getElevation:Y,width:v.width,height:v.height,pitchedLabelPlaneMatrix:T,pitchWithMap:d,transform:v,tileAnchorPoint:Re,translation:q,unwrappedTileID:V},De=d?to(Re.x,Re.y,Pe):xn(Re.x,Re.y,Pe),Be=yt(v.cameraToCenterDistance,De.signedDistanceFromCamera);let Ae=s.ap(w.textSizeData,k,be)*Be/s.aB;d&&(Ae*=w.tilePixelRatio/R);const{width:Ge,height:st,anchor:Ye,textOffset:Xe,textBoxScale:ot}=Se,xt=z_(Ye,Ge,st,Xe,ot,Ae),Et=v.getPitchedTextCorrection(Re.x+q[0],Re.y+q[1],V),ft=Sw(De.point,Pe,o,xt,-v.bearingInRadians,Et),Vt=w.allowVerticalPlacement&&be.placedOrientation===s.ao.vertical?Math.PI/2:0;for(let wr=0;wr<be.numGlyphs;wr++)s.av(te,ft,Vt);L&&be.associatedIconIndex>=0&&(_e[be.associatedIconIndex]={shiftedAnchor:ft,angle:Vt})}else E(be.numGlyphs,te)}if(L){le.clear();const ge=w.icon.placedSymbolArray;for(let be=0;be<ge.length;be++){const Se=ge.get(be);if(Se.hidden)E(Se.numGlyphs,le);else{const Re=_e[be];if(Re)for(let Pe=0;Pe<Se.numGlyphs;Pe++)s.av(le,Re.shiftedAnchor,Re.angle);else E(Se.numGlyphs,le)}}w.icon.dynamicLayoutVertexBuffer.updateData(le)}w.text.dynamicLayoutVertexBuffer.updateData(te)}function wd(w,o,d){return d.iconsInText&&o?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Eu(w,o,d,y,v,T,R,k,L,q,V,Y,H){const te=w.context,le=te.gl,_e=w.transform,ge=k==="map",be=L==="map",Se=k!=="viewport"&&d.layout.get("symbol-placement")!=="point",Re=ge&&!be&&!Se,Pe=!d.layout.get("symbol-sort-key").isConstant();let De=!1;const Be=w.getDepthModeForSublayer(0,br.ReadOnly),Ae=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[],st=_e.getCircleRadiusCorrection();for(const Ye of y){const Xe=o.getTile(Ye),ot=Xe.getBucket(d);if(!ot)continue;const xt=v?ot.text:ot.icon;if(!xt||!xt.segments.get().length||!xt.hasVisibleVertices)continue;const Et=xt.programConfigurations.get(d.id),ft=v||ot.sdfIcons,Vt=v?ot.textSizeData:ot.iconSizeData,wr=be||_e.pitch!==0,tn=w.useProgram(wd(ft,v,ot),Et),dn=s.an(Vt,_e.zoom),an=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ye);let Mn,Dn,vr,pn,Yn=[0,0],si=null;if(v)Dn=Xe.glyphAtlasTexture,vr=le.LINEAR,Mn=Xe.glyphAtlasTexture.size,ot.iconsInText&&(Yn=Xe.imageAtlasTexture.size,si=Xe.imageAtlasTexture,pn=wr||w.options.rotating||w.options.zooming||Vt.kind==="composite"||Vt.kind==="camera"?le.LINEAR:le.NEAREST);else{const Xn=d.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;Dn=Xe.imageAtlasTexture,vr=ft||w.options.rotating||w.options.zooming||Xn||wr?le.LINEAR:le.NEAREST,Mn=Xe.imageAtlasTexture.size}const mi=s.aC(Xe,1,w.transform.zoom),Ji=Cr(ge,w.transform,mi),Vo=s.L();s.aq(Vo,Ji);const da=Kt(be,ge,w.transform,mi),pa=s.aD(_e,Xe,T,R),ac=_e.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),lc=Ae&&ot.hasTextData(),nl=d.layout.get("icon-text-fit")!=="none"&&lc&&ot.hasIconData();if(Se){const Xn=w.style.map.terrain?(Co,Qn)=>w.style.map.terrain.getElevation(Ye,Co,Qn):null,ai=d.layout.get("text-rotation-alignment")==="map";vn(ot,w,v,Ji,Vo,be,q,ai,Ye.toUnwrapped(),_e.width,_e.height,pa,Xn)}const il=v&&Ae||nl,io=Se||il?Tw:be?Ji:w.transform.clipSpaceToPixelsMatrix,Uo=ft&&d.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Wi;Wi=ft?ot.iconsInText?yw(Vt.kind,dn,Re,be,Se,il,w,io,da,pa,Mn,Yn,st):S_(Vt.kind,dn,Re,be,Se,il,w,io,da,pa,v,Mn,0,st):bu(Vt.kind,dn,Re,be,Se,il,w,io,da,pa,v,Mn,st);const fa={program:tn,buffers:xt,uniformValues:Wi,projectionData:ac,atlasTexture:Dn,atlasTextureIcon:si,atlasInterpolation:vr,atlasInterpolationIcon:pn,isSDF:ft,hasHalo:Uo};if(Pe&&ot.canOverlap){De=!0;const Xn=xt.segments.get();for(const ai of Xn)Ge.push({segments:new s.aM([ai]),sortKey:ai.sortKey,state:fa,terrainData:an})}else Ge.push({segments:xt.segments,sortKey:0,state:fa,terrainData:an})}De&&Ge.sort((Ye,Xe)=>Ye.sortKey-Xe.sortKey);for(const Ye of Ge){const Xe=Ye.state;if(te.activeTexture.set(le.TEXTURE0),Xe.atlasTexture.bind(Xe.atlasInterpolation,le.CLAMP_TO_EDGE),Xe.atlasTextureIcon&&(te.activeTexture.set(le.TEXTURE1),Xe.atlasTextureIcon&&Xe.atlasTextureIcon.bind(Xe.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),Xe.isSDF){const ot=Xe.uniformValues;Xe.hasHalo&&(ot.u_is_halo=1,Tu(Xe.buffers,Ye.segments,d,w,Xe.program,Be,V,Y,ot,Xe.projectionData,Ye.terrainData)),ot.u_is_halo=0}Tu(Xe.buffers,Ye.segments,d,w,Xe.program,Be,V,Y,Xe.uniformValues,Xe.projectionData,Ye.terrainData)}}function Tu(w,o,d,y,v,T,R,k,L,q,V){const Y=y.context;v.draw(Y,Y.gl.TRIANGLES,T,R,k,or.backCCW,L,V,q,d.id,w.layoutVertexBuffer,w.indexBuffer,o,d.paint,y.transform.zoom,w.programConfigurations.get(d.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function lm(w,o,d,y,v){const T=w.context,R=T.gl,k=Wr.disabled,L=new Sn([R.ONE,R.ONE],s.bf.transparent,[!0,!0,!0,!0]),q=o.getBucket(d);if(!q)return;const V=y.key;let Y=d.heatmapFbos.get(V);Y||(Y=Su(T,o.tileSize,o.tileSize),d.heatmapFbos.set(V,Y)),T.bindFramebuffer.set(Y.framebuffer),T.viewport.set([0,0,o.tileSize,o.tileSize]),T.clear({color:s.bf.transparent});const H=q.programConfigurations.get(d.id),te=w.useProgram("heatmap",H,!v),le=w.transform.getProjectionData({overscaledTileID:o.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),_e=w.style.map.terrain.getTerrainData(y);te.draw(T,R.TRIANGLES,br.disabled,k,L,or.disabled,v_(o,w.transform.zoom,d.paint.get("heatmap-intensity"),1),_e,le,d.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,d.paint,w.transform.zoom,H)}function j_(w,o,d,y,v){const T=w.context,R=T.gl,k=w.transform;T.setColorMode(w.colorModeForRenderPass());const L=Cu(T,o),q=d.key,V=o.heatmapFbos.get(q);if(!V)return;T.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,V.colorAttachment.get()),T.activeTexture.set(R.TEXTURE1),L.bind(R.LINEAR,R.CLAMP_TO_EDGE);const Y=k.getProjectionData({overscaledTileID:d,applyTerrainMatrix:v,applyGlobeMatrix:!y});w.useProgram("heatmapTexture").draw(T,R.TRIANGLES,br.disabled,Wr.disabled,w.colorModeForRenderPass(),or.disabled,Wf(w,o,0,1),null,Y,o.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,o.paint,k.zoom),V.destroy(),o.heatmapFbos.delete(q)}function Su(w,o,d){var y,v;const T=w.gl,R=T.createTexture();T.bindTexture(T.TEXTURE_2D,R),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const k=(y=w.HALF_FLOAT)!==null&&y!==void 0?y:T.UNSIGNED_BYTE,L=(v=w.RGBA16F)!==null&&v!==void 0?v:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,L,o,d,0,T.RGBA,k,null);const q=w.createFramebuffer(o,d,!1,!1);return q.colorAttachment.set(R),q}function Cu(w,o){return o.colorRampTexture||(o.colorRampTexture=new s.T(w,o.colorRamp,w.gl.RGBA)),o.colorRampTexture}function Pu(w,o,d,y,v){if(!d||!y||!y.imageAtlas)return;const T=y.imageAtlas.patternPositions;let R=T[d.to.toString()],k=T[d.from.toString()];if(!R&&k&&(R=k),!k&&R&&(k=R),!R||!k){const L=v.getPaintProperty(o);R=T[L],k=T[L]}R&&k&&w.setConstantPatternPositions(R,k)}function Ed(w,o,d,y,v,T,R,k){const L=w.context.gl,q="fill-pattern",V=d.paint.get(q),Y=V&&V.constantOr(1),H=d.getCrossfadeParameters();let te,le,_e,ge,be;const Se=w.transform,Re=d.paint.get("fill-translate"),Pe=d.paint.get("fill-translate-anchor");R?(le=Y&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=L.LINES):(le=Y?"fillPattern":"fill",te=L.TRIANGLES);const De=V.constantOr(null);for(const Be of y){const Ae=o.getTile(Be);if(Y&&!Ae.patternsLoaded())continue;const Ge=Ae.getBucket(d);if(!Ge)continue;const st=Ge.programConfigurations.get(d.id),Ye=w.useProgram(le,st),Xe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Be);Y&&(w.context.activeTexture.set(L.TEXTURE0),Ae.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),st.updatePaintBuffers(H)),Pu(st,q,De,Ae,d);const ot=Se.getProjectionData({overscaledTileID:Be,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),xt=s.aD(Se,Ae,Re,Pe);if(R){ge=Ge.indexBuffer2,be=Ge.segments2;const ft=[L.drawingBufferWidth,L.drawingBufferHeight];_e=le==="fillOutlinePattern"&&Y?yu(w,H,Ae,ft,xt):gu(ft,xt)}else ge=Ge.indexBuffer,be=Ge.segments,_e=Y?dd(w,H,Ae,xt):{u_fill_translate:xt};const Et=w.stencilModeForClipping(Be);Ye.draw(w.context,te,v,Et,T,or.backCCW,_e,Xe,ot,d.id,Ge.layoutVertexBuffer,ge,be,d.paint,w.transform.zoom,st)}}function cm(w,o,d,y,v,T,R,k){const L=w.context,q=L.gl,V="fill-extrusion-pattern",Y=d.paint.get(V),H=Y.constantOr(1),te=d.getCrossfadeParameters(),le=d.paint.get("fill-extrusion-opacity"),_e=Y.constantOr(null),ge=w.transform;for(const be of y){const Se=o.getTile(be),Re=Se.getBucket(d);if(!Re)continue;const Pe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(be),De=Re.programConfigurations.get(d.id),Be=w.useProgram(H?"fillExtrusionPattern":"fillExtrusion",De);H&&(w.context.activeTexture.set(q.TEXTURE0),Se.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),De.updatePaintBuffers(te));const Ae=ge.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!k,applyTerrainMatrix:!0});Pu(De,V,_e,Se,d);const Ge=s.aD(ge,Se,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),st=d.paint.get("fill-extrusion-vertical-gradient"),Ye=H?dw(w,st,le,Ge,be,te,Se):Fo(w,st,le,Ge);Be.draw(L,L.gl.TRIANGLES,v,T,R,or.backCCW,Ye,Pe,Ae,d.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,d.paint,w.transform.zoom,De,w.style.map.terrain&&Re.centroidVertexBuffer)}}function Ya(w,o,d,y,v,T,R,k,L){var q;const V=w.style.projection,Y=w.context,H=w.transform,te=Y.gl,le=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],_e=w.useProgram("hillshade",null,!1,le),ge=!w.options.moving;for(const be of y){const Se=o.getTile(be),Re=Se.fbo;if(!Re)continue;const Pe=V.getMeshFromTileID(Y,be.canonical,k,!0,"raster"),De=(q=w.style.map.terrain)===null||q===void 0?void 0:q.getTerrainData(be);Y.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,Re.colorAttachment.get());const Be=H.getProjectionData({overscaledTileID:be,aligned:ge,applyGlobeMatrix:!L,applyTerrainMatrix:!0});_e.draw(Y,te.TRIANGLES,T,v[be.overscaledZ],R,or.backCCW,mw(w,Se,d),De,Be,d.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}}function um(w,o,d,y,v,T,R,k,L){var q;const V=w.style.projection,Y=w.context,H=w.transform,te=Y.gl,le=w.useProgram("colorRelief"),_e=!w.options.moving;let ge=!0,be=0;for(const Se of y){const Re=o.getTile(Se),Pe=Re.dem;if(ge){const Ye=te.getParameter(te.MAX_TEXTURE_SIZE),{elevationTexture:Xe,colorTexture:ot}=d.getColorRampTextures(Y,Ye,Pe.getUnpackVector());Y.activeTexture.set(te.TEXTURE1),Xe.bind(te.NEAREST,te.CLAMP_TO_EDGE),Y.activeTexture.set(te.TEXTURE4),ot.bind(te.LINEAR,te.CLAMP_TO_EDGE),ge=!1,be=Xe.size[0]}if(!Pe||!Pe.data)continue;const De=Pe.stride,Be=Pe.getPixels();if(Y.activeTexture.set(te.TEXTURE0),Y.pixelStoreUnpackPremultiplyAlpha.set(!1),Re.demTexture=Re.demTexture||w.getTileTexture(De),Re.demTexture){const Ye=Re.demTexture;Ye.update(Be,{premultiply:!1}),Ye.bind(te.LINEAR,te.CLAMP_TO_EDGE)}else Re.demTexture=new s.T(Y,Be,te.RGBA,{premultiply:!1}),Re.demTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE);const Ae=V.getMeshFromTileID(Y,Se.canonical,k,!0,"raster"),Ge=(q=w.style.map.terrain)===null||q===void 0?void 0:q.getTerrainData(Se),st=H.getProjectionData({overscaledTileID:Se,aligned:_e,applyGlobeMatrix:!L,applyTerrainMatrix:!0});le.draw(Y,te.TRIANGLES,T,v[Se.overscaledZ],R,or.backCCW,w_(d,Re.dem,be),Ge,st,d.id,Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}}const Td=[new s.P(0,0),new s.P(s.$,0),new s.P(s.$,s.$),new s.P(0,s.$)];function Xa(w,o,d,y,v,T,R,k,L=!1,q=!1){const V=y[y.length-1].overscaledZ,Y=w.context,H=Y.gl,te=w.useProgram("raster"),le=w.transform,_e=w.style.projection,ge=w.colorModeForRenderPass(),be=!w.options.moving;for(const Se of y){const Re=w.getDepthModeForSublayer(Se.overscaledZ-V,d.paint.get("raster-opacity")===1?br.ReadWrite:br.ReadOnly,H.LESS),Pe=o.getTile(Se);Pe.registerFadeDuration(d.paint.get("raster-fade-duration"));const De=o.findLoadedParent(Se,0),Be=o.findLoadedSibling(Se),Ae=hm(Pe,De||Be||null,o,d,w.transform,w.style.map.terrain);let Ge,st;const Ye=d.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;Y.activeTexture.set(H.TEXTURE0),Pe.texture.bind(Ye,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set(H.TEXTURE1),De?(De.texture.bind(Ye,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Ge=Math.pow(2,De.tileID.overscaledZ-Pe.tileID.overscaledZ),st=[Pe.tileID.canonical.x*Ge%1,Pe.tileID.canonical.y*Ge%1]):Pe.texture.bind(Ye,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Pe.texture.useMipmap&&Y.extTextureFilterAnisotropic&&w.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,Y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y.extTextureFilterAnisotropicMax);const Xe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Se),ot=le.getProjectionData({overscaledTileID:Se,aligned:be,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),xt=_u(st||[0,0],Ge||1,Ae,d,k),Et=_e.getMeshFromTileID(Y,Se.canonical,T,R,"raster");te.draw(Y,H.TRIANGLES,Re,v?v[Se.overscaledZ]:Wr.disabled,ge,L?or.frontCCW:or.backCCW,xt,Xe,ot,d.id,Et.vertexBuffer,Et.indexBuffer,Et.segments)}}function hm(w,o,d,y,v,T){const R=y.paint.get("raster-fade-duration");if(!T&&R>0){const k=P.now(),L=(k-w.timeAdded)/R,q=o?(k-o.timeAdded)/R:-1,V=d.getSource(),Y=Ot(v,{tileSize:V.tileSize,roundZoom:V.roundZoom}),H=!o||Math.abs(o.tileID.overscaledZ-Y)>Math.abs(w.tileID.overscaledZ-Y),te=H&&w.refreshedUponExpiration?1:s.ah(H?L:1-q,0,1);return w.refreshedUponExpiration&&L>=1&&(w.refreshedUponExpiration=!1),o?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const B_=new s.bf(1,0,0,1),q_=new s.bf(0,1,0,1),Sd=new s.bf(0,0,1,1),dm=new s.bf(1,0,1,1),Cw=new s.bf(0,1,1,1);function pm(w,o,d,y){ys(w,0,o+d/2,w.transform.width,d,y)}function Ln(w,o,d,y){ys(w,o-d/2,0,d,w.transform.height,y)}function ys(w,o,d,y,v,T){const R=w.context,k=R.gl;k.enable(k.SCISSOR_TEST),k.scissor(o*w.pixelRatio,d*w.pixelRatio,y*w.pixelRatio,v*w.pixelRatio),R.clear({color:T}),k.disable(k.SCISSOR_TEST)}function To(w,o,d){const y=w.context,v=y.gl,T=w.useProgram("debug"),R=br.disabled,k=Wr.disabled,L=w.colorModeForRenderPass(),q="$debug",V=w.style.map.terrain&&w.style.map.terrain.getTerrainData(d);y.activeTexture.set(v.TEXTURE0);const Y=o.getTileByID(d.key).latestRawTileData,H=Math.floor((Y&&Y.byteLength||0)/1024),te=o.getTile(d).tileSize,le=512/Math.min(te,512)*(d.overscaledZ/w.transform.zoom)*.5;let _e=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(_e+=` => ${d.overscaledZ}`),function(be,Se){be.initDebugOverlayCanvas();const Re=be.debugOverlayCanvas,Pe=be.context.gl,De=be.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,Re.width,Re.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(Se,5,5),De.strokeText(Se,5,5),be.debugOverlayTexture.update(Re),be.debugOverlayTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}(w,`${_e} ${H}kB`);const ge=w.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(y,v.TRIANGLES,R,k,Sn.alphaBlended,or.disabled,Ha(s.bf.transparent,le),null,ge,q,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),T.draw(y,v.LINE_STRIP,R,k,L,or.disabled,Ha(s.bf.red),V,ge,q,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Cd(w,o,d,y){const{isRenderingGlobe:v}=y,T=w.context,R=T.gl,k=w.transform,L=w.colorModeForRenderPass(),q=w.getDepthModeFor3D(),V=w.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,w.width,w.height]);for(const Y of d){const H=o.getTerrainMesh(Y.tileID),te=w.renderToTexture.getTexture(Y),le=o.getTerrainData(Y.tileID);T.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,te.texture);const _e=o.getMeshFrameDelta(k.zoom),ge=k.calculateFogMatrix(Y.tileID.toUnwrapped()),be=ud(_e,ge,w.style.sky,k.pitch,v),Se=k.getProjectionData({overscaledTileID:Y.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(T,R.TRIANGLES,q,Wr.disabled,L,or.backCCW,be,le,Se,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}function Au(w,o){if(!o.mesh){const d=new s.aL;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);const y=new s.aN;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),o.mesh=new Ba(w.createVertexBuffer(d,la.members),w.createIndexBuffer(y),s.aM.simpleSegment(0,0,d.length,y.length))}return o.mesh}class $_{constructor(o,d){this.context=new N_(o),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=cr.maxUnderzooming+cr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ul}resize(o,d,y){if(this.width=Math.floor(o*y),this.height=Math.floor(d*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const o=this.context,d=new s.aL;d.emplaceBack(0,0),d.emplaceBack(s.$,0),d.emplaceBack(0,s.$),d.emplaceBack(s.$,s.$),this.tileExtentBuffer=o.createVertexBuffer(d,la.members),this.tileExtentSegments=s.aM.simpleSegment(0,0,4,2);const y=new s.aL;y.emplaceBack(0,0),y.emplaceBack(s.$,0),y.emplaceBack(0,s.$),y.emplaceBack(s.$,s.$),this.debugBuffer=o.createVertexBuffer(y,la.members),this.debugSegments=s.aM.simpleSegment(0,0,4,5);const v=new s.c6;v.emplaceBack(0,0,0,0),v.emplaceBack(s.$,0,s.$,0),v.emplaceBack(0,s.$,0,s.$),v.emplaceBack(s.$,s.$,s.$,s.$),this.rasterBoundsBuffer=o.createVertexBuffer(v,uw.members),this.rasterBoundsSegments=s.aM.simpleSegment(0,0,4,2);const T=new s.aL;T.emplaceBack(0,0),T.emplaceBack(s.$,0),T.emplaceBack(0,s.$),T.emplaceBack(s.$,s.$),this.rasterBoundsBufferPosOnly=o.createVertexBuffer(T,la.members),this.rasterBoundsSegmentsPosOnly=s.aM.simpleSegment(0,0,4,5);const R=new s.aL;R.emplaceBack(0,0),R.emplaceBack(1,0),R.emplaceBack(0,1),R.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(R,la.members),this.viewportSegments=s.aM.simpleSegment(0,0,4,2);const k=new s.c7;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(k);const L=new s.aN;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(L);const q=this.context.gl;this.stencilClearMode=new Wr({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO),this.tileExtentMesh=new Ba(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const o=this.context,d=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=s.L();s.bY(y,0,this.width,this.height,0,0,1),s.N(y,y,[d.drawingBufferWidth,d.drawingBufferHeight,0]);const v={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(o,d.TRIANGLES,br.disabled,this.stencilClearMode,Sn.disabled,or.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,d,y){if(this.currentStencilSource===o.source||!o.isTileClipped()||!d||!d.length)return;this.currentStencilSource=o.source,this.nextStencilID+d.length>256&&this.clearStencil();const v=this.context;v.setColorMode(Sn.disabled),v.setDepthMode(br.disabled);const T={};for(const R of d)T[R.key]=this.nextStencilID++;this._renderTileMasks(T,d,y,!0),this._renderTileMasks(T,d,y,!1),this._tileClippingMaskIDs=T}_renderTileMasks(o,d,y,v){const T=this.context,R=T.gl,k=this.style.projection,L=this.transform,q=this.useProgram("clippingMask");for(const V of d){const Y=o[V.key],H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),te=k.getMeshFromTileID(this.context,V.canonical,v,!0,"stencil"),le=L.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!y,applyTerrainMatrix:!0});q.draw(T,R.TRIANGLES,br.disabled,new Wr({func:R.ALWAYS,mask:0},Y,255,R.KEEP,R.KEEP,R.REPLACE),Sn.disabled,y?or.disabled:or.backCCW,null,H,le,"$clipping",te.vertexBuffer,te.indexBuffer,te.segments)}}_renderTilesDepthBuffer(){const o=this.context,d=o.gl,y=this.style.projection,v=this.transform,T=this.useProgram("depth"),R=this.getDepthModeFor3D(),k=$e(v,{tileSize:v.tileSize});for(const L of k){const q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(L),V=y.getMeshFromTileID(this.context,L.canonical,!0,!0,"raster"),Y=v.getProjectionData({overscaledTileID:L,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(o,d.TRIANGLES,R,Wr.disabled,Sn.disabled,or.backCCW,null,q,Y,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,d=this.context.gl;return new Wr({func:d.NOTEQUAL,mask:255},o,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(o){const d=this.context.gl;return new Wr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(o){const d=this.context.gl,y=o.sort((R,k)=>k.overscaledZ-R.overscaledZ),v=y[y.length-1].overscaledZ,T=y[0].overscaledZ-v+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const R={};for(let k=0;k<T;k++)R[k+v]=new Wr({func:d.GEQUAL,mask:255},k+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=T,[R,y]}return[{[v]:Wr.disabled},y]}stencilConfigForOverlapTwoPass(o){const d=this.context.gl,y=o.sort((R,k)=>k.overscaledZ-R.overscaledZ),v=y[y.length-1].overscaledZ,T=y[0].overscaledZ-v+1;if(this.clearStencil(),T>1){const R={},k={};for(let L=0;L<T;L++)R[L+v]=new Wr({func:d.GREATER,mask:255},T+1+L,255,d.KEEP,d.KEEP,d.REPLACE),k[L+v]=new Wr({func:d.GREATER,mask:255},1+L,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*T+1,[R,k,y]}return this.nextStencilID=3,[{[v]:new Wr({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[v]:new Wr({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},y]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new Sn([o.CONSTANT_COLOR,o.ONE],new s.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Sn.unblended:Sn.alphaBlended}getDepthModeForSublayer(o,d,y){if(!this.opaquePassEnabledForLayer())return br.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new br(y||this.context.gl.LEQUAL,d,[v,v])}getDepthModeFor3D(){return new br(this.context.gl.LEQUAL,br.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,d){var y,v;this.style=o,this.options=d,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(P.now()),this.imageManager.beginFrame();const T=this.style._order,R=this.style.sourceCaches,k={},L={},q={},V={isRenderingToTexture:!1,isRenderingGlobe:((y=o.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const H in R){const te=R[H];te.used&&te.prepare(this.context),k[H]=te.getVisibleCoordinates(!1),L[H]=k[H].slice().reverse(),q[H]=te.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<T.length;H++)if(this.style._layers[T[H]].is3D()){this.opaquePassCutoff=H;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const H of T){const te=this.style._layers[H];if(!te.hasOffscreenPass()||te.isHidden(this.transform.zoom))continue;const le=L[te.source];(te.type==="custom"||le.length)&&this.renderLayer(this,R[te.source],te,le,V)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:H=>this.useProgram(H)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?s.bf.black:s.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(H,te){const le=H.context,_e=le.gl,ge=((Be,Ae,Ge)=>{const st=Math.cos(Ae.rollInRadians),Ye=Math.sin(Ae.rollInRadians),Xe=Le(Ae),ot=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Be.properties.get("sky-color"),u_horizon_color:Be.properties.get("horizon-color"),u_horizon:[(Ae.width/2-Xe*Ye)*Ge,(Ae.height/2+Xe*st)*Ge],u_horizon_normal:[-Ye,st],u_sky_horizon_blend:Be.properties.get("sky-horizon-blend")*Ae.height/2*Ge,u_sky_blend:ot}})(te,H.style.map.transform,H.pixelRatio),be=new br(_e.LEQUAL,br.ReadWrite,[0,1]),Se=Wr.disabled,Re=H.colorModeForRenderPass(),Pe=H.useProgram("sky"),De=Au(le,te);Pe.draw(le,_e.TRIANGLES,be,Se,Re,or.disabled,ge,null,void 0,"sky",De.vertexBuffer,De.indexBuffer,De.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const H=this.style._layers[T[this.currentLayer]],te=R[H.source],le=k[H.source];this._renderTileClippingMasks(H,le,!1),this.renderLayer(this,te,H,le,V)}this.renderPass="translucent";let Y=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const H=this.style._layers[T[this.currentLayer]],te=R[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H,V))continue;this.opaquePassEnabledForLayer()||Y||(Y=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const le=(H.type==="symbol"?q:L)[H.source];this._renderTileClippingMasks(H,k[H.source],!!this.renderToTexture),this.renderLayer(this,te,H,le,V)}if(V.isRenderingGlobe&&function(H,te,le){const _e=H.context,ge=_e.gl,be=H.useProgram("atmosphere"),Se=new br(ge.LEQUAL,br.ReadOnly,[0,1]),Re=H.transform,Pe=function(ot,xt){const Et=ot.properties.get("position"),ft=[-Et.x,-Et.y,-Et.z],Vt=s.ag(new Float64Array(16));return ot.properties.get("anchor")==="map"&&(s.b6(Vt,Vt,xt.rollInRadians),s.b7(Vt,Vt,-xt.pitchInRadians),s.b6(Vt,Vt,xt.bearingInRadians),s.b7(Vt,Vt,xt.center.lat*Math.PI/180),s.bz(Vt,Vt,-xt.center.lng*Math.PI/180)),s.c5(ft,ft,Vt),ft}(le,H.transform),De=Re.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Be=te.properties.get("atmosphere-blend")*De.projectionTransition;if(Be===0)return;const Ae=Hl(Re.worldSize,Re.center.lat),Ge=Re.inverseProjectionMatrix,st=new Float64Array(4);st[3]=1,s.aw(st,st,Re.modelViewProjectionMatrix),st[0]/=st[3],st[1]/=st[3],st[2]/=st[3],st[3]=1,s.aw(st,st,Ge),st[0]/=st[3],st[1]/=st[3],st[2]/=st[3],st[3]=1;const Ye=((ot,xt,Et,ft,Vt)=>({u_sun_pos:ot,u_atmosphere_blend:xt,u_globe_position:Et,u_globe_radius:ft,u_inv_proj_matrix:Vt}))(Pe,Be,[st[0],st[1],st[2]],Ae,Ge),Xe=Au(_e,te);be.draw(_e,ge.TRIANGLES,Se,Wr.disabled,Sn.alphaBlended,or.disabled,Ye,null,null,"atmosphere",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const H=function(te,le){let _e=null;const ge=Object.values(te._layers).flatMap(Pe=>Pe.source&&!Pe.isHidden(le)?[te.sourceCaches[Pe.source]]:[]),be=ge.filter(Pe=>Pe.getSource().type==="vector"),Se=ge.filter(Pe=>Pe.getSource().type!=="vector"),Re=Pe=>{(!_e||_e.getSource().maxzoom<Pe.getSource().maxzoom)&&(_e=Pe)};return be.forEach(Pe=>Re(Pe)),_e||Se.forEach(Pe=>Re(Pe)),_e}(this.style,this.transform.zoom);H&&function(te,le,_e){for(let ge=0;ge<_e.length;ge++)To(te,le,_e[ge])}(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){const te=H.transform.padding;pm(H,H.transform.height-(te.top||0),3,B_),pm(H,te.bottom||0,3,q_),Ln(H,te.left||0,3,Sd),Ln(H,H.transform.width-(te.right||0),3,dm);const le=H.transform.centerPoint;(function(_e,ge,be,Se){ys(_e,ge-1,be-10,2,20,Se),ys(_e,ge-10,be-1,20,2,Se)})(H,le.x,H.transform.height-le.y,Cw)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=o?!s.c8(d,y):!s.c9(d,y)),v||(v=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(s.ca(d,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,R){const k=T.context,L=k.gl,q=T.transform,V=Sn.unblended,Y=new br(L.LEQUAL,br.ReadWrite,[0,1]),H=R.sourceCache.getRenderableTiles(),te=T.useProgram("terrainDepth");k.bindFramebuffer.set(R.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),k.clear({color:s.bf.transparent,depth:1});for(const le of H){const _e=R.getTerrainMesh(le.tileID),ge=R.getTerrainData(le.tileID),be=q.getProjectionData({overscaledTileID:le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Se={u_ele_delta:R.getMeshFrameDelta(q.zoom)};te.draw(k,L.TRIANGLES,Y,Wr.disabled,V,or.backCCW,Se,ge,be,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,R){const k=T.context,L=k.gl,q=T.transform,V=Sn.unblended,Y=new br(L.LEQUAL,br.ReadWrite,[0,1]),H=R.getCoordsTexture(),te=R.sourceCache.getRenderableTiles(),le=T.useProgram("terrainCoords");k.bindFramebuffer.set(R.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),k.clear({color:s.bf.transparent,depth:1}),R.coordsIndex=[];for(const _e of te){const ge=R.getTerrainMesh(_e.tileID),be=R.getTerrainData(_e.tileID);k.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,H.texture);const Se={u_terrain_coords_id:(255-R.coordsIndex.length)/255,u_texture:0,u_ele_delta:R.getMeshFrameDelta(q.zoom)},Re=q.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});le.draw(k,L.TRIANGLES,Y,Wr.disabled,V,or.backCCW,Se,be,Re,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),R.coordsIndex.push(_e.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(o,d,y,v,T){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(v||[]).length)&&(this.id=y.id,s.cb(y)?function(R,k,L,q,V,Y){if(R.renderPass!=="translucent")return;const{isRenderingToTexture:H}=Y,te=Wr.disabled,le=R.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(_e,ge,be,Se,Re,Pe,De,Be,Ae){const Ge=ge.transform,st=ge.style.map.terrain,Ye=Re==="map",Xe=Pe==="map";for(const ot of _e){const xt=Se.getTile(ot),Et=xt.getBucket(be);if(!Et||!Et.text||!Et.text.segments.get().length)continue;const ft=s.an(Et.textSizeData,Ge.zoom),Vt=s.aC(xt,1,ge.transform.zoom),wr=Cr(Ye,ge.transform,Vt),tn=be.layout.get("icon-text-fit")!=="none"&&Et.hasIconData();if(ft){const dn=Math.pow(2,Ge.zoom-xt.tileID.overscaledZ),an=st?(Mn,Dn)=>st.getElevation(ot,Mn,Dn):null;am(Et,Ye,Xe,Ae,Ge,wr,dn,ft,tn,s.aD(Ge,xt,De,Be),ot.toUnwrapped(),an)}}}(q,R,L,k,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),V),L.paint.get("icon-opacity").constantOr(1)!==0&&Eu(R,k,L,q,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),te,le,H),L.paint.get("text-opacity").constantOr(1)!==0&&Eu(R,k,L,q,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),te,le,H),k.map.showCollisionBoxes&&(F_(R,k,L,q,!0),F_(R,k,L,q,!1))}(o,d,y,v,this.style.placement.variableOffsets,T):s.cc(y)?function(R,k,L,q,V){if(R.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=V,H=L.paint.get("circle-opacity"),te=L.paint.get("circle-stroke-width"),le=L.paint.get("circle-stroke-opacity"),_e=!L.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(te.constantOr(1)===0||le.constantOr(1)===0))return;const ge=R.context,be=ge.gl,Se=R.transform,Re=R.getDepthModeForSublayer(0,br.ReadOnly),Pe=Wr.disabled,De=R.colorModeForRenderPass(),Be=[],Ae=Se.getCircleRadiusCorrection();for(let Ge=0;Ge<q.length;Ge++){const st=q[Ge],Ye=k.getTile(st),Xe=Ye.getBucket(L);if(!Xe)continue;const ot=L.paint.get("circle-translate"),xt=L.paint.get("circle-translate-anchor"),Et=s.aD(Se,Ye,ot,xt),ft=Xe.programConfigurations.get(L.id),Vt=R.useProgram("circle",ft),wr=Xe.layoutVertexBuffer,tn=Xe.indexBuffer,dn=R.style.map.terrain&&R.style.map.terrain.getTerrainData(st),an={programConfiguration:ft,program:Vt,layoutVertexBuffer:wr,indexBuffer:tn,uniformValues:pw(R,Ye,L,Et,Ae),terrainData:dn,projectionData:Se.getProjectionData({overscaledTileID:st,applyGlobeMatrix:!Y,applyTerrainMatrix:!0})};if(_e){const Mn=Xe.segments.get();for(const Dn of Mn)Be.push({segments:new s.aM([Dn]),sortKey:Dn.sortKey,state:an})}else Be.push({segments:Xe.segments,sortKey:0,state:an})}_e&&Be.sort((Ge,st)=>Ge.sortKey-st.sortKey);for(const Ge of Be){const{programConfiguration:st,program:Ye,layoutVertexBuffer:Xe,indexBuffer:ot,uniformValues:xt,terrainData:Et,projectionData:ft}=Ge.state;Ye.draw(ge,be.TRIANGLES,Re,Pe,De,or.backCCW,xt,Et,ft,L.id,Xe,ot,Ge.segments,L.paint,R.transform.zoom,st)}}(o,d,y,v,T):s.cd(y)?function(R,k,L,q,V){if(L.paint.get("heatmap-opacity")===0)return;const Y=R.context,{isRenderingToTexture:H,isRenderingGlobe:te}=V;if(R.style.map.terrain){for(const le of q){const _e=k.getTile(le);k.hasRenderableParent(le)||(R.renderPass==="offscreen"?lm(R,_e,L,le,te):R.renderPass==="translucent"&&j_(R,L,le,H,te))}Y.viewport.set([0,0,R.width,R.height])}else R.renderPass==="offscreen"?function(le,_e,ge,be){const Se=le.context,Re=Se.gl,Pe=le.transform,De=Wr.disabled,Be=new Sn([Re.ONE,Re.ONE],s.bf.transparent,[!0,!0,!0,!0]);(function(Ae,Ge,st){const Ye=Ae.gl;Ae.activeTexture.set(Ye.TEXTURE1),Ae.viewport.set([0,0,Ge.width/4,Ge.height/4]);let Xe=st.heatmapFbos.get(s.c2);Xe?(Ye.bindTexture(Ye.TEXTURE_2D,Xe.colorAttachment.get()),Ae.bindFramebuffer.set(Xe.framebuffer)):(Xe=Su(Ae,Ge.width/4,Ge.height/4),st.heatmapFbos.set(s.c2,Xe))})(Se,le,ge),Se.clear({color:s.bf.transparent});for(let Ae=0;Ae<be.length;Ae++){const Ge=be[Ae];if(_e.hasRenderableParent(Ge))continue;const st=_e.getTile(Ge),Ye=st.getBucket(ge);if(!Ye)continue;const Xe=Ye.programConfigurations.get(ge.id),ot=le.useProgram("heatmap",Xe),xt=Pe.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Et=Pe.getCircleRadiusCorrection();ot.draw(Se,Re.TRIANGLES,br.disabled,De,Be,or.backCCW,v_(st,Pe.zoom,ge.paint.get("heatmap-intensity"),Et),null,xt,ge.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,ge.paint,Pe.zoom,Xe)}Se.viewport.set([0,0,le.width,le.height])}(R,k,L,q):R.renderPass==="translucent"&&function(le,_e){const ge=le.context,be=ge.gl;ge.setColorMode(le.colorModeForRenderPass());const Se=_e.heatmapFbos.get(s.c2);Se&&(ge.activeTexture.set(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,Se.colorAttachment.get()),ge.activeTexture.set(be.TEXTURE1),Cu(ge,_e).bind(be.LINEAR,be.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(ge,be.TRIANGLES,br.disabled,Wr.disabled,le.colorModeForRenderPass(),or.disabled,Wf(le,_e,0,1),null,null,_e.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,_e.paint,le.transform.zoom))}(R,L)}(o,d,y,v,T):s.ce(y)?function(R,k,L,q,V){if(R.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=V,H=L.paint.get("line-opacity"),te=L.paint.get("line-width");if(H.constantOr(1)===0||te.constantOr(1)===0)return;const le=R.getDepthModeForSublayer(0,br.ReadOnly),_e=R.colorModeForRenderPass(),ge=L.paint.get("line-dasharray"),be=L.paint.get("line-pattern"),Se=be.constantOr(1),Re=L.paint.get("line-gradient"),Pe=L.getCrossfadeParameters(),De=Se?"linePattern":ge?"lineSDF":Re?"lineGradient":"line",Be=R.context,Ae=Be.gl,Ge=R.transform;let st=!0;for(const Ye of q){const Xe=k.getTile(Ye);if(Se&&!Xe.patternsLoaded())continue;const ot=Xe.getBucket(L);if(!ot)continue;const xt=ot.programConfigurations.get(L.id),Et=R.context.program.get(),ft=R.useProgram(De,xt),Vt=st||ft.program!==Et,wr=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Ye),tn=be.constantOr(null);if(tn&&Xe.imageAtlas){const vr=Xe.imageAtlas,pn=vr.patternPositions[tn.to.toString()],Yn=vr.patternPositions[tn.from.toString()];pn&&Yn&&xt.setConstantPatternPositions(pn,Yn)}const dn=Ge.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),an=Ge.getPixelScale(),Mn=Se?T_(R,Xe,L,an,Pe):ge?Ja(R,Xe,L,an,ge,Pe):Re?E_(R,Xe,L,an,ot.lineClipsArray.length):fd(R,Xe,L,an);if(Se)Be.activeTexture.set(Ae.TEXTURE0),Xe.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),xt.updatePaintBuffers(Pe);else if(ge&&(Vt||R.lineAtlas.dirty))Be.activeTexture.set(Ae.TEXTURE0),R.lineAtlas.bind(Be);else if(Re){const vr=ot.gradients[L.id];let pn=vr.texture;if(L.gradientVersion!==vr.version){let Yn=256;if(L.stepInterpolant){const si=k.getSource().maxzoom,mi=Ye.canonical.z===si?Math.ceil(1<<R.transform.maxZoom-Ye.canonical.z):1;Yn=s.ah(s.c3(ot.maxLineLength/s.$*1024*mi),256,Be.maxTextureSize)}vr.gradient=s.c4({expression:L.gradientExpression(),evaluationKey:"lineProgress",resolution:Yn,image:vr.gradient||void 0,clips:ot.lineClipsArray}),vr.texture?vr.texture.update(vr.gradient):vr.texture=new s.T(Be,vr.gradient,Ae.RGBA),vr.version=L.gradientVersion,pn=vr.texture}Be.activeTexture.set(Ae.TEXTURE0),pn.bind(L.stepInterpolant?Ae.NEAREST:Ae.LINEAR,Ae.CLAMP_TO_EDGE)}const Dn=R.stencilModeForClipping(Ye);ft.draw(Be,Ae.TRIANGLES,le,Dn,_e,or.disabled,Mn,wr,dn,L.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,L.paint,R.transform.zoom,xt,ot.layoutVertexBuffer2),st=!1}}(o,d,y,v,T):s.cf(y)?function(R,k,L,q,V){const Y=L.paint.get("fill-color"),H=L.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const{isRenderingToTexture:te}=V,le=R.colorModeForRenderPass(),_e=L.paint.get("fill-pattern"),ge=R.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&Y.constantOr(s.bf.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(R.renderPass===ge){const be=R.getDepthModeForSublayer(1,R.renderPass==="opaque"?br.ReadWrite:br.ReadOnly);Ed(R,k,L,q,be,le,!1,te)}if(R.renderPass==="translucent"&&L.paint.get("fill-antialias")){const be=R.getDepthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,br.ReadOnly);Ed(R,k,L,q,be,le,!0,te)}}(o,d,y,v,T):s.cg(y)?function(R,k,L,q,V){const Y=L.paint.get("fill-extrusion-opacity");if(Y===0)return;const{isRenderingToTexture:H}=V;if(R.renderPass==="translucent"){const te=new br(R.context.gl.LEQUAL,br.ReadWrite,R.depthRangeFor3D);if(Y!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))cm(R,k,L,q,te,Wr.disabled,Sn.disabled,H),cm(R,k,L,q,te,R.stencilModeFor3D(),R.colorModeForRenderPass(),H);else{const le=R.colorModeForRenderPass();cm(R,k,L,q,te,Wr.disabled,le,H)}}}(o,d,y,v,T):s.ch(y)?function(R,k,L,q,V){if(R.renderPass!=="offscreen"&&R.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=V,H=R.context,te=R.style.projection.useSubdivision,le=R.getDepthModeForSublayer(0,br.ReadOnly),_e=R.colorModeForRenderPass();if(R.renderPass==="offscreen")(function(ge,be,Se,Re,Pe,De,Be){const Ae=ge.context,Ge=Ae.gl;for(const st of Se){const Ye=be.getTile(st),Xe=Ye.dem;if(!Xe||!Xe.data||!Ye.needsHillshadePrepare)continue;const ot=Xe.dim,xt=Xe.stride,Et=Xe.getPixels();if(Ae.activeTexture.set(Ge.TEXTURE1),Ae.pixelStoreUnpackPremultiplyAlpha.set(!1),Ye.demTexture=Ye.demTexture||ge.getTileTexture(xt),Ye.demTexture){const Vt=Ye.demTexture;Vt.update(Et,{premultiply:!1}),Vt.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE)}else Ye.demTexture=new s.T(Ae,Et,Ge.RGBA,{premultiply:!1}),Ye.demTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE);Ae.activeTexture.set(Ge.TEXTURE0);let ft=Ye.fbo;if(!ft){const Vt=new s.T(Ae,{width:ot,height:ot,data:null},Ge.RGBA);Vt.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),ft=Ye.fbo=Ae.createFramebuffer(ot,ot,!0,!1),ft.colorAttachment.set(Vt.texture)}Ae.bindFramebuffer.set(ft.framebuffer),Ae.viewport.set([0,0,ot,ot]),ge.useProgram("hillshadePrepare").draw(Ae,Ge.TRIANGLES,Pe,De,Be,or.disabled,x_(Ye.tileID,Xe),null,null,Re.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),Ye.needsHillshadePrepare=!1}})(R,k,q,L,le,Wr.disabled,_e),H.viewport.set([0,0,R.width,R.height]);else if(R.renderPass==="translucent")if(te){const[ge,be,Se]=R.stencilConfigForOverlapTwoPass(q);Ya(R,k,L,Se,ge,le,_e,!1,Y),Ya(R,k,L,Se,be,le,_e,!0,Y)}else{const[ge,be]=R.getStencilConfigForOverlapAndUpdateStencilID(q);Ya(R,k,L,be,ge,le,_e,!1,Y)}}(o,d,y,v,T):s.ci(y)?function(R,k,L,q,V){if(R.renderPass!=="translucent"||!q.length)return;const{isRenderingToTexture:Y}=V,H=R.style.projection.useSubdivision,te=R.getDepthModeForSublayer(0,br.ReadOnly),le=R.colorModeForRenderPass();if(H){const[_e,ge,be]=R.stencilConfigForOverlapTwoPass(q);um(R,k,L,be,_e,te,le,!1,Y),um(R,k,L,be,ge,te,le,!0,Y)}else{const[_e,ge]=R.getStencilConfigForOverlapAndUpdateStencilID(q);um(R,k,L,ge,_e,te,le,!1,Y)}}(o,d,y,v,T):s.cj(y)?function(R,k,L,q,V){if(R.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!q.length)return;const{isRenderingToTexture:Y}=V,H=k.getSource(),te=R.style.projection.useSubdivision;if(H instanceof xr)Xa(R,k,L,q,null,!1,!1,H.tileCoords,H.flippedWindingOrder,Y);else if(te){const[le,_e,ge]=R.stencilConfigForOverlapTwoPass(q);Xa(R,k,L,ge,le,!1,!0,Td,!1,Y),Xa(R,k,L,ge,_e,!0,!0,Td,!1,Y)}else{const[le,_e]=R.getStencilConfigForOverlapAndUpdateStencilID(q);Xa(R,k,L,_e,le,!1,!0,Td,!1,Y)}}(o,d,y,v,T):s.ck(y)?function(R,k,L,q,V){const Y=L.paint.get("background-color"),H=L.paint.get("background-opacity");if(H===0)return;const{isRenderingToTexture:te}=V,le=R.context,_e=le.gl,ge=R.style.projection,be=R.transform,Se=be.tileSize,Re=L.paint.get("background-pattern");if(R.isPatternMissing(Re))return;const Pe=!Re&&Y.a===1&&H===1&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass!==Pe)return;const De=Wr.disabled,Be=R.getDepthModeForSublayer(0,Pe==="opaque"?br.ReadWrite:br.ReadOnly),Ae=R.colorModeForRenderPass(),Ge=R.useProgram(Re?"backgroundPattern":"background"),st=q||$e(be,{tileSize:Se,terrain:R.style.map.terrain});Re&&(le.activeTexture.set(_e.TEXTURE0),R.imageManager.bind(R.context));const Ye=L.getCrossfadeParameters();for(const Xe of st){const ot=be.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!te,applyTerrainMatrix:!0}),xt=Re?P_(H,R,Re,{tileID:Xe,tileSize:Se},Ye):C_(H,Y),Et=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Xe),ft=ge.getMeshFromTileID(le,Xe.canonical,!1,!0,"raster");Ge.draw(le,_e.TRIANGLES,Be,De,Ae,or.backCCW,xt,Et,ot,L.id,ft.vertexBuffer,ft.indexBuffer,ft.segments)}}(o,0,y,v,T):s.cl(y)&&function(R,k,L,q){const{isRenderingGlobe:V}=q,Y=R.context,H=L.implementation,te=R.style.projection,le=R.transform,_e=le.getProjectionDataForCustomLayer(V),ge={farZ:le.farZ,nearZ:le.nearZ,fov:le.fov*Math.PI/180,modelViewProjectionMatrix:le.modelViewProjectionMatrix,projectionMatrix:le.projectionMatrix,shaderData:{variantName:te.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${te.shaderPreludeCode.vertexSource}`,define:te.shaderDefine},defaultProjectionData:_e},be=H.renderingMode?H.renderingMode:"2d";if(R.renderPass==="offscreen"){const Se=H.prerender;Se&&(R.setCustomLayerDefaults(),Y.setColorMode(R.colorModeForRenderPass()),Se.call(H,Y.gl,ge),Y.setDirty(),R.setBaseState())}else if(R.renderPass==="translucent"){R.setCustomLayerDefaults(),Y.setColorMode(R.colorModeForRenderPass()),Y.setStencilMode(Wr.disabled);const Se=be==="3d"?R.getDepthModeFor3D():R.getDepthModeForSublayer(0,br.ReadOnly);Y.setDepthMode(Se),H.render(Y.gl,ge),Y.setDirty(),R.setBaseState(),Y.bindFramebuffer.set(null)}}(o,0,y,T))}saveTileTexture(o){const d=this._tileTextures[o.size[0]];d?d.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const d=this._tileTextures[o];return d&&d.length>0?d.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const d=this.imageManager.getPattern(o.from.toString()),y=this.imageManager.getPattern(o.to.toString());return!d||!y}useProgram(o,d,y=!1,v=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,R=this.style.projection,k=y?Do.projectionMercator:R.shaderPreludeCode,L=y?ks:R.shaderDefine,q=o+(d?d.cacheKey:"")+`/${y?qa:R.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[q]||(this.cache[q]=new Jf(this.context,Do[o],d,Qf[o],this._showOverdrawInspector,T,k,L,v)),this.cache[q]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:d}=this.context.gl;return this.width!==o||this.height!==d}}function Qa(w,o){let d,y=!1,v=null,T=null;const R=()=>{v=null,y&&(w.apply(T,d),v=setTimeout(R,o),y=!1)};return(...k)=>(y=!0,T=this,d=k,v||R(),v)}class Pd{constructor(o){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let y;return d.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(y=v)}),(y&&y[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(!this._isValidHash(d))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:y,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const y=d.join("/");let v=y;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${y}`);let T=window.location.hash.replace(v,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let R=window.location.href.replace(/(#.+)?$/,T);R=R.replace("&&","&"),window.history.replaceState(window.history.state,null,R)},this._updateHash=Qa(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(o){const d=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,v=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,v),R=Math.round(d.lng*T)/T,k=Math.round(d.lat*T)/T,L=this._map.getBearing(),q=this._map.getPitch();let V="";if(V+=o?`/${R}/${k}/${y}`:`${y}/${k}/${R}`,(L||q)&&(V+="/"+Math.round(10*L)/10),q&&(V+=`/${Math.round(q)}`),this._hashName){const Y=this._hashName;let H=!1;const te=window.location.hash.slice(1).split("&").map(le=>{const _e=le.split("=")[0];return _e===Y?(H=!0,`${_e}=${V}`):le}).filter(le=>le);return H||te.push(`${Y}=${V}`),`#${te.join("&")}`}return`#${V}`}_isValidHash(o){if(o.length<3||o.some(isNaN))return!1;try{new s.S(+o[2],+o[1])}catch{return!1}const d=+o[0],y=+(o[3]||0),v=+(o[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&y>=-180&&y<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const Ns={linearity:.3,easing:s.cm(0,0,.3,1)},fm=s.e({deceleration:2500,maxSpeed:1400},Ns),V_=s.e({deceleration:20,maxSpeed:1400},Ns),U_=s.e({deceleration:1e3,maxSpeed:360},Ns),G_=s.e({deceleration:1e3,maxSpeed:90},Ns),H_=s.e({deceleration:1e3,maxSpeed:360},Ns);class J_{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:P.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,d=P.now();for(;o.length>0&&d-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)d.zoom+=T.zoomDelta||0,d.bearing+=T.bearingDelta||0,d.pitch+=T.pitchDelta||0,d.roll+=T.rollDelta||0,T.panDelta&&d.pan._add(T.panDelta),T.around&&(d.around=T.around),T.pinchAround&&(d.pinchAround=T.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(d.pan.mag()){const T=Kl(d.pan.mag(),y,s.e({},fm,o||{})),R=d.pan.mult(T.amount/d.pan.mag()),k=this._map.cameraHelper.handlePanInertia(R,this._map.transform);v.center=k.easingCenter,v.offset=k.easingOffset,zo(v,T)}if(d.zoom){const T=Kl(d.zoom,y,V_);v.zoom=this._map.transform.zoom+T.amount,zo(v,T)}if(d.bearing){const T=Kl(d.bearing,y,U_);v.bearing=this._map.transform.bearing+s.ah(T.amount,-179,179),zo(v,T)}if(d.pitch){const T=Kl(d.pitch,y,G_);v.pitch=this._map.transform.pitch+T.amount,zo(v,T)}if(d.roll){const T=Kl(d.roll,y,H_);v.roll=this._map.transform.roll+s.ah(T.amount,-179,179),zo(v,T)}if(v.zoom||v.bearing){const T=d.pinchAround===void 0?d.around:d.pinchAround;v.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),s.e(v,{noMoveStart:!0})}}function zo(w,o){(!w.duration||w.duration<o.duration)&&(w.duration=o.duration,w.easing=o.easing)}function Kl(w,o,d){const{maxSpeed:y,linearity:v,deceleration:T}=d,R=s.ah(w*v/(o/1e3),-y,y),k=Math.abs(R)/(T*v);return{easing:d.easing,duration:1e3*k,amount:R*(k/2)}}class ro extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,y,v={}){y=y instanceof MouseEvent?y:new MouseEvent(o,y);const T=A.mousePos(d.getCanvas(),y),R=d.unproject(T);super(o,s.e({point:T,lngLat:R,originalEvent:y},v)),this._defaultPrevented=!1,this.target=d}}class Yl extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,y){const v=o==="touchend"?y.changedTouches:y.touches,T=A.touchPos(d.getCanvasContainer(),v),R=T.map(L=>d.unproject(L)),k=T.reduce((L,q,V,Y)=>L.add(q.div(Y.length)),new s.P(0,0));super(o,{points:T,point:k,lngLats:R,lngLat:d.unproject(k),originalEvent:y}),this._defaultPrevented=!1}}class mm extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,y){super(o,{originalEvent:y}),this._defaultPrevented=!1}}class W_{constructor(o,d){this._map=o,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new mm(o.type,this._map,o))}mousedown(o,d){return this._mousedownPos=d,this._firePreventable(new ro(o.type,this._map,o))}mouseup(o){this._map.fire(new ro(o.type,this._map,o))}click(o,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new ro(o.type,this._map,o))}dblclick(o){return this._firePreventable(new ro(o.type,this._map,o))}mouseover(o){this._map.fire(new ro(o.type,this._map,o))}mouseout(o){this._map.fire(new ro(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Yl(o.type,this._map,o))}touchmove(o){this._map.fire(new Yl(o.type,this._map,o))}touchend(o){this._map.fire(new Yl(o.type,this._map,o))}touchcancel(o){this._map.fire(new Yl(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Z_{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new ro(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ro("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new ro(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xl{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.screenPointToLocation(s.P.convert(o),this._map.terrain)}}class gm{constructor(o,d){this._map=o,this._tr=new Xl(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,d){this.isEnabled()&&o.shiftKey&&o.button===0&&(A.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(o,d){if(!this._active)return;const y=d;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=y,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const T=Math.min(v.x,y.x),R=Math.max(v.x,y.x),k=Math.min(v.y,y.y),L=Math.max(v.y,y.y);A.setTransform(this._box,`translate(${T}px,${k}px)`),this._box.style.width=R-T+"px",this._box.style.height=L-k+"px"}mouseupWindow(o,d){if(!this._active||o.button!==0)return;const y=this._startPos,v=d;if(this.reset(),A.suppressClick(),y.x!==v.x||y.y!==v.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:o})),{cameraAnimation:T=>T.fitScreenCoordinates(y,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,d){return this._map.fire(new s.l(o,{originalEvent:d}))}}function Ql(w,o){if(w.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${o.length}`);const d={};for(let y=0;y<w.length;y++)d[w[y].identifier]=o[y];return d}class K_{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,d,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),y.length===this.numTouches&&(this.centroid=function(v){const T=new s.P(0,0);for(const R of v)T._add(R);return T.div(v.length)}(d),this.touches=Ql(y,d)))}touchmove(o,d,y){if(this.aborted||!this.centroid)return;const v=Ql(y,d);for(const T in this.touches){const R=v[T];(!R||R.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(o,d,y){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class no{constructor(o){this.singleTap=new K_(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,d,y){this.singleTap.touchstart(o,d,y)}touchmove(o,d,y){this.singleTap.touchmove(o,d,y)}touchend(o,d,y){const v=this.singleTap.touchend(o,d,y);if(v){const T=o.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(v)<30;if(T&&R||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class jo{constructor(o){this._tr=new Xl(o),this._zoomIn=new no({numTouches:1,numTaps:2}),this._zoomOut=new no({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,d,y){this._zoomIn.touchstart(o,d,y),this._zoomOut.touchstart(o,d,y)}touchmove(o,d,y){this._zoomIn.touchmove(o,d,y),this._zoomOut.touchmove(o,d,y)}touchend(o,d,y){const v=this._zoomIn.touchend(o,d,y),T=this._zoomOut.touchend(o,d,y),R=this._tr;return v?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:R.zoom+1,around:R.unproject(v)},{originalEvent:o})}):T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:R.zoom-1,around:R.unproject(T)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ec{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const d=this._moveFunction(...o);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(o,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,d){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const v=Array.isArray(d)?d[0]:d;return!this._moved&&v.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(y,v))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&A.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Bo=0,tc=2,Pw={[Bo]:1,[tc]:2};class Ru{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const d=A.mouseButton(o);this._eventButton=d}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(d,y){const v=Pw[y];return d.buttons===void 0||(d.buttons&v)!==v}(o,this._eventButton)}isValidEndEvent(o){return A.mouseButton(o)===this._eventButton}}class Aw{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}class Rw{constructor(o=new Ru({checkCorrectEvent:()=>!0}),d=new Aw){this.mouseMoveStateManager=o,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(o,d,y){return o instanceof MouseEvent?d(o):typeof TouchEvent<"u"&&o instanceof TouchEvent?y(o):void 0}startMove(o){this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(o){this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(o){return this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(o){return this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(o){return this._executeRelevantHandler(o,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}const Iu=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=o=>{o.preventDefault()}};class Mu{constructor(o,d){this._clickTolerance=o.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(o){return o<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(o,d,y){return this._calculateTransform(o,d,y)}touchmove(o,d,y){if(this._active){if(!this._shouldBePrevented(y.length))return o.preventDefault(),this._calculateTransform(o,d,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",o)}}touchend(o,d,y){this._calculateTransform(o,d,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,d,y){y.length>0&&(this._active=!0);const v=Ql(y,d),T=new s.P(0,0),R=new s.P(0,0);let k=0;for(const q in v){const V=v[q],Y=this._touches[q];Y&&(T._add(V),R._add(V.sub(Y)),k++,v[q]=V)}if(this._touches=v,this._shouldBePrevented(k)||!R.mag())return;const L=R.div(k);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(k),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,d,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([d[0],d[1]]))}touchmove(o,d,y){if(!this._firstTwoTouches)return;o.preventDefault();const[v,T]=this._firstTwoTouches,R=zt(y,d,v),k=zt(y,d,T);if(!R||!k)return;const L=this._aroundCenter?null:R.add(k).div(2);return this._move([R,k],L,o)}touchend(o,d,y){if(!this._firstTwoTouches)return;const[v,T]=this._firstTwoTouches,R=zt(y,d,v),k=zt(y,d,T);R&&k||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function zt(w,o,d){for(let y=0;y<w.length;y++)if(w[y].identifier===d)return o[y]}function ym(w,o){return Math.log(w/o)/Math.LN2}class Ad extends qo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,d){const y=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ym(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ym(this._distance,y),pinchAround:d}}}function _m(w,o){return 180*w.angleWith(o)/Math.PI}class rc extends qo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,d,y){const v=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:_m(this._vector,v),pinchAround:d}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const d=25/(Math.PI*this._minDiameter)*360,y=_m(o,this._startVector);return Math.abs(y)<d}}function el(w){return Math.abs(w.y)>Math.abs(w.x)}class Rd extends qo{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,d,y){super.touchstart(o,d,y),this._currentTouchCount=y.length}_start(o){this._lastPoints=o,el(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,d,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=o[0].sub(this._lastPoints[0]),T=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,T,y.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(v.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(o,d,y){if(this._valid!==void 0)return this._valid;const v=o.mag()>=2,T=d.mag()>=2;if(!v&&!T)return;if(!v||!T)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const R=o.y>0==d.y>0;return el(o)&&el(d)&&R}}const jr={panStep:100,bearingStep:15,pitchStep:10};class Id{constructor(o){this._tr=new Xl(o);const d=jr;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let d=0,y=0,v=0,T=0,R=0;switch(o.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:o.shiftKey?y=-1:(o.preventDefault(),T=-1);break;case 39:o.shiftKey?y=1:(o.preventDefault(),T=1);break;case 38:o.shiftKey?v=1:(o.preventDefault(),R=-1);break;case 40:o.shiftKey?v=-1:(o.preventDefault(),R=1);break;default:return}return this._rotationDisabled&&(y=0,v=0),{cameraAnimation:k=>{const L=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Iw,zoom:d?Math.round(L.zoom)+d*(o.shiftKey?2:1):L.zoom,bearing:L.bearing+y*this._bearingStep,pitch:L.pitch+v*this._pitchStep,offset:[-T*this._panStep,-R*this._panStep],center:L.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Iw(w){return w*(2-w)}const Md=4.000244140625,Mw=1/450;class Y_{constructor(o,d){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=o,this._tr=new Xl(o),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Mw}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(o){return!!this._map.cooperativeGestures.isEnabled()&&!(o.ctrlKey||this._map.cooperativeGestures.isBypassed(o))}wheel(o){if(!this.isEnabled())return;if(this._shouldBePrevented(o))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",o);let d=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const y=P.now(),v=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,d!==0&&d%Md==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(v*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),o.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=o,this._delta-=d,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=A.mousePos(this._map.getCanvas(),o),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(s.S.convert(y.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const k=o.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Md?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&L!==0&&(L=1/L);const q=typeof this._targetZoom!="number"?o.scale:s.af(this._targetZoom);this._targetZoom=o.getConstrained(o.getCameraLngLat(),s.ak(q*L)).zoom,this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom!="number"?o.zoom:this._targetZoom,y=this._startZoom,v=this._easing;let T,R=!1;if(this._type==="wheel"&&y&&v){const k=P.now()-this._lastWheelEventTime,L=Math.min((k+5)/200,1),q=v(L);T=s.C.number(y,d,q),L<1?this._frameId||(this._frameId=!0):R=!0}else T=d,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!R,zoomDelta:T-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let d=s.co;if(this._prevEase){const y=this._prevEase,v=(P.now()-y.start)/y.duration,T=y.easing(v+.01)-y.easing(v),R=.27/Math.sqrt(T*T+1e-4)*.01,k=Math.sqrt(.0729-R*R);d=s.cm(R,k,.25,1)}return this._prevEase={start:P.now(),duration:o,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class bm{constructor(o,d){this._clickZoom=o,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vm{constructor(o){this._tr=new Xl(o),this.reset()}reset(){this._active=!1}dblclick(o,d){return o.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class X_{constructor(){this._tap=new no({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,d,y){if(!this._swipePoint)if(this._tapTime){const v=d[0],T=o.timeStamp-this._tapTime<500,R=this._tapPoint.dist(v)<30;T&&R?y.length>0&&(this._swipePoint=v,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(o,d,y)}touchmove(o,d,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const v=d[0],T=v.y-this._swipePoint.y;return this._swipePoint=v,o.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(o,d,y)}touchend(o,d,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const v=this._tap.touchend(o,d,y);v&&(this._tapTime=o.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Q_{constructor(o,d,y){this._el=o,this._mousePan=d,this._touchPan=y}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xm{constructor(o,d,y,v){this._pitchWithRotate=o.pitchWithRotate,this._rollEnabled=o.rollEnabled,this._mouseRotate=d,this._mousePitch=y,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class e0{constructor(o,d,y,v){this._el=o,this._touchZoom=d,this._touchRotate=y,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class t0{constructor(o,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=o,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",o);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=d,this._container.appendChild(v);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=y,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(o){return o[this._bypassKey]}notifyGestureBlocked(o,d){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:o,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const $o=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class yn extends s.l{}function nc(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class wm{constructor(o,d){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,T)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const R=v.type==="renderFrame"?void 0:v,k={needsRenderFrame:!1},L={},q={};for(const{handlerName:H,handler:te,allowed:le}of this._handlers){if(!te.isEnabled())continue;let _e;if(this._blockedByActive(q,le,H))te.reset();else if(te[T||v.type]){if(s.cp(v,T||v.type)){const ge=A.mousePos(this._map.getCanvas(),v);_e=te[T||v.type](v,ge)}else if(s.cq(v,T||v.type)){const ge=this._getMapTouches(v.touches),be=A.touchPos(this._map.getCanvas(),ge);_e=te[T||v.type](v,be,ge)}else s.cr(T||v.type)||(_e=te[T||v.type](v));this.mergeHandlerResult(k,L,_e,H,R),_e&&_e.needsRenderFrame&&this._triggerRenderFrame()}(_e||te.isActive())&&(q[H]=te)}const V={};for(const H in this._previousActiveHandlers)q[H]||(V[H]=R);this._previousActiveHandlers=q,(Object.keys(V).length||nc(k))&&(this._changes.push([k,L,V]),this._triggerRenderFrame()),(Object.keys(q).length||nc(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=k;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new J_(o),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,T,R]of this._listeners)A.addEventListener(v,T,v===document?this.handleWindowEvent:this.handleEvent,R)}destroy(){for(const[o,d,y]of this._listeners)A.removeEventListener(o,d,o===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(o){const d=this._map,y=d.getCanvasContainer();this._add("mapEvent",new W_(d,o));const v=d.boxZoom=new gm(d,o);this._add("boxZoom",v),o.interactive&&o.boxZoom&&v.enable();const T=d.cooperativeGestures=new t0(d,o.cooperativeGestures);this._add("cooperativeGestures",T),o.cooperativeGestures&&T.enable();const R=new jo(d),k=new vm(d);d.doubleClickZoom=new bm(k,R),this._add("tapZoom",R),this._add("clickZoom",k),o.interactive&&o.doubleClickZoom&&d.doubleClickZoom.enable();const L=new X_;this._add("tapDragZoom",L);const q=d.touchPitch=new Rd(d);this._add("touchPitch",q),o.interactive&&o.touchPitch&&d.touchPitch.enable(o.touchPitch);const V=()=>d.project(d.getCenter()),Y=function({enable:Pe,clickTolerance:De,aroundCenter:Be=!0,minPixelCenterThreshold:Ae=100,rotateDegreesPerPixelMoved:Ge=.8},st){const Ye=new Ru({checkCorrectEvent:Xe=>A.mouseButton(Xe)===0&&Xe.ctrlKey||A.mouseButton(Xe)===2&&!Xe.ctrlKey});return new ec({clickTolerance:De,move:(Xe,ot)=>{const xt=st();if(Be&&Math.abs(xt.y-Xe.y)>Ae)return{bearingDelta:s.cn(new s.P(Xe.x,ot.y),ot,xt)};let Et=(ot.x-Xe.x)*Ge;return Be&&ot.y<xt.y&&(Et=-Et),{bearingDelta:Et}},moveStateManager:Ye,enable:Pe,assignEvents:Iu})}(o,V),H=function({enable:Pe,clickTolerance:De,pitchDegreesPerPixelMoved:Be=-.5}){const Ae=new Ru({checkCorrectEvent:Ge=>A.mouseButton(Ge)===0&&Ge.ctrlKey||A.mouseButton(Ge)===2});return new ec({clickTolerance:De,move:(Ge,st)=>({pitchDelta:(st.y-Ge.y)*Be}),moveStateManager:Ae,enable:Pe,assignEvents:Iu})}(o),te=function({enable:Pe,clickTolerance:De,rollDegreesPerPixelMoved:Be=.3},Ae){const Ge=new Ru({checkCorrectEvent:st=>A.mouseButton(st)===2&&st.ctrlKey});return new ec({clickTolerance:De,move:(st,Ye)=>{const Xe=Ae();let ot=(Ye.x-st.x)*Be;return Ye.y<Xe.y&&(ot=-ot),{rollDelta:ot}},moveStateManager:Ge,enable:Pe,assignEvents:Iu})}(o,V);d.dragRotate=new xm(o,Y,H,te),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",H,["mouseRotate","mouseRoll"]),this._add("mouseRoll",te,["mousePitch"]),o.interactive&&o.dragRotate&&d.dragRotate.enable();const le=function({enable:Pe,clickTolerance:De}){const Be=new Ru({checkCorrectEvent:Ae=>A.mouseButton(Ae)===0&&!Ae.ctrlKey});return new ec({clickTolerance:De,move:(Ae,Ge)=>({around:Ge,panDelta:Ge.sub(Ae)}),activateOnStart:!0,moveStateManager:Be,enable:Pe,assignEvents:Iu})}(o),_e=new Mu(o,d);d.dragPan=new Q_(y,le,_e),this._add("mousePan",le),this._add("touchPan",_e,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&d.dragPan.enable(o.dragPan);const ge=new rc,be=new Ad;d.touchZoomRotate=new e0(y,be,ge,L),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",be,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&d.touchZoomRotate.enable(o.touchZoomRotate);const Se=d.scrollZoom=new Y_(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Se,["mousePan"]),o.interactive&&o.scrollZoom&&d.scrollZoom.enable(o.scrollZoom);const Re=d.keyboard=new Id(d);this._add("keyboard",Re),o.interactive&&o.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new Z_(d))}_add(o,d,y){this._handlers.push({handlerName:o,handler:d,allowed:y}),this._handlersById[o]=d}stop(o){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!$o(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,d,y){for(const v in o)if(v!==y&&(!d||d.indexOf(v)<0))return!0;return!1}_getMapTouches(o){const d=[];for(const y of o)this._el.contains(y.target)&&d.push(y);return d}mergeHandlerResult(o,d,y,v,T){if(!y)return;s.e(o,y);const R={handlerName:v,originalEvent:y.originalEvent||T};y.zoomDelta!==void 0&&(d.zoom=R),y.panDelta!==void 0&&(d.drag=R),y.rollDelta!==void 0&&(d.roll=R),y.pitchDelta!==void 0&&(d.pitch=R),y.bearingDelta!==void 0&&(d.rotate=R)}_applyChanges(){const o={},d={},y={};for(const[v,T,R]of this._changes)v.panDelta&&(o.panDelta=(o.panDelta||new s.P(0,0))._add(v.panDelta)),v.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(o.rollDelta=(o.rollDelta||0)+v.rollDelta),v.around!==void 0&&(o.around=v.around),v.pinchAround!==void 0&&(o.pinchAround=v.pinchAround),v.noInertia&&(o.noInertia=v.noInertia),s.e(d,T),s.e(y,R);this._updateMapTransform(o,d,y),this._changes=[]}_updateMapTransform(o,d,y){const v=this._map,T=v._getTransformForUpdate(),R=v.terrain;if(!(nc(o)||R&&this._terrainMovement))return this._fireEvents(d,y,!0);v._stop(!0);let{panDelta:k,zoomDelta:L,bearingDelta:q,pitchDelta:V,rollDelta:Y,around:H,pinchAround:te}=o;te!==void 0&&(H=te),H=H||v.transform.centerPoint,R&&!T.isPointOnMapSurface(H)&&(H=T.centerPoint);const le={panDelta:k,zoomDelta:L,rollDelta:Y,pitchDelta:V,bearingDelta:q,around:H};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(H)&&(H=T.centerPoint);const _e=H.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(k?H.sub(k):H);R?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(le,T),this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?T.setCenter(T.screenPointToLocation(T.centerPoint.sub(k))):this._map.cameraHelper.handleMapControlsPan(le,T,_e):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(le,T,_e))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(le,T),this._map.cameraHelper.handleMapControlsPan(le,T,_e)),v._applyUpdatedTransform(T),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(d,y,!0)}_fireEvents(o,d,y){const v=$o(this._eventsInProgress),T=$o(o),R={};for(const Y in o){const{originalEvent:H}=o[Y];this._eventsInProgress[Y]||(R[`${Y}start`]=H),this._eventsInProgress[Y]=o[Y]}!v&&T&&this._fireEvent("movestart",T.originalEvent);for(const Y in R)this._fireEvent(Y,R[Y]);T&&this._fireEvent("move",T.originalEvent);for(const Y in o){const{originalEvent:H}=o[Y];this._fireEvent(Y,H)}const k={};let L;for(const Y in this._eventsInProgress){const{handlerName:H,originalEvent:te}=this._eventsInProgress[Y];this._handlersById[H].isActive()||(delete this._eventsInProgress[Y],L=d[H]||te,k[`${Y}end`]=L)}for(const Y in k)this._fireEvent(Y,k[Y]);const q=$o(this._eventsInProgress),V=(v||T)&&!q;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Y=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Y.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Y)}if(y&&V){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;!Y||!Y.essential&&P.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:L})),H(this._map.getBearing())&&this._map.resetNorth()):(H(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:L})),this._updatingCamera=!1}}_fireEvent(o,d){this._map.fire(new s.l(o,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new yn("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class r0 extends s.E{constructor(o,d,y){super(),this._renderFrameCallback=()=>{const v=Math.min((P.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=y.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(o,d){o.apply(this.transform),this.transform=o,this.cameraHelper=d}getCenter(){return new s.S(this.transform.center.lng,this.transform.center.lat)}setCenter(o,d){return this.jumpTo({center:o},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(o,d){return this.jumpTo({elevation:o},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(o){this._centerClampedToGround=o}panBy(o,d,y){return o=s.P.convert(o).mult(-1),this.panTo(this.transform.center,s.e({offset:o},d),y)}panTo(o,d,y){return this.easeTo(s.e({center:o},d),y)}getZoom(){return this.transform.zoom}setZoom(o,d){return this.jumpTo({zoom:o},d),this}zoomTo(o,d,y){return this.easeTo(s.e({zoom:o},d),y)}zoomIn(o,d){return this.zoomTo(this.getZoom()+1,o,d),this}zoomOut(o,d){return this.zoomTo(this.getZoom()-1,o,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(o,d){return o!=this.transform.fov&&(this.transform.setFov(o),this.fire(new s.l("movestart",d)).fire(new s.l("move",d)).fire(new s.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(o,d){return this.jumpTo({bearing:o},d),this}getPadding(){return this.transform.padding}setPadding(o,d){return this.jumpTo({padding:o},d),this}rotateTo(o,d,y){return this.easeTo(s.e({bearing:o},d),y)}resetNorth(o,d){return this.rotateTo(0,s.e({duration:1e3},o),d),this}resetNorthPitch(o,d){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},o),d),this}snapToNorth(o,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,d):this}getPitch(){return this.transform.pitch}setPitch(o,d){return this.jumpTo({pitch:o},d),this}getRoll(){return this.transform.roll}setRoll(o,d){return this.jumpTo({roll:o},d),this}cameraForBounds(o,d){o=lt.convert(o).adjustAntiMeridian();const y=d&&d.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),y,d)}_cameraForBoxAndBearing(o,d,y,v){const T={top:0,bottom:0,right:0,left:0};if(typeof(v=s.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const q=v.padding;v.padding={top:q,bottom:q,right:q,left:q}}const R=s.e(T,v.padding);v.padding=R;const k=this.transform,L=new lt(o,d);return this.cameraHelper.cameraForBoxAndBearing(v,R,L,y,k)}fitBounds(o,d,y){return this._fitInternal(this.cameraForBounds(o,d),d,y)}fitScreenCoordinates(o,d,y,v,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(o)),this.transform.screenPointToLocation(s.P.convert(d)),y,v),v,T)}_fitInternal(o,d,y){return o?(delete(d=s.e(o,d)).padding,d.linear?this.easeTo(d,y):this.flyTo(d,y)):this}jumpTo(o,d){this.stop();const y=this._getTransformForUpdate();let v=!1,T=!1,R=!1;const k=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,o);const L=y.zoom!==k;return"elevation"in o&&y.elevation!==+o.elevation&&y.setElevation(+o.elevation),"bearing"in o&&y.bearing!==+o.bearing&&(v=!0,y.setBearing(+o.bearing)),"pitch"in o&&y.pitch!==+o.pitch&&(T=!0,y.setPitch(+o.pitch)),"roll"in o&&y.roll!==+o.roll&&(R=!0,y.setRoll(+o.roll)),o.padding==null||y.isPaddingEqual(o.padding)||y.setPadding(o.padding),this._applyUpdatedTransform(y),this.fire(new s.l("movestart",d)).fire(new s.l("move",d)),L&&this.fire(new s.l("zoomstart",d)).fire(new s.l("zoom",d)).fire(new s.l("zoomend",d)),v&&this.fire(new s.l("rotatestart",d)).fire(new s.l("rotate",d)).fire(new s.l("rotateend",d)),T&&this.fire(new s.l("pitchstart",d)).fire(new s.l("pitch",d)).fire(new s.l("pitchend",d)),R&&this.fire(new s.l("rollstart",d)).fire(new s.l("roll",d)).fire(new s.l("rollend",d)),this.fire(new s.l("moveend",d))}calculateCameraOptionsFromTo(o,d,y,v=0){const T=s.a1.fromLngLat(o,d),R=s.a1.fromLngLat(y,v),k=R.x-T.x,L=R.y-T.y,q=R.z-T.z,V=Math.hypot(k,L,q);if(V===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(k,L),H=s.ak(this.transform.cameraToCenterDistance/V/this.transform.tileSize),te=180*Math.atan2(k,-L)/Math.PI;let le=180*Math.acos(Y/V)/Math.PI;return le=q<0?90-le:90+le,{center:R.toLngLat(),elevation:v,zoom:H,pitch:le,bearing:te}}calculateCameraOptionsFromCameraLngLatAltRotation(o,d,y,v,T){const R=this.transform.calculateCenterFromCameraLngLatAlt(o,d,y,v);return{center:R.center,elevation:R.elevation,zoom:R.zoom,bearing:y,pitch:v,roll:T}}easeTo(o,d){this._stop(!1,o.easeId),((o=s.e({offset:[0,0],duration:500,easing:s.co},o)).animate===!1||!o.essential&&P.prefersReducedMotion)&&(o.duration=0);const y=this._getTransformForUpdate(),v=this.getBearing(),T=y.pitch,R=y.roll,k="bearing"in o?this._normalizeBearing(o.bearing,v):v,L="pitch"in o?+o.pitch:T,q="roll"in o?this._normalizeBearing(o.roll,R):R,V="padding"in o?o.padding:y.padding,Y=s.P.convert(o.offset);let H,te;o.around&&(H=s.S.convert(o.around),te=y.locationToScreenPoint(H));const le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},_e=this.cameraHelper.handleEaseTo(y,{bearing:k,pitch:L,roll:q,padding:V,around:H,aroundPoint:te,offsetAsPoint:Y,offset:o.offset,zoom:o.zoom,center:o.center});return this._rotating=this._rotating||v!==k,this._pitching=this._pitching||L!==T,this._rolling=this._rolling||q!==R,this._padding=!y.isPaddingEqual(V),this._zooming=this._zooming||_e.isZooming,this._easeId=o.easeId,this._prepareEase(d,o.noMoveStart,le),this.terrain&&this._prepareElevation(_e.elevationCenter),this._ease(ge=>{_e.easeFunc(ge),this.terrain&&!o.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},ge=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(d,ge)},o),this}_prepareEase(o,d,y={}){this._moving=!0,d||y.moving||this.fire(new s.l("movestart",o)),this._zooming&&!y.zooming&&this.fire(new s.l("zoomstart",o)),this._rotating&&!y.rotating&&this.fire(new s.l("rotatestart",o)),this._pitching&&!y.pitching&&this.fire(new s.l("pitchstart",o)),this._rolling&&!y.rolling&&this.fire(new s.l("rollstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&d!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(y-(d-(y*o+this._elevationStart))/(1-o)),this._elevationTarget=d}this.transform.setElevation(s.C.number(this._elevationStart,this._elevationTarget,o))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(o){if(!this.terrain&&o.elevation>=0&&o.pitch<=90)return{};const d=o.getCameraLngLat(),y=o.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(d,o.zoom):0;if(y<v){const T=this.calculateCameraOptionsFromTo(d,v,o.center,o.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(o){const d=[];if(d.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&d.push(v=>this.transformCameraUpdate(v)),!d.length)return;const y=o.clone();for(const v of d){const T=y.clone(),{center:R,zoom:k,roll:L,pitch:q,bearing:V,elevation:Y}=v(T);R&&T.setCenter(R),Y!==void 0&&T.setElevation(Y),k!==void 0&&T.setZoom(k),L!==void 0&&T.setRoll(L),q!==void 0&&T.setPitch(q),V!==void 0&&T.setBearing(V),y.apply(T)}this.transform.apply(y)}_fireMoveEvents(o){this.fire(new s.l("move",o)),this._zooming&&this.fire(new s.l("zoom",o)),this._rotating&&this.fire(new s.l("rotate",o)),this._pitching&&this.fire(new s.l("pitch",o)),this._rolling&&this.fire(new s.l("roll",o))}_afterEase(o,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const y=this._zooming,v=this._rotating,T=this._pitching,R=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new s.l("zoomend",o)),v&&this.fire(new s.l("rotateend",o)),T&&this.fire(new s.l("pitchend",o)),R&&this.fire(new s.l("rollend",o)),this.fire(new s.l("moveend",o))}flyTo(o,d){if(!o.essential&&P.prefersReducedMotion){const ot=s.Q(o,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(ot,d)}this.stop(),o=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.co},o);const y=this._getTransformForUpdate(),v=y.bearing,T=y.pitch,R=y.roll,k=y.padding,L="bearing"in o?this._normalizeBearing(o.bearing,v):v,q="pitch"in o?+o.pitch:T,V="roll"in o?this._normalizeBearing(o.roll,R):R,Y="padding"in o?o.padding:y.padding,H=s.P.convert(o.offset);let te=y.centerPoint.add(H);const le=y.screenPointToLocation(te),_e=this.cameraHelper.handleFlyTo(y,{bearing:L,pitch:q,roll:V,padding:Y,locationAtOffset:le,offsetAsPoint:H,center:o.center,minZoom:o.minZoom,zoom:o.zoom});let ge=o.curve;const be=Math.max(y.width,y.height),Se=be/_e.scaleOfZoom,Re=_e.pixelPathLength;typeof _e.scaleOfMinZoom=="number"&&(ge=Math.sqrt(be/_e.scaleOfMinZoom/Re*2));const Pe=ge*ge;function De(ot){const xt=(Se*Se-be*be+(ot?-1:1)*Pe*Pe*Re*Re)/(2*(ot?Se:be)*Pe*Re);return Math.log(Math.sqrt(xt*xt+1)-xt)}function Be(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Ae(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const Ge=De(!1);let st=function(ot){return Ae(Ge)/Ae(Ge+ge*ot)},Ye=function(ot){return be*((Ae(Ge)*(Be(xt=Ge+ge*ot)/Ae(xt))-Be(Ge))/Pe)/Re;var xt},Xe=(De(!0)-Ge)/ge;if(Math.abs(Re)<2e-6||!isFinite(Xe)){if(Math.abs(be-Se)<1e-6)return this.easeTo(o,d);const ot=Se<be?-1:1;Xe=Math.abs(Math.log(Se/be))/ge,Ye=()=>0,st=xt=>Math.exp(ot*ge*xt)}return o.duration="duration"in o?+o.duration:1e3*Xe/("screenSpeed"in o?+o.screenSpeed/ge:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=v!==L,this._pitching=q!==T,this._rolling=V!==R,this._padding=!y.isPaddingEqual(Y),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(_e.targetCenter),this._ease(ot=>{const xt=ot*Xe,Et=1/st(xt),ft=Ye(xt);this._rotating&&y.setBearing(s.C.number(v,L,ot)),this._pitching&&y.setPitch(s.C.number(T,q,ot)),this._rolling&&y.setRoll(s.C.number(R,V,ot)),this._padding&&(y.interpolatePadding(k,Y,ot),te=y.centerPoint.add(H)),_e.easeFunc(ot,Et,ft,te),this.terrain&&!o.freezeElevation&&this._updateElevation(ot),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},()=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,d){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,d)}return o||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(o,d,y){y.animate===!1||y.duration===0?(o(1),d()):(this._easeStart=P.now(),this._easeOptions=y,this._onEaseFrame=o,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,d){o=s.aO(o,-180,180);const y=Math.abs(o-d);return Math.abs(o-360-d)<y&&(o-=360),Math.abs(o+360-d)<y&&(o+=360),o}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(s.S.convert(o),this.transform.tileZoom):null}}const Em={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Tm{constructor(o=Em){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,d){const y=this._map._getUIString(`AttributionControl.${d}`);o.title=y,o.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const d=this._map.style.sourceCaches;for(const v in d){const T=d[v];if(T.used||T.usedForTerrain){const R=T.getSource();R.attribution&&o.indexOf(R.attribution)<0&&o.push(R.attribution)}}o=o.filter(v=>String(v).trim()),o.sort((v,T)=>v.length-T.length),o=o.filter((v,T)=>{for(let R=T+1;R<o.length;R++)if(o[R].indexOf(v)>=0)return!1;return!0});const y=o.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,o.length?(this._innerContainer.innerHTML=A.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class n0{constructor(o={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const y=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const d=A.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class _s{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const d=++this._id;return this._queue.push({callback:o,id:d,cancelled:!1}),d}remove(o){const d=this._currentlyRunning,y=d?this._queue.concat(d):this._queue;for(const v of y)if(v.id===o)return void(v.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const y of d)if(!y.cancelled&&(y.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Od=s.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Gt extends s.E{constructor(o){super(),this._lastTilesetChange=P.now(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=o._source.tileSize*2**this.deltaZoom,o.usedForTerrain=!0,o.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,d){this.sourceCache.update(o,d),this._renderableTilesKeys=[];const y={};for(const v of $e(o,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))y[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),s.bY(v.terrainRttPosMatrix32f,0,s.$,s.$,0,0,1),this._tiles[v.key]=new Yr(v,this.tileSize),this._lastTilesetChange=P.now());for(const v in this._tiles)y[v]||delete this._tiles[v]}freeRtt(o){for(const d in this._tiles){const y=this._tiles[d];(!o||y.tileID.equals(o)||y.tileID.isChildOf(o)||o.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o,d){return d?this._getTerrainCoordsForTileRanges(o,d):this._getTerrainCoordsForRegularTile(o)}_getTerrainCoordsForRegularTile(o){const d={};for(const y of this._renderableTilesKeys){const v=this._tiles[y].tileID,T=o.clone(),R=s.ba();if(v.canonical.equals(o.canonical))s.bY(R,0,s.$,s.$,0,0,1);else if(v.canonical.isChildOf(o.canonical)){const k=v.canonical.z-o.canonical.z,L=v.canonical.x-(v.canonical.x>>k<<k),q=v.canonical.y-(v.canonical.y>>k<<k),V=s.$>>k;s.bY(R,0,V,V,0,0,1),s.M(R,R,[-L*V,-q*V,0])}else{if(!o.canonical.isChildOf(v.canonical))continue;{const k=o.canonical.z-v.canonical.z,L=o.canonical.x-(o.canonical.x>>k<<k),q=o.canonical.y-(o.canonical.y>>k<<k),V=s.$>>k;s.bY(R,0,s.$,s.$,0,0,1),s.M(R,R,[L*V,q*V,0]),s.N(R,R,[1/2**k,1/2**k,0])}}T.terrainRttPosMatrix32f=new Float32Array(R),d[y]=T}return d}_getTerrainCoordsForTileRanges(o,d){const y={};for(const v of this._renderableTilesKeys){const T=this._tiles[v].tileID;if(!this._isWithinTileRanges(T,d))continue;const R=o.clone(),k=s.ba();if(T.canonical.z===o.canonical.z){const L=o.canonical.x-T.canonical.x,q=o.canonical.y-T.canonical.y;s.bY(k,0,s.$,s.$,0,0,1),s.M(k,k,[L*s.$,q*s.$,0])}else if(T.canonical.z>o.canonical.z){const L=T.canonical.z-o.canonical.z,q=T.canonical.x-(T.canonical.x>>L<<L),V=T.canonical.y-(T.canonical.y>>L<<L),Y=o.canonical.x-(T.canonical.x>>L),H=o.canonical.y-(T.canonical.y>>L),te=s.$>>L;s.bY(k,0,te,te,0,0,1),s.M(k,k,[-q*te+Y*s.$,-V*te+H*s.$,0])}else{const L=o.canonical.z-T.canonical.z,q=o.canonical.x-(o.canonical.x>>L<<L),V=o.canonical.y-(o.canonical.y>>L<<L),Y=(o.canonical.x>>L)-T.canonical.x,H=(o.canonical.y>>L)-T.canonical.y,te=s.$<<L;s.bY(k,0,te,te,0,0,1),s.M(k,k,[q*s.$+Y*te,V*s.$+H*te,0])}R.terrainRttPosMatrix32f=new Float32Array(k),y[v]=R}return y}getSourceTile(o,d){const y=this.sourceCache._source;let v=o.overscaledZ-this.deltaZoom;if(v>y.maxzoom&&(v=y.maxzoom),v<y.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(v).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!T||!T.dem)&&d)for(;v>=y.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(o.scaledTo(v--).key);return T}anyTilesAfterTime(o=Date.now()){return this._lastTilesetChange>=o}_isWithinTileRanges(o,d){return d[o.canonical.z]&&o.canonical.x>=d[o.canonical.z].minTileX&&o.canonical.x<=d[o.canonical.z].maxTileX&&o.canonical.y>=d[o.canonical.z].minTileY&&o.canonical.y<=d[o.canonical.z].maxTileY}}class ir{constructor(o,d,y){this._meshCache={},this.painter=o,this.sourceCache=new Gt(d),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,d,y,v=s.$){var T;if(!(d>=0&&d<v&&y>=0&&y<v))return 0;const R=this.getTerrainData(o),k=(T=R.tile)===null||T===void 0?void 0:T.dem;if(!k)return 0;const L=s.cs([],[d/v*s.$,y/v*s.$],R.u_terrain_matrix),q=[L[0]*k.dim,L[1]*k.dim],V=Math.floor(q[0]),Y=Math.floor(q[1]),H=q[0]-V,te=q[1]-Y;return k.get(V,Y)*(1-H)*(1-te)+k.get(V+1,Y)*H*(1-te)+k.get(V,Y+1)*(1-H)*te+k.get(V+1,Y+1)*H*te}getElevationForLngLatZoom(o,d){if(!s.ct(d,o.wrap()))return 0;const{tileID:y,mercatorX:v,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(o,d);return this.getElevation(y,v%s.$,T%s.$,s.$)}getElevation(o,d,y,v=s.$){return this.getDEMElevation(o,d,y,v)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const v=this.painter.context,T=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(v,T,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(v,new s.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ag([])}const d=this.sourceCache.getSourceTile(o,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const v=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new s.T(v,d.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),d.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const y=d&&d+d.tileID.key+o.key;if(y&&!this._demMatrixCache[y]){const v=this.sourceCache.sourceCache._source.maxzoom;let T=o.canonical.z-d.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=v?T=o.canonical.z-v:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const R=o.canonical.x-(o.canonical.x>>T<<T),k=o.canonical.y-(o.canonical.y>>T<<T),L=s.cu(new Float64Array(16),[1/(s.$<<T),1/(s.$<<T),0]);s.M(L,L,[R*s.$,k*s.$,0]),this._demMatrixCache[o.key]={matrix:L,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(o){const d=this.painter,y=d.width/devicePixelRatio,v=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(d.context,{width:y,height:v,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(d.context,{width:y,height:v,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(y,v,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,y,v))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,R=0;T<this._coordsTextureSize;T++)for(let k=0;k<this._coordsTextureSize;k++,R+=4)d[R+0]=255&k,d[R+1]=255&T,d[R+2]=k>>8<<4|T>>8,d[R+3]=0;const y=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),v=new s.T(o,y,o.gl.RGBA,{premultiply:!1});return v.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),y=this.painter.context,v=y.gl,T=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),R=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(T,k-R-1,1,1,v.RGBA,v.UNSIGNED_BYTE,d),y.bindFramebuffer.set(null);const L=d[0]+(d[2]>>4<<8),q=d[1]+((15&d[2])<<8),V=this.coordsIndex[255-d[3]],Y=V&&this.sourceCache.getTileByID(V);if(!Y)return null;const H=this._coordsTextureSize,te=(1<<Y.tileID.canonical.z)*H;return new s.a1((Y.tileID.canonical.x*H+L)/te+Y.tileID.wrap,(Y.tileID.canonical.y*H+q)/te,this.getElevation(Y.tileID,L,q,H))}depthAtPoint(o){const d=new Uint8Array(4),y=this.painter.context,v=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,d),y.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(o){var d;const y=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,v=y&&o.canonical.y===0,T=y&&o.canonical.y===(1<<o.canonical.z)-1,R=`m_${v?"n":""}_${T?"s":""}`;if(this._meshCache[R])return this._meshCache[R];const k=this.painter.context,L=new s.cv,q=new s.aN,V=this.meshSize,Y=s.$/V,H=V*V;for(let Ae=0;Ae<=V;Ae++)for(let Ge=0;Ge<=V;Ge++)L.emplaceBack(Ge*Y,Ae*Y,0);for(let Ae=0;Ae<H;Ae+=V+1)for(let Ge=0;Ge<V;Ge++)q.emplaceBack(Ge+Ae,V+Ge+Ae+1,V+Ge+Ae+2),q.emplaceBack(Ge+Ae,V+Ge+Ae+2,Ge+Ae+1);const te=L.length,le=te+(V+1),_e=(V+1)*V,ge=v?s.bh:0,be=v?0:1,Se=T?s.bi:s.$,Re=T?0:1;for(let Ae=0;Ae<=V;Ae++)L.emplaceBack(Ae*Y,ge,be);for(let Ae=0;Ae<=V;Ae++)L.emplaceBack(Ae*Y,Se,Re);for(let Ae=0;Ae<V;Ae++)q.emplaceBack(_e+Ae,le+Ae,le+Ae+1),q.emplaceBack(_e+Ae,le+Ae+1,_e+Ae+1),q.emplaceBack(0+Ae,te+Ae+1,te+Ae),q.emplaceBack(0+Ae,0+Ae+1,te+Ae+1);const Pe=L.length,De=Pe+2*(V+1);for(const Ae of[0,1])for(let Ge=0;Ge<=V;Ge++)for(const st of[0,1])L.emplaceBack(Ae*s.$,Ge*Y,st);for(let Ae=0;Ae<2*V;Ae+=2)q.emplaceBack(Pe+Ae,Pe+Ae+1,Pe+Ae+3),q.emplaceBack(Pe+Ae,Pe+Ae+3,Pe+Ae+2),q.emplaceBack(De+Ae,De+Ae+3,De+Ae+1),q.emplaceBack(De+Ae,De+Ae+2,De+Ae+3);const Be=new Ba(k.createVertexBuffer(L,Od.members),k.createIndexBuffer(q),s.aM.simpleSegment(0,0,L.length,q.length));return this._meshCache[R]=Be,Be}getMeshFrameDelta(o){return 2*Math.PI*s.bu/Math.pow(2,Math.max(o,0))/5}getMinTileElevationForLngLatZoom(o,d){var y;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(o,d);return(y=this.getMinMaxElevation(v).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(o){const d=this.getTerrainData(o).tile,y={minElevation:null,maxElevation:null};return d&&d.dem&&(y.minElevation=d.dem.min*this.exaggeration,y.maxElevation=d.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(o,d){const y=s.a1.fromLngLat(o.wrap()),v=(1<<d)*s.$,T=y.x*v,R=y.y*v,k=Math.floor(T/s.$),L=Math.floor(R/s.$);return{tileID:new s.Z(d,0,d,k,L),mercatorX:T,mercatorY:R}}}class kd{constructor(o,d,y){this._context=o,this._size=d,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(y.texture),{id:o,fbo:d,texture:y,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>o.id!==d),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const ha={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ld{constructor(o,d){this.painter=o,this.terrain=d,this.pool=new kd(o.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(y=>!o._layers[y].isHidden(d)),this._coordsAscending={};for(const y in o.sourceCaches){this._coordsAscending[y]={};const v=o.sourceCaches[y].getVisibleCoordinates(),T=o.sourceCaches[y].getSource(),R=T instanceof xr?T.terrainTileRanges:null;for(const k of v){const L=this.terrain.sourceCache.getTerrainCoords(k,R);for(const q in L)this._coordsAscending[y][q]||(this._coordsAscending[y][q]=[]),this._coordsAscending[y][q].push(L[q])}}this._coordsAscendingStr={};for(const y of o._order){const v=o._layers[y],T=v.source;if(ha[v.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const R in this._coordsAscending[T])this._coordsAscendingStr[T][R]=this._coordsAscending[T][R].map(k=>k.key).sort().join()}}for(const y of this._renderableTiles)for(const v in this._coordsAscendingStr){const T=this._coordsAscendingStr[v][y.tileID.key];T&&T!==y.rttCoords[v]&&(y.rtt=[])}}renderLayer(o,d){if(o.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),v=o.type,T=this.painter,R=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(ha[v]&&(this._prevType&&ha[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(o.id),!R))return!0;if(ha[this._prevType]||ha[v]&&R){this._prevType=v;const k=this._stacks.length-1,L=this._stacks[k]||[];for(const q of this._renderableTiles){if(this.pool.isFull()&&(Cd(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(q),q.rtt[k]){const Y=this.pool.getObjectForId(q.rtt[k].id);if(Y.stamp===q.rtt[k].stamp){this.pool.useObject(Y);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),q.rtt[k]={id:V.id,stamp:V.stamp},T.context.bindFramebuffer.set(V.fbo.framebuffer),T.context.clear({color:s.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let Y=0;Y<L.length;Y++){const H=T.style._layers[L[Y]],te=H.source?this._coordsAscending[H.source][q.tileID.key]:[q.tileID];T.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),T._renderTileClippingMasks(H,te,!0),T.renderLayer(T,T.style.sourceCaches[H.source],H,te,y),H.source&&(q.rttCoords[H.source]=this._coordsAscendingStr[H.source][q.tileID.key])}}return Cd(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),ha[v]}return!1}}const Hi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},i0=p,So={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Em,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ow={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ou{constructor(o,d,y=!1){this.mousedown=T=>{this.startMove(T,A.mousePos(this.element,T)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,A.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;const v=new Rw;this._rotatePitchHandler=new ec({clickTolerance:3,move:(T,R)=>{const k=d.getBoundingClientRect(),L=new s.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:s.cn(new s.P(T.x,R.y),R,L),pitchDelta:y?-.5*(R.y-T.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=o,A.addEventListener(d,"mousedown",this.mousedown),A.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(d,"touchcancel",this.reset)}startMove(o,d){this._rotatePitchHandler.dragStart(o,d),A.disableDrag()}move(o,d){const y=this.map,{bearingDelta:v,pitchDelta:T}=this._rotatePitchHandler.dragMove(o,d)||{};v&&y.setBearing(y.getBearing()+v),T&&y.setPitch(y.getPitch()+T)}off(){const o=this.element;A.removeEventListener(o,"mousedown",this.mousedown),A.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let hn;function Un(w,o,d,y=!1){if(y||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const v=new s.S(w.lng,w.lat);if(w=new s.S(w.lng,w.lat),o){const T=new s.S(w.lng-360,w.lat),R=new s.S(w.lng+360,w.lat),k=d.locationToScreenPoint(w).distSqr(o);d.locationToScreenPoint(T).distSqr(o)<k?w=T:d.locationToScreenPoint(R).distSqr(o)<k&&(w=R)}for(;Math.abs(w.lng-d.center.lng)>180;){const T=d.locationToScreenPoint(w);if(T.x>=0&&T.y>=0&&T.x<=d.width&&T.y<=d.height)break;w.lng>d.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(w))?w:v}const Dd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ic(w,o,d){const y=w.classList;for(const v in Dd)y.remove(`maplibregl-${d}-anchor-${v}`);y.add(`maplibregl-${d}-anchor-${o}`)}class oc extends s.E{constructor(o){if(super(),this._onKeyPress=d=>{const y=d.code,v=d.charCode||d.keyCode;y!=="Space"&&y!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=d=>{const y=d.originalEvent.target,v=this._element;this._popup&&(y===v||v.contains(y))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(d?.type==="terrain"||d?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=Un(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${Dd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${v}`),P.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._subpixelPositioning=o&&o.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,this.setOpacity(o?.opacity,o?.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=s.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");const d=A.createNS("http://www.w3.org/2000/svg","svg"),y=41,v=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${y}px`),d.setAttributeNS(null,"width",`${v}px`),d.setAttributeNS(null,"viewBox",`0 0 ${v} ${y}`);const T=A.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const R=A.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill-rule","nonzero");const k=A.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const be of L){const Se=A.createNS("http://www.w3.org/2000/svg","ellipse");Se.setAttributeNS(null,"opacity","0.04"),Se.setAttributeNS(null,"cx","10.5"),Se.setAttributeNS(null,"cy","5.80029008"),Se.setAttributeNS(null,"rx",be.rx),Se.setAttributeNS(null,"ry",be.ry),k.appendChild(Se)}const q=A.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);const V=A.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild(V);const Y=A.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");const H=A.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(H);const te=A.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");const le=A.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _e=A.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");const ge=A.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),le.appendChild(_e),le.appendChild(ge),R.appendChild(k),R.appendChild(q),R.appendChild(Y),R.appendChild(te),R.appendChild(le),d.appendChild(R),d.setAttributeNS(null,"height",y*this._scale+"px"),d.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(d),this._offset=s.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),ic(this._element,this._anchor,"marker"),o&&o.className)for(const d of o.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(o){return this.remove(),this._map=o,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",o._getUIString("Marker.Title")),o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),o.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=s.S.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const v=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(o){return this._subpixelPositioning=o,this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var d,y;const v=(d=this._map)===null||d===void 0?void 0:d.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!v||T){const te=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==te&&(this._element.style.opacity=te))}if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const R=this._map,k=R.terrain.depthAtPoint(this._pos),L=R.terrain.getElevationForLngLatZoom(this._lngLat,R.transform.tileZoom);if(R.transform.lngLatToCameraDepth(this._lngLat,L)-k<.006)return void(this._element.style.opacity=this._opacity);const q=-this._offset.y/R.transform.pixelsPerMeter,V=Math.sin(R.getPitch()*Math.PI/180)*q,Y=R.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),H=R.transform.lngLatToCameraDepth(this._lngLat,L+V)-Y>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=s.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,d){return(this._opacity===void 0||o===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),o!==void 0&&(this._opacity=o),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const Sm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let sc=0,tl=!1;const ku={maxWidth:100,unit:"metric"};function Nd(w,o,d){const y=d&&d.maxWidth||100,v=w._container.clientHeight/2,T=w._container.clientWidth/2,R=w.unproject([T-y/2,v]),k=w.unproject([T+y/2,v]),L=Math.round(w.project(k).x-w.project(R).x),q=Math.min(y,L,w._container.clientWidth),V=R.distanceTo(k);if(d&&d.unit==="imperial"){const Y=3.2808*V;Y>5280?rl(o,q,Y/5280,w._getUIString("ScaleControl.Miles")):rl(o,q,Y,w._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?rl(o,q,V/1852,w._getUIString("ScaleControl.NauticalMiles")):V>=1e3?rl(o,q,V/1e3,w._getUIString("ScaleControl.Kilometers")):rl(o,q,V,w._getUIString("ScaleControl.Meters"))}function rl(w,o,d,y){const v=function(T){const R=Math.pow(10,`${Math.floor(T)}`.length-1);let k=T/R;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(L){const q=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*q)/q}(k),R*k}(d);w.style.width=o*(v/d)+"px",w.innerHTML=`${v}&nbsp;${y}`}const Cm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Pm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fd(w){if(w){if(typeof w=="number"){const o=Math.round(Math.abs(w)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,w),"top-left":new s.P(o,o),"top-right":new s.P(-o,o),bottom:new s.P(0,-w),"bottom-left":new s.P(o,-o),"bottom-right":new s.P(-o,-o),left:new s.P(w,0),right:new s.P(-w,0)}}if(w instanceof s.P||Array.isArray(w)){const o=s.P.convert(w);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:s.P.convert(w.center||[0,0]),top:s.P.convert(w.top||[0,0]),"top-left":s.P.convert(w["top-left"]||[0,0]),"top-right":s.P.convert(w["top-right"]||[0,0]),bottom:s.P.convert(w.bottom||[0,0]),"bottom-left":s.P.convert(w["bottom-left"]||[0,0]),"bottom-right":s.P.convert(w["bottom-right"]||[0,0]),left:s.P.convert(w.left||[0,0]),right:s.P.convert(w.right||[0,0])}}return Fd(new s.P(0,0))}const Am=p;c.AJAXError=s.cz,c.Event=s.l,c.Evented=s.E,c.LngLat=s.S,c.MercatorCoordinate=s.a1,c.Point=s.P,c.addProtocol=s.cA,c.config=s.a,c.removeProtocol=s.cB,c.AttributionControl=Tm,c.BoxZoomHandler=gm,c.CanvasSource=Ir,c.CooperativeGesturesHandler=t0,c.DoubleClickZoomHandler=bm,c.DragPanHandler=Q_,c.DragRotateHandler=xm,c.EdgeInsets=$a,c.FullscreenControl=class extends s.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var o;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((o=d?.shadowRoot)===null||o===void 0)&&o.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=Bt,c.GeolocateControl=class extends s.E{constructor(w){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",o)),this._finish()}},this._updateCamera=o=>{const d=new s.S(o.coords.longitude,o.coords.latitude),y=o.coords.accuracy,v=this._map.getBearing(),T=s.e({bearing:v},this.options.fitBoundsOptions),R=lt.fromLngLat(d,y);this._map.fitBounds(R,T,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const d=new s.S(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&tl)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=o=>{if(this._map){if(o===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new oc({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{const y=d?.[0]instanceof ResizeObserverEntry;d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},Sm,w)}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(o=!1){if(hn!==void 0&&!o)return hn;if(window.navigator.permissions===void 0)return hn=!!window.navigator.geolocation,hn;try{hn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{hn=!!window.navigator.geolocation}return hn})}().then(o=>this._finishSetupUI(o)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,sc=0,tl=!1}_isOutOfMapMaxBounds(w){const o=this._map.getMaxBounds(),d=w.coords;return o&&(d.longitude<o.getWest()||d.longitude>o.getEast()||d.latitude<o.getSouth()||d.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),o=w.getSouthEast(),d=w.getNorthEast(),y=o.distanceTo(d),v=Math.ceil(this._accuracy/(y/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":sc--,tl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),sc++,sc>1?(w={maximumAge:6e5,timeout:0},tl=!0):(w=this.options.positionOptions,tl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const o=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(o!=="mercator"&&o?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=A.create("button","maplibregl-ctrl-globe",this._container),A.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=Pd,c.ImageSource=xr,c.KeyboardHandler=Id,c.LngLatBounds=lt,c.LogoControl=n0,c.Map=class extends r0{constructor(w){var o,d;s.cw.mark(s.cx.create);const y=Object.assign(Object.assign(Object.assign({},So),w),{canvasContextAttributes:Object.assign(Object.assign({},So.canvasContextAttributes),w.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new gn,T=new Fi;if(y.minZoom!==void 0&&v.setMinZoom(y.minZoom),y.maxZoom!==void 0&&v.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&v.setMinPitch(y.minPitch),y.maxPitch!==void 0&&v.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&v.setRenderWorldCopies(y.renderWorldCopies),super(v,T,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new _s,this._controls=[],this._mapId=s.a7(),this._contextLost=k=>{k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Hi),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new re(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let k=!1;const L=Qa(q=>{this._trackResize&&!this._removed&&(this.resize(q),this.redraw())},50);this._resizeObserver=new ResizeObserver(q=>{k?L(q):k=!0}),this._resizeObserver.observe(this._container)}this.handlers=new wm(this,y),this._hash=y.hash&&new Pd(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,s.e({},y.fitBoundsOptions,{duration:0}))));const R=typeof y.style=="string"||((d=(o=y.style)===null||o===void 0?void 0:o.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,R),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Tm(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new n0,y.logoPosition),this.on("style.load",()=>{if(R||this._resizeTransform(),this.transform.unmodified){const k=s.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}}),this.on("data",k=>{this._update(k.dataType==="style"),this.fire(new s.l(`${k.dataType}data`,k))}),this.on("dataloading",k=>{this.fire(new s.l(`${k.dataType}dataloading`,k))}),this.on("dataabort",k=>{this.fire(new s.l("sourcedataabort",k))})}_getMapId(){return this._mapId}setGlobalStateProperty(w,o){return this.style.setGlobalStateProperty(w,o),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,o){if(o===void 0&&(o=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=w.onAdd(this);this._controls.push(w);const y=this._controlPositions[o];return o.indexOf("bottom")!==-1?y.insertBefore(d,y.firstChild):y.appendChild(d),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(w);return o>-1&&this._controls.splice(o,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return $e(this.transform,w)}calculateCameraOptionsFromTo(w,o,d,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,o,d,y)}resize(w,o=!0){const[d,y]=this._containerDimensions(),v=this._getClampedPixelRatio(d,y);if(this._resizeCanvas(d,y,v),this.painter.resize(d,y,v),this.painter.overLimit()){const R=this.painter.context.gl;this._maxCanvasSize=[R.drawingBufferWidth,R.drawingBufferHeight];const k=this._getClampedPixelRatio(d,y);this._resizeCanvas(d,y,k),this.painter.resize(d,y,k)}this._resizeTransform(o);const T=!this._moving;return T&&(this.stop(),this.fire(new s.l("movestart",w)).fire(new s.l("move",w))),this.fire(new s.l("resize",w)),T&&this.fire(new s.l("moveend",w)),this}_resizeTransform(w=!0){var o;const[d,y]=this._containerDimensions();this.transform.resize(d,y,w),(o=this._requestedCameraState)===null||o===void 0||o.resize(d,y,w)}_getClampedPixelRatio(w,o){const{0:d,1:y}=this._maxCanvasSize,v=this.getPixelRatio(),T=w*v,R=o*v;return Math.min(T>d?d/T:1,R>y?y/R:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(lt.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(s.S.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(s.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,o,d){if(w==="mouseenter"||w==="mouseover"){let y=!1;return{layers:o,listener:d,delegates:{mousemove:T=>{const R=o.filter(L=>this.getLayer(L)),k=R.length!==0?this.queryRenderedFeatures(T.point,{layers:R}):[];k.length?y||(y=!0,d.call(this,new ro(w,this,T.originalEvent,{features:k}))):y=!1},mouseout:()=>{y=!1}}}}if(w==="mouseleave"||w==="mouseout"){let y=!1;return{layers:o,listener:d,delegates:{mousemove:R=>{const k=o.filter(L=>this.getLayer(L));(k.length!==0?this.queryRenderedFeatures(R.point,{layers:k}):[]).length?y=!0:y&&(y=!1,d.call(this,new ro(w,this,R.originalEvent)))},mouseout:R=>{y&&(y=!1,d.call(this,new ro(w,this,R.originalEvent)))}}}}{const y=v=>{const T=o.filter(k=>this.getLayer(k)),R=T.length!==0?this.queryRenderedFeatures(v.point,{layers:T}):[];R.length&&(v.features=R,d.call(this,v),delete v.features)};return{layers:o,listener:d,delegates:{[w]:y}}}}_saveDelegatedListener(w,o){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(o)}_removeDelegatedListener(w,o,d){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const y=this._delegatedListeners[w];for(let v=0;v<y.length;v++){const T=y[v];if(T.listener===d&&T.layers.length===o.length&&T.layers.every(R=>o.includes(R))){for(const R in T.delegates)this.off(R,T.delegates[R]);return void y.splice(v,1)}}}on(w,o,d){if(d===void 0)return super.on(w,o);const y=typeof o=="string"?[o]:o,v=this._createDelegatedListener(w,y,d);this._saveDelegatedListener(w,v);for(const T in v.delegates)this.on(T,v.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(w,y,d)}}}once(w,o,d){if(d===void 0)return super.once(w,o);const y=typeof o=="string"?[o]:o,v=this._createDelegatedListener(w,y,d);for(const T in v.delegates){const R=v.delegates[T];v.delegates[T]=(...k)=>{this._removeDelegatedListener(w,y,d),R(...k)}}this._saveDelegatedListener(w,v);for(const T in v.delegates)this.once(T,v.delegates[T]);return this}off(w,o,d){return d===void 0?super.off(w,o):(this._removeDelegatedListener(w,typeof o=="string"?[o]:o,d),this)}queryRenderedFeatures(w,o){if(!this.style)return[];let d;const y=w instanceof s.P||Array.isArray(w),v=y?w:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(y?{}:w)||{},v instanceof s.P||typeof v[0]=="number")d=[s.P.convert(v)];else{const T=s.P.convert(v[0]),R=s.P.convert(v[1]);d=[T,new s.P(R.x,T.y),R,new s.P(T.x,R.y),T]}return this.style.queryRenderedFeatures(d,o,this.transform)}querySourceFeatures(w,o){return this.style.querySourceFeatures(w,o)}setStyle(w,o){return(o=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(w,o))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const o=this._locale[w];if(o==null)throw new Error(`Missing UI string '${w}'`);return o}_updateStyle(w,o){var d,y;if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,o));const v=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Gf(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,o,v):this.style.loadJSON(w,o,v),this):((y=(d=this.style)===null||d===void 0?void 0:d.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Gf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,o){if(typeof w=="string"){const d=this._requestManager.transformRequest(w,"Style");s.j(d,new AbortController).then(y=>{this._updateDiff(y.data,o)}).catch(y=>{y&&this.fire(new s.k(y))})}else typeof w=="object"&&this._updateDiff(w,o)}_updateDiff(w,o){try{this.style.setState(w,o)&&this._update(!0)}catch(d){s.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(w,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(w,o){return this._lazyInitEmptyStyle(),this.style.addSource(w,o),this._update(!0)}isSourceLoaded(w){const o=this.style&&this.style.sourceCaches[w];if(o!==void 0)return o.loaded();this.fire(new s.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const o=this.style.sourceCaches[w.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&o.reload();for(const d in this.style._layers){const y=this.style._layers[d];y.type==="hillshade"&&y.source===w.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===w.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ir(this.painter,o,w),this.painter.renderToTexture=new Ld(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var y;d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=d.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:w})),this}getTerrain(){var w,o;return(o=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&o!==void 0?o:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const o in w){const d=w[o]._tiles;for(const y in d){const v=d[y];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,o,d){if(d){const y=this.getSource(d);if(!y)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);y.calculateTileZoom=ct(Math.max(1,w),Math.max(1,o))}else for(const y in this.style.sourceCaches)this.style.sourceCaches[y].getSource().calculateTileZoom=ct(Math.max(1,w),Math.max(1,o));return this._update(!0),this}refreshTiles(w,o){const d=this.style.sourceCaches[w];if(!d)throw new Error(`There is no source cache with ID "${w}", cannot refresh tile`);o===void 0?d.reload(!0):d.refreshTiles(o.map(y=>new s.a4(y.z,y.x,y.y)))}addImage(w,o,d={}){const{pixelRatio:y=1,sdf:v=!1,stretchX:T,stretchY:R,content:k,textFitWidth:L,textFitHeight:q}=d;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||s.b(o))){if(o.width===void 0||o.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:V,height:Y,data:H}=o,te=o;return this.style.addImage(w,{data:new s.R({width:V,height:Y},new Uint8Array(H)),pixelRatio:y,stretchX:T,stretchY:R,content:k,textFitWidth:L,textFitHeight:q,sdf:v,version:0,userImage:te}),te.onAdd&&te.onAdd(this,w),this}}{const{width:V,height:Y,data:H}=P.getImageData(o);this.style.addImage(w,{data:new s.R({width:V,height:Y},H),pixelRatio:y,stretchX:T,stretchY:R,content:k,textFitWidth:L,textFitHeight:q,sdf:v,version:0})}}updateImage(w,o){const d=this.style.getImage(w);if(!d)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=o instanceof HTMLImageElement||s.b(o)?P.getImageData(o):o,{width:v,height:T,data:R}=y;if(v===void 0||T===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==d.data.width||T!==d.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(o instanceof HTMLImageElement||s.b(o));return d.data.replace(R,k),this.style.updateImage(w,d),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return X.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,o){return this._lazyInitEmptyStyle(),this.style.addLayer(w,o),this._update(!0)}moveLayer(w,o){return this.style.moveLayer(w,o),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,o,d){return this.style.setLayerZoomRange(w,o,d),this._update(!0)}setFilter(w,o,d={}){return this.style.setFilter(w,o,d),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,o,d,y={}){return this.style.setPaintProperty(w,o,d,y),this._update(!0)}getPaintProperty(w,o){return this.style.getPaintProperty(w,o)}setLayoutProperty(w,o,d,y={}){return this.style.setLayoutProperty(w,o,d,y),this._update(!0)}getLayoutProperty(w,o){return this.style.getLayoutProperty(w,o)}setGlyphs(w,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,o,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,o,d,y=>{y||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,o,d=>{d||this._update(!0)}),this}setLight(w,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,o),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,o={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,o),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,o){return this.style.setFeatureState(w,o),this._update()}removeFeatureState(w,o){return this.style.removeFeatureState(w,o),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,o=0;return this._container&&(w=this._container.clientWidth||400,o=this._container.clientHeight||300),[w,o]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const o=this._canvasContainer=A.create("div","maplibregl-canvas-container",w);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),y=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],y);const v=this._controlContainer=A.create("div","maplibregl-control-container",w),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(R=>{T[R]=A.create("div",`maplibregl-ctrl-${R} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,o,d){this._canvas.width=Math.floor(d*w),this._canvas.height=Math.floor(d*o),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let o=null;this._canvas.addEventListener("webglcontextcreationerror",y=>{o={requestedAttributes:w},y&&(o.statusMessage=y.statusMessage,o.type=y.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!d){const y="Failed to initialize WebGL";throw o?(o.message=y,new Error(JSON.stringify(o))):new Error(y)}this.painter=new $_(d,this.transform),M.testSupport(d)}migrateProjection(w,o){super.migrateProjection(w,o),this.painter.transform=w,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var o,d,y,v,T;const R=this._idleTriggered?this._fadeDuration:0,k=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let L=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Y=this.transform.zoom,H=P.now();this.style.zoomHistory.update(Y,H);const te=new s.F(Y,{now:H,fadeDuration:R,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),le=te.crossFadingFactor();le===1&&le===this._crossFadingFactor||(L=!0,this._crossFadingFactor=le),this.style.update(te)}const q=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==k;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||q)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,R,this._crossSourceCollisions,q),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:R,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cw.mark(s.cx.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||L)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,s.cw.mark(s.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o?.loseContext&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cw.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,w=>{s.cw.frame(w),this._frameRequest=null;try{this._render(w)}catch(o){if(!s.cy(o)&&!function(d){return d.message===wu}(o))throw o}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return i0}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},c.MapMouseEvent=ro,c.MapTouchEvent=Yl,c.MapWheelEvent=mm,c.Marker=oc,c.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const o=this._map.getZoom(),d=o===this._map.getMaxZoom(),y=o===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(o,d)=>{const y=this._map._getUIString(`NavigationControl.${d}`);o.title=y,o.setAttribute("aria-label",y)},this.options=s.e({},Ow,w),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ou(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,o){const d=A.create("button",w,this._container);return d.type="button",d.addEventListener("click",o),d}},c.Popup=class extends s.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const R of this.options.className.split(" "))this._container.classList.add(R);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Un(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!o)return;const d=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const v=Fd(this.options.offset);if(!y){const R=this._container.offsetWidth,k=this._container.offsetHeight;let L;L=d.y+v.bottom.y<k?["top"]:d.y>this._map.transform.height-k?["bottom"]:[],d.x<R/2?L.push("left"):d.x>this._map.transform.width-R/2&&L.push("right"),y=L.length===0?"bottom":L.join("-")}let T=d.add(v[y]);this.options.subpixelPositioning||(T=T.round()),A.setTransform(this._container,`${Dd[y]} translate(${T.x}px,${T.y}px)`),ic(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Cm),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=s.S.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const o=document.createDocumentFragment(),d=document.createElement("body");let y;for(d.innerHTML=w;y=d.firstChild,y;)o.appendChild(y);return this.setDOMContent(o)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Pm);w&&w.focus()}},c.RasterDEMTileSource=Yt,c.RasterTileSource=Dt,c.ScaleControl=class{constructor(w){this._onMove=()=>{Nd(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,Nd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ku),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=Y_,c.Style=Gf,c.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=Rd,c.TwoFingersTouchRotateHandler=rc,c.TwoFingersTouchZoomHandler=Ad,c.TwoFingersTouchZoomRotateHandler=e0,c.VectorTileSource=vt,c.VideoSource=$r,c.addSourceType=(w,o)=>s._(void 0,void 0,void 0,function*(){if(yr(w))throw new Error(`A source type called "${w}" already exists.`);((d,y)=>{Zr[d]=y})(w,o)}),c.clearPrewarmedResources=function(){const w=kt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Ze),kt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=Vf,c.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return mr().getRTLTextPluginStatus()},c.getVersion=function(){return Am},c.getWorkerCount=function(){return bt.workerCount},c.getWorkerUrl=function(){return s.a.WORKER_URL},c.importScriptInWorkers=function(w){return er().broadcast("IS",w)},c.prewarm=function(){Pt().acquire(Ze)},c.setMaxParallelImageRequests=function(w){s.a.MAX_PARALLEL_IMAGE_REQUESTS=w},c.setRTLTextPlugin=function(w,o){return mr().setRTLTextPlugin(w,o)},c.setWorkerCount=function(w){bt.workerCount=w},c.setWorkerUrl=function(w){s.a.WORKER_URL=w}});var l=r;return l})}(mb)),mb.exports}var mge=fge();const hJ=dge(mge);class dJ extends hJ.Map{constructor(e){super({container:e.target,style:e.styleUrl,antialias:!0,...e})}}function iC(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const gge=new Error("disposed"),yge=[256,256];class JL extends p_{constructor(e){const r=qt.IDLE;super(e.tileCoord,r,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=iC(this.data_);return e?[e.width,e.height]:yge}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==qt.IDLE&&this.state!==qt.ERROR)return;this.state=qt.LOADING,this.changed();const e=this;this.loader_().then(function(r){e.data_=r,e.state=qt.LOADED,e.changed()}).catch(function(r){e.error_=r,e.state=qt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(gge),this.controller_=null),super.disposeInternal()}}let yT;const zp=[];function WL(t,e,r,n,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,i)),t.restore()}function _T(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function _ge(){if(yT===void 0){const t=Ei(6,6,zp);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",WL(t,4,5,4,0),WL(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;yT=_T(e,0)||_T(e,4)||_T(e,8),a_(t),zp.push(t.canvas)}return yT}function ZL(t,e,r,n){const i=ff(r,e,t);let l=vv(e,n,r);const c=e.getMetersPerUnit();c!==void 0&&(l*=c);const s=t.getMetersPerUnit();s!==void 0&&(l/=s);const p=t.getExtent();if(!p||uf(p,i)){const g=vv(t,l,i)/l;isFinite(g)&&g>0&&(l/=g)}return l}function bge(t,e,r,n){const i=Ol(r);let l=ZL(t,e,i,n);return(!isFinite(l)||l<=0)&&GG(r,function(c){return l=ZL(t,e,c,n),isFinite(l)&&l>0}),l}function vge(t,e,r,n,i,l,c,s,p,g,_,x,P,A){const M=Ei(Math.round(r*t),Math.round(r*e),zp);if(x||(M.imageSmoothingEnabled=!1),p.length===0)return M.canvas;M.scale(r,r);function N(re){return Math.round(re*r)/r}M.globalCompositeOperation="lighter";const z=Os();p.forEach(function(re,ne,Z){VG(z,re.extent)});let j;const $=r/n,J=(x?1:1+Math.pow(2,-24))/$;j=Ei(Math.round(En(z)*$),Math.round(wo(z)*$),zp),x||(j.imageSmoothingEnabled=!1),p.forEach(function(re,ne,Z){if(re.image.width>0&&re.image.height>0){if(re.clipExtent){j.save();const Ee=(re.clipExtent[0]-z[0])*$,Ie=-(re.clipExtent[3]-z[3])*$,ee=En(re.clipExtent)*$,pe=wo(re.clipExtent)*$;j.rect(x?Ee:Math.round(Ee),x?Ie:Math.round(Ie),x?ee:Math.round(Ee+ee)-Math.round(Ee),x?pe:Math.round(Ie+pe)-Math.round(Ie)),j.clip()}const U=(re.extent[0]-z[0])*$,K=-(re.extent[3]-z[3])*$,he=En(re.extent)*$,ue=wo(re.extent)*$;j.drawImage(re.image,g,g,re.image.width-2*g,re.image.height-2*g,x?U:Math.round(U),x?K:Math.round(K),x?he:Math.round(U+he)-Math.round(U),x?ue:Math.round(K+ue)-Math.round(K)),re.clipExtent&&j.restore()}});const X=Bl(c);return s.getTriangles().forEach(function(re,ne,Z){const U=re.source,K=re.target;let he=U[0][0],ue=U[0][1],Ee=U[1][0],Ie=U[1][1],ee=U[2][0],pe=U[2][1];const ve=N((K[0][0]-X[0])/l),xe=N(-(K[0][1]-X[1])/l),tt=N((K[1][0]-X[0])/l),Ke=N(-(K[1][1]-X[1])/l),Ze=N((K[2][0]-X[0])/l),bt=N(-(K[2][1]-X[1])/l),qe=he,kt=ue;he=0,ue=0,Ee-=qe,Ie-=kt,ee-=qe,pe-=kt;const Jt=[[Ee,Ie,0,0,tt-ve],[ee,pe,0,0,Ze-ve],[0,0,Ee,Ie,Ke-xe],[0,0,ee,pe,bt-xe]],Pt=nde(Jt);if(!Pt)return;if(M.save(),M.beginPath(),_ge()||!x){M.moveTo(tt,Ke);const er=4,Wt=ve-tt,ar=xe-Ke;for(let _t=0;_t<er;_t++)M.lineTo(tt+N((_t+1)*Wt/er),Ke+N(_t*ar/(er-1))),_t!=er-1&&M.lineTo(tt+N((_t+1)*Wt/er),Ke+N((_t+1)*ar/(er-1)));M.lineTo(Ze,bt)}else M.moveTo(tt,Ke),M.lineTo(ve,xe),M.lineTo(Ze,bt);M.clip(),M.transform(Pt[0],Pt[2],Pt[1],Pt[3],ve,xe),M.translate(z[0]-qe,z[3]-kt);let dt;if(j)dt=j.canvas,M.scale(J,-J);else{const er=p[0],Wt=er.extent;dt=er.image,M.scale(En(Wt)/dt.width,-wo(Wt)/dt.height)}M.drawImage(dt,0,0),M.restore()}),j&&(a_(j),zp.push(j.canvas)),_&&(M.save(),M.globalCompositeOperation="source-over",M.strokeStyle="black",M.lineWidth=1,s.getTriangles().forEach(function(re,ne,Z){const U=re.target,K=(U[0][0]-X[0])/l,he=-(U[0][1]-X[1])/l,ue=(U[1][0]-X[0])/l,Ee=-(U[1][1]-X[1])/l,Ie=(U[2][0]-X[0])/l,ee=-(U[2][1]-X[1])/l;M.beginPath(),M.moveTo(ue,Ee),M.lineTo(K,he),M.lineTo(Ie,ee),M.closePath(),M.stroke()}),M.restore()),M.canvas}const xge=10,KL=.25;class wge{constructor(e,r,n,i,l,c,s){this.sourceProj_=e,this.targetProj_=r;let p={};const g=s?Ude(J=>Li(s,ff(J,this.targetProj_,this.sourceProj_))):pf(this.targetProj_,this.sourceProj_);this.transformInv_=function(J){const X=J[0]+"/"+J[1];return p[X]||(p[X]=g(J)),p[X]},this.maxSourceExtent_=i,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&En(i)>=En(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?En(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?En(this.targetProj_.getExtent()):null;const _=Bl(n),x=Tx(n),P=Ex(n),A=wx(n),M=this.transformInv_(_),N=this.transformInv_(x),z=this.transformInv_(P),j=this.transformInv_(A),$=xge+(c?Math.max(0,Math.ceil(Math.log2(q2(n)/(c*c*256*256)))):0);if(this.addQuad_(_,x,P,A,M,N,z,j,$),this.wrapsXInSource_){let J=1/0;this.triangles_.forEach(function(X,re,ne){J=Math.min(J,X.source[0][0],X.source[1][0],X.source[2][0])}),this.triangles_.forEach(X=>{if(Math.max(X.source[0][0],X.source[1][0],X.source[2][0])-J>this.sourceWorldWidth_/2){const re=[[X.source[0][0],X.source[0][1]],[X.source[1][0],X.source[1][1]],[X.source[2][0],X.source[2][1]]];re[0][0]-J>this.sourceWorldWidth_/2&&(re[0][0]-=this.sourceWorldWidth_),re[1][0]-J>this.sourceWorldWidth_/2&&(re[1][0]-=this.sourceWorldWidth_),re[2][0]-J>this.sourceWorldWidth_/2&&(re[2][0]-=this.sourceWorldWidth_);const ne=Math.min(re[0][0],re[1][0],re[2][0]);Math.max(re[0][0],re[1][0],re[2][0])-ne<this.sourceWorldWidth_/2&&(X.source=re)}})}p={}}addTriangle_(e,r,n,i,l,c){this.triangles_.push({source:[i,l,c],target:[e,r,n]})}addQuad_(e,r,n,i,l,c,s,p,g){const _=j2([l,c,s,p]),x=this.sourceWorldWidth_?En(_)/this.sourceWorldWidth_:null,P=this.sourceWorldWidth_,A=this.sourceProj_.canWrapX()&&x>.5&&x<1;let M=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=j2([e,r,n,i]);M=En(z)/this.targetWorldWidth_>KL||M}!A&&this.sourceProj_.isGlobal()&&x&&(M=x>KL||M)}if(!M&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3])&&!ui(_,this.maxSourceExtent_))return;let N=0;if(!M&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(p[0])||!isFinite(p[1]))){if(g>0)M=!0;else if(N=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(c[0])||!isFinite(c[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),N!=1&&N!=2&&N!=4&&N!=8)return}if(g>0){if(!M){const z=[(e[0]+n[0])/2,(e[1]+n[1])/2],j=this.transformInv_(z);let $;A?$=(yh(l[0],P)+yh(s[0],P))/2-yh(j[0],P):$=(l[0]+s[0])/2-j[0];const J=(l[1]+s[1])/2-j[1];M=$*$+J*J>this.errorThresholdSquared_}if(M){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const z=[(r[0]+n[0])/2,(r[1]+n[1])/2],j=this.transformInv_(z),$=[(i[0]+e[0])/2,(i[1]+e[1])/2],J=this.transformInv_($);this.addQuad_(e,r,z,$,l,c,j,J,g-1),this.addQuad_($,z,n,i,J,j,s,p,g-1)}else{const z=[(e[0]+r[0])/2,(e[1]+r[1])/2],j=this.transformInv_(z),$=[(n[0]+i[0])/2,(n[1]+i[1])/2],J=this.transformInv_($);this.addQuad_(e,z,$,i,l,j,J,p,g-1),this.addQuad_(z,r,n,$,j,c,s,J,g-1)}return}}if(A){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(N&11)==0&&this.addTriangle_(e,n,i,l,s,p),(N&14)==0&&this.addTriangle_(e,n,r,l,s,c),N&&((N&13)==0&&this.addTriangle_(r,i,e,c,p,l),(N&7)==0&&this.addTriangle_(r,i,n,c,p,s))}calculateSourceExtent(){const e=Os();return this.triangles_.forEach(function(r,n,i){const l=r.source;Fg(e,l[0]),Fg(e,l[1]),Fg(e,l[2])}),e}getTriangles(){return this.triangles_}}const Ege=.5;class pJ extends p_{constructor(e,r,n,i,l,c,s,p,g,_,x,P){super(l,qt.IDLE,P),this.renderEdges_=x!==void 0?x:!1,this.pixelRatio_=s,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=r,this.targetTileGrid_=i,this.wrappedTileCoord_=c||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const A=i.getTileCoordExtent(this.wrappedTileCoord_),M=this.targetTileGrid_.getExtent();let N=this.sourceTileGrid_.getExtent();const z=M?Cl(A,M):A;if(q2(z)===0){this.state=qt.EMPTY;return}const j=e.getExtent();j&&(N?N=Cl(N,j):N=j);const $=i.getResolution(this.wrappedTileCoord_[0]),J=bge(e,n,z,$);if(!isFinite(J)||J<=0){this.state=qt.EMPTY;return}const X=_!==void 0?_:Ege;if(this.triangulation_=new wge(e,n,z,N,J*X,$),this.triangulation_.getTriangles().length===0){this.state=qt.EMPTY;return}this.sourceZ_=r.getZForResolution(J);let re=this.triangulation_.calculateSourceExtent();if(N&&(e.canWrapX()?(re[1]=qn(re[1],N[1],N[3]),re[3]=qn(re[3],N[1],N[3])):re=Cl(re,N)),!q2(re))this.state=qt.EMPTY;else{let ne=0,Z=0;e.canWrapX()&&(ne=En(j),Z=Math.floor((re[0]-j[0])/ne)),ZG(re.slice(),e,!0).forEach(K=>{const he=r.getTileRangeForExtentAndZ(K,this.sourceZ_);for(let ue=he.minX;ue<=he.maxX;ue++)for(let Ee=he.minY;Ee<=he.maxY;Ee++){const Ie=g(this.sourceZ_,ue,Ee,s);if(Ie){const ee=Z*ne;this.sourceTiles_.push({tile:Ie,offset:ee})}}++Z}),this.sourceTiles_.length===0&&(this.state=qt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(r=>{const n=r.tile;if(n&&n.getState()==qt.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);i[0]+=r.offset,i[2]+=r.offset;const l=this.clipExtent_?.slice();l&&(l[0]+=r.offset,l[2]+=r.offset),e.push({extent:i,clipExtent:l,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=qt.ERROR;else{const r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),i=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],c=this.targetTileGrid_.getResolution(r),s=this.sourceTileGrid_.getResolution(this.sourceZ_),p=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=vge(i,l,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),c,p,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=qt.LOADED}this.changed()}load(){if(this.state==qt.IDLE){this.state=qt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:r})=>{const n=r.getState();if(n==qt.IDLE||n==qt.LOADING){e++;const i=en(r,Rr.CHANGE,l=>{const c=r.getState();(c==qt.LOADED||c==qt.ERROR||c==qt.EMPTY)&&(Rn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:r},n,i){r.getState()==qt.IDLE&&r.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Rn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(a_(this.canvas_.getContext("2d")),zp.push(this.canvas_),this.canvas_=null),super.release()}}class Tge{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof _x&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let r=this.oldest_;for(;r;)e(r.value_,r.key_,this),r=r.newer}get(e,r){const n=this.entries_[e];return cn(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const r=this.entries_[e];return cn(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[e],--this.count_,r.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let r=0,n;for(n=this.newest_;n;n=n.older)e[r++]=n.key_;return e}getValues(){const e=new Array(this.count_);let r=0,n;for(n=this.newest_;n;n=n.older)e[r++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,r){this.get(e),this.entries_[e].value_=r}set(e,r){cn(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function Ov(t,e,r,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function Sge(t,e,r){return t+"/"+e+"/"+r}function Cge(t){return Pge(t[0],t[1],t[2])}function Pge(t,e,r){return(e<<t)+r}function Age(t,e){const r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;const l=e.getFullTileRange(r);return l?l.containsXY(n,i):!0}function bT(t,e,r,n,i){return`${Nr(t)},${e},${Sge(r,n,i)}`}function vT(t,e,r){if(!(r in t))return t[r]=new Set([e]),!0;const n=t[r],i=n.has(e);return i||n.add(e),!i}function Rge(t,e,r){const n=t[r];return n?n.delete(e):!1}function YL(t,e){const r=t.layerStatesArray[t.layerIndex];r.extent&&(e=Cl(e,kc(r.extent,t.viewState.projection)));const n=r.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=Cl(e,i))}return e}class Ige extends nJ{constructor(e,r){super(e),r=r||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Os(),this.tempTileRange_=new OM(0,0,0,0),this.tempTileCoord_=Ov(0,0,0);const n=r.cacheSize!==void 0?r.cacheSize:512;this.tileCache_=new Tge(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,r,n,i){const l=this.tileCache_,s=this.getLayer().getSource(),p=bT(s,s.getKey(),e,r,n);let g;if(l.containsKey(p))g=l.get(p);else{if(g=s.getTile(e,r,n,i.pixelRatio,i.viewState.projection),!g)return null;l.set(p,g)}return g}getTile(e,r,n,i){const l=this.getOrCreateTile(e,r,n,i);return l||null}getData(e){const r=this.frameState;if(!r)return null;const n=this.getLayer(),i=Li(r.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!uf(l,i))return null;const c=r.viewState,s=n.getRenderSource(),p=s.getTileGridForProjection(c.projection),g=s.getTilePixelRatio(r.pixelRatio);for(let _=p.getZForResolution(c.resolution);_>=p.getMinZoom();--_){const x=p.getTileCoordForCoordAndZ(i,_),P=this.getTile(_,x[1],x[2],r);if(!P||P.getState()!==qt.LOADED)continue;const A=p.getOrigin(_),M=uo(p.getTileSize(_)),N=p.getResolution(_);let z;if(P instanceof sJ||P instanceof pJ)z=P.getImage();else if(P instanceof JL){if(z=iC(P.getData()),!z)continue}else continue;const j=Math.floor(g*((i[0]-A[0])/N-x[1]*M[0])),$=Math.floor(g*((A[1]-i[1])/N-x[2]*M[1])),J=Math.round(g*s.getGutterForProjection(c.projection));return this.getImageData(z,j+J,$+J)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const r=this.getLayer().getSource();if(!r)return!1;const n=r.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===r.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=n,!0}enqueueTiles(e,r,n,i,l){const c=e.viewState,s=this.getLayer(),p=s.getRenderSource(),g=p.getTileGridForProjection(c.projection),_=Nr(p);_ in e.wantedTiles||(e.wantedTiles[_]={});const x=e.wantedTiles[_],P=s.getMapInternal(),A=Math.max(n-l,g.getMinZoom(),g.getZForResolution(Math.min(s.getMaxResolution(),P?P.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):g.getResolution(0)),p.zDirection)),M=c.rotation,N=M?HG(c.center,c.resolution,M,e.size):void 0;for(let z=n;z>=A;--z){const j=g.getTileRangeForExtentAndZ(r,z,this.tempTileRange_),$=g.getResolution(z);for(let J=j.minX;J<=j.maxX;++J)for(let X=j.minY;X<=j.maxY;++X){if(M&&!g.tileCoordIntersectsViewport([z,J,X],N))continue;const re=this.getTile(z,J,X,e);if(!re||!vT(i,re,z))continue;const Z=re.getKey();if(x[Z]=!0,re.getState()===qt.IDLE&&!e.tileQueue.isKeyQueued(Z)){const U=Ov(z,J,X,this.tempTileCoord_);e.tileQueue.enqueue([re,_,g.getTileCoordCenter(U),$])}}}}findStaleTile_(e,r){const n=this.tileCache_,i=e[0],l=e[1],c=e[2],s=this.getStaleKeys();for(let p=0;p<s.length;++p){const g=bT(this.getLayer().getSource(),s[p],i,l,c);if(n.containsKey(g)){const _=n.peek(g);if(_.getState()===qt.LOADED)return _.endTransition(Nr(this)),vT(r,_,i),!0}}return!1}findAltTiles_(e,r,n,i){const l=e.getTileRangeForTileCoordAndZ(r,n,this.tempTileRange_);if(!l)return!1;let c=!0;const s=this.tileCache_,p=this.getLayer().getRenderSource(),g=p.getKey();for(let _=l.minX;_<=l.maxX;++_)for(let x=l.minY;x<=l.maxY;++x){const P=bT(p,g,n,_,x);let A=!1;if(s.containsKey(P)){const M=s.peek(P);M.getState()===qt.LOADED&&(vT(i,M,n),A=!0)}A||(c=!1)}return c}renderFrame(e,r){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],i=e.viewState,l=i.projection,c=i.resolution,s=i.center,p=e.pixelRatio,g=this.getLayer(),_=g.getSource(),x=_.getTileGridForProjection(l),P=x.getZForResolution(c,_.zDirection),A=x.getResolution(P),M=_.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==M&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=M):this.renderedSourceKey_=M;let N=e.extent;const z=_.getTilePixelRatio(p);this.prepareContainer(e,r);const j=this.context.canvas.width,$=this.context.canvas.height,J=n.extent&&kc(n.extent);J&&(N=Cl(N,kc(n.extent)));const X=A*j/2/z,re=A*$/2/z,ne=[s[0]-X,s[1]-re,s[0]+X,s[1]+re],Z={};this.renderedTiles.length=0;const U=g.getPreload();if(e.nextExtent){const tt=x.getZForResolution(i.nextResolution,_.zDirection),Ke=YL(e,e.nextExtent);this.enqueueTiles(e,Ke,tt,Z,U)}const K=YL(e,N);if(this.enqueueTiles(e,K,P,Z,0),U>0&&setTimeout(()=>{this.enqueueTiles(e,K,P-1,Z,U-1)},0),!(P in Z))return this.container;const he=Nr(this),ue=e.time;for(const tt of Z[P]){const Ke=tt.getState();if(Ke===qt.EMPTY)continue;const Ze=tt.tileCoord;if(Ke===qt.LOADED&&tt.getAlpha(he,ue)===1){tt.endTransition(he);continue}if(Ke!==qt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ze,Z)){Rge(Z,tt,P),e.animate=!0;continue}if(this.findAltTiles_(x,Ze,P+1,Z))continue;const kt=x.getMinZoom();for(let Jt=P-1;Jt>=kt&&!this.findAltTiles_(x,Ze,Jt,Z);--Jt);}const Ee=A/c*p/z,Ie=this.getRenderContext(e);kl(this.tempTransform,j/2,$/2,Ee,Ee,0,-j/2,-$/2),n.extent&&this.clipUnrotated(Ie,e,J),_.getInterpolate()||(Ie.imageSmoothingEnabled=!1),this.preRender(Ie,e);const ee=Object.keys(Z).map(Number);ee.sort(Ia);let pe;const ve=[],xe=[];for(let tt=ee.length-1;tt>=0;--tt){const Ke=ee[tt],Ze=_.getTilePixelSize(Ke,p,l),qe=x.getResolution(Ke)/A,kt=Ze[0]*qe*Ee,Jt=Ze[1]*qe*Ee,Pt=x.getTileCoordForCoordAndZ(Bl(ne),Ke),dt=x.getTileCoordExtent(Pt),er=Li(this.tempTransform,[z*(dt[0]-ne[0])/A,z*(ne[3]-dt[3])/A]),Wt=z*_.getGutterForProjection(l);for(const ar of Z[Ke]){if(ar.getState()!==qt.LOADED)continue;const _t=ar.tileCoord,Ve=Pt[1]-_t[1],pt=Math.round(er[0]-(Ve-1)*kt),lt=Pt[2]-_t[2],Tt=Math.round(er[1]-(lt-1)*Jt),vt=Math.round(er[0]-Ve*kt),Dt=Math.round(er[1]-lt*Jt),Yt=pt-vt,Bt=Tt-Dt,xr=ee.length===1;let $r=!1;pe=[vt,Dt,vt+Yt,Dt,vt+Yt,Dt+Bt,vt,Dt+Bt];for(let Ir=0,Zr=ve.length;Ir<Zr;++Ir)if(!xr&&Ke<xe[Ir]){const yr=ve[Ir];ui([vt,Dt,vt+Yt,Dt+Bt],[yr[0],yr[3],yr[4],yr[7]])&&($r||(Ie.save(),$r=!0),Ie.beginPath(),Ie.moveTo(pe[0],pe[1]),Ie.lineTo(pe[2],pe[3]),Ie.lineTo(pe[4],pe[5]),Ie.lineTo(pe[6],pe[7]),Ie.moveTo(yr[6],yr[7]),Ie.lineTo(yr[4],yr[5]),Ie.lineTo(yr[2],yr[3]),Ie.lineTo(yr[0],yr[1]),Ie.clip())}ve.push(pe),xe.push(Ke),this.drawTile(ar,e,vt,Dt,Yt,Bt,Wt,xr),$r&&Ie.restore(),this.renderedTiles.unshift(ar),this.updateUsedTiles(e.usedTiles,_,ar)}}if(this.renderedResolution=A,this.extentChanged=!this.renderedExtent_||!hf(this.renderedExtent_,ne),this.renderedExtent_=ne,this.renderedPixelRatio=p,this.postRender(this.context,e),n.extent&&Ie.restore(),Ie.imageSmoothingEnabled=!0,this.renderComplete){const tt=(Ke,Ze)=>{const bt=Nr(_),qe=Ze.wantedTiles[bt],kt=qe?Object.keys(qe).length:0;this.updateCacheSize(kt),this.tileCache_.expireCache()};e.postRenderFunctions.push(tt)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,r,n,i,l,c,s,p){let g;if(e instanceof JL){if(g=iC(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const _=this.getRenderContext(r),x=Nr(this),P=r.layerStatesArray[r.layerIndex],A=P.opacity*(p?e.getAlpha(x,r.time):1),M=A!==_.globalAlpha;M&&(_.save(),_.globalAlpha=A),_.drawImage(g,s,s,g.width-2*s,g.height-2*s,n,i,l,c),M&&_.restore(),A!==P.opacity?r.animate=!0:p&&e.endTransition(x)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,r,n){const i=Nr(r);i in e||(e[i]={}),e[i][n.getKey()]=!0}}const Mge={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},XL={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Oge extends Ige{constructor(e,r){super(e,r),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=As(),this.tileClipContexts_=null}drawTile(e,r,n,i,l,c,s,p){this.updateExecutorGroup_(e,r.pixelRatio,r.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,r),super.drawTile(e,r,n,i,l,c,s,p)}getTile(e,r,n,i){const l=this.getOrCreateTile(e,r,n,i);if(!l)return null;const s=i.viewState.resolution,p=i.viewHints;return(!(p[ri.ANIMATING]||p[ri.INTERACTING])||!l.wantedResolution)&&(l.wantedResolution=s),l}prepareFrame(e){const r=this.getLayer().getRevision();return this.renderedLayerRevision_!==r&&(this.renderedLayerRevision_=r,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,r,n){const i=this.getLayer(),l=i.getRevision(),c=i.getRenderOrder()||null,s=e.wantedResolution,p=e.getReplayState(i);if(!p.dirty&&p.renderedResolution===s&&p.renderedRevision==l&&p.renderedRenderOrder==c)return;const g=i.getSource(),_=!!i.getDeclutter(),x=g.getTileGrid(),A=g.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),M=g.getSourceTiles(r,n,e),N=Nr(i);delete e.hitDetectionImageData[N],e.executorGroups[N]=[],p.dirty=!1;for(let z=0,j=M.length;z<j;++z){const $=M[z];if($.getState()!=qt.LOADED)continue;const J=$.tileCoord,X=x.getTileCoordExtent(J),re=Cl(A,X),ne=Hc(re,i.getRenderBuffer()*s,this.tempExtent),Z=hf(X,re)?null:ne,U=new KH(0,re,s,r),K=nC(s,r),he=function(pe,ve){let xe;const tt=pe.getStyleFunction()||i.getStyleFunction();if(tt&&(xe=tt(pe,s)),xe){const Ke=this.renderFeature(pe,K,xe,U,_,ve);p.dirty=p.dirty||Ke}},ue=$.getFeatures();c&&c!==p.renderedRenderOrder&&ue.sort(c);for(let pe=0,ve=ue.length;pe<ve;++pe){const xe=ue[pe];(!Z||ui(Z,xe.getGeometry().getExtent()))&&he.call(this,xe,pe)}const Ee=U.finish(),Ie=i.getRenderMode()!=="vector"&&_&&M.length===1?null:re,ee=new YH(Ie,s,r,g.getOverlaps(),Ee,i.getRenderBuffer(),!0);e.executorGroups[N].push(ee)}p.renderedRevision=l,p.renderedRenderOrder=c,p.renderedResolution=s}forEachFeatureAtCoordinate(e,r,n,i,l){const c=r.viewState.resolution,s=r.viewState.rotation;n=n??0;const p=this.getLayer(),_=p.getSource().getTileGridForProjection(r.viewState.projection),x=j2([e]);Hc(x,c*n,x);const P={},A=function(J,X,re){let ne=J.getId();ne===void 0&&(ne=Nr(J));const Z=P[ne];if(Z){if(Z!==!0&&re<Z.distanceSq){if(re===0)return P[ne]=!0,l.splice(l.lastIndexOf(Z),1),i(J,p,X);Z.geometry=X,Z.distanceSq=re}}else{if(re===0)return P[ne]=!0,i(J,p,X);l.push(P[ne]={feature:J,layer:p,geometry:X,distanceSq:re,callback:i})}},M=this.renderedTiles,N=Nr(p),z=p.getDeclutter(),j=z?r.declutter?.[z]?.all().map(J=>J.value):null;let $;e:for(let J=0,X=M.length;J<X;++J){const re=M[J],ne=_.getTileCoordExtent(re.wrappedTileCoord);if(!ui(ne,x))continue;const Z=re.executorGroups[N];for(let U=0,K=Z.length;U<K;++U)if($=Z[U].forEachFeatureAtCoordinate(e,c,s,n,A,j),$)break e}return $}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((r,n)=>{const i=this.getLayer(),l=i.getSource(),c=this.renderedProjection,s=c.getExtent(),p=this.renderedResolution,g=l.getTileGridForProjection(c),_=Li(this.renderedPixelToCoordinateTransform_,e.slice()),x=g.getTileCoordForCoordAndResolution(_,p).toString(),P=this.renderedTiles.find(J=>J.tileCoord.toString()===x&&J.getState()===qt.LOADED);if(!P||P.loadingSourceTiles>0){r([]);return}l.getWrapX()&&c.canWrapX()&&!ih(s,g.getTileCoordExtent(P.tileCoord))&&XI(_,c);const A=Nr(i),M=g.getTileCoordExtent(P.wrappedTileCoord),N=Bl(M),z=[(_[0]-N[0])/p,(N[1]-_[1])/p],j=P.getSourceTiles().reduce((J,X)=>J.concat(X.getFeatures()),[]);let $=P.hitDetectionImageData[A];if(!$){const J=uo(g.getTileSize(g.getZForResolution(p,l.zDirection))),X=this.renderedRotation_,re=[this.getRenderTransform(g.getTileCoordCenter(P.wrappedTileCoord),p,0,is,J[0]*is,J[1]*is,0)];$=XH(J,re,j,i.getStyleFunction(),g.getTileCoordExtent(P.wrappedTileCoord),P.getReplayState(i).renderedResolution,X),P.hitDetectionImageData[A]=$}r(QH(z,j,$))})}getFeaturesInExtent(e){const r=[],n=this.getTileCache();if(n.getCount()===0)return r;const l=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),c=l.getZForResolution(this.renderedResolution),s={};return n.forEach(p=>{if(p.tileCoord[0]!==c||p.getState()!==qt.LOADED)return;const g=p.getSourceTiles();for(let _=0,x=g.length;_<x;++_){const P=g[_],A=P.getKey();if(A in s)continue;s[A]=!0;const M=P.tileCoord;if(ui(e,l.getTileCoordExtent(M))){const N=P.getFeatures();if(N)for(let z=0,j=N.length;z<j;++z){const $=N[z],J=$.getGeometry();ui(e,J.getExtent())&&r.push($)}}}}),r}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,r){const n=this.context,i=n.globalAlpha;n.globalAlpha=r.opacity;const l=e.viewHints,c=!(l[ri.ANIMATING]||l[ri.INTERACTING]),s=[this.context.canvas.width,this.context.canvas.height],p=this.getLayer().getDeclutter(),g=p?e.declutter?.[p]:void 0,_=Nr(this.getLayer()),x=this.renderedTiles;for(let P=0,A=x.length;P<A;++P){const M=x[P],N=M.executorGroups[_];if(N)for(let z=N.length-1;z>=0;--z)N[z].execute(this.context,s,this.getTileRenderTransform(M,e),e.viewState.rotation,c,Iv,g)}n.globalAlpha=i}renderDeferredInternal(e){const r=this.renderedTiles,n=Nr(this.getLayer()),i=r.reduce((p,g,_)=>(g.executorGroups[n].forEach(x=>p.push({executorGroup:x,index:_})),p),[]),l=i.map(({executorGroup:p})=>p.getDeferredZIndexContexts()),c={};for(let p=0,g=i.length;p<g;++p){const _=i[p].executorGroup.getDeferredZIndexContexts();for(const x in _)c[x]=!0}Object.keys(c).map(Number).sort(Ia).forEach(p=>{l.forEach((g,_)=>{g[p]&&(g[p].forEach(x=>{const{executorGroup:P,index:A}=i[_],M=P.getRenderedContext(),N=M.globalAlpha;M.globalAlpha=this.renderedOpacity_;const z=this.tileClipContexts_[A];z&&z.draw(M),x.draw(M),z&&M.restore(),M.globalAlpha=N,x.clear()}),g[p].length=0)})})}getTileRenderTransform(e,r){const n=r.pixelRatio,i=r.viewState,l=i.center,c=i.resolution,s=i.rotation,p=r.size,g=Math.round(p[0]*n),_=Math.round(p[1]*n),P=this.getLayer().getSource().getTileGridForProjection(r.viewState.projection),A=e.tileCoord,M=P.getTileCoordExtent(e.wrappedTileCoord),N=P.getTileCoordExtent(A,this.tempExtent)[0]-M[0];return iM(ZE(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(l,c,s,n,g,_,N))}postRender(e,r){const n=r.viewHints,i=!(n[ri.ANIMATING]||n[ri.INTERACTING]);this.renderedPixelToCoordinateTransform_=r.pixelToCoordinateTransform.slice(),this.renderedRotation_=r.viewState.rotation,this.renderedOpacity_=r.layerStatesArray[r.layerIndex].opacity;const l=this.getLayer(),c=l.getRenderMode(),s=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const p=l.getDeclutter(),g=p?XL[c].filter(re=>!Iv.includes(re)):XL[c],_=r.viewState,x=_.rotation,P=l.getSource(),M=P.getTileGridForProjection(_.projection).getZForResolution(_.resolution,P.zDirection),N=this.renderedTiles,z=[],j=[],$=[],J=Nr(l);let X=!0;for(let re=N.length-1;re>=0;--re){const ne=N[re];X=X&&!ne.getReplayState(l).dirty;const Z=ne.executorGroups[J].filter(ee=>ee.hasExecutors(g));if(Z.length===0)continue;const U=this.getTileRenderTransform(ne,r),K=ne.tileCoord[0];let he=!1;const ue=Z[0].getClipCoords(U);let Ee=e,Ie;if(ue){Ie=new MM,Ee=Ie.getContext();for(let ee=0,pe=z.length;ee<pe;++ee)if(M!==K&&K<j[ee]){const ve=z[ee];ui([ue[0],ue[3],ue[4],ue[7]],[ve[0],ve[3],ve[4],ve[7]])&&(he||(Ee.save(),he=!0),Ee.beginPath(),Ee.moveTo(ue[0],ue[1]),Ee.lineTo(ue[2],ue[3]),Ee.lineTo(ue[4],ue[5]),Ee.lineTo(ue[6],ue[7]),Ee.moveTo(ve[6],ve[7]),Ee.lineTo(ve[4],ve[5]),Ee.lineTo(ve[2],ve[3]),Ee.lineTo(ve[0],ve[1]),Ee.clip())}z.push(ue),j.push(K)}for(let ee=0,pe=Z.length;ee<pe;++ee)Z[ee].execute(e,[e.canvas.width,e.canvas.height],U,x,i,g,r.declutter?.[p]);he&&(Ee===e?Ee.restore():$[re]=Ie)}e.globalAlpha=s,this.ready=X,this.tileClipContexts_=$,r.declutter||this.renderDeferredInternal(r),super.postRender(e,r)}renderFeature(e,r,n,i,l,c){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let p=0,g=n.length;p<g;++p)s=Mv(i,e,n[p],r,this.boundHandleStyleImageChange_,void 0,l,c)||s;else s=Mv(i,e,n,r,this.boundHandleStyleImageChange_,void 0,l,c);return s}tileImageNeedsRender_(e){const r=this.getLayer();if(r.getRenderMode()==="vector")return!1;const n=e.getReplayState(r),i=r.getRevision(),l=e.wantedResolution;return n.renderedTileResolution!==l||n.renderedTileRevision!==i}renderTileImage_(e,r){const n=this.getLayer(),i=e.getReplayState(n),l=n.getRevision(),c=e.executorGroups[Nr(n)];i.renderedTileRevision=l;const s=e.wrappedTileCoord,p=s[0],g=n.getSource();let _=r.pixelRatio;const P=r.viewState.projection,A=g.getTileGridForProjection(P),M=A.getResolution(e.tileCoord[0]),N=r.pixelRatio/e.wantedResolution*M,z=A.getResolution(p),j=e.getContext();_=Math.round(Math.max(_,N/_));const $=g.getTilePixelSize(p,_,P);j.canvas.width=$[0],j.canvas.height=$[1];const J=_/N;if(J!==1){const Z=sL(this.tmpTransform_);ZE(Z,J,J),j.setTransform.apply(j,Z)}const X=A.getTileCoordExtent(s,this.tempExtent),re=N/z,ne=sL(this.tmpTransform_);ZE(ne,re,-re),Yde(ne,-X[0],-X[3]);for(let Z=0,U=c.length;Z<U;++Z)c[Z].execute(j,[j.canvas.width*J,j.canvas.height*J],ne,0,!0,Mge[n.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}const q0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class gb extends RM{constructor(e){e=e||{};const r=Object.assign({},e);delete r.preload;const n=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete r.useInterimTilesOnError,super(r),this.on,this.once,this.un,this.cacheSize_=n;const i=e.renderMode||"hybrid";cn(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Oge(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(q0.PRELOAD)}getUseInterimTilesOnError(){return this.get(q0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(q0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(q0.USE_INTERIM_TILES_ON_ERROR,e)}}var kge=8,Lge={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Dge={"*":{type:"source"}},Nge=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Fge={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},zge={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},jge={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Bge={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},qge={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},$ge={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Vge={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Uge=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Gge={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hge={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Jge={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wge={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zge={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kge={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yge={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xge={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Qge={type:"array",value:"*"},eye={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},tye={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},rye={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},nye={type:"array",value:"*",minimum:1},iye={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},oye={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sye={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},aye={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},lye=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],cye={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},uye={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},hye={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},dye={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pye={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},fye={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mye={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},gye={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},yye={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},_ye={"*":{type:"string"}},bye={$version:kge,$root:Lge,sources:Dge,source:Nge,source_vector:Fge,source_raster:zge,source_raster_dem:jge,source_geojson:Bge,source_video:qge,source_image:$ge,layer:Vge,layout:Uge,layout_background:Gge,layout_fill:Hge,layout_circle:Jge,layout_heatmap:Wge,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Zge,layout_symbol:Kge,layout_raster:Yge,layout_hillshade:Xge,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Qge,filter_operator:eye,geometry_type:tye,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:rye,expression:nye,light:iye,sky:oye,terrain:sye,projection:aye,paint:lye,paint_fill:cye,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:uye,paint_circle:hye,paint_heatmap:dye,paint_symbol:pye,paint_raster:fye,paint_hillshade:mye,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:gye,transition:yye,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:_ye};const vye=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xye(t,e){const r={};for(const n in t)n!=="ref"&&(r[n]=t[n]);return vye.forEach(n=>{n in e&&(r[n]=e[n])}),r}function wye(t){t=t.slice();const e=Object.create(null);for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(let r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=xye(t[r],e[t[r].ref]));return t}class Ea extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}class kM{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[n,i]of r)this.bindings[n]=i}concat(e){return new kM(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const zx={kind:"null"},Ft={kind:"number"},Vr={kind:"string"},zr={kind:"boolean"},Oa={kind:"color"},jx={kind:"projectionDefinition"},_h={kind:"object"},Lr={kind:"value"},Eye={kind:"error"},Bx={kind:"collator"},qx={kind:"formatted"},$x={kind:"padding"},Cy={kind:"colorArray"},Vx={kind:"numberArray"},f_={kind:"resolvedImage"},Ux={kind:"variableAnchorOffsetCollection"};function os(t,e){return{kind:"array",itemType:t,N:e}}function Gn(t){if(t.kind==="array"){const e=Gn(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}else return t.kind}const Tye=[zx,Ft,Vr,zr,Oa,jx,qx,_h,os(Lr),$x,Vx,Cy,f_,Ux];function Py(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Py(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const r of Tye)if(!Py(r,e))return null}}return`Expected ${Gn(t)} but found ${Gn(e)} instead.`}function LM(t,e){return e.some(r=>r.kind===t.kind)}function bh(t,e){return e.some(r=>r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t)}function _c(t,e){return t.kind==="array"&&e.kind==="array"?t.itemType.kind===e.itemType.kind&&typeof t.N=="number":t.kind===e.kind}const fJ=.96422,mJ=1,gJ=.82521,yJ=4/29,jp=6/29,_J=3*jp*jp,Sye=jp*jp*jp,Cye=Math.PI/180,Pye=180/Math.PI;function bJ(t){return t=t%360,t<0&&(t+=360),t}function vJ([t,e,r,n]){t=xT(t),e=xT(e),r=xT(r);let i,l;const c=wT((.2225045*t+.7168786*e+.0606169*r)/mJ);t===e&&e===r?i=l=c:(i=wT((.4360747*t+.3850649*e+.1430804*r)/fJ),l=wT((.0139322*t+.0971045*e+.7141733*r)/gJ));const s=116*c-16;return[s<0?0:s,500*(i-c),200*(c-l),n]}function xT(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wT(t){return t>Sye?Math.pow(t,1/3):t/_J+yJ}function xJ([t,e,r,n]){let i=(t+16)/116,l=isNaN(e)?i:i+e/500,c=isNaN(r)?i:i-r/200;return i=mJ*TT(i),l=fJ*TT(l),c=gJ*TT(c),[ET(3.1338561*l-1.6168667*i-.4906146*c),ET(-.9787684*l+1.9161415*i+.033454*c),ET(.0719453*l-.2289914*i+1.4052427*c),n]}function ET(t){return t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055,t<0?0:t>1?1:t}function TT(t){return t>jp?t*t*t:_J*(t-yJ)}function Aye(t){const[e,r,n,i]=vJ(t),l=Math.sqrt(r*r+n*n);return[Math.round(l*1e4)?bJ(Math.atan2(n,r)*Pye):NaN,l,e,i]}function Rye([t,e,r,n]){return t=isNaN(t)?0:t*Cye,xJ([r,Math.cos(t)*e,Math.sin(t)*e,n])}function Iye([t,e,r,n]){t=bJ(t),e/=100,r/=100;function i(l){const c=(l+t/30)%12,s=e*Math.min(r,1-r);return r-s*Math.max(-1,Math.min(c-3,9-c,1))}return[i(0),i(8),i(4),n]}const Mye=Object.hasOwn||function(e,r){return Object.prototype.hasOwnProperty.call(e,r)};function wJ(t,e){return Mye(t,e)?t[e]:void 0}function Oye(t){if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];const e=wJ(kye,t);if(e){const[i,l,c]=e;return[i/255,l/255,c/255,1]}if(t.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){const l=t.length<6?1:2;let c=1;return[$0(t.slice(c,c+=l)),$0(t.slice(c,c+=l)),$0(t.slice(c,c+=l)),$0(t.slice(c,c+l)||"ff")]}if(t.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,l=t.match(i);if(l){const[c,s,p,g,_,x,P,A,M,N,z,j]=l,$=[g||" ",P||" ",N].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){const J=[p,x,M].join(""),X=J==="%%%"?100:J===""?255:0;if(X){const re=[vp(+s/X,0,1),vp(+_/X,0,1),vp(+A/X,0,1),z?QL(+z,j):1];if(eD(re))return re}}return}}const r=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=t.match(r);if(n){const[i,l,c,s,p,g,_,x,P]=n,A=[c||" ",p||" ",_].join("");if(A==="  "||A==="  /"||A===",,"||A===",,,"){const M=[+l,vp(+s,0,100),vp(+g,0,100),x?QL(+x,P):1];if(eD(M))return Iye(M)}}}function $0(t){return parseInt(t.padEnd(2,t),16)/255}function QL(t,e){return vp(e?t/100:t,0,1)}function vp(t,e,r){return Math.min(Math.max(e,t),r)}function eD(t){return!t.some(Number.isNaN)}const kye={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function vh(t,e,r){return t+r*(e-t)}function Ay(t,e,r){return t.map((n,i)=>vh(n,e[i],r))}class bn{constructor(e,r,n,i=1,l=!0){this.r=e,this.g=r,this.b=n,this.a=i,l||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,r,n,i]))}static parse(e){if(e instanceof bn)return e;if(typeof e!="string")return;const r=Oye(e);if(r)return new bn(...r,!1)}get rgb(){const{r:e,g:r,b:n,a:i}=this,l=i||1/0;return this.overwriteGetter("rgb",[e/l,r/l,n/l,i])}get hcl(){return this.overwriteGetter("hcl",Aye(this.rgb))}get lab(){return this.overwriteGetter("lab",vJ(this.rgb))}overwriteGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}toString(){const[e,r,n,i]=this.rgb;return`rgba(${[e,r,n].map(l=>Math.round(l*255)).join(",")},${i})`}static interpolate(e,r,n,i="rgb"){switch(i){case"rgb":{const[l,c,s,p]=Ay(e.rgb,r.rgb,n);return new bn(l,c,s,p,!1)}case"hcl":{const[l,c,s,p]=e.hcl,[g,_,x,P]=r.hcl;let A,M;if(!isNaN(l)&&!isNaN(g)){let J=g-l;g>l&&J>180?J-=360:g<l&&l-g>180&&(J+=360),A=l+n*J}else isNaN(l)?isNaN(g)?A=NaN:(A=g,(s===1||s===0)&&(M=_)):(A=l,(x===1||x===0)&&(M=c));const[N,z,j,$]=Rye([A,M??vh(c,_,n),vh(s,x,n),vh(p,P,n)]);return new bn(N,z,j,$,!1)}case"lab":{const[l,c,s,p]=xJ(Ay(e.lab,r.lab,n));return new bn(l,c,s,p,!1)}}}}bn.black=new bn(0,0,0,1);bn.white=new bn(1,1,1,1);bn.transparent=new bn(0,0,0,0);bn.red=new bn(1,0,0,1);class DM{constructor(e,r,n){e?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Lye=["bottom","center","top"];class oC{constructor(e,r,n,i,l,c){this.text=e,this.image=r,this.scale=n,this.fontStack=i,this.textColor=l,this.verticalAlign=c}}class Rl{constructor(e){this.sections=e}static fromString(e){return new Rl([new oC(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Rl?e:Rl.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Qs{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Qs)return e;if(typeof e=="number")return new Qs([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const r of e)if(typeof r!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Qs(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){return new Qs(Ay(e.values,r.values,n))}}class ea{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ea)return e;if(typeof e=="number")return new ea([e]);if(Array.isArray(e)){for(const r of e)if(typeof r!="number")return;return new ea(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){return new ea(Ay(e.values,r.values,n))}}class ss{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ss)return e;if(typeof e=="string"){const n=bn.parse(e);return n?new ss([n]):void 0}if(!Array.isArray(e))return;const r=[];for(const n of e){if(typeof n!="string")return;const i=bn.parse(n);if(!i)return;r.push(i)}return new ss(r)}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n,i="rgb"){const l=[];if(e.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let c=0;c<e.values.length;c++)l.push(bn.interpolate(e.values[c],r.values[c],n,i));return new ss(l)}}class Wn extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Dye=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ka{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ka)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let r=0;r<e.length;r+=2){const n=e[r],i=e[r+1];if(typeof n!="string"||!Dye.has(n)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new ka(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){const i=e.values,l=r.values;if(i.length!==l.length)throw new Wn(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${r.toString()}`);const c=[];for(let s=0;s<i.length;s+=2){if(i[s]!==l[s])throw new Wn(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${i[s]}, to[${s}]: ${l[s]}`);c.push(i[s]);const[p,g]=i[s+1],[_,x]=l[s+1];c.push([vh(p,_,n),vh(g,x,n)])}return new ka(c)}}class au{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new au({name:e,available:!1}):null}}class Zs{constructor(e,r,n){this.from=e,this.to=r,this.transition=n}static interpolate(e,r,n){return new Zs(e,r,n)}static parse(e){if(e instanceof Zs)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Zs(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Zs(e.from,e.to,e.transition);if(typeof e=="string")return new Zs(e,e,1)}}function EJ(t,e,r,n){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ry(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof Zs||t instanceof bn||t instanceof DM||t instanceof Rl||t instanceof Qs||t instanceof ea||t instanceof ss||t instanceof ka||t instanceof au)return!0;if(Array.isArray(t)){for(const e of t)if(!Ry(e))return!1;return!0}else if(typeof t=="object"){for(const e in t)if(!Ry(t[e]))return!1;return!0}else return!1}function xi(t){if(t===null)return zx;if(typeof t=="string")return Vr;if(typeof t=="boolean")return zr;if(typeof t=="number")return Ft;if(t instanceof bn)return Oa;if(t instanceof Zs)return jx;if(t instanceof DM)return Bx;if(t instanceof Rl)return qx;if(t instanceof Qs)return $x;if(t instanceof ea)return Vx;if(t instanceof ss)return Cy;if(t instanceof ka)return Ux;if(t instanceof au)return f_;if(Array.isArray(t)){const e=t.length;let r;for(const n of t){const i=xi(n);if(!r)r=i;else{if(r===i)continue;r=Lr;break}}return os(r||Lr,e)}else return _h}function jg(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof bn||t instanceof Zs||t instanceof Rl||t instanceof Qs||t instanceof ea||t instanceof ss||t instanceof ka||t instanceof au?t.toString():JSON.stringify(t)}class bf{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ry(e[1]))return r.error("invalid value");const n=e[1];let i=xi(n);const l=r.expectedType;return i.kind==="array"&&i.N===0&&l&&l.kind==="array"&&(typeof l.N!="number"||l.N===0)&&(i=l),new bf(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const V0={string:Vr,number:Ft,boolean:zr,object:_h};class Ks{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=1,i;const l=e[0];if(l==="array"){let s;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in V0)||g==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);s=V0[g],n++}else s=Lr;let p;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);p=e[2],n++}i=os(s,p)}else{if(!V0[l])throw new Error(`Types doesn't contain name = ${l}`);i=V0[l]}const c=[];for(;n<e.length;n++){const s=r.parse(e[n],n,Lr);if(!s)return null;c.push(s)}return new Ks(i,c)}evaluate(e){for(let r=0;r<this.args.length;r++){const n=this.args[r].evaluate(e);if(Py(this.type,xi(n))){if(r===this.args.length-1)throw new Wn(`Expected value to be of type ${Gn(this.type)}, but found ${Gn(xi(n))} instead.`)}else return n}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const tD={"to-boolean":zr,"to-color":Oa,"to-number":Ft,"to-string":Vr};class Fc{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const n=e[0];if(!tD[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if((n==="to-boolean"||n==="to-string")&&e.length!==2)return r.error("Expected one argument.");const i=tD[n],l=[];for(let c=1;c<e.length;c++){const s=r.parse(e[c],c,Lr);if(!s)return null;l.push(s)}return new Fc(i,l)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let r,n;for(const i of this.args){if(r=i.evaluate(e),n=null,r instanceof bn)return r;if(typeof r=="string"){const l=e.parseColor(r);if(l)return l}else if(Array.isArray(r)&&(r.length<3||r.length>4?n=`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:n=EJ(r[0],r[1],r[2],r[3]),!n))return new bn(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Wn(n||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const n of this.args){r=n.evaluate(e);const i=Qs.parse(r);if(i)return i}throw new Wn(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"numberArray":{let r;for(const n of this.args){r=n.evaluate(e);const i=ea.parse(r);if(i)return i}throw new Wn(`Could not parse numberArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"colorArray":{let r;for(const n of this.args){r=n.evaluate(e);const i=ss.parse(r);if(i)return i}throw new Wn(`Could not parse colorArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const n of this.args){r=n.evaluate(e);const i=ka.parse(r);if(i)return i}throw new Wn(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const n of this.args){if(r=n.evaluate(e),r===null)return 0;const i=Number(r);if(!isNaN(i))return i}throw new Wn(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Rl.fromString(jg(this.args[0].evaluate(e)));case"resolvedImage":return au.fromString(jg(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return jg(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Nye=["Unknown","Point","LineString","Polygon"];class TJ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Nye[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let r=this._parseColorCache.get(e);return r||(r=bn.parse(e),this._parseColorCache.set(e,r)),r}}class Gx{constructor(e,r,n=[],i,l=new kM,c=[]){this.registry=e,this.path=n,this.key=n.map(s=>`[${s}]`).join(""),this.scope=l,this.errors=c,this.expectedType=i,this._isConstant=r}parse(e,r,n,i,l={}){return r?this.concat(r,n,i)._parse(e,l):this._parse(e,l)}_parse(e,r){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(i,l,c){return c==="assert"?new Ks(l,[i]):c==="coerce"?new Fc(l,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const l=this.registry[i];if(l){let c=l.parse(e,this);if(!c)return null;if(this.expectedType){const s=this.expectedType,p=c.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&p.kind==="value")c=n(c,s,r.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&["string","array"].includes(p.kind)||["color","formatted","resolvedImage"].includes(s.kind)&&["value","string"].includes(p.kind)||["padding","numberArray"].includes(s.kind)&&["value","number","array"].includes(p.kind)||s.kind==="colorArray"&&["value","string","array"].includes(p.kind)||s.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(p.kind))c=n(c,s,r.typeAnnotation||"coerce");else if(this.checkSubtype(s,p))return null}if(!(c instanceof bf)&&c.type.kind!=="resolvedImage"&&this._isConstant(c)){const s=new TJ;try{c=new bf(c.type,c.evaluate(s))}catch(p){return this.error(p.message),null}}return c}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,r,n){const i=typeof e=="number"?this.path.concat(e):this.path,l=n?this.scope.concat(n):this.scope;return new Gx(this.registry,this._isConstant,i,r||null,l,this.errors)}error(e,...r){const n=`${this.key}${r.map(i=>`[${i}]`).join("")}`;this.errors.push(new Ea(n,e))}checkSubtype(e,r){const n=Py(e,r);return n&&this.error(n),n}}class Hx{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let l=1;l<e.length-1;l+=2){const c=e[l];if(typeof c!="string")return r.error(`Expected string, but found ${typeof c} instead.`,l);if(/[^a-zA-Z0-9_]/.test(c))return r.error("Variable names must contain only alphanumeric characters or '_'.",l);const s=r.parse(e[l+1],l+1);if(!s)return null;n.push([c,s])}const i=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return i?new Hx(n,i):null}outputDefined(){return this.result.outputDefined()}}class Jx{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const n=e[1];return r.scope.has(n)?new Jx(n,r.scope.get(n)):r.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class NM{constructor(e,r,n){this.type=e,this.index=r,this.input=n}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Ft),i=r.parse(e[2],2,os(r.expectedType||Lr));if(!n||!i)return null;const l=i.type;return new NM(l.itemType,n,i)}evaluate(e){const r=this.index.evaluate(e),n=this.input.evaluate(e);if(r<0)throw new Wn(`Array index out of bounds: ${r} < 0.`);if(r>=n.length)throw new Wn(`Array index out of bounds: ${r} > ${n.length-1}.`);if(r!==Math.floor(r))throw new Wn(`Array index must be an integer, but found ${r} instead.`);return n[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class FM{constructor(e,r){this.type=zr,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Lr),i=r.parse(e[2],2,Lr);return!n||!i?null:LM(n.type,[zr,Vr,Ft,zx,Lr])?new FM(n,i):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(n.type)} instead`)}evaluate(e){const r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!bh(r,["boolean","string","number","null"]))throw new Wn(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(xi(r))} instead.`);if(!bh(n,["string","array"]))throw new Wn(`Expected second argument to be of type array or string, but found ${Gn(xi(n))} instead.`);return n.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class kv{constructor(e,r,n){this.type=Ft,this.needle=e,this.haystack=r,this.fromIndex=n}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Lr),i=r.parse(e[2],2,Lr);if(!n||!i)return null;if(!LM(n.type,[zr,Vr,Ft,zx,Lr]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(n.type)} instead`);if(e.length===4){const l=r.parse(e[3],3,Ft);return l?new kv(n,i,l):null}else return new kv(n,i)}evaluate(e){const r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!bh(r,["boolean","string","number","null"]))throw new Wn(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(xi(r))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),bh(n,["string"])){const l=n.indexOf(r,i);return l===-1?-1:[...n.slice(0,l)].length}else{if(bh(n,["array"]))return n.indexOf(r,i);throw new Wn(`Expected second argument to be of type array or string, but found ${Gn(xi(n))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class zM{constructor(e,r,n,i,l,c){this.inputType=e,this.type=r,this.input=n,this.cases=i,this.outputs=l,this.otherwise=c}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return r.error("Expected an even number of arguments.");let n,i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);const l={},c=[];for(let g=2;g<e.length-1;g+=2){let _=e[g];const x=e[g+1];Array.isArray(_)||(_=[_]);const P=r.concat(g);if(_.length===0)return P.error("Expected at least one branch label.");for(const M of _){if(typeof M!="number"&&typeof M!="string")return P.error("Branch labels must be numbers or strings.");if(typeof M=="number"&&Math.abs(M)>Number.MAX_SAFE_INTEGER)return P.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof M=="number"&&Math.floor(M)!==M)return P.error("Numeric branch labels must be integer values.");if(!n)n=xi(M);else if(P.checkSubtype(n,xi(M)))return null;if(typeof l[String(M)]<"u")return P.error("Branch labels must be unique.");l[String(M)]=c.length}const A=r.parse(x,g,i);if(!A)return null;i=i||A.type,c.push(A)}const s=r.parse(e[1],1,Lr);if(!s)return null;const p=r.parse(e[e.length-1],e.length-1,i);return!p||s.type.kind!=="value"&&r.concat(1).checkSubtype(n,s.type)?null:new zM(n,i,s,l,c,p)}evaluate(e){const r=this.input.evaluate(e);return(xi(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class jM{constructor(e,r,n){this.type=e,this.branches=r,this.otherwise=n}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return r.error("Expected an odd number of arguments.");let n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);const i=[];for(let c=1;c<e.length-1;c+=2){const s=r.parse(e[c],c,zr);if(!s)return null;const p=r.parse(e[c+1],c+1,n);if(!p)return null;i.push([s,p]),n=n||p.type}const l=r.parse(e[e.length-1],e.length-1,n);if(!l)return null;if(!n)throw new Error("Can't infer output type");return new jM(n,i,l)}evaluate(e){for(const[r,n]of this.branches)if(r.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,n]of this.branches)e(r),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}}class Lv{constructor(e,r,n,i){this.type=e,this.input=r,this.beginIndex=n,this.endIndex=i}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Lr),i=r.parse(e[2],2,Ft);if(!n||!i)return null;if(!LM(n.type,[os(Lr),Vr,Lr]))return r.error(`Expected first argument to be of type array or string, but found ${Gn(n.type)} instead`);if(e.length===4){const l=r.parse(e[3],3,Ft);return l?new Lv(n.type,n,i,l):null}else return new Lv(n.type,n,i)}evaluate(e){const r=this.input.evaluate(e),n=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),bh(r,["string"]))return[...r].slice(n,i).join("");if(bh(r,["array"]))return r.slice(n,i);throw new Wn(`Expected first argument to be of type array or string, but found ${Gn(xi(r))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function SJ(t,e){const r=t.length-1;let n=0,i=r,l=0,c,s;for(;n<=i;)if(l=Math.floor((n+i)/2),c=t[l],s=t[l+1],c<=e){if(l===r||e<s)return l;n=l+1}else if(c>e)i=l-1;else throw new Wn("Input is not a number.");return 0}class Wx{constructor(e,r,n){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[i,l]of n)this.labels.push(i),this.outputs.push(l)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");const n=r.parse(e[1],1,Ft);if(!n)return null;const i=[];let l=null;r.expectedType&&r.expectedType.kind!=="value"&&(l=r.expectedType);for(let c=1;c<e.length;c+=2){const s=c===1?-1/0:e[c],p=e[c+1],g=c,_=c+1;if(typeof s!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const x=r.parse(p,_,l);if(!x)return null;l=l||x.type,i.push([s,x])}return new Wx(l,n,i)}evaluate(e){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);const l=r.length;if(i>=r[l-1])return n[l-1].evaluate(e);const c=SJ(r,i);return n[c].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Fye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ST,rD;function zye(){if(rD)return ST;rD=1,ST=t;function t(e,r,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(i-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=i}return t.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var l=this.sampleCurveX(n)-e;if(Math.abs(l)<r)return n;var c=this.sampleCurveDerivativeX(n);if(Math.abs(c)<1e-6)break;n=n-l/c}var s=0,p=1;for(n=e,i=0;i<20&&(l=this.sampleCurveX(n),!(Math.abs(l-e)<r));i++)e>l?s=n:p=n,n=(p-s)*.5+s;return n},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},ST}var jye=zye(),Bye=Fye(jye);class La{constructor(e,r,n,i,l){this.type=e,this.operator=r,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[c,s]of l)this.labels.push(c),this.outputs.push(s)}static interpolationFactor(e,r,n,i){let l=0;if(e.name==="exponential")l=CT(r,e.base,n,i);else if(e.name==="linear")l=CT(r,1,n,i);else if(e.name==="cubic-bezier"){const c=e.controlPoints;l=new Bye(c[0],c[1],c[2],c[3]).solve(CT(r,1,n,i))}return l}static parse(e,r){let[n,i,l,...c]=e;if(!Array.isArray(i)||i.length===0)return r.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(_=>typeof _!="number"||_<0||_>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return r.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(l=r.parse(l,2,Ft),!l)return null;const s=[];let p=null;(n==="interpolate-hcl"||n==="interpolate-lab")&&r.expectedType!=Cy?p=Oa:r.expectedType&&r.expectedType.kind!=="value"&&(p=r.expectedType);for(let g=0;g<c.length;g+=2){const _=c[g],x=c[g+1],P=g+3,A=g+4;if(typeof _!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(s.length&&s[s.length-1][0]>=_)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',P);const M=r.parse(x,A,p);if(!M)return null;p=p||M.type,s.push([_,M])}return!_c(p,Ft)&&!_c(p,jx)&&!_c(p,Oa)&&!_c(p,$x)&&!_c(p,Vx)&&!_c(p,Cy)&&!_c(p,Ux)&&!_c(p,os(Ft))?r.error(`Type ${Gn(p)} is not interpolatable.`):new La(p,n,i,l,s)}evaluate(e){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);const l=r.length;if(i>=r[l-1])return n[l-1].evaluate(e);const c=SJ(r,i),s=r[c],p=r[c+1],g=La.interpolationFactor(this.interpolation,i,s,p),_=n[c].evaluate(e),x=n[c+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return vh(_,x,g);case"color":return bn.interpolate(_,x,g);case"padding":return Qs.interpolate(_,x,g);case"colorArray":return ss.interpolate(_,x,g);case"numberArray":return ea.interpolate(_,x,g);case"variableAnchorOffsetCollection":return ka.interpolate(_,x,g);case"array":return Ay(_,x,g);case"projectionDefinition":return Zs.interpolate(_,x,g)}case"interpolate-hcl":switch(this.type.kind){case"color":return bn.interpolate(_,x,g,"hcl");case"colorArray":return ss.interpolate(_,x,g,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return bn.interpolate(_,x,g,"lab");case"colorArray":return ss.interpolate(_,x,g,"lab")}}}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function CT(t,e,r,n){const i=n-r,l=t-r;return i===0?0:e===1?l/i:(Math.pow(e,l)-1)/(Math.pow(e,i)-1)}class Iy{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=null;const i=r.expectedType;i&&i.kind!=="value"&&(n=i);const l=[];for(const s of e.slice(1)){const p=r.parse(s,1+l.length,n,void 0,{typeAnnotation:"omit"});if(!p)return null;n=n||p.type,l.push(p)}if(!n)throw new Error("No output type");return i&&l.some(s=>Py(i,s.type))?new Iy(Lr,l):new Iy(n,l)}evaluate(e){let r=null,n=0,i;for(const l of this.args)if(n++,r=l.evaluate(e),r&&r instanceof au&&!r.available&&(i||(i=r.name),r=null,n===this.args.length&&(r=i)),r!==null)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function nD(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function qye(t,e,r){return e===r}function $ye(t,e,r){return e!==r}function Vye(t,e,r){return e<r}function Uye(t,e,r){return e>r}function Gye(t,e,r){return e<=r}function Hye(t,e,r){return e>=r}function CJ(t,e,r,n){return n.compare(e,r)===0}function Jye(t,e,r,n){return!CJ(t,e,r,n)}function Wye(t,e,r,n){return n.compare(e,r)<0}function Zye(t,e,r,n){return n.compare(e,r)>0}function Kye(t,e,r,n){return n.compare(e,r)<=0}function Yye(t,e,r,n){return n.compare(e,r)>=0}function Nf(t,e,r){const n=t!=="=="&&t!=="!=";return class PJ{constructor(l,c,s){this.type=zr,this.lhs=l,this.rhs=c,this.collator=s,this.hasUntypedArgument=l.type.kind==="value"||c.type.kind==="value"}static parse(l,c){if(l.length!==3&&l.length!==4)return c.error("Expected two or three arguments.");const s=l[0];let p=c.parse(l[1],1,Lr);if(!p)return null;if(!nD(s,p.type))return c.concat(1).error(`"${s}" comparisons are not supported for type '${Gn(p.type)}'.`);let g=c.parse(l[2],2,Lr);if(!g)return null;if(!nD(s,g.type))return c.concat(2).error(`"${s}" comparisons are not supported for type '${Gn(g.type)}'.`);if(p.type.kind!==g.type.kind&&p.type.kind!=="value"&&g.type.kind!=="value")return c.error(`Cannot compare types '${Gn(p.type)}' and '${Gn(g.type)}'.`);n&&(p.type.kind==="value"&&g.type.kind!=="value"?p=new Ks(g.type,[p]):p.type.kind!=="value"&&g.type.kind==="value"&&(g=new Ks(p.type,[g])));let _=null;if(l.length===4){if(p.type.kind!=="string"&&g.type.kind!=="string"&&p.type.kind!=="value"&&g.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(_=c.parse(l[3],3,Bx),!_)return null}return new PJ(p,g,_)}evaluate(l){const c=this.lhs.evaluate(l),s=this.rhs.evaluate(l);if(n&&this.hasUntypedArgument){const p=xi(c),g=xi(s);if(p.kind!==g.kind||!(p.kind==="string"||p.kind==="number"))throw new Wn(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${p.kind}, ${g.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const p=xi(c),g=xi(s);if(p.kind!=="string"||g.kind!=="string")return e(l,c,s)}return this.collator?r(l,c,s,this.collator.evaluate(l)):e(l,c,s)}eachChild(l){l(this.lhs),l(this.rhs),this.collator&&l(this.collator)}outputDefined(){return!0}}}const Xye=Nf("==",qye,CJ),Qye=Nf("!=",$ye,Jye),e_e=Nf("<",Vye,Wye),t_e=Nf(">",Uye,Zye),r_e=Nf("<=",Gye,Kye),n_e=Nf(">=",Hye,Yye);class Zx{constructor(e,r,n){this.type=Bx,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");const i=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,zr);if(!i)return null;const l=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,zr);if(!l)return null;let c=null;return n.locale&&(c=r.parse(n.locale,1,Vr),!c)?null:new Zx(i,l,c)}evaluate(e){return new DM(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class BM{constructor(e,r,n,i,l){this.type=Vr,this.number=e,this.locale=r,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=l}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const n=r.parse(e[1],1,Ft);if(!n)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return r.error("NumberFormat options argument must be an object.");let l=null;if(i.locale&&(l=r.parse(i.locale,1,Vr),!l))return null;let c=null;if(i.currency&&(c=r.parse(i.currency,1,Vr),!c))return null;let s=null;if(i["min-fraction-digits"]&&(s=r.parse(i["min-fraction-digits"],1,Ft),!s))return null;let p=null;return i["max-fraction-digits"]&&(p=r.parse(i["max-fraction-digits"],1,Ft),!p)?null:new BM(n,l,c,s,p)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class qM{constructor(e){this.type=qx,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");const i=[];let l=!1;for(let c=1;c<=e.length-1;++c){const s=e[c];if(l&&typeof s=="object"&&!Array.isArray(s)){l=!1;let p=null;if(s["font-scale"]&&(p=r.parse(s["font-scale"],1,Ft),!p))return null;let g=null;if(s["text-font"]&&(g=r.parse(s["text-font"],1,os(Vr)),!g))return null;let _=null;if(s["text-color"]&&(_=r.parse(s["text-color"],1,Oa),!_))return null;let x=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!Lye.includes(s["vertical-align"]))return r.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(x=r.parse(s["vertical-align"],1,Vr),!x)return null}const P=i[i.length-1];P.scale=p,P.font=g,P.textColor=_,P.verticalAlign=x}else{const p=r.parse(e[c],1,Lr);if(!p)return null;const g=p.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");l=!0,i.push({content:p,scale:null,font:null,textColor:null,verticalAlign:null})}}return new qM(i)}evaluate(e){const r=n=>{const i=n.content.evaluate(e);return xi(i)===f_?new oC("",i,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(e):null):new oC(jg(i),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null,n.verticalAlign?n.verticalAlign.evaluate(e):null)};return new Rl(this.sections.map(r))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor),r.verticalAlign&&e(r.verticalAlign)}outputDefined(){return!1}}class $M{constructor(e){this.type=f_,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const n=r.parse(e[1],1,Vr);return n?new $M(n):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),n=au.fromString(r);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(r)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class VM{constructor(e){this.type=Ft,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=r.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Gn(n.type)} instead.`):new VM(n):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new Wn(`Expected value to be of type string or array, but found ${Gn(xi(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Da=8192;function i_e(t,e){const r=o_e(t[0]),n=a_e(t[1]),i=Math.pow(2,e.z);return[Math.round(r*i*Da),Math.round(n*i*Da)]}function UM(t,e){const r=Math.pow(2,e.z),n=(t[0]/Da+e.x)/r,i=(t[1]/Da+e.y)/r;return[s_e(n),l_e(i)]}function o_e(t){return(180+t)/360}function s_e(t){return t*360-180}function a_e(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function l_e(t){return 360/Math.PI*Math.atan(Math.exp((180-t*360)*Math.PI/180))-90}function m_(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function My(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function c_e(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function u_e(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],l=t[0]-r[0],c=t[1]-r[1];return n*c-l*i===0&&n*l<=0&&i*c<=0}function Kx(t,e,r,n){const i=[e[0]-t[0],e[1]-t[1]],l=[n[0]-r[0],n[1]-r[1]];return f_e(l,i)===0?!1:!!(iD(t,e,r,n)&&iD(r,n,t,e))}function h_e(t,e,r){for(const n of r)for(let i=0;i<n.length-1;++i)if(Kx(t,e,n[i],n[i+1]))return!0;return!1}function Ff(t,e,r=!1){let n=!1;for(const i of e)for(let l=0;l<i.length-1;l++){if(u_e(t,i[l],i[l+1]))return r;c_e(t,i[l],i[l+1])&&(n=!n)}return n}function d_e(t,e){for(const r of e)if(Ff(t,r))return!0;return!1}function AJ(t,e){for(const r of t)if(!Ff(r,e))return!1;for(let r=0;r<t.length-1;++r)if(h_e(t[r],t[r+1],e))return!1;return!0}function p_e(t,e){for(const r of e)if(AJ(t,r))return!0;return!1}function f_e(t,e){return t[0]*e[1]-t[1]*e[0]}function iD(t,e,r,n){const i=t[0]-r[0],l=t[1]-r[1],c=e[0]-r[0],s=e[1]-r[1],p=n[0]-r[0],g=n[1]-r[1],_=i*g-p*l,x=c*g-p*s;return _>0&&x<0||_<0&&x>0}function GM(t,e,r){const n=[];for(let i=0;i<t.length;i++){const l=[];for(let c=0;c<t[i].length;c++){const s=i_e(t[i][c],r);m_(e,s),l.push(s)}n.push(l)}return n}function RJ(t,e,r){const n=[];for(let i=0;i<t.length;i++){const l=GM(t[i],e,r);n.push(l)}return n}function IJ(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const i=n*.5;let l=t[0]-r[0]>i?-n:r[0]-t[0]>i?n:0;l===0&&(l=t[0]-r[2]>i?-n:r[2]-t[0]>i?n:0),t[0]+=l}m_(e,t)}function m_e(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function oD(t,e,r,n){const i=Math.pow(2,n.z)*Da,l=[n.x*Da,n.y*Da],c=[];for(const s of t)for(const p of s){const g=[p.x+l[0],p.y+l[1]];IJ(g,e,r,i),c.push(g)}return c}function sD(t,e,r,n){const i=Math.pow(2,n.z)*Da,l=[n.x*Da,n.y*Da],c=[];for(const s of t){const p=[];for(const g of s){const _=[g.x+l[0],g.y+l[1]];m_(e,_),p.push(_)}c.push(p)}if(e[2]-e[0]<=i/2){m_e(e);for(const s of c)for(const p of s)IJ(p,e,r,i)}return c}function g_e(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(e.type==="Polygon"){const l=GM(e.coordinates,n,i),c=oD(t.geometry(),r,n,i);if(!My(r,n))return!1;for(const s of c)if(!Ff(s,l))return!1}if(e.type==="MultiPolygon"){const l=RJ(e.coordinates,n,i),c=oD(t.geometry(),r,n,i);if(!My(r,n))return!1;for(const s of c)if(!d_e(s,l))return!1}return!0}function y_e(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(e.type==="Polygon"){const l=GM(e.coordinates,n,i),c=sD(t.geometry(),r,n,i);if(!My(r,n))return!1;for(const s of c)if(!AJ(s,l))return!1}if(e.type==="MultiPolygon"){const l=RJ(e.coordinates,n,i),c=sD(t.geometry(),r,n,i);if(!My(r,n))return!1;for(const s of c)if(!p_e(s,l))return!1}return!0}class xh{constructor(e,r){this.type=zr,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ry(e[1])){const n=e[1];if(n.type==="FeatureCollection"){const i=[];for(const l of n.features){const{type:c,coordinates:s}=l.geometry;c==="Polygon"&&i.push(s),c==="MultiPolygon"&&i.push(...s)}if(i.length){const l={type:"MultiPolygon",coordinates:i};return new xh(n,l)}}else if(n.type==="Feature"){const i=n.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new xh(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new xh(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return g_e(e,this.geometries);if(e.geometryType()==="LineString")return y_e(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class MJ{constructor(e=[],r=(n,i)=>n<i?-1:n>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:n}=this,i=r[e];for(;e>0;){const l=e-1>>1,c=r[l];if(n(i,c)>=0)break;r[e]=c,e=l}r[e]=i}_down(e){const{data:r,compare:n}=this,i=this.length>>1,l=r[e];for(;e<i;){let c=(e<<1)+1;const s=c+1;if(s<this.length&&n(r[s],r[c])<0&&(c=s),n(r[c],l)>=0)break;r[e]=r[c],e=c}r[e]=l}}function __e(t,e){if(t.length<=1)return[t];const n=[];let i,l;for(const c of t){const s=b_e(c);s!==0&&(c.area=Math.abs(s),l===void 0&&(l=s<0),l===s<0?(i&&n.push(i),i=[c]):i.push(c))}return i&&n.push(i),n}function b_e(t){let e=0;for(let r=0,n=t.length,i=n-1,l,c;r<n;i=r++)l=t[r],c=t[i],e+=(c.x-l.x)*(l.y+c.y);return e}const v_e=6378.137,aD=1/298.257223563,lD=aD*(2-aD),cD=Math.PI/180;class HM{constructor(e){const r=cD*v_e*1e3,n=Math.cos(e*cD),i=1/(1-lD*(1-n*n)),l=Math.sqrt(i);this.kx=r*l*n,this.ky=r*l*i*(1-lD)}distance(e,r){const n=this.wrap(e[0]-r[0])*this.kx,i=(e[1]-r[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(e,r){let n=1/0,i,l,c,s;for(let p=0;p<e.length-1;p++){let g=e[p][0],_=e[p][1],x=this.wrap(e[p+1][0]-g)*this.kx,P=(e[p+1][1]-_)*this.ky,A=0;(x!==0||P!==0)&&(A=(this.wrap(r[0]-g)*this.kx*x+(r[1]-_)*this.ky*P)/(x*x+P*P),A>1?(g=e[p+1][0],_=e[p+1][1]):A>0&&(g+=x/this.kx*A,_+=P/this.ky*A)),x=this.wrap(r[0]-g)*this.kx,P=(r[1]-_)*this.ky;const M=x*x+P*P;M<n&&(n=M,i=g,l=_,c=p,s=A)}return{point:[i,l],index:c,t:Math.max(0,Math.min(1,s))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const sC=100,aC=50;function OJ(t,e){return e[0]-t[0]}function Dv(t){return t[1]-t[0]+1}function Dl(t,e){return t[1]>=t[0]&&t[1]<e}function lC(t,e){if(t[0]>t[1])return[null,null];const r=Dv(t);if(e){if(r===2)return[t,null];const i=Math.floor(r/2);return[[t[0],t[0]+i],[t[0]+i,t[1]]]}if(r===1)return[t,null];const n=Math.floor(r/2)-1;return[[t[0],t[0]+n],[t[0]+n+1,t[1]]]}function cC(t,e){if(!Dl(e,t.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let n=e[0];n<=e[1];++n)m_(r,t[n]);return r}function uC(t){const e=[1/0,1/0,-1/0,-1/0];for(const r of t)for(const n of r)m_(e,n);return e}function uD(t){return t[0]!==-1/0&&t[1]!==-1/0&&t[2]!==1/0&&t[3]!==1/0}function JM(t,e,r){if(!uD(t)||!uD(e))return NaN;let n=0,i=0;return t[2]<e[0]&&(n=e[0]-t[2]),t[0]>e[2]&&(n=t[0]-e[2]),t[1]>e[3]&&(i=t[1]-e[3]),t[3]<e[1]&&(i=e[1]-t[3]),r.distance([0,0],[n,i])}function ch(t,e,r){const n=r.pointOnLine(e,t);return r.distance(t,n.point)}function WM(t,e,r,n,i){const l=Math.min(ch(t,[r,n],i),ch(e,[r,n],i)),c=Math.min(ch(r,[t,e],i),ch(n,[t,e],i));return Math.min(l,c)}function x_e(t,e,r,n,i){if(!(Dl(e,t.length)&&Dl(n,r.length)))return 1/0;let c=1/0;for(let s=e[0];s<e[1];++s){const p=t[s],g=t[s+1];for(let _=n[0];_<n[1];++_){const x=r[_],P=r[_+1];if(Kx(p,g,x,P))return 0;c=Math.min(c,WM(p,g,x,P,i))}}return c}function w_e(t,e,r,n,i){if(!(Dl(e,t.length)&&Dl(n,r.length)))return NaN;let c=1/0;for(let s=e[0];s<=e[1];++s)for(let p=n[0];p<=n[1];++p)if(c=Math.min(c,i.distance(t[s],r[p])),c===0)return c;return c}function E_e(t,e,r){if(Ff(t,e,!0))return 0;let n=1/0;for(const i of e){const l=i[0],c=i[i.length-1];if(l!==c&&(n=Math.min(n,ch(t,[c,l],r)),n===0))return n;const s=r.pointOnLine(i,t);if(n=Math.min(n,r.distance(t,s.point)),n===0)return n}return n}function T_e(t,e,r,n){if(!Dl(e,t.length))return NaN;for(let l=e[0];l<=e[1];++l)if(Ff(t[l],r,!0))return 0;let i=1/0;for(let l=e[0];l<e[1];++l){const c=t[l],s=t[l+1];for(const p of r)for(let g=0,_=p.length,x=_-1;g<_;x=g++){const P=p[x],A=p[g];if(Kx(c,s,P,A))return 0;i=Math.min(i,WM(c,s,P,A,n))}}return i}function hD(t,e){for(const r of t)for(const n of r)if(Ff(n,e,!0))return!0;return!1}function S_e(t,e,r,n=1/0){const i=uC(t),l=uC(e);if(n!==1/0&&JM(i,l,r)>=n)return n;if(My(i,l)){if(hD(t,e))return 0}else if(hD(e,t))return 0;let c=1/0;for(const s of t)for(let p=0,g=s.length,_=g-1;p<g;_=p++){const x=s[_],P=s[p];for(const A of e)for(let M=0,N=A.length,z=N-1;M<N;z=M++){const j=A[z],$=A[M];if(Kx(x,P,j,$))return 0;c=Math.min(c,WM(x,P,j,$,r))}}return c}function dD(t,e,r,n,i,l){if(!l)return;const c=JM(cC(n,l),i,r);c<e&&t.push([c,l,[0,0]])}function U0(t,e,r,n,i,l,c){if(!l||!c)return;const s=JM(cC(n,l),cC(i,c),r);s<e&&t.push([s,l,c])}function Nv(t,e,r,n,i=1/0){let l=Math.min(n.distance(t[0],r[0][0]),i);if(l===0)return l;const c=new MJ([[0,[0,t.length-1],[0,0]]],OJ),s=uC(r);for(;c.length>0;){const p=c.pop();if(p[0]>=l)continue;const g=p[1],_=e?aC:sC;if(Dv(g)<=_){if(!Dl(g,t.length))return NaN;if(e){const x=T_e(t,g,r,n);if(isNaN(x)||x===0)return x;l=Math.min(l,x)}else for(let x=g[0];x<=g[1];++x){const P=E_e(t[x],r,n);if(l=Math.min(l,P),l===0)return 0}}else{const x=lC(g,e);dD(c,l,n,t,s,x[0]),dD(c,l,n,t,s,x[1])}}return l}function Fv(t,e,r,n,i,l=1/0){let c=Math.min(l,i.distance(t[0],r[0]));if(c===0)return c;const s=new MJ([[0,[0,t.length-1],[0,r.length-1]]],OJ);for(;s.length>0;){const p=s.pop();if(p[0]>=c)continue;const g=p[1],_=p[2],x=e?aC:sC,P=n?aC:sC;if(Dv(g)<=x&&Dv(_)<=P){if(!Dl(g,t.length)&&Dl(_,r.length))return NaN;let A;if(e&&n)A=x_e(t,g,r,_,i),c=Math.min(c,A);else if(e&&!n){const M=t.slice(g[0],g[1]+1);for(let N=_[0];N<=_[1];++N)if(A=ch(r[N],M,i),c=Math.min(c,A),c===0)return c}else if(!e&&n){const M=r.slice(_[0],_[1]+1);for(let N=g[0];N<=g[1];++N)if(A=ch(t[N],M,i),c=Math.min(c,A),c===0)return c}else A=w_e(t,g,r,_,i),c=Math.min(c,A)}else{const A=lC(g,e),M=lC(_,n);U0(s,c,i,t,r,A[0],M[0]),U0(s,c,i,t,r,A[0],M[1]),U0(s,c,i,t,r,A[1],M[0]),U0(s,c,i,t,r,A[1],M[1])}}return c}function C_e(t,e){const r=t.geometry(),n=r.flat().map(c=>UM([c.x,c.y],t.canonical));if(r.length===0)return NaN;const i=new HM(n[0][1]);let l=1/0;for(const c of e){switch(c.type){case"Point":l=Math.min(l,Fv(n,!1,[c.coordinates],!1,i,l));break;case"LineString":l=Math.min(l,Fv(n,!1,c.coordinates,!0,i,l));break;case"Polygon":l=Math.min(l,Nv(n,!1,c.coordinates,i,l));break}if(l===0)return l}return l}function P_e(t,e){const r=t.geometry(),n=r.flat().map(c=>UM([c.x,c.y],t.canonical));if(r.length===0)return NaN;const i=new HM(n[0][1]);let l=1/0;for(const c of e){switch(c.type){case"Point":l=Math.min(l,Fv(n,!0,[c.coordinates],!1,i,l));break;case"LineString":l=Math.min(l,Fv(n,!0,c.coordinates,!0,i,l));break;case"Polygon":l=Math.min(l,Nv(n,!0,c.coordinates,i,l));break}if(l===0)return l}return l}function A_e(t,e){const r=t.geometry();if(r.length===0||r[0].length===0)return NaN;const n=__e(r).map(c=>c.map(s=>s.map(p=>UM([p.x,p.y],t.canonical)))),i=new HM(n[0][0][0][1]);let l=1/0;for(const c of e)for(const s of n){switch(c.type){case"Point":l=Math.min(l,Nv([c.coordinates],!1,s,i,l));break;case"LineString":l=Math.min(l,Nv(c.coordinates,!0,s,i,l));break;case"Polygon":l=Math.min(l,S_e(s,c.coordinates,i,l));break}if(l===0)return l}return l}function PT(t){return t.type==="MultiPolygon"?t.coordinates.map(e=>({type:"Polygon",coordinates:e})):t.type==="MultiLineString"?t.coordinates.map(e=>({type:"LineString",coordinates:e})):t.type==="MultiPoint"?t.coordinates.map(e=>({type:"Point",coordinates:e})):[t]}class wh{constructor(e,r){this.type=Ft,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ry(e[1])){const n=e[1];if(n.type==="FeatureCollection")return new wh(n,n.features.map(i=>PT(i.geometry)).flat());if(n.type==="Feature")return new wh(n,PT(n.geometry));if("type"in n&&"coordinates"in n)return new wh(n,PT(n))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return C_e(e,this.geometries);if(e.geometryType()==="LineString")return P_e(e,this.geometries);if(e.geometryType()==="Polygon")return A_e(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class g_{constructor(e){this.type=Lr,this.key=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=e[1];return n==null?r.error("Global state property must be defined."):typeof n!="string"?r.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new g_(n)}evaluate(e){var r;const n=(r=e.globals)===null||r===void 0?void 0:r.globalState;return!n||Object.keys(n).length===0?null:wJ(n,this.key)}eachChild(){}outputDefined(){return!1}}const Yx={"==":Xye,"!=":Qye,">":t_e,"<":e_e,">=":n_e,"<=":r_e,array:Ks,at:NM,boolean:Ks,case:jM,coalesce:Iy,collator:Zx,format:qM,image:$M,in:FM,"index-of":kv,interpolate:La,"interpolate-hcl":La,"interpolate-lab":La,length:VM,let:Hx,literal:bf,match:zM,number:Ks,"number-format":BM,object:Ks,slice:Lv,step:Wx,string:Ks,"to-boolean":Fc,"to-color":Fc,"to-number":Fc,"to-string":Fc,var:Jx,within:xh,distance:wh,"global-state":g_};class as{constructor(e,r,n,i){this.name=e,this.type=r,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,r){const n=e[0],i=as.definitions[n];if(!i)return r.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const l=Array.isArray(i)?i[0]:i.type,c=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=c.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let p=null;for(const[g,_]of s){p=new Gx(r.registry,zv,r.path,null,r.scope);const x=[];let P=!1;for(let A=1;A<e.length;A++){const M=e[A],N=Array.isArray(g)?g[A-1]:g.type,z=p.parse(M,1+x.length,N);if(!z){P=!0;break}x.push(z)}if(!P){if(Array.isArray(g)&&g.length!==x.length){p.error(`Expected ${g.length} arguments, but found ${x.length} instead.`);continue}for(let A=0;A<x.length;A++){const M=Array.isArray(g)?g[A]:g.type,N=x[A];p.concat(A+1).checkSubtype(M,N.type)}if(p.errors.length===0)return new as(n,l,_,x)}}if(s.length===1)r.errors.push(...p.errors);else{const _=(s.length?s:c).map(([P])=>I_e(P)).join(" | "),x=[];for(let P=1;P<e.length;P++){const A=r.parse(e[P],1+x.length);if(!A)return null;x.push(Gn(A.type))}r.error(`Expected arguments of type ${_}, but found (${x.join(", ")}) instead.`)}return null}static register(e,r){as.definitions=r;for(const n in r)e[n]=as}}function pD(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const l=i?i.evaluate(t):1,c=EJ(e,r,n,l);if(c)throw new Wn(c);return new bn(e/255,r/255,n/255,l,!1)}function fD(t,e){return t in e}function AT(t,e){const r=e[t];return typeof r>"u"?null:r}function R_e(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}function Gu(t){return{type:t}}as.register(Yx,{error:[Eye,[Vr],(t,[e])=>{throw new Wn(e.evaluate(t))}],typeof:[Vr,[Lr],(t,[e])=>Gn(xi(e.evaluate(t)))],"to-rgba":[os(Ft,4),[Oa],(t,[e])=>{const[r,n,i,l]=e.evaluate(t).rgb;return[r*255,n*255,i*255,l]}],rgb:[Oa,[Ft,Ft,Ft],pD],rgba:[Oa,[Ft,Ft,Ft,Ft],pD],has:{type:zr,overloads:[[[Vr],(t,[e])=>fD(e.evaluate(t),t.properties())],[[Vr,_h],(t,[e,r])=>fD(e.evaluate(t),r.evaluate(t))]]},get:{type:Lr,overloads:[[[Vr],(t,[e])=>AT(e.evaluate(t),t.properties())],[[Vr,_h],(t,[e,r])=>AT(e.evaluate(t),r.evaluate(t))]]},"feature-state":[Lr,[Vr],(t,[e])=>AT(e.evaluate(t),t.featureState||{})],properties:[_h,[],t=>t.properties()],"geometry-type":[Vr,[],t=>t.geometryType()],id:[Lr,[],t=>t.id()],zoom:[Ft,[],t=>t.globals.zoom],"heatmap-density":[Ft,[],t=>t.globals.heatmapDensity||0],elevation:[Ft,[],t=>t.globals.elevation||0],"line-progress":[Ft,[],t=>t.globals.lineProgress||0],accumulated:[Lr,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[Ft,Gu(Ft),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[Ft,Gu(Ft),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:Ft,overloads:[[[Ft,Ft],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[Ft],(t,[e])=>-e.evaluate(t)]]},"/":[Ft,[Ft,Ft],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[Ft,[Ft,Ft],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[Ft,[],()=>Math.LN2],pi:[Ft,[],()=>Math.PI],e:[Ft,[],()=>Math.E],"^":[Ft,[Ft,Ft],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[Ft,[Ft],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ft,[Ft],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ft,[Ft],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ft,[Ft],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ft,[Ft],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ft,[Ft],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ft,[Ft],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ft,[Ft],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ft,[Ft],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ft,[Ft],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ft,Gu(Ft),(t,e)=>Math.min(...e.map(r=>r.evaluate(t)))],max:[Ft,Gu(Ft),(t,e)=>Math.max(...e.map(r=>r.evaluate(t)))],abs:[Ft,[Ft],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ft,[Ft],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ft,[Ft],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ft,[Ft],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[zr,[Vr,Lr],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[zr,[Lr],(t,[e])=>t.id()===e.value],"filter-type-==":[zr,[Vr],(t,[e])=>t.geometryType()===e.value],"filter-<":[zr,[Vr,Lr],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[zr,[Lr],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[zr,[Vr,Lr],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[zr,[Lr],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[zr,[Vr,Lr],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[zr,[Lr],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[zr,[Vr,Lr],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[zr,[Lr],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[zr,[Lr],(t,[e])=>e.value in t.properties()],"filter-has-id":[zr,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[zr,[os(Vr)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[zr,[os(Lr)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[zr,[Vr,os(Lr)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[zr,[Vr,os(Lr)],(t,[e,r])=>R_e(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:zr,overloads:[[[zr,zr],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[Gu(zr),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:zr,overloads:[[[zr,zr],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[Gu(zr),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[zr,[zr],(t,[e])=>!e.evaluate(t)],"is-supported-script":[zr,[Vr],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return r?r(e.evaluate(t)):!0}],upcase:[Vr,[Vr],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Vr,[Vr],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Vr,Gu(Lr),(t,e)=>e.map(r=>jg(r.evaluate(t))).join("")],"resolved-locale":[Vr,[Bx],(t,[e])=>e.evaluate(t).resolvedLocale()]});function I_e(t){return Array.isArray(t)?`(${t.map(Gn).join(", ")})`:`(${Gn(t.type)}...)`}function zv(t){if(t instanceof Jx)return zv(t.boundExpression);if(t instanceof as&&t.name==="error")return!1;if(t instanceof Zx)return!1;if(t instanceof xh)return!1;if(t instanceof wh)return!1;if(t instanceof g_)return!1;const e=t instanceof Fc||t instanceof Ks;let r=!0;return t.eachChild(n=>{e?r=r&&zv(n):r=r&&n instanceof bf}),r?ZM(t)&&YM(t,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function ZM(t){if(t instanceof as){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof xh||t instanceof wh)return!1;let e=!0;return t.eachChild(r=>{e&&!ZM(r)&&(e=!1)}),e}function KM(t){if(t instanceof as&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(r=>{e&&!KM(r)&&(e=!1)}),e}function YM(t,e){if(t instanceof as&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(n=>{r&&!YM(n,e)&&(r=!1)}),r}function hC(t){return{result:"success",value:t}}function xp(t){return{result:"error",value:t}}function M_e(t){return t["property-type"]==="data-driven"||t["property-type"]==="cross-faded-data-driven"}function O_e(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function k_e(t){return!!t.expression&&t.expression.interpolated}function kJ(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&xi(t)===_h}class L_e{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new TJ,this._defaultValue=r?z_e(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,n,i,l,c){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=c,this.expression.evaluate(this._evaluator)}evaluate(e,r,n,i,l,c){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=c||null;try{const s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new Wn(`Expected value to be one of ${Object.keys(this._enumValues).map(p=>JSON.stringify(p)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}}function D_e(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in Yx}function LJ(t,e){const r=new Gx(Yx,zv,[],e?F_e(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?hC(new L_e(n,e)):xp(r.errors)}class mD{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!KM(r.expression),this.globalStateRefs=Xx(r.expression)}evaluateWithoutErrorHandling(e,r,n,i,l,c){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,i,l,c)}evaluate(e,r,n,i,l,c){return this._styleExpression.evaluate(e,r,n,i,l,c)}}class gD{constructor(e,r,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!KM(r.expression),this.globalStateRefs=Xx(r.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,r,n,i,l,c){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,i,l,c)}evaluate(e,r,n,i,l,c){return this._styleExpression.evaluate(e,r,n,i,l,c)}interpolationFactor(e,r,n){return this.interpolationType?La.interpolationFactor(this.interpolationType,e,r,n):0}}function N_e(t,e){const r=LJ(t,e);if(r.result==="error")return r;const n=r.value.expression,i=ZM(n);if(!i&&!M_e(e))return xp([new Ea("","data expressions not supported")]);const l=YM(n,["zoom"]);if(!l&&!O_e(e))return xp([new Ea("","zoom expressions not supported")]);const c=yb(n);if(!c&&!l)return xp([new Ea("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(c instanceof Ea)return xp([c]);if(c instanceof La&&!k_e(e))return xp([new Ea("",'"interpolate" expressions cannot be used with this property')]);if(!c)return hC(i?new mD("constant",r.value):new mD("source",r.value));const s=c instanceof La?c.interpolation:void 0;return hC(i?new gD("camera",r.value,c.labels,s):new gD("composite",r.value,c.labels,s))}function yb(t){let e=null;if(t instanceof Hx)e=yb(t.result);else if(t instanceof Iy){for(const r of t.args)if(e=yb(r),e)break}else(t instanceof Wx||t instanceof La)&&t.input instanceof as&&t.input.name==="zoom"&&(e=t);return e instanceof Ea||t.eachChild(r=>{const n=yb(r);n instanceof Ea?e=n:!e&&n?e=new Ea("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new Ea("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Xx(t,e=new Set){return t instanceof g_&&e.add(t.key),t.eachChild(r=>{Xx(r,e)}),e}function F_e(t){const e={color:Oa,string:Vr,number:Ft,enum:Vr,boolean:zr,formatted:qx,padding:$x,numberArray:Vx,colorArray:Cy,projectionDefinition:jx,resolvedImage:f_,variableAnchorOffsetCollection:Ux};return t.type==="array"?os(e[t.value]||Lr,t.length):e[t.type]}function z_e(t){if(t.type==="color"&&kJ(t.default))return new bn(0,0,0,0);switch(t.type){case"color":return bn.parse(t.default)||null;case"padding":return Qs.parse(t.default)||null;case"numberArray":return ea.parse(t.default)||null;case"colorArray":return ss.parse(t.default)||null;case"variableAnchorOffsetCollection":return ka.parse(t.default)||null;case"projectionDefinition":return Zs.parse(t.default)||null;default:return t.default===void 0?null:t.default}}function DJ(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!DJ(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const j_e={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function B_e(t){if(t==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};DJ(t)||(t=jv(t));const e=LJ(t,j_e);if(e.result==="error")throw new Error(e.value.map(r=>`${r.key}: ${r.message}`).join(", "));{const r=NJ(t);return{filter:(n,i,l)=>e.value.evaluate(n,i,{},l),needGeometry:r,getGlobalStateRefs:()=>Xx(e.value.expression)}}}function q_e(t,e){return t<e?-1:t>e?1:0}function NJ(t){if(!Array.isArray(t))return!1;if(t[0]==="within"||t[0]==="distance")return!0;for(let e=1;e<t.length;e++)if(NJ(t[e]))return!0;return!1}function jv(t){if(!t)return!0;const e=t[0];return t.length<=1?e!=="any":e==="=="?RT(t[1],t[2],"=="):e==="!="?G0(RT(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?RT(t[1],t[2],e):e==="any"?$_e(t.slice(1)):e==="all"?["all"].concat(t.slice(1).map(jv)):e==="none"?["all"].concat(t.slice(1).map(jv).map(G0)):e==="in"?yD(t[1],t.slice(2)):e==="!in"?G0(yD(t[1],t.slice(2))):e==="has"?_D(t[1]):e==="!has"?G0(_D(t[1])):!0}function RT(t,e,r){switch(t){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,t,e]}}function $_e(t){return["any"].concat(t.map(jv))}function yD(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",t,["literal",e.sort(q_e)]]:["filter-in-small",t,["literal",e]]}}function _D(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function G0(t){return["!",t]}function Oy(t){return typeof t=="object"?["literal",t]:t}function V_e(t,e){let r=t.stops;if(!r)return U_e(t,e);const n=r&&typeof r[0][0]=="object",i=n||t.property!==void 0,l=n||!i;return r=r.map(c=>!i&&e.tokens&&typeof c[1]=="string"?[c[0],W_e(c[1])]:[c[0],Oy(c[1])]),n?G_e(t,e,r):l?J_e(t,e,r):dC(t,e,r)}function U_e(t,e){const r=["get",t.property];if(t.default===void 0)return e.type==="string"?["string",r]:r;if(e.type==="enum")return["match",r,Object.keys(e.values),r,t.default];{const n=[e.type==="color"?"to-color":e.type,r,Oy(t.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}}function XM(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function G_e(t,e,r){const n={},i={},l=[];for(let s=0;s<r.length;s++){const p=r[s],g=p[0].zoom;n[g]===void 0&&(n[g]={zoom:g,type:t.type,property:t.property,default:t.default},i[g]=[],l.push(g)),i[g].push([p[0].value,p[1]])}if(e5({},e)==="exponential"){const s=[XM(t),["linear"],["zoom"]];for(const p of l){const g=dC(n[p],e,i[p]);Bp(s,p,g,!1)}return s}else{const s=["step",["zoom"]];for(const p of l){const g=dC(n[p],e,i[p]);Bp(s,p,g,!0)}return QM(s),s}}function H_e(t,e){if(t!==void 0)return t;if(e!==void 0)return e}function bD(t,e){const r=Oy(H_e(t.default,e.default));return r===void 0&&e.type==="resolvedImage"?"":r}function dC(t,e,r){const n=e5(t,e),i=["get",t.property];if(n==="categorical"&&typeof r[0][0]=="boolean"){const l=["case"];for(const c of r)l.push(["==",i,c[0]],c[1]);return l.push(bD(t,e)),l}else if(n==="categorical"){const l=["match",i];for(const c of r)Bp(l,c[0],c[1],!1);return l.push(bD(t,e)),l}else if(n==="interval"){const l=["step",["number",i]];for(const c of r)Bp(l,c[0],c[1],!0);return QM(l),t.default===void 0?l:["case",["==",["typeof",i],"number"],l,Oy(t.default)]}else if(n==="exponential"){const l=t.base!==void 0?t.base:1,c=[XM(t),l===1?["linear"]:["exponential",l],["number",i]];for(const s of r)Bp(c,s[0],s[1],!1);return t.default===void 0?c:["case",["==",["typeof",i],"number"],c,Oy(t.default)]}else throw new Error(`Unknown property function type ${n}`)}function J_e(t,e,r,n=["zoom"]){const i=e5(t,e);let l,c=!1;if(i==="interval")l=["step",n],c=!0;else if(i==="exponential"){const s=t.base!==void 0?t.base:1;l=[XM(t),s===1?["linear"]:["exponential",s],n]}else throw new Error(`Unknown zoom function type "${i}"`);for(const s of r)Bp(l,s[0],s[1],c);return QM(l),l}function QM(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function Bp(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&t.length===2||t.push(e),t.push(r))}function e5(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function W_e(t){const e=["concat"],r=/{([^{}]+)}/g;let n=0;for(let i=r.exec(t);i!==null;i=r.exec(t)){const l=t.slice(n,r.lastIndex-i[0].length);n=r.lastIndex,l.length>0&&e.push(l),e.push(["get",i[1]])}if(e.length===1)return t;if(n<t.length)e.push(t.slice(n));else if(e.length===2)return["to-string",e[1]];return e}const Z_e=bye;var vD={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},og=" ",xD=/(italic|oblique)$/i,wD={};function pC(t,e,r){var n=wD[t];if(!n){Array.isArray(t)||(t=[t]);for(var i=400,l="normal",c=[],s,p,g=0,_=t.length;g<_;++g){var x=t[g],P=x.split(" "),A=P[P.length-1].toLowerCase();A=="normal"||A=="italic"||A=="oblique"?(l=p?l:A,p=!0,P.pop(),A=P[P.length-1].toLowerCase()):xD.test(A)&&(A=A.replace(xD,""),l=p?l:P[P.length-1].replace(A,""),p=!0);for(var M in vD){var N=P.length>1?P[P.length-2].toLowerCase():"";if(A==M||A==M.replace("-","")||N+"-"+A==M){i=s?i:vD[M],P.pop(),N&&M.startsWith(N)&&P.pop();break}}!s&&typeof A=="number"&&(i=A,s=!0);var z=P.join(og).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");z.indexOf(og)!==-1&&(z='"'+z+'"'),c.push(z)}n=wD[t]=[l,i,c]}return n[0]+og+n[1]+og+e+"px"+(r?"/"+r:"")+og+n[2]}const FJ="https://api.mapbox.com";function t5(t){const e="mapbox://";return t.indexOf(e)!==0?"":t.slice(e.length)}function K_e(t,e,r){if(typeof t=="string")return[{id:"default",url:ED(t,e,r)}];for(const n of t)n.url=ED(n.url,e,r);return t}function ED(t,e,r){const n=t5(t);if(!n)return decodeURI(new URL(t,r).href);const i="sprites/";if(n.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${t}`);const l=n.slice(i.length);return`${FJ}/styles/v1/${l}/sprite?access_token=${e}`}function zJ(t,e){const r=t5(t);if(!r)return decodeURI(new URL(t,location.href).href);const n="styles/";if(r.indexOf(n)!==0)throw new Error(`unexpected style url: ${t}`);const i=r.slice(n.length);return`${FJ}/styles/v1/${i}?&access_token=${e}`}const Y_e=["a","b","c","d"];function _b(t,e,r,n){const i=new URL(t,n||location.href),l=t5(t);if(!l)return e?(i.searchParams.has(r)||i.searchParams.set(r,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(l==="mapbox.satellite"){const c=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${l}/{z}/{x}/{y}${c}.webp?access_token=${e}`]}return Y_e.map(c=>`https://${c}.tiles.mapbox.com/v4/${l}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const fC=Object.freeze({}),TD={},SD={};let X_e=0;function r5(t){return t.id||(t.id=X_e++),t.id}function Q_e(t,e){return r5(t)+"."+Nr(e)}function e0e(t){let e=TD[t.id];return e||(e={},TD[r5(t)]=e),e}function t0e(t){let e=SD[t.id];return e||(e={},SD[r5(t)]=e),e}function IT(t){return t*Math.PI/180}const n5=function(){const t=[];for(let e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function Qx(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);const r=document.createElement("canvas");return r.width=t,r.height=e,r}function r0e(t,e){let r=0;const n=e.length;for(;r<n;++r)if(e[r]<t&&r+1<n){const l=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(l)}return n-1}function n0e(t,e){const r=Math.floor(t),n=Math.pow(2,t-r);return e[r]/n}const cp={};function vf(t,e,r={},n){if(e in cp)return n&&(n.url=cp[e][0].url),cp[e][1];const i=r.transformRequest&&r.transformRequest(e,t)||e,l=function(p){return delete cp[e],Promise.reject(new Error("Error fetching source "+e))},c=function(p){return delete cp[e],p.ok?p.json():Promise.reject(new Error("Error fetching source "+e))},s=py(()=>i).then(p=>p instanceof Response?(n&&(n.url=p.url),c(p)):(p instanceof Request||(p=new Request(p)),p.headers.get("Accept")||p.headers.set("Accept","application/json"),n&&(n.url=p.url),fetch(p).then(c).catch(l))).catch(l);return cp[e]=[i,s],s}function i0e(t,e){if(typeof t=="string")if(t.trim().startsWith("{"))try{const r=JSON.parse(t);return Promise.resolve(r)}catch(r){return Promise.reject(r)}else return t=zJ(t,e.accessToken),vf("Style",t,e);else return Promise.resolve(t)}const CD={};function o0e(t,e,r={}){const n=[e,JSON.stringify(t)].toString();let i=CD[n];if(!i||r.transformRequest){let l;r.transformRequest&&(l=(s,p)=>{const g=r.transformRequest&&r.transformRequest(p,"Tiles")||p;if(s instanceof aJ)s.setLoader((_,x,P)=>{const A=function(M){M.arrayBuffer().then(N=>{const j=s.getFormat().readFeatures(N,{extent:_,featureProjection:P});s.setFeatures(j)})};py(()=>g).then(M=>{if(M instanceof Response)return A(M);fetch(M).then(A).catch(N=>s.setState(qt.ERROR))}).catch(M=>s.setState(qt.ERROR))});else{const _=s.getImage();py(()=>g).then(x=>{if(typeof x=="string"){_.src=x;return}const P=A=>A.blob().then(M=>{const N=URL.createObjectURL(M);_.addEventListener("load",()=>URL.revokeObjectURL(N)),_.addEventListener("error",()=>URL.revokeObjectURL(N)),_.src=N});if(x instanceof Response)return P(x);fetch(x).then(P).catch(A=>s.setState(qt.ERROR))}).catch(x=>s.setState(qt.ERROR))}});const c=t.url;if(c&&!t.tiles){const s=_b(c,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(c.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:s}),tileLoadFunction:l});else{const p={};i=vf("Source",s[0],r,p).then(function(g){return g.tiles=g.tiles.map(function(_){return g.scheme==="tms"&&(_=_.replace("{y}","{-y}")),_b(_,r.accessToken,r.accessTokenParam||"access_token",p.url)[0]}),Promise.resolve({tileJson:g,tileLoadFunction:l})})}}else t.tiles?(t=Object.assign({},t,{tiles:t.tiles.map(function(s){return t.scheme==="tms"&&(s=s.replace("{y}","{-y}")),_b(s,r.accessToken,r.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:l})):i=Promise.reject(new Error("source has no `tiles` nor `url`"));CD[n]=i}return i}function PD(t,e,r,n){const i=[2*r*e.pixelRatio+e.width,2*r*e.pixelRatio+e.height],l=Qx(i[0],i[1]),c=l.getContext("2d");c.drawImage(t,e.x,e.y,e.width,e.height,r*e.pixelRatio,r*e.pixelRatio,e.width,e.height);const s=c.getImageData(0,0,i[0],i[1]);c.globalCompositeOperation="destination-over",c.fillStyle=`rgba(${n.r*255},${n.g*255},${n.b*255},${n.a})`;const p=s.data;for(let g=0,_=s.width;g<_;++g)for(let x=0,P=s.height;x<P;++x){const A=(x*_+g)*4;p[A+3]>0&&c.arc(g,x,r*e.pixelRatio,0,2*Math.PI)}return c.fill(),l}function s0e(t,e,r){const n=Math.max(0,Math.min(1,(r-t)/(e-t)));return n*n*(3-2*n)}function AD(t,e,r){const n=Qx(e.width,e.height),i=n.getContext("2d");i.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const l=i.getImageData(0,0,e.width,e.height),c=l.data;for(let s=0,p=l.width;s<p;++s)for(let g=0,_=l.height;g<_;++g){const x=(g*p+s)*4,P=c[x+3]/255,A=.75,M=.1,N=s0e(A-M,A+M,P);N>0?(c[x+0]=Math.round(255*r.r*N),c[x+1]=Math.round(255*r.g*N),c[x+2]=Math.round(255*r.b*N),c[x+3]=Math.round(255*N)):c[x+3]=0}return i.putImageData(l,0,0),n}const a0e=Array(256).join("");function mC(t,e){if(e>=.05){let r="";const n=t.split(`
`),i=a0e.slice(0,Math.round(e/.1));for(let l=0,c=n.length;l<c;++l)l>0&&(r+=`
`),r+=n[l].split("").join(i);return r}return t}let MT;function jJ(){return MT||(MT=Qx(1,1).getContext("2d")),MT}function Hu(t,e){return jJ().measureText(t).width+(t.length-1)*e}const Bv={};Yu.on("propertychange",()=>{for(const t in Bv)delete Bv[t]});function gC(t,e,r,n){if(t.indexOf(`
`)!==-1){const c=t.split(`
`),s=[];for(let p=0,g=c.length;p<g;++p)s.push(gC(c[p],e,r,n));return s.join(`
`)}const i=r+","+e+","+t+","+n;let l=Bv[i];if(!l){const c=t.split(" ");if(c.length>1){const s=jJ();s.font=e;const g=s.measureText("M").width*r;let _="";const x=[];for(let P=0,A=c.length;P<A;++P){const M=c[P],N=_+(_?" ":"")+M;Hu(N,n)<=g?_=N:(_&&x.push(_),_=M)}_&&x.push(_);for(let P=0,A=x.length;P<A&&A>1;++P){const M=x[P];if(Hu(M,n)<g*.35){const N=P>0?Hu(x[P-1],n):1/0,z=P<A-1?Hu(x[P+1],n):1/0;x.splice(P,1),A-=1,N<z?(x[P-1]+=" "+M,P-=1):x[P]=M+" "+x[P]}}for(let P=0,A=x.length-1;P<A;++P){const M=x[P],N=x[P+1];if(Hu(M,n)>g*.7&&Hu(N,n)<g*.6){const z=M.split(" "),j=z.pop();Hu(j,n)<g*.2&&(x[P]=z.join(" "),x[P+1]=j+" "+N),A-=1}}l=x.join(`
`)}else l=t;l=mC(l,n),Bv[i]=l}return l}const l0e=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],RD={};function c0e(t,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let r;for(let n=0,i=t.length;n<i;++n){const l=t[n];if(l in RD)continue;RD[l]=!0;const s=pC(l,16).split(" ");r||(r=[]),r.push([s.slice(3).join(" ").replace(/"/g,""),s[1],s[0]])}return r&&(async()=>{await document.fonts.ready;for(let n=0,i=r.length;n<i;++n){const l=r[n],c=l[0];if(l0e.includes(c))continue;const s=l[1],p=l[2];if(!(await document.fonts.load(`${p} ${s} 16px "${c}"`)).some(_=>_.family.replace(/^['"]|['"]$/g,"").toLowerCase()===c.toLowerCase()&&_.weight==s&&_.style===p)){const _=e.replace("{font-family}",c.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",c.replace(/ /g,"+")).replace("{fontweight}",s).replace("{-fontstyle}",p.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",p);if(!document.querySelector('link[href="'+_+'"]')){const x=document.createElement("link");x.href=_,x.rel="stylesheet",document.head.appendChild(x)}}}})(),t}const u0e={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},h0e={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},d0e=function(t,e){const r=N_e(t,e);if(r.result==="error")throw new Error(r.value.map(n=>`${n.key}: ${n.message}`).join(", "));return r.value},Eh={zoom:0,distanceFromCenter:0};as.register(Yx,{...as.definitions,pitch:[{kind:"number"},[],t=>Eh.pitch||90],"distance-from-center":[{kind:"number"},[],t=>Eh.distanceFromCenter||0]});let H0,OT;function pr(t,e,r,n,i,l){const c=t.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[c]||(i[c]={});const s=i[c];if(!s[r]){let p=(t[e]||fC)[r];const g=Z_e[`${e}_${t.type}`][r];p===void 0&&(p=g.default);let _=D_e(p);if(!_&&kJ(p)&&(p=V_e(p,g),_=!0),_){const x=d0e(p,g);s[r]=x.evaluate.bind(x)}else g.type=="color"&&(p=bn.parse(p)),s[r]=function(){return p}}return s[r](Eh,n,l)}function ID(t,e,r,n){return pr(t,"layout",`${r}-allow-overlap`,e,n)?pr(t,"layout",`${r}-ignore-placement`,e,n)?"none":"obstacle":"declutter"}function p0e(t,e,r,n){if(n||console.warn("No filterCache provided to evaluateFilter()"),!(t in n))try{n[t]=B_e(e).filter}catch(i){console.warn("Filter will evaluate to false: "+i.message),n[t]=function(){return!1}}return n[t](Eh,r)}function Ju(t,e){if(t){if(t.a===0||e===0)return;const r=t.a;return e=e===void 0?1:e,r===0?"transparent":"rgba("+Math.round(t.r*255/r)+","+Math.round(t.g*255/r)+","+Math.round(t.b*255/r)+","+r*e+")"}return t}const f0e=/\{[^{}}]*\}/g;function kT(t,e){return t.replace(f0e,function(r){return e[r.slice(1,-1)]||""})}function MD(t,e){let r=t.split(":")[0];return r===t&&(r="default"),e[r]}const m0e={};function g0e(t,e,r,n=n5,i=void 0,l=void 0,c=void 0,s=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");m0e[Q_e(e,t)]=Array.from(arguments);const p={};(typeof l=="string"||l instanceof Request||l instanceof Response||l instanceof Promise)&&(l={default:l});for(const re in l){const ne=l[re];py(()=>ne).then(async Z=>{let U;if(typeof Image<"u"){const K=new Image;if(typeof Z=="string")K.crossOrigin="anonymous",K.src=Z;else{let he;Z instanceof Request?he=await fetch(Z):Z instanceof Response&&(he=Z);const ue=await he.blob();U=URL.createObjectURL(ue),K.src=U}K.addEventListener("load",function he(){K.removeEventListener("load",he),p[re]={image:K,size:[K.width,K.height]},t.changed(),U&&URL.revokeObjectURL(U)}),K.addEventListener("error",function he(){URL.revokeObjectURL(U),K.removeEventListener("error",he)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const K=self;K.postMessage({action:"loadImage",src:Z}),K.addEventListener("message",function(ue){ue.data.action==="imageLoaded"&&ue.data.src===Z&&(p[re]={image:ue.data.image,size:[ue.data.image.width,ue.data.image.height]})})}})}const g=wye(e.layers),_={},x=[],P={},A={},M=e0e(e),N=t0e(e);let z;for(let re=0,ne=g.length;re<ne;++re){const Z=g[re],U=Z.id;if(typeof r=="string"&&Z.source==r||Array.isArray(r)&&r.indexOf(U)!==-1){const K=Z["source-layer"];if(z){if(Z.source!==z)throw new Error(`Layer "${U}" does not use source "${z}`)}else{z=Z.source;const ue=e.sources[z];if(!ue)throw new Error(`Source "${z}" is not defined`);const Ee=ue.type;if(Ee!=="vector"&&Ee!=="geojson")throw new Error(`Source "${z}" is not of type "vector" or "geojson", but "${Ee}"`)}let he=_[K];he||(he=[],_[K]=he),he.push({layer:Z,index:re}),x.push(U)}}const j=new Dc,$=new El,J=[],X=function(re,ne,Z){const U=re.getProperties(),K=_[U["mvt:layer"]];if(!K)return;let he=n.indexOf(ne);he==-1&&(he=r0e(ne,n)),Eh.zoom=he,Eh.distanceFromCenter=0;const ue=re.getGeometry(),Ee=u0e[ue.getType()],Ie=t.get("map");if(Ie&&Ie instanceof JH&&Ee===1){const xe=Ie.getSize();if(xe){const tt=Ie.getView().getCenter(),Ke=Ol(ue.getExtent());Eh.distanceFromCenter=pde(tt,Ke)/ne/xe[1]}}const ee={id:re.getId(),properties:U,type:Ee},pe=t.get("mapbox-featurestate")[re.getId()];let ve=-1;for(let xe=0,tt=K.length;xe<tt;++xe){const Ke=K[xe],Ze=Ke.layer,bt=Ze.id;if(Z!==void 0&&Z!==bt)continue;const qe=Ze.layout||fC,kt=Ze.paint||fC;if(qe.visibility==="none"||"minzoom"in Ze&&he<Ze.minzoom||"maxzoom"in Ze&&he>=Ze.maxzoom)continue;const Jt=Ze.filter;if(!Jt||p0e(bt,Jt,ee,N)){let Pt,dt,er,Wt,ar,_t;const Ve=Ke.index;if(Ee==3&&(Ze.type=="fill"||Ze.type=="fill-extrusion"))if(dt=pr(Ze,"paint",Ze.type+"-opacity",ee,M,pe),Ze.type+"-pattern"in kt){const ur=pr(Ze,"paint",Ze.type+"-pattern",ee,M,pe);if(ur){const lr=typeof ur=="string"?kT(ur,U):ur.toString(),nr=MD(lr,p);if(i&&i[lr]&&nr){++ve,_t=J[ve],(!_t||!_t.getFill()||_t.getStroke()||_t.getText())&&(_t=new ns({fill:new El}),J[ve]=_t),er=_t.getFill(),_t.setZIndex(Ve);const mr=lr+"."+dt;let Yr=A[mr];if(!Yr){const ke=i[lr],oe=Qx(ke.width,ke.height),ae=oe.getContext("2d");ae.globalAlpha=dt,ae.drawImage(nr.image,ke.x,ke.y,ke.width,ke.height,0,0,ke.width,ke.height),Yr=ae.createPattern(oe,"repeat"),A[mr]=Yr}er.setColor(Yr)}}}else Pt=Ju(pr(Ze,"paint",Ze.type+"-color",ee,M,pe),dt),Ze.type+"-outline-color"in kt&&(ar=Ju(pr(Ze,"paint",Ze.type+"-outline-color",ee,M,pe),dt)),ar||(ar=Pt),(Pt||ar)&&(++ve,_t=J[ve],(!_t||Pt&&!_t.getFill()||!Pt&&_t.getFill()||ar&&!_t.getStroke()||!ar&&_t.getStroke()||_t.getText())&&(_t=new ns({fill:Pt?new El:void 0,stroke:ar?new Dc:void 0}),J[ve]=_t),Pt&&(er=_t.getFill(),er.setColor(Pt)),ar&&(Wt=_t.getStroke(),Wt.setColor(ar),Wt.setWidth(.5)),_t.setZIndex(Ve));if(Ee!=1&&Ze.type=="line"){"line-pattern"in kt?Pt=void 0:Pt=Ju(pr(Ze,"paint","line-color",ee,M,pe),pr(Ze,"paint","line-opacity",ee,M,pe));const ur=pr(Ze,"paint","line-width",ee,M,pe);Pt&&ur>0&&(++ve,_t=J[ve],(!_t||!_t.getStroke()||_t.getFill()||_t.getText())&&(_t=new ns({stroke:new Dc}),J[ve]=_t),Wt=_t.getStroke(),Wt.setLineCap(pr(Ze,"layout","line-cap",ee,M,pe)),Wt.setLineJoin(pr(Ze,"layout","line-join",ee,M,pe)),Wt.setMiterLimit(pr(Ze,"layout","line-miter-limit",ee,M,pe)),Wt.setColor(Pt),Wt.setWidth(ur),Wt.setLineDash(kt["line-dasharray"]?pr(Ze,"paint","line-dasharray",ee,M,pe).map(function(lr){return lr*ur}):null),_t.setZIndex(Ve))}let pt=!1,lt=null,Tt=0,vt,Dt,Yt;if((Ee==1||Ee==2)&&"icon-image"in qe){const ur=pr(Ze,"layout","icon-image",ee,M,pe);if(ur){vt=typeof ur=="string"?kT(ur,U):ur.toString();let lr;const nr=s?s(t,vt):void 0,mr=MD(vt,p);if(i&&i[vt]&&mr||nr){const Yr=pr(Ze,"layout","icon-rotation-alignment",ee,M,pe);if(Ee==2){const ke=re.getGeometry();if(ke.getFlatMidpoint||ke.getFlatMidpoints){const oe=ke.getExtent();if(Math.sqrt(Math.max(Math.pow((oe[2]-oe[0])/ne,2),Math.pow((oe[3]-oe[1])/ne,2)))>150){const de=ke.getType()==="MultiLineString"?ke.getFlatMidpoints():ke.getFlatMidpoint();if(OT||(H0=[NaN,NaN],OT=new co("Point",H0,[],2,{},void 0)),lr=OT,H0[0]=de[0],H0[1]=de[1],pr(Ze,"layout","symbol-placement",ee,M,pe)==="line"&&Yr==="map"){const Le=ke.getStride(),je=ke.getFlatCoordinates();for(let Je=0,Fe=je.length-Le;Je<Fe;Je+=Le){const et=je[Je],ct=je[Je+1],it=je[Je+Le],Ot=je[Je+Le+1],$e=Math.min(et,it),Xt=Math.max(et,it),cr=de[0],Nt=de[1],Ht=(Ot-ct)*(cr-et)-(it-et)*(Nt-ct);if(Math.abs(Ht)<.001&&cr<=Xt&&cr>=$e){Tt=Math.atan2(ct-Ot,it-et);break}}}}}}if(Ee!==2||lr){const ke=pr(Ze,"layout","icon-size",ee,M,pe),oe=kt["icon-color"]!==void 0?pr(Ze,"paint","icon-color",ee,M,pe):null;if(!oe||oe.a!==0){const ae=pr(Ze,"paint","icon-halo-color",ee,M,pe),de=pr(Ze,"paint","icon-halo-width",ee,M,pe);let Te=`${vt}.${ke}.${de}.${ae}`;if(oe!==null&&(Te+=`.${oe}`),Dt=P[Te],!Dt){const Le=ID(Ze,ee,"icon",M);let je;"icon-offset"in qe&&(je=pr(Ze,"layout","icon-offset",ee,M,pe).slice(0),je[0]*=ke,je[1]*=-ke);let Je=oe?[oe.r*255,oe.g*255,oe.b*255,oe.a]:void 0;if(nr){const Fe={color:Je,rotateWithView:Yr==="map",displacement:je,declutterMode:Le,scale:ke};typeof nr=="string"?Fe.src=nr:(Fe.img=nr,Fe.imgSize=[nr.width,nr.height]),Dt=new _f(Fe)}else{const Fe=i[vt];let et,ct,it;if(de)Fe.sdf?(et=PD(AD(mr.image,Fe,oe||[0,0,0,1]),{x:0,y:0,width:Fe.width,height:Fe.height,pixelRatio:Fe.pixelRatio},de,ae),Je=void 0):et=PD(mr.image,Fe,de,ae);else{if(Fe.sdf&&!mr.unSDFed){const Ot=AD(mr.image,{x:0,y:0,width:mr.size[0],height:mr.size[1]},{r:1,g:1,b:1});mr.image=Ot,mr.unSDFed=!0}et=mr.image,ct=[Fe.width,Fe.height],it=[Fe.x,Fe.y]}Dt=new _f({color:Je,img:et,imgSize:mr.size,size:ct,offset:it,rotateWithView:Yr==="map",scale:ke/Fe.pixelRatio,displacement:je,declutterMode:Le})}P[Te]=Dt}}Dt&&(++ve,_t=J[ve],(!_t||!_t.getImage()||_t.getFill()||_t.getStroke())&&(_t=new ns,J[ve]=_t),_t.setGeometry(lr),Dt.setRotation(Tt+IT(pr(Ze,"layout","icon-rotate",ee,M,pe))),Dt.setOpacity(pr(Ze,"paint","icon-opacity",ee,M,pe)),Dt.setAnchor(h0e[pr(Ze,"layout","icon-anchor",ee,M,pe)]),_t.setImage(Dt),lt=_t.getText(),_t.setText(void 0),_t.setZIndex(Ve),pt=!0,Yt=!1)}else Yt=!0}}}if(Ee==1&&Ze.type==="circle"){++ve,_t=J[ve],(!_t||!_t.getImage()||_t.getFill()||_t.getStroke())&&(_t=new ns,J[ve]=_t);const ur="circle-radius"in kt?pr(Ze,"paint","circle-radius",ee,M,pe):5,lr=Ju(pr(Ze,"paint","circle-stroke-color",ee,M,pe),pr(Ze,"paint","circle-stroke-opacity",ee,M,pe)),nr=pr(Ze,"paint","circle-translate",ee,M,pe),mr=Ju(pr(Ze,"paint","circle-color",ee,M,pe),pr(Ze,"paint","circle-opacity",ee,M,pe)),Yr=pr(Ze,"paint","circle-stroke-width",ee,M,pe),ke=ur+"."+lr+"."+mr+"."+Yr+"."+nr[0]+"."+nr[1];Dt=P[ke],Dt||(Dt=new c_({radius:ur,displacement:[nr[0],-nr[1]],stroke:lr&&Yr>0?new Dc({width:Yr,color:lr}):void 0,fill:mr?new El({color:mr}):void 0,declutterMode:"none"}),P[ke]=Dt),_t.setImage(Dt),lt=_t.getText(),_t.setText(void 0),_t.setGeometry(void 0),_t.setZIndex(Ve),pt=!0}let Bt,xr,$r,Ir,Zr,yr;if("text-field"in qe){Ir=Math.round(pr(Ze,"layout","text-size",ee,M,pe));const ur=pr(Ze,"layout","text-font",ee,M,pe);$r=pr(Ze,"layout","text-line-height",ee,M,pe),xr=pC(c?c(ur,e.metadata?e.metadata["ol:webfonts"]:void 0):ur,Ir,$r),xr.includes("sans-serif")||(xr+=",sans-serif"),Zr=pr(Ze,"layout","text-letter-spacing",ee,M,pe),yr=pr(Ze,"layout","text-max-width",ee,M,pe);const lr=pr(Ze,"layout","text-field",ee,M,pe);typeof lr=="object"&&lr.sections?lr.sections.length===1?Bt=lr.toString():Bt=lr.sections.reduce((nr,mr,Yr)=>{const ke=mr.fontStack?mr.fontStack.split(","):ur,oe=pC(c?c(ke):ke,Ir*(mr.scale||1),$r);let ae=mr.text;if(ae===`
`)return nr.push(`
`,""),nr;if(Ee==2)return nr.push(mC(ae,Zr),oe),nr;ae=gC(ae,oe,yr,Zr).split(`
`);for(let de=0,Te=ae.length;de<Te;++de)de>0&&nr.push(`
`,""),nr.push(ae[de],oe);return nr},[]):Bt=kT(lr,U).trim(),dt=pr(Ze,"paint","text-opacity",ee,M,pe)}if(Bt&&dt&&!Yt){pt||(++ve,_t=J[ve],(!_t||!_t.getText()||_t.getFill()||_t.getStroke())&&(_t=new ns,J[ve]=_t),_t.setImage(void 0),_t.setGeometry(void 0));const ur=ID(Ze,ee,"text",M);_t.getText()||_t.setText(lt),lt=_t.getText(),(!lt||"getDeclutterMode"in lt&&lt.getDeclutterMode()!==ur)&&(lt=new Lx({padding:[2,2,2,2],declutterMode:ur}),_t.setText(lt));const lr=pr(Ze,"layout","text-transform",ee,M,pe);lr=="uppercase"?Bt=Array.isArray(Bt)?Bt.map((it,Ot)=>Ot%2?it:it.toUpperCase()):Bt.toUpperCase():lr=="lowercase"&&(Bt=Array.isArray(Bt)?Bt.map((it,Ot)=>Ot%2?it:it.toLowerCase()):Bt.toLowerCase());const nr=Array.isArray(Bt)?Bt:Ee==2?mC(Bt,Zr):gC(Bt,xr,yr,Zr);if(lt.setText(nr),lt.setFont(xr),lt.setRotation(IT(pr(Ze,"layout","text-rotate",ee,M,pe))),typeof lt.setKeepUpright=="function"){const it=pr(Ze,"layout","text-keep-upright",ee,M,pe);lt.setKeepUpright(it)}const mr=pr(Ze,"layout","text-anchor",ee,M,pe),Yr=pt||Ee==1?"point":pr(Ze,"layout","symbol-placement",ee,M,pe);let ke;if(Yr==="line-center"?(lt.setPlacement("line"),ke="center"):lt.setPlacement(Yr),Yr==="line"&&typeof lt.setRepeat=="function"){const it=pr(Ze,"layout","symbol-spacing",ee,M,pe);lt.setRepeat(it*2)}lt.setOverflow(Yr==="point");let oe=pr(Ze,"paint","text-halo-width",ee,M,pe);const ae=pr(Ze,"layout","text-offset",ee,M,pe),de=pr(Ze,"paint","text-translate",ee,M,pe);let Te=0,Le=0;if(Yr=="point"){ke="center",mr.indexOf("left")!==-1?(ke="left",Le=oe):mr.indexOf("right")!==-1&&(ke="right",Le=-oe);const it=pr(Ze,"layout","text-rotation-alignment",ee,M,pe);lt.setRotateWithView(it=="map")}else lt.setMaxAngle(IT(pr(Ze,"layout","text-max-angle",ee,M,pe))*Bt.length/nr.length),lt.setRotateWithView(!1);lt.setTextAlign(ke);let je="middle";mr.indexOf("bottom")==0?(je="bottom",Te=-oe-.5*($r-1)*Ir):mr.indexOf("top")==0&&(je="top",Te=oe+.5*($r-1)*Ir),lt.setTextBaseline(je);const Je=pr(Ze,"layout","text-justify",ee,M,pe);lt.setJustify(Je==="auto"?void 0:Je),lt.setOffsetX(ae[0]*Ir+Le+de[0]),lt.setOffsetY(ae[1]*Ir+Te+de[1]),$.setColor(Ju(pr(Ze,"paint","text-color",ee,M,pe),dt)),lt.setFill($);const Fe=Ju(pr(Ze,"paint","text-halo-color",ee,M,pe),dt);if(Fe&&oe>0){j.setColor(Fe),oe*=2;const it=.5*Ir;j.setWidth(oe<=it?oe:it),lt.setStroke(j)}else lt.setStroke(void 0);const et=pr(Ze,"layout","text-padding",ee,M,pe),ct=lt.getPadding();et!==ct[0]&&(ct[0]=et,ct[1]=et,ct[2]=et,ct[3]=et),_t.setZIndex(Ve)}}}if(ve>-1)return J.length=ve+1,J};return t.setStyle(X),t.set("mapbox-layers",x),t.set("mapbox-source",z),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),X}class BJ{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Fx,this.supportedMediaTypes=null}getReadOptions(e,r){if(r){let n=r.dataProjection?An(r.dataProjection):this.readProjection(e);r.extent&&n&&n.getUnits()==="tile-pixels"&&(n=An(n),n.setWorldExtent(r.extent)),r={dataProjection:n,featureProjection:r.featureProjection}}return this.adaptOptions(r)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Sr()}readFeature(e,r){return Sr()}readFeatures(e,r){return Sr()}readGeometry(e,r){return Sr()}readProjection(e){return Sr()}writeFeature(e,r){return Sr()}writeFeatures(e,r){return Sr()}writeGeometry(e,r){return Sr()}}function ew(t,e,r){const n=r?An(r.featureProjection):null,i=r?An(r.dataProjection):null;let l=t;if(n&&i&&!Np(n,i)){e&&(l=t.clone());const c=e?n:i,s=e?i:n;c.getUnits()==="tile-pixels"?l.transform(c,s):l.applyTransform(pf(c,s))}if(e&&r&&r.decimals!==void 0){const c=Math.pow(10,r.decimals),s=function(p){for(let g=0,_=p.length;g<_;++g)p[g]=Math.round(p[g]*c)/c;return p};l===t&&(l=t.clone()),l.applyTransform(s)}return l}const y0e={Point:eu,LineString:qh,Polygon:Ll,MultiPoint:h_,MultiLineString:Ty,MultiPolygon:Sy};function _0e(t,e,r){return Array.isArray(e[0])?(gH(t,0,e,r)||(t=t.slice(),W2(t,0,e,r)),t):(fM(t,0,e,r)||(t=t.slice(),wv(t,0,e,r)),t)}function qJ(t,e){const r=t.geometry;if(!r)return[];if(Array.isArray(r))return r.map(l=>qJ({...t,geometry:l})).flat();const n=r.type==="MultiPolygon"?"Polygon":r.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const i=r.layout.length;return ew(new co(n,n==="Polygon"?_0e(r.flatCoordinates,r.ends,i):r.flatCoordinates,r.ends?.flat(),i,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function i5(t,e){if(!t)return null;if(Array.isArray(t)){const n=t.map(i=>i5(i,e));return new Pv(n)}const r=y0e[t.type];return ew(new r(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}class b0e extends BJ{constructor(){super()}getType(){return"json"}readFeature(e,r){return this.readFeatureFromObject(J0(e),this.getReadOptions(e,r))}readFeatures(e,r){return this.readFeaturesFromObject(J0(e),this.getReadOptions(e,r))}readFeatureFromObject(e,r){return Sr()}readFeaturesFromObject(e,r){return Sr()}readGeometry(e,r){return this.readGeometryFromObject(J0(e),this.getReadOptions(e,r))}readGeometryFromObject(e,r){return Sr()}readProjection(e){return this.readProjectionFromObject(J0(e))}readProjectionFromObject(e){return Sr()}writeFeature(e,r){return JSON.stringify(this.writeFeatureObject(e,r))}writeFeatureObject(e,r){return Sr()}writeFeatures(e,r){return JSON.stringify(this.writeFeaturesObject(e,r))}writeFeaturesObject(e,r){return Sr()}writeGeometry(e,r){return JSON.stringify(this.writeGeometryObject(e,r))}writeGeometryObject(e,r){return Sr()}}function J0(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class OD extends b0e{constructor(e){e=e||{},super(),this.dataProjection=An(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=An(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,r){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const i=o5(n.geometry);if(this.featureClass===co)return qJ({geometry:i,id:n.id,properties:n.properties},r);const l=new Fx;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&l.setGeometryName(n.geometry_name),l.setGeometry(i5(i,r)),"id"in n&&l.setId(n.id),n.properties&&l.setProperties(n.properties,!0),l}readFeaturesFromObject(e,r){const n=e;let i=null;if(n.type==="FeatureCollection"){const l=e;i=[];const c=l.features;for(let s=0,p=c.length;s<p;++s){const g=this.readFeatureFromObject(c[s],r);g&&i.push(g)}}else i=[this.readFeatureFromObject(e,r)];return i.flat()}readGeometryFromObject(e,r){return v0e(e,r)}readProjectionFromObject(e){const r=e.crs;let n;if(r)if(r.type=="name")n=An(r.properties.name);else if(r.type==="EPSG")n=An("EPSG:"+r.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,r){r=this.adaptOptions(r);const n={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(n.id=i),!e.hasProperties())return n;const l=e.getProperties(),c=e.getGeometry();return c&&(n.geometry=yC(c,r),delete l[e.getGeometryName()]),Qc(l)||(n.properties=l),n}writeFeaturesObject(e,r){r=this.adaptOptions(r);const n=[];for(let i=0,l=e.length;i<l;++i)n.push(this.writeFeatureObject(e[i],r));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,r){return yC(e,this.adaptOptions(r))}}function o5(t,e){if(!t)return null;let r;switch(t.type){case"Point":{r=w0e(t);break}case"LineString":{r=E0e(t);break}case"Polygon":{r=P0e(t);break}case"MultiPoint":{r=S0e(t);break}case"MultiLineString":{r=T0e(t);break}case"MultiPolygon":{r=C0e(t);break}case"GeometryCollection":{r=x0e(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return r}function v0e(t,e){const r=o5(t);return i5(r,e)}function x0e(t,e){return t.geometries.map(function(n){return o5(n)})}function w0e(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:ed(e.length)}}function E0e(t){const e=t.coordinates,r=e.flat();return{type:"LineString",flatCoordinates:r,ends:[r.length],layout:ed(e[0]?.length||2)}}function T0e(t){const e=t.coordinates,r=e[0]?.[0]?.length||2,n=[],i=s_(n,0,e,r);return{type:"MultiLineString",flatCoordinates:n,ends:i,layout:ed(r)}}function S0e(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:ed(e[0]?.length||2)}}function C0e(t){const e=t.coordinates,r=[],n=e[0]?.[0]?.[0].length||2,i=uH(r,0,e,n);return{type:"MultiPolygon",flatCoordinates:r,ends:i,layout:ed(n)}}function P0e(t){const e=t.coordinates,r=[],n=e[0]?.[0]?.length,i=s_(r,0,e,n);return{type:"Polygon",flatCoordinates:r,ends:i,layout:ed(n)}}function yC(t,e){t=ew(t,!0,e);const r=t.getType();let n;switch(r){case"Point":{n=k0e(t);break}case"LineString":{n=R0e(t);break}case"Polygon":{n=L0e(t,e);break}case"MultiPoint":{n=M0e(t);break}case"MultiLineString":{n=I0e(t);break}case"MultiPolygon":{n=O0e(t,e);break}case"GeometryCollection":{n=A0e(t,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+r)}return n}function A0e(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(n){return yC(n,e)})}}function R0e(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function I0e(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function M0e(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function O0e(t,e){let r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}function k0e(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function L0e(t,e){let r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}const _C=65536*65536,kD=1/_C,D0e=12,LD=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),LT=0,W0=1,sg=2,Z0=5;class N0e{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,r,n=this.length){for(;this.pos<n;){const i=this.readVarint(),l=i>>3,c=this.pos;this.type=i&7,e(l,r,this),this.pos===c&&this.skip(i)}return r}readMessage(e,r){return this.readFields(e,r,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*_C;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*_C;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const r=this.buf;let n,i;return i=r[this.pos++],n=i&127,i<128||(i=r[this.pos++],n|=(i&127)<<7,i<128)||(i=r[this.pos++],n|=(i&127)<<14,i<128)||(i=r[this.pos++],n|=(i&127)<<21,i<128)?n:(i=r[this.pos],n|=(i&15)<<28,F0e(n,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=D0e&&LD?LD.decode(this.buf.subarray(r,e)):K0e(this.buf,r,e)}readBytes(){const e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r}readPackedVarint(e=[],r){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(r));return e}readPackedSVarint(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===sg?this.readVarint()+this.pos:this.pos+1}skip(e){const r=e&7;if(r===LT)for(;this.buf[this.pos++]>127;);else if(r===sg)this.pos=this.readVarint()+this.pos;else if(r===Z0)this.pos+=4;else if(r===W0)this.pos+=8;else throw new Error(`Unimplemented type: ${r}`)}writeTag(e,r){this.writeVarint(e<<3|r)}realloc(e){let r=this.length||16;for(;r<this.pos+e;)r*=2;if(r!==this.length){const n=new Uint8Array(r);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=r}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*kD),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*kD),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){z0e(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const r=this.pos;this.pos=Y0e(this.buf,e,this.pos);const n=this.pos-r;n>=128&&DD(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const r=e.length;this.writeVarint(r),this.realloc(r);for(let n=0;n<r;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,r){this.pos++;const n=this.pos;e(r,this);const i=this.pos-n;i>=128&&DD(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i}writeMessage(e,r,n){this.writeTag(e,sg),this.writeRawMessage(r,n)}writePackedVarint(e,r){r.length&&this.writeMessage(e,q0e,r)}writePackedSVarint(e,r){r.length&&this.writeMessage(e,$0e,r)}writePackedBoolean(e,r){r.length&&this.writeMessage(e,G0e,r)}writePackedFloat(e,r){r.length&&this.writeMessage(e,V0e,r)}writePackedDouble(e,r){r.length&&this.writeMessage(e,U0e,r)}writePackedFixed32(e,r){r.length&&this.writeMessage(e,H0e,r)}writePackedSFixed32(e,r){r.length&&this.writeMessage(e,J0e,r)}writePackedFixed64(e,r){r.length&&this.writeMessage(e,W0e,r)}writePackedSFixed64(e,r){r.length&&this.writeMessage(e,Z0e,r)}writeBytesField(e,r){this.writeTag(e,sg),this.writeBytes(r)}writeFixed32Field(e,r){this.writeTag(e,Z0),this.writeFixed32(r)}writeSFixed32Field(e,r){this.writeTag(e,Z0),this.writeSFixed32(r)}writeFixed64Field(e,r){this.writeTag(e,W0),this.writeFixed64(r)}writeSFixed64Field(e,r){this.writeTag(e,W0),this.writeSFixed64(r)}writeVarintField(e,r){this.writeTag(e,LT),this.writeVarint(r)}writeSVarintField(e,r){this.writeTag(e,LT),this.writeSVarint(r)}writeStringField(e,r){this.writeTag(e,sg),this.writeString(r)}writeFloatField(e,r){this.writeTag(e,Z0),this.writeFloat(r)}writeDoubleField(e,r){this.writeTag(e,W0),this.writeDouble(r)}writeBooleanField(e,r){this.writeVarintField(e,+r)}}function F0e(t,e,r){const n=r.buf;let i,l;if(l=n[r.pos++],i=(l&112)>>4,l<128||(l=n[r.pos++],i|=(l&127)<<3,l<128)||(l=n[r.pos++],i|=(l&127)<<10,l<128)||(l=n[r.pos++],i|=(l&127)<<17,l<128)||(l=n[r.pos++],i|=(l&127)<<24,l<128)||(l=n[r.pos++],i|=(l&1)<<31,l<128))return up(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function up(t,e,r){return r?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function z0e(t,e){let r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),r^4294967295?r=r+1|0:(r=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),j0e(r,n,e),B0e(n,e)}function j0e(t,e,r){r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos]=t&127}function B0e(t,e){const r=(t&7)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function DD(t,e,r){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));r.realloc(n);for(let i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function q0e(t,e){for(let r=0;r<t.length;r++)e.writeVarint(t[r])}function $0e(t,e){for(let r=0;r<t.length;r++)e.writeSVarint(t[r])}function V0e(t,e){for(let r=0;r<t.length;r++)e.writeFloat(t[r])}function U0e(t,e){for(let r=0;r<t.length;r++)e.writeDouble(t[r])}function G0e(t,e){for(let r=0;r<t.length;r++)e.writeBoolean(t[r])}function H0e(t,e){for(let r=0;r<t.length;r++)e.writeFixed32(t[r])}function J0e(t,e){for(let r=0;r<t.length;r++)e.writeSFixed32(t[r])}function W0e(t,e){for(let r=0;r<t.length;r++)e.writeFixed64(t[r])}function Z0e(t,e){for(let r=0;r<t.length;r++)e.writeSFixed64(t[r])}function K0e(t,e,r){let n="",i=e;for(;i<r;){const l=t[i];let c=null,s=l>239?4:l>223?3:l>191?2:1;if(i+s>r)break;let p,g,_;s===1?l<128&&(c=l):s===2?(p=t[i+1],(p&192)===128&&(c=(l&31)<<6|p&63,c<=127&&(c=null))):s===3?(p=t[i+1],g=t[i+2],(p&192)===128&&(g&192)===128&&(c=(l&15)<<12|(p&63)<<6|g&63,(c<=2047||c>=55296&&c<=57343)&&(c=null))):s===4&&(p=t[i+1],g=t[i+2],_=t[i+3],(p&192)===128&&(g&192)===128&&(_&192)===128&&(c=(l&15)<<18|(p&63)<<12|(g&63)<<6|_&63,(c<=65535||c>=1114112)&&(c=null))),c===null?(c=65533,s=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|c&1023),n+=String.fromCharCode(c),i+=s}return n}function Y0e(t,e,r){for(let n=0,i,l;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(l)if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,l=i;continue}else i=l-55296<<10|i-56320|65536,l=null;else{i>56319||n+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):l=i;continue}else l&&(t[r++]=239,t[r++]=191,t[r++]=189,l=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=i&63|128)}return r}class X0e extends BJ{constructor(e){super(),e=e||{},this.dataProjection=new Sx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:co,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,r,n,i){e.pos=r.geometry;const l=e.readVarint()+e.pos;let c=1,s=0,p=0,g=0,_=0,x=0;for(;e.pos<l;){if(!s){const P=e.readVarint();c=P&7,s=P>>3}if(s--,c===1||c===2)p+=e.readSVarint(),g+=e.readSVarint(),c===1&&_>x&&(i.push(_),x=_),n.push(p,g),_+=2;else if(c===7)_>x&&(n.push(n[x],n[x+1]),_+=2);else throw new Error("Invalid command found in the PBF")}_>x&&(i.push(_),x=_)}createFeature_(e,r,n){const i=r.type;if(i===0)return null;let l;const c=r.properties;let s;this.idProperty_?(s=c[this.idProperty_],delete c[this.idProperty_]):s=r.id,c[this.layerName_]=r.layer.name;const p=[],g=[];this.readRawGeometry_(e,r,p,g);const _=nbe(i,g.length);if(this.featureClass===co)l=new this.featureClass(_,p,g,2,c,s),l.transform(n.dataProjection);else{let x;if(_=="Polygon"){const M=yH(p,g);x=M.length>1?new Sy(p,"XY",M):new Ll(p,"XY",g)}else x=_==="Point"?new eu(p,"XY"):_==="LineString"?new qh(p,"XY"):_==="MultiPoint"?new h_(p,"XY"):_==="MultiLineString"?new Ty(p,"XY",g):null;const P=this.featureClass;l=new P,this.geometryName_&&l.setGeometryName(this.geometryName_);const A=ew(x,!1,n);l.setGeometry(A),s!==void 0&&l.setId(s),l.setProperties(c,!0)}return l}getType(){return"arraybuffer"}readFeatures(e,r){const n=this.layers_;r=this.adaptOptions(r);const i=An(r.dataProjection);i.setWorldExtent(r.extent),r.dataProjection=i;const l=new N0e(e),c=l.readFields(Q0e,{}),s=[];for(const p in c){if(n&&!n.includes(p))continue;const g=c[p],_=g?[0,0,g.extent,g.extent]:null;i.setExtent(_);for(let x=0,P=g.length;x<P;++x){const A=rbe(l,g,x),M=this.createFeature_(l,A,r);M!==null&&s.push(M)}}return s}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Q0e(t,e,r){if(t===3){const n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(ebe,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function ebe(t,e,r){if(t===15)e.version=r.readVarint();else if(t===1)e.name=r.readString();else if(t===5)e.extent=r.readVarint();else if(t===2)e.features.push(r.pos);else if(t===3)e.keys.push(r.readString());else if(t===4){let n=null;const i=r.readVarint()+r.pos;for(;r.pos<i;)t=r.readVarint()>>3,n=t===1?r.readString():t===2?r.readFloat():t===3?r.readDouble():t===4?r.readVarint64():t===5?r.readVarint():t===6?r.readSVarint():t===7?r.readBoolean():null;e.values.push(n)}}function tbe(t,e,r){if(t==1)e.id=r.readVarint();else if(t==2){const n=r.readVarint()+r.pos;for(;r.pos<n;){const i=e.layer.keys[r.readVarint()],l=e.layer.values[r.readVarint()];e.properties[i]=l}}else t==3?e.type=r.readVarint():t==4&&(e.geometry=r.pos)}function rbe(t,e,r){t.pos=e.features[r];const n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(tbe,i,n),i}function nbe(t,e){let r;return t===1?r=e===1?"Point":"MultiPoint":t===2?r=e===1?"LineString":"MultiLineString":t===3&&(r="Polygon"),r}const hp=[0,0,0],bc=5;class tw{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,cn(Ghe(this.resolutions_,(i,l)=>l-i),"`resolutions` must be sorted in descending order");let r;if(!e.origins){for(let i=0,l=this.resolutions_.length-1;i<l;++i)if(!r)r=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,cn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Bl(n)),cn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,cn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:_M,cn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,l)=>{const c=new OM(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const s=this.getTileRangeForExtentAndZ(n,l);c.minX=Math.max(s.minX,c.minX),c.maxX=Math.min(s.maxX,c.maxX),c.minY=Math.max(s.minY,c.minY),c.maxY=Math.min(s.maxY,c.maxY)}return c}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,r,n){const i=this.getTileRangeForExtentAndZ(e,r);for(let l=i.minX,c=i.maxX;l<=c;++l)for(let s=i.minY,p=i.maxY;s<=p;++s)n([r,l,s])}forEachTileCoordParentTileRange(e,r,n,i){let l,c,s,p=null,g=e[0]-1;for(this.zoomFactor_===2?(c=e[1],s=e[2]):p=this.getTileCoordExtent(e,i);g>=this.minZoom;){if(c!==void 0&&s!==void 0?(c=Math.floor(c/2),s=Math.floor(s/2),l=lp(c,c,s,s,n)):l=this.getTileRangeForExtentAndZ(p,g,n),r(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,r,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,c=e[2]*2;return lp(l,l+1,c,c+1,r)}const i=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,r)}return null}getTileRangeForTileCoordAndZ(e,r,n){if(r>this.maxZoom||r<this.minZoom)return null;const i=e[0],l=e[1],c=e[2];if(r===i)return lp(l,c,l,c,n);if(this.zoomFactor_){const p=Math.pow(this.zoomFactor_,r-i),g=Math.floor(l*p),_=Math.floor(c*p);if(r<i)return lp(g,g,_,_,n);const x=Math.floor(p*(l+1))-1,P=Math.floor(p*(c+1))-1;return lp(g,x,_,P,n)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,r,n)}getTileRangeForExtentAndZ(e,r,n){this.getTileCoordForXYAndZ_(e[0],e[3],r,!1,hp);const i=hp[1],l=hp[2];this.getTileCoordForXYAndZ_(e[2],e[1],r,!0,hp);const c=hp[1],s=hp[2];return lp(i,c,l,s,n)}getTileCoordCenter(e){const r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=uo(this.getTileSize(e[0]),this.tmpSize_);return[r[0]+(e[1]+.5)*i[0]*n,r[1]-(e[2]+.5)*i[1]*n]}getTileCoordExtent(e,r){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),l=uo(this.getTileSize(e[0]),this.tmpSize_),c=n[0]+e[1]*l[0]*i,s=n[1]-(e[2]+1)*l[1]*i,p=c+l[0]*i,g=s+l[1]*i;return Ml(c,s,p,g,r)}getTileCoordForCoordAndResolution(e,r,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],r,!1,n)}getTileCoordForXYAndResolution_(e,r,n,i,l){const c=this.getZForResolution(n),s=n/this.getResolution(c),p=this.getOrigin(c),g=uo(this.getTileSize(c),this.tmpSize_);let _=s*(e-p[0])/n/g[0],x=s*(p[1]-r)/n/g[1];return i?(_=O0(_,bc)-1,x=O0(x,bc)-1):(_=M0(_,bc),x=M0(x,bc)),Ov(c,_,x,l)}getTileCoordForXYAndZ_(e,r,n,i,l){const c=this.getOrigin(n),s=this.getResolution(n),p=uo(this.getTileSize(n),this.tmpSize_);let g=(e-c[0])/s/p[0],_=(c[1]-r)/s/p[1];return i?(g=O0(g,bc)-1,_=O0(_,bc)-1):(g=M0(g,bc),_=M0(_,bc)),Ov(n,g,_,l)}getTileCoordForCoordAndZ(e,r,n){return this.getTileCoordForXYAndZ_(e[0],e[1],r,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,r){const n=JI(this.resolutions_,e,r||0);return qn(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,r){return fH(r,0,r.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const r=this.resolutions_.length,n=new Array(r);for(let i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n}}function $J(t){let e=t.getDefaultTileGrid();return e||(e=sbe(t),t.setDefaultTileGrid(e)),e}function ibe(t,e,r){const n=e[0],i=t.getTileCoordCenter(e),l=rw(r);if(!uf(l,i)){const c=En(l),s=Math.ceil((l[0]-i[0])/c);return i[0]+=c*s,t.getTileCoordForCoordAndZ(i,n)}return e}function obe(t,e,r,n){n=n!==void 0?n:"top-left";const i=VJ(t,e,r);return new tw({extent:t,origin:ade(t,n),resolutions:i,tileSize:r})}function s5(t){const e=t||{},r=e.extent||An("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:VJ(r,e.maxZoom,e.tileSize,e.maxResolution)};return new tw(n)}function VJ(t,e,r,n){e=e!==void 0?e:_H,r=uo(r!==void 0?r:_M);const i=wo(t),l=En(t);n=n>0?n:Math.max(l/r[0],i/r[1]);const c=e+1,s=new Array(c);for(let p=0;p<c;++p)s[p]=n/Math.pow(2,p);return s}function sbe(t,e,r,n){const i=rw(t);return obe(i,e,r,n)}function rw(t){t=An(t);let e=t.getExtent();if(!e){const r=180*zh.degrees/t.getMetersPerUnit();e=Ml(-r,-r,r,r)}return e}class abe extends oJ{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const r=[256,256];this.tileGrid&&uo(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),r),this.tmpSize=[0,0],this.key_=e.key||Nr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const r=e?this.getTileGridForProjection(e):this.tileGrid;return r?r.getResolutions():null}getTile(e,r,n,i,l){return Sr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:$J(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,r,n){const i=this.getTileGridForProjection(n),l=this.getTilePixelRatio(r),c=uo(i.getTileSize(e),this.tmpSize);return l==1?c:dfe(c,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,r){const n=r!==void 0?r:this.getProjection(),i=r!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=ibe(i,e,n)),Age(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class lbe extends jl{constructor(e,r){super(e),this.tile=r}}function cbe(t,e,r,n){const i=document.createElement("script"),l="olc_"+Nr(e);function c(){delete window[l],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(t.includes("?")?"&":"?")+"callback="+l;const s=setTimeout(function(){c(),r&&r()},1e4);window[l]=function(p){clearTimeout(s),c(),e(p)},document.head.appendChild(i)}const ube=/\{z\}/g,hbe=/\{x\}/g,dbe=/\{y\}/g,pbe=/\{-y\}/g;function fbe(t,e,r,n,i){return t.replace(ube,e.toString()).replace(hbe,r.toString()).replace(dbe,n.toString()).replace(pbe,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-n).toString()})}function mbe(t){const e=[];let r=/\{([a-z])-([a-z])\}/.exec(t);if(r){const n=r[1].charCodeAt(0),i=r[2].charCodeAt(0);let l;for(l=n;l<=i;++l)e.push(t.replace(r[0],String.fromCharCode(l)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t),r){const n=parseInt(r[2],10);for(let i=parseInt(r[1],10);i<=n;i++)e.push(t.replace(r[0],i.toString()));return e}return e.push(t),e}function gbe(t,e){return function(r,n,i){if(!r)return;let l;const c=r[0];if(e){const s=e.getFullTileRange(c);s&&(l=s.getHeight()-1)}return fbe(t,c,r[1],r[2],l)}}function UJ(t,e){const r=t.length,n=new Array(r);for(let i=0;i<r;++i)n[i]=gbe(t[i],e);return ybe(n)}function ybe(t){return t.length===1?t[0]:function(e,r,n){if(!e)return;const i=Cge(e),l=yh(i,t.length);return t[l](e,r,n)}}const DT={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class nw extends abe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===nw.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const r=e.target,n=Nr(r),i=r.getState();let l;i==qt.LOADING?(this.tileLoadingKeys_[n]=!0,l=DT.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=i==qt.ERROR?DT.TILELOADERROR:i==qt.LOADED?DT.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new lbe(l,r))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,r){this.tileUrlFunction=e,typeof r<"u"?this.setKey(r):this.changed()}setUrl(e){const r=mbe(e);this.urls=r,this.setUrls(r)}setUrls(e){this.urls=e;const r=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(UJ(e,this.tileGrid),r):this.setKey(r)}tileUrlFunction(e,r,n){}}class _be extends nw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:bbe,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:sJ,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Np(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const r=this.getProjection();if(this.tileGrid&&(!r||Np(r,e)))return this.tileGrid;const n=Nr(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=$J(e)),this.tileGridForProjection[n]}createTile_(e,r,n,i,l,c){const s=[e,r,n],p=this.getTileCoordForTileUrlFunction(s,l),g=p?this.tileUrlFunction(p,i,l):void 0,_=new this.tileClass(s,g!==void 0?qt.IDLE:qt.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return _.key=c,_.addEventListener(Rr.CHANGE,this.handleTileChange.bind(this)),_}getTile(e,r,n,i,l){const c=this.getProjection();if(!c||!l||Np(c,l))return this.getTileInternal(e,r,n,i,c||l);const s=[e,r,n],p=this.getKey(),g=this.getTileGridForProjection(c),_=this.getTileGridForProjection(l),x=this.getTileCoordForTileUrlFunction(s,l),P=new pJ(c,g,l,_,s,x,this.getTilePixelRatio(i),this.getGutter(),(A,M,N,z)=>this.getTileInternal(A,M,N,z,c),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return P.key=p,P}getTileInternal(e,r,n,i,l){const c=this.getKey();return this.createTile_(e,r,n,i,l,c)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,r){const n=An(e);if(n){const i=Nr(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=r)}}}function bbe(t,e){t.getImage().src=e}class vbe extends _be{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:An("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)cbe(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",e.url),r.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const r=e.target;if(!r.status||r.status>=200&&r.status<300){let n;try{n=JSON.parse(r.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const r=An("EPSG:4326"),n=this.getProjection();let i;if(e.bounds!==void 0){const g=o_(r,n);i=JG(e.bounds,g)}const l=rw(n),c=e.minzoom||0,s=e.maxzoom||22,p=s5({extent:l,maxZoom:s,minZoom:c,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=UJ(e.tiles,p),e.attribution&&!this.getAttributions()){const g=i!==void 0?i:l;this.setAttributions(function(_){return ui(g,_.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class xbe extends nw{constructor(e){const r=e.projection||"EPSG:3857",n=e.extent||rw(r),i=e.tileGrid||s5({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:r,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:GJ,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:aJ,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,r,n){if(n.getState()===qt.IDLE){n.setState(qt.LOADING);const i=n.wrappedTileCoord,l=this.getTileGridForProjection(r),c=l.getTileCoordExtent(i),s=i[0],p=l.getResolution(s);Hc(c,-p,c);const g=this.tileGrid,_=g.getExtent();_&&Cl(c,_,c);const x=g.getZForResolution(p,this.zDirection);g.forEachTileCoord(c,x,P=>{const A=this.tileUrlFunction(P,e,r);this.sourceTiles_[A]||(this.sourceTiles_[A]=new this.tileClass(P,A?qt.IDLE:qt.EMPTY,A,this.format_,this.tileLoadFunction));const M=this.sourceTiles_[A];n.sourceTiles.push(M),this.tileKeysBySourceTileUrl_[A]||(this.tileKeysBySourceTileUrl_[A]=[]),this.tileKeysBySourceTileUrl_[A].push(n.getKey());const N=M.getState();if(N<qt.LOADED){const z=j=>{this.handleTileChange(j);const $=M.getState();if($===qt.LOADED||$===qt.ERROR){const J=M.getKey();J in n.errorTileKeys?M.getState()===qt.LOADED&&delete n.errorTileKeys[J]:n.loadingSourceTiles--,$===qt.ERROR?n.errorTileKeys[J]=!0:M.removeEventListener(Rr.CHANGE,z),n.loadingSourceTiles===0&&n.setState(Qc(n.errorTileKeys)?qt.LOADED:qt.ERROR)}};M.addEventListener(Rr.CHANGE,z),n.loadingSourceTiles++}N===qt.IDLE&&(M.extent=g.getTileCoordExtent(P),M.projection=r,M.resolution=g.getResolution(P[0]),M.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(P=>P.getState()===qt.ERROR)?qt.ERROR:qt.LOADED)}return n.sourceTiles}removeSourceTiles(e){const r=e.getKey(),n=e.sourceTiles;for(let i=0,l=n.length;i<l;++i){const c=n[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[c])return;const s=this.tileKeysBySourceTileUrl_[c].indexOf(r);s!==-1&&(this.tileKeysBySourceTileUrl_[c].splice(s,1),this.tileKeysBySourceTileUrl_[c].length===0&&(delete this.tileKeysBySourceTileUrl_[c],delete this.sourceTiles_[c]))}}getTile(e,r,n,i,l){const c=[e,r,n];let s=this.getTileCoordForTileUrlFunction(c,l);const p=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(l);if(s&&p){const P=g.getTileCoordExtent(s);Hc(P,-g.getResolution(e),P),ui(p,P)||(s=null)}let _=!0;if(s!==null){const P=this.tileGrid,A=g.getResolution(e),M=P.getZForResolution(A,1),N=g.getTileCoordExtent(s);Hc(N,-A,N),P.forEachTileCoord(N,M,z=>{_=_&&!this.tileUrlFunction(z,i,l)})}const x=new nge(c,_?qt.EMPTY:qt.IDLE,s,this.getSourceTiles.bind(this,i,l),this.removeSourceTiles.bind(this));return x.key=this.getKey(),x}getTileGridForProjection(e){const r=e.getCode();let n=this.tileGrids_[r];if(!n){const i=this.getProjection();cn(i===null||Np(i,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const l=this.tileGrid,c=l.getResolutions().slice(),s=c.map(function(_,x){return l.getOrigin(x)}),p=c.map(function(_,x){return l.getTileSize(x)}),g=_H+1;for(let _=c.length;_<g;++_)c.push(c[_-1]/2),s.push(s[_-1]),p.push(p[_-1]);n=new tw({extent:l.getExtent(),origins:s,resolutions:c,tileSizes:p}),this.tileGrids_[r]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,r,n){const i=this.getTileGridForProjection(n),l=uo(i.getTileSize(e),this.tmpSize);return[Math.round(l[0]*r),Math.round(l[1]*r)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function GJ(t,e){t.setLoader(function(r,n,i){iJ(e,t.getFormat(),r,n,i,t.onLoad.bind(t),t.onError.bind(t))})}function wbe(t,e=512){return t.getExtent()?s5({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():n5}function Ebe(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((n,i)=>{e.accessToken=n,e.accessTokenParam=i})),e}function Tbe(t,e,r="",n={},i=void 0){let l,c,s,p,g=!0;return typeof r!="string"&&!Array.isArray(r)?(s=r,p=s.source||s.layers,n=s):p=r,typeof n=="string"?(l=n,s={}):(l=n.styleUrl,s=n),s.updateSource===!1&&(g=!1),i||(i=s.resolutions),!l&&typeof e=="string"&&!e.trim().startsWith("{")&&(l=e),l&&(l=l.startsWith("data:")?location.href:zJ(l,s.accessToken),s=Ebe(l,s)),new Promise(function(_,x){i0e(e,s).then(function(P){if(P.version!=8)return x(new Error("glStyle version 8 required."));if(!(t instanceof Yme||t instanceof gb))return x(new Error("Can only apply to VectorLayer or VectorTileLayer"));const A=t instanceof gb?"vector":"geojson";if(p?Array.isArray(p)?c=P.layers.find(function(X){return X.id===p[0]}).source:c=p:(c=P.layers.find(function(X){return X.source&&P.sources[X.source].type===A}).source,p=c),!c)return x(new Error(`No ${A} source found in the glStyle.`));function M(){if(!g)return Promise.resolve();if(t instanceof gb)return Pbe(P.sources[c],l,s).then(function(Z){const U=t.getSource();U?Z!==U&&(U.setTileUrlFunction(Z.getTileUrlFunction()),typeof U.setUrls=="function"&&typeof Z.getUrls=="function"&&U.setUrls(Z.getUrls()),U.format_||(U.format_=Z.format_),U.getAttributions()||U.setAttributions(Z.getAttributions()),U.getTileLoadFunction()===GJ&&U.setTileLoadFunction(Z.getTileLoadFunction()),Np(U.getProjection(),Z.getProjection())&&(U.tileGrid=Z.getTileGrid())):t.setSource(Z);const K=t.getSource().getTileGrid();!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())&&K.getMinZoom()>0&&t.setMaxResolution(n0e(Math.max(0,K.getMinZoom()-1e-12),K.getResolutions()))});const X=P.sources[c];let re=t.getSource();(!re||re.get("mapbox-source")!==X)&&(re=Rbe(X,l,s));const ne=t.getSource();return ne?re!==ne&&(ne.getAttributions()||ne.setAttributions(re.getAttributions()),ne.format_||(ne.format_=re.getFormat()),ne.url_=re.getUrl()):t.setSource(re),Promise.resolve()}let N,z;const j={},$={};function J(){if(!z&&(!P.sprite||j)){if(s.projection&&!i){const re=An(s.projection).getUnits();re!=="m"&&(i=n5.map(ne=>ne/zh[re]))}z=g0e(t,P,p,i,j,$,(X,re=s.webfonts)=>c0e(X,re),s.getImage),t.getStyle()?M().then(_).catch(x):x(new Error(`Nothing to show for source [${c}]`))}else z?(t.setStyle(z),M().then(_).catch(x)):x(new Error("Something went wrong trying to apply style."))}if(P.sprite){const X=K_e(P.sprite,s.accessToken,l||location.href);N=window.devicePixelRatio>=1.5?.5:1;const re=N==.5?"@2x":"";Promise.all(X.map(function(ne){const Z=new URL(ne.url);let U=Z.origin+Z.pathname+re+".json"+Z.search;return new Promise(function(K,he){vf("Sprite",U,s).then(K).catch(function(ue){U=Z.origin+Z.pathname+".json"+Z.search,vf("Sprite",U,s).then(K).catch(he)})}).then(function(K){K===void 0&&x(new Error("No sprites found."));let he;if(he=Z.origin+Z.pathname+re+".png"+Z.search,s.transformRequest){const ue=s.transformRequest(he,"SpriteImage")||he;(ue instanceof Request||ue instanceof Promise)&&(he=ue)}$[ne.id]=he;for(const ue in K){const Ee=ne.id=="default"?ue:`${ne.id}:${ue}`;j[Ee]=K[ue]}}).catch(function(K){x(new Error(`Sprites cannot be loaded: ${U}: ${K.message}`))})})).then(J).catch(x)}else J()}).catch(x)})}function Sbe(t,e){const r=t.bounds;if(r){const n=xv([r[0],r[1]],e),i=xv([r[2],r[3]],e);return[n[0],n[1],i[0],i[1]]}return An(e).getExtent()}function Cbe(t,e,r){const n=new vbe({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),i=n.getTileJSON(),l=n.getTileGrid(),c=An(r.projection||"EPSG:3857"),s=Sbe(i,c),p=c.getExtent(),g=i.minzoom||0,_=i.maxzoom||22,x={attributions:n.getAttributions(),projection:c,tileGrid:new tw({origin:p?Bl(p):l.getOrigin(0),extent:s||l.getExtent(),minZoom:g,resolutions:wbe(c,e.tileSize).slice(0,_+1),tileSize:l.getTileSize(0)})};return Array.isArray(i.tiles)?x.urls=i.tiles:x.url=i.tiles,x}function Pbe(t,e,r){return new Promise(function(n,i){o0e(t,e,r).then(function({tileJson:l,tileLoadFunction:c}){const s=Cbe(t,l,r);s.tileLoadFunction=c,s.format=new X0e({layerName:"mvt:layer"});const p=new xbe(s);p.set("mapbox-source",t),n(p)}).catch(i)})}function Abe(t){return`{bbox-${(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Rbe(t,e,r){const n=r.projection?new OD({dataProjection:r.projection}):new OD,i=t.data,l={};if(typeof i=="string"){const[s]=_b(i,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(s)){const g=(x,P,A)=>{const M=Abe(A);return s.replace(M,`${x.join(",")}`)},_=new gT({attributions:t.attribution,format:n,loader:(x,P,A,M,N)=>{const z=typeof g=="function"?g(x,P,A):g;vf("GeoJSON",z,r).then(j=>{const $=_.getFormat().readFeatures(j,{featureProjection:A});_.addFeatures($),M($)}).catch(j=>{_.removeLoadedExtent(x),N()})},strategy:ege});return _.set("mapbox-source",t),_}const p=new gT({attributions:t.attribution,format:n,url:s,loader:(g,_,x,P,A)=>{vf("GeoJSON",s,r).then(M=>{const N=p.getFormat().readFeatures(M,{featureProjection:x});p.addFeatures(N),P(N)}).catch(M=>{p.removeLoadedExtent(g),A()})}});return p}l.features=n.readFeatures(i,{featureProjection:"EPSG:3857"});const c=new gT(Object.assign({attributions:t.attribution,format:n},l));return c.set("mapbox-source",t),c}class Ibe extends gb{constructor(){super({declutter:!0})}async applyVectorStyle(e){return Tbe(this,e.replace(/\/$/,""))}}const qv=class qv extends td{constructor(r){super({handleEvent:n=>this.handlePointerEvent(n)});Er(this,"overlay");Er(this,"downPixel",null);this.overlay=r}getIntersectingFeature(r){return r.map.getFeaturesAtPixel(r.pixel).find(i=>{const l=i?.get("overlayBodyTemplateId");return!l||typeof l!="string"?!1:document.getElementById(l)instanceof HTMLTemplateElement})}handlePointerEvent(r){const n=r.map.getViewport();switch(r.type){case"pointermove":{if(r.dragging)return!0;this.getIntersectingFeature(r)&&(n.style.cursor="pointer");break}case"pointerdown":{r.pixel.length>=2&&(this.downPixel=[r.pixel[0],r.pixel[1]]);break}case"pointerup":{if(!this.downPixel)break;const i=r.pixel[0]-this.downPixel[0],l=r.pixel[1]-this.downPixel[1];if(Math.sqrt(i*i+l*l)<qv.CLICK_DISTANCE_THRESHOLD){const s=this.getIntersectingFeature(r),p=s?.getGeometry(),g=p instanceof eu?p.getCoordinates():void 0,_=s?.getProperties()??{};s&&g?this.overlay.showAtCoordinate(g,_):this.overlay.close()}this.downPixel=null;break}}return!0}};Er(qv,"CLICK_DISTANCE_THRESHOLD",5);let bC=qv;class Mbe extends td{constructor(){super()}handleEvent(e){const r=e.map.getViewport();return e.type==="pointerdown"?(r.style.cursor!=="pointer"&&(r.style.cursor="grabbing"),!0):e.type==="pointermove"?(r.style.cursor=e.dragging?"grabbing":"grab",!0):((e.type==="pointerup"||e.type==="pointerleave")&&(r.style.cursor="grab"),!0)}}class Obe extends gme{constructor(r){const n=r.querySelector(".app-map__overlay-header"),i=r.querySelector(".app-map__overlay-title"),l=r.querySelector(".app-map__overlay-body"),c=r.querySelector(".app-map__overlay-close");r.setAttribute("part","app-map__overlay"),l.setAttribute("part","app-map__overlay-body"),n.setAttribute("part","app-map__overlay-header"),i.setAttribute("part","app-map__overlay-title"),c.setAttribute("part","app-map__overlay-close");super({element:r,autoPan:{animation:{duration:250},margin:80},offset:[0,0],positioning:"top-center",stopEvent:!0});Er(this,"container");Er(this,"title");Er(this,"content");Er(this,"closeButton");this.container=r,this.title=i,this.content=l,this.closeButton=c,this.closeButton.addEventListener("click",()=>this.close())}replacer(r,n){return r.replace(/{{(.*?)}}/g,(i,l)=>{const c=n[l.trim()];return c!==void 0?String(c):""})}showAtCoordinate(r,n){const i=n.overlayTitleTemplateId,l=n.overlayBodyTemplateId,c=typeof i=="string"?document.getElementById(i):null,s=typeof l=="string"?document.getElementById(l):null;c instanceof HTMLTemplateElement&&this.title&&(this.title.innerHTML=this.replacer(c.innerHTML,n)),s instanceof HTMLTemplateElement?this.content.innerHTML=this.replacer(s.innerHTML,n):console.warn(`[FeatureOverlay] No valid template found for overlayBodyTemplateId="${l}"`),this.container.hidden=!1,this.setPosition(r),this.container.dispatchEvent(new CustomEvent("map:overlay:open",{bubbles:!0}))}close(){this.container.hidden=!0,this.setPosition(void 0),this.container.dispatchEvent(new CustomEvent("map:overlay:close",{bubbles:!0}))}}function kbe(t){const e=t.getViewport();let r=!1,n=0,i=0,l=0;const s=t.getInteractions().getArray().find(A=>A instanceof yy),p=A=>{s&&s.setActive(A)},g=A=>{const M=e.getBoundingClientRect(),N=A.clientX-M.left,z=A.clientY-M.top;return Math.atan2(z-l,N-i)},_=A=>{const M=A.buttons===1,N=A.buttons===2,z=A.ctrlKey&&M,j=!A.ctrlKey&&N;if(!z&&!j)return;const $=t.getView();if(!t.getSize())return;const[X,re]=t.getPixelFromCoordinate($.getCenter());i=X,l=re,n=g(A),r=!0,p(!1),A.preventDefault(),A.stopPropagation()},x=A=>{if(!r)return;const M=g(A),N=M-n;n=M;const z=t.getView();z.setRotation(z.getRotation()+N),A.preventDefault(),A.stopPropagation()},P=()=>{r&&(r=!1,p(!0))};e.addEventListener("pointerdown",_,{passive:!1}),window.addEventListener("pointermove",x,{passive:!1}),window.addEventListener("pointerup",P),e.addEventListener("contextmenu",A=>A.preventDefault())}const Lbe="Right-drag or Ctrl + drag to rotate",Dbe="Alt + Shift + drag to rotate",Nbe="Click to reset.";function Fbe(t,e){if(e.rotateTooltip===!1)return;const r=t.getViewport().querySelector(".ol-rotate");if(!r)return;const n=r.querySelector(".ol-rotate-reset");n&&n.removeAttribute("title");const i=document.createElement("div");i.className="em-rotate-tooltip",r.appendChild(i);const l=t.getView(),c=e.olRotationMode==="right-drag"?Lbe:Dbe,s=()=>{const g=Math.abs(l.getRotation())<1e-4;i.textContent=g?c:Nbe},p=g=>{const _=l.getRotation(),x=typeof e.rotate=="object"&&e.rotate.autoHide===!0&&_!==0,P=g&&!x;i.classList.toggle("is-visible",P),P&&s()};r.addEventListener("mouseenter",()=>p(!0)),r.addEventListener("mouseleave",()=>p(!1)),t.on("pointerdrag",()=>p(!1)),l.on("change:rotation",()=>{s(),p(!1)})}async function zbe(t,e){const r=new cJ({target:t,layers:[],controls:e.controls});(e.controls?.olRotationMode??"default")==="right-drag"&&kbe(r),e.controls&&e.controls.olRotateTooltip!==!1&&e.controls.rotate!==!1&&Fbe(r,{rotateTooltip:e.controls.olRotateTooltip,rotate:e.controls.rotate,olRotationMode:e.controls.olRotationMode});const i=e.vectorUrl||Mc.tiles.urls.localVectorStyleUrl,l=new Ibe;try{await l.applyVectorStyle(i),r.addLayer(l)}catch(c){if(/^https?:\/\/localhost(:\d+)?\//i.test(i))console.warn("[em-map] applyVectorStyle failed on localhost; keeping vector layer for tests.",c),r.addLayer(l);else throw console.error("[em-map] Failed to apply vector style.",c),c}if(e.usesInternalOverlays&&e.overlayEl instanceof HTMLElement){const c=new Obe(e.overlayEl);r.addOverlay(c),r.addInteraction(new bC(c));const s=r;s.featureOverlay=c}if(e.controls?.grabCursor!==!1){r.addInteraction(new Mbe);const c=r.getViewport();c.style.cursor="grab"}return r}async function jbe(t,e,r=!1){const n=e||Mc.tiles.urls.localVectorStyleUrl,i=new dJ({target:t,styleUrl:n,enable3DControls:r,minZoom:6,maxZoom:18,zoom:15,pitch:0,bearing:0,center:[-.125,51.501],attributionControl:!1});if(i.addControl(new hJ.NavigationControl({showCompass:!0}),"top-right"),r){const{add3DBuildingsControl:l}=await Gs(async()=>{const{add3DBuildingsControl:c}=await import("./maplibre-3d-buildings-control-DQj4YYpu.js");return{add3DBuildingsControl:c}},[],import.meta.url);l(i)}return i}function Bbe(){const t=document.createDocumentFragment(),e=document.createElement("div");e.id="map",e.className="app-map__viewport",t.appendChild(e);const r=document.createElement("div");r.className="app-map__overlay",r.hidden=!0,r.innerHTML=`
    <div class="app-map__overlay-header">
      <div class="app-map__overlay-title"></div>
      <button class="app-map__overlay-close" aria-label="Close overlay">&times;</button>
    </div>
    <div class="app-map__overlay-body"></div>
  `,t.appendChild(r);const n=document.createElement("slot");return n.name="alerts",t.appendChild(n),t}function ND(t,e){const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.textContent=t,r}function qbe(t){return t?.getAttribute("csp-nonce")||null}function $be(t,e){return{mapLibrary:"openlayers",hostElement:t,project:r=>xv(r),unproject:r=>Gde(r),openlayers:{map:e}}}function Vbe(t,e){return{mapLibrary:"maplibre",hostElement:t,project:r=>r,unproject:r=>r,mapLibre:{map:e}}}const Ube=`:root,
:host {
  --ol-background-color: white;
  --ol-accent-background-color: #F5F5F5;
  --ol-subtle-background-color: rgba(128, 128, 128, 0.25);
  --ol-partial-background-color: rgba(255, 255, 255, 0.75);
  --ol-foreground-color: #333333;
  --ol-subtle-foreground-color: #666666;
  --ol-brand-color: #00AAFF;
}

.ol-box {
  box-sizing: border-box;
  border-radius: 2px;
  border: 1.5px solid var(--ol-background-color);
  background-color: var(--ol-partial-background-color);
}

.ol-mouse-position {
  top: 8px;
  right: 8px;
  position: absolute;
}

.ol-scale-line {
  background: var(--ol-partial-background-color);
  border-radius: 4px;
  bottom: 8px;
  left: 8px;
  padding: 2px;
  position: absolute;
}

.ol-scale-line-inner {
  border: 1px solid var(--ol-subtle-foreground-color);
  border-top: none;
  color: var(--ol-foreground-color);
  font-size: 10px;
  text-align: center;
  margin: 1px;
  will-change: contents, width;
  transition: all 0.25s;
}

.ol-scale-bar {
  position: absolute;
  bottom: 8px;
  left: 8px;
}

.ol-scale-bar-inner {
  display: flex;
}

.ol-scale-step-marker {
  width: 1px;
  height: 15px;
  background-color: var(--ol-foreground-color);
  float: right;
  z-index: 10;
}

.ol-scale-step-text {
  position: absolute;
  bottom: -5px;
  font-size: 10px;
  z-index: 11;
  color: var(--ol-foreground-color);
  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);
}

.ol-scale-text {
  position: absolute;
  font-size: 12px;
  text-align: center;
  bottom: 25px;
  color: var(--ol-foreground-color);
  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);
}

.ol-scale-singlebar {
  position: relative;
  height: 10px;
  z-index: 9;
  box-sizing: border-box;
  border: 1px solid var(--ol-foreground-color);
}

.ol-scale-singlebar-even {
  background-color: var(--ol-subtle-foreground-color);
}

.ol-scale-singlebar-odd {
  background-color: var(--ol-background-color);
}

.ol-unsupported {
  display: none;
}

.ol-viewport,
.ol-unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.ol-viewport canvas {
  all: unset;
  overflow: hidden;
}

.ol-viewport {
  touch-action: pan-x pan-y;
}

.ol-selectable {
  -webkit-touch-callout: default;
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;
}

.ol-grabbing {
  cursor: -webkit-grabbing;
  cursor: -moz-grabbing;
  cursor: grabbing;
}

.ol-grab {
  cursor: move;
  cursor: -webkit-grab;
  cursor: -moz-grab;
  cursor: grab;
}

.ol-control {
  position: absolute;
  background-color: var(--ol-subtle-background-color);
  border-radius: 4px;
}

.ol-zoom {
  top: 0.5em;
  left: 0.5em;
}

.ol-rotate {
  top: 0.5em;
  right: 0.5em;
  transition: opacity 0.25s linear, visibility 0s linear;
}

.ol-rotate.ol-hidden {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.25s linear, visibility 0s linear 0.25s;
}

.ol-zoom-extent {
  top: 4.643em;
  left: 0.5em;
}

.ol-full-screen {
  right: 0.5em;
  top: 0.5em;
}

.ol-control button {
  display: block;
  margin: 1px;
  padding: 0;
  color: var(--ol-subtle-foreground-color);
  font-weight: bold;
  text-decoration: none;
  font-size: inherit;
  text-align: center;
  height: 1.375em;
  width: 1.375em;
  line-height: 0.4em;
  background-color: var(--ol-background-color);
  border: none;
  border-radius: 2px;
}

.ol-control button::-moz-focus-inner {
  border: none;
  padding: 0;
}

.ol-zoom-extent button {
  line-height: 1.4em;
}

.ol-compass {
  display: block;
  font-weight: normal;
  will-change: transform;
}

.ol-touch .ol-control button {
  font-size: 1.5em;
}

.ol-touch .ol-zoom-extent {
  top: 5.5em;
}

.ol-control button:hover,
.ol-control button:focus {
  text-decoration: none;
  outline: 1px solid var(--ol-subtle-foreground-color);
  color: var(--ol-foreground-color);
}

.ol-zoom .ol-zoom-in {
  border-radius: 2px 2px 0 0;
}

.ol-zoom .ol-zoom-out {
  border-radius: 0 0 2px 2px;
}

.ol-attribution {
  text-align: right;
  bottom: 0.5em;
  right: 0.5em;
  max-width: calc(100% - 1.3em);
  display: flex;
  flex-flow: row-reverse;
  align-items: center;
}

.ol-attribution a {
  color: var(--ol-subtle-foreground-color);
  text-decoration: none;
}

.ol-attribution ul {
  margin: 0;
  padding: 1px 0.5em;
  color: var(--ol-foreground-color);
  text-shadow: 0 0 2px var(--ol-background-color);
  font-size: 12px;
}

.ol-attribution li {
  display: inline;
  list-style: none;
}

.ol-attribution li:not(:last-child):after {
  content: " ";
}

.ol-attribution img {
  max-height: 2em;
  max-width: inherit;
  vertical-align: middle;
}

.ol-attribution button {
  flex-shrink: 0;
}

.ol-attribution.ol-collapsed ul {
  display: none;
}

.ol-attribution:not(.ol-collapsed) {
  background: var(--ol-partial-background-color);
}

.ol-attribution.ol-uncollapsible {
  bottom: 0;
  right: 0;
  border-radius: 4px 0 0;
}

.ol-attribution.ol-uncollapsible img {
  margin-top: -0.2em;
  max-height: 1.6em;
}

.ol-attribution.ol-uncollapsible button {
  display: none;
}

.ol-zoomslider {
  top: 4.5em;
  left: 0.5em;
  height: 200px;
}

.ol-zoomslider button {
  position: relative;
  height: 10px;
}

.ol-touch .ol-zoomslider {
  top: 5.5em;
}

.ol-overviewmap {
  left: 0.5em;
  bottom: 0.5em;
}

.ol-overviewmap.ol-uncollapsible {
  bottom: 0;
  left: 0;
  border-radius: 0 4px 0 0;
}

.ol-overviewmap .ol-overviewmap-map,
.ol-overviewmap button {
  display: block;
}

.ol-overviewmap .ol-overviewmap-map {
  border: 1px solid var(--ol-subtle-foreground-color);
  height: 150px;
  width: 150px;
}

.ol-overviewmap:not(.ol-collapsed) button {
  bottom: 0;
  left: 0;
  position: absolute;
}

.ol-overviewmap.ol-collapsed .ol-overviewmap-map,
.ol-overviewmap.ol-uncollapsible button {
  display: none;
}

.ol-overviewmap:not(.ol-collapsed) {
  background: var(--ol-subtle-background-color);
}

.ol-overviewmap-box {
  border: 1.5px dotted var(--ol-subtle-foreground-color);
}

.ol-overviewmap .ol-overviewmap-box:hover {
  cursor: move;
}

.ol-overviewmap .ol-viewport:hover {
  cursor: pointer;
}
















































:host {
  background: rgb(180, 220, 237);
  display: block;
  font-family: "GDS Transport", arial, sans-serif;
  position: relative;
  height: 100%;
  width: 100%;
}

.app-map__viewport {
  width: 100%;
  height: 100%;
}





















































:host {
  --em-scale-bar-bottom: 20px;
}

:host[type=button]:not(:disabled),
:host[type=reset]:not(:disabled),
:host[type=submit]:not(:disabled),
:host button:not(:disabled) {
  cursor: pointer;
}

:host .ol-control {
  background-color: none;
  box-shadow: none;
  padding: 0;
}

:host .ol-control button {
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/*! Copyright (c) 2011 by Margaret Calvert & Henrik Kubel. All rights reserved. The font has been customised for exclusive use on gov.uk. This cut is not commercially available. */ /* stylelint-disable-line scss/comment-no-loud  */
@font-face {
  font-family: "GDS Transport";
  font-style: normal;
  font-weight: normal;
  src: url("fonts/light-94a07e06a1-v2.woff2") format("woff2"), url("fonts/light-f591b13f7d-v2.woff") format("woff");
  font-display: fallback;
}
@font-face {
  font-family: "GDS Transport";
  font-style: normal;
  font-weight: bold;
  src: url("fonts/bold-b542beb274-v2.woff2") format("woff2"), url("fonts/bold-affa96571d-v2.woff") format("woff");
  font-display: fallback;
}
@media print {
  :host .ol-control button {
    font-family: sans-serif;
  }
}
:host .ol-control button {
  font-weight: 700;
  font-size: 1rem;
  line-height: 1.25;
}
@media (min-width: 40.0625em) {
  :host .ol-control button {
    font-size: 1.1875rem;
    line-height: 1.3157894737;
  }
}
@media print {
  :host .ol-control button {
    font-size: 14pt;
    line-height: 1.15;
  }
}
:host .ol-control button {
  font-family: "GDS Transport", arial, sans-serif;
  line-height: 1;
  background-color: #ffffff;
  color: #0b0c0c;
  border: 1px solid #0b0c0c;
  border-radius: 0;
  width: 2em;
  height: 2em;
  text-align: center;
  padding: 0;
  margin: 0;
  box-shadow: none;
  transition: background-color 0.1s ease-in-out, color 0.1s ease-in-out, border-color 0.1s ease-in-out;
}

:host .ol-control button:hover,
:host .ol-control button:focus {
  text-decoration: none;
  outline: 1px solid #0b0c0c;
}

/* Rotate styles */
:host .ol-control.ol-rotate {
  background-color: transparent;
  left: 0.5em;
  right: auto;
  top: 80px;
}
:host .ol-control.ol-rotate .ol-rotate-reset {
  border-radius: 50%;
  display: inline;
}
:host .ol-control.ol-rotate .ol-compass {
  font-size: 0;
  width: 100%;
  height: 100%;
  background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}
:host .ol-control.ol-rotate .em-rotate-tooltip {
  display: inline;
  position: absolute;
  top: 64px;
  left: 15px;
  transform: translateY(0);
  padding: 6px 10px;
  border-radius: 4px;
  background: rgba(11, 12, 12, 0.75);
  color: #ffffff;
  font-size: 13px;
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity 150ms ease-out, transform 150ms ease-out;
  z-index: 20;
}
:host .ol-control.ol-rotate .em-rotate-tooltip.is-visible {
  opacity: 1;
  transform: translateY(-4px);
}

/* When zoom slider is present, move rotate below the slider */
:host(.has-zoom-slider) .ol-control.ol-rotate {
  top: 280px;
}

/* Zoom slider styles */
:host(.has-zoom-slider) .ol-zoom .ol-zoom-out {
  margin-top: 200px;
}

:host(.has-zoom-slider) .ol-zoomslider {
  background-color: transparent;
  top: 46px;
  left: 0.5em;
  width: 38px;
  height: 200px;
  position: absolute;
}

:host(.has-zoom-slider) .ol-zoom-in.ol-has-tooltip:hover [role=tooltip],
:host(.has-zoom-slider) .ol-zoom-in.ol-has-tooltip:focus [role=tooltip] {
  top: 3px;
}

:host(.has-zoom-slider) .ol-zoom-out.ol-has-tooltip:hover [role=tooltip],
:host(.has-zoom-slider) .ol-zoom-out.ol-has-tooltip:focus [role=tooltip] {
  top: 232px;
}

:host .ol-zoomslider button {
  position: relative;
  height: 10px;
}

:host .ol-scale-bar {
  bottom: var(--em-scale-bar-bottom);
  left: 50%;
  transform: translateX(-50%);
}

:host .ol-scale-text {
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  :host .ol-scale-text {
    font-family: sans-serif;
  }
}
:host .ol-scale-text {
  font-weight: 400;
  font-size: 0.875rem;
  line-height: 1.1428571429;
}
@media (min-width: 40.0625em) {
  :host .ol-scale-text {
    font-size: 1rem;
    line-height: 1.25;
  }
}
@media print {
  :host .ol-scale-text {
    font-size: 14pt;
    line-height: 1.2;
  }
}
:host .ol-scale-text {
  color: #0b0c0c;
}

:host .ol-scale-step-text {
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  :host .ol-scale-step-text {
    font-family: sans-serif;
  }
}
:host .ol-scale-step-text {
  font-weight: 400;
  font-size: 0.75rem;
  line-height: 1.25;
}
@media (min-width: 40.0625em) {
  :host .ol-scale-step-text {
    font-size: 0.875rem;
    line-height: 1.4285714286;
  }
}
@media print {
  :host .ol-scale-step-text {
    font-size: 12pt;
    line-height: 1.2;
  }
}
:host .ol-scale-step-text {
  color: #0b0c0c;
}

:host .ol-scale-singlebar-even {
  background-color: #0b0c0c;
}

/* coordinates */
:host .em-map__location-dms {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(var(--em-scale-bar-bottom) + 25px);
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  :host .em-map__location-dms {
    font-family: sans-serif;
  }
}
:host .em-map__location-dms {
  font-weight: 400;
  font-size: 0.875rem;
  line-height: 1.1428571429;
}
@media (min-width: 40.0625em) {
  :host .em-map__location-dms {
    font-size: 1rem;
    line-height: 1.25;
  }
}
@media print {
  :host .em-map__location-dms {
    font-size: 14pt;
    line-height: 1.2;
  }
}
:host .em-map__location-dms {
  background: transparent;
  padding: 2px 6px;
  border-radius: 4px;
  white-space: nowrap;
}

/* MapLibre controls */
:host .maplibregl-ctrl button.active {
  background-color: #b1b4b6;
  color: #ffffff;
}

:host .maplibregl-ctrl button.active:hover,
:host .maplibregl-ctrl button.active:focus {
  background-color: #505a5f;
  color: #ffffff;
  outline: 1px solid #ffffff;
}

:host .maplibregl-ctrl button:disabled {
  background-color: #f3f2f1;
  color: #b1b4b6;
  border-color: #b1b4b6;
  cursor: not-allowed;
}

:host .maplibregl-ctrl button:disabled:hover,
:host .maplibregl-ctrl button:disabled:focus {
  background-color: #f3f2f1;
  color: #b1b4b6;
  outline: none;
}

.app-map__overlay,
:host::part(app-map__overlay) {
  cursor: default;
  position: relative;
  background-color: #ffffff;
  border: 1px solid #0b0c0c;
  min-width: 420px;
  z-index: 1;
  box-shadow: 0 2px 4px rgba(11, 12, 12, 0.1);
  bottom: -20px;
}

.app-map__overlay::before,
:host::part(app-map__overlay)::before {
  content: "";
  position: absolute;
  left: 50%;
  top: -25px;
  transform: translateX(-50%);
  border-width: 12px;
  border-style: solid;
  border-color: transparent transparent #0b0c0c transparent;
  z-index: -1;
}

.app-map__overlay::after,
:host::part(app-map__overlay)::after {
  content: "";
  position: absolute;
  left: 50%;
  top: -21px;
  transform: translateX(-50%);
  border-width: 11px;
  border-style: solid;
  border-color: transparent transparent #ffffff transparent;
  z-index: 1;
}

.app-map__overlay-header,
:host::part(app-map__overlay-header) {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  background-color: #ffffff;
  padding-bottom: 5px;
  padding-top: 5px;
  padding-left: 10px;
  padding-right: 10px;
}

.app-map__overlay-title,
:host::part(app-map__overlay-title) {
  font-size: 18px;
  flex: 1;
  margin-top: 5px;
  margin-right: 10px;
}

.app-map__overlay-close,
:host::part(app-map__overlay-close) {
  background: none;
  border: none;
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  .app-map__overlay-close,
  :host::part(app-map__overlay-close) {
    font-family: sans-serif;
  }
}
.app-map__overlay-close,
:host::part(app-map__overlay-close) {
  font-weight: 400;
  font-size: 1.125rem;
  line-height: 1.1111111111;
}
@media (min-width: 40.0625em) {
  .app-map__overlay-close,
  :host::part(app-map__overlay-close) {
    font-size: 1.6875rem;
    line-height: 1.1111111111;
  }
}
@media print {
  .app-map__overlay-close,
  :host::part(app-map__overlay-close) {
    font-size: 18pt;
    line-height: 1.15;
  }
}
.app-map__overlay-close,
:host::part(app-map__overlay-close) {
  line-height: 1;
  cursor: pointer;
  color: #505a5f;
}
.app-map__overlay-close:hover,
:host::part(app-map__overlay-close):hover {
  color: #0b0c0c;
}

.app-map__overlay-body,
:host::part(app-map__overlay-body) {
  font-family: "GDS Transport", arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
@media print {
  .app-map__overlay-body,
  :host::part(app-map__overlay-body) {
    font-family: sans-serif;
  }
}
.app-map__overlay-body,
:host::part(app-map__overlay-body) {
  font-weight: 400;
  font-size: 0.875rem;
  line-height: 1.1428571429;
}
@media (min-width: 40.0625em) {
  .app-map__overlay-body,
  :host::part(app-map__overlay-body) {
    font-size: 1rem;
    line-height: 1.25;
  }
}
@media print {
  .app-map__overlay-body,
  :host::part(app-map__overlay-body) {
    font-size: 14pt;
    line-height: 1.2;
  }
}
.app-map__overlay-body,
:host::part(app-map__overlay-body) {
  max-height: 400px;
  overflow-y: auto;
  padding-bottom: 10px;
  padding-top: 10px;
}

.app-map__overlay-row,
:host::part(app-map__overlay-row) {
  display: flex;
  border-top: 1px solid #b1b4b6;
  margin-left: 10px;
  margin-right: 10px;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 10px;
  padding-right: 10px;
}

.app-map__overlay-row:nth-child(odd) {
  background-color: #ffffff;
}

.app-map__overlay-row:nth-child(even) {
  background-color: #f3f2f1;
}

.app-map__overlay-label,
:host::part(app-map__overlay-label) {
  flex: 0 0 50%;
  max-width: 50%;
  overflow-wrap: break-word;
  word-break: break-word;
  text-align: left;
  margin-right: 10px;
}

.app-map__overlay-value,
:host::part(app-map__overlay-value) {
  flex: 0 0 50%;
  max-width: 50%;
  overflow-wrap: break-word;
  word-break: break-word;
  text-align: left;
}

::slotted(.em-map__alerts) {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
  max-width: 500px;
  text-align: center;
}
`;class Gbe extends HTMLElement{constructor(){super();Er(this,"mapNonce",null);Er(this,"adapter");Er(this,"layers",new Map);Er(this,"shadow");Er(this,"featureOverlay");Er(this,"geoJson",null);Er(this,"positionData",[]);Er(this,"mapInstance");this.shadow=this.attachShadow({mode:"open"})}async connectedCallback(){this.mapNonce=qbe(this),this.render(),this.geoJson=this.parseGeoJsonFromSlot(),this.positionData=this.parsePositionDataFromSlot(),await this.initialiseMap(),this.dispatchEvent(new CustomEvent("map:ready",{detail:{map:this.map,geoJson:this.geoJson},bubbles:!0,composed:!0}))}get geojson(){return this.geoJson}get positions(){return this.positionData}get map(){return this.mapInstance}get olMapInstance(){return this.mapInstance instanceof cJ?this.mapInstance:null}get maplibreMapInstance(){return this.mapInstance instanceof dJ?this.mapInstance:null}addLayer(r,n){if(!this.adapter)throw new Error("Map not ready");return this.layers.has(r.id)&&this.removeLayer(r.id),r.attach(this.adapter,n),this.layers.set(r.id,r),typeof r.getNativeLayer=="function"?r.getNativeLayer():void 0}removeLayer(r){if(!this.adapter)return;let n=this.layers.get(r),i;if(!n){for(const l of this.layers.values())if(typeof l=="object"&&l!==null&&"options"in l?i=l.options:i=void 0,i?.title===r){n=l;break}}n&&(n.detach(this.adapter),this.layers.delete(n.id))}getLayer(r){return this.layers.get(r)}closeOverlay(){this.featureOverlay?.close()}parseAttributes(){const r=this.getAttribute("renderer")==="maplibre"?"maplibre":"openlayers",n=this.getAttribute("vector-url")||this.getAttribute("vector-test-url"),i=n&&n.trim()?n:Mc.tiles.urls.localVectorStyleUrl;return{renderer:r,vectorUrl:i,usesInternalOverlays:this.hasAttribute("uses-internal-overlays"),overlayBodyTemplateId:this.getAttribute("overlay-body-template-id")||void 0,overlayTitleTemplateId:this.getAttribute("overlay-title-template-id")||void 0}}parseGeoJsonFromSlot(){const r=this.querySelector('script[type="application/json"][slot="geojson-data"]');if(r?.textContent)try{return JSON.parse(r.textContent)}catch(n){console.warn("Invalid GeoJSON passed to <em-map>",n)}return null}parsePositionDataFromSlot(){const r=this.querySelector('script[type="application/json"][slot="position-data"]');if(r?.textContent)try{return JSON.parse(r.textContent)}catch(n){console.warn("Invalid position data passed to <em-map>",n)}return[]}async initialiseMap(){const r=this.parseAttributes(),n=this.shadow.querySelector("#map"),i=this.shadow.querySelector(".app-map__overlay")??null;if(r.renderer==="maplibre")this.mapInstance=await jbe(n,r.vectorUrl,this.getControlOptions().enable3DBuildings??!1),this.adapter=Vbe(this,this.mapInstance);else{this.mapInstance=await zbe(n,{vectorUrl:r.vectorUrl,usesInternalOverlays:r.usesInternalOverlays,overlayEl:i,controls:this.getControlOptions()}),this.adapter=$be(this,this.mapInstance);const l=this.mapInstance;this.featureOverlay=l.featureOverlay}}getControlOptions(){const r=z=>this.hasAttribute(z)&&this.getAttribute(z)!=="false",n=this.getAttribute("rotate-control");let i;n==="false"?i=!1:n==="auto-hide"?i={autoHide:!0}:i={autoHide:!1};const l=this.hasAttribute("ol-rotate-tooltip")?this.getAttribute("ol-rotate-tooltip")!=="false":!0,c=this.hasAttribute("scale-line")&&this.getAttribute("scale-line")!=="false",s=this.getAttribute("scale-control"),p=this.getAttribute("location-display")??void 0,g=this.getAttribute("location-source")??void 0,_=r("zoom-slider"),x=r("grab-cursor");let P;s==="bar"||s==="line"?P=s:s==="false"?P=void 0:c&&(P="line");const M=this.getAttribute("renderer")!=="maplibre";let N;return M&&(this.getAttribute("ol-rotation-mode")==="right-drag"?N="right-drag":N="default"),this.classList.toggle("has-rotate-control",i!==!1),this.classList.toggle("has-zoom-slider",_),this.classList.toggle("has-scale-control",!!P),this.classList.toggle("has-location-dms",p==="dms"),this.classList.toggle("ol-rotation-mode",N==="right-drag"),this.classList.toggle("ol-rotate-tooltip",l),{grabCursor:x,rotate:i,olRotateTooltip:l,olRotationMode:N,zoomSlider:_,scaleControl:P,locationDisplay:p,locationDisplaySource:g,enable3DBuildings:r("enable-3d-buildings")}}render(){if(this.mapNonce===null){console.warn("Warning: No CSP nonce provided. Styles may not be applied correctly.");return}this.shadow.innerHTML="",this.shadow.appendChild(ND(Ube,this.mapNonce)),this.shadow.appendChild(ND(qhe,this.mapNonce)),this.shadow.appendChild(Bbe())}}customElements.define("em-map",Gbe);const Hbe={parameters:{controls:{matchers:{color:/(background|color)$/i,date:/Date$/i}},options:{panelPosition:"right",storySort:{order:["Overview","Components",["Map",["Introduction","Setup","Layers","Overlays"]]]}},a11y:{test:"todo"}}},Jbe=Object.freeze(Object.defineProperty({__proto__:null,default:Hbe},Symbol.toStringTag,{value:"Module"}));OI();const{composeConfigs:Wbe,PreviewWeb:Zbe}=__STORYBOOK_MODULE_PREVIEW_API__,Kbe=(t=[])=>{const e=[t[0]??ahe,t[1]??phe,t[2]??whe,t[3]??Bhe,t[4]??Jbe];return Wbe(e)};window.__STORYBOOK_PREVIEW__=window.__STORYBOOK_PREVIEW__||new Zbe(Oue,Kbe);window.__STORYBOOK_STORY_STORE__=window.__STORYBOOK_STORY_STORE__||window.__STORYBOOK_PREVIEW__.storyStore;export{P1e as $,L1e as A,k1e as B,c_ as C,E1e as D,b1e as E,Fx as F,C1e as G,_1e as H,I1e as I,v1e as J,S1e as K,qh as L,B1e as M,j1e as N,z1e as O,eu as P,V1e as Q,kx as R,Qh as S,Lx as T,$1e as U,Yme as V,T1e as W,x1e as X,O1e as Y,R1e as Z,Nh as _,Vk as a,w1e as a0,hb as a1,A1e as a2,M1e as a3,q1e as a4,F1e as a5,g1e as a6,Rue as a7,J1e as a8,y1e as a9,dv as aa,Z1e as ab,rhe as ac,Y1e as b,K1e as c,eue as d,ye as e,Xce as f,dge as g,Ml as h,ui as i,GG as j,cpe as k,xv as l,ns as m,gT as n,Dc as o,El as p,Xs as q,sH as r,Mc as s,n_ as t,tue as u,rue as v,nue as w,iue as x,N1e as y,D1e as z};
